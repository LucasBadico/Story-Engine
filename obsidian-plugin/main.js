/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => StoryEnginePlugin
});
module.exports = __toCommonJS(main_exports);
<<<<<<< HEAD
var import_obsidian19 = require("obsidian");
=======
var import_obsidian18 = require("obsidian");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)

// src/sync/apiUpdateNotifier.ts
var ApiUpdateNotifier = class {
  constructor() {
    this.subscribers = /* @__PURE__ */ new Set();
  }
  subscribe(subscriber) {
    this.subscribers.add(subscriber);
    return () => {
      this.subscribers.delete(subscriber);
    };
  }
  async notify(payload) {
    for (const subscriber of this.subscribers) {
      try {
        await subscriber(payload);
      } catch (err) {
        console.error("Auto sync subscriber failed", err);
      }
    }
  }
};
var apiUpdateNotifier = new ApiUpdateNotifier();

// src/api/client.ts
var StoryEngineClient = class {
  constructor(apiUrl, apiKey, tenantId = "") {
    this.apiUrl = apiUrl;
    this.apiKey = apiKey;
    this.tenantId = tenantId;
    this.mode = "remote";
    this.autoSyncOnApiUpdates = true;
  }
  setTenantId(tenantId) {
    this.tenantId = tenantId.trim();
  }
  setMode(mode) {
    this.mode = mode;
  }
  setAutoSyncOnApiUpdates(enabled) {
    this.autoSyncOnApiUpdates = enabled;
  }
  async request(method, endpoint, body, tenantIdOverride) {
    const url = `${this.apiUrl}${endpoint}`;
    const headers = new Headers();
    headers.set("Content-Type", "application/json");
    if (this.apiKey) {
      headers.set("Authorization", `Bearer ${this.apiKey}`);
    }
    const effectiveTenantId = tenantIdOverride != null ? tenantIdOverride : this.tenantId;
    if (effectiveTenantId) {
      const trimmedTenantId = effectiveTenantId.trim();
      if (trimmedTenantId) {
        headers.set("X-Tenant-ID", trimmedTenantId);
      }
    }
    const options = {
      method,
      headers
    };
    if (body) {
      options.body = JSON.stringify(body);
    }
    const response = await fetch(url, options);
    if (!response.ok) {
      let error;
      try {
        error = await response.json();
      } catch (e) {
        error = {
          error: "unknown_error",
          message: `HTTP ${response.status}: ${response.statusText}`,
          code: "HTTP_ERROR"
        };
      }
      const errorMessage = error.message || error.error || `HTTP ${response.status}: ${response.statusText}`;
      throw new Error(errorMessage);
    }
    return response.json();
  }
  async listStories() {
    if (this.mode === "remote" && (!this.tenantId || !this.tenantId.trim())) {
      throw new Error("Tenant ID is required");
    }
    const response = await this.request(
      "GET",
      "/api/v1/stories"
    );
    return response.stories || [];
  }
  async getStory(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/stories/${id2}`
    );
    return response.story;
  }
  async createStory(title, worldId) {
    if (this.mode === "remote" && (!this.tenantId || !this.tenantId.trim())) {
      throw new Error("Tenant ID is required");
    }
    const body = { title: title.trim() };
    if (worldId) {
      body.world_id = worldId;
    }
    const response = await this.request(
      "POST",
      "/api/v1/stories",
      body
    );
    return response.story;
  }
  async cloneStory(id2) {
    if (!this.tenantId || !this.tenantId.trim()) {
      throw new Error("Tenant ID is required");
    }
    const response = await this.request(
      "POST",
      `/api/v1/stories/${id2}/clone`,
      {}
    );
    return response.story;
  }
  async getTenant(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/tenants/${id2}`
    );
    return response.tenant;
  }
  async testConnection() {
    try {
      await this.request("GET", "/health");
      return true;
    } catch (e) {
      return false;
    }
  }
  async updateStory(id2, title, status) {
    const body = { title: title.trim() };
    if (status) {
      body.status = status;
    }
    const response = await this.request(
      "PUT",
      `/api/v1/stories/${id2}`,
      body
    );
    return response.story;
  }
  async getStoryWithHierarchy(id2) {
    const story = await this.getStory(id2);
    const chapters = await this.getChapters(id2);
    const chaptersWithContent = await Promise.all(
      chapters.map(async (chapter) => {
        const scenes = await this.getScenes(chapter.id);
        const scenesWithBeats = await Promise.all(
          scenes.map(async (scene) => {
            const beats = await this.getBeats(scene.id);
            return { scene, beats };
          })
        );
        return { chapter, scenes: scenesWithBeats };
      })
    );
    return {
      story,
      chapters: chaptersWithContent
    };
  }
  async createChapter(storyId, chapter) {
    const response = await this.request(
      "POST",
      "/api/v1/chapters",
      {
        story_id: storyId,
        number: chapter.number,
        title: chapter.title,
        status: chapter.status
      }
    );
    void this.publishChapterUpdate(response.chapter.id);
    return response.chapter;
  }
  async updateChapter(id2, chapter) {
    const response = await this.request(
      "PUT",
      `/api/v1/chapters/${id2}`,
      chapter
    );
    void this.publishChapterUpdate(response.chapter.id);
    return response.chapter;
  }
  async getChapters(storyId) {
    const response = await this.request(
      "GET",
      `/api/v1/stories/${storyId}/chapters`
    );
    return response.chapters || [];
  }
  async getChapter(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/chapters/${id2}`
    );
    return response.chapter;
  }
  async deleteChapter(id2) {
    await this.request("DELETE", `/api/v1/chapters/${id2}`);
  }
  async createScene(scene) {
    const response = await this.request(
      "POST",
      "/api/v1/scenes",
      scene
    );
    void this.publishSceneTree(response.scene.id);
    return response.scene;
  }
  async updateScene(id2, scene) {
    const response = await this.request(
      "PUT",
      `/api/v1/scenes/${id2}`,
      scene
    );
    void this.publishSceneTree(response.scene.id);
    return response.scene;
  }
  async getScenes(chapterId) {
    const response = await this.request(
      "GET",
      `/api/v1/chapters/${chapterId}/scenes`
    );
    return response.scenes || [];
  }
  async getScene(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/scenes/${id2}`
    );
    return response.scene;
  }
  async deleteScene(id2) {
    await this.request("DELETE", `/api/v1/scenes/${id2}`);
  }
  async createBeat(beat) {
    if (!beat.scene_id) {
      throw new Error("scene_id is required to create a beat");
    }
    const payload = { ...beat };
    if (!payload.order_num || payload.order_num <= 0) {
      const existingBeats = await this.getBeats(beat.scene_id);
      const nextOrder = existingBeats.length > 0 ? Math.max(...existingBeats.map((b) => b.order_num || 0)) + 1 : 1;
      payload.order_num = nextOrder;
    }
    const response = await this.request(
      "POST",
      "/api/v1/beats",
      payload
    );
    void this.publishSceneTree(response.beat.scene_id);
    return response.beat;
  }
  async updateBeat(id2, beat) {
    const response = await this.request(
      "PUT",
      `/api/v1/beats/${id2}`,
      beat
    );
    void this.publishSceneTree(response.beat.scene_id);
    return response.beat;
  }
  async getBeats(sceneId) {
    const response = await this.request(
      "GET",
      `/api/v1/scenes/${sceneId}/beats`
    );
    return response.beats || [];
  }
  async getBeat(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/beats/${id2}`
    );
    return response.beat;
  }
  async deleteBeat(id2) {
    await this.request("DELETE", `/api/v1/beats/${id2}`);
  }
  // Get all versions of a story (for version history)
  async getStoryVersions(rootStoryId) {
    const response = await this.request(
      "GET",
      `/api/v1/stories/${rootStoryId}/versions`
    );
    return response.stories || [];
  }
  async getScenesByStory(storyId) {
    const response = await this.request(
      "GET",
      `/api/v1/stories/${storyId}/scenes`
    );
    return response.scenes || [];
  }
  async moveScene(sceneId, chapterId) {
    const body = {};
    if (chapterId !== null) {
      body.chapter_id = chapterId;
    } else {
      body.chapter_id = null;
    }
    const response = await this.request(
      "PUT",
      `/api/v1/scenes/${sceneId}/move`,
      body
    );
    void this.publishSceneTree(response.scene.id);
    return response.scene;
  }
  async getBeatsByStory(storyId) {
    const response = await this.request(
      "GET",
      `/api/v1/stories/${storyId}/beats`
    );
    return response.beats || [];
  }
  async moveBeat(beatId, sceneId) {
    const response = await this.request(
      "PUT",
      `/api/v1/beats/${beatId}/move`,
      { scene_id: sceneId }
    );
    void this.publishSceneTree(response.beat.scene_id);
    return response.beat;
  }
  async getContentBlocks(chapterId) {
    const response = await this.request(
      "GET",
      `/api/v1/chapters/${chapterId}/content-blocks`
    );
    return response.content_blocks || [];
  }
  async getContentBlock(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/content-blocks/${id2}`
    );
    return response.content_block;
  }
  async createContentBlock(chapterId, contentBlock) {
    const response = await this.request(
      "POST",
      `/api/v1/chapters/${chapterId}/content-blocks`,
      contentBlock
    );
    void this.publishContentBlockUpdate(response.content_block.id);
    return response.content_block;
  }
  async updateContentBlock(id2, contentBlock) {
    const response = await this.request(
      "PUT",
      `/api/v1/content-blocks/${id2}`,
      contentBlock
    );
    void this.publishContentBlockUpdate(response.content_block.id);
    return response.content_block;
  }
  async deleteContentBlock(id2) {
    await this.request("DELETE", `/api/v1/content-blocks/${id2}`);
  }
  async getContentAnchors(contentBlockId) {
    const response = await this.request(
      "GET",
      `/api/v1/content-blocks/${contentBlockId}/anchors`
    );
    return response.anchors || [];
  }
  async getContentBlocksByScene(sceneId) {
    const response = await this.request(
      "GET",
      `/api/v1/scenes/${sceneId}/content-blocks`
    );
    return response.content_blocks || [];
  }
  async getContentBlocksByBeat(beatId) {
    const response = await this.request(
      "GET",
      `/api/v1/beats/${beatId}/content-blocks`
    );
    return response.content_blocks || [];
  }
  async createContentAnchor(contentBlockId, entityType, entityId) {
    const response = await this.request(
      "POST",
      `/api/v1/content-blocks/${contentBlockId}/anchors`,
      {
        entity_type: entityType,
        entity_id: entityId
      }
    );
    return response.anchor;
  }
  async deleteContentAnchor(id2) {
    await this.request("DELETE", `/api/v1/content-anchors/${id2}`);
  }
  async getWorlds() {
    const response = await this.request(
      "GET",
      "/api/v1/worlds"
    );
    return response.worlds || [];
  }
  async getWorld(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${id2}`
    );
    return response.world;
  }
  async createWorld(name, description, genre) {
    const response = await this.request(
      "POST",
      "/api/v1/worlds",
      {
        name: name.trim(),
        description: description.trim(),
        genre: genre.trim()
      }
    );
    return response.world;
  }
  async updateWorld(id2, name, description, genre) {
    const response = await this.request(
      "PUT",
      `/api/v1/worlds/${id2}`,
      {
        name: name.trim(),
        description: description.trim(),
        genre: genre.trim()
      }
    );
    return response.world;
  }
  async getRPGSystems() {
    const response = await this.request(
      "GET",
      "/api/v1/rpg-systems"
    );
    return response.rpg_systems || [];
  }
  async getRPGSystem(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/rpg-systems/${id2}`
    );
    return response.rpg_system;
  }
  // Character methods
  async getCharacters(worldId) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${worldId}/characters`
    );
    return response.characters || [];
  }
  async getCharacter(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/characters/${id2}`
    );
    return response.character;
  }
  async createCharacter(worldId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/worlds/${worldId}/characters`,
      data
    );
    return response.character;
  }
  async updateCharacter(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/characters/${id2}`,
      data
    );
    return response.character;
  }
  async deleteCharacter(id2) {
    await this.request("DELETE", `/api/v1/characters/${id2}`);
  }
  // Location methods
  async getLocations(worldId) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${worldId}/locations`
    );
    return response.locations || [];
  }
  async getLocation(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/locations/${id2}`
    );
    return response.location;
  }
  async createLocation(worldId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/worlds/${worldId}/locations`,
      data
    );
    return response.location;
  }
  async updateLocation(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/locations/${id2}`,
      data
    );
    return response.location;
  }
  async deleteLocation(id2) {
    await this.request("DELETE", `/api/v1/locations/${id2}`);
  }
  // Artifact methods
  async getArtifacts(worldId) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${worldId}/artifacts`
    );
    return response.artifacts || [];
  }
  async getArtifact(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/artifacts/${id2}`
    );
    return response.artifact;
  }
  async createArtifact(worldId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/worlds/${worldId}/artifacts`,
      data
    );
    return response.artifact;
  }
  async updateArtifact(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/artifacts/${id2}`,
      data
    );
    return response.artifact;
  }
  async deleteArtifact(id2) {
    await this.request("DELETE", `/api/v1/artifacts/${id2}`);
  }
  // Event methods
  async getEvents(worldId) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${worldId}/events`
    );
    return response.events || [];
  }
  async getEvent(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/events/${id2}`
    );
    return response.event;
  }
  async createEvent(worldId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/worlds/${worldId}/events`,
      data
    );
    return response.event;
  }
  async updateEvent(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/events/${id2}`,
      data
    );
    return response.event;
  }
  async deleteEvent(id2) {
    await this.request("DELETE", `/api/v1/events/${id2}`);
  }
  async moveEvent(id2, parentId) {
    const response = await this.request(
      "PUT",
      `/api/v1/events/${id2}/move`,
      { parent_id: parentId }
    );
    return response.event;
  }
  // Trait methods
  async getTraits() {
    const response = await this.request(
      "GET",
      "/api/v1/traits"
    );
    return response.traits || [];
  }
  async getTrait(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/traits/${id2}`
    );
    return response.trait;
  }
  async createTrait(data) {
    const response = await this.request(
      "POST",
      "/api/v1/traits",
      data
    );
    return response.trait;
  }
  async updateTrait(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/traits/${id2}`,
      data
    );
    return response.trait;
  }
  async deleteTrait(id2) {
    await this.request("DELETE", `/api/v1/traits/${id2}`);
  }
  // Archetype methods
  async getArchetypes() {
    const response = await this.request(
      "GET",
      "/api/v1/archetypes"
    );
    return response.archetypes || [];
  }
  async getArchetype(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/archetypes/${id2}`
    );
    return response.archetype;
  }
  async createArchetype(data) {
    const response = await this.request(
      "POST",
      "/api/v1/archetypes",
      data
    );
    return response.archetype;
  }
  async updateArchetype(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/archetypes/${id2}`,
      data
    );
    return response.archetype;
  }
  async deleteArchetype(id2) {
    await this.request("DELETE", `/api/v1/archetypes/${id2}`);
  }
  async getArchetypeTraits(archetypeId) {
    const response = await this.request(
      "GET",
      `/api/v1/archetypes/${archetypeId}/traits`
    );
    return response.archetype_traits || [];
  }
  async addArchetypeTrait(archetypeId, traitId, defaultValue) {
    await this.request(
      "POST",
      `/api/v1/archetypes/${archetypeId}/traits`,
      {
        trait_id: traitId,
        default_value: defaultValue
      }
    );
  }
  async removeArchetypeTrait(archetypeId, traitId) {
    await this.request(
      "DELETE",
      `/api/v1/archetypes/${archetypeId}/traits/${traitId}`
    );
  }
  // Faction methods
  async getFactions(worldId) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${worldId}/factions`
    );
    return response.factions || [];
  }
  async getFaction(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/factions/${id2}`
    );
    return response.faction;
  }
  async createFaction(worldId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/worlds/${worldId}/factions`,
      data
    );
    return response.faction;
  }
  async updateFaction(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/factions/${id2}`,
      data
    );
    return response.faction;
  }
  async deleteFaction(id2) {
    await this.request("DELETE", `/api/v1/factions/${id2}`);
  }
  async getFactionChildren(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/factions/${id2}/children`
    );
    return response.factions || [];
  }
  async getFactionReferences(factionId) {
    const response = await this.request(
      "GET",
      `/api/v1/factions/${factionId}/references`
    );
    return response.references || [];
  }
  async addFactionReference(factionId, entityType, entityId, role, notes) {
    const response = await this.request(
      "POST",
      `/api/v1/factions/${factionId}/references`,
      {
        entity_type: entityType,
        entity_id: entityId,
        role,
        notes
      }
    );
    return response.reference;
  }
  async updateFactionReference(id2, role, notes) {
    const response = await this.request(
      "PUT",
      `/api/v1/faction-references/${id2}`,
      {
        role,
        notes
      }
    );
    return response.reference;
  }
  async removeFactionReference(factionId, entityType, entityId) {
    await this.request(
      "DELETE",
      `/api/v1/factions/${factionId}/references/${entityType}/${entityId}`
    );
  }
  // Lore methods
  async getLores(worldId) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${worldId}/lores`
    );
    return response.lores || [];
  }
  async getLore(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/lores/${id2}`
    );
    return response.lore;
  }
  async createLore(worldId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/worlds/${worldId}/lores`,
      data
    );
    return response.lore;
  }
  async updateLore(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/lores/${id2}`,
      data
    );
    return response.lore;
  }
  async deleteLore(id2) {
    await this.request("DELETE", `/api/v1/lores/${id2}`);
  }
  async getLoreChildren(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/lores/${id2}/children`
    );
    return response.lores || [];
  }
  async getLoreReferences(loreId) {
    const response = await this.request(
      "GET",
      `/api/v1/lores/${loreId}/references`
    );
    return response.references || [];
  }
  async addLoreReference(loreId, entityType, entityId, relationshipType, notes) {
    const response = await this.request(
      "POST",
      `/api/v1/lores/${loreId}/references`,
      {
        entity_type: entityType,
        entity_id: entityId,
        relationship_type: relationshipType,
        notes
      }
    );
    return response.reference;
  }
  async updateLoreReference(id2, relationshipType, notes) {
    const response = await this.request(
      "PUT",
      `/api/v1/lore-references/${id2}`,
      {
        relationship_type: relationshipType,
        notes
      }
    );
    return response.reference;
  }
  async removeLoreReference(loreId, entityType, entityId) {
    await this.request(
      "DELETE",
      `/api/v1/lores/${loreId}/references/${entityType}/${entityId}`
    );
  }
  // Character Traits methods
  async getCharacterTraits(characterId) {
    const response = await this.request(
      "GET",
      `/api/v1/characters/${characterId}/traits`
    );
    return response.character_traits || [];
  }
  async addCharacterTrait(characterId, traitId, value, notes) {
    const response = await this.request(
      "POST",
      `/api/v1/characters/${characterId}/traits`,
      {
        trait_id: traitId,
        value,
        notes
      }
    );
    return response.character_trait;
  }
  async updateCharacterTrait(characterId, traitId, value, notes) {
    const response = await this.request(
      "PUT",
      `/api/v1/characters/${characterId}/traits/${traitId}`,
      {
        value,
        notes
      }
    );
    return response.character_trait;
  }
  async removeCharacterTrait(characterId, traitId) {
    await this.request(
      "DELETE",
      `/api/v1/characters/${characterId}/traits/${traitId}`
    );
  }
  // Character Events methods
  async getCharacterEvents(characterId) {
    const response = await this.request(
      "GET",
      `/api/v1/characters/${characterId}/events`
    );
    return response.event_characters || [];
  }
  // Character Relationships methods
  async getCharacterRelationships(characterId) {
    const response = await this.request(
      "GET",
      `/api/v1/characters/${characterId}/relationships`
    );
    return response.relationships || [];
  }
  async createCharacterRelationship(characterId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/characters/${characterId}/relationships`,
      data
    );
    return response.relationship;
  }
  async updateCharacterRelationship(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/character-relationships/${id2}`,
      data
    );
    return response.relationship;
  }
  async deleteCharacterRelationship(id2) {
    await this.request("DELETE", `/api/v1/character-relationships/${id2}`);
  }
  async createEntityRelation(input) {
    var _a;
    const response = await this.request(
      "POST",
      "/api/v1/relations",
      {
        world_id: input.world_id,
        source_type: input.source_type,
        source_id: input.source_id,
        target_type: input.target_type,
        target_id: input.target_id,
        relation_type: input.relation_type,
        summary: input.summary,
        create_mirror: (_a = input.create_mirror) != null ? _a : false
      }
    );
    return response.relation;
  }
  // Event Characters/References methods
  async getEventCharacters(eventId) {
    const response = await this.request(
      "GET",
      `/api/v1/events/${eventId}/characters`
    );
    return response.event_characters || [];
  }
  async addEventCharacter(eventId, characterId, role) {
    const response = await this.request(
      "POST",
      `/api/v1/events/${eventId}/characters`,
      {
        character_id: characterId,
        role
      }
    );
    return response.event_character;
  }
  async removeEventCharacter(eventId, characterId) {
    await this.request(
      "DELETE",
      `/api/v1/events/${eventId}/characters/${characterId}`
    );
  }
  async getEventReferences(eventId) {
    const response = await this.request(
      "GET",
      `/api/v1/events/${eventId}/references`
    );
    return response.references || [];
  }
  async addEventReference(eventId, entityType, entityId, relationshipType, notes) {
    const response = await this.request(
      "POST",
      `/api/v1/events/${eventId}/references`,
      {
        entity_type: entityType,
        entity_id: entityId,
        relationship_type: relationshipType,
        notes
      }
    );
    return response.reference;
  }
  async updateEventReference(id2, relationshipType, notes) {
    const response = await this.request(
      "PUT",
      `/api/v1/event-references/${id2}`,
      {
        relationship_type: relationshipType,
        notes
      }
    );
    return response.reference;
  }
  async removeEventReference(eventId, entityType, entityId) {
    await this.request(
      "DELETE",
      `/api/v1/events/${eventId}/references/${entityType}/${entityId}`
    );
  }
  // Scene References methods
  async getSceneReferences(sceneId) {
    const response = await this.request(
      "GET",
      `/api/v1/scenes/${sceneId}/references`
    );
    return response.references || [];
  }
  async addSceneReference(sceneId, entityType, entityId) {
    const response = await this.request(
      "POST",
      `/api/v1/scenes/${sceneId}/references`,
      {
        entity_type: entityType,
        entity_id: entityId
      }
    );
    return response.reference;
  }
  async removeSceneReference(sceneId, entityType, entityId) {
    await this.request(
      "DELETE",
      `/api/v1/scenes/${sceneId}/references/${entityType}/${entityId}`
    );
  }
  // Timeline methods
  async getTimeline(worldId, fromPos, toPos) {
    const queryParams = new URLSearchParams();
    if (fromPos !== void 0) {
      queryParams.append("from_pos", fromPos.toString());
    }
    if (toPos !== void 0) {
      queryParams.append("to_pos", toPos.toString());
    }
    const queryString = queryParams.toString();
    const endpoint = `/api/v1/worlds/${worldId}/timeline${queryString ? `?${queryString}` : ""}`;
    const response = await this.request(
      "GET",
      endpoint
    );
    return response.events || [];
  }
  // World TimeConfig methods
  async updateWorldTimeConfig(worldId, timeConfig) {
    const response = await this.request(
      "PUT",
      `/api/v1/worlds/${worldId}/time-config`,
      timeConfig
    );
    return response.world;
  }
  isAutoSyncEnabled() {
    return this.autoSyncOnApiUpdates;
  }
  async publishChapterUpdate(chapterId) {
    if (!this.isAutoSyncEnabled()) {
      return;
    }
    try {
      const chapter = await this.getChapter(chapterId);
      const story = await this.getStory(chapter.story_id);
      const scenes = await this.getScenes(chapterId);
      const scenesWithBeats = await Promise.all(
        scenes.map(async (scene) => {
          const beats = await this.getBeats(scene.id);
          return { scene, beats };
        })
      );
      const contentBlocks = await this.getContentBlocks(chapterId);
      const contentBlockRefs = [];
      for (const block of contentBlocks) {
        const refs = await this.getContentAnchors(block.id);
        contentBlockRefs.push(...refs);
      }
      await this.notifyEntityUpdate({
        type: "chapter",
        story,
        chapter,
        scenes: scenesWithBeats,
        contentBlocks,
        contentBlockRefs
      });
    } catch (err) {
      console.error("Failed to auto-sync chapter update", err);
    }
  }
  async publishSceneTree(sceneId) {
    if (!this.isAutoSyncEnabled()) {
      return;
    }
    try {
      const scene = await this.getScene(sceneId);
      if (scene.chapter_id) {
        await this.publishChapterUpdate(scene.chapter_id);
        return;
      }
      const story = await this.getStory(scene.story_id);
      const beats = await this.getBeats(scene.id);
      const sceneContentBlocks = await this.getContentBlocksByScene(scene.id);
      const beatContentBlocks = {};
      for (const beat of beats) {
        beatContentBlocks[beat.id] = await this.getContentBlocksByBeat(beat.id);
      }
      await this.notifyEntityUpdate({
        type: "scene",
        story,
        scene,
        beats,
        sceneContentBlocks,
        beatContentBlocks
      });
    } catch (err) {
      console.error("Failed to auto-sync scene update", err);
    }
  }
  async publishContentBlockUpdate(contentBlockId) {
    if (!this.isAutoSyncEnabled()) {
      return;
    }
    try {
      const contentBlock = await this.getContentBlock(contentBlockId);
      let story = null;
      if (contentBlock.chapter_id) {
        const chapter = await this.getChapter(contentBlock.chapter_id);
        story = await this.getStory(chapter.story_id);
      } else {
        const anchors = await this.getContentAnchors(contentBlock.id);
        const sceneAnchor = anchors.find((anchor) => anchor.entity_type === "scene");
        if (sceneAnchor) {
          const scene = await this.getScene(sceneAnchor.entity_id);
          story = await this.getStory(scene.story_id);
        }
      }
      if (!story) {
        console.warn("Unable to resolve story for content block auto-sync", contentBlockId);
        return;
      }
      await this.notifyEntityUpdate({
        type: "content",
        story,
        contentBlock
      });
    } catch (err) {
      console.error("Failed to auto-sync content block update", err);
    }
  }
  async notifyEntityUpdate(payload) {
    await apiUpdateNotifier.notify(payload);
  }
};

// src/settings.ts
var import_obsidian = require("obsidian");
var StoryEngineSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Story Engine Settings" });
    let tenantIdSetting = null;
    let videoLinkSetting = null;
    let conflictResolutionSetting = null;
    const modeSetting = new import_obsidian.Setting(containerEl).setName("Connection Mode").setDesc("Choose between local (offline) or remote (cloud) mode").addDropdown(
      (dropdown) => dropdown.addOption("local", "Local").addOption("remote", "Remote").setValue(this.plugin.settings.mode || "local").onChange(async (value) => {
        this.plugin.settings.mode = value;
        if (value === "local") {
          this.plugin.settings.conflictResolution = "local";
          if (conflictResolutionSetting) {
            conflictResolutionSetting.settingEl.style.display = "none";
          }
        } else {
          if (conflictResolutionSetting) {
            conflictResolutionSetting.settingEl.style.display = "";
          }
        }
        if (tenantIdSetting) {
          tenantIdSetting.settingEl.style.display = value === "remote" ? "" : "none";
        }
        if (videoLinkSetting) {
          videoLinkSetting.settingEl.style.display = value === "local" ? "" : "none";
        }
        if (this.plugin.apiClient) {
          this.plugin.apiClient.setMode(value);
        }
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("API URL").setDesc("The base URL of the Story Engine API").addText(
      (text) => text.setPlaceholder("http://localhost:8080").setValue(this.plugin.settings.apiUrl).onChange(async (value) => {
        this.plugin.settings.apiUrl = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("LLM Gateway URL").setDesc("The base URL of the LLM Gateway service").addText(
      (text) => text.setPlaceholder("http://localhost:8081").setValue(this.plugin.settings.llmGatewayUrl).onChange(async (value) => {
        this.plugin.settings.llmGatewayUrl = value.trim();
        await this.plugin.saveSettings();
      })
    );
    tenantIdSetting = new import_obsidian.Setting(containerEl).setName("Tenant ID").setDesc("Your workspace tenant ID (UUID format) - Required in remote mode").addText(
      (text) => text.setPlaceholder("00000000-0000-0000-0000-000000000000").setValue(this.plugin.settings.tenantId || "").onChange(async (value) => {
        this.plugin.settings.tenantId = value.trim();
        if (this.plugin.apiClient) {
          this.plugin.apiClient.setTenantId(value.trim());
        }
        await this.plugin.saveSettings();
      })
    );
    if (this.plugin.settings.mode === "local") {
      tenantIdSetting.settingEl.style.display = "none";
    }
    const videoUrl = this.plugin.settings.localModeVideoUrl || "https://example.com/setup-video";
    videoLinkSetting = new import_obsidian.Setting(containerEl).setName("Setup Guide").setDesc(`\u{1F4F9} Learn how to setup local mode: ${videoUrl}`).addButton((button) => {
      button.setButtonText("Open Video").onClick(() => {
        window.open(videoUrl, "_blank");
      });
    });
    if (this.plugin.settings.mode === "remote") {
      videoLinkSetting.settingEl.style.display = "none";
    }
    new import_obsidian.Setting(containerEl).setName("API Key").setDesc("API key for authentication (optional for MVP)").addText((text) => {
      text.setPlaceholder("Enter API key").setValue(this.plugin.settings.apiKey).inputEl.type = "password";
      text.onChange(async (value) => {
        this.plugin.settings.apiKey = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Sync Folder Path").setDesc("Folder path where synced stories will be stored").addText(
      (text) => text.setPlaceholder("Stories").setValue(this.plugin.settings.syncFolderPath || "Stories").onChange(async (value) => {
        this.plugin.settings.syncFolderPath = value.trim() || "Stories";
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Auto Version Snapshots").setDesc("Automatically create version snapshots when syncing").addToggle(
      (toggle) => {
        var _a;
        return toggle.setValue((_a = this.plugin.settings.autoVersionSnapshots) != null ? _a : true).onChange(async (value) => {
          this.plugin.settings.autoVersionSnapshots = value;
          await this.plugin.saveSettings();
        });
      }
    );
    new import_obsidian.Setting(containerEl).setName("Auto Sync on API Updates").setDesc("Apply API update payloads directly to local files when available").addToggle(
      (toggle) => {
        var _a;
        return toggle.setValue((_a = this.plugin.settings.autoSyncOnApiUpdates) != null ? _a : true).onChange(async (value) => {
          this.plugin.settings.autoSyncOnApiUpdates = value;
          await this.plugin.saveSettings();
        });
      }
    );
    new import_obsidian.Setting(containerEl).setName("Auto Push on Blur/Idle").setDesc("When you leave a chapter/scene/beat or stay idle for 1 min, push changes upstream automatically").addToggle(
      (toggle) => {
        var _a;
        return toggle.setValue((_a = this.plugin.settings.autoPushOnFileBlur) != null ? _a : true).onChange(async (value) => {
          this.plugin.settings.autoPushOnFileBlur = value;
          await this.plugin.saveSettings();
        });
      }
    );
    conflictResolutionSetting = new import_obsidian.Setting(containerEl).setName("Conflict Resolution").setDesc("How to resolve conflicts when both local and service have changes").addDropdown(
      (dropdown) => dropdown.addOption("service", "Service Wins").addOption("local", "Local Wins").addOption("manual", "Manual (Newer Wins)").setValue(this.plugin.settings.conflictResolution || "service").onChange(async (value) => {
        this.plugin.settings.conflictResolution = value;
        await this.plugin.saveSettings();
      })
    );
    if (this.plugin.settings.mode === "local") {
      conflictResolutionSetting.settingEl.style.display = "none";
    }
    new import_obsidian.Setting(containerEl).setName("Show Help Box in MD Files").setDesc("Enable/disable info/help boxes in markdown files").addToggle(
      (toggle) => {
        var _a;
        return toggle.setValue((_a = this.plugin.settings.showHelpBox) != null ? _a : true).onChange(async (value) => {
          this.plugin.settings.showHelpBox = value;
          await this.plugin.saveSettings();
        });
      }
    );
    new import_obsidian.Setting(containerEl).setName("World Sidebar Position").setDesc("Choose whether the world sidebar appears on the left or right side").addDropdown(
      (dropdown) => dropdown.addOption("left", "Left").addOption("right", "Right").setValue(this.plugin.settings.sidebarPosition || "left").onChange(async (value) => {
        this.plugin.settings.sidebarPosition = value;
        await this.plugin.saveSettings();
        this.app.workspace.trigger("layout-change");
      })
    );
    new import_obsidian.Setting(containerEl).setName("Unsplash Access Key").setDesc("Application ID / Access Key for Unsplash API (get one at https://unsplash.com/developers)").addText((text) => {
      text.setPlaceholder("Enter Unsplash access key").setValue(this.plugin.settings.unsplashAccessKey || "").inputEl.type = "password";
      text.onChange(async (value) => {
        this.plugin.settings.unsplashAccessKey = value.trim();
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Unsplash Secret Key").setDesc("Secret Key for Unsplash API (optional, needed for some operations)").addText((text) => {
      text.setPlaceholder("Enter Unsplash secret key").setValue(this.plugin.settings.unsplashSecretKey || "").inputEl.type = "password";
      text.onChange(async (value) => {
        this.plugin.settings.unsplashSecretKey = value.trim();
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Test Connection").setDesc("Test connection to the Story Engine API").addButton(
      (button) => button.setButtonText("Test").onClick(async () => {
        button.setButtonText("Testing...");
        button.setDisabled(true);
        try {
          const result = await this.plugin.apiClient.testConnection();
          if (result) {
            button.setButtonText("Success!");
            setTimeout(() => {
              button.setButtonText("Test");
              button.setDisabled(false);
            }, 2e3);
          } else {
            button.setButtonText("Failed");
            setTimeout(() => {
              button.setButtonText("Test");
              button.setDisabled(false);
            }, 2e3);
          }
        } catch (err) {
          button.setButtonText("Error");
          setTimeout(() => {
            button.setButtonText("Test");
            button.setDisabled(false);
          }, 2e3);
        }
      })
    );
  }
};

// src/commands.ts
var import_obsidian3 = require("obsidian");

// src/views/StorySyncModal.ts
var import_obsidian2 = require("obsidian");
var StorySyncModal = class extends import_obsidian2.Modal {
  constructor(plugin, mode) {
    super(plugin.app);
    this.stories = [];
    this.loading = true;
    this.error = null;
    this.plugin = plugin;
    this.mode = mode;
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    const title = this.mode === "pull" ? "Sync Story from Service" : "Push Story to Service";
    contentEl.createEl("h2", { text: title });
    await this.loadStories();
    if (this.loading) {
      contentEl.createEl("p", { text: "Loading stories..." });
      return;
    }
    if (this.error) {
      contentEl.createEl("p", {
        text: `Error: ${this.error}`,
        cls: "story-engine-error"
      });
      return;
    }
    if (this.stories.length === 0) {
      contentEl.createEl("p", { text: "No stories found." });
      return;
    }
    const storiesList = contentEl.createEl("div", { cls: "story-engine-list" });
    for (const story of this.stories) {
      const storyItem = storiesList.createEl("div", {
        cls: "story-engine-item"
      });
      const title2 = storyItem.createEl("div", {
        cls: "story-engine-title",
        text: story.title
      });
      const meta = storyItem.createEl("div", {
        cls: "story-engine-meta"
      });
      meta.createEl("span", {
        text: `Version ${story.version_number}`
      });
      meta.createEl("span", {
        text: `Status: ${story.status}`
      });
      storyItem.onclick = async () => {
        this.close();
        try {
          if (this.mode === "pull") {
            await this.plugin.syncService.pullStory(story.id);
          } else {
            const folderPath = this.plugin.fileManager.getStoryFolderPath(
              story.title
            );
            await this.plugin.syncService.pushStory(folderPath);
          }
        } catch (err) {
          const errorMessage = err instanceof Error ? err.message : "Failed to sync story";
          new import_obsidian2.Notice(`Error: ${errorMessage}`, 5e3);
        }
      };
    }
  }
  async loadStories() {
    this.loading = true;
    this.error = null;
    try {
      if (!this.plugin.settings.tenantId) {
        this.error = "Tenant ID not configured";
        this.loading = false;
        return;
      }
      this.stories = await this.plugin.apiClient.listStories();
    } catch (err) {
      this.error = err instanceof Error ? err.message : "Unknown error";
    } finally {
      this.loading = false;
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/commands.ts
function registerCommands(plugin) {
  plugin.addCommand({
    id: "list-stories",
    name: "List Stories",
    callback: () => {
      plugin.activateView();
    }
  });
  plugin.addCommand({
    id: "create-story",
    name: "Create Story",
    callback: () => {
      plugin.createStoryCommand();
    }
  });
  plugin.addCommand({
    id: "sync-story-from-service",
    name: "Sync Story from Service",
    callback: () => {
      new StorySyncModal(plugin, "pull").open();
    }
  });
  plugin.addCommand({
    id: "push-story-to-service",
    name: "Push Story to Service",
    callback: () => {
      new StorySyncModal(plugin, "push").open();
    }
  });
  plugin.addCommand({
    id: "sync-all-stories",
    name: "Sync All Stories",
    callback: async () => {
      if (plugin.settings.mode === "remote" && !plugin.settings.tenantId) {
        new import_obsidian3.Notice("Please configure Tenant ID in settings", 5e3);
        return;
      }
      try {
        new import_obsidian3.Notice("Syncing all stories...");
        await plugin.syncService.pullAllStories();
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to sync stories";
        new import_obsidian3.Notice(`Error: ${errorMessage}`, 5e3);
      }
    }
  });
  plugin.addCommand({
    id: "extract-entities-from-selection",
    name: "Extract Entities and Relations from Selection",
    editorCallback: (editor) => {
      const selection2 = editor.getSelection();
      if (!selection2.trim()) {
        new import_obsidian3.Notice("Select text to extract entities and relations", 3e3);
        return;
      }
      plugin.extractSelectionCommand(selection2, true);
    }
  });
  plugin.addCommand({
    id: "extract-entities-only-from-selection",
    name: "Extract Entities Only from Selection",
    editorCallback: (editor) => {
      const selection2 = editor.getSelection();
      if (!selection2.trim()) {
        new import_obsidian3.Notice("Select text to extract entities", 3e3);
        return;
      }
      plugin.extractSelectionCommand(selection2, false);
    }
  });
}

// src/views/CreateStoryModal.ts
var import_obsidian5 = require("obsidian");

// src/views/CreateWorldModal.ts
var import_obsidian4 = require("obsidian");
var CreateWorldModal = class extends import_obsidian4.Modal {
  constructor(app, onSubmit) {
    super(app);
    this.name = "";
    this.description = "";
    this.genre = "";
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Create New World" });
    new import_obsidian4.Setting(contentEl).setName("World Name").setDesc("Enter the name for your new world").addText(
      (text) => text.setPlaceholder("My New World").setValue(this.name).onChange((value) => {
        this.name = value;
      }).inputEl.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          const descriptionInput = contentEl.querySelector("textarea");
          if (descriptionInput) {
            descriptionInput.focus();
          }
        }
      })
    );
    new import_obsidian4.Setting(contentEl).setName("Description").setDesc("Enter a description for your world").addTextArea(
      (text) => text.setPlaceholder("A brief description of your world...").setValue(this.description).onChange((value) => {
        this.description = value;
      })
    );
    new import_obsidian4.Setting(contentEl).setName("Genre").setDesc("Enter the genre of your world").addText(
      (text) => text.setPlaceholder("Fantasy, Sci-Fi, Contemporary, etc.").setValue(this.genre).onChange((value) => {
        this.genre = value;
      }).inputEl.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          this.submit();
        }
      })
    );
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const createButton = buttonContainer.createEl("button", {
      text: "Create",
      cls: "mod-cta"
    });
    createButton.addEventListener("click", () => this.submit());
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.addEventListener("click", () => this.close());
    const nameInput = contentEl.querySelector("input");
    if (nameInput) {
      nameInput.focus();
    }
  }
  submit() {
    const trimmedName = this.name.trim();
    const trimmedDescription = this.description.trim();
    const trimmedGenre = this.genre.trim();
    if (!trimmedName) {
      new import_obsidian4.Notice("Please enter a world name", 3e3);
      return;
    }
    if (!trimmedGenre) {
      new import_obsidian4.Notice("Please enter a genre", 3e3);
      return;
    }
    this.close();
    this.onSubmit(trimmedName, trimmedDescription, trimmedGenre);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/CreateStoryModal.ts
var CreateStoryModal = class extends import_obsidian5.Modal {
  constructor(app, plugin, onSubmit) {
    super(app);
    this.title = "";
    this.selectedWorldId = "";
    this.shouldSync = true;
    this.worlds = [];
    this.plugin = plugin;
    this.onSubmit = onSubmit;
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Create New Story" });
    try {
      this.worlds = await this.plugin.apiClient.getWorlds();
    } catch (err) {
      console.error("Failed to load worlds:", err);
      this.worlds = [];
    }
    new import_obsidian5.Setting(contentEl).setName("Story Title").setDesc("Enter the title for your new story").addText(
      (text) => text.setPlaceholder("My New Story").setValue(this.title).onChange((value) => {
        this.title = value;
      }).inputEl.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          this.submit();
        }
      })
    );
    const worldOptions = {
      "": "No World"
    };
    for (const world of this.worlds) {
      worldOptions[world.id] = world.name;
    }
    worldOptions["__create_new__"] = "Create new world...";
    new import_obsidian5.Setting(contentEl).setName("World").setDesc("Select a world for this story (optional)").addDropdown((dropdown) => {
      for (const [value, label] of Object.entries(worldOptions)) {
        dropdown.addOption(value, label);
      }
      dropdown.setValue(this.selectedWorldId || "");
      dropdown.onChange(async (value) => {
        if (value === "__create_new__") {
          new CreateWorldModal(this.app, async (name, description, genre) => {
            try {
              const newWorld = await this.plugin.apiClient.createWorld(name, description, genre);
              this.worlds.push(newWorld);
              this.onClose();
              this.onOpen();
              this.selectedWorldId = newWorld.id;
            } catch (err) {
              const errorMessage = err instanceof Error ? err.message : "Failed to create world";
              new import_obsidian5.Notice(`Error: ${errorMessage}`, 5e3);
            }
          }).open();
        } else {
          this.selectedWorldId = value;
        }
      });
    });
    new import_obsidian5.Setting(contentEl).setName("Sync to Obsidian").setDesc("Automatically sync the story files to your vault after creation").addToggle(
      (toggle) => toggle.setValue(this.shouldSync).onChange((value) => {
        this.shouldSync = value;
      })
    );
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const createButton = buttonContainer.createEl("button", {
      text: "Create",
      cls: "mod-cta"
    });
    createButton.addEventListener("click", () => this.submit());
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.addEventListener("click", () => this.close());
    const titleInput = contentEl.querySelector("input");
    if (titleInput) {
      titleInput.focus();
    }
  }
  submit() {
    const trimmedTitle = this.title.trim();
    if (!trimmedTitle) {
      new import_obsidian5.Notice("Please enter a story title", 3e3);
      return;
    }
    this.close();
    const worldId = this.selectedWorldId && this.selectedWorldId !== "__create_new__" ? this.selectedWorldId : void 0;
    this.onSubmit(trimmedTitle, worldId, this.shouldSync);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/ExtractConfigModal.ts
var import_obsidian6 = require("obsidian");
var ENTITY_TYPE_OPTIONS = [
  { value: "character", label: "Character" },
  { value: "location", label: "Location" },
  { value: "artefact", label: "Artefact" },
  { value: "faction", label: "Faction" },
  { value: "event", label: "Event" }
];
var ExtractConfigModal = class _ExtractConfigModal extends import_obsidian6.Modal {
  constructor(app, defaultTypes, defaultIncludeRelations) {
    super(app);
    this.resolve = null;
    this.selectedTypes = /* @__PURE__ */ new Set();
    this.includeRelations = true;
    defaultTypes.forEach((type2) => this.selectedTypes.add(type2));
    this.includeRelations = defaultIncludeRelations;
  }
  static open(app, defaultTypes, defaultIncludeRelations) {
    return new Promise((resolve) => {
      const modal = new _ExtractConfigModal(
        app,
        defaultTypes,
        defaultIncludeRelations
      );
      modal.resolve = resolve;
      modal.open();
    });
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h3", { text: "Extract Configuration" });
    contentEl.createEl("p", {
      text: "Choose which entity types to extract and whether to include relations."
    });
    const typeBlock = contentEl.createDiv({ cls: "story-engine-extract-config" });
    typeBlock.createEl("div", {
      text: "Entity types",
      cls: "story-engine-extract-label"
    });
    ENTITY_TYPE_OPTIONS.forEach((option) => {
      const row = typeBlock.createDiv({
        cls: "story-engine-extract-config-row"
      });
      const checkbox = row.createEl("input", {
        type: "checkbox"
      });
      checkbox.checked = this.selectedTypes.has(option.value);
      checkbox.onchange = () => {
        if (checkbox.checked) {
          this.selectedTypes.add(option.value);
        } else {
          this.selectedTypes.delete(option.value);
        }
      };
      row.createEl("span", { text: option.label });
    });
    const relationRow = contentEl.createDiv({
      cls: "story-engine-extract-config-row"
    });
    const relationsCheckbox = relationRow.createEl("input", {
      type: "checkbox"
    });
    relationsCheckbox.checked = this.includeRelations;
    relationsCheckbox.onchange = () => {
      this.includeRelations = relationsCheckbox.checked;
    };
    relationRow.createEl("span", { text: "Include relations" });
    const buttonContainer = contentEl.createDiv({
      cls: "modal-button-container"
    });
    const submitButton = buttonContainer.createEl("button", {
      text: "Start Extraction",
      cls: "mod-cta"
    });
    submitButton.onclick = () => this.submit();
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.onclick = () => this.cancel();
  }
  submit() {
    const types = Array.from(this.selectedTypes);
    if (types.length === 0) {
      new import_obsidian6.Notice("Select at least one entity type.", 3e3);
      return;
    }
    if (this.resolve) {
      this.resolve({
        entityTypes: types,
        includeRelations: this.includeRelations
      });
    }
    this.close();
  }
  cancel() {
    if (this.resolve) {
      this.resolve(null);
    }
    this.close();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/sync/fileManager.ts
var import_obsidian7 = require("obsidian");
var FileManager = class {
  constructor(vault, baseFolder) {
    this.vault = vault;
    this.baseFolder = baseFolder;
  }
  // Expose vault for sync operations
  getVault() {
    return this.vault;
  }
  // Get the folder path for a specific story
  getStoryFolderPath(storyTitle) {
    const sanitized = this.sanitizeFolderName(storyTitle);
    return `${this.baseFolder}/${sanitized}`;
  }
  // Sanitize folder/file names
  sanitizeFolderName(name) {
    return name.replace(/[<>:"/\\|?*]/g, "-").replace(/\s+/g, " ").trim();
  }
  // Generate frontmatter with Obsidian tags
  generateFrontmatter(baseFields, extraFields, options) {
    const fields = { ...baseFields };
    if (extraFields) {
      Object.assign(fields, extraFields);
    }
    const tags = [];
    if (options) {
      tags.push(`story-engine/${options.entityType}`);
      if (options.storyName) {
        const sanitizedStoryName = this.sanitizeFolderName(options.storyName).toLowerCase().replace(/\s+/g, "-");
        tags.push(`story/${sanitizedStoryName}`);
      }
      if (options.date) {
        const date = typeof options.date === "string" ? new Date(options.date) : options.date;
        if (!isNaN(date.getTime())) {
          const year = date.getFullYear();
          const month = String(date.getMonth() + 1).padStart(2, "0");
          const day = String(date.getDate()).padStart(2, "0");
          tags.push(`date/${year}/${month}/${day}`);
        }
      }
    }
    const lines = ["---"];
    for (const [key, value] of Object.entries(fields)) {
      if (value === null || value === void 0) {
        lines.push(`${key}: null`);
      } else if (typeof value === "string") {
        const escaped = value.replace(/"/g, '\\"');
        if (value.includes(":") || value.includes("\n") || value.includes('"')) {
          lines.push(`${key}: "${escaped}"`);
        } else {
          lines.push(`${key}: ${escaped}`);
        }
      } else {
        lines.push(`${key}: ${value}`);
      }
    }
    if (tags.length > 0) {
      lines.push(`tags:`);
      for (const tag of tags) {
        lines.push(`  - ${tag}`);
      }
    }
    lines.push("---", "");
    return lines.join("\n");
  }
  // Ensure folder exists
  async ensureFolderExists(path) {
    const folder = this.vault.getAbstractFileByPath(path);
    if (!folder) {
      await this.vault.createFolder(path);
    }
  }
  // Write story metadata (story.md)
  async writeStoryMetadata(story, folderPath, chapters, orphanScenes, orphanBeats, chapterContentData) {
    var _a, _b;
    await this.ensureFolderExists(folderPath);
    const baseFields = {
      id: story.id,
      title: story.title,
      status: story.status,
      version: story.version_number,
      root_story_id: story.root_story_id,
      previous_version_id: story.previous_story_id,
      created_at: story.created_at,
      updated_at: story.updated_at
    };
    const frontmatter = this.generateFrontmatter(baseFields, void 0, {
      entityType: "story",
      storyName: story.title,
      date: story.created_at
    });
    let content = `${frontmatter}
# ${story.title}

Version: ${story.version_number}
Status: ${story.status}

`;
    const temporaryChapterTitles = ["Story Prose", "Scene-Level Prose", "Beat-Level Prose"];
    const filteredChapters = (chapters == null ? void 0 : chapters.filter(
      (c) => !temporaryChapterTitles.includes(c.chapter.title) && c.chapter.number < 9e3
    )) || [];
    if (filteredChapters.length > 0) {
      content += `## Chapters, Scenes & Beats

`;
      content += `> [!info] How to use this list
`;
      content += `> - **Create new item**: Add a line with \`-\` followed by the text
`;
      content += `>   - **Chapter**: No indentation (level 0)
`;
      content += `>   - **Scene**: Use 1 tab indentation (inside a chapter)
`;
      content += `>   - **Beat**: Use 2 tabs indentation (inside a scene)
`;
      content += `> - **Reorder**: Move items up/down to change order
`;
      content += `> - **Links**: Use \`[[link-name|text]]\` to create links to existing files
`;
      content += `> - **Format**:
`;
      content += `>   - **Chapter**:
`;
      content += `>     - Complete: \`Chapter N: title\`
`;
      content += `>     - Simplified: \`title\`
`;
      content += `>   - **Scene**:
`;
      content += `>     - Complete: \`Scene N: goal - timeRef\`
`;
      content += `>     - Simplified:
`;
      content += `>       - \`goal - timeRef\`
`;
      content += `>       - \`goal\`
`;
      content += `>   - **Beat**:
`;
      content += `>     - Complete: \`Beat N: intent -> outcome\`
`;
      content += `>     - Simplified:
`;
      content += `>       - \`intent -> outcome\`
`;
      content += `>       - \`intent\`
`;
      content += `> - **Markers**: \`-\` indicates no associated prose, \`+\` indicates associated prose

`;
      for (const chapterWithContent of filteredChapters) {
        const chapter = chapterWithContent.chapter;
        const chapterFileName = `Chapter-${chapter.number}.md`;
        const chapterLinkName = chapterFileName.replace(/\.md$/, "");
        content += `- [[${chapterLinkName}|Chapter ${chapter.number}: ${chapter.title}]]
`;
        for (const { scene, beats } of chapterWithContent.scenes) {
          const sceneFileName = this.generateSceneFileName(scene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
          content += `	- [[${sceneLinkName}|Scene ${scene.order_num}: ${sceneDisplayText}]]
`;
          for (const beat of beats) {
            const beatFileName = this.generateBeatFileName(beat);
            const beatLinkName = beatFileName.replace(/\.md$/, "");
            const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
            content += `		- [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
          }
        }
      }
      content += `
`;
    }
    if (orphanScenes && orphanScenes.length > 0) {
      content += `## Orphan Scenes

`;
      content += `> [!info] Scenes without a chapter
`;
      content += `> These scenes are not associated with any chapter. You can:
`;
      content += `> - **Reorder**: Move items up/down to change order
`;
      content += `> - **Links**: Use \`[[link-name|text]]\` to create links to existing files
`;
      content += `> - **Format**:
`;
      content += `>   - Complete: \`Scene N: goal - timeRef\`
`;
      content += `>   - Simplified:
`;
      content += `>     - \`goal - timeRef\`
`;
      content += `>     - \`goal\`
`;
      content += `> - **Markers**: \`-\` indicates no associated prose, \`+\` indicates associated prose

`;
      for (const { scene, beats } of orphanScenes) {
        const sceneFileName = this.generateSceneFileName(scene);
        const sceneLinkName = sceneFileName.replace(/\.md$/, "");
        const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
        content += `- [[${sceneLinkName}|Scene ${scene.order_num}: ${sceneDisplayText}]]
`;
        for (const beat of beats) {
          const beatFileName = this.generateBeatFileName(beat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
          content += `	- [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
        }
      }
      content += `
`;
    }
    if (orphanBeats && orphanBeats.length > 0) {
      content += `## Orphan Beats

`;
      content += `> [!info] Beats without a scene
`;
      content += `> These beats are not associated with any scene. You can:
`;
      content += `> - **Reorder**: Move items up/down to change order
`;
      content += `> - **Links**: Use \`[[link-name|text]]\` to create links to existing files
`;
      content += `> - **Format**:
`;
      content += `>   - Complete: \`Beat N: intent -> outcome\`
`;
      content += `>   - Simplified:
`;
      content += `>     - \`intent -> outcome\`
`;
      content += `>     - \`intent\`
`;
      content += `> - **Markers**: \`-\` indicates no associated prose, \`+\` indicates associated prose

`;
      for (const beat of orphanBeats) {
        const beatFileName = this.generateBeatFileName(beat);
        const beatLinkName = beatFileName.replace(/\.md$/, "");
        const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
        content += `- [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
      }
      content += `
`;
    }
    content += `# Story: ${story.title}

`;
    if (filteredChapters.length > 0) {
      for (const chapterWithContent of filteredChapters) {
        const chapter = chapterWithContent.chapter;
        const chapterFileName = `Chapter-${chapter.number}.md`;
        const chapterLinkName = chapterFileName.replace(/\.md$/, "");
        content += `## Chapter ${chapter.number}: [[${chapterLinkName}|${chapter.title}]]

`;
        const contentData = chapterContentData == null ? void 0 : chapterContentData.get(chapter.id);
        let organization = null;
        if (contentData) {
          organization = this.organizeContentBlocks(
            contentData.contentBlocks,
            contentData.contentBlockRefs,
            chapterWithContent.scenes
          );
          for (const contentBlock of organization.chapterOnly) {
            const fileName = this.generateContentBlockFileName(contentBlock);
            const linkName = fileName.replace(/\.md$/, "");
            content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
          }
        }
        for (const { scene, beats } of chapterWithContent.scenes) {
          const sceneFileName = this.generateSceneFileName(scene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
          content += `### Scene: [[${sceneLinkName}|${sceneDisplayText}]]

`;
          if (organization) {
            const sceneContentBlocks = ((_a = organization.byScene.get(scene.id)) == null ? void 0 : _a.contentBlocks) || [];
            for (const contentBlock of sceneContentBlocks) {
              const fileName = this.generateContentBlockFileName(contentBlock);
              const linkName = fileName.replace(/\.md$/, "");
              content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
            }
          }
          for (const beat of beats) {
            const beatFileName = this.generateBeatFileName(beat);
            const beatLinkName = beatFileName.replace(/\.md$/, "");
            const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
            content += `#### Beat: [[${beatLinkName}|${beatDisplayText}]]

`;
            if (organization) {
              const beatContentBlocks = ((_b = organization.byBeat.get(beat.id)) == null ? void 0 : _b.contentBlocks) || [];
              for (const contentBlock of beatContentBlocks) {
                const fileName = this.generateContentBlockFileName(contentBlock);
                const linkName = fileName.replace(/\.md$/, "");
                content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
              }
            }
          }
        }
      }
    }
    if (orphanScenes && orphanScenes.length > 0) {
      for (const { scene, beats } of orphanScenes) {
        const sceneFileName = this.generateSceneFileName(scene);
        const sceneLinkName = sceneFileName.replace(/\.md$/, "");
        const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
        content += `### Scene: [[${sceneLinkName}|${sceneDisplayText}]]

`;
        for (const beat of beats) {
          const beatFileName = this.generateBeatFileName(beat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
          content += `#### Beat: [[${beatLinkName}|${beatDisplayText}]]

`;
        }
      }
    }
    const filePath = `${folderPath}/story.md`;
    const file = this.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian7.TFile) {
      await this.vault.modify(file, content);
    } else {
      await this.vault.create(filePath, content);
    }
  }
  // Write chapter file
  async writeChapterFile(chapterWithContent, filePath, storyName, contentBlocks, contentBlockRefs, orphanScenes) {
    var _a, _b, _c, _d;
    const { chapter, scenes } = chapterWithContent;
    const baseFields = {
      id: chapter.id,
      story_id: chapter.story_id,
      number: chapter.number,
      title: chapter.title,
      status: chapter.status,
      created_at: chapter.created_at,
      updated_at: chapter.updated_at
    };
    const frontmatter = this.generateFrontmatter(baseFields, void 0, {
      entityType: "chapter",
      storyName,
      date: chapter.created_at
    });
    let content = `${frontmatter}
# ${chapter.title}

`;
    const organization = this.organizeContentBlocks(
      contentBlocks || [],
      contentBlockRefs || [],
      scenes
    );
    content += `## Scenes & Beats

`;
    content += `> [!info] How to use this list
`;
    content += `> - **Create new item**: Add a line with \`-\` followed by the text
`;
    content += `>   - **Scene**: No indentation (level 0)
`;
    content += `>   - **Beat**: Use 1 tab indentation (inside a scene)
`;
    content += `> - **Reorder**: Move items up/down to change order
`;
    content += `> - **Links**: Use \`[[link-name|text]]\` to create links to existing files
`;
    content += `> - **Format**:
`;
    content += `>   - **Scene**:
`;
    content += `>     - Complete: \`Scene N: goal - timeRef\`
`;
    content += `>     - Simplified:
`;
    content += `>       - \`goal - timeRef\`
`;
    content += `>       - \`goal\`
`;
    content += `>   - **Beat**:
`;
    content += `>     - Complete: \`Beat N: intent -> outcome\`
`;
    content += `>     - Simplified:
`;
    content += `>       - \`intent -> outcome\`
`;
    content += `>       - \`intent\`
`;
    content += `> - **Markers**: \`-\` indicates no associated prose, \`+\` indicates associated prose
`;
    content += `> - **Orphan scenes** (without chapter) are shown below for easy association

`;
    for (const { scene, beats } of scenes) {
      const sceneFileName = this.generateSceneFileName(scene);
      const sceneLinkName = sceneFileName.replace(/\.md$/, "");
      const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
      const sceneContentBlocks = ((_a = organization.byScene.get(scene.id)) == null ? void 0 : _a.contentBlocks) || [];
      const hasSceneContent = sceneContentBlocks.length > 0;
      const sceneMarker = hasSceneContent ? "+" : "-";
      content += `${sceneMarker} [[${sceneLinkName}|Scene ${scene.order_num}: ${sceneDisplayText}]]
`;
      for (const beat of beats) {
        const beatFileName = this.generateBeatFileName(beat);
        const beatLinkName = beatFileName.replace(/\.md$/, "");
        const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
        const beatContentBlocks = ((_b = organization.byBeat.get(beat.id)) == null ? void 0 : _b.contentBlocks) || [];
        const hasBeatContent = beatContentBlocks.length > 0;
        const beatMarker = hasBeatContent ? "+" : "-";
        content += `	${beatMarker} [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
      }
    }
    if (orphanScenes && orphanScenes.length > 0) {
      content += `
`;
      content += `> [!info] Orphan Scenes (not yet associated with this chapter)
`;
      content += `> You can associate these scenes with this chapter by moving them here.

`;
      for (const { scene, beats } of orphanScenes) {
        const sceneFileName = this.generateSceneFileName(scene);
        const sceneLinkName = sceneFileName.replace(/\.md$/, "");
        const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
        content += `- [[${sceneLinkName}|Scene ${scene.order_num}: ${sceneDisplayText}]]
`;
        for (const beat of beats) {
          const beatFileName = this.generateBeatFileName(beat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
          content += `	- [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
        }
      }
    }
    content += `
`;
    content += `## Chapter ${chapter.number}: ${chapter.title}

`;
    for (const contentBlock of organization.chapterOnly) {
      const fileName = this.generateContentBlockFileName(contentBlock);
      const linkName = fileName.replace(/\.md$/, "");
      content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
    }
    for (const { scene, beats } of scenes) {
      const sceneFileName = this.generateSceneFileName(scene);
      const sceneLinkName = sceneFileName.replace(/\.md$/, "");
      const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
      content += `## Scene: [[${sceneLinkName}|${sceneDisplayText}]]

`;
      const sceneContentBlocks = ((_c = organization.byScene.get(scene.id)) == null ? void 0 : _c.contentBlocks) || [];
      for (const contentBlock of sceneContentBlocks) {
        const fileName = this.generateContentBlockFileName(contentBlock);
        const linkName = fileName.replace(/\.md$/, "");
        content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
      }
      for (const beat of beats) {
        const beatFileName = this.generateBeatFileName(beat);
        const beatLinkName = beatFileName.replace(/\.md$/, "");
        const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
        content += `### Beat: [[${beatLinkName}|${beatDisplayText}]]

`;
        const beatContentBlocks = ((_d = organization.byBeat.get(beat.id)) == null ? void 0 : _d.contentBlocks) || [];
        for (const contentBlock of beatContentBlocks) {
          const fileName = this.generateContentBlockFileName(contentBlock);
          const linkName = fileName.replace(/\.md$/, "");
          content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
        }
      }
    }
    const file = this.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian7.TFile) {
      await this.vault.modify(file, content);
    } else {
      await this.vault.create(filePath, content);
    }
  }
  // Read story metadata
  async readStoryMetadata(folderPath) {
    const filePath = `${folderPath}/story.md`;
    const file = this.vault.getAbstractFileByPath(filePath);
    if (!(file instanceof import_obsidian7.TFile)) {
      throw new Error(`Story metadata file not found: ${filePath}`);
    }
    const content = await this.vault.read(file);
    const frontmatter = this.parseFrontmatter(content);
    return {
      frontmatter: {
        id: frontmatter.id,
        title: frontmatter.title,
        status: frontmatter.status,
        version: parseInt(frontmatter.version),
        root_story_id: frontmatter.root_story_id,
        previous_version_id: frontmatter.previous_version_id || null,
        created_at: frontmatter.created_at,
        updated_at: frontmatter.updated_at
      },
      content: content.split("---").slice(2).join("---").trim()
    };
  }
  // Parse YAML frontmatter
  parseFrontmatter(content) {
    const match = content.match(/^---\n([\s\S]*?)\n---/);
    if (!match) {
      return {};
    }
    const frontmatterText = match[1];
    const result = {};
    for (const line of frontmatterText.split("\n")) {
      const colonIndex = line.indexOf(":");
      if (colonIndex > 0) {
        const key = line.slice(0, colonIndex).trim();
        const value = line.slice(colonIndex + 1).trim().replace(/^["']|["']$/g, "");
        result[key] = value;
      }
    }
    return result;
  }
  // Copy story folder to versions folder
  async createVersionSnapshot(storyFolderPath, versionNumber) {
    const versionsPath = `${storyFolderPath}/versions`;
    await this.ensureFolderExists(versionsPath);
    const versionFolderPath = `${versionsPath}/v${versionNumber}`;
    const existingVersion = this.vault.getAbstractFileByPath(versionFolderPath);
    if (existingVersion) {
      console.log(`Version v${versionNumber} already exists, skipping snapshot`);
      return;
    }
    await this.ensureFolderExists(versionFolderPath);
    const storyFolder = this.vault.getAbstractFileByPath(storyFolderPath);
    if (!(storyFolder instanceof import_obsidian7.TFolder)) {
      throw new Error(`Story folder not found: ${storyFolderPath}`);
    }
    await this.copyFolderContents(storyFolder, versionFolderPath, "versions");
    console.log(`Created version snapshot: v${versionNumber}`);
  }
  // Recursively copy folder contents
  async copyFolderContents(sourceFolder, destPath, excludeFolderName) {
    for (const child of sourceFolder.children) {
      if (child instanceof import_obsidian7.TFile) {
        const relativePath = child.path.replace(sourceFolder.path + "/", "");
        const destFilePath = `${destPath}/${relativePath}`;
        const content = await this.vault.read(child);
        await this.vault.create(destFilePath, content);
      } else if (child instanceof import_obsidian7.TFolder) {
        if (excludeFolderName && child.name === excludeFolderName) {
          continue;
        }
        const relativePath = child.path.replace(sourceFolder.path + "/", "");
        const destFolderPath = `${destPath}/${relativePath}`;
        await this.ensureFolderExists(destFolderPath);
        await this.copyFolderContents(child, destFolderPath, excludeFolderName);
      }
    }
  }
  // Write scene file
  async writeSceneFile(sceneWithBeats, filePath, storyName, contentBlocks, orphanBeats) {
    var _a;
    const { scene, beats } = sceneWithBeats;
    const baseFields = {
      id: scene.id,
      story_id: scene.story_id,
      chapter_id: (_a = scene.chapter_id) != null ? _a : null,
      order_num: scene.order_num,
      time_ref: scene.time_ref || "",
      goal: scene.goal || "",
      created_at: scene.created_at,
      updated_at: scene.updated_at
    };
    const extraFields = {};
    if (scene.pov_character_id) {
      extraFields.pov_character_id = scene.pov_character_id;
    }
    if (scene.location_id) {
      extraFields.location_id = scene.location_id;
    }
    const frontmatter = this.generateFrontmatter(baseFields, extraFields, {
      entityType: "scene",
      storyName,
      date: scene.created_at
    });
    let content = `${frontmatter}
# Scene ${scene.order_num}

`;
    if (scene.goal) {
      content += `**Goal:** ${scene.goal}

`;
    }
    if (scene.time_ref) {
      content += `**Time:** ${scene.time_ref}

`;
    }
    if (beats.length > 0) {
      content += `## Beats

`;
      content += `> [!info] How to use this list
`;
      content += `> - **Create new item**: Add a line with \`-\` followed by the text
`;
      content += `>   - **Beat**: No indentation (level 0)
`;
      content += `> - **Reorder**: Move items up/down to change order
`;
      content += `> - **Links**: Use \`[[link-name|text]]\` to create links to existing files
`;
      content += `> - **Format**:
`;
      content += `>   - **Beat**:
`;
      content += `>     - Complete: \`Beat N: intent -> outcome\`
`;
      content += `>     - Simplified:
`;
      content += `>       - \`intent -> outcome\`
`;
      content += `>       - \`intent\`
`;
      content += `> - **Markers**: \`-\` indicates no associated prose, \`+\` indicates associated prose
`;
      content += `> - **Orphan beats** (without scene) are shown below for easy association

`;
      const beatsWithProse = /* @__PURE__ */ new Set();
      if (contentBlocks) {
        for (const contentBlock of contentBlocks) {
        }
      }
      for (const beat of beats.sort((a, b) => a.order_num - b.order_num)) {
        const beatFileName = this.generateBeatFileName(beat);
        const beatLinkName = beatFileName.replace(/\.md$/, "");
        const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
        const hasBeatProse = beatsWithProse.has(beat.id);
        const beatMarker = hasBeatProse ? "+" : "-";
        content += `${beatMarker} [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
      }
      if (orphanBeats && orphanBeats.length > 0) {
        content += `
`;
        content += `> [!info] Orphan Beats (not yet associated with this scene)
`;
        content += `> You can associate these beats with this scene by moving them here.

`;
        for (const beat of orphanBeats) {
          const beatFileName = this.generateBeatFileName(beat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
          content += `- [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
        }
      }
      content += `
`;
    }
    const sceneFileName = this.generateSceneFileName(scene);
    const sceneLinkName = sceneFileName.replace(/\.md$/, "");
    const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
    content += `## Scene: [[${sceneLinkName}|${sceneDisplayText}]]

`;
    if (contentBlocks && contentBlocks.length > 0) {
      const sortedContentBlocks = [...contentBlocks].sort((a, b) => (a.order_num || 0) - (b.order_num || 0));
      for (const contentBlock of sortedContentBlocks) {
        const fileName = this.generateContentBlockFileName(contentBlock);
        const linkName = fileName.replace(/\.md$/, "");
        content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
      }
    }
    for (const beat of beats.sort((a, b) => a.order_num - b.order_num)) {
      const beatFileName = this.generateBeatFileName(beat);
      const beatLinkName = beatFileName.replace(/\.md$/, "");
      const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
      content += `### Beat: [[${beatLinkName}|${beatDisplayText}]]

`;
    }
    const file = this.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian7.TFile) {
      await this.vault.modify(file, content);
    } else {
      await this.vault.create(filePath, content);
    }
  }
  // Write beat file
  async writeBeatFile(beat, filePath, storyName, contentBlocks) {
    const baseFields = {
      id: beat.id,
      scene_id: beat.scene_id,
      order_num: beat.order_num,
      type: beat.type,
      intent: beat.intent || "",
      outcome: beat.outcome || "",
      created_at: beat.created_at,
      updated_at: beat.updated_at
    };
    const frontmatter = this.generateFrontmatter(baseFields, void 0, {
      entityType: "beat",
      storyName,
      date: beat.created_at
    });
    let content = `${frontmatter}
# Beat ${beat.order_num} - ${beat.type}

`;
    if (beat.intent) {
      content += `**Intent:** ${beat.intent}

`;
    }
    if (beat.outcome) {
      content += `**Outcome:** ${beat.outcome}

`;
    }
    const beatFileName = this.generateBeatFileName(beat);
    const beatLinkName = beatFileName.replace(/\.md$/, "");
    const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
    content += `## Beat: [[${beatLinkName}|${beatDisplayText}]]

`;
    if (contentBlocks && contentBlocks.length > 0) {
      const sortedContentBlocks = [...contentBlocks].sort((a, b) => (a.order_num || 0) - (b.order_num || 0));
      for (const contentBlock of sortedContentBlocks) {
        const fileName = this.generateContentBlockFileName(contentBlock);
        const linkName = fileName.replace(/\.md$/, "");
        content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
      }
    }
    const file = this.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian7.TFile) {
      await this.vault.modify(file, content);
    } else {
      await this.vault.create(filePath, content);
    }
  }
  // List all chapter files in a story folder
  async listChapterFiles(storyFolderPath) {
    const chaptersPath = `${storyFolderPath}/00-chapters`;
    const folder = this.vault.getAbstractFileByPath(chaptersPath);
    if (!(folder instanceof import_obsidian7.TFolder)) {
      return [];
    }
    const chapterFiles = [];
    for (const child of folder.children) {
      if (child instanceof import_obsidian7.TFile && child.extension === "md") {
        chapterFiles.push(child.path);
      }
    }
    return chapterFiles.sort();
  }
  // List all scene files in a chapter folder
  async listSceneFiles(chapterFolderPath) {
    const scenesPath = `${chapterFolderPath}/01-scenes`;
    const folder = this.vault.getAbstractFileByPath(scenesPath);
    if (!(folder instanceof import_obsidian7.TFolder)) {
      return [];
    }
    const sceneFiles = [];
    for (const child of folder.children) {
      if (child instanceof import_obsidian7.TFile && child.extension === "md") {
        sceneFiles.push(child.path);
      }
    }
    return sceneFiles.sort();
  }
  // List all scene files in a story folder
  async listStorySceneFiles(storyFolderPath) {
    const scenesPath = `${storyFolderPath}/01-scenes`;
    const folder = this.vault.getAbstractFileByPath(scenesPath);
    if (!(folder instanceof import_obsidian7.TFolder)) {
      return [];
    }
    const sceneFiles = [];
    for (const child of folder.children) {
      if (child instanceof import_obsidian7.TFile && child.extension === "md") {
        sceneFiles.push(child.path);
      }
    }
    return sceneFiles.sort();
  }
  // List all beat files in a story folder
  async listStoryBeatFiles(storyFolderPath) {
    const beatsPath = `${storyFolderPath}/02-beats`;
    const folder = this.vault.getAbstractFileByPath(beatsPath);
    if (!(folder instanceof import_obsidian7.TFolder)) {
      return [];
    }
    const beatFiles = [];
    for (const child of folder.children) {
      if (child instanceof import_obsidian7.TFile && child.extension === "md") {
        beatFiles.push(child.path);
      }
    }
    return beatFiles.sort();
  }
  // List all beat files in a scene folder
  async listBeatFiles(sceneFolderPath) {
    const beatsPath = `${sceneFolderPath}/02-beats`;
    const folder = this.vault.getAbstractFileByPath(beatsPath);
    if (!(folder instanceof import_obsidian7.TFolder)) {
      return [];
    }
    const beatFiles = [];
    for (const child of folder.children) {
      if (child instanceof import_obsidian7.TFile && child.extension === "md") {
        beatFiles.push(child.path);
      }
    }
    return beatFiles.sort();
  }
  // Get the subfolder name for a content block type
  getContentTypeFolder(type2) {
    const typeFolders = {
      text: "00-texts",
      image: "01-images",
      video: "02-videos",
      audio: "03-audios",
      embed: "04-embeds",
      link: "05-links"
    };
    return typeFolders[type2] || "99-other";
  }
  // Get the full folder path for content blocks of a specific type
  getContentBlockFolderPath(storyFolderPath, type2) {
    const typeFolder = this.getContentTypeFolder(type2);
    return `${storyFolderPath}/03-contents/${typeFolder}`;
  }
  // Generate filename for content block based on date and content preview
  generateContentBlockFileName(contentBlock) {
    const date = new Date(contentBlock.created_at);
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    const hours = String(date.getHours()).padStart(2, "0");
    const minutes = String(date.getMinutes()).padStart(2, "0");
    const dateStr = `${year}-${month}-${day}T${hours}-${minutes}`;
    let textPart;
    const type2 = contentBlock.type || "text";
    if (type2 === "text") {
      textPart = contentBlock.content.substring(0, 30).trim().replace(/[<>:"/\\|?*\n\r\t]/g, "-").replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "").toLowerCase() || "content";
    } else if (type2 === "image" || type2 === "video" || type2 === "audio") {
      const meta = contentBlock.metadata || {};
      textPart = (meta.alt_text || meta.caption || meta.title || type2).substring(0, 30).trim().replace(/[<>:"/\\|?*\n\r\t]/g, "-").replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "").toLowerCase();
    } else if (type2 === "embed") {
      const meta = contentBlock.metadata || {};
      textPart = (meta.provider || meta.title || "embed").substring(0, 30).trim().replace(/[<>:"/\\|?*\n\r\t]/g, "-").replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "").toLowerCase();
    } else if (type2 === "link") {
      const meta = contentBlock.metadata || {};
      textPart = (meta.title || meta.site_name || "link").substring(0, 30).trim().replace(/[<>:"/\\|?*\n\r\t]/g, "-").replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "").toLowerCase();
    } else {
      textPart = "content";
    }
    return `${dateStr}_${textPart}.md`;
  }
  // Organize content blocks by their associations (chapter, scene, beat)
  organizeContentBlocks(contentBlocks, contentBlockRefs, scenes) {
    const organization = {
      chapterOnly: [],
      byScene: /* @__PURE__ */ new Map(),
      byBeat: /* @__PURE__ */ new Map()
    };
    const contentBlockRefsByContentBlock = /* @__PURE__ */ new Map();
    for (const ref of contentBlockRefs) {
      if (!contentBlockRefsByContentBlock.has(ref.content_block_id)) {
        contentBlockRefsByContentBlock.set(ref.content_block_id, []);
      }
      contentBlockRefsByContentBlock.get(ref.content_block_id).push(ref);
    }
    const sceneMap = /* @__PURE__ */ new Map();
    const beatMap = /* @__PURE__ */ new Map();
    for (const { scene, beats } of scenes) {
      sceneMap.set(scene.id, scene);
      for (const beat of beats) {
        beatMap.set(beat.id, beat);
      }
    }
    const sortedContentBlocks = [...contentBlocks].sort((a, b) => (a.order_num || 0) - (b.order_num || 0));
    for (const contentBlock of sortedContentBlocks) {
      const refs = contentBlockRefsByContentBlock.get(contentBlock.id) || [];
      const sceneRef = refs.find((r) => r.entity_type === "scene");
      const beatRef = refs.find((r) => r.entity_type === "beat");
      if (beatRef && beatMap.has(beatRef.entity_id)) {
        const beat = beatMap.get(beatRef.entity_id);
        if (!organization.byBeat.has(beat.id)) {
          organization.byBeat.set(beat.id, { beat, contentBlocks: [] });
        }
        organization.byBeat.get(beat.id).contentBlocks.push(contentBlock);
      } else if (sceneRef && sceneMap.has(sceneRef.entity_id)) {
        const scene = sceneMap.get(sceneRef.entity_id);
        if (!organization.byScene.has(scene.id)) {
          organization.byScene.set(scene.id, { scene, contentBlocks: [] });
        }
        organization.byScene.get(scene.id).contentBlocks.push(contentBlock);
      } else {
        organization.chapterOnly.push(contentBlock);
      }
    }
    return organization;
  }
  // Generate filename for scene based on date and goal
  generateSceneFileName(scene) {
    const date = new Date(scene.created_at);
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    const hours = String(date.getHours()).padStart(2, "0");
    const minutes = String(date.getMinutes()).padStart(2, "0");
    const dateStr = `${year}-${month}-${day}T${hours}-${minutes}`;
    const goalSanitized = (scene.goal || "scene").trim().replace(/[<>:"/\\|?*\n\r\t]/g, "-").replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "").toLowerCase();
    return `${dateStr}_${goalSanitized}.md`;
  }
  // Generate filename for beat based on date and intent
  generateBeatFileName(beat) {
    const date = new Date(beat.created_at);
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    const hours = String(date.getHours()).padStart(2, "0");
    const minutes = String(date.getMinutes()).padStart(2, "0");
    const dateStr = `${year}-${month}-${day}T${hours}-${minutes}`;
    const intentSanitized = (beat.intent || "beat").trim().replace(/[<>:"/\\|?*\n\r\t]/g, "-").replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "").toLowerCase();
    return `${dateStr}_${intentSanitized}.md`;
  }
  // Write content block file
  async writeContentBlockFile(contentBlock, filePath, storyName) {
    const type2 = contentBlock.type || "text";
    const baseFields = {
      id: contentBlock.id,
      chapter_id: contentBlock.chapter_id || null,
      order_num: contentBlock.order_num || 0,
      type: type2,
      kind: contentBlock.kind,
      created_at: contentBlock.created_at,
      updated_at: contentBlock.updated_at
    };
    const meta = contentBlock.metadata || {};
    if (type2 === "text" && meta.word_count) {
      baseFields.word_count = meta.word_count;
    } else if (type2 === "image") {
      if (contentBlock.content && contentBlock.content.startsWith("http")) {
        baseFields.original_url = contentBlock.content;
      }
      if (meta.alt_text)
        baseFields.alt_text = meta.alt_text;
      if (meta.caption)
        baseFields.caption = meta.caption;
      if (meta.width)
        baseFields.width = meta.width;
      if (meta.height)
        baseFields.height = meta.height;
      if (meta.mime_type)
        baseFields.mime_type = meta.mime_type;
      if (meta.source)
        baseFields.source = meta.source;
      if (meta.author_name)
        baseFields.author_name = meta.author_name;
      if (meta.attribution)
        baseFields.attribution = meta.attribution;
      if (meta.attribution_url)
        baseFields.attribution_url = meta.attribution_url;
    } else if (type2 === "video" || type2 === "audio") {
      if (meta.provider)
        baseFields.provider = meta.provider;
      if (meta.video_id)
        baseFields.video_id = meta.video_id;
      if (meta.duration)
        baseFields.duration = meta.duration;
      if (meta.thumbnail_url)
        baseFields.thumbnail_url = meta.thumbnail_url;
    } else if (type2 === "embed") {
      if (meta.provider)
        baseFields.provider = meta.provider;
      if (meta.html)
        baseFields.embed_html = meta.html;
    } else if (type2 === "link") {
      if (meta.title)
        baseFields.link_title = meta.title;
      if (meta.description)
        baseFields.link_description = meta.description;
      if (meta.image_url)
        baseFields.link_image = meta.image_url;
      if (meta.site_name)
        baseFields.site_name = meta.site_name;
    }
    const frontmatter = this.generateFrontmatter(baseFields, void 0, {
      entityType: "content-block",
      storyName,
      date: contentBlock.created_at
    });
    let fileContent;
    if (type2 === "text") {
      fileContent = `${frontmatter}${contentBlock.content}`;
    } else if (type2 === "image") {
      let localImagePath = contentBlock.content || "";
      if (contentBlock.content && !contentBlock.content.startsWith("http")) {
        localImagePath = contentBlock.content;
      } else if (contentBlock.content) {
        try {
          localImagePath = await this.downloadImage(contentBlock.content, filePath, contentBlock.id);
        } catch (err) {
          console.error("Failed to download image:", err);
          localImagePath = contentBlock.content;
        }
      }
      const altText = meta.alt_text || "";
      fileContent = `${frontmatter}![${altText}](${localImagePath})`;
      if (meta.caption) {
        fileContent += `

*${meta.caption}*`;
      }
    } else if (type2 === "video") {
      fileContent = `${frontmatter}[Video](${contentBlock.content})`;
      if (meta.thumbnail_url) {
        fileContent += `

![Thumbnail](${meta.thumbnail_url})`;
      }
    } else if (type2 === "audio") {
      fileContent = `${frontmatter}[Audio](${contentBlock.content})`;
    } else if (type2 === "embed") {
      fileContent = `${frontmatter}${meta.html || contentBlock.content}`;
    } else if (type2 === "link") {
      const title = meta.title || contentBlock.content;
      fileContent = `${frontmatter}[${title}](${contentBlock.content})`;
      if (meta.description) {
        fileContent += `

${meta.description}`;
      }
    } else {
      fileContent = `${frontmatter}${contentBlock.content}`;
    }
    const file = this.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian7.TFile) {
      await this.vault.modify(file, fileContent);
    } else {
      await this.vault.create(filePath, fileContent);
    }
  }
  // Download image from URL and save locally (same folder as content block .md)
  async downloadImage(imageUrl, contentBlockFilePath, contentBlockId) {
    try {
      const response = await fetch(imageUrl);
      if (!response.ok) {
        throw new Error(`Failed to fetch image: ${response.statusText}`);
      }
      const blob = await response.blob();
      const arrayBuffer = await blob.arrayBuffer();
      let extension = "jpg";
      const contentType = response.headers.get("content-type");
      if (contentType) {
        if (contentType.includes("png"))
          extension = "png";
        else if (contentType.includes("gif"))
          extension = "gif";
        else if (contentType.includes("webp"))
          extension = "webp";
        else if (contentType.includes("svg"))
          extension = "svg";
      } else {
        const urlMatch = imageUrl.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i);
        if (urlMatch) {
          extension = urlMatch[1].toLowerCase();
        }
      }
      const contentBlockDir = contentBlockFilePath.substring(0, contentBlockFilePath.lastIndexOf("/"));
      const imageFileName = `${contentBlockId}.${extension}`;
      const imagePath = `${contentBlockDir}/${imageFileName}`;
      const existingFile = this.vault.getAbstractFileByPath(imagePath);
      if (existingFile instanceof import_obsidian7.TFile) {
        await this.vault.modifyBinary(existingFile, arrayBuffer);
      } else {
        await this.vault.createBinary(imagePath, arrayBuffer);
      }
      return imageFileName;
    } catch (err) {
      console.error("Error downloading image:", err);
      throw err;
    }
  }
  // Read content block from file
  async readContentBlockFromFile(filePath) {
    const file = this.vault.getAbstractFileByPath(filePath);
    if (!(file instanceof import_obsidian7.TFile)) {
      return null;
    }
    try {
      const fileContent = await this.vault.read(file);
      const frontmatter = this.parseFrontmatter(fileContent);
      const contentMatch = fileContent.match(/^---\n[\s\S]*?\n---\n([\s\S]*)$/);
      let blockContent = contentMatch ? contentMatch[1].trim() : "";
      if (!frontmatter.id) {
        return null;
      }
      const type2 = frontmatter.type || "text";
      const metadata = {};
      if (type2 === "image") {
        const imgMatch = blockContent.match(/!\[[^\]]*\]\(([^)]+)\)/);
        if (imgMatch) {
          blockContent = imgMatch[1];
          if (!blockContent.startsWith("http") && frontmatter.original_url) {
            blockContent = frontmatter.original_url;
          }
        }
      } else if (type2 === "video" || type2 === "audio" || type2 === "link") {
        const linkMatch = blockContent.match(/\[[^\]]*\]\(([^)]+)\)/);
        if (linkMatch) {
          blockContent = linkMatch[1];
        }
      }
      if (frontmatter.word_count)
        metadata.word_count = parseInt(frontmatter.word_count, 10);
      if (frontmatter.alt_text)
        metadata.alt_text = frontmatter.alt_text;
      if (frontmatter.caption)
        metadata.caption = frontmatter.caption;
      if (frontmatter.width)
        metadata.width = parseInt(frontmatter.width, 10);
      if (frontmatter.height)
        metadata.height = parseInt(frontmatter.height, 10);
      if (frontmatter.mime_type)
        metadata.mime_type = frontmatter.mime_type;
      if (frontmatter.source)
        metadata.source = frontmatter.source;
      if (frontmatter.author_name)
        metadata.author_name = frontmatter.author_name;
      if (frontmatter.attribution)
        metadata.attribution = frontmatter.attribution;
      if (frontmatter.attribution_url)
        metadata.attribution_url = frontmatter.attribution_url;
      if (frontmatter.provider)
        metadata.provider = frontmatter.provider;
      if (frontmatter.video_id)
        metadata.video_id = frontmatter.video_id;
      if (frontmatter.duration)
        metadata.duration = parseInt(frontmatter.duration, 10);
      if (frontmatter.thumbnail_url)
        metadata.thumbnail_url = frontmatter.thumbnail_url;
      if (frontmatter.embed_html)
        metadata.html = frontmatter.embed_html;
      if (frontmatter.link_title)
        metadata.title = frontmatter.link_title;
      if (frontmatter.link_description)
        metadata.description = frontmatter.link_description;
      if (frontmatter.link_image)
        metadata.image_url = frontmatter.link_image;
      if (frontmatter.site_name)
        metadata.site_name = frontmatter.site_name;
      return {
        id: frontmatter.id,
        chapter_id: frontmatter.chapter_id || null,
        order_num: parseInt(frontmatter.order_num || "0", 10),
        type: type2,
        kind: frontmatter.kind || "final",
        content: blockContent,
        metadata,
        created_at: frontmatter.created_at || "",
        updated_at: frontmatter.updated_at || ""
      };
    } catch (err) {
      console.error(`Failed to read content block from ${filePath}:`, err);
      return null;
    }
  }
  // List all content block files in a story folder (across all type subfolders)
  async listContentBlockFiles(storyFolderPath) {
    const contentsPath = `${storyFolderPath}/03-contents`;
    const folder = this.vault.getAbstractFileByPath(contentsPath);
    if (!(folder instanceof import_obsidian7.TFolder)) {
      return [];
    }
    const contentFiles = [];
    for (const child of folder.children) {
      if (child instanceof import_obsidian7.TFolder) {
        for (const file of child.children) {
          if (file instanceof import_obsidian7.TFile && file.extension === "md") {
            contentFiles.push(file.path);
          }
        }
      }
    }
    return contentFiles.sort();
  }
};

// src/sync/syncService.ts
var import_obsidian9 = require("obsidian");

// src/sync/contentBlockParser.ts
function parseHierarchicalProse(chapterContent) {
  const sections = [];
  const frontmatterMatch = chapterContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = chapterContent.substring(contentStart).trim();
  const chapterSectionMatch = bodyContent.match(/##\s+Chapter\s+\d+:\s+[^\n]+\s*\n+([\s\S]*?)(?=\n##\s+Chapter\s+\d+:|$)/);
  if (!chapterSectionMatch) {
    const chapterSectionMatchSameLine = bodyContent.match(/##\s+Chapter\s+\d+:\s+[^\n]+\s+([^\n]+)/);
    if (chapterSectionMatchSameLine) {
      const proseContent2 = chapterSectionMatchSameLine[1].trim();
      if (proseContent2.length > 0 && !proseContent2.startsWith("#")) {
        const paragraph = {
          content: proseContent2,
          linkName: null,
          originalOrder: 0
        };
        sections.push({
          type: "prose",
          prose: paragraph,
          originalOrder: 0
        });
      }
      return { sections };
    }
    return { sections: [] };
  }
  const proseContent = chapterSectionMatch[1].trim();
  const lines = proseContent.split(/\n/);
  let currentScene = null;
  let currentBeat = null;
  let order = 0;
  for (let i = 0; i < lines.length; i++) {
    const line = lines[i].trim();
    if (!line) {
      continue;
    }
    const sceneMatch = line.match(/^##\s+Scene:\s*(.+)$/);
    if (sceneMatch) {
      const sceneText = sceneMatch[1].trim();
      const parsedScene = parseSceneHeader(sceneText);
      parsedScene.originalOrder = order++;
      currentScene = parsedScene;
      currentBeat = null;
      sections.push({
        type: "scene",
        scene: parsedScene,
        originalOrder: parsedScene.originalOrder
      });
      continue;
    }
    const beatMatch = line.match(/^###\s+Beat:\s*(.+)$/);
    if (beatMatch) {
      const beatText = beatMatch[1].trim();
      const parsedBeat = parseBeatHeader(beatText);
      parsedBeat.originalOrder = order++;
      currentBeat = parsedBeat;
      sections.push({
        type: "beat",
        beat: parsedBeat,
        originalOrder: parsedBeat.originalOrder
      });
      continue;
    }
    if (line.startsWith("#") && !line.match(/^##\s+Scene:/) && !line.match(/^###\s+Beat:/)) {
      continue;
    }
    const proseMatch = line.match(/^\s*\[\[([^\|]+)\|([^\]]+)\]\]\s*$/);
    if (proseMatch) {
      const linkName = proseMatch[1].trim();
      const content = proseMatch[2].trim();
      const paragraph = {
        content,
        linkName,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
      continue;
    }
    if (line.length > 0 && !line.startsWith("#")) {
      const paragraph = {
        content: line,
        linkName: null,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
    }
  }
  return { sections };
}
function parseSceneHeader(text) {
  const linkMatch = text.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
  if (linkMatch) {
    const linkName = linkMatch[1].trim();
    const displayText = linkMatch[2].trim();
    const { goal: goal2, timeRef: timeRef2 } = parseSceneText(displayText);
    return {
      linkName,
      goal: goal2,
      timeRef: timeRef2,
      originalOrder: 0
      // Will be set by caller
    };
  }
  const simpleLinkMatch = text.match(/^\[\[([^\]]+)\]\]$/);
  if (simpleLinkMatch) {
    return {
      linkName: simpleLinkMatch[1].trim(),
      goal: "",
      timeRef: "",
      originalOrder: 0
    };
  }
  const { goal, timeRef } = parseSceneText(text);
  return {
    linkName: null,
    goal,
    timeRef,
    originalOrder: 0
  };
}
function parseSceneText(text) {
  const parts = text.split(/\s*-\s*/);
  if (parts.length >= 2) {
    return {
      goal: parts[0].trim(),
      timeRef: parts.slice(1).join(" - ").trim()
      // Join in case there are multiple "-"
    };
  }
  return {
    goal: text.trim(),
    timeRef: ""
  };
}
function parseBeatHeader(text) {
  const linkMatch = text.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
  if (linkMatch) {
    const linkName = linkMatch[1].trim();
    const displayText = linkMatch[2].trim();
    const { intent: intent2, outcome: outcome2 } = parseBeatText(displayText);
    return {
      linkName,
      intent: intent2,
      outcome: outcome2,
      originalOrder: 0
      // Will be set by caller
    };
  }
  const simpleLinkMatch = text.match(/^\[\[([^\]]+)\]\]$/);
  if (simpleLinkMatch) {
    return {
      linkName: simpleLinkMatch[1].trim(),
      intent: "",
      outcome: "",
      originalOrder: 0
    };
  }
  const { intent, outcome } = parseBeatText(text);
  return {
    linkName: null,
    intent,
    outcome,
    originalOrder: 0
  };
}
function parseBeatText(text) {
  const parts = text.split(/\s*->\s*/);
  if (parts.length >= 2) {
    return {
      intent: parts[0].trim(),
      outcome: parts.slice(1).join(" -> ").trim()
      // Join in case there are multiple "->"
    };
  }
  return {
    intent: text.trim(),
    outcome: ""
  };
}
function compareContentBlocks(paragraph, localContentBlock, remoteContentBlock) {
  const paragraphContent = paragraph.content.trim();
  if (!paragraph.linkName) {
    if (remoteContentBlock && remoteContentBlock.content.trim() === paragraphContent) {
      if (localContentBlock && localContentBlock.id === remoteContentBlock.id) {
        return "unchanged";
      }
      return "unchanged";
    }
    return "new";
  }
  if (!localContentBlock) {
    if (remoteContentBlock && remoteContentBlock.content.trim() === paragraphContent) {
      return "remote_modified";
    }
    return "new";
  }
  if (!remoteContentBlock) {
    return "local_modified";
  }
  const localContent = localContentBlock.content.trim();
  const remoteContent = remoteContentBlock.content.trim();
  if (localContent === paragraphContent && remoteContent === paragraphContent) {
    return "unchanged";
  }
  if (paragraphContent !== localContent && paragraphContent !== remoteContent && localContent === remoteContent) {
    return "local_modified";
  }
  if (localContent === paragraphContent && remoteContent !== paragraphContent) {
    return "remote_modified";
  }
  if (paragraphContent !== localContent && paragraphContent !== remoteContent && localContent !== remoteContent) {
    return "conflict";
  }
  if (paragraphContent === remoteContent && localContent !== remoteContent) {
    return "remote_modified";
  }
  return "conflict";
}
function parseSceneBeatList(chapterContent) {
  const items = [];
  const frontmatterMatch = chapterContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = chapterContent.substring(contentStart).trim();
  const listSectionMatch = bodyContent.match(/##\s+Scenes\s+&\s+Beats\s*\n+([\s\S]*?)(?=\n##|$)/);
  if (!listSectionMatch) {
    return { items: [] };
  }
  const listContent = listSectionMatch[1].trim();
  const lines = listContent.split(/\n/);
  let order = 0;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    const itemMatch = trimmedLine.match(/^([+-])\s+(.+)$/);
    if (!itemMatch) {
      continue;
    }
    const hasProse = itemMatch[1] === "+";
    const itemText = itemMatch[2].trim();
    const tabMatch = line.match(/^(\t*)/);
    const indentLevel = tabMatch ? tabMatch[1].length : 0;
    const isBeat = indentLevel > 0;
    const linkMatch = itemText.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
    let linkName = null;
    let displayText;
    if (linkMatch) {
      linkName = linkMatch[1].trim();
      displayText = linkMatch[2].trim();
    } else {
      displayText = itemText;
    }
    items.push({
      type: isBeat ? "beat" : "scene",
      linkName,
      displayText,
      hasProse,
      indentLevel: isBeat ? 1 : 0,
      originalOrder: order++
    });
  }
  return { items };
}
function parseChapterList(storyContent) {
  const items = [];
  const frontmatterMatch = storyContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = storyContent.substring(contentStart).trim();
  const listSectionMatch = bodyContent.match(/##\s+Chapters(?:,\s*Scenes\s*&\s*Beats)?\s*\n+([\s\S]*?)(?=\n##|$)/);
  if (!listSectionMatch) {
    return { items: [] };
  }
  const listContent = listSectionMatch[1].trim();
  const lines = listContent.split(/\n/);
  let order = 0;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    const itemMatch = trimmedLine.match(/^([+-])\s+(.+)$/);
    if (!itemMatch) {
      continue;
    }
    const hasProse = itemMatch[1] === "+";
    const itemText = itemMatch[2].trim();
    const tabMatch = line.match(/^(\t*)/);
    const indentLevel = tabMatch ? tabMatch[1].length : 0;
    let type2;
    if (indentLevel === 0) {
      type2 = "chapter";
    } else if (indentLevel === 1) {
      type2 = "scene";
    } else if (indentLevel === 2) {
      type2 = "beat";
    } else {
      continue;
    }
    const linkMatch = itemText.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
    let linkName = null;
    let displayText;
    if (linkMatch) {
      linkName = linkMatch[1].trim();
      displayText = linkMatch[2].trim();
    } else {
      displayText = itemText;
    }
    items.push({
      type: type2,
      linkName,
      displayText,
      hasProse,
      indentLevel: indentLevel / 2,
      // Normalize to 0, 1, 2
      originalOrder: order++
    });
  }
  return { items };
}
function parseBeatList(sceneContent) {
  const items = [];
  const frontmatterMatch = sceneContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = sceneContent.substring(contentStart).trim();
  const listSectionMatch = bodyContent.match(/##\s+Beats\s*\n+([\s\S]*?)(?=\n##|$)/);
  if (!listSectionMatch) {
    return { items: [] };
  }
  const listContent = listSectionMatch[1].trim();
  const lines = listContent.split(/\n/);
  let order = 0;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    if (trimmedLine.startsWith(">")) {
      continue;
    }
    const itemMatch = trimmedLine.match(/^([+-])\s+(.+)$/);
    if (!itemMatch) {
      continue;
    }
    const hasProse = itemMatch[1] === "+";
    const itemText = itemMatch[2].trim();
    const linkMatch = itemText.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
    let linkName = null;
    let displayText;
    if (linkMatch) {
      linkName = linkMatch[1].trim();
      displayText = linkMatch[2].trim();
    } else {
      displayText = itemText;
    }
    items.push({
      linkName,
      displayText,
      hasProse,
      originalOrder: order++
    });
  }
  return { items };
}
function parseOrphanScenesList(storyContent) {
  const items = [];
  const frontmatterMatch = storyContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = storyContent.substring(contentStart).trim();
  const listSectionMatch = bodyContent.match(/##\s+Orphan\s+Scenes\s*\n+([\s\S]*?)(?=\n##|$)/);
  if (!listSectionMatch) {
    return { items: [] };
  }
  const listContent = listSectionMatch[1].trim();
  const lines = listContent.split(/\n/);
  let order = 0;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    if (trimmedLine.startsWith(">")) {
      continue;
    }
    const itemMatch = trimmedLine.match(/^([+-])\s+(.+)$/);
    if (!itemMatch) {
      continue;
    }
    const hasProse = itemMatch[1] === "+";
    const itemText = itemMatch[2].trim();
    const tabMatch = line.match(/^(\t*)/);
    const indentLevel = tabMatch ? tabMatch[1].length : 0;
    const isBeat = indentLevel > 0;
    const linkMatch = itemText.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
    let linkName = null;
    let displayText;
    if (linkMatch) {
      linkName = linkMatch[1].trim();
      displayText = linkMatch[2].trim();
    } else {
      displayText = itemText;
    }
    items.push({
      type: isBeat ? "beat" : "scene",
      linkName,
      displayText,
      hasProse,
      indentLevel: isBeat ? 1 : 0,
      originalOrder: order++
    });
  }
  return { items };
}
function parseOrphanBeatsList(storyContent) {
  const items = [];
  const frontmatterMatch = storyContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = storyContent.substring(contentStart).trim();
  const listSectionMatch = bodyContent.match(/##\s+Orphan\s+Beats\s*\n+([\s\S]*?)(?=\n##|$)/);
  if (!listSectionMatch) {
    return { items: [] };
  }
  const listContent = listSectionMatch[1].trim();
  const lines = listContent.split(/\n/);
  let order = 0;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    if (trimmedLine.startsWith(">")) {
      continue;
    }
    const itemMatch = trimmedLine.match(/^([+-])\s+(.+)$/);
    if (!itemMatch) {
      continue;
    }
    const hasProse = itemMatch[1] === "+";
    const itemText = itemMatch[2].trim();
    const linkMatch = itemText.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
    let linkName = null;
    let displayText;
    if (linkMatch) {
      linkName = linkMatch[1].trim();
      displayText = linkMatch[2].trim();
    } else {
      displayText = itemText;
    }
    items.push({
      linkName,
      displayText,
      hasProse,
      originalOrder: order++
    });
  }
  return { items };
}
function parseStoryProse(storyContent) {
  const sections = [];
  const frontmatterMatch = storyContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = storyContent.substring(contentStart).trim();
  const storyHeaderMatch = bodyContent.match(/^(#\s+Story:\s*.+)$/m);
  const chapterHeaderMatch = bodyContent.match(/^(##\s+Chapter\s*\d*:\s*.+)$/m);
  let proseStartIndex = -1;
  if (storyHeaderMatch) {
    proseStartIndex = bodyContent.indexOf(storyHeaderMatch[0]);
  } else if (chapterHeaderMatch) {
    proseStartIndex = bodyContent.indexOf(chapterHeaderMatch[0]);
  }
  if (proseStartIndex === -1) {
    return { sections: [] };
  }
  const proseContent = bodyContent.substring(proseStartIndex);
  const lines = proseContent.split(/\n/);
  let order = 0;
  let currentChapter = null;
  let currentScene = null;
  let currentBeat = null;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    if (trimmedLine.startsWith(">")) {
      continue;
    }
    const storyMatch = trimmedLine.match(/^#\s+Story:\s*(.+)$/i);
    if (storyMatch) {
      continue;
    }
    const chapterMatch = trimmedLine.match(/^##\s+Chapter\s*\d*:\s*(.+)$/i);
    if (chapterMatch) {
      const chapterText = chapterMatch[1].trim();
      const linkMatch = chapterText.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
      if (linkMatch) {
        currentChapter = {
          linkName: linkMatch[1].trim(),
          title: linkMatch[2].trim()
        };
      } else {
        currentChapter = {
          linkName: null,
          title: chapterText
        };
      }
      currentScene = null;
      currentBeat = null;
      continue;
    }
    const sceneMatch = trimmedLine.match(/^###\s+Scene:\s*(.+)$/i);
    if (sceneMatch) {
      const sceneText = sceneMatch[1].trim();
      currentScene = parseSceneHeaderText(sceneText);
      currentScene.originalOrder = order++;
      sections.push({
        type: "scene",
        scene: currentScene,
        originalOrder: currentScene.originalOrder
      });
      currentBeat = null;
      continue;
    }
    const beatMatch = trimmedLine.match(/^####\s+Beat:\s*(.+)$/i);
    if (beatMatch) {
      const beatText = beatMatch[1].trim();
      currentBeat = parseBeatHeaderText(beatText);
      currentBeat.originalOrder = order++;
      sections.push({
        type: "beat",
        beat: currentBeat,
        originalOrder: currentBeat.originalOrder
      });
      continue;
    }
    if (trimmedLine.startsWith("#")) {
      continue;
    }
    if (trimmedLine.match(/^[+-]\s+/)) {
      continue;
    }
    const proseMatch = trimmedLine.match(/^\s*\[\[([^\|]+)\|([^\]]+)\]\]\s*$/);
    if (proseMatch) {
      const linkName = proseMatch[1].trim();
      const content = proseMatch[2].trim();
      const paragraph = {
        content,
        linkName,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
      continue;
    }
    if (trimmedLine.length > 0) {
      const paragraph = {
        content: trimmedLine,
        linkName: null,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
    }
  }
  return { sections };
}
function parseSceneHeaderText(text) {
  const linkMatch = text.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
  if (linkMatch) {
    const linkName = linkMatch[1].trim();
    const displayText = linkMatch[2].trim();
    const parts2 = displayText.split(/\s*-\s*/);
    return {
      linkName,
      goal: parts2[0].trim(),
      timeRef: parts2.length > 1 ? parts2.slice(1).join(" - ").trim() : "",
      originalOrder: 0
    };
  }
  const simpleLinkMatch = text.match(/^\[\[([^\]]+)\]\]$/);
  if (simpleLinkMatch) {
    return {
      linkName: simpleLinkMatch[1].trim(),
      goal: "",
      timeRef: "",
      originalOrder: 0
    };
  }
  const parts = text.split(/\s*-\s*/);
  return {
    linkName: null,
    goal: parts[0].trim(),
    timeRef: parts.length > 1 ? parts.slice(1).join(" - ").trim() : "",
    originalOrder: 0
  };
}
function parseBeatHeaderText(text) {
  const linkMatch = text.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
  if (linkMatch) {
    const linkName = linkMatch[1].trim();
    const displayText = linkMatch[2].trim();
    const parts2 = displayText.split(/\s*->\s*/);
    return {
      linkName,
      intent: parts2[0].trim(),
      outcome: parts2.length > 1 ? parts2.slice(1).join(" -> ").trim() : "",
      originalOrder: 0
    };
  }
  const simpleLinkMatch = text.match(/^\[\[([^\]]+)\]\]$/);
  if (simpleLinkMatch) {
    return {
      linkName: simpleLinkMatch[1].trim(),
      intent: "",
      outcome: "",
      originalOrder: 0
    };
  }
  const parts = text.split(/\s*->\s*/);
  return {
    linkName: null,
    intent: parts[0].trim(),
    outcome: parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "",
    originalOrder: 0
  };
}
function parseSceneProse(sceneContent) {
  const sections = [];
  const frontmatterMatch = sceneContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = sceneContent.substring(contentStart).trim();
  const sceneHeaderMatch = bodyContent.match(/^(###\s+Scene:\s*.+)$/m);
  const beatHeaderMatch = bodyContent.match(/^(#{3,4}\s+Beat:\s*.+)$/m);
  let proseStartIndex = -1;
  if (sceneHeaderMatch) {
    proseStartIndex = bodyContent.indexOf(sceneHeaderMatch[0]);
  } else if (beatHeaderMatch) {
    proseStartIndex = bodyContent.indexOf(beatHeaderMatch[0]);
  } else {
    const beatsListEnd = bodyContent.match(/##\s+Beats\s*\n+[\s\S]*?(?=\n###|\n####|\n[^#\-\+>\s]|$)/);
    if (beatsListEnd) {
      proseStartIndex = bodyContent.indexOf(beatsListEnd[0]) + beatsListEnd[0].length;
    } else {
      const firstNonListContent = bodyContent.match(/(?:^|\n)([^#\-\+>\s\n].+)/);
      if (firstNonListContent) {
        proseStartIndex = bodyContent.indexOf(firstNonListContent[1]);
      }
    }
  }
  if (proseStartIndex === -1) {
    return { sections: [] };
  }
  const proseContent = bodyContent.substring(proseStartIndex);
  const lines = proseContent.split(/\n/);
  let order = 0;
  let currentBeat = null;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    if (trimmedLine.startsWith(">")) {
      continue;
    }
    const sceneMatch = trimmedLine.match(/^###\s+Scene:\s*(.+)$/i);
    if (sceneMatch) {
      const sceneText = sceneMatch[1].trim();
      const parsedScene = parseSceneHeaderText(sceneText);
      parsedScene.originalOrder = order++;
      sections.push({
        type: "scene",
        scene: parsedScene,
        originalOrder: parsedScene.originalOrder
      });
      currentBeat = null;
      continue;
    }
    const beatMatch = trimmedLine.match(/^#{3,4}\s+Beat:\s*(.+)$/i);
    if (beatMatch) {
      const beatText = beatMatch[1].trim();
      currentBeat = parseBeatHeaderText(beatText);
      currentBeat.originalOrder = order++;
      sections.push({
        type: "beat",
        beat: currentBeat,
        originalOrder: currentBeat.originalOrder
      });
      continue;
    }
    if (trimmedLine.startsWith("#")) {
      continue;
    }
    if (trimmedLine.match(/^[+-]\s+/)) {
      continue;
    }
    const proseMatch = trimmedLine.match(/^\s*\[\[([^\|]+)\|([^\]]+)\]\]\s*$/);
    if (proseMatch) {
      const linkName = proseMatch[1].trim();
      const content = proseMatch[2].trim();
      const paragraph = {
        content,
        linkName,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
      continue;
    }
    if (trimmedLine.length > 0) {
      const paragraph = {
        content: trimmedLine,
        linkName: null,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
    }
  }
  return { sections };
}
function parseBeatProse(beatContent) {
  const sections = [];
  const frontmatterMatch = beatContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = beatContent.substring(contentStart).trim();
  const beatHeaderMatch = bodyContent.match(/^(##\s+Beat:\s*.+)$/m);
  let proseStartIndex = -1;
  if (beatHeaderMatch) {
    proseStartIndex = bodyContent.indexOf(beatHeaderMatch[0]);
  }
  if (proseStartIndex === -1) {
    return { sections: [] };
  }
  const proseContent = bodyContent.substring(proseStartIndex);
  const lines = proseContent.split(/\n/);
  let order = 0;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    if (trimmedLine.startsWith(">")) {
      continue;
    }
    const beatMatch = trimmedLine.match(/^##\s+Beat:\s*(.+)$/i);
    if (beatMatch) {
      continue;
    }
    if (trimmedLine.startsWith("#")) {
      continue;
    }
    if (trimmedLine.match(/^[+-]\s+/)) {
      continue;
    }
    const proseMatch = trimmedLine.match(/^\s*\[\[([^\|]+)\|([^\]]+)\]\]\s*$/);
    if (proseMatch) {
      const linkName = proseMatch[1].trim();
      const content = proseMatch[2].trim();
      const paragraph = {
        content,
        linkName,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
      continue;
    }
    if (trimmedLine.length > 0) {
      const paragraph = {
        content: trimmedLine,
        linkName: null,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
    }
  }
  return { sections };
}

// src/views/modals/ConflictModal.ts
var import_obsidian8 = require("obsidian");
var ConflictModal = class extends import_obsidian8.Modal {
  constructor(app, localContentBlock, remoteContentBlock, onResolve) {
    super(app);
    this.resolution = null;
    this.localContentBlock = localContentBlock;
    this.remoteContentBlock = remoteContentBlock;
    this.onResolve = onResolve;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", {
      text: "Content Block Conflict"
    });
    contentEl.createEl("p", {
      text: "This content block has been modified both locally and remotely. Choose how to resolve the conflict:"
    });
    const diffContainer = contentEl.createDiv("conflict-diff-container");
    const localDiv = diffContainer.createDiv("conflict-local");
    localDiv.createEl("h3", { text: "Local Version" });
    const localContent = localDiv.createEl("pre", {
      text: this.localContentBlock.content,
      cls: "conflict-content"
    });
    localContent.style.whiteSpace = "pre-wrap";
    localContent.style.maxHeight = "200px";
    localContent.style.overflow = "auto";
    localContent.style.border = "1px solid var(--background-modifier-border)";
    localContent.style.padding = "10px";
    localContent.style.borderRadius = "4px";
    const remoteDiv = diffContainer.createDiv("conflict-remote");
    remoteDiv.createEl("h3", { text: "Remote Version" });
    const remoteContent = remoteDiv.createEl("pre", {
      text: this.remoteContentBlock.content,
      cls: "conflict-content"
    });
    remoteContent.style.whiteSpace = "pre-wrap";
    remoteContent.style.maxHeight = "200px";
    remoteContent.style.overflow = "auto";
    remoteContent.style.border = "1px solid var(--background-modifier-border)";
    remoteContent.style.padding = "10px";
    remoteContent.style.borderRadius = "4px";
    const manualDiv = contentEl.createDiv("conflict-manual");
    manualDiv.createEl("h3", { text: "Manual Merge (Optional)" });
    const manualTextarea = manualDiv.createEl("textarea", {
      text: this.localContentBlock.content,
      cls: "conflict-manual-input"
    });
    manualTextarea.style.width = "100%";
    manualTextarea.style.minHeight = "150px";
    manualTextarea.style.padding = "10px";
    manualTextarea.style.border = "1px solid var(--background-modifier-border)";
    manualTextarea.style.borderRadius = "4px";
    manualTextarea.style.fontFamily = "var(--font-monospace)";
    const buttonContainer = contentEl.createDiv("conflict-buttons");
    buttonContainer.style.marginTop = "20px";
    buttonContainer.style.display = "flex";
    buttonContainer.style.gap = "10px";
    const useLocalBtn = buttonContainer.createEl("button", {
      text: "Use Local",
      cls: "mod-cta"
    });
    useLocalBtn.onclick = async () => {
      this.resolution = { resolution: "local" };
      await this.onResolve(this.resolution);
      this.close();
    };
    const useRemoteBtn = buttonContainer.createEl("button", {
      text: "Use Remote"
    });
    useRemoteBtn.onclick = async () => {
      this.resolution = { resolution: "remote" };
      await this.onResolve(this.resolution);
      this.close();
    };
    const useManualBtn = buttonContainer.createEl("button", {
      text: "Use Manual Merge",
      cls: "mod-primary"
    });
    useManualBtn.onclick = async () => {
      this.resolution = {
        resolution: "manual",
        mergedContent: manualTextarea.value
      };
      await this.onResolve(this.resolution);
      this.close();
    };
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/sync/syncService.ts
var SyncService = class {
  constructor(apiClient, fileManager, settings, app) {
    this.apiClient = apiClient;
    this.fileManager = fileManager;
    this.settings = settings;
    this.app = app;
    if (this.settings.autoSyncOnApiUpdates) {
      this.unsubscribeFromNotifier = apiUpdateNotifier.subscribe(async (payload) => {
        try {
          await this.applyEntityData(payload);
        } catch (err) {
          console.error("Failed to auto-sync entity data", err);
        }
      });
    }
  }
  dispose() {
    if (this.unsubscribeFromNotifier) {
      this.unsubscribeFromNotifier();
      this.unsubscribeFromNotifier = void 0;
    }
  }
  // Pull story from service to Obsidian (Service  Obsidian)
  async pullStory(storyId, target) {
    try {
      if (target) {
        await this.pullSingleEntity(storyId, target);
        return;
      }
      const storyData = await this.apiClient.getStoryWithHierarchy(storyId);
      const folderPath = this.fileManager.getStoryFolderPath(
        storyData.story.title
      );
      const existingMetadata = await this.fileManager.readStoryMetadata(folderPath).catch(() => null);
      const allScenes = await this.apiClient.getScenesByStory(storyId);
      const orphanScenes = [];
      for (const scene of allScenes) {
        if (!scene.chapter_id) {
          const beats = await this.apiClient.getBeats(scene.id);
          orphanScenes.push({ scene, beats });
        }
      }
      orphanScenes.sort((a, b) => a.scene.order_num - b.scene.order_num);
      const allBeats = await this.apiClient.getBeatsByStory(storyId);
      const orphanBeats = [];
      const sceneIdSet = new Set(allScenes.map((s) => s.id));
      for (const beat of allBeats) {
        if (!beat.scene_id || !sceneIdSet.has(beat.scene_id)) {
          orphanBeats.push(beat);
        }
      }
      orphanBeats.sort((a, b) => a.order_num - b.order_num);
      const chapterContentData = /* @__PURE__ */ new Map();
      for (const chapterWithContent of storyData.chapters) {
        const contentBlocks = await this.apiClient.getContentBlocks(chapterWithContent.chapter.id);
        const contentBlockRefs = [];
        for (const contentBlock of contentBlocks) {
          const refs = await this.apiClient.getContentAnchors(contentBlock.id);
          contentBlockRefs.push(...refs);
        }
        chapterContentData.set(chapterWithContent.chapter.id, { contentBlocks, contentBlockRefs });
      }
      await this.fileManager.writeStoryMetadata(
        storyData.story,
        folderPath,
        storyData.chapters,
        orphanScenes,
        orphanBeats,
        chapterContentData
      );
      const contentsFolderPath = `${folderPath}/03-contents`;
      await this.fileManager.ensureFolderExists(contentsFolderPath);
      for (const typeFolder of ["00-texts", "01-images", "02-videos", "03-audios", "04-embeds", "05-links"]) {
        await this.fileManager.ensureFolderExists(`${contentsFolderPath}/${typeFolder}`);
      }
      const chaptersFolderPath = `${folderPath}/00-chapters`;
      await this.fileManager.ensureFolderExists(chaptersFolderPath);
      for (const chapterWithContent of storyData.chapters) {
        const contentData = chapterContentData.get(chapterWithContent.chapter.id);
        const contentBlocks = (contentData == null ? void 0 : contentData.contentBlocks) || [];
        const contentBlockRefs = (contentData == null ? void 0 : contentData.contentBlockRefs) || [];
        for (const contentBlock of contentBlocks) {
          const contentBlockFileName = this.fileManager.generateContentBlockFileName(contentBlock);
          const typeFolderPath = this.fileManager.getContentBlockFolderPath(folderPath, contentBlock.type || "text");
          await this.fileManager.ensureFolderExists(typeFolderPath);
          const contentBlockFilePath = `${typeFolderPath}/${contentBlockFileName}`;
          await this.fileManager.writeContentBlockFile(
            contentBlock,
            contentBlockFilePath,
            storyData.story.title
          );
        }
        const chapterFileName = `Chapter-${chapterWithContent.chapter.number}.md`;
        const chapterFilePath = `${chaptersFolderPath}/${chapterFileName}`;
        await this.fileManager.writeChapterFile(
          chapterWithContent,
          chapterFilePath,
          storyData.story.title,
          contentBlocks,
          contentBlockRefs,
          orphanScenes
          // Include orphan scenes for easy association
        );
        const scenesFolderPath2 = `${folderPath}/01-scenes`;
        await this.fileManager.ensureFolderExists(scenesFolderPath2);
        for (const { scene, beats } of chapterWithContent.scenes) {
          const sceneContentBlocks = await this.apiClient.getContentBlocksByScene(scene.id);
          const sceneFileName = this.fileManager.generateSceneFileName(scene);
          const sceneFilePath = `${scenesFolderPath2}/${sceneFileName}`;
          await this.fileManager.writeSceneFile(
            { scene, beats },
            sceneFilePath,
            storyData.story.title,
            sceneContentBlocks,
            orphanBeats
            // Include orphan beats for easy association
          );
          const beatsFolderPath2 = `${folderPath}/02-beats`;
          await this.fileManager.ensureFolderExists(beatsFolderPath2);
          for (const beat of beats) {
            const beatContentBlocks = await this.apiClient.getContentBlocksByBeat(beat.id);
            const beatFileName = this.fileManager.generateBeatFileName(beat);
            const beatFilePath = `${beatsFolderPath2}/${beatFileName}`;
            await this.fileManager.writeBeatFile(beat, beatFilePath, storyData.story.title, beatContentBlocks);
          }
        }
      }
      const scenesFolderPath = `${folderPath}/01-scenes`;
      await this.fileManager.ensureFolderExists(scenesFolderPath);
      for (const { scene, beats } of orphanScenes) {
        const sceneContentBlocks = await this.apiClient.getContentBlocksByScene(scene.id);
        const sceneFileName = this.fileManager.generateSceneFileName(scene);
        const sceneFilePath = `${scenesFolderPath}/${sceneFileName}`;
        await this.fileManager.writeSceneFile(
          { scene, beats },
          sceneFilePath,
          storyData.story.title,
          sceneContentBlocks,
          orphanBeats
          // Include orphan beats for easy association
        );
        const beatsFolderPath2 = `${folderPath}/02-beats`;
        await this.fileManager.ensureFolderExists(beatsFolderPath2);
        for (const beat of beats) {
          const beatContentBlocks = await this.apiClient.getContentBlocksByBeat(beat.id);
          const beatFileName = this.fileManager.generateBeatFileName(beat);
          const beatFilePath = `${beatsFolderPath2}/${beatFileName}`;
          await this.fileManager.writeBeatFile(beat, beatFilePath, storyData.story.title, beatContentBlocks);
        }
      }
      const beatsFolderPath = `${folderPath}/02-beats`;
      await this.fileManager.ensureFolderExists(beatsFolderPath);
      for (const beat of orphanBeats) {
        const beatContentBlocks = await this.apiClient.getContentBlocksByBeat(beat.id);
        const beatFileName = this.fileManager.generateBeatFileName(beat);
        const beatFilePath = `${beatsFolderPath}/${beatFileName}`;
        await this.fileManager.writeBeatFile(beat, beatFilePath, storyData.story.title, beatContentBlocks);
      }
      if (existingMetadata && existingMetadata.frontmatter.version !== void 0 && existingMetadata.frontmatter.version !== storyData.story.version_number) {
        await this.fileManager.createVersionSnapshot(
          folderPath,
          existingMetadata.frontmatter.version
        );
      }
      await this.syncVersionHistory(storyData.story.root_story_id, folderPath);
      new import_obsidian9.Notice(`Story "${storyData.story.title}" synced successfully`);
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to sync story";
      new import_obsidian9.Notice(`Error syncing story: ${errorMessage}`, 5e3);
      throw err;
    }
  }
  // Sync all previous versions of a story
  async syncVersionHistory(rootStoryId, storyFolderPath) {
    try {
      const allStories = await this.apiClient.listStories();
      const versions = allStories.filter((s) => s.root_story_id === rootStoryId);
      versions.sort((a, b) => a.version_number - b.version_number);
      const versionsPath = `${storyFolderPath}/versions`;
      await this.fileManager.ensureFolderExists(versionsPath);
      for (const versionStory of versions) {
        const currentVersion = versions[versions.length - 1].version_number;
        if (versionStory.version_number === currentVersion) {
          continue;
        }
        const versionFolderPath = `${versionsPath}/v${versionStory.version_number}`;
        const existingVersionFolder = this.fileManager.getVault().getAbstractFileByPath(
          versionFolderPath
        );
        if (existingVersionFolder) {
          console.log(`Version v${versionStory.version_number} already exists, skipping`);
          continue;
        }
        const versionData = await this.apiClient.getStoryWithHierarchy(
          versionStory.id
        );
        await this.fileManager.ensureFolderExists(versionFolderPath);
        await this.fileManager.writeStoryMetadata(
          versionData.story,
          versionFolderPath
        );
        const versionContentsFolderPath = `${versionFolderPath}/03-contents`;
        await this.fileManager.ensureFolderExists(versionContentsFolderPath);
        for (const typeFolder of ["00-texts", "01-images", "02-videos", "03-audios", "04-embeds", "05-links"]) {
          await this.fileManager.ensureFolderExists(`${versionContentsFolderPath}/${typeFolder}`);
        }
        const versionChaptersPath = `${versionFolderPath}/00-chapters`;
        await this.fileManager.ensureFolderExists(versionChaptersPath);
        for (const chapterWithContent of versionData.chapters) {
          const contentBlocks = await this.apiClient.getContentBlocks(chapterWithContent.chapter.id);
          const contentBlockRefs = [];
          for (const contentBlock of contentBlocks) {
            const refs = await this.apiClient.getContentAnchors(contentBlock.id);
            contentBlockRefs.push(...refs);
          }
          for (const contentBlock of contentBlocks) {
            const contentBlockFileName = this.fileManager.generateContentBlockFileName(contentBlock);
            const typeFolderPath = this.fileManager.getContentBlockFolderPath(versionFolderPath, contentBlock.type || "text");
            await this.fileManager.ensureFolderExists(typeFolderPath);
            const contentBlockFilePath = `${typeFolderPath}/${contentBlockFileName}`;
            await this.fileManager.writeContentBlockFile(
              contentBlock,
              contentBlockFilePath,
              versionData.story.title
            );
          }
          const chapterFileName = `Chapter-${chapterWithContent.chapter.number}.md`;
          const chapterFilePath = `${versionChaptersPath}/${chapterFileName}`;
          await this.fileManager.writeChapterFile(
            chapterWithContent,
            chapterFilePath,
            versionData.story.title,
            contentBlocks,
            contentBlockRefs
          );
          const versionScenesPath = `${versionFolderPath}/01-scenes`;
          await this.fileManager.ensureFolderExists(versionScenesPath);
          for (const { scene, beats } of chapterWithContent.scenes) {
            const sceneContentBlocks = await this.apiClient.getContentBlocksByScene(scene.id);
            const sceneFileName = this.fileManager.generateSceneFileName(scene);
            const sceneFilePath = `${versionScenesPath}/${sceneFileName}`;
            await this.fileManager.writeSceneFile(
              { scene, beats },
              sceneFilePath,
              versionData.story.title,
              sceneContentBlocks
            );
            const versionBeatsPath = `${versionFolderPath}/02-beats`;
            await this.fileManager.ensureFolderExists(versionBeatsPath);
            for (const beat of beats) {
              const beatContentBlocks = await this.apiClient.getContentBlocksByBeat(beat.id);
              const beatFileName = this.fileManager.generateBeatFileName(beat);
              const beatFilePath = `${versionBeatsPath}/${beatFileName}`;
              await this.fileManager.writeBeatFile(beat, beatFilePath, versionData.story.title, beatContentBlocks);
            }
          }
        }
        console.log(`Synced version v${versionStory.version_number}`);
      }
    } catch (err) {
      console.error("Error syncing version history:", err);
    }
  }
  // Pull all stories
  async pullAllStories() {
    if (this.settings.mode === "remote" && !this.settings.tenantId) {
      throw new Error("Tenant ID is required");
    }
    try {
      await this.apiClient.getWorlds();
    } catch (err) {
      console.error("Failed to load worlds:", err);
    }
    const stories = await this.apiClient.listStories();
    for (const story of stories) {
      try {
        await this.pullStory(story.id);
      } catch (err) {
        console.error(`Failed to sync story ${story.id}:`, err);
      }
    }
    new import_obsidian9.Notice(`Synced ${stories.length} stories`);
  }
  // Apply entity data received from API without fetching
  async applyEntityData(payload) {
    switch (payload.type) {
      case "chapter": {
        await this.writeChapterBundle({
          story: payload.story,
          chapter: payload.chapter,
          scenes: payload.scenes,
          contentBlocks: payload.contentBlocks,
          contentBlockRefs: payload.contentBlockRefs
        });
        new import_obsidian9.Notice(`Chapter "${payload.chapter.title}" synced successfully`);
        break;
      }
      case "scene": {
        const beatContentBlockMap = /* @__PURE__ */ new Map();
        if (payload.beatContentBlocks) {
          for (const [beatId, blocks] of Object.entries(payload.beatContentBlocks)) {
            beatContentBlockMap.set(beatId, blocks);
          }
        }
        const folderPath = this.fileManager.getStoryFolderPath(payload.story.title);
        await this.ensureStoryFolders(folderPath);
        await this.writeSceneBundle({
          storyTitle: payload.story.title,
          folderPath,
          scene: payload.scene,
          beats: payload.beats,
          sceneContentBlocks: payload.sceneContentBlocks,
          beatContentBlockMap,
          skipRemoteContentFetch: true
        });
        if (payload.sceneContentBlocks) {
          for (const contentBlock of payload.sceneContentBlocks) {
            await this.writeContentBlockToFolder(folderPath, payload.story.title, contentBlock);
          }
        }
        for (const blocks of beatContentBlockMap.values()) {
          for (const contentBlock of blocks) {
            await this.writeContentBlockToFolder(folderPath, payload.story.title, contentBlock);
          }
        }
        new import_obsidian9.Notice(`Scene "${payload.scene.goal}" synced successfully`);
        break;
      }
      case "content": {
        const folderPath = this.fileManager.getStoryFolderPath(payload.story.title);
        await this.ensureContentFolders(folderPath);
        await this.writeContentBlockToFolder(
          folderPath,
          payload.story.title,
          payload.contentBlock
        );
        new import_obsidian9.Notice("Content block synced successfully");
        break;
      }
    }
  }
  // Push story from Obsidian to service (Obsidian  Service)
  async pushStory(folderPath, target) {
    try {
      const { frontmatter: storyFrontmatter } = await this.fileManager.readStoryMetadata(folderPath);
      if (!storyFrontmatter.id) {
        throw new Error("Story metadata missing ID");
      }
      const storyId = storyFrontmatter.id;
      if (target) {
        await this.pushSingleEntity(folderPath, target, storyId, storyFrontmatter.title);
        return;
      }
      const storyFilePath = `${folderPath}/story.md`;
      const storyFile = this.fileManager.getVault().getAbstractFileByPath(storyFilePath);
      if (storyFile instanceof import_obsidian9.TFile) {
        const storyContent = await this.fileManager.getVault().read(storyFile);
        const chapterList = parseChapterList(storyContent);
        if (chapterList.items.length > 0) {
          await this.processChapterList(chapterList, storyId);
        }
        const orphanScenesList = parseOrphanScenesList(storyContent);
        if (orphanScenesList.items.length > 0) {
          await this.processOrphanScenesList(orphanScenesList, storyId);
        }
        const orphanBeatsList = parseOrphanBeatsList(storyContent);
        if (orphanBeatsList.items.length > 0) {
          await this.processOrphanBeatsList(orphanBeatsList, storyId);
        }
        const storyProse = parseStoryProse(storyContent);
        if (storyProse.sections.length > 0) {
          await this.pushStoryContentBlocks(storyFilePath, folderPath, storyId);
        }
      }
      await this.apiClient.updateStory(
        storyId,
        storyFrontmatter.title,
        storyFrontmatter.status
      );
      const chapterFiles = await this.fileManager.listChapterFiles(folderPath);
      for (const chapterFilePath of chapterFiles) {
        console.log(`Would update chapter: ${chapterFilePath}`);
      }
      for (const chapterFilePath of chapterFiles) {
        await this.pushChapterContentBlocks(chapterFilePath, folderPath);
      }
      const sceneFiles = await this.fileManager.listStorySceneFiles(folderPath);
      for (const sceneFilePath of sceneFiles) {
        await this.pushSceneBeats(sceneFilePath, storyId);
        await this.pushSceneContentBlocks(sceneFilePath, folderPath);
      }
      const beatFiles = await this.fileManager.listStoryBeatFiles(folderPath);
      for (const beatFilePath of beatFiles) {
        await this.pushBeatContentBlocks(beatFilePath, folderPath);
      }
      new import_obsidian9.Notice(`Story "${storyFrontmatter.title}" pushed successfully`);
      try {
        new import_obsidian9.Notice(`Syncing story "${storyFrontmatter.title}" from service...`);
        await this.pullStory(storyId);
        new import_obsidian9.Notice(`Story "${storyFrontmatter.title}" synced successfully`);
      } catch (pullErr) {
        const pullErrorMessage = pullErr instanceof Error ? pullErr.message : "Failed to sync story after push";
        new import_obsidian9.Notice(`Warning: ${pullErrorMessage}`, 5e3);
      }
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to push story";
      new import_obsidian9.Notice(`Error pushing story: ${errorMessage}`, 5e3);
      throw err;
    }
  }
  // Push prose blocks from a chapter file (hierarchical structure)
  async pushChapterContentBlocks(chapterFilePath, storyFolderPath) {
    const file = this.fileManager.getVault().getAbstractFileByPath(chapterFilePath);
    if (!(file instanceof import_obsidian9.TFile)) {
      throw new Error(`Chapter file not found: ${chapterFilePath}`);
    }
    const chapterContent = await this.fileManager.getVault().read(file);
    const frontmatter = this.fileManager.parseFrontmatter(chapterContent);
    if (!frontmatter.id || !frontmatter.story_id) {
      throw new Error("Chapter metadata missing ID or story_id");
    }
    const chapterId = frontmatter.id;
    const storyId = frontmatter.story_id;
    const contentsFolderPath = `${storyFolderPath}/03-contents`;
    const sceneBeatList = parseSceneBeatList(chapterContent);
    await this.processSceneBeatList(sceneBeatList, chapterId, storyId);
    const remoteContentBlocks = await this.apiClient.getContentBlocks(chapterId);
    const remoteContentBlocksMap = /* @__PURE__ */ new Map();
    for (const pb of remoteContentBlocks) {
      remoteContentBlocksMap.set(pb.id, pb);
    }
    const existingScenes = await this.apiClient.getScenes(chapterId);
    const sceneMap = /* @__PURE__ */ new Map();
    const sceneIdMap = /* @__PURE__ */ new Map();
    for (const scene of existingScenes) {
      const fileName = this.fileManager.generateSceneFileName(scene);
      const linkName = fileName.replace(/\.md$/, "");
      sceneMap.set(linkName, scene);
      sceneIdMap.set(scene.id, scene);
    }
    const beatMap = /* @__PURE__ */ new Map();
    const beatIdMap = /* @__PURE__ */ new Map();
    for (const scene of existingScenes) {
      const beats = await this.apiClient.getBeats(scene.id);
      for (const beat of beats) {
        const fileName = this.fileManager.generateBeatFileName(beat);
        const linkName = fileName.replace(/\.md$/, "");
        beatMap.set(linkName, beat);
        beatIdMap.set(beat.id, beat);
      }
    }
    const hierarchical = parseHierarchicalProse(chapterContent);
    const updatedSections = [];
    let currentScene = null;
    let currentBeat = null;
    let proseOrderNum = 1;
    let sceneOrderNum = existingScenes.length > 0 ? Math.max(...existingScenes.map((s) => s.order_num)) + 1 : 1;
    for (const section of hierarchical.sections) {
      if (section.type === "scene" && section.scene) {
        const { scene: parsedScene } = section;
        if (parsedScene.linkName) {
          currentScene = sceneMap.get(parsedScene.linkName) || null;
          if (!currentScene) {
            currentScene = sceneIdMap.get(parsedScene.linkName) || null;
          }
          if (currentScene) {
            if (parsedScene.goal !== currentScene.goal || parsedScene.timeRef !== currentScene.time_ref) {
              currentScene = await this.apiClient.updateScene(currentScene.id, {
                goal: parsedScene.goal,
                time_ref: parsedScene.timeRef
              });
            }
          }
        } else {
          currentScene = await this.apiClient.createScene({
            story_id: storyId,
            chapter_id: chapterId,
            order_num: sceneOrderNum++,
            goal: parsedScene.goal,
            time_ref: parsedScene.timeRef
          });
          const sceneFileName = this.fileManager.generateSceneFileName(currentScene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          sceneMap.set(sceneLinkName, currentScene);
          sceneIdMap.set(currentScene.id, currentScene);
        }
        if (currentScene) {
          const sceneFileName = this.fileManager.generateSceneFileName(currentScene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          const sceneDisplayText = currentScene.time_ref ? `${currentScene.goal} - ${currentScene.time_ref}` : currentScene.goal;
          updatedSections.push(`## Scene: [[${sceneLinkName}|${sceneDisplayText}]]`);
        }
        currentBeat = null;
      } else if (section.type === "beat" && section.beat) {
        const { beat: parsedBeat } = section;
        if (!currentScene) {
          throw new Error("Beat found without a parent scene");
        }
        if (parsedBeat.linkName) {
          currentBeat = beatMap.get(parsedBeat.linkName) || null;
          if (!currentBeat) {
            currentBeat = beatIdMap.get(parsedBeat.linkName) || null;
          }
          if (currentBeat) {
            if (parsedBeat.intent !== currentBeat.intent || parsedBeat.outcome !== currentBeat.outcome) {
              currentBeat = await this.apiClient.updateBeat(currentBeat.id, {
                intent: parsedBeat.intent,
                outcome: parsedBeat.outcome
              });
            }
          }
        } else {
          const existingBeats = await this.apiClient.getBeats(currentScene.id);
          const beatOrderNum = existingBeats.length > 0 ? Math.max(...existingBeats.map((b) => b.order_num)) + 1 : 1;
          currentBeat = await this.apiClient.createBeat({
            scene_id: currentScene.id,
            order_num: beatOrderNum,
            type: "setup",
            // Default type
            intent: parsedBeat.intent,
            outcome: parsedBeat.outcome
          });
          const beatFileName = this.fileManager.generateBeatFileName(currentBeat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          beatMap.set(beatLinkName, currentBeat);
          beatIdMap.set(currentBeat.id, currentBeat);
        }
        if (currentBeat) {
          const beatFileName = this.fileManager.generateBeatFileName(currentBeat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          const beatDisplayText = currentBeat.outcome ? `${currentBeat.intent} -> ${currentBeat.outcome}` : currentBeat.intent;
          updatedSections.push(`### Beat: [[${beatLinkName}|${beatDisplayText}]]`);
        }
      } else if (section.type === "prose" && section.prose) {
        const { prose: paragraph } = section;
        let localContentBlock = null;
        let remoteContentBlock = null;
        if (paragraph.linkName) {
          const contentBlockFilePath = await this.findContentBlockFileByLinkName(contentsFolderPath, paragraph.linkName);
          if (contentBlockFilePath) {
            localContentBlock = await this.fileManager.readContentBlockFromFile(contentBlockFilePath);
          }
          if (!localContentBlock) {
            localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          }
          if (localContentBlock) {
            remoteContentBlock = remoteContentBlocksMap.get(localContentBlock.id) || null;
          } else {
            const normalizedContent = paragraph.content.trim();
            for (const [id2, remotePB] of remoteContentBlocksMap.entries()) {
              if (remotePB.content.trim() === normalizedContent) {
                remoteContentBlock = remotePB;
                break;
              }
            }
          }
        } else {
          localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          const normalizedContent = paragraph.content.trim();
          for (const [id2, remotePB] of remoteContentBlocksMap.entries()) {
            if (remotePB.content.trim() === normalizedContent) {
              remoteContentBlock = remotePB;
              if (!localContentBlock) {
                localContentBlock = await this.findContentBlockById(contentsFolderPath, remotePB.id);
              }
              break;
            }
          }
        }
        const status = compareContentBlocks(paragraph, localContentBlock, remoteContentBlock);
        let finalContentBlock;
        switch (status) {
          case "new": {
            finalContentBlock = await this.apiClient.createContentBlock(chapterId, {
              order_num: proseOrderNum++,
              kind: "final",
              content: paragraph.content
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            if (currentScene) {
              await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", currentScene.id);
            }
            if (currentBeat) {
              await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
            }
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            break;
          }
          case "unchanged": {
            if (!localContentBlock && remoteContentBlock) {
              finalContentBlock = remoteContentBlock;
              const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
              await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            } else if (localContentBlock) {
              if (localContentBlock.order_num !== proseOrderNum) {
                finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
                  order_num: proseOrderNum++
                });
                const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
                await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
              } else {
                finalContentBlock = localContentBlock;
                proseOrderNum++;
              }
            } else {
              finalContentBlock = remoteContentBlock;
              proseOrderNum++;
            }
            if (finalContentBlock) {
              const existingRefs = await this.apiClient.getContentAnchors(finalContentBlock.id);
              const hasSceneRef = existingRefs.some((r) => r.entity_type === "scene" && r.entity_id === (currentScene == null ? void 0 : currentScene.id));
              const hasBeatRef = existingRefs.some((r) => r.entity_type === "beat" && r.entity_id === (currentBeat == null ? void 0 : currentBeat.id));
              if (currentScene && !hasSceneRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", currentScene.id);
              }
              if (currentBeat && !hasBeatRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
              }
            }
            if (paragraph.linkName) {
              updatedSections.push(`[[${paragraph.linkName}|${paragraph.content}]]`);
            } else {
              const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
              updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            }
            break;
          }
          case "local_modified": {
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: paragraph.content,
              order_num: proseOrderNum++
            });
            const filePathLocalMod = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePathLocalMod, void 0);
            if (finalContentBlock) {
              const existingRefs = await this.apiClient.getContentAnchors(finalContentBlock.id);
              const hasSceneRef = existingRefs.some((r) => r.entity_type === "scene" && r.entity_id === (currentScene == null ? void 0 : currentScene.id));
              const hasBeatRef = existingRefs.some((r) => r.entity_type === "beat" && r.entity_id === (currentBeat == null ? void 0 : currentBeat.id));
              if (currentScene && !hasSceneRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", currentScene.id);
              }
              if (currentBeat && !hasBeatRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
              }
            }
            const linkNameLocalMod = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkNameLocalMod}|${paragraph.content}]]`);
            break;
          }
          case "remote_modified": {
            finalContentBlock = remoteContentBlock;
            const filePathRemoteMod = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePathRemoteMod, void 0);
            if (finalContentBlock) {
              const existingRefs = await this.apiClient.getContentAnchors(finalContentBlock.id);
              const hasSceneRef = existingRefs.some((r) => r.entity_type === "scene" && r.entity_id === (currentScene == null ? void 0 : currentScene.id));
              const hasBeatRef = existingRefs.some((r) => r.entity_type === "beat" && r.entity_id === (currentBeat == null ? void 0 : currentBeat.id));
              if (currentScene && !hasSceneRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", currentScene.id);
              }
              if (currentBeat && !hasBeatRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
              }
            }
            const linkNameRemoteMod = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkNameRemoteMod}|${finalContentBlock.content}]]`);
            new import_obsidian9.Notice(`Prose block updated from remote: ${linkNameRemoteMod}`, 3e3);
            proseOrderNum++;
            break;
          }
          case "conflict": {
            const resolution = await this.resolveConflict(localContentBlock, remoteContentBlock);
            let resolvedContent;
            if (resolution.resolution === "local") {
              resolvedContent = paragraph.content;
            } else if (resolution.resolution === "remote") {
              resolvedContent = remoteContentBlock.content;
            } else {
              resolvedContent = resolution.mergedContent || paragraph.content;
            }
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: resolvedContent,
              order_num: proseOrderNum++
            });
            const filePathConflict = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePathConflict, void 0);
            if (finalContentBlock) {
              const existingRefs = await this.apiClient.getContentAnchors(finalContentBlock.id);
              const hasSceneRef = existingRefs.some((r) => r.entity_type === "scene" && r.entity_id === (currentScene == null ? void 0 : currentScene.id));
              const hasBeatRef = existingRefs.some((r) => r.entity_type === "beat" && r.entity_id === (currentBeat == null ? void 0 : currentBeat.id));
              if (currentScene && !hasSceneRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", currentScene.id);
              }
              if (currentBeat && !hasBeatRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
              }
            }
            const linkNameConflict = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkNameConflict}|${resolvedContent}]]`);
            break;
          }
        }
      }
    }
    await this.updateChapterFile(chapterContent, updatedSections, file, frontmatter, existingScenes, beatMap, remoteContentBlocks, chapterId);
  }
  // Update chapter file with both scene/beat list and chapter content
  async updateChapterFile(originalContent, updatedSections, file, frontmatter, scenes, beatMap, contentBlocks, chapterId) {
    const allContentAnchors = [];
    for (const contentBlock of contentBlocks) {
      const refs = await this.apiClient.getContentAnchors(contentBlock.id);
      allContentAnchors.push(...refs);
    }
    const proseRefsByScene = /* @__PURE__ */ new Map();
    const proseRefsByBeat = /* @__PURE__ */ new Map();
    for (const ref of allContentAnchors) {
      if (ref.entity_type === "scene") {
        if (!proseRefsByScene.has(ref.entity_id)) {
          proseRefsByScene.set(ref.entity_id, []);
        }
        proseRefsByScene.get(ref.entity_id).push(ref);
      } else if (ref.entity_type === "beat") {
        if (!proseRefsByBeat.has(ref.entity_id)) {
          proseRefsByBeat.set(ref.entity_id, []);
        }
        proseRefsByBeat.get(ref.entity_id).push(ref);
      }
    }
    const sceneBeatListItems = [];
    for (const scene of scenes.sort((a, b) => a.order_num - b.order_num)) {
      const sceneFileName = this.fileManager.generateSceneFileName(scene);
      const sceneLinkName = sceneFileName.replace(/\.md$/, "");
      const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
      const sceneProseRefs = proseRefsByScene.get(scene.id) || [];
      const sceneContentBlockIds = new Set(sceneProseRefs.map((r) => r.content_block_id));
      const hasSceneProse = Array.from(sceneContentBlockIds).some((contentBlockId) => {
        const blockRefs = allContentAnchors.filter((r) => r.content_block_id === contentBlockId);
        return !blockRefs.some((r) => r.entity_type === "beat");
      });
      const sceneMarker = hasSceneProse ? "+" : "-";
      sceneBeatListItems.push(`${sceneMarker} [[${sceneLinkName}|Scene ${scene.order_num}: ${sceneDisplayText}]]`);
      const sceneBeats = [];
      for (const [linkName, beat] of beatMap.entries()) {
        if (beat.scene_id === scene.id) {
          sceneBeats.push(beat);
        }
      }
      for (const beat of sceneBeats.sort((a, b) => a.order_num - b.order_num)) {
        const beatFileName = this.fileManager.generateBeatFileName(beat);
        const beatLinkName = beatFileName.replace(/\.md$/, "");
        const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
        const beatProseRefs = proseRefsByBeat.get(beat.id) || [];
        const hasBeatProse = beatProseRefs.length > 0;
        const beatMarker = hasBeatProse ? "+" : "-";
        sceneBeatListItems.push(`	${beatMarker} [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]`);
      }
    }
    const frontmatterMatch = originalContent.match(/^---\n([\s\S]*?)\n---/);
    const frontmatterText = frontmatterMatch ? frontmatterMatch[0] : "";
    const bodyStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
    const bodyContent = originalContent.substring(bodyStart).trim();
    const chapterNumber = frontmatter.number || "1";
    const chapterTitle = frontmatter.title || "Untitled";
    const listSectionMatch = bodyContent.match(/([\s\S]*?##\s+Scenes\s+&\s+Beats\s*\n+)([\s\S]*?)(?=\n##|$)/);
    const updatedListSection = `## Scenes & Beats

${sceneBeatListItems.join("\n")}

`;
    let updatedBody;
    if (listSectionMatch) {
      const beforeList = listSectionMatch[1];
      const afterList = bodyContent.substring(listSectionMatch.index + listSectionMatch[0].length);
      updatedBody = `${beforeList}${updatedListSection}${afterList}`;
    } else {
      const titleMatch = bodyContent.match(/(#\s+[^\n]+\n+)([\s\S]*)/);
      if (titleMatch) {
        updatedBody = `${titleMatch[1]}${updatedListSection}${titleMatch[2]}`;
      } else {
        updatedBody = `${updatedListSection}${bodyContent}`;
      }
    }
    const chapterHeaderPattern = `##\\s+Chapter\\s+${chapterNumber}:\\s+[^\\n]+`;
    const chapterSectionMatch = updatedBody.match(new RegExp(`([\\s\\S]*?${chapterHeaderPattern}\\s*\\n+)([\\s\\S]*?)(?=\\n##\\s+Chapter\\s+\\d+:|$)`, "i"));
    if (!chapterSectionMatch) {
      const newChapterSection = `

## Chapter ${chapterNumber}: ${chapterTitle}

${updatedSections.join("\n\n")}

`;
      updatedBody = `${updatedBody}${newChapterSection}`;
    } else {
      const beforeChapter = chapterSectionMatch[1];
      const afterChapter = updatedBody.substring(chapterSectionMatch.index + chapterSectionMatch[0].length);
      const newChapterContent = updatedSections.join("\n\n");
      updatedBody = `${beforeChapter}${newChapterContent}

${afterChapter}`;
    }
    const updatedContent = `${frontmatterText}
${updatedBody}`;
    await this.fileManager.getVault().modify(file, updatedContent);
  }
  // Process the "## Chapters, Scenes & Beats" list and update order
  async processChapterList(list, storyId) {
    const existingChapters = await this.apiClient.getChapters(storyId);
    const chapterMap = /* @__PURE__ */ new Map();
    const chapterIdMap = /* @__PURE__ */ new Map();
    for (const chapter of existingChapters) {
      const fileName = `Chapter-${chapter.number}.md`;
      const linkName = fileName.replace(/\.md$/, "");
      chapterMap.set(linkName, chapter);
      chapterIdMap.set(chapter.id, chapter);
    }
    let currentChapter = null;
    let currentScene = null;
    let chapterOrderNum = 1;
    const sceneOrderNums = /* @__PURE__ */ new Map();
    const beatOrderNums = /* @__PURE__ */ new Map();
    for (const item of list.items) {
      if (item.type === "chapter") {
        let title;
        let chapterNumber = null;
        const chapterMatch = item.displayText.match(/Chapter\s+(\d+):\s*(.+)/);
        if (chapterMatch) {
          chapterNumber = parseInt(chapterMatch[1], 10);
          title = chapterMatch[2].trim();
        } else {
          title = item.displayText.trim();
        }
        currentScene = null;
        sceneOrderNums.set("current", 1);
        if (item.linkName) {
          currentChapter = chapterMap.get(item.linkName) || null;
          if (!currentChapter) {
            currentChapter = chapterIdMap.get(item.linkName) || null;
          }
          if (currentChapter) {
            const needsOrderUpdate = currentChapter.number !== chapterOrderNum;
            const needsTitleUpdate = title !== currentChapter.title;
            if (needsOrderUpdate || needsTitleUpdate) {
              currentChapter = await this.apiClient.updateChapter(currentChapter.id, {
                number: chapterOrderNum,
                title: needsTitleUpdate ? title : void 0
              });
              const fileName = `Chapter-${currentChapter.number}.md`;
              const linkName = fileName.replace(/\.md$/, "");
              chapterMap.set(linkName, currentChapter);
              chapterIdMap.set(currentChapter.id, currentChapter);
            }
          }
        } else {
          if (title) {
            currentChapter = await this.apiClient.createChapter(storyId, {
              number: chapterOrderNum,
              title,
              status: "draft"
            });
            const fileName = `Chapter-${currentChapter.number}.md`;
            const linkName = fileName.replace(/\.md$/, "");
            chapterMap.set(linkName, currentChapter);
            chapterIdMap.set(currentChapter.id, currentChapter);
          }
        }
        if (currentChapter) {
          sceneOrderNums.set(currentChapter.id, 1);
        }
        chapterOrderNum++;
      } else if (item.type === "scene" && currentChapter) {
        let goal;
        let timeRef = "";
        const sceneMatch = item.displayText.match(/Scene\s+\d+:\s*(.+)/);
        if (sceneMatch) {
          const sceneText = sceneMatch[1].trim();
          const parts = sceneText.split(/\s*-\s*/);
          goal = parts[0].trim();
          timeRef = parts.length > 1 ? parts.slice(1).join(" - ").trim() : "";
        } else {
          const parts = item.displayText.split(/\s*-\s*/);
          goal = parts[0].trim();
          timeRef = parts.length > 1 ? parts.slice(1).join(" - ").trim() : "";
        }
        const currentSceneOrderNum = sceneOrderNums.get(currentChapter.id) || 1;
        currentScene = null;
        if (item.linkName) {
          const existingScenes = await this.apiClient.getScenes(currentChapter.id);
          const sceneMap = /* @__PURE__ */ new Map();
          const sceneIdMap = /* @__PURE__ */ new Map();
          for (const scene of existingScenes) {
            const fileName = this.fileManager.generateSceneFileName(scene);
            const linkName = fileName.replace(/\.md$/, "");
            sceneMap.set(linkName, scene);
            sceneIdMap.set(scene.id, scene);
          }
          currentScene = sceneMap.get(item.linkName) || null;
          if (!currentScene) {
            currentScene = sceneIdMap.get(item.linkName) || null;
          }
          if (currentScene) {
            const needsOrderUpdate = currentScene.order_num !== currentSceneOrderNum;
            const needsContentUpdate = goal !== currentScene.goal || timeRef !== currentScene.time_ref;
            const needsChapterUpdate = currentScene.chapter_id !== currentChapter.id;
            if (needsOrderUpdate || needsContentUpdate || needsChapterUpdate) {
              currentScene = await this.apiClient.updateScene(currentScene.id, {
                goal,
                time_ref: timeRef,
                order_num: currentSceneOrderNum,
                chapter_id: currentChapter.id
              });
            }
            const existingBeats = await this.apiClient.getBeats(currentScene.id);
            if (existingBeats.length === 0) {
              beatOrderNums.set(currentScene.id, 1);
            } else {
              const maxOrderNum = Math.max(...existingBeats.map((b) => b.order_num));
              beatOrderNums.set(currentScene.id, maxOrderNum + 1);
            }
          }
        } else {
          currentScene = await this.apiClient.createScene({
            story_id: storyId,
            chapter_id: currentChapter.id,
            order_num: currentSceneOrderNum,
            goal,
            time_ref: timeRef
          });
          beatOrderNums.set(currentScene.id, 1);
        }
        sceneOrderNums.set(currentChapter.id, currentSceneOrderNum + 1);
      } else if (item.type === "beat" && currentScene) {
        let intent;
        let outcome = "";
        const beatMatch = item.displayText.match(/Beat\s+\d+:\s*(.+)/);
        if (beatMatch) {
          const beatText = beatMatch[1].trim();
          const parts = beatText.split(/\s*->\s*/);
          intent = parts[0].trim();
          outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
        } else {
          const parts = item.displayText.split(/\s*->\s*/);
          intent = parts[0].trim();
          outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
        }
        const currentBeatOrderNum = beatOrderNums.get(currentScene.id) || 1;
        if (item.linkName) {
          const existingBeats = await this.apiClient.getBeats(currentScene.id);
          const beatMap = /* @__PURE__ */ new Map();
          const beatIdMap = /* @__PURE__ */ new Map();
          for (const beat of existingBeats) {
            const fileName = this.fileManager.generateBeatFileName(beat);
            const linkName = fileName.replace(/\.md$/, "");
            beatMap.set(linkName, beat);
            beatIdMap.set(beat.id, beat);
          }
          let currentBeat = beatMap.get(item.linkName) || null;
          if (!currentBeat) {
            currentBeat = beatIdMap.get(item.linkName) || null;
          }
          if (currentBeat) {
            const needsOrderUpdate = currentBeat.order_num !== currentBeatOrderNum;
            const needsContentUpdate = intent !== currentBeat.intent || outcome !== currentBeat.outcome;
            const needsSceneUpdate = currentBeat.scene_id !== currentScene.id;
            if (needsOrderUpdate || needsContentUpdate || needsSceneUpdate) {
              currentBeat = await this.apiClient.updateBeat(currentBeat.id, {
                intent,
                outcome,
                order_num: currentBeatOrderNum,
                scene_id: currentScene.id
              });
            }
          }
        } else {
          await this.apiClient.createBeat({
            scene_id: currentScene.id,
            order_num: currentBeatOrderNum,
            type: "setup",
            // Default type
            intent,
            outcome
          });
        }
        beatOrderNums.set(currentScene.id, currentBeatOrderNum + 1);
      }
    }
  }
  // Process the "## Beats" list from a scene file and update beat order
  async pushSceneBeats(sceneFilePath, storyId) {
    const file = this.fileManager.getVault().getAbstractFileByPath(sceneFilePath);
    if (!(file instanceof import_obsidian9.TFile)) {
      return;
    }
    const sceneContent = await this.fileManager.getVault().read(file);
    const frontmatter = this.fileManager.parseFrontmatter(sceneContent);
    if (!frontmatter.id) {
      return;
    }
    const sceneId = frontmatter.id;
    const beatList = parseBeatList(sceneContent);
    if (beatList.items.length === 0) {
      return;
    }
    const existingBeats = await this.apiClient.getBeats(sceneId);
    const beatMap = /* @__PURE__ */ new Map();
    const beatIdMap = /* @__PURE__ */ new Map();
    for (const beat of existingBeats) {
      const fileName = this.fileManager.generateBeatFileName(beat);
      const linkName = fileName.replace(/\.md$/, "");
      beatMap.set(linkName, beat);
      beatIdMap.set(beat.id, beat);
    }
    let beatOrderNum = 1;
    for (const item of beatList.items) {
      let intent;
      let outcome = "";
      const beatMatch = item.displayText.match(/Beat\s+\d+:\s*(.+)/);
      if (beatMatch) {
        const beatText = beatMatch[1].trim();
        const parts = beatText.split(/\s*->\s*/);
        intent = parts[0].trim();
        outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
      } else {
        const parts = item.displayText.split(/\s*->\s*/);
        intent = parts[0].trim();
        outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
      }
      if (item.linkName) {
        let currentBeat = beatMap.get(item.linkName) || null;
        if (!currentBeat) {
          currentBeat = beatIdMap.get(item.linkName) || null;
        }
        if (currentBeat) {
          const needsOrderUpdate = currentBeat.order_num !== beatOrderNum;
          const needsContentUpdate = intent !== currentBeat.intent || outcome !== currentBeat.outcome;
          if (needsOrderUpdate || needsContentUpdate) {
            currentBeat = await this.apiClient.updateBeat(currentBeat.id, {
              intent,
              outcome,
              order_num: beatOrderNum
            });
          }
        }
      } else {
        await this.apiClient.createBeat({
          scene_id: sceneId,
          order_num: beatOrderNum,
          type: "setup",
          // Default type
          intent,
          outcome
        });
      }
      beatOrderNum++;
    }
  }
  // Push prose blocks from a story file with hierarchical structure
  // Format: # Story: title, ## Chapter: title, ### Scene: title, #### Beat: title
  async pushStoryContentBlocks(storyFilePath, storyFolderPath, storyId) {
    const file = this.fileManager.getVault().getAbstractFileByPath(storyFilePath);
    if (!(file instanceof import_obsidian9.TFile)) {
      throw new Error(`Story file not found: ${storyFilePath}`);
    }
    const storyContent = await this.fileManager.getVault().read(file);
    const contentsFolderPath = `${storyFolderPath}/03-contents`;
    const storyProse = parseStoryProse(storyContent);
    if (storyProse.sections.length === 0) {
      return;
    }
    const existingChapters = await this.apiClient.getChapters(storyId);
    const chapterByTitle = /* @__PURE__ */ new Map();
    for (const ch of existingChapters) {
      chapterByTitle.set(ch.title.toLowerCase(), ch);
    }
    let currentChapter = null;
    let currentScene = null;
    let currentBeat = null;
    let proseOrderNum = 1;
    const sceneMap = /* @__PURE__ */ new Map();
    const beatMap = /* @__PURE__ */ new Map();
    const remoteContentBlocksCache = /* @__PURE__ */ new Map();
    const getRemoteContentBlocksMap = async (chapterId) => {
      if (!remoteContentBlocksCache.has(chapterId)) {
        const blocks = await this.apiClient.getContentBlocks(chapterId);
        const map2 = /* @__PURE__ */ new Map();
        for (const pb of blocks) {
          map2.set(pb.id, pb);
        }
        remoteContentBlocksCache.set(chapterId, map2);
      }
      return remoteContentBlocksCache.get(chapterId);
    };
    for (const section of storyProse.sections) {
      if (section.type === "scene" && section.scene) {
        const { scene: parsedScene } = section;
        if (!currentChapter) {
          currentChapter = chapterByTitle.get("story prose") || null;
          if (!currentChapter) {
            currentChapter = await this.apiClient.createChapter(storyId, {
              number: 9999,
              title: "Story Prose",
              status: "draft"
            });
            chapterByTitle.set("story prose", currentChapter);
          }
        }
        if (parsedScene.linkName) {
          currentScene = sceneMap.get(parsedScene.linkName) || null;
        }
        if (!currentScene && parsedScene.goal) {
          const allScenes = await this.apiClient.getScenes(currentChapter.id);
          currentScene = allScenes.find((s) => s.goal === parsedScene.goal) || null;
        }
        if (!currentScene) {
          const existingScenes = await this.apiClient.getScenes(currentChapter.id);
          const sceneOrderNum = existingScenes.length > 0 ? Math.max(...existingScenes.map((s) => s.order_num)) + 1 : 1;
          currentScene = await this.apiClient.createScene({
            story_id: storyId,
            chapter_id: currentChapter.id,
            order_num: sceneOrderNum,
            goal: parsedScene.goal,
            time_ref: parsedScene.timeRef
          });
        }
        if (currentScene) {
          const sceneFileName = this.fileManager.generateSceneFileName(currentScene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          sceneMap.set(sceneLinkName, currentScene);
        }
        currentBeat = null;
        proseOrderNum = 1;
      } else if (section.type === "beat" && section.beat) {
        const { beat: parsedBeat } = section;
        if (!currentScene) {
          continue;
        }
        if (parsedBeat.linkName) {
          currentBeat = beatMap.get(parsedBeat.linkName) || null;
        }
        if (!currentBeat && parsedBeat.intent) {
          const allBeats = await this.apiClient.getBeats(currentScene.id);
          currentBeat = allBeats.find((b) => b.intent === parsedBeat.intent) || null;
        }
        if (!currentBeat) {
          const existingBeats = await this.apiClient.getBeats(currentScene.id);
          const beatOrderNum = existingBeats.length > 0 ? Math.max(...existingBeats.map((b) => b.order_num)) + 1 : 1;
          currentBeat = await this.apiClient.createBeat({
            scene_id: currentScene.id,
            order_num: beatOrderNum,
            type: "setup",
            intent: parsedBeat.intent,
            outcome: parsedBeat.outcome
          });
        }
        if (currentBeat) {
          const beatFileName = this.fileManager.generateBeatFileName(currentBeat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          beatMap.set(beatLinkName, currentBeat);
        }
      } else if (section.type === "prose" && section.prose) {
        const { prose: paragraph } = section;
        if (!currentChapter) {
          currentChapter = chapterByTitle.get("story prose") || null;
          if (!currentChapter) {
            currentChapter = await this.apiClient.createChapter(storyId, {
              number: 9999,
              title: "Story Prose",
              status: "draft"
            });
            chapterByTitle.set("story prose", currentChapter);
          }
        }
        const remoteContentBlocksMap = await getRemoteContentBlocksMap(currentChapter.id);
        let localContentBlock = null;
        let remoteContentBlock = null;
        if (paragraph.linkName) {
          const contentBlockFilePath = await this.findContentBlockFileByLinkName(contentsFolderPath, paragraph.linkName);
          if (contentBlockFilePath) {
            localContentBlock = await this.fileManager.readContentBlockFromFile(contentBlockFilePath);
          }
          if (!localContentBlock) {
            localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          }
          if (localContentBlock) {
            remoteContentBlock = remoteContentBlocksMap.get(localContentBlock.id) || null;
          } else {
            const normalizedContent = paragraph.content.trim();
            for (const [, remotePB] of remoteContentBlocksMap.entries()) {
              if (remotePB.content.trim() === normalizedContent) {
                remoteContentBlock = remotePB;
                break;
              }
            }
          }
        } else {
          localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          const normalizedContent = paragraph.content.trim();
          for (const [, remotePB] of remoteContentBlocksMap.entries()) {
            if (remotePB.content.trim() === normalizedContent) {
              remoteContentBlock = remotePB;
              if (!localContentBlock) {
                localContentBlock = await this.findContentBlockById(contentsFolderPath, remotePB.id);
              }
              break;
            }
          }
        }
        const status = compareContentBlocks(paragraph, localContentBlock, remoteContentBlock);
        let finalContentBlock;
        switch (status) {
          case "new": {
            finalContentBlock = await this.apiClient.createContentBlock(currentChapter.id, {
              order_num: proseOrderNum++,
              kind: "final",
              content: paragraph.content
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            if (currentScene) {
              await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", currentScene.id);
            }
            if (currentBeat) {
              await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
            }
            break;
          }
          case "unchanged": {
            if (!localContentBlock && remoteContentBlock) {
              finalContentBlock = remoteContentBlock;
              const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
              await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            } else if (localContentBlock) {
              finalContentBlock = localContentBlock;
              proseOrderNum++;
            } else {
              finalContentBlock = remoteContentBlock;
              proseOrderNum++;
            }
            break;
          }
          case "local_modified": {
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: paragraph.content,
              order_num: proseOrderNum++
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            break;
          }
          case "remote_modified": {
            finalContentBlock = remoteContentBlock;
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            proseOrderNum++;
            break;
          }
          case "conflict": {
            const resolution = await this.resolveConflict(localContentBlock, remoteContentBlock);
            let resolvedContent = resolution.resolution === "local" ? paragraph.content : resolution.resolution === "remote" ? remoteContentBlock.content : resolution.mergedContent || paragraph.content;
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: resolvedContent,
              order_num: proseOrderNum++
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            break;
          }
        }
      }
    }
  }
  // Push prose blocks from a scene file (scene-level prose, not inside chapters)
  async pushSceneContentBlocks(sceneFilePath, storyFolderPath) {
    const file = this.fileManager.getVault().getAbstractFileByPath(sceneFilePath);
    if (!(file instanceof import_obsidian9.TFile)) {
      return;
    }
    const sceneContent = await this.fileManager.getVault().read(file);
    const frontmatter = this.fileManager.parseFrontmatter(sceneContent);
    if (!frontmatter.id || !frontmatter.story_id) {
      return;
    }
    const sceneId = frontmatter.id;
    const storyId = frontmatter.story_id;
    const contentsFolderPath = `${storyFolderPath}/03-contents`;
    const sceneProse = parseSceneProse(sceneContent);
    if (sceneProse.sections.length === 0) {
      return;
    }
    const chapters = await this.apiClient.getChapters(storyId);
    let tempChapter = chapters.find((c) => c.title === "Scene-Level Prose");
    if (!tempChapter) {
      tempChapter = await this.apiClient.createChapter(storyId, {
        number: 9998,
        // High number to keep it at the end
        title: "Scene-Level Prose",
        status: "draft"
      });
    }
    const remoteContentBlocks = await this.apiClient.getContentBlocks(tempChapter.id);
    const remoteContentBlocksMap = /* @__PURE__ */ new Map();
    for (const pb of remoteContentBlocks) {
      remoteContentBlocksMap.set(pb.id, pb);
    }
    const existingBeats = await this.apiClient.getBeats(sceneId);
    const beatMap = /* @__PURE__ */ new Map();
    const beatIdMap = /* @__PURE__ */ new Map();
    for (const beat of existingBeats) {
      const fileName = this.fileManager.generateBeatFileName(beat);
      const linkName = fileName.replace(/\.md$/, "");
      beatMap.set(linkName, beat);
      beatIdMap.set(beat.id, beat);
    }
    let proseOrderNum = 1;
    let currentBeat = null;
    const updatedSections = [];
    for (const section of sceneProse.sections) {
      if (section.type === "beat" && section.beat) {
        const { beat: parsedBeat } = section;
        if (parsedBeat.linkName) {
          currentBeat = beatMap.get(parsedBeat.linkName) || null;
          if (!currentBeat) {
            currentBeat = beatIdMap.get(parsedBeat.linkName) || null;
          }
        }
        if (currentBeat) {
          const beatFileName = this.fileManager.generateBeatFileName(currentBeat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          const beatDisplayText = currentBeat.outcome ? `${currentBeat.intent} -> ${currentBeat.outcome}` : currentBeat.intent;
          updatedSections.push(`### Beat: [[${beatLinkName}|${beatDisplayText}]]`);
        }
      } else if (section.type === "prose" && section.prose) {
        const { prose: paragraph } = section;
        let localContentBlock = null;
        let remoteContentBlock = null;
        if (paragraph.linkName) {
          const contentBlockFilePath = await this.findContentBlockFileByLinkName(contentsFolderPath, paragraph.linkName);
          if (contentBlockFilePath) {
            localContentBlock = await this.fileManager.readContentBlockFromFile(contentBlockFilePath);
          }
          if (!localContentBlock) {
            localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          }
          if (localContentBlock) {
            remoteContentBlock = remoteContentBlocksMap.get(localContentBlock.id) || null;
          } else {
            const normalizedContent = paragraph.content.trim();
            for (const [id2, remotePB] of remoteContentBlocksMap.entries()) {
              if (remotePB.content.trim() === normalizedContent) {
                remoteContentBlock = remotePB;
                break;
              }
            }
          }
        } else {
          localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          const normalizedContent = paragraph.content.trim();
          for (const [id2, remotePB] of remoteContentBlocksMap.entries()) {
            if (remotePB.content.trim() === normalizedContent) {
              remoteContentBlock = remotePB;
              if (!localContentBlock) {
                localContentBlock = await this.findContentBlockById(contentsFolderPath, remotePB.id);
              }
              break;
            }
          }
        }
        const status = compareContentBlocks(paragraph, localContentBlock, remoteContentBlock);
        let finalContentBlock;
        switch (status) {
          case "new": {
            finalContentBlock = await this.apiClient.createContentBlock(tempChapter.id, {
              order_num: proseOrderNum++,
              kind: "final",
              content: paragraph.content
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", sceneId);
            if (currentBeat) {
              await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
            }
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            break;
          }
          case "unchanged": {
            if (!localContentBlock && remoteContentBlock) {
              finalContentBlock = remoteContentBlock;
              const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
              await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            } else if (localContentBlock) {
              if (localContentBlock.order_num !== proseOrderNum) {
                finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
                  order_num: proseOrderNum++
                });
                const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
                await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
              } else {
                finalContentBlock = localContentBlock;
                proseOrderNum++;
              }
            } else {
              finalContentBlock = remoteContentBlock;
              proseOrderNum++;
            }
            if (paragraph.linkName) {
              updatedSections.push(`[[${paragraph.linkName}|${paragraph.content}]]`);
            } else {
              const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
              updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            }
            break;
          }
          case "local_modified": {
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: paragraph.content,
              order_num: proseOrderNum++
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            break;
          }
          case "remote_modified": {
            finalContentBlock = remoteContentBlock;
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${finalContentBlock.content}]]`);
            new import_obsidian9.Notice(`Scene prose block updated from remote: ${linkName}`, 3e3);
            proseOrderNum++;
            break;
          }
          case "conflict": {
            const resolution = await this.resolveConflict(localContentBlock, remoteContentBlock);
            let resolvedContent;
            if (resolution.resolution === "local") {
              resolvedContent = paragraph.content;
            } else if (resolution.resolution === "remote") {
              resolvedContent = remoteContentBlock.content;
            } else {
              resolvedContent = resolution.mergedContent || paragraph.content;
            }
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: resolvedContent,
              order_num: proseOrderNum++
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${resolvedContent}]]`);
            break;
          }
        }
      }
    }
    if (updatedSections.length > 0) {
      const frontmatterMatch = sceneContent.match(/^---\n([\s\S]*?)\n---/);
      const frontmatterEnd = frontmatterMatch ? frontmatterMatch[0].length : 0;
      const afterFrontmatter = sceneContent.substring(frontmatterEnd).trim();
      const beatsSectionMatch = afterFrontmatter.match(/\n##\s+Beats\s*\n/);
      const insertionPoint = beatsSectionMatch ? frontmatterEnd + afterFrontmatter.indexOf(beatsSectionMatch[0]) : sceneContent.length;
      const beforeProse = sceneContent.substring(0, insertionPoint).trimEnd();
      const afterProse = sceneContent.substring(insertionPoint);
      const updatedContent = `${beforeProse}

${updatedSections.join("\n\n")}
${afterProse}`;
      await this.fileManager.getVault().modify(file, updatedContent);
    }
  }
  // Push prose blocks from a beat file
  async pushBeatContentBlocks(beatFilePath, storyFolderPath) {
    const file = this.fileManager.getVault().getAbstractFileByPath(beatFilePath);
    if (!(file instanceof import_obsidian9.TFile)) {
      return;
    }
    const beatContent = await this.fileManager.getVault().read(file);
    const frontmatter = this.fileManager.parseFrontmatter(beatContent);
    if (!frontmatter.id || !frontmatter.scene_id) {
      return;
    }
    const beatId = frontmatter.id;
    const sceneId = frontmatter.scene_id;
    const contentsFolderPath = `${storyFolderPath}/03-contents`;
    const beatProse = parseBeatProse(beatContent);
    if (beatProse.sections.length === 0) {
      return;
    }
    const scene = await this.apiClient.getScene(sceneId);
    if (!scene) {
      return;
    }
    const storyId = scene.story_id;
    const chapters = await this.apiClient.getChapters(storyId);
    let tempChapter = chapters.find((c) => c.title === "Beat-Level Prose");
    if (!tempChapter) {
      tempChapter = await this.apiClient.createChapter(storyId, {
        number: 9997,
        // High number to keep it at the end
        title: "Beat-Level Prose",
        status: "draft"
      });
    }
    const remoteContentBlocks = await this.apiClient.getContentBlocks(tempChapter.id);
    const remoteContentBlocksMap = /* @__PURE__ */ new Map();
    for (const pb of remoteContentBlocks) {
      remoteContentBlocksMap.set(pb.id, pb);
    }
    let proseOrderNum = 1;
    const updatedSections = [];
    const beat = await this.apiClient.getBeat(beatId);
    if (beat) {
      const beatFileName = this.fileManager.generateBeatFileName(beat);
      const beatLinkName = beatFileName.replace(/\.md$/, "");
      const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
      updatedSections.push(`## Beat: [[${beatLinkName}|${beatDisplayText}]]`);
    }
    for (const section of beatProse.sections) {
      if (section.type === "prose" && section.prose) {
        const { prose: paragraph } = section;
        let localContentBlock = null;
        let remoteContentBlock = null;
        if (paragraph.linkName) {
          const contentBlockFilePath = await this.findContentBlockFileByLinkName(contentsFolderPath, paragraph.linkName);
          if (contentBlockFilePath) {
            localContentBlock = await this.fileManager.readContentBlockFromFile(contentBlockFilePath);
          }
          if (!localContentBlock) {
            localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          }
          if (localContentBlock) {
            remoteContentBlock = remoteContentBlocksMap.get(localContentBlock.id) || null;
          } else {
            const normalizedContent = paragraph.content.trim();
            for (const [, remotePB] of remoteContentBlocksMap.entries()) {
              if (remotePB.content.trim() === normalizedContent) {
                remoteContentBlock = remotePB;
                break;
              }
            }
          }
        } else {
          localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          const normalizedContent = paragraph.content.trim();
          for (const [, remotePB] of remoteContentBlocksMap.entries()) {
            if (remotePB.content.trim() === normalizedContent) {
              remoteContentBlock = remotePB;
              if (!localContentBlock) {
                localContentBlock = await this.findContentBlockById(contentsFolderPath, remotePB.id);
              }
              break;
            }
          }
        }
        const status = compareContentBlocks(paragraph, localContentBlock, remoteContentBlock);
        let finalContentBlock;
        switch (status) {
          case "new": {
            finalContentBlock = await this.apiClient.createContentBlock(tempChapter.id, {
              order_num: proseOrderNum++,
              kind: "final",
              content: paragraph.content
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", sceneId);
            await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", beatId);
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            break;
          }
          case "unchanged": {
            if (!localContentBlock && remoteContentBlock) {
              finalContentBlock = remoteContentBlock;
              const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
              await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
              const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
              updatedSections.push(`[[${linkName}|${remoteContentBlock.content}]]`);
            } else if (localContentBlock) {
              finalContentBlock = localContentBlock;
              const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
              updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
              proseOrderNum++;
            } else {
              proseOrderNum++;
              continue;
            }
            break;
          }
          case "local_modified": {
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: paragraph.content,
              order_num: proseOrderNum++
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            break;
          }
          case "remote_modified": {
            finalContentBlock = remoteContentBlock;
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            proseOrderNum++;
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${remoteContentBlock.content}]]`);
            break;
          }
          case "conflict": {
            const resolution = await this.resolveConflict(localContentBlock, remoteContentBlock);
            let resolvedContent;
            if (resolution.resolution === "local") {
              resolvedContent = paragraph.content;
            } else if (resolution.resolution === "remote") {
              resolvedContent = remoteContentBlock.content;
            } else {
              resolvedContent = resolution.mergedContent || paragraph.content;
            }
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: resolvedContent,
              order_num: proseOrderNum++
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${resolvedContent}]]`);
            break;
          }
        }
      }
    }
    if (updatedSections.length > 1) {
      const frontmatterMatch = beatContent.match(/^---\n([\s\S]*?)\n---/);
      const frontmatterEnd = frontmatterMatch ? frontmatterMatch[0].length : 0;
      const afterFrontmatter = beatContent.substring(frontmatterEnd).trim();
      const beatSectionMatch = afterFrontmatter.match(/##\s+Beat:\s*.+[\s\S]*/);
      if (beatSectionMatch) {
        const beforeBeatSection = beatContent.substring(0, frontmatterEnd + afterFrontmatter.indexOf(beatSectionMatch[0]));
        const updatedContent = `${beforeBeatSection.trimEnd()}

${updatedSections.join("\n\n")}
`;
        await this.fileManager.getVault().modify(file, updatedContent);
      } else {
        const updatedContent = `${beatContent.trimEnd()}

${updatedSections.join("\n\n")}
`;
        await this.fileManager.getVault().modify(file, updatedContent);
      }
    }
  }
  // Process the "## Orphan Scenes" list and update orphan scenes order
  async processOrphanScenesList(list, storyId) {
    const allScenes = await this.apiClient.getScenesByStory(storyId);
    const sceneMap = /* @__PURE__ */ new Map();
    const sceneIdMap = /* @__PURE__ */ new Map();
    const orphanScenes = allScenes.filter((s) => !s.chapter_id);
    for (const scene of orphanScenes) {
      const fileName = this.fileManager.generateSceneFileName(scene);
      const linkName = fileName.replace(/\.md$/, "");
      sceneMap.set(linkName, scene);
      sceneIdMap.set(scene.id, scene);
    }
    const beatMap = /* @__PURE__ */ new Map();
    const beatIdMap = /* @__PURE__ */ new Map();
    for (const scene of orphanScenes) {
      const beats = await this.apiClient.getBeats(scene.id);
      for (const beat of beats) {
        const fileName = this.fileManager.generateBeatFileName(beat);
        const linkName = fileName.replace(/\.md$/, "");
        beatMap.set(linkName, beat);
        beatIdMap.set(beat.id, beat);
      }
    }
    let currentScene = null;
    let sceneOrderNum = 1;
    const beatOrderNums = /* @__PURE__ */ new Map();
    for (const item of list.items) {
      if (item.type === "scene") {
        let goal;
        let timeRef = "";
        const sceneMatch = item.displayText.match(/Scene\s+\d+:\s*(.+)/);
        if (sceneMatch) {
          const sceneText = sceneMatch[1].trim();
          const parts = sceneText.split(/\s*-\s*/);
          goal = parts[0].trim();
          timeRef = parts.length > 1 ? parts.slice(1).join(" - ").trim() : "";
        } else {
          const parts = item.displayText.split(/\s*-\s*/);
          goal = parts[0].trim();
          timeRef = parts.length > 1 ? parts.slice(1).join(" - ").trim() : "";
        }
        if (item.linkName) {
          currentScene = sceneMap.get(item.linkName) || null;
          if (!currentScene) {
            currentScene = sceneIdMap.get(item.linkName) || null;
          }
          if (currentScene) {
            const needsOrderUpdate = currentScene.order_num !== sceneOrderNum;
            const needsContentUpdate = goal !== currentScene.goal || timeRef !== currentScene.time_ref;
            if (needsOrderUpdate || needsContentUpdate) {
              currentScene = await this.apiClient.updateScene(currentScene.id, {
                goal,
                time_ref: timeRef,
                order_num: sceneOrderNum
              });
            }
            const existingBeats = await this.apiClient.getBeats(currentScene.id);
            if (existingBeats.length === 0) {
              beatOrderNums.set(currentScene.id, 1);
            } else {
              const maxOrderNum = Math.max(...existingBeats.map((b) => b.order_num));
              beatOrderNums.set(currentScene.id, maxOrderNum + 1);
            }
          }
        } else {
          currentScene = await this.apiClient.createScene({
            story_id: storyId,
            chapter_id: null,
            // Orphan scene
            order_num: sceneOrderNum,
            goal,
            time_ref: timeRef
          });
          const sceneFileName = this.fileManager.generateSceneFileName(currentScene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          sceneMap.set(sceneLinkName, currentScene);
          sceneIdMap.set(currentScene.id, currentScene);
          beatOrderNums.set(currentScene.id, 1);
        }
        sceneOrderNum++;
      } else if (item.type === "beat" && currentScene) {
        let intent;
        let outcome = "";
        const beatMatch = item.displayText.match(/Beat\s+\d+:\s*(.+)/);
        if (beatMatch) {
          const beatText = beatMatch[1].trim();
          const parts = beatText.split(/\s*->\s*/);
          intent = parts[0].trim();
          outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
        } else {
          const parts = item.displayText.split(/\s*->\s*/);
          intent = parts[0].trim();
          outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
        }
        const currentBeatOrderNum = beatOrderNums.get(currentScene.id) || 1;
        if (item.linkName) {
          let currentBeat = beatMap.get(item.linkName) || null;
          if (!currentBeat) {
            currentBeat = beatIdMap.get(item.linkName) || null;
          }
          if (currentBeat) {
            const needsOrderUpdate = currentBeat.order_num !== currentBeatOrderNum;
            const needsContentUpdate = intent !== currentBeat.intent || outcome !== currentBeat.outcome;
            const needsSceneUpdate = currentBeat.scene_id !== currentScene.id;
            if (needsOrderUpdate || needsContentUpdate || needsSceneUpdate) {
              currentBeat = await this.apiClient.updateBeat(currentBeat.id, {
                intent,
                outcome,
                order_num: currentBeatOrderNum,
                scene_id: currentScene.id
              });
            }
          }
        } else {
          await this.apiClient.createBeat({
            scene_id: currentScene.id,
            order_num: currentBeatOrderNum,
            type: "setup",
            // Default type
            intent,
            outcome
          });
        }
        beatOrderNums.set(currentScene.id, currentBeatOrderNum + 1);
      }
    }
  }
  // Process the "## Orphan Beats" list and update orphan beats order
  async processOrphanBeatsList(list, storyId) {
    const allBeats = await this.apiClient.getBeatsByStory(storyId);
    const allScenes = await this.apiClient.getScenesByStory(storyId);
    const sceneIdSet = new Set(allScenes.map((s) => s.id));
    const orphanBeats = allBeats.filter((b) => !b.scene_id || !sceneIdSet.has(b.scene_id));
    const beatMap = /* @__PURE__ */ new Map();
    const beatIdMap = /* @__PURE__ */ new Map();
    for (const beat of orphanBeats) {
      const fileName = this.fileManager.generateBeatFileName(beat);
      const linkName = fileName.replace(/\.md$/, "");
      beatMap.set(linkName, beat);
      beatIdMap.set(beat.id, beat);
    }
    let beatOrderNum = 1;
    for (const item of list.items) {
      let intent;
      let outcome = "";
      const beatMatch = item.displayText.match(/Beat\s+\d+:\s*(.+)/);
      if (beatMatch) {
        const beatText = beatMatch[1].trim();
        const parts = beatText.split(/\s*->\s*/);
        intent = parts[0].trim();
        outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
      } else {
        const parts = item.displayText.split(/\s*->\s*/);
        intent = parts[0].trim();
        outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
      }
      if (item.linkName) {
        let currentBeat = beatMap.get(item.linkName) || null;
        if (!currentBeat) {
          currentBeat = beatIdMap.get(item.linkName) || null;
        }
        if (currentBeat) {
          const needsOrderUpdate = currentBeat.order_num !== beatOrderNum;
          const needsContentUpdate = intent !== currentBeat.intent || outcome !== currentBeat.outcome;
          if (needsOrderUpdate || needsContentUpdate) {
            currentBeat = await this.apiClient.updateBeat(currentBeat.id, {
              intent,
              outcome,
              order_num: beatOrderNum
              // Keep scene_id as null or invalid (orphan) - don't update it
            });
          }
        }
      } else {
        const allScenes2 = await this.apiClient.getScenesByStory(storyId);
        let orphanBeatScene = allScenes2.find((s) => !s.chapter_id && s.goal.startsWith("Orphan Beats Container"));
        if (!orphanBeatScene) {
          orphanBeatScene = await this.apiClient.createScene({
            story_id: storyId,
            chapter_id: null,
            order_num: 9999,
            // High number to keep it at the end
            goal: "Orphan Beats Container",
            time_ref: ""
          });
        }
        await this.apiClient.createBeat({
          scene_id: orphanBeatScene.id,
          order_num: beatOrderNum,
          type: "setup",
          // Default type
          intent,
          outcome
        });
      }
      beatOrderNum++;
    }
  }
  // Process the "## Scenes & Beats" list and create/update/delete scenes and beats
  async processSceneBeatList(list, chapterId, storyId) {
    const existingScenes = await this.apiClient.getScenes(chapterId);
    const sceneMap = /* @__PURE__ */ new Map();
    const sceneIdMap = /* @__PURE__ */ new Map();
    for (const scene of existingScenes) {
      const fileName = this.fileManager.generateSceneFileName(scene);
      const linkName = fileName.replace(/\.md$/, "");
      sceneMap.set(linkName, scene);
      sceneIdMap.set(scene.id, scene);
    }
    const beatMap = /* @__PURE__ */ new Map();
    const beatIdMap = /* @__PURE__ */ new Map();
    for (const scene of existingScenes) {
      const beats = await this.apiClient.getBeats(scene.id);
      for (const beat of beats) {
        const fileName = this.fileManager.generateBeatFileName(beat);
        const linkName = fileName.replace(/\.md$/, "");
        beatMap.set(linkName, beat);
        beatIdMap.set(beat.id, beat);
      }
    }
    let currentScene = null;
    let sceneOrderNum = 1;
    const beatOrderNums = /* @__PURE__ */ new Map();
    for (const item of list.items) {
      if (item.type === "scene") {
        currentScene = null;
        let goal;
        let timeRef = "";
        const sceneMatch = item.displayText.match(/Scene\s+\d+:\s*(.+)/);
        if (sceneMatch) {
          const sceneText = sceneMatch[1].trim();
          const parts = sceneText.split(/\s*-\s*/);
          goal = parts[0].trim();
          timeRef = parts.length > 1 ? parts.slice(1).join(" - ").trim() : "";
        } else {
          const parts = item.displayText.split(/\s*-\s*/);
          goal = parts[0].trim();
          timeRef = parts.length > 1 ? parts.slice(1).join(" - ").trim() : "";
        }
        currentScene = null;
        if (item.linkName) {
          currentScene = sceneMap.get(item.linkName) || null;
          if (!currentScene) {
            currentScene = sceneIdMap.get(item.linkName) || null;
          }
          if (currentScene) {
            const needsOrderUpdate = currentScene.order_num !== sceneOrderNum;
            const needsContentUpdate = goal !== currentScene.goal || timeRef !== currentScene.time_ref;
            if (needsOrderUpdate || needsContentUpdate) {
              currentScene = await this.apiClient.updateScene(currentScene.id, {
                goal,
                time_ref: timeRef,
                order_num: sceneOrderNum
              });
            }
            const existingBeats = await this.apiClient.getBeats(currentScene.id);
            if (existingBeats.length === 0) {
              beatOrderNums.set(currentScene.id, 1);
            } else {
              const maxOrderNum = Math.max(...existingBeats.map((b) => b.order_num));
              beatOrderNums.set(currentScene.id, maxOrderNum + 1);
            }
          }
        } else {
          currentScene = await this.apiClient.createScene({
            story_id: storyId,
            chapter_id: chapterId,
            order_num: sceneOrderNum,
            goal,
            time_ref: timeRef
          });
          const sceneFileName = this.fileManager.generateSceneFileName(currentScene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          sceneMap.set(sceneLinkName, currentScene);
          sceneIdMap.set(currentScene.id, currentScene);
          beatOrderNums.set(currentScene.id, 1);
        }
        sceneOrderNum++;
      } else if (item.type === "beat" && currentScene) {
        let intent;
        let outcome = "";
        const beatMatch = item.displayText.match(/Beat\s+\d+:\s*(.+)/);
        if (beatMatch) {
          const beatText = beatMatch[1].trim();
          const parts = beatText.split(/\s*->\s*/);
          intent = parts[0].trim();
          outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
        } else {
          const parts = item.displayText.split(/\s*->\s*/);
          intent = parts[0].trim();
          outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
        }
        const currentBeatOrderNum = beatOrderNums.get(currentScene.id) || 1;
        if (item.linkName) {
          let currentBeat = beatMap.get(item.linkName) || null;
          if (!currentBeat) {
            currentBeat = beatIdMap.get(item.linkName) || null;
          }
          if (currentBeat) {
            const needsOrderUpdate = currentBeat.order_num !== currentBeatOrderNum;
            const needsContentUpdate = intent !== currentBeat.intent || outcome !== currentBeat.outcome;
            const needsSceneUpdate = currentBeat.scene_id !== currentScene.id;
            if (needsOrderUpdate || needsContentUpdate || needsSceneUpdate) {
              currentBeat = await this.apiClient.updateBeat(currentBeat.id, {
                intent,
                outcome,
                order_num: currentBeatOrderNum,
                scene_id: currentScene.id
              });
              if (needsSceneUpdate) {
                const beatFileName = this.fileManager.generateBeatFileName(currentBeat);
                const beatLinkName = beatFileName.replace(/\.md$/, "");
                beatMap.set(beatLinkName, currentBeat);
                beatIdMap.set(currentBeat.id, currentBeat);
              }
            }
          }
        } else {
          const newBeat = await this.apiClient.createBeat({
            scene_id: currentScene.id,
            order_num: currentBeatOrderNum,
            type: "setup",
            // Default type
            intent,
            outcome
          });
          const beatFileName = this.fileManager.generateBeatFileName(newBeat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          beatMap.set(beatLinkName, newBeat);
          beatIdMap.set(newBeat.id, newBeat);
        }
        beatOrderNums.set(currentScene.id, currentBeatOrderNum + 1);
      }
    }
  }
  // Find content block file by link name (searches recursively in all type subfolders)
  async findContentBlockFileByLinkName(contentsRoot, linkName) {
    const root2 = this.fileManager.getVault().getAbstractFileByPath(contentsRoot);
    if (!(root2 instanceof import_obsidian9.TFolder))
      return null;
    const target = `${linkName}.md`;
    const stack = [root2];
    while (stack.length) {
      const folder = stack.pop();
      for (const child of folder.children) {
        if (child instanceof import_obsidian9.TFolder) {
          stack.push(child);
        } else if (child instanceof import_obsidian9.TFile && child.name === target) {
          return child.path;
        }
      }
    }
    return null;
  }
  // Find prose block by content when file name doesn't match (searches recursively in all type subfolders)
  async findContentBlockByContent(contentsFolderPath, content) {
    try {
      const folder = this.fileManager.getVault().getAbstractFileByPath(contentsFolderPath);
      if (!(folder instanceof import_obsidian9.TFolder)) {
        return null;
      }
      const normalizedContent = content.trim();
      const stack = [folder];
      while (stack.length) {
        const currentFolder = stack.pop();
        for (const child of currentFolder.children) {
          if (child instanceof import_obsidian9.TFolder) {
            stack.push(child);
          } else if (child instanceof import_obsidian9.TFile && child.extension === "md") {
            const contentBlock = await this.fileManager.readContentBlockFromFile(child.path);
            if (contentBlock && contentBlock.content.trim() === normalizedContent) {
              return contentBlock;
            }
          }
        }
      }
    } catch (err) {
      console.error("Error searching for prose block by content:", err);
    }
    return null;
  }
  // Find prose block by ID when we have remote ID but need local file (searches recursively in all type subfolders)
  async findContentBlockById(contentsFolderPath, id2) {
    try {
      const folder = this.fileManager.getVault().getAbstractFileByPath(contentsFolderPath);
      if (!(folder instanceof import_obsidian9.TFolder)) {
        return null;
      }
      const stack = [folder];
      while (stack.length) {
        const currentFolder = stack.pop();
        for (const child of currentFolder.children) {
          if (child instanceof import_obsidian9.TFolder) {
            stack.push(child);
          } else if (child instanceof import_obsidian9.TFile && child.extension === "md") {
            const contentBlock = await this.fileManager.readContentBlockFromFile(child.path);
            if (contentBlock && contentBlock.id === id2) {
              return contentBlock;
            }
          }
        }
      }
    } catch (err) {
      console.error("Error searching for prose block by ID:", err);
    }
    return null;
  }
  // Get the correct file path for a content block (always uses type subfolders)
  getContentBlockFilePath(storyFolderPath, contentBlock) {
    const fileName = this.fileManager.generateContentBlockFileName(contentBlock);
    const typeFolderPath = this.fileManager.getContentBlockFolderPath(storyFolderPath, contentBlock.type || "text");
    return `${typeFolderPath}/${fileName}`;
  }
  // Get content block file path from contents folder path (03-contents)
  async getContentBlockFilePathFromContents(contentsFolderPath, contentBlock) {
    const typeFolder = this.fileManager.getContentTypeFolder(contentBlock.type || "text");
    const typeFolderPath = `${contentsFolderPath}/${typeFolder}`;
    await this.fileManager.ensureFolderExists(typeFolderPath);
    const fileName = this.fileManager.generateContentBlockFileName(contentBlock);
    return `${typeFolderPath}/${fileName}`;
  }
  // Resolve conflict using modal or auto-resolve based on mode
  async resolveConflict(localContentBlock, remoteContentBlock) {
    if (this.settings.mode === "local") {
      return { resolution: "local" };
    }
    return new Promise((resolve) => {
      const modal = new ConflictModal(
        this.app,
        localContentBlock,
        remoteContentBlock,
        async (result) => {
          resolve(result);
        }
      );
      modal.open();
    });
  }
  // Update the Chapter section in chapter file (hierarchical structure)
  async updateChapterProseSectionHierarchical(originalContent, updatedSections, file, frontmatter) {
    const frontmatterMatch = originalContent.match(/^---\n([\s\S]*?)\n---/);
    const frontmatterText = frontmatterMatch ? frontmatterMatch[0] : "";
    const bodyStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
    const bodyContent = originalContent.substring(bodyStart).trim();
    const chapterNumber = frontmatter.number || "1";
    const chapterTitle = frontmatter.title || "Untitled";
    const chapterHeaderPattern = `##\\s+Chapter\\s+${chapterNumber}:\\s+[^\\n]+`;
    const chapterSectionMatch = bodyContent.match(new RegExp(`([\\s\\S]*?${chapterHeaderPattern}\\s*\\n+)([\\s\\S]*?)(?=\\n##\\s+Chapter\\s+\\d+:|$)`, "i"));
    if (!chapterSectionMatch) {
      const newChapterSection = `

## Chapter ${chapterNumber}: ${chapterTitle}

${updatedSections.join("\n\n")}

`;
      const updatedContent2 = `${frontmatterText}
${bodyContent}${newChapterSection}`;
      await this.fileManager.getVault().modify(file, updatedContent2);
      return;
    }
    const beforeChapter = chapterSectionMatch[1];
    const afterChapter = bodyContent.substring(chapterSectionMatch.index + chapterSectionMatch[0].length);
    const newChapterContent = updatedSections.join("\n\n");
    const updatedBody = `${beforeChapter}${newChapterContent}

${afterChapter}`;
    const updatedContent = `${frontmatterText}
${updatedBody}`;
    await this.fileManager.getVault().modify(file, updatedContent);
  }
  // Update the Prose section in chapter file
  async updateChapterProseSection(originalContent, updatedParagraphs, file) {
    const frontmatterMatch = originalContent.match(/^---\n([\s\S]*?)\n---/);
    const frontmatter = frontmatterMatch ? frontmatterMatch[0] : "";
    const bodyStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
    const bodyContent = originalContent.substring(bodyStart).trim();
    const proseSectionMatch = bodyContent.match(/([\s\S]*?##\s+Prose\s*\n\n)([\s\S]*?)(?=\n##|\n*$)/);
    if (!proseSectionMatch) {
      const newProseSection = `

## Prose

${updatedParagraphs.join("\n\n")}

`;
      const updatedContent2 = `${frontmatter}
${bodyContent}${newProseSection}`;
      await this.fileManager.getVault().modify(file, updatedContent2);
      return;
    }
    const beforeProse = proseSectionMatch[1];
    const newProseContent = updatedParagraphs.join("\n\n");
    const afterProse = bodyContent.substring(proseSectionMatch.index + proseSectionMatch[0].length);
    const updatedBody = `${beforeProse}${newProseContent}

${afterProse}`;
    const updatedContent = `${frontmatter}
${updatedBody}`;
    await this.fileManager.getVault().modify(file, updatedContent);
  }
  async writeChapterBundle(data) {
    const folderPath = this.fileManager.getStoryFolderPath(data.story.title);
    await this.ensureStoryFolders(folderPath);
    for (const contentBlock of data.contentBlocks) {
      await this.writeContentBlockToFolder(folderPath, data.story.title, contentBlock);
    }
    const chaptersFolderPath = `${folderPath}/00-chapters`;
    const chapterFileName = `Chapter-${data.chapter.number}.md`;
    const chapterFilePath = `${chaptersFolderPath}/${chapterFileName}`;
    await this.fileManager.writeChapterFile(
      { chapter: data.chapter, scenes: data.scenes },
      chapterFilePath,
      data.story.title,
      data.contentBlocks,
      data.contentBlockRefs,
      []
    );
    const { byScene, byBeat } = this.buildContentBlockAssociationMaps(
      data.contentBlocks,
      data.contentBlockRefs
    );
    await this.syncScenesToFilesystem(
      data.scenes,
      folderPath,
      data.story.title,
      byScene,
      byBeat
    );
  }
  async writeSceneBundle(data) {
    var _a, _b;
    await this.fileManager.ensureFolderExists(`${data.folderPath}/01-scenes`);
    await this.fileManager.ensureFolderExists(`${data.folderPath}/02-beats`);
    const sceneContentBlocks = (_a = data.sceneContentBlocks) != null ? _a : data.skipRemoteContentFetch ? [] : await this.apiClient.getContentBlocksByScene(data.scene.id);
    const sceneFileName = this.fileManager.generateSceneFileName(data.scene);
    const sceneFilePath = `${data.folderPath}/01-scenes/${sceneFileName}`;
    await this.fileManager.writeSceneFile(
      { scene: data.scene, beats: data.beats },
      sceneFilePath,
      data.storyTitle,
      sceneContentBlocks,
      []
    );
    for (const beat of data.beats) {
      const provided = (_b = data.beatContentBlockMap) == null ? void 0 : _b.get(beat.id);
      const beatContentBlocks = provided != null ? provided : data.skipRemoteContentFetch ? [] : await this.apiClient.getContentBlocksByBeat(beat.id);
      const beatFileName = this.fileManager.generateBeatFileName(beat);
      const beatFilePath = `${data.folderPath}/02-beats/${beatFileName}`;
      await this.fileManager.writeBeatFile(
        beat,
        beatFilePath,
        data.storyTitle,
        beatContentBlocks
      );
    }
  }
  buildContentBlockAssociationMaps(contentBlocks, contentBlockRefs) {
    const byScene = /* @__PURE__ */ new Map();
    const byBeat = /* @__PURE__ */ new Map();
    const blockById = new Map(contentBlocks.map((block) => [block.id, block]));
    for (const ref of contentBlockRefs) {
      const block = blockById.get(ref.content_block_id);
      if (!block) {
        continue;
      }
      if (ref.entity_type === "scene") {
        if (!byScene.has(ref.entity_id)) {
          byScene.set(ref.entity_id, []);
        }
        byScene.get(ref.entity_id).push(block);
      } else if (ref.entity_type === "beat") {
        if (!byBeat.has(ref.entity_id)) {
          byBeat.set(ref.entity_id, []);
        }
        byBeat.get(ref.entity_id).push(block);
      }
    }
    return { byScene, byBeat };
  }
  async pullSingleEntity(storyId, target) {
    switch (target.type) {
      case "chapter":
        await this.pullChapterEntity(storyId, target.id);
        break;
      case "scene":
        await this.pullSceneEntity(storyId, target.id);
        break;
      case "content":
        await this.pullContentBlockEntity(storyId, target.id);
        break;
      default:
        throw new Error(`Unsupported entity type: ${target.type}`);
    }
  }
  async pullChapterEntity(storyId, chapterId) {
    const story = await this.apiClient.getStory(storyId);
    const chapter = await this.apiClient.getChapter(chapterId);
    if (chapter.story_id !== storyId) {
      throw new Error("Chapter does not belong to the selected story");
    }
    const scenes = await this.apiClient.getScenes(chapterId);
    const scenesWithBeats = await Promise.all(
      scenes.map(async (scene) => {
        const beats = await this.apiClient.getBeats(scene.id);
        return { scene, beats };
      })
    );
    const contentBlocks = await this.apiClient.getContentBlocks(chapterId);
    const contentBlockRefs = [];
    for (const contentBlock of contentBlocks) {
      const refs = await this.apiClient.getContentAnchors(contentBlock.id);
      contentBlockRefs.push(...refs);
    }
    await this.writeChapterBundle({
      story,
      chapter,
      scenes: scenesWithBeats,
      contentBlocks,
      contentBlockRefs
    });
    new import_obsidian9.Notice(`Chapter "${chapter.title}" synced successfully`);
  }
  async pullSceneEntity(storyId, sceneId) {
    const scene = await this.apiClient.getScene(sceneId);
    if (scene.story_id !== storyId) {
      throw new Error("Scene does not belong to the selected story");
    }
    const story = await this.apiClient.getStory(storyId);
    const folderPath = this.fileManager.getStoryFolderPath(story.title);
    await this.ensureStoryFolders(folderPath);
    const beats = await this.apiClient.getBeats(scene.id);
    const sceneContentBlocks = await this.apiClient.getContentBlocksByScene(scene.id);
    const beatContentBlockMap = /* @__PURE__ */ new Map();
    for (const beat of beats) {
      const beatContentBlocks = await this.apiClient.getContentBlocksByBeat(beat.id);
      beatContentBlockMap.set(beat.id, beatContentBlocks);
    }
    await this.writeSceneBundle({
      storyTitle: story.title,
      folderPath,
      scene,
      beats,
      sceneContentBlocks,
      beatContentBlockMap
    });
    await this.syncSceneContentBlocks(scene, beats, folderPath, story.title);
    new import_obsidian9.Notice(`Scene "${scene.goal}" synced successfully`);
  }
  async pullContentBlockEntity(storyId, contentBlockId) {
    const story = await this.apiClient.getStory(storyId);
    const contentBlock = await this.apiClient.getContentBlock(contentBlockId);
    if (contentBlock.chapter_id) {
      const chapter = await this.apiClient.getChapter(contentBlock.chapter_id);
      if (chapter.story_id !== storyId) {
        throw new Error("Content block does not belong to the selected story");
      }
    }
    const folderPath = this.fileManager.getStoryFolderPath(story.title);
    await this.ensureContentFolders(folderPath);
    await this.writeContentBlockToFolder(folderPath, story.title, contentBlock);
    new import_obsidian9.Notice("Content block synced successfully");
  }
  async pushSingleEntity(folderPath, target, storyId, storyTitle) {
    let entityLabel;
    switch (target.type) {
      case "chapter":
        entityLabel = await this.pushChapterEntity(folderPath, target.id);
        break;
      case "scene":
        entityLabel = await this.pushSceneEntity(folderPath, storyId, target.id);
        break;
      case "content":
        entityLabel = await this.pushContentBlockEntity(folderPath, target.id, storyTitle);
        break;
      default:
        throw new Error(`Unsupported entity type: ${target.type}`);
    }
    new import_obsidian9.Notice(`${entityLabel} pushed successfully`);
    try {
      await this.pullSingleEntity(storyId, target);
    } catch (pullErr) {
      const pullErrorMessage = pullErr instanceof Error ? pullErr.message : "Failed to sync entity after push";
      new import_obsidian9.Notice(`Warning: ${pullErrorMessage}`, 5e3);
    }
  }
  async pushChapterEntity(folderPath, chapterId) {
    var _a, _b;
    const chapterFile = await this.findChapterFileById(folderPath, chapterId);
    if (!chapterFile) {
      throw new Error("Chapter file not found locally");
    }
    await this.pushChapterContentBlocks(chapterFile.path, folderPath);
    const label = ((_a = chapterFile.frontmatter) == null ? void 0 : _a.title) || (((_b = chapterFile.frontmatter) == null ? void 0 : _b.number) ? `Chapter ${chapterFile.frontmatter.number}` : "Chapter");
    return label;
  }
  async pushSceneEntity(folderPath, storyId, sceneId) {
    var _a;
    const sceneFile = await this.findSceneFileById(folderPath, sceneId);
    if (!sceneFile) {
      throw new Error("Scene file not found locally");
    }
    await this.pushSceneBeats(sceneFile.path, storyId);
    await this.pushSceneContentBlocks(sceneFile.path, folderPath);
    const label = ((_a = sceneFile.frontmatter) == null ? void 0 : _a.goal) ? `Scene: ${sceneFile.frontmatter.goal}` : "Scene";
    return label;
  }
  async pushContentBlockEntity(folderPath, contentBlockId, storyTitle) {
    var _a;
    const contentsFolderPath = `${folderPath}/03-contents`;
    await this.fileManager.ensureFolderExists(contentsFolderPath);
    const localContentBlock = await this.findContentBlockById(contentsFolderPath, contentBlockId);
    if (!localContentBlock) {
      throw new Error("Content block file not found locally");
    }
    const updatedBlock = await this.apiClient.updateContentBlock(contentBlockId, {
      content: localContentBlock.content,
      metadata: localContentBlock.metadata,
      type: localContentBlock.type,
      kind: localContentBlock.kind,
      order_num: (_a = localContentBlock.order_num) != null ? _a : void 0
    });
    const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, updatedBlock);
    await this.fileManager.writeContentBlockFile(updatedBlock, filePath, storyTitle);
    return "Content block";
  }
  async ensureStoryFolders(folderPath) {
    await this.fileManager.ensureFolderExists(folderPath);
    await this.ensureContentFolders(folderPath);
    await this.fileManager.ensureFolderExists(`${folderPath}/00-chapters`);
    await this.fileManager.ensureFolderExists(`${folderPath}/01-scenes`);
    await this.fileManager.ensureFolderExists(`${folderPath}/02-beats`);
  }
  async ensureContentFolders(folderPath) {
    const contentsFolderPath = `${folderPath}/03-contents`;
    await this.fileManager.ensureFolderExists(contentsFolderPath);
    for (const typeFolder of ["00-texts", "01-images", "02-videos", "03-audios", "04-embeds", "05-links"]) {
      await this.fileManager.ensureFolderExists(`${contentsFolderPath}/${typeFolder}`);
    }
  }
  async writeContentBlockToFolder(storyFolderPath, storyTitle, contentBlock) {
    const typeFolderPath = this.fileManager.getContentBlockFolderPath(
      storyFolderPath,
      contentBlock.type || "text"
    );
    await this.fileManager.ensureFolderExists(typeFolderPath);
    const contentBlockFileName = this.fileManager.generateContentBlockFileName(contentBlock);
    const contentBlockFilePath = `${typeFolderPath}/${contentBlockFileName}`;
    await this.fileManager.writeContentBlockFile(contentBlock, contentBlockFilePath, storyTitle);
  }
  async syncScenesToFilesystem(scenesWithBeats, folderPath, storyTitle, contentBlocksByScene, contentBlocksByBeat) {
    const skipRemoteFetch = Boolean(contentBlocksByScene || contentBlocksByBeat);
    for (const { scene, beats } of scenesWithBeats) {
      await this.writeSceneBundle({
        storyTitle,
        folderPath,
        scene,
        beats,
        sceneContentBlocks: contentBlocksByScene == null ? void 0 : contentBlocksByScene.get(scene.id),
        beatContentBlockMap: contentBlocksByBeat,
        skipRemoteContentFetch: skipRemoteFetch
      });
    }
  }
  async syncSceneContentBlocks(scene, beats, folderPath, storyTitle) {
    if (!scene.chapter_id) {
      return;
    }
    const contentBlocks = await this.apiClient.getContentBlocks(scene.chapter_id);
    for (const contentBlock of contentBlocks) {
      const refs = await this.apiClient.getContentAnchors(contentBlock.id);
      const hasSceneRef = refs.some(
        (ref) => ref.entity_type === "scene" && ref.entity_id === scene.id
      );
      const beatIds = beats.map((beat) => beat.id);
      const hasBeatRef = refs.some(
        (ref) => ref.entity_type === "beat" && beatIds.includes(ref.entity_id)
      );
      if (hasSceneRef || hasBeatRef) {
        await this.writeContentBlockToFolder(folderPath, storyTitle, contentBlock);
      }
    }
  }
  async findChapterFileById(folderPath, chapterId) {
    const chapterFiles = await this.fileManager.listChapterFiles(folderPath);
    for (const chapterFilePath of chapterFiles) {
      const file = this.fileManager.getVault().getAbstractFileByPath(chapterFilePath);
      if (!(file instanceof import_obsidian9.TFile)) {
        continue;
      }
      const content = await this.fileManager.getVault().read(file);
      const frontmatter = this.fileManager.parseFrontmatter(content);
      if (frontmatter.id === chapterId) {
        return { path: chapterFilePath, frontmatter };
      }
    }
    return null;
  }
  async findSceneFileById(folderPath, sceneId) {
    const sceneFiles = await this.fileManager.listStorySceneFiles(folderPath);
    for (const sceneFilePath of sceneFiles) {
      const file = this.fileManager.getVault().getAbstractFileByPath(sceneFilePath);
      if (!(file instanceof import_obsidian9.TFile)) {
        continue;
      }
      const content = await this.fileManager.getVault().read(file);
      const frontmatter = this.fileManager.parseFrontmatter(content);
      if (frontmatter.id === sceneId) {
        return { path: sceneFilePath, frontmatter };
      }
    }
    return null;
  }
};

// src/sync/autoSyncManager.ts
<<<<<<< HEAD
var import_obsidian10 = require("obsidian");
=======
var import_obsidian9 = require("obsidian");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
var IDLE_DELAY_MS = 6e4;
var AutoSyncManager = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.idleTimeoutId = null;
    this.activeFile = null;
    this.lastEditTs = 0;
    this.dirtyFiles = /* @__PURE__ */ new Set();
    this.pendingSyncs = /* @__PURE__ */ new Set();
    this.handleActiveLeafChange = (leaf) => {
      const previousFile = this.activeFile;
      const newFile = this.plugin.app.workspace.getActiveFile();
      if (previousFile && (!newFile || previousFile.path !== newFile.path) && this.dirtyFiles.has(previousFile.path)) {
        void this.triggerSyncForFile(previousFile, "blur");
      }
      this.activeFile = newFile;
      this.lastEditTs = Date.now();
      this.resetIdleTimer();
    };
    this.activeFile = this.plugin.app.workspace.getActiveFile();
    this.lastEditTs = Date.now();
    this.registerEvents();
    this.resetIdleTimer();
  }
  dispose() {
    if (this.leafChangeRef) {
      this.plugin.app.workspace.offref(this.leafChangeRef);
      this.leafChangeRef = void 0;
    }
    if (this.editorChangeRef) {
      this.plugin.app.workspace.offref(this.editorChangeRef);
      this.editorChangeRef = void 0;
    }
    if (this.idleTimeoutId !== null) {
      window.clearTimeout(this.idleTimeoutId);
      this.idleTimeoutId = null;
    }
    this.dirtyFiles.clear();
    this.pendingSyncs.clear();
  }
  registerEvents() {
    this.leafChangeRef = this.plugin.app.workspace.on(
      "active-leaf-change",
      this.handleActiveLeafChange
    );
    this.plugin.registerEvent(this.leafChangeRef);
    this.editorChangeRef = this.plugin.app.workspace.on("editor-change", () => {
      const file = this.plugin.app.workspace.getActiveFile();
      if (!file) {
        return;
      }
      this.activeFile = file;
      this.lastEditTs = Date.now();
      this.dirtyFiles.add(file.path);
      this.resetIdleTimer();
    });
    this.plugin.registerEvent(this.editorChangeRef);
  }
  resetIdleTimer() {
    if (this.idleTimeoutId !== null) {
      window.clearTimeout(this.idleTimeoutId);
    }
    if (!this.activeFile) {
      this.idleTimeoutId = null;
      return;
    }
    this.idleTimeoutId = window.setTimeout(() => {
      const file = this.activeFile;
      if (!file) {
        return;
      }
      const idleDuration = Date.now() - this.lastEditTs;
      if (idleDuration >= IDLE_DELAY_MS && this.dirtyFiles.has(file.path)) {
        void this.triggerSyncForFile(file, "idle");
      } else {
        this.resetIdleTimer();
      }
    }, IDLE_DELAY_MS);
  }
  async triggerSyncForFile(file, reason) {
    const path = file.path;
    if (this.pendingSyncs.has(path)) {
      return;
    }
    this.pendingSyncs.add(path);
    try {
      const target = await this.resolveTarget(file);
      if (!target) {
        return;
      }
      if (target.pushWholeStory) {
        await this.plugin.syncService.pushStory(target.folderPath);
      } else if (target.syncTarget) {
        await this.plugin.syncService.pushStory(target.folderPath, target.syncTarget);
      }
      this.dirtyFiles.delete(path);
      if (reason === "idle") {
        this.lastEditTs = Date.now();
        this.resetIdleTimer();
      }
    } catch (err) {
      console.error(`Auto push failed for ${file.path}`, err);
    } finally {
      this.pendingSyncs.delete(path);
    }
  }
  async resolveTarget(file) {
    const folderPath = this.findStoryFolderPath(file);
    if (!folderPath) {
      return null;
    }
    if (file.name === "story.md") {
      return { folderPath, pushWholeStory: true };
    }
    const content = await this.plugin.app.vault.read(file);
    const frontmatter = this.plugin.fileManager.parseFrontmatter(content);
    const entityId = frontmatter == null ? void 0 : frontmatter.id;
    if (!entityId) {
      return null;
    }
    const sceneId = frontmatter.scene_id;
    const chapterId = frontmatter.chapter_id;
    const isContentFile = file.path.includes("/03-contents/");
    const isChapterFile = file.path.includes("/00-chapters/");
    const isSceneFile = file.path.includes("/01-scenes/");
    if (frontmatter.story_id && frontmatter.number && isChapterFile) {
      return {
        folderPath,
        pushWholeStory: false,
        syncTarget: { type: "chapter", id: entityId }
      };
    }
    if (frontmatter.story_id && (isSceneFile || chapterId)) {
      return {
        folderPath,
        pushWholeStory: false,
        syncTarget: { type: "scene", id: entityId }
      };
    }
    if (sceneId) {
      return {
        folderPath,
        pushWholeStory: false,
        syncTarget: { type: "scene", id: sceneId }
      };
    }
    if (isContentFile) {
      return {
        folderPath,
        pushWholeStory: false,
        syncTarget: { type: "content", id: entityId }
      };
    }
    return null;
  }
  findStoryFolderPath(file) {
    let current = file.parent;
    while (current) {
      const storyFilePath = `${current.path}/story.md`;
      const maybeStoryFile = this.plugin.app.vault.getAbstractFileByPath(storyFilePath);
<<<<<<< HEAD
      if (maybeStoryFile instanceof import_obsidian10.TFile) {
        return current.path;
      }
      const parent = current.parent;
      if (parent instanceof import_obsidian10.TFolder) {
=======
      if (maybeStoryFile instanceof import_obsidian9.TFile) {
        return current.path;
      }
      const parent = current.parent;
      if (parent instanceof import_obsidian9.TFolder) {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        current = parent;
      } else {
        current = null;
      }
    }
    return null;
  }
};

// src/views/StoryListView.ts
<<<<<<< HEAD
var import_obsidian17 = require("obsidian");

// src/views/modals/ChapterModal.ts
var import_obsidian11 = require("obsidian");
var ChapterModal = class extends import_obsidian11.Modal {
=======
var import_obsidian16 = require("obsidian");

// src/views/modals/ChapterModal.ts
var import_obsidian10 = require("obsidian");
var ChapterModal = class extends import_obsidian10.Modal {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  constructor(app, onSubmit, existingChapters = [], chapter) {
    super(app);
    this.chapter = {
      title: "",
      status: "draft"
    };
    this.isEdit = false;
    this.existingChapters = [];
    this.onSubmit = onSubmit;
    this.existingChapters = existingChapters;
    if (chapter) {
      this.isEdit = true;
      this.chapter = {
        number: chapter.number,
        title: chapter.title,
        status: chapter.status
      };
    }
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", {
      text: this.isEdit ? "Edit Chapter" : "Create Chapter"
    });
    if (this.isEdit) {
<<<<<<< HEAD
      new import_obsidian11.Setting(contentEl).setName("Chapter Number").setDesc("The chapter number").addText(
=======
      new import_obsidian10.Setting(contentEl).setName("Chapter Number").setDesc("The chapter number").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        (text) => {
          var _a;
          return text.setPlaceholder("1").setValue(((_a = this.chapter.number) == null ? void 0 : _a.toString()) || "1").onChange((value) => {
            const num = parseInt(value);
            if (!isNaN(num) && num > 0) {
              this.chapter.number = num;
            }
          });
        }
      );
    }
<<<<<<< HEAD
    new import_obsidian11.Setting(contentEl).setName("Title").setDesc("Chapter title").addText(
=======
    new import_obsidian10.Setting(contentEl).setName("Title").setDesc("Chapter title").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      (text) => text.setPlaceholder("Chapter Title").setValue(this.chapter.title || "").onChange((value) => {
        this.chapter.title = value;
      }).inputEl.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          this.submit();
        }
      })
    );
<<<<<<< HEAD
    new import_obsidian11.Setting(contentEl).setName("Status").setDesc("Chapter status").addDropdown(
=======
    new import_obsidian10.Setting(contentEl).setName("Status").setDesc("Chapter status").addDropdown(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      (dropdown) => dropdown.addOption("draft", "Draft").addOption("in_progress", "In Progress").addOption("completed", "Completed").setValue(this.chapter.status || "draft").onChange((value) => {
        this.chapter.status = value;
      })
    );
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const submitButton = buttonContainer.createEl("button", {
      text: this.isEdit ? "Update" : "Create",
      cls: "mod-cta"
    });
    submitButton.addEventListener("click", () => this.submit());
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.addEventListener("click", () => this.close());
    const titleInput = contentEl.querySelector("input[placeholder='Chapter Title']");
    if (titleInput) {
      titleInput.focus();
    }
  }
  async submit() {
    var _a;
    if (!((_a = this.chapter.title) == null ? void 0 : _a.trim())) {
<<<<<<< HEAD
      new import_obsidian11.Notice("Please enter a chapter title", 3e3);
=======
      new import_obsidian10.Notice("Please enter a chapter title", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      return;
    }
    if (!this.isEdit) {
      const maxNumber = this.existingChapters.length > 0 ? Math.max(...this.existingChapters.map((c) => c.number)) : 0;
      this.chapter.number = maxNumber + 1;
    } else {
      if (!this.chapter.number || this.chapter.number < 1) {
<<<<<<< HEAD
        new import_obsidian11.Notice("Chapter number must be greater than 0", 3e3);
=======
        new import_obsidian10.Notice("Chapter number must be greater than 0", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
    }
    try {
      await this.onSubmit(this.chapter);
      this.close();
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to save chapter";
<<<<<<< HEAD
      new import_obsidian11.Notice(`Error: ${errorMessage}`, 5e3);
=======
      new import_obsidian10.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/modals/SceneModal.ts
<<<<<<< HEAD
var import_obsidian12 = require("obsidian");
var SceneModal = class extends import_obsidian12.Modal {
=======
var import_obsidian11 = require("obsidian");
var SceneModal = class extends import_obsidian11.Modal {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  constructor(app, storyId, chapters, onSubmit, existingScenes = [], scene, defaultChapterId) {
    super(app);
    this.scene = {
      time_ref: "",
      goal: ""
    };
    this.isEdit = false;
    this.chapters = [];
    this.existingScenes = [];
    this.storyId = storyId;
    this.chapters = chapters;
    this.existingScenes = existingScenes;
    this.defaultChapterId = defaultChapterId;
    this.onSubmit = onSubmit;
    if (scene) {
      this.isEdit = true;
      this.scene = {
        story_id: scene.story_id,
        chapter_id: scene.chapter_id || null,
        order_num: scene.order_num,
        time_ref: scene.time_ref,
        goal: scene.goal,
        pov_character_id: scene.pov_character_id,
        location_id: scene.location_id
      };
    } else {
      this.scene.story_id = storyId;
      if (defaultChapterId !== void 0) {
        this.scene.chapter_id = defaultChapterId;
      }
    }
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", {
      text: this.isEdit ? "Edit Scene" : "Create Scene"
    });
<<<<<<< HEAD
    new import_obsidian12.Setting(contentEl).setName("Chapter").setDesc("Select the chapter for this scene (optional)").addDropdown((dropdown) => {
=======
    new import_obsidian11.Setting(contentEl).setName("Chapter").setDesc("Select the chapter for this scene (optional)").addDropdown((dropdown) => {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      dropdown.addOption("", "No Chapter");
      for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
        dropdown.addOption(
          chapter.id,
          `Chapter ${chapter.number}: ${chapter.title}`
        );
      }
      dropdown.setValue(this.scene.chapter_id || "");
      dropdown.onChange((value) => {
        this.scene.chapter_id = value || null;
      });
    });
    if (this.isEdit) {
<<<<<<< HEAD
      new import_obsidian12.Setting(contentEl).setName("Order Number").setDesc("Scene order within chapter").addText(
=======
      new import_obsidian11.Setting(contentEl).setName("Order Number").setDesc("Scene order within chapter").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        (text) => {
          var _a;
          return text.setPlaceholder("1").setValue(((_a = this.scene.order_num) == null ? void 0 : _a.toString()) || "1").onChange((value) => {
            const num = parseInt(value);
            if (!isNaN(num) && num > 0) {
              this.scene.order_num = num;
            }
          });
        }
      );
    }
<<<<<<< HEAD
    new import_obsidian12.Setting(contentEl).setName("Goal").setDesc("Scene goal or description").addTextArea(
=======
    new import_obsidian11.Setting(contentEl).setName("Goal").setDesc("Scene goal or description").addTextArea(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      (text) => text.setPlaceholder("What happens in this scene?").setValue(this.scene.goal || "").onChange((value) => {
        this.scene.goal = value;
      })
    );
<<<<<<< HEAD
    new import_obsidian12.Setting(contentEl).setName("Time Reference").setDesc("When does this scene take place?").addText(
=======
    new import_obsidian11.Setting(contentEl).setName("Time Reference").setDesc("When does this scene take place?").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      (text) => text.setPlaceholder("Morning, Evening, etc.").setValue(this.scene.time_ref || "").onChange((value) => {
        this.scene.time_ref = value;
      })
    );
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const submitButton = buttonContainer.createEl("button", {
      text: this.isEdit ? "Update" : "Create",
      cls: "mod-cta"
    });
    submitButton.addEventListener("click", () => this.submit());
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.addEventListener("click", () => this.close());
    const goalInput = contentEl.querySelector("textarea");
    if (goalInput) {
      goalInput.focus();
    }
  }
  async submit() {
    if (!this.isEdit) {
      const chapterId = this.scene.chapter_id || null;
      const scenesInChapter = this.existingScenes.filter(
        (s) => (s.chapter_id || null) === chapterId
      );
      const maxOrderNum = scenesInChapter.length > 0 ? Math.max(...scenesInChapter.map((s) => s.order_num)) : 0;
      this.scene.order_num = maxOrderNum + 1;
    } else {
      if (!this.scene.order_num || this.scene.order_num < 1) {
<<<<<<< HEAD
        new import_obsidian12.Notice("Order number must be greater than 0", 3e3);
=======
        new import_obsidian11.Notice("Order number must be greater than 0", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
    }
    try {
      await this.onSubmit(this.scene);
      this.close();
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to save scene";
<<<<<<< HEAD
      new import_obsidian12.Notice(`Error: ${errorMessage}`, 5e3);
=======
      new import_obsidian11.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/modals/BeatModal.ts
<<<<<<< HEAD
var import_obsidian13 = require("obsidian");
var BeatModal = class extends import_obsidian13.Modal {
=======
var import_obsidian12 = require("obsidian");
var BeatModal = class extends import_obsidian12.Modal {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  constructor(app, storyId, scenes, onSubmit, existingBeats = [], beat, chapters = [], defaultSceneId) {
    super(app);
    this.beat = {
      type: "setup",
      intent: "",
      outcome: ""
    };
    this.isEdit = false;
    this.scenes = [];
    this.chapters = [];
    this.existingBeats = [];
    this.storyId = storyId;
    this.scenes = scenes;
    this.chapters = chapters;
    this.existingBeats = existingBeats;
    this.defaultSceneId = defaultSceneId;
    this.onSubmit = onSubmit;
    if (beat) {
      this.isEdit = true;
      this.beat = {
        scene_id: beat.scene_id,
        order_num: beat.order_num,
        type: beat.type,
        intent: beat.intent,
        outcome: beat.outcome
      };
    } else if (defaultSceneId) {
      this.beat.scene_id = defaultSceneId;
    }
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", {
      text: this.isEdit ? "Edit Beat" : "Create Beat"
    });
<<<<<<< HEAD
    new import_obsidian13.Setting(contentEl).setName("Scene").setDesc("Select the scene for this beat").addDropdown((dropdown) => {
=======
    new import_obsidian12.Setting(contentEl).setName("Scene").setDesc("Select the scene for this beat").addDropdown((dropdown) => {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      const scenesByChapter = /* @__PURE__ */ new Map();
      for (const scene of this.scenes) {
        const chapterId = scene.chapter_id || null;
        if (!scenesByChapter.has(chapterId)) {
          scenesByChapter.set(chapterId, []);
        }
        scenesByChapter.get(chapterId).push(scene);
      }
      const getChapterLabel = (chapterId) => {
        if (!chapterId)
          return "No Chapter";
        const chapter = this.chapters.find((c) => c.id === chapterId);
        return chapter ? `Chapter ${chapter.number}: ${chapter.title}` : "No Chapter";
      };
      for (const [chapterId, chapterScenes] of scenesByChapter.entries()) {
        const label = getChapterLabel(chapterId);
        for (const scene of chapterScenes.sort((a, b) => a.order_num - b.order_num)) {
          dropdown.addOption(
            scene.id,
            `${label} > Scene ${scene.order_num}: ${scene.goal || "Untitled"}`
          );
        }
      }
      dropdown.setValue(this.beat.scene_id || "");
      dropdown.onChange((value) => {
        this.beat.scene_id = value;
      });
    });
    if (this.isEdit) {
<<<<<<< HEAD
      new import_obsidian13.Setting(contentEl).setName("Order Number").setDesc("Beat order within scene").addText(
=======
      new import_obsidian12.Setting(contentEl).setName("Order Number").setDesc("Beat order within scene").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        (text) => {
          var _a;
          return text.setPlaceholder("1").setValue(((_a = this.beat.order_num) == null ? void 0 : _a.toString()) || "1").onChange((value) => {
            const num = parseInt(value);
            if (!isNaN(num) && num > 0) {
              this.beat.order_num = num;
            }
          });
        }
      );
    }
<<<<<<< HEAD
    new import_obsidian13.Setting(contentEl).setName("Type").setDesc("Beat type").addDropdown(
=======
    new import_obsidian12.Setting(contentEl).setName("Type").setDesc("Beat type").addDropdown(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      (dropdown) => dropdown.addOption("setup", "Setup").addOption("turn", "Turn").addOption("reveal", "Reveal").addOption("conflict", "Conflict").addOption("climax", "Climax").addOption("resolution", "Resolution").addOption("hook", "Hook").addOption("transition", "Transition").setValue(this.beat.type || "setup").onChange((value) => {
        this.beat.type = value;
      })
    );
<<<<<<< HEAD
    new import_obsidian13.Setting(contentEl).setName("Intent").setDesc("What is the intent of this beat?").addTextArea(
=======
    new import_obsidian12.Setting(contentEl).setName("Intent").setDesc("What is the intent of this beat?").addTextArea(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      (text) => text.setPlaceholder("What does the character want?").setValue(this.beat.intent || "").onChange((value) => {
        this.beat.intent = value;
      })
    );
<<<<<<< HEAD
    new import_obsidian13.Setting(contentEl).setName("Outcome").setDesc("What is the outcome of this beat?").addTextArea(
=======
    new import_obsidian12.Setting(contentEl).setName("Outcome").setDesc("What is the outcome of this beat?").addTextArea(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      (text) => text.setPlaceholder("What happens as a result?").setValue(this.beat.outcome || "").onChange((value) => {
        this.beat.outcome = value;
      })
    );
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const submitButton = buttonContainer.createEl("button", {
      text: this.isEdit ? "Update" : "Create",
      cls: "mod-cta"
    });
    submitButton.addEventListener("click", () => this.submit());
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.addEventListener("click", () => this.close());
    const intentInput = contentEl.querySelector("textarea");
    if (intentInput) {
      intentInput.focus();
    }
  }
  async submit() {
    if (!this.beat.scene_id) {
<<<<<<< HEAD
      new import_obsidian13.Notice("Please select a scene", 3e3);
      return;
    }
    if (!this.beat.type) {
      new import_obsidian13.Notice("Please select a beat type", 3e3);
=======
      new import_obsidian12.Notice("Please select a scene", 3e3);
      return;
    }
    if (!this.beat.type) {
      new import_obsidian12.Notice("Please select a beat type", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      return;
    }
    if (!this.isEdit) {
      const beatsInScene = this.existingBeats.filter((b) => b.scene_id === this.beat.scene_id);
      const maxOrderNum = beatsInScene.length > 0 ? Math.max(...beatsInScene.map((b) => b.order_num)) : 0;
      this.beat.order_num = maxOrderNum + 1;
    } else {
      if (!this.beat.order_num || this.beat.order_num < 1) {
<<<<<<< HEAD
        new import_obsidian13.Notice("Order number must be greater than 0", 3e3);
=======
        new import_obsidian12.Notice("Order number must be greater than 0", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
    }
    try {
      await this.onSubmit(this.beat);
      this.close();
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to save beat";
<<<<<<< HEAD
      new import_obsidian13.Notice(`Error: ${errorMessage}`, 5e3);
=======
      new import_obsidian12.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/modals/ContentBlockModal.ts
<<<<<<< HEAD
var import_obsidian14 = require("obsidian");
=======
var import_obsidian13 = require("obsidian");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)

// src/api/unsplash.ts
var UnsplashClient = class {
  constructor(accessKey, secretKey) {
    this.apiUrl = "https://api.unsplash.com";
    this.accessKey = accessKey || "YOUR_UNSPLASH_ACCESS_KEY";
    this.secretKey = secretKey || "";
  }
  async searchImages(query, page = 1, perPage = 20) {
    const url = `${this.apiUrl}/search/photos?query=${encodeURIComponent(query)}&page=${page}&per_page=${perPage}`;
    const headers = {
      "Accept-Version": "v1"
    };
    if (!this.accessKey || this.accessKey === "YOUR_UNSPLASH_ACCESS_KEY") {
      throw new Error("Unsplash access key is required. Please configure it in plugin settings.");
    }
    headers["Authorization"] = `Client-ID ${this.accessKey}`;
    const response = await fetch(url, { headers });
    if (!response.ok) {
      const errorText = await response.text();
      throw new Error(`Unsplash API error: ${response.status} ${response.statusText}. ${errorText}`);
    }
    return response.json();
  }
  getImageUrl(photo, size = "regular") {
    return photo.urls[size];
  }
  getAttributionUrl(photo) {
    return photo.links.html;
  }
  getAttributionText(photo) {
    return `Photo by ${photo.user.name} on Unsplash`;
  }
};

// src/views/modals/ContentBlockModal.ts
<<<<<<< HEAD
var ContentBlockModal = class extends import_obsidian14.Modal {
=======
var ContentBlockModal = class extends import_obsidian13.Modal {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  constructor(app, onSubmit, contentBlock, plugin) {
    var _a, _b, _c, _d;
    super(app);
    this.contentBlock = {
      type: "text",
      kind: "final",
      content: "",
      metadata: {}
    };
    this.isEdit = false;
    this.unsplashResults = [];
    this.unsplashSearchQuery = "";
    this.unsplashSearching = false;
    this.selectedImageUrl = "";
    this.currentImageSourceTab = "internet link";
    this.onSubmit = onSubmit;
    this.plugin = plugin;
    const unsplashAccessKey = ((_b = (_a = this.plugin) == null ? void 0 : _a.settings) == null ? void 0 : _b.unsplashAccessKey) || "";
    const unsplashSecretKey = ((_d = (_c = this.plugin) == null ? void 0 : _c.settings) == null ? void 0 : _d.unsplashSecretKey) || "";
    this.unsplashClient = new UnsplashClient(unsplashAccessKey, unsplashSecretKey);
    if (contentBlock) {
      this.isEdit = true;
      this.contentBlock = {
        type: contentBlock.type,
        kind: contentBlock.kind || "final",
        content: contentBlock.content,
        metadata: contentBlock.metadata || {}
      };
      if (contentBlock.type === "image" && contentBlock.content) {
        this.selectedImageUrl = contentBlock.content;
      }
    }
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", {
      text: this.isEdit ? "Edit Content Block" : "Create Content Block"
    });
    if (this.isEdit && !this.contentBlock.type) {
<<<<<<< HEAD
      new import_obsidian14.Setting(contentEl).setName("Type").setDesc("Select the content type").addDropdown(
=======
      new import_obsidian13.Setting(contentEl).setName("Type").setDesc("Select the content type").addDropdown(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        (dropdown) => dropdown.addOption("text", "Text").addOption("image", "Image").setValue(this.contentBlock.type || "text").onChange((value) => {
          this.contentBlock.type = value;
          this.renderContentFields();
        })
      );
    }
    this.renderContentFields();
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const submitButton = buttonContainer.createEl("button", {
      text: this.isEdit ? "Update" : "Create",
      cls: "mod-cta"
    });
    submitButton.addEventListener("click", () => this.submit());
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.addEventListener("click", () => this.close());
  }
  renderContentFields() {
    var _a, _b, _c, _d, _e, _f, _g;
    const { contentEl } = this;
    const existingFields = contentEl.querySelectorAll(".content-block-field");
    existingFields.forEach((el) => el.remove());
    if (this.contentBlock.type === "text") {
      const textField = contentEl.createDiv({ cls: "content-block-field" });
<<<<<<< HEAD
      new import_obsidian14.Setting(textField).setName("Content").setDesc("Enter the text content").addTextArea(
=======
      new import_obsidian13.Setting(textField).setName("Content").setDesc("Enter the text content").addTextArea(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        (text) => text.setPlaceholder("Enter text...").setValue(this.contentBlock.content || "").onChange((value) => {
          this.contentBlock.content = value;
          if (!this.contentBlock.metadata) {
            this.contentBlock.metadata = {};
          }
          this.contentBlock.metadata.word_count = value.trim().split(/\s+/).filter((w) => w.length > 0).length;
        })
      );
    } else if (this.contentBlock.type === "image") {
      const imageField = contentEl.createDiv({ cls: "content-block-field" });
      const sourceValue = ((_a = this.contentBlock.metadata) == null ? void 0 : _a.source) || "internet link";
      this.currentImageSourceTab = sourceValue;
      const tabsContainer = imageField.createDiv({ cls: "content-block-source-tabs" });
      const unsplashTab = tabsContainer.createEl("button", {
        text: "Unsplash",
        cls: `content-block-source-tab ${this.currentImageSourceTab === "unsplash" ? "is-active" : ""}`
      });
      const internetTab = tabsContainer.createEl("button", {
        text: "Internet Link",
        cls: `content-block-source-tab ${this.currentImageSourceTab === "internet link" ? "is-active" : ""}`
      });
      const localTab = tabsContainer.createEl("button", {
        text: "Local Upload",
        cls: `content-block-source-tab ${this.currentImageSourceTab === "local" ? "is-active" : ""}`
      });
      const tabContent = imageField.createDiv({ cls: "content-block-source-tab-content" });
      unsplashTab.onclick = () => {
        this.currentImageSourceTab = "unsplash";
        if (!this.contentBlock.metadata) {
          this.contentBlock.metadata = {};
        }
        this.contentBlock.metadata.source = "unsplash";
        this.renderContentFields();
      };
      internetTab.onclick = () => {
        this.currentImageSourceTab = "internet link";
        if (!this.contentBlock.metadata) {
          this.contentBlock.metadata = {};
        }
        this.contentBlock.metadata.source = "internet link";
        this.renderContentFields();
      };
      localTab.onclick = () => {
        this.currentImageSourceTab = "local";
        if (!this.contentBlock.metadata) {
          this.contentBlock.metadata = {};
        }
        this.contentBlock.metadata.source = "local";
        this.renderContentFields();
      };
      if (this.currentImageSourceTab === "unsplash") {
        const unsplashAccessKey = ((_c = (_b = this.plugin) == null ? void 0 : _b.settings) == null ? void 0 : _c.unsplashAccessKey) || "";
        if (unsplashAccessKey && unsplashAccessKey !== "YOUR_UNSPLASH_ACCESS_KEY") {
<<<<<<< HEAD
          const unsplashSetting = new import_obsidian14.Setting(tabContent);
=======
          const unsplashSetting = new import_obsidian13.Setting(tabContent);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          unsplashSetting.setName("Search Unsplash");
          unsplashSetting.setDesc("Search for free images");
          unsplashSetting.addButton((button) => {
            button.setButtonText("Search");
            button.onClick(() => {
              this.showUnsplashSearch();
            });
          });
        } else {
<<<<<<< HEAD
          const unsplashSetting = new import_obsidian14.Setting(tabContent);
=======
          const unsplashSetting = new import_obsidian13.Setting(tabContent);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          unsplashSetting.setName("Search Unsplash");
          unsplashSetting.setDesc("Configure Unsplash Access Key and Secret Key in plugin settings to enable image search");
          unsplashSetting.addButton((button) => {
            button.setButtonText("Search");
            button.setDisabled(true);
          });
        }
        if (this.selectedImageUrl) {
<<<<<<< HEAD
          new import_obsidian14.Setting(tabContent).setName("Selected Image URL").setDesc("Image URL from Unsplash").addText(
=======
          new import_obsidian13.Setting(tabContent).setName("Selected Image URL").setDesc("Image URL from Unsplash").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
            (text) => text.setValue(this.selectedImageUrl).setDisabled(true)
          );
        }
      } else if (this.currentImageSourceTab === "internet link") {
<<<<<<< HEAD
        new import_obsidian14.Setting(tabContent).setName("Image URL").setDesc("Enter image URL").addText(
=======
        new import_obsidian13.Setting(tabContent).setName("Image URL").setDesc("Enter image URL").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          (text) => text.setPlaceholder("https://example.com/image.jpg").setValue(this.selectedImageUrl).onChange((value) => {
            this.selectedImageUrl = value;
            this.contentBlock.content = value;
            if (!this.contentBlock.metadata) {
              this.contentBlock.metadata = {};
            }
            this.contentBlock.metadata.source = "internet link";
          })
        );
      } else if (this.currentImageSourceTab === "local") {
<<<<<<< HEAD
        new import_obsidian14.Setting(tabContent).setName("Upload from Computer").setDesc("Upload image from your computer (coming soon)").addButton((button) => {
=======
        new import_obsidian13.Setting(tabContent).setName("Upload from Computer").setDesc("Upload image from your computer (coming soon)").addButton((button) => {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          button.setButtonText("Choose File");
          button.setDisabled(true);
        });
      }
      const altTextValue = ((_d = this.contentBlock.metadata) == null ? void 0 : _d.alt_text) || "";
<<<<<<< HEAD
      const altTextSetting = new import_obsidian14.Setting(imageField);
=======
      const altTextSetting = new import_obsidian13.Setting(imageField);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      altTextSetting.setName("Alt Text");
      altTextSetting.setDesc("Alt text for accessibility");
      altTextSetting.addText(
        (text) => text.setPlaceholder("Describe the image for accessibility").setValue(altTextValue).onChange((value) => {
          if (!this.contentBlock.metadata) {
            this.contentBlock.metadata = {};
          }
          this.contentBlock.metadata.alt_text = value || void 0;
        })
      );
      const authorNameValue = ((_e = this.contentBlock.metadata) == null ? void 0 : _e.author_name) || "";
<<<<<<< HEAD
      new import_obsidian14.Setting(imageField).setName("Author Name").setDesc("Name of the image author/photographer").addText(
=======
      new import_obsidian13.Setting(imageField).setName("Author Name").setDesc("Name of the image author/photographer").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        (text) => text.setPlaceholder("Author name").setValue(authorNameValue).onChange((value) => {
          if (!this.contentBlock.metadata) {
            this.contentBlock.metadata = {};
          }
          this.contentBlock.metadata.author_name = value || void 0;
        })
      );
      const attributionValue = ((_f = this.contentBlock.metadata) == null ? void 0 : _f.attribution) || "";
<<<<<<< HEAD
      new import_obsidian14.Setting(imageField).setName("Attribution").setDesc("Attribution text (e.g., 'Photo by John Doe on Unsplash')").addText(
=======
      new import_obsidian13.Setting(imageField).setName("Attribution").setDesc("Attribution text (e.g., 'Photo by John Doe on Unsplash')").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        (text) => text.setPlaceholder("Photo by Author Name on Source").setValue(attributionValue).onChange((value) => {
          if (!this.contentBlock.metadata) {
            this.contentBlock.metadata = {};
          }
          this.contentBlock.metadata.attribution = value || void 0;
        })
      );
      const attributionUrlValue = ((_g = this.contentBlock.metadata) == null ? void 0 : _g.attribution_url) || "";
<<<<<<< HEAD
      new import_obsidian14.Setting(imageField).setName("Attribution URL").setDesc("Link to the original image or author page").addText(
=======
      new import_obsidian13.Setting(imageField).setName("Attribution URL").setDesc("Link to the original image or author page").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        (text) => text.setPlaceholder("https://example.com/photo").setValue(attributionUrlValue).onChange((value) => {
          if (!this.contentBlock.metadata) {
            this.contentBlock.metadata = {};
          }
          this.contentBlock.metadata.attribution_url = value || void 0;
        })
      );
    }
  }
  showUnsplashSearch() {
    const { contentEl } = this;
<<<<<<< HEAD
    const searchModal = new import_obsidian14.Modal(this.app);
=======
    const searchModal = new import_obsidian13.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    searchModal.titleEl.setText("Search Unsplash");
    const searchContent = searchModal.contentEl;
    const searchInput = searchContent.createEl("input", {
      type: "text",
      placeholder: "Search for images...",
      cls: "unsplash-search-input"
    });
    searchInput.value = this.unsplashSearchQuery;
    searchInput.style.width = "100%";
    searchInput.style.padding = "0.5rem";
    searchInput.style.marginBottom = "1rem";
    const searchButton = searchContent.createEl("button", {
      text: "Search",
      cls: "mod-cta"
    });
    searchButton.style.marginBottom = "1rem";
    const resultsContainer = searchContent.createDiv({ cls: "unsplash-results-grid" });
    const performSearch = async () => {
      const query = searchInput.value.trim();
      if (!query) {
<<<<<<< HEAD
        new import_obsidian14.Notice("Please enter a search query", 3e3);
=======
        new import_obsidian13.Notice("Please enter a search query", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      this.unsplashSearching = true;
      searchButton.disabled = true;
      searchButton.setText("Searching...");
      resultsContainer.empty();
      resultsContainer.createEl("p", { text: "Searching..." });
      try {
        const response = await this.unsplashClient.searchImages(query, 1, 20);
        this.unsplashResults = response.results;
        resultsContainer.empty();
        if (this.unsplashResults.length === 0) {
          resultsContainer.createEl("p", { text: "No results found." });
        } else {
          for (const photo of this.unsplashResults) {
            const photoItem = resultsContainer.createDiv({ cls: "unsplash-photo-item" });
            const img = photoItem.createEl("img", {
              attr: {
                src: this.unsplashClient.getImageUrl(photo, "thumb"),
                alt: photo.alt_description || photo.description || "Unsplash photo"
              }
            });
            img.style.width = "100%";
            img.style.height = "150px";
            img.style.objectFit = "cover";
            img.style.borderRadius = "4px";
            img.style.cursor = "pointer";
            const photoInfo = photoItem.createDiv({ cls: "unsplash-photo-info" });
            photoInfo.createEl("p", {
              text: photo.alt_description || photo.description || "Untitled",
              cls: "unsplash-photo-title"
            });
            photoInfo.createEl("p", {
              text: this.unsplashClient.getAttributionText(photo),
              cls: "unsplash-photo-attribution"
            });
            photoItem.onclick = () => {
              const imageUrl = this.unsplashClient.getImageUrl(photo, "regular");
              this.selectedImageUrl = imageUrl;
              this.contentBlock.content = imageUrl;
              if (!this.contentBlock.metadata) {
                this.contentBlock.metadata = {};
              }
              const altText = photo.alt_description || photo.description || "";
              this.contentBlock.metadata.alt_text = altText;
              this.contentBlock.metadata.attribution = this.unsplashClient.getAttributionText(photo);
              this.contentBlock.metadata.attribution_url = this.unsplashClient.getAttributionUrl(photo);
              this.contentBlock.metadata.author_name = photo.user.name;
              this.contentBlock.metadata.source = "unsplash";
              searchModal.close();
              this.renderContentFields();
<<<<<<< HEAD
              new import_obsidian14.Notice("Image selected");
=======
              new import_obsidian13.Notice("Image selected");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
            };
          }
        }
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to search Unsplash";
<<<<<<< HEAD
        new import_obsidian14.Notice(`Error: ${errorMessage}`, 5e3);
=======
        new import_obsidian13.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        resultsContainer.empty();
        resultsContainer.createEl("p", {
          text: `Error: ${errorMessage}`,
          cls: "story-engine-error"
        });
      } finally {
        this.unsplashSearching = false;
        searchButton.disabled = false;
        searchButton.setText("Search");
      }
    };
    searchButton.onclick = performSearch;
    searchInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        performSearch();
      }
    });
    if (this.unsplashSearchQuery) {
      performSearch();
    }
    searchModal.open();
  }
  async submit() {
    var _a, _b;
    if (!this.contentBlock.type) {
      this.contentBlock.type = "text";
    }
    if (this.contentBlock.type === "text" && !((_a = this.contentBlock.content) == null ? void 0 : _a.trim())) {
<<<<<<< HEAD
      new import_obsidian14.Notice("Please enter text content", 3e3);
      return;
    }
    if (this.contentBlock.type === "image" && !((_b = this.contentBlock.content) == null ? void 0 : _b.trim())) {
      new import_obsidian14.Notice("Please enter an image URL or select an image", 3e3);
=======
      new import_obsidian13.Notice("Please enter text content", 3e3);
      return;
    }
    if (this.contentBlock.type === "image" && !((_b = this.contentBlock.content) == null ? void 0 : _b.trim())) {
      new import_obsidian13.Notice("Please enter an image URL or select an image", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      return;
    }
    try {
      await this.onSubmit(this.contentBlock);
      this.close();
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to save content block";
<<<<<<< HEAD
      new import_obsidian14.Notice(`Error: ${errorMessage}`, 5e3);
=======
      new import_obsidian13.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/TimelineModal.ts
<<<<<<< HEAD
var import_obsidian15 = require("obsidian");
=======
var import_obsidian14 = require("obsidian");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)

// node_modules/d3-array/src/ascending.js
function ascending(a, b) {
  return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;
}

// node_modules/d3-array/src/descending.js
function descending(a, b) {
  return a == null || b == null ? NaN : b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;
}

// node_modules/d3-array/src/bisector.js
function bisector(f) {
  let compare1, compare2, delta;
  if (f.length !== 2) {
    compare1 = ascending;
    compare2 = (d, x) => ascending(f(d), x);
    delta = (d, x) => f(d) - x;
  } else {
    compare1 = f === ascending || f === descending ? f : zero;
    compare2 = f;
    delta = f;
  }
  function left2(a, x, lo = 0, hi = a.length) {
    if (lo < hi) {
      if (compare1(x, x) !== 0)
        return hi;
      do {
        const mid = lo + hi >>> 1;
        if (compare2(a[mid], x) < 0)
          lo = mid + 1;
        else
          hi = mid;
      } while (lo < hi);
    }
    return lo;
  }
  function right2(a, x, lo = 0, hi = a.length) {
    if (lo < hi) {
      if (compare1(x, x) !== 0)
        return hi;
      do {
        const mid = lo + hi >>> 1;
        if (compare2(a[mid], x) <= 0)
          lo = mid + 1;
        else
          hi = mid;
      } while (lo < hi);
    }
    return lo;
  }
  function center2(a, x, lo = 0, hi = a.length) {
    const i = left2(a, x, lo, hi - 1);
    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;
  }
  return { left: left2, center: center2, right: right2 };
}
function zero() {
  return 0;
}

// node_modules/d3-array/src/number.js
function number(x) {
  return x === null ? NaN : +x;
}

// node_modules/d3-array/src/bisect.js
var ascendingBisect = bisector(ascending);
var bisectRight = ascendingBisect.right;
var bisectLeft = ascendingBisect.left;
var bisectCenter = bisector(number).center;
var bisect_default = bisectRight;

// node_modules/d3-array/src/extent.js
function extent(values, valueof) {
  let min2;
  let max2;
  if (valueof === void 0) {
    for (const value of values) {
      if (value != null) {
        if (min2 === void 0) {
          if (value >= value)
            min2 = max2 = value;
        } else {
          if (min2 > value)
            min2 = value;
          if (max2 < value)
            max2 = value;
        }
      }
    }
  } else {
    let index = -1;
    for (let value of values) {
      if ((value = valueof(value, ++index, values)) != null) {
        if (min2 === void 0) {
          if (value >= value)
            min2 = max2 = value;
        } else {
          if (min2 > value)
            min2 = value;
          if (max2 < value)
            max2 = value;
        }
      }
    }
  }
  return [min2, max2];
}

// node_modules/internmap/src/index.js
var InternMap = class extends Map {
  constructor(entries, key = keyof) {
    super();
    Object.defineProperties(this, { _intern: { value: /* @__PURE__ */ new Map() }, _key: { value: key } });
    if (entries != null)
      for (const [key2, value] of entries)
        this.set(key2, value);
  }
  get(key) {
    return super.get(intern_get(this, key));
  }
  has(key) {
    return super.has(intern_get(this, key));
  }
  set(key, value) {
    return super.set(intern_set(this, key), value);
  }
  delete(key) {
    return super.delete(intern_delete(this, key));
  }
};
function intern_get({ _intern, _key }, value) {
  const key = _key(value);
  return _intern.has(key) ? _intern.get(key) : value;
}
function intern_set({ _intern, _key }, value) {
  const key = _key(value);
  if (_intern.has(key))
    return _intern.get(key);
  _intern.set(key, value);
  return value;
}
function intern_delete({ _intern, _key }, value) {
  const key = _key(value);
  if (_intern.has(key)) {
    value = _intern.get(key);
    _intern.delete(key);
  }
  return value;
}
function keyof(value) {
  return value !== null && typeof value === "object" ? value.valueOf() : value;
}

// node_modules/d3-array/src/ticks.js
var e10 = Math.sqrt(50);
var e5 = Math.sqrt(10);
var e2 = Math.sqrt(2);
function tickSpec(start2, stop, count) {
  const step = (stop - start2) / Math.max(0, count), power = Math.floor(Math.log10(step)), error = step / Math.pow(10, power), factor = error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1;
  let i1, i2, inc;
  if (power < 0) {
    inc = Math.pow(10, -power) / factor;
    i1 = Math.round(start2 * inc);
    i2 = Math.round(stop * inc);
    if (i1 / inc < start2)
      ++i1;
    if (i2 / inc > stop)
      --i2;
    inc = -inc;
  } else {
    inc = Math.pow(10, power) * factor;
    i1 = Math.round(start2 / inc);
    i2 = Math.round(stop / inc);
    if (i1 * inc < start2)
      ++i1;
    if (i2 * inc > stop)
      --i2;
  }
  if (i2 < i1 && 0.5 <= count && count < 2)
    return tickSpec(start2, stop, count * 2);
  return [i1, i2, inc];
}
function ticks(start2, stop, count) {
  stop = +stop, start2 = +start2, count = +count;
  if (!(count > 0))
    return [];
  if (start2 === stop)
    return [start2];
  const reverse = stop < start2, [i1, i2, inc] = reverse ? tickSpec(stop, start2, count) : tickSpec(start2, stop, count);
  if (!(i2 >= i1))
    return [];
  const n = i2 - i1 + 1, ticks2 = new Array(n);
  if (reverse) {
    if (inc < 0)
      for (let i = 0; i < n; ++i)
        ticks2[i] = (i2 - i) / -inc;
    else
      for (let i = 0; i < n; ++i)
        ticks2[i] = (i2 - i) * inc;
  } else {
    if (inc < 0)
      for (let i = 0; i < n; ++i)
        ticks2[i] = (i1 + i) / -inc;
    else
      for (let i = 0; i < n; ++i)
        ticks2[i] = (i1 + i) * inc;
  }
  return ticks2;
}
function tickIncrement(start2, stop, count) {
  stop = +stop, start2 = +start2, count = +count;
  return tickSpec(start2, stop, count)[2];
}
function tickStep(start2, stop, count) {
  stop = +stop, start2 = +start2, count = +count;
  const reverse = stop < start2, inc = reverse ? tickIncrement(stop, start2, count) : tickIncrement(start2, stop, count);
  return (reverse ? -1 : 1) * (inc < 0 ? 1 / -inc : inc);
}

// node_modules/d3-axis/src/identity.js
function identity_default(x) {
  return x;
}

// node_modules/d3-axis/src/axis.js
var top = 1;
var right = 2;
var bottom = 3;
var left = 4;
var epsilon = 1e-6;
function translateX(x) {
  return "translate(" + x + ",0)";
}
function translateY(y) {
  return "translate(0," + y + ")";
}
function number2(scale) {
  return (d) => +scale(d);
}
function center(scale, offset) {
  offset = Math.max(0, scale.bandwidth() - offset * 2) / 2;
  if (scale.round())
    offset = Math.round(offset);
  return (d) => +scale(d) + offset;
}
function entering() {
  return !this.__axis;
}
function axis(orient, scale) {
  var tickArguments = [], tickValues = null, tickFormat2 = null, tickSizeInner = 6, tickSizeOuter = 6, tickPadding = 3, offset = typeof window !== "undefined" && window.devicePixelRatio > 1 ? 0 : 0.5, k = orient === top || orient === left ? -1 : 1, x = orient === left || orient === right ? "x" : "y", transform2 = orient === top || orient === bottom ? translateX : translateY;
  function axis2(context) {
    var values = tickValues == null ? scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain() : tickValues, format2 = tickFormat2 == null ? scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity_default : tickFormat2, spacing = Math.max(tickSizeInner, 0) + tickPadding, range = scale.range(), range0 = +range[0] + offset, range1 = +range[range.length - 1] + offset, position = (scale.bandwidth ? center : number2)(scale.copy(), offset), selection2 = context.selection ? context.selection() : context, path = selection2.selectAll(".domain").data([null]), tick = selection2.selectAll(".tick").data(values, scale).order(), tickExit = tick.exit(), tickEnter = tick.enter().append("g").attr("class", "tick"), line = tick.select("line"), text = tick.select("text");
    path = path.merge(path.enter().insert("path", ".tick").attr("class", "domain").attr("stroke", "currentColor"));
    tick = tick.merge(tickEnter);
    line = line.merge(tickEnter.append("line").attr("stroke", "currentColor").attr(x + "2", k * tickSizeInner));
    text = text.merge(tickEnter.append("text").attr("fill", "currentColor").attr(x, k * spacing).attr("dy", orient === top ? "0em" : orient === bottom ? "0.71em" : "0.32em"));
    if (context !== selection2) {
      path = path.transition(context);
      tick = tick.transition(context);
      line = line.transition(context);
      text = text.transition(context);
      tickExit = tickExit.transition(context).attr("opacity", epsilon).attr("transform", function(d) {
        return isFinite(d = position(d)) ? transform2(d + offset) : this.getAttribute("transform");
      });
      tickEnter.attr("opacity", epsilon).attr("transform", function(d) {
        var p = this.parentNode.__axis;
        return transform2((p && isFinite(p = p(d)) ? p : position(d)) + offset);
      });
    }
    tickExit.remove();
    path.attr("d", orient === left || orient === right ? tickSizeOuter ? "M" + k * tickSizeOuter + "," + range0 + "H" + offset + "V" + range1 + "H" + k * tickSizeOuter : "M" + offset + "," + range0 + "V" + range1 : tickSizeOuter ? "M" + range0 + "," + k * tickSizeOuter + "V" + offset + "H" + range1 + "V" + k * tickSizeOuter : "M" + range0 + "," + offset + "H" + range1);
    tick.attr("opacity", 1).attr("transform", function(d) {
      return transform2(position(d) + offset);
    });
    line.attr(x + "2", k * tickSizeInner);
    text.attr(x, k * spacing).text(format2);
    selection2.filter(entering).attr("fill", "none").attr("font-size", 10).attr("font-family", "sans-serif").attr("text-anchor", orient === right ? "start" : orient === left ? "end" : "middle");
    selection2.each(function() {
      this.__axis = position;
    });
  }
  axis2.scale = function(_) {
    return arguments.length ? (scale = _, axis2) : scale;
  };
  axis2.ticks = function() {
    return tickArguments = Array.from(arguments), axis2;
  };
  axis2.tickArguments = function(_) {
    return arguments.length ? (tickArguments = _ == null ? [] : Array.from(_), axis2) : tickArguments.slice();
  };
  axis2.tickValues = function(_) {
    return arguments.length ? (tickValues = _ == null ? null : Array.from(_), axis2) : tickValues && tickValues.slice();
  };
  axis2.tickFormat = function(_) {
    return arguments.length ? (tickFormat2 = _, axis2) : tickFormat2;
  };
  axis2.tickSize = function(_) {
    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis2) : tickSizeInner;
  };
  axis2.tickSizeInner = function(_) {
    return arguments.length ? (tickSizeInner = +_, axis2) : tickSizeInner;
  };
  axis2.tickSizeOuter = function(_) {
    return arguments.length ? (tickSizeOuter = +_, axis2) : tickSizeOuter;
  };
  axis2.tickPadding = function(_) {
    return arguments.length ? (tickPadding = +_, axis2) : tickPadding;
  };
  axis2.offset = function(_) {
    return arguments.length ? (offset = +_, axis2) : offset;
  };
  return axis2;
}
function axisBottom(scale) {
  return axis(bottom, scale);
}
function axisLeft(scale) {
  return axis(left, scale);
}

// node_modules/d3-dispatch/src/dispatch.js
var noop = { value: () => {
} };
function dispatch() {
  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {
    if (!(t = arguments[i] + "") || t in _ || /[\s.]/.test(t))
      throw new Error("illegal type: " + t);
    _[t] = [];
  }
  return new Dispatch(_);
}
function Dispatch(_) {
  this._ = _;
}
function parseTypenames(typenames, types) {
  return typenames.trim().split(/^|\s+/).map(function(t) {
    var name = "", i = t.indexOf(".");
    if (i >= 0)
      name = t.slice(i + 1), t = t.slice(0, i);
    if (t && !types.hasOwnProperty(t))
      throw new Error("unknown type: " + t);
    return { type: t, name };
  });
}
Dispatch.prototype = dispatch.prototype = {
  constructor: Dispatch,
  on: function(typename, callback) {
    var _ = this._, T = parseTypenames(typename + "", _), t, i = -1, n = T.length;
    if (arguments.length < 2) {
      while (++i < n)
        if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name)))
          return t;
      return;
    }
    if (callback != null && typeof callback !== "function")
      throw new Error("invalid callback: " + callback);
    while (++i < n) {
      if (t = (typename = T[i]).type)
        _[t] = set(_[t], typename.name, callback);
      else if (callback == null)
        for (t in _)
          _[t] = set(_[t], typename.name, null);
    }
    return this;
  },
  copy: function() {
    var copy2 = {}, _ = this._;
    for (var t in _)
      copy2[t] = _[t].slice();
    return new Dispatch(copy2);
  },
  call: function(type2, that) {
    if ((n = arguments.length - 2) > 0)
      for (var args = new Array(n), i = 0, n, t; i < n; ++i)
        args[i] = arguments[i + 2];
    if (!this._.hasOwnProperty(type2))
      throw new Error("unknown type: " + type2);
    for (t = this._[type2], i = 0, n = t.length; i < n; ++i)
      t[i].value.apply(that, args);
  },
  apply: function(type2, that, args) {
    if (!this._.hasOwnProperty(type2))
      throw new Error("unknown type: " + type2);
    for (var t = this._[type2], i = 0, n = t.length; i < n; ++i)
      t[i].value.apply(that, args);
  }
};
function get(type2, name) {
  for (var i = 0, n = type2.length, c; i < n; ++i) {
    if ((c = type2[i]).name === name) {
      return c.value;
    }
  }
}
function set(type2, name, callback) {
  for (var i = 0, n = type2.length; i < n; ++i) {
    if (type2[i].name === name) {
      type2[i] = noop, type2 = type2.slice(0, i).concat(type2.slice(i + 1));
      break;
    }
  }
  if (callback != null)
    type2.push({ name, value: callback });
  return type2;
}
var dispatch_default = dispatch;

// node_modules/d3-selection/src/namespaces.js
var xhtml = "http://www.w3.org/1999/xhtml";
var namespaces_default = {
  svg: "http://www.w3.org/2000/svg",
  xhtml,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
};

// node_modules/d3-selection/src/namespace.js
function namespace_default(name) {
  var prefix = name += "", i = prefix.indexOf(":");
  if (i >= 0 && (prefix = name.slice(0, i)) !== "xmlns")
    name = name.slice(i + 1);
  return namespaces_default.hasOwnProperty(prefix) ? { space: namespaces_default[prefix], local: name } : name;
}

// node_modules/d3-selection/src/creator.js
function creatorInherit(name) {
  return function() {
    var document2 = this.ownerDocument, uri = this.namespaceURI;
    return uri === xhtml && document2.documentElement.namespaceURI === xhtml ? document2.createElement(name) : document2.createElementNS(uri, name);
  };
}
function creatorFixed(fullname) {
  return function() {
    return this.ownerDocument.createElementNS(fullname.space, fullname.local);
  };
}
function creator_default(name) {
  var fullname = namespace_default(name);
  return (fullname.local ? creatorFixed : creatorInherit)(fullname);
}

// node_modules/d3-selection/src/selector.js
function none() {
}
function selector_default(selector) {
  return selector == null ? none : function() {
    return this.querySelector(selector);
  };
}

// node_modules/d3-selection/src/selection/select.js
function select_default(select) {
  if (typeof select !== "function")
    select = selector_default(select);
  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {
      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {
        if ("__data__" in node)
          subnode.__data__ = node.__data__;
        subgroup[i] = subnode;
      }
    }
  }
  return new Selection(subgroups, this._parents);
}

// node_modules/d3-selection/src/array.js
function array(x) {
  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);
}

// node_modules/d3-selection/src/selectorAll.js
function empty() {
  return [];
}
function selectorAll_default(selector) {
  return selector == null ? empty : function() {
    return this.querySelectorAll(selector);
  };
}

// node_modules/d3-selection/src/selection/selectAll.js
function arrayAll(select) {
  return function() {
    return array(select.apply(this, arguments));
  };
}
function selectAll_default(select) {
  if (typeof select === "function")
    select = arrayAll(select);
  else
    select = selectorAll_default(select);
  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        subgroups.push(select.call(node, node.__data__, i, group));
        parents.push(node);
      }
    }
  }
  return new Selection(subgroups, parents);
}

// node_modules/d3-selection/src/matcher.js
function matcher_default(selector) {
  return function() {
    return this.matches(selector);
  };
}
function childMatcher(selector) {
  return function(node) {
    return node.matches(selector);
  };
}

// node_modules/d3-selection/src/selection/selectChild.js
var find = Array.prototype.find;
function childFind(match) {
  return function() {
    return find.call(this.children, match);
  };
}
function childFirst() {
  return this.firstElementChild;
}
function selectChild_default(match) {
  return this.select(match == null ? childFirst : childFind(typeof match === "function" ? match : childMatcher(match)));
}

// node_modules/d3-selection/src/selection/selectChildren.js
var filter = Array.prototype.filter;
function children() {
  return Array.from(this.children);
}
function childrenFilter(match) {
  return function() {
    return filter.call(this.children, match);
  };
}
function selectChildren_default(match) {
  return this.selectAll(match == null ? children : childrenFilter(typeof match === "function" ? match : childMatcher(match)));
}

// node_modules/d3-selection/src/selection/filter.js
function filter_default(match) {
  if (typeof match !== "function")
    match = matcher_default(match);
  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {
      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {
        subgroup.push(node);
      }
    }
  }
  return new Selection(subgroups, this._parents);
}

// node_modules/d3-selection/src/selection/sparse.js
function sparse_default(update) {
  return new Array(update.length);
}

// node_modules/d3-selection/src/selection/enter.js
function enter_default() {
  return new Selection(this._enter || this._groups.map(sparse_default), this._parents);
}
function EnterNode(parent, datum2) {
  this.ownerDocument = parent.ownerDocument;
  this.namespaceURI = parent.namespaceURI;
  this._next = null;
  this._parent = parent;
  this.__data__ = datum2;
}
EnterNode.prototype = {
  constructor: EnterNode,
  appendChild: function(child) {
    return this._parent.insertBefore(child, this._next);
  },
  insertBefore: function(child, next) {
    return this._parent.insertBefore(child, next);
  },
  querySelector: function(selector) {
    return this._parent.querySelector(selector);
  },
  querySelectorAll: function(selector) {
    return this._parent.querySelectorAll(selector);
  }
};

// node_modules/d3-selection/src/constant.js
function constant_default(x) {
  return function() {
    return x;
  };
}

// node_modules/d3-selection/src/selection/data.js
function bindIndex(parent, group, enter, update, exit, data) {
  var i = 0, node, groupLength = group.length, dataLength = data.length;
  for (; i < dataLength; ++i) {
    if (node = group[i]) {
      node.__data__ = data[i];
      update[i] = node;
    } else {
      enter[i] = new EnterNode(parent, data[i]);
    }
  }
  for (; i < groupLength; ++i) {
    if (node = group[i]) {
      exit[i] = node;
    }
  }
}
function bindKey(parent, group, enter, update, exit, data, key) {
  var i, node, nodeByKeyValue = /* @__PURE__ */ new Map(), groupLength = group.length, dataLength = data.length, keyValues = new Array(groupLength), keyValue;
  for (i = 0; i < groupLength; ++i) {
    if (node = group[i]) {
      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + "";
      if (nodeByKeyValue.has(keyValue)) {
        exit[i] = node;
      } else {
        nodeByKeyValue.set(keyValue, node);
      }
    }
  }
  for (i = 0; i < dataLength; ++i) {
    keyValue = key.call(parent, data[i], i, data) + "";
    if (node = nodeByKeyValue.get(keyValue)) {
      update[i] = node;
      node.__data__ = data[i];
      nodeByKeyValue.delete(keyValue);
    } else {
      enter[i] = new EnterNode(parent, data[i]);
    }
  }
  for (i = 0; i < groupLength; ++i) {
    if ((node = group[i]) && nodeByKeyValue.get(keyValues[i]) === node) {
      exit[i] = node;
    }
  }
}
function datum(node) {
  return node.__data__;
}
function data_default(value, key) {
  if (!arguments.length)
    return Array.from(this, datum);
  var bind = key ? bindKey : bindIndex, parents = this._parents, groups = this._groups;
  if (typeof value !== "function")
    value = constant_default(value);
  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {
    var parent = parents[j], group = groups[j], groupLength = group.length, data = arraylike(value.call(parent, parent && parent.__data__, j, parents)), dataLength = data.length, enterGroup = enter[j] = new Array(dataLength), updateGroup = update[j] = new Array(dataLength), exitGroup = exit[j] = new Array(groupLength);
    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);
    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {
      if (previous = enterGroup[i0]) {
        if (i0 >= i1)
          i1 = i0 + 1;
        while (!(next = updateGroup[i1]) && ++i1 < dataLength)
          ;
        previous._next = next || null;
      }
    }
  }
  update = new Selection(update, parents);
  update._enter = enter;
  update._exit = exit;
  return update;
}
function arraylike(data) {
  return typeof data === "object" && "length" in data ? data : Array.from(data);
}

// node_modules/d3-selection/src/selection/exit.js
function exit_default() {
  return new Selection(this._exit || this._groups.map(sparse_default), this._parents);
}

// node_modules/d3-selection/src/selection/join.js
function join_default(onenter, onupdate, onexit) {
  var enter = this.enter(), update = this, exit = this.exit();
  if (typeof onenter === "function") {
    enter = onenter(enter);
    if (enter)
      enter = enter.selection();
  } else {
    enter = enter.append(onenter + "");
  }
  if (onupdate != null) {
    update = onupdate(update);
    if (update)
      update = update.selection();
  }
  if (onexit == null)
    exit.remove();
  else
    onexit(exit);
  return enter && update ? enter.merge(update).order() : update;
}

// node_modules/d3-selection/src/selection/merge.js
function merge_default(context) {
  var selection2 = context.selection ? context.selection() : context;
  for (var groups0 = this._groups, groups1 = selection2._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {
    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group0[i] || group1[i]) {
        merge[i] = node;
      }
    }
  }
  for (; j < m0; ++j) {
    merges[j] = groups0[j];
  }
  return new Selection(merges, this._parents);
}

// node_modules/d3-selection/src/selection/order.js
function order_default() {
  for (var groups = this._groups, j = -1, m = groups.length; ++j < m; ) {
    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0; ) {
      if (node = group[i]) {
        if (next && node.compareDocumentPosition(next) ^ 4)
          next.parentNode.insertBefore(node, next);
        next = node;
      }
    }
  }
  return this;
}

// node_modules/d3-selection/src/selection/sort.js
function sort_default(compare) {
  if (!compare)
    compare = ascending2;
  function compareNode(a, b) {
    return a && b ? compare(a.__data__, b.__data__) : !a - !b;
  }
  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        sortgroup[i] = node;
      }
    }
    sortgroup.sort(compareNode);
  }
  return new Selection(sortgroups, this._parents).order();
}
function ascending2(a, b) {
  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;
}

// node_modules/d3-selection/src/selection/call.js
function call_default() {
  var callback = arguments[0];
  arguments[0] = this;
  callback.apply(null, arguments);
  return this;
}

// node_modules/d3-selection/src/selection/nodes.js
function nodes_default() {
  return Array.from(this);
}

// node_modules/d3-selection/src/selection/node.js
function node_default() {
  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {
      var node = group[i];
      if (node)
        return node;
    }
  }
  return null;
}

// node_modules/d3-selection/src/selection/size.js
function size_default() {
  let size = 0;
  for (const node of this)
    ++size;
  return size;
}

// node_modules/d3-selection/src/selection/empty.js
function empty_default() {
  return !this.node();
}

// node_modules/d3-selection/src/selection/each.js
function each_default(callback) {
  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {
      if (node = group[i])
        callback.call(node, node.__data__, i, group);
    }
  }
  return this;
}

// node_modules/d3-selection/src/selection/attr.js
function attrRemove(name) {
  return function() {
    this.removeAttribute(name);
  };
}
function attrRemoveNS(fullname) {
  return function() {
    this.removeAttributeNS(fullname.space, fullname.local);
  };
}
function attrConstant(name, value) {
  return function() {
    this.setAttribute(name, value);
  };
}
function attrConstantNS(fullname, value) {
  return function() {
    this.setAttributeNS(fullname.space, fullname.local, value);
  };
}
function attrFunction(name, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null)
      this.removeAttribute(name);
    else
      this.setAttribute(name, v);
  };
}
function attrFunctionNS(fullname, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null)
      this.removeAttributeNS(fullname.space, fullname.local);
    else
      this.setAttributeNS(fullname.space, fullname.local, v);
  };
}
function attr_default(name, value) {
  var fullname = namespace_default(name);
  if (arguments.length < 2) {
    var node = this.node();
    return fullname.local ? node.getAttributeNS(fullname.space, fullname.local) : node.getAttribute(fullname);
  }
  return this.each((value == null ? fullname.local ? attrRemoveNS : attrRemove : typeof value === "function" ? fullname.local ? attrFunctionNS : attrFunction : fullname.local ? attrConstantNS : attrConstant)(fullname, value));
}

// node_modules/d3-selection/src/window.js
function window_default(node) {
  return node.ownerDocument && node.ownerDocument.defaultView || node.document && node || node.defaultView;
}

// node_modules/d3-selection/src/selection/style.js
function styleRemove(name) {
  return function() {
    this.style.removeProperty(name);
  };
}
function styleConstant(name, value, priority) {
  return function() {
    this.style.setProperty(name, value, priority);
  };
}
function styleFunction(name, value, priority) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null)
      this.style.removeProperty(name);
    else
      this.style.setProperty(name, v, priority);
  };
}
function style_default(name, value, priority) {
  return arguments.length > 1 ? this.each((value == null ? styleRemove : typeof value === "function" ? styleFunction : styleConstant)(name, value, priority == null ? "" : priority)) : styleValue(this.node(), name);
}
function styleValue(node, name) {
  return node.style.getPropertyValue(name) || window_default(node).getComputedStyle(node, null).getPropertyValue(name);
}

// node_modules/d3-selection/src/selection/property.js
function propertyRemove(name) {
  return function() {
    delete this[name];
  };
}
function propertyConstant(name, value) {
  return function() {
    this[name] = value;
  };
}
function propertyFunction(name, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null)
      delete this[name];
    else
      this[name] = v;
  };
}
function property_default(name, value) {
  return arguments.length > 1 ? this.each((value == null ? propertyRemove : typeof value === "function" ? propertyFunction : propertyConstant)(name, value)) : this.node()[name];
}

// node_modules/d3-selection/src/selection/classed.js
function classArray(string) {
  return string.trim().split(/^|\s+/);
}
function classList(node) {
  return node.classList || new ClassList(node);
}
function ClassList(node) {
  this._node = node;
  this._names = classArray(node.getAttribute("class") || "");
}
ClassList.prototype = {
  add: function(name) {
    var i = this._names.indexOf(name);
    if (i < 0) {
      this._names.push(name);
      this._node.setAttribute("class", this._names.join(" "));
    }
  },
  remove: function(name) {
    var i = this._names.indexOf(name);
    if (i >= 0) {
      this._names.splice(i, 1);
      this._node.setAttribute("class", this._names.join(" "));
    }
  },
  contains: function(name) {
    return this._names.indexOf(name) >= 0;
  }
};
function classedAdd(node, names) {
  var list = classList(node), i = -1, n = names.length;
  while (++i < n)
    list.add(names[i]);
}
function classedRemove(node, names) {
  var list = classList(node), i = -1, n = names.length;
  while (++i < n)
    list.remove(names[i]);
}
function classedTrue(names) {
  return function() {
    classedAdd(this, names);
  };
}
function classedFalse(names) {
  return function() {
    classedRemove(this, names);
  };
}
function classedFunction(names, value) {
  return function() {
    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);
  };
}
function classed_default(name, value) {
  var names = classArray(name + "");
  if (arguments.length < 2) {
    var list = classList(this.node()), i = -1, n = names.length;
    while (++i < n)
      if (!list.contains(names[i]))
        return false;
    return true;
  }
  return this.each((typeof value === "function" ? classedFunction : value ? classedTrue : classedFalse)(names, value));
}

// node_modules/d3-selection/src/selection/text.js
function textRemove() {
  this.textContent = "";
}
function textConstant(value) {
  return function() {
    this.textContent = value;
  };
}
function textFunction(value) {
  return function() {
    var v = value.apply(this, arguments);
    this.textContent = v == null ? "" : v;
  };
}
function text_default(value) {
  return arguments.length ? this.each(value == null ? textRemove : (typeof value === "function" ? textFunction : textConstant)(value)) : this.node().textContent;
}

// node_modules/d3-selection/src/selection/html.js
function htmlRemove() {
  this.innerHTML = "";
}
function htmlConstant(value) {
  return function() {
    this.innerHTML = value;
  };
}
function htmlFunction(value) {
  return function() {
    var v = value.apply(this, arguments);
    this.innerHTML = v == null ? "" : v;
  };
}
function html_default(value) {
  return arguments.length ? this.each(value == null ? htmlRemove : (typeof value === "function" ? htmlFunction : htmlConstant)(value)) : this.node().innerHTML;
}

// node_modules/d3-selection/src/selection/raise.js
function raise() {
  if (this.nextSibling)
    this.parentNode.appendChild(this);
}
function raise_default() {
  return this.each(raise);
}

// node_modules/d3-selection/src/selection/lower.js
function lower() {
  if (this.previousSibling)
    this.parentNode.insertBefore(this, this.parentNode.firstChild);
}
function lower_default() {
  return this.each(lower);
}

// node_modules/d3-selection/src/selection/append.js
function append_default(name) {
  var create2 = typeof name === "function" ? name : creator_default(name);
  return this.select(function() {
    return this.appendChild(create2.apply(this, arguments));
  });
}

// node_modules/d3-selection/src/selection/insert.js
function constantNull() {
  return null;
}
function insert_default(name, before) {
  var create2 = typeof name === "function" ? name : creator_default(name), select = before == null ? constantNull : typeof before === "function" ? before : selector_default(before);
  return this.select(function() {
    return this.insertBefore(create2.apply(this, arguments), select.apply(this, arguments) || null);
  });
}

// node_modules/d3-selection/src/selection/remove.js
function remove() {
  var parent = this.parentNode;
  if (parent)
    parent.removeChild(this);
}
function remove_default() {
  return this.each(remove);
}

// node_modules/d3-selection/src/selection/clone.js
function selection_cloneShallow() {
  var clone = this.cloneNode(false), parent = this.parentNode;
  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;
}
function selection_cloneDeep() {
  var clone = this.cloneNode(true), parent = this.parentNode;
  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;
}
function clone_default(deep) {
  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);
}

// node_modules/d3-selection/src/selection/datum.js
function datum_default(value) {
  return arguments.length ? this.property("__data__", value) : this.node().__data__;
}

// node_modules/d3-selection/src/selection/on.js
function contextListener(listener) {
  return function(event) {
    listener.call(this, event, this.__data__);
  };
}
function parseTypenames2(typenames) {
  return typenames.trim().split(/^|\s+/).map(function(t) {
    var name = "", i = t.indexOf(".");
    if (i >= 0)
      name = t.slice(i + 1), t = t.slice(0, i);
    return { type: t, name };
  });
}
function onRemove(typename) {
  return function() {
    var on = this.__on;
    if (!on)
      return;
    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {
      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {
        this.removeEventListener(o.type, o.listener, o.options);
      } else {
        on[++i] = o;
      }
    }
    if (++i)
      on.length = i;
    else
      delete this.__on;
  };
}
function onAdd(typename, value, options) {
  return function() {
    var on = this.__on, o, listener = contextListener(value);
    if (on)
      for (var j = 0, m = on.length; j < m; ++j) {
        if ((o = on[j]).type === typename.type && o.name === typename.name) {
          this.removeEventListener(o.type, o.listener, o.options);
          this.addEventListener(o.type, o.listener = listener, o.options = options);
          o.value = value;
          return;
        }
      }
    this.addEventListener(typename.type, listener, options);
    o = { type: typename.type, name: typename.name, value, listener, options };
    if (!on)
      this.__on = [o];
    else
      on.push(o);
  };
}
function on_default(typename, value, options) {
  var typenames = parseTypenames2(typename + ""), i, n = typenames.length, t;
  if (arguments.length < 2) {
    var on = this.node().__on;
    if (on)
      for (var j = 0, m = on.length, o; j < m; ++j) {
        for (i = 0, o = on[j]; i < n; ++i) {
          if ((t = typenames[i]).type === o.type && t.name === o.name) {
            return o.value;
          }
        }
      }
    return;
  }
  on = value ? onAdd : onRemove;
  for (i = 0; i < n; ++i)
    this.each(on(typenames[i], value, options));
  return this;
}

// node_modules/d3-selection/src/selection/dispatch.js
function dispatchEvent(node, type2, params) {
  var window2 = window_default(node), event = window2.CustomEvent;
  if (typeof event === "function") {
    event = new event(type2, params);
  } else {
    event = window2.document.createEvent("Event");
    if (params)
      event.initEvent(type2, params.bubbles, params.cancelable), event.detail = params.detail;
    else
      event.initEvent(type2, false, false);
  }
  node.dispatchEvent(event);
}
function dispatchConstant(type2, params) {
  return function() {
    return dispatchEvent(this, type2, params);
  };
}
function dispatchFunction(type2, params) {
  return function() {
    return dispatchEvent(this, type2, params.apply(this, arguments));
  };
}
function dispatch_default2(type2, params) {
  return this.each((typeof params === "function" ? dispatchFunction : dispatchConstant)(type2, params));
}

// node_modules/d3-selection/src/selection/iterator.js
function* iterator_default() {
  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {
      if (node = group[i])
        yield node;
    }
  }
}

// node_modules/d3-selection/src/selection/index.js
var root = [null];
function Selection(groups, parents) {
  this._groups = groups;
  this._parents = parents;
}
function selection() {
  return new Selection([[document.documentElement]], root);
}
function selection_selection() {
  return this;
}
Selection.prototype = selection.prototype = {
  constructor: Selection,
  select: select_default,
  selectAll: selectAll_default,
  selectChild: selectChild_default,
  selectChildren: selectChildren_default,
  filter: filter_default,
  data: data_default,
  enter: enter_default,
  exit: exit_default,
  join: join_default,
  merge: merge_default,
  selection: selection_selection,
  order: order_default,
  sort: sort_default,
  call: call_default,
  nodes: nodes_default,
  node: node_default,
  size: size_default,
  empty: empty_default,
  each: each_default,
  attr: attr_default,
  style: style_default,
  property: property_default,
  classed: classed_default,
  text: text_default,
  html: html_default,
  raise: raise_default,
  lower: lower_default,
  append: append_default,
  insert: insert_default,
  remove: remove_default,
  clone: clone_default,
  datum: datum_default,
  on: on_default,
  dispatch: dispatch_default2,
  [Symbol.iterator]: iterator_default
};
var selection_default = selection;

// node_modules/d3-selection/src/select.js
function select_default2(selector) {
  return typeof selector === "string" ? new Selection([[document.querySelector(selector)]], [document.documentElement]) : new Selection([[selector]], root);
}

// node_modules/d3-color/src/define.js
function define_default(constructor, factory, prototype) {
  constructor.prototype = factory.prototype = prototype;
  prototype.constructor = constructor;
}
function extend(parent, definition) {
  var prototype = Object.create(parent.prototype);
  for (var key in definition)
    prototype[key] = definition[key];
  return prototype;
}

// node_modules/d3-color/src/color.js
function Color() {
}
var darker = 0.7;
var brighter = 1 / darker;
var reI = "\\s*([+-]?\\d+)\\s*";
var reN = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*";
var reP = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*";
var reHex = /^#([0-9a-f]{3,8})$/;
var reRgbInteger = new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`);
var reRgbPercent = new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`);
var reRgbaInteger = new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`);
var reRgbaPercent = new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`);
var reHslPercent = new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`);
var reHslaPercent = new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`);
var named = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
define_default(Color, color, {
  copy(channels) {
    return Object.assign(new this.constructor(), this, channels);
  },
  displayable() {
    return this.rgb().displayable();
  },
  hex: color_formatHex,
  // Deprecated! Use color.formatHex.
  formatHex: color_formatHex,
  formatHex8: color_formatHex8,
  formatHsl: color_formatHsl,
  formatRgb: color_formatRgb,
  toString: color_formatRgb
});
function color_formatHex() {
  return this.rgb().formatHex();
}
function color_formatHex8() {
  return this.rgb().formatHex8();
}
function color_formatHsl() {
  return hslConvert(this).formatHsl();
}
function color_formatRgb() {
  return this.rgb().formatRgb();
}
function color(format2) {
  var m, l;
  format2 = (format2 + "").trim().toLowerCase();
  return (m = reHex.exec(format2)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) : l === 3 ? new Rgb(m >> 8 & 15 | m >> 4 & 240, m >> 4 & 15 | m & 240, (m & 15) << 4 | m & 15, 1) : l === 8 ? rgba(m >> 24 & 255, m >> 16 & 255, m >> 8 & 255, (m & 255) / 255) : l === 4 ? rgba(m >> 12 & 15 | m >> 8 & 240, m >> 8 & 15 | m >> 4 & 240, m >> 4 & 15 | m & 240, ((m & 15) << 4 | m & 15) / 255) : null) : (m = reRgbInteger.exec(format2)) ? new Rgb(m[1], m[2], m[3], 1) : (m = reRgbPercent.exec(format2)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) : (m = reRgbaInteger.exec(format2)) ? rgba(m[1], m[2], m[3], m[4]) : (m = reRgbaPercent.exec(format2)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) : (m = reHslPercent.exec(format2)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) : (m = reHslaPercent.exec(format2)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) : named.hasOwnProperty(format2) ? rgbn(named[format2]) : format2 === "transparent" ? new Rgb(NaN, NaN, NaN, 0) : null;
}
function rgbn(n) {
  return new Rgb(n >> 16 & 255, n >> 8 & 255, n & 255, 1);
}
function rgba(r, g, b, a) {
  if (a <= 0)
    r = g = b = NaN;
  return new Rgb(r, g, b, a);
}
function rgbConvert(o) {
  if (!(o instanceof Color))
    o = color(o);
  if (!o)
    return new Rgb();
  o = o.rgb();
  return new Rgb(o.r, o.g, o.b, o.opacity);
}
function rgb(r, g, b, opacity) {
  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);
}
function Rgb(r, g, b, opacity) {
  this.r = +r;
  this.g = +g;
  this.b = +b;
  this.opacity = +opacity;
}
define_default(Rgb, rgb, extend(Color, {
  brighter(k) {
    k = k == null ? brighter : Math.pow(brighter, k);
    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
  },
  darker(k) {
    k = k == null ? darker : Math.pow(darker, k);
    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
  },
  rgb() {
    return this;
  },
  clamp() {
    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));
  },
  displayable() {
    return -0.5 <= this.r && this.r < 255.5 && (-0.5 <= this.g && this.g < 255.5) && (-0.5 <= this.b && this.b < 255.5) && (0 <= this.opacity && this.opacity <= 1);
  },
  hex: rgb_formatHex,
  // Deprecated! Use color.formatHex.
  formatHex: rgb_formatHex,
  formatHex8: rgb_formatHex8,
  formatRgb: rgb_formatRgb,
  toString: rgb_formatRgb
}));
function rgb_formatHex() {
  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;
}
function rgb_formatHex8() {
  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;
}
function rgb_formatRgb() {
  const a = clampa(this.opacity);
  return `${a === 1 ? "rgb(" : "rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? ")" : `, ${a})`}`;
}
function clampa(opacity) {
  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));
}
function clampi(value) {
  return Math.max(0, Math.min(255, Math.round(value) || 0));
}
function hex(value) {
  value = clampi(value);
  return (value < 16 ? "0" : "") + value.toString(16);
}
function hsla(h, s, l, a) {
  if (a <= 0)
    h = s = l = NaN;
  else if (l <= 0 || l >= 1)
    h = s = NaN;
  else if (s <= 0)
    h = NaN;
  return new Hsl(h, s, l, a);
}
function hslConvert(o) {
  if (o instanceof Hsl)
    return new Hsl(o.h, o.s, o.l, o.opacity);
  if (!(o instanceof Color))
    o = color(o);
  if (!o)
    return new Hsl();
  if (o instanceof Hsl)
    return o;
  o = o.rgb();
  var r = o.r / 255, g = o.g / 255, b = o.b / 255, min2 = Math.min(r, g, b), max2 = Math.max(r, g, b), h = NaN, s = max2 - min2, l = (max2 + min2) / 2;
  if (s) {
    if (r === max2)
      h = (g - b) / s + (g < b) * 6;
    else if (g === max2)
      h = (b - r) / s + 2;
    else
      h = (r - g) / s + 4;
    s /= l < 0.5 ? max2 + min2 : 2 - max2 - min2;
    h *= 60;
  } else {
    s = l > 0 && l < 1 ? 0 : h;
  }
  return new Hsl(h, s, l, o.opacity);
}
function hsl(h, s, l, opacity) {
  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);
}
function Hsl(h, s, l, opacity) {
  this.h = +h;
  this.s = +s;
  this.l = +l;
  this.opacity = +opacity;
}
define_default(Hsl, hsl, extend(Color, {
  brighter(k) {
    k = k == null ? brighter : Math.pow(brighter, k);
    return new Hsl(this.h, this.s, this.l * k, this.opacity);
  },
  darker(k) {
    k = k == null ? darker : Math.pow(darker, k);
    return new Hsl(this.h, this.s, this.l * k, this.opacity);
  },
  rgb() {
    var h = this.h % 360 + (this.h < 0) * 360, s = isNaN(h) || isNaN(this.s) ? 0 : this.s, l = this.l, m2 = l + (l < 0.5 ? l : 1 - l) * s, m1 = 2 * l - m2;
    return new Rgb(
      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),
      hsl2rgb(h, m1, m2),
      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),
      this.opacity
    );
  },
  clamp() {
    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));
  },
  displayable() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && (0 <= this.l && this.l <= 1) && (0 <= this.opacity && this.opacity <= 1);
  },
  formatHsl() {
    const a = clampa(this.opacity);
    return `${a === 1 ? "hsl(" : "hsla("}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? ")" : `, ${a})`}`;
  }
}));
function clamph(value) {
  value = (value || 0) % 360;
  return value < 0 ? value + 360 : value;
}
function clampt(value) {
  return Math.max(0, Math.min(1, value || 0));
}
function hsl2rgb(h, m1, m2) {
  return (h < 60 ? m1 + (m2 - m1) * h / 60 : h < 180 ? m2 : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60 : m1) * 255;
}

// node_modules/d3-interpolate/src/basis.js
function basis(t1, v0, v1, v2, v3) {
  var t2 = t1 * t1, t3 = t2 * t1;
  return ((1 - 3 * t1 + 3 * t2 - t3) * v0 + (4 - 6 * t2 + 3 * t3) * v1 + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2 + t3 * v3) / 6;
}
function basis_default(values) {
  var n = values.length - 1;
  return function(t) {
    var i = t <= 0 ? t = 0 : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n), v1 = values[i], v2 = values[i + 1], v0 = i > 0 ? values[i - 1] : 2 * v1 - v2, v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;
    return basis((t - i / n) * n, v0, v1, v2, v3);
  };
}

// node_modules/d3-interpolate/src/basisClosed.js
function basisClosed_default(values) {
  var n = values.length;
  return function(t) {
    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n), v0 = values[(i + n - 1) % n], v1 = values[i % n], v2 = values[(i + 1) % n], v3 = values[(i + 2) % n];
    return basis((t - i / n) * n, v0, v1, v2, v3);
  };
}

// node_modules/d3-interpolate/src/constant.js
var constant_default2 = (x) => () => x;

// node_modules/d3-interpolate/src/color.js
function linear(a, d) {
  return function(t) {
    return a + t * d;
  };
}
function exponential(a, b, y) {
  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {
    return Math.pow(a + t * b, y);
  };
}
function gamma(y) {
  return (y = +y) === 1 ? nogamma : function(a, b) {
    return b - a ? exponential(a, b, y) : constant_default2(isNaN(a) ? b : a);
  };
}
function nogamma(a, b) {
  var d = b - a;
  return d ? linear(a, d) : constant_default2(isNaN(a) ? b : a);
}

// node_modules/d3-interpolate/src/rgb.js
var rgb_default = function rgbGamma(y) {
  var color2 = gamma(y);
  function rgb2(start2, end) {
    var r = color2((start2 = rgb(start2)).r, (end = rgb(end)).r), g = color2(start2.g, end.g), b = color2(start2.b, end.b), opacity = nogamma(start2.opacity, end.opacity);
    return function(t) {
      start2.r = r(t);
      start2.g = g(t);
      start2.b = b(t);
      start2.opacity = opacity(t);
      return start2 + "";
    };
  }
  rgb2.gamma = rgbGamma;
  return rgb2;
}(1);
function rgbSpline(spline) {
  return function(colors) {
    var n = colors.length, r = new Array(n), g = new Array(n), b = new Array(n), i, color2;
    for (i = 0; i < n; ++i) {
      color2 = rgb(colors[i]);
      r[i] = color2.r || 0;
      g[i] = color2.g || 0;
      b[i] = color2.b || 0;
    }
    r = spline(r);
    g = spline(g);
    b = spline(b);
    color2.opacity = 1;
    return function(t) {
      color2.r = r(t);
      color2.g = g(t);
      color2.b = b(t);
      return color2 + "";
    };
  };
}
var rgbBasis = rgbSpline(basis_default);
var rgbBasisClosed = rgbSpline(basisClosed_default);

// node_modules/d3-interpolate/src/numberArray.js
function numberArray_default(a, b) {
  if (!b)
    b = [];
  var n = a ? Math.min(b.length, a.length) : 0, c = b.slice(), i;
  return function(t) {
    for (i = 0; i < n; ++i)
      c[i] = a[i] * (1 - t) + b[i] * t;
    return c;
  };
}
function isNumberArray(x) {
  return ArrayBuffer.isView(x) && !(x instanceof DataView);
}

// node_modules/d3-interpolate/src/array.js
function genericArray(a, b) {
  var nb = b ? b.length : 0, na = a ? Math.min(nb, a.length) : 0, x = new Array(na), c = new Array(nb), i;
  for (i = 0; i < na; ++i)
    x[i] = value_default(a[i], b[i]);
  for (; i < nb; ++i)
    c[i] = b[i];
  return function(t) {
    for (i = 0; i < na; ++i)
      c[i] = x[i](t);
    return c;
  };
}

// node_modules/d3-interpolate/src/date.js
function date_default(a, b) {
  var d = /* @__PURE__ */ new Date();
  return a = +a, b = +b, function(t) {
    return d.setTime(a * (1 - t) + b * t), d;
  };
}

// node_modules/d3-interpolate/src/number.js
function number_default(a, b) {
  return a = +a, b = +b, function(t) {
    return a * (1 - t) + b * t;
  };
}

// node_modules/d3-interpolate/src/object.js
function object_default(a, b) {
  var i = {}, c = {}, k;
  if (a === null || typeof a !== "object")
    a = {};
  if (b === null || typeof b !== "object")
    b = {};
  for (k in b) {
    if (k in a) {
      i[k] = value_default(a[k], b[k]);
    } else {
      c[k] = b[k];
    }
  }
  return function(t) {
    for (k in i)
      c[k] = i[k](t);
    return c;
  };
}

// node_modules/d3-interpolate/src/string.js
var reA = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
var reB = new RegExp(reA.source, "g");
function zero2(b) {
  return function() {
    return b;
  };
}
function one(b) {
  return function(t) {
    return b(t) + "";
  };
}
function string_default(a, b) {
  var bi = reA.lastIndex = reB.lastIndex = 0, am, bm, bs, i = -1, s = [], q = [];
  a = a + "", b = b + "";
  while ((am = reA.exec(a)) && (bm = reB.exec(b))) {
    if ((bs = bm.index) > bi) {
      bs = b.slice(bi, bs);
      if (s[i])
        s[i] += bs;
      else
        s[++i] = bs;
    }
    if ((am = am[0]) === (bm = bm[0])) {
      if (s[i])
        s[i] += bm;
      else
        s[++i] = bm;
    } else {
      s[++i] = null;
      q.push({ i, x: number_default(am, bm) });
    }
    bi = reB.lastIndex;
  }
  if (bi < b.length) {
    bs = b.slice(bi);
    if (s[i])
      s[i] += bs;
    else
      s[++i] = bs;
  }
  return s.length < 2 ? q[0] ? one(q[0].x) : zero2(b) : (b = q.length, function(t) {
    for (var i2 = 0, o; i2 < b; ++i2)
      s[(o = q[i2]).i] = o.x(t);
    return s.join("");
  });
}

// node_modules/d3-interpolate/src/value.js
function value_default(a, b) {
  var t = typeof b, c;
  return b == null || t === "boolean" ? constant_default2(b) : (t === "number" ? number_default : t === "string" ? (c = color(b)) ? (b = c, rgb_default) : string_default : b instanceof color ? rgb_default : b instanceof Date ? date_default : isNumberArray(b) ? numberArray_default : Array.isArray(b) ? genericArray : typeof b.valueOf !== "function" && typeof b.toString !== "function" || isNaN(b) ? object_default : number_default)(a, b);
}

// node_modules/d3-interpolate/src/round.js
function round_default(a, b) {
  return a = +a, b = +b, function(t) {
    return Math.round(a * (1 - t) + b * t);
  };
}

// node_modules/d3-interpolate/src/transform/decompose.js
var degrees = 180 / Math.PI;
var identity = {
  translateX: 0,
  translateY: 0,
  rotate: 0,
  skewX: 0,
  scaleX: 1,
  scaleY: 1
};
function decompose_default(a, b, c, d, e, f) {
  var scaleX, scaleY, skewX;
  if (scaleX = Math.sqrt(a * a + b * b))
    a /= scaleX, b /= scaleX;
  if (skewX = a * c + b * d)
    c -= a * skewX, d -= b * skewX;
  if (scaleY = Math.sqrt(c * c + d * d))
    c /= scaleY, d /= scaleY, skewX /= scaleY;
  if (a * d < b * c)
    a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;
  return {
    translateX: e,
    translateY: f,
    rotate: Math.atan2(b, a) * degrees,
    skewX: Math.atan(skewX) * degrees,
    scaleX,
    scaleY
  };
}

// node_modules/d3-interpolate/src/transform/parse.js
var svgNode;
function parseCss(value) {
  const m = new (typeof DOMMatrix === "function" ? DOMMatrix : WebKitCSSMatrix)(value + "");
  return m.isIdentity ? identity : decompose_default(m.a, m.b, m.c, m.d, m.e, m.f);
}
function parseSvg(value) {
  if (value == null)
    return identity;
  if (!svgNode)
    svgNode = document.createElementNS("http://www.w3.org/2000/svg", "g");
  svgNode.setAttribute("transform", value);
  if (!(value = svgNode.transform.baseVal.consolidate()))
    return identity;
  value = value.matrix;
  return decompose_default(value.a, value.b, value.c, value.d, value.e, value.f);
}

// node_modules/d3-interpolate/src/transform/index.js
function interpolateTransform(parse, pxComma, pxParen, degParen) {
  function pop(s) {
    return s.length ? s.pop() + " " : "";
  }
  function translate(xa, ya, xb, yb, s, q) {
    if (xa !== xb || ya !== yb) {
      var i = s.push("translate(", null, pxComma, null, pxParen);
      q.push({ i: i - 4, x: number_default(xa, xb) }, { i: i - 2, x: number_default(ya, yb) });
    } else if (xb || yb) {
      s.push("translate(" + xb + pxComma + yb + pxParen);
    }
  }
  function rotate(a, b, s, q) {
    if (a !== b) {
      if (a - b > 180)
        b += 360;
      else if (b - a > 180)
        a += 360;
      q.push({ i: s.push(pop(s) + "rotate(", null, degParen) - 2, x: number_default(a, b) });
    } else if (b) {
      s.push(pop(s) + "rotate(" + b + degParen);
    }
  }
  function skewX(a, b, s, q) {
    if (a !== b) {
      q.push({ i: s.push(pop(s) + "skewX(", null, degParen) - 2, x: number_default(a, b) });
    } else if (b) {
      s.push(pop(s) + "skewX(" + b + degParen);
    }
  }
  function scale(xa, ya, xb, yb, s, q) {
    if (xa !== xb || ya !== yb) {
      var i = s.push(pop(s) + "scale(", null, ",", null, ")");
      q.push({ i: i - 4, x: number_default(xa, xb) }, { i: i - 2, x: number_default(ya, yb) });
    } else if (xb !== 1 || yb !== 1) {
      s.push(pop(s) + "scale(" + xb + "," + yb + ")");
    }
  }
  return function(a, b) {
    var s = [], q = [];
    a = parse(a), b = parse(b);
    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);
    rotate(a.rotate, b.rotate, s, q);
    skewX(a.skewX, b.skewX, s, q);
    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);
    a = b = null;
    return function(t) {
      var i = -1, n = q.length, o;
      while (++i < n)
        s[(o = q[i]).i] = o.x(t);
      return s.join("");
    };
  };
}
var interpolateTransformCss = interpolateTransform(parseCss, "px, ", "px)", "deg)");
var interpolateTransformSvg = interpolateTransform(parseSvg, ", ", ")", ")");

// node_modules/d3-timer/src/timer.js
var frame = 0;
var timeout = 0;
var interval = 0;
var pokeDelay = 1e3;
var taskHead;
var taskTail;
var clockLast = 0;
var clockNow = 0;
var clockSkew = 0;
var clock = typeof performance === "object" && performance.now ? performance : Date;
var setFrame = typeof window === "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) {
  setTimeout(f, 17);
};
function now() {
  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);
}
function clearNow() {
  clockNow = 0;
}
function Timer() {
  this._call = this._time = this._next = null;
}
Timer.prototype = timer.prototype = {
  constructor: Timer,
  restart: function(callback, delay, time) {
    if (typeof callback !== "function")
      throw new TypeError("callback is not a function");
    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);
    if (!this._next && taskTail !== this) {
      if (taskTail)
        taskTail._next = this;
      else
        taskHead = this;
      taskTail = this;
    }
    this._call = callback;
    this._time = time;
    sleep();
  },
  stop: function() {
    if (this._call) {
      this._call = null;
      this._time = Infinity;
      sleep();
    }
  }
};
function timer(callback, delay, time) {
  var t = new Timer();
  t.restart(callback, delay, time);
  return t;
}
function timerFlush() {
  now();
  ++frame;
  var t = taskHead, e;
  while (t) {
    if ((e = clockNow - t._time) >= 0)
      t._call.call(void 0, e);
    t = t._next;
  }
  --frame;
}
function wake() {
  clockNow = (clockLast = clock.now()) + clockSkew;
  frame = timeout = 0;
  try {
    timerFlush();
  } finally {
    frame = 0;
    nap();
    clockNow = 0;
  }
}
function poke() {
  var now2 = clock.now(), delay = now2 - clockLast;
  if (delay > pokeDelay)
    clockSkew -= delay, clockLast = now2;
}
function nap() {
  var t0, t1 = taskHead, t2, time = Infinity;
  while (t1) {
    if (t1._call) {
      if (time > t1._time)
        time = t1._time;
      t0 = t1, t1 = t1._next;
    } else {
      t2 = t1._next, t1._next = null;
      t1 = t0 ? t0._next = t2 : taskHead = t2;
    }
  }
  taskTail = t0;
  sleep(time);
}
function sleep(time) {
  if (frame)
    return;
  if (timeout)
    timeout = clearTimeout(timeout);
  var delay = time - clockNow;
  if (delay > 24) {
    if (time < Infinity)
      timeout = setTimeout(wake, time - clock.now() - clockSkew);
    if (interval)
      interval = clearInterval(interval);
  } else {
    if (!interval)
      clockLast = clock.now(), interval = setInterval(poke, pokeDelay);
    frame = 1, setFrame(wake);
  }
}

// node_modules/d3-timer/src/timeout.js
function timeout_default(callback, delay, time) {
  var t = new Timer();
  delay = delay == null ? 0 : +delay;
  t.restart((elapsed) => {
    t.stop();
    callback(elapsed + delay);
  }, delay, time);
  return t;
}

// node_modules/d3-transition/src/transition/schedule.js
var emptyOn = dispatch_default("start", "end", "cancel", "interrupt");
var emptyTween = [];
var CREATED = 0;
var SCHEDULED = 1;
var STARTING = 2;
var STARTED = 3;
var RUNNING = 4;
var ENDING = 5;
var ENDED = 6;
function schedule_default(node, name, id2, index, group, timing) {
  var schedules = node.__transition;
  if (!schedules)
    node.__transition = {};
  else if (id2 in schedules)
    return;
  create(node, id2, {
    name,
    index,
    // For context during callback.
    group,
    // For context during callback.
    on: emptyOn,
    tween: emptyTween,
    time: timing.time,
    delay: timing.delay,
    duration: timing.duration,
    ease: timing.ease,
    timer: null,
    state: CREATED
  });
}
function init(node, id2) {
  var schedule = get2(node, id2);
  if (schedule.state > CREATED)
    throw new Error("too late; already scheduled");
  return schedule;
}
function set2(node, id2) {
  var schedule = get2(node, id2);
  if (schedule.state > STARTED)
    throw new Error("too late; already running");
  return schedule;
}
function get2(node, id2) {
  var schedule = node.__transition;
  if (!schedule || !(schedule = schedule[id2]))
    throw new Error("transition not found");
  return schedule;
}
function create(node, id2, self) {
  var schedules = node.__transition, tween;
  schedules[id2] = self;
  self.timer = timer(schedule, 0, self.time);
  function schedule(elapsed) {
    self.state = SCHEDULED;
    self.timer.restart(start2, self.delay, self.time);
    if (self.delay <= elapsed)
      start2(elapsed - self.delay);
  }
  function start2(elapsed) {
    var i, j, n, o;
    if (self.state !== SCHEDULED)
      return stop();
    for (i in schedules) {
      o = schedules[i];
      if (o.name !== self.name)
        continue;
      if (o.state === STARTED)
        return timeout_default(start2);
      if (o.state === RUNNING) {
        o.state = ENDED;
        o.timer.stop();
        o.on.call("interrupt", node, node.__data__, o.index, o.group);
        delete schedules[i];
      } else if (+i < id2) {
        o.state = ENDED;
        o.timer.stop();
        o.on.call("cancel", node, node.__data__, o.index, o.group);
        delete schedules[i];
      }
    }
    timeout_default(function() {
      if (self.state === STARTED) {
        self.state = RUNNING;
        self.timer.restart(tick, self.delay, self.time);
        tick(elapsed);
      }
    });
    self.state = STARTING;
    self.on.call("start", node, node.__data__, self.index, self.group);
    if (self.state !== STARTING)
      return;
    self.state = STARTED;
    tween = new Array(n = self.tween.length);
    for (i = 0, j = -1; i < n; ++i) {
      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {
        tween[++j] = o;
      }
    }
    tween.length = j + 1;
  }
  function tick(elapsed) {
    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1), i = -1, n = tween.length;
    while (++i < n) {
      tween[i].call(node, t);
    }
    if (self.state === ENDING) {
      self.on.call("end", node, node.__data__, self.index, self.group);
      stop();
    }
  }
  function stop() {
    self.state = ENDED;
    self.timer.stop();
    delete schedules[id2];
    for (var i in schedules)
      return;
    delete node.__transition;
  }
}

// node_modules/d3-transition/src/interrupt.js
function interrupt_default(node, name) {
  var schedules = node.__transition, schedule, active, empty2 = true, i;
  if (!schedules)
    return;
  name = name == null ? null : name + "";
  for (i in schedules) {
    if ((schedule = schedules[i]).name !== name) {
      empty2 = false;
      continue;
    }
    active = schedule.state > STARTING && schedule.state < ENDING;
    schedule.state = ENDED;
    schedule.timer.stop();
    schedule.on.call(active ? "interrupt" : "cancel", node, node.__data__, schedule.index, schedule.group);
    delete schedules[i];
  }
  if (empty2)
    delete node.__transition;
}

// node_modules/d3-transition/src/selection/interrupt.js
function interrupt_default2(name) {
  return this.each(function() {
    interrupt_default(this, name);
  });
}

// node_modules/d3-transition/src/transition/tween.js
function tweenRemove(id2, name) {
  var tween0, tween1;
  return function() {
    var schedule = set2(this, id2), tween = schedule.tween;
    if (tween !== tween0) {
      tween1 = tween0 = tween;
      for (var i = 0, n = tween1.length; i < n; ++i) {
        if (tween1[i].name === name) {
          tween1 = tween1.slice();
          tween1.splice(i, 1);
          break;
        }
      }
    }
    schedule.tween = tween1;
  };
}
function tweenFunction(id2, name, value) {
  var tween0, tween1;
  if (typeof value !== "function")
    throw new Error();
  return function() {
    var schedule = set2(this, id2), tween = schedule.tween;
    if (tween !== tween0) {
      tween1 = (tween0 = tween).slice();
      for (var t = { name, value }, i = 0, n = tween1.length; i < n; ++i) {
        if (tween1[i].name === name) {
          tween1[i] = t;
          break;
        }
      }
      if (i === n)
        tween1.push(t);
    }
    schedule.tween = tween1;
  };
}
function tween_default(name, value) {
  var id2 = this._id;
  name += "";
  if (arguments.length < 2) {
    var tween = get2(this.node(), id2).tween;
    for (var i = 0, n = tween.length, t; i < n; ++i) {
      if ((t = tween[i]).name === name) {
        return t.value;
      }
    }
    return null;
  }
  return this.each((value == null ? tweenRemove : tweenFunction)(id2, name, value));
}
function tweenValue(transition2, name, value) {
  var id2 = transition2._id;
  transition2.each(function() {
    var schedule = set2(this, id2);
    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);
  });
  return function(node) {
    return get2(node, id2).value[name];
  };
}

// node_modules/d3-transition/src/transition/interpolate.js
function interpolate_default(a, b) {
  var c;
  return (typeof b === "number" ? number_default : b instanceof color ? rgb_default : (c = color(b)) ? (b = c, rgb_default) : string_default)(a, b);
}

// node_modules/d3-transition/src/transition/attr.js
function attrRemove2(name) {
  return function() {
    this.removeAttribute(name);
  };
}
function attrRemoveNS2(fullname) {
  return function() {
    this.removeAttributeNS(fullname.space, fullname.local);
  };
}
function attrConstant2(name, interpolate, value1) {
  var string00, string1 = value1 + "", interpolate0;
  return function() {
    var string0 = this.getAttribute(name);
    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);
  };
}
function attrConstantNS2(fullname, interpolate, value1) {
  var string00, string1 = value1 + "", interpolate0;
  return function() {
    var string0 = this.getAttributeNS(fullname.space, fullname.local);
    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);
  };
}
function attrFunction2(name, interpolate, value) {
  var string00, string10, interpolate0;
  return function() {
    var string0, value1 = value(this), string1;
    if (value1 == null)
      return void this.removeAttribute(name);
    string0 = this.getAttribute(name);
    string1 = value1 + "";
    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));
  };
}
function attrFunctionNS2(fullname, interpolate, value) {
  var string00, string10, interpolate0;
  return function() {
    var string0, value1 = value(this), string1;
    if (value1 == null)
      return void this.removeAttributeNS(fullname.space, fullname.local);
    string0 = this.getAttributeNS(fullname.space, fullname.local);
    string1 = value1 + "";
    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));
  };
}
function attr_default2(name, value) {
  var fullname = namespace_default(name), i = fullname === "transform" ? interpolateTransformSvg : interpolate_default;
  return this.attrTween(name, typeof value === "function" ? (fullname.local ? attrFunctionNS2 : attrFunction2)(fullname, i, tweenValue(this, "attr." + name, value)) : value == null ? (fullname.local ? attrRemoveNS2 : attrRemove2)(fullname) : (fullname.local ? attrConstantNS2 : attrConstant2)(fullname, i, value));
}

// node_modules/d3-transition/src/transition/attrTween.js
function attrInterpolate(name, i) {
  return function(t) {
    this.setAttribute(name, i.call(this, t));
  };
}
function attrInterpolateNS(fullname, i) {
  return function(t) {
    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));
  };
}
function attrTweenNS(fullname, value) {
  var t0, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0)
      t0 = (i0 = i) && attrInterpolateNS(fullname, i);
    return t0;
  }
  tween._value = value;
  return tween;
}
function attrTween(name, value) {
  var t0, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0)
      t0 = (i0 = i) && attrInterpolate(name, i);
    return t0;
  }
  tween._value = value;
  return tween;
}
function attrTween_default(name, value) {
  var key = "attr." + name;
  if (arguments.length < 2)
    return (key = this.tween(key)) && key._value;
  if (value == null)
    return this.tween(key, null);
  if (typeof value !== "function")
    throw new Error();
  var fullname = namespace_default(name);
  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));
}

// node_modules/d3-transition/src/transition/delay.js
function delayFunction(id2, value) {
  return function() {
    init(this, id2).delay = +value.apply(this, arguments);
  };
}
function delayConstant(id2, value) {
  return value = +value, function() {
    init(this, id2).delay = value;
  };
}
function delay_default(value) {
  var id2 = this._id;
  return arguments.length ? this.each((typeof value === "function" ? delayFunction : delayConstant)(id2, value)) : get2(this.node(), id2).delay;
}

// node_modules/d3-transition/src/transition/duration.js
function durationFunction(id2, value) {
  return function() {
    set2(this, id2).duration = +value.apply(this, arguments);
  };
}
function durationConstant(id2, value) {
  return value = +value, function() {
    set2(this, id2).duration = value;
  };
}
function duration_default(value) {
  var id2 = this._id;
  return arguments.length ? this.each((typeof value === "function" ? durationFunction : durationConstant)(id2, value)) : get2(this.node(), id2).duration;
}

// node_modules/d3-transition/src/transition/ease.js
function easeConstant(id2, value) {
  if (typeof value !== "function")
    throw new Error();
  return function() {
    set2(this, id2).ease = value;
  };
}
function ease_default(value) {
  var id2 = this._id;
  return arguments.length ? this.each(easeConstant(id2, value)) : get2(this.node(), id2).ease;
}

// node_modules/d3-transition/src/transition/easeVarying.js
function easeVarying(id2, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (typeof v !== "function")
      throw new Error();
    set2(this, id2).ease = v;
  };
}
function easeVarying_default(value) {
  if (typeof value !== "function")
    throw new Error();
  return this.each(easeVarying(this._id, value));
}

// node_modules/d3-transition/src/transition/filter.js
function filter_default2(match) {
  if (typeof match !== "function")
    match = matcher_default(match);
  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {
      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {
        subgroup.push(node);
      }
    }
  }
  return new Transition(subgroups, this._parents, this._name, this._id);
}

// node_modules/d3-transition/src/transition/merge.js
function merge_default2(transition2) {
  if (transition2._id !== this._id)
    throw new Error();
  for (var groups0 = this._groups, groups1 = transition2._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {
    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group0[i] || group1[i]) {
        merge[i] = node;
      }
    }
  }
  for (; j < m0; ++j) {
    merges[j] = groups0[j];
  }
  return new Transition(merges, this._parents, this._name, this._id);
}

// node_modules/d3-transition/src/transition/on.js
function start(name) {
  return (name + "").trim().split(/^|\s+/).every(function(t) {
    var i = t.indexOf(".");
    if (i >= 0)
      t = t.slice(0, i);
    return !t || t === "start";
  });
}
function onFunction(id2, name, listener) {
  var on0, on1, sit = start(name) ? init : set2;
  return function() {
    var schedule = sit(this, id2), on = schedule.on;
    if (on !== on0)
      (on1 = (on0 = on).copy()).on(name, listener);
    schedule.on = on1;
  };
}
function on_default2(name, listener) {
  var id2 = this._id;
  return arguments.length < 2 ? get2(this.node(), id2).on.on(name) : this.each(onFunction(id2, name, listener));
}

// node_modules/d3-transition/src/transition/remove.js
function removeFunction(id2) {
  return function() {
    var parent = this.parentNode;
    for (var i in this.__transition)
      if (+i !== id2)
        return;
    if (parent)
      parent.removeChild(this);
  };
}
function remove_default2() {
  return this.on("end.remove", removeFunction(this._id));
}

// node_modules/d3-transition/src/transition/select.js
function select_default3(select) {
  var name = this._name, id2 = this._id;
  if (typeof select !== "function")
    select = selector_default(select);
  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {
      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {
        if ("__data__" in node)
          subnode.__data__ = node.__data__;
        subgroup[i] = subnode;
        schedule_default(subgroup[i], name, id2, i, subgroup, get2(node, id2));
      }
    }
  }
  return new Transition(subgroups, this._parents, name, id2);
}

// node_modules/d3-transition/src/transition/selectAll.js
function selectAll_default2(select) {
  var name = this._name, id2 = this._id;
  if (typeof select !== "function")
    select = selectorAll_default(select);
  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        for (var children2 = select.call(node, node.__data__, i, group), child, inherit2 = get2(node, id2), k = 0, l = children2.length; k < l; ++k) {
          if (child = children2[k]) {
            schedule_default(child, name, id2, k, children2, inherit2);
          }
        }
        subgroups.push(children2);
        parents.push(node);
      }
    }
  }
  return new Transition(subgroups, parents, name, id2);
}

// node_modules/d3-transition/src/transition/selection.js
var Selection2 = selection_default.prototype.constructor;
function selection_default2() {
  return new Selection2(this._groups, this._parents);
}

// node_modules/d3-transition/src/transition/style.js
function styleNull(name, interpolate) {
  var string00, string10, interpolate0;
  return function() {
    var string0 = styleValue(this, name), string1 = (this.style.removeProperty(name), styleValue(this, name));
    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : interpolate0 = interpolate(string00 = string0, string10 = string1);
  };
}
function styleRemove2(name) {
  return function() {
    this.style.removeProperty(name);
  };
}
function styleConstant2(name, interpolate, value1) {
  var string00, string1 = value1 + "", interpolate0;
  return function() {
    var string0 = styleValue(this, name);
    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);
  };
}
function styleFunction2(name, interpolate, value) {
  var string00, string10, interpolate0;
  return function() {
    var string0 = styleValue(this, name), value1 = value(this), string1 = value1 + "";
    if (value1 == null)
      string1 = value1 = (this.style.removeProperty(name), styleValue(this, name));
    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));
  };
}
function styleMaybeRemove(id2, name) {
  var on0, on1, listener0, key = "style." + name, event = "end." + key, remove2;
  return function() {
    var schedule = set2(this, id2), on = schedule.on, listener = schedule.value[key] == null ? remove2 || (remove2 = styleRemove2(name)) : void 0;
    if (on !== on0 || listener0 !== listener)
      (on1 = (on0 = on).copy()).on(event, listener0 = listener);
    schedule.on = on1;
  };
}
function style_default2(name, value, priority) {
  var i = (name += "") === "transform" ? interpolateTransformCss : interpolate_default;
  return value == null ? this.styleTween(name, styleNull(name, i)).on("end.style." + name, styleRemove2(name)) : typeof value === "function" ? this.styleTween(name, styleFunction2(name, i, tweenValue(this, "style." + name, value))).each(styleMaybeRemove(this._id, name)) : this.styleTween(name, styleConstant2(name, i, value), priority).on("end.style." + name, null);
}

// node_modules/d3-transition/src/transition/styleTween.js
function styleInterpolate(name, i, priority) {
  return function(t) {
    this.style.setProperty(name, i.call(this, t), priority);
  };
}
function styleTween(name, value, priority) {
  var t, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0)
      t = (i0 = i) && styleInterpolate(name, i, priority);
    return t;
  }
  tween._value = value;
  return tween;
}
function styleTween_default(name, value, priority) {
  var key = "style." + (name += "");
  if (arguments.length < 2)
    return (key = this.tween(key)) && key._value;
  if (value == null)
    return this.tween(key, null);
  if (typeof value !== "function")
    throw new Error();
  return this.tween(key, styleTween(name, value, priority == null ? "" : priority));
}

// node_modules/d3-transition/src/transition/text.js
function textConstant2(value) {
  return function() {
    this.textContent = value;
  };
}
function textFunction2(value) {
  return function() {
    var value1 = value(this);
    this.textContent = value1 == null ? "" : value1;
  };
}
function text_default2(value) {
  return this.tween("text", typeof value === "function" ? textFunction2(tweenValue(this, "text", value)) : textConstant2(value == null ? "" : value + ""));
}

// node_modules/d3-transition/src/transition/textTween.js
function textInterpolate(i) {
  return function(t) {
    this.textContent = i.call(this, t);
  };
}
function textTween(value) {
  var t0, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0)
      t0 = (i0 = i) && textInterpolate(i);
    return t0;
  }
  tween._value = value;
  return tween;
}
function textTween_default(value) {
  var key = "text";
  if (arguments.length < 1)
    return (key = this.tween(key)) && key._value;
  if (value == null)
    return this.tween(key, null);
  if (typeof value !== "function")
    throw new Error();
  return this.tween(key, textTween(value));
}

// node_modules/d3-transition/src/transition/transition.js
function transition_default() {
  var name = this._name, id0 = this._id, id1 = newId();
  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        var inherit2 = get2(node, id0);
        schedule_default(node, name, id1, i, group, {
          time: inherit2.time + inherit2.delay + inherit2.duration,
          delay: 0,
          duration: inherit2.duration,
          ease: inherit2.ease
        });
      }
    }
  }
  return new Transition(groups, this._parents, name, id1);
}

// node_modules/d3-transition/src/transition/end.js
function end_default() {
  var on0, on1, that = this, id2 = that._id, size = that.size();
  return new Promise(function(resolve, reject) {
    var cancel = { value: reject }, end = { value: function() {
      if (--size === 0)
        resolve();
    } };
    that.each(function() {
      var schedule = set2(this, id2), on = schedule.on;
      if (on !== on0) {
        on1 = (on0 = on).copy();
        on1._.cancel.push(cancel);
        on1._.interrupt.push(cancel);
        on1._.end.push(end);
      }
      schedule.on = on1;
    });
    if (size === 0)
      resolve();
  });
}

// node_modules/d3-transition/src/transition/index.js
var id = 0;
function Transition(groups, parents, name, id2) {
  this._groups = groups;
  this._parents = parents;
  this._name = name;
  this._id = id2;
}
function transition(name) {
  return selection_default().transition(name);
}
function newId() {
  return ++id;
}
var selection_prototype = selection_default.prototype;
Transition.prototype = transition.prototype = {
  constructor: Transition,
  select: select_default3,
  selectAll: selectAll_default2,
  selectChild: selection_prototype.selectChild,
  selectChildren: selection_prototype.selectChildren,
  filter: filter_default2,
  merge: merge_default2,
  selection: selection_default2,
  transition: transition_default,
  call: selection_prototype.call,
  nodes: selection_prototype.nodes,
  node: selection_prototype.node,
  size: selection_prototype.size,
  empty: selection_prototype.empty,
  each: selection_prototype.each,
  on: on_default2,
  attr: attr_default2,
  attrTween: attrTween_default,
  style: style_default2,
  styleTween: styleTween_default,
  text: text_default2,
  textTween: textTween_default,
  remove: remove_default2,
  tween: tween_default,
  delay: delay_default,
  duration: duration_default,
  ease: ease_default,
  easeVarying: easeVarying_default,
  end: end_default,
  [Symbol.iterator]: selection_prototype[Symbol.iterator]
};

// node_modules/d3-ease/src/cubic.js
function cubicInOut(t) {
  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;
}

// node_modules/d3-transition/src/selection/transition.js
var defaultTiming = {
  time: null,
  // Set on use.
  delay: 0,
  duration: 250,
  ease: cubicInOut
};
function inherit(node, id2) {
  var timing;
  while (!(timing = node.__transition) || !(timing = timing[id2])) {
    if (!(node = node.parentNode)) {
      throw new Error(`transition ${id2} not found`);
    }
  }
  return timing;
}
function transition_default2(name) {
  var id2, timing;
  if (name instanceof Transition) {
    id2 = name._id, name = name._name;
  } else {
    id2 = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + "";
  }
  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        schedule_default(node, name, id2, i, group, timing || inherit(node, id2));
      }
    }
  }
  return new Transition(groups, this._parents, name, id2);
}

// node_modules/d3-transition/src/selection/index.js
selection_default.prototype.interrupt = interrupt_default2;
selection_default.prototype.transition = transition_default2;

// node_modules/d3-brush/src/brush.js
var { abs, max, min } = Math;
function number1(e) {
  return [+e[0], +e[1]];
}
function number22(e) {
  return [number1(e[0]), number1(e[1])];
}
var X = {
  name: "x",
  handles: ["w", "e"].map(type),
  input: function(x, e) {
    return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]];
  },
  output: function(xy) {
    return xy && [xy[0][0], xy[1][0]];
  }
};
var Y = {
  name: "y",
  handles: ["n", "s"].map(type),
  input: function(y, e) {
    return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]];
  },
  output: function(xy) {
    return xy && [xy[0][1], xy[1][1]];
  }
};
var XY = {
  name: "xy",
  handles: ["n", "w", "e", "s", "nw", "ne", "sw", "se"].map(type),
  input: function(xy) {
    return xy == null ? null : number22(xy);
  },
  output: function(xy) {
    return xy;
  }
};
function type(t) {
  return { type: t };
}

// node_modules/d3-format/src/formatDecimal.js
function formatDecimal_default(x) {
  return Math.abs(x = Math.round(x)) >= 1e21 ? x.toLocaleString("en").replace(/,/g, "") : x.toString(10);
}
function formatDecimalParts(x, p) {
  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf("e")) < 0)
    return null;
  var i, coefficient = x.slice(0, i);
  return [
    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,
    +x.slice(i + 1)
  ];
}

// node_modules/d3-format/src/exponent.js
function exponent_default(x) {
  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;
}

// node_modules/d3-format/src/formatGroup.js
function formatGroup_default(grouping, thousands) {
  return function(value, width) {
    var i = value.length, t = [], j = 0, g = grouping[0], length = 0;
    while (i > 0 && g > 0) {
      if (length + g + 1 > width)
        g = Math.max(1, width - length);
      t.push(value.substring(i -= g, i + g));
      if ((length += g + 1) > width)
        break;
      g = grouping[j = (j + 1) % grouping.length];
    }
    return t.reverse().join(thousands);
  };
}

// node_modules/d3-format/src/formatNumerals.js
function formatNumerals_default(numerals) {
  return function(value) {
    return value.replace(/[0-9]/g, function(i) {
      return numerals[+i];
    });
  };
}

// node_modules/d3-format/src/formatSpecifier.js
var re = /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;
function formatSpecifier(specifier) {
  if (!(match = re.exec(specifier)))
    throw new Error("invalid format: " + specifier);
  var match;
  return new FormatSpecifier({
    fill: match[1],
    align: match[2],
    sign: match[3],
    symbol: match[4],
    zero: match[5],
    width: match[6],
    comma: match[7],
    precision: match[8] && match[8].slice(1),
    trim: match[9],
    type: match[10]
  });
}
formatSpecifier.prototype = FormatSpecifier.prototype;
function FormatSpecifier(specifier) {
  this.fill = specifier.fill === void 0 ? " " : specifier.fill + "";
  this.align = specifier.align === void 0 ? ">" : specifier.align + "";
  this.sign = specifier.sign === void 0 ? "-" : specifier.sign + "";
  this.symbol = specifier.symbol === void 0 ? "" : specifier.symbol + "";
  this.zero = !!specifier.zero;
  this.width = specifier.width === void 0 ? void 0 : +specifier.width;
  this.comma = !!specifier.comma;
  this.precision = specifier.precision === void 0 ? void 0 : +specifier.precision;
  this.trim = !!specifier.trim;
  this.type = specifier.type === void 0 ? "" : specifier.type + "";
}
FormatSpecifier.prototype.toString = function() {
  return this.fill + this.align + this.sign + this.symbol + (this.zero ? "0" : "") + (this.width === void 0 ? "" : Math.max(1, this.width | 0)) + (this.comma ? "," : "") + (this.precision === void 0 ? "" : "." + Math.max(0, this.precision | 0)) + (this.trim ? "~" : "") + this.type;
};

// node_modules/d3-format/src/formatTrim.js
function formatTrim_default(s) {
  out:
    for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {
      switch (s[i]) {
        case ".":
          i0 = i1 = i;
          break;
        case "0":
          if (i0 === 0)
            i0 = i;
          i1 = i;
          break;
        default:
          if (!+s[i])
            break out;
          if (i0 > 0)
            i0 = 0;
          break;
      }
    }
  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;
}

// node_modules/d3-format/src/formatPrefixAuto.js
var prefixExponent;
function formatPrefixAuto_default(x, p) {
  var d = formatDecimalParts(x, p);
  if (!d)
    return x + "";
  var coefficient = d[0], exponent = d[1], i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1, n = coefficient.length;
  return i === n ? coefficient : i > n ? coefficient + new Array(i - n + 1).join("0") : i > 0 ? coefficient.slice(0, i) + "." + coefficient.slice(i) : "0." + new Array(1 - i).join("0") + formatDecimalParts(x, Math.max(0, p + i - 1))[0];
}

// node_modules/d3-format/src/formatRounded.js
function formatRounded_default(x, p) {
  var d = formatDecimalParts(x, p);
  if (!d)
    return x + "";
  var coefficient = d[0], exponent = d[1];
  return exponent < 0 ? "0." + new Array(-exponent).join("0") + coefficient : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + "." + coefficient.slice(exponent + 1) : coefficient + new Array(exponent - coefficient.length + 2).join("0");
}

// node_modules/d3-format/src/formatTypes.js
var formatTypes_default = {
  "%": (x, p) => (x * 100).toFixed(p),
  "b": (x) => Math.round(x).toString(2),
  "c": (x) => x + "",
  "d": formatDecimal_default,
  "e": (x, p) => x.toExponential(p),
  "f": (x, p) => x.toFixed(p),
  "g": (x, p) => x.toPrecision(p),
  "o": (x) => Math.round(x).toString(8),
  "p": (x, p) => formatRounded_default(x * 100, p),
  "r": formatRounded_default,
  "s": formatPrefixAuto_default,
  "X": (x) => Math.round(x).toString(16).toUpperCase(),
  "x": (x) => Math.round(x).toString(16)
};

// node_modules/d3-format/src/identity.js
function identity_default2(x) {
  return x;
}

// node_modules/d3-format/src/locale.js
var map = Array.prototype.map;
var prefixes = ["y", "z", "a", "f", "p", "n", "\xB5", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"];
function locale_default(locale2) {
  var group = locale2.grouping === void 0 || locale2.thousands === void 0 ? identity_default2 : formatGroup_default(map.call(locale2.grouping, Number), locale2.thousands + ""), currencyPrefix = locale2.currency === void 0 ? "" : locale2.currency[0] + "", currencySuffix = locale2.currency === void 0 ? "" : locale2.currency[1] + "", decimal = locale2.decimal === void 0 ? "." : locale2.decimal + "", numerals = locale2.numerals === void 0 ? identity_default2 : formatNumerals_default(map.call(locale2.numerals, String)), percent = locale2.percent === void 0 ? "%" : locale2.percent + "", minus = locale2.minus === void 0 ? "\u2212" : locale2.minus + "", nan = locale2.nan === void 0 ? "NaN" : locale2.nan + "";
  function newFormat(specifier) {
    specifier = formatSpecifier(specifier);
    var fill = specifier.fill, align = specifier.align, sign = specifier.sign, symbol = specifier.symbol, zero3 = specifier.zero, width = specifier.width, comma = specifier.comma, precision = specifier.precision, trim = specifier.trim, type2 = specifier.type;
    if (type2 === "n")
      comma = true, type2 = "g";
    else if (!formatTypes_default[type2])
      precision === void 0 && (precision = 12), trim = true, type2 = "g";
    if (zero3 || fill === "0" && align === "=")
      zero3 = true, fill = "0", align = "=";
    var prefix = symbol === "$" ? currencyPrefix : symbol === "#" && /[boxX]/.test(type2) ? "0" + type2.toLowerCase() : "", suffix = symbol === "$" ? currencySuffix : /[%p]/.test(type2) ? percent : "";
    var formatType = formatTypes_default[type2], maybeSuffix = /[defgprs%]/.test(type2);
    precision = precision === void 0 ? 6 : /[gprs]/.test(type2) ? Math.max(1, Math.min(21, precision)) : Math.max(0, Math.min(20, precision));
    function format2(value) {
      var valuePrefix = prefix, valueSuffix = suffix, i, n, c;
      if (type2 === "c") {
        valueSuffix = formatType(value) + valueSuffix;
        value = "";
      } else {
        value = +value;
        var valueNegative = value < 0 || 1 / value < 0;
        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);
        if (trim)
          value = formatTrim_default(value);
        if (valueNegative && +value === 0 && sign !== "+")
          valueNegative = false;
        valuePrefix = (valueNegative ? sign === "(" ? sign : minus : sign === "-" || sign === "(" ? "" : sign) + valuePrefix;
        valueSuffix = (type2 === "s" ? prefixes[8 + prefixExponent / 3] : "") + valueSuffix + (valueNegative && sign === "(" ? ")" : "");
        if (maybeSuffix) {
          i = -1, n = value.length;
          while (++i < n) {
            if (c = value.charCodeAt(i), 48 > c || c > 57) {
              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;
              value = value.slice(0, i);
              break;
            }
          }
        }
      }
      if (comma && !zero3)
        value = group(value, Infinity);
      var length = valuePrefix.length + value.length + valueSuffix.length, padding = length < width ? new Array(width - length + 1).join(fill) : "";
      if (comma && zero3)
        value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = "";
      switch (align) {
        case "<":
          value = valuePrefix + value + valueSuffix + padding;
          break;
        case "=":
          value = valuePrefix + padding + value + valueSuffix;
          break;
        case "^":
          value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length);
          break;
        default:
          value = padding + valuePrefix + value + valueSuffix;
          break;
      }
      return numerals(value);
    }
    format2.toString = function() {
      return specifier + "";
    };
    return format2;
  }
  function formatPrefix2(specifier, value) {
    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = "f", specifier)), e = Math.max(-8, Math.min(8, Math.floor(exponent_default(value) / 3))) * 3, k = Math.pow(10, -e), prefix = prefixes[8 + e / 3];
    return function(value2) {
      return f(k * value2) + prefix;
    };
  }
  return {
    format: newFormat,
    formatPrefix: formatPrefix2
  };
}

// node_modules/d3-format/src/defaultLocale.js
var locale;
var format;
var formatPrefix;
defaultLocale({
  thousands: ",",
  grouping: [3],
  currency: ["$", ""]
});
function defaultLocale(definition) {
  locale = locale_default(definition);
  format = locale.format;
  formatPrefix = locale.formatPrefix;
  return locale;
}

// node_modules/d3-format/src/precisionFixed.js
function precisionFixed_default(step) {
  return Math.max(0, -exponent_default(Math.abs(step)));
}

// node_modules/d3-format/src/precisionPrefix.js
function precisionPrefix_default(step, value) {
  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent_default(value) / 3))) * 3 - exponent_default(Math.abs(step)));
}

// node_modules/d3-format/src/precisionRound.js
function precisionRound_default(step, max2) {
  step = Math.abs(step), max2 = Math.abs(max2) - step;
  return Math.max(0, exponent_default(max2) - exponent_default(step)) + 1;
}

// node_modules/d3-scale/src/init.js
function initRange(domain, range) {
  switch (arguments.length) {
    case 0:
      break;
    case 1:
      this.range(domain);
      break;
    default:
      this.range(range).domain(domain);
      break;
  }
  return this;
}

// node_modules/d3-scale/src/ordinal.js
var implicit = Symbol("implicit");
function ordinal() {
  var index = new InternMap(), domain = [], range = [], unknown = implicit;
  function scale(d) {
    let i = index.get(d);
    if (i === void 0) {
      if (unknown !== implicit)
        return unknown;
      index.set(d, i = domain.push(d) - 1);
    }
    return range[i % range.length];
  }
  scale.domain = function(_) {
    if (!arguments.length)
      return domain.slice();
    domain = [], index = new InternMap();
    for (const value of _) {
      if (index.has(value))
        continue;
      index.set(value, domain.push(value) - 1);
    }
    return scale;
  };
  scale.range = function(_) {
    return arguments.length ? (range = Array.from(_), scale) : range.slice();
  };
  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };
  scale.copy = function() {
    return ordinal(domain, range).unknown(unknown);
  };
  initRange.apply(scale, arguments);
  return scale;
}

// node_modules/d3-scale/src/constant.js
function constants(x) {
  return function() {
    return x;
  };
}

// node_modules/d3-scale/src/number.js
function number3(x) {
  return +x;
}

// node_modules/d3-scale/src/continuous.js
var unit = [0, 1];
function identity2(x) {
  return x;
}
function normalize(a, b) {
  return (b -= a = +a) ? function(x) {
    return (x - a) / b;
  } : constants(isNaN(b) ? NaN : 0.5);
}
function clamper(a, b) {
  var t;
  if (a > b)
    t = a, a = b, b = t;
  return function(x) {
    return Math.max(a, Math.min(b, x));
  };
}
function bimap(domain, range, interpolate) {
  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];
  if (d1 < d0)
    d0 = normalize(d1, d0), r0 = interpolate(r1, r0);
  else
    d0 = normalize(d0, d1), r0 = interpolate(r0, r1);
  return function(x) {
    return r0(d0(x));
  };
}
function polymap(domain, range, interpolate) {
  var j = Math.min(domain.length, range.length) - 1, d = new Array(j), r = new Array(j), i = -1;
  if (domain[j] < domain[0]) {
    domain = domain.slice().reverse();
    range = range.slice().reverse();
  }
  while (++i < j) {
    d[i] = normalize(domain[i], domain[i + 1]);
    r[i] = interpolate(range[i], range[i + 1]);
  }
  return function(x) {
    var i2 = bisect_default(domain, x, 1, j) - 1;
    return r[i2](d[i2](x));
  };
}
function copy(source, target) {
  return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown());
}
function transformer() {
  var domain = unit, range = unit, interpolate = value_default, transform2, untransform, unknown, clamp = identity2, piecewise, output, input;
  function rescale() {
    var n = Math.min(domain.length, range.length);
    if (clamp !== identity2)
      clamp = clamper(domain[0], domain[n - 1]);
    piecewise = n > 2 ? polymap : bimap;
    output = input = null;
    return scale;
  }
  function scale(x) {
    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform2), range, interpolate)))(transform2(clamp(x)));
  }
  scale.invert = function(y) {
    return clamp(untransform((input || (input = piecewise(range, domain.map(transform2), number_default)))(y)));
  };
  scale.domain = function(_) {
    return arguments.length ? (domain = Array.from(_, number3), rescale()) : domain.slice();
  };
  scale.range = function(_) {
    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();
  };
  scale.rangeRound = function(_) {
    return range = Array.from(_), interpolate = round_default, rescale();
  };
  scale.clamp = function(_) {
    return arguments.length ? (clamp = _ ? true : identity2, rescale()) : clamp !== identity2;
  };
  scale.interpolate = function(_) {
    return arguments.length ? (interpolate = _, rescale()) : interpolate;
  };
  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };
  return function(t, u) {
    transform2 = t, untransform = u;
    return rescale();
  };
}
function continuous() {
  return transformer()(identity2, identity2);
}

// node_modules/d3-scale/src/tickFormat.js
function tickFormat(start2, stop, count, specifier) {
  var step = tickStep(start2, stop, count), precision;
  specifier = formatSpecifier(specifier == null ? ",f" : specifier);
  switch (specifier.type) {
    case "s": {
      var value = Math.max(Math.abs(start2), Math.abs(stop));
      if (specifier.precision == null && !isNaN(precision = precisionPrefix_default(step, value)))
        specifier.precision = precision;
      return formatPrefix(specifier, value);
    }
    case "":
    case "e":
    case "g":
    case "p":
    case "r": {
      if (specifier.precision == null && !isNaN(precision = precisionRound_default(step, Math.max(Math.abs(start2), Math.abs(stop)))))
        specifier.precision = precision - (specifier.type === "e");
      break;
    }
    case "f":
    case "%": {
      if (specifier.precision == null && !isNaN(precision = precisionFixed_default(step)))
        specifier.precision = precision - (specifier.type === "%") * 2;
      break;
    }
  }
  return format(specifier);
}

// node_modules/d3-scale/src/linear.js
function linearish(scale) {
  var domain = scale.domain;
  scale.ticks = function(count) {
    var d = domain();
    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);
  };
  scale.tickFormat = function(count, specifier) {
    var d = domain();
    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);
  };
  scale.nice = function(count) {
    if (count == null)
      count = 10;
    var d = domain();
    var i0 = 0;
    var i1 = d.length - 1;
    var start2 = d[i0];
    var stop = d[i1];
    var prestep;
    var step;
    var maxIter = 10;
    if (stop < start2) {
      step = start2, start2 = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }
    while (maxIter-- > 0) {
      step = tickIncrement(start2, stop, count);
      if (step === prestep) {
        d[i0] = start2;
        d[i1] = stop;
        return domain(d);
      } else if (step > 0) {
        start2 = Math.floor(start2 / step) * step;
        stop = Math.ceil(stop / step) * step;
      } else if (step < 0) {
        start2 = Math.ceil(start2 * step) / step;
        stop = Math.floor(stop * step) / step;
      } else {
        break;
      }
      prestep = step;
    }
    return scale;
  };
  return scale;
}
function linear2() {
  var scale = continuous();
  scale.copy = function() {
    return copy(scale, linear2());
  };
  initRange.apply(scale, arguments);
  return linearish(scale);
}

// node_modules/d3-scale-chromatic/src/colors.js
function colors_default(specifier) {
  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;
  while (i < n)
    colors[i] = "#" + specifier.slice(i * 6, ++i * 6);
  return colors;
}

// node_modules/d3-scale-chromatic/src/categorical/category10.js
var category10_default = colors_default("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");

// node_modules/d3-zoom/src/transform.js
function Transform(k, x, y) {
  this.k = k;
  this.x = x;
  this.y = y;
}
Transform.prototype = {
  constructor: Transform,
  scale: function(k) {
    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);
  },
  translate: function(x, y) {
    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);
  },
  apply: function(point) {
    return [point[0] * this.k + this.x, point[1] * this.k + this.y];
  },
  applyX: function(x) {
    return x * this.k + this.x;
  },
  applyY: function(y) {
    return y * this.k + this.y;
  },
  invert: function(location) {
    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];
  },
  invertX: function(x) {
    return (x - this.x) / this.k;
  },
  invertY: function(y) {
    return (y - this.y) / this.k;
  },
  rescaleX: function(x) {
    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));
  },
  rescaleY: function(y) {
    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));
  },
  toString: function() {
    return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")";
  }
};
var identity3 = new Transform(1, 0, 0);
transform.prototype = Transform.prototype;
function transform(node) {
  while (!node.__zoom)
    if (!(node = node.parentNode))
      return identity3;
  return node.__zoom;
}

// src/views/TimelineModal.ts
<<<<<<< HEAD
var TimelineModal = class extends import_obsidian15.Modal {
=======
var TimelineModal = class extends import_obsidian14.Modal {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  constructor(app, events, timeConfig) {
    super(app);
    this.events = events;
    this.timeConfig = timeConfig;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("story-engine-timeline-modal");
    contentEl.createEl("h2", { text: "World Timeline" });
    const chartContainer = contentEl.createDiv({ cls: "story-engine-timeline-chart" });
    this.renderTimeline(chartContainer);
  }
  renderTimeline(container) {
    if (this.events.length === 0) {
      container.createEl("p", { text: "No events with timeline data found." });
      return;
    }
    const width = 800;
    const height = 400;
    const margin = { top: 20, right: 30, bottom: 50, left: 60 };
    const svg = select_default2(container).append("svg").attr("width", width).attr("height", height);
    const eventsWithPosition = this.events.map((e, i) => {
      var _a, _b, _c;
      return {
        ...e,
        timeline_position: (_a = e.timeline_position) != null ? _a : i * 10,
        parent_id: (_b = e.parent_id) != null ? _b : null,
        is_epoch: (_c = e.is_epoch) != null ? _c : false
      };
    });
    const xExtent = extent(eventsWithPosition, (d) => d.timeline_position);
    const xScale = linear2().domain([xExtent[0] - 1, xExtent[1] + 1]).range([margin.left, width - margin.right]);
    const yScale = linear2().domain([0, 10]).range([height - margin.bottom, margin.top]);
    const colorScale = ordinal(category10_default);
    svg.append("g").attr("transform", `translate(0,${height - margin.bottom})`).call(axisBottom(xScale).tickFormat((d) => `Year ${d}`));
    svg.append("g").attr("transform", `translate(${margin.left},0)`).call(axisLeft(yScale).tickFormat((d) => `Imp ${d}`));
    const eventsWithParent = eventsWithPosition.filter((e) => e.parent_id);
    svg.selectAll("line.parent-link").data(eventsWithParent).join("line").attr("class", "parent-link").attr("x1", (d) => {
      const parent = eventsWithPosition.find((e) => e.id === d.parent_id);
      return parent ? xScale(parent.timeline_position) : 0;
    }).attr("y1", (d) => {
      const parent = eventsWithPosition.find((e) => e.id === d.parent_id);
      return parent ? yScale(parent.importance) : 0;
    }).attr("x2", (d) => xScale(d.timeline_position)).attr("y2", (d) => yScale(d.importance)).attr("stroke", "#999").attr("stroke-dasharray", "4,2").attr("stroke-width", 1);
    svg.selectAll("circle").data(eventsWithPosition).join("circle").attr("cx", (d) => xScale(d.timeline_position)).attr("cy", (d) => yScale(d.importance)).attr("r", (d) => d.is_epoch ? 10 : 6).attr("fill", (d) => colorScale(d.type || "default")).attr("stroke", (d) => d.is_epoch ? "gold" : "none").attr("stroke-width", 3).style("cursor", "pointer").on("click", (_event, d) => this.showEventDetails(d)).append("title").text((d) => `${d.name} (Year ${d.timeline_position})`);
    svg.selectAll("text.event-label").data(eventsWithPosition.filter((e) => e.importance >= 8)).join("text").attr("class", "event-label").attr("x", (d) => xScale(d.timeline_position)).attr("y", (d) => yScale(d.importance) - 12).attr("text-anchor", "middle").attr("font-size", "10px").text((d) => d.name.substring(0, 15) + (d.name.length > 15 ? "..." : ""));
  }
  showEventDetails(event) {
    var _a;
<<<<<<< HEAD
    new import_obsidian15.Notice(`Event: ${event.name}
=======
    new import_obsidian14.Notice(`Event: ${event.name}
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
Year: ${(_a = event.timeline_position) != null ? _a : "N/A"}
Importance: ${event.importance}`);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/CharacterDetailsView.ts
<<<<<<< HEAD
var import_obsidian16 = require("obsidian");
=======
var import_obsidian15 = require("obsidian");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
var CharacterDetailsView = class {
  constructor(plugin, character, headerEl, contentEl, onBack, onEditCharacter, world = null, characters = [], archetypes = [], traits = [], events = []) {
    // State
    this.characterTab = "overview";
    this.characterTraits = [];
    this.characterEvents = [];
    this.characterScenes = [];
    this.characterRelationships = [];
    this.plugin = plugin;
    this.character = character;
    this.world = world;
    this.characters = characters;
    this.archetypes = archetypes;
    this.traits = traits;
    this.events = events;
    this.headerEl = headerEl;
    this.contentEl = contentEl;
    this.onBack = onBack;
    this.onEditCharacter = onEditCharacter;
  }
  async render() {
    await this.loadCharacterData();
    this.renderHeader();
    this.renderContent();
  }
  renderContent() {
    this.contentEl.empty();
    const mainContainer = this.contentEl.createDiv({ cls: "character-details-container" });
    this.renderTabs(mainContainer);
    this.renderTabContent(mainContainer);
  }
  async loadCharacterData() {
    try {
      this.characterTraits = await this.plugin.apiClient.getCharacterTraits(this.character.id);
      const eventCharacters = await this.plugin.apiClient.getCharacterEvents(this.character.id);
      this.characterEvents = await Promise.all(
        eventCharacters.map(async (ec) => {
          const event = await this.plugin.apiClient.getEvent(ec.event_id);
          return { event, role: ec.role || void 0 };
        })
      );
      this.characterRelationships = await this.plugin.apiClient.getCharacterRelationships(this.character.id);
      this.characterScenes = [];
      if (this.world) {
        const allStories = await this.plugin.apiClient.listStories();
        const worldStories = allStories.filter((s) => s.world_id === this.world.id);
        for (const story of worldStories) {
          const scenes = await this.plugin.apiClient.getScenesByStory(story.id);
          const povScenes = scenes.filter((s) => s.pov_character_id === this.character.id);
          for (const scene of povScenes) {
            this.characterScenes.push({ scene, story, type: "pov" });
          }
          for (const scene of scenes) {
            const refs = await this.plugin.apiClient.getSceneReferences(scene.id);
            const charRef = refs.find(
              (r) => r.entity_type === "character" && r.entity_id === this.character.id
            );
            if (charRef) {
              this.characterScenes.push({ scene, story, type: "coadjuvante" });
            }
          }
        }
      }
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to load character data";
<<<<<<< HEAD
      new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
=======
      new import_obsidian15.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  renderHeader() {
    if (!this.headerEl)
      return;
    this.headerEl.empty();
    const headerLeft = this.headerEl.createDiv({ cls: "story-engine-header-left" });
    const backButton = headerLeft.createEl("button", {
      text: "\u2190 Back",
      cls: "story-engine-back-btn"
    });
    backButton.onclick = () => {
      this.onBack();
    };
    const titleDiv = headerLeft.createDiv({ cls: "story-engine-header-title" });
    const titleRow = titleDiv.createDiv({ cls: "story-engine-title-row" });
    titleRow.createEl("h2", { text: this.character.name });
    if (this.character.archetype_id) {
      const archetype = this.archetypes.find((a) => a.id === this.character.archetype_id);
      if (archetype) {
        const archetypePill = titleRow.createSpan({ cls: "story-engine-badge" });
        archetypePill.textContent = archetype.name;
      }
    }
<<<<<<< HEAD
    const uuidDiv = headerLeft.createDiv({ cls: "story-engine-uuid" });
    uuidDiv.createEl("span", { text: this.character.id });
    const copyIcon = uuidDiv.createEl("span", { cls: "story-engine-copy-icon" });
    (0, import_obsidian16.setIcon)(copyIcon, "copy");
    copyIcon.onclick = () => {
      navigator.clipboard.writeText(this.character.id);
      new import_obsidian16.Notice("UUID copied to clipboard");
=======
    const copyIdBtn = titleRow.createEl("button", {
      cls: "story-engine-copy-id-btn",
      attr: {
        "aria-label": "Copy ID",
        "title": `ID: ${this.character.id}
Click to copy`
      }
    });
    (0, import_obsidian15.setIcon)(copyIdBtn, "copy");
    copyIdBtn.onclick = () => {
      navigator.clipboard.writeText(this.character.id);
      new import_obsidian15.Notice("UUID copied to clipboard");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    };
    const headerRight = this.headerEl.createDiv({ cls: "story-engine-header-right" });
    const menuButton = headerRight.createEl("button", { text: "Edit Character" });
    menuButton.onclick = () => {
      this.onEditCharacter(this.character);
    };
  }
  renderTabs(container) {
    const tabsContainer = container.createDiv({ cls: "character-details-tabs" });
    const tabs = [
      { key: "overview", label: "Overview" },
      { key: "traits", label: "Traits" },
      { key: "events", label: "Events" },
      { key: "scenes", label: "Scenes" },
      { key: "relationships", label: "Relationships" }
    ];
    tabs.forEach((tab) => {
      const isActive = this.characterTab === tab.key;
      const tabButton = tabsContainer.createEl("button", {
        text: tab.label,
        cls: isActive ? "character-tab character-tab-active" : "character-tab"
      });
      tabButton.onclick = () => {
        if (this.characterTab !== tab.key) {
          this.characterTab = tab.key;
          this.renderContent();
        }
      };
    });
  }
  renderTabContent(container) {
    const contentContainer = container.createDiv({ cls: "character-details-content-inner" });
    switch (this.characterTab) {
      case "overview":
        this.renderOverviewTab(contentContainer);
        break;
      case "traits":
        this.renderTraitsTab(contentContainer);
        break;
      case "events":
        this.renderEventsTab(contentContainer);
        break;
      case "scenes":
        this.renderScenesTab(contentContainer);
        break;
      case "relationships":
        this.renderRelationshipsTab(contentContainer);
        break;
    }
  }
  renderOverviewTab(container) {
    const descSection = container.createDiv({ cls: "story-engine-section" });
    descSection.createEl("h3", { text: "Description" });
    const descTextarea = descSection.createEl("textarea", {
      cls: "story-engine-textarea",
      attr: { rows: "5" }
    });
    descTextarea.value = this.character.description || "";
    descTextarea.placeholder = "Enter character description...";
    const descActions = descSection.createDiv({ cls: "story-engine-actions" });
    const saveDescBtn = descActions.createEl("button", { text: "Save Description", cls: "mod-cta" });
    saveDescBtn.onclick = async () => {
      try {
        const updated = await this.plugin.apiClient.updateCharacter(this.character.id, {
          description: descTextarea.value
        });
        this.character = updated;
<<<<<<< HEAD
        new import_obsidian16.Notice("Description saved");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian15.Notice("Description saved");
      } catch (err) {
        new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const archetypeSection = container.createDiv({ cls: "story-engine-section" });
    archetypeSection.createEl("h3", { text: "Archetype" });
    const archetypeSelect = archetypeSection.createEl("select", { cls: "story-engine-select" });
    const noneOption = archetypeSelect.createEl("option", { text: "None", value: "" });
    if (!this.character.archetype_id) {
      noneOption.selected = true;
    }
    for (const archetype of this.archetypes) {
      const option = archetypeSelect.createEl("option", {
        text: archetype.name,
        value: archetype.id
      });
      if (this.character.archetype_id === archetype.id) {
        option.selected = true;
      }
    }
    const archetypeActions = archetypeSection.createDiv({ cls: "story-engine-actions" });
    const saveArchetypeBtn = archetypeActions.createEl("button", { text: "Save Archetype", cls: "mod-cta" });
    saveArchetypeBtn.onclick = async () => {
      try {
        const archetypeId = archetypeSelect.value || null;
        const updated = await this.plugin.apiClient.updateCharacter(this.character.id, {
          archetype_id: archetypeId
        });
        this.character = updated;
        await this.loadCharacterData();
        this.renderHeader();
<<<<<<< HEAD
        this.renderTabContent();
        new import_obsidian16.Notice("Archetype saved");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        this.renderContent();
        new import_obsidian15.Notice("Archetype saved");
      } catch (err) {
        new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
  }
  renderTraitsTab(container) {
    const actionsBar = container.createDiv({ cls: "story-engine-actions-bar" });
    const addBtn = actionsBar.createEl("button", { text: "Add Trait", cls: "mod-cta" });
    addBtn.onclick = () => {
      this.showAddTraitModal();
    };
    if (this.characterTraits.length === 0) {
      container.createEl("p", { text: "No traits assigned. Add a trait to get started!" });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const charTrait of this.characterTraits) {
      const item = list.createDiv({ cls: "story-engine-item" });
      const titleRow = item.createDiv({ cls: "story-engine-title" });
      titleRow.createEl("strong", { text: charTrait.trait_name });
      const categoryPill = titleRow.createSpan({ cls: "story-engine-badge" });
      categoryPill.textContent = charTrait.trait_category;
      const meta = item.createDiv({ cls: "story-engine-meta" });
      meta.createEl("span", { text: `Value: ${charTrait.value || "N/A"}` });
      if (charTrait.notes) {
        meta.createEl("span", { text: ` | Notes: ${charTrait.notes}` });
      }
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      actions.createEl("button", { text: "Edit" }).onclick = () => {
        this.showEditTraitModal(charTrait);
      };
      actions.createEl("button", { text: "Delete" }).onclick = async () => {
        if (confirm(`Remove trait "${charTrait.trait_name}"?`)) {
          try {
            await this.plugin.apiClient.removeCharacterTrait(this.character.id, charTrait.trait_id);
            await this.loadCharacterData();
<<<<<<< HEAD
            this.renderTabContent();
            new import_obsidian16.Notice("Trait removed");
          } catch (err) {
            new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
            this.renderContent();
            new import_obsidian15.Notice("Trait removed");
          } catch (err) {
            new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          }
        }
      };
    }
  }
  renderEventsTab(container) {
    const actionsBar = container.createDiv({ cls: "story-engine-actions-bar" });
    const addBtn = actionsBar.createEl("button", { text: "Add Event", cls: "mod-cta" });
    addBtn.onclick = () => {
      this.showAddEventModal();
    };
    if (this.characterEvents.length === 0) {
      container.createEl("p", { text: "No events assigned. Add an event to get started!" });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const { event, role } of this.characterEvents) {
      const item = list.createDiv({ cls: "story-engine-item" });
      item.createDiv({ cls: "story-engine-title", text: event.name });
      const meta = item.createDiv({ cls: "story-engine-meta" });
      if (role) {
        meta.createEl("span", { text: `Role: ${role}` });
      }
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      actions.createEl("button", { text: "Edit Role" }).onclick = () => {
        this.showEditEventRoleModal(event, role);
      };
      actions.createEl("button", { text: "Remove" }).onclick = async () => {
        if (confirm(`Remove character from event "${event.name}"?`)) {
          try {
            await this.plugin.apiClient.removeEventCharacter(event.id, this.character.id);
            await this.loadCharacterData();
<<<<<<< HEAD
            this.renderTabContent();
            new import_obsidian16.Notice("Character removed from event");
          } catch (err) {
            new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
            this.renderContent();
            new import_obsidian15.Notice("Character removed from event");
          } catch (err) {
            new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          }
        }
      };
    }
  }
  renderScenesTab(container) {
    if (this.characterScenes.length === 0) {
      container.createEl("p", { text: "No scenes found for this character." });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const { scene, story, type: type2 } of this.characterScenes) {
      const item = list.createDiv({ cls: "story-engine-item" });
      const titleRow = item.createDiv({ cls: "story-engine-title" });
      titleRow.createEl("span", { text: scene.goal || "No goal" });
      const typePill = titleRow.createSpan({
        cls: type2 === "pov" ? "story-engine-badge story-engine-badge-green" : "story-engine-badge story-engine-badge-blue"
      });
      typePill.textContent = type2 === "pov" ? "POV" : "Coadjuvante";
      const meta = item.createDiv({ cls: "story-engine-meta" });
      meta.createEl("span", { text: `Story: ${story.title}` });
    }
  }
  renderRelationshipsTab(container) {
    const actionsBar = container.createDiv({ cls: "story-engine-actions-bar" });
    const addBtn = actionsBar.createEl("button", { text: "Add Relationship", cls: "mod-cta" });
    addBtn.onclick = () => {
      this.showAddRelationshipModal();
    };
    if (this.characterRelationships.length === 0) {
      container.createEl("p", { text: "No relationships defined. Add a relationship to get started!" });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const rel of this.characterRelationships) {
      const otherCharId = rel.character1_id === this.character.id ? rel.character2_id : rel.character1_id;
      const otherChar = this.characters.find((c) => c.id === otherCharId);
      const otherCharName = otherChar ? otherChar.name : "Unknown";
      const item = list.createDiv({ cls: "story-engine-item" });
      const titleRow = item.createDiv({ cls: "story-engine-title" });
      titleRow.createEl("strong", { text: otherCharName });
      const typePill = titleRow.createSpan({ cls: "story-engine-badge" });
      typePill.textContent = rel.relationship_type;
      const directionIcon = titleRow.createSpan({ cls: "story-engine-direction" });
      directionIcon.textContent = rel.bidirectional ? "\u2194" : "\u2192";
      const meta = item.createDiv({ cls: "story-engine-meta" });
      if (rel.description) {
        meta.createEl("span", { text: rel.description });
      }
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      actions.createEl("button", { text: "Edit" }).onclick = () => {
        this.showEditRelationshipModal(rel);
      };
      actions.createEl("button", { text: "Delete" }).onclick = async () => {
        if (confirm(`Delete relationship with "${otherCharName}"?`)) {
          try {
            await this.plugin.apiClient.deleteCharacterRelationship(rel.id);
            await this.loadCharacterData();
<<<<<<< HEAD
            this.renderTabContent();
            new import_obsidian16.Notice("Relationship deleted");
          } catch (err) {
            new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
            this.renderContent();
            new import_obsidian15.Notice("Relationship deleted");
          } catch (err) {
            new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          }
        }
      };
    }
  }
  // Modal methods
  showAddTraitModal() {
<<<<<<< HEAD
    const modal = new import_obsidian16.Modal(this.plugin.app);
=======
    const modal = new import_obsidian15.Modal(this.plugin.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.textContent = "Add Trait";
    const content = modal.contentEl;
    content.createEl("p", { text: "Select a trait to add:" });
    const traitSelect = content.createEl("select", { cls: "story-engine-select" });
    const availableTraits = this.traits.filter(
      (t) => !this.characterTraits.some((ct) => ct.trait_id === t.id)
    );
    if (availableTraits.length === 0) {
      content.createEl("p", { text: "No available traits. Create a trait first!" });
      const buttonContainer2 = content.createDiv({ cls: "modal-button-container" });
      const closeBtn = buttonContainer2.createEl("button", { text: "Close" });
      closeBtn.onclick = () => modal.close();
      return;
    }
    for (const trait of availableTraits) {
      traitSelect.createEl("option", { text: `${trait.name} (${trait.category})`, value: trait.id });
    }
    const valueInput = content.createEl("input", {
      cls: "story-engine-input",
      attr: { type: "text", placeholder: "Value (optional)" }
    });
    const notesInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      attr: { rows: "3", placeholder: "Notes (optional)" }
    });
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Add", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.addCharacterTrait(
          this.character.id,
          traitSelect.value,
          valueInput.value || void 0,
          notesInput.value || void 0
        );
        await this.loadCharacterData();
        this.renderContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian16.Notice("Trait added");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian15.Notice("Trait added");
      } catch (err) {
        new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  showEditTraitModal(charTrait) {
<<<<<<< HEAD
    const modal = new import_obsidian16.Modal(this.plugin.app);
=======
    const modal = new import_obsidian15.Modal(this.plugin.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.textContent = "Edit Trait";
    const content = modal.contentEl;
    content.createEl("p", { text: `Editing: ${charTrait.trait_name}` });
    const valueInput = content.createEl("input", {
      cls: "story-engine-input",
      attr: { type: "text", placeholder: "Value" }
    });
    valueInput.value = charTrait.value || "";
    const notesInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      attr: { rows: "3", placeholder: "Notes" }
    });
    notesInput.value = charTrait.notes || "";
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.updateCharacterTrait(
          this.character.id,
          charTrait.trait_id,
          valueInput.value || void 0,
          notesInput.value || void 0
        );
        await this.loadCharacterData();
        this.renderContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian16.Notice("Trait updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian15.Notice("Trait updated");
      } catch (err) {
        new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  showAddEventModal() {
    if (!this.world)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian16.Modal(this.plugin.app);
=======
    const modal = new import_obsidian15.Modal(this.plugin.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.textContent = "Add Event";
    const content = modal.contentEl;
    content.createEl("p", { text: "Select an event:" });
    const eventSelect = content.createEl("select", { cls: "story-engine-select" });
    const availableEvents = this.events.filter(
      (e) => !this.characterEvents.some((ce) => ce.event.id === e.id)
    );
    if (availableEvents.length === 0) {
      content.createEl("p", { text: "No available events. Create an event first!" });
      const buttonContainer2 = content.createDiv({ cls: "modal-button-container" });
      const closeBtn = buttonContainer2.createEl("button", { text: "Close" });
      closeBtn.onclick = () => modal.close();
      return;
    }
    for (const event of availableEvents) {
      eventSelect.createEl("option", { text: event.name, value: event.id });
    }
    const roleInput = content.createEl("input", {
      cls: "story-engine-input",
      attr: { type: "text", placeholder: "Role (optional)" }
    });
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Add", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.addEventCharacter(
          eventSelect.value,
          this.character.id,
          roleInput.value || void 0
        );
        await this.loadCharacterData();
        this.renderContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian16.Notice("Character added to event");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian15.Notice("Character added to event");
      } catch (err) {
        new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  showEditEventRoleModal(event, currentRole) {
<<<<<<< HEAD
    const modal = new import_obsidian16.Modal(this.plugin.app);
=======
    const modal = new import_obsidian15.Modal(this.plugin.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.textContent = "Edit Role";
    const content = modal.contentEl;
    content.createEl("p", { text: `Event: ${event.name}` });
    const roleInput = content.createEl("input", {
      cls: "story-engine-input",
      attr: { type: "text", placeholder: "Role" },
      value: currentRole || ""
    });
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.removeEventCharacter(event.id, this.character.id);
        await this.plugin.apiClient.addEventCharacter(
          event.id,
          this.character.id,
          roleInput.value || void 0
        );
        await this.loadCharacterData();
        this.renderContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian16.Notice("Role updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian15.Notice("Role updated");
      } catch (err) {
        new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  showAddRelationshipModal() {
<<<<<<< HEAD
    const modal = new import_obsidian16.Modal(this.plugin.app);
=======
    const modal = new import_obsidian15.Modal(this.plugin.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.textContent = "Add Relationship";
    const content = modal.contentEl;
    content.createEl("p", { text: "Select another character:" });
    const characterSelect = content.createEl("select", { cls: "story-engine-select" });
    const availableCharacters = this.characters.filter((c) => c.id !== this.character.id);
    if (availableCharacters.length === 0) {
      content.createEl("p", { text: "No other characters available." });
      const buttonContainer2 = content.createDiv({ cls: "modal-button-container" });
      const closeBtn = buttonContainer2.createEl("button", { text: "Close" });
      closeBtn.onclick = () => modal.close();
      return;
    }
    for (const char of availableCharacters) {
      characterSelect.createEl("option", { text: char.name, value: char.id });
    }
    const relationshipTypeSelect = content.createEl("select", { cls: "story-engine-select" });
    relationshipTypeSelect.createEl("option", { text: "Ally", value: "ally" });
    relationshipTypeSelect.createEl("option", { text: "Enemy", value: "enemy" });
    relationshipTypeSelect.createEl("option", { text: "Family", value: "family" });
    relationshipTypeSelect.createEl("option", { text: "Lover", value: "lover" });
    relationshipTypeSelect.createEl("option", { text: "Rival", value: "rival" });
    relationshipTypeSelect.createEl("option", { text: "Mentor", value: "mentor" });
    relationshipTypeSelect.createEl("option", { text: "Student", value: "student" });
    const descriptionInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      attr: { rows: "3", placeholder: "Description (optional)" }
    });
    const bidirectionalCheckbox = content.createEl("input", {
      attr: { type: "checkbox" }
    });
    bidirectionalCheckbox.checked = true;
    const bidirectionalLabel = content.createEl("label");
    bidirectionalLabel.appendChild(bidirectionalCheckbox);
    bidirectionalLabel.appendChild(document.createTextNode(" Bidirectional"));
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Add", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.createCharacterRelationship(this.character.id, {
          character1_id: this.character.id,
          character2_id: characterSelect.value,
          relationship_type: relationshipTypeSelect.value,
          description: descriptionInput.value || "",
          bidirectional: bidirectionalCheckbox.checked
        });
        await this.loadCharacterData();
        this.renderContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian16.Notice("Relationship added");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian15.Notice("Relationship added");
      } catch (err) {
        new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  showEditRelationshipModal(rel) {
<<<<<<< HEAD
    const modal = new import_obsidian16.Modal(this.plugin.app);
=======
    const modal = new import_obsidian15.Modal(this.plugin.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.textContent = "Edit Relationship";
    const content = modal.contentEl;
    const relationshipTypeSelect = content.createEl("select", { cls: "story-engine-select" });
    relationshipTypeSelect.createEl("option", { text: "Ally", value: "ally" });
    relationshipTypeSelect.createEl("option", { text: "Enemy", value: "enemy" });
    relationshipTypeSelect.createEl("option", { text: "Family", value: "family" });
    relationshipTypeSelect.createEl("option", { text: "Lover", value: "lover" });
    relationshipTypeSelect.createEl("option", { text: "Rival", value: "rival" });
    relationshipTypeSelect.createEl("option", { text: "Mentor", value: "mentor" });
    relationshipTypeSelect.createEl("option", { text: "Student", value: "student" });
    relationshipTypeSelect.value = rel.relationship_type;
    const descriptionInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      attr: { rows: "3", placeholder: "Description" },
      text: rel.description || ""
    });
    const bidirectionalCheckbox = content.createEl("input", {
      attr: { type: "checkbox" }
    });
    bidirectionalCheckbox.checked = rel.bidirectional;
    const bidirectionalLabel = content.createEl("label");
    bidirectionalLabel.appendChild(bidirectionalCheckbox);
    bidirectionalLabel.appendChild(document.createTextNode(" Bidirectional"));
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.updateCharacterRelationship(rel.id, {
          relationship_type: relationshipTypeSelect.value,
          description: descriptionInput.value || "",
          bidirectional: bidirectionalCheckbox.checked
        });
        await this.loadCharacterData();
        this.renderContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian16.Notice("Relationship updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian15.Notice("Relationship updated");
      } catch (err) {
        new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  // Method to update character after edit
  updateCharacter(character) {
    this.character = character;
    this.renderHeader();
    this.renderContent();
  }
};

// src/views/StoryListView.ts
var STORY_LIST_VIEW_TYPE = "story-engine-list-view";
<<<<<<< HEAD
var StoryListView = class extends import_obsidian17.ItemView {
=======
var StoryListView = class extends import_obsidian16.ItemView {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  constructor(leaf, plugin) {
    super(leaf);
    this.stories = [];
    this.worlds = [];
    this.rpgSystems = [];
    this.loading = true;
    this.error = null;
    this.currentStory = null;
    this.currentWorld = null;
    this.viewMode = "list";
    this.currentTab = "chapters";
    this.storyCharacters = [];
    this.worldTab = "characters";
    this.listTab = "stories";
    this.expandedWorldId = null;
    // Character Details View
    this.characterDetailsView = null;
    this.chapters = [];
    this.scenes = [];
    this.beats = [];
    this.contentBlocks = [];
    this.contentBlockRefs = [];
    this.loadingHierarchy = false;
    // World entities
    this.characters = [];
    this.locations = [];
    this.artifacts = [];
    this.events = [];
    this.traits = [];
    this.archetypes = [];
    this.factions = [];
    this.lores = [];
    this.loadingWorldData = false;
    this.plugin = plugin;
  }
  getViewType() {
    return STORY_LIST_VIEW_TYPE;
  }
  getDisplayText() {
    if (this.viewMode === "details" && this.currentStory) {
      return this.currentStory.title;
    }
    if (this.viewMode === "world-details" && this.currentWorld) {
      return this.currentWorld.name;
    }
    if (this.viewMode === "character-details" && this.characterDetailsView) {
      return this.characterDetailsView["character"].name;
    }
    return "Stories";
  }
  getIcon() {
    return "book-open";
  }
  async onOpen() {
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("story-engine-view-container");
    await this.render(container);
    await this.loadStories();
  }
  async onClose() {
  }
  async render(container) {
    container.empty();
    this.headerEl = container.createDiv({ cls: "story-engine-view-header" });
    this.contentEl = container.createDiv({ cls: "story-engine-view-content" });
    if (this.viewMode === "details" && this.currentStory) {
      this.renderDetails();
    } else if (this.viewMode === "world-details" && this.currentWorld) {
      this.renderWorldDetails();
    } else if (this.viewMode === "character-details" && this.characterDetailsView) {
      this.characterDetailsView.render();
    } else {
      this.renderListHeader();
      this.renderListContent();
    }
  }
  renderListHeader() {
    if (!this.headerEl)
      return;
    this.headerEl.empty();
    this.headerEl.createEl("h2", { text: "Stories" });
    const tabsContainer = this.headerEl.createDiv({ cls: "story-engine-tabs" });
    const storiesTab = tabsContainer.createEl("button", {
      text: "Stories",
      cls: `story-engine-tab ${this.listTab === "stories" ? "is-active" : ""}`
    });
    storiesTab.onclick = () => {
      this.listTab = "stories";
      this.renderListHeader();
      this.renderListContent();
    };
    const worldsTab = tabsContainer.createEl("button", {
      text: "Worlds",
      cls: `story-engine-tab ${this.listTab === "worlds" ? "is-active" : ""}`
    });
    worldsTab.onclick = () => {
      this.listTab = "worlds";
      this.renderListHeader();
      this.renderListContent();
    };
    const rpgSystemsTab = tabsContainer.createEl("button", {
      text: "RPG Systems",
      cls: `story-engine-tab ${this.listTab === "rpg-systems" ? "is-active" : ""}`
    });
    rpgSystemsTab.onclick = () => {
      this.listTab = "rpg-systems";
      this.renderListHeader();
      this.renderListContent();
    };
    const settingsButton = tabsContainer.createEl("button", {
      cls: "story-engine-settings-btn story-engine-tab",
      attr: { "aria-label": "Open Settings" }
    });
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(settingsButton, "gear");
=======
    (0, import_obsidian16.setIcon)(settingsButton, "gear");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    settingsButton.onclick = () => {
      this.plugin.openSettings();
    };
  }
  renderListContent() {
    if (!this.contentEl)
      return;
    this.contentEl.addClass("story-engine-list-layout");
    this.contentEl.removeClass("story-engine-sidebar-layout");
    this.contentEl.empty();
    if (this.loading) {
      this.contentEl.createEl("p", { text: "Loading..." });
      return;
    }
    if (this.error) {
      this.contentEl.createEl("p", {
        text: `Error: ${this.error}`,
        cls: "story-engine-error"
      });
      this.renderActionsBar();
      return;
    }
    switch (this.listTab) {
      case "stories":
        this.renderStoriesTab();
        break;
      case "worlds":
        this.renderWorldsTab();
        break;
      case "rpg-systems":
        this.renderRPGSystemsTab();
        break;
    }
    this.renderActionsBar();
  }
  renderActionsBar() {
    if (!this.contentEl)
      return;
    const actionsBar = this.contentEl.createDiv({ cls: "story-engine-actions-bar" });
    const refreshButton = actionsBar.createEl("button", {
      text: "Refresh",
      cls: "story-engine-refresh-btn"
    });
    refreshButton.onclick = async () => {
      await this.loadStories();
    };
    const syncAllButton = actionsBar.createEl("button", {
      text: "Sync All",
      cls: "story-engine-sync-all-btn"
    });
    syncAllButton.onclick = async () => {
      if (!this.plugin.settings.tenantId) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Please configure Tenant ID in settings", 5e3);
        return;
      }
      try {
        new import_obsidian17.Notice("Syncing all stories...");
=======
        new import_obsidian16.Notice("Please configure Tenant ID in settings", 5e3);
        return;
      }
      try {
        new import_obsidian16.Notice("Syncing all stories...");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        await this.plugin.syncService.pullAllStories();
        await this.loadStories();
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to sync stories";
<<<<<<< HEAD
        new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
        new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    let createButtonText = "Create Story";
    let createButtonAction = () => {
      this.plugin.createStoryCommand();
    };
    if (this.listTab === "worlds") {
      createButtonText = "Create World";
      createButtonAction = async () => {
        new CreateWorldModal(this.app, async (name, description, genre) => {
          try {
<<<<<<< HEAD
            new import_obsidian17.Notice(`Creating world "${name}"...`);
            const newWorld = await this.plugin.apiClient.createWorld(name, description, genre);
            new import_obsidian17.Notice(`World "${name}" created successfully`);
            await this.loadStories();
          } catch (err) {
            const errorMessage = err instanceof Error ? err.message : "Failed to create world";
            new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
            new import_obsidian16.Notice(`Creating world "${name}"...`);
            const newWorld = await this.plugin.apiClient.createWorld(name, description, genre);
            new import_obsidian16.Notice(`World "${name}" created successfully`);
            await this.loadStories();
          } catch (err) {
            const errorMessage = err instanceof Error ? err.message : "Failed to create world";
            new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          }
        }).open();
      };
    } else if (this.listTab === "rpg-systems") {
      createButtonText = "Create RPG System";
      createButtonAction = () => {
<<<<<<< HEAD
        new import_obsidian17.Notice("Create RPG System - Coming soon", 3e3);
=======
        new import_obsidian16.Notice("Create RPG System - Coming soon", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      };
    }
    const createButton = actionsBar.createEl("button", {
      text: createButtonText,
      cls: "mod-cta story-engine-create-btn"
    });
    createButton.onclick = createButtonAction;
  }
  renderEmptyCard(container, options) {
    const card = container.createDiv({ cls: "story-engine-empty-card" });
    const iconWrapper = card.createSpan({ cls: "story-engine-empty-icon" });
    (0, import_obsidian16.setIcon)(iconWrapper, options.icon);
    const copy2 = card.createDiv({ cls: "story-engine-empty-copy" });
    copy2.createEl("h3", { text: options.title });
    if (options.description) {
      copy2.createEl("p", { text: options.description });
    }
    if (options.actionText && options.onAction) {
      const actions = copy2.createDiv({ cls: "story-engine-empty-actions" });
      const actionBtn = actions.createEl("button", {
        text: options.actionText,
        cls: "mod-cta story-engine-empty-action"
      });
      actionBtn.onclick = options.onAction;
    }
    return card;
  }
  renderDetailsHeader() {
    if (!this.headerEl || !this.currentStory)
      return;
    this.headerEl.empty();
    const headerCard = this.headerEl.createDiv({ cls: "story-engine-story-details-header" });
    const headerContent = headerCard.createDiv({ cls: "story-engine-story-header-content" });
    const topRow = headerContent.createDiv({ cls: "story-engine-story-header-top" });
    const backButton = topRow.createEl("button", {
      text: "\u2190 Back",
      cls: "story-engine-back-btn"
    });
    backButton.onclick = () => {
      this.showList();
    };
<<<<<<< HEAD
    const titleContainer = headerLeft.createDiv({ cls: "story-engine-title-container" });
    const titleRow = titleContainer.createDiv({ cls: "story-engine-title-row" });
    const titleH2 = titleRow.createEl("h2", {
      text: this.currentStory.title,
      cls: "story-engine-title-header"
    });
    const statusPill = titleRow.createSpan({
      cls: `story-engine-status-pill story-engine-status-${this.currentStory.status.toLowerCase().replace(/\s+/g, "-")}`
    });
    statusPill.textContent = this.currentStory.status;
    const versionSpan = titleRow.createSpan({ cls: "story-engine-version" });
    versionSpan.textContent = `v.${this.currentStory.version_number}`;
    const uuidRow = titleContainer.createDiv({ cls: "story-engine-uuid-row" });
    const uuidSpan = uuidRow.createSpan({ cls: "story-engine-uuid" });
    uuidSpan.textContent = this.currentStory.id;
    const copyUuidButton = uuidRow.createEl("button", {
      cls: "story-engine-copy-uuid-btn",
      attr: { "aria-label": "Copy UUID" }
    });
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(copyUuidButton, "copy");
=======
    (0, import_obsidian16.setIcon)(copyUuidButton, "copy");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    copyUuidButton.onclick = () => {
      this.copyStoryId();
    };
    const headerActions = this.headerEl.createDiv({ cls: "story-engine-header-actions" });
=======
    const headerActions = topRow.createDiv({ cls: "story-engine-header-actions" });
>>>>>>> 0541034 (style(obsidian): align story flows with world UI)
    if (this.currentStory.world_id) {
      const world = this.worlds.find((w) => w.id === this.currentStory.world_id);
      if (world) {
        const worldButton = headerActions.createEl("button", {
          cls: "story-engine-world-btn",
          attr: { "aria-label": `Go to World: ${world.name}` }
        });
<<<<<<< HEAD
        (0, import_obsidian17.setIcon)(worldButton, "globe");
=======
        (0, import_obsidian16.setIcon)(worldButton, "globe");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        worldButton.createSpan({ text: "World" });
        worldButton.onclick = () => {
          this.showWorldDetails(world);
        };
      }
    }
    const contextButton = headerActions.createEl("button", {
      cls: "story-engine-context-btn",
      attr: { "aria-label": "Story Actions" }
    });
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(contextButton, "more-vertical");
=======
    (0, import_obsidian16.setIcon)(contextButton, "more-vertical");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    const dropdownMenu = headerActions.createDiv({ cls: "story-engine-dropdown-menu" });
    dropdownMenu.style.display = "none";
    const editOption = dropdownMenu.createEl("button", {
      cls: "story-engine-dropdown-item"
    });
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(editOption, "pencil");
=======
    (0, import_obsidian16.setIcon)(editOption, "pencil");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    editOption.createSpan({ text: "Edit Story Name" });
    editOption.onclick = () => {
      dropdownMenu.style.display = "none";
      this.showEditStoryNameModal();
    };
    const cloneOption = dropdownMenu.createEl("button", {
      cls: "story-engine-dropdown-item"
    });
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(cloneOption, "copy");
=======
    (0, import_obsidian16.setIcon)(cloneOption, "copy");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    cloneOption.createSpan({ text: "Clone Story" });
    cloneOption.onclick = async () => {
      dropdownMenu.style.display = "none";
      await this.cloneStory();
    };
    const pullOption = dropdownMenu.createEl("button", {
      cls: "story-engine-dropdown-item"
    });
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(pullOption, "download");
=======
    (0, import_obsidian16.setIcon)(pullOption, "download");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    pullOption.createSpan({ text: "Pull from Service" });
    pullOption.onclick = async () => {
      dropdownMenu.style.display = "none";
      if (!this.currentStory)
        return;
      try {
<<<<<<< HEAD
        new import_obsidian17.Notice(`Pulling story "${this.currentStory.title}"...`);
        await this.plugin.syncService.pullStory(this.currentStory.id);
        await this.loadHierarchy();
        this.renderTabContent();
        new import_obsidian17.Notice(`Story pulled successfully!`);
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to pull story";
        new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
        new import_obsidian16.Notice(`Pulling story "${this.currentStory.title}"...`);
        await this.plugin.syncService.pullStory(this.currentStory.id);
        await this.loadHierarchy();
        this.renderTabContent();
        new import_obsidian16.Notice(`Story pulled successfully!`);
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to pull story";
        new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const pushOption = dropdownMenu.createEl("button", {
      cls: "story-engine-dropdown-item"
    });
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(pushOption, "upload");
=======
    (0, import_obsidian16.setIcon)(pushOption, "upload");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    pushOption.createSpan({ text: "Push to Service" });
    pushOption.onclick = async () => {
      dropdownMenu.style.display = "none";
      if (!this.currentStory)
        return;
      try {
        const folderPath = this.plugin.fileManager.getStoryFolderPath(this.currentStory.title);
<<<<<<< HEAD
        new import_obsidian17.Notice(`Pushing story "${this.currentStory.title}"...`);
        await this.plugin.syncService.pushStory(folderPath);
        new import_obsidian17.Notice(`Story pushed successfully!`);
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to push story";
        new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
        new import_obsidian16.Notice(`Pushing story "${this.currentStory.title}"...`);
        await this.plugin.syncService.pushStory(folderPath);
        new import_obsidian16.Notice(`Story pushed successfully!`);
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to push story";
        new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    contextButton.onclick = (e) => {
      e.stopPropagation();
      const isVisible = dropdownMenu.style.display !== "none";
      dropdownMenu.style.display = isVisible ? "none" : "block";
    };
    document.addEventListener("click", () => {
      dropdownMenu.style.display = "none";
    }, { once: true });
    const titleSection = headerContent.createDiv({ cls: "story-engine-story-title-section" });
    titleSection.createEl("h1", { text: this.currentStory.title, cls: "story-engine-story-name" });
    const metaRow = titleSection.createDiv({ cls: "story-engine-story-meta-row" });
    const statusPill = metaRow.createSpan({
      cls: `story-engine-status-pill story-engine-status-${this.currentStory.status.toLowerCase().replace(/\s+/g, "-")}`
    });
    statusPill.textContent = this.currentStory.status;
    const versionBadge = metaRow.createSpan({ cls: "story-engine-pill story-engine-pill-strong" });
    versionBadge.textContent = `v${this.currentStory.version_number}`;
    const uuidContainer = metaRow.createDiv({ cls: "story-engine-story-uuid" });
    uuidContainer.createSpan({ text: `${this.currentStory.id.substring(0, 10)}...` });
    const copyUuidButton = uuidContainer.createEl("button", {
      cls: "story-engine-copy-uuid-btn",
      attr: { "aria-label": "Copy UUID" }
    });
    (0, import_obsidian16.setIcon)(copyUuidButton, "copy");
    copyUuidButton.onclick = (e) => {
      e.stopPropagation();
      this.copyStoryId();
    };
  }
  renderStoriesTab() {
    if (this.stories.length === 0) {
      this.renderEmptyCard(this.contentEl, {
        icon: "book",
        title: "No stories yet",
        description: "Create your first story to get started."
      });
      return;
    }
    const storiesGrid = this.contentEl.createDiv({ cls: "story-engine-story-grid" });
    for (const story of this.stories) {
      const card = storiesGrid.createDiv({ cls: "story-engine-story-card" });
      card.onclick = async () => {
        await this.showStoryDetails(story);
      };
      const header = card.createDiv({ cls: "story-engine-story-card-header" });
      header.createEl("h3", { text: story.title, cls: "story-engine-story-card-name" });
      const badges = header.createDiv({ cls: "story-engine-story-card-badges" });
      badges.createSpan({
        text: `v${story.version_number}`,
        cls: "story-engine-pill story-engine-pill-strong"
      });
      badges.createSpan({
        text: story.status,
        cls: `story-engine-status-pill story-engine-status-${story.status.toLowerCase().replace(/\s+/g, "-")}`
      });
      const body = card.createDiv({ cls: "story-engine-story-card-body" });
      const metaRow = body.createDiv({ cls: "story-engine-story-meta" });
      if (story.world_id) {
        const world = this.worlds.find((w) => w.id === story.world_id);
        if (world) {
          metaRow.createSpan({ text: world.name, cls: "story-engine-pill" });
        }
      } else {
        metaRow.createSpan({ text: "No world linked", cls: "story-engine-pill" });
      }
      const footer = card.createDiv({ cls: "story-engine-story-card-footer" });
      const idContainer = footer.createDiv({ cls: "story-engine-world-id" });
      idContainer.createSpan({ text: `${story.id.substring(0, 8)}...` });
      const copyUuidButton = idContainer.createEl("button", {
        cls: "story-engine-uuid-copy-btn",
        attr: { "aria-label": "Copy UUID" }
      });
      (0, import_obsidian16.setIcon)(copyUuidButton, "copy");
      copyUuidButton.onclick = (e) => {
        e.stopPropagation();
        navigator.clipboard.writeText(story.id).then(() => {
          new import_obsidian16.Notice("UUID copied to clipboard");
        }).catch(() => {
          new import_obsidian16.Notice("Failed to copy UUID", 3e3);
        });
      };
      footer.createDiv({ cls: "story-engine-card-hint", text: "Click to open details" });
    }
  }
  renderWorldsTab() {
    const storiesByWorld = /* @__PURE__ */ new Map();
    for (const story of this.stories) {
      const worldId = story.world_id || null;
      if (!storiesByWorld.has(worldId)) {
        storiesByWorld.set(worldId, []);
      }
      storiesByWorld.get(worldId).push(story);
    }
    const storiesWithoutWorld = storiesByWorld.get(null) || [];
    const hasWorlds = this.worlds.length > 0;
    const hasUnassignedStories = storiesWithoutWorld.length > 0;
    if (!hasWorlds && !hasUnassignedStories) {
      this.renderEmptyCard(this.contentEl, {
        icon: "globe",
        title: "No worlds yet",
        description: "Create a world to start organizing your stories.",
        actionText: "Create World",
        onAction: () => {
          new CreateWorldModal(this.app, async (name, description, genre) => {
            try {
              new import_obsidian16.Notice(`Creating world "${name}"...`);
              await this.plugin.apiClient.createWorld(name, description, genre);
              await this.loadStories();
              new import_obsidian16.Notice(`World "${name}" created successfully`);
            } catch (err) {
              const errorMessage = err instanceof Error ? err.message : "Failed to create world";
              new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
            }
          }).open();
        }
      });
      return;
    }
    const worldsGrid = this.contentEl.createDiv({ cls: "story-engine-worlds-grid" });
    for (const world of this.worlds) {
      const worldStories = storiesByWorld.get(world.id) || [];
      const card = worldsGrid.createDiv({ cls: "story-engine-world-card" });
      card.onclick = () => {
        this.showWorldDetails(world);
      };
      const cardHeader = card.createDiv({ cls: "story-engine-world-card-header" });
      const cardTitle = cardHeader.createDiv({ cls: "story-engine-world-card-title" });
      cardTitle.createEl("h3", { text: world.name, cls: "story-engine-world-card-name" });
      const badgeRow = cardHeader.createDiv({ cls: "story-engine-world-card-meta" });
      if (world.genre) {
        badgeRow.createSpan({ text: world.genre, cls: "story-engine-pill" });
      }
      const storyCount = worldStories.length;
      badgeRow.createSpan({
        text: storyCount === 1 ? "1 story" : `${storyCount} stories`,
        cls: "story-engine-pill story-engine-pill-strong"
      });
      const cardBody = card.createDiv({ cls: "story-engine-world-card-body" });
      if (world.description) {
        cardBody.createEl("p", {
          text: world.description,
          cls: "story-engine-world-card-description"
        });
      }
      if (worldStories.length > 0) {
        const storyChips = cardBody.createDiv({ cls: "story-engine-world-story-chips" });
        const maxChips = 3;
        worldStories.slice(0, maxChips).forEach((story) => {
          storyChips.createSpan({ cls: "story-engine-world-story-chip", text: story.title });
        });
        if (worldStories.length > maxChips) {
          storyChips.createSpan({
            cls: "story-engine-world-story-chip story-engine-world-story-chip-muted",
            text: `+${worldStories.length - maxChips} more`
          });
        }
      } else {
        cardBody.createDiv({ cls: "story-engine-world-empty-label", text: "No stories yet" });
      }
      const cardFooter = card.createDiv({ cls: "story-engine-world-card-footer" });
      const idContainer = cardFooter.createDiv({ cls: "story-engine-world-id" });
      idContainer.createSpan({ text: `${world.id.substring(0, 8)}...` });
      const copyUuidButton = idContainer.createEl("button", {
        cls: "story-engine-uuid-copy-btn",
        attr: { "aria-label": "Copy UUID" }
      });
      (0, import_obsidian16.setIcon)(copyUuidButton, "copy");
      copyUuidButton.onclick = (e) => {
        e.stopPropagation();
        navigator.clipboard.writeText(world.id).then(() => {
          new import_obsidian16.Notice("UUID copied to clipboard");
        }).catch(() => {
          new import_obsidian16.Notice("Failed to copy UUID", 3e3);
        });
      };
      cardFooter.createDiv({ cls: "story-engine-world-card-hint", text: "Click to open details" });
    }
    if (storiesWithoutWorld.length > 0) {
      const unassignedCard = worldsGrid.createDiv({ cls: "story-engine-world-card story-engine-world-card-muted" });
      unassignedCard.createEl("h3", { text: "Unassigned Stories", cls: "story-engine-world-card-name" });
      unassignedCard.createEl("p", { text: "Stories that are not linked to any world.", cls: "story-engine-world-card-description" });
      const storyChips = unassignedCard.createDiv({ cls: "story-engine-world-story-chips" });
      const maxChips = 4;
      storiesWithoutWorld.slice(0, maxChips).forEach((story) => {
        storyChips.createSpan({ cls: "story-engine-world-story-chip", text: story.title });
      });
      if (storiesWithoutWorld.length > maxChips) {
        storyChips.createSpan({
          cls: "story-engine-world-story-chip story-engine-world-story-chip-muted",
          text: `+${storiesWithoutWorld.length - maxChips} more`
        });
      }
    }
  }
  renderRPGSystemsTab() {
    if (this.rpgSystems.length === 0) {
      if (this.plugin.settings.mode === "local") {
        this.contentEl.createEl("p", { text: "RPG systems are not available in local mode." });
      } else {
        this.contentEl.createEl("p", { text: "No RPG systems found." });
      }
      return;
    }
    const rpgSystemsList = this.contentEl.createDiv({ cls: "story-engine-list" });
    for (const rpgSystem of this.rpgSystems) {
      const rpgSystemItem = rpgSystemsList.createDiv({
        cls: "story-engine-item"
      });
      const title = rpgSystemItem.createDiv({
        cls: "story-engine-title",
        text: rpgSystem.name
      });
      const meta = rpgSystemItem.createDiv({
        cls: "story-engine-meta"
      });
      if (rpgSystem.description) {
        meta.createEl("span", {
          text: rpgSystem.description
        });
      }
      if (rpgSystem.is_builtin) {
        meta.createEl("span", {
          text: "Built-in",
          cls: "story-engine-badge"
        });
      }
    }
  }
  renderStoryItem(container, story) {
    const storyItem = container.createDiv({
      cls: "story-engine-item"
    });
    const title = storyItem.createDiv({
      cls: "story-engine-title",
      text: story.title
    });
    const meta = storyItem.createDiv({
      cls: "story-engine-meta"
    });
    meta.createEl("span", {
      text: `Version ${story.version_number}`
    });
    meta.createEl("span", {
      text: `Status: ${story.status}`
    });
    if (story.world_id) {
      const world = this.worlds.find((w) => w.id === story.world_id);
      if (world) {
        meta.createEl("span", {
          text: `World: ${world.name}`
        });
      }
    }
    storyItem.onclick = async () => {
      await this.showStoryDetails(story);
    };
  }
  async loadStories() {
    this.loading = true;
    this.error = null;
    try {
      if (this.plugin.settings.mode === "remote" && !this.plugin.settings.tenantId) {
        this.error = "Tenant ID not configured";
        this.loading = false;
        this.renderListContent();
        return;
      }
      this.worlds = await this.plugin.apiClient.getWorlds();
      this.stories = await this.plugin.apiClient.listStories();
      try {
        this.rpgSystems = await this.plugin.apiClient.getRPGSystems();
      } catch (rpgErr) {
        console.warn("RPG systems not available:", rpgErr);
        this.rpgSystems = [];
      }
    } catch (err) {
      this.error = err instanceof Error ? err.message : "Failed to load stories";
      console.error("Error loading stories:", err);
    } finally {
      this.loading = false;
      this.renderListContent();
    }
  }
  // Method to refresh the view
  async refresh() {
    await this.loadStories();
  }
  async showStoryDetails(story) {
    this.currentStory = story;
    this.viewMode = "details";
    this.currentTab = "chapters";
    await this.loadHierarchy();
    this.renderDetails();
  }
  async loadHierarchy() {
    if (!this.currentStory)
      return;
    this.loadingHierarchy = true;
    try {
      this.chapters = await this.plugin.apiClient.getChapters(this.currentStory.id);
      this.scenes = await this.plugin.apiClient.getScenesByStory(this.currentStory.id);
      this.beats = await this.plugin.apiClient.getBeatsByStory(this.currentStory.id);
      const contentBlocksMap = /* @__PURE__ */ new Map();
      this.contentBlockRefs = [];
      for (const chapter of this.chapters) {
        const chapterBlocks = await this.plugin.apiClient.getContentBlocks(chapter.id);
        for (const block of chapterBlocks) {
          contentBlocksMap.set(block.id, block);
        }
      }
      for (const scene of this.scenes) {
        const sceneBlocks = await this.plugin.apiClient.getContentBlocksByScene(scene.id);
        for (const block of sceneBlocks) {
          contentBlocksMap.set(block.id, block);
        }
      }
      for (const beat of this.beats) {
        const beatBlocks = await this.plugin.apiClient.getContentBlocksByBeat(beat.id);
        for (const block of beatBlocks) {
          contentBlocksMap.set(block.id, block);
        }
      }
      this.contentBlocks = Array.from(contentBlocksMap.values());
      for (const block of this.contentBlocks) {
        const refs = await this.plugin.apiClient.getContentAnchors(block.id);
        this.contentBlockRefs.push(...refs);
      }
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to load hierarchy";
<<<<<<< HEAD
      new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
      new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    } finally {
      this.loadingHierarchy = false;
    }
  }
  showList() {
    this.currentStory = null;
    this.viewMode = "list";
    this.renderListHeader();
    this.renderListContent();
  }
  renderDetails() {
    if (!this.contentEl || !this.currentStory)
      return;
    this.contentEl.removeClass("story-engine-list-layout");
    this.contentEl.addClass("story-engine-sidebar-layout");
    this.renderDetailsHeader();
    this.contentEl.empty();
    this.renderTabs();
    this.renderTabContent();
  }
  renderTabs() {
    if (!this.contentEl)
      return;
    const existingTabs = this.contentEl.querySelector(".story-engine-tabs");
    if (existingTabs) {
      existingTabs.remove();
    }
    const existingSidebar = this.contentEl.querySelector(".story-engine-story-sidebar");
    if (existingSidebar) {
      existingSidebar.remove();
    }
    const sidebarPosition = this.plugin.settings.sidebarPosition || "left";
    const tabsContainer = this.contentEl.createDiv({
      cls: `story-engine-world-sidebar story-engine-world-sidebar-${sidebarPosition} story-engine-story-sidebar`
    });
    const tabs = [
      { key: "chapters", label: "Chapters", icon: "book-open" },
      { key: "scenes", label: "Scenes", icon: "film" },
      { key: "beats", label: "Beats", icon: "activity" },
      { key: "contents", label: "Contents", icon: "file-text" },
      { key: "characters", label: "Characters", icon: "users" }
    ];
    for (const tab of tabs) {
      const tabButton = tabsContainer.createEl("button", {
        cls: `story-engine-sidebar-tab ${this.currentTab === tab.key ? "is-active" : ""}`,
        attr: { "aria-label": tab.label }
      });
      (0, import_obsidian16.setIcon)(tabButton, tab.icon);
      tabButton.onclick = async () => {
        this.currentTab = tab.key;
        this.renderTabs();
        if (tab.key === "characters") {
          await this.loadStoryCharacters();
        }
        this.renderTabContent();
      };
    }
  }
  renderTabContent() {
    if (!this.contentEl)
      return;
    const existingContent = this.contentEl.querySelector(".story-engine-story-tab-content");
    if (existingContent) {
      existingContent.remove();
    }
    const legacyContent = this.contentEl.querySelector(".story-engine-tab-content");
    if (legacyContent) {
      legacyContent.remove();
    }
    const sidebarPosition = this.plugin.settings.sidebarPosition || "left";
    const tabContent = this.contentEl.createDiv({
      cls: `story-engine-story-tab-content story-engine-content-sidebar-${sidebarPosition}`
    });
    if (this.loadingHierarchy) {
      tabContent.createEl("p", { text: "Loading..." });
      return;
    }
    switch (this.currentTab) {
      case "chapters":
        this.renderChaptersTab(tabContent);
        break;
      case "scenes":
        this.renderScenesTab(tabContent);
        break;
      case "beats":
        this.renderBeatsTab(tabContent);
        break;
      case "contents":
        this.renderContentsTab(tabContent);
        break;
      case "characters":
        this.renderStoryCharactersTab(tabContent);
        break;
    }
    this.renderStoryActionsBar(tabContent);
  }
<<<<<<< HEAD
  renderChaptersTab(container) {
    container.empty();
    const list = container.createDiv({ cls: "story-engine-list" });
    if (this.chapters.length === 0) {
      list.createEl("p", { text: "No chapters found." });
    } else {
      for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
        const item = list.createDiv({ cls: "story-engine-item" });
        item.createDiv({
          cls: "story-engine-title",
          text: `Chapter ${chapter.number}: ${chapter.title}`
        });
        const meta = item.createDiv({ cls: "story-engine-meta" });
        meta.createEl("span", { text: `Status: ${chapter.status}` });
        const actions = item.createDiv({ cls: "story-engine-item-actions" });
        actions.createEl("button", { text: "Edit" }).onclick = () => {
          new ChapterModal(this.app, async (updatedChapter) => {
            try {
              await this.plugin.apiClient.updateChapter(chapter.id, updatedChapter);
              await this.loadHierarchy();
              this.renderTabContent();
<<<<<<< HEAD
              new import_obsidian17.Notice("Chapter updated successfully");
=======
              new import_obsidian16.Notice("Chapter updated successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
            } catch (err) {
              throw err;
            }
          }, this.chapters, chapter).open();
        };
        if (chapter.number > 1) {
          actions.createEl("button", { text: "Up" }).onclick = () => {
            this.moveChapterUp(chapter);
          };
        }
        if (chapter.number < this.chapters.length) {
          actions.createEl("button", { text: "Down" }).onclick = () => {
            this.moveChapterDown(chapter);
          };
        }
        if (this.currentTab === "contents") {
          actions.createEl("button", { text: "+ Content" }).onclick = () => {
            this.createContentForEntity("chapter", chapter.id, chapter.id);
          };
        }
        actions.createEl("button", { text: "Delete" }).onclick = async () => {
          if (confirm("Delete this chapter?")) {
            try {
              await this.plugin.apiClient.deleteChapter(chapter.id);
              await this.loadHierarchy();
              this.renderTabContent();
<<<<<<< HEAD
              new import_obsidian17.Notice("Chapter deleted");
            } catch (err) {
              new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
              new import_obsidian16.Notice("Chapter deleted");
            } catch (err) {
              new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
            }
          }
        };
      }
    }
    const footer = container.createDiv({ cls: "story-engine-list-footer" });
    const createButton = footer.createEl("button", {
      text: "Create Chapter",
      cls: "mod-cta"
    });
    createButton.onclick = () => {
=======
  renderStoryActionsBar(container) {
    const actionsBar = container.createDiv({ cls: "story-engine-actions-bar" });
    let createButtonText = "Create Chapter";
    let createButtonAction = () => {
>>>>>>> 0541034 (style(obsidian): align story flows with world UI)
      if (!this.currentStory)
        return;
      new ChapterModal(this.app, async (chapter) => {
        try {
          await this.plugin.apiClient.createChapter(this.currentStory.id, chapter);
          await this.loadHierarchy();
          this.renderTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Chapter created successfully");
=======
          new import_obsidian16.Notice("Chapter created successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        } catch (err) {
          throw err;
        }
      }, this.chapters).open();
    };
    switch (this.currentTab) {
      case "scenes":
        createButtonText = "Create Scene";
        createButtonAction = () => {
          if (!this.currentStory)
            return;
          new SceneModal(this.app, this.currentStory.id, this.chapters, async (scene) => {
            try {
              scene.chapter_id = null;
              await this.plugin.apiClient.createScene(scene);
              await this.loadHierarchy();
              this.renderTabContent();
              new import_obsidian16.Notice("Scene created successfully");
            } catch (err) {
              throw err;
            }
          }, this.scenes, void 0, null).open();
        };
        break;
      case "beats":
        createButtonText = this.scenes.length > 0 ? "Create Beat" : "Go to Scenes";
        createButtonAction = () => {
          if (this.scenes.length === 0) {
            this.currentTab = "scenes";
            this.renderTabs();
            this.renderTabContent();
            return;
          }
          if (!this.currentStory)
            return;
          const scene = this.scenes.sort((a, b) => a.order_num - b.order_num)[0];
          new BeatModal(this.app, this.currentStory.id, this.scenes, async (beat) => {
            try {
              beat.scene_id = scene.id;
              await this.plugin.apiClient.createBeat(beat);
              await this.loadHierarchy();
              this.renderTabContent();
              new import_obsidian16.Notice("Beat created successfully");
            } catch (err) {
              throw err;
            }
          }, this.beats, void 0, this.chapters, scene.id).open();
        };
        break;
      case "contents":
        createButtonText = this.chapters.length > 0 ? "Add Content" : "Go to Chapters";
        createButtonAction = () => {
          if (this.chapters.length === 0) {
            this.currentTab = "chapters";
            this.renderTabs();
            this.renderTabContent();
            return;
          }
          const chapter = this.chapters.sort((a, b) => a.number - b.number)[0];
          this.createContentForEntity("chapter", chapter.id, chapter.id);
        };
        break;
      case "characters":
        createButtonText = "Create Character";
        createButtonAction = () => {
          var _a;
          if (!((_a = this.currentStory) == null ? void 0 : _a.world_id)) {
            new import_obsidian16.Notice("This story is not linked to a world", 3e3);
            return;
          }
          this.showCreateCharacterModalForStory();
        };
        break;
    }
    const createButton = actionsBar.createEl("button", {
      text: createButtonText,
      cls: "mod-cta story-engine-create-btn"
    });
    createButton.onclick = createButtonAction;
  }
  renderChaptersTab(container) {
    container.empty();
    if (this.chapters.length === 0) {
      this.renderEmptyCard(container, {
        icon: "book-open",
        title: "No chapters yet",
        description: "Create the first chapter to start organizing this story.",
        actionText: "Create Chapter",
        onAction: () => {
          if (!this.currentStory)
            return;
          new ChapterModal(this.app, async (chapter) => {
            try {
              await this.plugin.apiClient.createChapter(this.currentStory.id, chapter);
              await this.loadHierarchy();
              this.renderTabContent();
              new import_obsidian16.Notice("Chapter created successfully");
            } catch (err) {
              throw err;
            }
          }, this.chapters).open();
        }
      });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const item = list.createDiv({ cls: "story-engine-item" });
      item.createDiv({
        cls: "story-engine-title",
        text: `Chapter ${chapter.number}: ${chapter.title}`
      });
      const meta = item.createDiv({ cls: "story-engine-meta" });
      meta.createEl("span", { text: `Status: ${chapter.status}` });
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      actions.createEl("button", { text: "Edit" }).onclick = () => {
        new ChapterModal(this.app, async (updatedChapter) => {
          try {
            await this.plugin.apiClient.updateChapter(chapter.id, updatedChapter);
            await this.loadHierarchy();
            this.renderTabContent();
            new import_obsidian16.Notice("Chapter updated successfully");
          } catch (err) {
            throw err;
          }
        }, this.chapters, chapter).open();
      };
      if (chapter.number > 1) {
        actions.createEl("button", { text: "Up" }).onclick = () => {
          this.moveChapterUp(chapter);
        };
      }
      if (chapter.number < this.chapters.length) {
        actions.createEl("button", { text: "Down" }).onclick = () => {
          this.moveChapterDown(chapter);
        };
      }
      if (this.currentTab === "contents") {
        actions.createEl("button", { text: "+ Content" }).onclick = () => {
          this.createContentForEntity("chapter", chapter.id, chapter.id);
        };
      }
      actions.createEl("button", { text: "Delete" }).onclick = async () => {
        if (confirm("Delete this chapter?")) {
          try {
            await this.plugin.apiClient.deleteChapter(chapter.id);
            await this.loadHierarchy();
            this.renderTabContent();
            new import_obsidian16.Notice("Chapter deleted");
          } catch (err) {
            new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
          }
        }
      };
    }
  }
  renderScenesTab(container) {
    container.empty();
    if (this.scenes.length === 0 && this.chapters.length === 0) {
      this.renderEmptyCard(container, {
        icon: "film",
        title: "No scenes yet",
        description: "Add a chapter and its first scene to start structuring the story.",
        actionText: "Create Scene",
        onAction: () => {
          if (!this.currentStory)
            return;
          new SceneModal(this.app, this.currentStory.id, this.chapters, async (scene) => {
            try {
              scene.chapter_id = null;
              await this.plugin.apiClient.createScene(scene);
              await this.loadHierarchy();
              this.renderTabContent();
              new import_obsidian16.Notice("Scene created successfully");
            } catch (err) {
              throw err;
            }
          }, this.scenes, void 0, null).open();
        }
      });
      return;
    }
    const scenesByChapter = /* @__PURE__ */ new Map();
    for (const scene of this.scenes) {
      const chapterId = scene.chapter_id || null;
      if (!scenesByChapter.has(chapterId)) {
        scenesByChapter.set(chapterId, []);
      }
      scenesByChapter.get(chapterId).push(scene);
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const chapterScenes = scenesByChapter.get(chapter.id) || [];
      const group = list.createDiv({ cls: "story-engine-group" });
      const groupHeader = group.createDiv({ cls: "story-engine-group-header" });
      groupHeader.createEl("h3", { text: `Chapter ${chapter.number}: ${chapter.title}` });
      const groupItems = group.createDiv({ cls: "story-engine-group-items" });
      if (chapterScenes.length === 0) {
        groupItems.createEl("p", { text: "No scenes in this chapter." });
      } else {
        for (const scene of chapterScenes.sort((a, b) => a.order_num - b.order_num)) {
          this.renderSceneItem(groupItems, scene);
        }
      }
      const groupFooter = group.createDiv({ cls: "story-engine-group-footer" });
      const addButton = groupFooter.createEl("button", {
        text: "+ Add Scene",
        cls: "story-engine-add-btn"
      });
      addButton.onclick = () => {
        if (!this.currentStory)
          return;
        new SceneModal(this.app, this.currentStory.id, this.chapters, async (scene) => {
          try {
            scene.chapter_id = chapter.id;
            await this.plugin.apiClient.createScene(scene);
            await this.loadHierarchy();
            this.renderTabContent();
<<<<<<< HEAD
            new import_obsidian17.Notice("Scene created successfully");
=======
            new import_obsidian16.Notice("Scene created successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          } catch (err) {
            throw err;
          }
        }, this.scenes, void 0, chapter.id).open();
      };
    }
    const orphanScenes = scenesByChapter.get(null) || [];
    if (orphanScenes.length > 0 || scenesByChapter.size === 0) {
      const group = list.createDiv({ cls: "story-engine-group" });
      const groupHeader = group.createDiv({ cls: "story-engine-group-header" });
      groupHeader.createEl("h3", { text: "Without Chapter" });
      const groupItems = group.createDiv({ cls: "story-engine-group-items" });
      for (const scene of orphanScenes.sort((a, b) => a.order_num - b.order_num)) {
        this.renderSceneItem(groupItems, scene);
      }
      const groupFooter = group.createDiv({ cls: "story-engine-group-footer" });
      const addButton = groupFooter.createEl("button", {
        text: "+ Add Scene",
        cls: "story-engine-add-btn"
      });
      addButton.onclick = () => {
        if (!this.currentStory)
          return;
        new SceneModal(this.app, this.currentStory.id, this.chapters, async (scene) => {
          try {
            scene.chapter_id = null;
            await this.plugin.apiClient.createScene(scene);
            await this.loadHierarchy();
            this.renderTabContent();
<<<<<<< HEAD
            new import_obsidian17.Notice("Scene created successfully");
=======
            new import_obsidian16.Notice("Scene created successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          } catch (err) {
            throw err;
          }
        }, this.scenes, void 0, null).open();
      };
    }
  }
  renderSceneItem(container, scene) {
    const item = container.createDiv({ cls: "story-engine-item" });
    item.createDiv({
      cls: "story-engine-title",
      text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`
    });
    const meta = item.createDiv({ cls: "story-engine-meta" });
    if (scene.time_ref) {
      meta.createEl("span", { text: `Time: ${scene.time_ref}` });
    }
    const actions = item.createDiv({ cls: "story-engine-item-actions" });
    actions.createEl("button", { text: "Edit" }).onclick = () => {
      if (!this.currentStory)
        return;
      new SceneModal(this.app, this.currentStory.id, this.chapters, async (updatedScene) => {
        try {
          await this.plugin.apiClient.updateScene(scene.id, updatedScene);
          await this.loadHierarchy();
          this.renderTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Scene updated successfully");
=======
          new import_obsidian16.Notice("Scene updated successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        } catch (err) {
          throw err;
        }
      }, this.scenes, scene).open();
    };
    const siblingScenes = this.scenes.filter((s) => s.chapter_id === scene.chapter_id).sort((a, b) => a.order_num - b.order_num);
    const minOrderNum = siblingScenes.length > 0 ? Math.min(...siblingScenes.map((s) => s.order_num)) : scene.order_num;
    const maxOrderNum = siblingScenes.length > 0 ? Math.max(...siblingScenes.map((s) => s.order_num)) : scene.order_num;
    if (scene.order_num > minOrderNum) {
      actions.createEl("button", { text: "Up" }).onclick = () => {
        this.moveSceneUp(scene);
      };
    }
    if (scene.order_num < maxOrderNum) {
      actions.createEl("button", { text: "Down" }).onclick = () => {
        this.moveSceneDown(scene);
      };
    }
    actions.createEl("button", { text: "Relinkar" }).onclick = async () => {
      await this.showMoveSceneModal(scene);
    };
    if (this.currentTab === "contents") {
      const chapterId = scene.chapter_id || (this.chapters.length > 0 ? this.chapters[0].id : "");
      if (chapterId) {
        actions.createEl("button", { text: "+ Content" }).onclick = () => {
          this.createContentForEntity("scene", scene.id, chapterId);
        };
      }
    }
    actions.createEl("button", { text: "Delete" }).onclick = async () => {
      if (confirm("Delete this scene?")) {
        try {
          await this.plugin.apiClient.deleteScene(scene.id);
          await this.loadHierarchy();
          this.renderTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Scene deleted");
        } catch (err) {
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
          new import_obsidian16.Notice("Scene deleted");
        } catch (err) {
          new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        }
      }
    };
  }
  renderBeatsTab(container) {
    container.empty();
    if (this.beats.length === 0) {
      this.renderEmptyCard(container, {
        icon: "activity",
        title: "No beats yet",
        description: this.scenes.length === 0 ? "Create a scene first, then add beats to outline the flow." : "Add beats inside scenes to build the narrative rhythm.",
        actionText: this.scenes.length === 0 ? "Go to Scenes" : "Go to Scenes",
        onAction: () => {
          this.currentTab = "scenes";
          this.renderTabs();
          this.renderTabContent();
        }
      });
      return;
    }
    const beatsByScene = /* @__PURE__ */ new Map();
    for (const beat of this.beats) {
      if (!beatsByScene.has(beat.scene_id)) {
        beatsByScene.set(beat.scene_id, []);
      }
      beatsByScene.get(beat.scene_id).push(beat);
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const chapterScenes = this.scenes.filter((s) => s.chapter_id === chapter.id).sort((a, b) => a.order_num - b.order_num);
      if (chapterScenes.length > 0) {
        const chapterGroup = list.createDiv({ cls: "story-engine-chapter-group" });
        const chapterHeader = chapterGroup.createDiv({ cls: "story-engine-chapter-group-header" });
        chapterHeader.createEl("h2", {
          text: `Chapter ${chapter.number}: ${chapter.title}`
        });
        const chapterContent = chapterGroup.createDiv({ cls: "story-engine-chapter-group-content" });
        for (const scene of chapterScenes) {
          const sceneBeats = beatsByScene.get(scene.id) || [];
          const sceneGroup = chapterContent.createDiv({ cls: "story-engine-group" });
          const sceneHeader = sceneGroup.createDiv({ cls: "story-engine-group-header" });
          sceneHeader.createEl("h3", {
            text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`
          });
          const sceneItems = sceneGroup.createDiv({ cls: "story-engine-group-items" });
          if (sceneBeats.length === 0) {
            sceneItems.createEl("p", { text: "No beats in this scene." });
          } else {
            for (const beat of sceneBeats.sort((a, b) => a.order_num - b.order_num)) {
              this.renderBeatItem(sceneItems, beat);
            }
          }
          const sceneFooter = sceneGroup.createDiv({ cls: "story-engine-group-footer" });
          const addButton = sceneFooter.createEl("button", {
            text: "+ Add Beat",
            cls: "story-engine-add-btn"
          });
          addButton.onclick = () => {
            if (!this.currentStory)
              return;
            new BeatModal(this.app, this.currentStory.id, this.scenes, async (beat) => {
              try {
                beat.scene_id = scene.id;
                await this.plugin.apiClient.createBeat(beat);
                await this.loadHierarchy();
                this.renderTabContent();
<<<<<<< HEAD
                new import_obsidian17.Notice("Beat created successfully");
=======
                new import_obsidian16.Notice("Beat created successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
              } catch (err) {
                throw err;
              }
            }, this.beats, void 0, this.chapters, scene.id).open();
          };
        }
      }
    }
    const orphanBeats = this.beats.filter((b) => {
      const scene = this.scenes.find((s) => s.id === b.scene_id);
      return !scene || !scene.chapter_id;
    });
    if (this.chapters.length === 0 || orphanBeats.length > 0 || this.scenes.some((s) => !s.chapter_id)) {
      const orphanGroup = list.createDiv({ cls: "story-engine-chapter-group" });
      const orphanHeader = orphanGroup.createDiv({ cls: "story-engine-chapter-group-header" });
      orphanHeader.createEl("h2", { text: "Without Chapter" });
      const orphanContent = orphanGroup.createDiv({ cls: "story-engine-chapter-group-content" });
      const orphanScenes = this.scenes.filter((s) => !s.chapter_id).sort((a, b) => a.order_num - b.order_num);
      for (const scene of orphanScenes) {
        const sceneBeats = beatsByScene.get(scene.id) || [];
        const sceneGroup = orphanContent.createDiv({ cls: "story-engine-group" });
        const sceneHeader = sceneGroup.createDiv({ cls: "story-engine-group-header" });
        sceneHeader.createEl("h3", {
          text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`
        });
        const sceneItems = sceneGroup.createDiv({ cls: "story-engine-group-items" });
        if (sceneBeats.length === 0) {
          sceneItems.createEl("p", { text: "No beats in this scene." });
        } else {
          for (const beat of sceneBeats.sort((a, b) => a.order_num - b.order_num)) {
            this.renderBeatItem(sceneItems, beat);
          }
        }
        const sceneFooter = sceneGroup.createDiv({ cls: "story-engine-group-footer" });
        const addButton = sceneFooter.createEl("button", {
          text: "+ Add Beat",
          cls: "story-engine-add-btn"
        });
        addButton.onclick = () => {
          if (!this.currentStory)
            return;
          new BeatModal(this.app, this.currentStory.id, this.scenes, async (beat) => {
            try {
              beat.scene_id = scene.id;
              await this.plugin.apiClient.createBeat(beat);
              await this.loadHierarchy();
              this.renderTabContent();
<<<<<<< HEAD
              new import_obsidian17.Notice("Beat created successfully");
=======
              new import_obsidian16.Notice("Beat created successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
            } catch (err) {
              throw err;
            }
          }, this.beats, void 0, this.chapters, scene.id).open();
        };
      }
      const beatsWithoutScene = orphanBeats.filter((b) => {
        const scene = this.scenes.find((s) => s.id === b.scene_id);
        return !scene;
      });
      if (beatsWithoutScene.length > 0 || orphanScenes.length === 0 && this.beats.length > 0 && this.scenes.length === 0) {
        const sceneGroup = orphanContent.createDiv({ cls: "story-engine-group" });
        const sceneHeader = sceneGroup.createDiv({ cls: "story-engine-group-header" });
        sceneHeader.createEl("h3", { text: "Without Scene" });
        const sceneItems = sceneGroup.createDiv({ cls: "story-engine-group-items" });
        if (beatsWithoutScene.length > 0) {
          for (const beat of beatsWithoutScene.sort((a, b) => a.order_num - b.order_num)) {
            this.renderBeatItem(sceneItems, beat);
          }
        } else {
          sceneItems.createEl("p", { text: "No beats without scene." });
        }
      }
    }
  }
  renderBeatItem(container, beat) {
    const item = container.createDiv({ cls: "story-engine-item" });
    item.createDiv({
      cls: "story-engine-title",
      text: `Beat ${beat.order_num}: ${beat.type}`
    });
    const meta = item.createDiv({ cls: "story-engine-meta" });
    if (beat.intent) {
      meta.createEl("span", { text: `Intent: ${beat.intent}` });
    }
    if (beat.outcome) {
      meta.createEl("span", { text: `Outcome: ${beat.outcome}` });
    }
    const actions = item.createDiv({ cls: "story-engine-item-actions" });
    actions.createEl("button", { text: "Edit" }).onclick = () => {
      if (!this.currentStory)
        return;
      new BeatModal(this.app, this.currentStory.id, this.scenes, async (updatedBeat) => {
        try {
          await this.plugin.apiClient.updateBeat(beat.id, updatedBeat);
          await this.loadHierarchy();
          this.renderTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Beat updated successfully");
=======
          new import_obsidian16.Notice("Beat updated successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        } catch (err) {
          throw err;
        }
      }, this.beats, beat, this.chapters).open();
    };
    const siblingBeats = this.beats.filter((b) => b.scene_id === beat.scene_id).sort((a, b) => a.order_num - b.order_num);
    const minOrderNum = siblingBeats.length > 0 ? Math.min(...siblingBeats.map((b) => b.order_num)) : beat.order_num;
    const maxOrderNum = siblingBeats.length > 0 ? Math.max(...siblingBeats.map((b) => b.order_num)) : beat.order_num;
    if (beat.order_num > minOrderNum) {
      actions.createEl("button", { text: "Up" }).onclick = () => {
        this.moveBeatUp(beat);
      };
    }
    if (beat.order_num < maxOrderNum) {
      actions.createEl("button", { text: "Down" }).onclick = () => {
        this.moveBeatDown(beat);
      };
    }
    actions.createEl("button", { text: "Relinkar" }).onclick = async () => {
      await this.showMoveBeatModal(beat);
    };
    if (this.currentTab === "contents") {
      const scene = this.scenes.find((s) => s.id === beat.scene_id);
      const chapterId = (scene == null ? void 0 : scene.chapter_id) || (this.chapters.length > 0 ? this.chapters[0].id : "");
      if (chapterId) {
        actions.createEl("button", { text: "+ Content" }).onclick = () => {
          this.createContentForEntity("beat", beat.id, chapterId);
        };
      }
    }
    actions.createEl("button", { text: "Delete" }).onclick = async () => {
      if (confirm("Delete this beat?")) {
        try {
          await this.plugin.apiClient.deleteBeat(beat.id);
          await this.loadHierarchy();
          this.renderTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Beat deleted");
        } catch (err) {
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
          new import_obsidian16.Notice("Beat deleted");
        } catch (err) {
          new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        }
      }
    };
  }
  showEditStoryNameModal() {
    if (!this.currentStory)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit Story Name");
    const content = modal.contentEl;
    let title = this.currentStory.title;
    content.createEl("label", { text: "Story Name *" });
    const titleInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: title });
    titleInput.oninput = () => {
      title = titleInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!title.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Story name is required", 3e3);
=======
        new import_obsidian16.Notice("Story name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        const updatedStory = await this.plugin.apiClient.updateStory(this.currentStory.id, title.trim());
        this.currentStory = updatedStory;
        await this.loadStories();
        this.renderDetailsHeader();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Story name updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Story name updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    titleInput.focus();
    titleInput.select();
  }
  async cloneStory() {
    var _a;
    if (!this.currentStory)
      return;
    const cloneButton = (_a = this.headerEl) == null ? void 0 : _a.querySelector(".story-engine-clone-btn");
    if (cloneButton) {
      cloneButton.disabled = true;
      cloneButton.setText("Cloning...");
    }
    try {
      if (!this.plugin.settings.tenantId) {
        throw new Error("Tenant ID not configured");
      }
      const clonedStory = await this.plugin.apiClient.cloneStory(
        this.currentStory.id
      );
<<<<<<< HEAD
      new import_obsidian17.Notice(`Story "${clonedStory.title}" cloned successfully!`);
=======
      new import_obsidian16.Notice(`Story "${clonedStory.title}" cloned successfully!`);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      await this.loadStories();
      await this.showStoryDetails(clonedStory);
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Clone failed";
<<<<<<< HEAD
      new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
      new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      if (cloneButton) {
        cloneButton.setText("Clone Story");
        cloneButton.disabled = false;
      }
    }
  }
  showEditWorldModal() {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit World");
    const content = modal.contentEl;
    let name = this.currentWorld.name;
    let description = this.currentWorld.description;
    let genre = this.currentWorld.genre;
    content.createEl("label", { text: "World Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Genre *" });
    const genreInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: genre });
    genreInput.oninput = () => {
      genre = genreInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("World name is required", 3e3);
        return;
      }
      if (!genre.trim()) {
        new import_obsidian17.Notice("Genre is required", 3e3);
=======
        new import_obsidian16.Notice("World name is required", 3e3);
        return;
      }
      if (!genre.trim()) {
        new import_obsidian16.Notice("Genre is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        const updatedWorld = await this.plugin.apiClient.updateWorld(
          this.currentWorld.id,
          name.trim(),
          description.trim(),
          genre.trim()
        );
        this.currentWorld = updatedWorld;
        await this.loadStories();
        this.renderWorldDetails();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("World updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("World updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
    nameInput.select();
  }
  copyStoryId() {
    if (!this.currentStory)
      return;
    navigator.clipboard.writeText(this.currentStory.id).then(() => {
<<<<<<< HEAD
      new import_obsidian17.Notice("UUID copied to clipboard");
=======
      new import_obsidian16.Notice("UUID copied to clipboard");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }).catch(() => {
      const textarea = document.createElement("textarea");
      textarea.value = this.currentStory.id;
      textarea.style.position = "fixed";
      textarea.style.opacity = "0";
      textarea.style.left = "-9999px";
      document.body.appendChild(textarea);
      textarea.select();
      try {
        document.execCommand("copy");
<<<<<<< HEAD
        new import_obsidian17.Notice("UUID copied to clipboard");
      } catch (err) {
        new import_obsidian17.Notice("Failed to copy UUID", 3e3);
=======
        new import_obsidian16.Notice("UUID copied to clipboard");
      } catch (err) {
        new import_obsidian16.Notice("Failed to copy UUID", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
      document.body.removeChild(textarea);
    });
  }
  async moveChapterUp(chapter) {
    const sortedChapters = [...this.chapters].sort((a, b) => a.number - b.number);
    const currentIndex = sortedChapters.findIndex((c) => c.id === chapter.id);
    if (currentIndex <= 0)
      return;
    const previousChapter = sortedChapters[currentIndex - 1];
    const tempNumber = chapter.number;
    try {
      await this.plugin.apiClient.updateChapter(chapter.id, { number: previousChapter.number });
      await this.plugin.apiClient.updateChapter(previousChapter.id, { number: tempNumber });
      await this.loadHierarchy();
      this.renderTabContent();
<<<<<<< HEAD
      new import_obsidian17.Notice("Chapter moved up");
    } catch (err) {
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
      new import_obsidian16.Notice("Chapter moved up");
    } catch (err) {
      new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  async moveChapterDown(chapter) {
    const sortedChapters = [...this.chapters].sort((a, b) => a.number - b.number);
    const currentIndex = sortedChapters.findIndex((c) => c.id === chapter.id);
    if (currentIndex < 0 || currentIndex >= sortedChapters.length - 1)
      return;
    const nextChapter = sortedChapters[currentIndex + 1];
    const tempNumber = chapter.number;
    try {
      await this.plugin.apiClient.updateChapter(chapter.id, { number: nextChapter.number });
      await this.plugin.apiClient.updateChapter(nextChapter.id, { number: tempNumber });
      await this.loadHierarchy();
      this.renderTabContent();
<<<<<<< HEAD
      new import_obsidian17.Notice("Chapter moved down");
    } catch (err) {
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
      new import_obsidian16.Notice("Chapter moved down");
    } catch (err) {
      new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  async moveSceneUp(scene) {
    const siblingScenes = this.scenes.filter((s) => s.chapter_id === scene.chapter_id).sort((a, b) => a.order_num - b.order_num);
    const currentIndex = siblingScenes.findIndex((s) => s.id === scene.id);
    if (currentIndex <= 0)
      return;
    const previousScene = siblingScenes[currentIndex - 1];
    const tempOrderNum = scene.order_num;
    try {
      await this.plugin.apiClient.updateScene(scene.id, { order_num: previousScene.order_num });
      await this.plugin.apiClient.updateScene(previousScene.id, { order_num: tempOrderNum });
      await this.loadHierarchy();
      this.renderTabContent();
<<<<<<< HEAD
      new import_obsidian17.Notice("Scene moved up");
    } catch (err) {
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
      new import_obsidian16.Notice("Scene moved up");
    } catch (err) {
      new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  async moveSceneDown(scene) {
    const siblingScenes = this.scenes.filter((s) => s.chapter_id === scene.chapter_id).sort((a, b) => a.order_num - b.order_num);
    const currentIndex = siblingScenes.findIndex((s) => s.id === scene.id);
    if (currentIndex < 0 || currentIndex >= siblingScenes.length - 1)
      return;
    const nextScene = siblingScenes[currentIndex + 1];
    const tempOrderNum = scene.order_num;
    try {
      await this.plugin.apiClient.updateScene(scene.id, { order_num: nextScene.order_num });
      await this.plugin.apiClient.updateScene(nextScene.id, { order_num: tempOrderNum });
      await this.loadHierarchy();
      this.renderTabContent();
<<<<<<< HEAD
      new import_obsidian17.Notice("Scene moved down");
    } catch (err) {
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
      new import_obsidian16.Notice("Scene moved down");
    } catch (err) {
      new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  async moveBeatUp(beat) {
    const siblingBeats = this.beats.filter((b) => b.scene_id === beat.scene_id).sort((a, b) => a.order_num - b.order_num);
    const currentIndex = siblingBeats.findIndex((b) => b.id === beat.id);
    if (currentIndex <= 0)
      return;
    const previousBeat = siblingBeats[currentIndex - 1];
    const tempOrderNum = beat.order_num;
    try {
      await this.plugin.apiClient.updateBeat(beat.id, { order_num: previousBeat.order_num });
      await this.plugin.apiClient.updateBeat(previousBeat.id, { order_num: tempOrderNum });
      await this.loadHierarchy();
      this.renderTabContent();
<<<<<<< HEAD
      new import_obsidian17.Notice("Beat moved up");
    } catch (err) {
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
      new import_obsidian16.Notice("Beat moved up");
    } catch (err) {
      new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  async moveBeatDown(beat) {
    const siblingBeats = this.beats.filter((b) => b.scene_id === beat.scene_id).sort((a, b) => a.order_num - b.order_num);
    const currentIndex = siblingBeats.findIndex((b) => b.id === beat.id);
    if (currentIndex < 0 || currentIndex >= siblingBeats.length - 1)
      return;
    const nextBeat = siblingBeats[currentIndex + 1];
    const tempOrderNum = beat.order_num;
    try {
      await this.plugin.apiClient.updateBeat(beat.id, { order_num: nextBeat.order_num });
      await this.plugin.apiClient.updateBeat(nextBeat.id, { order_num: tempOrderNum });
      await this.loadHierarchy();
      this.renderTabContent();
<<<<<<< HEAD
      new import_obsidian17.Notice("Beat moved down");
    } catch (err) {
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
      new import_obsidian16.Notice("Beat moved down");
    } catch (err) {
      new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  async showMoveSceneModal(scene) {
    if (!this.currentStory)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Move Scene");
    const content = modal.contentEl;
    content.createEl("p", { text: `Move scene "${scene.goal || `Scene ${scene.order_num}`}" to:` });
    const select = content.createEl("select", { cls: "story-engine-move-select" });
    const noChapterOption = select.createEl("option", { text: "No Chapter", value: "" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const option = select.createEl("option", {
        text: `Chapter ${chapter.number}: ${chapter.title}`,
        value: chapter.id
      });
      if (scene.chapter_id === chapter.id) {
        option.selected = true;
      }
    }
    if (!scene.chapter_id) {
      noChapterOption.selected = true;
    }
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const moveButton = buttonContainer.createEl("button", {
      text: "Move",
      cls: "mod-cta"
    });
    moveButton.onclick = async () => {
      const selectedChapterId = select.value || null;
      try {
        await this.plugin.apiClient.moveScene(scene.id, selectedChapterId);
        await this.loadHierarchy();
        this.renderTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Scene moved successfully");
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to move scene";
        new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
        new import_obsidian16.Notice("Scene moved successfully");
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to move scene";
        new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    cancelButton.onclick = () => modal.close();
    modal.open();
  }
  async showMoveBeatModal(beat) {
    if (!this.currentStory)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Move Beat");
    const content = modal.contentEl;
    content.createEl("p", { text: `Move beat "${beat.type}" to:` });
    const select = content.createEl("select", { cls: "story-engine-move-select" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const chapterScenes = this.scenes.filter((s) => s.chapter_id === chapter.id).sort((a, b) => a.order_num - b.order_num);
      if (chapterScenes.length > 0) {
        const optgroup = select.createEl("optgroup");
        optgroup.label = `Chapter ${chapter.number}: ${chapter.title}`;
        for (const scene of chapterScenes) {
          const option = optgroup.createEl("option", {
            text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`,
            value: scene.id
          });
          if (beat.scene_id === scene.id) {
            option.selected = true;
          }
        }
      }
    }
    const orphanScenes = this.scenes.filter((s) => !s.chapter_id);
    if (orphanScenes.length > 0) {
      const optgroup = select.createEl("optgroup");
      optgroup.label = "No Chapter";
      for (const scene of orphanScenes.sort((a, b) => a.order_num - b.order_num)) {
        const option = optgroup.createEl("option", {
          text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`,
          value: scene.id
        });
        if (beat.scene_id === scene.id) {
          option.selected = true;
        }
      }
    }
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const moveButton = buttonContainer.createEl("button", {
      text: "Move",
      cls: "mod-cta"
    });
    moveButton.onclick = async () => {
      const selectedSceneId = select.value;
      if (!selectedSceneId) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Please select a scene", 3e3);
=======
        new import_obsidian16.Notice("Please select a scene", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.moveBeat(beat.id, selectedSceneId);
        await this.loadHierarchy();
        this.renderTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Beat moved successfully");
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to move beat";
        new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
        new import_obsidian16.Notice("Beat moved successfully");
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to move beat";
        new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    cancelButton.onclick = () => modal.close();
    modal.open();
  }
  renderContentsTab(container) {
    container.empty();
    if (this.contentBlocks.length === 0) {
      this.renderEmptyCard(container, {
        icon: "file-text",
        title: "No content yet",
        description: "Add content to chapters, scenes or beats to see it organized here."
      });
      return;
    }
    const contentsByChapter = /* @__PURE__ */ new Map();
    const contentsByScene = /* @__PURE__ */ new Map();
    const contentsByBeat = /* @__PURE__ */ new Map();
    const orphanContents = [];
    for (const block of this.contentBlocks) {
      const refs = this.contentBlockRefs.filter((r) => r.content_block_id === block.id);
      if (refs.length === 0) {
        orphanContents.push(block);
        continue;
      }
      for (const ref of refs) {
        if (ref.entity_type === "chapter") {
          if (!contentsByChapter.has(ref.entity_id)) {
            contentsByChapter.set(ref.entity_id, []);
          }
          contentsByChapter.get(ref.entity_id).push(block);
        } else if (ref.entity_type === "scene") {
          if (!contentsByScene.has(ref.entity_id)) {
            contentsByScene.set(ref.entity_id, []);
          }
          contentsByScene.get(ref.entity_id).push(block);
        } else if (ref.entity_type === "beat") {
          if (!contentsByBeat.has(ref.entity_id)) {
            contentsByBeat.set(ref.entity_id, []);
          }
          contentsByBeat.get(ref.entity_id).push(block);
        }
      }
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const chapterContents = contentsByChapter.get(chapter.id) || [];
      const chapterScenes = this.scenes.filter((s) => s.chapter_id === chapter.id).sort((a, b) => a.order_num - b.order_num);
      if (chapterContents.length > 0 || chapterScenes.length > 0 || chapterScenes.some((s) => {
        const sceneContents = contentsByScene.get(s.id) || [];
        const sceneBeats = this.beats.filter((b) => b.scene_id === s.id);
        const beatContents = sceneBeats.flatMap((b) => contentsByBeat.get(b.id) || []);
        return sceneContents.length > 0 || beatContents.length > 0;
      })) {
        const chapterGroup = list.createDiv({ cls: "story-engine-chapter-group" });
        const chapterHeader = chapterGroup.createDiv({ cls: "story-engine-chapter-group-header story-engine-hoverable-header" });
        chapterHeader.createEl("h2", {
          text: `Chapter ${chapter.number}: ${chapter.title}`
        });
        const chapterHeaderActions = chapterHeader.createDiv({ cls: "story-engine-hover-header-actions" });
        const textBtn = chapterHeaderActions.createEl("button", {
          cls: "story-engine-add-content-btn story-engine-add-text-btn",
          attr: { "aria-label": "Add text content" }
        });
        textBtn.innerHTML = '<span class="story-engine-icon">\u{1F4DD}</span>';
        textBtn.onclick = () => {
          this.createContentForEntity("chapter", chapter.id, chapter.id, "text");
        };
        const imageBtn = chapterHeaderActions.createEl("button", {
          cls: "story-engine-add-content-btn story-engine-add-image-btn",
          attr: { "aria-label": "Add image content" }
        });
        imageBtn.innerHTML = '<span class="story-engine-icon">\u{1F5BC}\uFE0F</span>';
        imageBtn.onclick = () => {
          this.createContentForEntity("chapter", chapter.id, chapter.id, "image");
        };
        const chapterContent = chapterGroup.createDiv({ cls: "story-engine-chapter-group-content" });
        const chapterContentsGroup = chapterContent.createDiv({ cls: "story-engine-group" });
        const chapterContentsHeader = chapterContentsGroup.createDiv({ cls: "story-engine-group-header" });
        chapterContentsHeader.createEl("h3", { text: "Chapter Contents" });
        const chapterContentsItems = chapterContentsGroup.createDiv({ cls: "story-engine-group-items" });
        if (chapterContents.length > 0) {
          for (const block of chapterContents) {
            this.renderContentItem(chapterContentsItems, block, "chapter", chapter.id);
          }
        } else {
          chapterContentsItems.createEl("p", { text: "No content in this chapter.", cls: "story-engine-empty-content" });
        }
        for (const scene of chapterScenes) {
          const sceneContents = contentsByScene.get(scene.id) || [];
          const sceneBeats = this.beats.filter((b) => b.scene_id === scene.id).sort((a, b) => a.order_num - b.order_num);
          const beatContents = sceneBeats.flatMap((b) => contentsByBeat.get(b.id) || []);
          const sceneGroup = chapterContent.createDiv({ cls: "story-engine-group" });
          const sceneHeader = sceneGroup.createDiv({ cls: "story-engine-group-header story-engine-hoverable-header" });
          sceneHeader.createEl("h3", {
            text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`
          });
          const sceneHeaderActions = sceneHeader.createDiv({ cls: "story-engine-hover-header-actions" });
          const chapterId = scene.chapter_id || (this.chapters.length > 0 ? this.chapters[0].id : "");
          if (chapterId) {
            const textBtn2 = sceneHeaderActions.createEl("button", {
              cls: "story-engine-add-content-btn story-engine-add-text-btn",
              attr: { "aria-label": "Add text content" }
            });
            textBtn2.innerHTML = '<span class="story-engine-icon">\u{1F4DD}</span>';
            textBtn2.onclick = () => {
              this.createContentForEntity("scene", scene.id, chapterId, "text");
            };
            const imageBtn2 = sceneHeaderActions.createEl("button", {
              cls: "story-engine-add-content-btn story-engine-add-image-btn",
              attr: { "aria-label": "Add image content" }
            });
            imageBtn2.innerHTML = '<span class="story-engine-icon">\u{1F5BC}\uFE0F</span>';
            imageBtn2.onclick = () => {
              this.createContentForEntity("scene", scene.id, chapterId, "image");
            };
          }
          const sceneItems = sceneGroup.createDiv({ cls: "story-engine-group-items" });
          if (sceneContents.length > 0) {
            for (const block of sceneContents) {
              this.renderContentItem(sceneItems, block, "scene", scene.id);
            }
          } else {
            sceneItems.createEl("p", { text: "No content in this scene.", cls: "story-engine-empty-content" });
          }
          for (const beat of sceneBeats) {
            const beatContents2 = contentsByBeat.get(beat.id) || [];
            const beatSubGroup = sceneItems.createDiv({ cls: "story-engine-beat-subgroup" });
            const beatSubGroupTitle = beatSubGroup.createDiv({ cls: "story-engine-beat-subgroup-title-container story-engine-hoverable-header" });
            beatSubGroupTitle.createEl("h4", {
              text: `Beat ${beat.order_num}: ${beat.type}`,
              cls: "story-engine-beat-subgroup-title"
            });
            const beatHeaderActions = beatSubGroupTitle.createDiv({ cls: "story-engine-hover-header-actions" });
            const beatChapterId = scene.chapter_id || (this.chapters.length > 0 ? this.chapters[0].id : "");
            if (beatChapterId) {
              const textBtn2 = beatHeaderActions.createEl("button", {
                cls: "story-engine-add-content-btn story-engine-add-text-btn",
                attr: { "aria-label": "Add text content" }
              });
              textBtn2.innerHTML = '<span class="story-engine-icon">\u{1F4DD}</span>';
              textBtn2.onclick = () => {
                this.createContentForEntity("beat", beat.id, beatChapterId, "text");
              };
              const imageBtn2 = beatHeaderActions.createEl("button", {
                cls: "story-engine-add-content-btn story-engine-add-image-btn",
                attr: { "aria-label": "Add image content" }
              });
              imageBtn2.innerHTML = '<span class="story-engine-icon">\u{1F5BC}\uFE0F</span>';
              imageBtn2.onclick = () => {
                this.createContentForEntity("beat", beat.id, beatChapterId, "image");
              };
            }
            if (beatContents2.length > 0) {
              for (const block of beatContents2) {
                this.renderContentItem(beatSubGroup, block, "beat", beat.id);
              }
            } else {
              beatSubGroup.createEl("p", { text: "No content in this beat.", cls: "story-engine-empty-beat-content" });
            }
          }
        }
      }
    }
    if (this.chapters.length === 0 || orphanContents.length > 0 || this.scenes.some((s) => !s.chapter_id)) {
      const orphanGroup = list.createDiv({ cls: "story-engine-chapter-group" });
      const orphanHeader = orphanGroup.createDiv({ cls: "story-engine-chapter-group-header" });
      orphanHeader.createEl("h2", { text: "Without Chapter" });
      const orphanContent = orphanGroup.createDiv({ cls: "story-engine-chapter-group-content" });
      const orphanScenes = this.scenes.filter((s) => !s.chapter_id).sort((a, b) => a.order_num - b.order_num);
      for (const scene of orphanScenes) {
        const sceneContents = contentsByScene.get(scene.id) || [];
        const sceneBeats = this.beats.filter((b) => b.scene_id === scene.id).sort((a, b) => a.order_num - b.order_num);
        const beatContents = sceneBeats.flatMap((b) => contentsByBeat.get(b.id) || []);
        const sceneGroup = orphanContent.createDiv({ cls: "story-engine-group" });
        const sceneHeader = sceneGroup.createDiv({ cls: "story-engine-group-header story-engine-hoverable-header" });
        sceneHeader.createEl("h3", {
          text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`
        });
        const sceneHeaderActions = sceneHeader.createDiv({ cls: "story-engine-header-actions" });
        const chapterId = this.chapters.length > 0 ? this.chapters[0].id : "";
        if (chapterId) {
          sceneHeaderActions.createEl("button", {
            text: "+ Content",
            cls: "story-engine-add-content-btn"
          }).onclick = () => {
            this.createContentForEntity("scene", scene.id, chapterId);
          };
        }
        const sceneItems = sceneGroup.createDiv({ cls: "story-engine-group-items" });
        if (sceneContents.length > 0) {
          for (const block of sceneContents) {
            this.renderContentItem(sceneItems, block, "scene", scene.id);
          }
        } else {
          sceneItems.createEl("p", { text: "No content in this scene." });
        }
        for (const beat of sceneBeats) {
          const beatContents2 = contentsByBeat.get(beat.id) || [];
          const beatSubGroup = sceneItems.createDiv({ cls: "story-engine-beat-subgroup" });
          const beatSubGroupTitle = beatSubGroup.createDiv({ cls: "story-engine-beat-subgroup-title-container story-engine-hoverable-header" });
          beatSubGroupTitle.createEl("h4", {
            text: `Beat ${beat.order_num}: ${beat.type}`,
            cls: "story-engine-beat-subgroup-title"
          });
          const beatHeaderActions = beatSubGroupTitle.createDiv({ cls: "story-engine-hover-header-actions" });
          const beatChapterId = this.chapters.length > 0 ? this.chapters[0].id : "";
          if (beatChapterId) {
            beatHeaderActions.createEl("button", {
              text: "+ Content",
              cls: "story-engine-add-content-btn"
            }).onclick = () => {
              this.createContentForEntity("beat", beat.id, beatChapterId);
            };
          }
          if (beatContents2.length > 0) {
            for (const block of beatContents2) {
              this.renderContentItem(beatSubGroup, block, "beat", beat.id);
            }
          } else {
            beatSubGroup.createEl("p", { text: "No content in this beat.", cls: "story-engine-empty-beat-content" });
          }
        }
      }
      if (orphanContents.length > 0) {
        const orphanContentsGroup = orphanContent.createDiv({ cls: "story-engine-group" });
        const orphanContentsHeader = orphanContentsGroup.createDiv({ cls: "story-engine-group-header" });
        orphanContentsHeader.createEl("h3", { text: "Without Reference" });
        const orphanContentsItems = orphanContentsGroup.createDiv({ cls: "story-engine-group-items" });
        for (const block of orphanContents) {
          this.renderContentItem(orphanContentsItems, block, null, null);
        }
      }
    }
  }
  async loadStoryCharacters() {
    if (!this.currentStory || !this.currentStory.world_id) {
      this.storyCharacters = [];
      return;
    }
    try {
      this.storyCharacters = await this.plugin.apiClient.getCharacters(this.currentStory.world_id);
    } catch (err) {
      console.error("Error loading story characters:", err);
      this.storyCharacters = [];
<<<<<<< HEAD
      new import_obsidian17.Notice(`Error loading characters: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
      new import_obsidian16.Notice(`Error loading characters: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  renderStoryCharactersTab(container) {
    var _a;
    container.empty();
    if (!((_a = this.currentStory) == null ? void 0 : _a.world_id)) {
      this.renderEmptyCard(container, {
        icon: "globe",
        title: "No world linked",
        description: "Link this story to a world to view its characters."
      });
      return;
    }
    if (this.storyCharacters.length === 0) {
      this.renderEmptyCard(container, {
        icon: "user",
        title: "No characters in this world",
        description: "Create the first character linked to this story's world."
      });
    } else {
      const list = container.createDiv({ cls: "story-engine-list" });
      for (const character of this.storyCharacters.sort((a, b) => a.name.localeCompare(b.name))) {
        const item = list.createDiv({ cls: "story-engine-item" });
        const titleDiv = item.createDiv({ cls: "story-engine-title", text: character.name });
        titleDiv.style.cursor = "pointer";
        titleDiv.onclick = () => {
          this.showCharacterDetails(character);
        };
        const meta = item.createDiv({ cls: "story-engine-meta" });
        if (character.description) {
          meta.createEl("span", {
            text: character.description.substring(0, 80) + (character.description.length > 80 ? "..." : "")
          });
        }
        const actions = item.createDiv({ cls: "story-engine-item-actions" });
        const viewBtn = actions.createEl("button", { text: "View" });
        viewBtn.onclick = () => {
          this.showCharacterDetails(character);
        };
      }
    }
  }
  showCreateCharacterModalForStory() {
    var _a;
    if (!((_a = this.currentStory) == null ? void 0 : _a.world_id)) {
<<<<<<< HEAD
      new import_obsidian17.Notice("This story is not linked to a world");
      return;
    }
    const modal = new import_obsidian17.Modal(this.app);
=======
      new import_obsidian16.Notice("This story is not linked to a world");
      return;
    }
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Character");
    const content = modal.contentEl;
    let name = "";
    let description = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createCharacter(this.currentStory.world_id, {
          name: name.trim(),
          description: description.trim()
        });
        await this.loadStoryCharacters();
        this.renderTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Character created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Character created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  renderContentItem(container, contentBlock, entityType, entityId) {
    var _a, _b;
    const item = container.createDiv({ cls: "story-engine-item story-engine-content-item" });
    const itemContent = item.createDiv({ cls: "story-engine-content-item-content" });
    const iconContainer = itemContent.createDiv({ cls: "story-engine-content-icon" });
    const iconMap = {
      text: "file-text",
      image: "image",
      video: "video",
      audio: "music",
      embed: "code",
      link: "external-link"
    };
    const iconName = iconMap[contentBlock.type] || "file";
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(iconContainer, iconName);
=======
    (0, import_obsidian16.setIcon)(iconContainer, iconName);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    const preview = itemContent.createDiv({ cls: "story-engine-content-preview" });
    if (contentBlock.type === "text") {
      const textPreview = contentBlock.content || "";
      const truncated = textPreview.length > 100 ? textPreview.substring(0, 100) + "..." : textPreview;
      preview.createEl("span", { text: truncated });
    } else if (contentBlock.type === "image") {
      const imgContainer = preview.createDiv({ cls: "story-engine-image-container" });
      const img = imgContainer.createEl("img", {
        attr: { src: contentBlock.content || "", alt: ((_a = contentBlock.metadata) == null ? void 0 : _a.alt_text) || "" },
        cls: "story-engine-content-thumbnail"
      });
      img.style.maxWidth = "100px";
      img.style.maxHeight = "60px";
      img.style.objectFit = "cover";
      img.style.borderRadius = "4px";
      if ((_b = contentBlock.metadata) == null ? void 0 : _b.attribution) {
        const attribution = imgContainer.createDiv({ cls: "story-engine-unsplash-attribution" });
        attribution.createEl("span", {
          text: contentBlock.metadata.attribution,
          cls: "story-engine-attribution-text"
        });
      }
    } else {
      preview.createEl("span", { text: contentBlock.content || "" });
    }
    const actions = item.createDiv({ cls: "story-engine-item-actions" });
    actions.createEl("button", { text: "Edit" }).onclick = () => {
      new ContentBlockModal(this.app, async (updatedContentBlock) => {
        try {
          await this.plugin.apiClient.updateContentBlock(contentBlock.id, updatedContentBlock);
          await this.loadHierarchy();
          this.renderTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Content block updated successfully");
=======
          new import_obsidian16.Notice("Content block updated successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        } catch (err) {
          throw err;
        }
      }, contentBlock, this.plugin).open();
    };
    actions.createEl("button", { text: "Move" }).onclick = async () => {
      await this.showMoveContentModal(contentBlock, entityType, entityId, "move");
    };
    actions.createEl("button", { text: "Link" }).onclick = async () => {
      await this.showMoveContentModal(contentBlock, entityType, entityId, "link");
    };
    actions.createEl("button", { text: "Delete" }).onclick = async () => {
      if (confirm("Delete this content block?")) {
        try {
          await this.plugin.apiClient.deleteContentBlock(contentBlock.id);
          await this.loadHierarchy();
          this.renderTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Content block deleted");
        } catch (err) {
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
          new import_obsidian16.Notice("Content block deleted");
        } catch (err) {
          new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        }
      }
    };
  }
  async showMoveContentModal(contentBlock, currentEntityType, currentEntityId, mode) {
    if (!this.currentStory)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText(mode === "move" ? "Move Content Block" : "Link Content Block");
    const content = modal.contentEl;
    content.createEl("p", {
      text: mode === "move" ? `Move content block to:` : `Link content block to (will appear in both places):`
    });
    const select = content.createEl("select", { cls: "story-engine-move-select" });
    const noRefOption = select.createEl("option", { text: "No Reference", value: "" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const option = select.createEl("option", {
        text: `Chapter ${chapter.number}: ${chapter.title}`,
        value: `chapter:${chapter.id}`
      });
      if (currentEntityType === "chapter" && currentEntityId === chapter.id) {
        option.selected = true;
      }
    }
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const chapterScenes = this.scenes.filter((s) => s.chapter_id === chapter.id).sort((a, b) => a.order_num - b.order_num);
      if (chapterScenes.length > 0) {
        const optgroup = select.createEl("optgroup");
        optgroup.label = `Chapter ${chapter.number}: ${chapter.title} - Scenes`;
        for (const scene of chapterScenes) {
          const option = optgroup.createEl("option", {
            text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`,
            value: `scene:${scene.id}`
          });
          if (currentEntityType === "scene" && currentEntityId === scene.id) {
            option.selected = true;
          }
        }
      }
    }
    const orphanScenes = this.scenes.filter((s) => !s.chapter_id);
    if (orphanScenes.length > 0) {
      const optgroup = select.createEl("optgroup");
      optgroup.label = "No Chapter - Scenes";
      for (const scene of orphanScenes.sort((a, b) => a.order_num - b.order_num)) {
        const option = optgroup.createEl("option", {
          text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`,
          value: `scene:${scene.id}`
        });
        if (currentEntityType === "scene" && currentEntityId === scene.id) {
          option.selected = true;
        }
      }
    }
    for (const scene of this.scenes.sort((a, b) => a.order_num - b.order_num)) {
      const sceneBeats = this.beats.filter((b) => b.scene_id === scene.id).sort((a, b) => a.order_num - b.order_num);
      if (sceneBeats.length > 0) {
        const chapter = this.chapters.find((c) => c.id === scene.chapter_id);
        const chapterLabel = chapter ? `Chapter ${chapter.number}` : "No Chapter";
        const optgroup = select.createEl("optgroup");
        optgroup.label = `${chapterLabel} > Scene ${scene.order_num} - Beats`;
        for (const beat of sceneBeats) {
          const option = optgroup.createEl("option", {
            text: `Beat ${beat.order_num}: ${beat.type}`,
            value: `beat:${beat.id}`
          });
          if (currentEntityType === "beat" && currentEntityId === beat.id) {
            option.selected = true;
          }
        }
      }
    }
    if (!currentEntityType) {
      noRefOption.selected = true;
    }
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const actionButton = buttonContainer.createEl("button", {
      text: mode === "move" ? "Move" : "Link",
      cls: "mod-cta"
    });
    actionButton.onclick = async () => {
      const selectedValue = select.value;
      try {
        if (mode === "move" && currentEntityType && currentEntityId) {
          const currentRef = this.contentBlockRefs.find(
            (r) => r.content_block_id === contentBlock.id && r.entity_type === currentEntityType && r.entity_id === currentEntityId
          );
          if (currentRef) {
            await this.plugin.apiClient.deleteContentAnchor(currentRef.id);
          }
        }
        if (selectedValue) {
          const [entityType, entityId] = selectedValue.split(":");
          await this.plugin.apiClient.createContentAnchor(contentBlock.id, entityType, entityId);
        }
        await this.loadHierarchy();
        this.renderTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice(mode === "move" ? "Content block moved successfully" : "Content block linked successfully");
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : `Failed to ${mode} content block`;
        new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
        new import_obsidian16.Notice(mode === "move" ? "Content block moved successfully" : "Content block linked successfully");
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : `Failed to ${mode} content block`;
        new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    cancelButton.onclick = () => modal.close();
    modal.open();
  }
  async createContentForEntity(entityType, entityId, chapterId, contentType = "text") {
    if (!this.currentStory)
      return;
    if (!chapterId) {
      if (this.chapters.length === 0) {
<<<<<<< HEAD
        new import_obsidian17.Notice("No chapter available. Please create a chapter first.", 5e3);
=======
        new import_obsidian16.Notice("No chapter available. Please create a chapter first.", 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      chapterId = this.chapters[0].id;
    }
    const chapterBlocks = this.contentBlocks.filter((cb) => {
      const refs = this.contentBlockRefs.filter((r) => r.content_block_id === cb.id && r.entity_type === "chapter" && r.entity_id === chapterId);
      return refs.length > 0 || cb.chapter_id === chapterId;
    });
    const maxOrderNum = chapterBlocks.length > 0 ? Math.max(...chapterBlocks.map((cb) => cb.order_num || 0)) : 0;
    const nextOrderNum = maxOrderNum + 1;
    const initialContentBlock = {
      type: contentType,
      kind: "final",
      content: "",
      metadata: {}
    };
    new ContentBlockModal(this.app, async (contentBlock) => {
      try {
        contentBlock.order_num = nextOrderNum;
        const created = await this.plugin.apiClient.createContentBlock(chapterId, contentBlock);
        await this.plugin.apiClient.createContentAnchor(created.id, entityType, entityId);
        await this.loadHierarchy();
        this.renderTabContent();
<<<<<<< HEAD
        new import_obsidian17.Notice("Content block created successfully");
=======
        new import_obsidian16.Notice("Content block created successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      } catch (err) {
        throw err;
      }
    }, initialContentBlock, this.plugin).open();
  }
  // ==================== World View Methods ====================
  async showWorldDetails(world) {
    this.currentWorld = world;
    this.viewMode = "world-details";
    this.worldTab = "characters";
    await this.loadWorldData();
    this.renderWorldDetails();
  }
  async loadWorldData() {
    if (!this.currentWorld)
      return;
    this.loadingWorldData = true;
    try {
      this.characters = await this.plugin.apiClient.getCharacters(this.currentWorld.id);
      this.locations = await this.plugin.apiClient.getLocations(this.currentWorld.id);
      this.artifacts = await this.plugin.apiClient.getArtifacts(this.currentWorld.id);
      this.events = await this.plugin.apiClient.getEvents(this.currentWorld.id);
      try {
        this.traits = await this.plugin.apiClient.getTraits();
      } catch (err) {
        console.warn("Traits not available:", err);
        this.traits = [];
      }
      try {
        this.archetypes = await this.plugin.apiClient.getArchetypes();
      } catch (err) {
        console.warn("Archetypes not available:", err);
        this.archetypes = [];
      }
      try {
        this.factions = await this.plugin.apiClient.getFactions(this.currentWorld.id);
      } catch (err) {
        console.warn("Factions not available:", err);
        this.factions = [];
      }
      try {
        this.lores = await this.plugin.apiClient.getLores(this.currentWorld.id);
      } catch (err) {
        console.warn("Lores not available:", err);
        this.lores = [];
      }
      try {
        this.currentWorld = await this.plugin.apiClient.getWorld(this.currentWorld.id);
      } catch (err) {
        console.warn("Failed to reload world:", err);
      }
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to load world data";
<<<<<<< HEAD
      new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
      new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    } finally {
      this.loadingWorldData = false;
    }
  }
  renderWorldDetails() {
    if (!this.contentEl || !this.currentWorld)
      return;
    this.contentEl.removeClass("story-engine-list-layout");
    this.contentEl.addClass("story-engine-sidebar-layout");
    this.renderWorldDetailsHeader();
    this.contentEl.empty();
    this.renderWorldTabs();
    this.renderWorldTabContent();
  }
  renderWorldDetailsHeader() {
    if (!this.headerEl || !this.currentWorld)
      return;
    this.headerEl.empty();
    const headerContainer = this.headerEl.createDiv({ cls: "story-engine-world-details-header" });
    const headerContent = headerContainer.createDiv({ cls: "story-engine-world-header-content" });
    const topRow = headerContent.createDiv({ cls: "story-engine-world-header-top" });
    const backButton = topRow.createEl("button", {
      text: "\u2190 Back",
      cls: "story-engine-back-btn"
    });
    backButton.onclick = () => {
      this.currentWorld = null;
      this.viewMode = "list";
      this.listTab = "worlds";
      this.renderListHeader();
      this.renderListContent();
    };
<<<<<<< HEAD
    const titleContainer = headerLeft.createDiv({ cls: "story-engine-title-container" });
    const titleRow = titleContainer.createDiv({ cls: "story-engine-title-row" });
    titleRow.createEl("h2", {
      text: this.currentWorld.name,
      cls: "story-engine-title-header"
    });
    if (this.currentWorld.genre) {
      const genrePill = titleRow.createSpan({
        cls: "story-engine-status-pill story-engine-status-draft"
      });
      genrePill.textContent = this.currentWorld.genre;
    }
    const uuidRow = titleContainer.createDiv({ cls: "story-engine-uuid-row" });
    const uuidSpan = uuidRow.createSpan({ cls: "story-engine-uuid" });
    uuidSpan.textContent = this.currentWorld.id;
    const copyUuidButton = uuidRow.createEl("button", {
      cls: "story-engine-copy-uuid-btn",
      attr: { "aria-label": "Copy UUID" }
    });
    (0, import_obsidian17.setIcon)(copyUuidButton, "copy");
    copyUuidButton.onclick = () => {
      if (!this.currentWorld)
        return;
      navigator.clipboard.writeText(this.currentWorld.id).then(() => {
        new import_obsidian17.Notice("UUID copied to clipboard");
      }).catch(() => {
        new import_obsidian17.Notice("Failed to copy UUID", 3e3);
      });
    };
    if (this.currentWorld.description) {
      const descRow = titleContainer.createDiv({ cls: "story-engine-world-desc" });
      descRow.textContent = this.currentWorld.description;
    }
    const headerActions = this.headerEl.createDiv({ cls: "story-engine-header-actions" });
=======
    const headerActions = topRow.createDiv({ cls: "story-engine-header-actions" });
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    const contextButton = headerActions.createEl("button", {
      cls: "story-engine-context-btn",
      attr: { "aria-label": "World Actions" }
    });
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(contextButton, "more-vertical");
=======
    (0, import_obsidian16.setIcon)(contextButton, "more-vertical");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    const dropdownMenu = headerActions.createDiv({ cls: "story-engine-dropdown-menu" });
    dropdownMenu.style.display = "none";
    const editOption = dropdownMenu.createEl("button", {
      cls: "story-engine-dropdown-item"
    });
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(editOption, "pencil");
=======
    (0, import_obsidian16.setIcon)(editOption, "pencil");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    editOption.createSpan({ text: "Edit World" });
    editOption.onclick = () => {
      dropdownMenu.style.display = "none";
      this.showEditWorldModal();
    };
    contextButton.onclick = (e) => {
      e.stopPropagation();
      const isVisible = dropdownMenu.style.display !== "none";
      dropdownMenu.style.display = isVisible ? "none" : "block";
    };
    document.addEventListener("click", () => {
      dropdownMenu.style.display = "none";
    }, { once: true });
    const titleSection = headerContent.createDiv({ cls: "story-engine-world-title-section" });
    titleSection.createEl("h1", {
      text: this.currentWorld.name,
      cls: "story-engine-world-name"
    });
    if (this.currentWorld.description) {
      titleSection.createEl("p", {
        text: this.currentWorld.description,
        cls: "story-engine-world-desc"
      });
    }
    const metaRow = titleSection.createDiv({ cls: "story-engine-world-meta-row" });
    if (this.currentWorld.genre) {
      const genreBadge = metaRow.createSpan({
        cls: "story-engine-badge story-engine-genre-badge"
      });
      (0, import_obsidian16.setIcon)(genreBadge, "tag");
      genreBadge.createSpan({ text: this.currentWorld.genre });
    }
    const uuidContainer = metaRow.createDiv({ cls: "story-engine-world-uuid" });
    const uuidText = uuidContainer.createSpan({ text: this.currentWorld.id.substring(0, 8) + "..." });
    const copyUuidButton = uuidContainer.createEl("button", {
      cls: "story-engine-copy-uuid-btn",
      attr: { "aria-label": "Copy UUID" }
    });
    (0, import_obsidian16.setIcon)(copyUuidButton, "copy");
    copyUuidButton.onclick = (e) => {
      e.stopPropagation();
      if (!this.currentWorld)
        return;
      navigator.clipboard.writeText(this.currentWorld.id).then(() => {
        new import_obsidian16.Notice("UUID copied to clipboard");
      }).catch(() => {
        new import_obsidian16.Notice("Failed to copy UUID", 3e3);
      });
    };
  }
  renderWorldTabs() {
    if (!this.contentEl)
      return;
    const existingSidebar = this.contentEl.querySelector(".story-engine-world-sidebar");
    if (existingSidebar) {
      existingSidebar.remove();
    }
    const sidebarPosition = this.plugin.settings.sidebarPosition || "left";
    const sidebarContainer = this.contentEl.createDiv({
      cls: `story-engine-world-sidebar story-engine-world-sidebar-${sidebarPosition}`
    });
    const allTabs = [
      { key: "characters", label: "Characters", icon: "user" },
      { key: "locations", label: "Locations", icon: "map-pin" },
      { key: "factions", label: "Factions", icon: "users" },
      { key: "artifacts", label: "Artifacts", icon: "gem" },
      { key: "traits", label: "Traits", icon: "star" },
      { key: "archetypes", label: "Archetypes", icon: "shapes" },
      { key: "events", label: "Events", icon: "calendar" },
      { key: "lore", label: "Lore", icon: "book-open" }
    ];
    for (const tab of allTabs) {
      const tabButton = sidebarContainer.createEl("button", {
        cls: `story-engine-sidebar-tab ${this.worldTab === tab.key ? "is-active" : ""}`,
        attr: {
          "aria-label": tab.label
        }
      });
      (0, import_obsidian16.setIcon)(tabButton, tab.icon);
      tabButton.onclick = () => {
        this.worldTab = tab.key;
        this.renderWorldTabs();
        this.renderWorldTabContent();
      };
    }
  }
  renderWorldTabContent() {
    if (!this.contentEl)
      return;
    const existingContent = this.contentEl.querySelector(".story-engine-world-tab-content");
    if (existingContent) {
      existingContent.remove();
    }
    const sidebarPosition = this.plugin.settings.sidebarPosition || "left";
    const contentContainer = this.contentEl.createDiv({
      cls: `story-engine-world-tab-content story-engine-content-sidebar-${sidebarPosition}`
    });
    if (this.loadingWorldData) {
      for (let i = 0; i < 3; i++) {
        contentContainer.createDiv({ cls: "story-engine-skeleton story-engine-skeleton-card" });
      }
      return;
    }
    switch (this.worldTab) {
      case "characters":
        this.renderCharactersTab(contentContainer);
        break;
      case "traits":
        this.renderTraitsTab(contentContainer);
        break;
      case "archetypes":
        this.renderArchetypesTab(contentContainer);
        break;
      case "events":
        this.renderEventsTab(contentContainer);
        break;
      case "lore":
        this.renderLoreTab(contentContainer);
        break;
      case "locations":
        this.renderLocationsTab(contentContainer);
        break;
      case "factions":
        this.renderFactionsTab(contentContainer);
        break;
      case "artifacts":
        this.renderArtifactsTab(contentContainer);
        break;
    }
    this.renderWorldActionsBar(contentContainer);
  }
  renderWorldActionsBar(container) {
    const actionsBar = container.createDiv({ cls: "story-engine-actions-bar" });
    let createButtonText = "Create Character";
    let createButtonAction = () => {
      this.showCreateCharacterModal();
    };
    switch (this.worldTab) {
      case "traits":
        createButtonText = "Create Trait";
        createButtonAction = () => this.showCreateTraitModal();
        break;
      case "archetypes":
        createButtonText = "Create Archetype";
        createButtonAction = () => this.showCreateArchetypeModal();
        break;
      case "events":
        createButtonText = "Create Event";
        createButtonAction = () => this.showCreateEventModal();
        break;
      case "lore":
        createButtonText = "Create Lore";
        createButtonAction = () => this.showCreateLoreModal();
        break;
      case "locations":
        createButtonText = "Create Location";
        createButtonAction = () => this.showCreateLocationModal();
        break;
      case "factions":
        createButtonText = "Create Faction";
        createButtonAction = () => this.showCreateFactionModal();
        break;
      case "artifacts":
        createButtonText = "Create Artifact";
        createButtonAction = () => this.showCreateArtifactModal();
        break;
    }
    const createButton = actionsBar.createEl("button", {
      text: createButtonText,
      cls: "mod-cta story-engine-create-btn"
    });
    createButton.onclick = createButtonAction;
  }
  renderCharactersTab(container) {
    if (this.characters.length === 0) {
      this.renderEmptyCard(container, {
        icon: "user",
        title: "No characters found",
        description: "Create your first character to start building this world."
      });
      return;
    }
    for (const character of this.characters) {
      const card = container.createDiv({ cls: "story-engine-entity-card" });
      card.style.cursor = "pointer";
      card.onclick = () => {
        this.showCharacterDetails(character);
      };
      const cardHeader = card.createDiv({ cls: "story-engine-entity-card-header" });
      const cardTitle = cardHeader.createDiv({ cls: "story-engine-entity-card-title" });
      const nameEl = cardTitle.createEl("h3", {
        text: character.name,
        cls: "story-engine-entity-name"
      });
      if (character.archetype_id) {
        const archetype = this.archetypes.find((a) => a.id === character.archetype_id);
        if (archetype) {
          cardTitle.createEl("p", {
            text: archetype.name,
            cls: "story-engine-entity-subtitle"
          });
        }
      }
<<<<<<< HEAD
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      const relBtn = actions.createEl("button");
      (0, import_obsidian17.setIcon)(relBtn, "users");
      relBtn.title = "Add Relationship";
      relBtn.onclick = () => this.showAddCharacterRelationshipModal(character);
      actions.createEl("button", { text: "Edit" }).onclick = () => {
=======
      const cardActions = cardHeader.createDiv({ cls: "story-engine-entity-card-actions" });
      const relationshipBtn = cardActions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Add Relationship" }
      });
      (0, import_obsidian16.setIcon)(relationshipBtn, "users");
      relationshipBtn.onclick = (e) => {
        e.stopPropagation();
        this.showAddCharacterRelationshipModal(character);
      };
      const editBtn = cardActions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Edit" }
      });
      (0, import_obsidian16.setIcon)(editBtn, "pencil");
      editBtn.onclick = (e) => {
        e.stopPropagation();
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        this.showEditCharacterModal(character);
      };
      const deleteBtn = cardActions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Delete" }
      });
      (0, import_obsidian16.setIcon)(deleteBtn, "trash");
      deleteBtn.onclick = async (e) => {
        e.stopPropagation();
        if (confirm(`Delete character "${character.name}"?`)) {
          try {
            await this.plugin.apiClient.deleteCharacter(character.id);
            await this.loadWorldData();
            this.renderWorldTabContent();
<<<<<<< HEAD
            new import_obsidian17.Notice("Character deleted");
          } catch (err) {
            new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
            new import_obsidian16.Notice("Character deleted");
          } catch (err) {
            new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          }
        }
      };
      const cardContent = card.createDiv({ cls: "story-engine-entity-card-content" });
      if (character.description) {
        cardContent.createEl("p", {
          text: character.description,
          cls: "story-engine-entity-description"
        });
      }
    }
  }
  renderLocationsTab(container) {
    if (this.locations.length === 0) {
      this.renderEmptyCard(container, {
        icon: "map-pin",
        title: "No locations found",
        description: "Create your first location!"
      });
      return;
    }
    const rootLocations = this.locations.filter((l) => !l.parent_id);
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const location of rootLocations.sort((a, b) => a.name.localeCompare(b.name))) {
      this.renderLocationItem(list, location, 0);
    }
  }
  renderLocationItem(container, location, level) {
    const item = container.createDiv({ cls: "story-engine-item" });
    item.style.marginLeft = `${level * 1}rem`;
    const titleRow = item.createDiv({ cls: "story-engine-title" });
    titleRow.textContent = location.name;
    if (location.type) {
      const typeBadge = titleRow.createSpan({ cls: "story-engine-badge" });
      typeBadge.textContent = location.type;
    }
    const meta = item.createDiv({ cls: "story-engine-meta" });
    if (location.description) {
      meta.createEl("span", { text: location.description.substring(0, 50) + (location.description.length > 50 ? "..." : "") });
    }
    const actions = item.createDiv({ cls: "story-engine-item-actions" });
    const editBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Edit location", title: "Edit location" }
    });
    (0, import_obsidian16.setIcon)(editBtn, "pencil");
    editBtn.onclick = () => {
      this.showEditLocationModal(location);
    };
    const deleteBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Delete location", title: "Delete location" }
    });
    (0, import_obsidian16.setIcon)(deleteBtn, "trash");
    deleteBtn.onclick = async () => {
      if (confirm(`Delete location "${location.name}"?`)) {
        try {
          await this.plugin.apiClient.deleteLocation(location.id);
          await this.loadWorldData();
          this.renderWorldTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Location deleted");
        } catch (err) {
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
          new import_obsidian16.Notice("Location deleted");
        } catch (err) {
          new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        }
      }
    };
    const children2 = this.locations.filter((l) => l.parent_id === location.id);
    for (const child of children2.sort((a, b) => a.name.localeCompare(b.name))) {
      this.renderLocationItem(container, child, level + 1);
    }
  }
  renderArtifactsTab(container) {
    if (this.artifacts.length === 0) {
      this.renderEmptyCard(container, {
        icon: "gem",
        title: "No artifacts found",
        description: "Create your first artifact!"
      });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const artifact of this.artifacts) {
      const item = list.createDiv({ cls: "story-engine-item" });
      const titleRow = item.createDiv({ cls: "story-engine-title" });
      titleRow.textContent = artifact.name;
      if (artifact.rarity) {
        const rarityBadge = titleRow.createSpan({ cls: `story-engine-badge story-engine-rarity-${artifact.rarity.toLowerCase()}` });
        rarityBadge.textContent = artifact.rarity;
      }
      const meta = item.createDiv({ cls: "story-engine-meta" });
      if (artifact.description) {
        meta.createEl("span", { text: artifact.description.substring(0, 50) + (artifact.description.length > 50 ? "..." : "") });
      }
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      const artifactEditBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Edit artifact", title: "Edit artifact" }
      });
      (0, import_obsidian16.setIcon)(artifactEditBtn, "pencil");
      artifactEditBtn.onclick = () => {
        this.showEditArtifactModal(artifact);
      };
      const artifactDeleteBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Delete artifact", title: "Delete artifact" }
      });
      (0, import_obsidian16.setIcon)(artifactDeleteBtn, "trash");
      artifactDeleteBtn.onclick = async () => {
        if (confirm(`Delete artifact "${artifact.name}"?`)) {
          try {
            await this.plugin.apiClient.deleteArtifact(artifact.id);
            await this.loadWorldData();
            this.renderWorldTabContent();
<<<<<<< HEAD
            new import_obsidian17.Notice("Artifact deleted");
          } catch (err) {
            new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
            new import_obsidian16.Notice("Artifact deleted");
          } catch (err) {
            new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          }
        }
      };
    }
  }
  renderEventsTab(container) {
    var _a;
    const timeConfigSection = container.createDiv({ cls: "story-engine-time-config-section" });
    if ((_a = this.currentWorld) == null ? void 0 : _a.time_config) {
      this.renderTimeConfigDisplay(timeConfigSection, this.currentWorld.time_config);
      const editBtn = timeConfigSection.createEl("button", {
        text: "Edit Time Config",
        cls: "story-engine-btn-secondary"
      });
      editBtn.onclick = () => this.showTimeConfigModal(this.currentWorld.time_config);
    } else {
      const addBtn = timeConfigSection.createEl("button", {
        text: "Add Time Configuration",
        cls: "story-engine-btn-primary"
      });
      addBtn.onclick = () => this.showTimeConfigModal(null);
    }
    const timelineSection = container.createDiv({ cls: "story-engine-timeline-section" });
    const timelineBtn = timelineSection.createEl("button", {
      text: "View Timeline",
      cls: "story-engine-btn-secondary"
    });
    timelineBtn.onclick = () => this.showTimelineModal();
    const epochSection = container.createDiv({ cls: "story-engine-epoch-section" });
    epochSection.createEl("h4", { text: "\u23F0 Epoch Event (Year Zero)", cls: "story-engine-section-title" });
    const epochEvent = this.events.find((e) => e.is_epoch && e.timeline_position === 0);
    if (epochEvent) {
      const epochItem = epochSection.createDiv({ cls: "story-engine-item story-engine-epoch-item" });
      const epochTitle = epochItem.createDiv({ cls: "story-engine-title" });
      epochTitle.createSpan({ text: epochEvent.name });
      epochTitle.createSpan({ cls: "story-engine-badge story-engine-badge-epoch", text: "EPOCH" });
      const epochMeta = epochItem.createDiv({ cls: "story-engine-meta" });
      epochMeta.createEl("span", { text: "Position: 0 (Year Zero)" });
      if (epochEvent.description) {
        epochMeta.createEl("span", { text: epochEvent.description.substring(0, 80) + (epochEvent.description.length > 80 ? "..." : "") });
      }
      const epochActions = epochItem.createDiv({ cls: "story-engine-item-actions" });
      const epochEditBtn = epochActions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Edit epoch event", title: "Edit epoch event" }
      });
      (0, import_obsidian16.setIcon)(epochEditBtn, "pencil");
      epochEditBtn.onclick = () => {
        this.showEditEventModal(epochEvent);
      };
    } else {
      const createEpochBtn = epochSection.createEl("button", {
        text: "\u{1F31F} Create Epoch Event (Year Zero)",
        cls: "mod-cta story-engine-create-epoch-btn"
      });
      createEpochBtn.onclick = () => this.showCreateEpochEventModal();
      epochSection.createEl("p", {
        text: "The Epoch Event marks Year Zero - all other events are dated relative to this point.",
        cls: "story-engine-hint"
      });
    }
    const eventsSection = container.createDiv({ cls: "story-engine-events-list-section" });
    eventsSection.createEl("h4", { text: "\u{1F4DC} Events", cls: "story-engine-section-title" });
    const regularEvents = this.events.filter((e) => !(e.is_epoch && e.timeline_position === 0));
    if (regularEvents.length === 0) {
      this.renderEmptyCard(eventsSection, {
        icon: "calendar",
        title: "No events yet",
        description: "Create your first event!"
      });
      return;
    }
    const list = eventsSection.createDiv({ cls: "story-engine-list" });
    const sortedEvents = regularEvents.sort((a, b) => {
      var _a2, _b;
      const posA = (_a2 = a.timeline_position) != null ? _a2 : Number.MAX_SAFE_INTEGER;
      const posB = (_b = b.timeline_position) != null ? _b : Number.MAX_SAFE_INTEGER;
      if (posA !== posB)
        return posA - posB;
      return b.importance - a.importance;
    });
    for (const event of sortedEvents) {
      const item = list.createDiv({ cls: "story-engine-item" });
      const titleRow = item.createDiv({ cls: "story-engine-title" });
      titleRow.createSpan({ text: event.name });
      const importanceBadge = titleRow.createSpan({ cls: "story-engine-badge" });
      importanceBadge.textContent = `\u2605${event.importance}`;
      if (event.type) {
        titleRow.createSpan({ cls: "story-engine-badge", text: event.type });
      }
      if (event.is_epoch) {
        titleRow.createSpan({ cls: "story-engine-badge story-engine-badge-epoch", text: "EPOCH" });
      }
      const meta = item.createDiv({ cls: "story-engine-meta" });
      if (event.timeline_position !== void 0 && event.timeline_position !== null) {
        const posText = event.timeline_position >= 0 ? `Year ${event.timeline_position}` : `${Math.abs(event.timeline_position)} years before Year Zero`;
        meta.createEl("span", { text: `\u{1F4C5} ${posText}`, cls: "story-engine-event-position" });
      }
      if (event.parent_id) {
        const parentEvent = this.events.find((e) => e.id === event.parent_id);
        if (parentEvent) {
          meta.createEl("span", { text: `\u21B3 Related to: ${parentEvent.name}`, cls: "story-engine-event-parent" });
        }
      }
      if (event.description) {
        meta.createEl("span", {
          text: event.description.substring(0, 60) + (event.description.length > 60 ? "..." : ""),
          cls: "story-engine-event-description"
        });
      }
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
<<<<<<< HEAD
      const linkBtn = actions.createEl("button");
<<<<<<< HEAD
      (0, import_obsidian17.setIcon)(linkBtn, "link");
      linkBtn.title = "Link to Entity";
      linkBtn.onclick = () => this.showLinkEventToEntityModal(event);
      const eventLinkBtn = actions.createEl("button");
      (0, import_obsidian17.setIcon)(eventLinkBtn, "git-branch");
=======
=======
      const linkBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Link to entity", title: "Link to entity" }
      });
>>>>>>> f44e16e (refactor(obsidian-plugin): improve story list UI with enhanced card styling and hover effects)
      (0, import_obsidian16.setIcon)(linkBtn, "link");
      linkBtn.onclick = () => this.showLinkEventToEntityModal(event);
      const eventLinkBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Set parent event", title: "Set parent event" }
      });
      (0, import_obsidian16.setIcon)(eventLinkBtn, "git-branch");
<<<<<<< HEAD
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      eventLinkBtn.title = "Set Parent Event";
=======
>>>>>>> f44e16e (refactor(obsidian-plugin): improve story list UI with enhanced card styling and hover effects)
      eventLinkBtn.onclick = () => this.showSetEventParentModal(event);
      const eventEditBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Edit event", title: "Edit event" }
      });
      (0, import_obsidian16.setIcon)(eventEditBtn, "pencil");
      eventEditBtn.onclick = () => {
        this.showEditEventModal(event);
      };
      const eventDeleteBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Delete event", title: "Delete event" }
      });
      (0, import_obsidian16.setIcon)(eventDeleteBtn, "trash");
      eventDeleteBtn.onclick = async () => {
        if (confirm(`Delete event "${event.name}"?`)) {
          try {
            await this.plugin.apiClient.deleteEvent(event.id);
            await this.loadWorldData();
            this.renderWorldTabContent();
<<<<<<< HEAD
            new import_obsidian17.Notice("Event deleted");
          } catch (err) {
            new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
            new import_obsidian16.Notice("Event deleted");
          } catch (err) {
            new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          }
        }
      };
    }
  }
  showCreateEpochEventModal() {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Epoch Event (Year Zero)");
    const content = modal.contentEl;
    let name = "";
    let description = "";
    content.createEl("p", {
      text: "The Epoch Event defines Year Zero in your world's timeline. All other events will be dated relative to this moment.",
      cls: "story-engine-modal-hint"
    });
    content.createEl("label", { text: "Event Name *" });
    const nameInput = content.createEl("input", {
      type: "text",
      cls: "story-engine-input",
      placeholder: "e.g., The Great Cataclysm, The Founding, Year of the Dragon"
    });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      placeholder: "Describe what happened at this pivotal moment..."
    });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create Epoch", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required");
=======
        new import_obsidian16.Notice("Name is required");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createEvent(this.currentWorld.id, {
          name: name.trim(),
          description: description.trim() || void 0,
          timeline_position: 0,
          is_epoch: true,
          importance: 10,
          // Max importance for epoch
          type: "Epoch"
        });
        modal.close();
        await this.loadWorldData();
        this.renderWorldTabContent();
<<<<<<< HEAD
        new import_obsidian17.Notice("Epoch event created!");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Epoch event created!");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  renderTraitsTab(container) {
    if (this.traits.length === 0) {
      this.renderEmptyCard(container, {
        icon: "star",
        title: "No traits found",
        description: "Create your first trait!"
      });
      return;
    }
    const traitsByCategory = /* @__PURE__ */ new Map();
    for (const trait of this.traits) {
      const category = trait.category || "Uncategorized";
      if (!traitsByCategory.has(category)) {
        traitsByCategory.set(category, []);
      }
      traitsByCategory.get(category).push(trait);
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const [category, categoryTraits] of traitsByCategory.entries()) {
      const group = list.createDiv({ cls: "story-engine-group" });
      const groupHeader = group.createDiv({ cls: "story-engine-group-header" });
      groupHeader.createEl("h3", { text: category });
      const groupItems = group.createDiv({ cls: "story-engine-group-items" });
      for (const trait of categoryTraits.sort((a, b) => a.name.localeCompare(b.name))) {
        const item = groupItems.createDiv({ cls: "story-engine-item" });
        item.createDiv({ cls: "story-engine-title", text: trait.name });
        const meta = item.createDiv({ cls: "story-engine-meta" });
        if (trait.description) {
          meta.createEl("span", { text: trait.description.substring(0, 50) + (trait.description.length > 50 ? "..." : "") });
        }
        const actions = item.createDiv({ cls: "story-engine-item-actions" });
        const traitEditBtn = actions.createEl("button", {
          cls: "story-engine-entity-action-btn",
          attr: { "aria-label": "Edit trait", title: "Edit trait" }
        });
        (0, import_obsidian16.setIcon)(traitEditBtn, "pencil");
        traitEditBtn.onclick = () => {
          this.showEditTraitModal(trait);
        };
        const traitDeleteBtn = actions.createEl("button", {
          cls: "story-engine-entity-action-btn",
          attr: { "aria-label": "Delete trait", title: "Delete trait" }
        });
        (0, import_obsidian16.setIcon)(traitDeleteBtn, "trash");
        traitDeleteBtn.onclick = async () => {
          if (confirm(`Delete trait "${trait.name}"?`)) {
            try {
              await this.plugin.apiClient.deleteTrait(trait.id);
              await this.loadWorldData();
              this.renderWorldTabContent();
<<<<<<< HEAD
              new import_obsidian17.Notice("Trait deleted");
            } catch (err) {
              new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
              new import_obsidian16.Notice("Trait deleted");
            } catch (err) {
              new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
            }
          }
        };
      }
    }
  }
  renderArchetypesTab(container) {
    if (this.archetypes.length === 0) {
      this.renderEmptyCard(container, {
        icon: "shapes",
        title: "No archetypes found",
        description: "Create your first archetype!"
      });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const archetype of this.archetypes.sort((a, b) => a.name.localeCompare(b.name))) {
      const item = list.createDiv({ cls: "story-engine-item" });
      item.createDiv({ cls: "story-engine-title", text: archetype.name });
      const meta = item.createDiv({ cls: "story-engine-meta" });
      if (archetype.description) {
        meta.createEl("span", { text: archetype.description.substring(0, 50) + (archetype.description.length > 50 ? "..." : "") });
      }
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      const viewTraitsBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "View traits", title: "View traits" }
      });
      (0, import_obsidian16.setIcon)(viewTraitsBtn, "list");
      viewTraitsBtn.onclick = async () => {
        try {
          const traits = await this.plugin.apiClient.getArchetypeTraits(archetype.id);
          this.showArchetypeTraitsModal(archetype, traits);
        } catch (err) {
<<<<<<< HEAD
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
          new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        }
      };
      const archetypeEditBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Edit archetype", title: "Edit archetype" }
      });
      (0, import_obsidian16.setIcon)(archetypeEditBtn, "pencil");
      archetypeEditBtn.onclick = () => {
        this.showEditArchetypeModal(archetype);
      };
      const archetypeDeleteBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Delete archetype", title: "Delete archetype" }
      });
      (0, import_obsidian16.setIcon)(archetypeDeleteBtn, "trash");
      archetypeDeleteBtn.onclick = async () => {
        if (confirm(`Delete archetype "${archetype.name}"?`)) {
          try {
            await this.plugin.apiClient.deleteArchetype(archetype.id);
            await this.loadWorldData();
            this.renderWorldTabContent();
<<<<<<< HEAD
            new import_obsidian17.Notice("Archetype deleted");
          } catch (err) {
            new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
            new import_obsidian16.Notice("Archetype deleted");
          } catch (err) {
            new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          }
        }
      };
    }
  }
  renderLoreTab(container) {
    if (this.lores.length === 0) {
      this.renderEmptyCard(container, {
        icon: "book-open",
        title: "No lore found",
        description: "Create your first lore!"
      });
      return;
    }
    const rootLores = this.lores.filter((l) => !l.parent_id);
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const lore of rootLores.sort((a, b) => a.name.localeCompare(b.name))) {
      this.renderLoreItem(list, lore, 0);
    }
  }
  renderLoreItem(container, lore, level) {
    const item = container.createDiv({ cls: "story-engine-item" });
    item.style.marginLeft = `${level * 1}rem`;
    const titleRow = item.createDiv({ cls: "story-engine-title" });
    titleRow.textContent = lore.name;
    if (lore.category) {
      const categoryBadge = titleRow.createSpan({ cls: "story-engine-badge" });
      categoryBadge.textContent = lore.category;
    }
    const meta = item.createDiv({ cls: "story-engine-meta" });
    if (lore.description) {
      meta.createEl("span", { text: lore.description.substring(0, 50) + (lore.description.length > 50 ? "..." : "") });
    }
    const actions = item.createDiv({ cls: "story-engine-item-actions" });
<<<<<<< HEAD
    const linkBtn = actions.createEl("button");
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(linkBtn, "link");
    linkBtn.title = "Link to Entity";
    linkBtn.onclick = () => this.showAddLoreReferenceModal(lore);
    const subBtn = actions.createEl("button");
    (0, import_obsidian17.setIcon)(subBtn, "folder-plus");
=======
=======
    const linkBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Link to entity", title: "Link to entity" }
    });
>>>>>>> f44e16e (refactor(obsidian-plugin): improve story list UI with enhanced card styling and hover effects)
    (0, import_obsidian16.setIcon)(linkBtn, "link");
    linkBtn.onclick = () => this.showAddLoreReferenceModal(lore);
    const subBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Create sub-lore", title: "Create sub-lore" }
    });
    (0, import_obsidian16.setIcon)(subBtn, "folder-plus");
<<<<<<< HEAD
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    subBtn.title = "Create Sub-Lore";
=======
>>>>>>> f44e16e (refactor(obsidian-plugin): improve story list UI with enhanced card styling and hover effects)
    subBtn.onclick = () => this.showCreateLoreModal(lore.id);
    const loreEditBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Edit lore", title: "Edit lore" }
    });
    (0, import_obsidian16.setIcon)(loreEditBtn, "pencil");
    loreEditBtn.onclick = () => {
      this.showEditLoreModal(lore);
    };
    const loreDeleteBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Delete lore", title: "Delete lore" }
    });
    (0, import_obsidian16.setIcon)(loreDeleteBtn, "trash");
    loreDeleteBtn.onclick = async () => {
      if (confirm(`Delete lore "${lore.name}"?`)) {
        try {
          await this.plugin.apiClient.deleteLore(lore.id);
          await this.loadWorldData();
          this.renderWorldTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Lore deleted");
        } catch (err) {
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
          new import_obsidian16.Notice("Lore deleted");
        } catch (err) {
          new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        }
      }
    };
    const children2 = this.lores.filter((l) => l.parent_id === lore.id);
    for (const child of children2.sort((a, b) => a.name.localeCompare(b.name))) {
      this.renderLoreItem(container, child, level + 1);
    }
  }
  renderFactionsTab(container) {
    if (this.factions.length === 0) {
      this.renderEmptyCard(container, {
        icon: "users",
        title: "No factions found",
        description: "Create your first faction!"
      });
      return;
    }
    const rootFactions = this.factions.filter((f) => !f.parent_id);
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const faction of rootFactions.sort((a, b) => a.name.localeCompare(b.name))) {
      this.renderFactionItem(list, faction, 0);
    }
  }
  renderFactionItem(container, faction, level) {
    const item = container.createDiv({ cls: "story-engine-item" });
    item.style.marginLeft = `${level * 1}rem`;
    const titleRow = item.createDiv({ cls: "story-engine-title" });
    titleRow.textContent = faction.name;
    if (faction.type) {
      const typeBadge = titleRow.createSpan({ cls: "story-engine-badge" });
      typeBadge.textContent = faction.type;
    }
    const meta = item.createDiv({ cls: "story-engine-meta" });
    if (faction.description) {
      meta.createEl("span", { text: faction.description.substring(0, 50) + (faction.description.length > 50 ? "..." : "") });
    }
    const actions = item.createDiv({ cls: "story-engine-item-actions" });
<<<<<<< HEAD
    const linkBtn = actions.createEl("button");
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(linkBtn, "link");
    linkBtn.title = "Link to Entity";
    linkBtn.onclick = () => this.showAddFactionReferenceModal(faction);
    const subBtn = actions.createEl("button");
    (0, import_obsidian17.setIcon)(subBtn, "folder-plus");
=======
=======
    const linkBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Link to entity", title: "Link to entity" }
    });
>>>>>>> f44e16e (refactor(obsidian-plugin): improve story list UI with enhanced card styling and hover effects)
    (0, import_obsidian16.setIcon)(linkBtn, "link");
    linkBtn.onclick = () => this.showAddFactionReferenceModal(faction);
    const subBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Create sub-faction", title: "Create sub-faction" }
    });
    (0, import_obsidian16.setIcon)(subBtn, "folder-plus");
<<<<<<< HEAD
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    subBtn.title = "Create Sub-Faction";
=======
>>>>>>> f44e16e (refactor(obsidian-plugin): improve story list UI with enhanced card styling and hover effects)
    subBtn.onclick = () => this.showCreateFactionModal(faction.id);
    const factionViewBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "View faction details", title: "View faction details" }
    });
    (0, import_obsidian16.setIcon)(factionViewBtn, "eye");
    factionViewBtn.onclick = () => {
      this.showFactionDetailsModal(faction);
    };
    const factionEditBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Edit faction", title: "Edit faction" }
    });
    (0, import_obsidian16.setIcon)(factionEditBtn, "pencil");
    factionEditBtn.onclick = () => {
      this.showEditFactionModal(faction);
    };
    const factionDeleteBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Delete faction", title: "Delete faction" }
    });
    (0, import_obsidian16.setIcon)(factionDeleteBtn, "trash");
    factionDeleteBtn.onclick = async () => {
      if (confirm(`Delete faction "${faction.name}"?`)) {
        try {
          await this.plugin.apiClient.deleteFaction(faction.id);
          await this.loadWorldData();
          this.renderWorldTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Faction deleted");
        } catch (err) {
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
          new import_obsidian16.Notice("Faction deleted");
        } catch (err) {
          new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        }
      }
    };
    const children2 = this.factions.filter((f) => f.parent_id === faction.id);
    for (const child of children2.sort((a, b) => a.name.localeCompare(b.name))) {
      this.renderFactionItem(container, child, level + 1);
    }
  }
  // Modal methods for World entities
  showCreateCharacterModal() {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Character");
    const content = modal.contentEl;
    let name = "";
    let description = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createCharacter(this.currentWorld.id, { name: name.trim(), description: description.trim() });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Character created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Character created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditCharacterModal(character) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit Character");
    const content = modal.contentEl;
    let name = character.name;
    let description = character.description;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        const updated = await this.plugin.apiClient.updateCharacter(character.id, { name: name.trim(), description: description.trim() });
        if (this.viewMode === "character-details" && this.characterDetailsView && this.characterDetailsView["character"].id === character.id) {
          this.characterDetailsView.updateCharacter(updated);
        } else {
          await this.loadWorldData();
          this.renderWorldTabContent();
        }
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Character updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Character updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showCreateLocationModal() {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Location");
    const content = modal.contentEl;
    let name = "";
    let type2 = "";
    let description = "";
    let parentId = null;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Type" });
    const typeInput = content.createEl("input", { type: "text", cls: "story-engine-input", placeholder: "e.g., City, Forest, Building" });
    typeInput.oninput = () => {
      type2 = typeInput.value;
    };
    content.createEl("label", { text: "Parent Location" });
    const parentSelect = content.createEl("select", { cls: "story-engine-select" });
    parentSelect.createEl("option", { value: "", text: "None (Root Location)" });
    for (const loc of this.locations.sort((a, b) => a.name.localeCompare(b.name))) {
      parentSelect.createEl("option", { value: loc.id, text: loc.name });
    }
    parentSelect.onchange = () => {
      parentId = parentSelect.value || null;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createLocation(this.currentWorld.id, {
          name: name.trim(),
          type: type2.trim(),
          description: description.trim(),
          parent_id: parentId
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Location created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Location created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditLocationModal(location) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit Location");
    const content = modal.contentEl;
    let name = location.name;
    let type2 = location.type;
    let description = location.description;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Type" });
    const typeInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: type2 });
    typeInput.oninput = () => {
      type2 = typeInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.updateLocation(location.id, { name: name.trim(), type: type2.trim(), description: description.trim() });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Location updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Location updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showCreateArtifactModal() {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Artifact");
    const content = modal.contentEl;
    let name = "";
    let description = "";
    let rarity = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Rarity" });
    const raritySelect = content.createEl("select", { cls: "story-engine-select" });
    raritySelect.createEl("option", { value: "", text: "Select Rarity" });
    ["Common", "Uncommon", "Rare", "Epic", "Legendary", "Unique"].forEach((r) => {
      raritySelect.createEl("option", { value: r.toLowerCase(), text: r });
    });
    raritySelect.onchange = () => {
      rarity = raritySelect.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createArtifact(this.currentWorld.id, {
          name: name.trim(),
          description: description.trim(),
          rarity
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Artifact created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Artifact created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditArtifactModal(artifact) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit Artifact");
    const content = modal.contentEl;
    let name = artifact.name;
    let description = artifact.description;
    let rarity = artifact.rarity;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Rarity" });
    const raritySelect = content.createEl("select", { cls: "story-engine-select" });
    raritySelect.createEl("option", { value: "", text: "Select Rarity" });
    ["Common", "Uncommon", "Rare", "Epic", "Legendary", "Unique"].forEach((r) => {
      const opt = raritySelect.createEl("option", { value: r.toLowerCase(), text: r });
      if (rarity.toLowerCase() === r.toLowerCase())
        opt.selected = true;
    });
    raritySelect.onchange = () => {
      rarity = raritySelect.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.updateArtifact(artifact.id, { name: name.trim(), description: description.trim(), rarity });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Artifact updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Artifact updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showCreateEventModal() {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Event");
    const content = modal.contentEl;
    let name = "";
    let type2 = "";
    let description = "";
    let importance = 5;
    let timelinePosition = void 0;
    content.createEl("h4", { text: "Basic Info", cls: "story-engine-modal-section" });
    content.createEl("label", { text: "Event Name *" });
    const nameInput = content.createEl("input", {
      type: "text",
      cls: "story-engine-input",
      placeholder: "e.g., The Battle of Crimson Fields"
    });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Event Type" });
    const typeSelect = content.createEl("select", { cls: "story-engine-select" });
    typeSelect.createEl("option", { value: "", text: "Select type..." });
    ["Battle", "Treaty", "Discovery", "Birth", "Death", "Coronation", "Disaster", "Migration", "Founding", "Other"].forEach((t) => {
      typeSelect.createEl("option", { value: t, text: t });
    });
    typeSelect.onchange = () => {
      type2 = typeSelect.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      placeholder: "What happened during this event?"
    });
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("h4", { text: "\u{1F4C5} Timeline Position", cls: "story-engine-modal-section" });
    content.createEl("label", { text: "Year (relative to Epoch/Year Zero)" });
    content.createEl("p", {
      text: "Use positive numbers for years after Year Zero, negative for years before.",
      cls: "story-engine-hint"
    });
    const timelinePosInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      placeholder: "e.g., 100 (Year 100) or -50 (50 years before Year Zero)"
    });
    timelinePosInput.oninput = () => {
      const val = timelinePosInput.value;
      timelinePosition = val ? parseInt(val) : void 0;
    };
    content.createEl("h4", { text: "\u2B50 Importance", cls: "story-engine-modal-section" });
    content.createEl("label", { text: "Importance Level (1-10)" });
    const importanceInput = content.createEl("input", {
      type: "range",
      cls: "story-engine-range",
      value: "5",
      attr: { min: "1", max: "10" }
    });
    const importanceValue = content.createEl("span", { text: " 5", cls: "story-engine-range-value" });
    importanceInput.oninput = () => {
      importance = parseInt(importanceInput.value) || 5;
      importanceValue.textContent = ` ${importance}`;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create Event", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createEvent(this.currentWorld.id, {
          name: name.trim(),
          type: type2.trim() || void 0,
          description: description.trim() || void 0,
          importance: Math.max(1, Math.min(10, importance)),
          timeline_position: timelinePosition
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Event created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Event created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditEventModal(event) {
    var _a, _b;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit Event");
    const content = modal.contentEl;
    let name = event.name;
    let type2 = event.type || "";
    let description = event.description || "";
    let importance = event.importance;
    let timelinePosition = (_a = event.timeline_position) != null ? _a : void 0;
    content.createEl("h4", { text: "Basic Info", cls: "story-engine-modal-section" });
    content.createEl("label", { text: "Event Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Event Type" });
    const typeSelect = content.createEl("select", { cls: "story-engine-select" });
    typeSelect.createEl("option", { value: "", text: "Select type..." });
    ["Battle", "Treaty", "Discovery", "Birth", "Death", "Coronation", "Disaster", "Migration", "Founding", "Epoch", "Other"].forEach((t) => {
      const opt = typeSelect.createEl("option", { value: t, text: t });
      if (type2.toLowerCase() === t.toLowerCase())
        opt.selected = true;
    });
    typeSelect.onchange = () => {
      type2 = typeSelect.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("h4", { text: "\u{1F4C5} Timeline Position", cls: "story-engine-modal-section" });
    content.createEl("label", { text: "Year (relative to Epoch/Year Zero)" });
    content.createEl("p", {
      text: "Use positive numbers for years after Year Zero, negative for years before.",
      cls: "story-engine-hint"
    });
    const timelinePosInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      value: (_b = timelinePosition == null ? void 0 : timelinePosition.toString()) != null ? _b : ""
    });
    timelinePosInput.placeholder = "e.g., 100 or -50";
    timelinePosInput.oninput = () => {
      const val = timelinePosInput.value;
      timelinePosition = val ? parseInt(val) : void 0;
    };
    content.createEl("h4", { text: "\u2B50 Importance", cls: "story-engine-modal-section" });
    content.createEl("label", { text: "Importance Level (1-10)" });
    const importanceInput = content.createEl("input", {
      type: "range",
      cls: "story-engine-range",
      value: importance.toString(),
      attr: { min: "1", max: "10" }
    });
    const importanceValue = content.createEl("span", { text: ` ${importance}`, cls: "story-engine-range-value" });
    importanceInput.oninput = () => {
      importance = parseInt(importanceInput.value) || 5;
      importanceValue.textContent = ` ${importance}`;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.updateEvent(event.id, {
          name: name.trim(),
          type: type2.trim() || void 0,
          description: description.trim() || void 0,
          importance: Math.max(1, Math.min(10, importance)),
          timeline_position: timelinePosition
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Event updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Event updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showCreateTraitModal() {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Trait");
    const content = modal.contentEl;
    let name = "";
    let category = "";
    let description = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Category" });
    const categoryInput = content.createEl("input", { type: "text", cls: "story-engine-input", placeholder: "e.g., Personality, Physical, Background" });
    categoryInput.oninput = () => {
      category = categoryInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createTrait({
          name: name.trim(),
          category: category.trim(),
          description: description.trim()
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Trait created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Trait created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditTraitModal(trait) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit Trait");
    const content = modal.contentEl;
    let name = trait.name;
    let category = trait.category;
    let description = trait.description;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Category" });
    const categoryInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: category });
    categoryInput.oninput = () => {
      category = categoryInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.updateTrait(trait.id, { name: name.trim(), category: category.trim(), description: description.trim() });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Trait updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Trait updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  renderTimeConfigDisplay(container, config) {
    var _a;
    container.createEl("h4", { text: "Time Configuration" });
    const grid = container.createDiv({ cls: "story-engine-time-config-grid" });
    grid.createDiv().setText(`Base Unit: ${config.base_unit}`);
    grid.createDiv().setText(`Hours/Day: ${config.hours_per_day}`);
    grid.createDiv().setText(`Days/Week: ${config.days_per_week}`);
    grid.createDiv().setText(`Days/Year: ${config.days_per_year}`);
    grid.createDiv().setText(`Months/Year: ${config.months_per_year}`);
    if (config.era_name) {
      grid.createDiv().setText(`Era: ${config.era_name}`);
    }
    if ((_a = config.month_names) == null ? void 0 : _a.length) {
      grid.createDiv().setText(`Months: ${config.month_names.join(", ")}`);
    }
    if (config.year_zero !== void 0) {
      grid.createDiv().setText(`Year Zero: ${config.year_zero}`);
    }
  }
  showTimeConfigModal(existingConfig) {
    var _a;
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText(existingConfig ? "Edit Time Configuration" : "Create Time Configuration");
    const content = modal.contentEl;
    let baseUnit = (existingConfig == null ? void 0 : existingConfig.base_unit) || "year";
    let hoursPerDay = (existingConfig == null ? void 0 : existingConfig.hours_per_day) || 24;
    let daysPerWeek = (existingConfig == null ? void 0 : existingConfig.days_per_week) || 7;
    let daysPerYear = (existingConfig == null ? void 0 : existingConfig.days_per_year) || 365;
    let monthsPerYear = (existingConfig == null ? void 0 : existingConfig.months_per_year) || 12;
    let eraName = (existingConfig == null ? void 0 : existingConfig.era_name) || "";
    let yearZero = ((_a = existingConfig == null ? void 0 : existingConfig.year_zero) == null ? void 0 : _a.toString()) || "";
    content.createEl("label", { text: "Base Unit *" });
    const baseUnitSelect = content.createEl("select", { cls: "story-engine-select" });
    ["year", "day", "hour", "custom"].forEach((unit2) => {
      const opt = baseUnitSelect.createEl("option", { value: unit2, text: unit2 });
      if (baseUnit === unit2)
        opt.selected = true;
    });
    baseUnitSelect.onchange = () => {
      baseUnit = baseUnitSelect.value;
    };
    content.createEl("label", { text: "Hours per Day" });
    const hoursPerDayInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      value: hoursPerDay.toString()
    });
    hoursPerDayInput.oninput = () => {
      hoursPerDay = parseFloat(hoursPerDayInput.value) || 24;
    };
    content.createEl("label", { text: "Days per Week" });
    const daysPerWeekInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      value: daysPerWeek.toString()
    });
    daysPerWeekInput.oninput = () => {
      daysPerWeek = parseInt(daysPerWeekInput.value) || 7;
    };
    content.createEl("label", { text: "Days per Year" });
    const daysPerYearInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      value: daysPerYear.toString()
    });
    daysPerYearInput.oninput = () => {
      daysPerYear = parseInt(daysPerYearInput.value) || 365;
    };
    content.createEl("label", { text: "Months per Year" });
    const monthsPerYearInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      value: monthsPerYear.toString()
    });
    monthsPerYearInput.oninput = () => {
      monthsPerYear = parseInt(monthsPerYearInput.value) || 12;
    };
    content.createEl("label", { text: "Era Name (optional)" });
    const eraNameInput = content.createEl("input", {
      type: "text",
      cls: "story-engine-input",
      value: eraName
    });
    eraNameInput.oninput = () => {
      eraName = eraNameInput.value;
    };
    content.createEl("label", { text: "Year Zero (optional)" });
    const yearZeroInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      value: yearZero
    });
    yearZeroInput.oninput = () => {
      yearZero = yearZeroInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        const timeConfig = {
          base_unit: baseUnit,
          hours_per_day: hoursPerDay,
          days_per_week: daysPerWeek,
          days_per_year: daysPerYear,
          months_per_year: monthsPerYear,
          era_name: eraName.trim() || void 0,
          year_zero: yearZero ? parseInt(yearZero) : void 0
        };
        await this.plugin.apiClient.updateWorldTimeConfig(this.currentWorld.id, timeConfig);
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Time configuration saved");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Time configuration saved");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  async showTimelineModal() {
    if (!this.currentWorld)
      return;
    try {
      const events = await this.plugin.apiClient.getTimeline(this.currentWorld.id);
      const modal = new TimelineModal(this.app, events, this.currentWorld.time_config || null);
      modal.open();
    } catch (err) {
<<<<<<< HEAD
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed to load timeline"}`, 5e3);
=======
      new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed to load timeline"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  // Placeholder methods for modals that will be implemented later
  showArchetypeTraitsModal(archetype, traits) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText(`Traits for ${archetype.name}`);
    const content = modal.contentEl;
    if (traits.length === 0) {
      content.createEl("p", { text: "No traits assigned to this archetype." });
    } else {
      const list = content.createDiv({ cls: "story-engine-list" });
      for (const trait of traits) {
        const item = list.createDiv({ cls: "story-engine-item" });
        item.createDiv({ cls: "story-engine-title", text: trait.trait_name || "Unknown" });
      }
    }
    modal.open();
  }
  showCreateArchetypeModal() {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Archetype");
    const content = modal.contentEl;
    let name = "";
    let description = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createArchetype({ name: name.trim(), description: description.trim() });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Archetype created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Archetype created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditArchetypeModal(archetype) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit Archetype");
    const content = modal.contentEl;
    let name = archetype.name;
    let description = archetype.description;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.updateArchetype(archetype.id, { name: name.trim(), description: description.trim() });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Archetype updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Archetype updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showLoreDetailsModal(lore) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText(lore.name);
    const content = modal.contentEl;
    content.createEl("h4", { text: "Description" });
    content.createEl("p", { text: lore.description || "No description" });
    if (lore.rules) {
      content.createEl("h4", { text: "Rules" });
      content.createEl("p", { text: lore.rules });
    }
    if (lore.limitations) {
      content.createEl("h4", { text: "Limitations" });
      content.createEl("p", { text: lore.limitations });
    }
    if (lore.requirements) {
      content.createEl("h4", { text: "Requirements" });
      content.createEl("p", { text: lore.requirements });
    }
    modal.open();
  }
  showCreateLoreModal(parentId) {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Lore");
    const content = modal.contentEl;
    let name = "";
    let category = "";
    let description = "";
    let rules = "";
    let limitations = "";
    let requirements = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Category" });
    const categoryInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    categoryInput.oninput = () => {
      category = categoryInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("label", { text: "Rules" });
    const rulesInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    rulesInput.oninput = () => {
      rules = rulesInput.value;
    };
    content.createEl("label", { text: "Limitations" });
    const limitationsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    limitationsInput.oninput = () => {
      limitations = limitationsInput.value;
    };
    content.createEl("label", { text: "Requirements" });
    const requirementsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    requirementsInput.oninput = () => {
      requirements = requirementsInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createLore(this.currentWorld.id, {
          name: name.trim(),
          category: category.trim() || void 0,
          description: description.trim(),
          rules: rules.trim(),
          limitations: limitations.trim(),
          requirements: requirements.trim(),
          parent_id: parentId || void 0
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Lore created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Lore created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditLoreModal(lore) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit Lore");
    const content = modal.contentEl;
    let name = lore.name;
    let category = lore.category || "";
    let description = lore.description;
    let rules = lore.rules;
    let limitations = lore.limitations;
    let requirements = lore.requirements;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Category" });
    const categoryInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: category });
    categoryInput.oninput = () => {
      category = categoryInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("label", { text: "Rules" });
    const rulesInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    rulesInput.value = rules;
    rulesInput.oninput = () => {
      rules = rulesInput.value;
    };
    content.createEl("label", { text: "Limitations" });
    const limitationsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    limitationsInput.value = limitations;
    limitationsInput.oninput = () => {
      limitations = limitationsInput.value;
    };
    content.createEl("label", { text: "Requirements" });
    const requirementsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    requirementsInput.value = requirements;
    requirementsInput.oninput = () => {
      requirements = requirementsInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.updateLore(lore.id, {
          name: name.trim(),
          category: category.trim() || void 0,
          description: description.trim(),
          rules: rules.trim(),
          limitations: limitations.trim(),
          requirements: requirements.trim()
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Lore updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Lore updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showFactionDetailsModal(faction) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText(faction.name);
    const content = modal.contentEl;
    content.createEl("h4", { text: "Description" });
    content.createEl("p", { text: faction.description || "No description" });
    if (faction.beliefs) {
      content.createEl("h4", { text: "Beliefs" });
      content.createEl("p", { text: faction.beliefs });
    }
    if (faction.structure) {
      content.createEl("h4", { text: "Structure" });
      content.createEl("p", { text: faction.structure });
    }
    if (faction.symbols) {
      content.createEl("h4", { text: "Symbols" });
      content.createEl("p", { text: faction.symbols });
    }
    modal.open();
  }
  showCreateFactionModal(parentId) {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Faction");
    const content = modal.contentEl;
    let name = "";
    let type2 = "";
    let description = "";
    let beliefs = "";
    let structure = "";
    let symbols = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Type" });
    const typeInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    typeInput.oninput = () => {
      type2 = typeInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("label", { text: "Beliefs" });
    const beliefsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    beliefsInput.oninput = () => {
      beliefs = beliefsInput.value;
    };
    content.createEl("label", { text: "Structure" });
    const structureInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    structureInput.oninput = () => {
      structure = structureInput.value;
    };
    content.createEl("label", { text: "Symbols" });
    const symbolsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    symbolsInput.oninput = () => {
      symbols = symbolsInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createFaction(this.currentWorld.id, {
          name: name.trim(),
          type: type2.trim() || void 0,
          description: description.trim(),
          beliefs: beliefs.trim(),
          structure: structure.trim(),
          symbols: symbols.trim(),
          parent_id: parentId || void 0
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Faction created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Faction created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditFactionModal(faction) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit Faction");
    const content = modal.contentEl;
    let name = faction.name;
    let type2 = faction.type || "";
    let description = faction.description;
    let beliefs = faction.beliefs;
    let structure = faction.structure;
    let symbols = faction.symbols;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Type" });
    const typeInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: type2 });
    typeInput.oninput = () => {
      type2 = typeInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("label", { text: "Beliefs" });
    const beliefsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    beliefsInput.value = beliefs;
    beliefsInput.oninput = () => {
      beliefs = beliefsInput.value;
    };
    content.createEl("label", { text: "Structure" });
    const structureInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    structureInput.value = structure;
    structureInput.oninput = () => {
      structure = structureInput.value;
    };
    content.createEl("label", { text: "Symbols" });
    const symbolsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    symbolsInput.value = symbols;
    symbolsInput.oninput = () => {
      symbols = symbolsInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.updateFaction(faction.id, {
          name: name.trim(),
          type: type2.trim() || void 0,
          description: description.trim(),
          beliefs: beliefs.trim(),
          structure: structure.trim(),
          symbols: symbols.trim()
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Faction updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Faction updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  // ==================== Relationship Modals ====================
  showAddCharacterRelationshipModal(character) {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Add Character Relationship");
    const content = modal.contentEl;
    let otherCharacterId = "";
    let relationshipType = "ally";
    let description = "";
    let bidirectional = true;
    content.createEl("label", { text: "Other Character *" });
    const characterSelect = content.createEl("select", { cls: "story-engine-select" });
    characterSelect.createEl("option", { value: "", text: "Select a character..." });
    for (const char of this.characters.filter((c) => c.id !== character.id).sort((a, b) => a.name.localeCompare(b.name))) {
      characterSelect.createEl("option", { value: char.id, text: char.name });
    }
    characterSelect.onchange = () => {
      otherCharacterId = characterSelect.value;
    };
    content.createEl("label", { text: "Relationship Type *" });
    const typeSelect = content.createEl("select", { cls: "story-engine-select" });
    const relationshipTypes = ["ally", "enemy", "family", "lover", "rival", "mentor", "student"];
    for (const type2 of relationshipTypes) {
      typeSelect.createEl("option", { value: type2, text: type2.charAt(0).toUpperCase() + type2.slice(1) });
    }
    typeSelect.onchange = () => {
      relationshipType = typeSelect.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("label", { text: "Bidirectional" });
    const bidirectionalCheckbox = content.createEl("input", { type: "checkbox" });
    bidirectionalCheckbox.checked = true;
    bidirectionalCheckbox.onchange = () => {
      bidirectional = bidirectionalCheckbox.checked;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!otherCharacterId) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Please select a character", 3e3);
=======
        new import_obsidian16.Notice("Please select a character", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createCharacterRelationship(character.id, {
          character2_id: otherCharacterId,
          relationship_type: relationshipType,
          description: description.trim(),
          bidirectional
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Relationship created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Relationship created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showLinkEventToEntityModal(event) {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText(`Link Event: ${event.name}`);
    const content = modal.contentEl;
    let entityType = "character";
    let entityId = "";
    let relationshipType = "";
    let notes = "";
    content.createEl("label", { text: "Entity Type *" });
    const typeSelect = content.createEl("select", { cls: "story-engine-select" });
    typeSelect.createEl("option", { value: "character", text: "\u{1F464} Character" });
    typeSelect.createEl("option", { value: "location", text: "\u{1F4CD} Location" });
    typeSelect.createEl("option", { value: "faction", text: "\u{1F3F4} Faction" });
    typeSelect.createEl("option", { value: "artifact", text: "\u2694\uFE0F Artifact" });
    typeSelect.createEl("option", { value: "lore", text: "\u{1F4DC} Lore" });
    content.createEl("label", { text: "Entity *" });
    const entitySelect = content.createEl("select", { cls: "story-engine-select" });
    const populateEntitySelect = () => {
      entitySelect.empty();
      entitySelect.createEl("option", { value: "", text: `Select a ${entityType}...` });
      entityId = "";
      if (entityType === "character") {
        for (const char of this.characters.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: char.id, text: char.name });
        }
      } else if (entityType === "location") {
        for (const loc of this.locations.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: loc.id, text: loc.name });
        }
      } else if (entityType === "faction") {
        for (const faction of this.factions.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: faction.id, text: faction.name });
        }
      } else if (entityType === "artifact") {
        for (const art of this.artifacts.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: art.id, text: art.name });
        }
      } else if (entityType === "lore") {
        for (const lore of this.lores.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: lore.id, text: lore.name });
        }
      }
    };
    populateEntitySelect();
    typeSelect.onchange = () => {
      entityType = typeSelect.value;
      populateEntitySelect();
    };
    entitySelect.onchange = () => {
      entityId = entitySelect.value;
    };
    content.createEl("label", { text: "Relationship Type" });
    const relTypeSelect = content.createEl("select", { cls: "story-engine-select" });
    relTypeSelect.createEl("option", { value: "", text: "Select relationship..." });
    ["involved", "caused", "affected", "witnessed", "created", "destroyed", "participated", "led", "opposed"].forEach((rel) => {
      relTypeSelect.createEl("option", { value: rel, text: rel.charAt(0).toUpperCase() + rel.slice(1) });
    });
    relTypeSelect.onchange = () => {
      relationshipType = relTypeSelect.value;
    };
    content.createEl("label", { text: "Notes" });
    const notesInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      placeholder: "Additional details about this relationship..."
    });
    notesInput.oninput = () => {
      notes = notesInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Link Entity", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!entityId) {
<<<<<<< HEAD
        new import_obsidian17.Notice(`Please select a ${entityType}`, 3e3);
=======
        new import_obsidian16.Notice(`Please select a ${entityType}`, 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.addEventReference(event.id, entityType, entityId, relationshipType.trim() || void 0, notes.trim() || void 0);
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Entity linked to event");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Entity linked to event");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showSetEventParentModal(event) {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Set Parent Event (Cause)");
    const content = modal.contentEl;
    let parentId = event.parent_id || null;
    content.createEl("p", {
      text: "Link this event to its cause or parent event in the timeline hierarchy.",
      cls: "story-engine-hint"
    });
    content.createEl("label", { text: "Parent Event (Cause)" });
    const parentSelect = content.createEl("select", { cls: "story-engine-select" });
    parentSelect.createEl("option", { value: "", text: "None (Root Event)" });
    const sortedEvents = this.events.filter((e) => e.id !== event.id).sort((a, b) => {
      var _a, _b;
      const posA = (_a = a.timeline_position) != null ? _a : Number.MAX_SAFE_INTEGER;
      const posB = (_b = b.timeline_position) != null ? _b : Number.MAX_SAFE_INTEGER;
      if (posA !== posB)
        return posA - posB;
      return a.name.localeCompare(b.name);
    });
    for (const evt of sortedEvents) {
      const posLabel = evt.timeline_position !== void 0 ? ` (Year ${evt.timeline_position})` : "";
      const opt = parentSelect.createEl("option", { value: evt.id, text: `${evt.name}${posLabel}` });
      if (event.parent_id === evt.id) {
        opt.selected = true;
      }
    }
    parentSelect.onchange = () => {
      parentId = parentSelect.value || null;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.moveEvent(event.id, parentId);
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Event parent updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Event parent updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showAddFactionReferenceModal(faction) {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Link Faction to Entity");
    const content = modal.contentEl;
    let entityType = "character";
    let entityId = "";
    let role = "";
    let notes = "";
    content.createEl("label", { text: "Entity Type *" });
    const typeSelect = content.createEl("select", { cls: "story-engine-select" });
    typeSelect.createEl("option", { value: "character", text: "Character" });
    typeSelect.createEl("option", { value: "location", text: "Location" });
    typeSelect.createEl("option", { value: "artifact", text: "Artifact" });
    typeSelect.createEl("option", { value: "event", text: "Event" });
    typeSelect.createEl("option", { value: "faction", text: "Faction" });
    typeSelect.onchange = () => {
      entityType = typeSelect.value;
      entitySelect.empty();
      entitySelect.createEl("option", { value: "", text: `Select a ${entityType}...` });
      loadEntitiesForType(entityType);
    };
    content.createEl("label", { text: "Entity *" });
    const entitySelect = content.createEl("select", { cls: "story-engine-select" });
    entitySelect.createEl("option", { value: "", text: "Select an entity..." });
    const loadEntitiesForType = (type2) => {
      if (type2 === "character") {
        for (const char of this.characters.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: char.id, text: char.name });
        }
      } else if (type2 === "location") {
        for (const loc of this.locations.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: loc.id, text: loc.name });
        }
      } else if (type2 === "artifact") {
        for (const art of this.artifacts.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: art.id, text: art.name });
        }
      } else if (type2 === "event") {
        for (const evt of this.events.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: evt.id, text: evt.name });
        }
      } else if (type2 === "faction") {
        for (const fac of this.factions.filter((f) => f.id !== faction.id).sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: fac.id, text: fac.name });
        }
      }
    };
    loadEntitiesForType(entityType);
    entitySelect.onchange = () => {
      entityId = entitySelect.value;
    };
    content.createEl("label", { text: "Role" });
    const roleInput = content.createEl("input", { type: "text", cls: "story-engine-input", placeholder: "e.g., leader, member, ally, rival" });
    roleInput.oninput = () => {
      role = roleInput.value;
    };
    content.createEl("label", { text: "Notes" });
    const notesInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    notesInput.oninput = () => {
      notes = notesInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!entityId) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Please select an entity", 3e3);
=======
        new import_obsidian16.Notice("Please select an entity", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.addFactionReference(faction.id, entityType, entityId, role.trim() || void 0, notes.trim() || void 0);
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Reference created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Reference created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showAddLoreReferenceModal(lore) {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Link Lore to Entity");
    const content = modal.contentEl;
    let entityType = "character";
    let entityId = "";
    let relationshipType = "";
    let notes = "";
    content.createEl("label", { text: "Entity Type *" });
    const typeSelect = content.createEl("select", { cls: "story-engine-select" });
    typeSelect.createEl("option", { value: "character", text: "Character" });
    typeSelect.createEl("option", { value: "location", text: "Location" });
    typeSelect.createEl("option", { value: "artifact", text: "Artifact" });
    typeSelect.createEl("option", { value: "event", text: "Event" });
    typeSelect.createEl("option", { value: "faction", text: "Faction" });
    typeSelect.createEl("option", { value: "lore", text: "Lore" });
    typeSelect.onchange = () => {
      entityType = typeSelect.value;
      entitySelect.empty();
      entitySelect.createEl("option", { value: "", text: `Select a ${entityType}...` });
      loadEntitiesForType(entityType);
    };
    content.createEl("label", { text: "Entity *" });
    const entitySelect = content.createEl("select", { cls: "story-engine-select" });
    entitySelect.createEl("option", { value: "", text: "Select an entity..." });
    const loadEntitiesForType = (type2) => {
      if (type2 === "character") {
        for (const char of this.characters.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: char.id, text: char.name });
        }
      } else if (type2 === "location") {
        for (const loc of this.locations.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: loc.id, text: loc.name });
        }
      } else if (type2 === "artifact") {
        for (const art of this.artifacts.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: art.id, text: art.name });
        }
      } else if (type2 === "event") {
        for (const evt of this.events.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: evt.id, text: evt.name });
        }
      } else if (type2 === "faction") {
        for (const fac of this.factions.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: fac.id, text: fac.name });
        }
      } else if (type2 === "lore") {
        for (const l of this.lores.filter((l2) => l2.id !== lore.id).sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: l.id, text: l.name });
        }
      }
    };
    loadEntitiesForType(entityType);
    entitySelect.onchange = () => {
      entityId = entitySelect.value;
    };
    content.createEl("label", { text: "Relationship Type" });
    const relTypeInput = content.createEl("input", { type: "text", cls: "story-engine-input", placeholder: "e.g., practitioner, origin, forbidden" });
    relTypeInput.oninput = () => {
      relationshipType = relTypeInput.value;
    };
    content.createEl("label", { text: "Notes" });
    const notesInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    notesInput.oninput = () => {
      notes = notesInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!entityId) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Please select an entity", 3e3);
=======
        new import_obsidian16.Notice("Please select an entity", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.addLoreReference(lore.id, entityType, entityId, relationshipType.trim() || void 0, notes.trim() || void 0);
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Reference created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Reference created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  // ==================== Character Details View Methods ====================
  async showCharacterDetails(character) {
    this.viewMode = "character-details";
    const world = character.world_id ? await this.plugin.apiClient.getWorld(character.world_id).catch(() => null) : null;
    const characters = world ? await this.plugin.apiClient.getCharacters(world.id).catch(() => []) : [];
    let traits = this.traits;
    let archetypes = this.archetypes;
    let events = world ? this.events : [];
    if (!traits || traits.length === 0) {
      try {
        traits = await this.plugin.apiClient.getTraits();
        this.traits = traits;
      } catch (err) {
        console.warn("Failed to load traits:", err);
        traits = [];
      }
    }
    if (!archetypes || archetypes.length === 0) {
      try {
        archetypes = await this.plugin.apiClient.getArchetypes();
        this.archetypes = archetypes;
      } catch (err) {
        console.warn("Failed to load archetypes:", err);
        archetypes = [];
      }
    }
    if (world && (!events || events.length === 0)) {
      try {
        events = await this.plugin.apiClient.getEvents(world.id);
        this.events = events;
      } catch (err) {
        console.warn("Failed to load events:", err);
        events = [];
      }
    }
    this.characterDetailsView = new CharacterDetailsView(
      this.plugin,
      character,
      this.headerEl,
      this.contentEl,
      () => {
        this.characterDetailsView = null;
        if (this.currentWorld) {
          this.viewMode = "world-details";
          this.renderWorldDetails();
        } else if (this.currentStory) {
          this.viewMode = "details";
          this.renderDetails();
        } else {
          this.viewMode = "list";
          this.renderListHeader();
          this.renderListContent();
        }
      },
      (character2) => {
        this.showEditCharacterModal(character2);
      },
      world,
      characters,
      archetypes,
      traits,
      events
    );
    await this.characterDetailsView.render();
  }
};

// src/views/StoryEngineExtractView.ts
<<<<<<< HEAD
var import_obsidian18 = require("obsidian");
var STORY_ENGINE_EXTRACT_VIEW_TYPE = "story-engine-extract-view";
var StoryEngineExtractView = class extends import_obsidian18.ItemView {
=======
var import_obsidian17 = require("obsidian");
var STORY_ENGINE_EXTRACT_VIEW_TYPE = "story-engine-extract-view";
var StoryEngineExtractView = class extends import_obsidian17.ItemView {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  constructor(leaf, plugin) {
    super(leaf);
    this.result = null;
    this.logs = [];
    this.status = "idle";
    this.activeTab = "progress";
    this.expandedLogs = /* @__PURE__ */ new Set();
    this.expandedRelationIndex = null;
    this.pendingRelationScrollIndex = null;
    this.pendingTabScroll = false;
    this.entitySearch = "";
    this.entityFilterType = "all";
    this.entitySort = "name";
    this.relationSearch = "";
    this.relationFilterType = "all";
    this.relationSort = "type";
    this.plugin = plugin;
    this.logs = plugin.extractLogs;
    this.status = plugin.extractStatus;
  }
  getViewType() {
    return STORY_ENGINE_EXTRACT_VIEW_TYPE;
  }
  getDisplayText() {
    return "Extract";
  }
  getIcon() {
    return "search";
  }
  async onOpen() {
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("story-engine-extract-container");
    this.contentRoot = container;
    this.setResult(this.plugin.extractResult);
    this.setLogs(this.plugin.extractLogs, this.plugin.extractStatus);
  }
  setResult(result) {
    this.result = result;
    this.render();
  }
  setLogs(logs, status) {
    this.logs = logs;
    this.status = status;
    this.render();
  }
  render() {
    if (!this.contentRoot)
      return;
    this.contentRoot.empty();
    const header = this.contentRoot.createDiv({
      cls: "story-engine-extract-header"
    });
    header.createEl("h2", { text: "Extract" });
    const headerActions = header.createDiv({
      cls: "story-engine-extract-header-actions"
    });
    const backButton = headerActions.createEl("button", {
      text: "Back to Stories",
      cls: "story-engine-extract-back"
    });
    backButton.onclick = () => {
      this.plugin.activateView();
    };
    if (this.status === "running") {
      const cancelButton = headerActions.createEl("button", {
        text: "Cancel",
        cls: "story-engine-extract-cancel"
      });
      cancelButton.onclick = () => {
        this.plugin.cancelExtractStream();
      };
    }
    if (!this.result) {
      this.renderLogs();
      this.contentRoot.createEl("p", {
        text: "No extraction results yet.",
        cls: "story-engine-extract-empty"
      });
      return;
    }
    const queryBlock = this.contentRoot.createDiv({
      cls: "story-engine-extract-query"
    });
    queryBlock.createEl("div", {
      text: "Text",
      cls: "story-engine-extract-label"
    });
    queryBlock.createEl("div", {
      text: this.result.text,
      cls: "story-engine-extract-query-text"
    });
    const headerMeta = this.contentRoot.createDiv({
      cls: "story-engine-extract-meta"
    });
    headerMeta.createEl("div", {
      text: `Status: ${this.status}`
    });
    if (this.result) {
      const foundCount = this.result.entities.filter((entity) => entity.found).length;
      headerMeta.createEl("div", {
        text: `Entities found: ${foundCount}/${this.result.entities.length}`
      });
      headerMeta.createEl("div", {
        text: `Relations found: ${this.result.relations.length}`
      });
      headerMeta.createEl("div", {
        text: `Text length: ${this.result.text.length}`
      });
    }
    const tabs = this.contentRoot.createDiv({
      cls: "story-engine-extract-tabs"
    });
    const hasEntities = this.result.entities.length > 0;
    const hasRelations = this.result.relations.length > 0;
    const includeRelations = this.result.include_relations !== false;
    const entitiesDisabled = !hasEntities && this.status === "idle";
    const relationsDisabled = !hasRelations && this.status === "idle" || !includeRelations;
    const progressTab = tabs.createEl("button", {
      text: "Progress",
      cls: `story-engine-extract-tab ${this.activeTab === "progress" ? "is-active" : ""}`
    });
    progressTab.onclick = () => {
      this.setActiveTab("progress");
    };
    const entitiesTab = tabs.createEl("button", {
      text: "Entities",
      cls: `story-engine-extract-tab ${this.activeTab === "entities" ? "is-active" : ""}`
    });
    if (entitiesDisabled) {
      entitiesTab.disabled = true;
      entitiesTab.addClass("is-disabled");
    }
    entitiesTab.onclick = () => {
      if (entitiesDisabled)
        return;
      this.setActiveTab("entities");
    };
    const relationsTab = tabs.createEl("button", {
      text: "Relations",
      cls: `story-engine-extract-tab ${this.activeTab === "relations" ? "is-active" : ""}`
    });
    if (relationsDisabled) {
      relationsTab.disabled = true;
      relationsTab.addClass("is-disabled");
    }
    relationsTab.onclick = () => {
      if (relationsDisabled)
        return;
      this.setActiveTab("relations");
    };
    const panels = this.contentRoot.createDiv({
      cls: "story-engine-extract-panels"
    });
    const entitiesPanel = panels.createDiv({
      cls: `story-engine-extract-panel ${this.activeTab === "entities" ? "is-active" : ""}`
    });
    const relationsPanel = panels.createDiv({
      cls: `story-engine-extract-panel ${this.activeTab === "relations" ? "is-active" : ""}`
    });
    const progressPanel = panels.createDiv({
      cls: `story-engine-extract-panel ${this.activeTab === "progress" ? "is-active" : ""}`
    });
    const actions = this.contentRoot.createDiv({
      cls: "story-engine-extract-actions"
    });
    const clearButton = actions.createEl("button", {
      text: "Clear Results",
      cls: "story-engine-extract-clear"
    });
    clearButton.onclick = () => {
      this.plugin.extractResult = null;
      this.setResult(null);
      this.plugin.updateExtractViews();
    };
    this.renderLogs(progressPanel);
    if (hasEntities) {
      this.renderEntityControls(entitiesPanel);
      const list = entitiesPanel.createDiv({
        cls: "story-engine-extract-list"
      });
      const filteredEntities = this.filterAndSortEntities(this.result.entities);
      filteredEntities.forEach((entity, index) => {
        this.renderEntity(list, entity, index);
      });
    } else {
      const emptyText = this.status === "running" ? "Extracting entities..." : "No entities returned from extraction.";
      entitiesPanel.createEl("p", {
        text: emptyText,
        cls: "story-engine-extract-empty"
      });
    }
    if (hasRelations) {
      this.renderRelationControls(relationsPanel);
      const list = relationsPanel.createDiv({
        cls: "story-engine-extract-list"
      });
      const filteredRelations = this.filterAndSortRelations(this.result.relations);
      filteredRelations.forEach((relation, index) => {
        this.renderRelation(list, relation, index);
      });
    } else {
      let emptyText = "No relations returned from extraction.";
      if (!includeRelations) {
        emptyText = "Relations not requested.";
      } else if (!hasEntities) {
        emptyText = "Waiting for entity extraction.";
      } else if (this.status === "running") {
        emptyText = "Extracting relations...";
      }
      relationsPanel.createEl("p", {
        text: emptyText,
        cls: "story-engine-extract-empty"
      });
    }
    this.applyPendingScroll();
  }
  renderLogs(container) {
    const root2 = container != null ? container : this.contentRoot;
    const logBlock = root2.createDiv({
      cls: "story-engine-extract-logs"
    });
    logBlock.createEl("div", {
      text: "Progress",
      cls: "story-engine-extract-label"
    });
    if (!this.logs.length) {
      logBlock.createEl("p", {
        text: "No events yet.",
        cls: "story-engine-extract-empty"
      });
      return;
    }
    const list = logBlock.createDiv({ cls: "story-engine-extract-log-list" });
    const lastIndex = this.logs.length - 1;
    this.logs.forEach((entry, index) => {
      const eventLabel = entry.phase ? `${entry.phase} \xB7 ${entry.eventType}` : entry.eventType;
      const item = list.createDiv({
        cls: `story-engine-extract-log-item ${index === lastIndex ? "is-latest" : ""}`
      });
      const header = item.createDiv({
        cls: "story-engine-extract-log-header"
      });
      header.createSpan({
        text: `${entry.timestamp} | ${eventLabel}`,
        cls: "story-engine-extract-log-title"
      });
      const label = item.createDiv({
        cls: "story-engine-extract-log-label"
      });
      label.createSpan({ text: entry.message });
      const toggle = label.createSpan({
        text: index === lastIndex ? "..." : this.expandedLogs.has(entry.id) ? "\u2212" : "+",
        cls: "story-engine-extract-log-toggle"
      });
      label.onclick = () => {
        if (this.expandedLogs.has(entry.id)) {
          this.expandedLogs.delete(entry.id);
        } else {
          this.expandedLogs.add(entry.id);
        }
        this.render();
      };
      if (index === lastIndex) {
        toggle.addClass("is-typing");
      }
      if (this.expandedLogs.has(entry.id) && entry.data) {
        item.createEl("pre", {
          text: JSON.stringify(entry.data, null, 2),
          cls: "story-engine-extract-log-data"
        });
      }
    });
    list.scrollTop = list.scrollHeight;
  }
  renderEntity(container, entity, index) {
    this.renderEntityCard(container, entity, index);
  }
  renderEntityCard(container, entity, index, onCreated) {
    const item = container.createDiv({ cls: "story-engine-extract-item" });
    item.dataset.relationIndex = String(index);
    const header = item.createDiv({ cls: "story-engine-extract-item-header" });
    header.createEl("div", {
      text: `#${index + 1}`,
      cls: "story-engine-extract-rank"
    });
    const statusText = entity.created ? "Created" : entity.found ? "Found" : "New";
    const statusClass = entity.created ? "is-created" : entity.found ? "is-found" : "is-new";
    header.createEl("div", {
      text: statusText,
      cls: `story-engine-extract-status ${statusClass}`
    });
    const title = item.createDiv({ cls: "story-engine-extract-item-title" });
    title.createEl("div", {
      text: entity.name,
      cls: "story-engine-extract-entity-name"
    });
    title.createEl("div", {
      text: entity.type,
      cls: "story-engine-extract-entity-type"
    });
    if (entity.summary) {
      item.createEl("div", {
        text: entity.summary,
        cls: "story-engine-extract-content"
      });
    }
    if (entity.match) {
      item.appendChild(this.renderMatch("Match", entity.match));
    }
    if (entity.candidates && entity.candidates.length) {
      const list = item.createDiv({ cls: "story-engine-extract-candidates" });
      list.createEl("div", {
        text: "Candidates",
        cls: "story-engine-extract-label"
      });
      entity.candidates.forEach((candidate) => {
        list.appendChild(this.renderMatch("", candidate));
      });
    }
    if (!entity.created) {
      const actions = item.createDiv({ cls: "story-engine-extract-actions" });
      const actionButton = actions.createEl("button", {
        text: entity.found ? "Update Entity" : "Create Entity",
        cls: "story-engine-extract-action"
      });
      actionButton.onclick = async () => {
        actionButton.disabled = true;
        try {
          if (entity.found) {
            await this.updateEntity(entity);
          } else {
            const createdId = await this.createEntity(entity);
            if (createdId && onCreated) {
              onCreated(createdId);
            }
          }
        } finally {
          actionButton.disabled = false;
        }
      };
    }
  }
  renderMatch(label, match) {
    const wrapper = document.createElement("div");
    wrapper.className = "story-engine-extract-match";
    const parts = [];
    if (label) {
      parts.push(label);
    }
    parts.push(`${match.source_type}:${match.source_id}`);
    if (match.entity_name) {
      parts.push(match.entity_name);
    }
    parts.push(`sim ${match.similarity.toFixed(3)}`);
    if (match.reason) {
      parts.push(match.reason);
    }
    wrapper.textContent = parts.join(" \xB7 ");
    return wrapper;
  }
  async createEntity(entity) {
    var _a, _b;
    if (!((_a = this.result) == null ? void 0 : _a.world_id)) {
<<<<<<< HEAD
      new import_obsidian18.Notice("World ID missing. Select a story or world first.", 4e3);
      return "";
=======
      new import_obsidian17.Notice("World ID missing. Select a story or world first.", 4e3);
      return;
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
    const description = ((_b = entity.summary) == null ? void 0 : _b.trim()) || entity.name;
    let createdId = "";
    switch (entity.type) {
      case "character": {
        const created = await this.plugin.apiClient.createCharacter(
          this.result.world_id,
          { name: entity.name, description }
        );
        createdId = created.id;
        break;
      }
      case "location": {
        const created = await this.plugin.apiClient.createLocation(
          this.result.world_id,
          { name: entity.name, description }
        );
        createdId = created.id;
        break;
      }
      case "artefact": {
        const created = await this.plugin.apiClient.createArtifact(
          this.result.world_id,
          { name: entity.name, description }
        );
        createdId = created.id;
        break;
      }
      case "faction": {
        const created = await this.plugin.apiClient.createFaction(
          this.result.world_id,
          { name: entity.name, description }
        );
        createdId = created.id;
        break;
      }
      case "event": {
        const created = await this.plugin.apiClient.createEvent(
          this.result.world_id,
          { name: entity.name, description }
        );
        createdId = created.id;
        break;
      }
      default:
<<<<<<< HEAD
        new import_obsidian18.Notice(`Unsupported type: ${entity.type}`, 4e3);
        return "";
=======
        new import_obsidian17.Notice(`Unsupported type: ${entity.type}`, 4e3);
        return;
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
    entity.found = false;
    entity.created = true;
    entity.match = {
      source_type: entity.type,
      source_id: createdId,
      entity_name: entity.name,
      similarity: 1,
      reason: "Created from extract"
    };
    this.render();
<<<<<<< HEAD
    new import_obsidian18.Notice(`Created ${entity.type}: ${entity.name}`, 3e3);
    return createdId;
=======
    new import_obsidian17.Notice(`Created ${entity.type}: ${entity.name}`, 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  }
  async updateEntity(entity) {
    var _a, _b;
    if (!((_a = entity.match) == null ? void 0 : _a.source_id)) {
<<<<<<< HEAD
      new import_obsidian18.Notice("No match available to update.", 4e3);
=======
      new import_obsidian17.Notice("No match available to update.", 4e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      return;
    }
    const description = (_b = entity.summary) != null ? _b : "";
    switch (entity.type) {
      case "character":
        await this.plugin.apiClient.updateCharacter(entity.match.source_id, {
          name: entity.name,
          description
        });
        break;
      case "location":
        await this.plugin.apiClient.updateLocation(entity.match.source_id, {
          name: entity.name,
          description
        });
        break;
      case "artefact":
        await this.plugin.apiClient.updateArtifact(entity.match.source_id, {
          name: entity.name,
          description
        });
        break;
      case "faction":
        await this.plugin.apiClient.updateFaction(entity.match.source_id, {
          name: entity.name,
          description
        });
        break;
      case "event":
        await this.plugin.apiClient.updateEvent(entity.match.source_id, {
          name: entity.name,
          description
        });
        break;
      default:
<<<<<<< HEAD
        new import_obsidian18.Notice(`Unsupported type: ${entity.type}`, 4e3);
        return;
    }
    new import_obsidian18.Notice(`Updated ${entity.type}: ${entity.name}`, 3e3);
  }
  renderRelation(container, relation, index) {
    const item = container.createDiv({ cls: "story-engine-extract-item" });
    const header = item.createDiv({ cls: "story-engine-extract-item-header" });
    header.createEl("div", {
      text: `#${index + 1}`,
      cls: "story-engine-extract-rank"
    });
    const statusText = relation.status === "pending_entities" ? "Pending" : relation.status;
    const statusClass = relation.status === "pending_entities" ? "is-new" : "is-found";
    const relationType = relation.relation_type || "relation";
    const typeLabel = `${relationType} | ${relation.source.type} -> ${relation.target.type}`;
    const typeLine = header.createEl("div", {
      text: typeLabel,
      cls: "story-engine-extract-entity-type"
    });
    typeLine.addClass("story-engine-extract-relation-types");
    header.createEl("div", {
      text: statusText,
      cls: `story-engine-extract-status ${statusClass}`
    });
    const title = item.createDiv({ cls: "story-engine-extract-item-title" });
    const sourceLabel = relation.source.name || relation.source.ref;
    const targetLabel = relation.target.name || relation.target.ref;
    title.createEl("div", {
      text: `${sourceLabel} \u2192 ${targetLabel}`,
      cls: "story-engine-extract-entity-type"
    });
    if (relation.summary) {
      item.createEl("div", {
        text: relation.summary,
        cls: "story-engine-extract-content"
      });
    }
    const hasPending = this.hasTempNode(relation.source) || this.hasTempNode(relation.target);
    const relationCreated = relation.status === "created";
    const actions = item.createDiv({ cls: "story-engine-extract-actions" });
    const createRelationButton = actions.createEl("button", {
      text: relationCreated ? "Relation Created" : "Create Relation",
      cls: "story-engine-extract-action"
    });
    if (relationCreated) {
      createRelationButton.disabled = true;
      createRelationButton.addClass("is-disabled");
      createRelationButton.title = "Relation already created.";
    } else if (hasPending) {
      createRelationButton.disabled = true;
      createRelationButton.addClass("is-disabled");
      createRelationButton.title = "Create pending entities first.";
    } else {
      createRelationButton.onclick = async () => {
        createRelationButton.disabled = true;
        try {
          await this.createRelation(relation);
        } finally {
          createRelationButton.disabled = false;
        }
      };
    }
    if (hasPending) {
      const createButton = actions.createEl("button", {
        text: "Create Pending",
        cls: "story-engine-extract-action"
      });
      createButton.onclick = async () => {
        createButton.disabled = true;
        try {
          await this.createPendingEntities(relation);
        } finally {
          createButton.disabled = false;
        }
      };
    }
    const accordionButton = actions.createEl("button", {
      text: "See Entities",
      cls: "story-engine-extract-action"
    });
    accordionButton.onclick = () => {
      const shouldExpand = this.expandedRelationIndex !== index;
      this.expandedRelationIndex = shouldExpand ? index : null;
      this.pendingRelationScrollIndex = shouldExpand ? index : null;
      this.render();
    };
    if (this.expandedRelationIndex === index) {
      const entitiesWrap = item.createDiv({
        cls: "story-engine-extract-relations-entities"
      });
      entitiesWrap.dataset.relationIndex = String(index);
      const entities = [
        this.resolveRelationEntity(relation.source),
        this.resolveRelationEntity(relation.target)
      ];
      entities.forEach((entity, entityIndex) => {
        this.renderEntityCard(entitiesWrap, entity, entityIndex, (createdId) => {
          this.applyCreatedIdToRelation(relation, entity, createdId);
        });
      });
    }
  }
  renderEntityControls(container) {
    if (!this.result)
      return;
    const controls = container.createDiv({ cls: "story-engine-extract-controls" });
    const search = controls.createEl("input", {
      type: "search",
      placeholder: "Search entities",
      cls: "story-engine-extract-search"
    });
    search.value = this.entitySearch;
    search.oninput = () => {
      this.entitySearch = search.value.trim();
      this.render();
    };
    const typeSelect = controls.createEl("select", {
      cls: "story-engine-extract-select"
    });
    typeSelect.createEl("option", { value: "all", text: "All types" });
    this.getEntityTypes(this.result.entities).forEach((type2) => {
      typeSelect.createEl("option", { value: type2, text: type2 });
    });
    typeSelect.value = this.entityFilterType;
    typeSelect.onchange = () => {
      this.entityFilterType = typeSelect.value;
      this.render();
    };
    const sortSelect = controls.createEl("select", {
      cls: "story-engine-extract-select"
    });
    sortSelect.createEl("option", { value: "name", text: "Sort: Name" });
    sortSelect.createEl("option", { value: "type", text: "Sort: Type" });
    sortSelect.createEl("option", { value: "status", text: "Sort: Status" });
    sortSelect.value = this.entitySort;
    sortSelect.onchange = () => {
      this.entitySort = sortSelect.value;
      this.render();
    };
  }
  renderRelationControls(container) {
    if (!this.result)
      return;
    const controls = container.createDiv({ cls: "story-engine-extract-controls" });
    const search = controls.createEl("input", {
      type: "search",
      placeholder: "Search relations",
      cls: "story-engine-extract-search"
    });
    search.value = this.relationSearch;
    search.oninput = () => {
      this.relationSearch = search.value.trim();
      this.render();
    };
    const typeSelect = controls.createEl("select", {
      cls: "story-engine-extract-select"
    });
    typeSelect.createEl("option", { value: "all", text: "All types" });
    this.getRelationTypes(this.result.relations).forEach((type2) => {
      typeSelect.createEl("option", { value: type2, text: type2 });
    });
    typeSelect.value = this.relationFilterType;
    typeSelect.onchange = () => {
      this.relationFilterType = typeSelect.value;
      this.render();
    };
    const sortSelect = controls.createEl("select", {
      cls: "story-engine-extract-select"
    });
    sortSelect.createEl("option", { value: "type", text: "Sort: Type" });
    sortSelect.createEl("option", { value: "status", text: "Sort: Status" });
    sortSelect.createEl("option", { value: "source", text: "Sort: Source" });
    sortSelect.createEl("option", { value: "target", text: "Sort: Target" });
    sortSelect.value = this.relationSort;
    sortSelect.onchange = () => {
      this.relationSort = sortSelect.value;
      this.render();
    };
  }
  getEntityTypes(entities) {
    const set3 = /* @__PURE__ */ new Set();
    entities.forEach((entity) => {
      if (entity.type) {
        set3.add(entity.type);
      }
    });
    return Array.from(set3).sort((a, b) => a.localeCompare(b));
  }
  getRelationTypes(relations) {
    const set3 = /* @__PURE__ */ new Set();
    relations.forEach((relation) => {
      if (relation.relation_type) {
        set3.add(relation.relation_type);
      }
    });
    return Array.from(set3).sort((a, b) => a.localeCompare(b));
  }
  filterAndSortEntities(entities) {
    const search = this.entitySearch.toLowerCase();
    let filtered = entities.filter((entity) => {
      var _a;
      if (this.entityFilterType !== "all" && entity.type !== this.entityFilterType) {
        return false;
      }
      if (!search)
        return true;
      return entity.name.toLowerCase().includes(search) || entity.type.toLowerCase().includes(search) || ((_a = entity.summary) != null ? _a : "").toLowerCase().includes(search);
    });
    const statusRank = (entity) => {
      if (entity.created)
        return 0;
      if (entity.found)
        return 1;
      return 2;
    };
    filtered = [...filtered].sort((a, b) => {
      switch (this.entitySort) {
        case "type":
          return a.type.localeCompare(b.type) || a.name.localeCompare(b.name);
        case "status":
          return statusRank(a) - statusRank(b) || a.name.localeCompare(b.name);
        default:
          return a.name.localeCompare(b.name);
      }
    });
    return filtered;
  }
  filterAndSortRelations(relations) {
    const search = this.relationSearch.toLowerCase();
    let filtered = relations.filter((relation) => {
      var _a, _b, _c, _d, _e;
      if (this.relationFilterType !== "all" && relation.relation_type !== this.relationFilterType) {
        return false;
      }
      if (!search)
        return true;
      const sourceLabel = ((_b = (_a = relation.source.name) != null ? _a : relation.source.ref) != null ? _b : "").toLowerCase();
      const targetLabel = ((_d = (_c = relation.target.name) != null ? _c : relation.target.ref) != null ? _d : "").toLowerCase();
      return relation.relation_type.toLowerCase().includes(search) || sourceLabel.includes(search) || targetLabel.includes(search) || relation.source.type.toLowerCase().includes(search) || relation.target.type.toLowerCase().includes(search) || ((_e = relation.summary) != null ? _e : "").toLowerCase().includes(search);
    });
    const statusRank = (relation) => {
      if (relation.status === "created")
        return 0;
      if (relation.status === "ready")
        return 1;
      if (relation.status === "pending_entities")
        return 2;
      return 3;
    };
    filtered = [...filtered].sort((a, b) => {
      switch (this.relationSort) {
        case "status":
          return statusRank(a) - statusRank(b) || a.relation_type.localeCompare(b.relation_type);
        case "source": {
          const aSource = a.source.name || a.source.ref;
          const bSource = b.source.name || b.source.ref;
          return aSource.localeCompare(bSource) || a.relation_type.localeCompare(b.relation_type);
        }
        case "target": {
          const aTarget = a.target.name || a.target.ref;
          const bTarget = b.target.name || b.target.ref;
          return aTarget.localeCompare(bTarget) || a.relation_type.localeCompare(b.relation_type);
        }
        default:
          return a.relation_type.localeCompare(b.relation_type);
      }
    });
    return filtered;
  }
  resolveRelationEntity(node) {
    if (!this.result) {
      return this.buildRelationEntity(node);
    }
    const existing = this.result.entities.find((entity) => {
      var _a;
      if (node.id && ((_a = entity.match) == null ? void 0 : _a.source_id) === node.id) {
        return true;
      }
      return entity.type === node.type && entity.name === node.name;
    });
    return existing != null ? existing : this.buildRelationEntity(node);
  }
  buildRelationEntity(node) {
    const hasId = !!(node.id && node.id.trim());
    return {
      type: node.type,
      name: node.name || node.ref,
      found: hasId,
      match: hasId ? {
        source_type: node.type,
        source_id: node.id,
        entity_name: node.name,
        similarity: 1,
        reason: "Relation match"
      } : void 0
    };
  }
  hasTempNode(node) {
    if (!node.id || !node.id.trim()) {
      return true;
    }
    if (node.id.startsWith("temp")) {
      return true;
    }
    return node.ref.startsWith("finding:");
  }
  async createPendingEntities(relation) {
    const nodes = [relation.source, relation.target];
    for (const node of nodes) {
      if (!this.hasTempNode(node)) {
        continue;
      }
      const entity = this.buildRelationEntity(node);
      const createdId = await this.createEntity(entity);
      if (createdId) {
        this.applyCreatedIdToRelation(relation, entity, createdId);
      }
    }
    this.render();
  }
  async createRelation(relation) {
    var _a, _b;
    if (!((_a = this.result) == null ? void 0 : _a.world_id)) {
      new import_obsidian18.Notice("World ID missing. Select a story or world first.", 4e3);
      return;
    }
    if (!relation.source.id || !relation.target.id) {
      new import_obsidian18.Notice("Create the related entities before creating the relation.", 4e3);
      return;
    }
    const created = await this.plugin.apiClient.createEntityRelation({
      world_id: this.result.world_id,
      source_type: relation.source.type,
      source_id: relation.source.id,
      target_type: relation.target.type,
      target_id: relation.target.id,
      relation_type: relation.relation_type,
      summary: relation.summary,
      create_mirror: (_b = relation.create_mirror) != null ? _b : false
    });
    relation.status = "created";
    relation.created_id = created.id;
    this.render();
    new import_obsidian18.Notice(`Relation created: ${relation.relation_type}`, 3e3);
  }
  applyCreatedIdToRelation(relation, entity, createdId) {
    const updateNode = (node) => {
      if (node.type !== entity.type)
        return false;
      if (entity.name && node.name && node.name !== entity.name)
        return false;
      node.id = createdId;
      node.name = entity.name;
      return true;
    };
    if (!updateNode(relation.source)) {
      updateNode(relation.target);
    }
    if (!this.hasTempNode(relation.source) && !this.hasTempNode(relation.target)) {
      relation.status = "ready";
    }
  }
  setActiveTab(tab) {
    this.activeTab = tab;
    this.pendingTabScroll = true;
    this.render();
  }
  applyPendingScroll() {
    if (!this.pendingTabScroll && this.pendingRelationScrollIndex === null) {
      return;
    }
    requestAnimationFrame(() => {
      if (this.pendingTabScroll) {
        const panel = this.contentRoot.querySelector(
          ".story-engine-extract-panel.is-active"
        );
        if (panel) {
          panel.scrollTop = 0;
          panel.scrollIntoView({ block: "start" });
        }
        this.pendingTabScroll = false;
      }
      if (this.pendingRelationScrollIndex !== null) {
        const selector = `.story-engine-extract-relations-entities[data-relation-index="${this.pendingRelationScrollIndex}"]`;
        const entityBlock = this.contentRoot.querySelector(selector);
        if (entityBlock) {
          entityBlock.scrollIntoView({ block: "start" });
        }
        this.pendingRelationScrollIndex = null;
      }
    });
=======
        new import_obsidian17.Notice(`Unsupported type: ${entity.type}`, 4e3);
        return;
    }
    new import_obsidian17.Notice(`Updated ${entity.type}: ${entity.name}`, 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  apiUrl: "http://localhost:8080",
  llmGatewayUrl: "http://localhost:8081",
  apiKey: "",
  tenantId: "",
  tenantName: "",
  syncFolderPath: "Stories",
  autoVersionSnapshots: true,
  conflictResolution: "service",
  mode: "local",
  showHelpBox: true,
  localModeVideoUrl: "https://example.com/setup-video",
  autoSyncOnApiUpdates: true,
<<<<<<< HEAD
  autoPushOnFileBlur: true
};
var StoryEnginePlugin = class extends import_obsidian19.Plugin {
=======
  autoPushOnFileBlur: true,
  sidebarPosition: "left"
};
var StoryEnginePlugin = class extends import_obsidian18.Plugin {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  constructor() {
    super(...arguments);
    this.extractResult = null;
    this.extractLogs = [];
    this.extractStatus = "idle";
    this.extractAbortController = null;
  }
  async onload() {
    var _a;
    await this.loadSettings();
    this.apiClient = new StoryEngineClient(
      this.settings.apiUrl,
      this.settings.apiKey,
      this.settings.tenantId || ""
    );
    this.apiClient.setMode(this.settings.mode || "local");
    this.apiClient.setAutoSyncOnApiUpdates(
      (_a = this.settings.autoSyncOnApiUpdates) != null ? _a : true
    );
    this.fileManager = new FileManager(
      this.app.vault,
      this.settings.syncFolderPath || "Stories"
    );
    this.syncService = new SyncService(
      this.apiClient,
      this.fileManager,
      this.settings,
      this.app
    );
    this.initializeAutoSyncManager();
    this.addSettingTab(new StoryEngineSettingTab(this.app, this));
    this.registerView(
      STORY_LIST_VIEW_TYPE,
      (leaf) => new StoryListView(leaf, this)
    );
    this.registerView(
      STORY_ENGINE_EXTRACT_VIEW_TYPE,
      (leaf) => new StoryEngineExtractView(leaf, this)
    );
    this.addRibbonIcon("book-open", "Story Engine", () => {
      this.activateView();
    });
    registerCommands(this);
    this.registerEvent(
      this.app.workspace.on("editor-menu", (menu, editor) => {
        const selection2 = editor.getSelection().trim();
        if (!selection2) {
          return;
        }
        menu.addItem((item) => {
          item.setTitle("Story Engine: Extract Entities and Relations");
          item.setIcon("search");
          item.onClick(() => {
            this.extractSelectionCommand(selection2, true);
          });
        });
        menu.addItem((item) => {
          item.setTitle("Story Engine: Extract Entities Only");
          item.setIcon("search");
          item.onClick(() => {
            this.extractSelectionCommand(selection2, false);
          });
        });
      })
    );
  }
  async onunload() {
    this.app.workspace.detachLeavesOfType(STORY_LIST_VIEW_TYPE);
    this.app.workspace.detachLeavesOfType(STORY_ENGINE_EXTRACT_VIEW_TYPE);
    if (this.syncService) {
      this.syncService.dispose();
    }
    if (this.autoSyncManager) {
      this.autoSyncManager.dispose();
      this.autoSyncManager = void 0;
    }
  }
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  async saveSettings() {
    var _a, _b;
    await this.saveData(this.settings);
    if (this.apiClient) {
      this.apiClient.setTenantId(this.settings.tenantId || "");
      this.apiClient.setMode(this.settings.mode || "local");
      this.apiClient.setAutoSyncOnApiUpdates(
        (_a = this.settings.autoSyncOnApiUpdates) != null ? _a : true
      );
    } else {
      this.apiClient = new StoryEngineClient(
        this.settings.apiUrl,
        this.settings.apiKey,
        this.settings.tenantId || ""
      );
      this.apiClient.setMode(this.settings.mode || "local");
      this.apiClient.setAutoSyncOnApiUpdates(
        (_b = this.settings.autoSyncOnApiUpdates) != null ? _b : true
      );
    }
    this.fileManager = new FileManager(
      this.app.vault,
      this.settings.syncFolderPath || "Stories"
    );
    if (this.syncService) {
      this.syncService.dispose();
    }
    this.syncService = new SyncService(
      this.apiClient,
      this.fileManager,
      this.settings,
      this.app
    );
    this.initializeAutoSyncManager();
  }
  initializeAutoSyncManager() {
    if (this.autoSyncManager) {
      this.autoSyncManager.dispose();
      this.autoSyncManager = void 0;
    }
    if (this.settings.autoPushOnFileBlur) {
      this.autoSyncManager = new AutoSyncManager(this);
    }
  }
  async createStoryCommand() {
    var _a;
    if (this.settings.mode === "remote") {
      const tenantId = (_a = this.settings.tenantId) == null ? void 0 : _a.trim();
      if (!tenantId) {
<<<<<<< HEAD
        new import_obsidian19.Notice("Please configure Tenant ID in settings", 5e3);
=======
        new import_obsidian18.Notice("Please configure Tenant ID in settings", 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;
      if (!uuidRegex.test(tenantId)) {
<<<<<<< HEAD
        new import_obsidian19.Notice("Invalid Tenant ID format. Please check your settings.", 5e3);
=======
        new import_obsidian18.Notice("Invalid Tenant ID format. Please check your settings.", 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
    }
    new CreateStoryModal(this.app, this, async (title, worldId, shouldSync) => {
      try {
<<<<<<< HEAD
        new import_obsidian19.Notice(`Creating story "${title}"...`);
        const story = await this.apiClient.createStory(title, worldId);
        new import_obsidian19.Notice(`Story "${title}" created successfully`);
        if (shouldSync) {
          try {
            new import_obsidian19.Notice(`Syncing story to Obsidian...`);
            await this.syncService.pullStory(story.id);
            new import_obsidian19.Notice(`Story synced to your vault!`);
          } catch (syncErr) {
            const syncErrorMessage = syncErr instanceof Error ? syncErr.message : "Failed to sync story";
            new import_obsidian19.Notice(`Story created but sync failed: ${syncErrorMessage}`, 5e3);
=======
        new import_obsidian18.Notice(`Creating story "${title}"...`);
        const story = await this.apiClient.createStory(title, worldId);
        new import_obsidian18.Notice(`Story "${title}" created successfully`);
        if (shouldSync) {
          try {
            new import_obsidian18.Notice(`Syncing story to Obsidian...`);
            await this.syncService.pullStory(story.id);
            new import_obsidian18.Notice(`Story synced to your vault!`);
          } catch (syncErr) {
            const syncErrorMessage = syncErr instanceof Error ? syncErr.message : "Failed to sync story";
            new import_obsidian18.Notice(`Story created but sync failed: ${syncErrorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          }
        }
        const openView = this.app.workspace.getLeavesOfType(STORY_LIST_VIEW_TYPE)[0];
        if (openView) {
          const view = openView.view;
          await view.refresh();
          if (!shouldSync) {
            await view.showStoryDetails(story);
          }
        }
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to create story";
<<<<<<< HEAD
        new import_obsidian19.Notice(`Error: ${errorMessage}`, 5e3);
=======
        new import_obsidian18.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    }).open();
  }
  async activateView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType(STORY_LIST_VIEW_TYPE)[0];
    if (!leaf) {
      const rightLeaf = workspace.getRightLeaf(false);
      if (!rightLeaf) {
<<<<<<< HEAD
        new import_obsidian19.Notice("Could not create view. Please try again.", 3e3);
=======
        new import_obsidian18.Notice("Could not create view. Please try again.", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      leaf = rightLeaf;
      await leaf.setViewState({
        type: STORY_LIST_VIEW_TYPE,
        active: true
      });
    }
    workspace.revealLeaf(leaf);
  }
  async activateExtractView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType(STORY_ENGINE_EXTRACT_VIEW_TYPE)[0];
    if (!leaf) {
      leaf = workspace.getLeavesOfType(STORY_LIST_VIEW_TYPE)[0];
    }
    if (!leaf) {
<<<<<<< HEAD
      new import_obsidian19.Notice("Could not open extract view. Please try again.", 3e3);
=======
      new import_obsidian18.Notice("Could not open extract view. Please try again.", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      return;
    }
    await leaf.setViewState({
      type: STORY_ENGINE_EXTRACT_VIEW_TYPE,
      active: true
    });
    workspace.revealLeaf(leaf);
  }
  async getActiveWorldId() {
    var _a;
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      return null;
    }
    const fileContent = await this.app.vault.read(activeFile);
    const frontmatter = this.fileManager.parseFrontmatter(fileContent);
    const storyId = frontmatter.story_id || (activeFile.name === "story.md" ? frontmatter.id : "");
    if (!storyId) {
      return null;
    }
    const story = await this.apiClient.getStory(storyId);
    return (_a = story.world_id) != null ? _a : null;
  }
  async extractSelectionCommand(selection2, includeRelations = true) {
    var _a, _b, _c;
    const trimmedSelection = selection2.trim();
    if (!trimmedSelection) {
<<<<<<< HEAD
      new import_obsidian19.Notice(
        includeRelations ? "Select text to extract entities and relations" : "Select text to extract entities",
        3e3
      );
      return;
    }
    const defaultTypes = ["character", "location", "artefact", "faction", "event"];
    const config = await ExtractConfigModal.open(
      this.app,
      defaultTypes,
      includeRelations
    );
    if (!config) {
      return;
    }
    if (this.settings.mode !== "remote") {
      new import_obsidian19.Notice("Extraction requires the full remote version.", 5e3);
=======
      new import_obsidian18.Notice("Select text to extract entities", 3e3);
      return;
    }
    if (this.settings.mode !== "remote") {
      new import_obsidian18.Notice("Extraction requires the full remote version.", 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      return;
    }
    const tenantId = (_a = this.settings.tenantId) == null ? void 0 : _a.trim();
    if (!tenantId) {
<<<<<<< HEAD
      new import_obsidian19.Notice("Please configure Tenant ID in settings", 5e3);
=======
      new import_obsidian18.Notice("Please configure Tenant ID in settings", 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      return;
    }
    const gatewayUrl = (_b = this.settings.llmGatewayUrl) == null ? void 0 : _b.trim();
    if (!gatewayUrl) {
<<<<<<< HEAD
      new import_obsidian19.Notice("Please configure LLM Gateway URL in settings", 5e3);
=======
      new import_obsidian18.Notice("Please configure LLM Gateway URL in settings", 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      return;
    }
    let worldId = null;
    try {
      worldId = await this.getActiveWorldId();
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to resolve story";
<<<<<<< HEAD
      new import_obsidian19.Notice(`Error: ${errorMessage}`, 5e3);
      return;
    }
    if (!worldId) {
      new import_obsidian19.Notice(
=======
      new import_obsidian18.Notice(`Error: ${errorMessage}`, 5e3);
      return;
    }
    if (!worldId) {
      new import_obsidian18.Notice(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        "Open a synced story document before extracting entities.",
        5e3
      );
      return;
    }
    this.resetExtractState(trimmedSelection, worldId, config.includeRelations);
    await this.activateView();
    await this.activateExtractView();
    this.updateExtractViews();
    try {
      if ((_c = navigator == null ? void 0 : navigator.clipboard) == null ? void 0 : _c.writeText) {
        await navigator.clipboard.writeText(trimmedSelection);
      }
    } catch (e) {
    }
<<<<<<< HEAD
    new import_obsidian19.Notice("Starting extraction stream...", 3e3);
=======
    new import_obsidian18.Notice("Starting extraction stream...", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    await this.startExtractStream({
      tenantId,
      gatewayUrl,
      worldId,
      text: trimmedSelection,
      includeRelations: config.includeRelations,
      entityTypes: config.entityTypes
    });
  }
  updateExtractViews() {
    const listLeaf = this.app.workspace.getLeavesOfType(STORY_LIST_VIEW_TYPE)[0];
    if (listLeaf) {
      const view = listLeaf.view;
      if (view.viewMode === "list") {
        view.renderListContent();
      }
    }
    const extractLeaf = this.app.workspace.getLeavesOfType(STORY_ENGINE_EXTRACT_VIEW_TYPE)[0];
    if (extractLeaf) {
      const view = extractLeaf.view;
      view.setResult(this.extractResult);
      view.setLogs(this.extractLogs, this.extractStatus);
    }
  }
  resetExtractState(text, worldId, includeRelations = true) {
    this.cancelExtractStream();
    this.extractResult = {
      text,
      world_id: worldId,
      entities: [],
      relations: [],
      received_at: (/* @__PURE__ */ new Date()).toISOString(),
      include_relations: includeRelations
    };
    this.extractLogs = [];
    this.extractStatus = "running";
  }
  cancelExtractStream() {
    if (this.extractAbortController) {
      this.extractAbortController.abort();
      this.extractAbortController = null;
      this.extractStatus = "canceled";
      this.appendExtractLog({
        type: "client.cancel",
        message: "Extraction canceled by user."
      });
      this.updateExtractViews();
    }
  }
  appendExtractLog(event) {
    const timestamp = event.timestamp ? new Date(event.timestamp).toISOString() : (/* @__PURE__ */ new Date()).toISOString();
    this.extractLogs.push({
      id: `${timestamp}-${this.extractLogs.length}`,
      eventType: event.type,
      phase: event.phase,
      message: event.message,
      data: event.data,
      timestamp
    });
  }
  async startExtractStream(params) {
    const { tenantId, gatewayUrl, worldId, text, includeRelations, entityTypes } = params;
    const controller = new AbortController();
    this.extractAbortController = controller;
    this.appendExtractLog({
      type: "client.start",
      message: "Opening extraction stream."
    });
    this.updateExtractViews();
    try {
      const response = await fetch(
        `${gatewayUrl.replace(/\/$/, "")}/api/v1/entity-extract/stream`,
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "X-Tenant-ID": tenantId,
            ...this.settings.apiKey ? { Authorization: `Bearer ${this.settings.apiKey}` } : {}
          },
          body: JSON.stringify({
            text,
            world_id: worldId,
            include_relations: includeRelations,
            entity_types: entityTypes
          }),
          signal: controller.signal
        }
      );
      if (!response.ok) {
        let errorMessage = `HTTP ${response.status}: ${response.statusText}`;
        try {
          const errorBody = await response.json();
          if (errorBody == null ? void 0 : errorBody.error) {
            errorMessage = errorBody.error;
          }
        } catch (e) {
        }
        throw new Error(errorMessage);
      }
      if (!response.body) {
        throw new Error("No response stream available.");
      }
      const reader = response.body.getReader();
      const decoder = new TextDecoder("utf-8");
      let buffer = "";
      let currentEvent = "message";
      let dataLines = [];
      const flushEvent = () => {
        var _a, _b, _c, _d, _e;
        if (!dataLines.length)
          return;
        const rawData = dataLines.join("\n").trim();
        dataLines = [];
        if (!rawData)
          return;
        let parsed = null;
        try {
          parsed = JSON.parse(rawData);
        } catch (e) {
          this.appendExtractLog({
            type: "parse.error",
            message: "Failed to parse stream event payload.",
            data: { raw: rawData, event: currentEvent }
          });
          this.updateExtractViews();
          return;
        }
        if (!parsed.type) {
          parsed.type = currentEvent || "message";
        }
        if (parsed.type === "relation.error") {
          parsed.message = `\u274C ${parsed.message}`;
        } else if (parsed.type === "relation.success") {
          parsed.message = `\u2705 ${parsed.message}`;
        }
        this.appendExtractLog(parsed);
        if (parsed.type === "result_entities" && ((_a = parsed.data) == null ? void 0 : _a.entities)) {
          const entities = parsed.data.entities;
          if (this.extractResult) {
            this.extractResult.entities = entities != null ? entities : [];
            this.extractResult.received_at = (/* @__PURE__ */ new Date()).toISOString();
          }
          const foundCount = (_b = this.extractResult) == null ? void 0 : _b.entities.filter(
            (entity) => entity.found
          ).length;
<<<<<<< HEAD
          new import_obsidian19.Notice(
            `Entities extracted: ${foundCount != null ? foundCount : 0}/${(_d = (_c = this.extractResult) == null ? void 0 : _c.entities.length) != null ? _d : 0} matched`,
=======
          new import_obsidian18.Notice(
            `Extraction complete: ${foundCount != null ? foundCount : 0}/${(_e = (_d = this.extractResult) == null ? void 0 : _d.entities.length) != null ? _e : 0} matched`,
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
            4e3
          );
        }
        if (parsed.type === "result_relations" && ((_e = parsed.data) == null ? void 0 : _e.relations)) {
          const relations = parsed.data.relations;
          if (this.extractResult) {
            this.extractResult.relations = relations != null ? relations : [];
            this.extractResult.received_at = (/* @__PURE__ */ new Date()).toISOString();
          }
        }
        if (parsed.type === "error") {
          this.extractStatus = "error";
        }
        this.updateExtractViews();
      };
      while (true) {
        const { value, done } = await reader.read();
        if (done)
          break;
        buffer += decoder.decode(value, { stream: true });
        let lineEnd = buffer.indexOf("\n");
        while (lineEnd !== -1) {
          const line = buffer.slice(0, lineEnd).replace(/\r$/, "");
          buffer = buffer.slice(lineEnd + 1);
          lineEnd = buffer.indexOf("\n");
          if (!line) {
            flushEvent();
            currentEvent = "message";
            continue;
          }
          if (line.startsWith("event:")) {
            currentEvent = line.replace("event:", "").trim();
            continue;
          }
          if (line.startsWith("data:")) {
            dataLines.push(line.replace("data:", "").trim());
          }
        }
      }
      this.extractAbortController = null;
      if (this.extractStatus === "running") {
        this.extractStatus = "done";
      }
    } catch (err) {
      if (err instanceof DOMException && err.name === "AbortError") {
        return;
      }
      const errorMessage = err instanceof Error ? err.message : "Failed to extract entities";
      this.extractStatus = "error";
      this.appendExtractLog({
        type: "error",
        message: errorMessage
      });
<<<<<<< HEAD
      new import_obsidian19.Notice(`Error: ${errorMessage}`, 5e3);
=======
      new import_obsidian18.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      this.updateExtractViews();
    }
  }
  openSettings() {
    const setting = this.app.setting;
    if (setting) {
      setting.open();
      setTimeout(() => {
        setting.openTabById(this.manifest.id);
      }, 100);
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3N5bmMvYXBpVXBkYXRlTm90aWZpZXIudHMiLCAic3JjL2FwaS9jbGllbnQudHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9jb21tYW5kcy50cyIsICJzcmMvdmlld3MvU3RvcnlTeW5jTW9kYWwudHMiLCAic3JjL3ZpZXdzL0NyZWF0ZVN0b3J5TW9kYWwudHMiLCAic3JjL3ZpZXdzL0NyZWF0ZVdvcmxkTW9kYWwudHMiLCAic3JjL3N5bmMvZmlsZU1hbmFnZXIudHMiLCAic3JjL3N5bmMvc3luY1NlcnZpY2UudHMiLCAic3JjL3N5bmMvY29udGVudEJsb2NrUGFyc2VyLnRzIiwgInNyYy92aWV3cy9tb2RhbHMvQ29uZmxpY3RNb2RhbC50cyIsICJzcmMvc3luYy9hdXRvU3luY01hbmFnZXIudHMiLCAic3JjL3ZpZXdzL1N0b3J5TGlzdFZpZXcudHMiLCAic3JjL3ZpZXdzL21vZGFscy9DaGFwdGVyTW9kYWwudHMiLCAic3JjL3ZpZXdzL21vZGFscy9TY2VuZU1vZGFsLnRzIiwgInNyYy92aWV3cy9tb2RhbHMvQmVhdE1vZGFsLnRzIiwgInNyYy92aWV3cy9tb2RhbHMvQ29udGVudEJsb2NrTW9kYWwudHMiLCAic3JjL2FwaS91bnNwbGFzaC50cyIsICJzcmMvdmlld3MvVGltZWxpbmVNb2RhbC50cyIsICJub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL2FzY2VuZGluZy5qcyIsICJub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL2Rlc2NlbmRpbmcuanMiLCAibm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9iaXNlY3Rvci5qcyIsICJub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL251bWJlci5qcyIsICJub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL2Jpc2VjdC5qcyIsICJub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL2V4dGVudC5qcyIsICJub2RlX21vZHVsZXMvaW50ZXJubWFwL3NyYy9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL3RpY2tzLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1heGlzL3NyYy9pZGVudGl0eS5qcyIsICJub2RlX21vZHVsZXMvZDMtYXhpcy9zcmMvYXhpcy5qcyIsICJub2RlX21vZHVsZXMvZDMtZGlzcGF0Y2gvc3JjL2Rpc3BhdGNoLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL25hbWVzcGFjZXMuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvbmFtZXNwYWNlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL2NyZWF0b3IuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0b3IuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NlbGVjdC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9hcnJheS5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3RvckFsbC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vc2VsZWN0QWxsLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL21hdGNoZXIuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NlbGVjdENoaWxkLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zZWxlY3RDaGlsZHJlbi5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZmlsdGVyLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zcGFyc2UuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2VudGVyLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL2NvbnN0YW50LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9kYXRhLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9leGl0LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9qb2luLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9tZXJnZS5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vb3JkZXIuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NvcnQuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2NhbGwuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL25vZGVzLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9ub2RlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zaXplLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9lbXB0eS5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZWFjaC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vYXR0ci5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy93aW5kb3cuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3N0eWxlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9wcm9wZXJ0eS5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vY2xhc3NlZC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vdGV4dC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vaHRtbC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vcmFpc2UuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2xvd2VyLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9hcHBlbmQuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2luc2VydC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vcmVtb3ZlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9jbG9uZS5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZGF0dW0uanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL29uLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9kaXNwYXRjaC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vaXRlcmF0b3IuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdC5qcyIsICJub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2RlZmluZS5qcyIsICJub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2NvbG9yLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvYmFzaXMuanMiLCAibm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9iYXNpc0Nsb3NlZC5qcyIsICJub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2NvbnN0YW50LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvY29sb3IuanMiLCAibm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9yZ2IuanMiLCAibm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9udW1iZXJBcnJheS5qcyIsICJub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2FycmF5LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvZGF0ZS5qcyIsICJub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL251bWJlci5qcyIsICJub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL29iamVjdC5qcyIsICJub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3N0cmluZy5qcyIsICJub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3ZhbHVlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvcm91bmQuanMiLCAibm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy90cmFuc2Zvcm0vZGVjb21wb3NlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvdHJhbnNmb3JtL3BhcnNlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvdHJhbnNmb3JtL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10aW1lci9zcmMvdGltZXIuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRpbWVyL3NyYy90aW1lb3V0LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3NjaGVkdWxlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy9pbnRlcnJ1cHQuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3NlbGVjdGlvbi9pbnRlcnJ1cHQuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vdHdlZW4uanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vaW50ZXJwb2xhdGUuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vYXR0ci5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9hdHRyVHdlZW4uanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vZGVsYXkuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vZHVyYXRpb24uanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vZWFzZS5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9lYXNlVmFyeWluZy5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9maWx0ZXIuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vbWVyZ2UuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vb24uanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vcmVtb3ZlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3NlbGVjdC5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9zZWxlY3RBbGwuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vc2VsZWN0aW9uLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3N0eWxlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3N0eWxlVHdlZW4uanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vdGV4dC5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi90ZXh0VHdlZW4uanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vdHJhbnNpdGlvbi5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9lbmQuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2QzLWVhc2Uvc3JjL2N1YmljLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy9zZWxlY3Rpb24vdHJhbnNpdGlvbi5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvc2VsZWN0aW9uL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1icnVzaC9zcmMvYnJ1c2guanMiLCAibm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvZm9ybWF0RGVjaW1hbC5qcyIsICJub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9leHBvbmVudC5qcyIsICJub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9mb3JtYXRHcm91cC5qcyIsICJub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9mb3JtYXROdW1lcmFscy5qcyIsICJub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9mb3JtYXRTcGVjaWZpZXIuanMiLCAibm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvZm9ybWF0VHJpbS5qcyIsICJub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9mb3JtYXRQcmVmaXhBdXRvLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1mb3JtYXQvc3JjL2Zvcm1hdFJvdW5kZWQuanMiLCAibm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvZm9ybWF0VHlwZXMuanMiLCAibm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvaWRlbnRpdHkuanMiLCAibm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvbG9jYWxlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1mb3JtYXQvc3JjL2RlZmF1bHRMb2NhbGUuanMiLCAibm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvcHJlY2lzaW9uRml4ZWQuanMiLCAibm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvcHJlY2lzaW9uUHJlZml4LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1mb3JtYXQvc3JjL3ByZWNpc2lvblJvdW5kLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zY2FsZS9zcmMvaW5pdC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2NhbGUvc3JjL29yZGluYWwuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNjYWxlL3NyYy9jb25zdGFudC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2NhbGUvc3JjL251bWJlci5qcyIsICJub2RlX21vZHVsZXMvZDMtc2NhbGUvc3JjL2NvbnRpbnVvdXMuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNjYWxlL3NyYy90aWNrRm9ybWF0LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zY2FsZS9zcmMvbGluZWFyLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2NvbG9ycy5qcyIsICJub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9jYXRlZ29yaWNhbC9jYXRlZ29yeTEwLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy16b29tL3NyYy90cmFuc2Zvcm0uanMiLCAic3JjL3ZpZXdzL0NoYXJhY3RlckRldGFpbHNWaWV3LnRzIiwgInNyYy92aWV3cy9TdG9yeUVuZ2luZUV4dHJhY3RWaWV3LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBOb3RpY2UsIFBsdWdpbiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHtcblx0RXh0cmFjdEVudGl0eVJlc3VsdCxcblx0RXh0cmFjdExvZ0VudHJ5LFxuXHRFeHRyYWN0U3RyZWFtRXZlbnQsXG5cdFN0b3J5RW5naW5lU2V0dGluZ3MsXG59IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBTdG9yeUVuZ2luZUNsaWVudCB9IGZyb20gXCIuL2FwaS9jbGllbnRcIjtcbmltcG9ydCB7IFN0b3J5RW5naW5lU2V0dGluZ1RhYiB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5pbXBvcnQgeyByZWdpc3RlckNvbW1hbmRzIH0gZnJvbSBcIi4vY29tbWFuZHNcIjtcbmltcG9ydCB7IFN0b3J5RGV0YWlsc01vZGFsIH0gZnJvbSBcIi4vdmlld3MvU3RvcnlEZXRhaWxzTW9kYWxcIjtcbmltcG9ydCB7IENyZWF0ZVN0b3J5TW9kYWwgfSBmcm9tIFwiLi92aWV3cy9DcmVhdGVTdG9yeU1vZGFsXCI7XG5pbXBvcnQgeyBGaWxlTWFuYWdlciB9IGZyb20gXCIuL3N5bmMvZmlsZU1hbmFnZXJcIjtcbmltcG9ydCB7IFN5bmNTZXJ2aWNlIH0gZnJvbSBcIi4vc3luYy9zeW5jU2VydmljZVwiO1xuaW1wb3J0IHsgQXV0b1N5bmNNYW5hZ2VyIH0gZnJvbSBcIi4vc3luYy9hdXRvU3luY01hbmFnZXJcIjtcbmltcG9ydCB7IFN0b3J5TGlzdFZpZXcsIFNUT1JZX0xJU1RfVklFV19UWVBFIH0gZnJvbSBcIi4vdmlld3MvU3RvcnlMaXN0Vmlld1wiO1xuaW1wb3J0IHtcblx0U3RvcnlFbmdpbmVFeHRyYWN0Vmlldyxcblx0U1RPUllfRU5HSU5FX0VYVFJBQ1RfVklFV19UWVBFLFxufSBmcm9tIFwiLi92aWV3cy9TdG9yeUVuZ2luZUV4dHJhY3RWaWV3XCI7XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFN0b3J5RW5naW5lU2V0dGluZ3MgPSB7XG5cdGFwaVVybDogXCJodHRwOi8vbG9jYWxob3N0OjgwODBcIixcblx0bGxtR2F0ZXdheVVybDogXCJodHRwOi8vbG9jYWxob3N0OjgwODFcIixcblx0YXBpS2V5OiBcIlwiLFxuXHR0ZW5hbnRJZDogXCJcIixcblx0dGVuYW50TmFtZTogXCJcIixcblx0c3luY0ZvbGRlclBhdGg6IFwiU3Rvcmllc1wiLFxuXHRhdXRvVmVyc2lvblNuYXBzaG90czogdHJ1ZSxcblx0Y29uZmxpY3RSZXNvbHV0aW9uOiBcInNlcnZpY2VcIixcblx0bW9kZTogXCJsb2NhbFwiLFxuXHRzaG93SGVscEJveDogdHJ1ZSxcblx0bG9jYWxNb2RlVmlkZW9Vcmw6IFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9zZXR1cC12aWRlb1wiLFxuXHRhdXRvU3luY09uQXBpVXBkYXRlczogdHJ1ZSxcblx0YXV0b1B1c2hPbkZpbGVCbHVyOiB0cnVlLFxuXHRzaWRlYmFyUG9zaXRpb246IFwibGVmdFwiLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RvcnlFbmdpbmVQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5ncyE6IFN0b3J5RW5naW5lU2V0dGluZ3M7XG5cdGFwaUNsaWVudCE6IFN0b3J5RW5naW5lQ2xpZW50O1xuXHRmaWxlTWFuYWdlciE6IEZpbGVNYW5hZ2VyO1xuXHRzeW5jU2VydmljZSE6IFN5bmNTZXJ2aWNlO1xuXHRwcml2YXRlIGF1dG9TeW5jTWFuYWdlcj86IEF1dG9TeW5jTWFuYWdlcjtcblx0ZXh0cmFjdFJlc3VsdDogRXh0cmFjdEVudGl0eVJlc3VsdCB8IG51bGwgPSBudWxsO1xuXHRleHRyYWN0TG9nczogRXh0cmFjdExvZ0VudHJ5W10gPSBbXTtcblx0ZXh0cmFjdFN0YXR1czogXCJpZGxlXCIgfCBcInJ1bm5pbmdcIiB8IFwiZG9uZVwiIHwgXCJlcnJvclwiIHwgXCJjYW5jZWxlZFwiID0gXCJpZGxlXCI7XG5cdHByaXZhdGUgZXh0cmFjdEFib3J0Q29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyIHwgbnVsbCA9IG51bGw7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHR0aGlzLmFwaUNsaWVudCA9IG5ldyBTdG9yeUVuZ2luZUNsaWVudChcblx0XHRcdHRoaXMuc2V0dGluZ3MuYXBpVXJsLFxuXHRcdFx0dGhpcy5zZXR0aW5ncy5hcGlLZXksXG5cdFx0XHR0aGlzLnNldHRpbmdzLnRlbmFudElkIHx8IFwiXCJcblx0XHQpO1xuXHRcdHRoaXMuYXBpQ2xpZW50LnNldE1vZGUodGhpcy5zZXR0aW5ncy5tb2RlIHx8IFwibG9jYWxcIik7XG5cdFx0dGhpcy5hcGlDbGllbnQuc2V0QXV0b1N5bmNPbkFwaVVwZGF0ZXMoXG5cdFx0XHR0aGlzLnNldHRpbmdzLmF1dG9TeW5jT25BcGlVcGRhdGVzID8/IHRydWVcblx0XHQpO1xuXG5cdFx0dGhpcy5maWxlTWFuYWdlciA9IG5ldyBGaWxlTWFuYWdlcihcblx0XHRcdHRoaXMuYXBwLnZhdWx0LFxuXHRcdFx0dGhpcy5zZXR0aW5ncy5zeW5jRm9sZGVyUGF0aCB8fCBcIlN0b3JpZXNcIlxuXHRcdCk7XG5cblx0XHR0aGlzLnN5bmNTZXJ2aWNlID0gbmV3IFN5bmNTZXJ2aWNlKFxuXHRcdFx0dGhpcy5hcGlDbGllbnQsXG5cdFx0XHR0aGlzLmZpbGVNYW5hZ2VyLFxuXHRcdFx0dGhpcy5zZXR0aW5ncyxcblx0XHRcdHRoaXMuYXBwXG5cdFx0KTtcblx0XHR0aGlzLmluaXRpYWxpemVBdXRvU3luY01hbmFnZXIoKTtcblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU3RvcnlFbmdpbmVTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cblx0XHQvLyBSZWdpc3RlciB0aGUgc3RvcnkgbGlzdCB2aWV3XG5cdFx0dGhpcy5yZWdpc3RlclZpZXcoXG5cdFx0XHRTVE9SWV9MSVNUX1ZJRVdfVFlQRSxcblx0XHRcdChsZWFmKSA9PiBuZXcgU3RvcnlMaXN0VmlldyhsZWFmLCB0aGlzKVxuXHRcdCk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyVmlldyhcblx0XHRcdFNUT1JZX0VOR0lORV9FWFRSQUNUX1ZJRVdfVFlQRSxcblx0XHRcdChsZWFmKSA9PiBuZXcgU3RvcnlFbmdpbmVFeHRyYWN0VmlldyhsZWFmLCB0aGlzKVxuXHRcdCk7XG5cblx0XHQvLyBBZGQgcmliYm9uIGljb24gdG8gb3BlbiB0aGUgdmlld1xuXHRcdHRoaXMuYWRkUmliYm9uSWNvbihcImJvb2stb3BlblwiLCBcIlN0b3J5IEVuZ2luZVwiLCAoKSA9PiB7XG5cdFx0XHR0aGlzLmFjdGl2YXRlVmlldygpO1xuXHRcdH0pO1xuXG5cdFx0cmVnaXN0ZXJDb21tYW5kcyh0aGlzKTtcblxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImVkaXRvci1tZW51XCIsIChtZW51LCBlZGl0b3IpID0+IHtcblx0XHRcdFx0Y29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpLnRyaW0oKTtcblx0XHRcdFx0aWYgKCFzZWxlY3Rpb24pIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKFwiU3RvcnkgRW5naW5lOiBFeHRyYWN0IGVudGl0aWVzXCIpO1xuXHRcdFx0XHRcdGl0ZW0uc2V0SWNvbihcInNlYXJjaFwiKTtcblx0XHRcdFx0XHRpdGVtLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5leHRyYWN0U2VsZWN0aW9uQ29tbWFuZChzZWxlY3Rpb24pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pXG5cdFx0KTtcblx0fVxuXG5cdGFzeW5jIG9udW5sb2FkKCkge1xuXHRcdC8vIERldGFjaCBhbGwgbGVhdmVzIG9mIHRoZSBzdG9yeSBsaXN0IHZpZXdcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFNUT1JZX0xJU1RfVklFV19UWVBFKTtcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFNUT1JZX0VOR0lORV9FWFRSQUNUX1ZJRVdfVFlQRSk7XG5cdFx0aWYgKHRoaXMuc3luY1NlcnZpY2UpIHtcblx0XHRcdHRoaXMuc3luY1NlcnZpY2UuZGlzcG9zZSgpO1xuXHRcdH1cblx0XHRpZiAodGhpcy5hdXRvU3luY01hbmFnZXIpIHtcblx0XHRcdHRoaXMuYXV0b1N5bmNNYW5hZ2VyLmRpc3Bvc2UoKTtcblx0XHRcdHRoaXMuYXV0b1N5bmNNYW5hZ2VyID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihcblx0XHRcdHt9LFxuXHRcdFx0REVGQVVMVF9TRVRUSU5HUyxcblx0XHRcdGF3YWl0IHRoaXMubG9hZERhdGEoKVxuXHRcdCk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0XHQvLyBVcGRhdGUgQVBJIGNsaWVudCB3aGVuIHNldHRpbmdzIGNoYW5nZVxuXHRcdGlmICh0aGlzLmFwaUNsaWVudCkge1xuXHRcdFx0dGhpcy5hcGlDbGllbnQuc2V0VGVuYW50SWQodGhpcy5zZXR0aW5ncy50ZW5hbnRJZCB8fCBcIlwiKTtcblx0XHRcdHRoaXMuYXBpQ2xpZW50LnNldE1vZGUodGhpcy5zZXR0aW5ncy5tb2RlIHx8IFwibG9jYWxcIik7XG5cdFx0XHR0aGlzLmFwaUNsaWVudC5zZXRBdXRvU3luY09uQXBpVXBkYXRlcyhcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5hdXRvU3luY09uQXBpVXBkYXRlcyA/PyB0cnVlXG5cdFx0XHQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmFwaUNsaWVudCA9IG5ldyBTdG9yeUVuZ2luZUNsaWVudChcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5hcGlVcmwsXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuYXBpS2V5LFxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLnRlbmFudElkIHx8IFwiXCJcblx0XHRcdCk7XG5cdFx0XHR0aGlzLmFwaUNsaWVudC5zZXRNb2RlKHRoaXMuc2V0dGluZ3MubW9kZSB8fCBcImxvY2FsXCIpO1xuXHRcdFx0dGhpcy5hcGlDbGllbnQuc2V0QXV0b1N5bmNPbkFwaVVwZGF0ZXMoXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuYXV0b1N5bmNPbkFwaVVwZGF0ZXMgPz8gdHJ1ZVxuXHRcdFx0KTtcblx0XHR9XG5cdFx0Ly8gVXBkYXRlIGZpbGUgbWFuYWdlciBiYXNlIHBhdGhcblx0XHR0aGlzLmZpbGVNYW5hZ2VyID0gbmV3IEZpbGVNYW5hZ2VyKFxuXHRcdFx0dGhpcy5hcHAudmF1bHQsXG5cdFx0XHR0aGlzLnNldHRpbmdzLnN5bmNGb2xkZXJQYXRoIHx8IFwiU3Rvcmllc1wiXG5cdFx0KTtcblx0XHQvLyBVcGRhdGUgc3luYyBzZXJ2aWNlXG5cdFx0aWYgKHRoaXMuc3luY1NlcnZpY2UpIHtcblx0XHRcdHRoaXMuc3luY1NlcnZpY2UuZGlzcG9zZSgpO1xuXHRcdH1cblx0XHR0aGlzLnN5bmNTZXJ2aWNlID0gbmV3IFN5bmNTZXJ2aWNlKFxuXHRcdFx0dGhpcy5hcGlDbGllbnQsXG5cdFx0XHR0aGlzLmZpbGVNYW5hZ2VyLFxuXHRcdFx0dGhpcy5zZXR0aW5ncyxcblx0XHRcdHRoaXMuYXBwXG5cdFx0KTtcblx0XHR0aGlzLmluaXRpYWxpemVBdXRvU3luY01hbmFnZXIoKTtcblx0fVxuXG5cdHByaXZhdGUgaW5pdGlhbGl6ZUF1dG9TeW5jTWFuYWdlcigpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5hdXRvU3luY01hbmFnZXIpIHtcblx0XHRcdHRoaXMuYXV0b1N5bmNNYW5hZ2VyLmRpc3Bvc2UoKTtcblx0XHRcdHRoaXMuYXV0b1N5bmNNYW5hZ2VyID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmF1dG9QdXNoT25GaWxlQmx1cikge1xuXHRcdFx0dGhpcy5hdXRvU3luY01hbmFnZXIgPSBuZXcgQXV0b1N5bmNNYW5hZ2VyKHRoaXMpO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGNyZWF0ZVN0b3J5Q29tbWFuZCgpIHtcblx0XHQvLyBWYWxpZGF0ZSB0ZW5hbnQgSUQgb25seSBpbiByZW1vdGUgbW9kZVxuXHRcdGlmICh0aGlzLnNldHRpbmdzLm1vZGUgPT09IFwicmVtb3RlXCIpIHtcblx0XHRcdGNvbnN0IHRlbmFudElkID0gdGhpcy5zZXR0aW5ncy50ZW5hbnRJZD8udHJpbSgpO1xuXHRcdFx0aWYgKCF0ZW5hbnRJZCkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiUGxlYXNlIGNvbmZpZ3VyZSBUZW5hbnQgSUQgaW4gc2V0dGluZ3NcIiwgNTAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQmFzaWMgVVVJRCBmb3JtYXQgdmFsaWRhdGlvblxuXHRcdFx0Y29uc3QgdXVpZFJlZ2V4ID0gL15bMC05YS1mXXs4fS1bMC05YS1mXXs0fS1bMC05YS1mXXs0fS1bMC05YS1mXXs0fS1bMC05YS1mXXsxMn0kL2k7XG5cdFx0XHRpZiAoIXV1aWRSZWdleC50ZXN0KHRlbmFudElkKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiSW52YWxpZCBUZW5hbnQgSUQgZm9ybWF0LiBQbGVhc2UgY2hlY2sgeW91ciBzZXR0aW5ncy5cIiwgNTAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBPcGVuIG1vZGFsIHRvIGdldCB0aXRsZSwgd29ybGQsIGFuZCBzeW5jIHByZWZlcmVuY2Vcblx0XHRuZXcgQ3JlYXRlU3RvcnlNb2RhbCh0aGlzLmFwcCwgdGhpcywgYXN5bmMgKHRpdGxlOiBzdHJpbmcsIHdvcmxkSWQ6IHN0cmluZyB8IHVuZGVmaW5lZCwgc2hvdWxkU3luYzogYm9vbGVhbikgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0bmV3IE5vdGljZShgQ3JlYXRpbmcgc3RvcnkgXCIke3RpdGxlfVwiLi4uYCk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zdCBzdG9yeSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZVN0b3J5KHRpdGxlLCB3b3JsZElkKTtcblx0XHRcdFx0XG5cdFx0XHRcdG5ldyBOb3RpY2UoYFN0b3J5IFwiJHt0aXRsZX1cIiBjcmVhdGVkIHN1Y2Nlc3NmdWxseWApO1xuXG5cdFx0XHRcdC8vIFN5bmMgdG8gT2JzaWRpYW4gaWYgcmVxdWVzdGVkXG5cdFx0XHRcdGlmIChzaG91bGRTeW5jKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYFN5bmNpbmcgc3RvcnkgdG8gT2JzaWRpYW4uLi5gKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc3luY1NlcnZpY2UucHVsbFN0b3J5KHN0b3J5LmlkKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYFN0b3J5IHN5bmNlZCB0byB5b3VyIHZhdWx0IWApO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKHN5bmNFcnIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHN5bmNFcnJvck1lc3NhZ2UgPSBzeW5jRXJyIGluc3RhbmNlb2YgRXJyb3IgXG5cdFx0XHRcdFx0XHRcdD8gc3luY0Vyci5tZXNzYWdlIFxuXHRcdFx0XHRcdFx0XHQ6IFwiRmFpbGVkIHRvIHN5bmMgc3RvcnlcIjtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYFN0b3J5IGNyZWF0ZWQgYnV0IHN5bmMgZmFpbGVkOiAke3N5bmNFcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVXBkYXRlIHRoZSB2aWV3IGlmIGl0J3Mgb3BlblxuXHRcdFx0XHRjb25zdCBvcGVuVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoU1RPUllfTElTVF9WSUVXX1RZUEUpWzBdO1xuXHRcdFx0XHRpZiAob3BlblZpZXcpIHtcblx0XHRcdFx0XHRjb25zdCB2aWV3ID0gb3BlblZpZXcudmlldyBhcyBTdG9yeUxpc3RWaWV3O1xuXHRcdFx0XHRcdGF3YWl0IHZpZXcucmVmcmVzaCgpO1xuXHRcdFx0XHRcdGlmICghc2hvdWxkU3luYykge1xuXHRcdFx0XHRcdFx0Ly8gU2hvdyBkZXRhaWxzIGluIHRoZSB2aWV3XG5cdFx0XHRcdFx0XHRhd2FpdCB2aWV3LnNob3dTdG9yeURldGFpbHMoc3RvcnkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBjcmVhdGUgc3RvcnlcIjtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH0pLm9wZW4oKTtcblx0fVxuXG5cdGFzeW5jIGFjdGl2YXRlVmlldygpIHtcblx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG5cblx0XHRsZXQgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoU1RPUllfTElTVF9WSUVXX1RZUEUpWzBdO1xuXG5cdFx0aWYgKCFsZWFmKSB7XG5cdFx0XHQvLyBDcmVhdGUgbmV3IGxlYWYgaW4gdGhlIHJpZ2h0IHBhbmVsXG5cdFx0XHRjb25zdCByaWdodExlYWYgPSB3b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcblx0XHRcdGlmICghcmlnaHRMZWFmKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJDb3VsZCBub3QgY3JlYXRlIHZpZXcuIFBsZWFzZSB0cnkgYWdhaW4uXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRsZWFmID0gcmlnaHRMZWFmO1xuXHRcdFx0YXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xuXHRcdFx0XHR0eXBlOiBTVE9SWV9MSVNUX1ZJRVdfVFlQRSxcblx0XHRcdFx0YWN0aXZlOiB0cnVlLFxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0d29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG5cdH1cblxuXHRhc3luYyBhY3RpdmF0ZUV4dHJhY3RWaWV3KCkge1xuXHRcdGNvbnN0IHsgd29ya3NwYWNlIH0gPSB0aGlzLmFwcDtcblxuXHRcdGxldCBsZWFmID0gd29ya3NwYWNlLmdldExlYXZlc09mVHlwZShTVE9SWV9FTkdJTkVfRVhUUkFDVF9WSUVXX1RZUEUpWzBdO1xuXG5cdFx0aWYgKCFsZWFmKSB7XG5cdFx0XHRsZWFmID0gd29ya3NwYWNlLmdldExlYXZlc09mVHlwZShTVE9SWV9MSVNUX1ZJRVdfVFlQRSlbMF07XG5cdFx0fVxuXG5cdFx0aWYgKCFsZWFmKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiQ291bGQgbm90IG9wZW4gZXh0cmFjdCB2aWV3LiBQbGVhc2UgdHJ5IGFnYWluLlwiLCAzMDAwKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7XG5cdFx0XHR0eXBlOiBTVE9SWV9FTkdJTkVfRVhUUkFDVF9WSUVXX1RZUEUsXG5cdFx0XHRhY3RpdmU6IHRydWUsXG5cdFx0fSk7XG5cblx0XHR3b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZ2V0QWN0aXZlV29ybGRJZCgpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRpZiAoIWFjdGl2ZUZpbGUpIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMuZmlsZU1hbmFnZXIucGFyc2VGcm9udG1hdHRlcihmaWxlQ29udGVudCk7XG5cdFx0Y29uc3Qgc3RvcnlJZCA9XG5cdFx0XHRmcm9udG1hdHRlci5zdG9yeV9pZCB8fFxuXHRcdFx0KGFjdGl2ZUZpbGUubmFtZSA9PT0gXCJzdG9yeS5tZFwiID8gZnJvbnRtYXR0ZXIuaWQgOiBcIlwiKTtcblxuXHRcdGlmICghc3RvcnlJZCkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3RvcnkgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRTdG9yeShzdG9yeUlkKTtcblx0XHRyZXR1cm4gc3Rvcnkud29ybGRfaWQgPz8gbnVsbDtcblx0fVxuXG5cdGFzeW5jIGV4dHJhY3RTZWxlY3Rpb25Db21tYW5kKHNlbGVjdGlvbjogc3RyaW5nKSB7XG5cdFx0Y29uc3QgdHJpbW1lZFNlbGVjdGlvbiA9IHNlbGVjdGlvbi50cmltKCk7XG5cdFx0aWYgKCF0cmltbWVkU2VsZWN0aW9uKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiU2VsZWN0IHRleHQgdG8gZXh0cmFjdCBlbnRpdGllc1wiLCAzMDAwKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5zZXR0aW5ncy5tb2RlICE9PSBcInJlbW90ZVwiKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiRXh0cmFjdGlvbiByZXF1aXJlcyB0aGUgZnVsbCByZW1vdGUgdmVyc2lvbi5cIiwgNTAwMCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgdGVuYW50SWQgPSB0aGlzLnNldHRpbmdzLnRlbmFudElkPy50cmltKCk7XG5cdFx0aWYgKCF0ZW5hbnRJZCkge1xuXHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBjb25maWd1cmUgVGVuYW50IElEIGluIHNldHRpbmdzXCIsIDUwMDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGdhdGV3YXlVcmwgPSB0aGlzLnNldHRpbmdzLmxsbUdhdGV3YXlVcmw/LnRyaW0oKTtcblx0XHRpZiAoIWdhdGV3YXlVcmwpIHtcblx0XHRcdG5ldyBOb3RpY2UoXCJQbGVhc2UgY29uZmlndXJlIExMTSBHYXRld2F5IFVSTCBpbiBzZXR0aW5nc1wiLCA1MDAwKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRsZXQgd29ybGRJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cdFx0dHJ5IHtcblx0XHRcdHdvcmxkSWQgPSBhd2FpdCB0aGlzLmdldEFjdGl2ZVdvcmxkSWQoKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9XG5cdFx0XHRcdGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byByZXNvbHZlIHN0b3J5XCI7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCF3b3JsZElkKSB7XG5cdFx0XHRuZXcgTm90aWNlKFxuXHRcdFx0XHRcIk9wZW4gYSBzeW5jZWQgc3RvcnkgZG9jdW1lbnQgYmVmb3JlIGV4dHJhY3RpbmcgZW50aXRpZXMuXCIsXG5cdFx0XHRcdDUwMDBcblx0XHRcdCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5yZXNldEV4dHJhY3RTdGF0ZSh0cmltbWVkU2VsZWN0aW9uLCB3b3JsZElkKTtcblx0XHRhd2FpdCB0aGlzLmFjdGl2YXRlVmlldygpO1xuXHRcdGF3YWl0IHRoaXMuYWN0aXZhdGVFeHRyYWN0VmlldygpO1xuXHRcdHRoaXMudXBkYXRlRXh0cmFjdFZpZXdzKCk7XG5cblx0XHR0cnkge1xuXHRcdFx0aWYgKG5hdmlnYXRvcj8uY2xpcGJvYXJkPy53cml0ZVRleHQpIHtcblx0XHRcdFx0YXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodHJpbW1lZFNlbGVjdGlvbik7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHQvLyBDbGlwYm9hcmQgaXMgb3B0aW9uYWw7IGlnbm9yZSBmYWlsdXJlcy5cblx0XHR9XG5cblx0XHRuZXcgTm90aWNlKFwiU3RhcnRpbmcgZXh0cmFjdGlvbiBzdHJlYW0uLi5cIiwgMzAwMCk7XG5cdFx0YXdhaXQgdGhpcy5zdGFydEV4dHJhY3RTdHJlYW0oe1xuXHRcdFx0dGVuYW50SWQsXG5cdFx0XHRnYXRld2F5VXJsLFxuXHRcdFx0d29ybGRJZCxcblx0XHRcdHRleHQ6IHRyaW1tZWRTZWxlY3Rpb24sXG5cdFx0fSk7XG5cdH1cblxuXHR1cGRhdGVFeHRyYWN0Vmlld3MoKSB7XG5cdFx0Y29uc3QgbGlzdExlYWYgPVxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShTVE9SWV9MSVNUX1ZJRVdfVFlQRSlbMF07XG5cdFx0aWYgKGxpc3RMZWFmKSB7XG5cdFx0XHRjb25zdCB2aWV3ID0gbGlzdExlYWYudmlldyBhcyBTdG9yeUxpc3RWaWV3O1xuXHRcdFx0aWYgKHZpZXcudmlld01vZGUgPT09IFwibGlzdFwiKSB7XG5cdFx0XHRcdHZpZXcucmVuZGVyTGlzdENvbnRlbnQoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRjb25zdCBleHRyYWN0TGVhZiA9XG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFNUT1JZX0VOR0lORV9FWFRSQUNUX1ZJRVdfVFlQRSlbMF07XG5cdFx0aWYgKGV4dHJhY3RMZWFmKSB7XG5cdFx0XHRjb25zdCB2aWV3ID0gZXh0cmFjdExlYWYudmlldyBhcyBTdG9yeUVuZ2luZUV4dHJhY3RWaWV3O1xuXHRcdFx0dmlldy5zZXRSZXN1bHQodGhpcy5leHRyYWN0UmVzdWx0KTtcblx0XHRcdHZpZXcuc2V0TG9ncyh0aGlzLmV4dHJhY3RMb2dzLCB0aGlzLmV4dHJhY3RTdGF0dXMpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgcmVzZXRFeHRyYWN0U3RhdGUodGV4dDogc3RyaW5nLCB3b3JsZElkOiBzdHJpbmcpIHtcblx0XHR0aGlzLmNhbmNlbEV4dHJhY3RTdHJlYW0oKTtcblx0XHR0aGlzLmV4dHJhY3RSZXN1bHQgPSB7XG5cdFx0XHR0ZXh0LFxuXHRcdFx0d29ybGRfaWQ6IHdvcmxkSWQsXG5cdFx0XHRlbnRpdGllczogW10sXG5cdFx0XHRyZWNlaXZlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuXHRcdH07XG5cdFx0dGhpcy5leHRyYWN0TG9ncyA9IFtdO1xuXHRcdHRoaXMuZXh0cmFjdFN0YXR1cyA9IFwicnVubmluZ1wiO1xuXHR9XG5cblx0Y2FuY2VsRXh0cmFjdFN0cmVhbSgpIHtcblx0XHRpZiAodGhpcy5leHRyYWN0QWJvcnRDb250cm9sbGVyKSB7XG5cdFx0XHR0aGlzLmV4dHJhY3RBYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcblx0XHRcdHRoaXMuZXh0cmFjdEFib3J0Q29udHJvbGxlciA9IG51bGw7XG5cdFx0XHR0aGlzLmV4dHJhY3RTdGF0dXMgPSBcImNhbmNlbGVkXCI7XG5cdFx0XHR0aGlzLmFwcGVuZEV4dHJhY3RMb2coe1xuXHRcdFx0XHR0eXBlOiBcImNsaWVudC5jYW5jZWxcIixcblx0XHRcdFx0bWVzc2FnZTogXCJFeHRyYWN0aW9uIGNhbmNlbGVkIGJ5IHVzZXIuXCIsXG5cdFx0XHR9KTtcblx0XHRcdHRoaXMudXBkYXRlRXh0cmFjdFZpZXdzKCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhcHBlbmRFeHRyYWN0TG9nKGV2ZW50OiBFeHRyYWN0U3RyZWFtRXZlbnQpIHtcblx0XHRjb25zdCB0aW1lc3RhbXAgPSBldmVudC50aW1lc3RhbXBcblx0XHRcdD8gbmV3IERhdGUoZXZlbnQudGltZXN0YW1wKS50b0lTT1N0cmluZygpXG5cdFx0XHQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcblx0XHR0aGlzLmV4dHJhY3RMb2dzLnB1c2goe1xuXHRcdFx0aWQ6IGAke3RpbWVzdGFtcH0tJHt0aGlzLmV4dHJhY3RMb2dzLmxlbmd0aH1gLFxuXHRcdFx0ZXZlbnRUeXBlOiBldmVudC50eXBlLFxuXHRcdFx0cGhhc2U6IGV2ZW50LnBoYXNlLFxuXHRcdFx0bWVzc2FnZTogZXZlbnQubWVzc2FnZSxcblx0XHRcdGRhdGE6IGV2ZW50LmRhdGEsXG5cdFx0XHR0aW1lc3RhbXAsXG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHN0YXJ0RXh0cmFjdFN0cmVhbShwYXJhbXM6IHtcblx0XHR0ZW5hbnRJZDogc3RyaW5nO1xuXHRcdGdhdGV3YXlVcmw6IHN0cmluZztcblx0XHR3b3JsZElkOiBzdHJpbmc7XG5cdFx0dGV4dDogc3RyaW5nO1xuXHR9KSB7XG5cdFx0Y29uc3QgeyB0ZW5hbnRJZCwgZ2F0ZXdheVVybCwgd29ybGRJZCwgdGV4dCB9ID0gcGFyYW1zO1xuXHRcdGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cdFx0dGhpcy5leHRyYWN0QWJvcnRDb250cm9sbGVyID0gY29udHJvbGxlcjtcblx0XHR0aGlzLmFwcGVuZEV4dHJhY3RMb2coe1xuXHRcdFx0dHlwZTogXCJjbGllbnQuc3RhcnRcIixcblx0XHRcdG1lc3NhZ2U6IFwiT3BlbmluZyBleHRyYWN0aW9uIHN0cmVhbS5cIixcblx0XHR9KTtcblx0XHR0aGlzLnVwZGF0ZUV4dHJhY3RWaWV3cygpO1xuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG5cdFx0XHRcdGAke2dhdGV3YXlVcmwucmVwbGFjZSgvXFwvJC8sIFwiXCIpfS9hcGkvdjEvZW50aXR5LWV4dHJhY3Qvc3RyZWFtYCxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdFx0XCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG5cdFx0XHRcdFx0XHRcIlgtVGVuYW50LUlEXCI6IHRlbmFudElkLFxuXHRcdFx0XHRcdFx0Li4uKHRoaXMuc2V0dGluZ3MuYXBpS2V5XG5cdFx0XHRcdFx0XHRcdD8geyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5zZXR0aW5ncy5hcGlLZXl9YCB9XG5cdFx0XHRcdFx0XHRcdDoge30pLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0XHRcdFx0dGV4dCxcblx0XHRcdFx0XHRcdHdvcmxkX2lkOiB3b3JsZElkLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdHNpZ25hbDogY29udHJvbGxlci5zaWduYWwsXG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cblx0XHRcdGlmICghcmVzcG9uc2Uub2spIHtcblx0XHRcdFx0bGV0IGVycm9yTWVzc2FnZSA9IGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWA7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29uc3QgZXJyb3JCb2R5ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkgYXMgeyBlcnJvcj86IHN0cmluZyB9O1xuXHRcdFx0XHRcdGlmIChlcnJvckJvZHk/LmVycm9yKSB7XG5cdFx0XHRcdFx0XHRlcnJvck1lc3NhZ2UgPSBlcnJvckJvZHkuZXJyb3I7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHQvLyBJZ25vcmUgSlNPTiBwYXJzZSBlcnJvcnMuXG5cdFx0XHRcdH1cblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICghcmVzcG9uc2UuYm9keSkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJObyByZXNwb25zZSBzdHJlYW0gYXZhaWxhYmxlLlwiKTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgcmVhZGVyID0gcmVzcG9uc2UuYm9keS5nZXRSZWFkZXIoKTtcblx0XHRcdGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiKTtcblx0XHRcdGxldCBidWZmZXIgPSBcIlwiO1xuXHRcdFx0bGV0IGN1cnJlbnRFdmVudCA9IFwibWVzc2FnZVwiO1xuXHRcdFx0bGV0IGRhdGFMaW5lczogc3RyaW5nW10gPSBbXTtcblxuXHRcdFx0Y29uc3QgZmx1c2hFdmVudCA9ICgpID0+IHtcblx0XHRcdFx0aWYgKCFkYXRhTGluZXMubGVuZ3RoKSByZXR1cm47XG5cdFx0XHRcdGNvbnN0IHJhd0RhdGEgPSBkYXRhTGluZXMuam9pbihcIlxcblwiKS50cmltKCk7XG5cdFx0XHRcdGRhdGFMaW5lcyA9IFtdO1xuXHRcdFx0XHRpZiAoIXJhd0RhdGEpIHJldHVybjtcblxuXHRcdFx0XHRsZXQgcGFyc2VkOiBFeHRyYWN0U3RyZWFtRXZlbnQgfCBudWxsID0gbnVsbDtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRwYXJzZWQgPSBKU09OLnBhcnNlKHJhd0RhdGEpIGFzIEV4dHJhY3RTdHJlYW1FdmVudDtcblx0XHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdFx0dGhpcy5hcHBlbmRFeHRyYWN0TG9nKHtcblx0XHRcdFx0XHRcdHR5cGU6IFwicGFyc2UuZXJyb3JcIixcblx0XHRcdFx0XHRcdG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHBhcnNlIHN0cmVhbSBldmVudCBwYXlsb2FkLlwiLFxuXHRcdFx0XHRcdFx0ZGF0YTogeyByYXc6IHJhd0RhdGEsIGV2ZW50OiBjdXJyZW50RXZlbnQgfSxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUV4dHJhY3RWaWV3cygpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICghcGFyc2VkLnR5cGUpIHtcblx0XHRcdFx0XHRwYXJzZWQudHlwZSA9IGN1cnJlbnRFdmVudCB8fCBcIm1lc3NhZ2VcIjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMuYXBwZW5kRXh0cmFjdExvZyhwYXJzZWQpO1xuXG5cdFx0XHRcdGlmIChwYXJzZWQudHlwZSA9PT0gXCJyZXN1bHRcIiAmJiBwYXJzZWQuZGF0YT8ucGF5bG9hZCkge1xuXHRcdFx0XHRcdGNvbnN0IHBheWxvYWQgPSBwYXJzZWQuZGF0YS5wYXlsb2FkIGFzIHtcblx0XHRcdFx0XHRcdGVudGl0aWVzOiBFeHRyYWN0RW50aXR5UmVzdWx0W1wiZW50aXRpZXNcIl07XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRpZiAodGhpcy5leHRyYWN0UmVzdWx0KSB7XG5cdFx0XHRcdFx0XHR0aGlzLmV4dHJhY3RSZXN1bHQuZW50aXRpZXMgPSBwYXlsb2FkLmVudGl0aWVzID8/IFtdO1xuXHRcdFx0XHRcdFx0dGhpcy5leHRyYWN0UmVzdWx0LnJlY2VpdmVkX2F0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLmV4dHJhY3RTdGF0dXMgPSBcImRvbmVcIjtcblx0XHRcdFx0XHRjb25zdCBmb3VuZENvdW50ID0gdGhpcy5leHRyYWN0UmVzdWx0Py5lbnRpdGllcy5maWx0ZXIoXG5cdFx0XHRcdFx0XHQoZW50aXR5KSA9PiBlbnRpdHkuZm91bmRcblx0XHRcdFx0XHQpLmxlbmd0aDtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFxuXHRcdFx0XHRcdFx0YEV4dHJhY3Rpb24gY29tcGxldGU6ICR7Zm91bmRDb3VudCA/PyAwfS8ke3RoaXMuZXh0cmFjdFJlc3VsdD8uZW50aXRpZXMubGVuZ3RoID8/IDB9IG1hdGNoZWRgLFxuXHRcdFx0XHRcdFx0NDAwMFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAocGFyc2VkLnR5cGUgPT09IFwiZXJyb3JcIikge1xuXHRcdFx0XHRcdHRoaXMuZXh0cmFjdFN0YXR1cyA9IFwiZXJyb3JcIjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMudXBkYXRlRXh0cmFjdFZpZXdzKCk7XG5cdFx0XHR9O1xuXG5cdFx0XHR3aGlsZSAodHJ1ZSkge1xuXHRcdFx0XHRjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuXHRcdFx0XHRpZiAoZG9uZSkgYnJlYWs7XG5cdFx0XHRcdGJ1ZmZlciArPSBkZWNvZGVyLmRlY29kZSh2YWx1ZSwgeyBzdHJlYW06IHRydWUgfSk7XG5cblx0XHRcdFx0bGV0IGxpbmVFbmQgPSBidWZmZXIuaW5kZXhPZihcIlxcblwiKTtcblx0XHRcdFx0d2hpbGUgKGxpbmVFbmQgIT09IC0xKSB7XG5cdFx0XHRcdFx0Y29uc3QgbGluZSA9IGJ1ZmZlci5zbGljZSgwLCBsaW5lRW5kKS5yZXBsYWNlKC9cXHIkLywgXCJcIik7XG5cdFx0XHRcdFx0YnVmZmVyID0gYnVmZmVyLnNsaWNlKGxpbmVFbmQgKyAxKTtcblx0XHRcdFx0XHRsaW5lRW5kID0gYnVmZmVyLmluZGV4T2YoXCJcXG5cIik7XG5cblx0XHRcdFx0XHRpZiAoIWxpbmUpIHtcblx0XHRcdFx0XHRcdGZsdXNoRXZlbnQoKTtcblx0XHRcdFx0XHRcdGN1cnJlbnRFdmVudCA9IFwibWVzc2FnZVwiO1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGxpbmUuc3RhcnRzV2l0aChcImV2ZW50OlwiKSkge1xuXHRcdFx0XHRcdFx0Y3VycmVudEV2ZW50ID0gbGluZS5yZXBsYWNlKFwiZXZlbnQ6XCIsIFwiXCIpLnRyaW0oKTtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChsaW5lLnN0YXJ0c1dpdGgoXCJkYXRhOlwiKSkge1xuXHRcdFx0XHRcdFx0ZGF0YUxpbmVzLnB1c2gobGluZS5yZXBsYWNlKFwiZGF0YTpcIiwgXCJcIikudHJpbSgpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0dGhpcy5leHRyYWN0QWJvcnRDb250cm9sbGVyID0gbnVsbDtcblx0XHRcdGlmICh0aGlzLmV4dHJhY3RTdGF0dXMgPT09IFwicnVubmluZ1wiKSB7XG5cdFx0XHRcdHRoaXMuZXh0cmFjdFN0YXR1cyA9IFwiZG9uZVwiO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0aWYgKGVyciBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbiAmJiBlcnIubmFtZSA9PT0gXCJBYm9ydEVycm9yXCIpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID1cblx0XHRcdFx0ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIGV4dHJhY3QgZW50aXRpZXNcIjtcblx0XHRcdHRoaXMuZXh0cmFjdFN0YXR1cyA9IFwiZXJyb3JcIjtcblx0XHRcdHRoaXMuYXBwZW5kRXh0cmFjdExvZyh7XG5cdFx0XHRcdHR5cGU6IFwiZXJyb3JcIixcblx0XHRcdFx0bWVzc2FnZTogZXJyb3JNZXNzYWdlLFxuXHRcdFx0fSk7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHR0aGlzLnVwZGF0ZUV4dHJhY3RWaWV3cygpO1xuXHRcdH1cblx0fVxuXG5cdG9wZW5TZXR0aW5ncygpIHtcblx0XHRjb25zdCBzZXR0aW5nID0gKHRoaXMuYXBwIGFzIGFueSkuc2V0dGluZztcblx0XHRpZiAoc2V0dGluZykge1xuXHRcdFx0c2V0dGluZy5vcGVuKCk7XG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0c2V0dGluZy5vcGVuVGFiQnlJZCh0aGlzLm1hbmlmZXN0LmlkKTtcblx0XHRcdH0sIDEwMCk7XG5cdFx0fVxuXHR9XG59XG4iLCAiaW1wb3J0IHsgU3luY0VudGl0eVBheWxvYWQgfSBmcm9tIFwiLi9lbnRpdHlTeW5jVHlwZXNcIjtcblxudHlwZSBTdWJzY3JpYmVyID0gKHBheWxvYWQ6IFN5bmNFbnRpdHlQYXlsb2FkKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPjtcblxuY2xhc3MgQXBpVXBkYXRlTm90aWZpZXIge1xuXHRwcml2YXRlIHN1YnNjcmliZXJzID0gbmV3IFNldDxTdWJzY3JpYmVyPigpO1xuXG5cdHN1YnNjcmliZShzdWJzY3JpYmVyOiBTdWJzY3JpYmVyKTogKCkgPT4gdm9pZCB7XG5cdFx0dGhpcy5zdWJzY3JpYmVycy5hZGQoc3Vic2NyaWJlcik7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdHRoaXMuc3Vic2NyaWJlcnMuZGVsZXRlKHN1YnNjcmliZXIpO1xuXHRcdH07XG5cdH1cblxuXHRhc3luYyBub3RpZnkocGF5bG9hZDogU3luY0VudGl0eVBheWxvYWQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRmb3IgKGNvbnN0IHN1YnNjcmliZXIgb2YgdGhpcy5zdWJzY3JpYmVycykge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgc3Vic2NyaWJlcihwYXlsb2FkKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKFwiQXV0byBzeW5jIHN1YnNjcmliZXIgZmFpbGVkXCIsIGVycik7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBjb25zdCBhcGlVcGRhdGVOb3RpZmllciA9IG5ldyBBcGlVcGRhdGVOb3RpZmllcigpO1xuXG4iLCAiaW1wb3J0IHtcblx0RXJyb3JSZXNwb25zZSxcblx0U3RvcnksXG5cdFRlbmFudCxcblx0Q2hhcHRlcixcblx0U2NlbmUsXG5cdEJlYXQsXG5cdFN0b3J5V2l0aEhpZXJhcmNoeSxcblx0Q2hhcHRlcldpdGhDb250ZW50LFxuXHRTY2VuZVdpdGhCZWF0cyxcblx0Q29udGVudEJsb2NrLFxuXHRDb250ZW50QW5jaG9yLFxuXHRXb3JsZCxcblx0UlBHU3lzdGVtLFxuXHRDaGFyYWN0ZXIsXG5cdExvY2F0aW9uLFxuXHRBcnRpZmFjdCxcblx0V29ybGRFdmVudCxcblx0VHJhaXQsXG5cdEFyY2hldHlwZSxcblx0QXJjaGV0eXBlVHJhaXQsXG5cdEZhY3Rpb24sXG5cdEZhY3Rpb25SZWZlcmVuY2UsXG5cdExvcmUsXG5cdExvcmVSZWZlcmVuY2UsXG5cdENoYXJhY3RlclRyYWl0LFxuXHRDaGFyYWN0ZXJSZWxhdGlvbnNoaXAsXG5cdEV2ZW50Q2hhcmFjdGVyLFxuXHRFdmVudFJlZmVyZW5jZSxcblx0U2NlbmVSZWZlcmVuY2UsXG5cdFRpbWVDb25maWcsXG59IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgU3luY0VudGl0eVBheWxvYWQgfSBmcm9tIFwiLi4vc3luYy9lbnRpdHlTeW5jVHlwZXNcIjtcbmltcG9ydCB7IGFwaVVwZGF0ZU5vdGlmaWVyIH0gZnJvbSBcIi4uL3N5bmMvYXBpVXBkYXRlTm90aWZpZXJcIjtcblxuZXhwb3J0IGNsYXNzIFN0b3J5RW5naW5lQ2xpZW50IHtcblx0cHJpdmF0ZSBtb2RlOiBcImxvY2FsXCIgfCBcInJlbW90ZVwiID0gXCJyZW1vdGVcIjtcblx0cHJpdmF0ZSBhdXRvU3luY09uQXBpVXBkYXRlcyA9IHRydWU7XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSBhcGlVcmw6IHN0cmluZyxcblx0XHRwcml2YXRlIGFwaUtleTogc3RyaW5nLFxuXHRcdHByaXZhdGUgdGVuYW50SWQ6IHN0cmluZyA9IFwiXCJcblx0KSB7fVxuXG5cdHNldFRlbmFudElkKHRlbmFudElkOiBzdHJpbmcpOiB2b2lkIHtcblx0XHR0aGlzLnRlbmFudElkID0gdGVuYW50SWQudHJpbSgpO1xuXHR9XG5cblx0c2V0TW9kZShtb2RlOiBcImxvY2FsXCIgfCBcInJlbW90ZVwiKTogdm9pZCB7XG5cdFx0dGhpcy5tb2RlID0gbW9kZTtcblx0fVxuXG5cdHNldEF1dG9TeW5jT25BcGlVcGRhdGVzKGVuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcblx0XHR0aGlzLmF1dG9TeW5jT25BcGlVcGRhdGVzID0gZW5hYmxlZDtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcmVxdWVzdDxUPihcblx0XHRtZXRob2Q6IHN0cmluZyxcblx0XHRlbmRwb2ludDogc3RyaW5nLFxuXHRcdGJvZHk/OiB1bmtub3duLFxuXHRcdHRlbmFudElkT3ZlcnJpZGU/OiBzdHJpbmdcblx0KTogUHJvbWlzZTxUPiB7XG5cdFx0Y29uc3QgdXJsID0gYCR7dGhpcy5hcGlVcmx9JHtlbmRwb2ludH1gO1xuXHRcdGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuXHRcdFxuXHRcdGhlYWRlcnMuc2V0KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcblxuXHRcdGlmICh0aGlzLmFwaUtleSkge1xuXHRcdFx0aGVhZGVycy5zZXQoXCJBdXRob3JpemF0aW9uXCIsIGBCZWFyZXIgJHt0aGlzLmFwaUtleX1gKTtcblx0XHR9XG5cblx0XHQvLyBVc2Ugb3ZlcnJpZGUgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSB1c2UgaW5zdGFuY2UgdGVuYW50SWRcblx0XHRjb25zdCBlZmZlY3RpdmVUZW5hbnRJZCA9IHRlbmFudElkT3ZlcnJpZGUgPz8gdGhpcy50ZW5hbnRJZDtcblx0XHRpZiAoZWZmZWN0aXZlVGVuYW50SWQpIHtcblx0XHRcdGNvbnN0IHRyaW1tZWRUZW5hbnRJZCA9IGVmZmVjdGl2ZVRlbmFudElkLnRyaW0oKTtcblx0XHRcdGlmICh0cmltbWVkVGVuYW50SWQpIHtcblx0XHRcdFx0aGVhZGVycy5zZXQoXCJYLVRlbmFudC1JRFwiLCB0cmltbWVkVGVuYW50SWQpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IG9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge1xuXHRcdFx0bWV0aG9kLFxuXHRcdFx0aGVhZGVycyxcblx0XHR9O1xuXG5cdFx0aWYgKGJvZHkpIHtcblx0XHRcdG9wdGlvbnMuYm9keSA9IEpTT04uc3RyaW5naWZ5KGJvZHkpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCBvcHRpb25zKTtcblxuXHRcdGlmICghcmVzcG9uc2Uub2spIHtcblx0XHRcdGxldCBlcnJvcjogRXJyb3JSZXNwb25zZTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGVycm9yID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkgYXMgRXJyb3JSZXNwb25zZTtcblx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRlcnJvciA9IHtcblx0XHRcdFx0XHRlcnJvcjogXCJ1bmtub3duX2Vycm9yXCIsXG5cdFx0XHRcdFx0bWVzc2FnZTogYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCxcblx0XHRcdFx0XHRjb2RlOiBcIkhUVFBfRVJST1JcIixcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UgfHwgZXJyb3IuZXJyb3IgfHwgYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YDtcblx0XHRcdHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuXHRcdH1cblxuXHRcdHJldHVybiByZXNwb25zZS5qc29uKCkgYXMgUHJvbWlzZTxUPjtcblx0fVxuXG5cdGFzeW5jIGxpc3RTdG9yaWVzKCk6IFByb21pc2U8U3RvcnlbXT4ge1xuXHRcdGlmICh0aGlzLm1vZGUgPT09IFwicmVtb3RlXCIgJiYgKCF0aGlzLnRlbmFudElkIHx8ICF0aGlzLnRlbmFudElkLnRyaW0oKSkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlRlbmFudCBJRCBpcyByZXF1aXJlZFwiKTtcblx0XHR9XG5cblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHN0b3JpZXM6IFN0b3J5W10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0XCIvYXBpL3YxL3N0b3JpZXNcIlxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnN0b3JpZXMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRTdG9yeShpZDogc3RyaW5nKTogUHJvbWlzZTxTdG9yeT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgc3Rvcnk6IFN0b3J5IH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL3N0b3JpZXMvJHtpZH1gXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2Uuc3Rvcnk7XG5cdH1cblxuXHRhc3luYyBjcmVhdGVTdG9yeSh0aXRsZTogc3RyaW5nLCB3b3JsZElkPzogc3RyaW5nKTogUHJvbWlzZTxTdG9yeT4ge1xuXHRcdGlmICh0aGlzLm1vZGUgPT09IFwicmVtb3RlXCIgJiYgKCF0aGlzLnRlbmFudElkIHx8ICF0aGlzLnRlbmFudElkLnRyaW0oKSkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlRlbmFudCBJRCBpcyByZXF1aXJlZFwiKTtcblx0XHR9XG5cblx0XHRjb25zdCBib2R5OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0geyB0aXRsZTogdGl0bGUudHJpbSgpIH07XG5cdFx0aWYgKHdvcmxkSWQpIHtcblx0XHRcdGJvZHkud29ybGRfaWQgPSB3b3JsZElkO1xuXHRcdH1cblxuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgc3Rvcnk6IFN0b3J5IH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRcIi9hcGkvdjEvc3Rvcmllc1wiLFxuXHRcdFx0Ym9keVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnN0b3J5O1xuXHR9XG5cblx0YXN5bmMgY2xvbmVTdG9yeShpZDogc3RyaW5nKTogUHJvbWlzZTxTdG9yeT4ge1xuXHRcdGlmICghdGhpcy50ZW5hbnRJZCB8fCAhdGhpcy50ZW5hbnRJZC50cmltKCkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlRlbmFudCBJRCBpcyByZXF1aXJlZFwiKTtcblx0XHR9XG5cblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHN0b3J5OiBTdG9yeSB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0YC9hcGkvdjEvc3Rvcmllcy8ke2lkfS9jbG9uZWAsXG5cdFx0XHR7fVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnN0b3J5O1xuXHR9XG5cblx0YXN5bmMgZ2V0VGVuYW50KGlkOiBzdHJpbmcpOiBQcm9taXNlPFRlbmFudD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgdGVuYW50OiBUZW5hbnQgfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvdGVuYW50cy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS50ZW5hbnQ7XG5cdH1cblxuXHRhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5yZXF1ZXN0PHsgc3RhdHVzOiBzdHJpbmcgfT4oXCJHRVRcIiwgXCIvaGVhbHRoXCIpO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgdXBkYXRlU3RvcnkoaWQ6IHN0cmluZywgdGl0bGU6IHN0cmluZywgc3RhdHVzPzogc3RyaW5nKTogUHJvbWlzZTxTdG9yeT4ge1xuXHRcdGNvbnN0IGJvZHk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7IHRpdGxlOiB0aXRsZS50cmltKCkgfTtcblx0XHRpZiAoc3RhdHVzKSB7XG5cdFx0XHRib2R5LnN0YXR1cyA9IHN0YXR1cztcblx0XHR9XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBzdG9yeTogU3RvcnkgfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvc3Rvcmllcy8ke2lkfWAsXG5cdFx0XHRib2R5XG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2Uuc3Rvcnk7XG5cdH1cblxuXHRhc3luYyBnZXRTdG9yeVdpdGhIaWVyYXJjaHkoaWQ6IHN0cmluZyk6IFByb21pc2U8U3RvcnlXaXRoSGllcmFyY2h5PiB7XG5cdFx0Y29uc3Qgc3RvcnkgPSBhd2FpdCB0aGlzLmdldFN0b3J5KGlkKTtcblx0XHRjb25zdCBjaGFwdGVycyA9IGF3YWl0IHRoaXMuZ2V0Q2hhcHRlcnMoaWQpO1xuXG5cdFx0Y29uc3QgY2hhcHRlcnNXaXRoQ29udGVudDogQ2hhcHRlcldpdGhDb250ZW50W10gPSBhd2FpdCBQcm9taXNlLmFsbChcblx0XHRcdGNoYXB0ZXJzLm1hcChhc3luYyAoY2hhcHRlcikgPT4ge1xuXHRcdFx0XHRjb25zdCBzY2VuZXMgPSBhd2FpdCB0aGlzLmdldFNjZW5lcyhjaGFwdGVyLmlkKTtcblx0XHRcdFx0Y29uc3Qgc2NlbmVzV2l0aEJlYXRzOiBTY2VuZVdpdGhCZWF0c1tdID0gYXdhaXQgUHJvbWlzZS5hbGwoXG5cdFx0XHRcdFx0c2NlbmVzLm1hcChhc3luYyAoc2NlbmUpID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IGJlYXRzID0gYXdhaXQgdGhpcy5nZXRCZWF0cyhzY2VuZS5pZCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4geyBzY2VuZSwgYmVhdHMgfTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdFx0XHRyZXR1cm4geyBjaGFwdGVyLCBzY2VuZXM6IHNjZW5lc1dpdGhCZWF0cyB9O1xuXHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHN0b3J5LFxuXHRcdFx0Y2hhcHRlcnM6IGNoYXB0ZXJzV2l0aENvbnRlbnQsXG5cdFx0fTtcblx0fVxuXG5cdGFzeW5jIGNyZWF0ZUNoYXB0ZXIoc3RvcnlJZDogc3RyaW5nLCBjaGFwdGVyOiBQYXJ0aWFsPENoYXB0ZXI+KTogUHJvbWlzZTxDaGFwdGVyPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBjaGFwdGVyOiBDaGFwdGVyIH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRcIi9hcGkvdjEvY2hhcHRlcnNcIixcblx0XHRcdHtcblx0XHRcdFx0c3RvcnlfaWQ6IHN0b3J5SWQsXG5cdFx0XHRcdG51bWJlcjogY2hhcHRlci5udW1iZXIsXG5cdFx0XHRcdHRpdGxlOiBjaGFwdGVyLnRpdGxlLFxuXHRcdFx0XHRzdGF0dXM6IGNoYXB0ZXIuc3RhdHVzLFxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0dm9pZCB0aGlzLnB1Ymxpc2hDaGFwdGVyVXBkYXRlKHJlc3BvbnNlLmNoYXB0ZXIuaWQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jaGFwdGVyO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlQ2hhcHRlcihpZDogc3RyaW5nLCBjaGFwdGVyOiBQYXJ0aWFsPENoYXB0ZXI+KTogUHJvbWlzZTxDaGFwdGVyPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBjaGFwdGVyOiBDaGFwdGVyIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2NoYXB0ZXJzLyR7aWR9YCxcblx0XHRcdGNoYXB0ZXJcblx0XHQpO1xuXHRcdHZvaWQgdGhpcy5wdWJsaXNoQ2hhcHRlclVwZGF0ZShyZXNwb25zZS5jaGFwdGVyLmlkKTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuY2hhcHRlcjtcblx0fVxuXG5cdGFzeW5jIGdldENoYXB0ZXJzKHN0b3J5SWQ6IHN0cmluZyk6IFByb21pc2U8Q2hhcHRlcltdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBjaGFwdGVyczogQ2hhcHRlcltdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL3N0b3JpZXMvJHtzdG9yeUlkfS9jaGFwdGVyc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jaGFwdGVycyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldENoYXB0ZXIoaWQ6IHN0cmluZyk6IFByb21pc2U8Q2hhcHRlcj4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgY2hhcHRlcjogQ2hhcHRlciB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9jaGFwdGVycy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jaGFwdGVyO1xuXHR9XG5cblx0YXN5bmMgZGVsZXRlQ2hhcHRlcihpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFwiREVMRVRFXCIsIGAvYXBpL3YxL2NoYXB0ZXJzLyR7aWR9YCk7XG5cdH1cblxuXHRhc3luYyBjcmVhdGVTY2VuZShzY2VuZTogUGFydGlhbDxTY2VuZT4pOiBQcm9taXNlPFNjZW5lPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBzY2VuZTogU2NlbmUgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdFwiL2FwaS92MS9zY2VuZXNcIixcblx0XHRcdHNjZW5lXG5cdFx0KTtcblx0XHR2b2lkIHRoaXMucHVibGlzaFNjZW5lVHJlZShyZXNwb25zZS5zY2VuZS5pZCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnNjZW5lO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlU2NlbmUoaWQ6IHN0cmluZywgc2NlbmU6IFBhcnRpYWw8U2NlbmU+KTogUHJvbWlzZTxTY2VuZT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgc2NlbmU6IFNjZW5lIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL3NjZW5lcy8ke2lkfWAsXG5cdFx0XHRzY2VuZVxuXHRcdCk7XG5cdFx0dm9pZCB0aGlzLnB1Ymxpc2hTY2VuZVRyZWUocmVzcG9uc2Uuc2NlbmUuaWQpO1xuXHRcdHJldHVybiByZXNwb25zZS5zY2VuZTtcblx0fVxuXG5cdGFzeW5jIGdldFNjZW5lcyhjaGFwdGVySWQ6IHN0cmluZyk6IFByb21pc2U8U2NlbmVbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgc2NlbmVzOiBTY2VuZVtdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2NoYXB0ZXJzLyR7Y2hhcHRlcklkfS9zY2VuZXNgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2Uuc2NlbmVzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgZ2V0U2NlbmUoaWQ6IHN0cmluZyk6IFByb21pc2U8U2NlbmU+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHNjZW5lOiBTY2VuZSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9zY2VuZXMvJHtpZH1gXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2Uuc2NlbmU7XG5cdH1cblxuXHRhc3luYyBkZWxldGVTY2VuZShpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFwiREVMRVRFXCIsIGAvYXBpL3YxL3NjZW5lcy8ke2lkfWApO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlQmVhdChiZWF0OiBQYXJ0aWFsPEJlYXQ+KTogUHJvbWlzZTxCZWF0PiB7XG5cdFx0aWYgKCFiZWF0LnNjZW5lX2lkKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJzY2VuZV9pZCBpcyByZXF1aXJlZCB0byBjcmVhdGUgYSBiZWF0XCIpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHBheWxvYWQ6IFBhcnRpYWw8QmVhdD4gPSB7IC4uLmJlYXQgfTtcblxuXHRcdGlmICghcGF5bG9hZC5vcmRlcl9udW0gfHwgcGF5bG9hZC5vcmRlcl9udW0gPD0gMCkge1xuXHRcdFx0Y29uc3QgZXhpc3RpbmdCZWF0cyA9IGF3YWl0IHRoaXMuZ2V0QmVhdHMoYmVhdC5zY2VuZV9pZCk7XG5cdFx0XHRjb25zdCBuZXh0T3JkZXIgPVxuXHRcdFx0XHRleGlzdGluZ0JlYXRzLmxlbmd0aCA+IDBcblx0XHRcdFx0XHQ/IE1hdGgubWF4KC4uLmV4aXN0aW5nQmVhdHMubWFwKChiKSA9PiBiLm9yZGVyX251bSB8fCAwKSkgKyAxXG5cdFx0XHRcdFx0OiAxO1xuXHRcdFx0cGF5bG9hZC5vcmRlcl9udW0gPSBuZXh0T3JkZXI7XG5cdFx0fVxuXG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBiZWF0OiBCZWF0IH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRcIi9hcGkvdjEvYmVhdHNcIixcblx0XHRcdHBheWxvYWRcblx0XHQpO1xuXHRcdHZvaWQgdGhpcy5wdWJsaXNoU2NlbmVUcmVlKHJlc3BvbnNlLmJlYXQuc2NlbmVfaWQpO1xuXHRcdHJldHVybiByZXNwb25zZS5iZWF0O1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlQmVhdChpZDogc3RyaW5nLCBiZWF0OiBQYXJ0aWFsPEJlYXQ+KTogUHJvbWlzZTxCZWF0PiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBiZWF0OiBCZWF0IH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2JlYXRzLyR7aWR9YCxcblx0XHRcdGJlYXRcblx0XHQpO1xuXHRcdHZvaWQgdGhpcy5wdWJsaXNoU2NlbmVUcmVlKHJlc3BvbnNlLmJlYXQuc2NlbmVfaWQpO1xuXHRcdHJldHVybiByZXNwb25zZS5iZWF0O1xuXHR9XG5cblx0YXN5bmMgZ2V0QmVhdHMoc2NlbmVJZDogc3RyaW5nKTogUHJvbWlzZTxCZWF0W10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGJlYXRzOiBCZWF0W10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvc2NlbmVzLyR7c2NlbmVJZH0vYmVhdHNgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuYmVhdHMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRCZWF0KGlkOiBzdHJpbmcpOiBQcm9taXNlPEJlYXQ+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGJlYXQ6IEJlYXQgfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvYmVhdHMvJHtpZH1gXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuYmVhdDtcblx0fVxuXG5cdGFzeW5jIGRlbGV0ZUJlYXQoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcIkRFTEVURVwiLCBgL2FwaS92MS9iZWF0cy8ke2lkfWApO1xuXHR9XG5cblx0Ly8gR2V0IGFsbCB2ZXJzaW9ucyBvZiBhIHN0b3J5IChmb3IgdmVyc2lvbiBoaXN0b3J5KVxuXHRhc3luYyBnZXRTdG9yeVZlcnNpb25zKHJvb3RTdG9yeUlkOiBzdHJpbmcpOiBQcm9taXNlPFN0b3J5W10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHN0b3JpZXM6IFN0b3J5W10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvc3Rvcmllcy8ke3Jvb3RTdG9yeUlkfS92ZXJzaW9uc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5zdG9yaWVzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgZ2V0U2NlbmVzQnlTdG9yeShzdG9yeUlkOiBzdHJpbmcpOiBQcm9taXNlPFNjZW5lW10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHNjZW5lczogU2NlbmVbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9zdG9yaWVzLyR7c3RvcnlJZH0vc2NlbmVzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnNjZW5lcyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIG1vdmVTY2VuZShzY2VuZUlkOiBzdHJpbmcsIGNoYXB0ZXJJZDogc3RyaW5nIHwgbnVsbCk6IFByb21pc2U8U2NlbmU+IHtcblx0XHRjb25zdCBib2R5OiB7IGNoYXB0ZXJfaWQ/OiBzdHJpbmcgfCBudWxsIH0gPSB7fTtcblx0XHRpZiAoY2hhcHRlcklkICE9PSBudWxsKSB7XG5cdFx0XHRib2R5LmNoYXB0ZXJfaWQgPSBjaGFwdGVySWQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGJvZHkuY2hhcHRlcl9pZCA9IG51bGw7XG5cdFx0fVxuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgc2NlbmU6IFNjZW5lIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL3NjZW5lcy8ke3NjZW5lSWR9L21vdmVgLFxuXHRcdFx0Ym9keVxuXHRcdCk7XG5cdFx0dm9pZCB0aGlzLnB1Ymxpc2hTY2VuZVRyZWUocmVzcG9uc2Uuc2NlbmUuaWQpO1xuXHRcdHJldHVybiByZXNwb25zZS5zY2VuZTtcblx0fVxuXG5cdGFzeW5jIGdldEJlYXRzQnlTdG9yeShzdG9yeUlkOiBzdHJpbmcpOiBQcm9taXNlPEJlYXRbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgYmVhdHM6IEJlYXRbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9zdG9yaWVzLyR7c3RvcnlJZH0vYmVhdHNgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuYmVhdHMgfHwgW107XG5cdH1cblxuXHRhc3luYyBtb3ZlQmVhdChiZWF0SWQ6IHN0cmluZywgc2NlbmVJZDogc3RyaW5nKTogUHJvbWlzZTxCZWF0PiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBiZWF0OiBCZWF0IH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2JlYXRzLyR7YmVhdElkfS9tb3ZlYCxcblx0XHRcdHsgc2NlbmVfaWQ6IHNjZW5lSWQgfVxuXHRcdCk7XG5cdFx0dm9pZCB0aGlzLnB1Ymxpc2hTY2VuZVRyZWUocmVzcG9uc2UuYmVhdC5zY2VuZV9pZCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmJlYXQ7XG5cdH1cblxuXHRhc3luYyBnZXRDb250ZW50QmxvY2tzKGNoYXB0ZXJJZDogc3RyaW5nKTogUHJvbWlzZTxDb250ZW50QmxvY2tbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgY29udGVudF9ibG9ja3M6IENvbnRlbnRCbG9ja1tdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2NoYXB0ZXJzLyR7Y2hhcHRlcklkfS9jb250ZW50LWJsb2Nrc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jb250ZW50X2Jsb2NrcyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldENvbnRlbnRCbG9jayhpZDogc3RyaW5nKTogUHJvbWlzZTxDb250ZW50QmxvY2s+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGNvbnRlbnRfYmxvY2s6IENvbnRlbnRCbG9jayB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9jb250ZW50LWJsb2Nrcy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jb250ZW50X2Jsb2NrO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlQ29udGVudEJsb2NrKGNoYXB0ZXJJZDogc3RyaW5nLCBjb250ZW50QmxvY2s6IFBhcnRpYWw8Q29udGVudEJsb2NrPik6IFByb21pc2U8Q29udGVudEJsb2NrPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBjb250ZW50X2Jsb2NrOiBDb250ZW50QmxvY2sgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdGAvYXBpL3YxL2NoYXB0ZXJzLyR7Y2hhcHRlcklkfS9jb250ZW50LWJsb2Nrc2AsXG5cdFx0XHRjb250ZW50QmxvY2tcblx0XHQpO1xuXHRcdHZvaWQgdGhpcy5wdWJsaXNoQ29udGVudEJsb2NrVXBkYXRlKHJlc3BvbnNlLmNvbnRlbnRfYmxvY2suaWQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jb250ZW50X2Jsb2NrO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlQ29udGVudEJsb2NrKGlkOiBzdHJpbmcsIGNvbnRlbnRCbG9jazogUGFydGlhbDxDb250ZW50QmxvY2s+KTogUHJvbWlzZTxDb250ZW50QmxvY2s+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGNvbnRlbnRfYmxvY2s6IENvbnRlbnRCbG9jayB9Pihcblx0XHRcdFwiUFVUXCIsXG5cdFx0XHRgL2FwaS92MS9jb250ZW50LWJsb2Nrcy8ke2lkfWAsXG5cdFx0XHRjb250ZW50QmxvY2tcblx0XHQpO1xuXHRcdHZvaWQgdGhpcy5wdWJsaXNoQ29udGVudEJsb2NrVXBkYXRlKHJlc3BvbnNlLmNvbnRlbnRfYmxvY2suaWQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jb250ZW50X2Jsb2NrO1xuXHR9XG5cblx0YXN5bmMgZGVsZXRlQ29udGVudEJsb2NrKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXCJERUxFVEVcIiwgYC9hcGkvdjEvY29udGVudC1ibG9ja3MvJHtpZH1gKTtcblx0fVxuXG5cdGFzeW5jIGdldENvbnRlbnRBbmNob3JzKGNvbnRlbnRCbG9ja0lkOiBzdHJpbmcpOiBQcm9taXNlPENvbnRlbnRBbmNob3JbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgYW5jaG9yczogQ29udGVudEFuY2hvcltdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2NvbnRlbnQtYmxvY2tzLyR7Y29udGVudEJsb2NrSWR9L2FuY2hvcnNgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuYW5jaG9ycyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldENvbnRlbnRCbG9ja3NCeVNjZW5lKHNjZW5lSWQ6IHN0cmluZyk6IFByb21pc2U8Q29udGVudEJsb2NrW10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGNvbnRlbnRfYmxvY2tzOiBDb250ZW50QmxvY2tbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9zY2VuZXMvJHtzY2VuZUlkfS9jb250ZW50LWJsb2Nrc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jb250ZW50X2Jsb2NrcyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldENvbnRlbnRCbG9ja3NCeUJlYXQoYmVhdElkOiBzdHJpbmcpOiBQcm9taXNlPENvbnRlbnRCbG9ja1tdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBjb250ZW50X2Jsb2NrczogQ29udGVudEJsb2NrW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvYmVhdHMvJHtiZWF0SWR9L2NvbnRlbnQtYmxvY2tzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmNvbnRlbnRfYmxvY2tzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlQ29udGVudEFuY2hvcihjb250ZW50QmxvY2tJZDogc3RyaW5nLCBlbnRpdHlUeXBlOiBzdHJpbmcsIGVudGl0eUlkOiBzdHJpbmcpOiBQcm9taXNlPENvbnRlbnRBbmNob3I+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGFuY2hvcjogQ29udGVudEFuY2hvciB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0YC9hcGkvdjEvY29udGVudC1ibG9ja3MvJHtjb250ZW50QmxvY2tJZH0vYW5jaG9yc2AsXG5cdFx0XHR7XG5cdFx0XHRcdGVudGl0eV90eXBlOiBlbnRpdHlUeXBlLFxuXHRcdFx0XHRlbnRpdHlfaWQ6IGVudGl0eUlkLFxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmFuY2hvcjtcblx0fVxuXG5cdGFzeW5jIGRlbGV0ZUNvbnRlbnRBbmNob3IoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcIkRFTEVURVwiLCBgL2FwaS92MS9jb250ZW50LWFuY2hvcnMvJHtpZH1gKTtcblx0fVxuXG5cdGFzeW5jIGdldFdvcmxkcygpOiBQcm9taXNlPFdvcmxkW10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHdvcmxkczogV29ybGRbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRcIi9hcGkvdjEvd29ybGRzXCJcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS53b3JsZHMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRXb3JsZChpZDogc3RyaW5nKTogUHJvbWlzZTxXb3JsZD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgd29ybGQ6IFdvcmxkIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL3dvcmxkcy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS53b3JsZDtcblx0fVxuXG5cdGFzeW5jIGNyZWF0ZVdvcmxkKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgZ2VucmU6IHN0cmluZyk6IFByb21pc2U8V29ybGQ+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHdvcmxkOiBXb3JsZCB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0XCIvYXBpL3YxL3dvcmxkc1wiLFxuXHRcdFx0e1xuXHRcdFx0XHRuYW1lOiBuYW1lLnRyaW0oKSxcblx0XHRcdFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSxcblx0XHRcdFx0Z2VucmU6IGdlbnJlLnRyaW0oKSxcblx0XHRcdH1cblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS53b3JsZDtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZVdvcmxkKGlkOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgZ2VucmU6IHN0cmluZyk6IFByb21pc2U8V29ybGQ+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHdvcmxkOiBXb3JsZCB9Pihcblx0XHRcdFwiUFVUXCIsXG5cdFx0XHRgL2FwaS92MS93b3JsZHMvJHtpZH1gLFxuXHRcdFx0e1xuXHRcdFx0XHRuYW1lOiBuYW1lLnRyaW0oKSxcblx0XHRcdFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSxcblx0XHRcdFx0Z2VucmU6IGdlbnJlLnRyaW0oKSxcblx0XHRcdH1cblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS53b3JsZDtcblx0fVxuXG5cdGFzeW5jIGdldFJQR1N5c3RlbXMoKTogUHJvbWlzZTxSUEdTeXN0ZW1bXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgcnBnX3N5c3RlbXM6IFJQR1N5c3RlbVtdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdFwiL2FwaS92MS9ycGctc3lzdGVtc1wiXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UucnBnX3N5c3RlbXMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRSUEdTeXN0ZW0oaWQ6IHN0cmluZyk6IFByb21pc2U8UlBHU3lzdGVtPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBycGdfc3lzdGVtOiBSUEdTeXN0ZW0gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvcnBnLXN5c3RlbXMvJHtpZH1gXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UucnBnX3N5c3RlbTtcblx0fVxuXG5cdC8vIENoYXJhY3RlciBtZXRob2RzXG5cdGFzeW5jIGdldENoYXJhY3RlcnMod29ybGRJZDogc3RyaW5nKTogUHJvbWlzZTxDaGFyYWN0ZXJbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgY2hhcmFjdGVyczogQ2hhcmFjdGVyW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvd29ybGRzLyR7d29ybGRJZH0vY2hhcmFjdGVyc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jaGFyYWN0ZXJzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgZ2V0Q2hhcmFjdGVyKGlkOiBzdHJpbmcpOiBQcm9taXNlPENoYXJhY3Rlcj4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgY2hhcmFjdGVyOiBDaGFyYWN0ZXIgfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcmFjdGVycy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jaGFyYWN0ZXI7XG5cdH1cblxuXHRhc3luYyBjcmVhdGVDaGFyYWN0ZXIod29ybGRJZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPENoYXJhY3Rlcj4pOiBQcm9taXNlPENoYXJhY3Rlcj4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgY2hhcmFjdGVyOiBDaGFyYWN0ZXIgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdGAvYXBpL3YxL3dvcmxkcy8ke3dvcmxkSWR9L2NoYXJhY3RlcnNgLFxuXHRcdFx0ZGF0YVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmNoYXJhY3Rlcjtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZUNoYXJhY3RlcihpZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPENoYXJhY3Rlcj4pOiBQcm9taXNlPENoYXJhY3Rlcj4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgY2hhcmFjdGVyOiBDaGFyYWN0ZXIgfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcmFjdGVycy8ke2lkfWAsXG5cdFx0XHRkYXRhXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuY2hhcmFjdGVyO1xuXHR9XG5cblx0YXN5bmMgZGVsZXRlQ2hhcmFjdGVyKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXCJERUxFVEVcIiwgYC9hcGkvdjEvY2hhcmFjdGVycy8ke2lkfWApO1xuXHR9XG5cblx0Ly8gTG9jYXRpb24gbWV0aG9kc1xuXHRhc3luYyBnZXRMb2NhdGlvbnMod29ybGRJZDogc3RyaW5nKTogUHJvbWlzZTxMb2NhdGlvbltdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBsb2NhdGlvbnM6IExvY2F0aW9uW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvd29ybGRzLyR7d29ybGRJZH0vbG9jYXRpb25zYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmxvY2F0aW9ucyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldExvY2F0aW9uKGlkOiBzdHJpbmcpOiBQcm9taXNlPExvY2F0aW9uPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBsb2NhdGlvbjogTG9jYXRpb24gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvbG9jYXRpb25zLyR7aWR9YFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmxvY2F0aW9uO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlTG9jYXRpb24od29ybGRJZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPExvY2F0aW9uPik6IFByb21pc2U8TG9jYXRpb24+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGxvY2F0aW9uOiBMb2NhdGlvbiB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0YC9hcGkvdjEvd29ybGRzLyR7d29ybGRJZH0vbG9jYXRpb25zYCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5sb2NhdGlvbjtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZUxvY2F0aW9uKGlkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8TG9jYXRpb24+KTogUHJvbWlzZTxMb2NhdGlvbj4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgbG9jYXRpb246IExvY2F0aW9uIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2xvY2F0aW9ucy8ke2lkfWAsXG5cdFx0XHRkYXRhXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UubG9jYXRpb247XG5cdH1cblxuXHRhc3luYyBkZWxldGVMb2NhdGlvbihpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFwiREVMRVRFXCIsIGAvYXBpL3YxL2xvY2F0aW9ucy8ke2lkfWApO1xuXHR9XG5cblx0Ly8gQXJ0aWZhY3QgbWV0aG9kc1xuXHRhc3luYyBnZXRBcnRpZmFjdHMod29ybGRJZDogc3RyaW5nKTogUHJvbWlzZTxBcnRpZmFjdFtdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBhcnRpZmFjdHM6IEFydGlmYWN0W10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvd29ybGRzLyR7d29ybGRJZH0vYXJ0aWZhY3RzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmFydGlmYWN0cyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldEFydGlmYWN0KGlkOiBzdHJpbmcpOiBQcm9taXNlPEFydGlmYWN0PiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBhcnRpZmFjdDogQXJ0aWZhY3QgfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvYXJ0aWZhY3RzLyR7aWR9YFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmFydGlmYWN0O1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlQXJ0aWZhY3Qod29ybGRJZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPEFydGlmYWN0Pik6IFByb21pc2U8QXJ0aWZhY3Q+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGFydGlmYWN0OiBBcnRpZmFjdCB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0YC9hcGkvdjEvd29ybGRzLyR7d29ybGRJZH0vYXJ0aWZhY3RzYCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5hcnRpZmFjdDtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZUFydGlmYWN0KGlkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8QXJ0aWZhY3Q+KTogUHJvbWlzZTxBcnRpZmFjdD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgYXJ0aWZhY3Q6IEFydGlmYWN0IH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2FydGlmYWN0cy8ke2lkfWAsXG5cdFx0XHRkYXRhXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuYXJ0aWZhY3Q7XG5cdH1cblxuXHRhc3luYyBkZWxldGVBcnRpZmFjdChpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFwiREVMRVRFXCIsIGAvYXBpL3YxL2FydGlmYWN0cy8ke2lkfWApO1xuXHR9XG5cblx0Ly8gRXZlbnQgbWV0aG9kc1xuXHRhc3luYyBnZXRFdmVudHMod29ybGRJZDogc3RyaW5nKTogUHJvbWlzZTxXb3JsZEV2ZW50W10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGV2ZW50czogV29ybGRFdmVudFtdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL3dvcmxkcy8ke3dvcmxkSWR9L2V2ZW50c2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5ldmVudHMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRFdmVudChpZDogc3RyaW5nKTogUHJvbWlzZTxXb3JsZEV2ZW50PiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBldmVudDogV29ybGRFdmVudCB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9ldmVudHMvJHtpZH1gXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuZXZlbnQ7XG5cdH1cblxuXHRhc3luYyBjcmVhdGVFdmVudCh3b3JsZElkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8V29ybGRFdmVudD4pOiBQcm9taXNlPFdvcmxkRXZlbnQ+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGV2ZW50OiBXb3JsZEV2ZW50IH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRgL2FwaS92MS93b3JsZHMvJHt3b3JsZElkfS9ldmVudHNgLFxuXHRcdFx0ZGF0YVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmV2ZW50O1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlRXZlbnQoaWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxXb3JsZEV2ZW50Pik6IFByb21pc2U8V29ybGRFdmVudD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgZXZlbnQ6IFdvcmxkRXZlbnQgfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvZXZlbnRzLyR7aWR9YCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5ldmVudDtcblx0fVxuXG5cdGFzeW5jIGRlbGV0ZUV2ZW50KGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXCJERUxFVEVcIiwgYC9hcGkvdjEvZXZlbnRzLyR7aWR9YCk7XG5cdH1cblxuXHRhc3luYyBtb3ZlRXZlbnQoaWQ6IHN0cmluZywgcGFyZW50SWQ6IHN0cmluZyB8IG51bGwpOiBQcm9taXNlPFdvcmxkRXZlbnQ+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGV2ZW50OiBXb3JsZEV2ZW50IH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2V2ZW50cy8ke2lkfS9tb3ZlYCxcblx0XHRcdHsgcGFyZW50X2lkOiBwYXJlbnRJZCB9XG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuZXZlbnQ7XG5cdH1cblxuXHQvLyBUcmFpdCBtZXRob2RzXG5cdGFzeW5jIGdldFRyYWl0cygpOiBQcm9taXNlPFRyYWl0W10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHRyYWl0czogVHJhaXRbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRcIi9hcGkvdjEvdHJhaXRzXCJcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS50cmFpdHMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRUcmFpdChpZDogc3RyaW5nKTogUHJvbWlzZTxUcmFpdD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgdHJhaXQ6IFRyYWl0IH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL3RyYWl0cy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS50cmFpdDtcblx0fVxuXG5cdGFzeW5jIGNyZWF0ZVRyYWl0KGRhdGE6IFBhcnRpYWw8VHJhaXQ+KTogUHJvbWlzZTxUcmFpdD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgdHJhaXQ6IFRyYWl0IH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRcIi9hcGkvdjEvdHJhaXRzXCIsXG5cdFx0XHRkYXRhXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UudHJhaXQ7XG5cdH1cblxuXHRhc3luYyB1cGRhdGVUcmFpdChpZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPFRyYWl0Pik6IFByb21pc2U8VHJhaXQ+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHRyYWl0OiBUcmFpdCB9Pihcblx0XHRcdFwiUFVUXCIsXG5cdFx0XHRgL2FwaS92MS90cmFpdHMvJHtpZH1gLFxuXHRcdFx0ZGF0YVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnRyYWl0O1xuXHR9XG5cblx0YXN5bmMgZGVsZXRlVHJhaXQoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcIkRFTEVURVwiLCBgL2FwaS92MS90cmFpdHMvJHtpZH1gKTtcblx0fVxuXG5cdC8vIEFyY2hldHlwZSBtZXRob2RzXG5cdGFzeW5jIGdldEFyY2hldHlwZXMoKTogUHJvbWlzZTxBcmNoZXR5cGVbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgYXJjaGV0eXBlczogQXJjaGV0eXBlW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0XCIvYXBpL3YxL2FyY2hldHlwZXNcIlxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmFyY2hldHlwZXMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRBcmNoZXR5cGUoaWQ6IHN0cmluZyk6IFByb21pc2U8QXJjaGV0eXBlPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBhcmNoZXR5cGU6IEFyY2hldHlwZSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9hcmNoZXR5cGVzLyR7aWR9YFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmFyY2hldHlwZTtcblx0fVxuXG5cdGFzeW5jIGNyZWF0ZUFyY2hldHlwZShkYXRhOiBQYXJ0aWFsPEFyY2hldHlwZT4pOiBQcm9taXNlPEFyY2hldHlwZT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgYXJjaGV0eXBlOiBBcmNoZXR5cGUgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdFwiL2FwaS92MS9hcmNoZXR5cGVzXCIsXG5cdFx0XHRkYXRhXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuYXJjaGV0eXBlO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlQXJjaGV0eXBlKGlkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8QXJjaGV0eXBlPik6IFByb21pc2U8QXJjaGV0eXBlPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBhcmNoZXR5cGU6IEFyY2hldHlwZSB9Pihcblx0XHRcdFwiUFVUXCIsXG5cdFx0XHRgL2FwaS92MS9hcmNoZXR5cGVzLyR7aWR9YCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5hcmNoZXR5cGU7XG5cdH1cblxuXHRhc3luYyBkZWxldGVBcmNoZXR5cGUoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcIkRFTEVURVwiLCBgL2FwaS92MS9hcmNoZXR5cGVzLyR7aWR9YCk7XG5cdH1cblxuXHRhc3luYyBnZXRBcmNoZXR5cGVUcmFpdHMoYXJjaGV0eXBlSWQ6IHN0cmluZyk6IFByb21pc2U8QXJjaGV0eXBlVHJhaXRbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgYXJjaGV0eXBlX3RyYWl0czogQXJjaGV0eXBlVHJhaXRbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9hcmNoZXR5cGVzLyR7YXJjaGV0eXBlSWR9L3RyYWl0c2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5hcmNoZXR5cGVfdHJhaXRzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgYWRkQXJjaGV0eXBlVHJhaXQoYXJjaGV0eXBlSWQ6IHN0cmluZywgdHJhaXRJZDogc3RyaW5nLCBkZWZhdWx0VmFsdWU/OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdGAvYXBpL3YxL2FyY2hldHlwZXMvJHthcmNoZXR5cGVJZH0vdHJhaXRzYCxcblx0XHRcdHtcblx0XHRcdFx0dHJhaXRfaWQ6IHRyYWl0SWQsXG5cdFx0XHRcdGRlZmF1bHRfdmFsdWU6IGRlZmF1bHRWYWx1ZSxcblx0XHRcdH1cblx0XHQpO1xuXHR9XG5cblx0YXN5bmMgcmVtb3ZlQXJjaGV0eXBlVHJhaXQoYXJjaGV0eXBlSWQ6IHN0cmluZywgdHJhaXRJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFxuXHRcdFx0XCJERUxFVEVcIixcblx0XHRcdGAvYXBpL3YxL2FyY2hldHlwZXMvJHthcmNoZXR5cGVJZH0vdHJhaXRzLyR7dHJhaXRJZH1gXG5cdFx0KTtcblx0fVxuXG5cdC8vIEZhY3Rpb24gbWV0aG9kc1xuXHRhc3luYyBnZXRGYWN0aW9ucyh3b3JsZElkOiBzdHJpbmcpOiBQcm9taXNlPEZhY3Rpb25bXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgZmFjdGlvbnM6IEZhY3Rpb25bXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS93b3JsZHMvJHt3b3JsZElkfS9mYWN0aW9uc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5mYWN0aW9ucyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldEZhY3Rpb24oaWQ6IHN0cmluZyk6IFByb21pc2U8RmFjdGlvbj4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgZmFjdGlvbjogRmFjdGlvbiB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9mYWN0aW9ucy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5mYWN0aW9uO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlRmFjdGlvbih3b3JsZElkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8RmFjdGlvbj4pOiBQcm9taXNlPEZhY3Rpb24+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGZhY3Rpb246IEZhY3Rpb24gfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdGAvYXBpL3YxL3dvcmxkcy8ke3dvcmxkSWR9L2ZhY3Rpb25zYCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5mYWN0aW9uO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlRmFjdGlvbihpZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPEZhY3Rpb24+KTogUHJvbWlzZTxGYWN0aW9uPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBmYWN0aW9uOiBGYWN0aW9uIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2ZhY3Rpb25zLyR7aWR9YCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5mYWN0aW9uO1xuXHR9XG5cblx0YXN5bmMgZGVsZXRlRmFjdGlvbihpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFwiREVMRVRFXCIsIGAvYXBpL3YxL2ZhY3Rpb25zLyR7aWR9YCk7XG5cdH1cblxuXHRhc3luYyBnZXRGYWN0aW9uQ2hpbGRyZW4oaWQ6IHN0cmluZyk6IFByb21pc2U8RmFjdGlvbltdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBmYWN0aW9uczogRmFjdGlvbltdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2ZhY3Rpb25zLyR7aWR9L2NoaWxkcmVuYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmZhY3Rpb25zIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgZ2V0RmFjdGlvblJlZmVyZW5jZXMoZmFjdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPEZhY3Rpb25SZWZlcmVuY2VbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgcmVmZXJlbmNlczogRmFjdGlvblJlZmVyZW5jZVtdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2ZhY3Rpb25zLyR7ZmFjdGlvbklkfS9yZWZlcmVuY2VzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnJlZmVyZW5jZXMgfHwgW107XG5cdH1cblxuXHRhc3luYyBhZGRGYWN0aW9uUmVmZXJlbmNlKGZhY3Rpb25JZDogc3RyaW5nLCBlbnRpdHlUeXBlOiBzdHJpbmcsIGVudGl0eUlkOiBzdHJpbmcsIHJvbGU/OiBzdHJpbmcsIG5vdGVzPzogc3RyaW5nKTogUHJvbWlzZTxGYWN0aW9uUmVmZXJlbmNlPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyByZWZlcmVuY2U6IEZhY3Rpb25SZWZlcmVuY2UgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdGAvYXBpL3YxL2ZhY3Rpb25zLyR7ZmFjdGlvbklkfS9yZWZlcmVuY2VzYCxcblx0XHRcdHtcblx0XHRcdFx0ZW50aXR5X3R5cGU6IGVudGl0eVR5cGUsXG5cdFx0XHRcdGVudGl0eV9pZDogZW50aXR5SWQsXG5cdFx0XHRcdHJvbGU6IHJvbGUsXG5cdFx0XHRcdG5vdGVzOiBub3Rlcyxcblx0XHRcdH1cblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5yZWZlcmVuY2U7XG5cdH1cblxuXHRhc3luYyB1cGRhdGVGYWN0aW9uUmVmZXJlbmNlKGlkOiBzdHJpbmcsIHJvbGU/OiBzdHJpbmcsIG5vdGVzPzogc3RyaW5nKTogUHJvbWlzZTxGYWN0aW9uUmVmZXJlbmNlPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyByZWZlcmVuY2U6IEZhY3Rpb25SZWZlcmVuY2UgfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvZmFjdGlvbi1yZWZlcmVuY2VzLyR7aWR9YCxcblx0XHRcdHtcblx0XHRcdFx0cm9sZTogcm9sZSxcblx0XHRcdFx0bm90ZXM6IG5vdGVzLFxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnJlZmVyZW5jZTtcblx0fVxuXG5cdGFzeW5jIHJlbW92ZUZhY3Rpb25SZWZlcmVuY2UoZmFjdGlvbklkOiBzdHJpbmcsIGVudGl0eVR5cGU6IHN0cmluZywgZW50aXR5SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcblx0XHRcdFwiREVMRVRFXCIsXG5cdFx0XHRgL2FwaS92MS9mYWN0aW9ucy8ke2ZhY3Rpb25JZH0vcmVmZXJlbmNlcy8ke2VudGl0eVR5cGV9LyR7ZW50aXR5SWR9YFxuXHRcdCk7XG5cdH1cblxuXHQvLyBMb3JlIG1ldGhvZHNcblx0YXN5bmMgZ2V0TG9yZXMod29ybGRJZDogc3RyaW5nKTogUHJvbWlzZTxMb3JlW10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGxvcmVzOiBMb3JlW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvd29ybGRzLyR7d29ybGRJZH0vbG9yZXNgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UubG9yZXMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRMb3JlKGlkOiBzdHJpbmcpOiBQcm9taXNlPExvcmU+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGxvcmU6IExvcmUgfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvbG9yZXMvJHtpZH1gXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UubG9yZTtcblx0fVxuXG5cdGFzeW5jIGNyZWF0ZUxvcmUod29ybGRJZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPExvcmU+KTogUHJvbWlzZTxMb3JlPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBsb3JlOiBMb3JlIH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRgL2FwaS92MS93b3JsZHMvJHt3b3JsZElkfS9sb3Jlc2AsXG5cdFx0XHRkYXRhXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UubG9yZTtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZUxvcmUoaWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxMb3JlPik6IFByb21pc2U8TG9yZT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgbG9yZTogTG9yZSB9Pihcblx0XHRcdFwiUFVUXCIsXG5cdFx0XHRgL2FwaS92MS9sb3Jlcy8ke2lkfWAsXG5cdFx0XHRkYXRhXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UubG9yZTtcblx0fVxuXG5cdGFzeW5jIGRlbGV0ZUxvcmUoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcIkRFTEVURVwiLCBgL2FwaS92MS9sb3Jlcy8ke2lkfWApO1xuXHR9XG5cblx0YXN5bmMgZ2V0TG9yZUNoaWxkcmVuKGlkOiBzdHJpbmcpOiBQcm9taXNlPExvcmVbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgbG9yZXM6IExvcmVbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9sb3Jlcy8ke2lkfS9jaGlsZHJlbmBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5sb3JlcyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldExvcmVSZWZlcmVuY2VzKGxvcmVJZDogc3RyaW5nKTogUHJvbWlzZTxMb3JlUmVmZXJlbmNlW10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHJlZmVyZW5jZXM6IExvcmVSZWZlcmVuY2VbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9sb3Jlcy8ke2xvcmVJZH0vcmVmZXJlbmNlc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5yZWZlcmVuY2VzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgYWRkTG9yZVJlZmVyZW5jZShsb3JlSWQ6IHN0cmluZywgZW50aXR5VHlwZTogc3RyaW5nLCBlbnRpdHlJZDogc3RyaW5nLCByZWxhdGlvbnNoaXBUeXBlPzogc3RyaW5nLCBub3Rlcz86IHN0cmluZyk6IFByb21pc2U8TG9yZVJlZmVyZW5jZT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgcmVmZXJlbmNlOiBMb3JlUmVmZXJlbmNlIH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRgL2FwaS92MS9sb3Jlcy8ke2xvcmVJZH0vcmVmZXJlbmNlc2AsXG5cdFx0XHR7XG5cdFx0XHRcdGVudGl0eV90eXBlOiBlbnRpdHlUeXBlLFxuXHRcdFx0XHRlbnRpdHlfaWQ6IGVudGl0eUlkLFxuXHRcdFx0XHRyZWxhdGlvbnNoaXBfdHlwZTogcmVsYXRpb25zaGlwVHlwZSxcblx0XHRcdFx0bm90ZXM6IG5vdGVzLFxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnJlZmVyZW5jZTtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZUxvcmVSZWZlcmVuY2UoaWQ6IHN0cmluZywgcmVsYXRpb25zaGlwVHlwZT86IHN0cmluZywgbm90ZXM/OiBzdHJpbmcpOiBQcm9taXNlPExvcmVSZWZlcmVuY2U+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHJlZmVyZW5jZTogTG9yZVJlZmVyZW5jZSB9Pihcblx0XHRcdFwiUFVUXCIsXG5cdFx0XHRgL2FwaS92MS9sb3JlLXJlZmVyZW5jZXMvJHtpZH1gLFxuXHRcdFx0e1xuXHRcdFx0XHRyZWxhdGlvbnNoaXBfdHlwZTogcmVsYXRpb25zaGlwVHlwZSxcblx0XHRcdFx0bm90ZXM6IG5vdGVzLFxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnJlZmVyZW5jZTtcblx0fVxuXG5cdGFzeW5jIHJlbW92ZUxvcmVSZWZlcmVuY2UobG9yZUlkOiBzdHJpbmcsIGVudGl0eVR5cGU6IHN0cmluZywgZW50aXR5SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcblx0XHRcdFwiREVMRVRFXCIsXG5cdFx0XHRgL2FwaS92MS9sb3Jlcy8ke2xvcmVJZH0vcmVmZXJlbmNlcy8ke2VudGl0eVR5cGV9LyR7ZW50aXR5SWR9YFxuXHRcdCk7XG5cdH1cblxuXHQvLyBDaGFyYWN0ZXIgVHJhaXRzIG1ldGhvZHNcblx0YXN5bmMgZ2V0Q2hhcmFjdGVyVHJhaXRzKGNoYXJhY3RlcklkOiBzdHJpbmcpOiBQcm9taXNlPENoYXJhY3RlclRyYWl0W10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGNoYXJhY3Rlcl90cmFpdHM6IENoYXJhY3RlclRyYWl0W10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcmFjdGVycy8ke2NoYXJhY3RlcklkfS90cmFpdHNgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuY2hhcmFjdGVyX3RyYWl0cyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGFkZENoYXJhY3RlclRyYWl0KGNoYXJhY3RlcklkOiBzdHJpbmcsIHRyYWl0SWQ6IHN0cmluZywgdmFsdWU/OiBzdHJpbmcsIG5vdGVzPzogc3RyaW5nKTogUHJvbWlzZTxDaGFyYWN0ZXJUcmFpdD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgY2hhcmFjdGVyX3RyYWl0OiBDaGFyYWN0ZXJUcmFpdCB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcmFjdGVycy8ke2NoYXJhY3RlcklkfS90cmFpdHNgLFxuXHRcdFx0e1xuXHRcdFx0XHR0cmFpdF9pZDogdHJhaXRJZCxcblx0XHRcdFx0dmFsdWU6IHZhbHVlLFxuXHRcdFx0XHRub3Rlczogbm90ZXMsXG5cdFx0XHR9XG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuY2hhcmFjdGVyX3RyYWl0O1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlQ2hhcmFjdGVyVHJhaXQoY2hhcmFjdGVySWQ6IHN0cmluZywgdHJhaXRJZDogc3RyaW5nLCB2YWx1ZT86IHN0cmluZywgbm90ZXM/OiBzdHJpbmcpOiBQcm9taXNlPENoYXJhY3RlclRyYWl0PiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBjaGFyYWN0ZXJfdHJhaXQ6IENoYXJhY3RlclRyYWl0IH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2NoYXJhY3RlcnMvJHtjaGFyYWN0ZXJJZH0vdHJhaXRzLyR7dHJhaXRJZH1gLFxuXHRcdFx0e1xuXHRcdFx0XHR2YWx1ZTogdmFsdWUsXG5cdFx0XHRcdG5vdGVzOiBub3Rlcyxcblx0XHRcdH1cblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jaGFyYWN0ZXJfdHJhaXQ7XG5cdH1cblxuXHRhc3luYyByZW1vdmVDaGFyYWN0ZXJUcmFpdChjaGFyYWN0ZXJJZDogc3RyaW5nLCB0cmFpdElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXG5cdFx0XHRcIkRFTEVURVwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcmFjdGVycy8ke2NoYXJhY3RlcklkfS90cmFpdHMvJHt0cmFpdElkfWBcblx0XHQpO1xuXHR9XG5cblx0Ly8gQ2hhcmFjdGVyIEV2ZW50cyBtZXRob2RzXG5cdGFzeW5jIGdldENoYXJhY3RlckV2ZW50cyhjaGFyYWN0ZXJJZDogc3RyaW5nKTogUHJvbWlzZTxFdmVudENoYXJhY3RlcltdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBldmVudF9jaGFyYWN0ZXJzOiBFdmVudENoYXJhY3RlcltdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2NoYXJhY3RlcnMvJHtjaGFyYWN0ZXJJZH0vZXZlbnRzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmV2ZW50X2NoYXJhY3RlcnMgfHwgW107XG5cdH1cblxuXHQvLyBDaGFyYWN0ZXIgUmVsYXRpb25zaGlwcyBtZXRob2RzXG5cdGFzeW5jIGdldENoYXJhY3RlclJlbGF0aW9uc2hpcHMoY2hhcmFjdGVySWQ6IHN0cmluZyk6IFByb21pc2U8Q2hhcmFjdGVyUmVsYXRpb25zaGlwW10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHJlbGF0aW9uc2hpcHM6IENoYXJhY3RlclJlbGF0aW9uc2hpcFtdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2NoYXJhY3RlcnMvJHtjaGFyYWN0ZXJJZH0vcmVsYXRpb25zaGlwc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5yZWxhdGlvbnNoaXBzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlQ2hhcmFjdGVyUmVsYXRpb25zaGlwKGNoYXJhY3RlcklkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8Q2hhcmFjdGVyUmVsYXRpb25zaGlwPik6IFByb21pc2U8Q2hhcmFjdGVyUmVsYXRpb25zaGlwPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyByZWxhdGlvbnNoaXA6IENoYXJhY3RlclJlbGF0aW9uc2hpcCB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcmFjdGVycy8ke2NoYXJhY3RlcklkfS9yZWxhdGlvbnNoaXBzYCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5yZWxhdGlvbnNoaXA7XG5cdH1cblxuXHRhc3luYyB1cGRhdGVDaGFyYWN0ZXJSZWxhdGlvbnNoaXAoaWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxDaGFyYWN0ZXJSZWxhdGlvbnNoaXA+KTogUHJvbWlzZTxDaGFyYWN0ZXJSZWxhdGlvbnNoaXA+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHJlbGF0aW9uc2hpcDogQ2hhcmFjdGVyUmVsYXRpb25zaGlwIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2NoYXJhY3Rlci1yZWxhdGlvbnNoaXBzLyR7aWR9YCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5yZWxhdGlvbnNoaXA7XG5cdH1cblxuXHRhc3luYyBkZWxldGVDaGFyYWN0ZXJSZWxhdGlvbnNoaXAoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcIkRFTEVURVwiLCBgL2FwaS92MS9jaGFyYWN0ZXItcmVsYXRpb25zaGlwcy8ke2lkfWApO1xuXHR9XG5cblx0Ly8gRXZlbnQgQ2hhcmFjdGVycy9SZWZlcmVuY2VzIG1ldGhvZHNcblx0YXN5bmMgZ2V0RXZlbnRDaGFyYWN0ZXJzKGV2ZW50SWQ6IHN0cmluZyk6IFByb21pc2U8RXZlbnRDaGFyYWN0ZXJbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgZXZlbnRfY2hhcmFjdGVyczogRXZlbnRDaGFyYWN0ZXJbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9ldmVudHMvJHtldmVudElkfS9jaGFyYWN0ZXJzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmV2ZW50X2NoYXJhY3RlcnMgfHwgW107XG5cdH1cblxuXHRhc3luYyBhZGRFdmVudENoYXJhY3RlcihldmVudElkOiBzdHJpbmcsIGNoYXJhY3RlcklkOiBzdHJpbmcsIHJvbGU/OiBzdHJpbmcpOiBQcm9taXNlPEV2ZW50Q2hhcmFjdGVyPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBldmVudF9jaGFyYWN0ZXI6IEV2ZW50Q2hhcmFjdGVyIH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRgL2FwaS92MS9ldmVudHMvJHtldmVudElkfS9jaGFyYWN0ZXJzYCxcblx0XHRcdHtcblx0XHRcdFx0Y2hhcmFjdGVyX2lkOiBjaGFyYWN0ZXJJZCxcblx0XHRcdFx0cm9sZTogcm9sZSxcblx0XHRcdH1cblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5ldmVudF9jaGFyYWN0ZXI7XG5cdH1cblxuXHRhc3luYyByZW1vdmVFdmVudENoYXJhY3RlcihldmVudElkOiBzdHJpbmcsIGNoYXJhY3RlcklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXG5cdFx0XHRcIkRFTEVURVwiLFxuXHRcdFx0YC9hcGkvdjEvZXZlbnRzLyR7ZXZlbnRJZH0vY2hhcmFjdGVycy8ke2NoYXJhY3RlcklkfWBcblx0XHQpO1xuXHR9XG5cblx0YXN5bmMgZ2V0RXZlbnRSZWZlcmVuY2VzKGV2ZW50SWQ6IHN0cmluZyk6IFByb21pc2U8RXZlbnRSZWZlcmVuY2VbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgcmVmZXJlbmNlczogRXZlbnRSZWZlcmVuY2VbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9ldmVudHMvJHtldmVudElkfS9yZWZlcmVuY2VzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnJlZmVyZW5jZXMgfHwgW107XG5cdH1cblxuXHRhc3luYyBhZGRFdmVudFJlZmVyZW5jZShldmVudElkOiBzdHJpbmcsIGVudGl0eVR5cGU6IHN0cmluZywgZW50aXR5SWQ6IHN0cmluZywgcmVsYXRpb25zaGlwVHlwZT86IHN0cmluZywgbm90ZXM/OiBzdHJpbmcpOiBQcm9taXNlPEV2ZW50UmVmZXJlbmNlPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyByZWZlcmVuY2U6IEV2ZW50UmVmZXJlbmNlIH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRgL2FwaS92MS9ldmVudHMvJHtldmVudElkfS9yZWZlcmVuY2VzYCxcblx0XHRcdHtcblx0XHRcdFx0ZW50aXR5X3R5cGU6IGVudGl0eVR5cGUsXG5cdFx0XHRcdGVudGl0eV9pZDogZW50aXR5SWQsXG5cdFx0XHRcdHJlbGF0aW9uc2hpcF90eXBlOiByZWxhdGlvbnNoaXBUeXBlLFxuXHRcdFx0XHRub3Rlczogbm90ZXMsXG5cdFx0XHR9XG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UucmVmZXJlbmNlO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlRXZlbnRSZWZlcmVuY2UoaWQ6IHN0cmluZywgcmVsYXRpb25zaGlwVHlwZT86IHN0cmluZywgbm90ZXM/OiBzdHJpbmcpOiBQcm9taXNlPEV2ZW50UmVmZXJlbmNlPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyByZWZlcmVuY2U6IEV2ZW50UmVmZXJlbmNlIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2V2ZW50LXJlZmVyZW5jZXMvJHtpZH1gLFxuXHRcdFx0e1xuXHRcdFx0XHRyZWxhdGlvbnNoaXBfdHlwZTogcmVsYXRpb25zaGlwVHlwZSxcblx0XHRcdFx0bm90ZXM6IG5vdGVzLFxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnJlZmVyZW5jZTtcblx0fVxuXG5cdGFzeW5jIHJlbW92ZUV2ZW50UmVmZXJlbmNlKGV2ZW50SWQ6IHN0cmluZywgZW50aXR5VHlwZTogc3RyaW5nLCBlbnRpdHlJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFxuXHRcdFx0XCJERUxFVEVcIixcblx0XHRcdGAvYXBpL3YxL2V2ZW50cy8ke2V2ZW50SWR9L3JlZmVyZW5jZXMvJHtlbnRpdHlUeXBlfS8ke2VudGl0eUlkfWBcblx0XHQpO1xuXHR9XG5cblx0Ly8gU2NlbmUgUmVmZXJlbmNlcyBtZXRob2RzXG5cdGFzeW5jIGdldFNjZW5lUmVmZXJlbmNlcyhzY2VuZUlkOiBzdHJpbmcpOiBQcm9taXNlPFNjZW5lUmVmZXJlbmNlW10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHJlZmVyZW5jZXM6IFNjZW5lUmVmZXJlbmNlW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvc2NlbmVzLyR7c2NlbmVJZH0vcmVmZXJlbmNlc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5yZWZlcmVuY2VzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgYWRkU2NlbmVSZWZlcmVuY2Uoc2NlbmVJZDogc3RyaW5nLCBlbnRpdHlUeXBlOiBzdHJpbmcsIGVudGl0eUlkOiBzdHJpbmcpOiBQcm9taXNlPFNjZW5lUmVmZXJlbmNlPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyByZWZlcmVuY2U6IFNjZW5lUmVmZXJlbmNlIH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRgL2FwaS92MS9zY2VuZXMvJHtzY2VuZUlkfS9yZWZlcmVuY2VzYCxcblx0XHRcdHtcblx0XHRcdFx0ZW50aXR5X3R5cGU6IGVudGl0eVR5cGUsXG5cdFx0XHRcdGVudGl0eV9pZDogZW50aXR5SWQsXG5cdFx0XHR9XG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UucmVmZXJlbmNlO1xuXHR9XG5cblx0YXN5bmMgcmVtb3ZlU2NlbmVSZWZlcmVuY2Uoc2NlbmVJZDogc3RyaW5nLCBlbnRpdHlUeXBlOiBzdHJpbmcsIGVudGl0eUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXG5cdFx0XHRcIkRFTEVURVwiLFxuXHRcdFx0YC9hcGkvdjEvc2NlbmVzLyR7c2NlbmVJZH0vcmVmZXJlbmNlcy8ke2VudGl0eVR5cGV9LyR7ZW50aXR5SWR9YFxuXHRcdCk7XG5cdH1cblxuXHQvLyBUaW1lbGluZSBtZXRob2RzXG5cdGFzeW5jIGdldFRpbWVsaW5lKHdvcmxkSWQ6IHN0cmluZywgZnJvbVBvcz86IG51bWJlciwgdG9Qb3M/OiBudW1iZXIpOiBQcm9taXNlPFdvcmxkRXZlbnRbXT4ge1xuXHRcdGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuXHRcdGlmIChmcm9tUG9zICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdHF1ZXJ5UGFyYW1zLmFwcGVuZChcImZyb21fcG9zXCIsIGZyb21Qb3MudG9TdHJpbmcoKSk7XG5cdFx0fVxuXHRcdGlmICh0b1BvcyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRxdWVyeVBhcmFtcy5hcHBlbmQoXCJ0b19wb3NcIiwgdG9Qb3MudG9TdHJpbmcoKSk7XG5cdFx0fVxuXHRcdGNvbnN0IHF1ZXJ5U3RyaW5nID0gcXVlcnlQYXJhbXMudG9TdHJpbmcoKTtcblx0XHRjb25zdCBlbmRwb2ludCA9IGAvYXBpL3YxL3dvcmxkcy8ke3dvcmxkSWR9L3RpbWVsaW5lJHtxdWVyeVN0cmluZyA/IGA/JHtxdWVyeVN0cmluZ31gIDogXCJcIn1gO1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgZXZlbnRzOiBXb3JsZEV2ZW50W10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0ZW5kcG9pbnRcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5ldmVudHMgfHwgW107XG5cdH1cblxuXHQvLyBXb3JsZCBUaW1lQ29uZmlnIG1ldGhvZHNcblx0YXN5bmMgdXBkYXRlV29ybGRUaW1lQ29uZmlnKHdvcmxkSWQ6IHN0cmluZywgdGltZUNvbmZpZzogVGltZUNvbmZpZyk6IFByb21pc2U8V29ybGQ+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHdvcmxkOiBXb3JsZCB9Pihcblx0XHRcdFwiUFVUXCIsXG5cdFx0XHRgL2FwaS92MS93b3JsZHMvJHt3b3JsZElkfS90aW1lLWNvbmZpZ2AsXG5cdFx0XHR0aW1lQ29uZmlnXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2Uud29ybGQ7XG5cdH1cblxuXHRwcml2YXRlIGlzQXV0b1N5bmNFbmFibGVkKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLmF1dG9TeW5jT25BcGlVcGRhdGVzO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBwdWJsaXNoQ2hhcHRlclVwZGF0ZShjaGFwdGVySWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICghdGhpcy5pc0F1dG9TeW5jRW5hYmxlZCgpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGNoYXB0ZXIgPSBhd2FpdCB0aGlzLmdldENoYXB0ZXIoY2hhcHRlcklkKTtcblx0XHRcdGNvbnN0IHN0b3J5ID0gYXdhaXQgdGhpcy5nZXRTdG9yeShjaGFwdGVyLnN0b3J5X2lkKTtcblx0XHRcdGNvbnN0IHNjZW5lcyA9IGF3YWl0IHRoaXMuZ2V0U2NlbmVzKGNoYXB0ZXJJZCk7XG5cdFx0XHRjb25zdCBzY2VuZXNXaXRoQmVhdHM6IFNjZW5lV2l0aEJlYXRzW10gPSBhd2FpdCBQcm9taXNlLmFsbChcblx0XHRcdFx0c2NlbmVzLm1hcChhc3luYyAoc2NlbmUpID0+IHtcblx0XHRcdFx0XHRjb25zdCBiZWF0cyA9IGF3YWl0IHRoaXMuZ2V0QmVhdHMoc2NlbmUuaWQpO1xuXHRcdFx0XHRcdHJldHVybiB7IHNjZW5lLCBiZWF0cyB9O1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0XHRcdGNvbnN0IGNvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja3MoY2hhcHRlcklkKTtcblx0XHRcdGNvbnN0IGNvbnRlbnRCbG9ja1JlZnM6IENvbnRlbnRBbmNob3JbXSA9IFtdO1xuXHRcdFx0Zm9yIChjb25zdCBibG9jayBvZiBjb250ZW50QmxvY2tzKSB7XG5cdFx0XHRcdGNvbnN0IHJlZnMgPSBhd2FpdCB0aGlzLmdldENvbnRlbnRBbmNob3JzKGJsb2NrLmlkKTtcblx0XHRcdFx0Y29udGVudEJsb2NrUmVmcy5wdXNoKC4uLnJlZnMpO1xuXHRcdFx0fVxuXG5cdFx0XHRhd2FpdCB0aGlzLm5vdGlmeUVudGl0eVVwZGF0ZSh7XG5cdFx0XHRcdHR5cGU6IFwiY2hhcHRlclwiLFxuXHRcdFx0XHRzdG9yeSxcblx0XHRcdFx0Y2hhcHRlcixcblx0XHRcdFx0c2NlbmVzOiBzY2VuZXNXaXRoQmVhdHMsXG5cdFx0XHRcdGNvbnRlbnRCbG9ja3MsXG5cdFx0XHRcdGNvbnRlbnRCbG9ja1JlZnMsXG5cdFx0XHR9KTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gYXV0by1zeW5jIGNoYXB0ZXIgdXBkYXRlXCIsIGVycik7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBwdWJsaXNoU2NlbmVUcmVlKHNjZW5lSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICghdGhpcy5pc0F1dG9TeW5jRW5hYmxlZCgpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHNjZW5lID0gYXdhaXQgdGhpcy5nZXRTY2VuZShzY2VuZUlkKTtcblx0XHRcdGlmIChzY2VuZS5jaGFwdGVyX2lkKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucHVibGlzaENoYXB0ZXJVcGRhdGUoc2NlbmUuY2hhcHRlcl9pZCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3Qgc3RvcnkgPSBhd2FpdCB0aGlzLmdldFN0b3J5KHNjZW5lLnN0b3J5X2lkKTtcblx0XHRcdGNvbnN0IGJlYXRzID0gYXdhaXQgdGhpcy5nZXRCZWF0cyhzY2VuZS5pZCk7XG5cdFx0XHRjb25zdCBzY2VuZUNvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja3NCeVNjZW5lKHNjZW5lLmlkKTtcblx0XHRcdGNvbnN0IGJlYXRDb250ZW50QmxvY2tzOiBSZWNvcmQ8c3RyaW5nLCBDb250ZW50QmxvY2tbXT4gPSB7fTtcblx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cykge1xuXHRcdFx0XHRiZWF0Q29udGVudEJsb2Nrc1tiZWF0LmlkXSA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2Nrc0J5QmVhdChiZWF0LmlkKTtcblx0XHRcdH1cblxuXHRcdFx0YXdhaXQgdGhpcy5ub3RpZnlFbnRpdHlVcGRhdGUoe1xuXHRcdFx0XHR0eXBlOiBcInNjZW5lXCIsXG5cdFx0XHRcdHN0b3J5LFxuXHRcdFx0XHRzY2VuZSxcblx0XHRcdFx0YmVhdHMsXG5cdFx0XHRcdHNjZW5lQ29udGVudEJsb2Nrcyxcblx0XHRcdFx0YmVhdENvbnRlbnRCbG9ja3MsXG5cdFx0XHR9KTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gYXV0by1zeW5jIHNjZW5lIHVwZGF0ZVwiLCBlcnIpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcHVibGlzaENvbnRlbnRCbG9ja1VwZGF0ZShjb250ZW50QmxvY2tJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCF0aGlzLmlzQXV0b1N5bmNFbmFibGVkKCkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgY29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2soY29udGVudEJsb2NrSWQpO1xuXHRcdFx0bGV0IHN0b3J5OiBTdG9yeSB8IG51bGwgPSBudWxsO1xuXHRcdFx0aWYgKGNvbnRlbnRCbG9jay5jaGFwdGVyX2lkKSB7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXIgPSBhd2FpdCB0aGlzLmdldENoYXB0ZXIoY29udGVudEJsb2NrLmNoYXB0ZXJfaWQpO1xuXHRcdFx0XHRzdG9yeSA9IGF3YWl0IHRoaXMuZ2V0U3RvcnkoY2hhcHRlci5zdG9yeV9pZCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCBhbmNob3JzID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QW5jaG9ycyhjb250ZW50QmxvY2suaWQpO1xuXHRcdFx0XHRjb25zdCBzY2VuZUFuY2hvciA9IGFuY2hvcnMuZmluZCgoYW5jaG9yKSA9PiBhbmNob3IuZW50aXR5X3R5cGUgPT09IFwic2NlbmVcIik7XG5cdFx0XHRcdGlmIChzY2VuZUFuY2hvcikge1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lID0gYXdhaXQgdGhpcy5nZXRTY2VuZShzY2VuZUFuY2hvci5lbnRpdHlfaWQpO1xuXHRcdFx0XHRcdHN0b3J5ID0gYXdhaXQgdGhpcy5nZXRTdG9yeShzY2VuZS5zdG9yeV9pZCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKCFzdG9yeSkge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oXCJVbmFibGUgdG8gcmVzb2x2ZSBzdG9yeSBmb3IgY29udGVudCBibG9jayBhdXRvLXN5bmNcIiwgY29udGVudEJsb2NrSWQpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGF3YWl0IHRoaXMubm90aWZ5RW50aXR5VXBkYXRlKHtcblx0XHRcdFx0dHlwZTogXCJjb250ZW50XCIsXG5cdFx0XHRcdHN0b3J5LFxuXHRcdFx0XHRjb250ZW50QmxvY2ssXG5cdFx0XHR9KTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gYXV0by1zeW5jIGNvbnRlbnQgYmxvY2sgdXBkYXRlXCIsIGVycik7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgbm90aWZ5RW50aXR5VXBkYXRlKHBheWxvYWQ6IFN5bmNFbnRpdHlQYXlsb2FkKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgYXBpVXBkYXRlTm90aWZpZXIubm90aWZ5KHBheWxvYWQpO1xuXHR9XG59XG5cbiIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBTdG9yeUVuZ2luZVBsdWdpbiBmcm9tIFwiLi9tYWluXCI7XG5cbmV4cG9ydCBjbGFzcyBTdG9yeUVuZ2luZVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJTdG9yeSBFbmdpbmUgU2V0dGluZ3NcIiB9KTtcblxuXHRcdC8vIE1vZGUgU2VsZWN0aW9uXG5cdFx0bGV0IHRlbmFudElkU2V0dGluZzogU2V0dGluZyB8IG51bGwgPSBudWxsO1xuXHRcdGxldCB2aWRlb0xpbmtTZXR0aW5nOiBTZXR0aW5nIHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IGNvbmZsaWN0UmVzb2x1dGlvblNldHRpbmc6IFNldHRpbmcgfCBudWxsID0gbnVsbDtcblxuXHRcdGNvbnN0IG1vZGVTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkNvbm5lY3Rpb24gTW9kZVwiKVxuXHRcdFx0LnNldERlc2MoXCJDaG9vc2UgYmV0d2VlbiBsb2NhbCAob2ZmbGluZSkgb3IgcmVtb3RlIChjbG91ZCkgbW9kZVwiKVxuXHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT5cblx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHQuYWRkT3B0aW9uKFwibG9jYWxcIiwgXCJMb2NhbFwiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJyZW1vdGVcIiwgXCJSZW1vdGVcIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZSB8fCBcImxvY2FsXCIpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZSA9IHZhbHVlIGFzIFwibG9jYWxcIiB8IFwicmVtb3RlXCI7XG5cdFx0XHRcdFx0XHQvLyBBdXRvLXNldCBjb25mbGljdCByZXNvbHV0aW9uIGluIGxvY2FsIG1vZGVcblx0XHRcdFx0XHRcdGlmICh2YWx1ZSA9PT0gXCJsb2NhbFwiKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZsaWN0UmVzb2x1dGlvbiA9IFwibG9jYWxcIjtcblx0XHRcdFx0XHRcdFx0aWYgKGNvbmZsaWN0UmVzb2x1dGlvblNldHRpbmcpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25mbGljdFJlc29sdXRpb25TZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGlmIChjb25mbGljdFJlc29sdXRpb25TZXR0aW5nKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uZmxpY3RSZXNvbHV0aW9uU2V0dGluZy5zZXR0aW5nRWwuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC8vIFNob3cvaGlkZSB0ZW5hbnQgSURcblx0XHRcdFx0XHRcdGlmICh0ZW5hbnRJZFNldHRpbmcpIHtcblx0XHRcdFx0XHRcdFx0dGVuYW50SWRTZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPT09IFwicmVtb3RlXCIgPyBcIlwiIDogXCJub25lXCI7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQvLyBTaG93L2hpZGUgdmlkZW8gbGlua1xuXHRcdFx0XHRcdFx0aWYgKHZpZGVvTGlua1NldHRpbmcpIHtcblx0XHRcdFx0XHRcdFx0dmlkZW9MaW5rU2V0dGluZy5zZXR0aW5nRWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID09PSBcImxvY2FsXCIgPyBcIlwiIDogXCJub25lXCI7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgQVBJIGNsaWVudCBtb2RlXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uYXBpQ2xpZW50KSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmFwaUNsaWVudC5zZXRNb2RlKHZhbHVlIGFzIFwibG9jYWxcIiB8IFwicmVtb3RlXCIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHQvLyBBUEkgVVJMXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkFQSSBVUkxcIilcblx0XHRcdC5zZXREZXNjKFwiVGhlIGJhc2UgVVJMIG9mIHRoZSBTdG9yeSBFbmdpbmUgQVBJXCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MFwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcGlVcmwpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpVXJsID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJMTE0gR2F0ZXdheSBVUkxcIilcblx0XHRcdC5zZXREZXNjKFwiVGhlIGJhc2UgVVJMIG9mIHRoZSBMTE0gR2F0ZXdheSBzZXJ2aWNlXCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MVwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1HYXRld2F5VXJsKVxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbUdhdGV3YXlVcmwgPSB2YWx1ZS50cmltKCk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIFRlbmFudCBJRCAoY29uZGl0aW9uYWwgLSBvbmx5IHNob3duIGluIHJlbW90ZSBtb2RlKVxuXHRcdHRlbmFudElkU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJUZW5hbnQgSURcIilcblx0XHRcdC5zZXREZXNjKFwiWW91ciB3b3Jrc3BhY2UgdGVuYW50IElEIChVVUlEIGZvcm1hdCkgLSBSZXF1aXJlZCBpbiByZW1vdGUgbW9kZVwiKVxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdHRleHRcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDBcIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGVuYW50SWQgfHwgXCJcIilcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW5hbnRJZCA9IHZhbHVlLnRyaW0oKTtcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBBUEkgY2xpZW50IHRlbmFudCBJRCBpbW1lZGlhdGVseVxuXHRcdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLmFwaUNsaWVudCkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5hcGlDbGllbnQuc2V0VGVuYW50SWQodmFsdWUudHJpbSgpKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlID09PSBcImxvY2FsXCIpIHtcblx0XHRcdHRlbmFudElkU2V0dGluZy5zZXR0aW5nRWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdH1cblxuXHRcdC8vIFZpZGVvIExpbmsgU2VjdGlvbiAoY29uZGl0aW9uYWwgLSBvbmx5IHNob3duIGluIGxvY2FsIG1vZGUpXG5cdFx0Y29uc3QgdmlkZW9VcmwgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sb2NhbE1vZGVWaWRlb1VybCB8fCBcImh0dHBzOi8vZXhhbXBsZS5jb20vc2V0dXAtdmlkZW9cIjtcblx0XHR2aWRlb0xpbmtTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlNldHVwIEd1aWRlXCIpXG5cdFx0XHQuc2V0RGVzYyhgXHVEODNEXHVEQ0Y5IExlYXJuIGhvdyB0byBzZXR1cCBsb2NhbCBtb2RlOiAke3ZpZGVvVXJsfWApXG5cdFx0XHQuYWRkQnV0dG9uKChidXR0b24pID0+IHtcblx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoXCJPcGVuIFZpZGVvXCIpLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdHdpbmRvdy5vcGVuKHZpZGVvVXJsLCBcIl9ibGFua1wiKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZSA9PT0gXCJyZW1vdGVcIikge1xuXHRcdFx0dmlkZW9MaW5rU2V0dGluZy5zZXR0aW5nRWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdH1cblxuXHRcdC8vIEFQSSBLZXlcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiQVBJIEtleVwiKVxuXHRcdFx0LnNldERlc2MoXCJBUEkga2V5IGZvciBhdXRoZW50aWNhdGlvbiAob3B0aW9uYWwgZm9yIE1WUClcIilcblx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG5cdFx0XHRcdHRleHQuc2V0UGxhY2Vob2xkZXIoXCJFbnRlciBBUEkga2V5XCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSlcblx0XHRcdFx0XHQuaW5wdXRFbC50eXBlID0gXCJwYXNzd29yZFwiO1xuXHRcdFx0XHR0ZXh0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlN5bmMgRm9sZGVyIFBhdGhcIilcblx0XHRcdC5zZXREZXNjKFwiRm9sZGVyIHBhdGggd2hlcmUgc3luY2VkIHN0b3JpZXMgd2lsbCBiZSBzdG9yZWRcIilcblx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiU3Rvcmllc1wiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeW5jRm9sZGVyUGF0aCB8fCBcIlN0b3JpZXNcIilcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeW5jRm9sZGVyUGF0aCA9IHZhbHVlLnRyaW0oKSB8fCBcIlN0b3JpZXNcIjtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkF1dG8gVmVyc2lvbiBTbmFwc2hvdHNcIilcblx0XHRcdC5zZXREZXNjKFwiQXV0b21hdGljYWxseSBjcmVhdGUgdmVyc2lvbiBzbmFwc2hvdHMgd2hlbiBzeW5jaW5nXCIpXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG5cdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvVmVyc2lvblNuYXBzaG90cyA/PyB0cnVlKVxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9WZXJzaW9uU25hcHNob3RzID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJBdXRvIFN5bmMgb24gQVBJIFVwZGF0ZXNcIilcblx0XHRcdC5zZXREZXNjKFwiQXBwbHkgQVBJIHVwZGF0ZSBwYXlsb2FkcyBkaXJlY3RseSB0byBsb2NhbCBmaWxlcyB3aGVuIGF2YWlsYWJsZVwiKVxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1N5bmNPbkFwaVVwZGF0ZXMgPz8gdHJ1ZSlcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvU3luY09uQXBpVXBkYXRlcyA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiQXV0byBQdXNoIG9uIEJsdXIvSWRsZVwiKVxuXHRcdFx0LnNldERlc2MoXCJXaGVuIHlvdSBsZWF2ZSBhIGNoYXB0ZXIvc2NlbmUvYmVhdCBvciBzdGF5IGlkbGUgZm9yIDEgbWluLCBwdXNoIGNoYW5nZXMgdXBzdHJlYW0gYXV0b21hdGljYWxseVwiKVxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1B1c2hPbkZpbGVCbHVyID8/IHRydWUpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1B1c2hPbkZpbGVCbHVyID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIENvbmZsaWN0IFJlc29sdXRpb24gKGNvbmRpdGlvbmFsIC0gaGlkZGVuIGluIGxvY2FsIG1vZGUpXG5cdFx0Y29uZmxpY3RSZXNvbHV0aW9uU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJDb25mbGljdCBSZXNvbHV0aW9uXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkhvdyB0byByZXNvbHZlIGNvbmZsaWN0cyB3aGVuIGJvdGggbG9jYWwgYW5kIHNlcnZpY2UgaGF2ZSBjaGFuZ2VzXCIpXG5cdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxuXHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJzZXJ2aWNlXCIsIFwiU2VydmljZSBXaW5zXCIpXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihcImxvY2FsXCIsIFwiTG9jYWwgV2luc1wiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJtYW51YWxcIiwgXCJNYW51YWwgKE5ld2VyIFdpbnMpXCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZsaWN0UmVzb2x1dGlvbiB8fCBcInNlcnZpY2VcIilcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25mbGljdFJlc29sdXRpb24gPVxuXHRcdFx0XHRcdFx0XHR2YWx1ZSBhcyBcInNlcnZpY2VcIiB8IFwibG9jYWxcIiB8IFwibWFudWFsXCI7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZSA9PT0gXCJsb2NhbFwiKSB7XG5cdFx0XHRjb25mbGljdFJlc29sdXRpb25TZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0fVxuXG5cdFx0Ly8gU2hvdyBIZWxwIEJveCBpbiBNRCBGaWxlc1xuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJTaG93IEhlbHAgQm94IGluIE1EIEZpbGVzXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkVuYWJsZS9kaXNhYmxlIGluZm8vaGVscCBib3hlcyBpbiBtYXJrZG93biBmaWxlc1wiKVxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0hlbHBCb3ggPz8gdHJ1ZSlcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93SGVscEJveCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHQvLyBTaWRlYmFyIFBvc2l0aW9uXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIldvcmxkIFNpZGViYXIgUG9zaXRpb25cIilcblx0XHRcdC5zZXREZXNjKFwiQ2hvb3NlIHdoZXRoZXIgdGhlIHdvcmxkIHNpZGViYXIgYXBwZWFycyBvbiB0aGUgbGVmdCBvciByaWdodCBzaWRlXCIpXG5cdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxuXHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJsZWZ0XCIsIFwiTGVmdFwiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJyaWdodFwiLCBcIlJpZ2h0XCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNpZGViYXJQb3NpdGlvbiB8fCBcImxlZnRcIilcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaWRlYmFyUG9zaXRpb24gPSB2YWx1ZSBhcyBcImxlZnRcIiB8IFwicmlnaHRcIjtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0Ly8gVHJpZ2dlciB2aWV3IHJlZnJlc2ggaWYgbmVlZGVkXG5cdFx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UudHJpZ2dlcihcImxheW91dC1jaGFuZ2VcIik7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiVW5zcGxhc2ggQWNjZXNzIEtleVwiKVxuXHRcdFx0LnNldERlc2MoXCJBcHBsaWNhdGlvbiBJRCAvIEFjY2VzcyBLZXkgZm9yIFVuc3BsYXNoIEFQSSAoZ2V0IG9uZSBhdCBodHRwczovL3Vuc3BsYXNoLmNvbS9kZXZlbG9wZXJzKVwiKVxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcblx0XHRcdFx0dGV4dC5zZXRQbGFjZWhvbGRlcihcIkVudGVyIFVuc3BsYXNoIGFjY2VzcyBrZXlcIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudW5zcGxhc2hBY2Nlc3NLZXkgfHwgXCJcIilcblx0XHRcdFx0XHQuaW5wdXRFbC50eXBlID0gXCJwYXNzd29yZFwiO1xuXHRcdFx0XHR0ZXh0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnVuc3BsYXNoQWNjZXNzS2V5ID0gdmFsdWUudHJpbSgpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlVuc3BsYXNoIFNlY3JldCBLZXlcIilcblx0XHRcdC5zZXREZXNjKFwiU2VjcmV0IEtleSBmb3IgVW5zcGxhc2ggQVBJIChvcHRpb25hbCwgbmVlZGVkIGZvciBzb21lIG9wZXJhdGlvbnMpXCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xuXHRcdFx0XHR0ZXh0LnNldFBsYWNlaG9sZGVyKFwiRW50ZXIgVW5zcGxhc2ggc2VjcmV0IGtleVwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy51bnNwbGFzaFNlY3JldEtleSB8fCBcIlwiKVxuXHRcdFx0XHRcdC5pbnB1dEVsLnR5cGUgPSBcInBhc3N3b3JkXCI7XG5cdFx0XHRcdHRleHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudW5zcGxhc2hTZWNyZXRLZXkgPSB2YWx1ZS50cmltKCk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHQvLyBUZXN0IGNvbm5lY3Rpb24gYnV0dG9uXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlRlc3QgQ29ubmVjdGlvblwiKVxuXHRcdFx0LnNldERlc2MoXCJUZXN0IGNvbm5lY3Rpb24gdG8gdGhlIFN0b3J5IEVuZ2luZSBBUElcIilcblx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT5cblx0XHRcdFx0YnV0dG9uXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJUZXN0XCIpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoXCJUZXN0aW5nLi4uXCIpO1xuXHRcdFx0XHRcdFx0YnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnRlc3RDb25uZWN0aW9uKCk7XG5cdFx0XHRcdFx0XHRcdGlmIChyZXN1bHQpIHtcblx0XHRcdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChcIlN1Y2Nlc3MhXCIpO1xuXHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoXCJUZXN0XCIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0YnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcblx0XHRcdFx0XHRcdFx0XHR9LCAyMDAwKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChcIkZhaWxlZFwiKTtcblx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KFwiVGVzdFwiKTtcblx0XHRcdFx0XHRcdFx0XHRcdGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG5cdFx0XHRcdFx0XHRcdFx0fSwgMjAwMCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChcIkVycm9yXCIpO1xuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChcIlRlc3RcIik7XG5cdFx0XHRcdFx0XHRcdFx0YnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcblx0XHRcdFx0XHRcdFx0fSwgMjAwMCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdH1cbn1cblxuXG4iLCAiaW1wb3J0IHsgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBTdG9yeVN5bmNNb2RhbCB9IGZyb20gXCIuL3ZpZXdzL1N0b3J5U3luY01vZGFsXCI7XG5pbXBvcnQgU3RvcnlFbmdpbmVQbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb21tYW5kcyhwbHVnaW46IFN0b3J5RW5naW5lUGx1Z2luKSB7XG5cdHBsdWdpbi5hZGRDb21tYW5kKHtcblx0XHRpZDogXCJsaXN0LXN0b3JpZXNcIixcblx0XHRuYW1lOiBcIkxpc3QgU3Rvcmllc1wiLFxuXHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRwbHVnaW4uYWN0aXZhdGVWaWV3KCk7XG5cdFx0fSxcblx0fSk7XG5cblx0cGx1Z2luLmFkZENvbW1hbmQoe1xuXHRcdGlkOiBcImNyZWF0ZS1zdG9yeVwiLFxuXHRcdG5hbWU6IFwiQ3JlYXRlIFN0b3J5XCIsXG5cdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdHBsdWdpbi5jcmVhdGVTdG9yeUNvbW1hbmQoKTtcblx0XHR9LFxuXHR9KTtcblxuXHRwbHVnaW4uYWRkQ29tbWFuZCh7XG5cdFx0aWQ6IFwic3luYy1zdG9yeS1mcm9tLXNlcnZpY2VcIixcblx0XHRuYW1lOiBcIlN5bmMgU3RvcnkgZnJvbSBTZXJ2aWNlXCIsXG5cdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdG5ldyBTdG9yeVN5bmNNb2RhbChwbHVnaW4sIFwicHVsbFwiKS5vcGVuKCk7XG5cdFx0fSxcblx0fSk7XG5cblx0cGx1Z2luLmFkZENvbW1hbmQoe1xuXHRcdGlkOiBcInB1c2gtc3RvcnktdG8tc2VydmljZVwiLFxuXHRcdG5hbWU6IFwiUHVzaCBTdG9yeSB0byBTZXJ2aWNlXCIsXG5cdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdG5ldyBTdG9yeVN5bmNNb2RhbChwbHVnaW4sIFwicHVzaFwiKS5vcGVuKCk7XG5cdFx0fSxcblx0fSk7XG5cblx0cGx1Z2luLmFkZENvbW1hbmQoe1xuXHRcdGlkOiBcInN5bmMtYWxsLXN0b3JpZXNcIixcblx0XHRuYW1lOiBcIlN5bmMgQWxsIFN0b3JpZXNcIixcblx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0Ly8gT25seSB2YWxpZGF0ZSB0ZW5hbnQgSUQgaW4gcmVtb3RlIG1vZGVcblx0XHRcdGlmIChwbHVnaW4uc2V0dGluZ3MubW9kZSA9PT0gXCJyZW1vdGVcIiAmJiAhcGx1Z2luLnNldHRpbmdzLnRlbmFudElkKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJQbGVhc2UgY29uZmlndXJlIFRlbmFudCBJRCBpbiBzZXR0aW5nc1wiLCA1MDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiU3luY2luZyBhbGwgc3Rvcmllcy4uLlwiKTtcblx0XHRcdFx0YXdhaXQgcGx1Z2luLnN5bmNTZXJ2aWNlLnB1bGxBbGxTdG9yaWVzKCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID1cblx0XHRcdFx0XHRlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gc3luYyBzdG9yaWVzXCI7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yTWVzc2FnZX1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9LFxuXHR9KTtcblxuXHRwbHVnaW4uYWRkQ29tbWFuZCh7XG5cdFx0aWQ6IFwiZXh0cmFjdC1lbnRpdGllcy1mcm9tLXNlbGVjdGlvblwiLFxuXHRcdG5hbWU6IFwiRXh0cmFjdCBFbnRpdGllcyBmcm9tIFNlbGVjdGlvblwiLFxuXHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yKSA9PiB7XG5cdFx0XHRjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG5cdFx0XHRpZiAoIXNlbGVjdGlvbi50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIlNlbGVjdCB0ZXh0IHRvIGV4dHJhY3QgZW50aXRpZXNcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHBsdWdpbi5leHRyYWN0U2VsZWN0aW9uQ29tbWFuZChzZWxlY3Rpb24pO1xuXHRcdH0sXG5cdH0pO1xufVxuXG4iLCAiaW1wb3J0IHsgTW9kYWwsIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IFN0b3J5RW5naW5lUGx1Z2luIGZyb20gXCIuLi9tYWluXCI7XG5pbXBvcnQgeyBTdG9yeSB9IGZyb20gXCIuLi90eXBlc1wiO1xuXG5leHBvcnQgY2xhc3MgU3RvcnlTeW5jTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdHBsdWdpbjogU3RvcnlFbmdpbmVQbHVnaW47XG5cdG1vZGU6IFwicHVsbFwiIHwgXCJwdXNoXCI7XG5cdHN0b3JpZXM6IFN0b3J5W10gPSBbXTtcblx0bG9hZGluZzogYm9vbGVhbiA9IHRydWU7XG5cdGVycm9yOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IFN0b3J5RW5naW5lUGx1Z2luLCBtb2RlOiBcInB1bGxcIiB8IFwicHVzaFwiKSB7XG5cdFx0c3VwZXIocGx1Z2luLmFwcCk7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdFx0dGhpcy5tb2RlID0gbW9kZTtcblx0fVxuXG5cdGFzeW5jIG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblxuXHRcdGNvbnN0IHRpdGxlID1cblx0XHRcdHRoaXMubW9kZSA9PT0gXCJwdWxsXCJcblx0XHRcdFx0PyBcIlN5bmMgU3RvcnkgZnJvbSBTZXJ2aWNlXCJcblx0XHRcdFx0OiBcIlB1c2ggU3RvcnkgdG8gU2VydmljZVwiO1xuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogdGl0bGUgfSk7XG5cblx0XHRhd2FpdCB0aGlzLmxvYWRTdG9yaWVzKCk7XG5cblx0XHRpZiAodGhpcy5sb2FkaW5nKSB7XG5cdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJMb2FkaW5nIHN0b3JpZXMuLi5cIiB9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5lcnJvcikge1xuXHRcdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7XG5cdFx0XHRcdHRleHQ6IGBFcnJvcjogJHt0aGlzLmVycm9yfWAsXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXJyb3JcIixcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnN0b3JpZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBzdG9yaWVzIGZvdW5kLlwiIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IHN0b3JpZXNMaXN0ID0gY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1saXN0XCIgfSk7XG5cblx0XHRmb3IgKGNvbnN0IHN0b3J5IG9mIHRoaXMuc3Rvcmllcykge1xuXHRcdFx0Y29uc3Qgc3RvcnlJdGVtID0gc3Rvcmllc0xpc3QuY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIixcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCB0aXRsZSA9IHN0b3J5SXRlbS5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIixcblx0XHRcdFx0dGV4dDogc3RvcnkudGl0bGUsXG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgbWV0YSA9IHN0b3J5SXRlbS5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtbWV0YVwiLFxuXHRcdFx0fSk7XG5cdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7XG5cdFx0XHRcdHRleHQ6IGBWZXJzaW9uICR7c3RvcnkudmVyc2lvbl9udW1iZXJ9YCxcblx0XHRcdH0pO1xuXHRcdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwge1xuXHRcdFx0XHR0ZXh0OiBgU3RhdHVzOiAke3N0b3J5LnN0YXR1c31gLFxuXHRcdFx0fSk7XG5cblx0XHRcdHN0b3J5SXRlbS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMubW9kZSA9PT0gXCJwdWxsXCIpIHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnN5bmNTZXJ2aWNlLnB1bGxTdG9yeShzdG9yeS5pZCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnN0IGZvbGRlclBhdGggPSB0aGlzLnBsdWdpbi5maWxlTWFuYWdlci5nZXRTdG9yeUZvbGRlclBhdGgoXG5cdFx0XHRcdFx0XHRcdHN0b3J5LnRpdGxlXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc3luY1NlcnZpY2UucHVzaFN0b3J5KGZvbGRlclBhdGgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID1cblx0XHRcdFx0XHRcdGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBzeW5jIHN0b3J5XCI7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGxvYWRTdG9yaWVzKCkge1xuXHRcdHRoaXMubG9hZGluZyA9IHRydWU7XG5cdFx0dGhpcy5lcnJvciA9IG51bGw7XG5cblx0XHR0cnkge1xuXHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW5hbnRJZCkge1xuXHRcdFx0XHR0aGlzLmVycm9yID0gXCJUZW5hbnQgSUQgbm90IGNvbmZpZ3VyZWRcIjtcblx0XHRcdFx0dGhpcy5sb2FkaW5nID0gZmFsc2U7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5zdG9yaWVzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50Lmxpc3RTdG9yaWVzKCk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHR0aGlzLmVycm9yID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHR0aGlzLmxvYWRpbmcgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cblxuXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgU3RvcnlFbmdpbmVQbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcbmltcG9ydCB7IFdvcmxkIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBDcmVhdGVXb3JsZE1vZGFsIH0gZnJvbSBcIi4vQ3JlYXRlV29ybGRNb2RhbFwiO1xuXG5leHBvcnQgY2xhc3MgQ3JlYXRlU3RvcnlNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0cGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbjtcblx0dGl0bGU6IHN0cmluZyA9IFwiXCI7XG5cdHNlbGVjdGVkV29ybGRJZDogc3RyaW5nID0gXCJcIjtcblx0c2hvdWxkU3luYzogYm9vbGVhbiA9IHRydWU7XG5cdHdvcmxkczogV29ybGRbXSA9IFtdO1xuXHRvblN1Ym1pdDogKHRpdGxlOiBzdHJpbmcsIHdvcmxkSWQ6IHN0cmluZyB8IHVuZGVmaW5lZCwgc2hvdWxkU3luYzogYm9vbGVhbikgPT4gdm9pZDtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbiwgb25TdWJtaXQ6ICh0aXRsZTogc3RyaW5nLCB3b3JsZElkOiBzdHJpbmcgfCB1bmRlZmluZWQsIHNob3VsZFN5bmM6IGJvb2xlYW4pID0+IHZvaWQpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHRcdHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcblx0fVxuXG5cdGFzeW5jIG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJDcmVhdGUgTmV3IFN0b3J5XCIgfSk7XG5cblx0XHQvLyBMb2FkIHdvcmxkc1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLndvcmxkcyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRXb3JsZHMoKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gbG9hZCB3b3JsZHM6XCIsIGVycik7XG5cdFx0XHR0aGlzLndvcmxkcyA9IFtdO1xuXHRcdH1cblxuXHRcdC8vIFRpdGxlIGlucHV0XG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJTdG9yeSBUaXRsZVwiKVxuXHRcdFx0LnNldERlc2MoXCJFbnRlciB0aGUgdGl0bGUgZm9yIHlvdXIgbmV3IHN0b3J5XCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIk15IE5ldyBTdG9yeVwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnRpdGxlKVxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMudGl0bGUgPSB2YWx1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zdWJtaXQoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIFdvcmxkIHNlbGVjdGlvblxuXHRcdGNvbnN0IHdvcmxkT3B0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcblx0XHRcdFwiXCI6IFwiTm8gV29ybGRcIixcblx0XHR9O1xuXHRcdGZvciAoY29uc3Qgd29ybGQgb2YgdGhpcy53b3JsZHMpIHtcblx0XHRcdHdvcmxkT3B0aW9uc1t3b3JsZC5pZF0gPSB3b3JsZC5uYW1lO1xuXHRcdH1cblx0XHR3b3JsZE9wdGlvbnNbXCJfX2NyZWF0ZV9uZXdfX1wiXSA9IFwiQ3JlYXRlIG5ldyB3b3JsZC4uLlwiO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJXb3JsZFwiKVxuXHRcdFx0LnNldERlc2MoXCJTZWxlY3QgYSB3b3JsZCBmb3IgdGhpcyBzdG9yeSAob3B0aW9uYWwpXCIpXG5cdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG5cdFx0XHRcdGZvciAoY29uc3QgW3ZhbHVlLCBsYWJlbF0gb2YgT2JqZWN0LmVudHJpZXMod29ybGRPcHRpb25zKSkge1xuXHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih2YWx1ZSwgbGFiZWwpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRyb3Bkb3duLnNldFZhbHVlKHRoaXMuc2VsZWN0ZWRXb3JsZElkIHx8IFwiXCIpO1xuXHRcdFx0XHRkcm9wZG93bi5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRpZiAodmFsdWUgPT09IFwiX19jcmVhdGVfbmV3X19cIikge1xuXHRcdFx0XHRcdFx0Ly8gT3BlbiBjcmVhdGUgd29ybGQgbW9kYWxcblx0XHRcdFx0XHRcdG5ldyBDcmVhdGVXb3JsZE1vZGFsKHRoaXMuYXBwLCBhc3luYyAobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBnZW5yZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3V29ybGQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlV29ybGQobmFtZSwgZGVzY3JpcHRpb24sIGdlbnJlKTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLndvcmxkcy5wdXNoKG5ld1dvcmxkKTtcblx0XHRcdFx0XHRcdFx0XHQvLyBSZWZyZXNoIGRyb3Bkb3duXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5vbkNsb3NlKCk7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5vbk9wZW4oKTtcblx0XHRcdFx0XHRcdFx0XHQvLyBSZS1zZWxlY3QgdGhlIG5ld2x5IGNyZWF0ZWQgd29ybGRcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkV29ybGRJZCA9IG5ld1dvcmxkLmlkO1xuXHRcdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gY3JlYXRlIHdvcmxkXCI7XG5cdFx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KS5vcGVuKCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMuc2VsZWN0ZWRXb3JsZElkID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0Ly8gU3luYyBjaGVja2JveFxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5zZXROYW1lKFwiU3luYyB0byBPYnNpZGlhblwiKVxuXHRcdFx0LnNldERlc2MoXCJBdXRvbWF0aWNhbGx5IHN5bmMgdGhlIHN0b3J5IGZpbGVzIHRvIHlvdXIgdmF1bHQgYWZ0ZXIgY3JlYXRpb25cIilcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cblx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuc2hvdWxkU3luYylcblx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnNob3VsZFN5bmMgPSB2YWx1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIEJ1dHRvbnNcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRcblx0XHRjb25zdCBjcmVhdGVCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJDcmVhdGVcIixcblx0XHRcdGNsczogXCJtb2QtY3RhXCIsXG5cdFx0fSk7XG5cdFx0Y3JlYXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnN1Ym1pdCgpKTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIkNhbmNlbFwiLFxuXHRcdH0pO1xuXHRcdGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblxuXHRcdC8vIEZvY3VzIG9uIHRpdGxlIGlucHV0XG5cdFx0Y29uc3QgdGl0bGVJbnB1dCA9IChjb250ZW50RWwgYXMgSFRNTEVsZW1lbnQpLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKSBhcyBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbDtcblx0XHRpZiAodGl0bGVJbnB1dCkge1xuXHRcdFx0dGl0bGVJbnB1dC5mb2N1cygpO1xuXHRcdH1cblx0fVxuXG5cdHN1Ym1pdCgpIHtcblx0XHRjb25zdCB0cmltbWVkVGl0bGUgPSB0aGlzLnRpdGxlLnRyaW0oKTtcblx0XHRcblx0XHRpZiAoIXRyaW1tZWRUaXRsZSkge1xuXHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBlbnRlciBhIHN0b3J5IHRpdGxlXCIsIDMwMDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuY2xvc2UoKTtcblx0XHRjb25zdCB3b3JsZElkID0gdGhpcy5zZWxlY3RlZFdvcmxkSWQgJiYgdGhpcy5zZWxlY3RlZFdvcmxkSWQgIT09IFwiX19jcmVhdGVfbmV3X19cIiA/IHRoaXMuc2VsZWN0ZWRXb3JsZElkIDogdW5kZWZpbmVkO1xuXHRcdHRoaXMub25TdWJtaXQodHJpbW1lZFRpdGxlLCB3b3JsZElkLCB0aGlzLnNob3VsZFN5bmMpO1xuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBjbGFzcyBDcmVhdGVXb3JsZE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRuYW1lOiBzdHJpbmcgPSBcIlwiO1xuXHRkZXNjcmlwdGlvbjogc3RyaW5nID0gXCJcIjtcblx0Z2VucmU6IHN0cmluZyA9IFwiXCI7XG5cdG9uU3VibWl0OiAobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBnZW5yZTogc3RyaW5nKSA9PiB2b2lkO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvblN1Ym1pdDogKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgZ2VucmU6IHN0cmluZykgPT4gdm9pZCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIkNyZWF0ZSBOZXcgV29ybGRcIiB9KTtcblxuXHRcdC8vIE5hbWUgaW5wdXRcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZShcIldvcmxkIE5hbWVcIilcblx0XHRcdC5zZXREZXNjKFwiRW50ZXIgdGhlIG5hbWUgZm9yIHlvdXIgbmV3IHdvcmxkXCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIk15IE5ldyBXb3JsZFwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLm5hbWUpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5uYW1lID0gdmFsdWU7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcblx0XHRcdFx0XHRcdGlmIChlLmtleSA9PT0gXCJFbnRlclwiKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGRlc2NyaXB0aW9uSW5wdXQgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcihcInRleHRhcmVhXCIpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQgfCBudWxsO1xuXHRcdFx0XHRcdFx0XHRpZiAoZGVzY3JpcHRpb25JbnB1dCkge1xuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uSW5wdXQuZm9jdXMoKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0Ly8gRGVzY3JpcHRpb24gaW5wdXRcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZShcIkRlc2NyaXB0aW9uXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkVudGVyIGEgZGVzY3JpcHRpb24gZm9yIHlvdXIgd29ybGRcIilcblx0XHRcdC5hZGRUZXh0QXJlYSgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIkEgYnJpZWYgZGVzY3JpcHRpb24gb2YgeW91ciB3b3JsZC4uLlwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLmRlc2NyaXB0aW9uKVxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuZGVzY3JpcHRpb24gPSB2YWx1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIEdlbnJlIGlucHV0XG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJHZW5yZVwiKVxuXHRcdFx0LnNldERlc2MoXCJFbnRlciB0aGUgZ2VucmUgb2YgeW91ciB3b3JsZFwiKVxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdHRleHRcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJGYW50YXN5LCBTY2ktRmksIENvbnRlbXBvcmFyeSwgZXRjLlwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLmdlbnJlKVxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuZ2VucmUgPSB2YWx1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zdWJtaXQoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIEJ1dHRvbnNcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRcblx0XHRjb25zdCBjcmVhdGVCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJDcmVhdGVcIixcblx0XHRcdGNsczogXCJtb2QtY3RhXCIsXG5cdFx0fSk7XG5cdFx0Y3JlYXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnN1Ym1pdCgpKTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIkNhbmNlbFwiLFxuXHRcdH0pO1xuXHRcdGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblxuXHRcdC8vIEZvY3VzIG9uIG5hbWUgaW5wdXRcblx0XHRjb25zdCBuYW1lSW5wdXQgPSAoY29udGVudEVsIGFzIEhUTUxFbGVtZW50KS5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikgYXMgSFRNTElucHV0RWxlbWVudCB8IG51bGw7XG5cdFx0aWYgKG5hbWVJbnB1dCkge1xuXHRcdFx0bmFtZUlucHV0LmZvY3VzKCk7XG5cdFx0fVxuXHR9XG5cblx0c3VibWl0KCkge1xuXHRcdGNvbnN0IHRyaW1tZWROYW1lID0gdGhpcy5uYW1lLnRyaW0oKTtcblx0XHRjb25zdCB0cmltbWVkRGVzY3JpcHRpb24gPSB0aGlzLmRlc2NyaXB0aW9uLnRyaW0oKTtcblx0XHRjb25zdCB0cmltbWVkR2VucmUgPSB0aGlzLmdlbnJlLnRyaW0oKTtcblx0XHRcblx0XHRpZiAoIXRyaW1tZWROYW1lKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiUGxlYXNlIGVudGVyIGEgd29ybGQgbmFtZVwiLCAzMDAwKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIXRyaW1tZWRHZW5yZSkge1xuXHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBlbnRlciBhIGdlbnJlXCIsIDMwMDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuY2xvc2UoKTtcblx0XHR0aGlzLm9uU3VibWl0KHRyaW1tZWROYW1lLCB0cmltbWVkRGVzY3JpcHRpb24sIHRyaW1tZWRHZW5yZSk7XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cbiIsICJpbXBvcnQgeyBOb3RpY2UsIFRGaWxlLCBURm9sZGVyLCBWYXVsdCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgU3RvcnksIENoYXB0ZXIsIENoYXB0ZXJXaXRoQ29udGVudCwgU3RvcnlNZXRhZGF0YSwgU2NlbmUsIEJlYXQsIFNjZW5lV2l0aEJlYXRzLCBDb250ZW50QmxvY2ssIENvbnRlbnRBbmNob3IgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuLy8gU3RydWN0dXJlIHRvIG9yZ2FuaXplIGNvbnRlbnQgYmxvY2tzIGJ5IHRoZWlyIGFzc29jaWF0aW9uc1xuZXhwb3J0IGludGVyZmFjZSBDb250ZW50QmxvY2tPcmdhbml6YXRpb24ge1xuXHRjaGFwdGVyT25seTogQ29udGVudEJsb2NrW107IC8vIENvbnRlbnQgYmxvY2tzIG9ubHkgYXNzb2NpYXRlZCB3aXRoIGNoYXB0ZXJcblx0YnlTY2VuZTogTWFwPHN0cmluZywgeyBzY2VuZTogU2NlbmU7IGNvbnRlbnRCbG9ja3M6IENvbnRlbnRCbG9ja1tdIH0+OyAvLyBDb250ZW50IGJsb2NrcyBieSBzY2VuZSBJRFxuXHRieUJlYXQ6IE1hcDxzdHJpbmcsIHsgYmVhdDogQmVhdDsgY29udGVudEJsb2NrczogQ29udGVudEJsb2NrW10gfT47IC8vIENvbnRlbnQgYmxvY2tzIGJ5IGJlYXQgSURcbn1cblxuZXhwb3J0IGNsYXNzIEZpbGVNYW5hZ2VyIHtcblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSB2YXVsdDogVmF1bHQsXG5cdFx0cHJpdmF0ZSBiYXNlRm9sZGVyOiBzdHJpbmdcblx0KSB7fVxuXG5cdC8vIEV4cG9zZSB2YXVsdCBmb3Igc3luYyBvcGVyYXRpb25zXG5cdGdldFZhdWx0KCk6IFZhdWx0IHtcblx0XHRyZXR1cm4gdGhpcy52YXVsdDtcblx0fVxuXG5cdC8vIEdldCB0aGUgZm9sZGVyIHBhdGggZm9yIGEgc3BlY2lmaWMgc3Rvcnlcblx0Z2V0U3RvcnlGb2xkZXJQYXRoKHN0b3J5VGl0bGU6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Y29uc3Qgc2FuaXRpemVkID0gdGhpcy5zYW5pdGl6ZUZvbGRlck5hbWUoc3RvcnlUaXRsZSk7XG5cdFx0cmV0dXJuIGAke3RoaXMuYmFzZUZvbGRlcn0vJHtzYW5pdGl6ZWR9YDtcblx0fVxuXG5cdC8vIFNhbml0aXplIGZvbGRlci9maWxlIG5hbWVzXG5cdHByaXZhdGUgc2FuaXRpemVGb2xkZXJOYW1lKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIG5hbWVcblx0XHRcdC5yZXBsYWNlKC9bPD46XCIvXFxcXHw/Kl0vZywgXCItXCIpXG5cdFx0XHQucmVwbGFjZSgvXFxzKy9nLCBcIiBcIilcblx0XHRcdC50cmltKCk7XG5cdH1cblxuXHQvLyBHZW5lcmF0ZSBmcm9udG1hdHRlciB3aXRoIE9ic2lkaWFuIHRhZ3Ncblx0cHJpdmF0ZSBnZW5lcmF0ZUZyb250bWF0dGVyKFxuXHRcdGJhc2VGaWVsZHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlciB8IG51bGw+LFxuXHRcdGV4dHJhRmllbGRzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgbnVsbD4sXG5cdFx0b3B0aW9ucz86IHtcblx0XHRcdGVudGl0eVR5cGU6IFwic3RvcnlcIiB8IFwiY2hhcHRlclwiIHwgXCJzY2VuZVwiIHwgXCJiZWF0XCIgfCBcImNvbnRlbnQtYmxvY2tcIjtcblx0XHRcdHN0b3J5TmFtZT86IHN0cmluZztcblx0XHRcdGRhdGU/OiBzdHJpbmc7IC8vIElTTyBkYXRlIHN0cmluZyAoWVlZWS1NTS1ERCkgb3IgRGF0ZSBvYmplY3Rcblx0XHR9XG5cdCk6IHN0cmluZyB7XG5cdFx0Y29uc3QgZmllbGRzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXIgfCBudWxsPiA9IHsgLi4uYmFzZUZpZWxkcyB9O1xuXG5cdFx0Ly8gQWRkIGV4dHJhIGZpZWxkcyBpZiBwcm92aWRlZFxuXHRcdGlmIChleHRyYUZpZWxkcykge1xuXHRcdFx0T2JqZWN0LmFzc2lnbihmaWVsZHMsIGV4dHJhRmllbGRzKTtcblx0XHR9XG5cblx0XHQvLyBHZW5lcmF0ZSB0YWdzICh3aXRob3V0ICMgcHJlZml4IC0gT2JzaWRpYW4gYWRkcyBpdCBhdXRvbWF0aWNhbGx5KVxuXHRcdGNvbnN0IHRhZ3M6IHN0cmluZ1tdID0gW107XG5cdFx0aWYgKG9wdGlvbnMpIHtcblx0XHRcdC8vIEVudGl0eSB0eXBlIHRhZ1xuXHRcdFx0dGFncy5wdXNoKGBzdG9yeS1lbmdpbmUvJHtvcHRpb25zLmVudGl0eVR5cGV9YCk7XG5cblx0XHRcdC8vIFN0b3J5IG5hbWUgdGFnIChzYW5pdGl6ZWQpXG5cdFx0XHRpZiAob3B0aW9ucy5zdG9yeU5hbWUpIHtcblx0XHRcdFx0Y29uc3Qgc2FuaXRpemVkU3RvcnlOYW1lID0gdGhpcy5zYW5pdGl6ZUZvbGRlck5hbWUob3B0aW9ucy5zdG9yeU5hbWUpXG5cdFx0XHRcdFx0LnRvTG93ZXJDYXNlKClcblx0XHRcdFx0XHQucmVwbGFjZSgvXFxzKy9nLCBcIi1cIik7XG5cdFx0XHRcdHRhZ3MucHVzaChgc3RvcnkvJHtzYW5pdGl6ZWRTdG9yeU5hbWV9YCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIERhdGUgdGFnIGluIGZvcm1hdCBZWVlZL01NL0REXG5cdFx0XHRpZiAob3B0aW9ucy5kYXRlKSB7XG5cdFx0XHRcdGNvbnN0IGRhdGUgPSB0eXBlb2Ygb3B0aW9ucy5kYXRlID09PSBcInN0cmluZ1wiID8gbmV3IERhdGUob3B0aW9ucy5kYXRlKSA6IG9wdGlvbnMuZGF0ZTtcblx0XHRcdFx0aWYgKCFpc05hTihkYXRlLmdldFRpbWUoKSkpIHtcblx0XHRcdFx0XHRjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuXHRcdFx0XHRcdGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRcdFx0XHRjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRcdFx0XHR0YWdzLnB1c2goYGRhdGUvJHt5ZWFyfS8ke21vbnRofS8ke2RheX1gKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEJ1aWxkIGZyb250bWF0dGVyIGxpbmVzXG5cdFx0Y29uc3QgbGluZXM6IHN0cmluZ1tdID0gW1wiLS0tXCJdO1xuXG5cdFx0Ly8gQWRkIGFsbCBmaWVsZHNcblx0XHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhmaWVsZHMpKSB7XG5cdFx0XHRpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRsaW5lcy5wdXNoKGAke2tleX06IG51bGxgKTtcblx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdC8vIEVzY2FwZSBxdW90ZXMgYW5kIHdyYXAgaW4gcXVvdGVzIGlmIGNvbnRhaW5zIHNwZWNpYWwgY2hhcnNcblx0XHRcdFx0Y29uc3QgZXNjYXBlZCA9IHZhbHVlLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKTtcblx0XHRcdFx0aWYgKHZhbHVlLmluY2x1ZGVzKFwiOlwiKSB8fCB2YWx1ZS5pbmNsdWRlcyhcIlxcblwiKSB8fCB2YWx1ZS5pbmNsdWRlcygnXCInKSkge1xuXHRcdFx0XHRcdGxpbmVzLnB1c2goYCR7a2V5fTogXCIke2VzY2FwZWR9XCJgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRsaW5lcy5wdXNoKGAke2tleX06ICR7ZXNjYXBlZH1gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bGluZXMucHVzaChgJHtrZXl9OiAke3ZhbHVlfWApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEFkZCB0YWdzIGlmIGFueVxuXHRcdGlmICh0YWdzLmxlbmd0aCA+IDApIHtcblx0XHRcdGxpbmVzLnB1c2goYHRhZ3M6YCk7XG5cdFx0XHRmb3IgKGNvbnN0IHRhZyBvZiB0YWdzKSB7XG5cdFx0XHRcdGxpbmVzLnB1c2goYCAgLSAke3RhZ31gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRsaW5lcy5wdXNoKFwiLS0tXCIsIFwiXCIpO1xuXG5cdFx0cmV0dXJuIGxpbmVzLmpvaW4oXCJcXG5cIik7XG5cdH1cblxuXHQvLyBFbnN1cmUgZm9sZGVyIGV4aXN0c1xuXHRhc3luYyBlbnN1cmVGb2xkZXJFeGlzdHMocGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgZm9sZGVyID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XG5cdFx0aWYgKCFmb2xkZXIpIHtcblx0XHRcdGF3YWl0IHRoaXMudmF1bHQuY3JlYXRlRm9sZGVyKHBhdGgpO1xuXHRcdH1cblx0fVxuXG5cdC8vIFdyaXRlIHN0b3J5IG1ldGFkYXRhIChzdG9yeS5tZClcblx0YXN5bmMgd3JpdGVTdG9yeU1ldGFkYXRhKFxuXHRcdHN0b3J5OiBTdG9yeSwgXG5cdFx0Zm9sZGVyUGF0aDogc3RyaW5nLCBcblx0XHRjaGFwdGVycz86IENoYXB0ZXJXaXRoQ29udGVudFtdLCBcblx0XHRvcnBoYW5TY2VuZXM/OiBTY2VuZVdpdGhCZWF0c1tdLCBcblx0XHRvcnBoYW5CZWF0cz86IEJlYXRbXSxcblx0XHRjaGFwdGVyQ29udGVudERhdGE/OiBNYXA8c3RyaW5nLCB7IGNvbnRlbnRCbG9ja3M6IENvbnRlbnRCbG9ja1tdLCBjb250ZW50QmxvY2tSZWZzOiBDb250ZW50QW5jaG9yW10gfT5cblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5lbnN1cmVGb2xkZXJFeGlzdHMoZm9sZGVyUGF0aCk7XG5cblx0XHRjb25zdCBiYXNlRmllbGRzID0ge1xuXHRcdFx0aWQ6IHN0b3J5LmlkLFxuXHRcdFx0dGl0bGU6IHN0b3J5LnRpdGxlLFxuXHRcdFx0c3RhdHVzOiBzdG9yeS5zdGF0dXMsXG5cdFx0XHR2ZXJzaW9uOiBzdG9yeS52ZXJzaW9uX251bWJlcixcblx0XHRcdHJvb3Rfc3RvcnlfaWQ6IHN0b3J5LnJvb3Rfc3RvcnlfaWQsXG5cdFx0XHRwcmV2aW91c192ZXJzaW9uX2lkOiBzdG9yeS5wcmV2aW91c19zdG9yeV9pZCxcblx0XHRcdGNyZWF0ZWRfYXQ6IHN0b3J5LmNyZWF0ZWRfYXQsXG5cdFx0XHR1cGRhdGVkX2F0OiBzdG9yeS51cGRhdGVkX2F0LFxuXHRcdH07XG5cblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMuZ2VuZXJhdGVGcm9udG1hdHRlcihiYXNlRmllbGRzLCB1bmRlZmluZWQsIHtcblx0XHRcdGVudGl0eVR5cGU6IFwic3RvcnlcIixcblx0XHRcdHN0b3J5TmFtZTogc3RvcnkudGl0bGUsXG5cdFx0XHRkYXRlOiBzdG9yeS5jcmVhdGVkX2F0LFxuXHRcdH0pO1xuXG5cdFx0bGV0IGNvbnRlbnQgPSBgJHtmcm9udG1hdHRlcn1cXG4jICR7c3RvcnkudGl0bGV9XFxuXFxuVmVyc2lvbjogJHtzdG9yeS52ZXJzaW9uX251bWJlcn1cXG5TdGF0dXM6ICR7c3Rvcnkuc3RhdHVzfVxcblxcbmA7XG5cblx0XHQvLyBGaWx0ZXIgb3V0IHRlbXBvcmFyeSBjaGFwdGVycyB1c2VkIGZvciBwcm9zZSBzdG9yYWdlXG5cdFx0Y29uc3QgdGVtcG9yYXJ5Q2hhcHRlclRpdGxlcyA9IFtcIlN0b3J5IFByb3NlXCIsIFwiU2NlbmUtTGV2ZWwgUHJvc2VcIiwgXCJCZWF0LUxldmVsIFByb3NlXCJdO1xuXHRcdGNvbnN0IGZpbHRlcmVkQ2hhcHRlcnMgPSBjaGFwdGVycz8uZmlsdGVyKGMgPT4gXG5cdFx0XHQhdGVtcG9yYXJ5Q2hhcHRlclRpdGxlcy5pbmNsdWRlcyhjLmNoYXB0ZXIudGl0bGUpICYmIGMuY2hhcHRlci5udW1iZXIgPCA5MDAwXG5cdFx0KSB8fCBbXTtcblxuXHRcdC8vIEdlbmVyYXRlIGhpZXJhcmNoaWNhbCBsaXN0IG9mIGNoYXB0ZXJzLCBzY2VuZXMgYW5kIGJlYXRzIGlmIHByb3ZpZGVkXG5cdFx0aWYgKGZpbHRlcmVkQ2hhcHRlcnMubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29udGVudCArPSBgIyMgQ2hhcHRlcnMsIFNjZW5lcyAmIEJlYXRzXFxuXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gWyFpbmZvXSBIb3cgdG8gdXNlIHRoaXMgbGlzdFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipDcmVhdGUgbmV3IGl0ZW0qKjogQWRkIGEgbGluZSB3aXRoIFxcYC1cXGAgZm9sbG93ZWQgYnkgdGhlIHRleHRcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgIC0gKipDaGFwdGVyKio6IE5vIGluZGVudGF0aW9uIChsZXZlbCAwKVxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgLSAqKlNjZW5lKio6IFVzZSAxIHRhYiBpbmRlbnRhdGlvbiAoaW5zaWRlIGEgY2hhcHRlcilcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgIC0gKipCZWF0Kio6IFVzZSAyIHRhYnMgaW5kZW50YXRpb24gKGluc2lkZSBhIHNjZW5lKVxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipSZW9yZGVyKio6IE1vdmUgaXRlbXMgdXAvZG93biB0byBjaGFuZ2Ugb3JkZXJcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqTGlua3MqKjogVXNlIFxcYFtbbGluay1uYW1lfHRleHRdXVxcYCB0byBjcmVhdGUgbGlua3MgdG8gZXhpc3RpbmcgZmlsZXNcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqRm9ybWF0Kio6XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAtICoqQ2hhcHRlcioqOlxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgICAtIENvbXBsZXRlOiBcXGBDaGFwdGVyIE46IHRpdGxlXFxgXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgIC0gU2ltcGxpZmllZDogXFxgdGl0bGVcXGBcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgIC0gKipTY2VuZSoqOlxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgICAtIENvbXBsZXRlOiBcXGBTY2VuZSBOOiBnb2FsIC0gdGltZVJlZlxcYFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgICAtIFNpbXBsaWZpZWQ6XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgICAgLSBcXGBnb2FsIC0gdGltZVJlZlxcYFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgICAgIC0gXFxgZ29hbFxcYFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgLSAqKkJlYXQqKjpcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgICAgLSBDb21wbGV0ZTogXFxgQmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZVxcYFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgICAtIFNpbXBsaWZpZWQ6XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgICAgLSBcXGBpbnRlbnQgLT4gb3V0Y29tZVxcYFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgICAgIC0gXFxgaW50ZW50XFxgXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gLSAqKk1hcmtlcnMqKjogXFxgLVxcYCBpbmRpY2F0ZXMgbm8gYXNzb2NpYXRlZCBwcm9zZSwgXFxgK1xcYCBpbmRpY2F0ZXMgYXNzb2NpYXRlZCBwcm9zZVxcblxcbmA7XG5cdFx0XHRcblx0XHRcdC8vIEFkZCBjaGFwdGVycyB3aXRoIHRoZWlyIHNjZW5lcyBhbmQgYmVhdHNcblx0XHRcdGZvciAoY29uc3QgY2hhcHRlcldpdGhDb250ZW50IG9mIGZpbHRlcmVkQ2hhcHRlcnMpIHtcblx0XHRcdFx0Y29uc3QgY2hhcHRlciA9IGNoYXB0ZXJXaXRoQ29udGVudC5jaGFwdGVyO1xuXHRcdFx0XHRjb25zdCBjaGFwdGVyRmlsZU5hbWUgPSBgQ2hhcHRlci0ke2NoYXB0ZXIubnVtYmVyfS5tZGA7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJMaW5rTmFtZSA9IGNoYXB0ZXJGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIEZvciBub3csIHdlIGRvbid0IHRyYWNrIHByb3NlIGF0IHN0b3J5IGxldmVsLCBzbyBhbHdheXMgdXNlIFwiLVwiXG5cdFx0XHRcdC8vIEluIHRoZSBmdXR1cmUsIHdlIGNvdWxkIGNoZWNrIGlmIGNoYXB0ZXIgaGFzIGFueSBwcm9zZSBibG9ja3Ncblx0XHRcdFx0Y29udGVudCArPSBgLSBbWyR7Y2hhcHRlckxpbmtOYW1lfXxDaGFwdGVyICR7Y2hhcHRlci5udW1iZXJ9OiAke2NoYXB0ZXIudGl0bGV9XV1cXG5gO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQWRkIHNjZW5lcyBmb3IgdGhpcyBjaGFwdGVyXG5cdFx0XHRcdGZvciAoY29uc3QgeyBzY2VuZSwgYmVhdHMgfSBvZiBjaGFwdGVyV2l0aENvbnRlbnQuc2NlbmVzKSB7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lKTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUxpbmtOYW1lID0gc2NlbmVGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZURpc3BsYXlUZXh0ID0gc2NlbmUudGltZV9yZWYgXG5cdFx0XHRcdFx0XHQ/IGAke3NjZW5lLmdvYWx9IC0gJHtzY2VuZS50aW1lX3JlZn1gXG5cdFx0XHRcdFx0XHQ6IHNjZW5lLmdvYWw7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gRm9yIG5vdywgd2UgZG9uJ3QgdHJhY2sgcHJvc2UgYXQgc3RvcnkgbGV2ZWwsIHNvIGFsd2F5cyB1c2UgXCItXCJcblx0XHRcdFx0XHRjb250ZW50ICs9IGBcXHQtIFtbJHtzY2VuZUxpbmtOYW1lfXxTY2VuZSAke3NjZW5lLm9yZGVyX251bX06ICR7c2NlbmVEaXNwbGF5VGV4dH1dXVxcbmA7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gQWRkIGJlYXRzIGZvciB0aGlzIHNjZW5lXG5cdFx0XHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIGJlYXRzKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0Y29uc3QgYmVhdERpc3BsYXlUZXh0ID0gYmVhdC5vdXRjb21lXG5cdFx0XHRcdFx0XHRcdD8gYCR7YmVhdC5pbnRlbnR9IC0+ICR7YmVhdC5vdXRjb21lfWBcblx0XHRcdFx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gRm9yIG5vdywgd2UgZG9uJ3QgdHJhY2sgcHJvc2UgYXQgc3RvcnkgbGV2ZWwsIHNvIGFsd2F5cyB1c2UgXCItXCJcblx0XHRcdFx0XHRcdGNvbnRlbnQgKz0gYFxcdFxcdC0gW1ske2JlYXRMaW5rTmFtZX18QmVhdCAke2JlYXQub3JkZXJfbnVtfTogJHtiZWF0RGlzcGxheVRleHR9XV1cXG5gO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Y29udGVudCArPSBgXFxuYDtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gR2VuZXJhdGUgc2VwYXJhdGUgbGlzdCBmb3Igb3JwaGFuIHNjZW5lcyAoc2NlbmVzIHdpdGhvdXQgY2hhcHRlcl9pZClcblx0XHRpZiAob3JwaGFuU2NlbmVzICYmIG9ycGhhblNjZW5lcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb250ZW50ICs9IGAjIyBPcnBoYW4gU2NlbmVzXFxuXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gWyFpbmZvXSBTY2VuZXMgd2l0aG91dCBhIGNoYXB0ZXJcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiBUaGVzZSBzY2VuZXMgYXJlIG5vdCBhc3NvY2lhdGVkIHdpdGggYW55IGNoYXB0ZXIuIFlvdSBjYW46XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gLSAqKlJlb3JkZXIqKjogTW92ZSBpdGVtcyB1cC9kb3duIHRvIGNoYW5nZSBvcmRlclxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipMaW5rcyoqOiBVc2UgXFxgW1tsaW5rLW5hbWV8dGV4dF1dXFxgIHRvIGNyZWF0ZSBsaW5rcyB0byBleGlzdGluZyBmaWxlc1xcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipGb3JtYXQqKjpcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgIC0gQ29tcGxldGU6IFxcYFNjZW5lIE46IGdvYWwgLSB0aW1lUmVmXFxgXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAtIFNpbXBsaWZpZWQ6XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgIC0gXFxgZ29hbCAtIHRpbWVSZWZcXGBcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgICAgLSBcXGBnb2FsXFxgXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gLSAqKk1hcmtlcnMqKjogXFxgLVxcYCBpbmRpY2F0ZXMgbm8gYXNzb2NpYXRlZCBwcm9zZSwgXFxgK1xcYCBpbmRpY2F0ZXMgYXNzb2NpYXRlZCBwcm9zZVxcblxcbmA7XG5cdFx0XHRcblx0XHRcdGZvciAoY29uc3QgeyBzY2VuZSwgYmVhdHMgfSBvZiBvcnBoYW5TY2VuZXMpIHtcblx0XHRcdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lKTtcblx0XHRcdFx0Y29uc3Qgc2NlbmVMaW5rTmFtZSA9IHNjZW5lRmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdGNvbnN0IHNjZW5lRGlzcGxheVRleHQgPSBzY2VuZS50aW1lX3JlZiBcblx0XHRcdFx0XHQ/IGAke3NjZW5lLmdvYWx9IC0gJHtzY2VuZS50aW1lX3JlZn1gXG5cdFx0XHRcdFx0OiBzY2VuZS5nb2FsO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gRm9yIG5vdywgd2UgZG9uJ3QgdHJhY2sgcHJvc2UgYXQgc3RvcnkgbGV2ZWwsIHNvIGFsd2F5cyB1c2UgXCItXCJcblx0XHRcdFx0Y29udGVudCArPSBgLSBbWyR7c2NlbmVMaW5rTmFtZX18U2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lRGlzcGxheVRleHR9XV1cXG5gO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQWRkIGJlYXRzIGZvciB0aGlzIHNjZW5lXG5cdFx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cykge1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXREaXNwbGF5VGV4dCA9IGJlYXQub3V0Y29tZVxuXHRcdFx0XHRcdFx0PyBgJHtiZWF0LmludGVudH0gLT4gJHtiZWF0Lm91dGNvbWV9YFxuXHRcdFx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBGb3Igbm93LCB3ZSBkb24ndCB0cmFjayBwcm9zZSBhdCBzdG9yeSBsZXZlbCwgc28gYWx3YXlzIHVzZSBcIi1cIlxuXHRcdFx0XHRcdGNvbnRlbnQgKz0gYFxcdC0gW1ske2JlYXRMaW5rTmFtZX18QmVhdCAke2JlYXQub3JkZXJfbnVtfTogJHtiZWF0RGlzcGxheVRleHR9XV1cXG5gO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRjb250ZW50ICs9IGBcXG5gO1xuXHRcdH1cblx0XHRcblx0XHQvLyBHZW5lcmF0ZSBzZXBhcmF0ZSBsaXN0IGZvciBvcnBoYW4gYmVhdHMgKGJlYXRzIHdpdGhvdXQgc2NlbmVfaWQpXG5cdFx0aWYgKG9ycGhhbkJlYXRzICYmIG9ycGhhbkJlYXRzLmxlbmd0aCA+IDApIHtcblx0XHRcdGNvbnRlbnQgKz0gYCMjIE9ycGhhbiBCZWF0c1xcblxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IFshaW5mb10gQmVhdHMgd2l0aG91dCBhIHNjZW5lXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gVGhlc2UgYmVhdHMgYXJlIG5vdCBhc3NvY2lhdGVkIHdpdGggYW55IHNjZW5lLiBZb3UgY2FuOlxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipSZW9yZGVyKio6IE1vdmUgaXRlbXMgdXAvZG93biB0byBjaGFuZ2Ugb3JkZXJcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqTGlua3MqKjogVXNlIFxcYFtbbGluay1uYW1lfHRleHRdXVxcYCB0byBjcmVhdGUgbGlua3MgdG8gZXhpc3RpbmcgZmlsZXNcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqRm9ybWF0Kio6XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAtIENvbXBsZXRlOiBcXGBCZWF0IE46IGludGVudCAtPiBvdXRjb21lXFxgXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAtIFNpbXBsaWZpZWQ6XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgIC0gXFxgaW50ZW50IC0+IG91dGNvbWVcXGBcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgICAgLSBcXGBpbnRlbnRcXGBcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqTWFya2VycyoqOiBcXGAtXFxgIGluZGljYXRlcyBubyBhc3NvY2lhdGVkIHByb3NlLCBcXGArXFxgIGluZGljYXRlcyBhc3NvY2lhdGVkIHByb3NlXFxuXFxuYDtcblx0XHRcdFxuXHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIG9ycGhhbkJlYXRzKSB7XG5cdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRcdGNvbnN0IGJlYXRMaW5rTmFtZSA9IGJlYXRGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0Y29uc3QgYmVhdERpc3BsYXlUZXh0ID0gYmVhdC5vdXRjb21lXG5cdFx0XHRcdFx0PyBgJHtiZWF0LmludGVudH0gLT4gJHtiZWF0Lm91dGNvbWV9YFxuXHRcdFx0XHRcdDogYmVhdC5pbnRlbnQ7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBGb3Igbm93LCB3ZSBkb24ndCB0cmFjayBwcm9zZSBhdCBzdG9yeSBsZXZlbCwgc28gYWx3YXlzIHVzZSBcIi1cIlxuXHRcdFx0XHRjb250ZW50ICs9IGAtIFtbJHtiZWF0TGlua05hbWV9fEJlYXQgJHtiZWF0Lm9yZGVyX251bX06ICR7YmVhdERpc3BsYXlUZXh0fV1dXFxuYDtcblx0XHRcdH1cblx0XHRcdGNvbnRlbnQgKz0gYFxcbmA7XG5cdFx0fVxuXG5cdFx0Ly8gR2VuZXJhdGUgaGllcmFyY2hpY2FsIHByb3NlIHNlY3Rpb24gZm9yIHRoZSBzdG9yeVxuXHRcdGNvbnRlbnQgKz0gYCMgU3Rvcnk6ICR7c3RvcnkudGl0bGV9XFxuXFxuYDtcblxuXHRcdC8vIEFkZCBjaGFwdGVycyB3aXRoIHRoZWlyIHNjZW5lcywgYmVhdHMsIGFuZCBwcm9zZSBibG9ja3Ncblx0XHRpZiAoZmlsdGVyZWRDaGFwdGVycy5sZW5ndGggPiAwKSB7XG5cdFx0XHRmb3IgKGNvbnN0IGNoYXB0ZXJXaXRoQ29udGVudCBvZiBmaWx0ZXJlZENoYXB0ZXJzKSB7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXIgPSBjaGFwdGVyV2l0aENvbnRlbnQuY2hhcHRlcjtcblx0XHRcdFx0Y29uc3QgY2hhcHRlckZpbGVOYW1lID0gYENoYXB0ZXItJHtjaGFwdGVyLm51bWJlcn0ubWRgO1xuXHRcdFx0XHRjb25zdCBjaGFwdGVyTGlua05hbWUgPSBjaGFwdGVyRmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb250ZW50ICs9IGAjIyBDaGFwdGVyICR7Y2hhcHRlci5udW1iZXJ9OiBbWyR7Y2hhcHRlckxpbmtOYW1lfXwke2NoYXB0ZXIudGl0bGV9XV1cXG5cXG5gO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gR2V0IGNvbnRlbnQgZGF0YSBmb3IgdGhpcyBjaGFwdGVyXG5cdFx0XHRcdGNvbnN0IGNvbnRlbnREYXRhID0gY2hhcHRlckNvbnRlbnREYXRhPy5nZXQoY2hhcHRlci5pZCk7XG5cdFx0XHRcdGxldCBvcmdhbml6YXRpb246IFJldHVyblR5cGU8dHlwZW9mIHRoaXMub3JnYW5pemVDb250ZW50QmxvY2tzPiB8IG51bGwgPSBudWxsO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKGNvbnRlbnREYXRhKSB7XG5cdFx0XHRcdFx0b3JnYW5pemF0aW9uID0gdGhpcy5vcmdhbml6ZUNvbnRlbnRCbG9ja3MoXG5cdFx0XHRcdFx0XHRjb250ZW50RGF0YS5jb250ZW50QmxvY2tzLFxuXHRcdFx0XHRcdFx0Y29udGVudERhdGEuY29udGVudEJsb2NrUmVmcyxcblx0XHRcdFx0XHRcdGNoYXB0ZXJXaXRoQ29udGVudC5zY2VuZXNcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIEFkZCBjaGFwdGVyLW9ubHkgY29udGVudCBibG9ja3Ncblx0XHRcdFx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBvcmdhbml6YXRpb24uY2hhcHRlck9ubHkpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGNvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0Y29udGVudCArPSBgW1ske2xpbmtOYW1lfXwke2NvbnRlbnRCbG9jay5jb250ZW50LnN1YnN0cmluZygwLCA1MCl9Li4uXV1cXG5cXG5gO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQWRkIHNjZW5lcyBmb3IgdGhpcyBjaGFwdGVyXG5cdFx0XHRcdGZvciAoY29uc3QgeyBzY2VuZSwgYmVhdHMgfSBvZiBjaGFwdGVyV2l0aENvbnRlbnQuc2NlbmVzKSB7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lKTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUxpbmtOYW1lID0gc2NlbmVGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZURpc3BsYXlUZXh0ID0gc2NlbmUudGltZV9yZWYgXG5cdFx0XHRcdFx0XHQ/IGAke3NjZW5lLmdvYWx9IC0gJHtzY2VuZS50aW1lX3JlZn1gXG5cdFx0XHRcdFx0XHQ6IHNjZW5lLmdvYWw7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29udGVudCArPSBgIyMjIFNjZW5lOiBbWyR7c2NlbmVMaW5rTmFtZX18JHtzY2VuZURpc3BsYXlUZXh0fV1dXFxuXFxuYDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBBZGQgc2NlbmUgY29udGVudCBibG9ja3Ncblx0XHRcdFx0XHRpZiAob3JnYW5pemF0aW9uKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBzY2VuZUNvbnRlbnRCbG9ja3MgPSBvcmdhbml6YXRpb24uYnlTY2VuZS5nZXQoc2NlbmUuaWQpPy5jb250ZW50QmxvY2tzIHx8IFtdO1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2Ygc2NlbmVDb250ZW50QmxvY2tzKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGNvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQgKz0gYFtbJHtsaW5rTmFtZX18JHtjb250ZW50QmxvY2suY29udGVudC5zdWJzdHJpbmcoMCwgNTApfS4uLl1dXFxuXFxuYDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gQWRkIGJlYXRzIGZvciB0aGlzIHNjZW5lXG5cdFx0XHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIGJlYXRzKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0Y29uc3QgYmVhdERpc3BsYXlUZXh0ID0gYmVhdC5vdXRjb21lXG5cdFx0XHRcdFx0XHRcdD8gYCR7YmVhdC5pbnRlbnR9IC0+ICR7YmVhdC5vdXRjb21lfWBcblx0XHRcdFx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Y29udGVudCArPSBgIyMjIyBCZWF0OiBbWyR7YmVhdExpbmtOYW1lfXwke2JlYXREaXNwbGF5VGV4dH1dXVxcblxcbmA7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vIEFkZCBiZWF0IGNvbnRlbnQgYmxvY2tzXG5cdFx0XHRcdFx0XHRpZiAob3JnYW5pemF0aW9uKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGJlYXRDb250ZW50QmxvY2tzID0gb3JnYW5pemF0aW9uLmJ5QmVhdC5nZXQoYmVhdC5pZCk/LmNvbnRlbnRCbG9ja3MgfHwgW107XG5cdFx0XHRcdFx0XHRcdGZvciAoY29uc3QgY29udGVudEJsb2NrIG9mIGJlYXRDb250ZW50QmxvY2tzKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoY29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRlbnQgKz0gYFtbJHtsaW5rTmFtZX18JHtjb250ZW50QmxvY2suY29udGVudC5zdWJzdHJpbmcoMCwgNTApfS4uLl1dXFxuXFxuYDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEFkZCBvcnBoYW4gc2NlbmVzIGluIHRoZSBwcm9zZSBzZWN0aW9uXG5cdFx0aWYgKG9ycGhhblNjZW5lcyAmJiBvcnBoYW5TY2VuZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0Zm9yIChjb25zdCB7IHNjZW5lLCBiZWF0cyB9IG9mIG9ycGhhblNjZW5lcykge1xuXHRcdFx0XHRjb25zdCBzY2VuZUZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZVNjZW5lRmlsZU5hbWUoc2NlbmUpO1xuXHRcdFx0XHRjb25zdCBzY2VuZUxpbmtOYW1lID0gc2NlbmVGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0Y29uc3Qgc2NlbmVEaXNwbGF5VGV4dCA9IHNjZW5lLnRpbWVfcmVmIFxuXHRcdFx0XHRcdD8gYCR7c2NlbmUuZ29hbH0gLSAke3NjZW5lLnRpbWVfcmVmfWBcblx0XHRcdFx0XHQ6IHNjZW5lLmdvYWw7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb250ZW50ICs9IGAjIyMgU2NlbmU6IFtbJHtzY2VuZUxpbmtOYW1lfXwke3NjZW5lRGlzcGxheVRleHR9XV1cXG5cXG5gO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQWRkIGJlYXRzIGZvciB0aGlzIHNjZW5lXG5cdFx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cykge1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXREaXNwbGF5VGV4dCA9IGJlYXQub3V0Y29tZVxuXHRcdFx0XHRcdFx0PyBgJHtiZWF0LmludGVudH0gLT4gJHtiZWF0Lm91dGNvbWV9YFxuXHRcdFx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjb250ZW50ICs9IGAjIyMjIEJlYXQ6IFtbJHtiZWF0TGlua05hbWV9fCR7YmVhdERpc3BsYXlUZXh0fV1dXFxuXFxuYDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IGZpbGVQYXRoID0gYCR7Zm9sZGVyUGF0aH0vc3RvcnkubWRgO1xuXG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRhd2FpdCB0aGlzLnZhdWx0Lm1vZGlmeShmaWxlLCBjb250ZW50KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YXdhaXQgdGhpcy52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuXHRcdH1cblx0fVxuXG5cdC8vIFdyaXRlIGNoYXB0ZXIgZmlsZVxuXHRhc3luYyB3cml0ZUNoYXB0ZXJGaWxlKFxuXHRcdGNoYXB0ZXJXaXRoQ29udGVudDogQ2hhcHRlcldpdGhDb250ZW50LFxuXHRcdGZpbGVQYXRoOiBzdHJpbmcsXG5cdFx0c3RvcnlOYW1lPzogc3RyaW5nLFxuXHRcdGNvbnRlbnRCbG9ja3M/OiBDb250ZW50QmxvY2tbXSxcblx0XHRjb250ZW50QmxvY2tSZWZzPzogQ29udGVudEFuY2hvcltdLFxuXHRcdG9ycGhhblNjZW5lcz86IFNjZW5lV2l0aEJlYXRzW10gLy8gSW5jbHVkZSBvcnBoYW4gc2NlbmVzIGZvciBlYXN5IGFzc29jaWF0aW9uXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IHsgY2hhcHRlciwgc2NlbmVzIH0gPSBjaGFwdGVyV2l0aENvbnRlbnQ7XG5cblx0XHRjb25zdCBiYXNlRmllbGRzID0ge1xuXHRcdFx0aWQ6IGNoYXB0ZXIuaWQsXG5cdFx0XHRzdG9yeV9pZDogY2hhcHRlci5zdG9yeV9pZCxcblx0XHRcdG51bWJlcjogY2hhcHRlci5udW1iZXIsXG5cdFx0XHR0aXRsZTogY2hhcHRlci50aXRsZSxcblx0XHRcdHN0YXR1czogY2hhcHRlci5zdGF0dXMsXG5cdFx0XHRjcmVhdGVkX2F0OiBjaGFwdGVyLmNyZWF0ZWRfYXQsXG5cdFx0XHR1cGRhdGVkX2F0OiBjaGFwdGVyLnVwZGF0ZWRfYXQsXG5cdFx0fTtcblxuXHRcdGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5nZW5lcmF0ZUZyb250bWF0dGVyKGJhc2VGaWVsZHMsIHVuZGVmaW5lZCwge1xuXHRcdFx0ZW50aXR5VHlwZTogXCJjaGFwdGVyXCIsXG5cdFx0XHRzdG9yeU5hbWU6IHN0b3J5TmFtZSxcblx0XHRcdGRhdGU6IGNoYXB0ZXIuY3JlYXRlZF9hdCxcblx0XHR9KTtcblxuXHRcdGxldCBjb250ZW50ID0gYCR7ZnJvbnRtYXR0ZXJ9XFxuIyAke2NoYXB0ZXIudGl0bGV9XFxuXFxuYDtcblxuXHRcdC8vIE9yZ2FuaXplIHByb3NlIGJsb2NrcyBieSB0aGVpciBhc3NvY2lhdGlvbnNcblx0XHRjb25zdCBvcmdhbml6YXRpb24gPSB0aGlzLm9yZ2FuaXplQ29udGVudEJsb2Nrcyhcblx0XHRcdGNvbnRlbnRCbG9ja3MgfHwgW10sXG5cdFx0XHRjb250ZW50QmxvY2tSZWZzIHx8IFtdLFxuXHRcdFx0c2NlbmVzXG5cdFx0KTtcblxuXHRcdC8vIEdlbmVyYXRlIGxpc3Qgb2Ygc2NlbmVzIGFuZCBiZWF0cyB3aXRoIHByb3NlIGluZGljYXRvcnNcblx0XHRjb250ZW50ICs9IGAjIyBTY2VuZXMgJiBCZWF0c1xcblxcbmA7XG5cdFx0Y29udGVudCArPSBgPiBbIWluZm9dIEhvdyB0byB1c2UgdGhpcyBsaXN0XFxuYDtcblx0XHRjb250ZW50ICs9IGA+IC0gKipDcmVhdGUgbmV3IGl0ZW0qKjogQWRkIGEgbGluZSB3aXRoIFxcYC1cXGAgZm9sbG93ZWQgYnkgdGhlIHRleHRcXG5gO1xuXHRcdGNvbnRlbnQgKz0gYD4gICAtICoqU2NlbmUqKjogTm8gaW5kZW50YXRpb24gKGxldmVsIDApXFxuYDtcblx0XHRjb250ZW50ICs9IGA+ICAgLSAqKkJlYXQqKjogVXNlIDEgdGFiIGluZGVudGF0aW9uIChpbnNpZGUgYSBzY2VuZSlcXG5gO1xuXHRcdGNvbnRlbnQgKz0gYD4gLSAqKlJlb3JkZXIqKjogTW92ZSBpdGVtcyB1cC9kb3duIHRvIGNoYW5nZSBvcmRlclxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAtICoqTGlua3MqKjogVXNlIFxcYFtbbGluay1uYW1lfHRleHRdXVxcYCB0byBjcmVhdGUgbGlua3MgdG8gZXhpc3RpbmcgZmlsZXNcXG5gO1xuXHRcdGNvbnRlbnQgKz0gYD4gLSAqKkZvcm1hdCoqOlxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAgIC0gKipTY2VuZSoqOlxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAgICAgLSBDb21wbGV0ZTogXFxgU2NlbmUgTjogZ29hbCAtIHRpbWVSZWZcXGBcXG5gO1xuXHRcdGNvbnRlbnQgKz0gYD4gICAgIC0gU2ltcGxpZmllZDpcXG5gO1xuXHRcdGNvbnRlbnQgKz0gYD4gICAgICAgLSBcXGBnb2FsIC0gdGltZVJlZlxcYFxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAgICAgICAtIFxcYGdvYWxcXGBcXG5gO1xuXHRcdGNvbnRlbnQgKz0gYD4gICAtICoqQmVhdCoqOlxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAgICAgLSBDb21wbGV0ZTogXFxgQmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZVxcYFxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAgICAgLSBTaW1wbGlmaWVkOlxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAgICAgICAtIFxcYGludGVudCAtPiBvdXRjb21lXFxgXFxuYDtcblx0XHRjb250ZW50ICs9IGA+ICAgICAgIC0gXFxgaW50ZW50XFxgXFxuYDtcblx0XHRjb250ZW50ICs9IGA+IC0gKipNYXJrZXJzKio6IFxcYC1cXGAgaW5kaWNhdGVzIG5vIGFzc29jaWF0ZWQgcHJvc2UsIFxcYCtcXGAgaW5kaWNhdGVzIGFzc29jaWF0ZWQgcHJvc2VcXG5gO1xuXHRcdGNvbnRlbnQgKz0gYD4gLSAqKk9ycGhhbiBzY2VuZXMqKiAod2l0aG91dCBjaGFwdGVyKSBhcmUgc2hvd24gYmVsb3cgZm9yIGVhc3kgYXNzb2NpYXRpb25cXG5cXG5gO1xuXHRcdFxuXHRcdC8vIEFkZCBzY2VuZXMgZm9yIHRoaXMgY2hhcHRlclxuXHRcdGZvciAoY29uc3QgeyBzY2VuZSwgYmVhdHMgfSBvZiBzY2VuZXMpIHtcblx0XHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0XHRjb25zdCBzY2VuZUxpbmtOYW1lID0gc2NlbmVGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdGNvbnN0IHNjZW5lRGlzcGxheVRleHQgPSBzY2VuZS50aW1lX3JlZiBcblx0XHRcdFx0PyBgJHtzY2VuZS5nb2FsfSAtICR7c2NlbmUudGltZV9yZWZ9YFxuXHRcdFx0XHQ6IHNjZW5lLmdvYWw7XG5cdFx0XHRcblx0XHRcdC8vIENoZWNrIGlmIHNjZW5lIGhhcyBjb250ZW50IGJsb2NrcyAobm90IGFzc29jaWF0ZWQgd2l0aCBiZWF0cylcblx0XHRcdGNvbnN0IHNjZW5lQ29udGVudEJsb2NrcyA9IG9yZ2FuaXphdGlvbi5ieVNjZW5lLmdldChzY2VuZS5pZCk/LmNvbnRlbnRCbG9ja3MgfHwgW107XG5cdFx0XHRjb25zdCBoYXNTY2VuZUNvbnRlbnQgPSBzY2VuZUNvbnRlbnRCbG9ja3MubGVuZ3RoID4gMDtcblx0XHRcdGNvbnN0IHNjZW5lTWFya2VyID0gaGFzU2NlbmVDb250ZW50ID8gXCIrXCIgOiBcIi1cIjtcblx0XHRcdFxuXHRcdFx0Y29udGVudCArPSBgJHtzY2VuZU1hcmtlcn0gW1ske3NjZW5lTGlua05hbWV9fFNjZW5lICR7c2NlbmUub3JkZXJfbnVtfTogJHtzY2VuZURpc3BsYXlUZXh0fV1dXFxuYDtcblx0XHRcdFxuXHRcdFx0Ly8gQWRkIGJlYXRzIGZvciB0aGlzIHNjZW5lXG5cdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRjb25zdCBiZWF0RGlzcGxheVRleHQgPSBiZWF0Lm91dGNvbWVcblx0XHRcdFx0XHQ/IGAke2JlYXQuaW50ZW50fSAtPiAke2JlYXQub3V0Y29tZX1gXG5cdFx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIENoZWNrIGlmIGJlYXQgaGFzIGNvbnRlbnQgYmxvY2tzXG5cdFx0XHRcdGNvbnN0IGJlYXRDb250ZW50QmxvY2tzID0gb3JnYW5pemF0aW9uLmJ5QmVhdC5nZXQoYmVhdC5pZCk/LmNvbnRlbnRCbG9ja3MgfHwgW107XG5cdFx0XHRcdGNvbnN0IGhhc0JlYXRDb250ZW50ID0gYmVhdENvbnRlbnRCbG9ja3MubGVuZ3RoID4gMDtcblx0XHRcdFx0Y29uc3QgYmVhdE1hcmtlciA9IGhhc0JlYXRDb250ZW50ID8gXCIrXCIgOiBcIi1cIjtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnRlbnQgKz0gYFxcdCR7YmVhdE1hcmtlcn0gW1ske2JlYXRMaW5rTmFtZX18QmVhdCAke2JlYXQub3JkZXJfbnVtfTogJHtiZWF0RGlzcGxheVRleHR9XV1cXG5gO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHQvLyBBZGQgb3JwaGFuIHNjZW5lcyAoc2NlbmVzIHdpdGhvdXQgY2hhcHRlcl9pZCkgZm9yIGVhc3kgYXNzb2NpYXRpb25cblx0XHRpZiAob3JwaGFuU2NlbmVzICYmIG9ycGhhblNjZW5lcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb250ZW50ICs9IGBcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiBbIWluZm9dIE9ycGhhbiBTY2VuZXMgKG5vdCB5ZXQgYXNzb2NpYXRlZCB3aXRoIHRoaXMgY2hhcHRlcilcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiBZb3UgY2FuIGFzc29jaWF0ZSB0aGVzZSBzY2VuZXMgd2l0aCB0aGlzIGNoYXB0ZXIgYnkgbW92aW5nIHRoZW0gaGVyZS5cXG5cXG5gO1xuXHRcdFx0XG5cdFx0XHRmb3IgKGNvbnN0IHsgc2NlbmUsIGJlYXRzIH0gb2Ygb3JwaGFuU2NlbmVzKSB7XG5cdFx0XHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0XHRcdGNvbnN0IHNjZW5lTGlua05hbWUgPSBzY2VuZUZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRjb25zdCBzY2VuZURpc3BsYXlUZXh0ID0gc2NlbmUudGltZV9yZWYgXG5cdFx0XHRcdFx0PyBgJHtzY2VuZS5nb2FsfSAtICR7c2NlbmUudGltZV9yZWZ9YFxuXHRcdFx0XHRcdDogc2NlbmUuZ29hbDtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIEZvciBub3csIHdlIGRvbid0IHRyYWNrIHByb3NlIGF0IGNoYXB0ZXIgbGV2ZWwsIHNvIGFsd2F5cyB1c2UgXCItXCJcblx0XHRcdFx0Y29udGVudCArPSBgLSBbWyR7c2NlbmVMaW5rTmFtZX18U2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lRGlzcGxheVRleHR9XV1cXG5gO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQWRkIGJlYXRzIGZvciB0aGlzIG9ycGhhbiBzY2VuZVxuXHRcdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRMaW5rTmFtZSA9IGJlYXRGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRjb25zdCBiZWF0RGlzcGxheVRleHQgPSBiZWF0Lm91dGNvbWVcblx0XHRcdFx0XHRcdD8gYCR7YmVhdC5pbnRlbnR9IC0+ICR7YmVhdC5vdXRjb21lfWBcblx0XHRcdFx0XHRcdDogYmVhdC5pbnRlbnQ7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gRm9yIG5vdywgd2UgZG9uJ3QgdHJhY2sgcHJvc2UgYXQgY2hhcHRlciBsZXZlbCwgc28gYWx3YXlzIHVzZSBcIi1cIlxuXHRcdFx0XHRcdGNvbnRlbnQgKz0gYFxcdC0gW1ske2JlYXRMaW5rTmFtZX18QmVhdCAke2JlYXQub3JkZXJfbnVtfTogJHtiZWF0RGlzcGxheVRleHR9XV1cXG5gO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdGNvbnRlbnQgKz0gYFxcbmA7XG5cblx0XHQvLyBHZW5lcmF0ZSBoaWVyYXJjaGljYWwgcHJvc2Ugc2VjdGlvbiB3aXRoIGNoYXB0ZXIgaGVhZGVyXG5cdFx0Y29udGVudCArPSBgIyMgQ2hhcHRlciAke2NoYXB0ZXIubnVtYmVyfTogJHtjaGFwdGVyLnRpdGxlfVxcblxcbmA7XG5cblx0XHQvLyBBZGQgcHJvc2UgYmxvY2tzIHRoYXQgYXJlIG9ubHkgYXNzb2NpYXRlZCB3aXRoIGNoYXB0ZXJcblx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBvcmdhbml6YXRpb24uY2hhcHRlck9ubHkpIHtcblx0XHRcdGNvbnN0IGZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGNvbnRlbnRCbG9jayk7XG5cdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0Y29udGVudCArPSBgW1ske2xpbmtOYW1lfXwke2NvbnRlbnRCbG9jay5jb250ZW50LnN1YnN0cmluZygwLCA1MCl9Li4uXV1cXG5cXG5gO1xuXHRcdH1cblxuXHRcdC8vIEFkZCBzY2VuZXMgd2l0aCB0aGVpciBwcm9zZSBibG9ja3MgYW5kIGJlYXRzXG5cdFx0Zm9yIChjb25zdCB7IHNjZW5lLCBiZWF0cyB9IG9mIHNjZW5lcykge1xuXHRcdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lKTtcblx0XHRcdGNvbnN0IHNjZW5lTGlua05hbWUgPSBzY2VuZUZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XG5cdFx0XHQvLyBGb3JtYXQgc2NlbmUgaGVhZGVyOiAjIyBTY2VuZTogW1tsaW5rfGdvYWwgLSB0aW1lUmVmXV0gb3IgIyMgU2NlbmU6IFtbbGlua3xnb2FsXV1cblx0XHRcdGNvbnN0IHNjZW5lRGlzcGxheVRleHQgPSBzY2VuZS50aW1lX3JlZiBcblx0XHRcdFx0PyBgJHtzY2VuZS5nb2FsfSAtICR7c2NlbmUudGltZV9yZWZ9YFxuXHRcdFx0XHQ6IHNjZW5lLmdvYWw7XG5cdFx0XHRjb250ZW50ICs9IGAjIyBTY2VuZTogW1ske3NjZW5lTGlua05hbWV9fCR7c2NlbmVEaXNwbGF5VGV4dH1dXVxcblxcbmA7XG5cblx0XHRcdC8vIEdldCBwcm9zZSBibG9ja3MgZm9yIHRoaXMgc2NlbmUgKG5vdCBhc3NvY2lhdGVkIHdpdGggYW55IGJlYXQpXG5cdFx0XHRjb25zdCBzY2VuZUNvbnRlbnRCbG9ja3MgPSBvcmdhbml6YXRpb24uYnlTY2VuZS5nZXQoc2NlbmUuaWQpPy5jb250ZW50QmxvY2tzIHx8IFtdO1xuXHRcdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2Ygc2NlbmVDb250ZW50QmxvY2tzKSB7XG5cdFx0XHRcdGNvbnN0IGZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGNvbnRlbnRCbG9jayk7XG5cdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdGNvbnRlbnQgKz0gYFtbJHtsaW5rTmFtZX18JHtjb250ZW50QmxvY2suY29udGVudC5zdWJzdHJpbmcoMCwgNTApfS4uLl1dXFxuXFxuYDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIGJlYXRzIHdpdGggdGhlaXIgcHJvc2UgYmxvY2tzXG5cdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gRm9ybWF0IGJlYXQgaGVhZGVyOiAjIyMgQmVhdDogW1tsaW5rfGludGVudCAtPiBvdXRjb21lXV0gb3IgIyMjIEJlYXQ6IFtbbGlua3xpbnRlbnRdXVxuXHRcdFx0XHRjb25zdCBiZWF0RGlzcGxheVRleHQgPSBiZWF0Lm91dGNvbWVcblx0XHRcdFx0XHQ/IGAke2JlYXQuaW50ZW50fSAtPiAke2JlYXQub3V0Y29tZX1gXG5cdFx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdFx0Y29udGVudCArPSBgIyMjIEJlYXQ6IFtbJHtiZWF0TGlua05hbWV9fCR7YmVhdERpc3BsYXlUZXh0fV1dXFxuXFxuYDtcblxuXHRcdFx0XHQvLyBHZXQgcHJvc2UgYmxvY2tzIGZvciB0aGlzIGJlYXRcblx0XHRcdFx0Y29uc3QgYmVhdENvbnRlbnRCbG9ja3MgPSBvcmdhbml6YXRpb24uYnlCZWF0LmdldChiZWF0LmlkKT8uY29udGVudEJsb2NrcyB8fCBbXTtcblx0XHRcdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2YgYmVhdENvbnRlbnRCbG9ja3MpIHtcblx0XHRcdFx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShjb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0Y29udGVudCArPSBgW1ske2xpbmtOYW1lfXwke2NvbnRlbnRCbG9jay5jb250ZW50LnN1YnN0cmluZygwLCA1MCl9Li4uXV1cXG5cXG5gO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRhd2FpdCB0aGlzLnZhdWx0Lm1vZGlmeShmaWxlLCBjb250ZW50KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YXdhaXQgdGhpcy52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuXHRcdH1cblx0fVxuXG5cdC8vIFJlYWQgc3RvcnkgbWV0YWRhdGFcblx0YXN5bmMgcmVhZFN0b3J5TWV0YWRhdGEoZm9sZGVyUGF0aDogc3RyaW5nKTogUHJvbWlzZTxTdG9yeU1ldGFkYXRhPiB7XG5cdFx0Y29uc3QgZmlsZVBhdGggPSBgJHtmb2xkZXJQYXRofS9zdG9yeS5tZGA7XG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblxuXHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihgU3RvcnkgbWV0YWRhdGEgZmlsZSBub3QgZm91bmQ6ICR7ZmlsZVBhdGh9YCk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMudmF1bHQucmVhZChmaWxlKTtcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMucGFyc2VGcm9udG1hdHRlcihjb250ZW50KTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRmcm9udG1hdHRlcjoge1xuXHRcdFx0XHRpZDogZnJvbnRtYXR0ZXIuaWQsXG5cdFx0XHRcdHRpdGxlOiBmcm9udG1hdHRlci50aXRsZSxcblx0XHRcdFx0c3RhdHVzOiBmcm9udG1hdHRlci5zdGF0dXMsXG5cdFx0XHRcdHZlcnNpb246IHBhcnNlSW50KGZyb250bWF0dGVyLnZlcnNpb24pLFxuXHRcdFx0XHRyb290X3N0b3J5X2lkOiBmcm9udG1hdHRlci5yb290X3N0b3J5X2lkLFxuXHRcdFx0XHRwcmV2aW91c192ZXJzaW9uX2lkOiBmcm9udG1hdHRlci5wcmV2aW91c192ZXJzaW9uX2lkIHx8IG51bGwsXG5cdFx0XHRcdGNyZWF0ZWRfYXQ6IGZyb250bWF0dGVyLmNyZWF0ZWRfYXQsXG5cdFx0XHRcdHVwZGF0ZWRfYXQ6IGZyb250bWF0dGVyLnVwZGF0ZWRfYXQsXG5cdFx0XHR9LFxuXHRcdFx0Y29udGVudDogY29udGVudC5zcGxpdChcIi0tLVwiKS5zbGljZSgyKS5qb2luKFwiLS0tXCIpLnRyaW0oKSxcblx0XHR9O1xuXHR9XG5cblx0Ly8gUGFyc2UgWUFNTCBmcm9udG1hdHRlclxuXHRwYXJzZUZyb250bWF0dGVyKGNvbnRlbnQ6IHN0cmluZyk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuXHRcdGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuXHRcdGlmICghbWF0Y2gpIHtcblx0XHRcdHJldHVybiB7fTtcblx0XHR9XG5cblx0XHRjb25zdCBmcm9udG1hdHRlclRleHQgPSBtYXRjaFsxXTtcblx0XHRjb25zdCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcblxuXHRcdGZvciAoY29uc3QgbGluZSBvZiBmcm9udG1hdHRlclRleHQuc3BsaXQoXCJcXG5cIikpIHtcblx0XHRcdGNvbnN0IGNvbG9uSW5kZXggPSBsaW5lLmluZGV4T2YoXCI6XCIpO1xuXHRcdFx0aWYgKGNvbG9uSW5kZXggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IGtleSA9IGxpbmUuc2xpY2UoMCwgY29sb25JbmRleCkudHJpbSgpO1xuXHRcdFx0XHRjb25zdCB2YWx1ZSA9IGxpbmVcblx0XHRcdFx0XHQuc2xpY2UoY29sb25JbmRleCArIDEpXG5cdFx0XHRcdFx0LnRyaW0oKVxuXHRcdFx0XHRcdC5yZXBsYWNlKC9eW1wiJ118W1wiJ10kL2csIFwiXCIpO1xuXHRcdFx0XHRyZXN1bHRba2V5XSA9IHZhbHVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHQvLyBDb3B5IHN0b3J5IGZvbGRlciB0byB2ZXJzaW9ucyBmb2xkZXJcblx0YXN5bmMgY3JlYXRlVmVyc2lvblNuYXBzaG90KFxuXHRcdHN0b3J5Rm9sZGVyUGF0aDogc3RyaW5nLFxuXHRcdHZlcnNpb25OdW1iZXI6IG51bWJlclxuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCB2ZXJzaW9uc1BhdGggPSBgJHtzdG9yeUZvbGRlclBhdGh9L3ZlcnNpb25zYDtcblx0XHRhd2FpdCB0aGlzLmVuc3VyZUZvbGRlckV4aXN0cyh2ZXJzaW9uc1BhdGgpO1xuXG5cdFx0Y29uc3QgdmVyc2lvbkZvbGRlclBhdGggPSBgJHt2ZXJzaW9uc1BhdGh9L3Yke3ZlcnNpb25OdW1iZXJ9YDtcblxuXHRcdC8vIENoZWNrIGlmIHZlcnNpb24gYWxyZWFkeSBleGlzdHNcblx0XHRjb25zdCBleGlzdGluZ1ZlcnNpb24gPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh2ZXJzaW9uRm9sZGVyUGF0aCk7XG5cdFx0aWYgKGV4aXN0aW5nVmVyc2lvbikge1xuXHRcdFx0Y29uc29sZS5sb2coYFZlcnNpb24gdiR7dmVyc2lvbk51bWJlcn0gYWxyZWFkeSBleGlzdHMsIHNraXBwaW5nIHNuYXBzaG90YCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0YXdhaXQgdGhpcy5lbnN1cmVGb2xkZXJFeGlzdHModmVyc2lvbkZvbGRlclBhdGgpO1xuXG5cdFx0Ly8gQ29weSBhbGwgZmlsZXMgZnJvbSBzdG9yeSBmb2xkZXIgdG8gdmVyc2lvbiBmb2xkZXIgKGV4Y2VwdCB2ZXJzaW9ucyBmb2xkZXIpXG5cdFx0Y29uc3Qgc3RvcnlGb2xkZXIgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChzdG9yeUZvbGRlclBhdGgpO1xuXHRcdGlmICghKHN0b3J5Rm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihgU3RvcnkgZm9sZGVyIG5vdCBmb3VuZDogJHtzdG9yeUZvbGRlclBhdGh9YCk7XG5cdFx0fVxuXG5cdFx0YXdhaXQgdGhpcy5jb3B5Rm9sZGVyQ29udGVudHMoc3RvcnlGb2xkZXIsIHZlcnNpb25Gb2xkZXJQYXRoLCBcInZlcnNpb25zXCIpO1xuXG5cdFx0Y29uc29sZS5sb2coYENyZWF0ZWQgdmVyc2lvbiBzbmFwc2hvdDogdiR7dmVyc2lvbk51bWJlcn1gKTtcblx0fVxuXG5cdC8vIFJlY3Vyc2l2ZWx5IGNvcHkgZm9sZGVyIGNvbnRlbnRzXG5cdHByaXZhdGUgYXN5bmMgY29weUZvbGRlckNvbnRlbnRzKFxuXHRcdHNvdXJjZUZvbGRlcjogVEZvbGRlcixcblx0XHRkZXN0UGF0aDogc3RyaW5nLFxuXHRcdGV4Y2x1ZGVGb2xkZXJOYW1lPzogc3RyaW5nXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGZvciAoY29uc3QgY2hpbGQgb2Ygc291cmNlRm9sZGVyLmNoaWxkcmVuKSB7XG5cdFx0XHRpZiAoY2hpbGQgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0XHRjb25zdCByZWxhdGl2ZVBhdGggPSBjaGlsZC5wYXRoLnJlcGxhY2Uoc291cmNlRm9sZGVyLnBhdGggKyBcIi9cIiwgXCJcIik7XG5cdFx0XHRcdGNvbnN0IGRlc3RGaWxlUGF0aCA9IGAke2Rlc3RQYXRofS8ke3JlbGF0aXZlUGF0aH1gO1xuXHRcdFx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy52YXVsdC5yZWFkKGNoaWxkKTtcblx0XHRcdFx0YXdhaXQgdGhpcy52YXVsdC5jcmVhdGUoZGVzdEZpbGVQYXRoLCBjb250ZW50KTtcblx0XHRcdH0gZWxzZSBpZiAoY2hpbGQgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG5cdFx0XHRcdC8vIFNraXAgZXhjbHVkZWQgZm9sZGVyIChlLmcuLCBcInZlcnNpb25zXCIpXG5cdFx0XHRcdGlmIChleGNsdWRlRm9sZGVyTmFtZSAmJiBjaGlsZC5uYW1lID09PSBleGNsdWRlRm9sZGVyTmFtZSkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IHJlbGF0aXZlUGF0aCA9IGNoaWxkLnBhdGgucmVwbGFjZShzb3VyY2VGb2xkZXIucGF0aCArIFwiL1wiLCBcIlwiKTtcblx0XHRcdFx0Y29uc3QgZGVzdEZvbGRlclBhdGggPSBgJHtkZXN0UGF0aH0vJHtyZWxhdGl2ZVBhdGh9YDtcblx0XHRcdFx0YXdhaXQgdGhpcy5lbnN1cmVGb2xkZXJFeGlzdHMoZGVzdEZvbGRlclBhdGgpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmNvcHlGb2xkZXJDb250ZW50cyhjaGlsZCwgZGVzdEZvbGRlclBhdGgsIGV4Y2x1ZGVGb2xkZXJOYW1lKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBXcml0ZSBzY2VuZSBmaWxlXG5cdGFzeW5jIHdyaXRlU2NlbmVGaWxlKFxuXHRcdHNjZW5lV2l0aEJlYXRzOiBTY2VuZVdpdGhCZWF0cyxcblx0XHRmaWxlUGF0aDogc3RyaW5nLFxuXHRcdHN0b3J5TmFtZT86IHN0cmluZyxcblx0XHRjb250ZW50QmxvY2tzPzogQ29udGVudEJsb2NrW10sXG5cdFx0b3JwaGFuQmVhdHM/OiBCZWF0W10gLy8gSW5jbHVkZSBvcnBoYW4gYmVhdHMgZm9yIGVhc3kgYXNzb2NpYXRpb25cblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgeyBzY2VuZSwgYmVhdHMgfSA9IHNjZW5lV2l0aEJlYXRzO1xuXG5cdFx0Y29uc3QgYmFzZUZpZWxkczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgbnVsbD4gPSB7XG5cdFx0XHRpZDogc2NlbmUuaWQsXG5cdFx0XHRzdG9yeV9pZDogc2NlbmUuc3RvcnlfaWQsXG5cdFx0XHRjaGFwdGVyX2lkOiBzY2VuZS5jaGFwdGVyX2lkID8/IG51bGwsXG5cdFx0XHRvcmRlcl9udW06IHNjZW5lLm9yZGVyX251bSxcblx0XHRcdHRpbWVfcmVmOiBzY2VuZS50aW1lX3JlZiB8fCBcIlwiLFxuXHRcdFx0Z29hbDogc2NlbmUuZ29hbCB8fCBcIlwiLFxuXHRcdFx0Y3JlYXRlZF9hdDogc2NlbmUuY3JlYXRlZF9hdCxcblx0XHRcdHVwZGF0ZWRfYXQ6IHNjZW5lLnVwZGF0ZWRfYXQsXG5cdFx0fTtcblxuXHRcdC8vIEFkZCBvcHRpb25hbCBmaWVsZHNcblx0XHRjb25zdCBleHRyYUZpZWxkczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgbnVsbD4gPSB7fTtcblx0XHRpZiAoc2NlbmUucG92X2NoYXJhY3Rlcl9pZCkge1xuXHRcdFx0ZXh0cmFGaWVsZHMucG92X2NoYXJhY3Rlcl9pZCA9IHNjZW5lLnBvdl9jaGFyYWN0ZXJfaWQ7XG5cdFx0fVxuXHRcdGlmIChzY2VuZS5sb2NhdGlvbl9pZCkge1xuXHRcdFx0ZXh0cmFGaWVsZHMubG9jYXRpb25faWQgPSBzY2VuZS5sb2NhdGlvbl9pZDtcblx0XHR9XG5cblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMuZ2VuZXJhdGVGcm9udG1hdHRlcihiYXNlRmllbGRzLCBleHRyYUZpZWxkcywge1xuXHRcdFx0ZW50aXR5VHlwZTogXCJzY2VuZVwiLFxuXHRcdFx0c3RvcnlOYW1lOiBzdG9yeU5hbWUsXG5cdFx0XHRkYXRlOiBzY2VuZS5jcmVhdGVkX2F0LFxuXHRcdH0pO1xuXG5cdFx0bGV0IGNvbnRlbnQgPSBgJHtmcm9udG1hdHRlcn1cXG4jIFNjZW5lICR7c2NlbmUub3JkZXJfbnVtfVxcblxcbmA7XG5cdFx0XG5cdFx0aWYgKHNjZW5lLmdvYWwpIHtcblx0XHRcdGNvbnRlbnQgKz0gYCoqR29hbDoqKiAke3NjZW5lLmdvYWx9XFxuXFxuYDtcblx0XHR9XG5cdFx0aWYgKHNjZW5lLnRpbWVfcmVmKSB7XG5cdFx0XHRjb250ZW50ICs9IGAqKlRpbWU6KiogJHtzY2VuZS50aW1lX3JlZn1cXG5cXG5gO1xuXHRcdH1cblxuXHRcdC8vIEdlbmVyYXRlIGxpc3Qgb2YgYmVhdHMgd2l0aCBwcm9zZSBpbmRpY2F0b3JzXG5cdFx0aWYgKGJlYXRzLmxlbmd0aCA+IDApIHtcblx0XHRcdGNvbnRlbnQgKz0gYCMjIEJlYXRzXFxuXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gWyFpbmZvXSBIb3cgdG8gdXNlIHRoaXMgbGlzdFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipDcmVhdGUgbmV3IGl0ZW0qKjogQWRkIGEgbGluZSB3aXRoIFxcYC1cXGAgZm9sbG93ZWQgYnkgdGhlIHRleHRcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgIC0gKipCZWF0Kio6IE5vIGluZGVudGF0aW9uIChsZXZlbCAwKVxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipSZW9yZGVyKio6IE1vdmUgaXRlbXMgdXAvZG93biB0byBjaGFuZ2Ugb3JkZXJcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqTGlua3MqKjogVXNlIFxcYFtbbGluay1uYW1lfHRleHRdXVxcYCB0byBjcmVhdGUgbGlua3MgdG8gZXhpc3RpbmcgZmlsZXNcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqRm9ybWF0Kio6XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAtICoqQmVhdCoqOlxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgICAtIENvbXBsZXRlOiBcXGBCZWF0IE46IGludGVudCAtPiBvdXRjb21lXFxgXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgIC0gU2ltcGxpZmllZDpcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgICAgICAtIFxcYGludGVudCAtPiBvdXRjb21lXFxgXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgICAgLSBcXGBpbnRlbnRcXGBcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqTWFya2VycyoqOiBcXGAtXFxgIGluZGljYXRlcyBubyBhc3NvY2lhdGVkIHByb3NlLCBcXGArXFxgIGluZGljYXRlcyBhc3NvY2lhdGVkIHByb3NlXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gLSAqKk9ycGhhbiBiZWF0cyoqICh3aXRob3V0IHNjZW5lKSBhcmUgc2hvd24gYmVsb3cgZm9yIGVhc3kgYXNzb2NpYXRpb25cXG5cXG5gO1xuXHRcdFx0XG5cdFx0XHQvLyBDaGVjayB3aGljaCBiZWF0cyBoYXZlIHByb3NlIGJsb2Nrc1xuXHRcdFx0Y29uc3QgYmVhdHNXaXRoUHJvc2UgPSBuZXcgU2V0PHN0cmluZz4oKTtcblx0XHRcdGlmIChjb250ZW50QmxvY2tzKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgY29udGVudEJsb2NrIG9mIGNvbnRlbnRCbG9ja3MpIHtcblx0XHRcdFx0XHQvLyBDaGVjayBpZiBwcm9zZSBibG9jayBpcyByZWZlcmVuY2VkIGJ5IGFueSBiZWF0XG5cdFx0XHRcdFx0Ly8gV2UnbGwgbmVlZCB0byBjaGVjayBwcm9zZSBibG9jayByZWZlcmVuY2VzLCBidXQgZm9yIG5vdyB3ZSdsbCB1c2UgYSBzaW1wbGUgY2hlY2tcblx0XHRcdFx0XHQvLyBUaGlzIHdpbGwgYmUgdXBkYXRlZCB3aGVuIHdlIHByb2Nlc3MgcHJvc2UgYmxvY2sgcmVmZXJlbmNlc1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cy5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKSkge1xuXHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRjb25zdCBiZWF0TGlua05hbWUgPSBiZWF0RmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdGNvbnN0IGJlYXREaXNwbGF5VGV4dCA9IGJlYXQub3V0Y29tZVxuXHRcdFx0XHRcdD8gYCR7YmVhdC5pbnRlbnR9IC0+ICR7YmVhdC5vdXRjb21lfWBcblx0XHRcdFx0XHQ6IGJlYXQuaW50ZW50O1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gRm9yIG5vdywgd2UgZG9uJ3QgdHJhY2sgcHJvc2UgYXQgc2NlbmUgbGV2ZWwsIHNvIGFsd2F5cyB1c2UgXCItXCJcblx0XHRcdFx0Ly8gSW4gdGhlIGZ1dHVyZSwgd2UgY291bGQgY2hlY2sgaWYgYmVhdCBoYXMgYW55IHByb3NlIGJsb2Nrc1xuXHRcdFx0XHRjb25zdCBoYXNCZWF0UHJvc2UgPSBiZWF0c1dpdGhQcm9zZS5oYXMoYmVhdC5pZCk7XG5cdFx0XHRcdGNvbnN0IGJlYXRNYXJrZXIgPSBoYXNCZWF0UHJvc2UgPyBcIitcIiA6IFwiLVwiO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29udGVudCArPSBgJHtiZWF0TWFya2VyfSBbWyR7YmVhdExpbmtOYW1lfXxCZWF0ICR7YmVhdC5vcmRlcl9udW19OiAke2JlYXREaXNwbGF5VGV4dH1dXVxcbmA7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIEFkZCBvcnBoYW4gYmVhdHMgKGJlYXRzIHdpdGhvdXQgc2NlbmVfaWQpIGZvciBlYXN5IGFzc29jaWF0aW9uXG5cdFx0XHRpZiAob3JwaGFuQmVhdHMgJiYgb3JwaGFuQmVhdHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRjb250ZW50ICs9IGBcXG5gO1xuXHRcdFx0XHRjb250ZW50ICs9IGA+IFshaW5mb10gT3JwaGFuIEJlYXRzIChub3QgeWV0IGFzc29jaWF0ZWQgd2l0aCB0aGlzIHNjZW5lKVxcbmA7XG5cdFx0XHRcdGNvbnRlbnQgKz0gYD4gWW91IGNhbiBhc3NvY2lhdGUgdGhlc2UgYmVhdHMgd2l0aCB0aGlzIHNjZW5lIGJ5IG1vdmluZyB0aGVtIGhlcmUuXFxuXFxuYDtcblx0XHRcdFx0XG5cdFx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBvcnBoYW5CZWF0cykge1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXREaXNwbGF5VGV4dCA9IGJlYXQub3V0Y29tZVxuXHRcdFx0XHRcdFx0PyBgJHtiZWF0LmludGVudH0gLT4gJHtiZWF0Lm91dGNvbWV9YFxuXHRcdFx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBGb3Igbm93LCB3ZSBkb24ndCB0cmFjayBwcm9zZSBhdCBzY2VuZSBsZXZlbCwgc28gYWx3YXlzIHVzZSBcIi1cIlxuXHRcdFx0XHRcdGNvbnRlbnQgKz0gYC0gW1ske2JlYXRMaW5rTmFtZX18QmVhdCAke2JlYXQub3JkZXJfbnVtfTogJHtiZWF0RGlzcGxheVRleHR9XV1cXG5gO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGNvbnRlbnQgKz0gYFxcbmA7XG5cdFx0fVxuXG5cdFx0Ly8gR2VuZXJhdGUgaGllcmFyY2hpY2FsIHByb3NlIHNlY3Rpb24gZm9yIHRoZSBzY2VuZVxuXHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0Y29uc3Qgc2NlbmVMaW5rTmFtZSA9IHNjZW5lRmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0Y29uc3Qgc2NlbmVEaXNwbGF5VGV4dCA9IHNjZW5lLnRpbWVfcmVmIFxuXHRcdFx0PyBgJHtzY2VuZS5nb2FsfSAtICR7c2NlbmUudGltZV9yZWZ9YFxuXHRcdFx0OiBzY2VuZS5nb2FsO1xuXHRcdFxuXHRcdGNvbnRlbnQgKz0gYCMjIFNjZW5lOiBbWyR7c2NlbmVMaW5rTmFtZX18JHtzY2VuZURpc3BsYXlUZXh0fV1dXFxuXFxuYDtcblxuXHRcdC8vIEFkZCBwcm9zZSBibG9ja3MgYXQgc2NlbmUgbGV2ZWwgKG5vdCBhc3NvY2lhdGVkIHdpdGggYW55IGJlYXQpXG5cdFx0aWYgKGNvbnRlbnRCbG9ja3MgJiYgY29udGVudEJsb2Nrcy5sZW5ndGggPiAwKSB7XG5cdFx0XHQvLyBTb3J0IGJ5IG9yZGVyX251bVxuXHRcdFx0Y29uc3Qgc29ydGVkQ29udGVudEJsb2NrcyA9IFsuLi5jb250ZW50QmxvY2tzXS5zb3J0KChhLCBiKSA9PiAoYS5vcmRlcl9udW0gfHwgMCkgLSAoYi5vcmRlcl9udW0gfHwgMCkpO1xuXHRcdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2Ygc29ydGVkQ29udGVudEJsb2Nrcykge1xuXHRcdFx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShjb250ZW50QmxvY2spO1xuXHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRjb250ZW50ICs9IGBbWyR7bGlua05hbWV9fCR7Y29udGVudEJsb2NrLmNvbnRlbnQuc3Vic3RyaW5nKDAsIDUwKX0uLi5dXVxcblxcbmA7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIGJlYXRzIHdpdGggdGhlaXIgaGllcmFyY2hpY2FsIHN0cnVjdHVyZVxuXHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cy5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKSkge1xuXHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdGNvbnN0IGJlYXRMaW5rTmFtZSA9IGJlYXRGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdGNvbnN0IGJlYXREaXNwbGF5VGV4dCA9IGJlYXQub3V0Y29tZVxuXHRcdFx0XHQ/IGAke2JlYXQuaW50ZW50fSAtPiAke2JlYXQub3V0Y29tZX1gXG5cdFx0XHRcdDogYmVhdC5pbnRlbnQ7XG5cdFx0XHRcblx0XHRcdGNvbnRlbnQgKz0gYCMjIyBCZWF0OiBbWyR7YmVhdExpbmtOYW1lfXwke2JlYXREaXNwbGF5VGV4dH1dXVxcblxcbmA7XG5cdFx0fVxuXG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRhd2FpdCB0aGlzLnZhdWx0Lm1vZGlmeShmaWxlLCBjb250ZW50KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YXdhaXQgdGhpcy52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuXHRcdH1cblx0fVxuXG5cdC8vIFdyaXRlIGJlYXQgZmlsZVxuXHRhc3luYyB3cml0ZUJlYXRGaWxlKFxuXHRcdGJlYXQ6IEJlYXQsXG5cdFx0ZmlsZVBhdGg6IHN0cmluZyxcblx0XHRzdG9yeU5hbWU/OiBzdHJpbmcsXG5cdFx0Y29udGVudEJsb2Nrcz86IENvbnRlbnRCbG9ja1tdXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IGJhc2VGaWVsZHMgPSB7XG5cdFx0XHRpZDogYmVhdC5pZCxcblx0XHRcdHNjZW5lX2lkOiBiZWF0LnNjZW5lX2lkLFxuXHRcdFx0b3JkZXJfbnVtOiBiZWF0Lm9yZGVyX251bSxcblx0XHRcdHR5cGU6IGJlYXQudHlwZSxcblx0XHRcdGludGVudDogYmVhdC5pbnRlbnQgfHwgXCJcIixcblx0XHRcdG91dGNvbWU6IGJlYXQub3V0Y29tZSB8fCBcIlwiLFxuXHRcdFx0Y3JlYXRlZF9hdDogYmVhdC5jcmVhdGVkX2F0LFxuXHRcdFx0dXBkYXRlZF9hdDogYmVhdC51cGRhdGVkX2F0LFxuXHRcdH07XG5cblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMuZ2VuZXJhdGVGcm9udG1hdHRlcihiYXNlRmllbGRzLCB1bmRlZmluZWQsIHtcblx0XHRcdGVudGl0eVR5cGU6IFwiYmVhdFwiLFxuXHRcdFx0c3RvcnlOYW1lOiBzdG9yeU5hbWUsXG5cdFx0XHRkYXRlOiBiZWF0LmNyZWF0ZWRfYXQsXG5cdFx0fSk7XG5cblx0XHRsZXQgY29udGVudCA9IGAke2Zyb250bWF0dGVyfVxcbiMgQmVhdCAke2JlYXQub3JkZXJfbnVtfSAtICR7YmVhdC50eXBlfVxcblxcbmA7XG5cdFx0XG5cdFx0aWYgKGJlYXQuaW50ZW50KSB7XG5cdFx0XHRjb250ZW50ICs9IGAqKkludGVudDoqKiAke2JlYXQuaW50ZW50fVxcblxcbmA7XG5cdFx0fVxuXHRcdGlmIChiZWF0Lm91dGNvbWUpIHtcblx0XHRcdGNvbnRlbnQgKz0gYCoqT3V0Y29tZToqKiAke2JlYXQub3V0Y29tZX1cXG5cXG5gO1xuXHRcdH1cblxuXHRcdC8vIEdlbmVyYXRlIGhpZXJhcmNoaWNhbCBwcm9zZSBzZWN0aW9uIGZvciB0aGUgYmVhdFxuXHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdGNvbnN0IGJlYXREaXNwbGF5VGV4dCA9IGJlYXQub3V0Y29tZVxuXHRcdFx0PyBgJHtiZWF0LmludGVudH0gLT4gJHtiZWF0Lm91dGNvbWV9YFxuXHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcblx0XHRjb250ZW50ICs9IGAjIyBCZWF0OiBbWyR7YmVhdExpbmtOYW1lfXwke2JlYXREaXNwbGF5VGV4dH1dXVxcblxcbmA7XG5cblx0XHQvLyBBZGQgY29udGVudCBibG9ja3MgZm9yIHRoaXMgYmVhdFxuXHRcdGlmIChjb250ZW50QmxvY2tzICYmIGNvbnRlbnRCbG9ja3MubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29uc3Qgc29ydGVkQ29udGVudEJsb2NrcyA9IFsuLi5jb250ZW50QmxvY2tzXS5zb3J0KChhLCBiKSA9PiAoYS5vcmRlcl9udW0gfHwgMCkgLSAoYi5vcmRlcl9udW0gfHwgMCkpO1xuXHRcdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2Ygc29ydGVkQ29udGVudEJsb2Nrcykge1xuXHRcdFx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShjb250ZW50QmxvY2spO1xuXHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRjb250ZW50ICs9IGBbWyR7bGlua05hbWV9fCR7Y29udGVudEJsb2NrLmNvbnRlbnQuc3Vic3RyaW5nKDAsIDUwKX0uLi5dXVxcblxcbmA7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRhd2FpdCB0aGlzLnZhdWx0Lm1vZGlmeShmaWxlLCBjb250ZW50KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YXdhaXQgdGhpcy52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuXHRcdH1cblx0fVxuXG5cdC8vIExpc3QgYWxsIGNoYXB0ZXIgZmlsZXMgaW4gYSBzdG9yeSBmb2xkZXJcblx0YXN5bmMgbGlzdENoYXB0ZXJGaWxlcyhzdG9yeUZvbGRlclBhdGg6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcblx0XHRjb25zdCBjaGFwdGVyc1BhdGggPSBgJHtzdG9yeUZvbGRlclBhdGh9LzAwLWNoYXB0ZXJzYDtcblx0XHRjb25zdCBmb2xkZXIgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChjaGFwdGVyc1BhdGgpO1xuXG5cdFx0aWYgKCEoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcblx0XHRcdHJldHVybiBbXTtcblx0XHR9XG5cblx0XHRjb25zdCBjaGFwdGVyRmlsZXM6IHN0cmluZ1tdID0gW107XG5cdFx0Zm9yIChjb25zdCBjaGlsZCBvZiBmb2xkZXIuY2hpbGRyZW4pIHtcblx0XHRcdGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGaWxlICYmIGNoaWxkLmV4dGVuc2lvbiA9PT0gXCJtZFwiKSB7XG5cdFx0XHRcdGNoYXB0ZXJGaWxlcy5wdXNoKGNoaWxkLnBhdGgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjaGFwdGVyRmlsZXMuc29ydCgpO1xuXHR9XG5cblx0Ly8gTGlzdCBhbGwgc2NlbmUgZmlsZXMgaW4gYSBjaGFwdGVyIGZvbGRlclxuXHRhc3luYyBsaXN0U2NlbmVGaWxlcyhjaGFwdGVyRm9sZGVyUGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuXHRcdGNvbnN0IHNjZW5lc1BhdGggPSBgJHtjaGFwdGVyRm9sZGVyUGF0aH0vMDEtc2NlbmVzYDtcblx0XHRjb25zdCBmb2xkZXIgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChzY2VuZXNQYXRoKTtcblxuXHRcdGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc2NlbmVGaWxlczogc3RyaW5nW10gPSBbXTtcblx0XHRmb3IgKGNvbnN0IGNoaWxkIG9mIGZvbGRlci5jaGlsZHJlbikge1xuXHRcdFx0aWYgKGNoaWxkIGluc3RhbmNlb2YgVEZpbGUgJiYgY2hpbGQuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcblx0XHRcdFx0c2NlbmVGaWxlcy5wdXNoKGNoaWxkLnBhdGgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBzY2VuZUZpbGVzLnNvcnQoKTtcblx0fVxuXG5cdC8vIExpc3QgYWxsIHNjZW5lIGZpbGVzIGluIGEgc3RvcnkgZm9sZGVyXG5cdGFzeW5jIGxpc3RTdG9yeVNjZW5lRmlsZXMoc3RvcnlGb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG5cdFx0Y29uc3Qgc2NlbmVzUGF0aCA9IGAke3N0b3J5Rm9sZGVyUGF0aH0vMDEtc2NlbmVzYDtcblx0XHRjb25zdCBmb2xkZXIgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChzY2VuZXNQYXRoKTtcblxuXHRcdGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc2NlbmVGaWxlczogc3RyaW5nW10gPSBbXTtcblx0XHRmb3IgKGNvbnN0IGNoaWxkIG9mIGZvbGRlci5jaGlsZHJlbikge1xuXHRcdFx0aWYgKGNoaWxkIGluc3RhbmNlb2YgVEZpbGUgJiYgY2hpbGQuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcblx0XHRcdFx0c2NlbmVGaWxlcy5wdXNoKGNoaWxkLnBhdGgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBzY2VuZUZpbGVzLnNvcnQoKTtcblx0fVxuXG5cdC8vIExpc3QgYWxsIGJlYXQgZmlsZXMgaW4gYSBzdG9yeSBmb2xkZXJcblx0YXN5bmMgbGlzdFN0b3J5QmVhdEZpbGVzKHN0b3J5Rm9sZGVyUGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuXHRcdGNvbnN0IGJlYXRzUGF0aCA9IGAke3N0b3J5Rm9sZGVyUGF0aH0vMDItYmVhdHNgO1xuXHRcdGNvbnN0IGZvbGRlciA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGJlYXRzUGF0aCk7XG5cblx0XHRpZiAoIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH1cblxuXHRcdGNvbnN0IGJlYXRGaWxlczogc3RyaW5nW10gPSBbXTtcblx0XHRmb3IgKGNvbnN0IGNoaWxkIG9mIGZvbGRlci5jaGlsZHJlbikge1xuXHRcdFx0aWYgKGNoaWxkIGluc3RhbmNlb2YgVEZpbGUgJiYgY2hpbGQuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcblx0XHRcdFx0YmVhdEZpbGVzLnB1c2goY2hpbGQucGF0aCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGJlYXRGaWxlcy5zb3J0KCk7XG5cdH1cblxuXHQvLyBMaXN0IGFsbCBiZWF0IGZpbGVzIGluIGEgc2NlbmUgZm9sZGVyXG5cdGFzeW5jIGxpc3RCZWF0RmlsZXMoc2NlbmVGb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG5cdFx0Y29uc3QgYmVhdHNQYXRoID0gYCR7c2NlbmVGb2xkZXJQYXRofS8wMi1iZWF0c2A7XG5cdFx0Y29uc3QgZm9sZGVyID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoYmVhdHNQYXRoKTtcblxuXHRcdGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fVxuXG5cdFx0Y29uc3QgYmVhdEZpbGVzOiBzdHJpbmdbXSA9IFtdO1xuXHRcdGZvciAoY29uc3QgY2hpbGQgb2YgZm9sZGVyLmNoaWxkcmVuKSB7XG5cdFx0XHRpZiAoY2hpbGQgaW5zdGFuY2VvZiBURmlsZSAmJiBjaGlsZC5leHRlbnNpb24gPT09IFwibWRcIikge1xuXHRcdFx0XHRiZWF0RmlsZXMucHVzaChjaGlsZC5wYXRoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gYmVhdEZpbGVzLnNvcnQoKTtcblx0fVxuXG5cdC8vIEdldCB0aGUgc3ViZm9sZGVyIG5hbWUgZm9yIGEgY29udGVudCBibG9jayB0eXBlXG5cdGdldENvbnRlbnRUeXBlRm9sZGVyKHR5cGU6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Ly8gTWFwIHR5cGVzIHRvIGZvbGRlciBuYW1lcyB3aXRoIG51bWVyaWMgcHJlZml4ZXNcblx0XHRjb25zdCB0eXBlRm9sZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcblx0XHRcdHRleHQ6IFwiMDAtdGV4dHNcIixcblx0XHRcdGltYWdlOiBcIjAxLWltYWdlc1wiLFxuXHRcdFx0dmlkZW86IFwiMDItdmlkZW9zXCIsXG5cdFx0XHRhdWRpbzogXCIwMy1hdWRpb3NcIixcblx0XHRcdGVtYmVkOiBcIjA0LWVtYmVkc1wiLFxuXHRcdFx0bGluazogXCIwNS1saW5rc1wiLFxuXHRcdH07XG5cdFx0cmV0dXJuIHR5cGVGb2xkZXJzW3R5cGVdIHx8IFwiOTktb3RoZXJcIjtcblx0fVxuXG5cdC8vIEdldCB0aGUgZnVsbCBmb2xkZXIgcGF0aCBmb3IgY29udGVudCBibG9ja3Mgb2YgYSBzcGVjaWZpYyB0eXBlXG5cdGdldENvbnRlbnRCbG9ja0ZvbGRlclBhdGgoc3RvcnlGb2xkZXJQYXRoOiBzdHJpbmcsIHR5cGU6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Y29uc3QgdHlwZUZvbGRlciA9IHRoaXMuZ2V0Q29udGVudFR5cGVGb2xkZXIodHlwZSk7XG5cdFx0cmV0dXJuIGAke3N0b3J5Rm9sZGVyUGF0aH0vMDMtY29udGVudHMvJHt0eXBlRm9sZGVyfWA7XG5cdH1cblxuXHQvLyBHZW5lcmF0ZSBmaWxlbmFtZSBmb3IgY29udGVudCBibG9jayBiYXNlZCBvbiBkYXRlIGFuZCBjb250ZW50IHByZXZpZXdcblx0Z2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShjb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayk6IHN0cmluZyB7XG5cdFx0Ly8gUGFyc2UgY3JlYXRlZF9hdCBkYXRlXG5cdFx0Y29uc3QgZGF0ZSA9IG5ldyBEYXRlKGNvbnRlbnRCbG9jay5jcmVhdGVkX2F0KTtcblx0XHRjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuXHRcdGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRjb25zdCBob3VycyA9IFN0cmluZyhkYXRlLmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRjb25zdCBtaW51dGVzID0gU3RyaW5nKGRhdGUuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCBcIjBcIik7XG5cdFx0XG5cdFx0Ly8gRm9ybWF0OiAyMDI0LTAxLTE1VDE0LTMwXG5cdFx0Y29uc3QgZGF0ZVN0ciA9IGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fVQke2hvdXJzfS0ke21pbnV0ZXN9YDtcblxuXHRcdC8vIEdldCBwcmV2aWV3IGJhc2VkIG9uIGNvbnRlbnQgdHlwZVxuXHRcdGxldCB0ZXh0UGFydDogc3RyaW5nO1xuXHRcdGNvbnN0IHR5cGUgPSBjb250ZW50QmxvY2sudHlwZSB8fCBcInRleHRcIjtcblx0XHRcblx0XHRpZiAodHlwZSA9PT0gXCJ0ZXh0XCIpIHtcblx0XHRcdC8vIEZvciB0ZXh0OiBmaXJzdCAzMCBjaGFycyBvZiBjb250ZW50XG5cdFx0XHR0ZXh0UGFydCA9IGNvbnRlbnRCbG9jay5jb250ZW50XG5cdFx0XHRcdC5zdWJzdHJpbmcoMCwgMzApXG5cdFx0XHRcdC50cmltKClcblx0XHRcdFx0LnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXFxuXFxyXFx0XS9nLCBcIi1cIilcblx0XHRcdFx0LnJlcGxhY2UoL1xccysvZywgXCItXCIpXG5cdFx0XHRcdC5yZXBsYWNlKC8tKy9nLCBcIi1cIilcblx0XHRcdFx0LnJlcGxhY2UoL14tfC0kL2csIFwiXCIpXG5cdFx0XHRcdC50b0xvd2VyQ2FzZSgpIHx8IFwiY29udGVudFwiO1xuXHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJpbWFnZVwiIHx8IHR5cGUgPT09IFwidmlkZW9cIiB8fCB0eXBlID09PSBcImF1ZGlvXCIpIHtcblx0XHRcdC8vIEZvciBtZWRpYTogdXNlIGFsdF90ZXh0LCBjYXB0aW9uLCBvciBmaWxlbmFtZSBmcm9tIG1ldGFkYXRhXG5cdFx0XHRjb25zdCBtZXRhID0gY29udGVudEJsb2NrLm1ldGFkYXRhIHx8IHt9O1xuXHRcdFx0dGV4dFBhcnQgPSAobWV0YS5hbHRfdGV4dCB8fCBtZXRhLmNhcHRpb24gfHwgbWV0YS50aXRsZSB8fCB0eXBlKVxuXHRcdFx0XHQuc3Vic3RyaW5nKDAsIDMwKVxuXHRcdFx0XHQudHJpbSgpXG5cdFx0XHRcdC5yZXBsYWNlKC9bPD46XCIvXFxcXHw/KlxcblxcclxcdF0vZywgXCItXCIpXG5cdFx0XHRcdC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKVxuXHRcdFx0XHQucmVwbGFjZSgvLSsvZywgXCItXCIpXG5cdFx0XHRcdC5yZXBsYWNlKC9eLXwtJC9nLCBcIlwiKVxuXHRcdFx0XHQudG9Mb3dlckNhc2UoKTtcblx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwiZW1iZWRcIikge1xuXHRcdFx0Ly8gRm9yIGVtYmVkczogdXNlIHByb3ZpZGVyIG9yIHRpdGxlXG5cdFx0XHRjb25zdCBtZXRhID0gY29udGVudEJsb2NrLm1ldGFkYXRhIHx8IHt9O1xuXHRcdFx0dGV4dFBhcnQgPSAobWV0YS5wcm92aWRlciB8fCBtZXRhLnRpdGxlIHx8IFwiZW1iZWRcIilcblx0XHRcdFx0LnN1YnN0cmluZygwLCAzMClcblx0XHRcdFx0LnRyaW0oKVxuXHRcdFx0XHQucmVwbGFjZSgvWzw+OlwiL1xcXFx8PypcXG5cXHJcXHRdL2csIFwiLVwiKVxuXHRcdFx0XHQucmVwbGFjZSgvXFxzKy9nLCBcIi1cIilcblx0XHRcdFx0LnJlcGxhY2UoLy0rL2csIFwiLVwiKVxuXHRcdFx0XHQucmVwbGFjZSgvXi18LSQvZywgXCJcIilcblx0XHRcdFx0LnRvTG93ZXJDYXNlKCk7XG5cdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImxpbmtcIikge1xuXHRcdFx0Ly8gRm9yIGxpbmtzOiB1c2UgdGl0bGUgb3Igc2l0ZV9uYW1lXG5cdFx0XHRjb25zdCBtZXRhID0gY29udGVudEJsb2NrLm1ldGFkYXRhIHx8IHt9O1xuXHRcdFx0dGV4dFBhcnQgPSAobWV0YS50aXRsZSB8fCBtZXRhLnNpdGVfbmFtZSB8fCBcImxpbmtcIilcblx0XHRcdFx0LnN1YnN0cmluZygwLCAzMClcblx0XHRcdFx0LnRyaW0oKVxuXHRcdFx0XHQucmVwbGFjZSgvWzw+OlwiL1xcXFx8PypcXG5cXHJcXHRdL2csIFwiLVwiKVxuXHRcdFx0XHQucmVwbGFjZSgvXFxzKy9nLCBcIi1cIilcblx0XHRcdFx0LnJlcGxhY2UoLy0rL2csIFwiLVwiKVxuXHRcdFx0XHQucmVwbGFjZSgvXi18LSQvZywgXCJcIilcblx0XHRcdFx0LnRvTG93ZXJDYXNlKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRleHRQYXJ0ID0gXCJjb250ZW50XCI7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGAke2RhdGVTdHJ9XyR7dGV4dFBhcnR9Lm1kYDtcblx0fVxuXG5cdC8vIE9yZ2FuaXplIGNvbnRlbnQgYmxvY2tzIGJ5IHRoZWlyIGFzc29jaWF0aW9ucyAoY2hhcHRlciwgc2NlbmUsIGJlYXQpXG5cdG9yZ2FuaXplQ29udGVudEJsb2Nrcyhcblx0XHRjb250ZW50QmxvY2tzOiBDb250ZW50QmxvY2tbXSxcblx0XHRjb250ZW50QmxvY2tSZWZzOiBDb250ZW50QW5jaG9yW10sXG5cdFx0c2NlbmVzOiBTY2VuZVdpdGhCZWF0c1tdXG5cdCk6IENvbnRlbnRCbG9ja09yZ2FuaXphdGlvbiB7XG5cdFx0Y29uc3Qgb3JnYW5pemF0aW9uOiBDb250ZW50QmxvY2tPcmdhbml6YXRpb24gPSB7XG5cdFx0XHRjaGFwdGVyT25seTogW10sXG5cdFx0XHRieVNjZW5lOiBuZXcgTWFwKCksXG5cdFx0XHRieUJlYXQ6IG5ldyBNYXAoKSxcblx0XHR9O1xuXG5cdFx0Ly8gQ3JlYXRlIG1hcHMgZm9yIHF1aWNrIGxvb2t1cFxuXHRcdGNvbnN0IGNvbnRlbnRCbG9ja1JlZnNCeUNvbnRlbnRCbG9jayA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QW5jaG9yW10+KCk7XG5cdFx0Zm9yIChjb25zdCByZWYgb2YgY29udGVudEJsb2NrUmVmcykge1xuXHRcdFx0aWYgKCFjb250ZW50QmxvY2tSZWZzQnlDb250ZW50QmxvY2suaGFzKHJlZi5jb250ZW50X2Jsb2NrX2lkKSkge1xuXHRcdFx0XHRjb250ZW50QmxvY2tSZWZzQnlDb250ZW50QmxvY2suc2V0KHJlZi5jb250ZW50X2Jsb2NrX2lkLCBbXSk7XG5cdFx0XHR9XG5cdFx0XHRjb250ZW50QmxvY2tSZWZzQnlDb250ZW50QmxvY2suZ2V0KHJlZi5jb250ZW50X2Jsb2NrX2lkKSEucHVzaChyZWYpO1xuXHRcdH1cblxuXHRcdC8vIENyZWF0ZSBzY2VuZSBhbmQgYmVhdCBtYXBzIGZvciBxdWljayBsb29rdXBcblx0XHRjb25zdCBzY2VuZU1hcCA9IG5ldyBNYXA8c3RyaW5nLCBTY2VuZT4oKTtcblx0XHRjb25zdCBiZWF0TWFwID0gbmV3IE1hcDxzdHJpbmcsIEJlYXQ+KCk7XG5cdFx0Zm9yIChjb25zdCB7IHNjZW5lLCBiZWF0cyB9IG9mIHNjZW5lcykge1xuXHRcdFx0c2NlbmVNYXAuc2V0KHNjZW5lLmlkLCBzY2VuZSk7XG5cdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0YmVhdE1hcC5zZXQoYmVhdC5pZCwgYmVhdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU29ydCBjb250ZW50IGJsb2NrcyBieSBvcmRlcl9udW1cblx0XHRjb25zdCBzb3J0ZWRDb250ZW50QmxvY2tzID0gWy4uLmNvbnRlbnRCbG9ja3NdLnNvcnQoKGEsIGIpID0+IChhLm9yZGVyX251bSB8fCAwKSAtIChiLm9yZGVyX251bSB8fCAwKSk7XG5cblx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBzb3J0ZWRDb250ZW50QmxvY2tzKSB7XG5cdFx0XHRjb25zdCByZWZzID0gY29udGVudEJsb2NrUmVmc0J5Q29udGVudEJsb2NrLmdldChjb250ZW50QmxvY2suaWQpIHx8IFtdO1xuXHRcdFx0XG5cdFx0XHQvLyBGaW5kIHNjZW5lIGFuZCBiZWF0IHJlZmVyZW5jZXNcblx0XHRcdGNvbnN0IHNjZW5lUmVmID0gcmVmcy5maW5kKHIgPT4gci5lbnRpdHlfdHlwZSA9PT0gXCJzY2VuZVwiKTtcblx0XHRcdGNvbnN0IGJlYXRSZWYgPSByZWZzLmZpbmQociA9PiByLmVudGl0eV90eXBlID09PSBcImJlYXRcIik7XG5cblx0XHRcdGlmIChiZWF0UmVmICYmIGJlYXRNYXAuaGFzKGJlYXRSZWYuZW50aXR5X2lkKSkge1xuXHRcdFx0XHQvLyBBc3NvY2lhdGVkIHdpdGggYSBiZWF0IChhbmQgaW1wbGljaXRseSB3aXRoIGl0cyBzY2VuZSlcblx0XHRcdFx0Y29uc3QgYmVhdCA9IGJlYXRNYXAuZ2V0KGJlYXRSZWYuZW50aXR5X2lkKSE7XG5cdFx0XHRcdGlmICghb3JnYW5pemF0aW9uLmJ5QmVhdC5oYXMoYmVhdC5pZCkpIHtcblx0XHRcdFx0XHRvcmdhbml6YXRpb24uYnlCZWF0LnNldChiZWF0LmlkLCB7IGJlYXQsIGNvbnRlbnRCbG9ja3M6IFtdIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG9yZ2FuaXphdGlvbi5ieUJlYXQuZ2V0KGJlYXQuaWQpIS5jb250ZW50QmxvY2tzLnB1c2goY29udGVudEJsb2NrKTtcblx0XHRcdH0gZWxzZSBpZiAoc2NlbmVSZWYgJiYgc2NlbmVNYXAuaGFzKHNjZW5lUmVmLmVudGl0eV9pZCkpIHtcblx0XHRcdFx0Ly8gQXNzb2NpYXRlZCB3aXRoIGEgc2NlbmUgYnV0IG5vdCBhIGJlYXRcblx0XHRcdFx0Y29uc3Qgc2NlbmUgPSBzY2VuZU1hcC5nZXQoc2NlbmVSZWYuZW50aXR5X2lkKSE7XG5cdFx0XHRcdGlmICghb3JnYW5pemF0aW9uLmJ5U2NlbmUuaGFzKHNjZW5lLmlkKSkge1xuXHRcdFx0XHRcdG9yZ2FuaXphdGlvbi5ieVNjZW5lLnNldChzY2VuZS5pZCwgeyBzY2VuZSwgY29udGVudEJsb2NrczogW10gfSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0b3JnYW5pemF0aW9uLmJ5U2NlbmUuZ2V0KHNjZW5lLmlkKSEuY29udGVudEJsb2Nrcy5wdXNoKGNvbnRlbnRCbG9jayk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBPbmx5IGFzc29jaWF0ZWQgd2l0aCBjaGFwdGVyXG5cdFx0XHRcdG9yZ2FuaXphdGlvbi5jaGFwdGVyT25seS5wdXNoKGNvbnRlbnRCbG9jayk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG9yZ2FuaXphdGlvbjtcblx0fVxuXG5cdC8vIEdlbmVyYXRlIGZpbGVuYW1lIGZvciBzY2VuZSBiYXNlZCBvbiBkYXRlIGFuZCBnb2FsXG5cdGdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZTogU2NlbmUpOiBzdHJpbmcge1xuXHRcdC8vIFBhcnNlIGNyZWF0ZWRfYXQgZGF0ZVxuXHRcdGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShzY2VuZS5jcmVhdGVkX2F0KTtcblx0XHRjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuXHRcdGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRjb25zdCBob3VycyA9IFN0cmluZyhkYXRlLmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRjb25zdCBtaW51dGVzID0gU3RyaW5nKGRhdGUuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCBcIjBcIik7XG5cdFx0XG5cdFx0Ly8gRm9ybWF0OiAyMDI0LTAxLTE1VDE0LTMwXG5cdFx0Y29uc3QgZGF0ZVN0ciA9IGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fVQke2hvdXJzfS0ke21pbnV0ZXN9YDtcblxuXHRcdC8vIFNhbml0aXplIGdvYWwgZm9yIGZpbGVuYW1lXG5cdFx0Y29uc3QgZ29hbFNhbml0aXplZCA9IChzY2VuZS5nb2FsIHx8IFwic2NlbmVcIilcblx0XHRcdC50cmltKClcblx0XHRcdC5yZXBsYWNlKC9bPD46XCIvXFxcXHw/KlxcblxcclxcdF0vZywgXCItXCIpXG5cdFx0XHQucmVwbGFjZSgvXFxzKy9nLCBcIi1cIilcblx0XHRcdC5yZXBsYWNlKC8tKy9nLCBcIi1cIilcblx0XHRcdC5yZXBsYWNlKC9eLXwtJC9nLCBcIlwiKVxuXHRcdFx0LnRvTG93ZXJDYXNlKCk7XG5cblx0XHRyZXR1cm4gYCR7ZGF0ZVN0cn1fJHtnb2FsU2FuaXRpemVkfS5tZGA7XG5cdH1cblxuXHQvLyBHZW5lcmF0ZSBmaWxlbmFtZSBmb3IgYmVhdCBiYXNlZCBvbiBkYXRlIGFuZCBpbnRlbnRcblx0Z2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdDogQmVhdCk6IHN0cmluZyB7XG5cdFx0Ly8gUGFyc2UgY3JlYXRlZF9hdCBkYXRlXG5cdFx0Y29uc3QgZGF0ZSA9IG5ldyBEYXRlKGJlYXQuY3JlYXRlZF9hdCk7XG5cdFx0Y29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcblx0XHRjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCBcIjBcIik7XG5cdFx0Y29uc3QgZGF5ID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCBcIjBcIik7XG5cdFx0Y29uc3QgaG91cnMgPSBTdHJpbmcoZGF0ZS5nZXRIb3VycygpKS5wYWRTdGFydCgyLCBcIjBcIik7XG5cdFx0Y29uc3QgbWludXRlcyA9IFN0cmluZyhkYXRlLmdldE1pbnV0ZXMoKSkucGFkU3RhcnQoMiwgXCIwXCIpO1xuXHRcdFxuXHRcdC8vIEZvcm1hdDogMjAyNC0wMS0xNVQxNC0zMFxuXHRcdGNvbnN0IGRhdGVTdHIgPSBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1UJHtob3Vyc30tJHttaW51dGVzfWA7XG5cblx0XHQvLyBTYW5pdGl6ZSBpbnRlbnQgZm9yIGZpbGVuYW1lXG5cdFx0Y29uc3QgaW50ZW50U2FuaXRpemVkID0gKGJlYXQuaW50ZW50IHx8IFwiYmVhdFwiKVxuXHRcdFx0LnRyaW0oKVxuXHRcdFx0LnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXFxuXFxyXFx0XS9nLCBcIi1cIilcblx0XHRcdC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKVxuXHRcdFx0LnJlcGxhY2UoLy0rL2csIFwiLVwiKVxuXHRcdFx0LnJlcGxhY2UoL14tfC0kL2csIFwiXCIpXG5cdFx0XHQudG9Mb3dlckNhc2UoKTtcblxuXHRcdHJldHVybiBgJHtkYXRlU3RyfV8ke2ludGVudFNhbml0aXplZH0ubWRgO1xuXHR9XG5cblx0Ly8gV3JpdGUgY29udGVudCBibG9jayBmaWxlXG5cdGFzeW5jIHdyaXRlQ29udGVudEJsb2NrRmlsZShcblx0XHRjb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayxcblx0XHRmaWxlUGF0aDogc3RyaW5nLFxuXHRcdHN0b3J5TmFtZT86IHN0cmluZ1xuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCB0eXBlID0gY29udGVudEJsb2NrLnR5cGUgfHwgXCJ0ZXh0XCI7XG5cdFx0XG5cdFx0Y29uc3QgYmFzZUZpZWxkczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgbnVsbD4gPSB7XG5cdFx0XHRpZDogY29udGVudEJsb2NrLmlkLFxuXHRcdFx0Y2hhcHRlcl9pZDogY29udGVudEJsb2NrLmNoYXB0ZXJfaWQgfHwgbnVsbCxcblx0XHRcdG9yZGVyX251bTogY29udGVudEJsb2NrLm9yZGVyX251bSB8fCAwLFxuXHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdGtpbmQ6IGNvbnRlbnRCbG9jay5raW5kLFxuXHRcdFx0Y3JlYXRlZF9hdDogY29udGVudEJsb2NrLmNyZWF0ZWRfYXQsXG5cdFx0XHR1cGRhdGVkX2F0OiBjb250ZW50QmxvY2sudXBkYXRlZF9hdCxcblx0XHR9O1xuXG5cdFx0Ly8gQWRkIG1ldGFkYXRhIGZpZWxkcyBiYXNlZCBvbiB0eXBlXG5cdFx0Y29uc3QgbWV0YSA9IGNvbnRlbnRCbG9jay5tZXRhZGF0YSB8fCB7fTtcblx0XHRpZiAodHlwZSA9PT0gXCJ0ZXh0XCIgJiYgbWV0YS53b3JkX2NvdW50KSB7XG5cdFx0XHRiYXNlRmllbGRzLndvcmRfY291bnQgPSBtZXRhLndvcmRfY291bnQ7XG5cdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImltYWdlXCIpIHtcblx0XHRcdC8vIFN0b3JlIG9yaWdpbmFsIFVSTCBmb3Igc3luYyBwdXJwb3Nlc1xuXHRcdFx0aWYgKGNvbnRlbnRCbG9jay5jb250ZW50ICYmIGNvbnRlbnRCbG9jay5jb250ZW50LnN0YXJ0c1dpdGgoXCJodHRwXCIpKSB7XG5cdFx0XHRcdGJhc2VGaWVsZHMub3JpZ2luYWxfdXJsID0gY29udGVudEJsb2NrLmNvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0XHRpZiAobWV0YS5hbHRfdGV4dCkgYmFzZUZpZWxkcy5hbHRfdGV4dCA9IG1ldGEuYWx0X3RleHQ7XG5cdFx0XHRpZiAobWV0YS5jYXB0aW9uKSBiYXNlRmllbGRzLmNhcHRpb24gPSBtZXRhLmNhcHRpb247XG5cdFx0XHRpZiAobWV0YS53aWR0aCkgYmFzZUZpZWxkcy53aWR0aCA9IG1ldGEud2lkdGg7XG5cdFx0XHRpZiAobWV0YS5oZWlnaHQpIGJhc2VGaWVsZHMuaGVpZ2h0ID0gbWV0YS5oZWlnaHQ7XG5cdFx0XHRpZiAobWV0YS5taW1lX3R5cGUpIGJhc2VGaWVsZHMubWltZV90eXBlID0gbWV0YS5taW1lX3R5cGU7XG5cdFx0XHRpZiAobWV0YS5zb3VyY2UpIGJhc2VGaWVsZHMuc291cmNlID0gbWV0YS5zb3VyY2U7XG5cdFx0XHRpZiAobWV0YS5hdXRob3JfbmFtZSkgYmFzZUZpZWxkcy5hdXRob3JfbmFtZSA9IG1ldGEuYXV0aG9yX25hbWU7XG5cdFx0XHRpZiAobWV0YS5hdHRyaWJ1dGlvbikgYmFzZUZpZWxkcy5hdHRyaWJ1dGlvbiA9IG1ldGEuYXR0cmlidXRpb247XG5cdFx0XHRpZiAobWV0YS5hdHRyaWJ1dGlvbl91cmwpIGJhc2VGaWVsZHMuYXR0cmlidXRpb25fdXJsID0gbWV0YS5hdHRyaWJ1dGlvbl91cmw7XG5cdFx0fSBlbHNlIGlmICh0eXBlID09PSBcInZpZGVvXCIgfHwgdHlwZSA9PT0gXCJhdWRpb1wiKSB7XG5cdFx0XHRpZiAobWV0YS5wcm92aWRlcikgYmFzZUZpZWxkcy5wcm92aWRlciA9IG1ldGEucHJvdmlkZXI7XG5cdFx0XHRpZiAobWV0YS52aWRlb19pZCkgYmFzZUZpZWxkcy52aWRlb19pZCA9IG1ldGEudmlkZW9faWQ7XG5cdFx0XHRpZiAobWV0YS5kdXJhdGlvbikgYmFzZUZpZWxkcy5kdXJhdGlvbiA9IG1ldGEuZHVyYXRpb247XG5cdFx0XHRpZiAobWV0YS50aHVtYm5haWxfdXJsKSBiYXNlRmllbGRzLnRodW1ibmFpbF91cmwgPSBtZXRhLnRodW1ibmFpbF91cmw7XG5cdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImVtYmVkXCIpIHtcblx0XHRcdGlmIChtZXRhLnByb3ZpZGVyKSBiYXNlRmllbGRzLnByb3ZpZGVyID0gbWV0YS5wcm92aWRlcjtcblx0XHRcdGlmIChtZXRhLmh0bWwpIGJhc2VGaWVsZHMuZW1iZWRfaHRtbCA9IG1ldGEuaHRtbDtcblx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwibGlua1wiKSB7XG5cdFx0XHRpZiAobWV0YS50aXRsZSkgYmFzZUZpZWxkcy5saW5rX3RpdGxlID0gbWV0YS50aXRsZTtcblx0XHRcdGlmIChtZXRhLmRlc2NyaXB0aW9uKSBiYXNlRmllbGRzLmxpbmtfZGVzY3JpcHRpb24gPSBtZXRhLmRlc2NyaXB0aW9uO1xuXHRcdFx0aWYgKG1ldGEuaW1hZ2VfdXJsKSBiYXNlRmllbGRzLmxpbmtfaW1hZ2UgPSBtZXRhLmltYWdlX3VybDtcblx0XHRcdGlmIChtZXRhLnNpdGVfbmFtZSkgYmFzZUZpZWxkcy5zaXRlX25hbWUgPSBtZXRhLnNpdGVfbmFtZTtcblx0XHR9XG5cblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMuZ2VuZXJhdGVGcm9udG1hdHRlcihiYXNlRmllbGRzLCB1bmRlZmluZWQsIHtcblx0XHRcdGVudGl0eVR5cGU6IFwiY29udGVudC1ibG9ja1wiLFxuXHRcdFx0c3RvcnlOYW1lOiBzdG9yeU5hbWUsXG5cdFx0XHRkYXRlOiBjb250ZW50QmxvY2suY3JlYXRlZF9hdCxcblx0XHR9KTtcblxuXHRcdC8vIEdlbmVyYXRlIGNvbnRlbnQgYmFzZWQgb24gdHlwZVxuXHRcdGxldCBmaWxlQ29udGVudDogc3RyaW5nO1xuXHRcdGlmICh0eXBlID09PSBcInRleHRcIikge1xuXHRcdFx0ZmlsZUNvbnRlbnQgPSBgJHtmcm9udG1hdHRlcn0ke2NvbnRlbnRCbG9jay5jb250ZW50fWA7XG5cdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImltYWdlXCIpIHtcblx0XHRcdC8vIERvd25sb2FkIGltYWdlIGFuZCBzYXZlIGxvY2FsbHlcblx0XHRcdGxldCBsb2NhbEltYWdlUGF0aDogc3RyaW5nID0gY29udGVudEJsb2NrLmNvbnRlbnQgfHwgXCJcIjtcblx0XHRcdGlmIChjb250ZW50QmxvY2suY29udGVudCAmJiAhY29udGVudEJsb2NrLmNvbnRlbnQuc3RhcnRzV2l0aChcImh0dHBcIikpIHtcblx0XHRcdFx0Ly8gQWxyZWFkeSBhIGxvY2FsIHBhdGgsIHVzZSBhcyBpc1xuXHRcdFx0XHRsb2NhbEltYWdlUGF0aCA9IGNvbnRlbnRCbG9jay5jb250ZW50O1xuXHRcdFx0fSBlbHNlIGlmIChjb250ZW50QmxvY2suY29udGVudCkge1xuXHRcdFx0XHQvLyBEb3dubG9hZCBpbWFnZSBmcm9tIHJlbW90ZSBVUkxcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRsb2NhbEltYWdlUGF0aCA9IGF3YWl0IHRoaXMuZG93bmxvYWRJbWFnZShjb250ZW50QmxvY2suY29udGVudCwgZmlsZVBhdGgsIGNvbnRlbnRCbG9jay5pZCk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZG93bmxvYWQgaW1hZ2U6XCIsIGVycik7XG5cdFx0XHRcdFx0Ly8gRmFsbGJhY2sgdG8gb3JpZ2luYWwgVVJMIGlmIGRvd25sb2FkIGZhaWxzXG5cdFx0XHRcdFx0bG9jYWxJbWFnZVBhdGggPSBjb250ZW50QmxvY2suY29udGVudDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRjb25zdCBhbHRUZXh0ID0gbWV0YS5hbHRfdGV4dCB8fCBcIlwiO1xuXHRcdFx0ZmlsZUNvbnRlbnQgPSBgJHtmcm9udG1hdHRlcn0hWyR7YWx0VGV4dH1dKCR7bG9jYWxJbWFnZVBhdGh9KWA7XG5cdFx0XHRpZiAobWV0YS5jYXB0aW9uKSB7XG5cdFx0XHRcdGZpbGVDb250ZW50ICs9IGBcXG5cXG4qJHttZXRhLmNhcHRpb259KmA7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmICh0eXBlID09PSBcInZpZGVvXCIpIHtcblx0XHRcdGZpbGVDb250ZW50ID0gYCR7ZnJvbnRtYXR0ZXJ9W1ZpZGVvXSgke2NvbnRlbnRCbG9jay5jb250ZW50fSlgO1xuXHRcdFx0aWYgKG1ldGEudGh1bWJuYWlsX3VybCkge1xuXHRcdFx0XHRmaWxlQ29udGVudCArPSBgXFxuXFxuIVtUaHVtYm5haWxdKCR7bWV0YS50aHVtYm5haWxfdXJsfSlgO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJhdWRpb1wiKSB7XG5cdFx0XHRmaWxlQ29udGVudCA9IGAke2Zyb250bWF0dGVyfVtBdWRpb10oJHtjb250ZW50QmxvY2suY29udGVudH0pYDtcblx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwiZW1iZWRcIikge1xuXHRcdFx0ZmlsZUNvbnRlbnQgPSBgJHtmcm9udG1hdHRlcn0ke21ldGEuaHRtbCB8fCBjb250ZW50QmxvY2suY29udGVudH1gO1xuXHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJsaW5rXCIpIHtcblx0XHRcdGNvbnN0IHRpdGxlID0gbWV0YS50aXRsZSB8fCBjb250ZW50QmxvY2suY29udGVudDtcblx0XHRcdGZpbGVDb250ZW50ID0gYCR7ZnJvbnRtYXR0ZXJ9WyR7dGl0bGV9XSgke2NvbnRlbnRCbG9jay5jb250ZW50fSlgO1xuXHRcdFx0aWYgKG1ldGEuZGVzY3JpcHRpb24pIHtcblx0XHRcdFx0ZmlsZUNvbnRlbnQgKz0gYFxcblxcbiR7bWV0YS5kZXNjcmlwdGlvbn1gO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRmaWxlQ29udGVudCA9IGAke2Zyb250bWF0dGVyfSR7Y29udGVudEJsb2NrLmNvbnRlbnR9YDtcblx0XHR9XG5cblx0XHRjb25zdCBmaWxlID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdGF3YWl0IHRoaXMudmF1bHQubW9kaWZ5KGZpbGUsIGZpbGVDb250ZW50KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YXdhaXQgdGhpcy52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGZpbGVDb250ZW50KTtcblx0XHR9XG5cdH1cblxuXHQvLyBEb3dubG9hZCBpbWFnZSBmcm9tIFVSTCBhbmQgc2F2ZSBsb2NhbGx5IChzYW1lIGZvbGRlciBhcyBjb250ZW50IGJsb2NrIC5tZClcblx0cHJpdmF0ZSBhc3luYyBkb3dubG9hZEltYWdlKGltYWdlVXJsOiBzdHJpbmcsIGNvbnRlbnRCbG9ja0ZpbGVQYXRoOiBzdHJpbmcsIGNvbnRlbnRCbG9ja0lkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdHRyeSB7XG5cdFx0XHQvLyBGZXRjaCBpbWFnZVxuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChpbWFnZVVybCk7XG5cdFx0XHRpZiAoIXJlc3BvbnNlLm9rKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIGltYWdlOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XG5cdFx0XHRjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKTtcblxuXHRcdFx0Ly8gRGV0ZXJtaW5lIGZpbGUgZXh0ZW5zaW9uIGZyb20gY29udGVudCB0eXBlIG9yIFVSTFxuXHRcdFx0bGV0IGV4dGVuc2lvbiA9IFwianBnXCI7XG5cdFx0XHRjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KFwiY29udGVudC10eXBlXCIpO1xuXHRcdFx0aWYgKGNvbnRlbnRUeXBlKSB7XG5cdFx0XHRcdGlmIChjb250ZW50VHlwZS5pbmNsdWRlcyhcInBuZ1wiKSkgZXh0ZW5zaW9uID0gXCJwbmdcIjtcblx0XHRcdFx0ZWxzZSBpZiAoY29udGVudFR5cGUuaW5jbHVkZXMoXCJnaWZcIikpIGV4dGVuc2lvbiA9IFwiZ2lmXCI7XG5cdFx0XHRcdGVsc2UgaWYgKGNvbnRlbnRUeXBlLmluY2x1ZGVzKFwid2VicFwiKSkgZXh0ZW5zaW9uID0gXCJ3ZWJwXCI7XG5cdFx0XHRcdGVsc2UgaWYgKGNvbnRlbnRUeXBlLmluY2x1ZGVzKFwic3ZnXCIpKSBleHRlbnNpb24gPSBcInN2Z1wiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gVHJ5IHRvIGdldCBleHRlbnNpb24gZnJvbSBVUkxcblx0XHRcdFx0Y29uc3QgdXJsTWF0Y2ggPSBpbWFnZVVybC5tYXRjaCgvXFwuKGpwZ3xqcGVnfHBuZ3xnaWZ8d2VicHxzdmcpKFxcP3wkKS9pKTtcblx0XHRcdFx0aWYgKHVybE1hdGNoKSB7XG5cdFx0XHRcdFx0ZXh0ZW5zaW9uID0gdXJsTWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBHZXQgZGlyZWN0b3J5IG9mIGNvbnRlbnQgYmxvY2sgZmlsZSAoc2FtZSBmb2xkZXIgZm9yIGltYWdlKVxuXHRcdFx0Y29uc3QgY29udGVudEJsb2NrRGlyID0gY29udGVudEJsb2NrRmlsZVBhdGguc3Vic3RyaW5nKDAsIGNvbnRlbnRCbG9ja0ZpbGVQYXRoLmxhc3RJbmRleE9mKFwiL1wiKSk7XG5cblx0XHRcdC8vIEdlbmVyYXRlIGltYWdlIGZpbGVuYW1lIGJhc2VkIG9uIGNvbnRlbnQgYmxvY2sgSURcblx0XHRcdGNvbnN0IGltYWdlRmlsZU5hbWUgPSBgJHtjb250ZW50QmxvY2tJZH0uJHtleHRlbnNpb259YDtcblx0XHRcdGNvbnN0IGltYWdlUGF0aCA9IGAke2NvbnRlbnRCbG9ja0Rpcn0vJHtpbWFnZUZpbGVOYW1lfWA7XG5cblx0XHRcdC8vIFNhdmUgaW1hZ2UgZmlsZSAoT2JzaWRpYW4ncyBjcmVhdGVCaW5hcnkgZXhwZWN0cyBBcnJheUJ1ZmZlcilcblx0XHRcdGNvbnN0IGV4aXN0aW5nRmlsZSA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGltYWdlUGF0aCk7XG5cdFx0XHRpZiAoZXhpc3RpbmdGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy52YXVsdC5tb2RpZnlCaW5hcnkoZXhpc3RpbmdGaWxlLCBhcnJheUJ1ZmZlcik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnZhdWx0LmNyZWF0ZUJpbmFyeShpbWFnZVBhdGgsIGFycmF5QnVmZmVyKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmV0dXJuIGp1c3QgdGhlIGZpbGVuYW1lIChzYW1lIGZvbGRlcilcblx0XHRcdHJldHVybiBpbWFnZUZpbGVOYW1lO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIGRvd25sb2FkaW5nIGltYWdlOlwiLCBlcnIpO1xuXHRcdFx0dGhyb3cgZXJyO1xuXHRcdH1cblx0fVxuXG5cdC8vIFJlYWQgY29udGVudCBibG9jayBmcm9tIGZpbGVcblx0YXN5bmMgcmVhZENvbnRlbnRCbG9ja0Zyb21GaWxlKGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPENvbnRlbnRCbG9jayB8IG51bGw+IHtcblx0XHRjb25zdCBmaWxlID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMudmF1bHQucmVhZChmaWxlKTtcblx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5wYXJzZUZyb250bWF0dGVyKGZpbGVDb250ZW50KTtcblxuXHRcdFx0Ly8gRXh0cmFjdCBjb250ZW50IGFmdGVyIGZyb250bWF0dGVyXG5cdFx0XHRjb25zdCBjb250ZW50TWF0Y2ggPSBmaWxlQ29udGVudC5tYXRjaCgvXi0tLVxcbltcXHNcXFNdKj9cXG4tLS1cXG4oW1xcc1xcU10qKSQvKTtcblx0XHRcdGxldCBibG9ja0NvbnRlbnQgPSBjb250ZW50TWF0Y2ggPyBjb250ZW50TWF0Y2hbMV0udHJpbSgpIDogXCJcIjtcblxuXHRcdFx0aWYgKCFmcm9udG1hdHRlci5pZCkge1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgdHlwZSA9IChmcm9udG1hdHRlci50eXBlIHx8IFwidGV4dFwiKSBhcyBDb250ZW50QmxvY2tbXCJ0eXBlXCJdO1xuXHRcdFx0XG5cdFx0XHQvLyBCdWlsZCBtZXRhZGF0YSBmcm9tIGZyb250bWF0dGVyIGZpcnN0XG5cdFx0XHRjb25zdCBtZXRhZGF0YTogQ29udGVudEJsb2NrW1wibWV0YWRhdGFcIl0gPSB7fTtcblx0XHRcdFxuXHRcdFx0Ly8gUGFyc2UgY29udGVudCBiYXNlZCBvbiB0eXBlXG5cdFx0XHRpZiAodHlwZSA9PT0gXCJpbWFnZVwiKSB7XG5cdFx0XHRcdC8vIEV4dHJhY3QgaW1hZ2UgcGF0aCBmcm9tICFbYWx0XShwYXRoKVxuXHRcdFx0XHRjb25zdCBpbWdNYXRjaCA9IGJsb2NrQ29udGVudC5tYXRjaCgvIVxcW1teXFxdXSpcXF1cXCgoW14pXSspXFwpLyk7XG5cdFx0XHRcdGlmIChpbWdNYXRjaCkge1xuXHRcdFx0XHRcdGJsb2NrQ29udGVudCA9IGltZ01hdGNoWzFdO1xuXHRcdFx0XHRcdC8vIElmIGl0J3MgYSBsb2NhbCBmaWxlbmFtZSAobm90IGEgVVJMKSwgdXNlIG9yaWdpbmFsX3VybCBmcm9tIGZyb250bWF0dGVyIGZvciBzeW5jXG5cdFx0XHRcdFx0aWYgKCFibG9ja0NvbnRlbnQuc3RhcnRzV2l0aChcImh0dHBcIikgJiYgZnJvbnRtYXR0ZXIub3JpZ2luYWxfdXJsKSB7XG5cdFx0XHRcdFx0XHRibG9ja0NvbnRlbnQgPSBmcm9udG1hdHRlci5vcmlnaW5hbF91cmwgYXMgc3RyaW5nO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0eXBlID09PSBcInZpZGVvXCIgfHwgdHlwZSA9PT0gXCJhdWRpb1wiIHx8IHR5cGUgPT09IFwibGlua1wiKSB7XG5cdFx0XHRcdC8vIEV4dHJhY3QgVVJMIGZyb20gW3RleHRdKHVybClcblx0XHRcdFx0Y29uc3QgbGlua01hdGNoID0gYmxvY2tDb250ZW50Lm1hdGNoKC9cXFtbXlxcXV0qXFxdXFwoKFteKV0rKVxcKS8pO1xuXHRcdFx0XHRpZiAobGlua01hdGNoKSB7XG5cdFx0XHRcdFx0YmxvY2tDb250ZW50ID0gbGlua01hdGNoWzFdO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbnRpbnVlIGJ1aWxkaW5nIG1ldGFkYXRhIGZyb20gZnJvbnRtYXR0ZXJcblx0XHRcdGlmIChmcm9udG1hdHRlci53b3JkX2NvdW50KSBtZXRhZGF0YS53b3JkX2NvdW50ID0gcGFyc2VJbnQoZnJvbnRtYXR0ZXIud29yZF9jb3VudCwgMTApO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLmFsdF90ZXh0KSBtZXRhZGF0YS5hbHRfdGV4dCA9IGZyb250bWF0dGVyLmFsdF90ZXh0O1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLmNhcHRpb24pIG1ldGFkYXRhLmNhcHRpb24gPSBmcm9udG1hdHRlci5jYXB0aW9uO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLndpZHRoKSBtZXRhZGF0YS53aWR0aCA9IHBhcnNlSW50KGZyb250bWF0dGVyLndpZHRoLCAxMCk7XG5cdFx0XHRpZiAoZnJvbnRtYXR0ZXIuaGVpZ2h0KSBtZXRhZGF0YS5oZWlnaHQgPSBwYXJzZUludChmcm9udG1hdHRlci5oZWlnaHQsIDEwKTtcblx0XHRcdGlmIChmcm9udG1hdHRlci5taW1lX3R5cGUpIG1ldGFkYXRhLm1pbWVfdHlwZSA9IGZyb250bWF0dGVyLm1pbWVfdHlwZTtcblx0XHRcdGlmIChmcm9udG1hdHRlci5zb3VyY2UpIG1ldGFkYXRhLnNvdXJjZSA9IGZyb250bWF0dGVyLnNvdXJjZSBhcyBcInVuc3BsYXNoXCIgfCBcImludGVybmV0IGxpbmtcIiB8IFwibG9jYWxcIjtcblx0XHRcdGlmIChmcm9udG1hdHRlci5hdXRob3JfbmFtZSkgbWV0YWRhdGEuYXV0aG9yX25hbWUgPSBmcm9udG1hdHRlci5hdXRob3JfbmFtZTtcblx0XHRcdGlmIChmcm9udG1hdHRlci5hdHRyaWJ1dGlvbikgbWV0YWRhdGEuYXR0cmlidXRpb24gPSBmcm9udG1hdHRlci5hdHRyaWJ1dGlvbjtcblx0XHRcdGlmIChmcm9udG1hdHRlci5hdHRyaWJ1dGlvbl91cmwpIG1ldGFkYXRhLmF0dHJpYnV0aW9uX3VybCA9IGZyb250bWF0dGVyLmF0dHJpYnV0aW9uX3VybDtcblx0XHRcdGlmIChmcm9udG1hdHRlci5wcm92aWRlcikgbWV0YWRhdGEucHJvdmlkZXIgPSBmcm9udG1hdHRlci5wcm92aWRlcjtcblx0XHRcdGlmIChmcm9udG1hdHRlci52aWRlb19pZCkgbWV0YWRhdGEudmlkZW9faWQgPSBmcm9udG1hdHRlci52aWRlb19pZDtcblx0XHRcdGlmIChmcm9udG1hdHRlci5kdXJhdGlvbikgbWV0YWRhdGEuZHVyYXRpb24gPSBwYXJzZUludChmcm9udG1hdHRlci5kdXJhdGlvbiwgMTApO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLnRodW1ibmFpbF91cmwpIG1ldGFkYXRhLnRodW1ibmFpbF91cmwgPSBmcm9udG1hdHRlci50aHVtYm5haWxfdXJsO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLmVtYmVkX2h0bWwpIG1ldGFkYXRhLmh0bWwgPSBmcm9udG1hdHRlci5lbWJlZF9odG1sO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLmxpbmtfdGl0bGUpIG1ldGFkYXRhLnRpdGxlID0gZnJvbnRtYXR0ZXIubGlua190aXRsZTtcblx0XHRcdGlmIChmcm9udG1hdHRlci5saW5rX2Rlc2NyaXB0aW9uKSBtZXRhZGF0YS5kZXNjcmlwdGlvbiA9IGZyb250bWF0dGVyLmxpbmtfZGVzY3JpcHRpb247XG5cdFx0XHRpZiAoZnJvbnRtYXR0ZXIubGlua19pbWFnZSkgbWV0YWRhdGEuaW1hZ2VfdXJsID0gZnJvbnRtYXR0ZXIubGlua19pbWFnZTtcblx0XHRcdGlmIChmcm9udG1hdHRlci5zaXRlX25hbWUpIG1ldGFkYXRhLnNpdGVfbmFtZSA9IGZyb250bWF0dGVyLnNpdGVfbmFtZTtcblxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0aWQ6IGZyb250bWF0dGVyLmlkLFxuXHRcdFx0XHRjaGFwdGVyX2lkOiBmcm9udG1hdHRlci5jaGFwdGVyX2lkIHx8IG51bGwsXG5cdFx0XHRcdG9yZGVyX251bTogcGFyc2VJbnQoZnJvbnRtYXR0ZXIub3JkZXJfbnVtIHx8IFwiMFwiLCAxMCksXG5cdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdGtpbmQ6IGZyb250bWF0dGVyLmtpbmQgfHwgXCJmaW5hbFwiLFxuXHRcdFx0XHRjb250ZW50OiBibG9ja0NvbnRlbnQsXG5cdFx0XHRcdG1ldGFkYXRhOiBtZXRhZGF0YSxcblx0XHRcdFx0Y3JlYXRlZF9hdDogZnJvbnRtYXR0ZXIuY3JlYXRlZF9hdCB8fCBcIlwiLFxuXHRcdFx0XHR1cGRhdGVkX2F0OiBmcm9udG1hdHRlci51cGRhdGVkX2F0IHx8IFwiXCIsXG5cdFx0XHR9O1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHJlYWQgY29udGVudCBibG9jayBmcm9tICR7ZmlsZVBhdGh9OmAsIGVycik7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdH1cblxuXHQvLyBMaXN0IGFsbCBjb250ZW50IGJsb2NrIGZpbGVzIGluIGEgc3RvcnkgZm9sZGVyIChhY3Jvc3MgYWxsIHR5cGUgc3ViZm9sZGVycylcblx0YXN5bmMgbGlzdENvbnRlbnRCbG9ja0ZpbGVzKHN0b3J5Rm9sZGVyUGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuXHRcdGNvbnN0IGNvbnRlbnRzUGF0aCA9IGAke3N0b3J5Rm9sZGVyUGF0aH0vMDMtY29udGVudHNgO1xuXHRcdGNvbnN0IGZvbGRlciA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGNvbnRlbnRzUGF0aCk7XG5cblx0XHRpZiAoIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH1cblxuXHRcdGNvbnN0IGNvbnRlbnRGaWxlczogc3RyaW5nW10gPSBbXTtcblx0XHRcblx0XHQvLyBJdGVyYXRlIHRocm91Z2ggdHlwZSBzdWJmb2xkZXJzXG5cdFx0Zm9yIChjb25zdCBjaGlsZCBvZiBmb2xkZXIuY2hpbGRyZW4pIHtcblx0XHRcdGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcblx0XHRcdFx0Ly8gVGhpcyBpcyBhIHR5cGUgc3ViZm9sZGVyICh0ZXh0LCBpbWFnZXMsIGV0Yy4pXG5cdFx0XHRcdGZvciAoY29uc3QgZmlsZSBvZiBjaGlsZC5jaGlsZHJlbikge1xuXHRcdFx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09IFwibWRcIikge1xuXHRcdFx0XHRcdFx0Y29udGVudEZpbGVzLnB1c2goZmlsZS5wYXRoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY29udGVudEZpbGVzLnNvcnQoKTtcblx0fVxufVxuXG4iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFRGaWxlLCBURm9sZGVyIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBTdG9yeUVuZ2luZUNsaWVudCB9IGZyb20gXCIuLi9hcGkvY2xpZW50XCI7XG5pbXBvcnQgeyBGaWxlTWFuYWdlciB9IGZyb20gXCIuL2ZpbGVNYW5hZ2VyXCI7XG5pbXBvcnQge1xuXHRTdG9yeUVuZ2luZVNldHRpbmdzLFxuXHRDb250ZW50QmxvY2ssXG5cdENvbnRlbnRBbmNob3IsXG5cdFNjZW5lLFxuXHRCZWF0LFxuXHRDaGFwdGVyLFxuXHRTY2VuZVdpdGhCZWF0cyxcblx0U3RvcnksXG59IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgcGFyc2VIaWVyYXJjaGljYWxQcm9zZSwgcGFyc2VDaGFwdGVyUHJvc2UsIGNvbXBhcmVDb250ZW50QmxvY2tzLCBQYXJzZWRQYXJhZ3JhcGgsIENvbnRlbnRCbG9ja0NvbXBhcmlzb24sIEhpZXJhcmNoaWNhbFByb3NlLCBwYXJzZVNjZW5lQmVhdExpc3QsIFBhcnNlZFNjZW5lQmVhdExpc3RJdGVtLCBwYXJzZUNoYXB0ZXJMaXN0LCBQYXJzZWRDaGFwdGVyTGlzdEl0ZW0sIFBhcnNlZENoYXB0ZXJMaXN0LCBwYXJzZUJlYXRMaXN0LCBQYXJzZWRCZWF0TGlzdCwgUGFyc2VkQmVhdExpc3RJdGVtLCBwYXJzZU9ycGhhblNjZW5lc0xpc3QsIHBhcnNlT3JwaGFuQmVhdHNMaXN0LCBwYXJzZVN0b3J5UHJvc2UsIHBhcnNlU2NlbmVQcm9zZSwgcGFyc2VCZWF0UHJvc2UgfSBmcm9tIFwiLi9jb250ZW50QmxvY2tQYXJzZXJcIjtcbmltcG9ydCB7IENvbmZsaWN0TW9kYWwsIENvbmZsaWN0UmVzb2x1dGlvblJlc3VsdCB9IGZyb20gXCIuLi92aWV3cy9tb2RhbHMvQ29uZmxpY3RNb2RhbFwiO1xuaW1wb3J0IHsgU3luY0VudGl0eVBheWxvYWQsIFN5bmNFbnRpdHlUYXJnZXQgfSBmcm9tIFwiLi9lbnRpdHlTeW5jVHlwZXNcIjtcbmltcG9ydCB7IGFwaVVwZGF0ZU5vdGlmaWVyIH0gZnJvbSBcIi4vYXBpVXBkYXRlTm90aWZpZXJcIjtcblxuZXhwb3J0IGNsYXNzIFN5bmNTZXJ2aWNlIHtcblx0cHJpdmF0ZSB1bnN1YnNjcmliZUZyb21Ob3RpZmllcj86ICgpID0+IHZvaWQ7XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSBhcGlDbGllbnQ6IFN0b3J5RW5naW5lQ2xpZW50LFxuXHRcdHByaXZhdGUgZmlsZU1hbmFnZXI6IEZpbGVNYW5hZ2VyLFxuXHRcdHByaXZhdGUgc2V0dGluZ3M6IFN0b3J5RW5naW5lU2V0dGluZ3MsXG5cdFx0cHJpdmF0ZSBhcHA6IEFwcFxuXHQpIHtcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5hdXRvU3luY09uQXBpVXBkYXRlcykge1xuXHRcdFx0dGhpcy51bnN1YnNjcmliZUZyb21Ob3RpZmllciA9IGFwaVVwZGF0ZU5vdGlmaWVyLnN1YnNjcmliZShhc3luYyAocGF5bG9hZCkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwbHlFbnRpdHlEYXRhKHBheWxvYWQpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGF1dG8tc3luYyBlbnRpdHkgZGF0YVwiLCBlcnIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRkaXNwb3NlKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLnVuc3Vic2NyaWJlRnJvbU5vdGlmaWVyKSB7XG5cdFx0XHR0aGlzLnVuc3Vic2NyaWJlRnJvbU5vdGlmaWVyKCk7XG5cdFx0XHR0aGlzLnVuc3Vic2NyaWJlRnJvbU5vdGlmaWVyID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXG5cdC8vIFB1bGwgc3RvcnkgZnJvbSBzZXJ2aWNlIHRvIE9ic2lkaWFuIChTZXJ2aWNlIFx1MjE5MiBPYnNpZGlhbilcblx0YXN5bmMgcHVsbFN0b3J5KHN0b3J5SWQ6IHN0cmluZywgdGFyZ2V0PzogU3luY0VudGl0eVRhcmdldCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAodGFyZ2V0KSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucHVsbFNpbmdsZUVudGl0eShzdG9yeUlkLCB0YXJnZXQpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHN0b3J5RGF0YSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFN0b3J5V2l0aEhpZXJhcmNoeShzdG9yeUlkKTtcblx0XHRcdGNvbnN0IGZvbGRlclBhdGggPSB0aGlzLmZpbGVNYW5hZ2VyLmdldFN0b3J5Rm9sZGVyUGF0aChcblx0XHRcdFx0c3RvcnlEYXRhLnN0b3J5LnRpdGxlXG5cdFx0XHQpO1xuXG5cdFx0XHQvLyBJTVBPUlRBTlQ6IFJlYWQgZXhpc3RpbmcgbWV0YWRhdGEgQkVGT1JFIHdyaXRpbmcgdG8gZGV0ZWN0IHZlcnNpb24gY2hhbmdlc1xuXHRcdFx0Y29uc3QgZXhpc3RpbmdNZXRhZGF0YSA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXJcblx0XHRcdFx0LnJlYWRTdG9yeU1ldGFkYXRhKGZvbGRlclBhdGgpXG5cdFx0XHRcdC5jYXRjaCgoKSA9PiBudWxsKTtcblxuXHRcdFx0Ly8gRmV0Y2ggc2NlbmVzIGFuZCBiZWF0cyB3aXRob3V0IGNoYXB0ZXJfaWQgKG9ycGhhbnMpXG5cdFx0XHRjb25zdCBhbGxTY2VuZXMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRTY2VuZXNCeVN0b3J5KHN0b3J5SWQpO1xuXHRcdFx0Y29uc3Qgb3JwaGFuU2NlbmVzOiBTY2VuZVdpdGhCZWF0c1tdID0gW107XG5cdFx0XHRcblx0XHRcdGZvciAoY29uc3Qgc2NlbmUgb2YgYWxsU2NlbmVzKSB7XG5cdFx0XHRcdGlmICghc2NlbmUuY2hhcHRlcl9pZCkge1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0QmVhdHMoc2NlbmUuaWQpO1xuXHRcdFx0XHRcdG9ycGhhblNjZW5lcy5wdXNoKHsgc2NlbmUsIGJlYXRzIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIFNvcnQgb3JwaGFuIHNjZW5lcyBieSBvcmRlcl9udW1cblx0XHRcdG9ycGhhblNjZW5lcy5zb3J0KChhLCBiKSA9PiBhLnNjZW5lLm9yZGVyX251bSAtIGIuc2NlbmUub3JkZXJfbnVtKTtcblx0XHRcdFxuXHRcdFx0Ly8gRmV0Y2ggYmVhdHMgd2l0aG91dCBzY2VuZV9pZCAob3JwaGFuIGJlYXRzKVxuXHRcdFx0Y29uc3QgYWxsQmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0c0J5U3Rvcnkoc3RvcnlJZCk7XG5cdFx0XHRjb25zdCBvcnBoYW5CZWF0czogQmVhdFtdID0gW107XG5cdFx0XHRjb25zdCBzY2VuZUlkU2V0ID0gbmV3IFNldChhbGxTY2VuZXMubWFwKHMgPT4gcy5pZCkpO1xuXHRcdFx0XG5cdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYWxsQmVhdHMpIHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgYmVhdCdzIHNjZW5lX2lkIGRvZXNuJ3QgZXhpc3Qgb3IgaXMgaW52YWxpZFxuXHRcdFx0XHRpZiAoIWJlYXQuc2NlbmVfaWQgfHwgIXNjZW5lSWRTZXQuaGFzKGJlYXQuc2NlbmVfaWQpKSB7XG5cdFx0XHRcdFx0b3JwaGFuQmVhdHMucHVzaChiZWF0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBTb3J0IG9ycGhhbiBiZWF0cyBieSBvcmRlcl9udW1cblx0XHRcdG9ycGhhbkJlYXRzLnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pO1xuXHRcdFx0XG5cdFx0XHQvLyBGZXRjaCBwcm9zZSBibG9ja3MgZm9yIGFsbCBjaGFwdGVycyB0byBpbmNsdWRlIGluIHN0b3J5Lm1kXG5cdFx0XHRjb25zdCBjaGFwdGVyQ29udGVudERhdGEgPSBuZXcgTWFwPHN0cmluZywgeyBjb250ZW50QmxvY2tzOiBDb250ZW50QmxvY2tbXSwgY29udGVudEJsb2NrUmVmczogQ29udGVudEFuY2hvcltdIH0+KCk7XG5cdFx0XHRmb3IgKGNvbnN0IGNoYXB0ZXJXaXRoQ29udGVudCBvZiBzdG9yeURhdGEuY2hhcHRlcnMpIHtcblx0XHRcdFx0Y29uc3QgY29udGVudEJsb2NrcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRCbG9ja3MoY2hhcHRlcldpdGhDb250ZW50LmNoYXB0ZXIuaWQpO1xuXHRcdFx0XHRjb25zdCBjb250ZW50QmxvY2tSZWZzOiBDb250ZW50QW5jaG9yW10gPSBbXTtcblx0XHRcdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2YgY29udGVudEJsb2Nrcykge1xuXHRcdFx0XHRcdGNvbnN0IHJlZnMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QW5jaG9ycyhjb250ZW50QmxvY2suaWQpO1xuXHRcdFx0XHRcdGNvbnRlbnRCbG9ja1JlZnMucHVzaCguLi5yZWZzKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjaGFwdGVyQ29udGVudERhdGEuc2V0KGNoYXB0ZXJXaXRoQ29udGVudC5jaGFwdGVyLmlkLCB7IGNvbnRlbnRCbG9ja3MsIGNvbnRlbnRCbG9ja1JlZnMgfSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIFdyaXRlIHN0b3J5IG1ldGFkYXRhIHdpdGggY2hhcHRlcnMgbGlzdCwgb3JwaGFuIHNjZW5lcywgb3JwaGFuIGJlYXRzLCBhbmQgcHJvc2UgZGF0YVxuXHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZVN0b3J5TWV0YWRhdGEoXG5cdFx0XHRcdHN0b3J5RGF0YS5zdG9yeSxcblx0XHRcdFx0Zm9sZGVyUGF0aCxcblx0XHRcdFx0c3RvcnlEYXRhLmNoYXB0ZXJzLFxuXHRcdFx0XHRvcnBoYW5TY2VuZXMsXG5cdFx0XHRcdG9ycGhhbkJlYXRzLFxuXHRcdFx0XHRjaGFwdGVyQ29udGVudERhdGFcblx0XHRcdCk7XG5cblx0XHRcdC8vIEVuc3VyZSBjb250ZW50cyBmb2xkZXIgYW5kIHR5cGUgc3ViZm9sZGVycyBleGlzdFxuXHRcdFx0Y29uc3QgY29udGVudHNGb2xkZXJQYXRoID0gYCR7Zm9sZGVyUGF0aH0vMDMtY29udGVudHNgO1xuXHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHMoY29udGVudHNGb2xkZXJQYXRoKTtcblx0XHRcdC8vIENyZWF0ZSB0eXBlIHN1YmZvbGRlcnNcblx0XHRcdGZvciAoY29uc3QgdHlwZUZvbGRlciBvZiBbXCIwMC10ZXh0c1wiLCBcIjAxLWltYWdlc1wiLCBcIjAyLXZpZGVvc1wiLCBcIjAzLWF1ZGlvc1wiLCBcIjA0LWVtYmVkc1wiLCBcIjA1LWxpbmtzXCJdKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKGAke2NvbnRlbnRzRm9sZGVyUGF0aH0vJHt0eXBlRm9sZGVyfWApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBFbnN1cmUgY2hhcHRlcnMgZm9sZGVyIGV4aXN0c1xuXHRcdFx0Y29uc3QgY2hhcHRlcnNGb2xkZXJQYXRoID0gYCR7Zm9sZGVyUGF0aH0vMDAtY2hhcHRlcnNgO1xuXHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHMoY2hhcHRlcnNGb2xkZXJQYXRoKTtcblxuXHRcdFx0Ly8gV3JpdGUgY2hhcHRlciBmaWxlcyB3aXRoIGNvbnRlbnQgYmxvY2tzXG5cdFx0XHRmb3IgKGNvbnN0IGNoYXB0ZXJXaXRoQ29udGVudCBvZiBzdG9yeURhdGEuY2hhcHRlcnMpIHtcblx0XHRcdFx0Ly8gR2V0IGNvbnRlbnQgYmxvY2tzIGZyb20gdGhlIGFscmVhZHkgZmV0Y2hlZCBkYXRhXG5cdFx0XHRcdGNvbnN0IGNvbnRlbnREYXRhID0gY2hhcHRlckNvbnRlbnREYXRhLmdldChjaGFwdGVyV2l0aENvbnRlbnQuY2hhcHRlci5pZCk7XG5cdFx0XHRcdGNvbnN0IGNvbnRlbnRCbG9ja3MgPSBjb250ZW50RGF0YT8uY29udGVudEJsb2NrcyB8fCBbXTtcblx0XHRcdFx0Y29uc3QgY29udGVudEJsb2NrUmVmcyA9IGNvbnRlbnREYXRhPy5jb250ZW50QmxvY2tSZWZzIHx8IFtdO1xuXG5cdFx0XHRcdC8vIFdyaXRlIGNvbnRlbnQgYmxvY2sgZmlsZXMgdG8gdGhlaXIgdHlwZS1zcGVjaWZpYyBzdWJmb2xkZXJzXG5cdFx0XHRcdGZvciAoY29uc3QgY29udGVudEJsb2NrIG9mIGNvbnRlbnRCbG9ja3MpIHtcblx0XHRcdFx0XHRjb25zdCBjb250ZW50QmxvY2tGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShjb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdGNvbnN0IHR5cGVGb2xkZXJQYXRoID0gdGhpcy5maWxlTWFuYWdlci5nZXRDb250ZW50QmxvY2tGb2xkZXJQYXRoKGZvbGRlclBhdGgsIGNvbnRlbnRCbG9jay50eXBlIHx8IFwidGV4dFwiKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyh0eXBlRm9sZGVyUGF0aCk7XG5cdFx0XHRcdFx0Y29uc3QgY29udGVudEJsb2NrRmlsZVBhdGggPSBgJHt0eXBlRm9sZGVyUGF0aH0vJHtjb250ZW50QmxvY2tGaWxlTmFtZX1gO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKFxuXHRcdFx0XHRcdFx0Y29udGVudEJsb2NrLFxuXHRcdFx0XHRcdFx0Y29udGVudEJsb2NrRmlsZVBhdGgsXG5cdFx0XHRcdFx0XHRzdG9yeURhdGEuc3RvcnkudGl0bGVcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gV3JpdGUgY2hhcHRlciBmaWxlIHdpdGggaGllcmFyY2hpY2FsIHByb3NlIHN0cnVjdHVyZVxuXHRcdFx0XHRjb25zdCBjaGFwdGVyRmlsZU5hbWUgPSBgQ2hhcHRlci0ke2NoYXB0ZXJXaXRoQ29udGVudC5jaGFwdGVyLm51bWJlcn0ubWRgO1xuXHRcdFx0XHRjb25zdCBjaGFwdGVyRmlsZVBhdGggPSBgJHtjaGFwdGVyc0ZvbGRlclBhdGh9LyR7Y2hhcHRlckZpbGVOYW1lfWA7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDaGFwdGVyRmlsZShcblx0XHRcdFx0XHRjaGFwdGVyV2l0aENvbnRlbnQsXG5cdFx0XHRcdFx0Y2hhcHRlckZpbGVQYXRoLFxuXHRcdFx0XHRcdHN0b3J5RGF0YS5zdG9yeS50aXRsZSxcblx0XHRcdFx0XHRjb250ZW50QmxvY2tzLFxuXHRcdFx0XHRcdGNvbnRlbnRCbG9ja1JlZnMsXG5cdFx0XHRcdFx0b3JwaGFuU2NlbmVzIC8vIEluY2x1ZGUgb3JwaGFuIHNjZW5lcyBmb3IgZWFzeSBhc3NvY2lhdGlvblxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdC8vIFdyaXRlIHNjZW5lIGZpbGVzIHdpdGggcHJvc2UgYmxvY2sgcmVmZXJlbmNlcyAoZmxhdCBzdHJ1Y3R1cmUpXG5cdFx0XHRcdGNvbnN0IHNjZW5lc0ZvbGRlclBhdGggPSBgJHtmb2xkZXJQYXRofS8wMS1zY2VuZXNgO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyhzY2VuZXNGb2xkZXJQYXRoKTtcblx0XHRcdFx0XG5cdFx0XHRcdGZvciAoY29uc3QgeyBzY2VuZSwgYmVhdHMgfSBvZiBjaGFwdGVyV2l0aENvbnRlbnQuc2NlbmVzKSB7XG5cdFx0XHRcdFx0Ly8gRmV0Y2ggcHJvc2UgYmxvY2tzIHJlZmVyZW5jZWQgYnkgdGhpcyBzY2VuZVxuXHRcdFx0XHRcdGNvbnN0IHNjZW5lQ29udGVudEJsb2NrcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRCbG9ja3NCeVNjZW5lKHNjZW5lLmlkKTtcblxuXHRcdFx0XHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVGaWxlUGF0aCA9IGAke3NjZW5lc0ZvbGRlclBhdGh9LyR7c2NlbmVGaWxlTmFtZX1gO1xuXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZVNjZW5lRmlsZShcblx0XHRcdFx0XHRcdHsgc2NlbmUsIGJlYXRzIH0sXG5cdFx0XHRcdFx0XHRzY2VuZUZpbGVQYXRoLFxuXHRcdFx0XHRcdFx0c3RvcnlEYXRhLnN0b3J5LnRpdGxlLFxuXHRcdFx0XHRcdFx0c2NlbmVDb250ZW50QmxvY2tzLFxuXHRcdFx0XHRcdFx0b3JwaGFuQmVhdHMgLy8gSW5jbHVkZSBvcnBoYW4gYmVhdHMgZm9yIGVhc3kgYXNzb2NpYXRpb25cblx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0Ly8gV3JpdGUgYmVhdCBmaWxlcyB3aXRoIHByb3NlIGJsb2NrIHJlZmVyZW5jZXMgKGZsYXQgc3RydWN0dXJlKVxuXHRcdFx0XHRcdGNvbnN0IGJlYXRzRm9sZGVyUGF0aCA9IGAke2ZvbGRlclBhdGh9LzAyLWJlYXRzYDtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyhiZWF0c0ZvbGRlclBhdGgpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cykge1xuXHRcdFx0XHRcdFx0Y29uc3QgYmVhdENvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzQnlCZWF0KGJlYXQuaWQpO1xuXHRcdFx0XHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlUGF0aCA9IGAke2JlYXRzRm9sZGVyUGF0aH0vJHtiZWF0RmlsZU5hbWV9YDtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVCZWF0RmlsZShiZWF0LCBiZWF0RmlsZVBhdGgsIHN0b3J5RGF0YS5zdG9yeS50aXRsZSwgYmVhdENvbnRlbnRCbG9ja3MpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBXcml0ZSBvcnBoYW4gc2NlbmUgZmlsZXMgKHNjZW5lcyB3aXRob3V0IGNoYXB0ZXJfaWQpXG5cdFx0XHRjb25zdCBzY2VuZXNGb2xkZXJQYXRoID0gYCR7Zm9sZGVyUGF0aH0vMDEtc2NlbmVzYDtcblx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKHNjZW5lc0ZvbGRlclBhdGgpO1xuXHRcdFx0XG5cdFx0XHRmb3IgKGNvbnN0IHsgc2NlbmUsIGJlYXRzIH0gb2Ygb3JwaGFuU2NlbmVzKSB7XG5cdFx0XHRcdC8vIEZldGNoIHByb3NlIGJsb2NrcyByZWZlcmVuY2VkIGJ5IHRoaXMgc2NlbmVcblx0XHRcdFx0Y29uc3Qgc2NlbmVDb250ZW50QmxvY2tzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrc0J5U2NlbmUoc2NlbmUuaWQpO1xuXG5cdFx0XHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0XHRcdGNvbnN0IHNjZW5lRmlsZVBhdGggPSBgJHtzY2VuZXNGb2xkZXJQYXRofS8ke3NjZW5lRmlsZU5hbWV9YDtcblxuXHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlU2NlbmVGaWxlKFxuXHRcdFx0XHRcdHsgc2NlbmUsIGJlYXRzIH0sXG5cdFx0XHRcdFx0c2NlbmVGaWxlUGF0aCxcblx0XHRcdFx0XHRzdG9yeURhdGEuc3RvcnkudGl0bGUsXG5cdFx0XHRcdFx0c2NlbmVDb250ZW50QmxvY2tzLFxuXHRcdFx0XHRcdG9ycGhhbkJlYXRzIC8vIEluY2x1ZGUgb3JwaGFuIGJlYXRzIGZvciBlYXN5IGFzc29jaWF0aW9uXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0Ly8gV3JpdGUgYmVhdCBmaWxlcyB3aXRoIHByb3NlIGJsb2NrIHJlZmVyZW5jZXMgKGZsYXQgc3RydWN0dXJlKVxuXHRcdFx0XHRjb25zdCBiZWF0c0ZvbGRlclBhdGggPSBgJHtmb2xkZXJQYXRofS8wMi1iZWF0c2A7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKGJlYXRzRm9sZGVyUGF0aCk7XG5cdFx0XHRcdFxuXHRcdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0XHRjb25zdCBiZWF0Q29udGVudEJsb2NrcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRCbG9ja3NCeUJlYXQoYmVhdC5pZCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZVBhdGggPSBgJHtiZWF0c0ZvbGRlclBhdGh9LyR7YmVhdEZpbGVOYW1lfWA7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUJlYXRGaWxlKGJlYXQsIGJlYXRGaWxlUGF0aCwgc3RvcnlEYXRhLnN0b3J5LnRpdGxlLCBiZWF0Q29udGVudEJsb2Nrcyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gV3JpdGUgb3JwaGFuIGJlYXQgZmlsZXMgKGJlYXRzIHdpdGhvdXQgc2NlbmVfaWQpXG5cdFx0XHRjb25zdCBiZWF0c0ZvbGRlclBhdGggPSBgJHtmb2xkZXJQYXRofS8wMi1iZWF0c2A7XG5cdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyhiZWF0c0ZvbGRlclBhdGgpO1xuXHRcdFx0XG5cdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2Ygb3JwaGFuQmVhdHMpIHtcblx0XHRcdFx0Y29uc3QgYmVhdENvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzQnlCZWF0KGJlYXQuaWQpO1xuXHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRjb25zdCBiZWF0RmlsZVBhdGggPSBgJHtiZWF0c0ZvbGRlclBhdGh9LyR7YmVhdEZpbGVOYW1lfWA7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVCZWF0RmlsZShiZWF0LCBiZWF0RmlsZVBhdGgsIHN0b3J5RGF0YS5zdG9yeS50aXRsZSwgYmVhdENvbnRlbnRCbG9ja3MpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDaGVjayBpZiB2ZXJzaW9uIGNoYW5nZWQgYW5kIGNyZWF0ZSBzbmFwc2hvdCBpZiBuZWVkZWQgKGV4aXN0aW5nTWV0YWRhdGEgd2FzIHJlYWQgQkVGT1JFIHdyaXRpbmcpXG5cdFx0XHRpZiAoXG5cdFx0XHRcdGV4aXN0aW5nTWV0YWRhdGEgJiZcblx0XHRcdFx0ZXhpc3RpbmdNZXRhZGF0YS5mcm9udG1hdHRlci52ZXJzaW9uICE9PSB1bmRlZmluZWQgJiZcblx0XHRcdFx0ZXhpc3RpbmdNZXRhZGF0YS5mcm9udG1hdHRlci52ZXJzaW9uICE9PSBzdG9yeURhdGEuc3RvcnkudmVyc2lvbl9udW1iZXJcblx0XHRcdCkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmNyZWF0ZVZlcnNpb25TbmFwc2hvdChcblx0XHRcdFx0XHRmb2xkZXJQYXRoLFxuXHRcdFx0XHRcdGV4aXN0aW5nTWV0YWRhdGEuZnJvbnRtYXR0ZXIudmVyc2lvblxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTeW5jIGFsbCBwcmV2aW91cyB2ZXJzaW9ucyB0byB0aGUgdmVyc2lvbnMgZm9sZGVyXG5cdFx0XHRhd2FpdCB0aGlzLnN5bmNWZXJzaW9uSGlzdG9yeShzdG9yeURhdGEuc3Rvcnkucm9vdF9zdG9yeV9pZCwgZm9sZGVyUGF0aCk7XG5cblx0XHRcdG5ldyBOb3RpY2UoYFN0b3J5IFwiJHtzdG9yeURhdGEuc3RvcnkudGl0bGV9XCIgc3luY2VkIHN1Y2Nlc3NmdWxseWApO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID1cblx0XHRcdFx0ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIHN5bmMgc3RvcnlcIjtcblx0XHRcdG5ldyBOb3RpY2UoYEVycm9yIHN5bmNpbmcgc3Rvcnk6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0dGhyb3cgZXJyO1xuXHRcdH1cblx0fVxuXG5cdC8vIFN5bmMgYWxsIHByZXZpb3VzIHZlcnNpb25zIG9mIGEgc3Rvcnlcblx0cHJpdmF0ZSBhc3luYyBzeW5jVmVyc2lvbkhpc3RvcnkoXG5cdFx0cm9vdFN0b3J5SWQ6IHN0cmluZyxcblx0XHRzdG9yeUZvbGRlclBhdGg6IHN0cmluZ1xuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0cnkge1xuXHRcdFx0Ly8gR2V0IEFMTCBzdG9yaWVzIGFuZCBmaWx0ZXIgYnkgcm9vdF9zdG9yeV9pZFxuXHRcdFx0Y29uc3QgYWxsU3RvcmllcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50Lmxpc3RTdG9yaWVzKCk7XG5cdFx0XHRjb25zdCB2ZXJzaW9ucyA9IGFsbFN0b3JpZXMuZmlsdGVyKHMgPT4gcy5yb290X3N0b3J5X2lkID09PSByb290U3RvcnlJZCk7XG5cblx0XHRcdC8vIFNvcnQgYnkgdmVyc2lvbiBudW1iZXJcblx0XHRcdHZlcnNpb25zLnNvcnQoKGEsIGIpID0+IGEudmVyc2lvbl9udW1iZXIgLSBiLnZlcnNpb25fbnVtYmVyKTtcblxuXHRcdFx0Y29uc3QgdmVyc2lvbnNQYXRoID0gYCR7c3RvcnlGb2xkZXJQYXRofS92ZXJzaW9uc2A7XG5cdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyh2ZXJzaW9uc1BhdGgpO1xuXG5cdFx0XHQvLyBGb3IgZWFjaCB2ZXJzaW9uIChleGNlcHQgdGhlIGN1cnJlbnQgb25lKSwgZmV0Y2ggYW5kIHN0b3JlXG5cdFx0XHRmb3IgKGNvbnN0IHZlcnNpb25TdG9yeSBvZiB2ZXJzaW9ucykge1xuXHRcdFx0XHQvLyBTa2lwIHRoZSBjdXJyZW50IHZlcnNpb24gKGl0J3MgYWxyZWFkeSBpbiB0aGUgcm9vdCBmb2xkZXIpXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRWZXJzaW9uID0gdmVyc2lvbnNbdmVyc2lvbnMubGVuZ3RoIC0gMV0udmVyc2lvbl9udW1iZXI7XG5cdFx0XHRcdGlmICh2ZXJzaW9uU3RvcnkudmVyc2lvbl9udW1iZXIgPT09IGN1cnJlbnRWZXJzaW9uKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCB2ZXJzaW9uRm9sZGVyUGF0aCA9IGAke3ZlcnNpb25zUGF0aH0vdiR7dmVyc2lvblN0b3J5LnZlcnNpb25fbnVtYmVyfWA7XG5cblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyB2ZXJzaW9uIGFscmVhZHkgZXhpc3RzXG5cdFx0XHRcdC8vIChXZSB3b24ndCBvdmVyd3JpdGUgZXhpc3RpbmcgdmVyc2lvbnMgdG8gcHJlc2VydmUgbG9jYWwgZWRpdHMpXG5cdFx0XHRcdGNvbnN0IGV4aXN0aW5nVmVyc2lvbkZvbGRlciA9IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXG5cdFx0XHRcdFx0dmVyc2lvbkZvbGRlclBhdGhcblx0XHRcdFx0KTtcblx0XHRcdFx0aWYgKGV4aXN0aW5nVmVyc2lvbkZvbGRlcikge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGBWZXJzaW9uIHYke3ZlcnNpb25TdG9yeS52ZXJzaW9uX251bWJlcn0gYWxyZWFkeSBleGlzdHMsIHNraXBwaW5nYCk7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBGZXRjaCBmdWxsIHZlcnNpb24gZGF0YVxuXHRcdFx0XHRjb25zdCB2ZXJzaW9uRGF0YSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFN0b3J5V2l0aEhpZXJhcmNoeShcblx0XHRcdFx0XHR2ZXJzaW9uU3RvcnkuaWRcblx0XHRcdFx0KTtcblxuXHRcdFx0XHQvLyBDcmVhdGUgdmVyc2lvbiBmb2xkZXJcblx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHModmVyc2lvbkZvbGRlclBhdGgpO1xuXG5cdFx0XHRcdC8vIFdyaXRlIHZlcnNpb24gbWV0YWRhdGFcblx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZVN0b3J5TWV0YWRhdGEoXG5cdFx0XHRcdFx0dmVyc2lvbkRhdGEuc3RvcnksXG5cdFx0XHRcdFx0dmVyc2lvbkZvbGRlclBhdGhcblx0XHRcdFx0KTtcblxuXHRcdFx0XHQvLyBFbnN1cmUgY29udGVudHMgZm9sZGVyIGFuZCB0eXBlIHN1YmZvbGRlcnMgZXhpc3QgZm9yIHZlcnNpb25cblx0XHRcdFx0Y29uc3QgdmVyc2lvbkNvbnRlbnRzRm9sZGVyUGF0aCA9IGAke3ZlcnNpb25Gb2xkZXJQYXRofS8wMy1jb250ZW50c2A7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKHZlcnNpb25Db250ZW50c0ZvbGRlclBhdGgpO1xuXHRcdFx0XHRmb3IgKGNvbnN0IHR5cGVGb2xkZXIgb2YgW1wiMDAtdGV4dHNcIiwgXCIwMS1pbWFnZXNcIiwgXCIwMi12aWRlb3NcIiwgXCIwMy1hdWRpb3NcIiwgXCIwNC1lbWJlZHNcIiwgXCIwNS1saW5rc1wiXSkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKGAke3ZlcnNpb25Db250ZW50c0ZvbGRlclBhdGh9LyR7dHlwZUZvbGRlcn1gKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFdyaXRlIHZlcnNpb24gY2hhcHRlcnNcblx0XHRcdFx0Y29uc3QgdmVyc2lvbkNoYXB0ZXJzUGF0aCA9IGAke3ZlcnNpb25Gb2xkZXJQYXRofS8wMC1jaGFwdGVyc2A7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKHZlcnNpb25DaGFwdGVyc1BhdGgpO1xuXG5cdFx0XHRcdGZvciAoY29uc3QgY2hhcHRlcldpdGhDb250ZW50IG9mIHZlcnNpb25EYXRhLmNoYXB0ZXJzKSB7XG5cdFx0XHRcdFx0Ly8gRmV0Y2ggcHJvc2UgYmxvY2tzIGZvciB0aGlzIGNoYXB0ZXJcblx0XHRcdFx0XHRjb25zdCBjb250ZW50QmxvY2tzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2NrcyhjaGFwdGVyV2l0aENvbnRlbnQuY2hhcHRlci5pZCk7XG5cblx0XHRcdFx0XHQvLyBGZXRjaCBwcm9zZSBibG9jayByZWZlcmVuY2VzIGZvciBhbGwgcHJvc2UgYmxvY2tzXG5cdFx0XHRcdFx0Y29uc3QgY29udGVudEJsb2NrUmVmczogQ29udGVudEFuY2hvcltdID0gW107XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2YgY29udGVudEJsb2Nrcykge1xuXHRcdFx0XHRcdFx0Y29uc3QgcmVmcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRBbmNob3JzKGNvbnRlbnRCbG9jay5pZCk7XG5cdFx0XHRcdFx0XHRjb250ZW50QmxvY2tSZWZzLnB1c2goLi4ucmVmcyk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gV3JpdGUgcHJvc2UgYmxvY2sgZmlsZXNcblx0XHRcdFx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBjb250ZW50QmxvY2tzKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBjb250ZW50QmxvY2tGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShjb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0Y29uc3QgdHlwZUZvbGRlclBhdGggPSB0aGlzLmZpbGVNYW5hZ2VyLmdldENvbnRlbnRCbG9ja0ZvbGRlclBhdGgodmVyc2lvbkZvbGRlclBhdGgsIGNvbnRlbnRCbG9jay50eXBlIHx8IFwidGV4dFwiKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKHR5cGVGb2xkZXJQYXRoKTtcblx0XHRcdFx0XHRcdGNvbnN0IGNvbnRlbnRCbG9ja0ZpbGVQYXRoID0gYCR7dHlwZUZvbGRlclBhdGh9LyR7Y29udGVudEJsb2NrRmlsZU5hbWV9YDtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKFxuXHRcdFx0XHRcdFx0XHRjb250ZW50QmxvY2ssXG5cdFx0XHRcdFx0XHRcdGNvbnRlbnRCbG9ja0ZpbGVQYXRoLFxuXHRcdFx0XHRcdFx0XHR2ZXJzaW9uRGF0YS5zdG9yeS50aXRsZVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjb25zdCBjaGFwdGVyRmlsZU5hbWUgPSBgQ2hhcHRlci0ke2NoYXB0ZXJXaXRoQ29udGVudC5jaGFwdGVyLm51bWJlcn0ubWRgO1xuXHRcdFx0XHRcdGNvbnN0IGNoYXB0ZXJGaWxlUGF0aCA9IGAke3ZlcnNpb25DaGFwdGVyc1BhdGh9LyR7Y2hhcHRlckZpbGVOYW1lfWA7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNoYXB0ZXJGaWxlKFxuXHRcdFx0XHRcdFx0Y2hhcHRlcldpdGhDb250ZW50LFxuXHRcdFx0XHRcdFx0Y2hhcHRlckZpbGVQYXRoLFxuXHRcdFx0XHRcdFx0dmVyc2lvbkRhdGEuc3RvcnkudGl0bGUsXG5cdFx0XHRcdFx0XHRjb250ZW50QmxvY2tzLFxuXHRcdFx0XHRcdFx0Y29udGVudEJsb2NrUmVmc1xuXHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHQvLyBXcml0ZSBzY2VuZSBmaWxlcyAoZmxhdCBzdHJ1Y3R1cmUpXG5cdFx0XHRcdFx0Y29uc3QgdmVyc2lvblNjZW5lc1BhdGggPSBgJHt2ZXJzaW9uRm9sZGVyUGF0aH0vMDEtc2NlbmVzYDtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyh2ZXJzaW9uU2NlbmVzUGF0aCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Zm9yIChjb25zdCB7IHNjZW5lLCBiZWF0cyB9IG9mIGNoYXB0ZXJXaXRoQ29udGVudC5zY2VuZXMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHNjZW5lQ29udGVudEJsb2NrcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRCbG9ja3NCeVNjZW5lKHNjZW5lLmlkKTtcblx0XHRcdFx0XHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0XHRcdFx0XHRjb25zdCBzY2VuZUZpbGVQYXRoID0gYCR7dmVyc2lvblNjZW5lc1BhdGh9LyR7c2NlbmVGaWxlTmFtZX1gO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZVNjZW5lRmlsZShcblx0XHRcdFx0XHRcdFx0eyBzY2VuZSwgYmVhdHMgfSxcblx0XHRcdFx0XHRcdFx0c2NlbmVGaWxlUGF0aCxcblx0XHRcdFx0XHRcdFx0dmVyc2lvbkRhdGEuc3RvcnkudGl0bGUsXG5cdFx0XHRcdFx0XHRcdHNjZW5lQ29udGVudEJsb2Nrc1xuXHRcdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdFx0Ly8gV3JpdGUgYmVhdCBmaWxlcyAoZmxhdCBzdHJ1Y3R1cmUpXG5cdFx0XHRcdFx0XHRjb25zdCB2ZXJzaW9uQmVhdHNQYXRoID0gYCR7dmVyc2lvbkZvbGRlclBhdGh9LzAyLWJlYXRzYDtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKHZlcnNpb25CZWF0c1BhdGgpO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgYmVhdENvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzQnlCZWF0KGJlYXQuaWQpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZVBhdGggPSBgJHt2ZXJzaW9uQmVhdHNQYXRofS8ke2JlYXRGaWxlTmFtZX1gO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQmVhdEZpbGUoYmVhdCwgYmVhdEZpbGVQYXRoLCB2ZXJzaW9uRGF0YS5zdG9yeS50aXRsZSwgYmVhdENvbnRlbnRCbG9ja3MpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnNvbGUubG9nKGBTeW5jZWQgdmVyc2lvbiB2JHt2ZXJzaW9uU3RvcnkudmVyc2lvbl9udW1iZXJ9YCk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3Igc3luY2luZyB2ZXJzaW9uIGhpc3Rvcnk6XCIsIGVycik7XG5cdFx0XHQvLyBEb24ndCB0aHJvdyAtIHZlcnNpb24gc3luYyBpcyBvcHRpb25hbFxuXHRcdH1cblx0fVxuXG5cdC8vIFB1bGwgYWxsIHN0b3JpZXNcblx0YXN5bmMgcHVsbEFsbFN0b3JpZXMoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Ly8gT25seSB2YWxpZGF0ZSB0ZW5hbnQgSUQgaW4gcmVtb3RlIG1vZGVcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5tb2RlID09PSBcInJlbW90ZVwiICYmICF0aGlzLnNldHRpbmdzLnRlbmFudElkKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJUZW5hbnQgSUQgaXMgcmVxdWlyZWRcIik7XG5cdFx0fVxuXG5cdFx0Ly8gUHVsbCB3b3JsZHMgKGZvciBkaXNwbGF5L21ldGFkYXRhKVxuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRXb3JsZHMoKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gbG9hZCB3b3JsZHM6XCIsIGVycik7XG5cdFx0XHQvLyBEb24ndCBmYWlsIHRoZSBlbnRpcmUgc3luYyBpZiB3b3JsZHMgZmFpbFxuXHRcdH1cblxuXHRcdGNvbnN0IHN0b3JpZXMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5saXN0U3RvcmllcygpO1xuXG5cdFx0Zm9yIChjb25zdCBzdG9yeSBvZiBzdG9yaWVzKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnB1bGxTdG9yeShzdG9yeS5pZCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHN5bmMgc3RvcnkgJHtzdG9yeS5pZH06YCwgZXJyKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRuZXcgTm90aWNlKGBTeW5jZWQgJHtzdG9yaWVzLmxlbmd0aH0gc3Rvcmllc2ApO1xuXHR9XG5cblx0Ly8gQXBwbHkgZW50aXR5IGRhdGEgcmVjZWl2ZWQgZnJvbSBBUEkgd2l0aG91dCBmZXRjaGluZ1xuXHRhc3luYyBhcHBseUVudGl0eURhdGEocGF5bG9hZDogU3luY0VudGl0eVBheWxvYWQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRzd2l0Y2ggKHBheWxvYWQudHlwZSkge1xuXHRcdFx0Y2FzZSBcImNoYXB0ZXJcIjoge1xuXHRcdFx0XHRhd2FpdCB0aGlzLndyaXRlQ2hhcHRlckJ1bmRsZSh7XG5cdFx0XHRcdFx0c3Rvcnk6IHBheWxvYWQuc3RvcnksXG5cdFx0XHRcdFx0Y2hhcHRlcjogcGF5bG9hZC5jaGFwdGVyLFxuXHRcdFx0XHRcdHNjZW5lczogcGF5bG9hZC5zY2VuZXMsXG5cdFx0XHRcdFx0Y29udGVudEJsb2NrczogcGF5bG9hZC5jb250ZW50QmxvY2tzLFxuXHRcdFx0XHRcdGNvbnRlbnRCbG9ja1JlZnM6IHBheWxvYWQuY29udGVudEJsb2NrUmVmcyxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYENoYXB0ZXIgXCIke3BheWxvYWQuY2hhcHRlci50aXRsZX1cIiBzeW5jZWQgc3VjY2Vzc2Z1bGx5YCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0Y2FzZSBcInNjZW5lXCI6IHtcblx0XHRcdFx0Y29uc3QgYmVhdENvbnRlbnRCbG9ja01hcCA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2tbXT4oKTtcblx0XHRcdFx0aWYgKHBheWxvYWQuYmVhdENvbnRlbnRCbG9ja3MpIHtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IFtiZWF0SWQsIGJsb2Nrc10gb2YgT2JqZWN0LmVudHJpZXMocGF5bG9hZC5iZWF0Q29udGVudEJsb2NrcykpIHtcblx0XHRcdFx0XHRcdGJlYXRDb250ZW50QmxvY2tNYXAuc2V0KGJlYXRJZCwgYmxvY2tzKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBmb2xkZXJQYXRoID0gdGhpcy5maWxlTWFuYWdlci5nZXRTdG9yeUZvbGRlclBhdGgocGF5bG9hZC5zdG9yeS50aXRsZSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZW5zdXJlU3RvcnlGb2xkZXJzKGZvbGRlclBhdGgpO1xuXG5cdFx0XHRcdGF3YWl0IHRoaXMud3JpdGVTY2VuZUJ1bmRsZSh7XG5cdFx0XHRcdFx0c3RvcnlUaXRsZTogcGF5bG9hZC5zdG9yeS50aXRsZSxcblx0XHRcdFx0XHRmb2xkZXJQYXRoLFxuXHRcdFx0XHRcdHNjZW5lOiBwYXlsb2FkLnNjZW5lLFxuXHRcdFx0XHRcdGJlYXRzOiBwYXlsb2FkLmJlYXRzLFxuXHRcdFx0XHRcdHNjZW5lQ29udGVudEJsb2NrczogcGF5bG9hZC5zY2VuZUNvbnRlbnRCbG9ja3MsXG5cdFx0XHRcdFx0YmVhdENvbnRlbnRCbG9ja01hcCxcblx0XHRcdFx0XHRza2lwUmVtb3RlQ29udGVudEZldGNoOiB0cnVlLFxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRpZiAocGF5bG9hZC5zY2VuZUNvbnRlbnRCbG9ja3MpIHtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBwYXlsb2FkLnNjZW5lQ29udGVudEJsb2Nrcykge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy53cml0ZUNvbnRlbnRCbG9ja1RvRm9sZGVyKGZvbGRlclBhdGgsIHBheWxvYWQuc3RvcnkudGl0bGUsIGNvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Zm9yIChjb25zdCBibG9ja3Mgb2YgYmVhdENvbnRlbnRCbG9ja01hcC52YWx1ZXMoKSkge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgY29udGVudEJsb2NrIG9mIGJsb2Nrcykge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy53cml0ZUNvbnRlbnRCbG9ja1RvRm9sZGVyKGZvbGRlclBhdGgsIHBheWxvYWQuc3RvcnkudGl0bGUsIGNvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0bmV3IE5vdGljZShgU2NlbmUgXCIke3BheWxvYWQuc2NlbmUuZ29hbH1cIiBzeW5jZWQgc3VjY2Vzc2Z1bGx5YCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0Y2FzZSBcImNvbnRlbnRcIjoge1xuXHRcdFx0XHRjb25zdCBmb2xkZXJQYXRoID0gdGhpcy5maWxlTWFuYWdlci5nZXRTdG9yeUZvbGRlclBhdGgocGF5bG9hZC5zdG9yeS50aXRsZSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZW5zdXJlQ29udGVudEZvbGRlcnMoZm9sZGVyUGF0aCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMud3JpdGVDb250ZW50QmxvY2tUb0ZvbGRlcihcblx0XHRcdFx0XHRmb2xkZXJQYXRoLFxuXHRcdFx0XHRcdHBheWxvYWQuc3RvcnkudGl0bGUsXG5cdFx0XHRcdFx0cGF5bG9hZC5jb250ZW50QmxvY2tcblx0XHRcdFx0KTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkNvbnRlbnQgYmxvY2sgc3luY2VkIHN1Y2Nlc3NmdWxseVwiKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gUHVzaCBzdG9yeSBmcm9tIE9ic2lkaWFuIHRvIHNlcnZpY2UgKE9ic2lkaWFuIFx1MjE5MiBTZXJ2aWNlKVxuXHRhc3luYyBwdXNoU3RvcnkoZm9sZGVyUGF0aDogc3RyaW5nLCB0YXJnZXQ/OiBTeW5jRW50aXR5VGFyZ2V0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0dHJ5IHtcblx0XHRcdC8vIFJlYWQgc3RvcnkgbWV0YWRhdGFcblx0XHRcdGNvbnN0IHsgZnJvbnRtYXR0ZXI6IHN0b3J5RnJvbnRtYXR0ZXIgfSA9XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIucmVhZFN0b3J5TWV0YWRhdGEoZm9sZGVyUGF0aCk7XG5cblx0XHRcdGlmICghc3RvcnlGcm9udG1hdHRlci5pZCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJTdG9yeSBtZXRhZGF0YSBtaXNzaW5nIElEXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBzdG9yeUlkID0gc3RvcnlGcm9udG1hdHRlci5pZDtcblxuXHRcdFx0aWYgKHRhcmdldCkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnB1c2hTaW5nbGVFbnRpdHkoZm9sZGVyUGF0aCwgdGFyZ2V0LCBzdG9yeUlkLCBzdG9yeUZyb250bWF0dGVyLnRpdGxlKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZWFkIHN0b3J5IGZpbGUgdG8gcGFyc2UgY2hhcHRlciBsaXN0IGFuZCBvcnBoYW4gbGlzdHNcblx0XHRcdGNvbnN0IHN0b3J5RmlsZVBhdGggPSBgJHtmb2xkZXJQYXRofS9zdG9yeS5tZGA7XG5cdFx0XHRjb25zdCBzdG9yeUZpbGUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHN0b3J5RmlsZVBhdGgpO1xuXHRcdFx0aWYgKHN0b3J5RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRcdGNvbnN0IHN0b3J5Q29udGVudCA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5yZWFkKHN0b3J5RmlsZSk7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJMaXN0ID0gcGFyc2VDaGFwdGVyTGlzdChzdG9yeUNvbnRlbnQpO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gUHJvY2VzcyBjaGFwdGVyIGxpc3QgdG8gdXBkYXRlIG9yZGVyXG5cdFx0XHRcdGlmIChjaGFwdGVyTGlzdC5pdGVtcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wcm9jZXNzQ2hhcHRlckxpc3QoY2hhcHRlckxpc3QsIHN0b3J5SWQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBQYXJzZSBhbmQgcHJvY2VzcyBvcnBoYW4gc2NlbmVzIGxpc3Rcblx0XHRcdFx0Y29uc3Qgb3JwaGFuU2NlbmVzTGlzdCA9IHBhcnNlT3JwaGFuU2NlbmVzTGlzdChzdG9yeUNvbnRlbnQpO1xuXHRcdFx0XHRpZiAob3JwaGFuU2NlbmVzTGlzdC5pdGVtcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wcm9jZXNzT3JwaGFuU2NlbmVzTGlzdChvcnBoYW5TY2VuZXNMaXN0LCBzdG9yeUlkKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFBhcnNlIGFuZCBwcm9jZXNzIG9ycGhhbiBiZWF0cyBsaXN0XG5cdFx0XHRcdGNvbnN0IG9ycGhhbkJlYXRzTGlzdCA9IHBhcnNlT3JwaGFuQmVhdHNMaXN0KHN0b3J5Q29udGVudCk7XG5cdFx0XHRcdGlmIChvcnBoYW5CZWF0c0xpc3QuaXRlbXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucHJvY2Vzc09ycGhhbkJlYXRzTGlzdChvcnBoYW5CZWF0c0xpc3QsIHN0b3J5SWQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUGFyc2UgYW5kIHByb2Nlc3MgcHJvc2UgYmxvY2tzIGF0IHN0b3J5IGxldmVsXG5cdFx0XHRcdGNvbnN0IHN0b3J5UHJvc2UgPSBwYXJzZVN0b3J5UHJvc2Uoc3RvcnlDb250ZW50KTtcblx0XHRcdFx0aWYgKHN0b3J5UHJvc2Uuc2VjdGlvbnMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucHVzaFN0b3J5Q29udGVudEJsb2NrcyhzdG9yeUZpbGVQYXRoLCBmb2xkZXJQYXRoLCBzdG9yeUlkKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0Ly8gVXBkYXRlIHN0b3J5IG1ldGFkYXRhXG5cdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVTdG9yeShcblx0XHRcdFx0c3RvcnlJZCxcblx0XHRcdFx0c3RvcnlGcm9udG1hdHRlci50aXRsZSxcblx0XHRcdFx0c3RvcnlGcm9udG1hdHRlci5zdGF0dXNcblx0XHRcdCk7XG5cblx0XHRcdC8vIFJlYWQgYW5kIHVwZGF0ZSBjaGFwdGVyc1xuXHRcdFx0Y29uc3QgY2hhcHRlckZpbGVzID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlci5saXN0Q2hhcHRlckZpbGVzKGZvbGRlclBhdGgpO1xuXG5cdFx0XHRmb3IgKGNvbnN0IGNoYXB0ZXJGaWxlUGF0aCBvZiBjaGFwdGVyRmlsZXMpIHtcblx0XHRcdFx0Ly8gUGFyc2UgY2hhcHRlciBmaWxlIGFuZCB1cGRhdGUgdmlhIEFQSVxuXHRcdFx0XHQvLyAoVGhpcyB3b3VsZCByZXF1aXJlIGltcGxlbWVudGluZyBjaGFwdGVyIHVwZGF0ZSBsb2dpYylcblx0XHRcdFx0Y29uc29sZS5sb2coYFdvdWxkIHVwZGF0ZSBjaGFwdGVyOiAke2NoYXB0ZXJGaWxlUGF0aH1gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUHVzaCBwcm9zZSBibG9ja3MgZm9yIGVhY2ggY2hhcHRlclxuXHRcdFx0Zm9yIChjb25zdCBjaGFwdGVyRmlsZVBhdGggb2YgY2hhcHRlckZpbGVzKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucHVzaENoYXB0ZXJDb250ZW50QmxvY2tzKGNoYXB0ZXJGaWxlUGF0aCwgZm9sZGVyUGF0aCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFByb2Nlc3Mgc2NlbmUgZmlsZXMgdG8gdXBkYXRlIGJlYXQgbGlzdHMgYW5kIHByb3NlIGJsb2Nrc1xuXHRcdFx0Ly8gU2NlbmVzIGFyZSBzdG9yZWQgaW4gJHtmb2xkZXJQYXRofS8wMS1zY2VuZXMgKG5vdCBpbiBjaGFwdGVycy8wMS1zY2VuZXMpXG5cdFx0XHRjb25zdCBzY2VuZUZpbGVzID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlci5saXN0U3RvcnlTY2VuZUZpbGVzKGZvbGRlclBhdGgpO1xuXHRcdFx0XG5cdFx0XHRmb3IgKGNvbnN0IHNjZW5lRmlsZVBhdGggb2Ygc2NlbmVGaWxlcykge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnB1c2hTY2VuZUJlYXRzKHNjZW5lRmlsZVBhdGgsIHN0b3J5SWQpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnB1c2hTY2VuZUNvbnRlbnRCbG9ja3Moc2NlbmVGaWxlUGF0aCwgZm9sZGVyUGF0aCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFByb2Nlc3MgYmVhdCBmaWxlcyB0byB1cGRhdGUgcHJvc2UgYmxvY2tzXG5cdFx0XHQvLyBCZWF0cyBhcmUgc3RvcmVkIGluICR7Zm9sZGVyUGF0aH0vMDItYmVhdHNcblx0XHRcdGNvbnN0IGJlYXRGaWxlcyA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIubGlzdFN0b3J5QmVhdEZpbGVzKGZvbGRlclBhdGgpO1xuXHRcdFx0XG5cdFx0XHRmb3IgKGNvbnN0IGJlYXRGaWxlUGF0aCBvZiBiZWF0RmlsZXMpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wdXNoQmVhdENvbnRlbnRCbG9ja3MoYmVhdEZpbGVQYXRoLCBmb2xkZXJQYXRoKTtcblx0XHRcdH1cblxuXHRcdFx0bmV3IE5vdGljZShgU3RvcnkgXCIke3N0b3J5RnJvbnRtYXR0ZXIudGl0bGV9XCIgcHVzaGVkIHN1Y2Nlc3NmdWxseWApO1xuXG5cdFx0XHQvLyBQdWxsIHN0b3J5IGFmdGVyIHB1c2ggdG8gc3luYyBhbnkgc2VydmVyLXNpZGUgY2hhbmdlcyBhbmQgdXBkYXRlIGxvY2FsIGZpbGVzXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBTeW5jaW5nIHN0b3J5IFwiJHtzdG9yeUZyb250bWF0dGVyLnRpdGxlfVwiIGZyb20gc2VydmljZS4uLmApO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnB1bGxTdG9yeShzdG9yeUlkKTtcblx0XHRcdFx0bmV3IE5vdGljZShgU3RvcnkgXCIke3N0b3J5RnJvbnRtYXR0ZXIudGl0bGV9XCIgc3luY2VkIHN1Y2Nlc3NmdWxseWApO1xuXHRcdFx0fSBjYXRjaCAocHVsbEVycikge1xuXHRcdFx0XHRjb25zdCBwdWxsRXJyb3JNZXNzYWdlID1cblx0XHRcdFx0XHRwdWxsRXJyIGluc3RhbmNlb2YgRXJyb3IgPyBwdWxsRXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBzeW5jIHN0b3J5IGFmdGVyIHB1c2hcIjtcblx0XHRcdFx0bmV3IE5vdGljZShgV2FybmluZzogJHtwdWxsRXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0XHQvLyBEb24ndCB0aHJvdyAtIHB1c2ggd2FzIHN1Y2Nlc3NmdWwsIHN5bmMgZmFpbHVyZSBpcyBqdXN0IGEgd2FybmluZ1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID1cblx0XHRcdFx0ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIHB1c2ggc3RvcnlcIjtcblx0XHRcdG5ldyBOb3RpY2UoYEVycm9yIHB1c2hpbmcgc3Rvcnk6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0dGhyb3cgZXJyO1xuXHRcdH1cblx0fVxuXG5cdC8vIFB1c2ggcHJvc2UgYmxvY2tzIGZyb20gYSBjaGFwdGVyIGZpbGUgKGhpZXJhcmNoaWNhbCBzdHJ1Y3R1cmUpXG5cdGFzeW5jIHB1c2hDaGFwdGVyQ29udGVudEJsb2NrcyhjaGFwdGVyRmlsZVBhdGg6IHN0cmluZywgc3RvcnlGb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBSZWFkIGNoYXB0ZXIgZmlsZVxuXHRcdGNvbnN0IGZpbGUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGNoYXB0ZXJGaWxlUGF0aCk7XG5cdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBDaGFwdGVyIGZpbGUgbm90IGZvdW5kOiAke2NoYXB0ZXJGaWxlUGF0aH1gKTtcblx0XHR9XG5cblx0XHRjb25zdCBjaGFwdGVyQ29udGVudCA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5yZWFkKGZpbGUpO1xuXHRcdGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5maWxlTWFuYWdlci5wYXJzZUZyb250bWF0dGVyKGNoYXB0ZXJDb250ZW50KTtcblxuXHRcdGlmICghZnJvbnRtYXR0ZXIuaWQgfHwgIWZyb250bWF0dGVyLnN0b3J5X2lkKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDaGFwdGVyIG1ldGFkYXRhIG1pc3NpbmcgSUQgb3Igc3RvcnlfaWRcIik7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY2hhcHRlcklkID0gZnJvbnRtYXR0ZXIuaWQ7XG5cdFx0Y29uc3Qgc3RvcnlJZCA9IGZyb250bWF0dGVyLnN0b3J5X2lkO1xuXHRcdGNvbnN0IGNvbnRlbnRzRm9sZGVyUGF0aCA9IGAke3N0b3J5Rm9sZGVyUGF0aH0vMDMtY29udGVudHNgO1xuXG5cdFx0Ly8gUGFyc2UgYW5kIHByb2Nlc3MgdGhlIFwiIyMgU2NlbmVzICYgQmVhdHNcIiBsaXN0IGZpcnN0XG5cdFx0Y29uc3Qgc2NlbmVCZWF0TGlzdCA9IHBhcnNlU2NlbmVCZWF0TGlzdChjaGFwdGVyQ29udGVudCk7XG5cdFx0YXdhaXQgdGhpcy5wcm9jZXNzU2NlbmVCZWF0TGlzdChzY2VuZUJlYXRMaXN0LCBjaGFwdGVySWQsIHN0b3J5SWQpO1xuXG5cdFx0Ly8gR2V0IGFsbCBwcm9zZSBibG9ja3MgZnJvbSBBUEkgZm9yIHRoaXMgY2hhcHRlclxuXHRcdGNvbnN0IHJlbW90ZUNvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzKGNoYXB0ZXJJZCk7XG5cdFx0Y29uc3QgcmVtb3RlQ29udGVudEJsb2Nrc01hcCA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2s+KCk7XG5cdFx0Zm9yIChjb25zdCBwYiBvZiByZW1vdGVDb250ZW50QmxvY2tzKSB7XG5cdFx0XHRyZW1vdGVDb250ZW50QmxvY2tzTWFwLnNldChwYi5pZCwgcGIpO1xuXHRcdH1cblxuXHRcdC8vIEdldCBleGlzdGluZyBzY2VuZXMgYW5kIGJlYXRzIGZvciB0aGlzIGNoYXB0ZXIgKGFmdGVyIHByb2Nlc3NpbmcgbGlzdClcblx0XHRjb25zdCBleGlzdGluZ1NjZW5lcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFNjZW5lcyhjaGFwdGVySWQpO1xuXHRcdGNvbnN0IHNjZW5lTWFwID0gbmV3IE1hcDxzdHJpbmcsIFNjZW5lPigpOyAvLyBNYXAgYnkgbGluayBuYW1lXG5cdFx0Y29uc3Qgc2NlbmVJZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBTY2VuZT4oKTsgLy8gTWFwIGJ5IElEXG5cdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBleGlzdGluZ1NjZW5lcykge1xuXHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0c2NlbmVNYXAuc2V0KGxpbmtOYW1lLCBzY2VuZSk7XG5cdFx0XHRzY2VuZUlkTWFwLnNldChzY2VuZS5pZCwgc2NlbmUpO1xuXHRcdH1cblxuXHRcdC8vIEdldCBhbGwgYmVhdHMgZm9yIHNjZW5lcyBpbiB0aGlzIGNoYXB0ZXJcblx0XHRjb25zdCBiZWF0TWFwID0gbmV3IE1hcDxzdHJpbmcsIEJlYXQ+KCk7IC8vIE1hcCBieSBsaW5rIG5hbWVcblx0XHRjb25zdCBiZWF0SWRNYXAgPSBuZXcgTWFwPHN0cmluZywgQmVhdD4oKTsgLy8gTWFwIGJ5IElEXG5cdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBleGlzdGluZ1NjZW5lcykge1xuXHRcdFx0Y29uc3QgYmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0cyhzY2VuZS5pZCk7XG5cdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRiZWF0TWFwLnNldChsaW5rTmFtZSwgYmVhdCk7XG5cdFx0XHRcdGJlYXRJZE1hcC5zZXQoYmVhdC5pZCwgYmVhdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUGFyc2UgaGllcmFyY2hpY2FsIHN0cnVjdHVyZSBmcm9tIENoYXB0ZXIgc2VjdGlvblxuXHRcdGNvbnN0IGhpZXJhcmNoaWNhbCA9IHBhcnNlSGllcmFyY2hpY2FsUHJvc2UoY2hhcHRlckNvbnRlbnQpO1xuXG5cdFx0Ly8gUHJvY2VzcyBzZWN0aW9ucyBoaWVyYXJjaGljYWxseVxuXHRcdGNvbnN0IHVwZGF0ZWRTZWN0aW9uczogc3RyaW5nW10gPSBbXTtcblx0XHRsZXQgY3VycmVudFNjZW5lOiBTY2VuZSB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBjdXJyZW50QmVhdDogQmVhdCB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBwcm9zZU9yZGVyTnVtID0gMTtcblx0XHRsZXQgc2NlbmVPcmRlck51bSA9IGV4aXN0aW5nU2NlbmVzLmxlbmd0aCA+IDAgXG5cdFx0XHQ/IE1hdGgubWF4KC4uLmV4aXN0aW5nU2NlbmVzLm1hcChzID0+IHMub3JkZXJfbnVtKSkgKyAxIFxuXHRcdFx0OiAxO1xuXG5cdFx0Zm9yIChjb25zdCBzZWN0aW9uIG9mIGhpZXJhcmNoaWNhbC5zZWN0aW9ucykge1xuXHRcdFx0aWYgKHNlY3Rpb24udHlwZSA9PT0gXCJzY2VuZVwiICYmIHNlY3Rpb24uc2NlbmUpIHtcblx0XHRcdFx0Y29uc3QgeyBzY2VuZTogcGFyc2VkU2NlbmUgfSA9IHNlY3Rpb247XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAocGFyc2VkU2NlbmUubGlua05hbWUpIHtcblx0XHRcdFx0XHQvLyBTY2VuZSBleGlzdHMgLSBmaW5kIGl0XG5cdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gc2NlbmVNYXAuZ2V0KHBhcnNlZFNjZW5lLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdGlmICghY3VycmVudFNjZW5lKSB7XG5cdFx0XHRcdFx0XHQvLyBUcnkgdG8gZmluZCBieSBJRCBpZiBsaW5rTmFtZSBpcyBhY3R1YWxseSBhbiBJRFxuXHRcdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gc2NlbmVJZE1hcC5nZXQocGFyc2VkU2NlbmUubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBzY2VuZSBpZiBuZWVkZWRcblx0XHRcdFx0XHRcdGlmIChwYXJzZWRTY2VuZS5nb2FsICE9PSBjdXJyZW50U2NlbmUuZ29hbCB8fCBwYXJzZWRTY2VuZS50aW1lUmVmICE9PSBjdXJyZW50U2NlbmUudGltZV9yZWYpIHtcblx0XHRcdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlU2NlbmUoY3VycmVudFNjZW5lLmlkLCB7XG5cdFx0XHRcdFx0XHRcdFx0Z29hbDogcGFyc2VkU2NlbmUuZ29hbCxcblx0XHRcdFx0XHRcdFx0XHR0aW1lX3JlZjogcGFyc2VkU2NlbmUudGltZVJlZixcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIENyZWF0ZSBuZXcgc2NlbmVcblx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVTY2VuZSh7XG5cdFx0XHRcdFx0XHRzdG9yeV9pZDogc3RvcnlJZCxcblx0XHRcdFx0XHRcdGNoYXB0ZXJfaWQ6IGNoYXB0ZXJJZCxcblx0XHRcdFx0XHRcdG9yZGVyX251bTogc2NlbmVPcmRlck51bSsrLFxuXHRcdFx0XHRcdFx0Z29hbDogcGFyc2VkU2NlbmUuZ29hbCxcblx0XHRcdFx0XHRcdHRpbWVfcmVmOiBwYXJzZWRTY2VuZS50aW1lUmVmLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIFVwZGF0ZSBtYXBzXG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKGN1cnJlbnRTY2VuZSk7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVMaW5rTmFtZSA9IHNjZW5lRmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0c2NlbmVNYXAuc2V0KHNjZW5lTGlua05hbWUsIGN1cnJlbnRTY2VuZSk7XG5cdFx0XHRcdFx0c2NlbmVJZE1hcC5zZXQoY3VycmVudFNjZW5lLmlkLCBjdXJyZW50U2NlbmUpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIFdyaXRlIHNjZW5lIGZpbGUgKHNjZW5lcyBhcmUgd3JpdHRlbiBzZXBhcmF0ZWx5IGR1cmluZyBwdWxsLCBzbyB3ZSBza2lwIGhlcmUpXG5cdFx0XHRcdFx0Ly8gVGhlIHNjZW5lIHdpbGwgYmUgd3JpdHRlbiBwcm9wZXJseSBvbiBuZXh0IHB1bGxcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEZvcm1hdCBzY2VuZSBoZWFkZXIgd2l0aCBsaW5rIGFuZCBwcmVmaXhcblx0XHRcdFx0aWYgKGN1cnJlbnRTY2VuZSkge1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShjdXJyZW50U2NlbmUpO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lTGlua05hbWUgPSBzY2VuZUZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lRGlzcGxheVRleHQgPSBjdXJyZW50U2NlbmUudGltZV9yZWZcblx0XHRcdFx0XHRcdD8gYCR7Y3VycmVudFNjZW5lLmdvYWx9IC0gJHtjdXJyZW50U2NlbmUudGltZV9yZWZ9YFxuXHRcdFx0XHRcdFx0OiBjdXJyZW50U2NlbmUuZ29hbDtcblx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgIyMgU2NlbmU6IFtbJHtzY2VuZUxpbmtOYW1lfXwke3NjZW5lRGlzcGxheVRleHR9XV1gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0Y3VycmVudEJlYXQgPSBudWxsOyAvLyBSZXNldCBiZWF0IHdoZW4gbmV3IHNjZW5lIHN0YXJ0c1xuXHRcdFx0fSBlbHNlIGlmIChzZWN0aW9uLnR5cGUgPT09IFwiYmVhdFwiICYmIHNlY3Rpb24uYmVhdCkge1xuXHRcdFx0XHRjb25zdCB7IGJlYXQ6IHBhcnNlZEJlYXQgfSA9IHNlY3Rpb247XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoIWN1cnJlbnRTY2VuZSkge1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIkJlYXQgZm91bmQgd2l0aG91dCBhIHBhcmVudCBzY2VuZVwiKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0aWYgKHBhcnNlZEJlYXQubGlua05hbWUpIHtcblx0XHRcdFx0XHQvLyBCZWF0IGV4aXN0cyAtIGZpbmQgaXRcblx0XHRcdFx0XHRjdXJyZW50QmVhdCA9IGJlYXRNYXAuZ2V0KHBhcnNlZEJlYXQubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0aWYgKCFjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdFx0Ly8gVHJ5IHRvIGZpbmQgYnkgSUQgaWYgbGlua05hbWUgaXMgYWN0dWFsbHkgYW4gSURcblx0XHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYmVhdElkTWFwLmdldChwYXJzZWRCZWF0LmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAoY3VycmVudEJlYXQpIHtcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBiZWF0IGlmIG5lZWRlZFxuXHRcdFx0XHRcdFx0aWYgKHBhcnNlZEJlYXQuaW50ZW50ICE9PSBjdXJyZW50QmVhdC5pbnRlbnQgfHwgcGFyc2VkQmVhdC5vdXRjb21lICE9PSBjdXJyZW50QmVhdC5vdXRjb21lKSB7XG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQmVhdChjdXJyZW50QmVhdC5pZCwge1xuXHRcdFx0XHRcdFx0XHRcdGludGVudDogcGFyc2VkQmVhdC5pbnRlbnQsXG5cdFx0XHRcdFx0XHRcdFx0b3V0Y29tZTogcGFyc2VkQmVhdC5vdXRjb21lLFxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIG5ldyBiZWF0XG5cdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdCZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzKGN1cnJlbnRTY2VuZS5pZCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdE9yZGVyTnVtID0gZXhpc3RpbmdCZWF0cy5sZW5ndGggPiAwXG5cdFx0XHRcdFx0XHQ/IE1hdGgubWF4KC4uLmV4aXN0aW5nQmVhdHMubWFwKGIgPT4gYi5vcmRlcl9udW0pKSArIDFcblx0XHRcdFx0XHRcdDogMTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjdXJyZW50QmVhdCA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUJlYXQoe1xuXHRcdFx0XHRcdFx0c2NlbmVfaWQ6IGN1cnJlbnRTY2VuZS5pZCxcblx0XHRcdFx0XHRcdG9yZGVyX251bTogYmVhdE9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0dHlwZTogXCJzZXR1cFwiLCAvLyBEZWZhdWx0IHR5cGVcblx0XHRcdFx0XHRcdGludGVudDogcGFyc2VkQmVhdC5pbnRlbnQsXG5cdFx0XHRcdFx0XHRvdXRjb21lOiBwYXJzZWRCZWF0Lm91dGNvbWUsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gVXBkYXRlIG1hcHNcblx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGN1cnJlbnRCZWF0KTtcblx0XHRcdFx0XHRjb25zdCBiZWF0TGlua05hbWUgPSBiZWF0RmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0YmVhdE1hcC5zZXQoYmVhdExpbmtOYW1lLCBjdXJyZW50QmVhdCk7XG5cdFx0XHRcdFx0YmVhdElkTWFwLnNldChjdXJyZW50QmVhdC5pZCwgY3VycmVudEJlYXQpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIFdyaXRlIGJlYXQgZmlsZSAoYmVhdHMgYXJlIHdyaXR0ZW4gc2VwYXJhdGVseSBkdXJpbmcgcHVsbCwgc28gd2Ugc2tpcCBoZXJlKVxuXHRcdFx0XHRcdC8vIFRoZSBiZWF0IHdpbGwgYmUgd3JpdHRlbiBwcm9wZXJseSBvbiBuZXh0IHB1bGxcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEZvcm1hdCBiZWF0IGhlYWRlciB3aXRoIGxpbmsgYW5kIHByZWZpeFxuXHRcdFx0XHRpZiAoY3VycmVudEJlYXQpIHtcblx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGN1cnJlbnRCZWF0KTtcblx0XHRcdFx0XHRjb25zdCBiZWF0TGlua05hbWUgPSBiZWF0RmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdERpc3BsYXlUZXh0ID0gY3VycmVudEJlYXQub3V0Y29tZVxuXHRcdFx0XHRcdFx0PyBgJHtjdXJyZW50QmVhdC5pbnRlbnR9IC0+ICR7Y3VycmVudEJlYXQub3V0Y29tZX1gXG5cdFx0XHRcdFx0XHQ6IGN1cnJlbnRCZWF0LmludGVudDtcblx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgIyMjIEJlYXQ6IFtbJHtiZWF0TGlua05hbWV9fCR7YmVhdERpc3BsYXlUZXh0fV1dYCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoc2VjdGlvbi50eXBlID09PSBcInByb3NlXCIgJiYgc2VjdGlvbi5wcm9zZSkge1xuXHRcdFx0XHRjb25zdCB7IHByb3NlOiBwYXJhZ3JhcGggfSA9IHNlY3Rpb247XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBQcm9jZXNzIHByb3NlIGJsb2NrXG5cdFx0XHRcdGxldCBsb2NhbENvbnRlbnRCbG9jazogQ29udGVudEJsb2NrIHwgbnVsbCA9IG51bGw7XG5cdFx0XHRcdGxldCByZW1vdGVDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayB8IG51bGwgPSBudWxsO1xuXG5cdFx0XHRcdC8vIElmIHBhcmFncmFwaCBoYXMgYSBsaW5rLCByZWFkIHRoZSBsb2NhbCBmaWxlXG5cdFx0XHRcdGlmIChwYXJhZ3JhcGgubGlua05hbWUpIHtcblx0XHRcdFx0XHQvLyBTZWFyY2ggZm9yIGZpbGUgaW4gdHlwZSBzdWJmb2xkZXJzXG5cdFx0XHRcdFx0Y29uc3QgY29udGVudEJsb2NrRmlsZVBhdGggPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tGaWxlQnlMaW5rTmFtZShjb250ZW50c0ZvbGRlclBhdGgsIHBhcmFncmFwaC5saW5rTmFtZSk7XG5cdFx0XHRcdFx0aWYgKGNvbnRlbnRCbG9ja0ZpbGVQYXRoKSB7XG5cdFx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIucmVhZENvbnRlbnRCbG9ja0Zyb21GaWxlKGNvbnRlbnRCbG9ja0ZpbGVQYXRoKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBJZiBmaWxlIG5vdCBmb3VuZCBieSBleGFjdCBuYW1lLCB0cnkgdG8gZmluZCBieSBzZWFyY2hpbmcgYWxsIHByb3NlIGJsb2NrIGZpbGVzXG5cdFx0XHRcdFx0aWYgKCFsb2NhbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0bG9jYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tCeUNvbnRlbnQoY29udGVudHNGb2xkZXJQYXRoLCBwYXJhZ3JhcGguY29udGVudCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gRmluZCBjb3JyZXNwb25kaW5nIHJlbW90ZSBwcm9zZSBibG9ja1xuXHRcdFx0XHRcdGlmIChsb2NhbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0cmVtb3RlQ29udGVudEJsb2NrID0gcmVtb3RlQ29udGVudEJsb2Nrc01hcC5nZXQobG9jYWxDb250ZW50QmxvY2suaWQpIHx8IG51bGw7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIElmIGxvY2FsIGZpbGUgbm90IGZvdW5kLCB0cnkgdG8gZmluZCByZW1vdGUgYnkgY29udGVudCBtYXRjaFxuXHRcdFx0XHRcdFx0Y29uc3Qgbm9ybWFsaXplZENvbnRlbnQgPSBwYXJhZ3JhcGguY29udGVudC50cmltKCk7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IFtpZCwgcmVtb3RlUEJdIG9mIHJlbW90ZUNvbnRlbnRCbG9ja3NNYXAuZW50cmllcygpKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChyZW1vdGVQQi5jb250ZW50LnRyaW0oKSA9PT0gbm9ybWFsaXplZENvbnRlbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRyZW1vdGVDb250ZW50QmxvY2sgPSByZW1vdGVQQjtcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBObyBsaW5rIC0gY2hlY2sgaWYgdGhlcmUncyBhIGxvY2FsIGZpbGUgd2l0aCBtYXRjaGluZyBjb250ZW50XG5cdFx0XHRcdFx0bG9jYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tCeUNvbnRlbnQoY29udGVudHNGb2xkZXJQYXRoLCBwYXJhZ3JhcGguY29udGVudCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gQWxzbyBjaGVjayByZW1vdGUgcHJvc2UgYmxvY2tzIGZvciBjb250ZW50IG1hdGNoXG5cdFx0XHRcdFx0Y29uc3Qgbm9ybWFsaXplZENvbnRlbnQgPSBwYXJhZ3JhcGguY29udGVudC50cmltKCk7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBbaWQsIHJlbW90ZVBCXSBvZiByZW1vdGVDb250ZW50QmxvY2tzTWFwLmVudHJpZXMoKSkge1xuXHRcdFx0XHRcdFx0aWYgKHJlbW90ZVBCLmNvbnRlbnQudHJpbSgpID09PSBub3JtYWxpemVkQ29udGVudCkge1xuXHRcdFx0XHRcdFx0XHRyZW1vdGVDb250ZW50QmxvY2sgPSByZW1vdGVQQjtcblx0XHRcdFx0XHRcdFx0Ly8gSWYgd2UgZm91bmQgYSByZW1vdGUgbWF0Y2gsIHRyeSB0byBmaW5kIGxvY2FsIGZpbGUgYnkgSURcblx0XHRcdFx0XHRcdFx0aWYgKCFsb2NhbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0XHRcdC8vIFNlYXJjaCBmb3IgZmlsZSB3aXRoIHRoaXMgSUQgaW4gZnJvbnRtYXR0ZXJcblx0XHRcdFx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmluZENvbnRlbnRCbG9ja0J5SWQoY29udGVudHNGb2xkZXJQYXRoLCByZW1vdGVQQi5pZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQ29tcGFyZSBhbmQgZGV0ZXJtaW5lIHN0YXR1c1xuXHRcdFx0XHRjb25zdCBzdGF0dXMgPSBjb21wYXJlQ29udGVudEJsb2NrcyhwYXJhZ3JhcGgsIGxvY2FsQ29udGVudEJsb2NrLCByZW1vdGVDb250ZW50QmxvY2spO1xuXG5cdFx0XHRcdGxldCBmaW5hbENvbnRlbnRCbG9jazogQ29udGVudEJsb2NrO1xuXG5cdFx0XHRcdHN3aXRjaCAoc3RhdHVzKSB7XG5cdFx0XHRcdFx0Y2FzZSBcIm5ld1wiOiB7XG5cdFx0XHRcdFx0XHQvLyBDcmVhdGUgbmV3IHByb3NlIGJsb2NrXG5cdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRCbG9jayhjaGFwdGVySWQsIHtcblx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBwcm9zZU9yZGVyTnVtKyssXG5cdFx0XHRcdFx0XHRcdGtpbmQ6IFwiZmluYWxcIixcblx0XHRcdFx0XHRcdFx0Y29udGVudDogcGFyYWdyYXBoLmNvbnRlbnQsXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0Ly8gQ3JlYXRlIGZpbGUgaW4gY29ycmVjdCB0eXBlIHN1YmZvbGRlclxuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoLCB1bmRlZmluZWQpO1xuXG5cdFx0XHRcdFx0XHQvLyBDcmVhdGUgcmVmZXJlbmNlcyBpZiBuZWVkZWRcblx0XHRcdFx0XHRcdGlmIChjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJzY2VuZVwiLCBjdXJyZW50U2NlbmUuaWQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRCZWF0KSB7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRBbmNob3IoZmluYWxDb250ZW50QmxvY2suaWQsIFwiYmVhdFwiLCBjdXJyZW50QmVhdC5pZCk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIEFkZCBsaW5rIHRvIHBhcmFncmFwaFxuXHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoZmluYWxDb250ZW50QmxvY2spLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtsaW5rTmFtZX18JHtwYXJhZ3JhcGguY29udGVudH1dXWApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y2FzZSBcInVuY2hhbmdlZFwiOiB7XG5cdFx0XHRcdFx0XHQvLyBVc2UgcmVtb3RlQ29udGVudEJsb2NrIGlmIGxvY2FsQ29udGVudEJsb2NrIGRvZXNuJ3QgZXhpc3Rcblx0XHRcdFx0XHRcdGlmICghbG9jYWxDb250ZW50QmxvY2sgJiYgcmVtb3RlQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gcmVtb3RlQ29udGVudEJsb2NrO1xuXHRcdFx0XHRcdFx0XHQvLyBDcmVhdGUgbG9jYWwgZmlsZSBpbiBjb3JyZWN0IHR5cGUgc3ViZm9sZGVyIHNpbmNlIGl0IGRvZXNuJ3QgZXhpc3Rcblx0XHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQ29udGVudEJsb2NrRmlsZShmaW5hbENvbnRlbnRCbG9jaywgZmlsZVBhdGgsIHVuZGVmaW5lZCk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGxvY2FsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIG9yZGVyX251bSBuZWVkcyB1cGRhdGVcblx0XHRcdFx0XHRcdFx0aWYgKGxvY2FsQ29udGVudEJsb2NrLm9yZGVyX251bSAhPT0gcHJvc2VPcmRlck51bSkge1xuXHRcdFx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQ29udGVudEJsb2NrKGxvY2FsQ29udGVudEJsb2NrLmlkLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRvcmRlcl9udW06IHByb3NlT3JkZXJOdW0rKyxcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoLCB1bmRlZmluZWQpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gbG9jYWxDb250ZW50QmxvY2s7XG5cdFx0XHRcdFx0XHRcdFx0cHJvc2VPcmRlck51bSsrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBTaG91bGQgbm90IGhhcHBlbiwgYnV0IGhhbmRsZSBncmFjZWZ1bGx5XG5cdFx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gcmVtb3RlQ29udGVudEJsb2NrITtcblx0XHRcdFx0XHRcdFx0cHJvc2VPcmRlck51bSsrO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgcmVmZXJlbmNlcyBpZiBuZWVkZWRcblx0XHRcdFx0XHRcdGlmIChmaW5hbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBleGlzdGluZ1JlZnMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QW5jaG9ycyhmaW5hbENvbnRlbnRCbG9jay5pZCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGhhc1NjZW5lUmVmID0gZXhpc3RpbmdSZWZzLnNvbWUociA9PiByLmVudGl0eV90eXBlID09PSBcInNjZW5lXCIgJiYgci5lbnRpdHlfaWQgPT09IGN1cnJlbnRTY2VuZT8uaWQpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBoYXNCZWF0UmVmID0gZXhpc3RpbmdSZWZzLnNvbWUociA9PiByLmVudGl0eV90eXBlID09PSBcImJlYXRcIiAmJiByLmVudGl0eV9pZCA9PT0gY3VycmVudEJlYXQ/LmlkKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdGlmIChjdXJyZW50U2NlbmUgJiYgIWhhc1NjZW5lUmVmKSB7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJzY2VuZVwiLCBjdXJyZW50U2NlbmUuaWQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmIChjdXJyZW50QmVhdCAmJiAhaGFzQmVhdFJlZikge1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRBbmNob3IoZmluYWxDb250ZW50QmxvY2suaWQsIFwiYmVhdFwiLCBjdXJyZW50QmVhdC5pZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gQWRkIGxpbmsgLSB1c2UgZXhpc3RpbmcgbGlua05hbWUgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgZ2VuZXJhdGUgZnJvbSBmaWxlXG5cdFx0XHRcdFx0XHRpZiAocGFyYWdyYXBoLmxpbmtOYW1lKSB7XG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRTZWN0aW9ucy5wdXNoKGBbWyR7cGFyYWdyYXBoLmxpbmtOYW1lfXwke3BhcmFncmFwaC5jb250ZW50fV1dYCk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBObyBsaW5rTmFtZSAtIGdlbmVyYXRlIGZyb20gZmluYWxDb250ZW50QmxvY2tcblx0XHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoZmluYWxDb250ZW50QmxvY2spLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lfXwke3BhcmFncmFwaC5jb250ZW50fV1dYCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwibG9jYWxfbW9kaWZpZWRcIjoge1xuXHRcdFx0XHRcdFx0Ly8gVXBkYXRlIHByb3NlIGJsb2NrIHdpdGggbG9jYWwgY29udGVudFxuXHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVDb250ZW50QmxvY2sobG9jYWxDb250ZW50QmxvY2shLmlkLCB7XG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQ6IHBhcmFncmFwaC5jb250ZW50LFxuXHRcdFx0XHRcdFx0XHRvcmRlcl9udW06IHByb3NlT3JkZXJOdW0rKyxcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgbG9jYWwgZmlsZSBpbiBjb3JyZWN0IHR5cGUgc3ViZm9sZGVyXG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aExvY2FsTW9kID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aExvY2FsTW9kLCB1bmRlZmluZWQpO1xuXG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgcmVmZXJlbmNlcyBpZiBuZWVkZWRcblx0XHRcdFx0XHRcdGlmIChmaW5hbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBleGlzdGluZ1JlZnMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QW5jaG9ycyhmaW5hbENvbnRlbnRCbG9jay5pZCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGhhc1NjZW5lUmVmID0gZXhpc3RpbmdSZWZzLnNvbWUociA9PiByLmVudGl0eV90eXBlID09PSBcInNjZW5lXCIgJiYgci5lbnRpdHlfaWQgPT09IGN1cnJlbnRTY2VuZT8uaWQpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBoYXNCZWF0UmVmID0gZXhpc3RpbmdSZWZzLnNvbWUociA9PiByLmVudGl0eV90eXBlID09PSBcImJlYXRcIiAmJiByLmVudGl0eV9pZCA9PT0gY3VycmVudEJlYXQ/LmlkKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdGlmIChjdXJyZW50U2NlbmUgJiYgIWhhc1NjZW5lUmVmKSB7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJzY2VuZVwiLCBjdXJyZW50U2NlbmUuaWQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmIChjdXJyZW50QmVhdCAmJiAhaGFzQmVhdFJlZikge1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRBbmNob3IoZmluYWxDb250ZW50QmxvY2suaWQsIFwiYmVhdFwiLCBjdXJyZW50QmVhdC5pZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWVMb2NhbE1vZCA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShmaW5hbENvbnRlbnRCbG9jaykucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lTG9jYWxNb2R9fCR7cGFyYWdyYXBoLmNvbnRlbnR9XV1gKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhc2UgXCJyZW1vdGVfbW9kaWZpZWRcIjoge1xuXHRcdFx0XHRcdFx0Ly8gVXBkYXRlIGxvY2FsIGZpbGUgd2l0aCByZW1vdGUgY29udGVudCBpbiBjb3JyZWN0IHR5cGUgc3ViZm9sZGVyXG5cdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IHJlbW90ZUNvbnRlbnRCbG9jayE7XG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aFJlbW90ZU1vZCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQ29udGVudEJsb2NrRmlsZShmaW5hbENvbnRlbnRCbG9jaywgZmlsZVBhdGhSZW1vdGVNb2QsIHVuZGVmaW5lZCk7XG5cblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSByZWZlcmVuY2VzIGlmIG5lZWRlZFxuXHRcdFx0XHRcdFx0aWYgKGZpbmFsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nUmVmcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRBbmNob3JzKGZpbmFsQ29udGVudEJsb2NrLmlkKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgaGFzU2NlbmVSZWYgPSBleGlzdGluZ1JlZnMuc29tZShyID0+IHIuZW50aXR5X3R5cGUgPT09IFwic2NlbmVcIiAmJiByLmVudGl0eV9pZCA9PT0gY3VycmVudFNjZW5lPy5pZCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGhhc0JlYXRSZWYgPSBleGlzdGluZ1JlZnMuc29tZShyID0+IHIuZW50aXR5X3R5cGUgPT09IFwiYmVhdFwiICYmIHIuZW50aXR5X2lkID09PSBjdXJyZW50QmVhdD8uaWQpO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRTY2VuZSAmJiAhaGFzU2NlbmVSZWYpIHtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QW5jaG9yKGZpbmFsQ29udGVudEJsb2NrLmlkLCBcInNjZW5lXCIsIGN1cnJlbnRTY2VuZS5pZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRCZWF0ICYmICFoYXNCZWF0UmVmKSB7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJiZWF0XCIsIGN1cnJlbnRCZWF0LmlkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZVJlbW90ZU1vZCA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShmaW5hbENvbnRlbnRCbG9jaykucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lUmVtb3RlTW9kfXwke2ZpbmFsQ29udGVudEJsb2NrLmNvbnRlbnR9XV1gKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYFByb3NlIGJsb2NrIHVwZGF0ZWQgZnJvbSByZW1vdGU6ICR7bGlua05hbWVSZW1vdGVNb2R9YCwgMzAwMCk7XG5cdFx0XHRcdFx0XHRwcm9zZU9yZGVyTnVtKys7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwiY29uZmxpY3RcIjoge1xuXHRcdFx0XHRcdFx0Ly8gU2hvdyBjb25mbGljdCBtb2RhbFxuXHRcdFx0XHRcdFx0Y29uc3QgcmVzb2x1dGlvbiA9IGF3YWl0IHRoaXMucmVzb2x2ZUNvbmZsaWN0KGxvY2FsQ29udGVudEJsb2NrISwgcmVtb3RlQ29udGVudEJsb2NrISk7XG5cblx0XHRcdFx0XHRcdGxldCByZXNvbHZlZENvbnRlbnQ6IHN0cmluZztcblx0XHRcdFx0XHRcdGlmIChyZXNvbHV0aW9uLnJlc29sdXRpb24gPT09IFwibG9jYWxcIikge1xuXHRcdFx0XHRcdFx0XHRyZXNvbHZlZENvbnRlbnQgPSBwYXJhZ3JhcGguY29udGVudDtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAocmVzb2x1dGlvbi5yZXNvbHV0aW9uID09PSBcInJlbW90ZVwiKSB7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmVkQ29udGVudCA9IHJlbW90ZUNvbnRlbnRCbG9jayEuY29udGVudDtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmVkQ29udGVudCA9IHJlc29sdXRpb24ubWVyZ2VkQ29udGVudCB8fCBwYXJhZ3JhcGguY29udGVudDtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gVXBkYXRlIHByb3NlIGJsb2NrIHdpdGggcmVzb2x2ZWQgY29udGVudFxuXHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVDb250ZW50QmxvY2sobG9jYWxDb250ZW50QmxvY2shLmlkLCB7XG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQ6IHJlc29sdmVkQ29udGVudCxcblx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBwcm9zZU9yZGVyTnVtKyssXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0Ly8gVXBkYXRlIGxvY2FsIGZpbGUgaW4gY29ycmVjdCB0eXBlIHN1YmZvbGRlclxuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGhDb25mbGljdCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQ29udGVudEJsb2NrRmlsZShmaW5hbENvbnRlbnRCbG9jaywgZmlsZVBhdGhDb25mbGljdCwgdW5kZWZpbmVkKTtcblxuXHRcdFx0XHRcdFx0Ly8gVXBkYXRlIHJlZmVyZW5jZXMgaWYgbmVlZGVkXG5cdFx0XHRcdFx0XHRpZiAoZmluYWxDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdSZWZzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEFuY2hvcnMoZmluYWxDb250ZW50QmxvY2suaWQpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBoYXNTY2VuZVJlZiA9IGV4aXN0aW5nUmVmcy5zb21lKHIgPT4gci5lbnRpdHlfdHlwZSA9PT0gXCJzY2VuZVwiICYmIHIuZW50aXR5X2lkID09PSBjdXJyZW50U2NlbmU/LmlkKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgaGFzQmVhdFJlZiA9IGV4aXN0aW5nUmVmcy5zb21lKHIgPT4gci5lbnRpdHlfdHlwZSA9PT0gXCJiZWF0XCIgJiYgci5lbnRpdHlfaWQgPT09IGN1cnJlbnRCZWF0Py5pZCk7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRpZiAoY3VycmVudFNjZW5lICYmICFoYXNTY2VuZVJlZikge1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRBbmNob3IoZmluYWxDb250ZW50QmxvY2suaWQsIFwic2NlbmVcIiwgY3VycmVudFNjZW5lLmlkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpZiAoY3VycmVudEJlYXQgJiYgIWhhc0JlYXRSZWYpIHtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QW5jaG9yKGZpbmFsQ29udGVudEJsb2NrLmlkLCBcImJlYXRcIiwgY3VycmVudEJlYXQuaWQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lQ29uZmxpY3QgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoZmluYWxDb250ZW50QmxvY2spLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtsaW5rTmFtZUNvbmZsaWN0fXwke3Jlc29sdmVkQ29udGVudH1dXWApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gVXBkYXRlIGNoYXB0ZXIgZmlsZSB3aXRoIG5ldyBoaWVyYXJjaGljYWwgY29udGVudCBhbmQgc2NlbmUvYmVhdCBsaXN0XG5cdFx0YXdhaXQgdGhpcy51cGRhdGVDaGFwdGVyRmlsZShjaGFwdGVyQ29udGVudCwgdXBkYXRlZFNlY3Rpb25zLCBmaWxlLCBmcm9udG1hdHRlciwgZXhpc3RpbmdTY2VuZXMsIGJlYXRNYXAsIHJlbW90ZUNvbnRlbnRCbG9ja3MsIGNoYXB0ZXJJZCk7XG5cdH1cblxuXHQvLyBVcGRhdGUgY2hhcHRlciBmaWxlIHdpdGggYm90aCBzY2VuZS9iZWF0IGxpc3QgYW5kIGNoYXB0ZXIgY29udGVudFxuXHRwcml2YXRlIGFzeW5jIHVwZGF0ZUNoYXB0ZXJGaWxlKFxuXHRcdG9yaWdpbmFsQ29udGVudDogc3RyaW5nLFxuXHRcdHVwZGF0ZWRTZWN0aW9uczogc3RyaW5nW10sXG5cdFx0ZmlsZTogVEZpbGUsXG5cdFx0ZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sXG5cdFx0c2NlbmVzOiBTY2VuZVtdLFxuXHRcdGJlYXRNYXA6IE1hcDxzdHJpbmcsIEJlYXQ+LFxuXHRcdGNvbnRlbnRCbG9ja3M6IENvbnRlbnRCbG9ja1tdLFxuXHRcdGNoYXB0ZXJJZDogc3RyaW5nXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdC8vIEdldCBwcm9zZSBibG9jayByZWZlcmVuY2VzIHRvIGRldGVybWluZSB3aGljaCBzY2VuZXMvMDItYmVhdHMgaGF2ZSBwcm9zZVxuXHRcdGNvbnN0IGFsbENvbnRlbnRBbmNob3JzOiBDb250ZW50QW5jaG9yW10gPSBbXTtcblx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBjb250ZW50QmxvY2tzKSB7XG5cdFx0XHRjb25zdCByZWZzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEFuY2hvcnMoY29udGVudEJsb2NrLmlkKTtcblx0XHRcdGFsbENvbnRlbnRBbmNob3JzLnB1c2goLi4ucmVmcyk7XG5cdFx0fVxuXG5cdFx0Ly8gQ3JlYXRlIG1hcHMgZm9yIHF1aWNrIGxvb2t1cFxuXHRcdGNvbnN0IHByb3NlUmVmc0J5U2NlbmUgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudEFuY2hvcltdPigpO1xuXHRcdGNvbnN0IHByb3NlUmVmc0J5QmVhdCA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QW5jaG9yW10+KCk7XG5cdFx0Zm9yIChjb25zdCByZWYgb2YgYWxsQ29udGVudEFuY2hvcnMpIHtcblx0XHRcdGlmIChyZWYuZW50aXR5X3R5cGUgPT09IFwic2NlbmVcIikge1xuXHRcdFx0XHRpZiAoIXByb3NlUmVmc0J5U2NlbmUuaGFzKHJlZi5lbnRpdHlfaWQpKSB7XG5cdFx0XHRcdFx0cHJvc2VSZWZzQnlTY2VuZS5zZXQocmVmLmVudGl0eV9pZCwgW10pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHByb3NlUmVmc0J5U2NlbmUuZ2V0KHJlZi5lbnRpdHlfaWQpIS5wdXNoKHJlZik7XG5cdFx0XHR9IGVsc2UgaWYgKHJlZi5lbnRpdHlfdHlwZSA9PT0gXCJiZWF0XCIpIHtcblx0XHRcdFx0aWYgKCFwcm9zZVJlZnNCeUJlYXQuaGFzKHJlZi5lbnRpdHlfaWQpKSB7XG5cdFx0XHRcdFx0cHJvc2VSZWZzQnlCZWF0LnNldChyZWYuZW50aXR5X2lkLCBbXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cHJvc2VSZWZzQnlCZWF0LmdldChyZWYuZW50aXR5X2lkKSEucHVzaChyZWYpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEdlbmVyYXRlIHVwZGF0ZWQgc2NlbmUvYmVhdCBsaXN0XG5cdFx0Y29uc3Qgc2NlbmVCZWF0TGlzdEl0ZW1zOiBzdHJpbmdbXSA9IFtdO1xuXHRcdGZvciAoY29uc3Qgc2NlbmUgb2Ygc2NlbmVzLnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pKSB7XG5cdFx0XHRjb25zdCBzY2VuZUZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZVNjZW5lRmlsZU5hbWUoc2NlbmUpO1xuXHRcdFx0Y29uc3Qgc2NlbmVMaW5rTmFtZSA9IHNjZW5lRmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRjb25zdCBzY2VuZURpc3BsYXlUZXh0ID0gc2NlbmUudGltZV9yZWYgXG5cdFx0XHRcdD8gYCR7c2NlbmUuZ29hbH0gLSAke3NjZW5lLnRpbWVfcmVmfWBcblx0XHRcdFx0OiBzY2VuZS5nb2FsO1xuXHRcdFx0XG5cdFx0XHQvLyBDaGVjayBpZiBzY2VuZSBoYXMgcHJvc2UgYmxvY2tzIChub3QgYXNzb2NpYXRlZCB3aXRoIGJlYXRzKVxuXHRcdFx0Y29uc3Qgc2NlbmVQcm9zZVJlZnMgPSBwcm9zZVJlZnNCeVNjZW5lLmdldChzY2VuZS5pZCkgfHwgW107XG5cdFx0XHRjb25zdCBzY2VuZUNvbnRlbnRCbG9ja0lkcyA9IG5ldyBTZXQoc2NlbmVQcm9zZVJlZnMubWFwKChyOiBDb250ZW50QW5jaG9yKSA9PiByLmNvbnRlbnRfYmxvY2tfaWQpKTtcblx0XHRcdC8vIENoZWNrIGlmIGFueSBwcm9zZSBibG9jayBpcyBub3QgYWxzbyBhc3NvY2lhdGVkIHdpdGggYSBiZWF0XG5cdFx0XHRjb25zdCBoYXNTY2VuZVByb3NlID0gQXJyYXkuZnJvbShzY2VuZUNvbnRlbnRCbG9ja0lkcykuc29tZSgoY29udGVudEJsb2NrSWQ6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRjb25zdCBibG9ja1JlZnMgPSBhbGxDb250ZW50QW5jaG9ycy5maWx0ZXIoKHI6IENvbnRlbnRBbmNob3IpID0+IHIuY29udGVudF9ibG9ja19pZCA9PT0gY29udGVudEJsb2NrSWQpO1xuXHRcdFx0XHRyZXR1cm4gIWJsb2NrUmVmcy5zb21lKChyOiBDb250ZW50QW5jaG9yKSA9PiByLmVudGl0eV90eXBlID09PSBcImJlYXRcIik7XG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IHNjZW5lTWFya2VyID0gaGFzU2NlbmVQcm9zZSA/IFwiK1wiIDogXCItXCI7XG5cdFx0XHRcblx0XHRcdHNjZW5lQmVhdExpc3RJdGVtcy5wdXNoKGAke3NjZW5lTWFya2VyfSBbWyR7c2NlbmVMaW5rTmFtZX18U2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lRGlzcGxheVRleHR9XV1gKTtcblx0XHRcdFxuXHRcdFx0Ly8gR2V0IGJlYXRzIGZvciB0aGlzIHNjZW5lXG5cdFx0XHRjb25zdCBzY2VuZUJlYXRzOiBCZWF0W10gPSBbXTtcblx0XHRcdGZvciAoY29uc3QgW2xpbmtOYW1lLCBiZWF0XSBvZiBiZWF0TWFwLmVudHJpZXMoKSkge1xuXHRcdFx0XHRpZiAoYmVhdC5zY2VuZV9pZCA9PT0gc2NlbmUuaWQpIHtcblx0XHRcdFx0XHRzY2VuZUJlYXRzLnB1c2goYmVhdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIHNjZW5lQmVhdHMuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSkpIHtcblx0XHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRjb25zdCBiZWF0RGlzcGxheVRleHQgPSBiZWF0Lm91dGNvbWVcblx0XHRcdFx0XHQ/IGAke2JlYXQuaW50ZW50fSAtPiAke2JlYXQub3V0Y29tZX1gXG5cdFx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIENoZWNrIGlmIGJlYXQgaGFzIHByb3NlIGJsb2Nrc1xuXHRcdFx0XHRjb25zdCBiZWF0UHJvc2VSZWZzID0gcHJvc2VSZWZzQnlCZWF0LmdldChiZWF0LmlkKSB8fCBbXTtcblx0XHRcdFx0Y29uc3QgaGFzQmVhdFByb3NlID0gYmVhdFByb3NlUmVmcy5sZW5ndGggPiAwO1xuXHRcdFx0XHRjb25zdCBiZWF0TWFya2VyID0gaGFzQmVhdFByb3NlID8gXCIrXCIgOiBcIi1cIjtcblx0XHRcdFx0XG5cdFx0XHRcdHNjZW5lQmVhdExpc3RJdGVtcy5wdXNoKGBcXHQke2JlYXRNYXJrZXJ9IFtbJHtiZWF0TGlua05hbWV9fEJlYXQgJHtiZWF0Lm9yZGVyX251bX06ICR7YmVhdERpc3BsYXlUZXh0fV1dYCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRXh0cmFjdCBmcm9udG1hdHRlclxuXHRcdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBvcmlnaW5hbENvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcblx0XHRjb25zdCBmcm9udG1hdHRlclRleHQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXSA6IFwiXCI7XG5cblx0XHQvLyBFeHRyYWN0IGNvbnRlbnQgYWZ0ZXIgZnJvbnRtYXR0ZXJcblx0XHRjb25zdCBib2R5U3RhcnQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXS5sZW5ndGggOiAwO1xuXHRcdGNvbnN0IGJvZHlDb250ZW50ID0gb3JpZ2luYWxDb250ZW50LnN1YnN0cmluZyhib2R5U3RhcnQpLnRyaW0oKTtcblxuXHRcdC8vIEdldCBjaGFwdGVyIG51bWJlciBhbmQgdGl0bGUgZnJvbSBmcm9udG1hdHRlclxuXHRcdGNvbnN0IGNoYXB0ZXJOdW1iZXIgPSBmcm9udG1hdHRlci5udW1iZXIgfHwgXCIxXCI7XG5cdFx0Y29uc3QgY2hhcHRlclRpdGxlID0gZnJvbnRtYXR0ZXIudGl0bGUgfHwgXCJVbnRpdGxlZFwiO1xuXG5cdFx0Ly8gVXBkYXRlIHNjZW5lL2JlYXQgbGlzdCBzZWN0aW9uXG5cdFx0Y29uc3QgbGlzdFNlY3Rpb25NYXRjaCA9IGJvZHlDb250ZW50Lm1hdGNoKC8oW1xcc1xcU10qPyMjXFxzK1NjZW5lc1xccysmXFxzK0JlYXRzXFxzKlxcbispKFtcXHNcXFNdKj8pKD89XFxuIyN8JCkvKTtcblx0XHRjb25zdCB1cGRhdGVkTGlzdFNlY3Rpb24gPSBgIyMgU2NlbmVzICYgQmVhdHNcXG5cXG4ke3NjZW5lQmVhdExpc3RJdGVtcy5qb2luKFwiXFxuXCIpfVxcblxcbmA7XG5cblx0XHRsZXQgdXBkYXRlZEJvZHk6IHN0cmluZztcblx0XHRpZiAobGlzdFNlY3Rpb25NYXRjaCkge1xuXHRcdFx0Ly8gUmVwbGFjZSBleGlzdGluZyBsaXN0IHNlY3Rpb25cblx0XHRcdGNvbnN0IGJlZm9yZUxpc3QgPSBsaXN0U2VjdGlvbk1hdGNoWzFdO1xuXHRcdFx0Y29uc3QgYWZ0ZXJMaXN0ID0gYm9keUNvbnRlbnQuc3Vic3RyaW5nKGxpc3RTZWN0aW9uTWF0Y2guaW5kZXghICsgbGlzdFNlY3Rpb25NYXRjaFswXS5sZW5ndGgpO1xuXHRcdFx0dXBkYXRlZEJvZHkgPSBgJHtiZWZvcmVMaXN0fSR7dXBkYXRlZExpc3RTZWN0aW9ufSR7YWZ0ZXJMaXN0fWA7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIEFkZCBsaXN0IHNlY3Rpb24gYWZ0ZXIgdGl0bGVcblx0XHRcdGNvbnN0IHRpdGxlTWF0Y2ggPSBib2R5Q29udGVudC5tYXRjaCgvKCNcXHMrW15cXG5dK1xcbispKFtcXHNcXFNdKikvKTtcblx0XHRcdGlmICh0aXRsZU1hdGNoKSB7XG5cdFx0XHRcdHVwZGF0ZWRCb2R5ID0gYCR7dGl0bGVNYXRjaFsxXX0ke3VwZGF0ZWRMaXN0U2VjdGlvbn0ke3RpdGxlTWF0Y2hbMl19YDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHVwZGF0ZWRCb2R5ID0gYCR7dXBkYXRlZExpc3RTZWN0aW9ufSR7Ym9keUNvbnRlbnR9YDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBVcGRhdGUgY2hhcHRlciBzZWN0aW9uXG5cdFx0Y29uc3QgY2hhcHRlckhlYWRlclBhdHRlcm4gPSBgIyNcXFxccytDaGFwdGVyXFxcXHMrJHtjaGFwdGVyTnVtYmVyfTpcXFxccytbXlxcXFxuXStgO1xuXHRcdGNvbnN0IGNoYXB0ZXJTZWN0aW9uTWF0Y2ggPSB1cGRhdGVkQm9keS5tYXRjaChuZXcgUmVnRXhwKGAoW1xcXFxzXFxcXFNdKj8ke2NoYXB0ZXJIZWFkZXJQYXR0ZXJufVxcXFxzKlxcXFxuKykoW1xcXFxzXFxcXFNdKj8pKD89XFxcXG4jI1xcXFxzK0NoYXB0ZXJcXFxccytcXFxcZCs6fCQpYCwgXCJpXCIpKTtcblx0XHRcblx0XHRpZiAoIWNoYXB0ZXJTZWN0aW9uTWF0Y2gpIHtcblx0XHRcdC8vIE5vIENoYXB0ZXIgc2VjdGlvbiBmb3VuZCwgYWRkIGl0XG5cdFx0XHRjb25zdCBuZXdDaGFwdGVyU2VjdGlvbiA9IGBcXG5cXG4jIyBDaGFwdGVyICR7Y2hhcHRlck51bWJlcn06ICR7Y2hhcHRlclRpdGxlfVxcblxcbiR7dXBkYXRlZFNlY3Rpb25zLmpvaW4oXCJcXG5cXG5cIil9XFxuXFxuYDtcblx0XHRcdHVwZGF0ZWRCb2R5ID0gYCR7dXBkYXRlZEJvZHl9JHtuZXdDaGFwdGVyU2VjdGlvbn1gO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBSZXBsYWNlIENoYXB0ZXIgc2VjdGlvbiBjb250ZW50XG5cdFx0XHRjb25zdCBiZWZvcmVDaGFwdGVyID0gY2hhcHRlclNlY3Rpb25NYXRjaFsxXTtcblx0XHRcdGNvbnN0IGFmdGVyQ2hhcHRlciA9IHVwZGF0ZWRCb2R5LnN1YnN0cmluZyhjaGFwdGVyU2VjdGlvbk1hdGNoLmluZGV4ISArIGNoYXB0ZXJTZWN0aW9uTWF0Y2hbMF0ubGVuZ3RoKTtcblx0XHRcdGNvbnN0IG5ld0NoYXB0ZXJDb250ZW50ID0gdXBkYXRlZFNlY3Rpb25zLmpvaW4oXCJcXG5cXG5cIik7XG5cdFx0XHR1cGRhdGVkQm9keSA9IGAke2JlZm9yZUNoYXB0ZXJ9JHtuZXdDaGFwdGVyQ29udGVudH1cXG5cXG4ke2FmdGVyQ2hhcHRlcn1gO1xuXHRcdH1cblxuXHRcdGNvbnN0IHVwZGF0ZWRDb250ZW50ID0gYCR7ZnJvbnRtYXR0ZXJUZXh0fVxcbiR7dXBkYXRlZEJvZHl9YDtcblx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkubW9kaWZ5KGZpbGUsIHVwZGF0ZWRDb250ZW50KTtcblx0fVxuXG5cdC8vIFByb2Nlc3MgdGhlIFwiIyMgQ2hhcHRlcnMsIFNjZW5lcyAmIEJlYXRzXCIgbGlzdCBhbmQgdXBkYXRlIG9yZGVyXG5cdHByaXZhdGUgYXN5bmMgcHJvY2Vzc0NoYXB0ZXJMaXN0KFxuXHRcdGxpc3Q6IFBhcnNlZENoYXB0ZXJMaXN0LFxuXHRcdHN0b3J5SWQ6IHN0cmluZ1xuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBHZXQgZXhpc3RpbmcgY2hhcHRlcnMgZm9yIHRoaXMgc3Rvcnlcblx0XHRjb25zdCBleGlzdGluZ0NoYXB0ZXJzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q2hhcHRlcnMoc3RvcnlJZCk7XG5cdFx0Y29uc3QgY2hhcHRlck1hcCA9IG5ldyBNYXA8c3RyaW5nLCBDaGFwdGVyPigpOyAvLyBNYXAgYnkgbGluayBuYW1lXG5cdFx0Y29uc3QgY2hhcHRlcklkTWFwID0gbmV3IE1hcDxzdHJpbmcsIENoYXB0ZXI+KCk7IC8vIE1hcCBieSBJRFxuXHRcdFxuXHRcdGZvciAoY29uc3QgY2hhcHRlciBvZiBleGlzdGluZ0NoYXB0ZXJzKSB7XG5cdFx0XHRjb25zdCBmaWxlTmFtZSA9IGBDaGFwdGVyLSR7Y2hhcHRlci5udW1iZXJ9Lm1kYDtcblx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRjaGFwdGVyTWFwLnNldChsaW5rTmFtZSwgY2hhcHRlcik7XG5cdFx0XHRjaGFwdGVySWRNYXAuc2V0KGNoYXB0ZXIuaWQsIGNoYXB0ZXIpO1xuXHRcdH1cblxuXHRcdGxldCBjdXJyZW50Q2hhcHRlcjogQ2hhcHRlciB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBjdXJyZW50U2NlbmU6IFNjZW5lIHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IGNoYXB0ZXJPcmRlck51bSA9IDE7IC8vIFN0YXJ0IGZyb20gMSwgd2lsbCBpbmNyZW1lbnQgYXMgd2UgcHJvY2Vzc1xuXHRcdGNvbnN0IHNjZW5lT3JkZXJOdW1zID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTsgLy8gVHJhY2sgb3JkZXJfbnVtIHBlciBjaGFwdGVyXG5cdFx0Y29uc3QgYmVhdE9yZGVyTnVtcyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7IC8vIFRyYWNrIG9yZGVyX251bSBwZXIgc2NlbmVcblxuXHRcdC8vIFByb2Nlc3MgbGlzdCBpdGVtcyAtIG9yZGVyIG1hdHRlcnMhXG5cdFx0Zm9yIChjb25zdCBpdGVtIG9mIGxpc3QuaXRlbXMpIHtcblx0XHRcdGlmIChpdGVtLnR5cGUgPT09IFwiY2hhcHRlclwiKSB7XG5cdFx0XHRcdC8vIFBhcnNlIGNoYXB0ZXIgZGlzcGxheSB0ZXh0XG5cdFx0XHRcdC8vIENhbiBiZTogXCJDaGFwdGVyIE46IHRpdGxlXCIgb3IganVzdCBcInRpdGxlXCJcblx0XHRcdFx0bGV0IHRpdGxlOiBzdHJpbmc7XG5cdFx0XHRcdGxldCBjaGFwdGVyTnVtYmVyOiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuXHRcdFx0XHRjb25zdCBjaGFwdGVyTWF0Y2ggPSBpdGVtLmRpc3BsYXlUZXh0Lm1hdGNoKC9DaGFwdGVyXFxzKyhcXGQrKTpcXHMqKC4rKS8pO1xuXHRcdFx0XHRpZiAoY2hhcHRlck1hdGNoKSB7XG5cdFx0XHRcdFx0Ly8gRm9ybWF0OiBcIkNoYXB0ZXIgTjogdGl0bGVcIlxuXHRcdFx0XHRcdGNoYXB0ZXJOdW1iZXIgPSBwYXJzZUludChjaGFwdGVyTWF0Y2hbMV0sIDEwKTtcblx0XHRcdFx0XHR0aXRsZSA9IGNoYXB0ZXJNYXRjaFsyXS50cmltKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gRm9ybWF0OiBqdXN0IFwidGl0bGVcIlxuXHRcdFx0XHRcdHRpdGxlID0gaXRlbS5kaXNwbGF5VGV4dC50cmltKCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBSZXNldCBzY2VuZSBvcmRlciBmb3IgbmV3IGNoYXB0ZXJcblx0XHRcdFx0Y3VycmVudFNjZW5lID0gbnVsbDtcblx0XHRcdFx0c2NlbmVPcmRlck51bXMuc2V0KFwiY3VycmVudFwiLCAxKTtcblxuXHRcdFx0XHRpZiAoaXRlbS5saW5rTmFtZSkge1xuXHRcdFx0XHRcdC8vIENoYXB0ZXIgZXhpc3RzIC0gZmluZCBpdFxuXHRcdFx0XHRcdGN1cnJlbnRDaGFwdGVyID0gY2hhcHRlck1hcC5nZXQoaXRlbS5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0XHRpZiAoIWN1cnJlbnRDaGFwdGVyKSB7XG5cdFx0XHRcdFx0XHQvLyBUcnkgdG8gZmluZCBieSBJRCBpZiBsaW5rTmFtZSBpcyBhY3R1YWxseSBhbiBJRFxuXHRcdFx0XHRcdFx0Y3VycmVudENoYXB0ZXIgPSBjaGFwdGVySWRNYXAuZ2V0KGl0ZW0ubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChjdXJyZW50Q2hhcHRlcikge1xuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgb3JkZXJfbnVtIG5lZWRzIHRvIGJlIHVwZGF0ZWRcblx0XHRcdFx0XHRcdGNvbnN0IG5lZWRzT3JkZXJVcGRhdGUgPSBjdXJyZW50Q2hhcHRlci5udW1iZXIgIT09IGNoYXB0ZXJPcmRlck51bTtcblx0XHRcdFx0XHRcdGNvbnN0IG5lZWRzVGl0bGVVcGRhdGUgPSB0aXRsZSAhPT0gY3VycmVudENoYXB0ZXIudGl0bGU7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGlmIChuZWVkc09yZGVyVXBkYXRlIHx8IG5lZWRzVGl0bGVVcGRhdGUpIHtcblx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIGNoYXB0ZXIgbnVtYmVyIGFuZCB0aXRsZVxuXHRcdFx0XHRcdFx0XHRjdXJyZW50Q2hhcHRlciA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnVwZGF0ZUNoYXB0ZXIoY3VycmVudENoYXB0ZXIuaWQsIHtcblx0XHRcdFx0XHRcdFx0XHRudW1iZXI6IGNoYXB0ZXJPcmRlck51bSxcblx0XHRcdFx0XHRcdFx0XHR0aXRsZTogbmVlZHNUaXRsZVVwZGF0ZSA/IHRpdGxlIDogdW5kZWZpbmVkLFxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBtYXBzXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGZpbGVOYW1lID0gYENoYXB0ZXItJHtjdXJyZW50Q2hhcHRlci5udW1iZXJ9Lm1kYDtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSBmaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRcdFx0Y2hhcHRlck1hcC5zZXQobGlua05hbWUsIGN1cnJlbnRDaGFwdGVyKTtcblx0XHRcdFx0XHRcdFx0Y2hhcHRlcklkTWFwLnNldChjdXJyZW50Q2hhcHRlci5pZCwgY3VycmVudENoYXB0ZXIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBDcmVhdGUgbmV3IGNoYXB0ZXIgKGlmIHRpdGxlIGlzIHByb3ZpZGVkKVxuXHRcdFx0XHRcdGlmICh0aXRsZSkge1xuXHRcdFx0XHRcdFx0Y3VycmVudENoYXB0ZXIgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDaGFwdGVyKHN0b3J5SWQsIHtcblx0XHRcdFx0XHRcdFx0bnVtYmVyOiBjaGFwdGVyT3JkZXJOdW0sXG5cdFx0XHRcdFx0XHRcdHRpdGxlLFxuXHRcdFx0XHRcdFx0XHRzdGF0dXM6IFwiZHJhZnRcIixcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgbWFwc1xuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSBgQ2hhcHRlci0ke2N1cnJlbnRDaGFwdGVyLm51bWJlcn0ubWRgO1xuXHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSBmaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRcdGNoYXB0ZXJNYXAuc2V0KGxpbmtOYW1lLCBjdXJyZW50Q2hhcHRlcik7XG5cdFx0XHRcdFx0XHRjaGFwdGVySWRNYXAuc2V0KGN1cnJlbnRDaGFwdGVyLmlkLCBjdXJyZW50Q2hhcHRlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBJbml0aWFsaXplIHNjZW5lIG9yZGVyIGZvciB0aGlzIGNoYXB0ZXJcblx0XHRcdFx0aWYgKGN1cnJlbnRDaGFwdGVyKSB7XG5cdFx0XHRcdFx0c2NlbmVPcmRlck51bXMuc2V0KGN1cnJlbnRDaGFwdGVyLmlkLCAxKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0Y2hhcHRlck9yZGVyTnVtKys7XG5cdFx0XHR9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gXCJzY2VuZVwiICYmIGN1cnJlbnRDaGFwdGVyKSB7XG5cdFx0XHRcdC8vIFBhcnNlIHNjZW5lIGRpc3BsYXkgdGV4dFxuXHRcdFx0XHQvLyBDYW4gYmU6IFwiU2NlbmUgTjogZ29hbCAtIHRpbWVSZWZcIiwgXCJnb2FsIC0gdGltZVJlZlwiLCBvciBqdXN0IFwiZ29hbFwiXG5cdFx0XHRcdGxldCBnb2FsOiBzdHJpbmc7XG5cdFx0XHRcdGxldCB0aW1lUmVmOiBzdHJpbmcgPSBcIlwiO1xuXG5cdFx0XHRcdGNvbnN0IHNjZW5lTWF0Y2ggPSBpdGVtLmRpc3BsYXlUZXh0Lm1hdGNoKC9TY2VuZVxccytcXGQrOlxccyooLispLyk7XG5cdFx0XHRcdGlmIChzY2VuZU1hdGNoKSB7XG5cdFx0XHRcdFx0Ly8gRm9ybWF0OiBcIlNjZW5lIE46IGdvYWwgLSB0aW1lUmVmXCIgb3IgXCJTY2VuZSBOOiBnb2FsXCJcblx0XHRcdFx0XHRjb25zdCBzY2VuZVRleHQgPSBzY2VuZU1hdGNoWzFdLnRyaW0oKTtcblx0XHRcdFx0XHRjb25zdCBwYXJ0cyA9IHNjZW5lVGV4dC5zcGxpdCgvXFxzKi1cXHMqLyk7XG5cdFx0XHRcdFx0Z29hbCA9IHBhcnRzWzBdLnRyaW0oKTtcblx0XHRcdFx0XHR0aW1lUmVmID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLSBcIikudHJpbSgpIDogXCJcIjtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBGb3JtYXQ6IFwiZ29hbCAtIHRpbWVSZWZcIiBvciBqdXN0IFwiZ29hbFwiXG5cdFx0XHRcdFx0Y29uc3QgcGFydHMgPSBpdGVtLmRpc3BsYXlUZXh0LnNwbGl0KC9cXHMqLVxccyovKTtcblx0XHRcdFx0XHRnb2FsID0gcGFydHNbMF0udHJpbSgpO1xuXHRcdFx0XHRcdHRpbWVSZWYgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbihcIiAtIFwiKS50cmltKCkgOiBcIlwiO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gR2V0IGN1cnJlbnQgc2NlbmUgb3JkZXJfbnVtIGZvciB0aGlzIGNoYXB0ZXJcblx0XHRcdFx0Y29uc3QgY3VycmVudFNjZW5lT3JkZXJOdW0gPSBzY2VuZU9yZGVyTnVtcy5nZXQoY3VycmVudENoYXB0ZXIuaWQpIHx8IDE7XG5cblx0XHRcdFx0Ly8gUmVzZXQgY3VycmVudFNjZW5lIGJlZm9yZSBwcm9jZXNzaW5nXG5cdFx0XHRcdGN1cnJlbnRTY2VuZSA9IG51bGw7XG5cblx0XHRcdFx0aWYgKGl0ZW0ubGlua05hbWUpIHtcblx0XHRcdFx0XHQvLyBTY2VuZSBleGlzdHMgLSBmaW5kIGl0XG5cdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdTY2VuZXMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRTY2VuZXMoY3VycmVudENoYXB0ZXIuaWQpO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lTWFwID0gbmV3IE1hcDxzdHJpbmcsIFNjZW5lPigpO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lSWRNYXAgPSBuZXcgTWFwPHN0cmluZywgU2NlbmU+KCk7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBleGlzdGluZ1NjZW5lcykge1xuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0c2NlbmVNYXAuc2V0KGxpbmtOYW1lLCBzY2VuZSk7XG5cdFx0XHRcdFx0XHRzY2VuZUlkTWFwLnNldChzY2VuZS5pZCwgc2NlbmUpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGN1cnJlbnRTY2VuZSA9IHNjZW5lTWFwLmdldChpdGVtLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdGlmICghY3VycmVudFNjZW5lKSB7XG5cdFx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBzY2VuZUlkTWFwLmdldChpdGVtLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAoY3VycmVudFNjZW5lKSB7XG5cdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBvcmRlcl9udW0gb3IgY29udGVudCBuZWVkcyB0byBiZSB1cGRhdGVkXG5cdFx0XHRcdFx0XHRjb25zdCBuZWVkc09yZGVyVXBkYXRlID0gY3VycmVudFNjZW5lLm9yZGVyX251bSAhPT0gY3VycmVudFNjZW5lT3JkZXJOdW07XG5cdFx0XHRcdFx0XHRjb25zdCBuZWVkc0NvbnRlbnRVcGRhdGUgPSBnb2FsICE9PSBjdXJyZW50U2NlbmUuZ29hbCB8fCB0aW1lUmVmICE9PSBjdXJyZW50U2NlbmUudGltZV9yZWY7XG5cdFx0XHRcdFx0XHRjb25zdCBuZWVkc0NoYXB0ZXJVcGRhdGUgPSBjdXJyZW50U2NlbmUuY2hhcHRlcl9pZCAhPT0gY3VycmVudENoYXB0ZXIuaWQ7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGlmIChuZWVkc09yZGVyVXBkYXRlIHx8IG5lZWRzQ29udGVudFVwZGF0ZSB8fCBuZWVkc0NoYXB0ZXJVcGRhdGUpIHtcblx0XHRcdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlU2NlbmUoY3VycmVudFNjZW5lLmlkLCB7XG5cdFx0XHRcdFx0XHRcdFx0Z29hbCxcblx0XHRcdFx0XHRcdFx0XHR0aW1lX3JlZjogdGltZVJlZixcblx0XHRcdFx0XHRcdFx0XHRvcmRlcl9udW06IGN1cnJlbnRTY2VuZU9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0XHRcdGNoYXB0ZXJfaWQ6IGN1cnJlbnRDaGFwdGVyLmlkLFxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gSW5pdGlhbGl6ZSBiZWF0IG9yZGVyIGZvciB0aGlzIHNjZW5lIChpbXBvcnRhbnQgZm9yIGVtcHR5IHNjZW5lcylcblx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIHNjZW5lIGFscmVhZHkgaGFzIGJlYXRzLCBpZiBub3QsIHN0YXJ0IGZyb20gMVxuXHRcdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdCZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzKGN1cnJlbnRTY2VuZS5pZCk7XG5cdFx0XHRcdFx0XHRpZiAoZXhpc3RpbmdCZWF0cy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRcdFx0YmVhdE9yZGVyTnVtcy5zZXQoY3VycmVudFNjZW5lLmlkLCAxKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIFNjZW5lIGhhcyBiZWF0cywgdXNlIG1heCBvcmRlcl9udW0gKyAxIGZvciBuZXcgYmVhdHNcblx0XHRcdFx0XHRcdFx0Y29uc3QgbWF4T3JkZXJOdW0gPSBNYXRoLm1heCguLi5leGlzdGluZ0JlYXRzLm1hcChiID0+IGIub3JkZXJfbnVtKSk7XG5cdFx0XHRcdFx0XHRcdGJlYXRPcmRlck51bXMuc2V0KGN1cnJlbnRTY2VuZS5pZCwgbWF4T3JkZXJOdW0gKyAxKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIG5ldyBzY2VuZVxuXHRcdFx0XHRcdGN1cnJlbnRTY2VuZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZVNjZW5lKHtcblx0XHRcdFx0XHRcdHN0b3J5X2lkOiBzdG9yeUlkLFxuXHRcdFx0XHRcdFx0Y2hhcHRlcl9pZDogY3VycmVudENoYXB0ZXIuaWQsXG5cdFx0XHRcdFx0XHRvcmRlcl9udW06IGN1cnJlbnRTY2VuZU9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0Z29hbCxcblx0XHRcdFx0XHRcdHRpbWVfcmVmOiB0aW1lUmVmLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIEluaXRpYWxpemUgYmVhdCBvcmRlciBmb3IgbmV3IHNjZW5lIChzdGFydHMgYXQgMSlcblx0XHRcdFx0XHRiZWF0T3JkZXJOdW1zLnNldChjdXJyZW50U2NlbmUuaWQsIDEpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBJbmNyZW1lbnQgc2NlbmUgb3JkZXIgZm9yIG5leHQgc2NlbmUgaW4gdGhpcyBjaGFwdGVyXG5cdFx0XHRcdHNjZW5lT3JkZXJOdW1zLnNldChjdXJyZW50Q2hhcHRlci5pZCwgY3VycmVudFNjZW5lT3JkZXJOdW0gKyAxKTtcblx0XHRcdH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSBcImJlYXRcIiAmJiBjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0Ly8gUGFyc2UgYmVhdCBkaXNwbGF5IHRleHRcblx0XHRcdFx0Ly8gQ2FuIGJlOiBcIkJlYXQgTjogaW50ZW50IC0+IG91dGNvbWVcIiwgXCJpbnRlbnQgLT4gb3V0Y29tZVwiLCBvciBqdXN0IFwiaW50ZW50XCJcblx0XHRcdFx0bGV0IGludGVudDogc3RyaW5nO1xuXHRcdFx0XHRsZXQgb3V0Y29tZTogc3RyaW5nID0gXCJcIjtcblxuXHRcdFx0XHRjb25zdCBiZWF0TWF0Y2ggPSBpdGVtLmRpc3BsYXlUZXh0Lm1hdGNoKC9CZWF0XFxzK1xcZCs6XFxzKiguKykvKTtcblx0XHRcdFx0aWYgKGJlYXRNYXRjaCkge1xuXHRcdFx0XHRcdC8vIEZvcm1hdDogXCJCZWF0IE46IGludGVudCAtPiBvdXRjb21lXCIgb3IgXCJCZWF0IE46IGludGVudFwiXG5cdFx0XHRcdFx0Y29uc3QgYmVhdFRleHQgPSBiZWF0TWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0XHRcdGNvbnN0IHBhcnRzID0gYmVhdFRleHQuc3BsaXQoL1xccyotPlxccyovKTtcblx0XHRcdFx0XHRpbnRlbnQgPSBwYXJ0c1swXS50cmltKCk7XG5cdFx0XHRcdFx0b3V0Y29tZSA9IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0+IFwiKS50cmltKCkgOiBcIlwiO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIEZvcm1hdDogXCJpbnRlbnQgLT4gb3V0Y29tZVwiIG9yIGp1c3QgXCJpbnRlbnRcIlxuXHRcdFx0XHRcdGNvbnN0IHBhcnRzID0gaXRlbS5kaXNwbGF5VGV4dC5zcGxpdCgvXFxzKi0+XFxzKi8pO1xuXHRcdFx0XHRcdGludGVudCA9IHBhcnRzWzBdLnRyaW0oKTtcblx0XHRcdFx0XHRvdXRjb21lID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLT4gXCIpLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBHZXQgY3VycmVudCBiZWF0IG9yZGVyX251bSBmb3IgdGhpcyBzY2VuZVxuXHRcdFx0XHRjb25zdCBjdXJyZW50QmVhdE9yZGVyTnVtID0gYmVhdE9yZGVyTnVtcy5nZXQoY3VycmVudFNjZW5lLmlkKSB8fCAxO1xuXG5cdFx0XHRcdGlmIChpdGVtLmxpbmtOYW1lKSB7XG5cdFx0XHRcdFx0Ly8gQmVhdCBleGlzdHMgLSBmaW5kIGl0XG5cdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdCZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzKGN1cnJlbnRTY2VuZS5pZCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBCZWF0PigpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRJZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBCZWF0PigpO1xuXHRcdFx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBleGlzdGluZ0JlYXRzKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0YmVhdE1hcC5zZXQobGlua05hbWUsIGJlYXQpO1xuXHRcdFx0XHRcdFx0YmVhdElkTWFwLnNldChiZWF0LmlkLCBiZWF0KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRsZXQgY3VycmVudEJlYXQgPSBiZWF0TWFwLmdldChpdGVtLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdGlmICghY3VycmVudEJlYXQpIHtcblx0XHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYmVhdElkTWFwLmdldChpdGVtLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAoY3VycmVudEJlYXQpIHtcblx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIG9yZGVyX251bSBvciBjb250ZW50IG5lZWRzIHRvIGJlIHVwZGF0ZWRcblx0XHRcdFx0XHRcdGNvbnN0IG5lZWRzT3JkZXJVcGRhdGUgPSBjdXJyZW50QmVhdC5vcmRlcl9udW0gIT09IGN1cnJlbnRCZWF0T3JkZXJOdW07XG5cdFx0XHRcdFx0XHRjb25zdCBuZWVkc0NvbnRlbnRVcGRhdGUgPSBpbnRlbnQgIT09IGN1cnJlbnRCZWF0LmludGVudCB8fCBvdXRjb21lICE9PSBjdXJyZW50QmVhdC5vdXRjb21lO1xuXHRcdFx0XHRcdFx0Y29uc3QgbmVlZHNTY2VuZVVwZGF0ZSA9IGN1cnJlbnRCZWF0LnNjZW5lX2lkICE9PSBjdXJyZW50U2NlbmUuaWQ7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGlmIChuZWVkc09yZGVyVXBkYXRlIHx8IG5lZWRzQ29udGVudFVwZGF0ZSB8fCBuZWVkc1NjZW5lVXBkYXRlKSB7XG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQmVhdChjdXJyZW50QmVhdC5pZCwge1xuXHRcdFx0XHRcdFx0XHRcdGludGVudCxcblx0XHRcdFx0XHRcdFx0XHRvdXRjb21lLFxuXHRcdFx0XHRcdFx0XHRcdG9yZGVyX251bTogY3VycmVudEJlYXRPcmRlck51bSxcblx0XHRcdFx0XHRcdFx0XHRzY2VuZV9pZDogY3VycmVudFNjZW5lLmlkLFxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIG5ldyBiZWF0XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQmVhdCh7XG5cdFx0XHRcdFx0XHRzY2VuZV9pZDogY3VycmVudFNjZW5lLmlkLFxuXHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBjdXJyZW50QmVhdE9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0dHlwZTogXCJzZXR1cFwiLCAvLyBEZWZhdWx0IHR5cGVcblx0XHRcdFx0XHRcdGludGVudCxcblx0XHRcdFx0XHRcdG91dGNvbWUsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdC8vIEluY3JlbWVudCBiZWF0IG9yZGVyIGZvciBuZXh0IGJlYXQgaW4gdGhpcyBzY2VuZVxuXHRcdFx0XHRiZWF0T3JkZXJOdW1zLnNldChjdXJyZW50U2NlbmUuaWQsIGN1cnJlbnRCZWF0T3JkZXJOdW0gKyAxKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBQcm9jZXNzIHRoZSBcIiMjIEJlYXRzXCIgbGlzdCBmcm9tIGEgc2NlbmUgZmlsZSBhbmQgdXBkYXRlIGJlYXQgb3JkZXJcblx0cHJpdmF0ZSBhc3luYyBwdXNoU2NlbmVCZWF0cyhzY2VuZUZpbGVQYXRoOiBzdHJpbmcsIHN0b3J5SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdC8vIFJlYWQgc2NlbmUgZmlsZVxuXHRcdGNvbnN0IGZpbGUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHNjZW5lRmlsZVBhdGgpO1xuXHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBzY2VuZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkucmVhZChmaWxlKTtcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMuZmlsZU1hbmFnZXIucGFyc2VGcm9udG1hdHRlcihzY2VuZUNvbnRlbnQpO1xuXG5cdFx0aWYgKCFmcm9udG1hdHRlci5pZCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IHNjZW5lSWQgPSBmcm9udG1hdHRlci5pZDtcblxuXHRcdC8vIFBhcnNlIGJlYXQgbGlzdCBmcm9tIHNjZW5lIGZpbGVcblx0XHRjb25zdCBiZWF0TGlzdCA9IHBhcnNlQmVhdExpc3Qoc2NlbmVDb250ZW50KTtcblx0XHRcblx0XHRpZiAoYmVhdExpc3QuaXRlbXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IGV4aXN0aW5nIGJlYXRzIGZvciB0aGlzIHNjZW5lXG5cdFx0Y29uc3QgZXhpc3RpbmdCZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzKHNjZW5lSWQpO1xuXHRcdGNvbnN0IGJlYXRNYXAgPSBuZXcgTWFwPHN0cmluZywgQmVhdD4oKTsgLy8gTWFwIGJ5IGxpbmsgbmFtZVxuXHRcdGNvbnN0IGJlYXRJZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBCZWF0PigpOyAvLyBNYXAgYnkgSURcblx0XHRcblx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgZXhpc3RpbmdCZWF0cykge1xuXHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0Y29uc3QgbGlua05hbWUgPSBmaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdGJlYXRNYXAuc2V0KGxpbmtOYW1lLCBiZWF0KTtcblx0XHRcdGJlYXRJZE1hcC5zZXQoYmVhdC5pZCwgYmVhdCk7XG5cdFx0fVxuXG5cdFx0bGV0IGJlYXRPcmRlck51bSA9IDE7IC8vIFN0YXJ0IGZyb20gMSwgd2lsbCBpbmNyZW1lbnQgYXMgd2UgcHJvY2Vzc1xuXG5cdFx0Ly8gUHJvY2VzcyBsaXN0IGl0ZW1zIC0gb3JkZXIgbWF0dGVycyFcblx0XHRmb3IgKGNvbnN0IGl0ZW0gb2YgYmVhdExpc3QuaXRlbXMpIHtcblx0XHRcdC8vIFBhcnNlIGJlYXQgZGlzcGxheSB0ZXh0XG5cdFx0XHQvLyBDYW4gYmU6IFwiQmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZVwiLCBcImludGVudCAtPiBvdXRjb21lXCIsIG9yIGp1c3QgXCJpbnRlbnRcIlxuXHRcdFx0bGV0IGludGVudDogc3RyaW5nO1xuXHRcdFx0bGV0IG91dGNvbWU6IHN0cmluZyA9IFwiXCI7XG5cblx0XHRcdGNvbnN0IGJlYXRNYXRjaCA9IGl0ZW0uZGlzcGxheVRleHQubWF0Y2goL0JlYXRcXHMrXFxkKzpcXHMqKC4rKS8pO1xuXHRcdFx0aWYgKGJlYXRNYXRjaCkge1xuXHRcdFx0XHQvLyBGb3JtYXQ6IFwiQmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZVwiIG9yIFwiQmVhdCBOOiBpbnRlbnRcIlxuXHRcdFx0XHRjb25zdCBiZWF0VGV4dCA9IGJlYXRNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRcdGNvbnN0IHBhcnRzID0gYmVhdFRleHQuc3BsaXQoL1xccyotPlxccyovKTtcblx0XHRcdFx0aW50ZW50ID0gcGFydHNbMF0udHJpbSgpO1xuXHRcdFx0XHRvdXRjb21lID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLT4gXCIpLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBGb3JtYXQ6IFwiaW50ZW50IC0+IG91dGNvbWVcIiBvciBqdXN0IFwiaW50ZW50XCJcblx0XHRcdFx0Y29uc3QgcGFydHMgPSBpdGVtLmRpc3BsYXlUZXh0LnNwbGl0KC9cXHMqLT5cXHMqLyk7XG5cdFx0XHRcdGludGVudCA9IHBhcnRzWzBdLnRyaW0oKTtcblx0XHRcdFx0b3V0Y29tZSA9IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0+IFwiKS50cmltKCkgOiBcIlwiO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoaXRlbS5saW5rTmFtZSkge1xuXHRcdFx0XHQvLyBCZWF0IGV4aXN0cyAtIGZpbmQgaXRcblx0XHRcdFx0bGV0IGN1cnJlbnRCZWF0ID0gYmVhdE1hcC5nZXQoaXRlbS5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0aWYgKCFjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdC8vIFRyeSB0byBmaW5kIGJ5IElEIGlmIGxpbmtOYW1lIGlzIGFjdHVhbGx5IGFuIElEXG5cdFx0XHRcdFx0Y3VycmVudEJlYXQgPSBiZWF0SWRNYXAuZ2V0KGl0ZW0ubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdGlmIChjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdC8vIENoZWNrIGlmIG9yZGVyX251bSBvciBjb250ZW50IG5lZWRzIHRvIGJlIHVwZGF0ZWRcblx0XHRcdFx0XHRjb25zdCBuZWVkc09yZGVyVXBkYXRlID0gY3VycmVudEJlYXQub3JkZXJfbnVtICE9PSBiZWF0T3JkZXJOdW07XG5cdFx0XHRcdFx0Y29uc3QgbmVlZHNDb250ZW50VXBkYXRlID0gaW50ZW50ICE9PSBjdXJyZW50QmVhdC5pbnRlbnQgfHwgb3V0Y29tZSAhPT0gY3VycmVudEJlYXQub3V0Y29tZTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAobmVlZHNPcmRlclVwZGF0ZSB8fCBuZWVkc0NvbnRlbnRVcGRhdGUpIHtcblx0XHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQmVhdChjdXJyZW50QmVhdC5pZCwge1xuXHRcdFx0XHRcdFx0XHRpbnRlbnQsXG5cdFx0XHRcdFx0XHRcdG91dGNvbWUsXG5cdFx0XHRcdFx0XHRcdG9yZGVyX251bTogYmVhdE9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBDcmVhdGUgbmV3IGJlYXRcblx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQmVhdCh7XG5cdFx0XHRcdFx0c2NlbmVfaWQ6IHNjZW5lSWQsXG5cdFx0XHRcdFx0b3JkZXJfbnVtOiBiZWF0T3JkZXJOdW0sXG5cdFx0XHRcdFx0dHlwZTogXCJzZXR1cFwiLCAvLyBEZWZhdWx0IHR5cGVcblx0XHRcdFx0XHRpbnRlbnQsXG5cdFx0XHRcdFx0b3V0Y29tZSxcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGJlYXRPcmRlck51bSsrO1xuXHRcdH1cblx0fVxuXG5cdC8vIFB1c2ggcHJvc2UgYmxvY2tzIGZyb20gYSBzdG9yeSBmaWxlIHdpdGggaGllcmFyY2hpY2FsIHN0cnVjdHVyZVxuXHQvLyBGb3JtYXQ6ICMgU3Rvcnk6IHRpdGxlLCAjIyBDaGFwdGVyOiB0aXRsZSwgIyMjIFNjZW5lOiB0aXRsZSwgIyMjIyBCZWF0OiB0aXRsZVxuXHRwcml2YXRlIGFzeW5jIHB1c2hTdG9yeUNvbnRlbnRCbG9ja3Moc3RvcnlGaWxlUGF0aDogc3RyaW5nLCBzdG9yeUZvbGRlclBhdGg6IHN0cmluZywgc3RvcnlJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoc3RvcnlGaWxlUGF0aCk7XG5cdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBTdG9yeSBmaWxlIG5vdCBmb3VuZDogJHtzdG9yeUZpbGVQYXRofWApO1xuXHRcdH1cblxuXHRcdGNvbnN0IHN0b3J5Q29udGVudCA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5yZWFkKGZpbGUpO1xuXHRcdGNvbnN0IGNvbnRlbnRzRm9sZGVyUGF0aCA9IGAke3N0b3J5Rm9sZGVyUGF0aH0vMDMtY29udGVudHNgO1xuXG5cdFx0Ly8gUGFyc2UgaGllcmFyY2hpY2FsIHByb3NlIGZyb20gc3RvcnkgY29udGVudFxuXHRcdGNvbnN0IHN0b3J5UHJvc2UgPSBwYXJzZVN0b3J5UHJvc2Uoc3RvcnlDb250ZW50KTtcblx0XHRcblx0XHRpZiAoc3RvcnlQcm9zZS5zZWN0aW9ucy5sZW5ndGggPT09IDApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBHZXQgZXhpc3RpbmcgY2hhcHRlcnMsIHNjZW5lcywgYmVhdHNcblx0XHRjb25zdCBleGlzdGluZ0NoYXB0ZXJzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q2hhcHRlcnMoc3RvcnlJZCk7XG5cdFx0Y29uc3QgY2hhcHRlckJ5VGl0bGUgPSBuZXcgTWFwPHN0cmluZywgQ2hhcHRlcj4oKTtcblx0XHRmb3IgKGNvbnN0IGNoIG9mIGV4aXN0aW5nQ2hhcHRlcnMpIHtcblx0XHRcdGNoYXB0ZXJCeVRpdGxlLnNldChjaC50aXRsZS50b0xvd2VyQ2FzZSgpLCBjaCk7XG5cdFx0fVxuXG5cdFx0Ly8gVHJhY2sgY3VycmVudCBjb250ZXh0XG5cdFx0bGV0IGN1cnJlbnRDaGFwdGVyOiBDaGFwdGVyIHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IGN1cnJlbnRTY2VuZTogU2NlbmUgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgY3VycmVudEJlYXQ6IEJlYXQgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgcHJvc2VPcmRlck51bSA9IDE7XG5cblx0XHQvLyBNYXBzIGZvciBzY2VuZXMgYW5kIGJlYXRzXG5cdFx0Y29uc3Qgc2NlbmVNYXAgPSBuZXcgTWFwPHN0cmluZywgU2NlbmU+KCk7XG5cdFx0Y29uc3QgYmVhdE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBCZWF0PigpO1xuXG5cdFx0Ly8gQ2FjaGUgZm9yIHJlbW90ZSBjb250ZW50IGJsb2NrcyBieSBjaGFwdGVyIElEIChhdm9pZHMgTisxIHF1ZXJpZXMpXG5cdFx0Y29uc3QgcmVtb3RlQ29udGVudEJsb2Nrc0NhY2hlID0gbmV3IE1hcDxzdHJpbmcsIE1hcDxzdHJpbmcsIENvbnRlbnRCbG9jaz4+KCk7XG5cdFx0Y29uc3QgZ2V0UmVtb3RlQ29udGVudEJsb2Nrc01hcCA9IGFzeW5jIChjaGFwdGVySWQ6IHN0cmluZyk6IFByb21pc2U8TWFwPHN0cmluZywgQ29udGVudEJsb2NrPj4gPT4ge1xuXHRcdFx0aWYgKCFyZW1vdGVDb250ZW50QmxvY2tzQ2FjaGUuaGFzKGNoYXB0ZXJJZCkpIHtcblx0XHRcdFx0Y29uc3QgYmxvY2tzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2NrcyhjaGFwdGVySWQpO1xuXHRcdFx0XHRjb25zdCBtYXAgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudEJsb2NrPigpO1xuXHRcdFx0XHRmb3IgKGNvbnN0IHBiIG9mIGJsb2Nrcykge1xuXHRcdFx0XHRcdG1hcC5zZXQocGIuaWQsIHBiKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZW1vdGVDb250ZW50QmxvY2tzQ2FjaGUuc2V0KGNoYXB0ZXJJZCwgbWFwKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZW1vdGVDb250ZW50QmxvY2tzQ2FjaGUuZ2V0KGNoYXB0ZXJJZCkhO1xuXHRcdH07XG5cblx0XHQvLyBQcm9jZXNzIGVhY2ggc2VjdGlvblxuXHRcdGZvciAoY29uc3Qgc2VjdGlvbiBvZiBzdG9yeVByb3NlLnNlY3Rpb25zKSB7XG5cdFx0XHRpZiAoc2VjdGlvbi50eXBlID09PSBcInNjZW5lXCIgJiYgc2VjdGlvbi5zY2VuZSkge1xuXHRcdFx0XHRjb25zdCB7IHNjZW5lOiBwYXJzZWRTY2VuZSB9ID0gc2VjdGlvbjtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIElmIG5vIGN1cnJlbnQgY2hhcHRlciwgY3JlYXRlIGEgZGVmYXVsdCBvbmUgZm9yIG9ycGhhbiBzY2VuZXNcblx0XHRcdFx0aWYgKCFjdXJyZW50Q2hhcHRlcikge1xuXHRcdFx0XHRcdGN1cnJlbnRDaGFwdGVyID0gY2hhcHRlckJ5VGl0bGUuZ2V0KFwic3RvcnkgcHJvc2VcIikgfHwgbnVsbDtcblx0XHRcdFx0XHRpZiAoIWN1cnJlbnRDaGFwdGVyKSB7XG5cdFx0XHRcdFx0XHRjdXJyZW50Q2hhcHRlciA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNoYXB0ZXIoc3RvcnlJZCwge1xuXHRcdFx0XHRcdFx0XHRudW1iZXI6IDk5OTksXG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcIlN0b3J5IFByb3NlXCIsXG5cdFx0XHRcdFx0XHRcdHN0YXR1czogXCJkcmFmdFwiLFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRjaGFwdGVyQnlUaXRsZS5zZXQoXCJzdG9yeSBwcm9zZVwiLCBjdXJyZW50Q2hhcHRlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gRmluZCBvciBjcmVhdGUgc2NlbmVcblx0XHRcdFx0aWYgKHBhcnNlZFNjZW5lLmxpbmtOYW1lKSB7XG5cdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gc2NlbmVNYXAuZ2V0KHBhcnNlZFNjZW5lLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoIWN1cnJlbnRTY2VuZSAmJiBwYXJzZWRTY2VuZS5nb2FsKSB7XG5cdFx0XHRcdFx0Ly8gVHJ5IHRvIGZpbmQgYnkgZ29hbFxuXHRcdFx0XHRcdGNvbnN0IGFsbFNjZW5lcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFNjZW5lcyhjdXJyZW50Q2hhcHRlci5pZCk7XG5cdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gYWxsU2NlbmVzLmZpbmQocyA9PiBzLmdvYWwgPT09IHBhcnNlZFNjZW5lLmdvYWwpIHx8IG51bGw7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIWN1cnJlbnRTY2VuZSkge1xuXHRcdFx0XHRcdC8vIENyZWF0ZSBuZXcgc2NlbmVcblx0XHRcdFx0XHRjb25zdCBleGlzdGluZ1NjZW5lcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFNjZW5lcyhjdXJyZW50Q2hhcHRlci5pZCk7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVPcmRlck51bSA9IGV4aXN0aW5nU2NlbmVzLmxlbmd0aCA+IDBcblx0XHRcdFx0XHRcdD8gTWF0aC5tYXgoLi4uZXhpc3RpbmdTY2VuZXMubWFwKHMgPT4gcy5vcmRlcl9udW0pKSArIDFcblx0XHRcdFx0XHRcdDogMTtcblxuXHRcdFx0XHRcdGN1cnJlbnRTY2VuZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZVNjZW5lKHtcblx0XHRcdFx0XHRcdHN0b3J5X2lkOiBzdG9yeUlkLFxuXHRcdFx0XHRcdFx0Y2hhcHRlcl9pZDogY3VycmVudENoYXB0ZXIuaWQsXG5cdFx0XHRcdFx0XHRvcmRlcl9udW06IHNjZW5lT3JkZXJOdW0sXG5cdFx0XHRcdFx0XHRnb2FsOiBwYXJzZWRTY2VuZS5nb2FsLFxuXHRcdFx0XHRcdFx0dGltZV9yZWY6IHBhcnNlZFNjZW5lLnRpbWVSZWYsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly8gU2NlbmUgZmlsZSB3aWxsIGJlIGNyZWF0ZWQgZHVyaW5nIHB1bGxcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZVNjZW5lRmlsZU5hbWUoY3VycmVudFNjZW5lKTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUxpbmtOYW1lID0gc2NlbmVGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRzY2VuZU1hcC5zZXQoc2NlbmVMaW5rTmFtZSwgY3VycmVudFNjZW5lKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGN1cnJlbnRCZWF0ID0gbnVsbDtcblx0XHRcdFx0cHJvc2VPcmRlck51bSA9IDE7XG5cblx0XHRcdH0gZWxzZSBpZiAoc2VjdGlvbi50eXBlID09PSBcImJlYXRcIiAmJiBzZWN0aW9uLmJlYXQpIHtcblx0XHRcdFx0Y29uc3QgeyBiZWF0OiBwYXJzZWRCZWF0IH0gPSBzZWN0aW9uO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKCFjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0XHQvLyBDYW4ndCBjcmVhdGUgYmVhdCB3aXRob3V0IHNjZW5lIC0gc2tpcFxuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gRmluZCBvciBjcmVhdGUgYmVhdFxuXHRcdFx0XHRpZiAocGFyc2VkQmVhdC5saW5rTmFtZSkge1xuXHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYmVhdE1hcC5nZXQocGFyc2VkQmVhdC5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICghY3VycmVudEJlYXQgJiYgcGFyc2VkQmVhdC5pbnRlbnQpIHtcblx0XHRcdFx0XHRjb25zdCBhbGxCZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzKGN1cnJlbnRTY2VuZS5pZCk7XG5cdFx0XHRcdFx0Y3VycmVudEJlYXQgPSBhbGxCZWF0cy5maW5kKGIgPT4gYi5pbnRlbnQgPT09IHBhcnNlZEJlYXQuaW50ZW50KSB8fCBudWxsO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCFjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nQmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0cyhjdXJyZW50U2NlbmUuaWQpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRPcmRlck51bSA9IGV4aXN0aW5nQmVhdHMubGVuZ3RoID4gMFxuXHRcdFx0XHRcdFx0PyBNYXRoLm1heCguLi5leGlzdGluZ0JlYXRzLm1hcChiID0+IGIub3JkZXJfbnVtKSkgKyAxXG5cdFx0XHRcdFx0XHQ6IDE7XG5cblx0XHRcdFx0XHRjdXJyZW50QmVhdCA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUJlYXQoe1xuXHRcdFx0XHRcdFx0c2NlbmVfaWQ6IGN1cnJlbnRTY2VuZS5pZCxcblx0XHRcdFx0XHRcdG9yZGVyX251bTogYmVhdE9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0dHlwZTogXCJzZXR1cFwiLFxuXHRcdFx0XHRcdFx0aW50ZW50OiBwYXJzZWRCZWF0LmludGVudCxcblx0XHRcdFx0XHRcdG91dGNvbWU6IHBhcnNlZEJlYXQub3V0Y29tZSxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvLyBCZWF0IGZpbGUgd2lsbCBiZSBjcmVhdGVkIGR1cmluZyBwdWxsXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoY3VycmVudEJlYXQpIHtcblx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGN1cnJlbnRCZWF0KTtcblx0XHRcdFx0XHRjb25zdCBiZWF0TGlua05hbWUgPSBiZWF0RmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0YmVhdE1hcC5zZXQoYmVhdExpbmtOYW1lLCBjdXJyZW50QmVhdCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIGlmIChzZWN0aW9uLnR5cGUgPT09IFwicHJvc2VcIiAmJiBzZWN0aW9uLnByb3NlKSB7XG5cdFx0XHRcdGNvbnN0IHsgcHJvc2U6IHBhcmFncmFwaCB9ID0gc2VjdGlvbjtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIE5lZWQgYSBjaGFwdGVyIGZvciBwcm9zZSBibG9ja3Ncblx0XHRcdFx0aWYgKCFjdXJyZW50Q2hhcHRlcikge1xuXHRcdFx0XHRcdGN1cnJlbnRDaGFwdGVyID0gY2hhcHRlckJ5VGl0bGUuZ2V0KFwic3RvcnkgcHJvc2VcIikgfHwgbnVsbDtcblx0XHRcdFx0XHRpZiAoIWN1cnJlbnRDaGFwdGVyKSB7XG5cdFx0XHRcdFx0XHRjdXJyZW50Q2hhcHRlciA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNoYXB0ZXIoc3RvcnlJZCwge1xuXHRcdFx0XHRcdFx0XHRudW1iZXI6IDk5OTksXG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcIlN0b3J5IFByb3NlXCIsXG5cdFx0XHRcdFx0XHRcdHN0YXR1czogXCJkcmFmdFwiLFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRjaGFwdGVyQnlUaXRsZS5zZXQoXCJzdG9yeSBwcm9zZVwiLCBjdXJyZW50Q2hhcHRlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gR2V0IHJlbW90ZSBwcm9zZSBibG9ja3MgZm9yIGN1cnJlbnQgY2hhcHRlciAodXNpbmcgY2FjaGUpXG5cdFx0XHRcdGNvbnN0IHJlbW90ZUNvbnRlbnRCbG9ja3NNYXAgPSBhd2FpdCBnZXRSZW1vdGVDb250ZW50QmxvY2tzTWFwKGN1cnJlbnRDaGFwdGVyLmlkKTtcblxuXHRcdFx0XHRsZXQgbG9jYWxDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayB8IG51bGwgPSBudWxsO1xuXHRcdFx0XHRsZXQgcmVtb3RlQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2sgfCBudWxsID0gbnVsbDtcblxuXHRcdFx0XHRpZiAocGFyYWdyYXBoLmxpbmtOYW1lKSB7XG5cdFx0XHRcdFx0Ly8gU2VhcmNoIGZvciBmaWxlIGluIHR5cGUgc3ViZm9sZGVyc1xuXHRcdFx0XHRcdGNvbnN0IGNvbnRlbnRCbG9ja0ZpbGVQYXRoID0gYXdhaXQgdGhpcy5maW5kQ29udGVudEJsb2NrRmlsZUJ5TGlua05hbWUoY29udGVudHNGb2xkZXJQYXRoLCBwYXJhZ3JhcGgubGlua05hbWUpO1xuXHRcdFx0XHRcdGlmIChjb250ZW50QmxvY2tGaWxlUGF0aCkge1xuXHRcdFx0XHRcdFx0bG9jYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLnJlYWRDb250ZW50QmxvY2tGcm9tRmlsZShjb250ZW50QmxvY2tGaWxlUGF0aCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCFsb2NhbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0bG9jYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tCeUNvbnRlbnQoY29udGVudHNGb2xkZXJQYXRoLCBwYXJhZ3JhcGguY29udGVudCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGxvY2FsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRyZW1vdGVDb250ZW50QmxvY2sgPSByZW1vdGVDb250ZW50QmxvY2tzTWFwLmdldChsb2NhbENvbnRlbnRCbG9jay5pZCkgfHwgbnVsbDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29uc3Qgbm9ybWFsaXplZENvbnRlbnQgPSBwYXJhZ3JhcGguY29udGVudC50cmltKCk7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IFssIHJlbW90ZVBCXSBvZiByZW1vdGVDb250ZW50QmxvY2tzTWFwLmVudHJpZXMoKSkge1xuXHRcdFx0XHRcdFx0XHRpZiAocmVtb3RlUEIuY29udGVudC50cmltKCkgPT09IG5vcm1hbGl6ZWRDb250ZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVtb3RlQ29udGVudEJsb2NrID0gcmVtb3RlUEI7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bG9jYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tCeUNvbnRlbnQoY29udGVudHNGb2xkZXJQYXRoLCBwYXJhZ3JhcGguY29udGVudCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29uc3Qgbm9ybWFsaXplZENvbnRlbnQgPSBwYXJhZ3JhcGguY29udGVudC50cmltKCk7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBbLCByZW1vdGVQQl0gb2YgcmVtb3RlQ29udGVudEJsb2Nrc01hcC5lbnRyaWVzKCkpIHtcblx0XHRcdFx0XHRcdGlmIChyZW1vdGVQQi5jb250ZW50LnRyaW0oKSA9PT0gbm9ybWFsaXplZENvbnRlbnQpIHtcblx0XHRcdFx0XHRcdFx0cmVtb3RlQ29udGVudEJsb2NrID0gcmVtb3RlUEI7XG5cdFx0XHRcdFx0XHRcdGlmICghbG9jYWxDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmluZENvbnRlbnRCbG9ja0J5SWQoY29udGVudHNGb2xkZXJQYXRoLCByZW1vdGVQQi5pZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3Qgc3RhdHVzID0gY29tcGFyZUNvbnRlbnRCbG9ja3MocGFyYWdyYXBoLCBsb2NhbENvbnRlbnRCbG9jaywgcmVtb3RlQ29udGVudEJsb2NrKTtcblx0XHRcdFx0bGV0IGZpbmFsQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2s7XG5cblx0XHRcdFx0c3dpdGNoIChzdGF0dXMpIHtcblx0XHRcdFx0XHRjYXNlIFwibmV3XCI6IHtcblx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEJsb2NrKGN1cnJlbnRDaGFwdGVyLmlkLCB7XG5cdFx0XHRcdFx0XHRcdG9yZGVyX251bTogcHJvc2VPcmRlck51bSsrLFxuXHRcdFx0XHRcdFx0XHRraW5kOiBcImZpbmFsXCIsXG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQ6IHBhcmFncmFwaC5jb250ZW50LFxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdC8vIENyZWF0ZSBmaWxlIGluIGNvcnJlY3QgdHlwZSBzdWJmb2xkZXJcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblxuXHRcdFx0XHRcdFx0Ly8gQ3JlYXRlIHJlZmVyZW5jZXNcblx0XHRcdFx0XHRcdGlmIChjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJzY2VuZVwiLCBjdXJyZW50U2NlbmUuaWQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRCZWF0KSB7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRBbmNob3IoZmluYWxDb250ZW50QmxvY2suaWQsIFwiYmVhdFwiLCBjdXJyZW50QmVhdC5pZCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwidW5jaGFuZ2VkXCI6IHtcblx0XHRcdFx0XHRcdGlmICghbG9jYWxDb250ZW50QmxvY2sgJiYgcmVtb3RlQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gcmVtb3RlQ29udGVudEJsb2NrO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobG9jYWxDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBsb2NhbENvbnRlbnRCbG9jaztcblx0XHRcdFx0XHRcdFx0cHJvc2VPcmRlck51bSsrO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSByZW1vdGVDb250ZW50QmxvY2shO1xuXHRcdFx0XHRcdFx0XHRwcm9zZU9yZGVyTnVtKys7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwibG9jYWxfbW9kaWZpZWRcIjoge1xuXHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVDb250ZW50QmxvY2sobG9jYWxDb250ZW50QmxvY2shLmlkLCB7XG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQ6IHBhcmFncmFwaC5jb250ZW50LFxuXHRcdFx0XHRcdFx0XHRvcmRlcl9udW06IHByb3NlT3JkZXJOdW0rKyxcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQ29udGVudEJsb2NrRmlsZShmaW5hbENvbnRlbnRCbG9jaywgZmlsZVBhdGgsIHVuZGVmaW5lZCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwicmVtb3RlX21vZGlmaWVkXCI6IHtcblx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gcmVtb3RlQ29udGVudEJsb2NrITtcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblx0XHRcdFx0XHRcdHByb3NlT3JkZXJOdW0rKztcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhc2UgXCJjb25mbGljdFwiOiB7XG5cdFx0XHRcdFx0XHRjb25zdCByZXNvbHV0aW9uID0gYXdhaXQgdGhpcy5yZXNvbHZlQ29uZmxpY3QobG9jYWxDb250ZW50QmxvY2shLCByZW1vdGVDb250ZW50QmxvY2shKTtcblx0XHRcdFx0XHRcdGxldCByZXNvbHZlZENvbnRlbnQgPSByZXNvbHV0aW9uLnJlc29sdXRpb24gPT09IFwibG9jYWxcIiBcblx0XHRcdFx0XHRcdFx0PyBwYXJhZ3JhcGguY29udGVudCBcblx0XHRcdFx0XHRcdFx0OiByZXNvbHV0aW9uLnJlc29sdXRpb24gPT09IFwicmVtb3RlXCIgXG5cdFx0XHRcdFx0XHRcdFx0PyByZW1vdGVDb250ZW50QmxvY2shLmNvbnRlbnQgXG5cdFx0XHRcdFx0XHRcdFx0OiByZXNvbHV0aW9uLm1lcmdlZENvbnRlbnQgfHwgcGFyYWdyYXBoLmNvbnRlbnQ7XG5cblx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQ29udGVudEJsb2NrKGxvY2FsQ29udGVudEJsb2NrIS5pZCwge1xuXHRcdFx0XHRcdFx0XHRjb250ZW50OiByZXNvbHZlZENvbnRlbnQsXG5cdFx0XHRcdFx0XHRcdG9yZGVyX251bTogcHJvc2VPcmRlck51bSsrLFxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFB1c2ggcHJvc2UgYmxvY2tzIGZyb20gYSBzY2VuZSBmaWxlIChzY2VuZS1sZXZlbCBwcm9zZSwgbm90IGluc2lkZSBjaGFwdGVycylcblx0cHJpdmF0ZSBhc3luYyBwdXNoU2NlbmVDb250ZW50QmxvY2tzKHNjZW5lRmlsZVBhdGg6IHN0cmluZywgc3RvcnlGb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBSZWFkIHNjZW5lIGZpbGVcblx0XHRjb25zdCBmaWxlID0gdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLmdldEFic3RyYWN0RmlsZUJ5UGF0aChzY2VuZUZpbGVQYXRoKTtcblx0XHRpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc2NlbmVDb250ZW50ID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLnJlYWQoZmlsZSk7XG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSB0aGlzLmZpbGVNYW5hZ2VyLnBhcnNlRnJvbnRtYXR0ZXIoc2NlbmVDb250ZW50KTtcblxuXHRcdGlmICghZnJvbnRtYXR0ZXIuaWQgfHwgIWZyb250bWF0dGVyLnN0b3J5X2lkKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc2NlbmVJZCA9IGZyb250bWF0dGVyLmlkO1xuXHRcdGNvbnN0IHN0b3J5SWQgPSBmcm9udG1hdHRlci5zdG9yeV9pZDtcblx0XHRjb25zdCBjb250ZW50c0ZvbGRlclBhdGggPSBgJHtzdG9yeUZvbGRlclBhdGh9LzAzLWNvbnRlbnRzYDtcblxuXHRcdC8vIFBhcnNlIHByb3NlIGJsb2NrcyBmcm9tIHNjZW5lIGNvbnRlbnRcblx0XHRjb25zdCBzY2VuZVByb3NlID0gcGFyc2VTY2VuZVByb3NlKHNjZW5lQ29udGVudCk7XG5cdFx0XG5cdFx0aWYgKHNjZW5lUHJvc2Uuc2VjdGlvbnMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRyZXR1cm47IC8vIE5vIHByb3NlIGJsb2NrcyB0byBwcm9jZXNzXG5cdFx0fVxuXG5cdFx0Ly8gR2V0IG9yIGNyZWF0ZSBhIHRlbXBvcmFyeSBjaGFwdGVyIGZvciBzY2VuZS1sZXZlbCBwcm9zZSBibG9ja3Ncblx0XHRjb25zdCBjaGFwdGVycyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENoYXB0ZXJzKHN0b3J5SWQpO1xuXHRcdGxldCB0ZW1wQ2hhcHRlciA9IGNoYXB0ZXJzLmZpbmQoYyA9PiBjLnRpdGxlID09PSBcIlNjZW5lLUxldmVsIFByb3NlXCIpO1xuXHRcdFxuXHRcdGlmICghdGVtcENoYXB0ZXIpIHtcblx0XHRcdHRlbXBDaGFwdGVyID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ2hhcHRlcihzdG9yeUlkLCB7XG5cdFx0XHRcdG51bWJlcjogOTk5OCwgLy8gSGlnaCBudW1iZXIgdG8ga2VlcCBpdCBhdCB0aGUgZW5kXG5cdFx0XHRcdHRpdGxlOiBcIlNjZW5lLUxldmVsIFByb3NlXCIsXG5cdFx0XHRcdHN0YXR1czogXCJkcmFmdFwiLFxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IHByb3NlIGJsb2NrcyByZWZlcmVuY2VkIHRvIHRoaXMgc2NlbmVcblx0XHRjb25zdCByZW1vdGVDb250ZW50QmxvY2tzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrcyh0ZW1wQ2hhcHRlci5pZCk7XG5cdFx0Y29uc3QgcmVtb3RlQ29udGVudEJsb2Nrc01hcCA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2s+KCk7XG5cdFx0Zm9yIChjb25zdCBwYiBvZiByZW1vdGVDb250ZW50QmxvY2tzKSB7XG5cdFx0XHRyZW1vdGVDb250ZW50QmxvY2tzTWFwLnNldChwYi5pZCwgcGIpO1xuXHRcdH1cblxuXHRcdC8vIEdldCBiZWF0cyBmb3IgdGhpcyBzY2VuZVxuXHRcdGNvbnN0IGV4aXN0aW5nQmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0cyhzY2VuZUlkKTtcblx0XHRjb25zdCBiZWF0TWFwID0gbmV3IE1hcDxzdHJpbmcsIEJlYXQ+KCk7XG5cdFx0Y29uc3QgYmVhdElkTWFwID0gbmV3IE1hcDxzdHJpbmcsIEJlYXQ+KCk7XG5cdFx0Zm9yIChjb25zdCBiZWF0IG9mIGV4aXN0aW5nQmVhdHMpIHtcblx0XHRcdGNvbnN0IGZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRiZWF0TWFwLnNldChsaW5rTmFtZSwgYmVhdCk7XG5cdFx0XHRiZWF0SWRNYXAuc2V0KGJlYXQuaWQsIGJlYXQpO1xuXHRcdH1cblxuXHRcdC8vIFByb2Nlc3MgcHJvc2Ugc2VjdGlvbnNcblx0XHRsZXQgcHJvc2VPcmRlck51bSA9IDE7XG5cdFx0bGV0IGN1cnJlbnRCZWF0OiBCZWF0IHwgbnVsbCA9IG51bGw7XG5cdFx0Y29uc3QgdXBkYXRlZFNlY3Rpb25zOiBzdHJpbmdbXSA9IFtdO1xuXG5cdFx0Zm9yIChjb25zdCBzZWN0aW9uIG9mIHNjZW5lUHJvc2Uuc2VjdGlvbnMpIHtcblx0XHRcdGlmIChzZWN0aW9uLnR5cGUgPT09IFwiYmVhdFwiICYmIHNlY3Rpb24uYmVhdCkge1xuXHRcdFx0XHRjb25zdCB7IGJlYXQ6IHBhcnNlZEJlYXQgfSA9IHNlY3Rpb247XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAocGFyc2VkQmVhdC5saW5rTmFtZSkge1xuXHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYmVhdE1hcC5nZXQocGFyc2VkQmVhdC5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0XHRpZiAoIWN1cnJlbnRCZWF0KSB7XG5cdFx0XHRcdFx0XHRjdXJyZW50QmVhdCA9IGJlYXRJZE1hcC5nZXQocGFyc2VkQmVhdC5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdGlmIChjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoY3VycmVudEJlYXQpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRMaW5rTmFtZSA9IGJlYXRGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRjb25zdCBiZWF0RGlzcGxheVRleHQgPSBjdXJyZW50QmVhdC5vdXRjb21lXG5cdFx0XHRcdFx0XHQ/IGAke2N1cnJlbnRCZWF0LmludGVudH0gLT4gJHtjdXJyZW50QmVhdC5vdXRjb21lfWBcblx0XHRcdFx0XHRcdDogY3VycmVudEJlYXQuaW50ZW50O1xuXHRcdFx0XHRcdHVwZGF0ZWRTZWN0aW9ucy5wdXNoKGAjIyMgQmVhdDogW1ske2JlYXRMaW5rTmFtZX18JHtiZWF0RGlzcGxheVRleHR9XV1gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChzZWN0aW9uLnR5cGUgPT09IFwicHJvc2VcIiAmJiBzZWN0aW9uLnByb3NlKSB7XG5cdFx0XHRcdGNvbnN0IHsgcHJvc2U6IHBhcmFncmFwaCB9ID0gc2VjdGlvbjtcblx0XHRcdFx0XG5cdFx0XHRcdGxldCBsb2NhbENvbnRlbnRCbG9jazogQ29udGVudEJsb2NrIHwgbnVsbCA9IG51bGw7XG5cdFx0XHRcdGxldCByZW1vdGVDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayB8IG51bGwgPSBudWxsO1xuXG5cdFx0XHRcdGlmIChwYXJhZ3JhcGgubGlua05hbWUpIHtcblx0XHRcdFx0XHQvLyBTZWFyY2ggZm9yIGZpbGUgaW4gdHlwZSBzdWJmb2xkZXJzXG5cdFx0XHRcdFx0Y29uc3QgY29udGVudEJsb2NrRmlsZVBhdGggPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tGaWxlQnlMaW5rTmFtZShjb250ZW50c0ZvbGRlclBhdGgsIHBhcmFncmFwaC5saW5rTmFtZSk7XG5cdFx0XHRcdFx0aWYgKGNvbnRlbnRCbG9ja0ZpbGVQYXRoKSB7XG5cdFx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIucmVhZENvbnRlbnRCbG9ja0Zyb21GaWxlKGNvbnRlbnRCbG9ja0ZpbGVQYXRoKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIWxvY2FsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmluZENvbnRlbnRCbG9ja0J5Q29udGVudChjb250ZW50c0ZvbGRlclBhdGgsIHBhcmFncmFwaC5jb250ZW50KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAobG9jYWxDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdHJlbW90ZUNvbnRlbnRCbG9jayA9IHJlbW90ZUNvbnRlbnRCbG9ja3NNYXAuZ2V0KGxvY2FsQ29udGVudEJsb2NrLmlkKSB8fCBudWxsO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb25zdCBub3JtYWxpemVkQ29udGVudCA9IHBhcmFncmFwaC5jb250ZW50LnRyaW0oKTtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgW2lkLCByZW1vdGVQQl0gb2YgcmVtb3RlQ29udGVudEJsb2Nrc01hcC5lbnRyaWVzKCkpIHtcblx0XHRcdFx0XHRcdFx0aWYgKHJlbW90ZVBCLmNvbnRlbnQudHJpbSgpID09PSBub3JtYWxpemVkQ29udGVudCkge1xuXHRcdFx0XHRcdFx0XHRcdHJlbW90ZUNvbnRlbnRCbG9jayA9IHJlbW90ZVBCO1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGxvY2FsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5maW5kQ29udGVudEJsb2NrQnlDb250ZW50KGNvbnRlbnRzRm9sZGVyUGF0aCwgcGFyYWdyYXBoLmNvbnRlbnQpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGNvbnN0IG5vcm1hbGl6ZWRDb250ZW50ID0gcGFyYWdyYXBoLmNvbnRlbnQudHJpbSgpO1xuXHRcdFx0XHRcdGZvciAoY29uc3QgW2lkLCByZW1vdGVQQl0gb2YgcmVtb3RlQ29udGVudEJsb2Nrc01hcC5lbnRyaWVzKCkpIHtcblx0XHRcdFx0XHRcdGlmIChyZW1vdGVQQi5jb250ZW50LnRyaW0oKSA9PT0gbm9ybWFsaXplZENvbnRlbnQpIHtcblx0XHRcdFx0XHRcdFx0cmVtb3RlQ29udGVudEJsb2NrID0gcmVtb3RlUEI7XG5cdFx0XHRcdFx0XHRcdGlmICghbG9jYWxDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmluZENvbnRlbnRCbG9ja0J5SWQoY29udGVudHNGb2xkZXJQYXRoLCByZW1vdGVQQi5pZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3Qgc3RhdHVzID0gY29tcGFyZUNvbnRlbnRCbG9ja3MocGFyYWdyYXBoLCBsb2NhbENvbnRlbnRCbG9jaywgcmVtb3RlQ29udGVudEJsb2NrKTtcblxuXHRcdFx0XHRsZXQgZmluYWxDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jaztcblxuXHRcdFx0XHRzd2l0Y2ggKHN0YXR1cykge1xuXHRcdFx0XHRcdGNhc2UgXCJuZXdcIjoge1xuXHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QmxvY2sodGVtcENoYXB0ZXIhLmlkLCB7XG5cdFx0XHRcdFx0XHRcdG9yZGVyX251bTogcHJvc2VPcmRlck51bSsrLFxuXHRcdFx0XHRcdFx0XHRraW5kOiBcImZpbmFsXCIsXG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQ6IHBhcmFncmFwaC5jb250ZW50LFxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdC8vIENyZWF0ZSBmaWxlIGluIGNvcnJlY3QgdHlwZSBzdWJmb2xkZXJcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblxuXHRcdFx0XHRcdFx0Ly8gQ3JlYXRlIHJlZmVyZW5jZSB0byBzY2VuZVxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJzY2VuZVwiLCBzY2VuZUlkKTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gQWxzbyBjcmVhdGUgcmVmZXJlbmNlIHRvIGJlYXQgaWYgd2UncmUgdW5kZXIgb25lXG5cdFx0XHRcdFx0XHRpZiAoY3VycmVudEJlYXQpIHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJiZWF0XCIsIGN1cnJlbnRCZWF0LmlkKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoZmluYWxDb250ZW50QmxvY2spLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtsaW5rTmFtZX18JHtwYXJhZ3JhcGguY29udGVudH1dXWApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y2FzZSBcInVuY2hhbmdlZFwiOiB7XG5cdFx0XHRcdFx0XHRpZiAoIWxvY2FsQ29udGVudEJsb2NrICYmIHJlbW90ZUNvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IHJlbW90ZUNvbnRlbnRCbG9jaztcblx0XHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQ29udGVudEJsb2NrRmlsZShmaW5hbENvbnRlbnRCbG9jaywgZmlsZVBhdGgsIHVuZGVmaW5lZCk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGxvY2FsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChsb2NhbENvbnRlbnRCbG9jay5vcmRlcl9udW0gIT09IHByb3NlT3JkZXJOdW0pIHtcblx0XHRcdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnVwZGF0ZUNvbnRlbnRCbG9jayhsb2NhbENvbnRlbnRCbG9jay5pZCwge1xuXHRcdFx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBwcm9zZU9yZGVyTnVtKyssXG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IGxvY2FsQ29udGVudEJsb2NrO1xuXHRcdFx0XHRcdFx0XHRcdHByb3NlT3JkZXJOdW0rKztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSByZW1vdGVDb250ZW50QmxvY2shO1xuXHRcdFx0XHRcdFx0XHRwcm9zZU9yZGVyTnVtKys7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChwYXJhZ3JhcGgubGlua05hbWUpIHtcblx0XHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtwYXJhZ3JhcGgubGlua05hbWV9fCR7cGFyYWdyYXBoLmNvbnRlbnR9XV1gKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGZpbmFsQ29udGVudEJsb2NrKS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtsaW5rTmFtZX18JHtwYXJhZ3JhcGguY29udGVudH1dXWApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y2FzZSBcImxvY2FsX21vZGlmaWVkXCI6IHtcblx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQ29udGVudEJsb2NrKGxvY2FsQ29udGVudEJsb2NrIS5pZCwge1xuXHRcdFx0XHRcdFx0XHRjb250ZW50OiBwYXJhZ3JhcGguY29udGVudCxcblx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBwcm9zZU9yZGVyTnVtKyssXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoLCB1bmRlZmluZWQpO1xuXG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShmaW5hbENvbnRlbnRCbG9jaykucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lfXwke3BhcmFncmFwaC5jb250ZW50fV1dYCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwicmVtb3RlX21vZGlmaWVkXCI6IHtcblx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gcmVtb3RlQ29udGVudEJsb2NrITtcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblxuXHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoZmluYWxDb250ZW50QmxvY2spLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtsaW5rTmFtZX18JHtmaW5hbENvbnRlbnRCbG9jay5jb250ZW50fV1dYCk7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBTY2VuZSBwcm9zZSBibG9jayB1cGRhdGVkIGZyb20gcmVtb3RlOiAke2xpbmtOYW1lfWAsIDMwMDApO1xuXHRcdFx0XHRcdFx0cHJvc2VPcmRlck51bSsrO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y2FzZSBcImNvbmZsaWN0XCI6IHtcblx0XHRcdFx0XHRcdGNvbnN0IHJlc29sdXRpb24gPSBhd2FpdCB0aGlzLnJlc29sdmVDb25mbGljdChsb2NhbENvbnRlbnRCbG9jayEsIHJlbW90ZUNvbnRlbnRCbG9jayEpO1xuXG5cdFx0XHRcdFx0XHRsZXQgcmVzb2x2ZWRDb250ZW50OiBzdHJpbmc7XG5cdFx0XHRcdFx0XHRpZiAocmVzb2x1dGlvbi5yZXNvbHV0aW9uID09PSBcImxvY2FsXCIpIHtcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZWRDb250ZW50ID0gcGFyYWdyYXBoLmNvbnRlbnQ7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKHJlc29sdXRpb24ucmVzb2x1dGlvbiA9PT0gXCJyZW1vdGVcIikge1xuXHRcdFx0XHRcdFx0XHRyZXNvbHZlZENvbnRlbnQgPSByZW1vdGVDb250ZW50QmxvY2shLmNvbnRlbnQ7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRyZXNvbHZlZENvbnRlbnQgPSByZXNvbHV0aW9uLm1lcmdlZENvbnRlbnQgfHwgcGFyYWdyYXBoLmNvbnRlbnQ7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQ29udGVudEJsb2NrKGxvY2FsQ29udGVudEJsb2NrIS5pZCwge1xuXHRcdFx0XHRcdFx0XHRjb250ZW50OiByZXNvbHZlZENvbnRlbnQsXG5cdFx0XHRcdFx0XHRcdG9yZGVyX251bTogcHJvc2VPcmRlck51bSsrLFxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblxuXHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoZmluYWxDb250ZW50QmxvY2spLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtsaW5rTmFtZX18JHtyZXNvbHZlZENvbnRlbnR9XV1gKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFVwZGF0ZSBzY2VuZSBmaWxlIHdpdGggbGlua3MgaWYgdGhlcmUgYXJlIHVwZGF0ZWQgc2VjdGlvbnNcblx0XHRpZiAodXBkYXRlZFNlY3Rpb25zLmxlbmd0aCA+IDApIHtcblx0XHRcdC8vIEZpbmQgdGhlIGluc2VydGlvbiBwb2ludCBpbiB0aGUgc2NlbmUgZmlsZVxuXHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IHNjZW5lQ29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuXHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXJFbmQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXS5sZW5ndGggOiAwO1xuXHRcdFx0Y29uc3QgYWZ0ZXJGcm9udG1hdHRlciA9IHNjZW5lQ29udGVudC5zdWJzdHJpbmcoZnJvbnRtYXR0ZXJFbmQpLnRyaW0oKTtcblx0XHRcdFxuXHRcdFx0Ly8gRmluZCB0aGUgIyMgQmVhdHMgc2VjdGlvbiB0byBpbnNlcnQgYmVmb3JlIGl0XG5cdFx0XHRjb25zdCBiZWF0c1NlY3Rpb25NYXRjaCA9IGFmdGVyRnJvbnRtYXR0ZXIubWF0Y2goL1xcbiMjXFxzK0JlYXRzXFxzKlxcbi8pO1xuXHRcdFx0Y29uc3QgaW5zZXJ0aW9uUG9pbnQgPSBiZWF0c1NlY3Rpb25NYXRjaCBcblx0XHRcdFx0PyBmcm9udG1hdHRlckVuZCArIGFmdGVyRnJvbnRtYXR0ZXIuaW5kZXhPZihiZWF0c1NlY3Rpb25NYXRjaFswXSlcblx0XHRcdFx0OiBzY2VuZUNvbnRlbnQubGVuZ3RoO1xuXHRcdFx0XG5cdFx0XHQvLyBCdWlsZCB1cGRhdGVkIGNvbnRlbnQgd2l0aCBwcm9zZSBzZWN0aW9uc1xuXHRcdFx0Y29uc3QgYmVmb3JlUHJvc2UgPSBzY2VuZUNvbnRlbnQuc3Vic3RyaW5nKDAsIGluc2VydGlvblBvaW50KS50cmltRW5kKCk7XG5cdFx0XHRjb25zdCBhZnRlclByb3NlID0gc2NlbmVDb250ZW50LnN1YnN0cmluZyhpbnNlcnRpb25Qb2ludCk7XG5cdFx0XHRcblx0XHRcdGNvbnN0IHVwZGF0ZWRDb250ZW50ID0gYCR7YmVmb3JlUHJvc2V9XFxuXFxuJHt1cGRhdGVkU2VjdGlvbnMuam9pbihcIlxcblxcblwiKX1cXG4ke2FmdGVyUHJvc2V9YDtcblx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5tb2RpZnkoZmlsZSwgdXBkYXRlZENvbnRlbnQpO1xuXHRcdH1cblx0fVxuXG5cdC8vIFB1c2ggcHJvc2UgYmxvY2tzIGZyb20gYSBiZWF0IGZpbGVcblx0cHJpdmF0ZSBhc3luYyBwdXNoQmVhdENvbnRlbnRCbG9ja3MoYmVhdEZpbGVQYXRoOiBzdHJpbmcsIHN0b3J5Rm9sZGVyUGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Ly8gUmVhZCBiZWF0IGZpbGVcblx0XHRjb25zdCBmaWxlID0gdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLmdldEFic3RyYWN0RmlsZUJ5UGF0aChiZWF0RmlsZVBhdGgpO1xuXHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBiZWF0Q29udGVudCA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5yZWFkKGZpbGUpO1xuXHRcdGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5maWxlTWFuYWdlci5wYXJzZUZyb250bWF0dGVyKGJlYXRDb250ZW50KTtcblxuXHRcdGlmICghZnJvbnRtYXR0ZXIuaWQgfHwgIWZyb250bWF0dGVyLnNjZW5lX2lkKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgYmVhdElkID0gZnJvbnRtYXR0ZXIuaWQ7XG5cdFx0Y29uc3Qgc2NlbmVJZCA9IGZyb250bWF0dGVyLnNjZW5lX2lkO1xuXHRcdGNvbnN0IGNvbnRlbnRzRm9sZGVyUGF0aCA9IGAke3N0b3J5Rm9sZGVyUGF0aH0vMDMtY29udGVudHNgO1xuXG5cdFx0Ly8gUGFyc2UgcHJvc2UgYmxvY2tzIGZyb20gYmVhdCBjb250ZW50XG5cdFx0Y29uc3QgYmVhdFByb3NlID0gcGFyc2VCZWF0UHJvc2UoYmVhdENvbnRlbnQpO1xuXHRcdFxuXHRcdGlmIChiZWF0UHJvc2Uuc2VjdGlvbnMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRyZXR1cm47IC8vIE5vIHByb3NlIGJsb2NrcyB0byBwcm9jZXNzXG5cdFx0fVxuXG5cdFx0Ly8gR2V0IHRoZSBzY2VuZSB0byBmaW5kIHN0b3J5X2lkIGFuZCBjaGFwdGVyX2lkXG5cdFx0Y29uc3Qgc2NlbmUgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRTY2VuZShzY2VuZUlkKTtcblx0XHRpZiAoIXNjZW5lKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3RvcnlJZCA9IHNjZW5lLnN0b3J5X2lkO1xuXG5cdFx0Ly8gR2V0IG9yIGNyZWF0ZSBhIHRlbXBvcmFyeSBjaGFwdGVyIGZvciBiZWF0LWxldmVsIHByb3NlIGJsb2Nrc1xuXHRcdGNvbnN0IGNoYXB0ZXJzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q2hhcHRlcnMoc3RvcnlJZCk7XG5cdFx0bGV0IHRlbXBDaGFwdGVyID0gY2hhcHRlcnMuZmluZChjID0+IGMudGl0bGUgPT09IFwiQmVhdC1MZXZlbCBQcm9zZVwiKTtcblx0XHRcblx0XHRpZiAoIXRlbXBDaGFwdGVyKSB7XG5cdFx0XHR0ZW1wQ2hhcHRlciA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNoYXB0ZXIoc3RvcnlJZCwge1xuXHRcdFx0XHRudW1iZXI6IDk5OTcsIC8vIEhpZ2ggbnVtYmVyIHRvIGtlZXAgaXQgYXQgdGhlIGVuZFxuXHRcdFx0XHR0aXRsZTogXCJCZWF0LUxldmVsIFByb3NlXCIsXG5cdFx0XHRcdHN0YXR1czogXCJkcmFmdFwiLFxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IGV4aXN0aW5nIHJlbW90ZSBwcm9zZSBibG9ja3Ncblx0XHRjb25zdCByZW1vdGVDb250ZW50QmxvY2tzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrcyh0ZW1wQ2hhcHRlci5pZCk7XG5cdFx0Y29uc3QgcmVtb3RlQ29udGVudEJsb2Nrc01hcCA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2s+KCk7XG5cdFx0Zm9yIChjb25zdCBwYiBvZiByZW1vdGVDb250ZW50QmxvY2tzKSB7XG5cdFx0XHRyZW1vdGVDb250ZW50QmxvY2tzTWFwLnNldChwYi5pZCwgcGIpO1xuXHRcdH1cblxuXHRcdC8vIFByb2Nlc3MgcHJvc2Ugc2VjdGlvbnNcblx0XHRsZXQgcHJvc2VPcmRlck51bSA9IDE7XG5cdFx0Y29uc3QgdXBkYXRlZFNlY3Rpb25zOiBzdHJpbmdbXSA9IFtdO1xuXG5cdFx0Ly8gQWRkIGJlYXQgaGVhZGVyXG5cdFx0Y29uc3QgYmVhdCA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXQoYmVhdElkKTtcblx0XHRpZiAoYmVhdCkge1xuXHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdGNvbnN0IGJlYXRMaW5rTmFtZSA9IGJlYXRGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdGNvbnN0IGJlYXREaXNwbGF5VGV4dCA9IGJlYXQub3V0Y29tZVxuXHRcdFx0XHQ/IGAke2JlYXQuaW50ZW50fSAtPiAke2JlYXQub3V0Y29tZX1gXG5cdFx0XHRcdDogYmVhdC5pbnRlbnQ7XG5cdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgIyMgQmVhdDogW1ske2JlYXRMaW5rTmFtZX18JHtiZWF0RGlzcGxheVRleHR9XV1gKTtcblx0XHR9XG5cblx0XHRmb3IgKGNvbnN0IHNlY3Rpb24gb2YgYmVhdFByb3NlLnNlY3Rpb25zKSB7XG5cdFx0XHRpZiAoc2VjdGlvbi50eXBlID09PSBcInByb3NlXCIgJiYgc2VjdGlvbi5wcm9zZSkge1xuXHRcdFx0XHRjb25zdCB7IHByb3NlOiBwYXJhZ3JhcGggfSA9IHNlY3Rpb247XG5cdFx0XHRcdFxuXHRcdFx0XHRsZXQgbG9jYWxDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayB8IG51bGwgPSBudWxsO1xuXHRcdFx0XHRsZXQgcmVtb3RlQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2sgfCBudWxsID0gbnVsbDtcblxuXHRcdFx0XHRpZiAocGFyYWdyYXBoLmxpbmtOYW1lKSB7XG5cdFx0XHRcdFx0Ly8gU2VhcmNoIGZvciBmaWxlIGluIHR5cGUgc3ViZm9sZGVyc1xuXHRcdFx0XHRcdGNvbnN0IGNvbnRlbnRCbG9ja0ZpbGVQYXRoID0gYXdhaXQgdGhpcy5maW5kQ29udGVudEJsb2NrRmlsZUJ5TGlua05hbWUoY29udGVudHNGb2xkZXJQYXRoLCBwYXJhZ3JhcGgubGlua05hbWUpO1xuXHRcdFx0XHRcdGlmIChjb250ZW50QmxvY2tGaWxlUGF0aCkge1xuXHRcdFx0XHRcdFx0bG9jYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLnJlYWRDb250ZW50QmxvY2tGcm9tRmlsZShjb250ZW50QmxvY2tGaWxlUGF0aCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCFsb2NhbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0bG9jYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tCeUNvbnRlbnQoY29udGVudHNGb2xkZXJQYXRoLCBwYXJhZ3JhcGguY29udGVudCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGxvY2FsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRyZW1vdGVDb250ZW50QmxvY2sgPSByZW1vdGVDb250ZW50QmxvY2tzTWFwLmdldChsb2NhbENvbnRlbnRCbG9jay5pZCkgfHwgbnVsbDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29uc3Qgbm9ybWFsaXplZENvbnRlbnQgPSBwYXJhZ3JhcGguY29udGVudC50cmltKCk7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IFssIHJlbW90ZVBCXSBvZiByZW1vdGVDb250ZW50QmxvY2tzTWFwLmVudHJpZXMoKSkge1xuXHRcdFx0XHRcdFx0XHRpZiAocmVtb3RlUEIuY29udGVudC50cmltKCkgPT09IG5vcm1hbGl6ZWRDb250ZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVtb3RlQ29udGVudEJsb2NrID0gcmVtb3RlUEI7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bG9jYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tCeUNvbnRlbnQoY29udGVudHNGb2xkZXJQYXRoLCBwYXJhZ3JhcGguY29udGVudCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29uc3Qgbm9ybWFsaXplZENvbnRlbnQgPSBwYXJhZ3JhcGguY29udGVudC50cmltKCk7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBbLCByZW1vdGVQQl0gb2YgcmVtb3RlQ29udGVudEJsb2Nrc01hcC5lbnRyaWVzKCkpIHtcblx0XHRcdFx0XHRcdGlmIChyZW1vdGVQQi5jb250ZW50LnRyaW0oKSA9PT0gbm9ybWFsaXplZENvbnRlbnQpIHtcblx0XHRcdFx0XHRcdFx0cmVtb3RlQ29udGVudEJsb2NrID0gcmVtb3RlUEI7XG5cdFx0XHRcdFx0XHRcdGlmICghbG9jYWxDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmluZENvbnRlbnRCbG9ja0J5SWQoY29udGVudHNGb2xkZXJQYXRoLCByZW1vdGVQQi5pZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3Qgc3RhdHVzID0gY29tcGFyZUNvbnRlbnRCbG9ja3MocGFyYWdyYXBoLCBsb2NhbENvbnRlbnRCbG9jaywgcmVtb3RlQ29udGVudEJsb2NrKTtcblxuXHRcdFx0XHRsZXQgZmluYWxDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jaztcblxuXHRcdFx0XHRzd2l0Y2ggKHN0YXR1cykge1xuXHRcdFx0XHRcdGNhc2UgXCJuZXdcIjoge1xuXHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QmxvY2sodGVtcENoYXB0ZXIhLmlkLCB7XG5cdFx0XHRcdFx0XHRcdG9yZGVyX251bTogcHJvc2VPcmRlck51bSsrLFxuXHRcdFx0XHRcdFx0XHRraW5kOiBcImZpbmFsXCIsXG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQ6IHBhcmFncmFwaC5jb250ZW50LFxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdC8vIENyZWF0ZSBmaWxlIGluIGNvcnJlY3QgdHlwZSBzdWJmb2xkZXJcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblxuXHRcdFx0XHRcdFx0Ly8gQ3JlYXRlIHJlZmVyZW5jZSB0byBzY2VuZSBhbmQgYmVhdFxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJzY2VuZVwiLCBzY2VuZUlkKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRBbmNob3IoZmluYWxDb250ZW50QmxvY2suaWQsIFwiYmVhdFwiLCBiZWF0SWQpO1xuXG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShmaW5hbENvbnRlbnRCbG9jaykucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lfXwke3BhcmFncmFwaC5jb250ZW50fV1dYCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwidW5jaGFuZ2VkXCI6IHtcblx0XHRcdFx0XHRcdGlmICghbG9jYWxDb250ZW50QmxvY2sgJiYgcmVtb3RlQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gcmVtb3RlQ29udGVudEJsb2NrO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGZpbmFsQ29udGVudEJsb2NrKS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtsaW5rTmFtZX18JHtyZW1vdGVDb250ZW50QmxvY2suY29udGVudH1dXWApO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChsb2NhbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IGxvY2FsQ29udGVudEJsb2NrO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShmaW5hbENvbnRlbnRCbG9jaykucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRTZWN0aW9ucy5wdXNoKGBbWyR7bGlua05hbWV9fCR7cGFyYWdyYXBoLmNvbnRlbnR9XV1gKTtcblx0XHRcdFx0XHRcdFx0cHJvc2VPcmRlck51bSsrO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0cHJvc2VPcmRlck51bSsrO1xuXHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhc2UgXCJsb2NhbF9tb2RpZmllZFwiOiB7XG5cdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnVwZGF0ZUNvbnRlbnRCbG9jayhsb2NhbENvbnRlbnRCbG9jayEuaWQsIHtcblx0XHRcdFx0XHRcdFx0Y29udGVudDogcGFyYWdyYXBoLmNvbnRlbnQsXG5cdFx0XHRcdFx0XHRcdG9yZGVyX251bTogcHJvc2VPcmRlck51bSsrLFxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblxuXHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoZmluYWxDb250ZW50QmxvY2spLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtsaW5rTmFtZX18JHtwYXJhZ3JhcGguY29udGVudH1dXWApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y2FzZSBcInJlbW90ZV9tb2RpZmllZFwiOiB7XG5cdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IHJlbW90ZUNvbnRlbnRCbG9jayE7XG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQ29udGVudEJsb2NrRmlsZShmaW5hbENvbnRlbnRCbG9jaywgZmlsZVBhdGgsIHVuZGVmaW5lZCk7XG5cdFx0XHRcdFx0XHRwcm9zZU9yZGVyTnVtKys7XG5cblx0XHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGZpbmFsQ29udGVudEJsb2NrKS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRcdHVwZGF0ZWRTZWN0aW9ucy5wdXNoKGBbWyR7bGlua05hbWV9fCR7cmVtb3RlQ29udGVudEJsb2NrIS5jb250ZW50fV1dYCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwiY29uZmxpY3RcIjoge1xuXHRcdFx0XHRcdFx0Y29uc3QgcmVzb2x1dGlvbiA9IGF3YWl0IHRoaXMucmVzb2x2ZUNvbmZsaWN0KGxvY2FsQ29udGVudEJsb2NrISwgcmVtb3RlQ29udGVudEJsb2NrISk7XG5cblx0XHRcdFx0XHRcdGxldCByZXNvbHZlZENvbnRlbnQ6IHN0cmluZztcblx0XHRcdFx0XHRcdGlmIChyZXNvbHV0aW9uLnJlc29sdXRpb24gPT09IFwibG9jYWxcIikge1xuXHRcdFx0XHRcdFx0XHRyZXNvbHZlZENvbnRlbnQgPSBwYXJhZ3JhcGguY29udGVudDtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAocmVzb2x1dGlvbi5yZXNvbHV0aW9uID09PSBcInJlbW90ZVwiKSB7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmVkQ29udGVudCA9IHJlbW90ZUNvbnRlbnRCbG9jayEuY29udGVudDtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmVkQ29udGVudCA9IHJlc29sdXRpb24ubWVyZ2VkQ29udGVudCB8fCBwYXJhZ3JhcGguY29udGVudDtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVDb250ZW50QmxvY2sobG9jYWxDb250ZW50QmxvY2shLmlkLCB7XG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQ6IHJlc29sdmVkQ29udGVudCxcblx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBwcm9zZU9yZGVyTnVtKyssXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoLCB1bmRlZmluZWQpO1xuXG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShmaW5hbENvbnRlbnRCbG9jaykucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lfXwke3Jlc29sdmVkQ29udGVudH1dXWApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gVXBkYXRlIGJlYXQgZmlsZSB3aXRoIGxpbmtzIGlmIHRoZXJlIGFyZSB1cGRhdGVkIHNlY3Rpb25zIChtb3JlIHRoYW4ganVzdCB0aGUgaGVhZGVyKVxuXHRcdGlmICh1cGRhdGVkU2VjdGlvbnMubGVuZ3RoID4gMSkge1xuXHRcdFx0Ly8gRmluZCB0aGUgaW5zZXJ0aW9uIHBvaW50IGluIHRoZSBiZWF0IGZpbGUgKGFmdGVyICMgQmVhdCBoZWFkZXIgYW5kIGludGVudC9vdXRjb21lKVxuXHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IGJlYXRDb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XG5cdFx0XHRjb25zdCBmcm9udG1hdHRlckVuZCA9IGZyb250bWF0dGVyTWF0Y2ggPyBmcm9udG1hdHRlck1hdGNoWzBdLmxlbmd0aCA6IDA7XG5cdFx0XHRjb25zdCBhZnRlckZyb250bWF0dGVyID0gYmVhdENvbnRlbnQuc3Vic3RyaW5nKGZyb250bWF0dGVyRW5kKS50cmltKCk7XG5cdFx0XHRcblx0XHRcdC8vIEZpbmQgdGhlICMjIEJlYXQ6IHNlY3Rpb24gdG8gcmVwbGFjZSBpdFxuXHRcdFx0Y29uc3QgYmVhdFNlY3Rpb25NYXRjaCA9IGFmdGVyRnJvbnRtYXR0ZXIubWF0Y2goLyMjXFxzK0JlYXQ6XFxzKi4rW1xcc1xcU10qLyk7XG5cdFx0XHRcblx0XHRcdGlmIChiZWF0U2VjdGlvbk1hdGNoKSB7XG5cdFx0XHRcdC8vIFJlcGxhY2UgdGhlIGVudGlyZSAjIyBCZWF0IHNlY3Rpb25cblx0XHRcdFx0Y29uc3QgYmVmb3JlQmVhdFNlY3Rpb24gPSBiZWF0Q29udGVudC5zdWJzdHJpbmcoMCwgZnJvbnRtYXR0ZXJFbmQgKyBhZnRlckZyb250bWF0dGVyLmluZGV4T2YoYmVhdFNlY3Rpb25NYXRjaFswXSkpO1xuXHRcdFx0XHRjb25zdCB1cGRhdGVkQ29udGVudCA9IGAke2JlZm9yZUJlYXRTZWN0aW9uLnRyaW1FbmQoKX1cXG5cXG4ke3VwZGF0ZWRTZWN0aW9ucy5qb2luKFwiXFxuXFxuXCIpfVxcbmA7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5tb2RpZnkoZmlsZSwgdXBkYXRlZENvbnRlbnQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gQXBwZW5kICMjIEJlYXQgc2VjdGlvblxuXHRcdFx0XHRjb25zdCB1cGRhdGVkQ29udGVudCA9IGAke2JlYXRDb250ZW50LnRyaW1FbmQoKX1cXG5cXG4ke3VwZGF0ZWRTZWN0aW9ucy5qb2luKFwiXFxuXFxuXCIpfVxcbmA7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5tb2RpZnkoZmlsZSwgdXBkYXRlZENvbnRlbnQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFByb2Nlc3MgdGhlIFwiIyMgT3JwaGFuIFNjZW5lc1wiIGxpc3QgYW5kIHVwZGF0ZSBvcnBoYW4gc2NlbmVzIG9yZGVyXG5cdHByaXZhdGUgYXN5bmMgcHJvY2Vzc09ycGhhblNjZW5lc0xpc3QoXG5cdFx0bGlzdDogeyBpdGVtczogUGFyc2VkU2NlbmVCZWF0TGlzdEl0ZW1bXSB9LFxuXHRcdHN0b3J5SWQ6IHN0cmluZ1xuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBHZXQgYWxsIHNjZW5lcyBmb3IgdGhpcyBzdG9yeVxuXHRcdGNvbnN0IGFsbFNjZW5lcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFNjZW5lc0J5U3Rvcnkoc3RvcnlJZCk7XG5cdFx0Y29uc3Qgc2NlbmVNYXAgPSBuZXcgTWFwPHN0cmluZywgU2NlbmU+KCk7IC8vIE1hcCBieSBsaW5rIG5hbWVcblx0XHRjb25zdCBzY2VuZUlkTWFwID0gbmV3IE1hcDxzdHJpbmcsIFNjZW5lPigpOyAvLyBNYXAgYnkgSURcblx0XHRcblx0XHQvLyBGaWx0ZXIgdG8gb25seSBvcnBoYW4gc2NlbmVzICh3aXRob3V0IGNoYXB0ZXJfaWQpXG5cdFx0Y29uc3Qgb3JwaGFuU2NlbmVzID0gYWxsU2NlbmVzLmZpbHRlcihzID0+ICFzLmNoYXB0ZXJfaWQpO1xuXHRcdFxuXHRcdGZvciAoY29uc3Qgc2NlbmUgb2Ygb3JwaGFuU2NlbmVzKSB7XG5cdFx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lKTtcblx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRzY2VuZU1hcC5zZXQobGlua05hbWUsIHNjZW5lKTtcblx0XHRcdHNjZW5lSWRNYXAuc2V0KHNjZW5lLmlkLCBzY2VuZSk7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IGFsbCBiZWF0cyBmb3Igb3JwaGFuIHNjZW5lc1xuXHRcdGNvbnN0IGJlYXRNYXAgPSBuZXcgTWFwPHN0cmluZywgQmVhdD4oKTsgLy8gTWFwIGJ5IGxpbmsgbmFtZVxuXHRcdGNvbnN0IGJlYXRJZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBCZWF0PigpOyAvLyBNYXAgYnkgSURcblx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIG9ycGhhblNjZW5lcykge1xuXHRcdFx0Y29uc3QgYmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0cyhzY2VuZS5pZCk7XG5cdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRiZWF0TWFwLnNldChsaW5rTmFtZSwgYmVhdCk7XG5cdFx0XHRcdGJlYXRJZE1hcC5zZXQoYmVhdC5pZCwgYmVhdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bGV0IGN1cnJlbnRTY2VuZTogU2NlbmUgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgc2NlbmVPcmRlck51bSA9IDE7IC8vIFN0YXJ0IGZyb20gMSwgd2lsbCBpbmNyZW1lbnQgYXMgd2UgcHJvY2Vzc1xuXHRcdGNvbnN0IGJlYXRPcmRlck51bXMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpOyAvLyBUcmFjayBvcmRlcl9udW0gcGVyIHNjZW5lXG5cblx0XHQvLyBQcm9jZXNzIGxpc3QgaXRlbXMgLSBvcmRlciBtYXR0ZXJzIVxuXHRcdGZvciAoY29uc3QgaXRlbSBvZiBsaXN0Lml0ZW1zKSB7XG5cdFx0XHRpZiAoaXRlbS50eXBlID09PSBcInNjZW5lXCIpIHtcblx0XHRcdFx0Ly8gUGFyc2Ugc2NlbmUgZGlzcGxheSB0ZXh0XG5cdFx0XHRcdC8vIENhbiBiZTogXCJTY2VuZSBOOiBnb2FsIC0gdGltZVJlZlwiLCBcImdvYWwgLSB0aW1lUmVmXCIsIG9yIGp1c3QgXCJnb2FsXCJcblx0XHRcdFx0bGV0IGdvYWw6IHN0cmluZztcblx0XHRcdFx0bGV0IHRpbWVSZWY6IHN0cmluZyA9IFwiXCI7XG5cblx0XHRcdFx0Y29uc3Qgc2NlbmVNYXRjaCA9IGl0ZW0uZGlzcGxheVRleHQubWF0Y2goL1NjZW5lXFxzK1xcZCs6XFxzKiguKykvKTtcblx0XHRcdFx0aWYgKHNjZW5lTWF0Y2gpIHtcblx0XHRcdFx0XHQvLyBGb3JtYXQ6IFwiU2NlbmUgTjogZ29hbCAtIHRpbWVSZWZcIiBvciBcIlNjZW5lIE46IGdvYWxcIlxuXHRcdFx0XHRcdGNvbnN0IHNjZW5lVGV4dCA9IHNjZW5lTWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0XHRcdGNvbnN0IHBhcnRzID0gc2NlbmVUZXh0LnNwbGl0KC9cXHMqLVxccyovKTtcblx0XHRcdFx0XHRnb2FsID0gcGFydHNbMF0udHJpbSgpO1xuXHRcdFx0XHRcdHRpbWVSZWYgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbihcIiAtIFwiKS50cmltKCkgOiBcIlwiO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIEZvcm1hdDogXCJnb2FsIC0gdGltZVJlZlwiIG9yIGp1c3QgXCJnb2FsXCJcblx0XHRcdFx0XHRjb25zdCBwYXJ0cyA9IGl0ZW0uZGlzcGxheVRleHQuc3BsaXQoL1xccyotXFxzKi8pO1xuXHRcdFx0XHRcdGdvYWwgPSBwYXJ0c1swXS50cmltKCk7XG5cdFx0XHRcdFx0dGltZVJlZiA9IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0gXCIpLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoaXRlbS5saW5rTmFtZSkge1xuXHRcdFx0XHRcdC8vIFNjZW5lIGV4aXN0cyAtIGZpbmQgaXRcblx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBzY2VuZU1hcC5nZXQoaXRlbS5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0XHRpZiAoIWN1cnJlbnRTY2VuZSkge1xuXHRcdFx0XHRcdFx0Ly8gVHJ5IHRvIGZpbmQgYnkgSUQgaWYgbGlua05hbWUgaXMgYWN0dWFsbHkgYW4gSURcblx0XHRcdFx0XHRcdGN1cnJlbnRTY2VuZSA9IHNjZW5lSWRNYXAuZ2V0KGl0ZW0ubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIG9yZGVyX251bSBvciBjb250ZW50IG5lZWRzIHRvIGJlIHVwZGF0ZWRcblx0XHRcdFx0XHRcdGNvbnN0IG5lZWRzT3JkZXJVcGRhdGUgPSBjdXJyZW50U2NlbmUub3JkZXJfbnVtICE9PSBzY2VuZU9yZGVyTnVtO1xuXHRcdFx0XHRcdFx0Y29uc3QgbmVlZHNDb250ZW50VXBkYXRlID0gZ29hbCAhPT0gY3VycmVudFNjZW5lLmdvYWwgfHwgdGltZVJlZiAhPT0gY3VycmVudFNjZW5lLnRpbWVfcmVmO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRpZiAobmVlZHNPcmRlclVwZGF0ZSB8fCBuZWVkc0NvbnRlbnRVcGRhdGUpIHtcblx0XHRcdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlU2NlbmUoY3VycmVudFNjZW5lLmlkLCB7XG5cdFx0XHRcdFx0XHRcdFx0Z29hbCxcblx0XHRcdFx0XHRcdFx0XHR0aW1lX3JlZjogdGltZVJlZixcblx0XHRcdFx0XHRcdFx0XHRvcmRlcl9udW06IHNjZW5lT3JkZXJOdW0sXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvLyBJbml0aWFsaXplIGJlYXQgb3JkZXIgZm9yIHRoaXMgc2NlbmVcblx0XHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nQmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0cyhjdXJyZW50U2NlbmUuaWQpO1xuXHRcdFx0XHRcdFx0aWYgKGV4aXN0aW5nQmVhdHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdGJlYXRPcmRlck51bXMuc2V0KGN1cnJlbnRTY2VuZS5pZCwgMSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBtYXhPcmRlck51bSA9IE1hdGgubWF4KC4uLmV4aXN0aW5nQmVhdHMubWFwKGIgPT4gYi5vcmRlcl9udW0pKTtcblx0XHRcdFx0XHRcdFx0YmVhdE9yZGVyTnVtcy5zZXQoY3VycmVudFNjZW5lLmlkLCBtYXhPcmRlck51bSArIDEpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBDcmVhdGUgbmV3IG9ycGhhbiBzY2VuZVxuXHRcdFx0XHRcdGN1cnJlbnRTY2VuZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZVNjZW5lKHtcblx0XHRcdFx0XHRcdHN0b3J5X2lkOiBzdG9yeUlkLFxuXHRcdFx0XHRcdFx0Y2hhcHRlcl9pZDogbnVsbCwgLy8gT3JwaGFuIHNjZW5lXG5cdFx0XHRcdFx0XHRvcmRlcl9udW06IHNjZW5lT3JkZXJOdW0sXG5cdFx0XHRcdFx0XHRnb2FsLFxuXHRcdFx0XHRcdFx0dGltZV9yZWY6IHRpbWVSZWYsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gVXBkYXRlIG1hcHNcblx0XHRcdFx0XHRjb25zdCBzY2VuZUZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZVNjZW5lRmlsZU5hbWUoY3VycmVudFNjZW5lKTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUxpbmtOYW1lID0gc2NlbmVGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRzY2VuZU1hcC5zZXQoc2NlbmVMaW5rTmFtZSwgY3VycmVudFNjZW5lKTtcblx0XHRcdFx0XHRzY2VuZUlkTWFwLnNldChjdXJyZW50U2NlbmUuaWQsIGN1cnJlbnRTY2VuZSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gSW5pdGlhbGl6ZSBiZWF0IG9yZGVyIGZvciBuZXcgc2NlbmUgKHN0YXJ0cyBhdCAxKVxuXHRcdFx0XHRcdGJlYXRPcmRlck51bXMuc2V0KGN1cnJlbnRTY2VuZS5pZCwgMSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdHNjZW5lT3JkZXJOdW0rKztcblx0XHRcdH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSBcImJlYXRcIiAmJiBjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0Ly8gUGFyc2UgYmVhdCBkaXNwbGF5IHRleHRcblx0XHRcdFx0Ly8gQ2FuIGJlOiBcIkJlYXQgTjogaW50ZW50IC0+IG91dGNvbWVcIiwgXCJpbnRlbnQgLT4gb3V0Y29tZVwiLCBvciBqdXN0IFwiaW50ZW50XCJcblx0XHRcdFx0bGV0IGludGVudDogc3RyaW5nO1xuXHRcdFx0XHRsZXQgb3V0Y29tZTogc3RyaW5nID0gXCJcIjtcblxuXHRcdFx0XHRjb25zdCBiZWF0TWF0Y2ggPSBpdGVtLmRpc3BsYXlUZXh0Lm1hdGNoKC9CZWF0XFxzK1xcZCs6XFxzKiguKykvKTtcblx0XHRcdFx0aWYgKGJlYXRNYXRjaCkge1xuXHRcdFx0XHRcdC8vIEZvcm1hdDogXCJCZWF0IE46IGludGVudCAtPiBvdXRjb21lXCIgb3IgXCJCZWF0IE46IGludGVudFwiXG5cdFx0XHRcdFx0Y29uc3QgYmVhdFRleHQgPSBiZWF0TWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0XHRcdGNvbnN0IHBhcnRzID0gYmVhdFRleHQuc3BsaXQoL1xccyotPlxccyovKTtcblx0XHRcdFx0XHRpbnRlbnQgPSBwYXJ0c1swXS50cmltKCk7XG5cdFx0XHRcdFx0b3V0Y29tZSA9IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0+IFwiKS50cmltKCkgOiBcIlwiO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIEZvcm1hdDogXCJpbnRlbnQgLT4gb3V0Y29tZVwiIG9yIGp1c3QgXCJpbnRlbnRcIlxuXHRcdFx0XHRcdGNvbnN0IHBhcnRzID0gaXRlbS5kaXNwbGF5VGV4dC5zcGxpdCgvXFxzKi0+XFxzKi8pO1xuXHRcdFx0XHRcdGludGVudCA9IHBhcnRzWzBdLnRyaW0oKTtcblx0XHRcdFx0XHRvdXRjb21lID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLT4gXCIpLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBHZXQgY3VycmVudCBiZWF0IG9yZGVyX251bSBmb3IgdGhpcyBzY2VuZVxuXHRcdFx0XHRjb25zdCBjdXJyZW50QmVhdE9yZGVyTnVtID0gYmVhdE9yZGVyTnVtcy5nZXQoY3VycmVudFNjZW5lLmlkKSB8fCAxO1xuXG5cdFx0XHRcdGlmIChpdGVtLmxpbmtOYW1lKSB7XG5cdFx0XHRcdFx0Ly8gQmVhdCBleGlzdHMgLSBmaW5kIGl0XG5cdFx0XHRcdFx0bGV0IGN1cnJlbnRCZWF0ID0gYmVhdE1hcC5nZXQoaXRlbS5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0XHRpZiAoIWN1cnJlbnRCZWF0KSB7XG5cdFx0XHRcdFx0XHQvLyBUcnkgdG8gZmluZCBieSBJRCBpZiBsaW5rTmFtZSBpcyBhY3R1YWxseSBhbiBJRFxuXHRcdFx0XHRcdFx0Y3VycmVudEJlYXQgPSBiZWF0SWRNYXAuZ2V0KGl0ZW0ubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgb3JkZXJfbnVtIG9yIGNvbnRlbnQgbmVlZHMgdG8gYmUgdXBkYXRlZFxuXHRcdFx0XHRcdFx0Y29uc3QgbmVlZHNPcmRlclVwZGF0ZSA9IGN1cnJlbnRCZWF0Lm9yZGVyX251bSAhPT0gY3VycmVudEJlYXRPcmRlck51bTtcblx0XHRcdFx0XHRcdGNvbnN0IG5lZWRzQ29udGVudFVwZGF0ZSA9IGludGVudCAhPT0gY3VycmVudEJlYXQuaW50ZW50IHx8IG91dGNvbWUgIT09IGN1cnJlbnRCZWF0Lm91dGNvbWU7XG5cdFx0XHRcdFx0XHRjb25zdCBuZWVkc1NjZW5lVXBkYXRlID0gY3VycmVudEJlYXQuc2NlbmVfaWQgIT09IGN1cnJlbnRTY2VuZS5pZDtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0aWYgKG5lZWRzT3JkZXJVcGRhdGUgfHwgbmVlZHNDb250ZW50VXBkYXRlIHx8IG5lZWRzU2NlbmVVcGRhdGUpIHtcblx0XHRcdFx0XHRcdFx0Y3VycmVudEJlYXQgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVCZWF0KGN1cnJlbnRCZWF0LmlkLCB7XG5cdFx0XHRcdFx0XHRcdFx0aW50ZW50LFxuXHRcdFx0XHRcdFx0XHRcdG91dGNvbWUsXG5cdFx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBjdXJyZW50QmVhdE9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0XHRcdHNjZW5lX2lkOiBjdXJyZW50U2NlbmUuaWQsXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBDcmVhdGUgbmV3IGJlYXRcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVCZWF0KHtcblx0XHRcdFx0XHRcdHNjZW5lX2lkOiBjdXJyZW50U2NlbmUuaWQsXG5cdFx0XHRcdFx0XHRvcmRlcl9udW06IGN1cnJlbnRCZWF0T3JkZXJOdW0sXG5cdFx0XHRcdFx0XHR0eXBlOiBcInNldHVwXCIsIC8vIERlZmF1bHQgdHlwZVxuXHRcdFx0XHRcdFx0aW50ZW50LFxuXHRcdFx0XHRcdFx0b3V0Y29tZSxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0YmVhdE9yZGVyTnVtcy5zZXQoY3VycmVudFNjZW5lLmlkLCBjdXJyZW50QmVhdE9yZGVyTnVtICsgMSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gUHJvY2VzcyB0aGUgXCIjIyBPcnBoYW4gQmVhdHNcIiBsaXN0IGFuZCB1cGRhdGUgb3JwaGFuIGJlYXRzIG9yZGVyXG5cdHByaXZhdGUgYXN5bmMgcHJvY2Vzc09ycGhhbkJlYXRzTGlzdChcblx0XHRsaXN0OiB7IGl0ZW1zOiBQYXJzZWRCZWF0TGlzdEl0ZW1bXSB9LFxuXHRcdHN0b3J5SWQ6IHN0cmluZ1xuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBHZXQgYWxsIGJlYXRzIGZvciB0aGlzIHN0b3J5XG5cdFx0Y29uc3QgYWxsQmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0c0J5U3Rvcnkoc3RvcnlJZCk7XG5cdFx0Y29uc3QgYWxsU2NlbmVzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0U2NlbmVzQnlTdG9yeShzdG9yeUlkKTtcblx0XHRjb25zdCBzY2VuZUlkU2V0ID0gbmV3IFNldChhbGxTY2VuZXMubWFwKHMgPT4gcy5pZCkpO1xuXHRcdFxuXHRcdC8vIEZpbHRlciB0byBvbmx5IG9ycGhhbiBiZWF0cyAod2l0aG91dCBzY2VuZV9pZCBvciB3aXRoIGludmFsaWQgc2NlbmVfaWQpXG5cdFx0Y29uc3Qgb3JwaGFuQmVhdHMgPSBhbGxCZWF0cy5maWx0ZXIoYiA9PiAhYi5zY2VuZV9pZCB8fCAhc2NlbmVJZFNldC5oYXMoYi5zY2VuZV9pZCkpO1xuXHRcdFxuXHRcdGNvbnN0IGJlYXRNYXAgPSBuZXcgTWFwPHN0cmluZywgQmVhdD4oKTsgLy8gTWFwIGJ5IGxpbmsgbmFtZVxuXHRcdGNvbnN0IGJlYXRJZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBCZWF0PigpOyAvLyBNYXAgYnkgSURcblx0XHRcblx0XHRmb3IgKGNvbnN0IGJlYXQgb2Ygb3JwaGFuQmVhdHMpIHtcblx0XHRcdGNvbnN0IGZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRiZWF0TWFwLnNldChsaW5rTmFtZSwgYmVhdCk7XG5cdFx0XHRiZWF0SWRNYXAuc2V0KGJlYXQuaWQsIGJlYXQpO1xuXHRcdH1cblxuXHRcdGxldCBiZWF0T3JkZXJOdW0gPSAxOyAvLyBTdGFydCBmcm9tIDEsIHdpbGwgaW5jcmVtZW50IGFzIHdlIHByb2Nlc3NcblxuXHRcdC8vIFByb2Nlc3MgbGlzdCBpdGVtcyAtIG9yZGVyIG1hdHRlcnMhXG5cdFx0Zm9yIChjb25zdCBpdGVtIG9mIGxpc3QuaXRlbXMpIHtcblx0XHRcdC8vIFBhcnNlIGJlYXQgZGlzcGxheSB0ZXh0XG5cdFx0XHQvLyBDYW4gYmU6IFwiQmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZVwiLCBcImludGVudCAtPiBvdXRjb21lXCIsIG9yIGp1c3QgXCJpbnRlbnRcIlxuXHRcdFx0bGV0IGludGVudDogc3RyaW5nO1xuXHRcdFx0bGV0IG91dGNvbWU6IHN0cmluZyA9IFwiXCI7XG5cblx0XHRcdGNvbnN0IGJlYXRNYXRjaCA9IGl0ZW0uZGlzcGxheVRleHQubWF0Y2goL0JlYXRcXHMrXFxkKzpcXHMqKC4rKS8pO1xuXHRcdFx0aWYgKGJlYXRNYXRjaCkge1xuXHRcdFx0XHQvLyBGb3JtYXQ6IFwiQmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZVwiIG9yIFwiQmVhdCBOOiBpbnRlbnRcIlxuXHRcdFx0XHRjb25zdCBiZWF0VGV4dCA9IGJlYXRNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRcdGNvbnN0IHBhcnRzID0gYmVhdFRleHQuc3BsaXQoL1xccyotPlxccyovKTtcblx0XHRcdFx0aW50ZW50ID0gcGFydHNbMF0udHJpbSgpO1xuXHRcdFx0XHRvdXRjb21lID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLT4gXCIpLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBGb3JtYXQ6IFwiaW50ZW50IC0+IG91dGNvbWVcIiBvciBqdXN0IFwiaW50ZW50XCJcblx0XHRcdFx0Y29uc3QgcGFydHMgPSBpdGVtLmRpc3BsYXlUZXh0LnNwbGl0KC9cXHMqLT5cXHMqLyk7XG5cdFx0XHRcdGludGVudCA9IHBhcnRzWzBdLnRyaW0oKTtcblx0XHRcdFx0b3V0Y29tZSA9IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0+IFwiKS50cmltKCkgOiBcIlwiO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoaXRlbS5saW5rTmFtZSkge1xuXHRcdFx0XHQvLyBCZWF0IGV4aXN0cyAtIGZpbmQgaXRcblx0XHRcdFx0bGV0IGN1cnJlbnRCZWF0ID0gYmVhdE1hcC5nZXQoaXRlbS5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0aWYgKCFjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdC8vIFRyeSB0byBmaW5kIGJ5IElEIGlmIGxpbmtOYW1lIGlzIGFjdHVhbGx5IGFuIElEXG5cdFx0XHRcdFx0Y3VycmVudEJlYXQgPSBiZWF0SWRNYXAuZ2V0KGl0ZW0ubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdGlmIChjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdC8vIENoZWNrIGlmIG9yZGVyX251bSBvciBjb250ZW50IG5lZWRzIHRvIGJlIHVwZGF0ZWRcblx0XHRcdFx0XHRjb25zdCBuZWVkc09yZGVyVXBkYXRlID0gY3VycmVudEJlYXQub3JkZXJfbnVtICE9PSBiZWF0T3JkZXJOdW07XG5cdFx0XHRcdFx0Y29uc3QgbmVlZHNDb250ZW50VXBkYXRlID0gaW50ZW50ICE9PSBjdXJyZW50QmVhdC5pbnRlbnQgfHwgb3V0Y29tZSAhPT0gY3VycmVudEJlYXQub3V0Y29tZTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAobmVlZHNPcmRlclVwZGF0ZSB8fCBuZWVkc0NvbnRlbnRVcGRhdGUpIHtcblx0XHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQmVhdChjdXJyZW50QmVhdC5pZCwge1xuXHRcdFx0XHRcdFx0XHRpbnRlbnQsXG5cdFx0XHRcdFx0XHRcdG91dGNvbWUsXG5cdFx0XHRcdFx0XHRcdG9yZGVyX251bTogYmVhdE9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0XHQvLyBLZWVwIHNjZW5lX2lkIGFzIG51bGwgb3IgaW52YWxpZCAob3JwaGFuKSAtIGRvbid0IHVwZGF0ZSBpdFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBDcmVhdGUgbmV3IG9ycGhhbiBiZWF0XG5cdFx0XHRcdC8vIFRoZSBBUEkgcmVxdWlyZXMgc2NlbmVfaWQsIHNvIHdlIG5lZWQgdG8gZmluZCBvciBjcmVhdGUgYW4gb3JwaGFuIHNjZW5lIGZvciBvcnBoYW4gYmVhdHNcblx0XHRcdFx0Ly8gRmlyc3QsIHRyeSB0byBmaW5kIGFuIGV4aXN0aW5nIG9ycGhhbiBzY2VuZSBzcGVjaWZpY2FsbHkgZm9yIG9ycGhhbiBiZWF0c1xuXHRcdFx0XHRjb25zdCBhbGxTY2VuZXMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRTY2VuZXNCeVN0b3J5KHN0b3J5SWQpO1xuXHRcdFx0XHRsZXQgb3JwaGFuQmVhdFNjZW5lID0gYWxsU2NlbmVzLmZpbmQocyA9PiAhcy5jaGFwdGVyX2lkICYmIHMuZ29hbC5zdGFydHNXaXRoKFwiT3JwaGFuIEJlYXRzIENvbnRhaW5lclwiKSk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoIW9ycGhhbkJlYXRTY2VuZSkge1xuXHRcdFx0XHRcdC8vIENyZWF0ZSBhIHNwZWNpYWwgb3JwaGFuIHNjZW5lIGZvciBvcnBoYW4gYmVhdHNcblx0XHRcdFx0XHRvcnBoYW5CZWF0U2NlbmUgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVTY2VuZSh7XG5cdFx0XHRcdFx0XHRzdG9yeV9pZDogc3RvcnlJZCxcblx0XHRcdFx0XHRcdGNoYXB0ZXJfaWQ6IG51bGwsXG5cdFx0XHRcdFx0XHRvcmRlcl9udW06IDk5OTksIC8vIEhpZ2ggbnVtYmVyIHRvIGtlZXAgaXQgYXQgdGhlIGVuZFxuXHRcdFx0XHRcdFx0Z29hbDogXCJPcnBoYW4gQmVhdHMgQ29udGFpbmVyXCIsXG5cdFx0XHRcdFx0XHR0aW1lX3JlZjogXCJcIixcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQmVhdCh7XG5cdFx0XHRcdFx0c2NlbmVfaWQ6IG9ycGhhbkJlYXRTY2VuZS5pZCxcblx0XHRcdFx0XHRvcmRlcl9udW06IGJlYXRPcmRlck51bSxcblx0XHRcdFx0XHR0eXBlOiBcInNldHVwXCIsIC8vIERlZmF1bHQgdHlwZVxuXHRcdFx0XHRcdGludGVudCxcblx0XHRcdFx0XHRvdXRjb21lLFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0YmVhdE9yZGVyTnVtKys7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUHJvY2VzcyB0aGUgXCIjIyBTY2VuZXMgJiBCZWF0c1wiIGxpc3QgYW5kIGNyZWF0ZS91cGRhdGUvZGVsZXRlIHNjZW5lcyBhbmQgYmVhdHNcblx0cHJpdmF0ZSBhc3luYyBwcm9jZXNzU2NlbmVCZWF0TGlzdChcblx0XHRsaXN0OiB7IGl0ZW1zOiBQYXJzZWRTY2VuZUJlYXRMaXN0SXRlbVtdIH0sXG5cdFx0Y2hhcHRlcklkOiBzdHJpbmcsXG5cdFx0c3RvcnlJZDogc3RyaW5nXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdC8vIEdldCBleGlzdGluZyBzY2VuZXMgYW5kIGJlYXRzIGZvciB0aGlzIGNoYXB0ZXJcblx0XHRjb25zdCBleGlzdGluZ1NjZW5lcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFNjZW5lcyhjaGFwdGVySWQpO1xuXHRcdGNvbnN0IHNjZW5lTWFwID0gbmV3IE1hcDxzdHJpbmcsIFNjZW5lPigpOyAvLyBNYXAgYnkgbGluayBuYW1lXG5cdFx0Y29uc3Qgc2NlbmVJZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBTY2VuZT4oKTsgLy8gTWFwIGJ5IElEXG5cdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBleGlzdGluZ1NjZW5lcykge1xuXHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0c2NlbmVNYXAuc2V0KGxpbmtOYW1lLCBzY2VuZSk7XG5cdFx0XHRzY2VuZUlkTWFwLnNldChzY2VuZS5pZCwgc2NlbmUpO1xuXHRcdH1cblxuXHRcdC8vIEdldCBhbGwgYmVhdHMgZm9yIHNjZW5lcyBpbiB0aGlzIGNoYXB0ZXJcblx0XHRjb25zdCBiZWF0TWFwID0gbmV3IE1hcDxzdHJpbmcsIEJlYXQ+KCk7IC8vIE1hcCBieSBsaW5rIG5hbWVcblx0XHRjb25zdCBiZWF0SWRNYXAgPSBuZXcgTWFwPHN0cmluZywgQmVhdD4oKTsgLy8gTWFwIGJ5IElEXG5cdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBleGlzdGluZ1NjZW5lcykge1xuXHRcdFx0Y29uc3QgYmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0cyhzY2VuZS5pZCk7XG5cdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRiZWF0TWFwLnNldChsaW5rTmFtZSwgYmVhdCk7XG5cdFx0XHRcdGJlYXRJZE1hcC5zZXQoYmVhdC5pZCwgYmVhdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bGV0IGN1cnJlbnRTY2VuZTogU2NlbmUgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgc2NlbmVPcmRlck51bSA9IDE7IC8vIFN0YXJ0IGZyb20gMSwgd2lsbCBpbmNyZW1lbnQgYXMgd2UgcHJvY2Vzc1xuXHRcdGNvbnN0IGJlYXRPcmRlck51bXMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpOyAvLyBUcmFjayBvcmRlcl9udW0gcGVyIHNjZW5lXG5cblx0XHQvLyBQcm9jZXNzIGxpc3QgaXRlbXMgLSBvcmRlciBtYXR0ZXJzIVxuXHRcdGZvciAoY29uc3QgaXRlbSBvZiBsaXN0Lml0ZW1zKSB7XG5cdFx0XHRpZiAoaXRlbS50eXBlID09PSBcInNjZW5lXCIpIHtcblx0XHRcdFx0Ly8gUmVzZXQgY3VycmVudFNjZW5lIGJlZm9yZSBwcm9jZXNzaW5nXG5cdFx0XHRcdGN1cnJlbnRTY2VuZSA9IG51bGw7XG5cdFx0XHRcdC8vIFBhcnNlIHNjZW5lIGRpc3BsYXkgdGV4dFxuXHRcdFx0XHQvLyBDYW4gYmU6IFwiU2NlbmUgTjogZ29hbCAtIHRpbWVSZWZcIiwgXCJnb2FsIC0gdGltZVJlZlwiLCBvciBqdXN0IFwiZ29hbFwiXG5cdFx0XHRcdGxldCBnb2FsOiBzdHJpbmc7XG5cdFx0XHRcdGxldCB0aW1lUmVmOiBzdHJpbmcgPSBcIlwiO1xuXG5cdFx0XHRcdGNvbnN0IHNjZW5lTWF0Y2ggPSBpdGVtLmRpc3BsYXlUZXh0Lm1hdGNoKC9TY2VuZVxccytcXGQrOlxccyooLispLyk7XG5cdFx0XHRcdGlmIChzY2VuZU1hdGNoKSB7XG5cdFx0XHRcdFx0Ly8gRm9ybWF0OiBcIlNjZW5lIE46IGdvYWwgLSB0aW1lUmVmXCIgb3IgXCJTY2VuZSBOOiBnb2FsXCJcblx0XHRcdFx0XHRjb25zdCBzY2VuZVRleHQgPSBzY2VuZU1hdGNoWzFdLnRyaW0oKTtcblx0XHRcdFx0XHRjb25zdCBwYXJ0cyA9IHNjZW5lVGV4dC5zcGxpdCgvXFxzKi1cXHMqLyk7XG5cdFx0XHRcdFx0Z29hbCA9IHBhcnRzWzBdLnRyaW0oKTtcblx0XHRcdFx0XHR0aW1lUmVmID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLSBcIikudHJpbSgpIDogXCJcIjtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBGb3JtYXQ6IFwiZ29hbCAtIHRpbWVSZWZcIiBvciBqdXN0IFwiZ29hbFwiXG5cdFx0XHRcdFx0Y29uc3QgcGFydHMgPSBpdGVtLmRpc3BsYXlUZXh0LnNwbGl0KC9cXHMqLVxccyovKTtcblx0XHRcdFx0XHRnb2FsID0gcGFydHNbMF0udHJpbSgpO1xuXHRcdFx0XHRcdHRpbWVSZWYgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbihcIiAtIFwiKS50cmltKCkgOiBcIlwiO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVzZXQgY3VycmVudFNjZW5lIGJlZm9yZSBwcm9jZXNzaW5nXG5cdFx0XHRcdGN1cnJlbnRTY2VuZSA9IG51bGw7XG5cblx0XHRcdFx0aWYgKGl0ZW0ubGlua05hbWUpIHtcblx0XHRcdFx0XHQvLyBTY2VuZSBleGlzdHMgLSBmaW5kIGl0XG5cdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gc2NlbmVNYXAuZ2V0KGl0ZW0ubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0aWYgKCFjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0XHRcdC8vIFRyeSB0byBmaW5kIGJ5IElEIGlmIGxpbmtOYW1lIGlzIGFjdHVhbGx5IGFuIElEXG5cdFx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBzY2VuZUlkTWFwLmdldChpdGVtLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAoY3VycmVudFNjZW5lKSB7XG5cdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBvcmRlcl9udW0gbmVlZHMgdG8gYmUgdXBkYXRlZFxuXHRcdFx0XHRcdFx0Y29uc3QgbmVlZHNPcmRlclVwZGF0ZSA9IGN1cnJlbnRTY2VuZS5vcmRlcl9udW0gIT09IHNjZW5lT3JkZXJOdW07XG5cdFx0XHRcdFx0XHRjb25zdCBuZWVkc0NvbnRlbnRVcGRhdGUgPSBnb2FsICE9PSBjdXJyZW50U2NlbmUuZ29hbCB8fCB0aW1lUmVmICE9PSBjdXJyZW50U2NlbmUudGltZV9yZWY7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGlmIChuZWVkc09yZGVyVXBkYXRlIHx8IG5lZWRzQ29udGVudFVwZGF0ZSkge1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVTY2VuZShjdXJyZW50U2NlbmUuaWQsIHtcblx0XHRcdFx0XHRcdFx0XHRnb2FsLFxuXHRcdFx0XHRcdFx0XHRcdHRpbWVfcmVmOiB0aW1lUmVmLFxuXHRcdFx0XHRcdFx0XHRcdG9yZGVyX251bTogc2NlbmVPcmRlck51bSxcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vIEluaXRpYWxpemUgYmVhdCBvcmRlciBmb3IgdGhpcyBzY2VuZSAoaW1wb3J0YW50IGZvciBlbXB0eSBzY2VuZXMpXG5cdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBzY2VuZSBhbHJlYWR5IGhhcyBiZWF0cywgaWYgbm90LCBzdGFydCBmcm9tIDFcblx0XHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nQmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0cyhjdXJyZW50U2NlbmUuaWQpO1xuXHRcdFx0XHRcdFx0aWYgKGV4aXN0aW5nQmVhdHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdGJlYXRPcmRlck51bXMuc2V0KGN1cnJlbnRTY2VuZS5pZCwgMSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBTY2VuZSBoYXMgYmVhdHMsIHVzZSBtYXggb3JkZXJfbnVtICsgMSBmb3IgbmV3IGJlYXRzXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1heE9yZGVyTnVtID0gTWF0aC5tYXgoLi4uZXhpc3RpbmdCZWF0cy5tYXAoYiA9PiBiLm9yZGVyX251bSkpO1xuXHRcdFx0XHRcdFx0XHRiZWF0T3JkZXJOdW1zLnNldChjdXJyZW50U2NlbmUuaWQsIG1heE9yZGVyTnVtICsgMSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIENyZWF0ZSBuZXcgc2NlbmVcblx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVTY2VuZSh7XG5cdFx0XHRcdFx0XHRzdG9yeV9pZDogc3RvcnlJZCxcblx0XHRcdFx0XHRcdGNoYXB0ZXJfaWQ6IGNoYXB0ZXJJZCxcblx0XHRcdFx0XHRcdG9yZGVyX251bTogc2NlbmVPcmRlck51bSxcblx0XHRcdFx0XHRcdGdvYWwsXG5cdFx0XHRcdFx0XHR0aW1lX3JlZjogdGltZVJlZixcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBVcGRhdGUgbWFwc1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShjdXJyZW50U2NlbmUpO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lTGlua05hbWUgPSBzY2VuZUZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdHNjZW5lTWFwLnNldChzY2VuZUxpbmtOYW1lLCBjdXJyZW50U2NlbmUpO1xuXHRcdFx0XHRcdHNjZW5lSWRNYXAuc2V0KGN1cnJlbnRTY2VuZS5pZCwgY3VycmVudFNjZW5lKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBJbml0aWFsaXplIGJlYXQgb3JkZXIgZm9yIG5ldyBzY2VuZSAoc3RhcnRzIGF0IDEpXG5cdFx0XHRcdFx0YmVhdE9yZGVyTnVtcy5zZXQoY3VycmVudFNjZW5lLmlkLCAxKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0c2NlbmVPcmRlck51bSsrO1xuXHRcdFx0fSBlbHNlIGlmIChpdGVtLnR5cGUgPT09IFwiYmVhdFwiICYmIGN1cnJlbnRTY2VuZSkge1xuXHRcdFx0XHQvLyBQYXJzZSBiZWF0IGRpc3BsYXkgdGV4dFxuXHRcdFx0XHQvLyBDYW4gYmU6IFwiQmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZVwiLCBcImludGVudCAtPiBvdXRjb21lXCIsIG9yIGp1c3QgXCJpbnRlbnRcIlxuXHRcdFx0XHRsZXQgaW50ZW50OiBzdHJpbmc7XG5cdFx0XHRcdGxldCBvdXRjb21lOiBzdHJpbmcgPSBcIlwiO1xuXG5cdFx0XHRcdGNvbnN0IGJlYXRNYXRjaCA9IGl0ZW0uZGlzcGxheVRleHQubWF0Y2goL0JlYXRcXHMrXFxkKzpcXHMqKC4rKS8pO1xuXHRcdFx0XHRpZiAoYmVhdE1hdGNoKSB7XG5cdFx0XHRcdFx0Ly8gRm9ybWF0OiBcIkJlYXQgTjogaW50ZW50IC0+IG91dGNvbWVcIiBvciBcIkJlYXQgTjogaW50ZW50XCJcblx0XHRcdFx0XHRjb25zdCBiZWF0VGV4dCA9IGJlYXRNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRcdFx0Y29uc3QgcGFydHMgPSBiZWF0VGV4dC5zcGxpdCgvXFxzKi0+XFxzKi8pO1xuXHRcdFx0XHRcdGludGVudCA9IHBhcnRzWzBdLnRyaW0oKTtcblx0XHRcdFx0XHRvdXRjb21lID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLT4gXCIpLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gRm9ybWF0OiBcImludGVudCAtPiBvdXRjb21lXCIgb3IganVzdCBcImludGVudFwiXG5cdFx0XHRcdFx0Y29uc3QgcGFydHMgPSBpdGVtLmRpc3BsYXlUZXh0LnNwbGl0KC9cXHMqLT5cXHMqLyk7XG5cdFx0XHRcdFx0aW50ZW50ID0gcGFydHNbMF0udHJpbSgpO1xuXHRcdFx0XHRcdG91dGNvbWUgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbihcIiAtPiBcIikudHJpbSgpIDogXCJcIjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEdldCBjdXJyZW50IGJlYXQgb3JkZXJfbnVtIGZvciB0aGlzIHNjZW5lXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRCZWF0T3JkZXJOdW0gPSBiZWF0T3JkZXJOdW1zLmdldChjdXJyZW50U2NlbmUuaWQpIHx8IDE7XG5cblx0XHRcdFx0aWYgKGl0ZW0ubGlua05hbWUpIHtcblx0XHRcdFx0XHQvLyBCZWF0IGV4aXN0cyAtIGZpbmQgaXRcblx0XHRcdFx0XHRsZXQgY3VycmVudEJlYXQgPSBiZWF0TWFwLmdldChpdGVtLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdGlmICghY3VycmVudEJlYXQpIHtcblx0XHRcdFx0XHRcdC8vIFRyeSB0byBmaW5kIGJ5IElEIGlmIGxpbmtOYW1lIGlzIGFjdHVhbGx5IGFuIElEXG5cdFx0XHRcdFx0XHRjdXJyZW50QmVhdCA9IGJlYXRJZE1hcC5nZXQoaXRlbS5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKGN1cnJlbnRCZWF0KSB7XG5cdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBvcmRlcl9udW0gb3IgY29udGVudCBuZWVkcyB0byBiZSB1cGRhdGVkXG5cdFx0XHRcdFx0XHRjb25zdCBuZWVkc09yZGVyVXBkYXRlID0gY3VycmVudEJlYXQub3JkZXJfbnVtICE9PSBjdXJyZW50QmVhdE9yZGVyTnVtO1xuXHRcdFx0XHRcdFx0Y29uc3QgbmVlZHNDb250ZW50VXBkYXRlID0gaW50ZW50ICE9PSBjdXJyZW50QmVhdC5pbnRlbnQgfHwgb3V0Y29tZSAhPT0gY3VycmVudEJlYXQub3V0Y29tZTtcblx0XHRcdFx0XHRcdGNvbnN0IG5lZWRzU2NlbmVVcGRhdGUgPSBjdXJyZW50QmVhdC5zY2VuZV9pZCAhPT0gY3VycmVudFNjZW5lLmlkO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRpZiAobmVlZHNPcmRlclVwZGF0ZSB8fCBuZWVkc0NvbnRlbnRVcGRhdGUgfHwgbmVlZHNTY2VuZVVwZGF0ZSkge1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50QmVhdCA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnVwZGF0ZUJlYXQoY3VycmVudEJlYXQuaWQsIHtcblx0XHRcdFx0XHRcdFx0XHRpbnRlbnQsXG5cdFx0XHRcdFx0XHRcdFx0b3V0Y29tZSxcblx0XHRcdFx0XHRcdFx0XHRvcmRlcl9udW06IGN1cnJlbnRCZWF0T3JkZXJOdW0sXG5cdFx0XHRcdFx0XHRcdFx0c2NlbmVfaWQ6IGN1cnJlbnRTY2VuZS5pZCxcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgbWFwcyBpZiBzY2VuZSBjaGFuZ2VkXG5cdFx0XHRcdFx0XHRcdGlmIChuZWVkc1NjZW5lVXBkYXRlKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUJlYXRGaWxlTmFtZShjdXJyZW50QmVhdCk7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0XHRcdGJlYXRNYXAuc2V0KGJlYXRMaW5rTmFtZSwgY3VycmVudEJlYXQpO1xuXHRcdFx0XHRcdFx0XHRcdGJlYXRJZE1hcC5zZXQoY3VycmVudEJlYXQuaWQsIGN1cnJlbnRCZWF0KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBDcmVhdGUgbmV3IGJlYXRcblx0XHRcdFx0XHRjb25zdCBuZXdCZWF0ID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQmVhdCh7XG5cdFx0XHRcdFx0XHRzY2VuZV9pZDogY3VycmVudFNjZW5lLmlkLFxuXHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBjdXJyZW50QmVhdE9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0dHlwZTogXCJzZXR1cFwiLCAvLyBEZWZhdWx0IHR5cGVcblx0XHRcdFx0XHRcdGludGVudCxcblx0XHRcdFx0XHRcdG91dGNvbWUsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gVXBkYXRlIG1hcHNcblx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKG5ld0JlYXQpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRMaW5rTmFtZSA9IGJlYXRGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRiZWF0TWFwLnNldChiZWF0TGlua05hbWUsIG5ld0JlYXQpO1xuXHRcdFx0XHRcdGJlYXRJZE1hcC5zZXQobmV3QmVhdC5pZCwgbmV3QmVhdCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdC8vIEluY3JlbWVudCBiZWF0IG9yZGVyIGZvciBuZXh0IGJlYXQgaW4gdGhpcyBzY2VuZVxuXHRcdFx0XHRiZWF0T3JkZXJOdW1zLnNldChjdXJyZW50U2NlbmUuaWQsIGN1cnJlbnRCZWF0T3JkZXJOdW0gKyAxKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBGaW5kIGNvbnRlbnQgYmxvY2sgZmlsZSBieSBsaW5rIG5hbWUgKHNlYXJjaGVzIHJlY3Vyc2l2ZWx5IGluIGFsbCB0eXBlIHN1YmZvbGRlcnMpXG5cdHByaXZhdGUgYXN5bmMgZmluZENvbnRlbnRCbG9ja0ZpbGVCeUxpbmtOYW1lKFxuXHRcdGNvbnRlbnRzUm9vdDogc3RyaW5nLFxuXHRcdGxpbmtOYW1lOiBzdHJpbmdcblx0KTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG5cdFx0Y29uc3Qgcm9vdCA9IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY29udGVudHNSb290KTtcblx0XHRpZiAoIShyb290IGluc3RhbmNlb2YgVEZvbGRlcikpIHJldHVybiBudWxsO1xuXG5cdFx0Y29uc3QgdGFyZ2V0ID0gYCR7bGlua05hbWV9Lm1kYDtcblxuXHRcdC8vIFJlY3Vyc2l2ZSBzZWFyY2ggaW4gYWxsIHN1YmZvbGRlcnNcblx0XHRjb25zdCBzdGFjazogVEZvbGRlcltdID0gW3Jvb3RdO1xuXHRcdHdoaWxlIChzdGFjay5sZW5ndGgpIHtcblx0XHRcdGNvbnN0IGZvbGRlciA9IHN0YWNrLnBvcCgpITtcblx0XHRcdGZvciAoY29uc3QgY2hpbGQgb2YgZm9sZGVyLmNoaWxkcmVuKSB7XG5cdFx0XHRcdGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcblx0XHRcdFx0XHRzdGFjay5wdXNoKGNoaWxkKTtcblx0XHRcdFx0fSBlbHNlIGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGaWxlICYmIGNoaWxkLm5hbWUgPT09IHRhcmdldCkge1xuXHRcdFx0XHRcdHJldHVybiBjaGlsZC5wYXRoO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHQvLyBGaW5kIHByb3NlIGJsb2NrIGJ5IGNvbnRlbnQgd2hlbiBmaWxlIG5hbWUgZG9lc24ndCBtYXRjaCAoc2VhcmNoZXMgcmVjdXJzaXZlbHkgaW4gYWxsIHR5cGUgc3ViZm9sZGVycylcblx0cHJpdmF0ZSBhc3luYyBmaW5kQ29udGVudEJsb2NrQnlDb250ZW50KFxuXHRcdGNvbnRlbnRzRm9sZGVyUGF0aDogc3RyaW5nLFxuXHRcdGNvbnRlbnQ6IHN0cmluZ1xuXHQpOiBQcm9taXNlPENvbnRlbnRCbG9jayB8IG51bGw+IHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZm9sZGVyID0gdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLmdldEFic3RyYWN0RmlsZUJ5UGF0aChjb250ZW50c0ZvbGRlclBhdGgpO1xuXHRcdFx0aWYgKCEoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IG5vcm1hbGl6ZWRDb250ZW50ID0gY29udGVudC50cmltKCk7XG5cblx0XHRcdC8vIFJlY3Vyc2l2ZSBzZWFyY2ggdGhyb3VnaCBhbGwgc3ViZm9sZGVyc1xuXHRcdFx0Y29uc3Qgc3RhY2s6IFRGb2xkZXJbXSA9IFtmb2xkZXJdO1xuXHRcdFx0d2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuXHRcdFx0XHRjb25zdCBjdXJyZW50Rm9sZGVyID0gc3RhY2sucG9wKCkhO1xuXHRcdFx0XHRmb3IgKGNvbnN0IGNoaWxkIG9mIGN1cnJlbnRGb2xkZXIuY2hpbGRyZW4pIHtcblx0XHRcdFx0XHRpZiAoY2hpbGQgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG5cdFx0XHRcdFx0XHRzdGFjay5wdXNoKGNoaWxkKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGNoaWxkIGluc3RhbmNlb2YgVEZpbGUgJiYgY2hpbGQuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGNvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIucmVhZENvbnRlbnRCbG9ja0Zyb21GaWxlKGNoaWxkLnBhdGgpO1xuXHRcdFx0XHRcdFx0aWYgKGNvbnRlbnRCbG9jayAmJiBjb250ZW50QmxvY2suY29udGVudC50cmltKCkgPT09IG5vcm1hbGl6ZWRDb250ZW50KSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBjb250ZW50QmxvY2s7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3Igc2VhcmNoaW5nIGZvciBwcm9zZSBibG9jayBieSBjb250ZW50OlwiLCBlcnIpO1xuXHRcdH1cblxuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0Ly8gRmluZCBwcm9zZSBibG9jayBieSBJRCB3aGVuIHdlIGhhdmUgcmVtb3RlIElEIGJ1dCBuZWVkIGxvY2FsIGZpbGUgKHNlYXJjaGVzIHJlY3Vyc2l2ZWx5IGluIGFsbCB0eXBlIHN1YmZvbGRlcnMpXG5cdHByaXZhdGUgYXN5bmMgZmluZENvbnRlbnRCbG9ja0J5SWQoXG5cdFx0Y29udGVudHNGb2xkZXJQYXRoOiBzdHJpbmcsXG5cdFx0aWQ6IHN0cmluZ1xuXHQpOiBQcm9taXNlPENvbnRlbnRCbG9jayB8IG51bGw+IHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZm9sZGVyID0gdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLmdldEFic3RyYWN0RmlsZUJ5UGF0aChjb250ZW50c0ZvbGRlclBhdGgpO1xuXHRcdFx0aWYgKCEoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJlY3Vyc2l2ZSBzZWFyY2ggdGhyb3VnaCBhbGwgc3ViZm9sZGVyc1xuXHRcdFx0Y29uc3Qgc3RhY2s6IFRGb2xkZXJbXSA9IFtmb2xkZXJdO1xuXHRcdFx0d2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuXHRcdFx0XHRjb25zdCBjdXJyZW50Rm9sZGVyID0gc3RhY2sucG9wKCkhO1xuXHRcdFx0XHRmb3IgKGNvbnN0IGNoaWxkIG9mIGN1cnJlbnRGb2xkZXIuY2hpbGRyZW4pIHtcblx0XHRcdFx0XHRpZiAoY2hpbGQgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG5cdFx0XHRcdFx0XHRzdGFjay5wdXNoKGNoaWxkKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGNoaWxkIGluc3RhbmNlb2YgVEZpbGUgJiYgY2hpbGQuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGNvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIucmVhZENvbnRlbnRCbG9ja0Zyb21GaWxlKGNoaWxkLnBhdGgpO1xuXHRcdFx0XHRcdFx0aWYgKGNvbnRlbnRCbG9jayAmJiBjb250ZW50QmxvY2suaWQgPT09IGlkKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBjb250ZW50QmxvY2s7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3Igc2VhcmNoaW5nIGZvciBwcm9zZSBibG9jayBieSBJRDpcIiwgZXJyKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8vIEdldCB0aGUgY29ycmVjdCBmaWxlIHBhdGggZm9yIGEgY29udGVudCBibG9jayAoYWx3YXlzIHVzZXMgdHlwZSBzdWJmb2xkZXJzKVxuXHRwcml2YXRlIGdldENvbnRlbnRCbG9ja0ZpbGVQYXRoKHN0b3J5Rm9sZGVyUGF0aDogc3RyaW5nLCBjb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayk6IHN0cmluZyB7XG5cdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoY29udGVudEJsb2NrKTtcblx0XHRjb25zdCB0eXBlRm9sZGVyUGF0aCA9IHRoaXMuZmlsZU1hbmFnZXIuZ2V0Q29udGVudEJsb2NrRm9sZGVyUGF0aChzdG9yeUZvbGRlclBhdGgsIGNvbnRlbnRCbG9jay50eXBlIHx8IFwidGV4dFwiKTtcblx0XHRyZXR1cm4gYCR7dHlwZUZvbGRlclBhdGh9LyR7ZmlsZU5hbWV9YDtcblx0fVxuXG5cdC8vIEdldCBjb250ZW50IGJsb2NrIGZpbGUgcGF0aCBmcm9tIGNvbnRlbnRzIGZvbGRlciBwYXRoICgwMy1jb250ZW50cylcblx0cHJpdmF0ZSBhc3luYyBnZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhcblx0XHRjb250ZW50c0ZvbGRlclBhdGg6IHN0cmluZywgXG5cdFx0Y29udGVudEJsb2NrOiBDb250ZW50QmxvY2tcblx0KTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHRjb25zdCB0eXBlRm9sZGVyID0gdGhpcy5maWxlTWFuYWdlci5nZXRDb250ZW50VHlwZUZvbGRlcihjb250ZW50QmxvY2sudHlwZSB8fCBcInRleHRcIik7XG5cdFx0Y29uc3QgdHlwZUZvbGRlclBhdGggPSBgJHtjb250ZW50c0ZvbGRlclBhdGh9LyR7dHlwZUZvbGRlcn1gO1xuXHRcdC8vIEVuc3VyZSB0eXBlIHN1YmZvbGRlciBleGlzdHNcblx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyh0eXBlRm9sZGVyUGF0aCk7XG5cdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoY29udGVudEJsb2NrKTtcblx0XHRyZXR1cm4gYCR7dHlwZUZvbGRlclBhdGh9LyR7ZmlsZU5hbWV9YDtcblx0fVxuXG5cdC8vIFJlc29sdmUgY29uZmxpY3QgdXNpbmcgbW9kYWwgb3IgYXV0by1yZXNvbHZlIGJhc2VkIG9uIG1vZGVcblx0cHJpdmF0ZSBhc3luYyByZXNvbHZlQ29uZmxpY3QoXG5cdFx0bG9jYWxDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayxcblx0XHRyZW1vdGVDb250ZW50QmxvY2s6IENvbnRlbnRCbG9ja1xuXHQpOiBQcm9taXNlPENvbmZsaWN0UmVzb2x1dGlvblJlc3VsdD4ge1xuXHRcdC8vIEluIGxvY2FsIG1vZGUsIGF1dG9tYXRpY2FsbHkgcmVzb2x2ZSB0byBcImxvY2FsIHdpbnNcIlxuXHRcdGlmICh0aGlzLnNldHRpbmdzLm1vZGUgPT09IFwibG9jYWxcIikge1xuXHRcdFx0cmV0dXJuIHsgcmVzb2x1dGlvbjogXCJsb2NhbFwiIH07XG5cdFx0fVxuXG5cdFx0Ly8gSW4gcmVtb3RlIG1vZGUsIHNob3cgbW9kYWwgZm9yIHVzZXIgdG8gY2hvb3NlXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBDb25mbGljdE1vZGFsKFxuXHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0bG9jYWxDb250ZW50QmxvY2ssXG5cdFx0XHRcdHJlbW90ZUNvbnRlbnRCbG9jayxcblx0XHRcdFx0YXN5bmMgKHJlc3VsdCkgPT4ge1xuXHRcdFx0XHRcdHJlc29sdmUocmVzdWx0KTtcblx0XHRcdFx0fVxuXHRcdFx0KTtcblx0XHRcdG1vZGFsLm9wZW4oKTtcblx0XHR9KTtcblx0fVxuXG5cdC8vIFVwZGF0ZSB0aGUgQ2hhcHRlciBzZWN0aW9uIGluIGNoYXB0ZXIgZmlsZSAoaGllcmFyY2hpY2FsIHN0cnVjdHVyZSlcblx0cHJpdmF0ZSBhc3luYyB1cGRhdGVDaGFwdGVyUHJvc2VTZWN0aW9uSGllcmFyY2hpY2FsKFxuXHRcdG9yaWdpbmFsQ29udGVudDogc3RyaW5nLFxuXHRcdHVwZGF0ZWRTZWN0aW9uczogc3RyaW5nW10sXG5cdFx0ZmlsZTogVEZpbGUsXG5cdFx0ZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIHN0cmluZz5cblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Ly8gRXh0cmFjdCBmcm9udG1hdHRlclxuXHRcdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBvcmlnaW5hbENvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcblx0XHRjb25zdCBmcm9udG1hdHRlclRleHQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXSA6IFwiXCI7XG5cblx0XHQvLyBFeHRyYWN0IGNvbnRlbnQgYWZ0ZXIgZnJvbnRtYXR0ZXJcblx0XHRjb25zdCBib2R5U3RhcnQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXS5sZW5ndGggOiAwO1xuXHRcdGNvbnN0IGJvZHlDb250ZW50ID0gb3JpZ2luYWxDb250ZW50LnN1YnN0cmluZyhib2R5U3RhcnQpLnRyaW0oKTtcblxuXHRcdC8vIEdldCBjaGFwdGVyIG51bWJlciBhbmQgdGl0bGUgZnJvbSBmcm9udG1hdHRlclxuXHRcdGNvbnN0IGNoYXB0ZXJOdW1iZXIgPSBmcm9udG1hdHRlci5udW1iZXIgfHwgXCIxXCI7XG5cdFx0Y29uc3QgY2hhcHRlclRpdGxlID0gZnJvbnRtYXR0ZXIudGl0bGUgfHwgXCJVbnRpdGxlZFwiO1xuXG5cdFx0Ly8gRmluZCBDaGFwdGVyIHNlY3Rpb24gYW5kIHJlcGxhY2UgaXRcblx0XHQvLyBDYXB0dXJlIGV2ZXJ5dGhpbmcgdW50aWwgdGhlIGVuZCBzaW5jZSBTY2VuZSBhbmQgQmVhdCBhcmUgcGFydCBvZiB0aGUgY2hhcHRlciBzZWN0aW9uXG5cdFx0Ly8gQWNjZXB0IHdpdGggb3Igd2l0aG91dCBibGFuayBsaW5lIGFmdGVyIHRoZSBjaGFwdGVyIGhlYWRlclxuXHRcdC8vIFVzZSBub24tZ3JlZWR5IG1hdGNoIHRvIHN0b3AgYXQgbmV4dCAjIyBDaGFwdGVyIGlmIGl0IGV4aXN0c1xuXHRcdGNvbnN0IGNoYXB0ZXJIZWFkZXJQYXR0ZXJuID0gYCMjXFxcXHMrQ2hhcHRlclxcXFxzKyR7Y2hhcHRlck51bWJlcn06XFxcXHMrW15cXFxcbl0rYDtcblx0XHRjb25zdCBjaGFwdGVyU2VjdGlvbk1hdGNoID0gYm9keUNvbnRlbnQubWF0Y2gobmV3IFJlZ0V4cChgKFtcXFxcc1xcXFxTXSo/JHtjaGFwdGVySGVhZGVyUGF0dGVybn1cXFxccypcXFxcbispKFtcXFxcc1xcXFxTXSo/KSg/PVxcXFxuIyNcXFxccytDaGFwdGVyXFxcXHMrXFxcXGQrOnwkKWAsIFwiaVwiKSk7XG5cdFx0XG5cdFx0aWYgKCFjaGFwdGVyU2VjdGlvbk1hdGNoKSB7XG5cdFx0XHQvLyBObyBDaGFwdGVyIHNlY3Rpb24gZm91bmQsIGFkZCBpdFxuXHRcdFx0Y29uc3QgbmV3Q2hhcHRlclNlY3Rpb24gPSBgXFxuXFxuIyMgQ2hhcHRlciAke2NoYXB0ZXJOdW1iZXJ9OiAke2NoYXB0ZXJUaXRsZX1cXG5cXG4ke3VwZGF0ZWRTZWN0aW9ucy5qb2luKFwiXFxuXFxuXCIpfVxcblxcbmA7XG5cdFx0XHRjb25zdCB1cGRhdGVkQ29udGVudCA9IGAke2Zyb250bWF0dGVyVGV4dH1cXG4ke2JvZHlDb250ZW50fSR7bmV3Q2hhcHRlclNlY3Rpb259YDtcblx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5tb2RpZnkoZmlsZSwgdXBkYXRlZENvbnRlbnQpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFJlcGxhY2UgQ2hhcHRlciBzZWN0aW9uIGNvbnRlbnRcblx0XHRjb25zdCBiZWZvcmVDaGFwdGVyID0gY2hhcHRlclNlY3Rpb25NYXRjaFsxXTtcblx0XHRjb25zdCBhZnRlckNoYXB0ZXIgPSBib2R5Q29udGVudC5zdWJzdHJpbmcoY2hhcHRlclNlY3Rpb25NYXRjaC5pbmRleCEgKyBjaGFwdGVyU2VjdGlvbk1hdGNoWzBdLmxlbmd0aCk7XG5cdFx0Y29uc3QgbmV3Q2hhcHRlckNvbnRlbnQgPSB1cGRhdGVkU2VjdGlvbnMuam9pbihcIlxcblxcblwiKTtcblx0XHRjb25zdCB1cGRhdGVkQm9keSA9IGAke2JlZm9yZUNoYXB0ZXJ9JHtuZXdDaGFwdGVyQ29udGVudH1cXG5cXG4ke2FmdGVyQ2hhcHRlcn1gO1xuXHRcdGNvbnN0IHVwZGF0ZWRDb250ZW50ID0gYCR7ZnJvbnRtYXR0ZXJUZXh0fVxcbiR7dXBkYXRlZEJvZHl9YDtcblx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkubW9kaWZ5KGZpbGUsIHVwZGF0ZWRDb250ZW50KTtcblx0fVxuXG5cdC8vIFVwZGF0ZSB0aGUgUHJvc2Ugc2VjdGlvbiBpbiBjaGFwdGVyIGZpbGVcblx0cHJpdmF0ZSBhc3luYyB1cGRhdGVDaGFwdGVyUHJvc2VTZWN0aW9uKFxuXHRcdG9yaWdpbmFsQ29udGVudDogc3RyaW5nLFxuXHRcdHVwZGF0ZWRQYXJhZ3JhcGhzOiBzdHJpbmdbXSxcblx0XHRmaWxlOiBURmlsZVxuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBFeHRyYWN0IGZyb250bWF0dGVyXG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IG9yaWdpbmFsQ29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuXHRcdGNvbnN0IGZyb250bWF0dGVyID0gZnJvbnRtYXR0ZXJNYXRjaCA/IGZyb250bWF0dGVyTWF0Y2hbMF0gOiBcIlwiO1xuXG5cdFx0Ly8gRXh0cmFjdCBjb250ZW50IGFmdGVyIGZyb250bWF0dGVyXG5cdFx0Y29uc3QgYm9keVN0YXJ0ID0gZnJvbnRtYXR0ZXJNYXRjaCA/IGZyb250bWF0dGVyTWF0Y2hbMF0ubGVuZ3RoIDogMDtcblx0XHRjb25zdCBib2R5Q29udGVudCA9IG9yaWdpbmFsQ29udGVudC5zdWJzdHJpbmcoYm9keVN0YXJ0KS50cmltKCk7XG5cblx0XHQvLyBGaW5kIFByb3NlIHNlY3Rpb24gYW5kIHJlcGxhY2UgaXRcblx0XHRjb25zdCBwcm9zZVNlY3Rpb25NYXRjaCA9IGJvZHlDb250ZW50Lm1hdGNoKC8oW1xcc1xcU10qPyMjXFxzK1Byb3NlXFxzKlxcblxcbikoW1xcc1xcU10qPykoPz1cXG4jI3xcXG4qJCkvKTtcblx0XHRcblx0XHRpZiAoIXByb3NlU2VjdGlvbk1hdGNoKSB7XG5cdFx0XHQvLyBObyBQcm9zZSBzZWN0aW9uIGZvdW5kLCBhZGQgaXRcblx0XHRcdGNvbnN0IG5ld1Byb3NlU2VjdGlvbiA9IGBcXG5cXG4jIyBQcm9zZVxcblxcbiR7dXBkYXRlZFBhcmFncmFwaHMuam9pbihcIlxcblxcblwiKX1cXG5cXG5gO1xuXHRcdFx0Y29uc3QgdXBkYXRlZENvbnRlbnQgPSBgJHtmcm9udG1hdHRlcn1cXG4ke2JvZHlDb250ZW50fSR7bmV3UHJvc2VTZWN0aW9ufWA7XG5cdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkubW9kaWZ5KGZpbGUsIHVwZGF0ZWRDb250ZW50KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBSZXBsYWNlIFByb3NlIHNlY3Rpb24gY29udGVudFxuXHRcdGNvbnN0IGJlZm9yZVByb3NlID0gcHJvc2VTZWN0aW9uTWF0Y2hbMV07XG5cdFx0Y29uc3QgbmV3UHJvc2VDb250ZW50ID0gdXBkYXRlZFBhcmFncmFwaHMuam9pbihcIlxcblxcblwiKTtcblx0XHRjb25zdCBhZnRlclByb3NlID0gYm9keUNvbnRlbnQuc3Vic3RyaW5nKHByb3NlU2VjdGlvbk1hdGNoLmluZGV4ISArIHByb3NlU2VjdGlvbk1hdGNoWzBdLmxlbmd0aCk7XG5cblx0XHRjb25zdCB1cGRhdGVkQm9keSA9IGAke2JlZm9yZVByb3NlfSR7bmV3UHJvc2VDb250ZW50fVxcblxcbiR7YWZ0ZXJQcm9zZX1gO1xuXHRcdGNvbnN0IHVwZGF0ZWRDb250ZW50ID0gYCR7ZnJvbnRtYXR0ZXJ9XFxuJHt1cGRhdGVkQm9keX1gO1xuXG5cdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLm1vZGlmeShmaWxlLCB1cGRhdGVkQ29udGVudCk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHdyaXRlQ2hhcHRlckJ1bmRsZShkYXRhOiB7XG5cdFx0c3Rvcnk6IFN0b3J5O1xuXHRcdGNoYXB0ZXI6IENoYXB0ZXI7XG5cdFx0c2NlbmVzOiBTY2VuZVdpdGhCZWF0c1tdO1xuXHRcdGNvbnRlbnRCbG9ja3M6IENvbnRlbnRCbG9ja1tdO1xuXHRcdGNvbnRlbnRCbG9ja1JlZnM6IENvbnRlbnRBbmNob3JbXTtcblx0fSk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IGZvbGRlclBhdGggPSB0aGlzLmZpbGVNYW5hZ2VyLmdldFN0b3J5Rm9sZGVyUGF0aChkYXRhLnN0b3J5LnRpdGxlKTtcblx0XHRhd2FpdCB0aGlzLmVuc3VyZVN0b3J5Rm9sZGVycyhmb2xkZXJQYXRoKTtcblxuXHRcdGZvciAoY29uc3QgY29udGVudEJsb2NrIG9mIGRhdGEuY29udGVudEJsb2Nrcykge1xuXHRcdFx0YXdhaXQgdGhpcy53cml0ZUNvbnRlbnRCbG9ja1RvRm9sZGVyKGZvbGRlclBhdGgsIGRhdGEuc3RvcnkudGl0bGUsIGNvbnRlbnRCbG9jayk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY2hhcHRlcnNGb2xkZXJQYXRoID0gYCR7Zm9sZGVyUGF0aH0vMDAtY2hhcHRlcnNgO1xuXHRcdGNvbnN0IGNoYXB0ZXJGaWxlTmFtZSA9IGBDaGFwdGVyLSR7ZGF0YS5jaGFwdGVyLm51bWJlcn0ubWRgO1xuXHRcdGNvbnN0IGNoYXB0ZXJGaWxlUGF0aCA9IGAke2NoYXB0ZXJzRm9sZGVyUGF0aH0vJHtjaGFwdGVyRmlsZU5hbWV9YDtcblxuXHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDaGFwdGVyRmlsZShcblx0XHRcdHsgY2hhcHRlcjogZGF0YS5jaGFwdGVyLCBzY2VuZXM6IGRhdGEuc2NlbmVzIH0sXG5cdFx0XHRjaGFwdGVyRmlsZVBhdGgsXG5cdFx0XHRkYXRhLnN0b3J5LnRpdGxlLFxuXHRcdFx0ZGF0YS5jb250ZW50QmxvY2tzLFxuXHRcdFx0ZGF0YS5jb250ZW50QmxvY2tSZWZzLFxuXHRcdFx0W11cblx0XHQpO1xuXG5cdFx0Y29uc3QgeyBieVNjZW5lLCBieUJlYXQgfSA9IHRoaXMuYnVpbGRDb250ZW50QmxvY2tBc3NvY2lhdGlvbk1hcHMoXG5cdFx0XHRkYXRhLmNvbnRlbnRCbG9ja3MsXG5cdFx0XHRkYXRhLmNvbnRlbnRCbG9ja1JlZnNcblx0XHQpO1xuXG5cdFx0YXdhaXQgdGhpcy5zeW5jU2NlbmVzVG9GaWxlc3lzdGVtKFxuXHRcdFx0ZGF0YS5zY2VuZXMsXG5cdFx0XHRmb2xkZXJQYXRoLFxuXHRcdFx0ZGF0YS5zdG9yeS50aXRsZSxcblx0XHRcdGJ5U2NlbmUsXG5cdFx0XHRieUJlYXRcblx0XHQpO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyB3cml0ZVNjZW5lQnVuZGxlKGRhdGE6IHtcblx0XHRzdG9yeVRpdGxlOiBzdHJpbmc7XG5cdFx0Zm9sZGVyUGF0aDogc3RyaW5nO1xuXHRcdHNjZW5lOiBTY2VuZTtcblx0XHRiZWF0czogQmVhdFtdO1xuXHRcdHNjZW5lQ29udGVudEJsb2Nrcz86IENvbnRlbnRCbG9ja1tdO1xuXHRcdGJlYXRDb250ZW50QmxvY2tNYXA/OiBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2tbXT47XG5cdFx0c2tpcFJlbW90ZUNvbnRlbnRGZXRjaD86IGJvb2xlYW47XG5cdH0pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyhgJHtkYXRhLmZvbGRlclBhdGh9LzAxLXNjZW5lc2ApO1xuXHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKGAke2RhdGEuZm9sZGVyUGF0aH0vMDItYmVhdHNgKTtcblxuXHRcdGNvbnN0IHNjZW5lQ29udGVudEJsb2NrcyA9XG5cdFx0XHRkYXRhLnNjZW5lQ29udGVudEJsb2NrcyA/P1xuXHRcdFx0KGRhdGEuc2tpcFJlbW90ZUNvbnRlbnRGZXRjaFxuXHRcdFx0XHQ/IFtdXG5cdFx0XHRcdDogYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrc0J5U2NlbmUoZGF0YS5zY2VuZS5pZCkpO1xuXG5cdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKGRhdGEuc2NlbmUpO1xuXHRcdGNvbnN0IHNjZW5lRmlsZVBhdGggPSBgJHtkYXRhLmZvbGRlclBhdGh9LzAxLXNjZW5lcy8ke3NjZW5lRmlsZU5hbWV9YDtcblxuXHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVTY2VuZUZpbGUoXG5cdFx0XHR7IHNjZW5lOiBkYXRhLnNjZW5lLCBiZWF0czogZGF0YS5iZWF0cyB9LFxuXHRcdFx0c2NlbmVGaWxlUGF0aCxcblx0XHRcdGRhdGEuc3RvcnlUaXRsZSxcblx0XHRcdHNjZW5lQ29udGVudEJsb2Nrcyxcblx0XHRcdFtdXG5cdFx0KTtcblxuXHRcdGZvciAoY29uc3QgYmVhdCBvZiBkYXRhLmJlYXRzKSB7XG5cdFx0XHRjb25zdCBwcm92aWRlZCA9IGRhdGEuYmVhdENvbnRlbnRCbG9ja01hcD8uZ2V0KGJlYXQuaWQpO1xuXHRcdFx0Y29uc3QgYmVhdENvbnRlbnRCbG9ja3MgPVxuXHRcdFx0XHRwcm92aWRlZCA/P1xuXHRcdFx0XHQoZGF0YS5za2lwUmVtb3RlQ29udGVudEZldGNoXG5cdFx0XHRcdFx0PyBbXVxuXHRcdFx0XHRcdDogYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrc0J5QmVhdChiZWF0LmlkKSk7XG5cblx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRjb25zdCBiZWF0RmlsZVBhdGggPSBgJHtkYXRhLmZvbGRlclBhdGh9LzAyLWJlYXRzLyR7YmVhdEZpbGVOYW1lfWA7XG5cblx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVCZWF0RmlsZShcblx0XHRcdFx0YmVhdCxcblx0XHRcdFx0YmVhdEZpbGVQYXRoLFxuXHRcdFx0XHRkYXRhLnN0b3J5VGl0bGUsXG5cdFx0XHRcdGJlYXRDb250ZW50QmxvY2tzXG5cdFx0XHQpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYnVpbGRDb250ZW50QmxvY2tBc3NvY2lhdGlvbk1hcHMoXG5cdFx0Y29udGVudEJsb2NrczogQ29udGVudEJsb2NrW10sXG5cdFx0Y29udGVudEJsb2NrUmVmczogQ29udGVudEFuY2hvcltdXG5cdCk6IHtcblx0XHRieVNjZW5lOiBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2tbXT47XG5cdFx0YnlCZWF0OiBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2tbXT47XG5cdH0ge1xuXHRcdGNvbnN0IGJ5U2NlbmUgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudEJsb2NrW10+KCk7XG5cdFx0Y29uc3QgYnlCZWF0ID0gbmV3IE1hcDxzdHJpbmcsIENvbnRlbnRCbG9ja1tdPigpO1xuXHRcdGNvbnN0IGJsb2NrQnlJZCA9IG5ldyBNYXAoY29udGVudEJsb2Nrcy5tYXAoYmxvY2sgPT4gW2Jsb2NrLmlkLCBibG9ja10pKTtcblxuXHRcdGZvciAoY29uc3QgcmVmIG9mIGNvbnRlbnRCbG9ja1JlZnMpIHtcblx0XHRcdGNvbnN0IGJsb2NrID0gYmxvY2tCeUlkLmdldChyZWYuY29udGVudF9ibG9ja19pZCk7XG5cdFx0XHRpZiAoIWJsb2NrKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAocmVmLmVudGl0eV90eXBlID09PSBcInNjZW5lXCIpIHtcblx0XHRcdFx0aWYgKCFieVNjZW5lLmhhcyhyZWYuZW50aXR5X2lkKSkge1xuXHRcdFx0XHRcdGJ5U2NlbmUuc2V0KHJlZi5lbnRpdHlfaWQsIFtdKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRieVNjZW5lLmdldChyZWYuZW50aXR5X2lkKSEucHVzaChibG9jayk7XG5cdFx0XHR9IGVsc2UgaWYgKHJlZi5lbnRpdHlfdHlwZSA9PT0gXCJiZWF0XCIpIHtcblx0XHRcdFx0aWYgKCFieUJlYXQuaGFzKHJlZi5lbnRpdHlfaWQpKSB7XG5cdFx0XHRcdFx0YnlCZWF0LnNldChyZWYuZW50aXR5X2lkLCBbXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnlCZWF0LmdldChyZWYuZW50aXR5X2lkKSEucHVzaChibG9jayk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHsgYnlTY2VuZSwgYnlCZWF0IH07XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHB1bGxTaW5nbGVFbnRpdHkoc3RvcnlJZDogc3RyaW5nLCB0YXJnZXQ6IFN5bmNFbnRpdHlUYXJnZXQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRzd2l0Y2ggKHRhcmdldC50eXBlKSB7XG5cdFx0XHRjYXNlIFwiY2hhcHRlclwiOlxuXHRcdFx0XHRhd2FpdCB0aGlzLnB1bGxDaGFwdGVyRW50aXR5KHN0b3J5SWQsIHRhcmdldC5pZCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcInNjZW5lXCI6XG5cdFx0XHRcdGF3YWl0IHRoaXMucHVsbFNjZW5lRW50aXR5KHN0b3J5SWQsIHRhcmdldC5pZCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImNvbnRlbnRcIjpcblx0XHRcdFx0YXdhaXQgdGhpcy5wdWxsQ29udGVudEJsb2NrRW50aXR5KHN0b3J5SWQsIHRhcmdldC5pZCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBlbnRpdHkgdHlwZTogJHt0YXJnZXQudHlwZX1gKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHB1bGxDaGFwdGVyRW50aXR5KHN0b3J5SWQ6IHN0cmluZywgY2hhcHRlcklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBzdG9yeSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFN0b3J5KHN0b3J5SWQpO1xuXHRcdGNvbnN0IGNoYXB0ZXIgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDaGFwdGVyKGNoYXB0ZXJJZCk7XG5cblx0XHRpZiAoY2hhcHRlci5zdG9yeV9pZCAhPT0gc3RvcnlJZCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiQ2hhcHRlciBkb2VzIG5vdCBiZWxvbmcgdG8gdGhlIHNlbGVjdGVkIHN0b3J5XCIpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHNjZW5lcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFNjZW5lcyhjaGFwdGVySWQpO1xuXHRcdGNvbnN0IHNjZW5lc1dpdGhCZWF0czogU2NlbmVXaXRoQmVhdHNbXSA9IGF3YWl0IFByb21pc2UuYWxsKFxuXHRcdFx0c2NlbmVzLm1hcChhc3luYyAoc2NlbmUpID0+IHtcblx0XHRcdFx0Y29uc3QgYmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0cyhzY2VuZS5pZCk7XG5cdFx0XHRcdHJldHVybiB7IHNjZW5lLCBiZWF0cyB9O1xuXHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0Y29uc3QgY29udGVudEJsb2NrcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRCbG9ja3MoY2hhcHRlcklkKTtcblx0XHRjb25zdCBjb250ZW50QmxvY2tSZWZzOiBDb250ZW50QW5jaG9yW10gPSBbXTtcblxuXHRcdGZvciAoY29uc3QgY29udGVudEJsb2NrIG9mIGNvbnRlbnRCbG9ja3MpIHtcblx0XHRcdGNvbnN0IHJlZnMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QW5jaG9ycyhjb250ZW50QmxvY2suaWQpO1xuXHRcdFx0Y29udGVudEJsb2NrUmVmcy5wdXNoKC4uLnJlZnMpO1xuXHRcdH1cblxuXHRcdGF3YWl0IHRoaXMud3JpdGVDaGFwdGVyQnVuZGxlKHtcblx0XHRcdHN0b3J5LFxuXHRcdFx0Y2hhcHRlcixcblx0XHRcdHNjZW5lczogc2NlbmVzV2l0aEJlYXRzLFxuXHRcdFx0Y29udGVudEJsb2Nrcyxcblx0XHRcdGNvbnRlbnRCbG9ja1JlZnMsXG5cdFx0fSk7XG5cblx0XHRuZXcgTm90aWNlKGBDaGFwdGVyIFwiJHtjaGFwdGVyLnRpdGxlfVwiIHN5bmNlZCBzdWNjZXNzZnVsbHlgKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcHVsbFNjZW5lRW50aXR5KHN0b3J5SWQ6IHN0cmluZywgc2NlbmVJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3Qgc2NlbmUgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRTY2VuZShzY2VuZUlkKTtcblx0XHRpZiAoc2NlbmUuc3RvcnlfaWQgIT09IHN0b3J5SWQpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlNjZW5lIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgc2VsZWN0ZWQgc3RvcnlcIik7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3RvcnkgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRTdG9yeShzdG9yeUlkKTtcblx0XHRjb25zdCBmb2xkZXJQYXRoID0gdGhpcy5maWxlTWFuYWdlci5nZXRTdG9yeUZvbGRlclBhdGgoc3RvcnkudGl0bGUpO1xuXHRcdGF3YWl0IHRoaXMuZW5zdXJlU3RvcnlGb2xkZXJzKGZvbGRlclBhdGgpO1xuXG5cdFx0Y29uc3QgYmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0cyhzY2VuZS5pZCk7XG5cdFx0Y29uc3Qgc2NlbmVDb250ZW50QmxvY2tzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrc0J5U2NlbmUoc2NlbmUuaWQpO1xuXHRcdGNvbnN0IGJlYXRDb250ZW50QmxvY2tNYXAgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudEJsb2NrW10+KCk7XG5cblx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdGNvbnN0IGJlYXRDb250ZW50QmxvY2tzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrc0J5QmVhdChiZWF0LmlkKTtcblx0XHRcdGJlYXRDb250ZW50QmxvY2tNYXAuc2V0KGJlYXQuaWQsIGJlYXRDb250ZW50QmxvY2tzKTtcblx0XHR9XG5cblx0XHRhd2FpdCB0aGlzLndyaXRlU2NlbmVCdW5kbGUoe1xuXHRcdFx0c3RvcnlUaXRsZTogc3RvcnkudGl0bGUsXG5cdFx0XHRmb2xkZXJQYXRoLFxuXHRcdFx0c2NlbmUsXG5cdFx0XHRiZWF0cyxcblx0XHRcdHNjZW5lQ29udGVudEJsb2Nrcyxcblx0XHRcdGJlYXRDb250ZW50QmxvY2tNYXAsXG5cdFx0fSk7XG5cblx0XHRhd2FpdCB0aGlzLnN5bmNTY2VuZUNvbnRlbnRCbG9ja3Moc2NlbmUsIGJlYXRzLCBmb2xkZXJQYXRoLCBzdG9yeS50aXRsZSk7XG5cblx0XHRuZXcgTm90aWNlKGBTY2VuZSBcIiR7c2NlbmUuZ29hbH1cIiBzeW5jZWQgc3VjY2Vzc2Z1bGx5YCk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHB1bGxDb250ZW50QmxvY2tFbnRpdHkoc3RvcnlJZDogc3RyaW5nLCBjb250ZW50QmxvY2tJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3Qgc3RvcnkgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRTdG9yeShzdG9yeUlkKTtcblx0XHRjb25zdCBjb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2soY29udGVudEJsb2NrSWQpO1xuXG5cdFx0aWYgKGNvbnRlbnRCbG9jay5jaGFwdGVyX2lkKSB7XG5cdFx0XHRjb25zdCBjaGFwdGVyID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q2hhcHRlcihjb250ZW50QmxvY2suY2hhcHRlcl9pZCk7XG5cdFx0XHRpZiAoY2hhcHRlci5zdG9yeV9pZCAhPT0gc3RvcnlJZCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDb250ZW50IGJsb2NrIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgc2VsZWN0ZWQgc3RvcnlcIik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3QgZm9sZGVyUGF0aCA9IHRoaXMuZmlsZU1hbmFnZXIuZ2V0U3RvcnlGb2xkZXJQYXRoKHN0b3J5LnRpdGxlKTtcblx0XHRhd2FpdCB0aGlzLmVuc3VyZUNvbnRlbnRGb2xkZXJzKGZvbGRlclBhdGgpO1xuXG5cdFx0YXdhaXQgdGhpcy53cml0ZUNvbnRlbnRCbG9ja1RvRm9sZGVyKGZvbGRlclBhdGgsIHN0b3J5LnRpdGxlLCBjb250ZW50QmxvY2spO1xuXHRcdG5ldyBOb3RpY2UoXCJDb250ZW50IGJsb2NrIHN5bmNlZCBzdWNjZXNzZnVsbHlcIik7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHB1c2hTaW5nbGVFbnRpdHkoXG5cdFx0Zm9sZGVyUGF0aDogc3RyaW5nLFxuXHRcdHRhcmdldDogU3luY0VudGl0eVRhcmdldCxcblx0XHRzdG9yeUlkOiBzdHJpbmcsXG5cdFx0c3RvcnlUaXRsZTogc3RyaW5nXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGxldCBlbnRpdHlMYWJlbDogc3RyaW5nO1xuXG5cdFx0c3dpdGNoICh0YXJnZXQudHlwZSkge1xuXHRcdFx0Y2FzZSBcImNoYXB0ZXJcIjpcblx0XHRcdFx0ZW50aXR5TGFiZWwgPSBhd2FpdCB0aGlzLnB1c2hDaGFwdGVyRW50aXR5KGZvbGRlclBhdGgsIHRhcmdldC5pZCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcInNjZW5lXCI6XG5cdFx0XHRcdGVudGl0eUxhYmVsID0gYXdhaXQgdGhpcy5wdXNoU2NlbmVFbnRpdHkoZm9sZGVyUGF0aCwgc3RvcnlJZCwgdGFyZ2V0LmlkKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiY29udGVudFwiOlxuXHRcdFx0XHRlbnRpdHlMYWJlbCA9IGF3YWl0IHRoaXMucHVzaENvbnRlbnRCbG9ja0VudGl0eShmb2xkZXJQYXRoLCB0YXJnZXQuaWQsIHN0b3J5VGl0bGUpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgZW50aXR5IHR5cGU6ICR7dGFyZ2V0LnR5cGV9YCk7XG5cdFx0fVxuXG5cdFx0bmV3IE5vdGljZShgJHtlbnRpdHlMYWJlbH0gcHVzaGVkIHN1Y2Nlc3NmdWxseWApO1xuXG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHRoaXMucHVsbFNpbmdsZUVudGl0eShzdG9yeUlkLCB0YXJnZXQpO1xuXHRcdH0gY2F0Y2ggKHB1bGxFcnIpIHtcblx0XHRcdGNvbnN0IHB1bGxFcnJvck1lc3NhZ2UgPVxuXHRcdFx0XHRwdWxsRXJyIGluc3RhbmNlb2YgRXJyb3IgPyBwdWxsRXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBzeW5jIGVudGl0eSBhZnRlciBwdXNoXCI7XG5cdFx0XHRuZXcgTm90aWNlKGBXYXJuaW5nOiAke3B1bGxFcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBwdXNoQ2hhcHRlckVudGl0eShmb2xkZXJQYXRoOiBzdHJpbmcsIGNoYXB0ZXJJZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHRjb25zdCBjaGFwdGVyRmlsZSA9IGF3YWl0IHRoaXMuZmluZENoYXB0ZXJGaWxlQnlJZChmb2xkZXJQYXRoLCBjaGFwdGVySWQpO1xuXHRcdGlmICghY2hhcHRlckZpbGUpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIkNoYXB0ZXIgZmlsZSBub3QgZm91bmQgbG9jYWxseVwiKTtcblx0XHR9XG5cblx0XHRhd2FpdCB0aGlzLnB1c2hDaGFwdGVyQ29udGVudEJsb2NrcyhjaGFwdGVyRmlsZS5wYXRoLCBmb2xkZXJQYXRoKTtcblx0XHRjb25zdCBsYWJlbCA9XG5cdFx0XHRjaGFwdGVyRmlsZS5mcm9udG1hdHRlcj8udGl0bGUgfHxcblx0XHRcdChjaGFwdGVyRmlsZS5mcm9udG1hdHRlcj8ubnVtYmVyID8gYENoYXB0ZXIgJHtjaGFwdGVyRmlsZS5mcm9udG1hdHRlci5udW1iZXJ9YCA6IFwiQ2hhcHRlclwiKTtcblx0XHRyZXR1cm4gbGFiZWw7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHB1c2hTY2VuZUVudGl0eShmb2xkZXJQYXRoOiBzdHJpbmcsIHN0b3J5SWQ6IHN0cmluZywgc2NlbmVJZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHRjb25zdCBzY2VuZUZpbGUgPSBhd2FpdCB0aGlzLmZpbmRTY2VuZUZpbGVCeUlkKGZvbGRlclBhdGgsIHNjZW5lSWQpO1xuXHRcdGlmICghc2NlbmVGaWxlKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJTY2VuZSBmaWxlIG5vdCBmb3VuZCBsb2NhbGx5XCIpO1xuXHRcdH1cblxuXHRcdGF3YWl0IHRoaXMucHVzaFNjZW5lQmVhdHMoc2NlbmVGaWxlLnBhdGgsIHN0b3J5SWQpO1xuXHRcdGF3YWl0IHRoaXMucHVzaFNjZW5lQ29udGVudEJsb2NrcyhzY2VuZUZpbGUucGF0aCwgZm9sZGVyUGF0aCk7XG5cblx0XHRjb25zdCBsYWJlbCA9IHNjZW5lRmlsZS5mcm9udG1hdHRlcj8uZ29hbFxuXHRcdFx0PyBgU2NlbmU6ICR7c2NlbmVGaWxlLmZyb250bWF0dGVyLmdvYWx9YFxuXHRcdFx0OiBcIlNjZW5lXCI7XG5cdFx0cmV0dXJuIGxhYmVsO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBwdXNoQ29udGVudEJsb2NrRW50aXR5KFxuXHRcdGZvbGRlclBhdGg6IHN0cmluZyxcblx0XHRjb250ZW50QmxvY2tJZDogc3RyaW5nLFxuXHRcdHN0b3J5VGl0bGU6IHN0cmluZ1xuXHQpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdGNvbnN0IGNvbnRlbnRzRm9sZGVyUGF0aCA9IGAke2ZvbGRlclBhdGh9LzAzLWNvbnRlbnRzYDtcblx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyhjb250ZW50c0ZvbGRlclBhdGgpO1xuXG5cdFx0Y29uc3QgbG9jYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tCeUlkKGNvbnRlbnRzRm9sZGVyUGF0aCwgY29udGVudEJsb2NrSWQpO1xuXHRcdGlmICghbG9jYWxDb250ZW50QmxvY2spIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIkNvbnRlbnQgYmxvY2sgZmlsZSBub3QgZm91bmQgbG9jYWxseVwiKTtcblx0XHR9XG5cblx0XHRjb25zdCB1cGRhdGVkQmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVDb250ZW50QmxvY2soY29udGVudEJsb2NrSWQsIHtcblx0XHRcdGNvbnRlbnQ6IGxvY2FsQ29udGVudEJsb2NrLmNvbnRlbnQsXG5cdFx0XHRtZXRhZGF0YTogbG9jYWxDb250ZW50QmxvY2subWV0YWRhdGEsXG5cdFx0XHR0eXBlOiBsb2NhbENvbnRlbnRCbG9jay50eXBlLFxuXHRcdFx0a2luZDogbG9jYWxDb250ZW50QmxvY2sua2luZCxcblx0XHRcdG9yZGVyX251bTogbG9jYWxDb250ZW50QmxvY2sub3JkZXJfbnVtID8/IHVuZGVmaW5lZCxcblx0XHR9KTtcblxuXHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIHVwZGF0ZWRCbG9jayk7XG5cdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUodXBkYXRlZEJsb2NrLCBmaWxlUGF0aCwgc3RvcnlUaXRsZSk7XG5cblx0XHRyZXR1cm4gXCJDb250ZW50IGJsb2NrXCI7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGVuc3VyZVN0b3J5Rm9sZGVycyhmb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyhmb2xkZXJQYXRoKTtcblx0XHRhd2FpdCB0aGlzLmVuc3VyZUNvbnRlbnRGb2xkZXJzKGZvbGRlclBhdGgpO1xuXHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKGAke2ZvbGRlclBhdGh9LzAwLWNoYXB0ZXJzYCk7XG5cdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHMoYCR7Zm9sZGVyUGF0aH0vMDEtc2NlbmVzYCk7XG5cdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHMoYCR7Zm9sZGVyUGF0aH0vMDItYmVhdHNgKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZW5zdXJlQ29udGVudEZvbGRlcnMoZm9sZGVyUGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgY29udGVudHNGb2xkZXJQYXRoID0gYCR7Zm9sZGVyUGF0aH0vMDMtY29udGVudHNgO1xuXHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKGNvbnRlbnRzRm9sZGVyUGF0aCk7XG5cdFx0Zm9yIChjb25zdCB0eXBlRm9sZGVyIG9mIFtcIjAwLXRleHRzXCIsIFwiMDEtaW1hZ2VzXCIsIFwiMDItdmlkZW9zXCIsIFwiMDMtYXVkaW9zXCIsIFwiMDQtZW1iZWRzXCIsIFwiMDUtbGlua3NcIl0pIHtcblx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKGAke2NvbnRlbnRzRm9sZGVyUGF0aH0vJHt0eXBlRm9sZGVyfWApO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgd3JpdGVDb250ZW50QmxvY2tUb0ZvbGRlcihcblx0XHRzdG9yeUZvbGRlclBhdGg6IHN0cmluZyxcblx0XHRzdG9yeVRpdGxlOiBzdHJpbmcsXG5cdFx0Y29udGVudEJsb2NrOiBDb250ZW50QmxvY2tcblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgdHlwZUZvbGRlclBhdGggPSB0aGlzLmZpbGVNYW5hZ2VyLmdldENvbnRlbnRCbG9ja0ZvbGRlclBhdGgoXG5cdFx0XHRzdG9yeUZvbGRlclBhdGgsXG5cdFx0XHRjb250ZW50QmxvY2sudHlwZSB8fCBcInRleHRcIlxuXHRcdCk7XG5cdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHModHlwZUZvbGRlclBhdGgpO1xuXHRcdGNvbnN0IGNvbnRlbnRCbG9ja0ZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGNvbnRlbnRCbG9jayk7XG5cdFx0Y29uc3QgY29udGVudEJsb2NrRmlsZVBhdGggPSBgJHt0eXBlRm9sZGVyUGF0aH0vJHtjb250ZW50QmxvY2tGaWxlTmFtZX1gO1xuXHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGNvbnRlbnRCbG9jaywgY29udGVudEJsb2NrRmlsZVBhdGgsIHN0b3J5VGl0bGUpO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBzeW5jU2NlbmVzVG9GaWxlc3lzdGVtKFxuXHRcdHNjZW5lc1dpdGhCZWF0czogU2NlbmVXaXRoQmVhdHNbXSxcblx0XHRmb2xkZXJQYXRoOiBzdHJpbmcsXG5cdFx0c3RvcnlUaXRsZTogc3RyaW5nLFxuXHRcdGNvbnRlbnRCbG9ja3NCeVNjZW5lPzogTWFwPHN0cmluZywgQ29udGVudEJsb2NrW10+LFxuXHRcdGNvbnRlbnRCbG9ja3NCeUJlYXQ/OiBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2tbXT5cblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3Qgc2tpcFJlbW90ZUZldGNoID0gQm9vbGVhbihjb250ZW50QmxvY2tzQnlTY2VuZSB8fCBjb250ZW50QmxvY2tzQnlCZWF0KTtcblx0XHRmb3IgKGNvbnN0IHsgc2NlbmUsIGJlYXRzIH0gb2Ygc2NlbmVzV2l0aEJlYXRzKSB7XG5cdFx0XHRhd2FpdCB0aGlzLndyaXRlU2NlbmVCdW5kbGUoe1xuXHRcdFx0XHRzdG9yeVRpdGxlLFxuXHRcdFx0XHRmb2xkZXJQYXRoLFxuXHRcdFx0XHRzY2VuZSxcblx0XHRcdFx0YmVhdHMsXG5cdFx0XHRcdHNjZW5lQ29udGVudEJsb2NrczogY29udGVudEJsb2Nrc0J5U2NlbmU/LmdldChzY2VuZS5pZCksXG5cdFx0XHRcdGJlYXRDb250ZW50QmxvY2tNYXA6IGNvbnRlbnRCbG9ja3NCeUJlYXQsXG5cdFx0XHRcdHNraXBSZW1vdGVDb250ZW50RmV0Y2g6IHNraXBSZW1vdGVGZXRjaCxcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgc3luY1NjZW5lQ29udGVudEJsb2Nrcyhcblx0XHRzY2VuZTogU2NlbmUsXG5cdFx0YmVhdHM6IEJlYXRbXSxcblx0XHRmb2xkZXJQYXRoOiBzdHJpbmcsXG5cdFx0c3RvcnlUaXRsZTogc3RyaW5nXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICghc2NlbmUuY2hhcHRlcl9pZCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGNvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzKHNjZW5lLmNoYXB0ZXJfaWQpO1xuXG5cdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2YgY29udGVudEJsb2Nrcykge1xuXHRcdFx0Y29uc3QgcmVmcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRBbmNob3JzKGNvbnRlbnRCbG9jay5pZCk7XG5cdFx0XHRjb25zdCBoYXNTY2VuZVJlZiA9IHJlZnMuc29tZShcblx0XHRcdFx0KHJlZikgPT4gcmVmLmVudGl0eV90eXBlID09PSBcInNjZW5lXCIgJiYgcmVmLmVudGl0eV9pZCA9PT0gc2NlbmUuaWRcblx0XHRcdCk7XG5cdFx0XHRjb25zdCBiZWF0SWRzID0gYmVhdHMubWFwKChiZWF0KSA9PiBiZWF0LmlkKTtcblx0XHRcdGNvbnN0IGhhc0JlYXRSZWYgPSByZWZzLnNvbWUoXG5cdFx0XHRcdChyZWYpID0+IHJlZi5lbnRpdHlfdHlwZSA9PT0gXCJiZWF0XCIgJiYgYmVhdElkcy5pbmNsdWRlcyhyZWYuZW50aXR5X2lkKVxuXHRcdFx0KTtcblxuXHRcdFx0aWYgKGhhc1NjZW5lUmVmIHx8IGhhc0JlYXRSZWYpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy53cml0ZUNvbnRlbnRCbG9ja1RvRm9sZGVyKGZvbGRlclBhdGgsIHN0b3J5VGl0bGUsIGNvbnRlbnRCbG9jayk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBmaW5kQ2hhcHRlckZpbGVCeUlkKFxuXHRcdGZvbGRlclBhdGg6IHN0cmluZyxcblx0XHRjaGFwdGVySWQ6IHN0cmluZ1xuXHQpOiBQcm9taXNlPHsgcGF0aDogc3RyaW5nOyBmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgYW55PiB8IG51bGwgfSB8IG51bGw+IHtcblx0XHRjb25zdCBjaGFwdGVyRmlsZXMgPSBhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmxpc3RDaGFwdGVyRmlsZXMoZm9sZGVyUGF0aCk7XG5cdFx0Zm9yIChjb25zdCBjaGFwdGVyRmlsZVBhdGggb2YgY2hhcHRlckZpbGVzKSB7XG5cdFx0XHRjb25zdCBmaWxlID0gdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLmdldEFic3RyYWN0RmlsZUJ5UGF0aChjaGFwdGVyRmlsZVBhdGgpO1xuXHRcdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkucmVhZChmaWxlKTtcblx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5maWxlTWFuYWdlci5wYXJzZUZyb250bWF0dGVyKGNvbnRlbnQpO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLmlkID09PSBjaGFwdGVySWQpIHtcblx0XHRcdFx0cmV0dXJuIHsgcGF0aDogY2hhcHRlckZpbGVQYXRoLCBmcm9udG1hdHRlciB9O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZmluZFNjZW5lRmlsZUJ5SWQoXG5cdFx0Zm9sZGVyUGF0aDogc3RyaW5nLFxuXHRcdHNjZW5lSWQ6IHN0cmluZ1xuXHQpOiBQcm9taXNlPHsgcGF0aDogc3RyaW5nOyBmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgYW55PiB8IG51bGwgfSB8IG51bGw+IHtcblx0XHRjb25zdCBzY2VuZUZpbGVzID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlci5saXN0U3RvcnlTY2VuZUZpbGVzKGZvbGRlclBhdGgpO1xuXHRcdGZvciAoY29uc3Qgc2NlbmVGaWxlUGF0aCBvZiBzY2VuZUZpbGVzKSB7XG5cdFx0XHRjb25zdCBmaWxlID0gdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLmdldEFic3RyYWN0RmlsZUJ5UGF0aChzY2VuZUZpbGVQYXRoKTtcblx0XHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLnJlYWQoZmlsZSk7XG5cdFx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMuZmlsZU1hbmFnZXIucGFyc2VGcm9udG1hdHRlcihjb250ZW50KTtcblx0XHRcdGlmIChmcm9udG1hdHRlci5pZCA9PT0gc2NlbmVJZCkge1xuXHRcdFx0XHRyZXR1cm4geyBwYXRoOiBzY2VuZUZpbGVQYXRoLCBmcm9udG1hdHRlciB9O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuXG4iLCAiaW1wb3J0IHsgQ29udGVudEJsb2NrIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFyc2VkUGFyYWdyYXBoIHtcblx0Y29udGVudDogc3RyaW5nOyAvLyBUZXh0IHdpdGhvdXQgdGhlIGxpbmtcblx0bGlua05hbWU6IHN0cmluZyB8IG51bGw7IC8vIEZpbGUgbmFtZSAoaWYgaGFzIGxpbmspXG5cdG9yaWdpbmFsT3JkZXI6IG51bWJlcjsgLy8gUG9zaXRpb24gaW4gY2hhcHRlciAoMC1pbmRleGVkKVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnNlZFNjZW5lIHtcblx0bGlua05hbWU6IHN0cmluZyB8IG51bGw7IC8vIEZpbGUgbmFtZSAoaWYgaGFzIGxpbmspXG5cdGdvYWw6IHN0cmluZzsgLy8gVGV4dCBiZWZvcmUgXCItXCIgb3IgZnVsbCB0ZXh0IGlmIG5vIFwiLVwiXG5cdHRpbWVSZWY6IHN0cmluZzsgLy8gVGV4dCBhZnRlciBcIi1cIiBvciBlbXB0eVxuXHRvcmlnaW5hbE9yZGVyOiBudW1iZXI7IC8vIFBvc2l0aW9uIGluIGNoYXB0ZXIgKDAtaW5kZXhlZClcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXJzZWRCZWF0IHtcblx0bGlua05hbWU6IHN0cmluZyB8IG51bGw7IC8vIEZpbGUgbmFtZSAoaWYgaGFzIGxpbmspXG5cdGludGVudDogc3RyaW5nOyAvLyBUZXh0IGJlZm9yZSBcIi0+XCIgb3IgZnVsbCB0ZXh0IGlmIG5vIFwiLT5cIlxuXHRvdXRjb21lOiBzdHJpbmc7IC8vIFRleHQgYWZ0ZXIgXCItPlwiIG9yIGVtcHR5XG5cdG9yaWdpbmFsT3JkZXI6IG51bWJlcjsgLy8gUG9zaXRpb24gcmVsYXRpdmUgdG8gc2NlbmUgKDAtaW5kZXhlZClcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXJzZWRTZWN0aW9uIHtcblx0dHlwZTogXCJwcm9zZVwiIHwgXCJzY2VuZVwiIHwgXCJiZWF0XCI7XG5cdHByb3NlPzogUGFyc2VkUGFyYWdyYXBoO1xuXHRzY2VuZT86IFBhcnNlZFNjZW5lO1xuXHRiZWF0PzogUGFyc2VkQmVhdDtcblx0b3JpZ2luYWxPcmRlcjogbnVtYmVyOyAvLyBBYnNvbHV0ZSBwb3NpdGlvbiBpbiBjaGFwdGVyICgwLWluZGV4ZWQpXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGllcmFyY2hpY2FsUHJvc2Uge1xuXHRzZWN0aW9uczogUGFyc2VkU2VjdGlvbltdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnNlZFNjZW5lQmVhdExpc3RJdGVtIHtcblx0dHlwZTogXCJzY2VuZVwiIHwgXCJiZWF0XCI7XG5cdGxpbmtOYW1lOiBzdHJpbmcgfCBudWxsO1xuXHRkaXNwbGF5VGV4dDogc3RyaW5nO1xuXHRoYXNQcm9zZTogYm9vbGVhbjtcblx0aW5kZW50TGV2ZWw6IG51bWJlcjsgLy8gMCBmb3Igc2NlbmUsIDEgZm9yIGJlYXRcblx0b3JpZ2luYWxPcmRlcjogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnNlZFNjZW5lQmVhdExpc3Qge1xuXHRpdGVtczogUGFyc2VkU2NlbmVCZWF0TGlzdEl0ZW1bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXJzZWRDaGFwdGVyTGlzdEl0ZW0ge1xuXHR0eXBlOiBcImNoYXB0ZXJcIiB8IFwic2NlbmVcIiB8IFwiYmVhdFwiO1xuXHRsaW5rTmFtZTogc3RyaW5nIHwgbnVsbDtcblx0ZGlzcGxheVRleHQ6IHN0cmluZztcblx0aGFzUHJvc2U6IGJvb2xlYW47XG5cdGluZGVudExldmVsOiBudW1iZXI7IC8vIDAgZm9yIGNoYXB0ZXIsIDEgZm9yIHNjZW5lLCAyIGZvciBiZWF0XG5cdG9yaWdpbmFsT3JkZXI6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXJzZWRDaGFwdGVyTGlzdCB7XG5cdGl0ZW1zOiBQYXJzZWRDaGFwdGVyTGlzdEl0ZW1bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXJzZWRCZWF0TGlzdEl0ZW0ge1xuXHRsaW5rTmFtZTogc3RyaW5nIHwgbnVsbDtcblx0ZGlzcGxheVRleHQ6IHN0cmluZztcblx0aGFzUHJvc2U6IGJvb2xlYW47XG5cdG9yaWdpbmFsT3JkZXI6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXJzZWRCZWF0TGlzdCB7XG5cdGl0ZW1zOiBQYXJzZWRCZWF0TGlzdEl0ZW1bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb250ZW50QmxvY2tDb21wYXJpc29uIHtcblx0cGFyYWdyYXBoOiBQYXJzZWRQYXJhZ3JhcGg7XG5cdGxvY2FsQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2sgfCBudWxsOyAvLyBGcm9tIC5tZCBmaWxlXG5cdHJlbW90ZUNvbnRlbnRCbG9jazogQ29udGVudEJsb2NrIHwgbnVsbDsgLy8gRnJvbSBBUElcblx0c3RhdHVzOiBcIm5ld1wiIHwgXCJ1bmNoYW5nZWRcIiB8IFwibG9jYWxfbW9kaWZpZWRcIiB8IFwicmVtb3RlX21vZGlmaWVkXCIgfCBcImNvbmZsaWN0XCI7XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIFByb3NlIHNlY3Rpb24gZnJvbSBhIGNoYXB0ZXIgbWFya2Rvd24gY29udGVudFxuICogRXh0cmFjdHMgaGllcmFyY2hpY2FsIHN0cnVjdHVyZTogc2NlbmVzICgjIyksIGJlYXRzICgjIyMpLCBhbmQgY29udGVudCBibG9ja3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSGllcmFyY2hpY2FsUHJvc2UoY2hhcHRlckNvbnRlbnQ6IHN0cmluZyk6IEhpZXJhcmNoaWNhbFByb3NlIHtcblx0Y29uc3Qgc2VjdGlvbnM6IFBhcnNlZFNlY3Rpb25bXSA9IFtdO1xuXG5cdC8vIEV4dHJhY3QgY29udGVudCBhZnRlciBmcm9udG1hdHRlclxuXHRjb25zdCBmcm9udG1hdHRlck1hdGNoID0gY2hhcHRlckNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcblx0Y29uc3QgY29udGVudFN0YXJ0ID0gZnJvbnRtYXR0ZXJNYXRjaCA/IGZyb250bWF0dGVyTWF0Y2hbMF0ubGVuZ3RoIDogMDtcblx0Y29uc3QgYm9keUNvbnRlbnQgPSBjaGFwdGVyQ29udGVudC5zdWJzdHJpbmcoY29udGVudFN0YXJ0KS50cmltKCk7XG5cblx0Ly8gRmluZCB0aGUgXCIjIyBDaGFwdGVyIE46IHt0aXRsZX1cIiBzZWN0aW9uXG5cdC8vIENhcHR1cmUgZXZlcnl0aGluZyB1bnRpbCB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudCBzaW5jZSBTY2VuZSBhbmQgQmVhdCBhcmUgcGFydCBvZiB0aGUgY2hhcHRlciBzZWN0aW9uXG5cdC8vIEFjY2VwdCB3aXRoIG9yIHdpdGhvdXQgYmxhbmsgbGluZSBhZnRlciB0aGUgY2hhcHRlciBoZWFkZXJcblx0Ly8gVXNlIG5vbi1ncmVlZHkgbWF0Y2ggdG8gc3RvcCBhdCBuZXh0ICMjIENoYXB0ZXIgaWYgaXQgZXhpc3RzICh0byBhdm9pZCBjYXB0dXJpbmcgZHVwbGljYXRlIHNlY3Rpb25zKVxuXHRjb25zdCBjaGFwdGVyU2VjdGlvbk1hdGNoID0gYm9keUNvbnRlbnQubWF0Y2goLyMjXFxzK0NoYXB0ZXJcXHMrXFxkKzpcXHMrW15cXG5dK1xccypcXG4rKFtcXHNcXFNdKj8pKD89XFxuIyNcXHMrQ2hhcHRlclxccytcXGQrOnwkKS8pO1xuXHRpZiAoIWNoYXB0ZXJTZWN0aW9uTWF0Y2gpIHtcblx0XHQvLyBUcnkgd2l0aG91dCByZXF1aXJpbmcgbmV3bGluZSAoY29udGVudCBvbiBzYW1lIGxpbmUgYXMgY2hhcHRlciBoZWFkZXIpXG5cdFx0Y29uc3QgY2hhcHRlclNlY3Rpb25NYXRjaFNhbWVMaW5lID0gYm9keUNvbnRlbnQubWF0Y2goLyMjXFxzK0NoYXB0ZXJcXHMrXFxkKzpcXHMrW15cXG5dK1xccysoW15cXG5dKykvKTtcblx0XHRpZiAoY2hhcHRlclNlY3Rpb25NYXRjaFNhbWVMaW5lKSB7XG5cdFx0XHRjb25zdCBwcm9zZUNvbnRlbnQgPSBjaGFwdGVyU2VjdGlvbk1hdGNoU2FtZUxpbmVbMV0udHJpbSgpO1xuXHRcdFx0Ly8gUHJvY2VzcyBzaW5nbGUgbGluZSBjb250ZW50XG5cdFx0XHRpZiAocHJvc2VDb250ZW50Lmxlbmd0aCA+IDAgJiYgIXByb3NlQ29udGVudC5zdGFydHNXaXRoKCcjJykpIHtcblx0XHRcdFx0Y29uc3QgcGFyYWdyYXBoOiBQYXJzZWRQYXJhZ3JhcGggPSB7XG5cdFx0XHRcdFx0Y29udGVudDogcHJvc2VDb250ZW50LFxuXHRcdFx0XHRcdGxpbmtOYW1lOiBudWxsLFxuXHRcdFx0XHRcdG9yaWdpbmFsT3JkZXI6IDAsXG5cdFx0XHRcdH07XG5cdFx0XHRcdHNlY3Rpb25zLnB1c2goe1xuXHRcdFx0XHRcdHR5cGU6IFwicHJvc2VcIixcblx0XHRcdFx0XHRwcm9zZTogcGFyYWdyYXBoLFxuXHRcdFx0XHRcdG9yaWdpbmFsT3JkZXI6IDAsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHsgc2VjdGlvbnMgfTtcblx0XHR9XG5cdFx0cmV0dXJuIHsgc2VjdGlvbnM6IFtdIH07XG5cdH1cblxuXHRcdGNvbnN0IHByb3NlQ29udGVudCA9IGNoYXB0ZXJTZWN0aW9uTWF0Y2hbMV0udHJpbSgpO1xuXHRjb25zdCBsaW5lcyA9IHByb3NlQ29udGVudC5zcGxpdCgvXFxuLyk7XG5cblx0bGV0IGN1cnJlbnRTY2VuZTogUGFyc2VkU2NlbmUgfCBudWxsID0gbnVsbDtcblx0bGV0IGN1cnJlbnRCZWF0OiBQYXJzZWRCZWF0IHwgbnVsbCA9IG51bGw7XG5cdGxldCBvcmRlciA9IDA7XG5cblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdGNvbnN0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7XG5cblx0XHQvLyBFbXB0eSBsaW5lIC0gc2tpcFxuXHRcdGlmICghbGluZSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIHNjZW5lIGhlYWRlciBGSVJTVDogIyMgU2NlbmU6IFtbbGlua3x0ZXh0XV0gb3IgIyMgU2NlbmU6IHRleHRcblx0XHRjb25zdCBzY2VuZU1hdGNoID0gbGluZS5tYXRjaCgvXiMjXFxzK1NjZW5lOlxccyooLispJC8pO1xuXHRcdGlmIChzY2VuZU1hdGNoKSB7XG5cdFx0XHRjb25zdCBzY2VuZVRleHQgPSBzY2VuZU1hdGNoWzFdLnRyaW0oKTtcblx0XHRcdGNvbnN0IHBhcnNlZFNjZW5lID0gcGFyc2VTY2VuZUhlYWRlcihzY2VuZVRleHQpO1xuXHRcdFx0cGFyc2VkU2NlbmUub3JpZ2luYWxPcmRlciA9IG9yZGVyKys7XG5cdFx0XHRjdXJyZW50U2NlbmUgPSBwYXJzZWRTY2VuZTtcblx0XHRcdGN1cnJlbnRCZWF0ID0gbnVsbDsgLy8gUmVzZXQgYmVhdCB3aGVuIG5ldyBzY2VuZSBzdGFydHNcblx0XHRcdHNlY3Rpb25zLnB1c2goe1xuXHRcdFx0XHR0eXBlOiBcInNjZW5lXCIsXG5cdFx0XHRcdHNjZW5lOiBwYXJzZWRTY2VuZSxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogcGFyc2VkU2NlbmUub3JpZ2luYWxPcmRlcixcblx0XHRcdH0pO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIGJlYXQgaGVhZGVyOiAjIyMgQmVhdDogW1tsaW5rfHRleHRdXSBvciAjIyMgQmVhdDogdGV4dFxuXHRcdGNvbnN0IGJlYXRNYXRjaCA9IGxpbmUubWF0Y2goL14jIyNcXHMrQmVhdDpcXHMqKC4rKSQvKTtcblx0XHRpZiAoYmVhdE1hdGNoKSB7XG5cdFx0XHRjb25zdCBiZWF0VGV4dCA9IGJlYXRNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRjb25zdCBwYXJzZWRCZWF0ID0gcGFyc2VCZWF0SGVhZGVyKGJlYXRUZXh0KTtcblx0XHRcdHBhcnNlZEJlYXQub3JpZ2luYWxPcmRlciA9IG9yZGVyKys7XG5cdFx0XHRjdXJyZW50QmVhdCA9IHBhcnNlZEJlYXQ7XG5cdFx0XHRzZWN0aW9ucy5wdXNoKHtcblx0XHRcdFx0dHlwZTogXCJiZWF0XCIsXG5cdFx0XHRcdGJlYXQ6IHBhcnNlZEJlYXQsXG5cdFx0XHRcdG9yaWdpbmFsT3JkZXI6IHBhcnNlZEJlYXQub3JpZ2luYWxPcmRlcixcblx0XHRcdH0pO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gU2tpcCBvdGhlciBtYXJrZG93biBoZWFkZXJzIChlLmcuLCAjIFRpdGxlLCAjIyBDYXBcdTAwRUR0dWxvLCBldGMuKVxuXHRcdC8vIEJ1dCBkb24ndCBza2lwIFNjZW5lIGFuZCBCZWF0IGhlYWRlcnMgd2hpY2ggYXJlIHBhcnQgb2YgdGhlIGNoYXB0ZXIgY29udGVudFxuXHRcdGlmIChsaW5lLnN0YXJ0c1dpdGgoJyMnKSAmJiAhbGluZS5tYXRjaCgvXiMjXFxzK1NjZW5lOi8pICYmICFsaW5lLm1hdGNoKC9eIyMjXFxzK0JlYXQ6LykpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBjb250ZW50IGJsb2NrOiBbW2xpbmt8Y29udGVudF1dIG9yIHBsYWluIHRleHRcblx0XHQvLyBNYXRjaCBjYW4gaGF2ZSBvcHRpb25hbCB3aGl0ZXNwYWNlIGFyb3VuZCB0aGUgbGlua1xuXHRcdGNvbnN0IHByb3NlTWF0Y2ggPSBsaW5lLm1hdGNoKC9eXFxzKlxcW1xcWyhbXlxcfF0rKVxcfChbXlxcXV0rKVxcXVxcXVxccyokLyk7XG5cdFx0aWYgKHByb3NlTWF0Y2gpIHtcblx0XHRcdGNvbnN0IGxpbmtOYW1lID0gcHJvc2VNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRjb25zdCBjb250ZW50ID0gcHJvc2VNYXRjaFsyXS50cmltKCk7XG5cdFx0XHRjb25zdCBwYXJhZ3JhcGg6IFBhcnNlZFBhcmFncmFwaCA9IHtcblx0XHRcdFx0Y29udGVudCxcblx0XHRcdFx0bGlua05hbWUsXG5cdFx0XHRcdG9yaWdpbmFsT3JkZXI6IG9yZGVyKyssXG5cdFx0XHR9O1xuXHRcdFx0c2VjdGlvbnMucHVzaCh7XG5cdFx0XHRcdHR5cGU6IFwicHJvc2VcIixcblx0XHRcdFx0cHJvc2U6IHBhcmFncmFwaCxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogcGFyYWdyYXBoLm9yaWdpbmFsT3JkZXIsXG5cdFx0XHR9KTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIFBsYWluIHRleHQgcGFyYWdyYXBoIChuZXcgY29udGVudCBibG9jayB3aXRob3V0IGxpbmspXG5cdFx0Ly8gT25seSBpZiBpdCdzIG5vdCBhIG1hcmtkb3duIGhlYWRlciBhbmQgbm90IGVtcHR5XG5cdFx0aWYgKGxpbmUubGVuZ3RoID4gMCAmJiAhbGluZS5zdGFydHNXaXRoKCcjJykpIHtcblx0XHRcdGNvbnN0IHBhcmFncmFwaDogUGFyc2VkUGFyYWdyYXBoID0ge1xuXHRcdFx0XHRjb250ZW50OiBsaW5lLFxuXHRcdFx0XHRsaW5rTmFtZTogbnVsbCxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogb3JkZXIrKyxcblx0XHRcdH07XG5cdFx0XHRzZWN0aW9ucy5wdXNoKHtcblx0XHRcdFx0dHlwZTogXCJwcm9zZVwiLFxuXHRcdFx0XHRwcm9zZTogcGFyYWdyYXBoLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBwYXJhZ3JhcGgub3JpZ2luYWxPcmRlcixcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB7IHNlY3Rpb25zIH07XG59XG5cbi8qKlxuICogUGFyc2UgYSBzY2VuZSBoZWFkZXI6ICMjIFtbbGlua3xnb2FsIC0gdGltZVJlZl1dIG9yICMjIGdvYWwgLSB0aW1lUmVmIG9yICMjIGdvYWxcbiAqL1xuZnVuY3Rpb24gcGFyc2VTY2VuZUhlYWRlcih0ZXh0OiBzdHJpbmcpOiBQYXJzZWRTY2VuZSB7XG5cdC8vIENoZWNrIGlmIGl0J3MgYSBsaW5rIGZvcm1hdDogW1tsaW5rfHRleHRdXVxuXHRjb25zdCBsaW5rTWF0Y2ggPSB0ZXh0Lm1hdGNoKC9eXFxbXFxbKFteXFx8XSspXFx8KFteXFxdXSspXFxdXFxdJC8pO1xuXHRpZiAobGlua01hdGNoKSB7XG5cdFx0Y29uc3QgbGlua05hbWUgPSBsaW5rTWF0Y2hbMV0udHJpbSgpO1xuXHRcdGNvbnN0IGRpc3BsYXlUZXh0ID0gbGlua01hdGNoWzJdLnRyaW0oKTtcblx0XHRjb25zdCB7IGdvYWwsIHRpbWVSZWYgfSA9IHBhcnNlU2NlbmVUZXh0KGRpc3BsYXlUZXh0KTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bGlua05hbWUsXG5cdFx0XHRnb2FsLFxuXHRcdFx0dGltZVJlZixcblx0XHRcdG9yaWdpbmFsT3JkZXI6IDAsIC8vIFdpbGwgYmUgc2V0IGJ5IGNhbGxlclxuXHRcdH07XG5cdH1cblxuXHQvLyBDaGVjayBpZiBpdCdzIGp1c3QgYSBsaW5rOiBbW2xpbmtdXVxuXHRjb25zdCBzaW1wbGVMaW5rTWF0Y2ggPSB0ZXh0Lm1hdGNoKC9eXFxbXFxbKFteXFxdXSspXFxdXFxdJC8pO1xuXHRpZiAoc2ltcGxlTGlua01hdGNoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGxpbmtOYW1lOiBzaW1wbGVMaW5rTWF0Y2hbMV0udHJpbSgpLFxuXHRcdFx0Z29hbDogXCJcIixcblx0XHRcdHRpbWVSZWY6IFwiXCIsXG5cdFx0XHRvcmlnaW5hbE9yZGVyOiAwLFxuXHRcdH07XG5cdH1cblxuXHQvLyBQbGFpbiB0ZXh0IC0gcGFyc2UgZ29hbCBhbmQgdGltZVJlZlxuXHRjb25zdCB7IGdvYWwsIHRpbWVSZWYgfSA9IHBhcnNlU2NlbmVUZXh0KHRleHQpO1xuXHRyZXR1cm4ge1xuXHRcdGxpbmtOYW1lOiBudWxsLFxuXHRcdGdvYWwsXG5cdFx0dGltZVJlZixcblx0XHRvcmlnaW5hbE9yZGVyOiAwLFxuXHR9O1xufVxuXG4vKipcbiAqIFBhcnNlIHNjZW5lIHRleHQgdG8gZXh0cmFjdCBnb2FsIGFuZCB0aW1lUmVmXG4gKiBGb3JtYXQ6IFwiZ29hbCAtIHRpbWVSZWZcIiBvciBqdXN0IFwiZ29hbFwiXG4gKi9cbmZ1bmN0aW9uIHBhcnNlU2NlbmVUZXh0KHRleHQ6IHN0cmluZyk6IHsgZ29hbDogc3RyaW5nOyB0aW1lUmVmOiBzdHJpbmcgfSB7XG5cdGNvbnN0IHBhcnRzID0gdGV4dC5zcGxpdCgvXFxzKi1cXHMqLyk7XG5cdGlmIChwYXJ0cy5sZW5ndGggPj0gMikge1xuXHRcdHJldHVybiB7XG5cdFx0XHRnb2FsOiBwYXJ0c1swXS50cmltKCksXG5cdFx0XHR0aW1lUmVmOiBwYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0gXCIpLnRyaW0oKSwgLy8gSm9pbiBpbiBjYXNlIHRoZXJlIGFyZSBtdWx0aXBsZSBcIi1cIlxuXHRcdH07XG5cdH1cblx0cmV0dXJuIHtcblx0XHRnb2FsOiB0ZXh0LnRyaW0oKSxcblx0XHR0aW1lUmVmOiBcIlwiLFxuXHR9O1xufVxuXG4vKipcbiAqIFBhcnNlIGEgYmVhdCBoZWFkZXI6ICMjIyBbW2xpbmt8aW50ZW50IC0+IG91dGNvbWVdXSBvciAjIyMgaW50ZW50IC0+IG91dGNvbWUgb3IgIyMjIGludGVudFxuICovXG5mdW5jdGlvbiBwYXJzZUJlYXRIZWFkZXIodGV4dDogc3RyaW5nKTogUGFyc2VkQmVhdCB7XG5cdC8vIENoZWNrIGlmIGl0J3MgYSBsaW5rIGZvcm1hdDogW1tsaW5rfHRleHRdXVxuXHRjb25zdCBsaW5rTWF0Y2ggPSB0ZXh0Lm1hdGNoKC9eXFxbXFxbKFteXFx8XSspXFx8KFteXFxdXSspXFxdXFxdJC8pO1xuXHRpZiAobGlua01hdGNoKSB7XG5cdFx0Y29uc3QgbGlua05hbWUgPSBsaW5rTWF0Y2hbMV0udHJpbSgpO1xuXHRcdGNvbnN0IGRpc3BsYXlUZXh0ID0gbGlua01hdGNoWzJdLnRyaW0oKTtcblx0XHRjb25zdCB7IGludGVudCwgb3V0Y29tZSB9ID0gcGFyc2VCZWF0VGV4dChkaXNwbGF5VGV4dCk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGxpbmtOYW1lLFxuXHRcdFx0aW50ZW50LFxuXHRcdFx0b3V0Y29tZSxcblx0XHRcdG9yaWdpbmFsT3JkZXI6IDAsIC8vIFdpbGwgYmUgc2V0IGJ5IGNhbGxlclxuXHRcdH07XG5cdH1cblxuXHQvLyBDaGVjayBpZiBpdCdzIGp1c3QgYSBsaW5rOiBbW2xpbmtdXVxuXHRjb25zdCBzaW1wbGVMaW5rTWF0Y2ggPSB0ZXh0Lm1hdGNoKC9eXFxbXFxbKFteXFxdXSspXFxdXFxdJC8pO1xuXHRpZiAoc2ltcGxlTGlua01hdGNoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGxpbmtOYW1lOiBzaW1wbGVMaW5rTWF0Y2hbMV0udHJpbSgpLFxuXHRcdFx0aW50ZW50OiBcIlwiLFxuXHRcdFx0b3V0Y29tZTogXCJcIixcblx0XHRcdG9yaWdpbmFsT3JkZXI6IDAsXG5cdFx0fTtcblx0fVxuXG5cdC8vIFBsYWluIHRleHQgLSBwYXJzZSBpbnRlbnQgYW5kIG91dGNvbWVcblx0Y29uc3QgeyBpbnRlbnQsIG91dGNvbWUgfSA9IHBhcnNlQmVhdFRleHQodGV4dCk7XG5cdHJldHVybiB7XG5cdFx0bGlua05hbWU6IG51bGwsXG5cdFx0aW50ZW50LFxuXHRcdG91dGNvbWUsXG5cdFx0b3JpZ2luYWxPcmRlcjogMCxcblx0fTtcbn1cblxuLyoqXG4gKiBQYXJzZSBiZWF0IHRleHQgdG8gZXh0cmFjdCBpbnRlbnQgYW5kIG91dGNvbWVcbiAqIEZvcm1hdDogXCJpbnRlbnQgLT4gb3V0Y29tZVwiIG9yIGp1c3QgXCJpbnRlbnRcIlxuICovXG5mdW5jdGlvbiBwYXJzZUJlYXRUZXh0KHRleHQ6IHN0cmluZyk6IHsgaW50ZW50OiBzdHJpbmc7IG91dGNvbWU6IHN0cmluZyB9IHtcblx0Y29uc3QgcGFydHMgPSB0ZXh0LnNwbGl0KC9cXHMqLT5cXHMqLyk7XG5cdGlmIChwYXJ0cy5sZW5ndGggPj0gMikge1xuXHRcdHJldHVybiB7XG5cdFx0XHRpbnRlbnQ6IHBhcnRzWzBdLnRyaW0oKSxcblx0XHRcdG91dGNvbWU6IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLT4gXCIpLnRyaW0oKSwgLy8gSm9pbiBpbiBjYXNlIHRoZXJlIGFyZSBtdWx0aXBsZSBcIi0+XCJcblx0XHR9O1xuXHR9XG5cdHJldHVybiB7XG5cdFx0aW50ZW50OiB0ZXh0LnRyaW0oKSxcblx0XHRvdXRjb21lOiBcIlwiLFxuXHR9O1xufVxuXG4vKipcbiAqIExlZ2FjeSBmdW5jdGlvbiAtIGtlcHQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAqIFBhcnNlIHRoZSBQcm9zZSBzZWN0aW9uIGZyb20gYSBjaGFwdGVyIG1hcmtkb3duIGNvbnRlbnRcbiAqIEV4dHJhY3RzIHBhcmFncmFwaHMgYW5kIGlkZW50aWZpZXMgd2hpY2ggb25lcyBoYXZlIGxpbmtzIHRvIGNvbnRlbnQgYmxvY2tzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNoYXB0ZXJQcm9zZShjaGFwdGVyQ29udGVudDogc3RyaW5nKTogUGFyc2VkUGFyYWdyYXBoW10ge1xuXHRjb25zdCBoaWVyYXJjaGljYWwgPSBwYXJzZUhpZXJhcmNoaWNhbFByb3NlKGNoYXB0ZXJDb250ZW50KTtcblx0Y29uc3QgcGFyYWdyYXBoczogUGFyc2VkUGFyYWdyYXBoW10gPSBbXTtcblxuXHRmb3IgKGNvbnN0IHNlY3Rpb24gb2YgaGllcmFyY2hpY2FsLnNlY3Rpb25zKSB7XG5cdFx0aWYgKHNlY3Rpb24udHlwZSA9PT0gXCJwcm9zZVwiICYmIHNlY3Rpb24ucHJvc2UpIHtcblx0XHRcdHBhcmFncmFwaHMucHVzaChzZWN0aW9uLnByb3NlKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gcGFyYWdyYXBocztcbn1cblxuLyoqXG4gKiBDb21wYXJlIGxvY2FsIGFuZCByZW1vdGUgY29udGVudCBibG9ja3MgdG8gZGV0ZXJtaW5lIHN0YXR1c1xuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZUNvbnRlbnRCbG9ja3MoXG5cdHBhcmFncmFwaDogUGFyc2VkUGFyYWdyYXBoLFxuXHRsb2NhbENvbnRlbnRCbG9jazogQ29udGVudEJsb2NrIHwgbnVsbCxcblx0cmVtb3RlQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2sgfCBudWxsXG4pOiBDb250ZW50QmxvY2tDb21wYXJpc29uW1wic3RhdHVzXCJdIHtcblx0Y29uc3QgcGFyYWdyYXBoQ29udGVudCA9IHBhcmFncmFwaC5jb250ZW50LnRyaW0oKTtcblxuXHQvLyBQYXJhZ3JhcGggd2l0aG91dCBsaW5rIC0gY2hlY2sgaWYgcmVtb3RlIGV4aXN0cyB3aXRoIHNhbWUgY29udGVudFxuXHRpZiAoIXBhcmFncmFwaC5saW5rTmFtZSkge1xuXHRcdGlmIChyZW1vdGVDb250ZW50QmxvY2sgJiYgcmVtb3RlQ29udGVudEJsb2NrLmNvbnRlbnQudHJpbSgpID09PSBwYXJhZ3JhcGhDb250ZW50KSB7XG5cdFx0XHQvLyBSZW1vdGUgZXhpc3RzIHdpdGggc2FtZSBjb250ZW50IC0gdHJlYXQgYXMgdW5jaGFuZ2VkIGlmIGxvY2FsIG1hdGNoZXMsIG90aGVyd2lzZSBuZWVkIHRvIGNyZWF0ZSBsb2NhbCBmaWxlXG5cdFx0XHRpZiAobG9jYWxDb250ZW50QmxvY2sgJiYgbG9jYWxDb250ZW50QmxvY2suaWQgPT09IHJlbW90ZUNvbnRlbnRCbG9jay5pZCkge1xuXHRcdFx0XHRyZXR1cm4gXCJ1bmNoYW5nZWRcIjtcblx0XHRcdH1cblx0XHRcdC8vIFJlbW90ZSBleGlzdHMgYnV0IG5vIGxvY2FsIGZpbGUgLSBuZWVkIHRvIGNyZWF0ZSBsb2NhbCBmaWxlICh0cmVhdCBhcyB1bmNoYW5nZWQgZm9yIGNvbnRlbnQsIGJ1dCBuZWVkIGZpbGUgY3JlYXRpb24pXG5cdFx0XHRyZXR1cm4gXCJ1bmNoYW5nZWRcIjtcblx0XHR9XG5cdFx0Ly8gTm8gcmVtb3RlIG1hdGNoIC0gdGhpcyBpcyBhIG5ldyBjb250ZW50IGJsb2NrXG5cdFx0cmV0dXJuIFwibmV3XCI7XG5cdH1cblxuXHQvLyBObyBsb2NhbCBmaWxlIGZvdW5kIChzaG91bGRuJ3QgaGFwcGVuIGlmIGxpbmsgZXhpc3RzLCBidXQgaGFuZGxlIGdyYWNlZnVsbHkpXG5cdGlmICghbG9jYWxDb250ZW50QmxvY2spIHtcblx0XHQvLyBJZiByZW1vdGUgZXhpc3RzIHdpdGggc2FtZSBjb250ZW50LCB0cmVhdCBhcyByZW1vdGVfbW9kaWZpZWRcblx0XHRpZiAocmVtb3RlQ29udGVudEJsb2NrICYmIHJlbW90ZUNvbnRlbnRCbG9jay5jb250ZW50LnRyaW0oKSA9PT0gcGFyYWdyYXBoQ29udGVudCkge1xuXHRcdFx0cmV0dXJuIFwicmVtb3RlX21vZGlmaWVkXCI7XG5cdFx0fVxuXHRcdHJldHVybiBcIm5ld1wiO1xuXHR9XG5cblx0Ly8gTm8gcmVtb3RlIGNvbnRlbnQgYmxvY2sgZm91bmQgKGRlbGV0ZWQgb24gc2VydmVyPylcblx0aWYgKCFyZW1vdGVDb250ZW50QmxvY2spIHtcblx0XHRyZXR1cm4gXCJsb2NhbF9tb2RpZmllZFwiO1xuXHR9XG5cblx0Y29uc3QgbG9jYWxDb250ZW50ID0gbG9jYWxDb250ZW50QmxvY2suY29udGVudC50cmltKCk7XG5cdGNvbnN0IHJlbW90ZUNvbnRlbnQgPSByZW1vdGVDb250ZW50QmxvY2suY29udGVudC50cmltKCk7XG5cblx0Ly8gQm90aCBsb2NhbCBhbmQgcmVtb3RlIG1hdGNoIHBhcmFncmFwaFxuXHRpZiAobG9jYWxDb250ZW50ID09PSBwYXJhZ3JhcGhDb250ZW50ICYmIHJlbW90ZUNvbnRlbnQgPT09IHBhcmFncmFwaENvbnRlbnQpIHtcblx0XHRyZXR1cm4gXCJ1bmNoYW5nZWRcIjtcblx0fVxuXG5cdC8vIE9ubHkgcGFyYWdyYXBoIGNoYW5nZWQgKGxvY2FsIGVkaXQpXG5cdGlmIChwYXJhZ3JhcGhDb250ZW50ICE9PSBsb2NhbENvbnRlbnQgJiYgcGFyYWdyYXBoQ29udGVudCAhPT0gcmVtb3RlQ29udGVudCAmJiBsb2NhbENvbnRlbnQgPT09IHJlbW90ZUNvbnRlbnQpIHtcblx0XHRyZXR1cm4gXCJsb2NhbF9tb2RpZmllZFwiO1xuXHR9XG5cblx0Ly8gT25seSByZW1vdGUgY2hhbmdlZCAoc2VydmVyIGVkaXQpXG5cdGlmIChsb2NhbENvbnRlbnQgPT09IHBhcmFncmFwaENvbnRlbnQgJiYgcmVtb3RlQ29udGVudCAhPT0gcGFyYWdyYXBoQ29udGVudCkge1xuXHRcdHJldHVybiBcInJlbW90ZV9tb2RpZmllZFwiO1xuXHR9XG5cblx0Ly8gQm90aCBjaGFuZ2VkIChjb25mbGljdClcblx0aWYgKHBhcmFncmFwaENvbnRlbnQgIT09IGxvY2FsQ29udGVudCAmJiBwYXJhZ3JhcGhDb250ZW50ICE9PSByZW1vdGVDb250ZW50ICYmIGxvY2FsQ29udGVudCAhPT0gcmVtb3RlQ29udGVudCkge1xuXHRcdHJldHVybiBcImNvbmZsaWN0XCI7XG5cdH1cblxuXHQvLyBQYXJhZ3JhcGggbWF0Y2hlcyByZW1vdGUgYnV0IG5vdCBsb2NhbCAobG9jYWwgZmlsZSBvdXRkYXRlZClcblx0aWYgKHBhcmFncmFwaENvbnRlbnQgPT09IHJlbW90ZUNvbnRlbnQgJiYgbG9jYWxDb250ZW50ICE9PSByZW1vdGVDb250ZW50KSB7XG5cdFx0cmV0dXJuIFwicmVtb3RlX21vZGlmaWVkXCI7XG5cdH1cblxuXHQvLyBEZWZhdWx0IHRvIGNvbmZsaWN0IGlmIHVuY2xlYXJcblx0cmV0dXJuIFwiY29uZmxpY3RcIjtcbn1cblxuLyoqXG4gKiBQYXJzZSB0aGUgXCIjIyBTY2VuZXMgJiBCZWF0c1wiIGxpc3QgZnJvbSBjaGFwdGVyIGNvbnRlbnRcbiAqIEZvcm1hdDpcbiAqICMjIFNjZW5lcyAmIEJlYXRzXG4gKiBcbiAqICsgW1tsaW5rfFNjZW5lIE46IHRleHRdXVxuICogICAtIFtbbGlua3xCZWF0IE46IHRleHRdXVxuICogICArIFtbbGlua3xCZWF0IE46IHRleHRdXVxuICogLSBbW2xpbmt8U2NlbmUgTjogdGV4dF1dXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNjZW5lQmVhdExpc3QoY2hhcHRlckNvbnRlbnQ6IHN0cmluZyk6IFBhcnNlZFNjZW5lQmVhdExpc3Qge1xuXHRjb25zdCBpdGVtczogUGFyc2VkU2NlbmVCZWF0TGlzdEl0ZW1bXSA9IFtdO1xuXG5cdC8vIEV4dHJhY3QgY29udGVudCBhZnRlciBmcm9udG1hdHRlclxuXHRjb25zdCBmcm9udG1hdHRlck1hdGNoID0gY2hhcHRlckNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcblx0Y29uc3QgY29udGVudFN0YXJ0ID0gZnJvbnRtYXR0ZXJNYXRjaCA/IGZyb250bWF0dGVyTWF0Y2hbMF0ubGVuZ3RoIDogMDtcblx0Y29uc3QgYm9keUNvbnRlbnQgPSBjaGFwdGVyQ29udGVudC5zdWJzdHJpbmcoY29udGVudFN0YXJ0KS50cmltKCk7XG5cblx0Ly8gRmluZCB0aGUgXCIjIyBTY2VuZXMgJiBCZWF0c1wiIHNlY3Rpb25cblx0Y29uc3QgbGlzdFNlY3Rpb25NYXRjaCA9IGJvZHlDb250ZW50Lm1hdGNoKC8jI1xccytTY2VuZXNcXHMrJlxccytCZWF0c1xccypcXG4rKFtcXHNcXFNdKj8pKD89XFxuIyN8JCkvKTtcblx0aWYgKCFsaXN0U2VjdGlvbk1hdGNoKSB7XG5cdFx0cmV0dXJuIHsgaXRlbXM6IFtdIH07XG5cdH1cblxuXHRjb25zdCBsaXN0Q29udGVudCA9IGxpc3RTZWN0aW9uTWF0Y2hbMV0udHJpbSgpO1xuXHRjb25zdCBsaW5lcyA9IGxpc3RDb250ZW50LnNwbGl0KC9cXG4vKTtcblxuXHRsZXQgb3JkZXIgPSAwO1xuXHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcblx0XHRjb25zdCB0cmltbWVkTGluZSA9IGxpbmUudHJpbSgpO1xuXHRcdGlmICghdHJpbW1lZExpbmUpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGlmIGl0J3MgYSBzY2VuZSBvciBiZWF0IGl0ZW1cblx0XHQvLyBGb3JtYXQ6IFsrLy1dIFtbbGlua3x0ZXh0XV0gb3IgWysvLV0gdGV4dFxuXHRcdGNvbnN0IGl0ZW1NYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eKFsrLV0pXFxzKyguKykkLyk7XG5cdFx0aWYgKCFpdGVtTWF0Y2gpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IGhhc1Byb3NlID0gaXRlbU1hdGNoWzFdID09PSBcIitcIjtcblx0XHRjb25zdCBpdGVtVGV4dCA9IGl0ZW1NYXRjaFsyXS50cmltKCk7XG5cdFx0Ly8gQ291bnQgdGFicyBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBsaW5lIChtb3JlIHJlbGlhYmxlIHRoYW4gc3BhY2VzKVxuXHRcdGNvbnN0IHRhYk1hdGNoID0gbGluZS5tYXRjaCgvXihcXHQqKS8pO1xuXHRcdGNvbnN0IGluZGVudExldmVsID0gdGFiTWF0Y2ggPyB0YWJNYXRjaFsxXS5sZW5ndGggOiAwO1xuXHRcdGNvbnN0IGlzQmVhdCA9IGluZGVudExldmVsID4gMDtcblxuXHRcdC8vIFBhcnNlIGxpbmsgaWYgcHJlc2VudFxuXHRcdGNvbnN0IGxpbmtNYXRjaCA9IGl0ZW1UZXh0Lm1hdGNoKC9eXFxbXFxbKFteXFx8XSspXFx8KFteXFxdXSspXFxdXFxdJC8pO1xuXHRcdGxldCBsaW5rTmFtZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IGRpc3BsYXlUZXh0OiBzdHJpbmc7XG5cblx0XHRpZiAobGlua01hdGNoKSB7XG5cdFx0XHRsaW5rTmFtZSA9IGxpbmtNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRkaXNwbGF5VGV4dCA9IGxpbmtNYXRjaFsyXS50cmltKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRpc3BsYXlUZXh0ID0gaXRlbVRleHQ7XG5cdFx0fVxuXG5cdFx0aXRlbXMucHVzaCh7XG5cdFx0XHR0eXBlOiBpc0JlYXQgPyBcImJlYXRcIiA6IFwic2NlbmVcIixcblx0XHRcdGxpbmtOYW1lLFxuXHRcdFx0ZGlzcGxheVRleHQsXG5cdFx0XHRoYXNQcm9zZSxcblx0XHRcdGluZGVudExldmVsOiBpc0JlYXQgPyAxIDogMCxcblx0XHRcdG9yaWdpbmFsT3JkZXI6IG9yZGVyKyssXG5cdFx0fSk7XG5cdH1cblxuXHRyZXR1cm4geyBpdGVtcyB9O1xufVxuXG4vKipcbiAqIFBhcnNlIHRoZSBcIiMjIENoYXB0ZXJzLCBTY2VuZXMgJiBCZWF0c1wiIGxpc3QgZnJvbSBzdG9yeSBjb250ZW50XG4gKiBGb3JtYXQ6XG4gKiAjIyBDaGFwdGVycywgU2NlbmVzICYgQmVhdHNcbiAqIFxuICogLSBbW2xpbmt8Q2hhcHRlciBOOiB0aXRsZV1dXG4gKiAgIC0gW1tsaW5rfFNjZW5lIE46IGdvYWwgLSB0aW1lUmVmXV1cbiAqICAgICAtIFtbbGlua3xCZWF0IE46IGludGVudCAtPiBvdXRjb21lXV1cbiAqICAgICAtIFtbbGlua3xCZWF0IE46IGludGVudF1dXG4gKiAgIC0gW1tsaW5rfFNjZW5lIE46IGdvYWxdXVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDaGFwdGVyTGlzdChzdG9yeUNvbnRlbnQ6IHN0cmluZyk6IFBhcnNlZENoYXB0ZXJMaXN0IHtcblx0Y29uc3QgaXRlbXM6IFBhcnNlZENoYXB0ZXJMaXN0SXRlbVtdID0gW107XG5cblx0Ly8gRXh0cmFjdCBjb250ZW50IGFmdGVyIGZyb250bWF0dGVyXG5cdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBzdG9yeUNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcblx0Y29uc3QgY29udGVudFN0YXJ0ID0gZnJvbnRtYXR0ZXJNYXRjaCA/IGZyb250bWF0dGVyTWF0Y2hbMF0ubGVuZ3RoIDogMDtcblx0Y29uc3QgYm9keUNvbnRlbnQgPSBzdG9yeUNvbnRlbnQuc3Vic3RyaW5nKGNvbnRlbnRTdGFydCkudHJpbSgpO1xuXG5cdC8vIEZpbmQgdGhlIFwiIyMgQ2hhcHRlcnMsIFNjZW5lcyAmIEJlYXRzXCIgc2VjdGlvbiAob3IgXCIjIyBDaGFwdGVyc1wiIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5KVxuXHRjb25zdCBsaXN0U2VjdGlvbk1hdGNoID0gYm9keUNvbnRlbnQubWF0Y2goLyMjXFxzK0NoYXB0ZXJzKD86LFxccypTY2VuZXNcXHMqJlxccypCZWF0cyk/XFxzKlxcbisoW1xcc1xcU10qPykoPz1cXG4jI3wkKS8pO1xuXHRpZiAoIWxpc3RTZWN0aW9uTWF0Y2gpIHtcblx0XHRyZXR1cm4geyBpdGVtczogW10gfTtcblx0fVxuXG5cdGNvbnN0IGxpc3RDb250ZW50ID0gbGlzdFNlY3Rpb25NYXRjaFsxXS50cmltKCk7XG5cdGNvbnN0IGxpbmVzID0gbGlzdENvbnRlbnQuc3BsaXQoL1xcbi8pO1xuXG5cdGxldCBvcmRlciA9IDA7XG5cdGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuXHRcdGNvbnN0IHRyaW1tZWRMaW5lID0gbGluZS50cmltKCk7XG5cdFx0aWYgKCF0cmltbWVkTGluZSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgaWYgaXQncyBhIGNoYXB0ZXIsIHNjZW5lIG9yIGJlYXQgaXRlbVxuXHRcdC8vIEZvcm1hdDogWysvLV0gW1tsaW5rfHRleHRdXSBvciBbKy8tXSB0ZXh0XG5cdFx0Y29uc3QgaXRlbU1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL14oWystXSlcXHMrKC4rKSQvKTtcblx0XHRpZiAoIWl0ZW1NYXRjaCkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgaGFzUHJvc2UgPSBpdGVtTWF0Y2hbMV0gPT09IFwiK1wiO1xuXHRcdGNvbnN0IGl0ZW1UZXh0ID0gaXRlbU1hdGNoWzJdLnRyaW0oKTtcblx0XHQvLyBDb3VudCB0YWJzIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGxpbmUgKG1vcmUgcmVsaWFibGUgdGhhbiBzcGFjZXMpXG5cdFx0Y29uc3QgdGFiTWF0Y2ggPSBsaW5lLm1hdGNoKC9eKFxcdCopLyk7XG5cdFx0Y29uc3QgaW5kZW50TGV2ZWwgPSB0YWJNYXRjaCA/IHRhYk1hdGNoWzFdLmxlbmd0aCA6IDA7XG5cdFx0XG5cdFx0Ly8gRGV0ZXJtaW5lIHR5cGUgYmFzZWQgb24gaW5kZW50IGxldmVsICh0YWJzKVxuXHRcdC8vIDAgdGFicyA9IGNoYXB0ZXIsIDEgdGFiID0gc2NlbmUsIDIgdGFicyA9IGJlYXRcblx0XHRsZXQgdHlwZTogXCJjaGFwdGVyXCIgfCBcInNjZW5lXCIgfCBcImJlYXRcIjtcblx0XHRpZiAoaW5kZW50TGV2ZWwgPT09IDApIHtcblx0XHRcdHR5cGUgPSBcImNoYXB0ZXJcIjtcblx0XHR9IGVsc2UgaWYgKGluZGVudExldmVsID09PSAxKSB7XG5cdFx0XHR0eXBlID0gXCJzY2VuZVwiO1xuXHRcdH0gZWxzZSBpZiAoaW5kZW50TGV2ZWwgPT09IDIpIHtcblx0XHRcdHR5cGUgPSBcImJlYXRcIjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gU2tpcCBpdGVtcyB3aXRoIHVuZXhwZWN0ZWQgaW5kZW50IGxldmVsXG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBQYXJzZSBsaW5rIGlmIHByZXNlbnRcblx0XHRjb25zdCBsaW5rTWF0Y2ggPSBpdGVtVGV4dC5tYXRjaCgvXlxcW1xcWyhbXlxcfF0rKVxcfChbXlxcXV0rKVxcXVxcXSQvKTtcblx0XHRsZXQgbGlua05hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBkaXNwbGF5VGV4dDogc3RyaW5nO1xuXG5cdFx0aWYgKGxpbmtNYXRjaCkge1xuXHRcdFx0bGlua05hbWUgPSBsaW5rTWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0ZGlzcGxheVRleHQgPSBsaW5rTWF0Y2hbMl0udHJpbSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkaXNwbGF5VGV4dCA9IGl0ZW1UZXh0O1xuXHRcdH1cblxuXHRcdGl0ZW1zLnB1c2goe1xuXHRcdFx0dHlwZSxcblx0XHRcdGxpbmtOYW1lLFxuXHRcdFx0ZGlzcGxheVRleHQsXG5cdFx0XHRoYXNQcm9zZSxcblx0XHRcdGluZGVudExldmVsOiBpbmRlbnRMZXZlbCAvIDIsIC8vIE5vcm1hbGl6ZSB0byAwLCAxLCAyXG5cdFx0XHRvcmlnaW5hbE9yZGVyOiBvcmRlcisrLFxuXHRcdH0pO1xuXHR9XG5cblx0cmV0dXJuIHsgaXRlbXMgfTtcbn1cblxuLyoqXG4gKiBQYXJzZSB0aGUgXCIjIyBCZWF0c1wiIGxpc3QgZnJvbSBzY2VuZSBjb250ZW50XG4gKiBGb3JtYXQ6XG4gKiAjIyBCZWF0c1xuICogXG4gKiAtIFtbbGlua3xCZWF0IE46IGludGVudCAtPiBvdXRjb21lXV1cbiAqICsgW1tsaW5rfEJlYXQgTjogaW50ZW50IC0+IG91dGNvbWVdXVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VCZWF0TGlzdChzY2VuZUNvbnRlbnQ6IHN0cmluZyk6IFBhcnNlZEJlYXRMaXN0IHtcblx0Y29uc3QgaXRlbXM6IFBhcnNlZEJlYXRMaXN0SXRlbVtdID0gW107XG5cblx0Ly8gRXh0cmFjdCBjb250ZW50IGFmdGVyIGZyb250bWF0dGVyXG5cdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBzY2VuZUNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcblx0Y29uc3QgY29udGVudFN0YXJ0ID0gZnJvbnRtYXR0ZXJNYXRjaCA/IGZyb250bWF0dGVyTWF0Y2hbMF0ubGVuZ3RoIDogMDtcblx0Y29uc3QgYm9keUNvbnRlbnQgPSBzY2VuZUNvbnRlbnQuc3Vic3RyaW5nKGNvbnRlbnRTdGFydCkudHJpbSgpO1xuXG5cdC8vIEZpbmQgdGhlIFwiIyMgQmVhdHNcIiBzZWN0aW9uXG5cdGNvbnN0IGxpc3RTZWN0aW9uTWF0Y2ggPSBib2R5Q29udGVudC5tYXRjaCgvIyNcXHMrQmVhdHNcXHMqXFxuKyhbXFxzXFxTXSo/KSg/PVxcbiMjfCQpLyk7XG5cdGlmICghbGlzdFNlY3Rpb25NYXRjaCkge1xuXHRcdHJldHVybiB7IGl0ZW1zOiBbXSB9O1xuXHR9XG5cblx0Y29uc3QgbGlzdENvbnRlbnQgPSBsaXN0U2VjdGlvbk1hdGNoWzFdLnRyaW0oKTtcblx0Y29uc3QgbGluZXMgPSBsaXN0Q29udGVudC5zcGxpdCgvXFxuLyk7XG5cblx0bGV0IG9yZGVyID0gMDtcblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG5cdFx0Y29uc3QgdHJpbW1lZExpbmUgPSBsaW5lLnRyaW0oKTtcblx0XHRpZiAoIXRyaW1tZWRMaW5lKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBTa2lwIHRoZSBpbmZvIGNhbGxvdXQgYmxvY2tcblx0XHRpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aChcIj5cIikpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGlmIGl0J3MgYSBiZWF0IGl0ZW1cblx0XHQvLyBGb3JtYXQ6IFsrLy1dIFtbbGlua3x0ZXh0XV0gb3IgWysvLV0gdGV4dFxuXHRcdGNvbnN0IGl0ZW1NYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eKFsrLV0pXFxzKyguKykkLyk7XG5cdFx0aWYgKCFpdGVtTWF0Y2gpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IGhhc1Byb3NlID0gaXRlbU1hdGNoWzFdID09PSBcIitcIjtcblx0XHRjb25zdCBpdGVtVGV4dCA9IGl0ZW1NYXRjaFsyXS50cmltKCk7XG5cblx0XHQvLyBQYXJzZSBsaW5rIGlmIHByZXNlbnRcblx0XHRjb25zdCBsaW5rTWF0Y2ggPSBpdGVtVGV4dC5tYXRjaCgvXlxcW1xcWyhbXlxcfF0rKVxcfChbXlxcXV0rKVxcXVxcXSQvKTtcblx0XHRsZXQgbGlua05hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBkaXNwbGF5VGV4dDogc3RyaW5nO1xuXG5cdFx0aWYgKGxpbmtNYXRjaCkge1xuXHRcdFx0bGlua05hbWUgPSBsaW5rTWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0ZGlzcGxheVRleHQgPSBsaW5rTWF0Y2hbMl0udHJpbSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkaXNwbGF5VGV4dCA9IGl0ZW1UZXh0O1xuXHRcdH1cblxuXHRcdGl0ZW1zLnB1c2goe1xuXHRcdFx0bGlua05hbWUsXG5cdFx0XHRkaXNwbGF5VGV4dCxcblx0XHRcdGhhc1Byb3NlLFxuXHRcdFx0b3JpZ2luYWxPcmRlcjogb3JkZXIrKyxcblx0XHR9KTtcblx0fVxuXG5cdHJldHVybiB7IGl0ZW1zIH07XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIFwiIyMgT3JwaGFuIFNjZW5lc1wiIGxpc3QgZnJvbSBzdG9yeSBjb250ZW50XG4gKiBGb3JtYXQ6XG4gKiAjIyBPcnBoYW4gU2NlbmVzXG4gKiBcbiAqIC0gW1tsaW5rfFNjZW5lIE46IGdvYWwgLSB0aW1lUmVmXV1cbiAqICsgW1tsaW5rfFNjZW5lIE46IGdvYWwgLSB0aW1lUmVmXV1cbiAqICAgLSBbW2xpbmt8QmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZV1dXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU9ycGhhblNjZW5lc0xpc3Qoc3RvcnlDb250ZW50OiBzdHJpbmcpOiBQYXJzZWRTY2VuZUJlYXRMaXN0IHtcblx0Y29uc3QgaXRlbXM6IFBhcnNlZFNjZW5lQmVhdExpc3RJdGVtW10gPSBbXTtcblxuXHQvLyBFeHRyYWN0IGNvbnRlbnQgYWZ0ZXIgZnJvbnRtYXR0ZXJcblx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IHN0b3J5Q29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuXHRjb25zdCBjb250ZW50U3RhcnQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXS5sZW5ndGggOiAwO1xuXHRjb25zdCBib2R5Q29udGVudCA9IHN0b3J5Q29udGVudC5zdWJzdHJpbmcoY29udGVudFN0YXJ0KS50cmltKCk7XG5cblx0Ly8gRmluZCB0aGUgXCIjIyBPcnBoYW4gU2NlbmVzXCIgc2VjdGlvblxuXHRjb25zdCBsaXN0U2VjdGlvbk1hdGNoID0gYm9keUNvbnRlbnQubWF0Y2goLyMjXFxzK09ycGhhblxccytTY2VuZXNcXHMqXFxuKyhbXFxzXFxTXSo/KSg/PVxcbiMjfCQpLyk7XG5cdGlmICghbGlzdFNlY3Rpb25NYXRjaCkge1xuXHRcdHJldHVybiB7IGl0ZW1zOiBbXSB9O1xuXHR9XG5cblx0Y29uc3QgbGlzdENvbnRlbnQgPSBsaXN0U2VjdGlvbk1hdGNoWzFdLnRyaW0oKTtcblx0Y29uc3QgbGluZXMgPSBsaXN0Q29udGVudC5zcGxpdCgvXFxuLyk7XG5cblx0bGV0IG9yZGVyID0gMDtcblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG5cdFx0Y29uc3QgdHJpbW1lZExpbmUgPSBsaW5lLnRyaW0oKTtcblx0XHRpZiAoIXRyaW1tZWRMaW5lKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBTa2lwIHRoZSBpbmZvIGNhbGxvdXQgYmxvY2tcblx0XHRpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aChcIj5cIikpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGlmIGl0J3MgYSBzY2VuZSBvciBiZWF0IGl0ZW1cblx0XHQvLyBGb3JtYXQ6IFsrLy1dIFtbbGlua3x0ZXh0XV0gb3IgWysvLV0gdGV4dFxuXHRcdGNvbnN0IGl0ZW1NYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eKFsrLV0pXFxzKyguKykkLyk7XG5cdFx0aWYgKCFpdGVtTWF0Y2gpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IGhhc1Byb3NlID0gaXRlbU1hdGNoWzFdID09PSBcIitcIjtcblx0XHRjb25zdCBpdGVtVGV4dCA9IGl0ZW1NYXRjaFsyXS50cmltKCk7XG5cdFx0Ly8gQ291bnQgdGFicyBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBsaW5lIChtb3JlIHJlbGlhYmxlIHRoYW4gc3BhY2VzKVxuXHRcdGNvbnN0IHRhYk1hdGNoID0gbGluZS5tYXRjaCgvXihcXHQqKS8pO1xuXHRcdGNvbnN0IGluZGVudExldmVsID0gdGFiTWF0Y2ggPyB0YWJNYXRjaFsxXS5sZW5ndGggOiAwO1xuXHRcdGNvbnN0IGlzQmVhdCA9IGluZGVudExldmVsID4gMDtcblxuXHRcdC8vIFBhcnNlIGxpbmsgaWYgcHJlc2VudFxuXHRcdGNvbnN0IGxpbmtNYXRjaCA9IGl0ZW1UZXh0Lm1hdGNoKC9eXFxbXFxbKFteXFx8XSspXFx8KFteXFxdXSspXFxdXFxdJC8pO1xuXHRcdGxldCBsaW5rTmFtZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IGRpc3BsYXlUZXh0OiBzdHJpbmc7XG5cblx0XHRpZiAobGlua01hdGNoKSB7XG5cdFx0XHRsaW5rTmFtZSA9IGxpbmtNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRkaXNwbGF5VGV4dCA9IGxpbmtNYXRjaFsyXS50cmltKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRpc3BsYXlUZXh0ID0gaXRlbVRleHQ7XG5cdFx0fVxuXG5cdFx0aXRlbXMucHVzaCh7XG5cdFx0XHR0eXBlOiBpc0JlYXQgPyBcImJlYXRcIiA6IFwic2NlbmVcIixcblx0XHRcdGxpbmtOYW1lLFxuXHRcdFx0ZGlzcGxheVRleHQsXG5cdFx0XHRoYXNQcm9zZSxcblx0XHRcdGluZGVudExldmVsOiBpc0JlYXQgPyAxIDogMCxcblx0XHRcdG9yaWdpbmFsT3JkZXI6IG9yZGVyKyssXG5cdFx0fSk7XG5cdH1cblxuXHRyZXR1cm4geyBpdGVtcyB9O1xufVxuXG4vKipcbiAqIFBhcnNlIHRoZSBcIiMjIE9ycGhhbiBCZWF0c1wiIGxpc3QgZnJvbSBzdG9yeSBjb250ZW50XG4gKiBGb3JtYXQ6XG4gKiAjIyBPcnBoYW4gQmVhdHNcbiAqIFxuICogLSBbW2xpbmt8QmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZV1dXG4gKiArIFtbbGlua3xCZWF0IE46IGludGVudCAtPiBvdXRjb21lXV1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlT3JwaGFuQmVhdHNMaXN0KHN0b3J5Q29udGVudDogc3RyaW5nKTogUGFyc2VkQmVhdExpc3Qge1xuXHRjb25zdCBpdGVtczogUGFyc2VkQmVhdExpc3RJdGVtW10gPSBbXTtcblxuXHQvLyBFeHRyYWN0IGNvbnRlbnQgYWZ0ZXIgZnJvbnRtYXR0ZXJcblx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IHN0b3J5Q29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuXHRjb25zdCBjb250ZW50U3RhcnQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXS5sZW5ndGggOiAwO1xuXHRjb25zdCBib2R5Q29udGVudCA9IHN0b3J5Q29udGVudC5zdWJzdHJpbmcoY29udGVudFN0YXJ0KS50cmltKCk7XG5cblx0Ly8gRmluZCB0aGUgXCIjIyBPcnBoYW4gQmVhdHNcIiBzZWN0aW9uXG5cdGNvbnN0IGxpc3RTZWN0aW9uTWF0Y2ggPSBib2R5Q29udGVudC5tYXRjaCgvIyNcXHMrT3JwaGFuXFxzK0JlYXRzXFxzKlxcbisoW1xcc1xcU10qPykoPz1cXG4jI3wkKS8pO1xuXHRpZiAoIWxpc3RTZWN0aW9uTWF0Y2gpIHtcblx0XHRyZXR1cm4geyBpdGVtczogW10gfTtcblx0fVxuXG5cdGNvbnN0IGxpc3RDb250ZW50ID0gbGlzdFNlY3Rpb25NYXRjaFsxXS50cmltKCk7XG5cdGNvbnN0IGxpbmVzID0gbGlzdENvbnRlbnQuc3BsaXQoL1xcbi8pO1xuXG5cdGxldCBvcmRlciA9IDA7XG5cdGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuXHRcdGNvbnN0IHRyaW1tZWRMaW5lID0gbGluZS50cmltKCk7XG5cdFx0aWYgKCF0cmltbWVkTGluZSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gU2tpcCB0aGUgaW5mbyBjYWxsb3V0IGJsb2NrXG5cdFx0aWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoXCI+XCIpKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBpZiBpdCdzIGEgYmVhdCBpdGVtXG5cdFx0Ly8gRm9ybWF0OiBbKy8tXSBbW2xpbmt8dGV4dF1dIG9yIFsrLy1dIHRleHRcblx0XHRjb25zdCBpdGVtTWF0Y2ggPSB0cmltbWVkTGluZS5tYXRjaCgvXihbKy1dKVxccysoLispJC8pO1xuXHRcdGlmICghaXRlbU1hdGNoKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRjb25zdCBoYXNQcm9zZSA9IGl0ZW1NYXRjaFsxXSA9PT0gXCIrXCI7XG5cdFx0Y29uc3QgaXRlbVRleHQgPSBpdGVtTWF0Y2hbMl0udHJpbSgpO1xuXG5cdFx0Ly8gUGFyc2UgbGluayBpZiBwcmVzZW50XG5cdFx0Y29uc3QgbGlua01hdGNoID0gaXRlbVRleHQubWF0Y2goL15cXFtcXFsoW15cXHxdKylcXHwoW15cXF1dKylcXF1cXF0kLyk7XG5cdFx0bGV0IGxpbmtOYW1lOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgZGlzcGxheVRleHQ6IHN0cmluZztcblxuXHRcdGlmIChsaW5rTWF0Y2gpIHtcblx0XHRcdGxpbmtOYW1lID0gbGlua01hdGNoWzFdLnRyaW0oKTtcblx0XHRcdGRpc3BsYXlUZXh0ID0gbGlua01hdGNoWzJdLnRyaW0oKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGlzcGxheVRleHQgPSBpdGVtVGV4dDtcblx0XHR9XG5cblx0XHRpdGVtcy5wdXNoKHtcblx0XHRcdGxpbmtOYW1lLFxuXHRcdFx0ZGlzcGxheVRleHQsXG5cdFx0XHRoYXNQcm9zZSxcblx0XHRcdG9yaWdpbmFsT3JkZXI6IG9yZGVyKyssXG5cdFx0fSk7XG5cdH1cblxuXHRyZXR1cm4geyBpdGVtcyB9O1xufVxuXG4vKipcbiAqIFBhcnNlIGNvbnRlbnQgYmxvY2tzIGZyb20gc3RvcnkgY29udGVudCB1c2luZyBoaWVyYXJjaGljYWwgaGVhZGVyc1xuICogRm9ybWF0OlxuICogIyBTdG9yeTogdGl0bGVcbiAqIHByb3NlIGF0IHN0b3J5IGxldmVsXG4gKiBcbiAqICMjIENoYXB0ZXI6IHRpdGxlXG4gKiBwcm9zZSBhdCBjaGFwdGVyIGxldmVsIChubyBzY2VuZSlcbiAqIFxuICogIyMjIFNjZW5lOiB0aXRsZVxuICogcHJvc2UgYXQgc2NlbmUgbGV2ZWxcbiAqIFxuICogIyMjIyBCZWF0OiB0aXRsZVxuICogcHJvc2UgYXQgYmVhdCBsZXZlbFxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTdG9yeVByb3NlKHN0b3J5Q29udGVudDogc3RyaW5nKTogSGllcmFyY2hpY2FsUHJvc2Uge1xuXHRjb25zdCBzZWN0aW9uczogUGFyc2VkU2VjdGlvbltdID0gW107XG5cblx0Ly8gRXh0cmFjdCBjb250ZW50IGFmdGVyIGZyb250bWF0dGVyXG5cdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBzdG9yeUNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcblx0Y29uc3QgY29udGVudFN0YXJ0ID0gZnJvbnRtYXR0ZXJNYXRjaCA/IGZyb250bWF0dGVyTWF0Y2hbMF0ubGVuZ3RoIDogMDtcblx0Y29uc3QgYm9keUNvbnRlbnQgPSBzdG9yeUNvbnRlbnQuc3Vic3RyaW5nKGNvbnRlbnRTdGFydCkudHJpbSgpO1xuXG5cdC8vIEZpbmQgdGhlIGhpZXJhcmNoaWNhbCBwcm9zZSBzZWN0aW9uIC0gc3RhcnRzIHdpdGggXCIjIFN0b3J5OlwiIG9yIFwiIyMgQ2hhcHRlciBOOlwiIG9yIFwiIyMgQ2hhcHRlcjpcIlxuXHQvLyBUaGlzIGlzIEFGVEVSIHRoZSBsaXN0IHNlY3Rpb25zICgjIyBDaGFwdGVycywgU2NlbmVzICYgQmVhdHMsICMjIE9ycGhhbiBTY2VuZXMsIGV0Yy4pXG5cdGNvbnN0IHN0b3J5SGVhZGVyTWF0Y2ggPSBib2R5Q29udGVudC5tYXRjaCgvXigjXFxzK1N0b3J5OlxccyouKykkL20pO1xuXHRjb25zdCBjaGFwdGVySGVhZGVyTWF0Y2ggPSBib2R5Q29udGVudC5tYXRjaCgvXigjI1xccytDaGFwdGVyXFxzKlxcZCo6XFxzKi4rKSQvbSk7XG5cdFxuXHRsZXQgcHJvc2VTdGFydEluZGV4ID0gLTE7XG5cdGlmIChzdG9yeUhlYWRlck1hdGNoKSB7XG5cdFx0cHJvc2VTdGFydEluZGV4ID0gYm9keUNvbnRlbnQuaW5kZXhPZihzdG9yeUhlYWRlck1hdGNoWzBdKTtcblx0fSBlbHNlIGlmIChjaGFwdGVySGVhZGVyTWF0Y2gpIHtcblx0XHRwcm9zZVN0YXJ0SW5kZXggPSBib2R5Q29udGVudC5pbmRleE9mKGNoYXB0ZXJIZWFkZXJNYXRjaFswXSk7XG5cdH1cblx0XG5cdGlmIChwcm9zZVN0YXJ0SW5kZXggPT09IC0xKSB7XG5cdFx0cmV0dXJuIHsgc2VjdGlvbnM6IFtdIH07XG5cdH1cblx0XG5cdGNvbnN0IHByb3NlQ29udGVudCA9IGJvZHlDb250ZW50LnN1YnN0cmluZyhwcm9zZVN0YXJ0SW5kZXgpO1xuXHRjb25zdCBsaW5lcyA9IHByb3NlQ29udGVudC5zcGxpdCgvXFxuLyk7XG5cblx0bGV0IG9yZGVyID0gMDtcblx0bGV0IGN1cnJlbnRDaGFwdGVyOiB7IGxpbmtOYW1lOiBzdHJpbmcgfCBudWxsOyB0aXRsZTogc3RyaW5nIH0gfCBudWxsID0gbnVsbDtcblx0bGV0IGN1cnJlbnRTY2VuZTogUGFyc2VkU2NlbmUgfCBudWxsID0gbnVsbDtcblx0bGV0IGN1cnJlbnRCZWF0OiBQYXJzZWRCZWF0IHwgbnVsbCA9IG51bGw7XG5cblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG5cdFx0Y29uc3QgdHJpbW1lZExpbmUgPSBsaW5lLnRyaW0oKTtcblxuXHRcdC8vIFNraXAgZW1wdHkgbGluZXNcblx0XHRpZiAoIXRyaW1tZWRMaW5lKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBTa2lwIGluZm8gY2FsbG91dHNcblx0XHRpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aChcIj5cIikpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBTdG9yeSBoZWFkZXI6ICMgU3Rvcnk6IFtbbGlua3x0aXRsZV1dIG9yICMgU3Rvcnk6IHRpdGxlXG5cdFx0Y29uc3Qgc3RvcnlNYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eI1xccytTdG9yeTpcXHMqKC4rKSQvaSk7XG5cdFx0aWYgKHN0b3J5TWF0Y2gpIHtcblx0XHRcdC8vIFN0b3J5IGhlYWRlciAtIGp1c3Qgc2tpcCwgd2UncmUgYWxyZWFkeSBpbiBzdG9yeSBjb250ZXh0XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBmb3IgQ2hhcHRlciBoZWFkZXI6ICMjIENoYXB0ZXIgTjogW1tsaW5rfHRpdGxlXV0gb3IgIyMgQ2hhcHRlcjogdGl0bGVcblx0XHRjb25zdCBjaGFwdGVyTWF0Y2ggPSB0cmltbWVkTGluZS5tYXRjaCgvXiMjXFxzK0NoYXB0ZXJcXHMqXFxkKjpcXHMqKC4rKSQvaSk7XG5cdFx0aWYgKGNoYXB0ZXJNYXRjaCkge1xuXHRcdFx0Y29uc3QgY2hhcHRlclRleHQgPSBjaGFwdGVyTWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0Y29uc3QgbGlua01hdGNoID0gY2hhcHRlclRleHQubWF0Y2goL15cXFtcXFsoW15cXHxdKylcXHwoW15cXF1dKylcXF1cXF0kLyk7XG5cdFx0XHRpZiAobGlua01hdGNoKSB7XG5cdFx0XHRcdGN1cnJlbnRDaGFwdGVyID0ge1xuXHRcdFx0XHRcdGxpbmtOYW1lOiBsaW5rTWF0Y2hbMV0udHJpbSgpLFxuXHRcdFx0XHRcdHRpdGxlOiBsaW5rTWF0Y2hbMl0udHJpbSgpLFxuXHRcdFx0XHR9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y3VycmVudENoYXB0ZXIgPSB7XG5cdFx0XHRcdFx0bGlua05hbWU6IG51bGwsXG5cdFx0XHRcdFx0dGl0bGU6IGNoYXB0ZXJUZXh0LFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0Y3VycmVudFNjZW5lID0gbnVsbDtcblx0XHRcdGN1cnJlbnRCZWF0ID0gbnVsbDtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBTY2VuZSBoZWFkZXI6ICMjIyBTY2VuZTogW1tsaW5rfGdvYWwgLSB0aW1lUmVmXV0gb3IgIyMjIFNjZW5lOiBnb2FsXG5cdFx0Y29uc3Qgc2NlbmVNYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eIyMjXFxzK1NjZW5lOlxccyooLispJC9pKTtcblx0XHRpZiAoc2NlbmVNYXRjaCkge1xuXHRcdFx0Y29uc3Qgc2NlbmVUZXh0ID0gc2NlbmVNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRjdXJyZW50U2NlbmUgPSBwYXJzZVNjZW5lSGVhZGVyVGV4dChzY2VuZVRleHQpO1xuXHRcdFx0Y3VycmVudFNjZW5lLm9yaWdpbmFsT3JkZXIgPSBvcmRlcisrO1xuXHRcdFx0c2VjdGlvbnMucHVzaCh7XG5cdFx0XHRcdHR5cGU6IFwic2NlbmVcIixcblx0XHRcdFx0c2NlbmU6IGN1cnJlbnRTY2VuZSxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogY3VycmVudFNjZW5lLm9yaWdpbmFsT3JkZXIsXG5cdFx0XHR9KTtcblx0XHRcdGN1cnJlbnRCZWF0ID0gbnVsbDtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBCZWF0IGhlYWRlcjogIyMjIyBCZWF0OiBbW2xpbmt8aW50ZW50IC0+IG91dGNvbWVdXSBvciAjIyMjIEJlYXQ6IGludGVudFxuXHRcdGNvbnN0IGJlYXRNYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eIyMjI1xccytCZWF0OlxccyooLispJC9pKTtcblx0XHRpZiAoYmVhdE1hdGNoKSB7XG5cdFx0XHRjb25zdCBiZWF0VGV4dCA9IGJlYXRNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRjdXJyZW50QmVhdCA9IHBhcnNlQmVhdEhlYWRlclRleHQoYmVhdFRleHQpO1xuXHRcdFx0Y3VycmVudEJlYXQub3JpZ2luYWxPcmRlciA9IG9yZGVyKys7XG5cdFx0XHRzZWN0aW9ucy5wdXNoKHtcblx0XHRcdFx0dHlwZTogXCJiZWF0XCIsXG5cdFx0XHRcdGJlYXQ6IGN1cnJlbnRCZWF0LFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBjdXJyZW50QmVhdC5vcmlnaW5hbE9yZGVyLFxuXHRcdFx0fSk7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBTa2lwIG90aGVyIGhlYWRlcnMgdGhhdCBkb24ndCBtYXRjaCBvdXIgcGF0dGVyblxuXHRcdGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKFwiI1wiKSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gU2tpcCBsaXN0IGl0ZW1zICh0aGVzZSBhcmUgY2hhcHRlci9zY2VuZS9iZWF0IGxpc3RzKVxuXHRcdGlmICh0cmltbWVkTGluZS5tYXRjaCgvXlsrLV1cXHMrLykpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBjb250ZW50IGJsb2NrOiBbW2xpbmt8Y29udGVudF1dIG9yIHBsYWluIHRleHRcblx0XHRjb25zdCBwcm9zZU1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL15cXHMqXFxbXFxbKFteXFx8XSspXFx8KFteXFxdXSspXFxdXFxdXFxzKiQvKTtcblx0XHRpZiAocHJvc2VNYXRjaCkge1xuXHRcdFx0Y29uc3QgbGlua05hbWUgPSBwcm9zZU1hdGNoWzFdLnRyaW0oKTtcblx0XHRcdGNvbnN0IGNvbnRlbnQgPSBwcm9zZU1hdGNoWzJdLnRyaW0oKTtcblx0XHRcdGNvbnN0IHBhcmFncmFwaDogUGFyc2VkUGFyYWdyYXBoID0ge1xuXHRcdFx0XHRjb250ZW50LFxuXHRcdFx0XHRsaW5rTmFtZSxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogb3JkZXIrKyxcblx0XHRcdH07XG5cdFx0XHRzZWN0aW9ucy5wdXNoKHtcblx0XHRcdFx0dHlwZTogXCJwcm9zZVwiLFxuXHRcdFx0XHRwcm9zZTogcGFyYWdyYXBoLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBwYXJhZ3JhcGgub3JpZ2luYWxPcmRlcixcblx0XHRcdH0pO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gUGxhaW4gdGV4dCBwYXJhZ3JhcGggKG5ldyBjb250ZW50IGJsb2NrIHdpdGhvdXQgbGluaylcblx0XHRpZiAodHJpbW1lZExpbmUubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29uc3QgcGFyYWdyYXBoOiBQYXJzZWRQYXJhZ3JhcGggPSB7XG5cdFx0XHRcdGNvbnRlbnQ6IHRyaW1tZWRMaW5lLFxuXHRcdFx0XHRsaW5rTmFtZTogbnVsbCxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogb3JkZXIrKyxcblx0XHRcdH07XG5cdFx0XHRzZWN0aW9ucy5wdXNoKHtcblx0XHRcdFx0dHlwZTogXCJwcm9zZVwiLFxuXHRcdFx0XHRwcm9zZTogcGFyYWdyYXBoLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBwYXJhZ3JhcGgub3JpZ2luYWxPcmRlcixcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB7IHNlY3Rpb25zIH07XG59XG5cbi8qKlxuICogSGVscGVyIHRvIHBhcnNlIHNjZW5lIGhlYWRlciB0ZXh0XG4gKi9cbmZ1bmN0aW9uIHBhcnNlU2NlbmVIZWFkZXJUZXh0KHRleHQ6IHN0cmluZyk6IFBhcnNlZFNjZW5lIHtcblx0Y29uc3QgbGlua01hdGNoID0gdGV4dC5tYXRjaCgvXlxcW1xcWyhbXlxcfF0rKVxcfChbXlxcXV0rKVxcXVxcXSQvKTtcblx0aWYgKGxpbmtNYXRjaCkge1xuXHRcdGNvbnN0IGxpbmtOYW1lID0gbGlua01hdGNoWzFdLnRyaW0oKTtcblx0XHRjb25zdCBkaXNwbGF5VGV4dCA9IGxpbmtNYXRjaFsyXS50cmltKCk7XG5cdFx0Y29uc3QgcGFydHMgPSBkaXNwbGF5VGV4dC5zcGxpdCgvXFxzKi1cXHMqLyk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGxpbmtOYW1lLFxuXHRcdFx0Z29hbDogcGFydHNbMF0udHJpbSgpLFxuXHRcdFx0dGltZVJlZjogcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLSBcIikudHJpbSgpIDogXCJcIixcblx0XHRcdG9yaWdpbmFsT3JkZXI6IDAsXG5cdFx0fTtcblx0fVxuXG5cdGNvbnN0IHNpbXBsZUxpbmtNYXRjaCA9IHRleHQubWF0Y2goL15cXFtcXFsoW15cXF1dKylcXF1cXF0kLyk7XG5cdGlmIChzaW1wbGVMaW5rTWF0Y2gpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bGlua05hbWU6IHNpbXBsZUxpbmtNYXRjaFsxXS50cmltKCksXG5cdFx0XHRnb2FsOiBcIlwiLFxuXHRcdFx0dGltZVJlZjogXCJcIixcblx0XHRcdG9yaWdpbmFsT3JkZXI6IDAsXG5cdFx0fTtcblx0fVxuXG5cdGNvbnN0IHBhcnRzID0gdGV4dC5zcGxpdCgvXFxzKi1cXHMqLyk7XG5cdHJldHVybiB7XG5cdFx0bGlua05hbWU6IG51bGwsXG5cdFx0Z29hbDogcGFydHNbMF0udHJpbSgpLFxuXHRcdHRpbWVSZWY6IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0gXCIpLnRyaW0oKSA6IFwiXCIsXG5cdFx0b3JpZ2luYWxPcmRlcjogMCxcblx0fTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gcGFyc2UgYmVhdCBoZWFkZXIgdGV4dFxuICovXG5mdW5jdGlvbiBwYXJzZUJlYXRIZWFkZXJUZXh0KHRleHQ6IHN0cmluZyk6IFBhcnNlZEJlYXQge1xuXHRjb25zdCBsaW5rTWF0Y2ggPSB0ZXh0Lm1hdGNoKC9eXFxbXFxbKFteXFx8XSspXFx8KFteXFxdXSspXFxdXFxdJC8pO1xuXHRpZiAobGlua01hdGNoKSB7XG5cdFx0Y29uc3QgbGlua05hbWUgPSBsaW5rTWF0Y2hbMV0udHJpbSgpO1xuXHRcdGNvbnN0IGRpc3BsYXlUZXh0ID0gbGlua01hdGNoWzJdLnRyaW0oKTtcblx0XHRjb25zdCBwYXJ0cyA9IGRpc3BsYXlUZXh0LnNwbGl0KC9cXHMqLT5cXHMqLyk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGxpbmtOYW1lLFxuXHRcdFx0aW50ZW50OiBwYXJ0c1swXS50cmltKCksXG5cdFx0XHRvdXRjb21lOiBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbihcIiAtPiBcIikudHJpbSgpIDogXCJcIixcblx0XHRcdG9yaWdpbmFsT3JkZXI6IDAsXG5cdFx0fTtcblx0fVxuXG5cdGNvbnN0IHNpbXBsZUxpbmtNYXRjaCA9IHRleHQubWF0Y2goL15cXFtcXFsoW15cXF1dKylcXF1cXF0kLyk7XG5cdGlmIChzaW1wbGVMaW5rTWF0Y2gpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bGlua05hbWU6IHNpbXBsZUxpbmtNYXRjaFsxXS50cmltKCksXG5cdFx0XHRpbnRlbnQ6IFwiXCIsXG5cdFx0XHRvdXRjb21lOiBcIlwiLFxuXHRcdFx0b3JpZ2luYWxPcmRlcjogMCxcblx0XHR9O1xuXHR9XG5cblx0Y29uc3QgcGFydHMgPSB0ZXh0LnNwbGl0KC9cXHMqLT5cXHMqLyk7XG5cdHJldHVybiB7XG5cdFx0bGlua05hbWU6IG51bGwsXG5cdFx0aW50ZW50OiBwYXJ0c1swXS50cmltKCksXG5cdFx0b3V0Y29tZTogcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLT4gXCIpLnRyaW0oKSA6IFwiXCIsXG5cdFx0b3JpZ2luYWxPcmRlcjogMCxcblx0fTtcbn1cblxuLyoqXG4gKiBQYXJzZSBjb250ZW50IGJsb2NrcyBmcm9tIHNjZW5lIGNvbnRlbnQgdXNpbmcgaGllcmFyY2hpY2FsIGhlYWRlcnNcbiAqIEZvcm1hdCAobm8gY2hhcHRlcnMgaW4gc2NlbmVzKTpcbiAqIFxuICogIyMgQmVhdHMgKGxpc3QgLSBza2lwcGVkKVxuICogLSBbW2JlYXQtMXxCZWF0IDE6IGludGVudF1dXG4gKiBcbiAqICMjIyBTY2VuZTogdGl0bGUgKG9yIGp1c3Qgc3RhcnQgd2l0aCBwcm9zZSlcbiAqIHByb3NlIGF0IHNjZW5lIGxldmVsXG4gKiBcbiAqICMjIyMgQmVhdDogdGl0bGUgKG9yICMjIyBCZWF0OilcbiAqIHByb3NlIGF0IGJlYXQgbGV2ZWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU2NlbmVQcm9zZShzY2VuZUNvbnRlbnQ6IHN0cmluZyk6IEhpZXJhcmNoaWNhbFByb3NlIHtcblx0Y29uc3Qgc2VjdGlvbnM6IFBhcnNlZFNlY3Rpb25bXSA9IFtdO1xuXG5cdC8vIEV4dHJhY3QgY29udGVudCBhZnRlciBmcm9udG1hdHRlclxuXHRjb25zdCBmcm9udG1hdHRlck1hdGNoID0gc2NlbmVDb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XG5cdGNvbnN0IGNvbnRlbnRTdGFydCA9IGZyb250bWF0dGVyTWF0Y2ggPyBmcm9udG1hdHRlck1hdGNoWzBdLmxlbmd0aCA6IDA7XG5cdGNvbnN0IGJvZHlDb250ZW50ID0gc2NlbmVDb250ZW50LnN1YnN0cmluZyhjb250ZW50U3RhcnQpLnRyaW0oKTtcblxuXHQvLyBGaW5kIHRoZSBoaWVyYXJjaGljYWwgcHJvc2Ugc2VjdGlvblxuXHQvLyBJdCBzdGFydHMgd2l0aCBcIiMjIyBTY2VuZTpcIiBvciBcIiMjIyMgQmVhdDpcIiBvciBcIiMjIyBCZWF0OlwiIG9yIGp1c3QgcHJvc2UgdGV4dCBhZnRlciAjIyBCZWF0cyBsaXN0XG5cdGNvbnN0IHNjZW5lSGVhZGVyTWF0Y2ggPSBib2R5Q29udGVudC5tYXRjaCgvXigjIyNcXHMrU2NlbmU6XFxzKi4rKSQvbSk7XG5cdGNvbnN0IGJlYXRIZWFkZXJNYXRjaCA9IGJvZHlDb250ZW50Lm1hdGNoKC9eKCN7Myw0fVxccytCZWF0OlxccyouKykkL20pO1xuXHRcblx0bGV0IHByb3NlU3RhcnRJbmRleCA9IC0xO1xuXHRcblx0aWYgKHNjZW5lSGVhZGVyTWF0Y2gpIHtcblx0XHRwcm9zZVN0YXJ0SW5kZXggPSBib2R5Q29udGVudC5pbmRleE9mKHNjZW5lSGVhZGVyTWF0Y2hbMF0pO1xuXHR9IGVsc2UgaWYgKGJlYXRIZWFkZXJNYXRjaCkge1xuXHRcdHByb3NlU3RhcnRJbmRleCA9IGJvZHlDb250ZW50LmluZGV4T2YoYmVhdEhlYWRlck1hdGNoWzBdKTtcblx0fSBlbHNlIHtcblx0XHQvLyBObyBleHBsaWNpdCBoZWFkZXJzIC0gbG9vayBmb3IgcHJvc2UgYWZ0ZXIgIyMgQmVhdHMgbGlzdFxuXHRcdGNvbnN0IGJlYXRzTGlzdEVuZCA9IGJvZHlDb250ZW50Lm1hdGNoKC8jI1xccytCZWF0c1xccypcXG4rW1xcc1xcU10qPyg/PVxcbiMjI3xcXG4jIyMjfFxcblteI1xcLVxcKz5cXHNdfCQpLyk7XG5cdFx0aWYgKGJlYXRzTGlzdEVuZCkge1xuXHRcdFx0cHJvc2VTdGFydEluZGV4ID0gYm9keUNvbnRlbnQuaW5kZXhPZihiZWF0c0xpc3RFbmRbMF0pICsgYmVhdHNMaXN0RW5kWzBdLmxlbmd0aDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gTm8gIyMgQmVhdHMgc2VjdGlvbiwgc3RhcnQgZnJvbSBiZWdpbm5pbmcgKHNraXAgYW55ICMjIGhlYWRlcnMgdGhhdCBhcmUgbGlzdHMpXG5cdFx0XHRjb25zdCBmaXJzdE5vbkxpc3RDb250ZW50ID0gYm9keUNvbnRlbnQubWF0Y2goLyg/Ol58XFxuKShbXiNcXC1cXCs+XFxzXFxuXS4rKS8pO1xuXHRcdFx0aWYgKGZpcnN0Tm9uTGlzdENvbnRlbnQpIHtcblx0XHRcdFx0cHJvc2VTdGFydEluZGV4ID0gYm9keUNvbnRlbnQuaW5kZXhPZihmaXJzdE5vbkxpc3RDb250ZW50WzFdKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdGlmIChwcm9zZVN0YXJ0SW5kZXggPT09IC0xKSB7XG5cdFx0cmV0dXJuIHsgc2VjdGlvbnM6IFtdIH07XG5cdH1cblx0XG5cdGNvbnN0IHByb3NlQ29udGVudCA9IGJvZHlDb250ZW50LnN1YnN0cmluZyhwcm9zZVN0YXJ0SW5kZXgpO1xuXHRjb25zdCBsaW5lcyA9IHByb3NlQ29udGVudC5zcGxpdCgvXFxuLyk7XG5cblx0bGV0IG9yZGVyID0gMDtcblx0bGV0IGN1cnJlbnRCZWF0OiBQYXJzZWRCZWF0IHwgbnVsbCA9IG51bGw7XG5cblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG5cdFx0Y29uc3QgdHJpbW1lZExpbmUgPSBsaW5lLnRyaW0oKTtcblxuXHRcdC8vIFNraXAgZW1wdHkgbGluZXNcblx0XHRpZiAoIXRyaW1tZWRMaW5lKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBTa2lwIGluZm8gY2FsbG91dHNcblx0XHRpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aChcIj5cIikpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBTY2VuZSBoZWFkZXI6ICMjIyBTY2VuZTogW1tsaW5rfGdvYWxdXSBvciAjIyMgU2NlbmU6IGdvYWxcblx0XHRjb25zdCBzY2VuZU1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL14jIyNcXHMrU2NlbmU6XFxzKiguKykkL2kpO1xuXHRcdGlmIChzY2VuZU1hdGNoKSB7XG5cdFx0XHRjb25zdCBzY2VuZVRleHQgPSBzY2VuZU1hdGNoWzFdLnRyaW0oKTtcblx0XHRcdGNvbnN0IHBhcnNlZFNjZW5lID0gcGFyc2VTY2VuZUhlYWRlclRleHQoc2NlbmVUZXh0KTtcblx0XHRcdHBhcnNlZFNjZW5lLm9yaWdpbmFsT3JkZXIgPSBvcmRlcisrO1xuXHRcdFx0c2VjdGlvbnMucHVzaCh7XG5cdFx0XHRcdHR5cGU6IFwic2NlbmVcIixcblx0XHRcdFx0c2NlbmU6IHBhcnNlZFNjZW5lLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBwYXJzZWRTY2VuZS5vcmlnaW5hbE9yZGVyLFxuXHRcdFx0fSk7XG5cdFx0XHRjdXJyZW50QmVhdCA9IG51bGw7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBmb3IgQmVhdCBoZWFkZXI6ICMjIyBCZWF0OiBvciAjIyMjIEJlYXQ6XG5cdFx0Y29uc3QgYmVhdE1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL14jezMsNH1cXHMrQmVhdDpcXHMqKC4rKSQvaSk7XG5cdFx0aWYgKGJlYXRNYXRjaCkge1xuXHRcdFx0Y29uc3QgYmVhdFRleHQgPSBiZWF0TWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0Y3VycmVudEJlYXQgPSBwYXJzZUJlYXRIZWFkZXJUZXh0KGJlYXRUZXh0KTtcblx0XHRcdGN1cnJlbnRCZWF0Lm9yaWdpbmFsT3JkZXIgPSBvcmRlcisrO1xuXHRcdFx0c2VjdGlvbnMucHVzaCh7XG5cdFx0XHRcdHR5cGU6IFwiYmVhdFwiLFxuXHRcdFx0XHRiZWF0OiBjdXJyZW50QmVhdCxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogY3VycmVudEJlYXQub3JpZ2luYWxPcmRlcixcblx0XHRcdH0pO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gU2tpcCBvdGhlciBoZWFkZXJzIChsaWtlICMjIEJlYXRzIGxpc3QgaGVhZGVyKVxuXHRcdGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKFwiI1wiKSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gU2tpcCBsaXN0IGl0ZW1zICh0aGVzZSBhcmUgYmVhdCBsaXN0cylcblx0XHRpZiAodHJpbW1lZExpbmUubWF0Y2goL15bKy1dXFxzKy8pKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBmb3IgY29udGVudCBibG9jazogW1tsaW5rfGNvbnRlbnRdXSBvciBwbGFpbiB0ZXh0XG5cdFx0Y29uc3QgcHJvc2VNYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eXFxzKlxcW1xcWyhbXlxcfF0rKVxcfChbXlxcXV0rKVxcXVxcXVxccyokLyk7XG5cdFx0aWYgKHByb3NlTWF0Y2gpIHtcblx0XHRcdGNvbnN0IGxpbmtOYW1lID0gcHJvc2VNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRjb25zdCBjb250ZW50ID0gcHJvc2VNYXRjaFsyXS50cmltKCk7XG5cdFx0XHRjb25zdCBwYXJhZ3JhcGg6IFBhcnNlZFBhcmFncmFwaCA9IHtcblx0XHRcdFx0Y29udGVudCxcblx0XHRcdFx0bGlua05hbWUsXG5cdFx0XHRcdG9yaWdpbmFsT3JkZXI6IG9yZGVyKyssXG5cdFx0XHR9O1xuXHRcdFx0c2VjdGlvbnMucHVzaCh7XG5cdFx0XHRcdHR5cGU6IFwicHJvc2VcIixcblx0XHRcdFx0cHJvc2U6IHBhcmFncmFwaCxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogcGFyYWdyYXBoLm9yaWdpbmFsT3JkZXIsXG5cdFx0XHR9KTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIFBsYWluIHRleHQgcGFyYWdyYXBoIChuZXcgY29udGVudCBibG9jayB3aXRob3V0IGxpbmspXG5cdFx0aWYgKHRyaW1tZWRMaW5lLmxlbmd0aCA+IDApIHtcblx0XHRcdGNvbnN0IHBhcmFncmFwaDogUGFyc2VkUGFyYWdyYXBoID0ge1xuXHRcdFx0XHRjb250ZW50OiB0cmltbWVkTGluZSxcblx0XHRcdFx0bGlua05hbWU6IG51bGwsXG5cdFx0XHRcdG9yaWdpbmFsT3JkZXI6IG9yZGVyKyssXG5cdFx0XHR9O1xuXHRcdFx0c2VjdGlvbnMucHVzaCh7XG5cdFx0XHRcdHR5cGU6IFwicHJvc2VcIixcblx0XHRcdFx0cHJvc2U6IHBhcmFncmFwaCxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogcGFyYWdyYXBoLm9yaWdpbmFsT3JkZXIsXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4geyBzZWN0aW9ucyB9O1xufVxuXG4vKipcbiAqIFBhcnNlIGNvbnRlbnQgYmxvY2tzIGZyb20gYmVhdCBjb250ZW50IHVzaW5nIGhpZXJhcmNoaWNhbCBoZWFkZXJzXG4gKiBGb3JtYXQ6XG4gKiBcbiAqICMjIEJlYXQ6IFtbbGlua3xpbnRlbnQgLT4gb3V0Y29tZV1dXG4gKiBwcm9zZSBhdCBiZWF0IGxldmVsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUJlYXRQcm9zZShiZWF0Q29udGVudDogc3RyaW5nKTogSGllcmFyY2hpY2FsUHJvc2Uge1xuXHRjb25zdCBzZWN0aW9uczogUGFyc2VkU2VjdGlvbltdID0gW107XG5cblx0Ly8gRXh0cmFjdCBjb250ZW50IGFmdGVyIGZyb250bWF0dGVyXG5cdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBiZWF0Q29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuXHRjb25zdCBjb250ZW50U3RhcnQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXS5sZW5ndGggOiAwO1xuXHRjb25zdCBib2R5Q29udGVudCA9IGJlYXRDb250ZW50LnN1YnN0cmluZyhjb250ZW50U3RhcnQpLnRyaW0oKTtcblxuXHQvLyBGaW5kIHRoZSBoaWVyYXJjaGljYWwgcHJvc2Ugc2VjdGlvbiAtIHN0YXJ0cyB3aXRoIFwiIyMgQmVhdDpcIlxuXHRjb25zdCBiZWF0SGVhZGVyTWF0Y2ggPSBib2R5Q29udGVudC5tYXRjaCgvXigjI1xccytCZWF0OlxccyouKykkL20pO1xuXHRcblx0bGV0IHByb3NlU3RhcnRJbmRleCA9IC0xO1xuXHRpZiAoYmVhdEhlYWRlck1hdGNoKSB7XG5cdFx0cHJvc2VTdGFydEluZGV4ID0gYm9keUNvbnRlbnQuaW5kZXhPZihiZWF0SGVhZGVyTWF0Y2hbMF0pO1xuXHR9XG5cdFxuXHRpZiAocHJvc2VTdGFydEluZGV4ID09PSAtMSkge1xuXHRcdHJldHVybiB7IHNlY3Rpb25zOiBbXSB9O1xuXHR9XG5cdFxuXHRjb25zdCBwcm9zZUNvbnRlbnQgPSBib2R5Q29udGVudC5zdWJzdHJpbmcocHJvc2VTdGFydEluZGV4KTtcblx0Y29uc3QgbGluZXMgPSBwcm9zZUNvbnRlbnQuc3BsaXQoL1xcbi8pO1xuXG5cdGxldCBvcmRlciA9IDA7XG5cblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG5cdFx0Y29uc3QgdHJpbW1lZExpbmUgPSBsaW5lLnRyaW0oKTtcblxuXHRcdC8vIFNraXAgZW1wdHkgbGluZXNcblx0XHRpZiAoIXRyaW1tZWRMaW5lKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBTa2lwIGluZm8gY2FsbG91dHNcblx0XHRpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aChcIj5cIikpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBCZWF0IGhlYWRlcjogIyMgQmVhdDogW1tsaW5rfHRleHRdXSBvciAjIyBCZWF0OiB0ZXh0XG5cdFx0Y29uc3QgYmVhdE1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL14jI1xccytCZWF0OlxccyooLispJC9pKTtcblx0XHRpZiAoYmVhdE1hdGNoKSB7XG5cdFx0XHQvLyBCZWF0IGhlYWRlciAtIGp1c3Qgc2tpcCwgd2UncmUgYWxyZWFkeSBpbiBiZWF0IGNvbnRleHRcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIFNraXAgb3RoZXIgaGVhZGVyc1xuXHRcdGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKFwiI1wiKSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gU2tpcCBsaXN0IGl0ZW1zXG5cdFx0aWYgKHRyaW1tZWRMaW5lLm1hdGNoKC9eWystXVxccysvKSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIGNvbnRlbnQgYmxvY2s6IFtbbGlua3xjb250ZW50XV0gb3IgcGxhaW4gdGV4dFxuXHRcdGNvbnN0IHByb3NlTWF0Y2ggPSB0cmltbWVkTGluZS5tYXRjaCgvXlxccypcXFtcXFsoW15cXHxdKylcXHwoW15cXF1dKylcXF1cXF1cXHMqJC8pO1xuXHRcdGlmIChwcm9zZU1hdGNoKSB7XG5cdFx0XHRjb25zdCBsaW5rTmFtZSA9IHByb3NlTWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0Y29uc3QgY29udGVudCA9IHByb3NlTWF0Y2hbMl0udHJpbSgpO1xuXHRcdFx0Y29uc3QgcGFyYWdyYXBoOiBQYXJzZWRQYXJhZ3JhcGggPSB7XG5cdFx0XHRcdGNvbnRlbnQsXG5cdFx0XHRcdGxpbmtOYW1lLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBvcmRlcisrLFxuXHRcdFx0fTtcblx0XHRcdHNlY3Rpb25zLnB1c2goe1xuXHRcdFx0XHR0eXBlOiBcInByb3NlXCIsXG5cdFx0XHRcdHByb3NlOiBwYXJhZ3JhcGgsXG5cdFx0XHRcdG9yaWdpbmFsT3JkZXI6IHBhcmFncmFwaC5vcmlnaW5hbE9yZGVyLFxuXHRcdFx0fSk7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBQbGFpbiB0ZXh0IHBhcmFncmFwaCAobmV3IGNvbnRlbnQgYmxvY2sgd2l0aG91dCBsaW5rKVxuXHRcdGlmICh0cmltbWVkTGluZS5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCBwYXJhZ3JhcGg6IFBhcnNlZFBhcmFncmFwaCA9IHtcblx0XHRcdFx0Y29udGVudDogdHJpbW1lZExpbmUsXG5cdFx0XHRcdGxpbmtOYW1lOiBudWxsLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBvcmRlcisrLFxuXHRcdFx0fTtcblx0XHRcdHNlY3Rpb25zLnB1c2goe1xuXHRcdFx0XHR0eXBlOiBcInByb3NlXCIsXG5cdFx0XHRcdHByb3NlOiBwYXJhZ3JhcGgsXG5cdFx0XHRcdG9yaWdpbmFsT3JkZXI6IHBhcmFncmFwaC5vcmlnaW5hbE9yZGVyLFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHsgc2VjdGlvbnMgfTtcbn1cblxuIiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IENvbnRlbnRCbG9jayB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuXG5leHBvcnQgdHlwZSBDb25mbGljdFJlc29sdXRpb24gPSBcImxvY2FsXCIgfCBcInJlbW90ZVwiIHwgXCJtYW51YWxcIjtcblxuZXhwb3J0IGludGVyZmFjZSBDb25mbGljdFJlc29sdXRpb25SZXN1bHQge1xuXHRyZXNvbHV0aW9uOiBDb25mbGljdFJlc29sdXRpb247XG5cdG1lcmdlZENvbnRlbnQ/OiBzdHJpbmc7IC8vIE9ubHkgaWYgcmVzb2x1dGlvbiBpcyBcIm1hbnVhbFwiXG59XG5cbmV4cG9ydCBjbGFzcyBDb25mbGljdE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRsb2NhbENvbnRlbnRCbG9jazogQ29udGVudEJsb2NrO1xuXHRyZW1vdGVDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jaztcblx0cmVzb2x1dGlvbjogQ29uZmxpY3RSZXNvbHV0aW9uUmVzdWx0IHwgbnVsbCA9IG51bGw7XG5cdG9uUmVzb2x2ZTogKHJlc3VsdDogQ29uZmxpY3RSZXNvbHV0aW9uUmVzdWx0KSA9PiBQcm9taXNlPHZvaWQ+O1xuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdGFwcDogQXBwLFxuXHRcdGxvY2FsQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2ssXG5cdFx0cmVtb3RlQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2ssXG5cdFx0b25SZXNvbHZlOiAocmVzdWx0OiBDb25mbGljdFJlc29sdXRpb25SZXN1bHQpID0+IFByb21pc2U8dm9pZD5cblx0KSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLmxvY2FsQ29udGVudEJsb2NrID0gbG9jYWxDb250ZW50QmxvY2s7XG5cdFx0dGhpcy5yZW1vdGVDb250ZW50QmxvY2sgPSByZW1vdGVDb250ZW50QmxvY2s7XG5cdFx0dGhpcy5vblJlc29sdmUgPSBvblJlc29sdmU7XG5cdH1cblxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7XG5cdFx0XHR0ZXh0OiBcIkNvbnRlbnQgQmxvY2sgQ29uZmxpY3RcIixcblx0XHR9KTtcblxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0dGV4dDogXCJUaGlzIGNvbnRlbnQgYmxvY2sgaGFzIGJlZW4gbW9kaWZpZWQgYm90aCBsb2NhbGx5IGFuZCByZW1vdGVseS4gQ2hvb3NlIGhvdyB0byByZXNvbHZlIHRoZSBjb25mbGljdDpcIixcblx0XHR9KTtcblxuXHRcdC8vIFNob3cgZGlmZlxuXHRcdGNvbnN0IGRpZmZDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KFwiY29uZmxpY3QtZGlmZi1jb250YWluZXJcIik7XG5cdFx0XG5cdFx0Ly8gTG9jYWwgdmVyc2lvblxuXHRcdGNvbnN0IGxvY2FsRGl2ID0gZGlmZkNvbnRhaW5lci5jcmVhdGVEaXYoXCJjb25mbGljdC1sb2NhbFwiKTtcblx0XHRsb2NhbERpdi5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJMb2NhbCBWZXJzaW9uXCIgfSk7XG5cdFx0Y29uc3QgbG9jYWxDb250ZW50ID0gbG9jYWxEaXYuY3JlYXRlRWwoXCJwcmVcIiwge1xuXHRcdFx0dGV4dDogdGhpcy5sb2NhbENvbnRlbnRCbG9jay5jb250ZW50LFxuXHRcdFx0Y2xzOiBcImNvbmZsaWN0LWNvbnRlbnRcIixcblx0XHR9KTtcblx0XHRsb2NhbENvbnRlbnQuc3R5bGUud2hpdGVTcGFjZSA9IFwicHJlLXdyYXBcIjtcblx0XHRsb2NhbENvbnRlbnQuc3R5bGUubWF4SGVpZ2h0ID0gXCIyMDBweFwiO1xuXHRcdGxvY2FsQ29udGVudC5zdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiO1xuXHRcdGxvY2FsQ29udGVudC5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcilcIjtcblx0XHRsb2NhbENvbnRlbnQuc3R5bGUucGFkZGluZyA9IFwiMTBweFwiO1xuXHRcdGxvY2FsQ29udGVudC5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjRweFwiO1xuXG5cdFx0Ly8gUmVtb3RlIHZlcnNpb25cblx0XHRjb25zdCByZW1vdGVEaXYgPSBkaWZmQ29udGFpbmVyLmNyZWF0ZURpdihcImNvbmZsaWN0LXJlbW90ZVwiKTtcblx0XHRyZW1vdGVEaXYuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiUmVtb3RlIFZlcnNpb25cIiB9KTtcblx0XHRjb25zdCByZW1vdGVDb250ZW50ID0gcmVtb3RlRGl2LmNyZWF0ZUVsKFwicHJlXCIsIHtcblx0XHRcdHRleHQ6IHRoaXMucmVtb3RlQ29udGVudEJsb2NrLmNvbnRlbnQsXG5cdFx0XHRjbHM6IFwiY29uZmxpY3QtY29udGVudFwiLFxuXHRcdH0pO1xuXHRcdHJlbW90ZUNvbnRlbnQuc3R5bGUud2hpdGVTcGFjZSA9IFwicHJlLXdyYXBcIjtcblx0XHRyZW1vdGVDb250ZW50LnN0eWxlLm1heEhlaWdodCA9IFwiMjAwcHhcIjtcblx0XHRyZW1vdGVDb250ZW50LnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XG5cdFx0cmVtb3RlQ29udGVudC5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcilcIjtcblx0XHRyZW1vdGVDb250ZW50LnN0eWxlLnBhZGRpbmcgPSBcIjEwcHhcIjtcblx0XHRyZW1vdGVDb250ZW50LnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNHB4XCI7XG5cblx0XHQvLyBNYW51YWwgbWVyZ2Ugb3B0aW9uXG5cdFx0Y29uc3QgbWFudWFsRGl2ID0gY29udGVudEVsLmNyZWF0ZURpdihcImNvbmZsaWN0LW1hbnVhbFwiKTtcblx0XHRtYW51YWxEaXYuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiTWFudWFsIE1lcmdlIChPcHRpb25hbClcIiB9KTtcblx0XHRjb25zdCBtYW51YWxUZXh0YXJlYSA9IG1hbnVhbERpdi5jcmVhdGVFbChcInRleHRhcmVhXCIsIHtcblx0XHRcdHRleHQ6IHRoaXMubG9jYWxDb250ZW50QmxvY2suY29udGVudCxcblx0XHRcdGNsczogXCJjb25mbGljdC1tYW51YWwtaW5wdXRcIixcblx0XHR9KTtcblx0XHRtYW51YWxUZXh0YXJlYS5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuXHRcdG1hbnVhbFRleHRhcmVhLnN0eWxlLm1pbkhlaWdodCA9IFwiMTUwcHhcIjtcblx0XHRtYW51YWxUZXh0YXJlYS5zdHlsZS5wYWRkaW5nID0gXCIxMHB4XCI7XG5cdFx0bWFudWFsVGV4dGFyZWEuc3R5bGUuYm9yZGVyID0gXCIxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpXCI7XG5cdFx0bWFudWFsVGV4dGFyZWEuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI0cHhcIjtcblx0XHRtYW51YWxUZXh0YXJlYS5zdHlsZS5mb250RmFtaWx5ID0gXCJ2YXIoLS1mb250LW1vbm9zcGFjZSlcIjtcblxuXHRcdC8vIFJlc29sdXRpb24gYnV0dG9uc1xuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoXCJjb25mbGljdC1idXR0b25zXCIpO1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSBcIjIwcHhcIjtcblx0XHRidXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5nYXAgPSBcIjEwcHhcIjtcblxuXHRcdC8vIFVzZSBMb2NhbCBidXR0b25cblx0XHRjb25zdCB1c2VMb2NhbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIlVzZSBMb2NhbFwiLFxuXHRcdFx0Y2xzOiBcIm1vZC1jdGFcIixcblx0XHR9KTtcblx0XHR1c2VMb2NhbEJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dGhpcy5yZXNvbHV0aW9uID0geyByZXNvbHV0aW9uOiBcImxvY2FsXCIgfTtcblx0XHRcdGF3YWl0IHRoaXMub25SZXNvbHZlKHRoaXMucmVzb2x1dGlvbik7XG5cdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0fTtcblxuXHRcdC8vIFVzZSBSZW1vdGUgYnV0dG9uXG5cdFx0Y29uc3QgdXNlUmVtb3RlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiVXNlIFJlbW90ZVwiLFxuXHRcdH0pO1xuXHRcdHVzZVJlbW90ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dGhpcy5yZXNvbHV0aW9uID0geyByZXNvbHV0aW9uOiBcInJlbW90ZVwiIH07XG5cdFx0XHRhd2FpdCB0aGlzLm9uUmVzb2x2ZSh0aGlzLnJlc29sdXRpb24pO1xuXHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdH07XG5cblx0XHQvLyBVc2UgTWFudWFsIGJ1dHRvblxuXHRcdGNvbnN0IHVzZU1hbnVhbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIlVzZSBNYW51YWwgTWVyZ2VcIixcblx0XHRcdGNsczogXCJtb2QtcHJpbWFyeVwiLFxuXHRcdH0pO1xuXHRcdHVzZU1hbnVhbEJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dGhpcy5yZXNvbHV0aW9uID0ge1xuXHRcdFx0XHRyZXNvbHV0aW9uOiBcIm1hbnVhbFwiLFxuXHRcdFx0XHRtZXJnZWRDb250ZW50OiBtYW51YWxUZXh0YXJlYS52YWx1ZSxcblx0XHRcdH07XG5cdFx0XHRhd2FpdCB0aGlzLm9uUmVzb2x2ZSh0aGlzLnJlc29sdXRpb24pO1xuXHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdH07XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cblxuIiwgImltcG9ydCB0eXBlIFN0b3J5RW5naW5lUGx1Z2luIGZyb20gXCIuLi9tYWluXCI7XG5pbXBvcnQgeyBFdmVudFJlZiwgVEFic3RyYWN0RmlsZSwgVEZpbGUsIFRGb2xkZXIgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IFN5bmNFbnRpdHlUYXJnZXQgfSBmcm9tIFwiLi9lbnRpdHlTeW5jVHlwZXNcIjtcblxudHlwZSBTeW5jUmVhc29uID0gXCJibHVyXCIgfCBcImlkbGVcIjtcblxuY29uc3QgSURMRV9ERUxBWV9NUyA9IDYwXzAwMDtcblxuZXhwb3J0IGNsYXNzIEF1dG9TeW5jTWFuYWdlciB7XG5cdHByaXZhdGUgbGVhZkNoYW5nZVJlZj86IEV2ZW50UmVmO1xuXHRwcml2YXRlIGVkaXRvckNoYW5nZVJlZj86IEV2ZW50UmVmO1xuXHRwcml2YXRlIGlkbGVUaW1lb3V0SWQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIGFjdGl2ZUZpbGU6IFRGaWxlIHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgbGFzdEVkaXRUcyA9IDA7XG5cdHByaXZhdGUgZGlydHlGaWxlcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXHRwcml2YXRlIHBlbmRpbmdTeW5jcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbikge1xuXHRcdHRoaXMuYWN0aXZlRmlsZSA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdHRoaXMubGFzdEVkaXRUcyA9IERhdGUubm93KCk7XG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50cygpO1xuXHRcdHRoaXMucmVzZXRJZGxlVGltZXIoKTtcblx0fVxuXG5cdGRpc3Bvc2UoKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMubGVhZkNoYW5nZVJlZikge1xuXHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vZmZyZWYodGhpcy5sZWFmQ2hhbmdlUmVmKTtcblx0XHRcdHRoaXMubGVhZkNoYW5nZVJlZiA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0aWYgKHRoaXMuZWRpdG9yQ2hhbmdlUmVmKSB7XG5cdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9mZnJlZih0aGlzLmVkaXRvckNoYW5nZVJlZik7XG5cdFx0XHR0aGlzLmVkaXRvckNoYW5nZVJlZiA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0aWYgKHRoaXMuaWRsZVRpbWVvdXRJZCAhPT0gbnVsbCkge1xuXHRcdFx0d2luZG93LmNsZWFyVGltZW91dCh0aGlzLmlkbGVUaW1lb3V0SWQpO1xuXHRcdFx0dGhpcy5pZGxlVGltZW91dElkID0gbnVsbDtcblx0XHR9XG5cdFx0dGhpcy5kaXJ0eUZpbGVzLmNsZWFyKCk7XG5cdFx0dGhpcy5wZW5kaW5nU3luY3MuY2xlYXIoKTtcblx0fVxuXG5cdHByaXZhdGUgcmVnaXN0ZXJFdmVudHMoKTogdm9pZCB7XG5cdFx0dGhpcy5sZWFmQ2hhbmdlUmVmID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcblx0XHRcdFwiYWN0aXZlLWxlYWYtY2hhbmdlXCIsXG5cdFx0XHR0aGlzLmhhbmRsZUFjdGl2ZUxlYWZDaGFuZ2Vcblx0XHQpO1xuXHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5sZWFmQ2hhbmdlUmVmKTtcblxuXHRcdHRoaXMuZWRpdG9yQ2hhbmdlUmVmID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcImVkaXRvci1jaGFuZ2VcIiwgKCkgPT4ge1xuXHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdFx0aWYgKCFmaWxlKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5hY3RpdmVGaWxlID0gZmlsZTtcblx0XHRcdHRoaXMubGFzdEVkaXRUcyA9IERhdGUubm93KCk7XG5cdFx0XHR0aGlzLmRpcnR5RmlsZXMuYWRkKGZpbGUucGF0aCk7XG5cdFx0XHR0aGlzLnJlc2V0SWRsZVRpbWVyKCk7XG5cdFx0fSk7XG5cdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLmVkaXRvckNoYW5nZVJlZik7XG5cdH1cblxuXHRwcml2YXRlIGhhbmRsZUFjdGl2ZUxlYWZDaGFuZ2UgPSAobGVhZjogdW5rbm93bik6IHZvaWQgPT4ge1xuXHRcdGNvbnN0IHByZXZpb3VzRmlsZSA9IHRoaXMuYWN0aXZlRmlsZTtcblx0XHRjb25zdCBuZXdGaWxlID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cblx0XHRpZiAoXG5cdFx0XHRwcmV2aW91c0ZpbGUgJiZcblx0XHRcdCghbmV3RmlsZSB8fCBwcmV2aW91c0ZpbGUucGF0aCAhPT0gbmV3RmlsZS5wYXRoKSAmJlxuXHRcdFx0dGhpcy5kaXJ0eUZpbGVzLmhhcyhwcmV2aW91c0ZpbGUucGF0aClcblx0XHQpIHtcblx0XHRcdHZvaWQgdGhpcy50cmlnZ2VyU3luY0ZvckZpbGUocHJldmlvdXNGaWxlLCBcImJsdXJcIik7XG5cdFx0fVxuXG5cdFx0dGhpcy5hY3RpdmVGaWxlID0gbmV3RmlsZTtcblx0XHR0aGlzLmxhc3RFZGl0VHMgPSBEYXRlLm5vdygpO1xuXHRcdHRoaXMucmVzZXRJZGxlVGltZXIoKTtcblx0fTtcblxuXHRwcml2YXRlIHJlc2V0SWRsZVRpbWVyKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmlkbGVUaW1lb3V0SWQgIT09IG51bGwpIHtcblx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5pZGxlVGltZW91dElkKTtcblx0XHR9XG5cblx0XHRpZiAoIXRoaXMuYWN0aXZlRmlsZSkge1xuXHRcdFx0dGhpcy5pZGxlVGltZW91dElkID0gbnVsbDtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLmlkbGVUaW1lb3V0SWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hY3RpdmVGaWxlO1xuXHRcdFx0aWYgKCFmaWxlKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgaWRsZUR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHRoaXMubGFzdEVkaXRUcztcblx0XHRcdGlmIChpZGxlRHVyYXRpb24gPj0gSURMRV9ERUxBWV9NUyAmJiB0aGlzLmRpcnR5RmlsZXMuaGFzKGZpbGUucGF0aCkpIHtcblx0XHRcdFx0dm9pZCB0aGlzLnRyaWdnZXJTeW5jRm9yRmlsZShmaWxlLCBcImlkbGVcIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLnJlc2V0SWRsZVRpbWVyKCk7XG5cdFx0XHR9XG5cdFx0fSwgSURMRV9ERUxBWV9NUyk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHRyaWdnZXJTeW5jRm9yRmlsZShmaWxlOiBURmlsZSwgcmVhc29uOiBTeW5jUmVhc29uKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgcGF0aCA9IGZpbGUucGF0aDtcblxuXHRcdGlmICh0aGlzLnBlbmRpbmdTeW5jcy5oYXMocGF0aCkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLnBlbmRpbmdTeW5jcy5hZGQocGF0aCk7XG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgdGFyZ2V0ID0gYXdhaXQgdGhpcy5yZXNvbHZlVGFyZ2V0KGZpbGUpO1xuXHRcdFx0aWYgKCF0YXJnZXQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAodGFyZ2V0LnB1c2hXaG9sZVN0b3J5KSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnN5bmNTZXJ2aWNlLnB1c2hTdG9yeSh0YXJnZXQuZm9sZGVyUGF0aCk7XG5cdFx0XHR9IGVsc2UgaWYgKHRhcmdldC5zeW5jVGFyZ2V0KSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnN5bmNTZXJ2aWNlLnB1c2hTdG9yeSh0YXJnZXQuZm9sZGVyUGF0aCwgdGFyZ2V0LnN5bmNUYXJnZXQpO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmRpcnR5RmlsZXMuZGVsZXRlKHBhdGgpO1xuXHRcdFx0aWYgKHJlYXNvbiA9PT0gXCJpZGxlXCIpIHtcblx0XHRcdFx0dGhpcy5sYXN0RWRpdFRzID0gRGF0ZS5ub3coKTtcblx0XHRcdFx0dGhpcy5yZXNldElkbGVUaW1lcigpO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihgQXV0byBwdXNoIGZhaWxlZCBmb3IgJHtmaWxlLnBhdGh9YCwgZXJyKTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0dGhpcy5wZW5kaW5nU3luY3MuZGVsZXRlKHBhdGgpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcmVzb2x2ZVRhcmdldChmaWxlOiBURmlsZSk6IFByb21pc2U8e1xuXHRcdGZvbGRlclBhdGg6IHN0cmluZztcblx0XHRwdXNoV2hvbGVTdG9yeTogYm9vbGVhbjtcblx0XHRzeW5jVGFyZ2V0PzogU3luY0VudGl0eVRhcmdldDtcblx0fSB8IG51bGw+IHtcblx0XHRjb25zdCBmb2xkZXJQYXRoID0gdGhpcy5maW5kU3RvcnlGb2xkZXJQYXRoKGZpbGUpO1xuXHRcdGlmICghZm9sZGVyUGF0aCkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0aWYgKGZpbGUubmFtZSA9PT0gXCJzdG9yeS5tZFwiKSB7XG5cdFx0XHRyZXR1cm4geyBmb2xkZXJQYXRoLCBwdXNoV2hvbGVTdG9yeTogdHJ1ZSB9O1xuXHRcdH1cblxuXHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQucmVhZChmaWxlKTtcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMucGx1Z2luLmZpbGVNYW5hZ2VyLnBhcnNlRnJvbnRtYXR0ZXIoY29udGVudCk7XG5cblx0XHRjb25zdCBlbnRpdHlJZCA9IGZyb250bWF0dGVyPy5pZDtcblx0XHRpZiAoIWVudGl0eUlkKSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHRjb25zdCBzY2VuZUlkID0gZnJvbnRtYXR0ZXIuc2NlbmVfaWQ7XG5cdFx0Y29uc3QgY2hhcHRlcklkID0gZnJvbnRtYXR0ZXIuY2hhcHRlcl9pZDtcblx0XHRjb25zdCBpc0NvbnRlbnRGaWxlID0gZmlsZS5wYXRoLmluY2x1ZGVzKFwiLzAzLWNvbnRlbnRzL1wiKTtcblx0XHRjb25zdCBpc0NoYXB0ZXJGaWxlID0gZmlsZS5wYXRoLmluY2x1ZGVzKFwiLzAwLWNoYXB0ZXJzL1wiKTtcblx0XHRjb25zdCBpc1NjZW5lRmlsZSA9IGZpbGUucGF0aC5pbmNsdWRlcyhcIi8wMS1zY2VuZXMvXCIpO1xuXG5cdFx0aWYgKGZyb250bWF0dGVyLnN0b3J5X2lkICYmIGZyb250bWF0dGVyLm51bWJlciAmJiBpc0NoYXB0ZXJGaWxlKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRmb2xkZXJQYXRoLFxuXHRcdFx0XHRwdXNoV2hvbGVTdG9yeTogZmFsc2UsXG5cdFx0XHRcdHN5bmNUYXJnZXQ6IHsgdHlwZTogXCJjaGFwdGVyXCIsIGlkOiBlbnRpdHlJZCB9LFxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRpZiAoZnJvbnRtYXR0ZXIuc3RvcnlfaWQgJiYgKGlzU2NlbmVGaWxlIHx8IGNoYXB0ZXJJZCkpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGZvbGRlclBhdGgsXG5cdFx0XHRcdHB1c2hXaG9sZVN0b3J5OiBmYWxzZSxcblx0XHRcdFx0c3luY1RhcmdldDogeyB0eXBlOiBcInNjZW5lXCIsIGlkOiBlbnRpdHlJZCB9LFxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRpZiAoc2NlbmVJZCkge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Zm9sZGVyUGF0aCxcblx0XHRcdFx0cHVzaFdob2xlU3Rvcnk6IGZhbHNlLFxuXHRcdFx0XHRzeW5jVGFyZ2V0OiB7IHR5cGU6IFwic2NlbmVcIiwgaWQ6IHNjZW5lSWQgfSxcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0aWYgKGlzQ29udGVudEZpbGUpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGZvbGRlclBhdGgsXG5cdFx0XHRcdHB1c2hXaG9sZVN0b3J5OiBmYWxzZSxcblx0XHRcdFx0c3luY1RhcmdldDogeyB0eXBlOiBcImNvbnRlbnRcIiwgaWQ6IGVudGl0eUlkIH0sXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0cHJpdmF0ZSBmaW5kU3RvcnlGb2xkZXJQYXRoKGZpbGU6IFRGaWxlKTogc3RyaW5nIHwgbnVsbCB7XG5cdFx0bGV0IGN1cnJlbnQ6IFRGb2xkZXIgfCBudWxsID0gZmlsZS5wYXJlbnQ7XG5cblx0XHR3aGlsZSAoY3VycmVudCkge1xuXHRcdFx0Y29uc3Qgc3RvcnlGaWxlUGF0aCA9IGAke2N1cnJlbnQucGF0aH0vc3RvcnkubWRgO1xuXHRcdFx0Y29uc3QgbWF5YmVTdG9yeUZpbGUgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHN0b3J5RmlsZVBhdGgpO1xuXHRcdFx0aWYgKG1heWJlU3RvcnlGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdFx0cmV0dXJuIGN1cnJlbnQucGF0aDtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgcGFyZW50ID0gY3VycmVudC5wYXJlbnQ7XG5cdFx0XHRpZiAocGFyZW50IGluc3RhbmNlb2YgVEZvbGRlcikge1xuXHRcdFx0XHRjdXJyZW50ID0gcGFyZW50O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y3VycmVudCA9IG51bGw7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cbn1cblxuIiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBOb3RpY2UsIE1vZGFsLCBzZXRJY29uIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgU3RvcnlFbmdpbmVQbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcbmltcG9ydCB7IFN0b3J5LCBDaGFwdGVyLCBTY2VuZSwgQmVhdCwgQ29udGVudEJsb2NrLCBDb250ZW50QW5jaG9yLCBXb3JsZCwgUlBHU3lzdGVtLCBDaGFyYWN0ZXIsIExvY2F0aW9uLCBBcnRpZmFjdCwgV29ybGRFdmVudCwgVHJhaXQsIEFyY2hldHlwZSwgRmFjdGlvbiwgTG9yZSwgVGltZUNvbmZpZywgQ2hhcmFjdGVyVHJhaXQsIENoYXJhY3RlclJlbGF0aW9uc2hpcCwgRXZlbnRDaGFyYWN0ZXIsIFNjZW5lUmVmZXJlbmNlIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBDaGFwdGVyTW9kYWwgfSBmcm9tIFwiLi9tb2RhbHMvQ2hhcHRlck1vZGFsXCI7XG5pbXBvcnQgeyBTY2VuZU1vZGFsIH0gZnJvbSBcIi4vbW9kYWxzL1NjZW5lTW9kYWxcIjtcbmltcG9ydCB7IEJlYXRNb2RhbCB9IGZyb20gXCIuL21vZGFscy9CZWF0TW9kYWxcIjtcbmltcG9ydCB7IENvbnRlbnRCbG9ja01vZGFsIH0gZnJvbSBcIi4vbW9kYWxzL0NvbnRlbnRCbG9ja01vZGFsXCI7XG5pbXBvcnQgeyBDcmVhdGVXb3JsZE1vZGFsIH0gZnJvbSBcIi4vQ3JlYXRlV29ybGRNb2RhbFwiO1xuaW1wb3J0IHsgV29ybGREZXRhaWxzTW9kYWwgfSBmcm9tIFwiLi9Xb3JsZERldGFpbHNNb2RhbFwiO1xuaW1wb3J0IHsgVGltZWxpbmVNb2RhbCB9IGZyb20gXCIuL1RpbWVsaW5lTW9kYWxcIjtcbmltcG9ydCB7IENoYXJhY3RlckRldGFpbHNWaWV3IH0gZnJvbSBcIi4vQ2hhcmFjdGVyRGV0YWlsc1ZpZXdcIjtcblxuZXhwb3J0IGNvbnN0IFNUT1JZX0xJU1RfVklFV19UWVBFID0gXCJzdG9yeS1lbmdpbmUtbGlzdC12aWV3XCI7XG5cblxuXG5cbmV4cG9ydCBjbGFzcyBTdG9yeUxpc3RWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuXHRwbHVnaW46IFN0b3J5RW5naW5lUGx1Z2luO1xuXHRzdG9yaWVzOiBTdG9yeVtdID0gW107XG5cdHdvcmxkczogV29ybGRbXSA9IFtdO1xuXHRycGdTeXN0ZW1zOiBSUEdTeXN0ZW1bXSA9IFtdO1xuXHRsb2FkaW5nOiBib29sZWFuID0gdHJ1ZTtcblx0ZXJyb3I6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXHRjb250ZW50RWwhOiBIVE1MRWxlbWVudDtcblx0aGVhZGVyRWwhOiBIVE1MRWxlbWVudDtcblx0Y3VycmVudFN0b3J5OiBTdG9yeSB8IG51bGwgPSBudWxsO1xuXHRjdXJyZW50V29ybGQ6IFdvcmxkIHwgbnVsbCA9IG51bGw7XG5cdHZpZXdNb2RlOiBcImxpc3RcIiB8IFwiZGV0YWlsc1wiIHwgXCJ3b3JsZC1kZXRhaWxzXCIgfCBcImNoYXJhY3Rlci1kZXRhaWxzXCIgPSBcImxpc3RcIjtcblx0Y3VycmVudFRhYjogXCJjaGFwdGVyc1wiIHwgXCJzY2VuZXNcIiB8IFwiYmVhdHNcIiB8IFwiY29udGVudHNcIiB8IFwiY2hhcmFjdGVyc1wiID0gXCJjaGFwdGVyc1wiO1xuXHRzdG9yeUNoYXJhY3RlcnM6IENoYXJhY3RlcltdID0gW107XG5cdHdvcmxkVGFiOiBcImNoYXJhY3RlcnNcIiB8IFwidHJhaXRzXCIgfCBcImFyY2hldHlwZXNcIiB8IFwiZXZlbnRzXCIgfCBcImxvcmVcIiB8IFwibG9jYXRpb25zXCIgfCBcImZhY3Rpb25zXCIgfCBcImFydGlmYWN0c1wiID0gXCJjaGFyYWN0ZXJzXCI7XG5cdGxpc3RUYWI6IFwic3Rvcmllc1wiIHwgXCJ3b3JsZHNcIiB8IFwicnBnLXN5c3RlbXNcIiA9IFwic3Rvcmllc1wiO1xuXHRleHBhbmRlZFdvcmxkSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXHQvLyBDaGFyYWN0ZXIgRGV0YWlscyBWaWV3XG5cdGNoYXJhY3RlckRldGFpbHNWaWV3OiBDaGFyYWN0ZXJEZXRhaWxzVmlldyB8IG51bGwgPSBudWxsO1xuXHRjaGFwdGVyczogQ2hhcHRlcltdID0gW107XG5cdHNjZW5lczogU2NlbmVbXSA9IFtdO1xuXHRiZWF0czogQmVhdFtdID0gW107XG5cdGNvbnRlbnRCbG9ja3M6IENvbnRlbnRCbG9ja1tdID0gW107XG5cdGNvbnRlbnRCbG9ja1JlZnM6IENvbnRlbnRBbmNob3JbXSA9IFtdO1xuXHRsb2FkaW5nSGllcmFyY2h5OiBib29sZWFuID0gZmFsc2U7XG5cdC8vIFdvcmxkIGVudGl0aWVzXG5cdGNoYXJhY3RlcnM6IENoYXJhY3RlcltdID0gW107XG5cdGxvY2F0aW9uczogTG9jYXRpb25bXSA9IFtdO1xuXHRhcnRpZmFjdHM6IEFydGlmYWN0W10gPSBbXTtcblx0ZXZlbnRzOiBXb3JsZEV2ZW50W10gPSBbXTtcblx0dHJhaXRzOiBUcmFpdFtdID0gW107XG5cdGFyY2hldHlwZXM6IEFyY2hldHlwZVtdID0gW107XG5cdGZhY3Rpb25zOiBGYWN0aW9uW10gPSBbXTtcblx0bG9yZXM6IExvcmVbXSA9IFtdO1xuXHRsb2FkaW5nV29ybGREYXRhOiBib29sZWFuID0gZmFsc2U7XG5cblx0Y29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbikge1xuXHRcdHN1cGVyKGxlYWYpO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0Z2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gU1RPUllfTElTVF9WSUVXX1RZUEU7XG5cdH1cblxuXHRcdGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG5cdFx0aWYgKHRoaXMudmlld01vZGUgPT09IFwiZGV0YWlsc1wiICYmIHRoaXMuY3VycmVudFN0b3J5KSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5jdXJyZW50U3RvcnkudGl0bGU7XG5cdFx0fVxuXHRcdGlmICh0aGlzLnZpZXdNb2RlID09PSBcIndvcmxkLWRldGFpbHNcIiAmJiB0aGlzLmN1cnJlbnRXb3JsZCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuY3VycmVudFdvcmxkLm5hbWU7XG5cdFx0fVxuXHRcdGlmICh0aGlzLnZpZXdNb2RlID09PSBcImNoYXJhY3Rlci1kZXRhaWxzXCIgJiYgdGhpcy5jaGFyYWN0ZXJEZXRhaWxzVmlldykge1xuXHRcdFx0cmV0dXJuIHRoaXMuY2hhcmFjdGVyRGV0YWlsc1ZpZXdbXCJjaGFyYWN0ZXJcIl0ubmFtZTtcblx0XHR9XG5cdFx0cmV0dXJuIFwiU3Rvcmllc1wiO1xuXHR9XG5cblx0Z2V0SWNvbigpOiBzdHJpbmcge1xuXHRcdHJldHVybiBcImJvb2stb3BlblwiO1xuXHR9XG5cblx0YXN5bmMgb25PcGVuKCkge1xuXHRcdGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XG5cdFx0Y29udGFpbmVyLmVtcHR5KCk7XG5cdFx0Y29udGFpbmVyLmFkZENsYXNzKFwic3RvcnktZW5naW5lLXZpZXctY29udGFpbmVyXCIpO1xuXHRcdFxuXHRcdGF3YWl0IHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU3RvcmllcygpO1xuXHR9XG5cblx0YXN5bmMgb25DbG9zZSgpIHtcblx0XHQvLyBDbGVhbnVwIGlmIG5lZWRlZFxuXHR9XG5cblx0YXN5bmMgcmVuZGVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRjb250YWluZXIuZW1wdHkoKTtcblxuXHRcdC8vIEhlYWRlciAtIHdpbGwgYmUgdXBkYXRlZCBiYXNlZCBvbiB2aWV3IG1vZGVcblx0XHR0aGlzLmhlYWRlckVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdmlldy1oZWFkZXJcIiB9KTtcblx0XHRcblx0XHQvLyBDb250ZW50IGFyZWFcblx0XHR0aGlzLmNvbnRlbnRFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXZpZXctY29udGVudFwiIH0pO1xuXG5cdFx0Ly8gUmVuZGVyIGJhc2VkIG9uIGN1cnJlbnQgbW9kZVxuXHRcdGlmICh0aGlzLnZpZXdNb2RlID09PSBcImRldGFpbHNcIiAmJiB0aGlzLmN1cnJlbnRTdG9yeSkge1xuXHRcdFx0dGhpcy5yZW5kZXJEZXRhaWxzKCk7XG5cdFx0fSBlbHNlIGlmICh0aGlzLnZpZXdNb2RlID09PSBcIndvcmxkLWRldGFpbHNcIiAmJiB0aGlzLmN1cnJlbnRXb3JsZCkge1xuXHRcdFx0dGhpcy5yZW5kZXJXb3JsZERldGFpbHMoKTtcblx0XHR9IGVsc2UgaWYgKHRoaXMudmlld01vZGUgPT09IFwiY2hhcmFjdGVyLWRldGFpbHNcIiAmJiB0aGlzLmNoYXJhY3RlckRldGFpbHNWaWV3KSB7XG5cdFx0XHR0aGlzLmNoYXJhY3RlckRldGFpbHNWaWV3LnJlbmRlcigpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnJlbmRlckxpc3RIZWFkZXIoKTtcblx0XHRcdHRoaXMucmVuZGVyTGlzdENvbnRlbnQoKTtcblx0XHR9XG5cdH1cblxuXHRyZW5kZXJMaXN0SGVhZGVyKCkge1xuXHRcdGlmICghdGhpcy5oZWFkZXJFbCkgcmV0dXJuO1xuXG5cdFx0dGhpcy5oZWFkZXJFbC5lbXB0eSgpO1xuXHRcdHRoaXMuaGVhZGVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiU3Rvcmllc1wiIH0pO1xuXG5cdFx0Ly8gVGFicyBmb3IgbGlzdCB2aWV3XG5cdFx0Y29uc3QgdGFic0NvbnRhaW5lciA9IHRoaXMuaGVhZGVyRWwuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10YWJzXCIgfSk7XG5cdFx0XG5cdFx0Y29uc3Qgc3Rvcmllc1RhYiA9IHRhYnNDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJTdG9yaWVzXCIsXG5cdFx0XHRjbHM6IGBzdG9yeS1lbmdpbmUtdGFiICR7dGhpcy5saXN0VGFiID09PSBcInN0b3JpZXNcIiA/IFwiaXMtYWN0aXZlXCIgOiBcIlwifWAsXG5cdFx0fSk7XG5cdFx0c3Rvcmllc1RhYi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5saXN0VGFiID0gXCJzdG9yaWVzXCI7XG5cdFx0XHR0aGlzLnJlbmRlckxpc3RIZWFkZXIoKTtcblx0XHRcdHRoaXMucmVuZGVyTGlzdENvbnRlbnQoKTtcblx0XHR9O1xuXG5cdFx0Y29uc3Qgd29ybGRzVGFiID0gdGFic0NvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIldvcmxkc1wiLFxuXHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLXRhYiAke3RoaXMubGlzdFRhYiA9PT0gXCJ3b3JsZHNcIiA/IFwiaXMtYWN0aXZlXCIgOiBcIlwifWAsXG5cdFx0fSk7XG5cdFx0d29ybGRzVGFiLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLmxpc3RUYWIgPSBcIndvcmxkc1wiO1xuXHRcdFx0dGhpcy5yZW5kZXJMaXN0SGVhZGVyKCk7XG5cdFx0XHR0aGlzLnJlbmRlckxpc3RDb250ZW50KCk7XG5cdFx0fTtcblxuXHRcdGNvbnN0IHJwZ1N5c3RlbXNUYWIgPSB0YWJzQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiUlBHIFN5c3RlbXNcIixcblx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS10YWIgJHt0aGlzLmxpc3RUYWIgPT09IFwicnBnLXN5c3RlbXNcIiA/IFwiaXMtYWN0aXZlXCIgOiBcIlwifWAsXG5cdFx0fSk7XG5cdFx0cnBnU3lzdGVtc1RhYi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5saXN0VGFiID0gXCJycGctc3lzdGVtc1wiO1xuXHRcdFx0dGhpcy5yZW5kZXJMaXN0SGVhZGVyKCk7XG5cdFx0XHR0aGlzLnJlbmRlckxpc3RDb250ZW50KCk7XG5cdFx0fTtcblxuXHRcdC8vIFNldHRpbmdzIGJ1dHRvbiAoZ2VhciBpY29uKSBpbiBoZWFkZXJcblx0XHRjb25zdCBzZXR0aW5nc0J1dHRvbiA9IHRhYnNDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1zZXR0aW5ncy1idG4gc3RvcnktZW5naW5lLXRhYlwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJPcGVuIFNldHRpbmdzXCIgfVxuXHRcdH0pO1xuXHRcdHNldEljb24oc2V0dGluZ3NCdXR0b24sIFwiZ2VhclwiKTtcblx0XHRzZXR0aW5nc0J1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5wbHVnaW4ub3BlblNldHRpbmdzKCk7XG5cdFx0fTtcblx0fVxuXG5cdHJlbmRlckxpc3RDb250ZW50KCkge1xuXHRcdGlmICghdGhpcy5jb250ZW50RWwpIHJldHVybjtcblxuXHRcdC8vIEVuc3VyZSBsaXN0IGxheW91dCAoc3RhY2tlZCkgZm9yIGxpc3QgdmlldyBzY3JlZW5zXG5cdFx0dGhpcy5jb250ZW50RWwuYWRkQ2xhc3MoXCJzdG9yeS1lbmdpbmUtbGlzdC1sYXlvdXRcIik7XG5cdFx0dGhpcy5jb250ZW50RWwucmVtb3ZlQ2xhc3MoXCJzdG9yeS1lbmdpbmUtc2lkZWJhci1sYXlvdXRcIik7XG5cblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXG5cdFx0aWYgKHRoaXMubG9hZGluZykge1xuXHRcdFx0dGhpcy5jb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJMb2FkaW5nLi4uXCIgfSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuZXJyb3IpIHtcblx0XHRcdHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7XG5cdFx0XHRcdHRleHQ6IGBFcnJvcjogJHt0aGlzLmVycm9yfWAsXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXJyb3JcIixcblx0XHRcdH0pO1xuXHRcdFx0Ly8gU3RpbGwgc2hvdyBhY3Rpb25zIGJhciBldmVuIG9uIGVycm9yXG5cdFx0XHR0aGlzLnJlbmRlckFjdGlvbnNCYXIoKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRzd2l0Y2ggKHRoaXMubGlzdFRhYikge1xuXHRcdFx0Y2FzZSBcInN0b3JpZXNcIjpcblx0XHRcdFx0dGhpcy5yZW5kZXJTdG9yaWVzVGFiKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcIndvcmxkc1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkc1RhYigpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJycGctc3lzdGVtc1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlclJQR1N5c3RlbXNUYWIoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXG5cdFx0Ly8gQWN0aW9ucyBiYXIgYmVsb3cgbGlzdFxuXHRcdHRoaXMucmVuZGVyQWN0aW9uc0JhcigpO1xuXHR9XG5cblx0cmVuZGVyQWN0aW9uc0JhcigpIHtcblx0XHRpZiAoIXRoaXMuY29udGVudEVsKSByZXR1cm47XG5cblx0XHRjb25zdCBhY3Rpb25zQmFyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1hY3Rpb25zLWJhclwiIH0pO1xuXHRcdFxuXHRcdGNvbnN0IHJlZnJlc2hCdXR0b24gPSBhY3Rpb25zQmFyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiUmVmcmVzaFwiLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1yZWZyZXNoLWJ0blwiLFxuXHRcdH0pO1xuXHRcdHJlZnJlc2hCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IHRoaXMubG9hZFN0b3JpZXMoKTtcblx0XHR9O1xuXG5cdFx0Y29uc3Qgc3luY0FsbEJ1dHRvbiA9IGFjdGlvbnNCYXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJTeW5jIEFsbFwiLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1zeW5jLWFsbC1idG5cIixcblx0XHR9KTtcblx0XHRzeW5jQWxsQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLnRlbmFudElkKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJQbGVhc2UgY29uZmlndXJlIFRlbmFudCBJRCBpbiBzZXR0aW5nc1wiLCA1MDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiU3luY2luZyBhbGwgc3Rvcmllcy4uLlwiKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc3luY1NlcnZpY2UucHVsbEFsbFN0b3JpZXMoKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkU3RvcmllcygpOyAvLyBSZWZyZXNoIHRoZSBsaXN0IGFmdGVyIHN5bmNcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPVxuXHRcdFx0XHRcdGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBzeW5jIHN0b3JpZXNcIjtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvLyBDcmVhdGUgYnV0dG9uIGJhc2VkIG9uIGFjdGl2ZSB0YWJcblx0XHRsZXQgY3JlYXRlQnV0dG9uVGV4dCA9IFwiQ3JlYXRlIFN0b3J5XCI7XG5cdFx0bGV0IGNyZWF0ZUJ1dHRvbkFjdGlvbiA9ICgpID0+IHtcblx0XHRcdHRoaXMucGx1Z2luLmNyZWF0ZVN0b3J5Q29tbWFuZCgpO1xuXHRcdH07XG5cblx0XHRpZiAodGhpcy5saXN0VGFiID09PSBcIndvcmxkc1wiKSB7XG5cdFx0XHRjcmVhdGVCdXR0b25UZXh0ID0gXCJDcmVhdGUgV29ybGRcIjtcblx0XHRcdGNyZWF0ZUJ1dHRvbkFjdGlvbiA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0bmV3IENyZWF0ZVdvcmxkTW9kYWwodGhpcy5hcHAsIGFzeW5jIChuYW1lOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcsIGdlbnJlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgQ3JlYXRpbmcgd29ybGQgXCIke25hbWV9XCIuLi5gKTtcblx0XHRcdFx0XHRcdGNvbnN0IG5ld1dvcmxkID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZVdvcmxkKG5hbWUsIGRlc2NyaXB0aW9uLCBnZW5yZSk7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBXb3JsZCBcIiR7bmFtZX1cIiBjcmVhdGVkIHN1Y2Nlc3NmdWxseWApO1xuXHRcdFx0XHRcdFx0Ly8gUmVmcmVzaCB3b3JsZHMgbGlzdFxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkU3RvcmllcygpO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIGNyZWF0ZSB3b3JsZFwiO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkub3BlbigpO1xuXHRcdFx0fTtcblx0XHR9IGVsc2UgaWYgKHRoaXMubGlzdFRhYiA9PT0gXCJycGctc3lzdGVtc1wiKSB7XG5cdFx0XHRjcmVhdGVCdXR0b25UZXh0ID0gXCJDcmVhdGUgUlBHIFN5c3RlbVwiO1xuXHRcdFx0Y3JlYXRlQnV0dG9uQWN0aW9uID0gKCkgPT4ge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQ3JlYXRlIFJQRyBTeXN0ZW0gLSBDb21pbmcgc29vblwiLCAzMDAwKTtcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Y29uc3QgY3JlYXRlQnV0dG9uID0gYWN0aW9uc0Jhci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBjcmVhdGVCdXR0b25UZXh0LFxuXHRcdFx0Y2xzOiBcIm1vZC1jdGEgc3RvcnktZW5naW5lLWNyZWF0ZS1idG5cIixcblx0XHR9KTtcblx0XHRjcmVhdGVCdXR0b24ub25jbGljayA9IGNyZWF0ZUJ1dHRvbkFjdGlvbjtcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyRW1wdHlDYXJkKFxuXHRcdGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG5cdFx0b3B0aW9uczoge1xuXHRcdFx0aWNvbjogc3RyaW5nO1xuXHRcdFx0dGl0bGU6IHN0cmluZztcblx0XHRcdGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuXHRcdFx0YWN0aW9uVGV4dD86IHN0cmluZztcblx0XHRcdG9uQWN0aW9uPzogKCkgPT4gdm9pZDtcblx0XHR9XG5cdCkge1xuXHRcdGNvbnN0IGNhcmQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1lbXB0eS1jYXJkXCIgfSk7XG5cdFx0Y29uc3QgaWNvbldyYXBwZXIgPSBjYXJkLmNyZWF0ZVNwYW4oeyBjbHM6IFwic3RvcnktZW5naW5lLWVtcHR5LWljb25cIiB9KTtcblx0XHRzZXRJY29uKGljb25XcmFwcGVyLCBvcHRpb25zLmljb24pO1xuXG5cdFx0Y29uc3QgY29weSA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1lbXB0eS1jb3B5XCIgfSk7XG5cdFx0Y29weS5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogb3B0aW9ucy50aXRsZSB9KTtcblx0XHRpZiAob3B0aW9ucy5kZXNjcmlwdGlvbikge1xuXHRcdFx0Y29weS5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBvcHRpb25zLmRlc2NyaXB0aW9uIH0pO1xuXHRcdH1cblxuXHRcdGlmIChvcHRpb25zLmFjdGlvblRleHQgJiYgb3B0aW9ucy5vbkFjdGlvbikge1xuXHRcdFx0Y29uc3QgYWN0aW9ucyA9IGNvcHkuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1lbXB0eS1hY3Rpb25zXCIgfSk7XG5cdFx0XHRjb25zdCBhY3Rpb25CdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0dGV4dDogb3B0aW9ucy5hY3Rpb25UZXh0LFxuXHRcdFx0XHRjbHM6IFwibW9kLWN0YSBzdG9yeS1lbmdpbmUtZW1wdHktYWN0aW9uXCIsXG5cdFx0XHR9KTtcblx0XHRcdGFjdGlvbkJ0bi5vbmNsaWNrID0gb3B0aW9ucy5vbkFjdGlvbjtcblx0XHR9XG5cblx0XHRyZXR1cm4gY2FyZDtcblx0fVxuXG5cdHJlbmRlckRldGFpbHNIZWFkZXIoKSB7XG5cdFx0aWYgKCF0aGlzLmhlYWRlckVsIHx8ICF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXG5cdFx0XHR0aGlzLmhlYWRlckVsLmVtcHR5KCk7XG5cblx0XHRcdGNvbnN0IGhlYWRlckNhcmQgPSB0aGlzLmhlYWRlckVsLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtc3RvcnktZGV0YWlscy1oZWFkZXJcIiB9KTtcblx0XHRcdGNvbnN0IGhlYWRlckNvbnRlbnQgPSBoZWFkZXJDYXJkLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtc3RvcnktaGVhZGVyLWNvbnRlbnRcIiB9KTtcblxuXHRcdFx0Y29uc3QgdG9wUm93ID0gaGVhZGVyQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXN0b3J5LWhlYWRlci10b3BcIiB9KTtcblx0XHRcdGNvbnN0IGJhY2tCdXR0b24gPSB0b3BSb3cuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHR0ZXh0OiBcIlx1MjE5MCBCYWNrXCIsXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtYmFjay1idG5cIixcblx0XHRcdH0pO1xuXHRcdFx0YmFja0J1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnNob3dMaXN0KCk7XG5cdFx0XHR9O1xuXG5cdFx0XHRjb25zdCBoZWFkZXJBY3Rpb25zID0gdG9wUm93LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaGVhZGVyLWFjdGlvbnNcIiB9KTtcblx0XHRcdGlmICh0aGlzLmN1cnJlbnRTdG9yeS53b3JsZF9pZCkge1xuXHRcdFx0XHRjb25zdCB3b3JsZCA9IHRoaXMud29ybGRzLmZpbmQodyA9PiB3LmlkID09PSB0aGlzLmN1cnJlbnRTdG9yeSEud29ybGRfaWQpO1xuXHRcdFx0XHRpZiAod29ybGQpIHtcblx0XHRcdFx0XHRjb25zdCB3b3JsZEJ1dHRvbiA9IGhlYWRlckFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC1idG5cIixcblx0XHRcdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IGBHbyB0byBXb3JsZDogJHt3b3JsZC5uYW1lfWAgfVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHNldEljb24od29ybGRCdXR0b24sIFwiZ2xvYmVcIik7XG5cdFx0XHRcdFx0d29ybGRCdXR0b24uY3JlYXRlU3Bhbih7IHRleHQ6IFwiV29ybGRcIiB9KTtcblx0XHRcdFx0XHR3b3JsZEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5zaG93V29ybGREZXRhaWxzKHdvcmxkKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGNvbnRleHRCdXR0b24gPSBoZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1jb250ZXh0LWJ0blwiLFxuXHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIlN0b3J5IEFjdGlvbnNcIiB9XG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24oY29udGV4dEJ1dHRvbiwgXCJtb3JlLXZlcnRpY2FsXCIpO1xuXG5cdFx0XHRjb25zdCBkcm9wZG93bk1lbnUgPSBoZWFkZXJBY3Rpb25zLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZHJvcGRvd24tbWVudVwiIH0pO1xuXHRcdFx0ZHJvcGRvd25NZW51LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuXHRcdFx0Y29uc3QgZWRpdE9wdGlvbiA9IGRyb3Bkb3duTWVudS5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZHJvcGRvd24taXRlbVwiLFxuXHRcdFx0fSk7XG5cdFx0XHRzZXRJY29uKGVkaXRPcHRpb24sIFwicGVuY2lsXCIpO1xuXHRcdFx0ZWRpdE9wdGlvbi5jcmVhdGVTcGFuKHsgdGV4dDogXCJFZGl0IFN0b3J5IE5hbWVcIiB9KTtcblx0XHRcdGVkaXRPcHRpb24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0ZHJvcGRvd25NZW51LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0XHRcdFx0dGhpcy5zaG93RWRpdFN0b3J5TmFtZU1vZGFsKCk7XG5cdFx0XHR9O1xuXG5cdFx0XHRjb25zdCBjbG9uZU9wdGlvbiA9IGRyb3Bkb3duTWVudS5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZHJvcGRvd24taXRlbVwiLFxuXHRcdFx0fSk7XG5cdFx0XHRzZXRJY29uKGNsb25lT3B0aW9uLCBcImNvcHlcIik7XG5cdFx0XHRjbG9uZU9wdGlvbi5jcmVhdGVTcGFuKHsgdGV4dDogXCJDbG9uZSBTdG9yeVwiIH0pO1xuXHRcdFx0Y2xvbmVPcHRpb24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0ZHJvcGRvd25NZW51LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0XHRcdFx0YXdhaXQgdGhpcy5jbG9uZVN0b3J5KCk7XG5cdFx0XHR9O1xuXG5cdFx0XHRjb25zdCBwdWxsT3B0aW9uID0gZHJvcGRvd25NZW51LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1kcm9wZG93bi1pdGVtXCIsXG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24ocHVsbE9wdGlvbiwgXCJkb3dubG9hZFwiKTtcblx0XHRcdHB1bGxPcHRpb24uY3JlYXRlU3Bhbih7IHRleHQ6IFwiUHVsbCBmcm9tIFNlcnZpY2VcIiB9KTtcblx0XHRcdHB1bGxPcHRpb24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0ZHJvcGRvd25NZW51LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0XHRcdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYFB1bGxpbmcgc3RvcnkgXCIke3RoaXMuY3VycmVudFN0b3J5LnRpdGxlfVwiLi4uYCk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc3luY1NlcnZpY2UucHVsbFN0b3J5KHRoaXMuY3VycmVudFN0b3J5LmlkKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKGBTdG9yeSBwdWxsZWQgc3VjY2Vzc2Z1bGx5IWApO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gcHVsbCBzdG9yeVwiO1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yTWVzc2FnZX1gLCA1MDAwKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0Y29uc3QgcHVzaE9wdGlvbiA9IGRyb3Bkb3duTWVudS5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZHJvcGRvd24taXRlbVwiLFxuXHRcdFx0fSk7XG5cdFx0XHRzZXRJY29uKHB1c2hPcHRpb24sIFwidXBsb2FkXCIpO1xuXHRcdFx0cHVzaE9wdGlvbi5jcmVhdGVTcGFuKHsgdGV4dDogXCJQdXNoIHRvIFNlcnZpY2VcIiB9KTtcblx0XHRcdHB1c2hPcHRpb24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0ZHJvcGRvd25NZW51LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0XHRcdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGNvbnN0IGZvbGRlclBhdGggPSB0aGlzLnBsdWdpbi5maWxlTWFuYWdlci5nZXRTdG9yeUZvbGRlclBhdGgodGhpcy5jdXJyZW50U3RvcnkudGl0bGUpO1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYFB1c2hpbmcgc3RvcnkgXCIke3RoaXMuY3VycmVudFN0b3J5LnRpdGxlfVwiLi4uYCk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc3luY1NlcnZpY2UucHVzaFN0b3J5KGZvbGRlclBhdGgpO1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYFN0b3J5IHB1c2hlZCBzdWNjZXNzZnVsbHkhYCk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBwdXNoIHN0b3J5XCI7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHRjb250ZXh0QnV0dG9uLm9uY2xpY2sgPSAoZSkgPT4ge1xuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRjb25zdCBpc1Zpc2libGUgPSBkcm9wZG93bk1lbnUuc3R5bGUuZGlzcGxheSAhPT0gXCJub25lXCI7XG5cdFx0XHRcdGRyb3Bkb3duTWVudS5zdHlsZS5kaXNwbGF5ID0gaXNWaXNpYmxlID8gXCJub25lXCIgOiBcImJsb2NrXCI7XG5cdFx0XHR9O1xuXG5cdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuXHRcdFx0XHRkcm9wZG93bk1lbnUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdFx0fSwgeyBvbmNlOiB0cnVlIH0pO1xuXG5cdFx0XHRjb25zdCB0aXRsZVNlY3Rpb24gPSBoZWFkZXJDb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtc3RvcnktdGl0bGUtc2VjdGlvblwiIH0pO1xuXHRcdFx0dGl0bGVTZWN0aW9uLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiB0aGlzLmN1cnJlbnRTdG9yeS50aXRsZSwgY2xzOiBcInN0b3J5LWVuZ2luZS1zdG9yeS1uYW1lXCIgfSk7XG5cblx0XHRcdGNvbnN0IG1ldGFSb3cgPSB0aXRsZVNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zdG9yeS1tZXRhLXJvd1wiIH0pO1xuXHRcdFx0Y29uc3Qgc3RhdHVzUGlsbCA9IG1ldGFSb3cuY3JlYXRlU3Bhbih7XG5cdFx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS1zdGF0dXMtcGlsbCBzdG9yeS1lbmdpbmUtc3RhdHVzLSR7dGhpcy5jdXJyZW50U3Rvcnkuc3RhdHVzLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzKy9nLCAnLScpfWBcblx0XHRcdH0pO1xuXHRcdFx0c3RhdHVzUGlsbC50ZXh0Q29udGVudCA9IHRoaXMuY3VycmVudFN0b3J5LnN0YXR1cztcblxuXHRcdFx0Y29uc3QgdmVyc2lvbkJhZGdlID0gbWV0YVJvdy5jcmVhdGVTcGFuKHsgY2xzOiBcInN0b3J5LWVuZ2luZS1waWxsIHN0b3J5LWVuZ2luZS1waWxsLXN0cm9uZ1wiIH0pO1xuXHRcdFx0dmVyc2lvbkJhZGdlLnRleHRDb250ZW50ID0gYHYke3RoaXMuY3VycmVudFN0b3J5LnZlcnNpb25fbnVtYmVyfWA7XG5cblx0XHRcdGNvbnN0IHV1aWRDb250YWluZXIgPSBtZXRhUm93LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtc3RvcnktdXVpZFwiIH0pO1xuXHRcdFx0dXVpZENvbnRhaW5lci5jcmVhdGVTcGFuKHsgdGV4dDogYCR7dGhpcy5jdXJyZW50U3RvcnkuaWQuc3Vic3RyaW5nKDAsIDEwKX0uLi5gIH0pO1xuXHRcdFx0Y29uc3QgY29weVV1aWRCdXR0b24gPSB1dWlkQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1jb3B5LXV1aWQtYnRuXCIsXG5cdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiQ29weSBVVUlEXCIgfVxuXHRcdFx0fSk7XG5cdFx0XHRzZXRJY29uKGNvcHlVdWlkQnV0dG9uLCBcImNvcHlcIik7XG5cdFx0XHRjb3B5VXVpZEJ1dHRvbi5vbmNsaWNrID0gKGUpID0+IHtcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0dGhpcy5jb3B5U3RvcnlJZCgpO1xuXHRcdFx0fTtcblx0fVxuXG5cdHJlbmRlclN0b3JpZXNUYWIoKSB7XG5cdFx0XHRpZiAodGhpcy5zdG9yaWVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHR0aGlzLnJlbmRlckVtcHR5Q2FyZCh0aGlzLmNvbnRlbnRFbCwge1xuXHRcdFx0XHRcdGljb246IFwiYm9va1wiLFxuXHRcdFx0XHRcdHRpdGxlOiBcIk5vIHN0b3JpZXMgeWV0XCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQ3JlYXRlIHlvdXIgZmlyc3Qgc3RvcnkgdG8gZ2V0IHN0YXJ0ZWQuXCIsXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHN0b3JpZXNHcmlkID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zdG9yeS1ncmlkXCIgfSk7XG5cblx0XHRcdGZvciAoY29uc3Qgc3Rvcnkgb2YgdGhpcy5zdG9yaWVzKSB7XG5cdFx0XHRcdGNvbnN0IGNhcmQgPSBzdG9yaWVzR3JpZC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXN0b3J5LWNhcmRcIiB9KTtcblx0XHRcdFx0Y2FyZC5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuc2hvd1N0b3J5RGV0YWlscyhzdG9yeSk7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Y29uc3QgaGVhZGVyID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXN0b3J5LWNhcmQtaGVhZGVyXCIgfSk7XG5cdFx0XHRcdGhlYWRlci5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogc3RvcnkudGl0bGUsIGNsczogXCJzdG9yeS1lbmdpbmUtc3RvcnktY2FyZC1uYW1lXCIgfSk7XG5cblx0XHRcdFx0Y29uc3QgYmFkZ2VzID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtc3RvcnktY2FyZC1iYWRnZXNcIiB9KTtcblx0XHRcdFx0YmFkZ2VzLmNyZWF0ZVNwYW4oe1xuXHRcdFx0XHRcdHRleHQ6IGB2JHtzdG9yeS52ZXJzaW9uX251bWJlcn1gLFxuXHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtcGlsbCBzdG9yeS1lbmdpbmUtcGlsbC1zdHJvbmdcIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YmFkZ2VzLmNyZWF0ZVNwYW4oe1xuXHRcdFx0XHRcdHRleHQ6IHN0b3J5LnN0YXR1cyxcblx0XHRcdFx0XHRjbHM6IGBzdG9yeS1lbmdpbmUtc3RhdHVzLXBpbGwgc3RvcnktZW5naW5lLXN0YXR1cy0ke3N0b3J5LnN0YXR1cy50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJy0nKX1gXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGNvbnN0IGJvZHkgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtc3RvcnktY2FyZC1ib2R5XCIgfSk7XG5cdFx0XHRcdGNvbnN0IG1ldGFSb3cgPSBib2R5LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtc3RvcnktbWV0YVwiIH0pO1xuXHRcdFx0XHRpZiAoc3Rvcnkud29ybGRfaWQpIHtcblx0XHRcdFx0XHRjb25zdCB3b3JsZCA9IHRoaXMud29ybGRzLmZpbmQodyA9PiB3LmlkID09PSBzdG9yeS53b3JsZF9pZCk7XG5cdFx0XHRcdFx0aWYgKHdvcmxkKSB7XG5cdFx0XHRcdFx0XHRtZXRhUm93LmNyZWF0ZVNwYW4oeyB0ZXh0OiB3b3JsZC5uYW1lLCBjbHM6IFwic3RvcnktZW5naW5lLXBpbGxcIiB9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bWV0YVJvdy5jcmVhdGVTcGFuKHsgdGV4dDogXCJObyB3b3JsZCBsaW5rZWRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1waWxsXCIgfSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBmb290ZXIgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtc3RvcnktY2FyZC1mb290ZXJcIiB9KTtcblx0XHRcdFx0Y29uc3QgaWRDb250YWluZXIgPSBmb290ZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC1pZFwiIH0pO1xuXHRcdFx0XHRpZENvbnRhaW5lci5jcmVhdGVTcGFuKHsgdGV4dDogYCR7c3RvcnkuaWQuc3Vic3RyaW5nKDAsIDgpfS4uLmAgfSk7XG5cdFx0XHRcdGNvbnN0IGNvcHlVdWlkQnV0dG9uID0gaWRDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtdXVpZC1jb3B5LWJ0blwiLFxuXHRcdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiQ29weSBVVUlEXCIgfVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0c2V0SWNvbihjb3B5VXVpZEJ1dHRvbiwgXCJjb3B5XCIpO1xuXHRcdFx0XHRjb3B5VXVpZEJ1dHRvbi5vbmNsaWNrID0gKGUpID0+IHtcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHN0b3J5LmlkKS50aGVuKCgpID0+IHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJVVUlEIGNvcGllZCB0byBjbGlwYm9hcmRcIik7XG5cdFx0XHRcdFx0fSkuY2F0Y2goKCkgPT4ge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkZhaWxlZCB0byBjb3B5IFVVSURcIiwgMzAwMCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Zm9vdGVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtY2FyZC1oaW50XCIsIHRleHQ6IFwiQ2xpY2sgdG8gb3BlbiBkZXRhaWxzXCIgfSk7XG5cdFx0XHR9XG5cdH1cblxuXHRyZW5kZXJXb3JsZHNUYWIoKSB7XG5cdFx0Ly8gR3JvdXAgc3RvcmllcyBieSB3b3JsZCBmb3IgY2hpcHMgYW5kIGNvdW50ZXJzXG5cdFx0Y29uc3Qgc3Rvcmllc0J5V29ybGQgPSBuZXcgTWFwPHN0cmluZyB8IG51bGwsIFN0b3J5W10+KCk7XG5cdFx0Zm9yIChjb25zdCBzdG9yeSBvZiB0aGlzLnN0b3JpZXMpIHtcblx0XHRcdGNvbnN0IHdvcmxkSWQgPSBzdG9yeS53b3JsZF9pZCB8fCBudWxsO1xuXHRcdFx0aWYgKCFzdG9yaWVzQnlXb3JsZC5oYXMod29ybGRJZCkpIHtcblx0XHRcdFx0c3Rvcmllc0J5V29ybGQuc2V0KHdvcmxkSWQsIFtdKTtcblx0XHRcdH1cblx0XHRcdHN0b3JpZXNCeVdvcmxkLmdldCh3b3JsZElkKSEucHVzaChzdG9yeSk7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3Rvcmllc1dpdGhvdXRXb3JsZCA9IHN0b3JpZXNCeVdvcmxkLmdldChudWxsKSB8fCBbXTtcblx0XHRjb25zdCBoYXNXb3JsZHMgPSB0aGlzLndvcmxkcy5sZW5ndGggPiAwO1xuXHRcdGNvbnN0IGhhc1VuYXNzaWduZWRTdG9yaWVzID0gc3Rvcmllc1dpdGhvdXRXb3JsZC5sZW5ndGggPiAwO1xuXG5cdFx0aWYgKCFoYXNXb3JsZHMgJiYgIWhhc1VuYXNzaWduZWRTdG9yaWVzKSB7XG5cdFx0XHR0aGlzLnJlbmRlckVtcHR5Q2FyZCh0aGlzLmNvbnRlbnRFbCwge1xuXHRcdFx0XHRpY29uOiBcImdsb2JlXCIsXG5cdFx0XHRcdHRpdGxlOiBcIk5vIHdvcmxkcyB5ZXRcIixcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQ3JlYXRlIGEgd29ybGQgdG8gc3RhcnQgb3JnYW5pemluZyB5b3VyIHN0b3JpZXMuXCIsXG5cdFx0XHRcdGFjdGlvblRleHQ6IFwiQ3JlYXRlIFdvcmxkXCIsXG5cdFx0XHRcdG9uQWN0aW9uOiAoKSA9PiB7XG5cdFx0XHRcdFx0bmV3IENyZWF0ZVdvcmxkTW9kYWwodGhpcy5hcHAsIGFzeW5jIChuYW1lOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcsIGdlbnJlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYENyZWF0aW5nIHdvcmxkIFwiJHtuYW1lfVwiLi4uYCk7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVXb3JsZChuYW1lLCBkZXNjcmlwdGlvbiwgZ2VucmUpO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRTdG9yaWVzKCk7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYFdvcmxkIFwiJHtuYW1lfVwiIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5YCk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIGNyZWF0ZSB3b3JsZFwiO1xuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSkub3BlbigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCB3b3JsZHNHcmlkID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZHMtZ3JpZFwiIH0pO1xuXG5cdFx0Zm9yIChjb25zdCB3b3JsZCBvZiB0aGlzLndvcmxkcykge1xuXHRcdFx0Y29uc3Qgd29ybGRTdG9yaWVzID0gc3Rvcmllc0J5V29ybGQuZ2V0KHdvcmxkLmlkKSB8fCBbXTtcblx0XHRcdGNvbnN0IGNhcmQgPSB3b3JsZHNHcmlkLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtY2FyZFwiIH0pO1xuXHRcdFx0Y2FyZC5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnNob3dXb3JsZERldGFpbHMod29ybGQpO1xuXHRcdFx0fTtcblxuXHRcdFx0Y29uc3QgY2FyZEhlYWRlciA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC1jYXJkLWhlYWRlclwiIH0pO1xuXHRcdFx0Y29uc3QgY2FyZFRpdGxlID0gY2FyZEhlYWRlci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLWNhcmQtdGl0bGVcIiB9KTtcblx0XHRcdGNhcmRUaXRsZS5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogd29ybGQubmFtZSwgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC1jYXJkLW5hbWVcIiB9KTtcblxuXHRcdFx0Y29uc3QgYmFkZ2VSb3cgPSBjYXJkSGVhZGVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtY2FyZC1tZXRhXCIgfSk7XG5cdFx0XHRpZiAod29ybGQuZ2VucmUpIHtcblx0XHRcdFx0YmFkZ2VSb3cuY3JlYXRlU3Bhbih7IHRleHQ6IHdvcmxkLmdlbnJlLCBjbHM6IFwic3RvcnktZW5naW5lLXBpbGxcIiB9KTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IHN0b3J5Q291bnQgPSB3b3JsZFN0b3JpZXMubGVuZ3RoO1xuXHRcdFx0YmFkZ2VSb3cuY3JlYXRlU3Bhbih7XG5cdFx0XHRcdHRleHQ6IHN0b3J5Q291bnQgPT09IDEgPyBcIjEgc3RvcnlcIiA6IGAke3N0b3J5Q291bnR9IHN0b3JpZXNgLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXBpbGwgc3RvcnktZW5naW5lLXBpbGwtc3Ryb25nXCJcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCBjYXJkQm9keSA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC1jYXJkLWJvZHlcIiB9KTtcblx0XHRcdGlmICh3b3JsZC5kZXNjcmlwdGlvbikge1xuXHRcdFx0XHRjYXJkQm9keS5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0XHRcdHRleHQ6IHdvcmxkLmRlc2NyaXB0aW9uLFxuXHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtY2FyZC1kZXNjcmlwdGlvblwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAod29ybGRTdG9yaWVzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0Y29uc3Qgc3RvcnlDaGlwcyA9IGNhcmRCb2R5LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtc3RvcnktY2hpcHNcIiB9KTtcblx0XHRcdFx0Y29uc3QgbWF4Q2hpcHMgPSAzO1xuXHRcdFx0XHR3b3JsZFN0b3JpZXMuc2xpY2UoMCwgbWF4Q2hpcHMpLmZvckVhY2goKHN0b3J5KSA9PiB7XG5cdFx0XHRcdFx0c3RvcnlDaGlwcy5jcmVhdGVTcGFuKHsgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC1zdG9yeS1jaGlwXCIsIHRleHQ6IHN0b3J5LnRpdGxlIH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKHdvcmxkU3Rvcmllcy5sZW5ndGggPiBtYXhDaGlwcykge1xuXHRcdFx0XHRcdHN0b3J5Q2hpcHMuY3JlYXRlU3Bhbih7XG5cdFx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLXN0b3J5LWNoaXAgc3RvcnktZW5naW5lLXdvcmxkLXN0b3J5LWNoaXAtbXV0ZWRcIixcblx0XHRcdFx0XHRcdHRleHQ6IGArJHt3b3JsZFN0b3JpZXMubGVuZ3RoIC0gbWF4Q2hpcHN9IG1vcmVgXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNhcmRCb2R5LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtZW1wdHktbGFiZWxcIiwgdGV4dDogXCJObyBzdG9yaWVzIHlldFwiIH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBjYXJkRm9vdGVyID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLWNhcmQtZm9vdGVyXCIgfSk7XG5cdFx0XHRjb25zdCBpZENvbnRhaW5lciA9IGNhcmRGb290ZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC1pZFwiIH0pO1xuXHRcdFx0aWRDb250YWluZXIuY3JlYXRlU3Bhbih7IHRleHQ6IGAke3dvcmxkLmlkLnN1YnN0cmluZygwLCA4KX0uLi5gIH0pO1xuXHRcdFx0Y29uc3QgY29weVV1aWRCdXR0b24gPSBpZENvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtdXVpZC1jb3B5LWJ0blwiLFxuXHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkNvcHkgVVVJRFwiIH1cblx0XHRcdH0pO1xuXHRcdFx0c2V0SWNvbihjb3B5VXVpZEJ1dHRvbiwgXCJjb3B5XCIpO1xuXHRcdFx0Y29weVV1aWRCdXR0b24ub25jbGljayA9IChlKSA9PiB7XG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHdvcmxkLmlkKS50aGVuKCgpID0+IHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiVVVJRCBjb3BpZWQgdG8gY2xpcGJvYXJkXCIpO1xuXHRcdFx0XHR9KS5jYXRjaCgoKSA9PiB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShcIkZhaWxlZCB0byBjb3B5IFVVSURcIiwgMzAwMCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fTtcblxuXHRcdFx0Y2FyZEZvb3Rlci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLWNhcmQtaGludFwiLCB0ZXh0OiBcIkNsaWNrIHRvIG9wZW4gZGV0YWlsc1wiIH0pO1xuXHRcdH1cblxuXHRcdGlmIChzdG9yaWVzV2l0aG91dFdvcmxkLmxlbmd0aCA+IDApIHtcblx0XHRcdGNvbnN0IHVuYXNzaWduZWRDYXJkID0gd29ybGRzR3JpZC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLWNhcmQgc3RvcnktZW5naW5lLXdvcmxkLWNhcmQtbXV0ZWRcIiB9KTtcblx0XHRcdHVuYXNzaWduZWRDYXJkLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIlVuYXNzaWduZWQgU3Rvcmllc1wiLCBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLWNhcmQtbmFtZVwiIH0pO1xuXHRcdFx0dW5hc3NpZ25lZENhcmQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJTdG9yaWVzIHRoYXQgYXJlIG5vdCBsaW5rZWQgdG8gYW55IHdvcmxkLlwiLCBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLWNhcmQtZGVzY3JpcHRpb25cIiB9KTtcblx0XHRcdGNvbnN0IHN0b3J5Q2hpcHMgPSB1bmFzc2lnbmVkQ2FyZC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLXN0b3J5LWNoaXBzXCIgfSk7XG5cdFx0XHRjb25zdCBtYXhDaGlwcyA9IDQ7XG5cdFx0XHRzdG9yaWVzV2l0aG91dFdvcmxkLnNsaWNlKDAsIG1heENoaXBzKS5mb3JFYWNoKChzdG9yeSkgPT4ge1xuXHRcdFx0XHRzdG9yeUNoaXBzLmNyZWF0ZVNwYW4oeyBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLXN0b3J5LWNoaXBcIiwgdGV4dDogc3RvcnkudGl0bGUgfSk7XG5cdFx0XHR9KTtcblx0XHRcdGlmIChzdG9yaWVzV2l0aG91dFdvcmxkLmxlbmd0aCA+IG1heENoaXBzKSB7XG5cdFx0XHRcdHN0b3J5Q2hpcHMuY3JlYXRlU3Bhbih7XG5cdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC1zdG9yeS1jaGlwIHN0b3J5LWVuZ2luZS13b3JsZC1zdG9yeS1jaGlwLW11dGVkXCIsXG5cdFx0XHRcdFx0dGV4dDogYCske3N0b3JpZXNXaXRob3V0V29ybGQubGVuZ3RoIC0gbWF4Q2hpcHN9IG1vcmVgXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJlbmRlclJQR1N5c3RlbXNUYWIoKSB7XG5cdFx0aWYgKHRoaXMucnBnU3lzdGVtcy5sZW5ndGggPT09IDApIHtcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlID09PSBcImxvY2FsXCIpIHtcblx0XHRcdFx0dGhpcy5jb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJSUEcgc3lzdGVtcyBhcmUgbm90IGF2YWlsYWJsZSBpbiBsb2NhbCBtb2RlLlwiIH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5jb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBSUEcgc3lzdGVtcyBmb3VuZC5cIiB9KTtcblx0XHRcdH1cblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBycGdTeXN0ZW1zTGlzdCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbGlzdFwiIH0pO1xuXG5cdFx0Zm9yIChjb25zdCBycGdTeXN0ZW0gb2YgdGhpcy5ycGdTeXN0ZW1zKSB7XG5cdFx0XHRjb25zdCBycGdTeXN0ZW1JdGVtID0gcnBnU3lzdGVtc0xpc3QuY3JlYXRlRGl2KHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtXCIsXG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgdGl0bGUgPSBycGdTeXN0ZW1JdGVtLmNyZWF0ZURpdih7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIixcblx0XHRcdFx0dGV4dDogcnBnU3lzdGVtLm5hbWUsXG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgbWV0YSA9IHJwZ1N5c3RlbUl0ZW0uY3JlYXRlRGl2KHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIsXG5cdFx0XHR9KTtcblx0XHRcdGlmIChycGdTeXN0ZW0uZGVzY3JpcHRpb24pIHtcblx0XHRcdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwge1xuXHRcdFx0XHRcdHRleHQ6IHJwZ1N5c3RlbS5kZXNjcmlwdGlvbixcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAocnBnU3lzdGVtLmlzX2J1aWx0aW4pIHtcblx0XHRcdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwge1xuXHRcdFx0XHRcdHRleHQ6IFwiQnVpbHQtaW5cIixcblx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWJhZGdlXCIsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJlbmRlclN0b3J5SXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCBzdG9yeTogU3RvcnkpIHtcblx0XHRjb25zdCBzdG9yeUl0ZW0gPSBjb250YWluZXIuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbVwiLFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgdGl0bGUgPSBzdG9yeUl0ZW0uY3JlYXRlRGl2KHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIixcblx0XHRcdHRleHQ6IHN0b3J5LnRpdGxlLFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgbWV0YSA9IHN0b3J5SXRlbS5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIsXG5cdFx0fSk7XG5cdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwge1xuXHRcdFx0dGV4dDogYFZlcnNpb24gJHtzdG9yeS52ZXJzaW9uX251bWJlcn1gLFxuXHRcdH0pO1xuXHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHtcblx0XHRcdHRleHQ6IGBTdGF0dXM6ICR7c3Rvcnkuc3RhdHVzfWAsXG5cdFx0fSk7XG5cdFx0Ly8gU2hvdyB3b3JsZCBpZiBjb25uZWN0ZWRcblx0XHRpZiAoc3Rvcnkud29ybGRfaWQpIHtcblx0XHRcdGNvbnN0IHdvcmxkID0gdGhpcy53b3JsZHMuZmluZCh3ID0+IHcuaWQgPT09IHN0b3J5LndvcmxkX2lkKTtcblx0XHRcdGlmICh3b3JsZCkge1xuXHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7XG5cdFx0XHRcdFx0dGV4dDogYFdvcmxkOiAke3dvcmxkLm5hbWV9YCxcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0c3RvcnlJdGVtLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRhd2FpdCB0aGlzLnNob3dTdG9yeURldGFpbHMoc3RvcnkpO1xuXHRcdH07XG5cdH1cblxuXHRhc3luYyBsb2FkU3RvcmllcygpIHtcblx0XHR0aGlzLmxvYWRpbmcgPSB0cnVlO1xuXHRcdHRoaXMuZXJyb3IgPSBudWxsO1xuXHRcdHRyeSB7XG5cdFx0XHQvLyBPbmx5IHZhbGlkYXRlIHRlbmFudCBJRCBpbiByZW1vdGUgbW9kZVxuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGUgPT09IFwicmVtb3RlXCIgJiYgIXRoaXMucGx1Z2luLnNldHRpbmdzLnRlbmFudElkKSB7XG5cdFx0XHRcdHRoaXMuZXJyb3IgPSBcIlRlbmFudCBJRCBub3QgY29uZmlndXJlZFwiO1xuXHRcdFx0XHR0aGlzLmxvYWRpbmcgPSBmYWxzZTtcblx0XHRcdFx0dGhpcy5yZW5kZXJMaXN0Q29udGVudCgpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIExvYWQgd29ybGRzIGZpcnN0IHRvIGdyb3VwIHN0b3JpZXNcblx0XHRcdHRoaXMud29ybGRzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldFdvcmxkcygpO1xuXHRcdFx0Ly8gTG9hZCBzdG9yaWVzXG5cdFx0XHR0aGlzLnN0b3JpZXMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQubGlzdFN0b3JpZXMoKTtcblx0XHRcdC8vIExvYWQgUlBHIHN5c3RlbXMgKG9wdGlvbmFsIC0gbWF5IG5vdCBiZSBhdmFpbGFibGUgaW4gbG9jYWwgbW9kZSlcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHRoaXMucnBnU3lzdGVtcyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRSUEdTeXN0ZW1zKCk7XG5cdFx0XHR9IGNhdGNoIChycGdFcnIpIHtcblx0XHRcdFx0Ly8gUlBHIHN5c3RlbXMgbm90IGF2YWlsYWJsZSAoZS5nLiwgaW4gbG9jYWwvb2ZmbGluZSBtb2RlKSAtIG5vdCBhIGZhdGFsIGVycm9yXG5cdFx0XHRcdGNvbnNvbGUud2FybihcIlJQRyBzeXN0ZW1zIG5vdCBhdmFpbGFibGU6XCIsIHJwZ0Vycik7XG5cdFx0XHRcdHRoaXMucnBnU3lzdGVtcyA9IFtdO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0dGhpcy5lcnJvciA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBsb2FkIHN0b3JpZXNcIjtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsb2FkaW5nIHN0b3JpZXM6XCIsIGVycik7XG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdHRoaXMubG9hZGluZyA9IGZhbHNlO1xuXHRcdFx0dGhpcy5yZW5kZXJMaXN0Q29udGVudCgpO1xuXHRcdH1cblx0fVxuXG5cdC8vIE1ldGhvZCB0byByZWZyZXNoIHRoZSB2aWV3XG5cdGFzeW5jIHJlZnJlc2goKSB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU3RvcmllcygpO1xuXHR9XG5cblx0YXN5bmMgc2hvd1N0b3J5RGV0YWlscyhzdG9yeTogU3RvcnkpIHtcblx0XHR0aGlzLmN1cnJlbnRTdG9yeSA9IHN0b3J5O1xuXHRcdHRoaXMudmlld01vZGUgPSBcImRldGFpbHNcIjtcblx0XHR0aGlzLmN1cnJlbnRUYWIgPSBcImNoYXB0ZXJzXCI7XG5cdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0dGhpcy5yZW5kZXJEZXRhaWxzKCk7XG5cdH1cblxuXHRhc3luYyBsb2FkSGllcmFyY2h5KCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50U3RvcnkpIHJldHVybjtcblxuXHRcdHRoaXMubG9hZGluZ0hpZXJhcmNoeSA9IHRydWU7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMuY2hhcHRlcnMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q2hhcHRlcnModGhpcy5jdXJyZW50U3RvcnkuaWQpO1xuXHRcdFx0dGhpcy5zY2VuZXMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0U2NlbmVzQnlTdG9yeSh0aGlzLmN1cnJlbnRTdG9yeS5pZCk7XG5cdFx0XHR0aGlzLmJlYXRzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldEJlYXRzQnlTdG9yeSh0aGlzLmN1cnJlbnRTdG9yeS5pZCk7XG5cdFx0XHRcblx0XHRcdC8vIExvYWQgY29udGVudCBibG9ja3MgYW5kIHJlZmVyZW5jZXNcblx0XHRcdGNvbnN0IGNvbnRlbnRCbG9ja3NNYXAgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudEJsb2NrPigpO1xuXHRcdFx0dGhpcy5jb250ZW50QmxvY2tSZWZzID0gW107XG5cdFx0XHRcblx0XHRcdC8vIEdldCBjb250ZW50IGJsb2NrcyBieSBjaGFwdGVyXG5cdFx0XHRmb3IgKGNvbnN0IGNoYXB0ZXIgb2YgdGhpcy5jaGFwdGVycykge1xuXHRcdFx0XHRjb25zdCBjaGFwdGVyQmxvY2tzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldENvbnRlbnRCbG9ja3MoY2hhcHRlci5pZCk7XG5cdFx0XHRcdGZvciAoY29uc3QgYmxvY2sgb2YgY2hhcHRlckJsb2Nrcykge1xuXHRcdFx0XHRcdGNvbnRlbnRCbG9ja3NNYXAuc2V0KGJsb2NrLmlkLCBibG9jayk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gR2V0IGNvbnRlbnQgYmxvY2tzIGJ5IHNjZW5lXG5cdFx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIHRoaXMuc2NlbmVzKSB7XG5cdFx0XHRcdGNvbnN0IHNjZW5lQmxvY2tzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldENvbnRlbnRCbG9ja3NCeVNjZW5lKHNjZW5lLmlkKTtcblx0XHRcdFx0Zm9yIChjb25zdCBibG9jayBvZiBzY2VuZUJsb2Nrcykge1xuXHRcdFx0XHRcdGNvbnRlbnRCbG9ja3NNYXAuc2V0KGJsb2NrLmlkLCBibG9jayk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gR2V0IGNvbnRlbnQgYmxvY2tzIGJ5IGJlYXRcblx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiB0aGlzLmJlYXRzKSB7XG5cdFx0XHRcdGNvbnN0IGJlYXRCbG9ja3MgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrc0J5QmVhdChiZWF0LmlkKTtcblx0XHRcdFx0Zm9yIChjb25zdCBibG9jayBvZiBiZWF0QmxvY2tzKSB7XG5cdFx0XHRcdFx0Y29udGVudEJsb2Nrc01hcC5zZXQoYmxvY2suaWQsIGJsb2NrKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBDb252ZXJ0IG1hcCB0byBhcnJheVxuXHRcdFx0dGhpcy5jb250ZW50QmxvY2tzID0gQXJyYXkuZnJvbShjb250ZW50QmxvY2tzTWFwLnZhbHVlcygpKTtcblx0XHRcdFxuXHRcdFx0Ly8gTG9hZCByZWZlcmVuY2VzIGZvciBhbGwgY29udGVudCBibG9ja3Ncblx0XHRcdGZvciAoY29uc3QgYmxvY2sgb2YgdGhpcy5jb250ZW50QmxvY2tzKSB7XG5cdFx0XHRcdGNvbnN0IHJlZnMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q29udGVudEFuY2hvcnMoYmxvY2suaWQpO1xuXHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9ja1JlZnMucHVzaCguLi5yZWZzKTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBsb2FkIGhpZXJhcmNoeVwiO1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHR0aGlzLmxvYWRpbmdIaWVyYXJjaHkgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHRzaG93TGlzdCgpIHtcblx0XHR0aGlzLmN1cnJlbnRTdG9yeSA9IG51bGw7XG5cdFx0dGhpcy52aWV3TW9kZSA9IFwibGlzdFwiO1xuXHRcdHRoaXMucmVuZGVyTGlzdEhlYWRlcigpO1xuXHRcdHRoaXMucmVuZGVyTGlzdENvbnRlbnQoKTtcblx0fVxuXG5cdHJlbmRlckRldGFpbHMoKSB7XG5cdFx0aWYgKCF0aGlzLmNvbnRlbnRFbCB8fCAhdGhpcy5jdXJyZW50U3RvcnkpIHJldHVybjtcblxuXHRcdC8vIFN3aXRjaCB0byBzaWRlYmFyIGxheW91dCBmb3Igc3RvcnkgZGV0YWlsIHZpZXdcblx0XHR0aGlzLmNvbnRlbnRFbC5yZW1vdmVDbGFzcyhcInN0b3J5LWVuZ2luZS1saXN0LWxheW91dFwiKTtcblx0XHR0aGlzLmNvbnRlbnRFbC5hZGRDbGFzcyhcInN0b3J5LWVuZ2luZS1zaWRlYmFyLWxheW91dFwiKTtcblxuXHRcdHRoaXMucmVuZGVyRGV0YWlsc0hlYWRlcigpO1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cblx0XHQvLyBUYWJzIHNlY3Rpb25cblx0XHR0aGlzLnJlbmRlclRhYnMoKTtcblx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0fVxuXG5cdHJlbmRlclRhYnMoKSB7XG5cdFx0aWYgKCF0aGlzLmNvbnRlbnRFbCkgcmV0dXJuO1xuXG5cdFx0Ly8gUmVtb3ZlIGV4aXN0aW5nIHRhYiBjb250YWluZXJzIChsZWdhY3kgaG9yaXpvbnRhbCArIHNpZGViYXIpXG5cdFx0Y29uc3QgZXhpc3RpbmdUYWJzID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcihcIi5zdG9yeS1lbmdpbmUtdGFic1wiKTtcblx0XHRpZiAoZXhpc3RpbmdUYWJzKSB7XG5cdFx0XHRleGlzdGluZ1RhYnMucmVtb3ZlKCk7XG5cdFx0fVxuXHRcdGNvbnN0IGV4aXN0aW5nU2lkZWJhciA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoXCIuc3RvcnktZW5naW5lLXN0b3J5LXNpZGViYXJcIik7XG5cdFx0aWYgKGV4aXN0aW5nU2lkZWJhcikge1xuXHRcdFx0ZXhpc3RpbmdTaWRlYmFyLnJlbW92ZSgpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHNpZGViYXJQb3NpdGlvbiA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnNpZGViYXJQb3NpdGlvbiB8fCBcImxlZnRcIjtcblx0XHRjb25zdCB0YWJzQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS13b3JsZC1zaWRlYmFyIHN0b3J5LWVuZ2luZS13b3JsZC1zaWRlYmFyLSR7c2lkZWJhclBvc2l0aW9ufSBzdG9yeS1lbmdpbmUtc3Rvcnktc2lkZWJhcmBcblx0XHR9KTtcblxuXHRcdHR5cGUgVGFiS2V5ID0gXCJjaGFwdGVyc1wiIHwgXCJzY2VuZXNcIiB8IFwiYmVhdHNcIiB8IFwiY29udGVudHNcIiB8IFwiY2hhcmFjdGVyc1wiO1xuXHRcdGNvbnN0IHRhYnM6IHsga2V5OiBUYWJLZXk7IGxhYmVsOiBzdHJpbmc7IGljb246IHN0cmluZyB9W10gPSBbXG5cdFx0XHR7IGtleTogXCJjaGFwdGVyc1wiLCBsYWJlbDogXCJDaGFwdGVyc1wiLCBpY29uOiBcImJvb2stb3BlblwiIH0sXG5cdFx0XHR7IGtleTogXCJzY2VuZXNcIiwgbGFiZWw6IFwiU2NlbmVzXCIsIGljb246IFwiZmlsbVwiIH0sXG5cdFx0XHR7IGtleTogXCJiZWF0c1wiLCBsYWJlbDogXCJCZWF0c1wiLCBpY29uOiBcImFjdGl2aXR5XCIgfSxcblx0XHRcdHsga2V5OiBcImNvbnRlbnRzXCIsIGxhYmVsOiBcIkNvbnRlbnRzXCIsIGljb246IFwiZmlsZS10ZXh0XCIgfSxcblx0XHRcdHsga2V5OiBcImNoYXJhY3RlcnNcIiwgbGFiZWw6IFwiQ2hhcmFjdGVyc1wiLCBpY29uOiBcInVzZXJzXCIgfSxcblx0XHRdO1xuXG5cdFx0Zm9yIChjb25zdCB0YWIgb2YgdGFicykge1xuXHRcdFx0Y29uc3QgdGFiQnV0dG9uID0gdGFic0NvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS1zaWRlYmFyLXRhYiAke3RoaXMuY3VycmVudFRhYiA9PT0gdGFiLmtleSA/IFwiaXMtYWN0aXZlXCIgOiBcIlwifWAsXG5cdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IHRhYi5sYWJlbCB9LFxuXHRcdFx0fSk7XG5cblx0XHRcdHNldEljb24odGFiQnV0dG9uLCB0YWIuaWNvbik7XG5cblx0XHRcdHRhYkJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmN1cnJlbnRUYWIgPSB0YWIua2V5O1xuXHRcdFx0XHR0aGlzLnJlbmRlclRhYnMoKTtcblx0XHRcdFx0aWYgKHRhYi5rZXkgPT09IFwiY2hhcmFjdGVyc1wiKSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkU3RvcnlDaGFyYWN0ZXJzKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdHJlbmRlclRhYkNvbnRlbnQoKSB7XG5cdFx0aWYgKCF0aGlzLmNvbnRlbnRFbCkgcmV0dXJuO1xuXG5cdFx0Ly8gUmVtb3ZlIGV4aXN0aW5nIHRhYiBjb250ZW50XG5cdFx0Y29uc3QgZXhpc3RpbmdDb250ZW50ID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcihcIi5zdG9yeS1lbmdpbmUtc3RvcnktdGFiLWNvbnRlbnRcIik7XG5cdFx0aWYgKGV4aXN0aW5nQ29udGVudCkge1xuXHRcdFx0ZXhpc3RpbmdDb250ZW50LnJlbW92ZSgpO1xuXHRcdH1cblx0XHRjb25zdCBsZWdhY3lDb250ZW50ID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcihcIi5zdG9yeS1lbmdpbmUtdGFiLWNvbnRlbnRcIik7XG5cdFx0aWYgKGxlZ2FjeUNvbnRlbnQpIHtcblx0XHRcdGxlZ2FjeUNvbnRlbnQucmVtb3ZlKCk7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc2lkZWJhclBvc2l0aW9uID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2lkZWJhclBvc2l0aW9uIHx8IFwibGVmdFwiO1xuXHRcdGNvbnN0IHRhYkNvbnRlbnQgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLXN0b3J5LXRhYi1jb250ZW50IHN0b3J5LWVuZ2luZS1jb250ZW50LXNpZGViYXItJHtzaWRlYmFyUG9zaXRpb259YFxuXHRcdH0pO1xuXG5cdFx0aWYgKHRoaXMubG9hZGluZ0hpZXJhcmNoeSkge1xuXHRcdFx0dGFiQ29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIkxvYWRpbmcuLi5cIiB9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRzd2l0Y2ggKHRoaXMuY3VycmVudFRhYikge1xuXHRcdFx0Y2FzZSBcImNoYXB0ZXJzXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyQ2hhcHRlcnNUYWIodGFiQ29udGVudCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcInNjZW5lc1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlclNjZW5lc1RhYih0YWJDb250ZW50KTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiYmVhdHNcIjpcblx0XHRcdFx0dGhpcy5yZW5kZXJCZWF0c1RhYih0YWJDb250ZW50KTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiY29udGVudHNcIjpcblx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50c1RhYih0YWJDb250ZW50KTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiY2hhcmFjdGVyc1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlclN0b3J5Q2hhcmFjdGVyc1RhYih0YWJDb250ZW50KTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXG5cdFx0dGhpcy5yZW5kZXJTdG9yeUFjdGlvbnNCYXIodGFiQ29udGVudCk7XG5cdH1cblxuXHRyZW5kZXJTdG9yeUFjdGlvbnNCYXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnN0IGFjdGlvbnNCYXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1hY3Rpb25zLWJhclwiIH0pO1xuXG5cdFx0bGV0IGNyZWF0ZUJ1dHRvblRleHQgPSBcIkNyZWF0ZSBDaGFwdGVyXCI7XG5cdFx0bGV0IGNyZWF0ZUJ1dHRvbkFjdGlvbiA9ICgpID0+IHtcblx0XHRcdGlmICghdGhpcy5jdXJyZW50U3RvcnkpIHJldHVybjtcblx0XHRcdG5ldyBDaGFwdGVyTW9kYWwodGhpcy5hcHAsIGFzeW5jIChjaGFwdGVyKSA9PiB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUNoYXB0ZXIodGhpcy5jdXJyZW50U3RvcnkhLmlkLCBjaGFwdGVyKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQ2hhcHRlciBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0dGhyb3cgZXJyO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCB0aGlzLmNoYXB0ZXJzKS5vcGVuKCk7XG5cdFx0fTtcblxuXHRcdHN3aXRjaCAodGhpcy5jdXJyZW50VGFiKSB7XG5cdFx0XHRjYXNlIFwic2NlbmVzXCI6XG5cdFx0XHRcdGNyZWF0ZUJ1dHRvblRleHQgPSBcIkNyZWF0ZSBTY2VuZVwiO1xuXHRcdFx0XHRjcmVhdGVCdXR0b25BY3Rpb24gPSAoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXHRcdFx0XHRcdG5ldyBTY2VuZU1vZGFsKHRoaXMuYXBwLCB0aGlzLmN1cnJlbnRTdG9yeS5pZCwgdGhpcy5jaGFwdGVycywgYXN5bmMgKHNjZW5lKSA9PiB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRzY2VuZS5jaGFwdGVyX2lkID0gbnVsbDtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZVNjZW5lKHNjZW5lKTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiU2NlbmUgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIik7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0dGhyb3cgZXJyO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIHRoaXMuc2NlbmVzLCB1bmRlZmluZWQsIG51bGwpLm9wZW4oKTtcblx0XHRcdFx0fTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiYmVhdHNcIjpcblx0XHRcdFx0Y3JlYXRlQnV0dG9uVGV4dCA9IHRoaXMuc2NlbmVzLmxlbmd0aCA+IDAgPyBcIkNyZWF0ZSBCZWF0XCIgOiBcIkdvIHRvIFNjZW5lc1wiO1xuXHRcdFx0XHRjcmVhdGVCdXR0b25BY3Rpb24gPSAoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuc2NlbmVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0dGhpcy5jdXJyZW50VGFiID0gXCJzY2VuZXNcIjtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyVGFicygpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICghdGhpcy5jdXJyZW50U3RvcnkpIHJldHVybjtcblx0XHRcdFx0XHRjb25zdCBzY2VuZSA9IHRoaXMuc2NlbmVzLnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pWzBdO1xuXHRcdFx0XHRcdG5ldyBCZWF0TW9kYWwodGhpcy5hcHAsIHRoaXMuY3VycmVudFN0b3J5LmlkLCB0aGlzLnNjZW5lcywgYXN5bmMgKGJlYXQpID0+IHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGJlYXQuc2NlbmVfaWQgPSBzY2VuZS5pZDtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUJlYXQoYmVhdCk7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkJlYXQgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIik7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0dGhyb3cgZXJyO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIHRoaXMuYmVhdHMsIHVuZGVmaW5lZCwgdGhpcy5jaGFwdGVycywgc2NlbmUuaWQpLm9wZW4oKTtcblx0XHRcdFx0fTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiY29udGVudHNcIjpcblx0XHRcdFx0Y3JlYXRlQnV0dG9uVGV4dCA9IHRoaXMuY2hhcHRlcnMubGVuZ3RoID4gMCA/IFwiQWRkIENvbnRlbnRcIiA6IFwiR28gdG8gQ2hhcHRlcnNcIjtcblx0XHRcdFx0Y3JlYXRlQnV0dG9uQWN0aW9uID0gKCkgPT4ge1xuXHRcdFx0XHRcdGlmICh0aGlzLmNoYXB0ZXJzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0dGhpcy5jdXJyZW50VGFiID0gXCJjaGFwdGVyc1wiO1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJzKCk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgY2hhcHRlciA9IHRoaXMuY2hhcHRlcnMuc29ydCgoYSwgYikgPT4gYS5udW1iZXIgLSBiLm51bWJlcilbMF07XG5cdFx0XHRcdFx0dGhpcy5jcmVhdGVDb250ZW50Rm9yRW50aXR5KFwiY2hhcHRlclwiLCBjaGFwdGVyLmlkLCBjaGFwdGVyLmlkKTtcblx0XHRcdFx0fTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiY2hhcmFjdGVyc1wiOlxuXHRcdFx0XHRjcmVhdGVCdXR0b25UZXh0ID0gXCJDcmVhdGUgQ2hhcmFjdGVyXCI7XG5cdFx0XHRcdGNyZWF0ZUJ1dHRvbkFjdGlvbiA9ICgpID0+IHtcblx0XHRcdFx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5Py53b3JsZF9pZCkge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIlRoaXMgc3RvcnkgaXMgbm90IGxpbmtlZCB0byBhIHdvcmxkXCIsIDMwMDApO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLnNob3dDcmVhdGVDaGFyYWN0ZXJNb2RhbEZvclN0b3J5KCk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblxuXHRcdGNvbnN0IGNyZWF0ZUJ1dHRvbiA9IGFjdGlvbnNCYXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogY3JlYXRlQnV0dG9uVGV4dCxcblx0XHRcdGNsczogXCJtb2QtY3RhIHN0b3J5LWVuZ2luZS1jcmVhdGUtYnRuXCIsXG5cdFx0fSk7XG5cdFx0Y3JlYXRlQnV0dG9uLm9uY2xpY2sgPSBjcmVhdGVCdXR0b25BY3Rpb247XG5cdH1cblxuXHRyZW5kZXJDaGFwdGVyc1RhYihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0Y29udGFpbmVyLmVtcHR5KCk7XG5cblx0XHRpZiAodGhpcy5jaGFwdGVycy5sZW5ndGggPT09IDApIHtcblx0XHRcdHRoaXMucmVuZGVyRW1wdHlDYXJkKGNvbnRhaW5lciwge1xuXHRcdFx0XHRpY29uOiBcImJvb2stb3BlblwiLFxuXHRcdFx0XHR0aXRsZTogXCJObyBjaGFwdGVycyB5ZXRcIixcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQ3JlYXRlIHRoZSBmaXJzdCBjaGFwdGVyIHRvIHN0YXJ0IG9yZ2FuaXppbmcgdGhpcyBzdG9yeS5cIixcblx0XHRcdFx0YWN0aW9uVGV4dDogXCJDcmVhdGUgQ2hhcHRlclwiLFxuXHRcdFx0XHRvbkFjdGlvbjogKCkgPT4ge1xuXHRcdFx0XHRcdGlmICghdGhpcy5jdXJyZW50U3RvcnkpIHJldHVybjtcblx0XHRcdFx0XHRuZXcgQ2hhcHRlck1vZGFsKHRoaXMuYXBwLCBhc3luYyAoY2hhcHRlcikgPT4ge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUNoYXB0ZXIodGhpcy5jdXJyZW50U3RvcnkhLmlkLCBjaGFwdGVyKTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQ2hhcHRlciBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgdGhpcy5jaGFwdGVycykub3BlbigpO1xuXHRcdFx0XHR9LFxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblx0XG5cdFx0Zm9yIChjb25zdCBjaGFwdGVyIG9mIHRoaXMuY2hhcHRlcnMuc29ydCgoYSwgYikgPT4gYS5udW1iZXIgLSBiLm51bWJlcikpIHtcblx0XHRcdGNvbnN0IGl0ZW0gPSBsaXN0LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbVwiIH0pO1xuXHRcdFx0aXRlbS5jcmVhdGVEaXYoe1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXRpdGxlXCIsXG5cdFx0XHRcdHRleHQ6IGBDaGFwdGVyICR7Y2hhcHRlci5udW1iZXJ9OiAke2NoYXB0ZXIudGl0bGV9YCxcblx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgbWV0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIgfSk7XG5cdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGBTdGF0dXM6ICR7Y2hhcHRlci5zdGF0dXN9YCB9KTtcblx0XHRcblx0XHRcdC8vIEhvdmVyIGFjdGlvbnNcblx0XHRcdGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbS1hY3Rpb25zXCIgfSk7XG5cdFx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJFZGl0XCIgfSkub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0bmV3IENoYXB0ZXJNb2RhbCh0aGlzLmFwcCwgYXN5bmMgKHVwZGF0ZWRDaGFwdGVyKSA9PiB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVDaGFwdGVyKGNoYXB0ZXIuaWQsIHVwZGF0ZWRDaGFwdGVyKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQ2hhcHRlciB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcblx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdHRocm93IGVycjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIHRoaXMuY2hhcHRlcnMsIGNoYXB0ZXIpLm9wZW4oKTtcblx0XHRcdH07XG5cdFx0XHQvLyBVcC9Eb3duIGJ1dHRvbnNcblx0XHRcdGlmIChjaGFwdGVyLm51bWJlciA+IDEpIHtcblx0XHRcdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiVXBcIiB9KS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMubW92ZUNoYXB0ZXJVcChjaGFwdGVyKTtcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdGlmIChjaGFwdGVyLm51bWJlciA8IHRoaXMuY2hhcHRlcnMubGVuZ3RoKSB7XG5cdFx0XHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkRvd25cIiB9KS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMubW92ZUNoYXB0ZXJEb3duKGNoYXB0ZXIpO1xuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0Ly8gQWRkIENvbnRlbnQgYnV0dG9uIChvbmx5IGluIENvbnRlbnRzIHRhYilcblx0XHRcdGlmICh0aGlzLmN1cnJlbnRUYWIgPT09IFwiY29udGVudHNcIikge1xuXHRcdFx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCIrIENvbnRlbnRcIiB9KS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuY3JlYXRlQ29udGVudEZvckVudGl0eShcImNoYXB0ZXJcIiwgY2hhcHRlci5pZCwgY2hhcHRlci5pZCk7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJEZWxldGVcIiB9KS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRpZiAoY29uZmlybShcIkRlbGV0ZSB0aGlzIGNoYXB0ZXI/XCIpKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5kZWxldGVDaGFwdGVyKGNoYXB0ZXIuaWQpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJDaGFwdGVyIGRlbGV0ZWRcIik7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gQWN0aW9ucyBoYW5kbGVkIGJ5IHN0b3J5IGFjdGlvbnMgYmFyXG5cdH1cblxuXHRyZW5kZXJTY2VuZXNUYWIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xuXG5cdFx0aWYgKHRoaXMuc2NlbmVzLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmNoYXB0ZXJzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dGhpcy5yZW5kZXJFbXB0eUNhcmQoY29udGFpbmVyLCB7XG5cdFx0XHRcdGljb246IFwiZmlsbVwiLFxuXHRcdFx0XHR0aXRsZTogXCJObyBzY2VuZXMgeWV0XCIsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkFkZCBhIGNoYXB0ZXIgYW5kIGl0cyBmaXJzdCBzY2VuZSB0byBzdGFydCBzdHJ1Y3R1cmluZyB0aGUgc3RvcnkuXCIsXG5cdFx0XHRcdGFjdGlvblRleHQ6IFwiQ3JlYXRlIFNjZW5lXCIsXG5cdFx0XHRcdG9uQWN0aW9uOiAoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXHRcdFx0XHRcdG5ldyBTY2VuZU1vZGFsKHRoaXMuYXBwLCB0aGlzLmN1cnJlbnRTdG9yeS5pZCwgdGhpcy5jaGFwdGVycywgYXN5bmMgKHNjZW5lKSA9PiB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRzY2VuZS5jaGFwdGVyX2lkID0gbnVsbDtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZVNjZW5lKHNjZW5lKTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiU2NlbmUgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIik7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0dGhyb3cgZXJyO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIHRoaXMuc2NlbmVzLCB1bmRlZmluZWQsIG51bGwpLm9wZW4oKTtcblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEdyb3VwIHNjZW5lcyBieSBjaGFwdGVyXG5cdFx0Y29uc3Qgc2NlbmVzQnlDaGFwdGVyID0gbmV3IE1hcDxzdHJpbmcgfCBudWxsLCBTY2VuZVtdPigpO1xuXHRcdGZvciAoY29uc3Qgc2NlbmUgb2YgdGhpcy5zY2VuZXMpIHtcblx0XHRcdGNvbnN0IGNoYXB0ZXJJZCA9IHNjZW5lLmNoYXB0ZXJfaWQgfHwgbnVsbDtcblx0XHRcdGlmICghc2NlbmVzQnlDaGFwdGVyLmhhcyhjaGFwdGVySWQpKSB7XG5cdFx0XHRcdHNjZW5lc0J5Q2hhcHRlci5zZXQoY2hhcHRlcklkLCBbXSk7XG5cdFx0XHR9XG5cdFx0XHRzY2VuZXNCeUNoYXB0ZXIuZ2V0KGNoYXB0ZXJJZCkhLnB1c2goc2NlbmUpO1xuXHRcdH1cblxuXHRcdGNvbnN0IGxpc3QgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1saXN0XCIgfSk7XG5cblx0XHQvLyBSZW5kZXIgc2NlbmVzIGdyb3VwZWQgYnkgY2hhcHRlclxuXHRcdGZvciAoY29uc3QgY2hhcHRlciBvZiB0aGlzLmNoYXB0ZXJzLnNvcnQoKGEsIGIpID0+IGEubnVtYmVyIC0gYi5udW1iZXIpKSB7XG5cdFx0XHRjb25zdCBjaGFwdGVyU2NlbmVzID0gc2NlbmVzQnlDaGFwdGVyLmdldChjaGFwdGVyLmlkKSB8fCBbXTtcblx0XHRcdGNvbnN0IGdyb3VwID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwXCIgfSk7XG5cdFx0XHRjb25zdCBncm91cEhlYWRlciA9IGdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtaGVhZGVyXCIgfSk7XG5cdFx0XHRncm91cEhlYWRlci5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogYENoYXB0ZXIgJHtjaGFwdGVyLm51bWJlcn06ICR7Y2hhcHRlci50aXRsZX1gIH0pO1xuXG5cdFx0XHRjb25zdCBncm91cEl0ZW1zID0gZ3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1pdGVtc1wiIH0pO1xuXHRcdFx0aWYgKGNoYXB0ZXJTY2VuZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdGdyb3VwSXRlbXMuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBzY2VuZXMgaW4gdGhpcyBjaGFwdGVyLlwiIH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBjaGFwdGVyU2NlbmVzLnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pKSB7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJTY2VuZUl0ZW0oZ3JvdXBJdGVtcywgc2NlbmUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZvb3RlciB3aXRoIEFkZCBTY2VuZSBidXR0b24gKGFwcGVhcnMgb24gaG92ZXIpXG5cdFx0XHRjb25zdCBncm91cEZvb3RlciA9IGdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtZm9vdGVyXCIgfSk7XG5cdFx0XHRjb25zdCBhZGRCdXR0b24gPSBncm91cEZvb3Rlci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdHRleHQ6IFwiKyBBZGQgU2NlbmVcIixcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1hZGQtYnRuXCIsXG5cdFx0XHR9KTtcblx0XHRcdGFkZEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cdFx0XHRcdG5ldyBTY2VuZU1vZGFsKHRoaXMuYXBwLCB0aGlzLmN1cnJlbnRTdG9yeS5pZCwgdGhpcy5jaGFwdGVycywgYXN5bmMgKHNjZW5lKSA9PiB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdHNjZW5lLmNoYXB0ZXJfaWQgPSBjaGFwdGVyLmlkO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZVNjZW5lKHNjZW5lKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiU2NlbmUgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIik7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCB0aGlzLnNjZW5lcywgdW5kZWZpbmVkLCBjaGFwdGVyLmlkKS5vcGVuKCk7XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdC8vIFJlbmRlciBvcnBoYW4gc2NlbmVzIChubyBjaGFwdGVyKVxuXHRcdGNvbnN0IG9ycGhhblNjZW5lcyA9IHNjZW5lc0J5Q2hhcHRlci5nZXQobnVsbCkgfHwgW107XG5cdFx0aWYgKG9ycGhhblNjZW5lcy5sZW5ndGggPiAwIHx8IHNjZW5lc0J5Q2hhcHRlci5zaXplID09PSAwKSB7XG5cdFx0XHRjb25zdCBncm91cCA9IGxpc3QuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cFwiIH0pO1xuXHRcdFx0Y29uc3QgZ3JvdXBIZWFkZXIgPSBncm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwLWhlYWRlclwiIH0pO1xuXHRcdFx0Z3JvdXBIZWFkZXIuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiV2l0aG91dCBDaGFwdGVyXCIgfSk7XG5cblx0XHRcdGNvbnN0IGdyb3VwSXRlbXMgPSBncm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwLWl0ZW1zXCIgfSk7XG5cdFx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIG9ycGhhblNjZW5lcy5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKSkge1xuXHRcdFx0XHR0aGlzLnJlbmRlclNjZW5lSXRlbShncm91cEl0ZW1zLCBzY2VuZSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZvb3RlciB3aXRoIEFkZCBTY2VuZSBidXR0b24gKGFwcGVhcnMgb24gaG92ZXIpXG5cdFx0XHRjb25zdCBncm91cEZvb3RlciA9IGdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtZm9vdGVyXCIgfSk7XG5cdFx0XHRjb25zdCBhZGRCdXR0b24gPSBncm91cEZvb3Rlci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdHRleHQ6IFwiKyBBZGQgU2NlbmVcIixcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1hZGQtYnRuXCIsXG5cdFx0XHR9KTtcblx0XHRcdGFkZEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cdFx0XHRcdG5ldyBTY2VuZU1vZGFsKHRoaXMuYXBwLCB0aGlzLmN1cnJlbnRTdG9yeS5pZCwgdGhpcy5jaGFwdGVycywgYXN5bmMgKHNjZW5lKSA9PiB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdHNjZW5lLmNoYXB0ZXJfaWQgPSBudWxsO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZVNjZW5lKHNjZW5lKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiU2NlbmUgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIik7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCB0aGlzLnNjZW5lcywgdW5kZWZpbmVkLCBudWxsKS5vcGVuKCk7XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdHJlbmRlclNjZW5lSXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCBzY2VuZTogU2NlbmUpIHtcblx0XHRjb25zdCBpdGVtID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbVwiIH0pO1xuXHRcdGl0ZW0uY3JlYXRlRGl2KHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIixcblx0XHRcdHRleHQ6IGBTY2VuZSAke3NjZW5lLm9yZGVyX251bX06ICR7c2NlbmUuZ29hbCB8fCBcIlVudGl0bGVkXCJ9YCxcblx0XHR9KTtcblx0XHRjb25zdCBtZXRhID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRpZiAoc2NlbmUudGltZV9yZWYpIHtcblx0XHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogYFRpbWU6ICR7c2NlbmUudGltZV9yZWZ9YCB9KTtcblx0XHR9XG5cblx0XHRjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0tYWN0aW9uc1wiIH0pO1xuXHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkVkaXRcIiB9KS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXHRcdFx0bmV3IFNjZW5lTW9kYWwodGhpcy5hcHAsIHRoaXMuY3VycmVudFN0b3J5LmlkLCB0aGlzLmNoYXB0ZXJzLCBhc3luYyAodXBkYXRlZFNjZW5lKSA9PiB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZVNjZW5lKHNjZW5lLmlkLCB1cGRhdGVkU2NlbmUpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJTY2VuZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0dGhyb3cgZXJyO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCB0aGlzLnNjZW5lcywgc2NlbmUpLm9wZW4oKTtcblx0XHR9O1xuXHRcdC8vIFVwL0Rvd24gYnV0dG9uc1xuXHRcdGNvbnN0IHNpYmxpbmdTY2VuZXMgPSB0aGlzLnNjZW5lcy5maWx0ZXIocyA9PiBzLmNoYXB0ZXJfaWQgPT09IHNjZW5lLmNoYXB0ZXJfaWQpXG5cdFx0XHQuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSk7XG5cdFx0Y29uc3QgbWluT3JkZXJOdW0gPSBzaWJsaW5nU2NlbmVzLmxlbmd0aCA+IDAgPyBNYXRoLm1pbiguLi5zaWJsaW5nU2NlbmVzLm1hcChzID0+IHMub3JkZXJfbnVtKSkgOiBzY2VuZS5vcmRlcl9udW07XG5cdFx0Y29uc3QgbWF4T3JkZXJOdW0gPSBzaWJsaW5nU2NlbmVzLmxlbmd0aCA+IDAgPyBNYXRoLm1heCguLi5zaWJsaW5nU2NlbmVzLm1hcChzID0+IHMub3JkZXJfbnVtKSkgOiBzY2VuZS5vcmRlcl9udW07XG5cdFx0aWYgKHNjZW5lLm9yZGVyX251bSA+IG1pbk9yZGVyTnVtKSB7XG5cdFx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJVcFwiIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMubW92ZVNjZW5lVXAoc2NlbmUpO1xuXHRcdFx0fTtcblx0XHR9XG5cdFx0aWYgKHNjZW5lLm9yZGVyX251bSA8IG1heE9yZGVyTnVtKSB7XG5cdFx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJEb3duXCIgfSkub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0dGhpcy5tb3ZlU2NlbmVEb3duKHNjZW5lKTtcblx0XHRcdH07XG5cdFx0fVxuXHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlJlbGlua2FyXCIgfSkub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IHRoaXMuc2hvd01vdmVTY2VuZU1vZGFsKHNjZW5lKTtcblx0XHR9O1xuXHRcdC8vIEFkZCBDb250ZW50IGJ1dHRvbiAob25seSBpbiBDb250ZW50cyB0YWIpXG5cdFx0aWYgKHRoaXMuY3VycmVudFRhYiA9PT0gXCJjb250ZW50c1wiKSB7XG5cdFx0XHRjb25zdCBjaGFwdGVySWQgPSBzY2VuZS5jaGFwdGVyX2lkIHx8ICh0aGlzLmNoYXB0ZXJzLmxlbmd0aCA+IDAgPyB0aGlzLmNoYXB0ZXJzWzBdLmlkIDogXCJcIik7XG5cdFx0XHRpZiAoY2hhcHRlcklkKSB7XG5cdFx0XHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIisgQ29udGVudFwiIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5jcmVhdGVDb250ZW50Rm9yRW50aXR5KFwic2NlbmVcIiwgc2NlbmUuaWQsIGNoYXB0ZXJJZCk7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkRlbGV0ZVwiIH0pLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoY29uZmlybShcIkRlbGV0ZSB0aGlzIHNjZW5lP1wiKSkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5kZWxldGVTY2VuZShzY2VuZS5pZCk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShcIlNjZW5lIGRlbGV0ZWRcIik7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdHJlbmRlckJlYXRzVGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRjb250YWluZXIuZW1wdHkoKTtcblxuXHRcdGlmICh0aGlzLmJlYXRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dGhpcy5yZW5kZXJFbXB0eUNhcmQoY29udGFpbmVyLCB7XG5cdFx0XHRcdGljb246IFwiYWN0aXZpdHlcIixcblx0XHRcdFx0dGl0bGU6IFwiTm8gYmVhdHMgeWV0XCIsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiB0aGlzLnNjZW5lcy5sZW5ndGggPT09IDBcblx0XHRcdFx0XHQ/IFwiQ3JlYXRlIGEgc2NlbmUgZmlyc3QsIHRoZW4gYWRkIGJlYXRzIHRvIG91dGxpbmUgdGhlIGZsb3cuXCJcblx0XHRcdFx0XHQ6IFwiQWRkIGJlYXRzIGluc2lkZSBzY2VuZXMgdG8gYnVpbGQgdGhlIG5hcnJhdGl2ZSByaHl0aG0uXCIsXG5cdFx0XHRcdGFjdGlvblRleHQ6IHRoaXMuc2NlbmVzLmxlbmd0aCA9PT0gMCA/IFwiR28gdG8gU2NlbmVzXCIgOiBcIkdvIHRvIFNjZW5lc1wiLFxuXHRcdFx0XHRvbkFjdGlvbjogKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuY3VycmVudFRhYiA9IFwic2NlbmVzXCI7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJzKCk7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdH0sXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBHcm91cCBiZWF0cyBieSBzY2VuZVxuXHRcdGNvbnN0IGJlYXRzQnlTY2VuZSA9IG5ldyBNYXA8c3RyaW5nLCBCZWF0W10+KCk7XG5cdFx0Zm9yIChjb25zdCBiZWF0IG9mIHRoaXMuYmVhdHMpIHtcblx0XHRcdGlmICghYmVhdHNCeVNjZW5lLmhhcyhiZWF0LnNjZW5lX2lkKSkge1xuXHRcdFx0XHRiZWF0c0J5U2NlbmUuc2V0KGJlYXQuc2NlbmVfaWQsIFtdKTtcblx0XHRcdH1cblx0XHRcdGJlYXRzQnlTY2VuZS5nZXQoYmVhdC5zY2VuZV9pZCkhLnB1c2goYmVhdCk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblxuXHRcdC8vIFJlbmRlciBiZWF0cyBncm91cGVkIGJ5IGNoYXB0ZXIgKHdpdGggc2NlbmVzIGFzIHN1Yi1ncm91cHMpXG5cdFx0Zm9yIChjb25zdCBjaGFwdGVyIG9mIHRoaXMuY2hhcHRlcnMuc29ydCgoYSwgYikgPT4gYS5udW1iZXIgLSBiLm51bWJlcikpIHtcblx0XHRcdGNvbnN0IGNoYXB0ZXJTY2VuZXMgPSB0aGlzLnNjZW5lcy5maWx0ZXIocyA9PiBzLmNoYXB0ZXJfaWQgPT09IGNoYXB0ZXIuaWQpXG5cdFx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKTtcblx0XHRcdFxuXHRcdFx0Ly8gT25seSBjcmVhdGUgY2hhcHRlciBncm91cCBpZiBpdCBoYXMgc2NlbmVzIHdpdGggYmVhdHMgb3IgZW1wdHkgc2NlbmVzXG5cdFx0XHRpZiAoY2hhcHRlclNjZW5lcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJHcm91cCA9IGxpc3QuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1jaGFwdGVyLWdyb3VwXCIgfSk7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJIZWFkZXIgPSBjaGFwdGVyR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1jaGFwdGVyLWdyb3VwLWhlYWRlclwiIH0pO1xuXHRcdFx0XHRjaGFwdGVySGVhZGVyLmNyZWF0ZUVsKFwiaDJcIiwgeyBcblx0XHRcdFx0XHR0ZXh0OiBgQ2hhcHRlciAke2NoYXB0ZXIubnVtYmVyfTogJHtjaGFwdGVyLnRpdGxlfWAgXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJDb250ZW50ID0gY2hhcHRlckdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtY2hhcHRlci1ncm91cC1jb250ZW50XCIgfSk7XG5cblx0XHRcdFx0Ly8gUmVuZGVyIHNjZW5lcyBhcyBzdWItZ3JvdXBzIHdpdGhpbiB0aGUgY2hhcHRlclxuXHRcdFx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIGNoYXB0ZXJTY2VuZXMpIHtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUJlYXRzID0gYmVhdHNCeVNjZW5lLmdldChzY2VuZS5pZCkgfHwgW107XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVHcm91cCA9IGNoYXB0ZXJDb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXBcIiB9KTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUhlYWRlciA9IHNjZW5lR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1oZWFkZXJcIiB9KTtcblx0XHRcdFx0XHRzY2VuZUhlYWRlci5jcmVhdGVFbChcImgzXCIsIHsgXG5cdFx0XHRcdFx0XHR0ZXh0OiBgU2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lLmdvYWwgfHwgXCJVbnRpdGxlZFwifWAgXG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRjb25zdCBzY2VuZUl0ZW1zID0gc2NlbmVHcm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwLWl0ZW1zXCIgfSk7XG5cdFx0XHRcdFx0aWYgKHNjZW5lQmVhdHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHRzY2VuZUl0ZW1zLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gYmVhdHMgaW4gdGhpcyBzY2VuZS5cIiB9KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIHNjZW5lQmVhdHMuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSkpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJCZWF0SXRlbShzY2VuZUl0ZW1zLCBiZWF0KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBGb290ZXIgd2l0aCBBZGQgQmVhdCBidXR0b24gKGFwcGVhcnMgb24gaG92ZXIpXG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVGb290ZXIgPSBzY2VuZUdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtZm9vdGVyXCIgfSk7XG5cdFx0XHRcdFx0Y29uc3QgYWRkQnV0dG9uID0gc2NlbmVGb290ZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRcdFx0dGV4dDogXCIrIEFkZCBCZWF0XCIsXG5cdFx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWFkZC1idG5cIixcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRhZGRCdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHRcdGlmICghdGhpcy5jdXJyZW50U3RvcnkpIHJldHVybjtcblx0XHRcdFx0XHRcdG5ldyBCZWF0TW9kYWwodGhpcy5hcHAsIHRoaXMuY3VycmVudFN0b3J5LmlkLCB0aGlzLnNjZW5lcywgYXN5bmMgKGJlYXQpID0+IHtcblx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRiZWF0LnNjZW5lX2lkID0gc2NlbmUuaWQ7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUJlYXQoYmVhdCk7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkJlYXQgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIik7XG5cdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHRcdHRocm93IGVycjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSwgdGhpcy5iZWF0cywgdW5kZWZpbmVkLCB0aGlzLmNoYXB0ZXJzLCBzY2VuZS5pZCkub3BlbigpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW5kZXIgb3JwaGFuIGJlYXRzIChubyBzY2VuZSBvciBzY2VuZSB3aXRob3V0IGNoYXB0ZXIpXG5cdFx0Y29uc3Qgb3JwaGFuQmVhdHMgPSB0aGlzLmJlYXRzLmZpbHRlcihiID0+IHtcblx0XHRcdGNvbnN0IHNjZW5lID0gdGhpcy5zY2VuZXMuZmluZChzID0+IHMuaWQgPT09IGIuc2NlbmVfaWQpO1xuXHRcdFx0cmV0dXJuICFzY2VuZSB8fCAhc2NlbmUuY2hhcHRlcl9pZDtcblx0XHR9KTtcblx0XHRcblx0XHQvLyBTaG93IFwiV2l0aG91dCBDaGFwdGVyXCIgc2VjdGlvbiBpZiBubyBjaGFwdGVycyBleGlzdCBPUiBpZiB0aGVyZSBhcmUgb3JwaGFuIGJlYXRzL3NjZW5lc1xuXHRcdGlmICh0aGlzLmNoYXB0ZXJzLmxlbmd0aCA9PT0gMCB8fCBvcnBoYW5CZWF0cy5sZW5ndGggPiAwIHx8IHRoaXMuc2NlbmVzLnNvbWUocyA9PiAhcy5jaGFwdGVyX2lkKSkge1xuXHRcdFx0Y29uc3Qgb3JwaGFuR3JvdXAgPSBsaXN0LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtY2hhcHRlci1ncm91cFwiIH0pO1xuXHRcdFx0Y29uc3Qgb3JwaGFuSGVhZGVyID0gb3JwaGFuR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1jaGFwdGVyLWdyb3VwLWhlYWRlclwiIH0pO1xuXHRcdFx0b3JwaGFuSGVhZGVyLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIldpdGhvdXQgQ2hhcHRlclwiIH0pO1xuXG5cdFx0XHRjb25zdCBvcnBoYW5Db250ZW50ID0gb3JwaGFuR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1jaGFwdGVyLWdyb3VwLWNvbnRlbnRcIiB9KTtcblxuXHRcdFx0Ly8gR3JvdXAgb3JwaGFuIGJlYXRzIGJ5IHNjZW5lXG5cdFx0XHRjb25zdCBvcnBoYW5TY2VuZXMgPSB0aGlzLnNjZW5lcy5maWx0ZXIocyA9PiAhcy5jaGFwdGVyX2lkKVxuXHRcdFx0XHQuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSk7XG5cblx0XHRcdGZvciAoY29uc3Qgc2NlbmUgb2Ygb3JwaGFuU2NlbmVzKSB7XG5cdFx0XHRcdGNvbnN0IHNjZW5lQmVhdHMgPSBiZWF0c0J5U2NlbmUuZ2V0KHNjZW5lLmlkKSB8fCBbXTtcblx0XHRcdFx0Y29uc3Qgc2NlbmVHcm91cCA9IG9ycGhhbkNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cFwiIH0pO1xuXHRcdFx0XHRjb25zdCBzY2VuZUhlYWRlciA9IHNjZW5lR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1oZWFkZXJcIiB9KTtcblx0XHRcdFx0c2NlbmVIZWFkZXIuY3JlYXRlRWwoXCJoM1wiLCB7IFxuXHRcdFx0XHRcdHRleHQ6IGBTY2VuZSAke3NjZW5lLm9yZGVyX251bX06ICR7c2NlbmUuZ29hbCB8fCBcIlVudGl0bGVkXCJ9YCBcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Y29uc3Qgc2NlbmVJdGVtcyA9IHNjZW5lR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1pdGVtc1wiIH0pO1xuXHRcdFx0XHRpZiAoc2NlbmVCZWF0cy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRzY2VuZUl0ZW1zLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gYmVhdHMgaW4gdGhpcyBzY2VuZS5cIiB9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2Ygc2NlbmVCZWF0cy5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKSkge1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJCZWF0SXRlbShzY2VuZUl0ZW1zLCBiZWF0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBGb290ZXIgd2l0aCBBZGQgQmVhdCBidXR0b24gKGFwcGVhcnMgb24gaG92ZXIpXG5cdFx0XHRcdGNvbnN0IHNjZW5lRm9vdGVyID0gc2NlbmVHcm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwLWZvb3RlclwiIH0pO1xuXHRcdFx0XHRjb25zdCBhZGRCdXR0b24gPSBzY2VuZUZvb3Rlci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdFx0dGV4dDogXCIrIEFkZCBCZWF0XCIsXG5cdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1hZGQtYnRuXCIsXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRhZGRCdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cdFx0XHRcdFx0bmV3IEJlYXRNb2RhbCh0aGlzLmFwcCwgdGhpcy5jdXJyZW50U3RvcnkuaWQsIHRoaXMuc2NlbmVzLCBhc3luYyAoYmVhdCkgPT4ge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0YmVhdC5zY2VuZV9pZCA9IHNjZW5lLmlkO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlQmVhdChiZWF0KTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQmVhdCBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgdGhpcy5iZWF0cywgdW5kZWZpbmVkLCB0aGlzLmNoYXB0ZXJzLCBzY2VuZS5pZCkub3BlbigpO1xuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBCZWF0cyB3aXRob3V0IHZhbGlkIHNjZW5lXG5cdFx0XHRjb25zdCBiZWF0c1dpdGhvdXRTY2VuZSA9IG9ycGhhbkJlYXRzLmZpbHRlcihiID0+IHtcblx0XHRcdFx0Y29uc3Qgc2NlbmUgPSB0aGlzLnNjZW5lcy5maW5kKHMgPT4gcy5pZCA9PT0gYi5zY2VuZV9pZCk7XG5cdFx0XHRcdHJldHVybiAhc2NlbmU7XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0Ly8gU2hvdyBcIldpdGhvdXQgU2NlbmVcIiBzZWN0aW9uIGlmIHRoZXJlIGFyZSBiZWF0cyB3aXRob3V0IHNjZW5lIE9SIGlmIHRoZXJlIGFyZSBubyBzY2VuZXMgYnV0IHRoZXJlIGFyZSBiZWF0c1xuXHRcdFx0aWYgKGJlYXRzV2l0aG91dFNjZW5lLmxlbmd0aCA+IDAgfHwgKG9ycGhhblNjZW5lcy5sZW5ndGggPT09IDAgJiYgdGhpcy5iZWF0cy5sZW5ndGggPiAwICYmIHRoaXMuc2NlbmVzLmxlbmd0aCA9PT0gMCkpIHtcblx0XHRcdFx0Y29uc3Qgc2NlbmVHcm91cCA9IG9ycGhhbkNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cFwiIH0pO1xuXHRcdFx0XHRjb25zdCBzY2VuZUhlYWRlciA9IHNjZW5lR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1oZWFkZXJcIiB9KTtcblx0XHRcdFx0c2NlbmVIZWFkZXIuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiV2l0aG91dCBTY2VuZVwiIH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc3Qgc2NlbmVJdGVtcyA9IHNjZW5lR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1pdGVtc1wiIH0pO1xuXHRcdFx0XHRpZiAoYmVhdHNXaXRob3V0U2NlbmUubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0c1dpdGhvdXRTY2VuZS5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKSkge1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJCZWF0SXRlbShzY2VuZUl0ZW1zLCBiZWF0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2NlbmVJdGVtcy5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIGJlYXRzIHdpdGhvdXQgc2NlbmUuXCIgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZW5kZXJCZWF0SXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCBiZWF0OiBCZWF0KSB7XG5cdFx0Y29uc3QgaXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIiB9KTtcblx0XHRpdGVtLmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXRpdGxlXCIsXG5cdFx0XHR0ZXh0OiBgQmVhdCAke2JlYXQub3JkZXJfbnVtfTogJHtiZWF0LnR5cGV9YCxcblx0XHR9KTtcblx0XHRjb25zdCBtZXRhID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRpZiAoYmVhdC5pbnRlbnQpIHtcblx0XHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogYEludGVudDogJHtiZWF0LmludGVudH1gIH0pO1xuXHRcdH1cblx0XHRpZiAoYmVhdC5vdXRjb21lKSB7XG5cdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGBPdXRjb21lOiAke2JlYXQub3V0Y29tZX1gIH0pO1xuXHRcdH1cblxuXHRcdGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbS1hY3Rpb25zXCIgfSk7XG5cdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiRWRpdFwiIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cdFx0XHRuZXcgQmVhdE1vZGFsKHRoaXMuYXBwLCB0aGlzLmN1cnJlbnRTdG9yeS5pZCwgdGhpcy5zY2VuZXMsIGFzeW5jICh1cGRhdGVkQmVhdCkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVCZWF0KGJlYXQuaWQsIHVwZGF0ZWRCZWF0KTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQmVhdCB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0dGhyb3cgZXJyO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCB0aGlzLmJlYXRzLCBiZWF0LCB0aGlzLmNoYXB0ZXJzKS5vcGVuKCk7XG5cdFx0fTtcblx0XHQvLyBVcC9Eb3duIGJ1dHRvbnNcblx0XHRjb25zdCBzaWJsaW5nQmVhdHMgPSB0aGlzLmJlYXRzLmZpbHRlcihiID0+IGIuc2NlbmVfaWQgPT09IGJlYXQuc2NlbmVfaWQpXG5cdFx0XHQuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSk7XG5cdFx0Y29uc3QgbWluT3JkZXJOdW0gPSBzaWJsaW5nQmVhdHMubGVuZ3RoID4gMCA/IE1hdGgubWluKC4uLnNpYmxpbmdCZWF0cy5tYXAoYiA9PiBiLm9yZGVyX251bSkpIDogYmVhdC5vcmRlcl9udW07XG5cdFx0Y29uc3QgbWF4T3JkZXJOdW0gPSBzaWJsaW5nQmVhdHMubGVuZ3RoID4gMCA/IE1hdGgubWF4KC4uLnNpYmxpbmdCZWF0cy5tYXAoYiA9PiBiLm9yZGVyX251bSkpIDogYmVhdC5vcmRlcl9udW07XG5cdFx0aWYgKGJlYXQub3JkZXJfbnVtID4gbWluT3JkZXJOdW0pIHtcblx0XHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlVwXCIgfSkub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0dGhpcy5tb3ZlQmVhdFVwKGJlYXQpO1xuXHRcdFx0fTtcblx0XHR9XG5cdFx0aWYgKGJlYXQub3JkZXJfbnVtIDwgbWF4T3JkZXJOdW0pIHtcblx0XHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkRvd25cIiB9KS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLm1vdmVCZWF0RG93bihiZWF0KTtcblx0XHRcdH07XG5cdFx0fVxuXHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlJlbGlua2FyXCIgfSkub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IHRoaXMuc2hvd01vdmVCZWF0TW9kYWwoYmVhdCk7XG5cdFx0fTtcblx0XHQvLyBBZGQgQ29udGVudCBidXR0b24gKG9ubHkgaW4gQ29udGVudHMgdGFiKVxuXHRcdGlmICh0aGlzLmN1cnJlbnRUYWIgPT09IFwiY29udGVudHNcIikge1xuXHRcdFx0Y29uc3Qgc2NlbmUgPSB0aGlzLnNjZW5lcy5maW5kKHMgPT4gcy5pZCA9PT0gYmVhdC5zY2VuZV9pZCk7XG5cdFx0XHRjb25zdCBjaGFwdGVySWQgPSBzY2VuZT8uY2hhcHRlcl9pZCB8fCAodGhpcy5jaGFwdGVycy5sZW5ndGggPiAwID8gdGhpcy5jaGFwdGVyc1swXS5pZCA6IFwiXCIpO1xuXHRcdFx0aWYgKGNoYXB0ZXJJZCkge1xuXHRcdFx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCIrIENvbnRlbnRcIiB9KS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuY3JlYXRlQ29udGVudEZvckVudGl0eShcImJlYXRcIiwgYmVhdC5pZCwgY2hhcHRlcklkKTtcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9XG5cdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiRGVsZXRlXCIgfSkub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmIChjb25maXJtKFwiRGVsZXRlIHRoaXMgYmVhdD9cIikpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZGVsZXRlQmVhdChiZWF0LmlkKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQmVhdCBkZWxldGVkXCIpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHRzaG93RWRpdFN0b3J5TmFtZU1vZGFsKCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50U3RvcnkpIHJldHVybjtcblx0XHRcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiRWRpdCBTdG9yeSBOYW1lXCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IHRpdGxlID0gdGhpcy5jdXJyZW50U3RvcnkudGl0bGU7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlN0b3J5IE5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IHRpdGxlSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCB2YWx1ZTogdGl0bGUgfSk7XG5cdFx0dGl0bGVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyB0aXRsZSA9IHRpdGxlSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghdGl0bGUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJTdG9yeSBuYW1lIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCB1cGRhdGVkU3RvcnkgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlU3RvcnkodGhpcy5jdXJyZW50U3RvcnkhLmlkLCB0aXRsZS50cmltKCkpO1xuXHRcdFx0XHR0aGlzLmN1cnJlbnRTdG9yeSA9IHVwZGF0ZWRTdG9yeTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkU3RvcmllcygpO1xuXHRcdFx0XHR0aGlzLnJlbmRlckRldGFpbHNIZWFkZXIoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIlN0b3J5IG5hbWUgdXBkYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0dGl0bGVJbnB1dC5mb2N1cygpO1xuXHRcdHRpdGxlSW5wdXQuc2VsZWN0KCk7XG5cdH1cblxuXHRhc3luYyBjbG9uZVN0b3J5KCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50U3RvcnkpIHJldHVybjtcblxuXHRcdGNvbnN0IGNsb25lQnV0dG9uID0gdGhpcy5oZWFkZXJFbD8ucXVlcnlTZWxlY3RvcihcIi5zdG9yeS1lbmdpbmUtY2xvbmUtYnRuXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuXHRcdGlmIChjbG9uZUJ1dHRvbikge1xuXHRcdFx0Y2xvbmVCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0Y2xvbmVCdXR0b24uc2V0VGV4dChcIkNsb25pbmcuLi5cIik7XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MudGVuYW50SWQpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVGVuYW50IElEIG5vdCBjb25maWd1cmVkXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBjbG9uZWRTdG9yeSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jbG9uZVN0b3J5KFxuXHRcdFx0XHR0aGlzLmN1cnJlbnRTdG9yeS5pZFxuXHRcdFx0KTtcblx0XHRcdFxuXHRcdFx0bmV3IE5vdGljZShgU3RvcnkgXCIke2Nsb25lZFN0b3J5LnRpdGxlfVwiIGNsb25lZCBzdWNjZXNzZnVsbHkhYCk7XG5cdFx0XHRcblx0XHRcdC8vIFJlZnJlc2ggdGhlIGxpc3QgYW5kIHNob3cgdGhlIGNsb25lZCBzdG9yeVxuXHRcdFx0YXdhaXQgdGhpcy5sb2FkU3RvcmllcygpO1xuXHRcdFx0YXdhaXQgdGhpcy5zaG93U3RvcnlEZXRhaWxzKGNsb25lZFN0b3J5KTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkNsb25lIGZhaWxlZFwiO1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0aWYgKGNsb25lQnV0dG9uKSB7XG5cdFx0XHRcdGNsb25lQnV0dG9uLnNldFRleHQoXCJDbG9uZSBTdG9yeVwiKTtcblx0XHRcdFx0Y2xvbmVCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRzaG93RWRpdFdvcmxkTW9kYWwoKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXHRcdFxuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJFZGl0IFdvcmxkXCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSB0aGlzLmN1cnJlbnRXb3JsZC5uYW1lO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IHRoaXMuY3VycmVudFdvcmxkLmRlc2NyaXB0aW9uO1xuXHRcdGxldCBnZW5yZSA9IHRoaXMuY3VycmVudFdvcmxkLmdlbnJlO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJXb3JsZCBOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCB2YWx1ZTogbmFtZSB9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiR2VucmUgKlwiIH0pO1xuXHRcdGNvbnN0IGdlbnJlSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCB2YWx1ZTogZ2VucmUgfSk7XG5cdFx0Z2VucmVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBnZW5yZSA9IGdlbnJlSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGRlc2NJbnB1dC52YWx1ZSA9IGRlc2NyaXB0aW9uO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTYXZlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiV29ybGQgbmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFnZW5yZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIkdlbnJlIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCB1cGRhdGVkV29ybGQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlV29ybGQoXG5cdFx0XHRcdFx0dGhpcy5jdXJyZW50V29ybGQhLmlkLFxuXHRcdFx0XHRcdG5hbWUudHJpbSgpLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uLnRyaW0oKSxcblx0XHRcdFx0XHRnZW5yZS50cmltKClcblx0XHRcdFx0KTtcblx0XHRcdFx0dGhpcy5jdXJyZW50V29ybGQgPSB1cGRhdGVkV29ybGQ7XG5cdFx0XHRcdC8vIFJlZnJlc2ggd29ybGQgbGlzdCB0byB1cGRhdGUgaXQgZXZlcnl3aGVyZVxuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRTdG9yaWVzKCk7XG5cdFx0XHRcdC8vIFJlLXJlbmRlciB0aGUgd29ybGQgZGV0YWlscyB2aWV3XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGREZXRhaWxzKCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJXb3JsZCB1cGRhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0XHRuYW1lSW5wdXQuZm9jdXMoKTtcblx0XHRuYW1lSW5wdXQuc2VsZWN0KCk7XG5cdH1cblxuXHRjb3B5U3RvcnlJZCgpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cblx0XHRuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0aGlzLmN1cnJlbnRTdG9yeS5pZCkudGhlbigoKSA9PiB7XG5cdFx0XHRuZXcgTm90aWNlKFwiVVVJRCBjb3BpZWQgdG8gY2xpcGJvYXJkXCIpO1xuXHRcdH0pLmNhdGNoKCgpID0+IHtcblx0XHRcdC8vIEZhbGxiYWNrIGZvciBvbGRlciBicm93c2Vyc1xuXHRcdFx0Y29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XG5cdFx0XHR0ZXh0YXJlYS52YWx1ZSA9IHRoaXMuY3VycmVudFN0b3J5IS5pZDtcblx0XHRcdHRleHRhcmVhLnN0eWxlLnBvc2l0aW9uID0gXCJmaXhlZFwiO1xuXHRcdFx0dGV4dGFyZWEuc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuXHRcdFx0dGV4dGFyZWEuc3R5bGUubGVmdCA9IFwiLTk5OTlweFwiO1xuXHRcdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0YXJlYSk7XG5cdFx0XHR0ZXh0YXJlYS5zZWxlY3QoKTtcblx0XHRcdFxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0ZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJjb3B5XCIpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiVVVJRCBjb3BpZWQgdG8gY2xpcGJvYXJkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJGYWlsZWQgdG8gY29weSBVVUlEXCIsIDMwMDApO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRleHRhcmVhKTtcblx0XHR9KTtcblx0fVxuXG5cdGFzeW5jIG1vdmVDaGFwdGVyVXAoY2hhcHRlcjogQ2hhcHRlcikge1xuXHRcdGNvbnN0IHNvcnRlZENoYXB0ZXJzID0gWy4uLnRoaXMuY2hhcHRlcnNdLnNvcnQoKGEsIGIpID0+IGEubnVtYmVyIC0gYi5udW1iZXIpO1xuXHRcdGNvbnN0IGN1cnJlbnRJbmRleCA9IHNvcnRlZENoYXB0ZXJzLmZpbmRJbmRleChjID0+IGMuaWQgPT09IGNoYXB0ZXIuaWQpO1xuXHRcdGlmIChjdXJyZW50SW5kZXggPD0gMCkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgcHJldmlvdXNDaGFwdGVyID0gc29ydGVkQ2hhcHRlcnNbY3VycmVudEluZGV4IC0gMV07XG5cdFx0Y29uc3QgdGVtcE51bWJlciA9IGNoYXB0ZXIubnVtYmVyO1xuXHRcdFxuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlQ2hhcHRlcihjaGFwdGVyLmlkLCB7IG51bWJlcjogcHJldmlvdXNDaGFwdGVyLm51bWJlciB9KTtcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVDaGFwdGVyKHByZXZpb3VzQ2hhcHRlci5pZCwgeyBudW1iZXI6IHRlbXBOdW1iZXIgfSk7XG5cdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0bmV3IE5vdGljZShcIkNoYXB0ZXIgbW92ZWQgdXBcIik7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBtb3ZlQ2hhcHRlckRvd24oY2hhcHRlcjogQ2hhcHRlcikge1xuXHRcdGNvbnN0IHNvcnRlZENoYXB0ZXJzID0gWy4uLnRoaXMuY2hhcHRlcnNdLnNvcnQoKGEsIGIpID0+IGEubnVtYmVyIC0gYi5udW1iZXIpO1xuXHRcdGNvbnN0IGN1cnJlbnRJbmRleCA9IHNvcnRlZENoYXB0ZXJzLmZpbmRJbmRleChjID0+IGMuaWQgPT09IGNoYXB0ZXIuaWQpO1xuXHRcdGlmIChjdXJyZW50SW5kZXggPCAwIHx8IGN1cnJlbnRJbmRleCA+PSBzb3J0ZWRDaGFwdGVycy5sZW5ndGggLSAxKSByZXR1cm47XG5cblx0XHRjb25zdCBuZXh0Q2hhcHRlciA9IHNvcnRlZENoYXB0ZXJzW2N1cnJlbnRJbmRleCArIDFdO1xuXHRcdGNvbnN0IHRlbXBOdW1iZXIgPSBjaGFwdGVyLm51bWJlcjtcblx0XHRcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUNoYXB0ZXIoY2hhcHRlci5pZCwgeyBudW1iZXI6IG5leHRDaGFwdGVyLm51bWJlciB9KTtcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVDaGFwdGVyKG5leHRDaGFwdGVyLmlkLCB7IG51bWJlcjogdGVtcE51bWJlciB9KTtcblx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRuZXcgTm90aWNlKFwiQ2hhcHRlciBtb3ZlZCBkb3duXCIpO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgbW92ZVNjZW5lVXAoc2NlbmU6IFNjZW5lKSB7XG5cdFx0Y29uc3Qgc2libGluZ1NjZW5lcyA9IHRoaXMuc2NlbmVzLmZpbHRlcihzID0+IHMuY2hhcHRlcl9pZCA9PT0gc2NlbmUuY2hhcHRlcl9pZClcblx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKTtcblx0XHRjb25zdCBjdXJyZW50SW5kZXggPSBzaWJsaW5nU2NlbmVzLmZpbmRJbmRleChzID0+IHMuaWQgPT09IHNjZW5lLmlkKTtcblx0XHRpZiAoY3VycmVudEluZGV4IDw9IDApIHJldHVybjtcblxuXHRcdGNvbnN0IHByZXZpb3VzU2NlbmUgPSBzaWJsaW5nU2NlbmVzW2N1cnJlbnRJbmRleCAtIDFdO1xuXHRcdGNvbnN0IHRlbXBPcmRlck51bSA9IHNjZW5lLm9yZGVyX251bTtcblx0XHRcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZVNjZW5lKHNjZW5lLmlkLCB7IG9yZGVyX251bTogcHJldmlvdXNTY2VuZS5vcmRlcl9udW0gfSk7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlU2NlbmUocHJldmlvdXNTY2VuZS5pZCwgeyBvcmRlcl9udW06IHRlbXBPcmRlck51bSB9KTtcblx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRuZXcgTm90aWNlKFwiU2NlbmUgbW92ZWQgdXBcIik7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBtb3ZlU2NlbmVEb3duKHNjZW5lOiBTY2VuZSkge1xuXHRcdGNvbnN0IHNpYmxpbmdTY2VuZXMgPSB0aGlzLnNjZW5lcy5maWx0ZXIocyA9PiBzLmNoYXB0ZXJfaWQgPT09IHNjZW5lLmNoYXB0ZXJfaWQpXG5cdFx0XHQuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSk7XG5cdFx0Y29uc3QgY3VycmVudEluZGV4ID0gc2libGluZ1NjZW5lcy5maW5kSW5kZXgocyA9PiBzLmlkID09PSBzY2VuZS5pZCk7XG5cdFx0aWYgKGN1cnJlbnRJbmRleCA8IDAgfHwgY3VycmVudEluZGV4ID49IHNpYmxpbmdTY2VuZXMubGVuZ3RoIC0gMSkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgbmV4dFNjZW5lID0gc2libGluZ1NjZW5lc1tjdXJyZW50SW5kZXggKyAxXTtcblx0XHRjb25zdCB0ZW1wT3JkZXJOdW0gPSBzY2VuZS5vcmRlcl9udW07XG5cdFx0XG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVTY2VuZShzY2VuZS5pZCwgeyBvcmRlcl9udW06IG5leHRTY2VuZS5vcmRlcl9udW0gfSk7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlU2NlbmUobmV4dFNjZW5lLmlkLCB7IG9yZGVyX251bTogdGVtcE9yZGVyTnVtIH0pO1xuXHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdG5ldyBOb3RpY2UoXCJTY2VuZSBtb3ZlZCBkb3duXCIpO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgbW92ZUJlYXRVcChiZWF0OiBCZWF0KSB7XG5cdFx0Y29uc3Qgc2libGluZ0JlYXRzID0gdGhpcy5iZWF0cy5maWx0ZXIoYiA9PiBiLnNjZW5lX2lkID09PSBiZWF0LnNjZW5lX2lkKVxuXHRcdFx0LnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pO1xuXHRcdGNvbnN0IGN1cnJlbnRJbmRleCA9IHNpYmxpbmdCZWF0cy5maW5kSW5kZXgoYiA9PiBiLmlkID09PSBiZWF0LmlkKTtcblx0XHRpZiAoY3VycmVudEluZGV4IDw9IDApIHJldHVybjtcblxuXHRcdGNvbnN0IHByZXZpb3VzQmVhdCA9IHNpYmxpbmdCZWF0c1tjdXJyZW50SW5kZXggLSAxXTtcblx0XHRjb25zdCB0ZW1wT3JkZXJOdW0gPSBiZWF0Lm9yZGVyX251bTtcblx0XHRcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUJlYXQoYmVhdC5pZCwgeyBvcmRlcl9udW06IHByZXZpb3VzQmVhdC5vcmRlcl9udW0gfSk7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlQmVhdChwcmV2aW91c0JlYXQuaWQsIHsgb3JkZXJfbnVtOiB0ZW1wT3JkZXJOdW0gfSk7XG5cdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0bmV3IE5vdGljZShcIkJlYXQgbW92ZWQgdXBcIik7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBtb3ZlQmVhdERvd24oYmVhdDogQmVhdCkge1xuXHRcdGNvbnN0IHNpYmxpbmdCZWF0cyA9IHRoaXMuYmVhdHMuZmlsdGVyKGIgPT4gYi5zY2VuZV9pZCA9PT0gYmVhdC5zY2VuZV9pZClcblx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKTtcblx0XHRjb25zdCBjdXJyZW50SW5kZXggPSBzaWJsaW5nQmVhdHMuZmluZEluZGV4KGIgPT4gYi5pZCA9PT0gYmVhdC5pZCk7XG5cdFx0aWYgKGN1cnJlbnRJbmRleCA8IDAgfHwgY3VycmVudEluZGV4ID49IHNpYmxpbmdCZWF0cy5sZW5ndGggLSAxKSByZXR1cm47XG5cblx0XHRjb25zdCBuZXh0QmVhdCA9IHNpYmxpbmdCZWF0c1tjdXJyZW50SW5kZXggKyAxXTtcblx0XHRjb25zdCB0ZW1wT3JkZXJOdW0gPSBiZWF0Lm9yZGVyX251bTtcblx0XHRcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUJlYXQoYmVhdC5pZCwgeyBvcmRlcl9udW06IG5leHRCZWF0Lm9yZGVyX251bSB9KTtcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVCZWF0KG5leHRCZWF0LmlkLCB7IG9yZGVyX251bTogdGVtcE9yZGVyTnVtIH0pO1xuXHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdG5ldyBOb3RpY2UoXCJCZWF0IG1vdmVkIGRvd25cIik7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBzaG93TW92ZVNjZW5lTW9kYWwoc2NlbmU6IFNjZW5lKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIk1vdmUgU2NlbmVcIik7XG5cblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogYE1vdmUgc2NlbmUgXCIke3NjZW5lLmdvYWwgfHwgYFNjZW5lICR7c2NlbmUub3JkZXJfbnVtfWB9XCIgdG86YCB9KTtcblxuXHRcdGNvbnN0IHNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLW1vdmUtc2VsZWN0XCIgfSk7XG5cdFx0Y29uc3Qgbm9DaGFwdGVyT3B0aW9uID0gc2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogXCJObyBDaGFwdGVyXCIsIHZhbHVlOiBcIlwiIH0pO1xuXHRcdFxuXHRcdGZvciAoY29uc3QgY2hhcHRlciBvZiB0aGlzLmNoYXB0ZXJzLnNvcnQoKGEsIGIpID0+IGEubnVtYmVyIC0gYi5udW1iZXIpKSB7XG5cdFx0XHRjb25zdCBvcHRpb24gPSBzZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwge1xuXHRcdFx0XHR0ZXh0OiBgQ2hhcHRlciAke2NoYXB0ZXIubnVtYmVyfTogJHtjaGFwdGVyLnRpdGxlfWAsXG5cdFx0XHRcdHZhbHVlOiBjaGFwdGVyLmlkLFxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoc2NlbmUuY2hhcHRlcl9pZCA9PT0gY2hhcHRlci5pZCkge1xuXHRcdFx0XHRvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICghc2NlbmUuY2hhcHRlcl9pZCkge1xuXHRcdFx0bm9DaGFwdGVyT3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3QgbW92ZUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIk1vdmVcIixcblx0XHRcdGNsczogXCJtb2QtY3RhXCIsXG5cdFx0fSk7XG5cdFx0bW92ZUJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0Y29uc3Qgc2VsZWN0ZWRDaGFwdGVySWQgPSBzZWxlY3QudmFsdWUgfHwgbnVsbDtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5tb3ZlU2NlbmUoc2NlbmUuaWQsIHNlbGVjdGVkQ2hhcHRlcklkKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiU2NlbmUgbW92ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBtb3ZlIHNjZW5lXCI7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yTWVzc2FnZX1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KTtcblx0XHRjYW5jZWxCdXR0b24ub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRhc3luYyBzaG93TW92ZUJlYXRNb2RhbChiZWF0OiBCZWF0KSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIk1vdmUgQmVhdFwiKTtcblxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBgTW92ZSBiZWF0IFwiJHtiZWF0LnR5cGV9XCIgdG86YCB9KTtcblxuXHRcdGNvbnN0IHNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLW1vdmUtc2VsZWN0XCIgfSk7XG5cdFx0XG5cdFx0Ly8gR3JvdXAgc2NlbmVzIGJ5IGNoYXB0ZXIgZm9yIGJldHRlciBVWFxuXHRcdGZvciAoY29uc3QgY2hhcHRlciBvZiB0aGlzLmNoYXB0ZXJzLnNvcnQoKGEsIGIpID0+IGEubnVtYmVyIC0gYi5udW1iZXIpKSB7XG5cdFx0XHRjb25zdCBjaGFwdGVyU2NlbmVzID0gdGhpcy5zY2VuZXNcblx0XHRcdFx0LmZpbHRlcihzID0+IHMuY2hhcHRlcl9pZCA9PT0gY2hhcHRlci5pZClcblx0XHRcdFx0LnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pO1xuXHRcdFx0XG5cdFx0XHRpZiAoY2hhcHRlclNjZW5lcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IG9wdGdyb3VwID0gc2VsZWN0LmNyZWF0ZUVsKFwib3B0Z3JvdXBcIik7XG5cdFx0XHRcdG9wdGdyb3VwLmxhYmVsID0gYENoYXB0ZXIgJHtjaGFwdGVyLm51bWJlcn06ICR7Y2hhcHRlci50aXRsZX1gO1xuXHRcdFx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIGNoYXB0ZXJTY2VuZXMpIHtcblx0XHRcdFx0XHRjb25zdCBvcHRpb24gPSBvcHRncm91cC5jcmVhdGVFbChcIm9wdGlvblwiLCB7XG5cdFx0XHRcdFx0XHR0ZXh0OiBgU2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lLmdvYWwgfHwgXCJVbnRpdGxlZFwifWAsXG5cdFx0XHRcdFx0XHR2YWx1ZTogc2NlbmUuaWQsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0aWYgKGJlYXQuc2NlbmVfaWQgPT09IHNjZW5lLmlkKSB7XG5cdFx0XHRcdFx0XHRvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEFkZCBvcnBoYW4gc2NlbmVzXG5cdFx0Y29uc3Qgb3JwaGFuU2NlbmVzID0gdGhpcy5zY2VuZXMuZmlsdGVyKHMgPT4gIXMuY2hhcHRlcl9pZCk7XG5cdFx0aWYgKG9ycGhhblNjZW5lcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCBvcHRncm91cCA9IHNlbGVjdC5jcmVhdGVFbChcIm9wdGdyb3VwXCIpO1xuXHRcdFx0b3B0Z3JvdXAubGFiZWwgPSBcIk5vIENoYXB0ZXJcIjtcblx0XHRcdGZvciAoY29uc3Qgc2NlbmUgb2Ygb3JwaGFuU2NlbmVzLnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pKSB7XG5cdFx0XHRcdGNvbnN0IG9wdGlvbiA9IG9wdGdyb3VwLmNyZWF0ZUVsKFwib3B0aW9uXCIsIHtcblx0XHRcdFx0XHR0ZXh0OiBgU2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lLmdvYWwgfHwgXCJVbnRpdGxlZFwifWAsXG5cdFx0XHRcdFx0dmFsdWU6IHNjZW5lLmlkLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKGJlYXQuc2NlbmVfaWQgPT09IHNjZW5lLmlkKSB7XG5cdFx0XHRcdFx0b3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBtb3ZlQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiTW92ZVwiLFxuXHRcdFx0Y2xzOiBcIm1vZC1jdGFcIixcblx0XHR9KTtcblx0XHRtb3ZlQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRjb25zdCBzZWxlY3RlZFNjZW5lSWQgPSBzZWxlY3QudmFsdWU7XG5cdFx0XHRpZiAoIXNlbGVjdGVkU2NlbmVJZCkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiUGxlYXNlIHNlbGVjdCBhIHNjZW5lXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQubW92ZUJlYXQoYmVhdC5pZCwgc2VsZWN0ZWRTY2VuZUlkKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQmVhdCBtb3ZlZCBzdWNjZXNzZnVsbHlcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIG1vdmUgYmVhdFwiO1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSk7XG5cdFx0Y2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0cmVuZGVyQ29udGVudHNUYWIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xuXG5cdFx0aWYgKHRoaXMuY29udGVudEJsb2Nrcy5sZW5ndGggPT09IDApIHtcblx0XHRcdHRoaXMucmVuZGVyRW1wdHlDYXJkKGNvbnRhaW5lciwge1xuXHRcdFx0XHRpY29uOiBcImZpbGUtdGV4dFwiLFxuXHRcdFx0XHR0aXRsZTogXCJObyBjb250ZW50IHlldFwiLFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJBZGQgY29udGVudCB0byBjaGFwdGVycywgc2NlbmVzIG9yIGJlYXRzIHRvIHNlZSBpdCBvcmdhbml6ZWQgaGVyZS5cIixcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEdyb3VwIGNvbnRlbnQgYmxvY2tzIGJ5IHRoZWlyIHJlZmVyZW5jZXMgKGNoYXB0ZXIsIHNjZW5lLCBiZWF0KVxuXHRcdGNvbnN0IGNvbnRlbnRzQnlDaGFwdGVyID0gbmV3IE1hcDxzdHJpbmcsIENvbnRlbnRCbG9ja1tdPigpO1xuXHRcdGNvbnN0IGNvbnRlbnRzQnlTY2VuZSA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2tbXT4oKTtcblx0XHRjb25zdCBjb250ZW50c0J5QmVhdCA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2tbXT4oKTtcblx0XHRjb25zdCBvcnBoYW5Db250ZW50czogQ29udGVudEJsb2NrW10gPSBbXTtcblxuXHRcdC8vIE9yZ2FuaXplIGNvbnRlbnQgYmxvY2tzIGJ5IHRoZWlyIHJlZmVyZW5jZXNcblx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIHRoaXMuY29udGVudEJsb2Nrcykge1xuXHRcdFx0Y29uc3QgcmVmcyA9IHRoaXMuY29udGVudEJsb2NrUmVmcy5maWx0ZXIociA9PiByLmNvbnRlbnRfYmxvY2tfaWQgPT09IGJsb2NrLmlkKTtcblx0XHRcdFxuXHRcdFx0aWYgKHJlZnMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdC8vIENvbnRlbnQgYmxvY2sgd2l0aG91dCByZWZlcmVuY2VzIChvcnBoYW4pXG5cdFx0XHRcdG9ycGhhbkNvbnRlbnRzLnB1c2goYmxvY2spO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2hlY2sgZWFjaCByZWZlcmVuY2UgdG8gY2F0ZWdvcml6ZVxuXHRcdFx0Zm9yIChjb25zdCByZWYgb2YgcmVmcykge1xuXHRcdFx0XHRpZiAocmVmLmVudGl0eV90eXBlID09PSBcImNoYXB0ZXJcIikge1xuXHRcdFx0XHRcdGlmICghY29udGVudHNCeUNoYXB0ZXIuaGFzKHJlZi5lbnRpdHlfaWQpKSB7XG5cdFx0XHRcdFx0XHRjb250ZW50c0J5Q2hhcHRlci5zZXQocmVmLmVudGl0eV9pZCwgW10pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb250ZW50c0J5Q2hhcHRlci5nZXQocmVmLmVudGl0eV9pZCkhLnB1c2goYmxvY2spO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHJlZi5lbnRpdHlfdHlwZSA9PT0gXCJzY2VuZVwiKSB7XG5cdFx0XHRcdFx0aWYgKCFjb250ZW50c0J5U2NlbmUuaGFzKHJlZi5lbnRpdHlfaWQpKSB7XG5cdFx0XHRcdFx0XHRjb250ZW50c0J5U2NlbmUuc2V0KHJlZi5lbnRpdHlfaWQsIFtdKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29udGVudHNCeVNjZW5lLmdldChyZWYuZW50aXR5X2lkKSEucHVzaChibG9jayk7XG5cdFx0XHRcdH0gZWxzZSBpZiAocmVmLmVudGl0eV90eXBlID09PSBcImJlYXRcIikge1xuXHRcdFx0XHRcdGlmICghY29udGVudHNCeUJlYXQuaGFzKHJlZi5lbnRpdHlfaWQpKSB7XG5cdFx0XHRcdFx0XHRjb250ZW50c0J5QmVhdC5zZXQocmVmLmVudGl0eV9pZCwgW10pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb250ZW50c0J5QmVhdC5nZXQocmVmLmVudGl0eV9pZCkhLnB1c2goYmxvY2spO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblxuXHRcdC8vIFJlbmRlciBjb250ZW50cyBncm91cGVkIGJ5IGNoYXB0ZXIgKHdpdGggc2NlbmVzIGFuZCBiZWF0cyBhcyBzdWItZ3JvdXBzKVxuXHRcdGZvciAoY29uc3QgY2hhcHRlciBvZiB0aGlzLmNoYXB0ZXJzLnNvcnQoKGEsIGIpID0+IGEubnVtYmVyIC0gYi5udW1iZXIpKSB7XG5cdFx0XHRjb25zdCBjaGFwdGVyQ29udGVudHMgPSBjb250ZW50c0J5Q2hhcHRlci5nZXQoY2hhcHRlci5pZCkgfHwgW107XG5cdFx0XHRjb25zdCBjaGFwdGVyU2NlbmVzID0gdGhpcy5zY2VuZXMuZmlsdGVyKHMgPT4gcy5jaGFwdGVyX2lkID09PSBjaGFwdGVyLmlkKVxuXHRcdFx0XHQuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSk7XG5cblx0XHRcdC8vIEFsd2F5cyBjcmVhdGUgY2hhcHRlciBncm91cCB0byBhbGxvdyBhZGRpbmcgY29udGVudFxuXHRcdFx0aWYgKGNoYXB0ZXJDb250ZW50cy5sZW5ndGggPiAwIHx8IGNoYXB0ZXJTY2VuZXMubGVuZ3RoID4gMCB8fCBjaGFwdGVyU2NlbmVzLnNvbWUocyA9PiB7XG5cdFx0XHRcdGNvbnN0IHNjZW5lQ29udGVudHMgPSBjb250ZW50c0J5U2NlbmUuZ2V0KHMuaWQpIHx8IFtdO1xuXHRcdFx0XHRjb25zdCBzY2VuZUJlYXRzID0gdGhpcy5iZWF0cy5maWx0ZXIoYiA9PiBiLnNjZW5lX2lkID09PSBzLmlkKTtcblx0XHRcdFx0Y29uc3QgYmVhdENvbnRlbnRzID0gc2NlbmVCZWF0cy5mbGF0TWFwKGIgPT4gY29udGVudHNCeUJlYXQuZ2V0KGIuaWQpIHx8IFtdKTtcblx0XHRcdFx0cmV0dXJuIHNjZW5lQ29udGVudHMubGVuZ3RoID4gMCB8fCBiZWF0Q29udGVudHMubGVuZ3RoID4gMDtcblx0XHRcdH0pKSB7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJHcm91cCA9IGxpc3QuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1jaGFwdGVyLWdyb3VwXCIgfSk7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJIZWFkZXIgPSBjaGFwdGVyR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1jaGFwdGVyLWdyb3VwLWhlYWRlciBzdG9yeS1lbmdpbmUtaG92ZXJhYmxlLWhlYWRlclwiIH0pO1xuXHRcdFx0XHRjaGFwdGVySGVhZGVyLmNyZWF0ZUVsKFwiaDJcIiwgeyBcblx0XHRcdFx0XHR0ZXh0OiBgQ2hhcHRlciAke2NoYXB0ZXIubnVtYmVyfTogJHtjaGFwdGVyLnRpdGxlfWAgXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQWRkIENvbnRlbnQgYnV0dG9ucyBvbiBob3ZlclxuXHRcdFx0XHRjb25zdCBjaGFwdGVySGVhZGVyQWN0aW9ucyA9IGNoYXB0ZXJIZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ob3Zlci1oZWFkZXItYWN0aW9uc1wiIH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gVGV4dCBidXR0b25cblx0XHRcdFx0Y29uc3QgdGV4dEJ0biA9IGNoYXB0ZXJIZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgXG5cdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1hZGQtY29udGVudC1idG4gc3RvcnktZW5naW5lLWFkZC10ZXh0LWJ0blwiLFxuXHRcdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiQWRkIHRleHQgY29udGVudFwiIH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHRleHRCdG4uaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwic3RvcnktZW5naW5lLWljb25cIj5cdUQ4M0RcdURDREQ8L3NwYW4+Jztcblx0XHRcdFx0dGV4dEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuY3JlYXRlQ29udGVudEZvckVudGl0eShcImNoYXB0ZXJcIiwgY2hhcHRlci5pZCwgY2hhcHRlci5pZCwgXCJ0ZXh0XCIpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gSW1hZ2UgYnV0dG9uXG5cdFx0XHRcdGNvbnN0IGltYWdlQnRuID0gY2hhcHRlckhlYWRlckFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyBcblx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWFkZC1jb250ZW50LWJ0biBzdG9yeS1lbmdpbmUtYWRkLWltYWdlLWJ0blwiLFxuXHRcdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiQWRkIGltYWdlIGNvbnRlbnRcIiB9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpbWFnZUJ0bi5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJzdG9yeS1lbmdpbmUtaWNvblwiPlx1RDgzRFx1RERCQ1x1RkUwRjwvc3Bhbj4nO1xuXHRcdFx0XHRpbWFnZUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuY3JlYXRlQ29udGVudEZvckVudGl0eShcImNoYXB0ZXJcIiwgY2hhcHRlci5pZCwgY2hhcHRlci5pZCwgXCJpbWFnZVwiKTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRjb25zdCBjaGFwdGVyQ29udGVudCA9IGNoYXB0ZXJHcm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWNoYXB0ZXItZ3JvdXAtY29udGVudFwiIH0pO1xuXG5cdFx0XHRcdC8vIFJlbmRlciBjaGFwdGVyLWxldmVsIGNvbnRlbnRzIChhbHdheXMgc2hvdyBncm91cCB0byBhbGxvdyBhZGRpbmcgY29udGVudClcblx0XHRcdFx0Y29uc3QgY2hhcHRlckNvbnRlbnRzR3JvdXAgPSBjaGFwdGVyQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwXCIgfSk7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJDb250ZW50c0hlYWRlciA9IGNoYXB0ZXJDb250ZW50c0dyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtaGVhZGVyXCIgfSk7XG5cdFx0XHRcdGNoYXB0ZXJDb250ZW50c0hlYWRlci5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJDaGFwdGVyIENvbnRlbnRzXCIgfSk7XG5cblx0XHRcdFx0Y29uc3QgY2hhcHRlckNvbnRlbnRzSXRlbXMgPSBjaGFwdGVyQ29udGVudHNHcm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwLWl0ZW1zXCIgfSk7XG5cdFx0XHRcdGlmIChjaGFwdGVyQ29udGVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgYmxvY2sgb2YgY2hhcHRlckNvbnRlbnRzKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlckNvbnRlbnRJdGVtKGNoYXB0ZXJDb250ZW50c0l0ZW1zLCBibG9jaywgXCJjaGFwdGVyXCIsIGNoYXB0ZXIuaWQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjaGFwdGVyQ29udGVudHNJdGVtcy5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIGNvbnRlbnQgaW4gdGhpcyBjaGFwdGVyLlwiLCBjbHM6IFwic3RvcnktZW5naW5lLWVtcHR5LWNvbnRlbnRcIiB9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlbmRlciBzY2VuZXMgYXMgc3ViLWdyb3VwcyB3aXRoaW4gdGhlIGNoYXB0ZXJcblx0XHRcdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBjaGFwdGVyU2NlbmVzKSB7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVDb250ZW50cyA9IGNvbnRlbnRzQnlTY2VuZS5nZXQoc2NlbmUuaWQpIHx8IFtdO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lQmVhdHMgPSB0aGlzLmJlYXRzLmZpbHRlcihiID0+IGIuc2NlbmVfaWQgPT09IHNjZW5lLmlkKVxuXHRcdFx0XHRcdFx0LnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRDb250ZW50cyA9IHNjZW5lQmVhdHMuZmxhdE1hcChiID0+IGNvbnRlbnRzQnlCZWF0LmdldChiLmlkKSB8fCBbXSk7XG5cblx0XHRcdFx0XHQvLyBBbHdheXMgcmVuZGVyIHNjZW5lIGdyb3VwIHRvIGFsbG93IGFkZGluZyBjb250ZW50XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVHcm91cCA9IGNoYXB0ZXJDb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXBcIiB9KTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUhlYWRlciA9IHNjZW5lR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1oZWFkZXIgc3RvcnktZW5naW5lLWhvdmVyYWJsZS1oZWFkZXJcIiB9KTtcblx0XHRcdFx0XHRzY2VuZUhlYWRlci5jcmVhdGVFbChcImgzXCIsIHsgXG5cdFx0XHRcdFx0XHR0ZXh0OiBgU2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lLmdvYWwgfHwgXCJVbnRpdGxlZFwifWAgXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gQWRkIENvbnRlbnQgYnV0dG9ucyBvbiBob3ZlclxuXHRcdFx0XHRcdGNvbnN0IHNjZW5lSGVhZGVyQWN0aW9ucyA9IHNjZW5lSGVhZGVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaG92ZXItaGVhZGVyLWFjdGlvbnNcIiB9KTtcblx0XHRcdFx0XHRjb25zdCBjaGFwdGVySWQgPSBzY2VuZS5jaGFwdGVyX2lkIHx8ICh0aGlzLmNoYXB0ZXJzLmxlbmd0aCA+IDAgPyB0aGlzLmNoYXB0ZXJzWzBdLmlkIDogXCJcIik7XG5cdFx0XHRcdFx0aWYgKGNoYXB0ZXJJZCkge1xuXHRcdFx0XHRcdFx0Ly8gVGV4dCBidXR0b25cblx0XHRcdFx0XHRcdGNvbnN0IHRleHRCdG4gPSBzY2VuZUhlYWRlckFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyBcblx0XHRcdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1hZGQtY29udGVudC1idG4gc3RvcnktZW5naW5lLWFkZC10ZXh0LWJ0blwiLFxuXHRcdFx0XHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkFkZCB0ZXh0IGNvbnRlbnRcIiB9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdHRleHRCdG4uaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwic3RvcnktZW5naW5lLWljb25cIj5cdUQ4M0RcdURDREQ8L3NwYW4+Jztcblx0XHRcdFx0XHRcdHRleHRCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5jcmVhdGVDb250ZW50Rm9yRW50aXR5KFwic2NlbmVcIiwgc2NlbmUuaWQsIGNoYXB0ZXJJZCwgXCJ0ZXh0XCIpO1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gSW1hZ2UgYnV0dG9uXG5cdFx0XHRcdFx0XHRjb25zdCBpbWFnZUJ0biA9IHNjZW5lSGVhZGVyQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IFxuXHRcdFx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWFkZC1jb250ZW50LWJ0biBzdG9yeS1lbmdpbmUtYWRkLWltYWdlLWJ0blwiLFxuXHRcdFx0XHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkFkZCBpbWFnZSBjb250ZW50XCIgfVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRpbWFnZUJ0bi5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJzdG9yeS1lbmdpbmUtaWNvblwiPlx1RDgzRFx1RERCQ1x1RkUwRjwvc3Bhbj4nO1xuXHRcdFx0XHRcdFx0aW1hZ2VCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5jcmVhdGVDb250ZW50Rm9yRW50aXR5KFwic2NlbmVcIiwgc2NlbmUuaWQsIGNoYXB0ZXJJZCwgXCJpbWFnZVwiKTtcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVJdGVtcyA9IHNjZW5lR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1pdGVtc1wiIH0pO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIFNjZW5lLWxldmVsIGNvbnRlbnRzXG5cdFx0XHRcdFx0aWYgKHNjZW5lQ29udGVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBibG9jayBvZiBzY2VuZUNvbnRlbnRzKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudEl0ZW0oc2NlbmVJdGVtcywgYmxvY2ssIFwic2NlbmVcIiwgc2NlbmUuaWQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzY2VuZUl0ZW1zLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gY29udGVudCBpbiB0aGlzIHNjZW5lLlwiLCBjbHM6IFwic3RvcnktZW5naW5lLWVtcHR5LWNvbnRlbnRcIiB9KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBCZWF0LWxldmVsIGNvbnRlbnRzXG5cdFx0XHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIHNjZW5lQmVhdHMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGJlYXRDb250ZW50cyA9IGNvbnRlbnRzQnlCZWF0LmdldChiZWF0LmlkKSB8fCBbXTtcblx0XHRcdFx0XHRcdGNvbnN0IGJlYXRTdWJHcm91cCA9IHNjZW5lSXRlbXMuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1iZWF0LXN1Ymdyb3VwXCIgfSk7XG5cdFx0XHRcdFx0XHRjb25zdCBiZWF0U3ViR3JvdXBUaXRsZSA9IGJlYXRTdWJHcm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWJlYXQtc3ViZ3JvdXAtdGl0bGUtY29udGFpbmVyIHN0b3J5LWVuZ2luZS1ob3ZlcmFibGUtaGVhZGVyXCIgfSk7XG5cdFx0XHRcdFx0XHRiZWF0U3ViR3JvdXBUaXRsZS5jcmVhdGVFbChcImg0XCIsIHtcblx0XHRcdFx0XHRcdFx0dGV4dDogYEJlYXQgJHtiZWF0Lm9yZGVyX251bX06ICR7YmVhdC50eXBlfWAsXG5cdFx0XHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtYmVhdC1zdWJncm91cC10aXRsZVwiLFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHQvLyBBZGQgQ29udGVudCBidXR0b25zIG9uIGhvdmVyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgYmVhdEhlYWRlckFjdGlvbnMgPSBiZWF0U3ViR3JvdXBUaXRsZS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWhvdmVyLWhlYWRlci1hY3Rpb25zXCIgfSk7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgYmVhdENoYXB0ZXJJZCA9IHNjZW5lLmNoYXB0ZXJfaWQgfHwgKHRoaXMuY2hhcHRlcnMubGVuZ3RoID4gMCA/IHRoaXMuY2hhcHRlcnNbMF0uaWQgOiBcIlwiKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoYmVhdENoYXB0ZXJJZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gVGV4dCBidXR0b25cblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHRleHRCdG4gPSBiZWF0SGVhZGVyQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWFkZC1jb250ZW50LWJ0biBzdG9yeS1lbmdpbmUtYWRkLXRleHQtYnRuXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiQWRkIHRleHQgY29udGVudFwiIH1cblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGV4dEJ0bi5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJzdG9yeS1lbmdpbmUtaWNvblwiPlx1RDgzRFx1RENERDwvc3Bhbj4nO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGV4dEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmNyZWF0ZUNvbnRlbnRGb3JFbnRpdHkoXCJiZWF0XCIsIGJlYXQuaWQsIGJlYXRDaGFwdGVySWQsIFwidGV4dFwiKTtcblx0XHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEltYWdlIGJ1dHRvblxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgaW1hZ2VCdG4gPSBiZWF0SGVhZGVyQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWFkZC1jb250ZW50LWJ0biBzdG9yeS1lbmdpbmUtYWRkLWltYWdlLWJ0blwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkFkZCBpbWFnZSBjb250ZW50XCIgfVxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbWFnZUJ0bi5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJzdG9yeS1lbmdpbmUtaWNvblwiPlx1RDgzRFx1RERCQ1x1RkUwRjwvc3Bhbj4nO1xuXHRcdFx0XHRcdFx0XHRcdFx0aW1hZ2VCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5jcmVhdGVDb250ZW50Rm9yRW50aXR5KFwiYmVhdFwiLCBiZWF0LmlkLCBiZWF0Q2hhcHRlcklkLCBcImltYWdlXCIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGlmIChiZWF0Q29udGVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIGJlYXRDb250ZW50cykge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudEl0ZW0oYmVhdFN1Ykdyb3VwLCBibG9jaywgXCJiZWF0XCIsIGJlYXQuaWQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRiZWF0U3ViR3JvdXAuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBjb250ZW50IGluIHRoaXMgYmVhdC5cIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1lbXB0eS1iZWF0LWNvbnRlbnRcIiB9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW5kZXIgb3JwaGFuIGNvbnRlbnRzIChubyBjaGFwdGVyL3NjZW5lL2JlYXQpXG5cdFx0Ly8gU2hvdyBcIldpdGhvdXQgQ2hhcHRlclwiIHNlY3Rpb24gaWYgbm8gY2hhcHRlcnMgZXhpc3QgT1IgaWYgdGhlcmUgYXJlIG9ycGhhbiBjb250ZW50cy9zY2VuZXNcblx0XHRpZiAodGhpcy5jaGFwdGVycy5sZW5ndGggPT09IDAgfHwgb3JwaGFuQ29udGVudHMubGVuZ3RoID4gMCB8fCB0aGlzLnNjZW5lcy5zb21lKHMgPT4gIXMuY2hhcHRlcl9pZCkpIHtcblx0XHRcdGNvbnN0IG9ycGhhbkdyb3VwID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWNoYXB0ZXItZ3JvdXBcIiB9KTtcblx0XHRcdGNvbnN0IG9ycGhhbkhlYWRlciA9IG9ycGhhbkdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtY2hhcHRlci1ncm91cC1oZWFkZXJcIiB9KTtcblx0XHRcdG9ycGhhbkhlYWRlci5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJXaXRob3V0IENoYXB0ZXJcIiB9KTtcblxuXHRcdFx0Y29uc3Qgb3JwaGFuQ29udGVudCA9IG9ycGhhbkdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtY2hhcHRlci1ncm91cC1jb250ZW50XCIgfSk7XG5cblx0XHRcdC8vIE9ycGhhbiBzY2VuZXNcblx0XHRcdGNvbnN0IG9ycGhhblNjZW5lcyA9IHRoaXMuc2NlbmVzLmZpbHRlcihzID0+ICFzLmNoYXB0ZXJfaWQpXG5cdFx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKTtcblxuXHRcdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBvcnBoYW5TY2VuZXMpIHtcblx0XHRcdFx0Y29uc3Qgc2NlbmVDb250ZW50cyA9IGNvbnRlbnRzQnlTY2VuZS5nZXQoc2NlbmUuaWQpIHx8IFtdO1xuXHRcdFx0XHRjb25zdCBzY2VuZUJlYXRzID0gdGhpcy5iZWF0cy5maWx0ZXIoYiA9PiBiLnNjZW5lX2lkID09PSBzY2VuZS5pZClcblx0XHRcdFx0XHQuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSk7XG5cdFx0XHRcdGNvbnN0IGJlYXRDb250ZW50cyA9IHNjZW5lQmVhdHMuZmxhdE1hcChiID0+IGNvbnRlbnRzQnlCZWF0LmdldChiLmlkKSB8fCBbXSk7XG5cblx0XHRcdFx0Ly8gQWx3YXlzIHJlbmRlciBzY2VuZSBncm91cCB0byBhbGxvdyBhZGRpbmcgY29udGVudFxuXHRcdFx0XHRjb25zdCBzY2VuZUdyb3VwID0gb3JwaGFuQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwXCIgfSk7XG5cdFx0XHRcdGNvbnN0IHNjZW5lSGVhZGVyID0gc2NlbmVHcm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwLWhlYWRlciBzdG9yeS1lbmdpbmUtaG92ZXJhYmxlLWhlYWRlclwiIH0pO1xuXHRcdFx0XHRzY2VuZUhlYWRlci5jcmVhdGVFbChcImgzXCIsIHsgXG5cdFx0XHRcdFx0dGV4dDogYFNjZW5lICR7c2NlbmUub3JkZXJfbnVtfTogJHtzY2VuZS5nb2FsIHx8IFwiVW50aXRsZWRcIn1gIFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIEFkZCBDb250ZW50IGJ1dHRvbiBvbiBob3ZlclxuXHRcdFx0XHRjb25zdCBzY2VuZUhlYWRlckFjdGlvbnMgPSBzY2VuZUhlYWRlci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWhlYWRlci1hY3Rpb25zXCIgfSk7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJJZCA9IHRoaXMuY2hhcHRlcnMubGVuZ3RoID4gMCA/IHRoaXMuY2hhcHRlcnNbMF0uaWQgOiBcIlwiO1xuXHRcdFx0XHRpZiAoY2hhcHRlcklkKSB7XG5cdFx0XHRcdFx0c2NlbmVIZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgXG5cdFx0XHRcdFx0XHR0ZXh0OiBcIisgQ29udGVudFwiLFxuXHRcdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1hZGQtY29udGVudC1idG5cIlxuXHRcdFx0XHRcdH0pLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmNyZWF0ZUNvbnRlbnRGb3JFbnRpdHkoXCJzY2VuZVwiLCBzY2VuZS5pZCwgY2hhcHRlcklkKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3Qgc2NlbmVJdGVtcyA9IHNjZW5lR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1pdGVtc1wiIH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKHNjZW5lQ29udGVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgYmxvY2sgb2Ygc2NlbmVDb250ZW50cykge1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50SXRlbShzY2VuZUl0ZW1zLCBibG9jaywgXCJzY2VuZVwiLCBzY2VuZS5pZCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNjZW5lSXRlbXMuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBjb250ZW50IGluIHRoaXMgc2NlbmUuXCIgfSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2Ygc2NlbmVCZWF0cykge1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRDb250ZW50cyA9IGNvbnRlbnRzQnlCZWF0LmdldChiZWF0LmlkKSB8fCBbXTtcblx0XHRcdFx0XHRjb25zdCBiZWF0U3ViR3JvdXAgPSBzY2VuZUl0ZW1zLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtYmVhdC1zdWJncm91cFwiIH0pO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRTdWJHcm91cFRpdGxlID0gYmVhdFN1Ykdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtYmVhdC1zdWJncm91cC10aXRsZS1jb250YWluZXIgc3RvcnktZW5naW5lLWhvdmVyYWJsZS1oZWFkZXJcIiB9KTtcblx0XHRcdFx0XHRiZWF0U3ViR3JvdXBUaXRsZS5jcmVhdGVFbChcImg0XCIsIHtcblx0XHRcdFx0XHRcdHRleHQ6IGBCZWF0ICR7YmVhdC5vcmRlcl9udW19OiAke2JlYXQudHlwZX1gLFxuXHRcdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1iZWF0LXN1Ymdyb3VwLXRpdGxlXCIsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gQWRkIENvbnRlbnQgYnV0dG9uIG9uIGhvdmVyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgYmVhdEhlYWRlckFjdGlvbnMgPSBiZWF0U3ViR3JvdXBUaXRsZS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWhvdmVyLWhlYWRlci1hY3Rpb25zXCIgfSk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdENoYXB0ZXJJZCA9IHRoaXMuY2hhcHRlcnMubGVuZ3RoID4gMCA/IHRoaXMuY2hhcHRlcnNbMF0uaWQgOiBcIlwiO1xuXHRcdFx0XHRcdGlmIChiZWF0Q2hhcHRlcklkKSB7XG5cdFx0XHRcdFx0XHRiZWF0SGVhZGVyQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IFxuXHRcdFx0XHRcdFx0XHR0ZXh0OiBcIisgQ29udGVudFwiLFxuXHRcdFx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWFkZC1jb250ZW50LWJ0blwiXG5cdFx0XHRcdFx0XHR9KS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmNyZWF0ZUNvbnRlbnRGb3JFbnRpdHkoXCJiZWF0XCIsIGJlYXQuaWQsIGJlYXRDaGFwdGVySWQpO1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKGJlYXRDb250ZW50cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIGJlYXRDb250ZW50cykge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlckNvbnRlbnRJdGVtKGJlYXRTdWJHcm91cCwgYmxvY2ssIFwiYmVhdFwiLCBiZWF0LmlkKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0YmVhdFN1Ykdyb3VwLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gY29udGVudCBpbiB0aGlzIGJlYXQuXCIsIGNsczogXCJzdG9yeS1lbmdpbmUtZW1wdHktYmVhdC1jb250ZW50XCIgfSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIE9ycGhhbiBjb250ZW50cyAobm8gcmVmZXJlbmNlcylcblx0XHRcdGlmIChvcnBoYW5Db250ZW50cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IG9ycGhhbkNvbnRlbnRzR3JvdXAgPSBvcnBoYW5Db250ZW50LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXBcIiB9KTtcblx0XHRcdFx0Y29uc3Qgb3JwaGFuQ29udGVudHNIZWFkZXIgPSBvcnBoYW5Db250ZW50c0dyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtaGVhZGVyXCIgfSk7XG5cdFx0XHRcdG9ycGhhbkNvbnRlbnRzSGVhZGVyLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIldpdGhvdXQgUmVmZXJlbmNlXCIgfSk7XG5cblx0XHRcdFx0Y29uc3Qgb3JwaGFuQ29udGVudHNJdGVtcyA9IG9ycGhhbkNvbnRlbnRzR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1pdGVtc1wiIH0pO1xuXHRcdFx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIG9ycGhhbkNvbnRlbnRzKSB7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50SXRlbShvcnBoYW5Db250ZW50c0l0ZW1zLCBibG9jaywgbnVsbCwgbnVsbCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRhc3luYyBsb2FkU3RvcnlDaGFyYWN0ZXJzKCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50U3RvcnkgfHwgIXRoaXMuY3VycmVudFN0b3J5LndvcmxkX2lkKSB7XG5cdFx0XHR0aGlzLnN0b3J5Q2hhcmFjdGVycyA9IFtdO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLnN0b3J5Q2hhcmFjdGVycyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRDaGFyYWN0ZXJzKHRoaXMuY3VycmVudFN0b3J5LndvcmxkX2lkKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsb2FkaW5nIHN0b3J5IGNoYXJhY3RlcnM6XCIsIGVycik7XG5cdFx0XHR0aGlzLnN0b3J5Q2hhcmFjdGVycyA9IFtdO1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3IgbG9hZGluZyBjaGFyYWN0ZXJzOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdH1cblx0fVxuXG5cdHJlbmRlclN0b3J5Q2hhcmFjdGVyc1RhYihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0Y29udGFpbmVyLmVtcHR5KCk7XG5cblx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5Py53b3JsZF9pZCkge1xuXHRcdFx0dGhpcy5yZW5kZXJFbXB0eUNhcmQoY29udGFpbmVyLCB7XG5cdFx0XHRcdGljb246IFwiZ2xvYmVcIixcblx0XHRcdFx0dGl0bGU6IFwiTm8gd29ybGQgbGlua2VkXCIsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkxpbmsgdGhpcyBzdG9yeSB0byBhIHdvcmxkIHRvIHZpZXcgaXRzIGNoYXJhY3RlcnMuXCIsXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5zdG9yeUNoYXJhY3RlcnMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHR0aGlzLnJlbmRlckVtcHR5Q2FyZChjb250YWluZXIsIHtcblx0XHRcdFx0aWNvbjogXCJ1c2VyXCIsXG5cdFx0XHRcdHRpdGxlOiBcIk5vIGNoYXJhY3RlcnMgaW4gdGhpcyB3b3JsZFwiLFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJDcmVhdGUgdGhlIGZpcnN0IGNoYXJhY3RlciBsaW5rZWQgdG8gdGhpcyBzdG9yeSdzIHdvcmxkLlwiLFxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IGxpc3QgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1saXN0XCIgfSk7XG5cdFx0XHRmb3IgKGNvbnN0IGNoYXJhY3RlciBvZiB0aGlzLnN0b3J5Q2hhcmFjdGVycy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0XHRjb25zdCBpdGVtID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIiB9KTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnN0IHRpdGxlRGl2ID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXRpdGxlXCIsIHRleHQ6IGNoYXJhY3Rlci5uYW1lIH0pO1xuXHRcdFx0XHR0aXRsZURpdi5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcblx0XHRcdFx0dGl0bGVEaXYub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnNob3dDaGFyYWN0ZXJEZXRhaWxzKGNoYXJhY3Rlcik7XG5cdFx0XHRcdH07XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zdCBtZXRhID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRcdFx0aWYgKGNoYXJhY3Rlci5kZXNjcmlwdGlvbikge1xuXHRcdFx0XHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHsgXG5cdFx0XHRcdFx0XHR0ZXh0OiBjaGFyYWN0ZXIuZGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDgwKSArIChjaGFyYWN0ZXIuZGVzY3JpcHRpb24ubGVuZ3RoID4gODAgPyBcIi4uLlwiIDogXCJcIikgXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0tYWN0aW9uc1wiIH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gVmlldyBkZXRhaWxzIGJ1dHRvblxuXHRcdFx0XHRjb25zdCB2aWV3QnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiVmlld1wiIH0pO1xuXHRcdFx0XHR2aWV3QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5zaG93Q2hhcmFjdGVyRGV0YWlscyhjaGFyYWN0ZXIpO1xuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEFjdGlvbnMgaGFuZGxlZCBieSBzdG9yeSBhY3Rpb25zIGJhclxuXHR9XG5cblx0c2hvd0NyZWF0ZUNoYXJhY3Rlck1vZGFsRm9yU3RvcnkoKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeT8ud29ybGRfaWQpIHtcblx0XHRcdG5ldyBOb3RpY2UoXCJUaGlzIHN0b3J5IGlzIG5vdCBsaW5rZWQgdG8gYSB3b3JsZFwiKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkNyZWF0ZSBDaGFyYWN0ZXJcIik7XG5cdFx0XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgbmFtZSA9IFwiXCI7XG5cdFx0bGV0IGRlc2NyaXB0aW9uID0gXCJcIjtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTmFtZSAqXCIgfSk7XG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiB9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0ZGVzY0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IGNyZWF0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ3JlYXRlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0Y3JlYXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIW5hbWUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJOYW1lIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlQ2hhcmFjdGVyKHRoaXMuY3VycmVudFN0b3J5IS53b3JsZF9pZCEsIHsgXG5cdFx0XHRcdFx0bmFtZTogbmFtZS50cmltKCksIFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKClcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFN0b3J5Q2hhcmFjdGVycygpO1xuXHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkNoYXJhY3RlciBjcmVhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0XHRuYW1lSW5wdXQuZm9jdXMoKTtcblx0fVxuXG5cdHJlbmRlckNvbnRlbnRJdGVtKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGNvbnRlbnRCbG9jazogQ29udGVudEJsb2NrLCBlbnRpdHlUeXBlOiBzdHJpbmcgfCBudWxsLCBlbnRpdHlJZDogc3RyaW5nIHwgbnVsbCkge1xuXHRcdGNvbnN0IGl0ZW0gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtIHN0b3J5LWVuZ2luZS1jb250ZW50LWl0ZW1cIiB9KTtcblx0XHRcblx0XHQvLyBJY29uIGFuZCBwcmV2aWV3IGNvbnRhaW5lclxuXHRcdGNvbnN0IGl0ZW1Db250ZW50ID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWNvbnRlbnQtaXRlbS1jb250ZW50XCIgfSk7XG5cdFx0XG5cdFx0Ly8gVHlwZSBpY29uXG5cdFx0Y29uc3QgaWNvbkNvbnRhaW5lciA9IGl0ZW1Db250ZW50LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtY29udGVudC1pY29uXCIgfSk7XG5cdFx0Y29uc3QgaWNvbk1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcblx0XHRcdHRleHQ6IFwiZmlsZS10ZXh0XCIsXG5cdFx0XHRpbWFnZTogXCJpbWFnZVwiLFxuXHRcdFx0dmlkZW86IFwidmlkZW9cIixcblx0XHRcdGF1ZGlvOiBcIm11c2ljXCIsXG5cdFx0XHRlbWJlZDogXCJjb2RlXCIsXG5cdFx0XHRsaW5rOiBcImV4dGVybmFsLWxpbmtcIixcblx0XHR9O1xuXHRcdGNvbnN0IGljb25OYW1lID0gaWNvbk1hcFtjb250ZW50QmxvY2sudHlwZV0gfHwgXCJmaWxlXCI7XG5cdFx0c2V0SWNvbihpY29uQ29udGFpbmVyLCBpY29uTmFtZSk7XG5cblx0XHQvLyBQcmV2aWV3XG5cdFx0Y29uc3QgcHJldmlldyA9IGl0ZW1Db250ZW50LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtY29udGVudC1wcmV2aWV3XCIgfSk7XG5cdFx0aWYgKGNvbnRlbnRCbG9jay50eXBlID09PSBcInRleHRcIikge1xuXHRcdFx0Y29uc3QgdGV4dFByZXZpZXcgPSBjb250ZW50QmxvY2suY29udGVudCB8fCBcIlwiO1xuXHRcdFx0Y29uc3QgdHJ1bmNhdGVkID0gdGV4dFByZXZpZXcubGVuZ3RoID4gMTAwID8gdGV4dFByZXZpZXcuc3Vic3RyaW5nKDAsIDEwMCkgKyBcIi4uLlwiIDogdGV4dFByZXZpZXc7XG5cdFx0XHRwcmV2aWV3LmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IHRydW5jYXRlZCB9KTtcblx0XHR9IGVsc2UgaWYgKGNvbnRlbnRCbG9jay50eXBlID09PSBcImltYWdlXCIpIHtcblx0XHRcdGNvbnN0IGltZ0NvbnRhaW5lciA9IHByZXZpZXcuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pbWFnZS1jb250YWluZXJcIiB9KTtcblx0XHRcdGNvbnN0IGltZyA9IGltZ0NvbnRhaW5lci5jcmVhdGVFbChcImltZ1wiLCB7XG5cdFx0XHRcdGF0dHI6IHsgc3JjOiBjb250ZW50QmxvY2suY29udGVudCB8fCBcIlwiLCBhbHQ6IGNvbnRlbnRCbG9jay5tZXRhZGF0YT8uYWx0X3RleHQgfHwgXCJcIiB9LFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWNvbnRlbnQtdGh1bWJuYWlsXCIsXG5cdFx0XHR9KTtcblx0XHRcdGltZy5zdHlsZS5tYXhXaWR0aCA9IFwiMTAwcHhcIjtcblx0XHRcdGltZy5zdHlsZS5tYXhIZWlnaHQgPSBcIjYwcHhcIjtcblx0XHRcdGltZy5zdHlsZS5vYmplY3RGaXQgPSBcImNvdmVyXCI7XG5cdFx0XHRpbWcuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI0cHhcIjtcblx0XHRcdFxuXHRcdFx0Ly8gU2hvdyBhdHRyaWJ1dGlvbiBpZiBhdmFpbGFibGVcblx0XHRcdGlmIChjb250ZW50QmxvY2subWV0YWRhdGE/LmF0dHJpYnV0aW9uKSB7XG5cdFx0XHRcdGNvbnN0IGF0dHJpYnV0aW9uID0gaW1nQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdW5zcGxhc2gtYXR0cmlidXRpb25cIiB9KTtcblx0XHRcdFx0YXR0cmlidXRpb24uY3JlYXRlRWwoXCJzcGFuXCIsIHsgXG5cdFx0XHRcdFx0dGV4dDogY29udGVudEJsb2NrLm1ldGFkYXRhLmF0dHJpYnV0aW9uLFxuXHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtYXR0cmlidXRpb24tdGV4dFwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRwcmV2aWV3LmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGNvbnRlbnRCbG9jay5jb250ZW50IHx8IFwiXCIgfSk7XG5cdFx0fVxuXG5cdFx0Ly8gTWV0YSBpbmZvIChyZW1vdmVkIHR5cGUgZGlzcGxheSBhcyBpY29uIGFscmVhZHkgc2hvd3MgaXQpXG5cblx0XHQvLyBBY3Rpb25zXG5cdFx0Y29uc3QgYWN0aW9ucyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtLWFjdGlvbnNcIiB9KTtcblx0XHRcblx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJFZGl0XCIgfSkub25jbGljayA9ICgpID0+IHtcblx0XHRcdG5ldyBDb250ZW50QmxvY2tNb2RhbCh0aGlzLmFwcCwgYXN5bmMgKHVwZGF0ZWRDb250ZW50QmxvY2spID0+IHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlQ29udGVudEJsb2NrKGNvbnRlbnRCbG9jay5pZCwgdXBkYXRlZENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShcIkNvbnRlbnQgYmxvY2sgdXBkYXRlZCBzdWNjZXNzZnVsbHlcIik7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdHRocm93IGVycjtcblx0XHRcdFx0fVxuXHRcdFx0fSwgY29udGVudEJsb2NrLCB0aGlzLnBsdWdpbikub3BlbigpO1xuXHRcdH07XG5cblx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJNb3ZlXCIgfSkub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IHRoaXMuc2hvd01vdmVDb250ZW50TW9kYWwoY29udGVudEJsb2NrLCBlbnRpdHlUeXBlLCBlbnRpdHlJZCwgXCJtb3ZlXCIpO1xuXHRcdH07XG5cblx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJMaW5rXCIgfSkub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IHRoaXMuc2hvd01vdmVDb250ZW50TW9kYWwoY29udGVudEJsb2NrLCBlbnRpdHlUeXBlLCBlbnRpdHlJZCwgXCJsaW5rXCIpO1xuXHRcdH07XG5cblx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJEZWxldGVcIiB9KS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKGNvbmZpcm0oXCJEZWxldGUgdGhpcyBjb250ZW50IGJsb2NrP1wiKSkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5kZWxldGVDb250ZW50QmxvY2soY29udGVudEJsb2NrLmlkKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQ29udGVudCBibG9jayBkZWxldGVkXCIpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHRhc3luYyBzaG93TW92ZUNvbnRlbnRNb2RhbChjb250ZW50QmxvY2s6IENvbnRlbnRCbG9jaywgY3VycmVudEVudGl0eVR5cGU6IHN0cmluZyB8IG51bGwsIGN1cnJlbnRFbnRpdHlJZDogc3RyaW5nIHwgbnVsbCwgbW9kZTogXCJtb3ZlXCIgfCBcImxpbmtcIikge1xuXHRcdGlmICghdGhpcy5jdXJyZW50U3RvcnkpIHJldHVybjtcblxuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQobW9kZSA9PT0gXCJtb3ZlXCIgPyBcIk1vdmUgQ29udGVudCBCbG9ja1wiIDogXCJMaW5rIENvbnRlbnQgQmxvY2tcIik7XG5cblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgXG5cdFx0XHR0ZXh0OiBtb2RlID09PSBcIm1vdmVcIiBcblx0XHRcdFx0PyBgTW92ZSBjb250ZW50IGJsb2NrIHRvOmAgXG5cdFx0XHRcdDogYExpbmsgY29udGVudCBibG9jayB0byAod2lsbCBhcHBlYXIgaW4gYm90aCBwbGFjZXMpOmAgXG5cdFx0fSk7XG5cblx0XHRjb25zdCBzZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tb3ZlLXNlbGVjdFwiIH0pO1xuXHRcdFxuXHRcdC8vIEFkZCBcIk5vIFJlZmVyZW5jZVwiIG9wdGlvblxuXHRcdGNvbnN0IG5vUmVmT3B0aW9uID0gc2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogXCJObyBSZWZlcmVuY2VcIiwgdmFsdWU6IFwiXCIgfSk7XG5cdFx0XG5cdFx0Ly8gR3JvdXAgYnkgY2hhcHRlcnNcblx0XHRmb3IgKGNvbnN0IGNoYXB0ZXIgb2YgdGhpcy5jaGFwdGVycy5zb3J0KChhLCBiKSA9PiBhLm51bWJlciAtIGIubnVtYmVyKSkge1xuXHRcdFx0Y29uc3Qgb3B0aW9uID0gc2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHtcblx0XHRcdFx0dGV4dDogYENoYXB0ZXIgJHtjaGFwdGVyLm51bWJlcn06ICR7Y2hhcHRlci50aXRsZX1gLFxuXHRcdFx0XHR2YWx1ZTogYGNoYXB0ZXI6JHtjaGFwdGVyLmlkfWAsXG5cdFx0XHR9KTtcblx0XHRcdGlmIChjdXJyZW50RW50aXR5VHlwZSA9PT0gXCJjaGFwdGVyXCIgJiYgY3VycmVudEVudGl0eUlkID09PSBjaGFwdGVyLmlkKSB7XG5cdFx0XHRcdG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gR3JvdXAgc2NlbmVzIGJ5IGNoYXB0ZXJcblx0XHRmb3IgKGNvbnN0IGNoYXB0ZXIgb2YgdGhpcy5jaGFwdGVycy5zb3J0KChhLCBiKSA9PiBhLm51bWJlciAtIGIubnVtYmVyKSkge1xuXHRcdFx0Y29uc3QgY2hhcHRlclNjZW5lcyA9IHRoaXMuc2NlbmVzXG5cdFx0XHRcdC5maWx0ZXIocyA9PiBzLmNoYXB0ZXJfaWQgPT09IGNoYXB0ZXIuaWQpXG5cdFx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKTtcblx0XHRcdFxuXHRcdFx0aWYgKGNoYXB0ZXJTY2VuZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRjb25zdCBvcHRncm91cCA9IHNlbGVjdC5jcmVhdGVFbChcIm9wdGdyb3VwXCIpO1xuXHRcdFx0XHRvcHRncm91cC5sYWJlbCA9IGBDaGFwdGVyICR7Y2hhcHRlci5udW1iZXJ9OiAke2NoYXB0ZXIudGl0bGV9IC0gU2NlbmVzYDtcblx0XHRcdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBjaGFwdGVyU2NlbmVzKSB7XG5cdFx0XHRcdFx0Y29uc3Qgb3B0aW9uID0gb3B0Z3JvdXAuY3JlYXRlRWwoXCJvcHRpb25cIiwge1xuXHRcdFx0XHRcdFx0dGV4dDogYFNjZW5lICR7c2NlbmUub3JkZXJfbnVtfTogJHtzY2VuZS5nb2FsIHx8IFwiVW50aXRsZWRcIn1gLFxuXHRcdFx0XHRcdFx0dmFsdWU6IGBzY2VuZToke3NjZW5lLmlkfWAsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0aWYgKGN1cnJlbnRFbnRpdHlUeXBlID09PSBcInNjZW5lXCIgJiYgY3VycmVudEVudGl0eUlkID09PSBzY2VuZS5pZCkge1xuXHRcdFx0XHRcdFx0b3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBBZGQgb3JwaGFuIHNjZW5lc1xuXHRcdGNvbnN0IG9ycGhhblNjZW5lcyA9IHRoaXMuc2NlbmVzLmZpbHRlcihzID0+ICFzLmNoYXB0ZXJfaWQpO1xuXHRcdGlmIChvcnBoYW5TY2VuZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29uc3Qgb3B0Z3JvdXAgPSBzZWxlY3QuY3JlYXRlRWwoXCJvcHRncm91cFwiKTtcblx0XHRcdG9wdGdyb3VwLmxhYmVsID0gXCJObyBDaGFwdGVyIC0gU2NlbmVzXCI7XG5cdFx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIG9ycGhhblNjZW5lcy5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKSkge1xuXHRcdFx0XHRjb25zdCBvcHRpb24gPSBvcHRncm91cC5jcmVhdGVFbChcIm9wdGlvblwiLCB7XG5cdFx0XHRcdFx0dGV4dDogYFNjZW5lICR7c2NlbmUub3JkZXJfbnVtfTogJHtzY2VuZS5nb2FsIHx8IFwiVW50aXRsZWRcIn1gLFxuXHRcdFx0XHRcdHZhbHVlOiBgc2NlbmU6JHtzY2VuZS5pZH1gLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKGN1cnJlbnRFbnRpdHlUeXBlID09PSBcInNjZW5lXCIgJiYgY3VycmVudEVudGl0eUlkID09PSBzY2VuZS5pZCkge1xuXHRcdFx0XHRcdG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBHcm91cCBiZWF0cyBieSBzY2VuZVxuXHRcdGZvciAoY29uc3Qgc2NlbmUgb2YgdGhpcy5zY2VuZXMuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSkpIHtcblx0XHRcdGNvbnN0IHNjZW5lQmVhdHMgPSB0aGlzLmJlYXRzXG5cdFx0XHRcdC5maWx0ZXIoYiA9PiBiLnNjZW5lX2lkID09PSBzY2VuZS5pZClcblx0XHRcdFx0LnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pO1xuXHRcdFx0XG5cdFx0XHRpZiAoc2NlbmVCZWF0cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXIgPSB0aGlzLmNoYXB0ZXJzLmZpbmQoYyA9PiBjLmlkID09PSBzY2VuZS5jaGFwdGVyX2lkKTtcblx0XHRcdFx0Y29uc3QgY2hhcHRlckxhYmVsID0gY2hhcHRlciA/IGBDaGFwdGVyICR7Y2hhcHRlci5udW1iZXJ9YCA6IFwiTm8gQ2hhcHRlclwiO1xuXHRcdFx0XHRjb25zdCBvcHRncm91cCA9IHNlbGVjdC5jcmVhdGVFbChcIm9wdGdyb3VwXCIpO1xuXHRcdFx0XHRvcHRncm91cC5sYWJlbCA9IGAke2NoYXB0ZXJMYWJlbH0gPiBTY2VuZSAke3NjZW5lLm9yZGVyX251bX0gLSBCZWF0c2A7XG5cdFx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBzY2VuZUJlYXRzKSB7XG5cdFx0XHRcdFx0Y29uc3Qgb3B0aW9uID0gb3B0Z3JvdXAuY3JlYXRlRWwoXCJvcHRpb25cIiwge1xuXHRcdFx0XHRcdFx0dGV4dDogYEJlYXQgJHtiZWF0Lm9yZGVyX251bX06ICR7YmVhdC50eXBlfWAsXG5cdFx0XHRcdFx0XHR2YWx1ZTogYGJlYXQ6JHtiZWF0LmlkfWAsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0aWYgKGN1cnJlbnRFbnRpdHlUeXBlID09PSBcImJlYXRcIiAmJiBjdXJyZW50RW50aXR5SWQgPT09IGJlYXQuaWQpIHtcblx0XHRcdFx0XHRcdG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCFjdXJyZW50RW50aXR5VHlwZSkge1xuXHRcdFx0bm9SZWZPcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBhY3Rpb25CdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogbW9kZSA9PT0gXCJtb3ZlXCIgPyBcIk1vdmVcIiA6IFwiTGlua1wiLFxuXHRcdFx0Y2xzOiBcIm1vZC1jdGFcIixcblx0XHR9KTtcblx0XHRhY3Rpb25CdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IHNlbGVjdGVkVmFsdWUgPSBzZWxlY3QudmFsdWU7XG5cdFx0XHRcblx0XHRcdHRyeSB7XG5cdFx0XHRcdC8vIEZpbmQgY3VycmVudCByZWZlcmVuY2UgdG8gZGVsZXRlIChpZiBtb3ZlIG1vZGUpXG5cdFx0XHRcdGlmIChtb2RlID09PSBcIm1vdmVcIiAmJiBjdXJyZW50RW50aXR5VHlwZSAmJiBjdXJyZW50RW50aXR5SWQpIHtcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50UmVmID0gdGhpcy5jb250ZW50QmxvY2tSZWZzLmZpbmQoXG5cdFx0XHRcdFx0XHRyID0+IHIuY29udGVudF9ibG9ja19pZCA9PT0gY29udGVudEJsb2NrLmlkICYmIFxuXHRcdFx0XHRcdFx0ci5lbnRpdHlfdHlwZSA9PT0gY3VycmVudEVudGl0eVR5cGUgJiYgXG5cdFx0XHRcdFx0XHRyLmVudGl0eV9pZCA9PT0gY3VycmVudEVudGl0eUlkXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRpZiAoY3VycmVudFJlZikge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmRlbGV0ZUNvbnRlbnRBbmNob3IoY3VycmVudFJlZi5pZCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQ3JlYXRlIG5ldyByZWZlcmVuY2Vcblx0XHRcdFx0aWYgKHNlbGVjdGVkVmFsdWUpIHtcblx0XHRcdFx0XHRjb25zdCBbZW50aXR5VHlwZSwgZW50aXR5SWRdID0gc2VsZWN0ZWRWYWx1ZS5zcGxpdChcIjpcIik7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRBbmNob3IoY29udGVudEJsb2NrLmlkLCBlbnRpdHlUeXBlLCBlbnRpdHlJZCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UobW9kZSA9PT0gXCJtb3ZlXCIgPyBcIkNvbnRlbnQgYmxvY2sgbW92ZWQgc3VjY2Vzc2Z1bGx5XCIgOiBcIkNvbnRlbnQgYmxvY2sgbGlua2VkIHN1Y2Nlc3NmdWxseVwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogYEZhaWxlZCB0byAke21vZGV9IGNvbnRlbnQgYmxvY2tgO1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSk7XG5cdFx0Y2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlQ29udGVudEZvckVudGl0eShlbnRpdHlUeXBlOiBcImNoYXB0ZXJcIiB8IFwic2NlbmVcIiB8IFwiYmVhdFwiLCBlbnRpdHlJZDogc3RyaW5nLCBjaGFwdGVySWQ6IHN0cmluZywgY29udGVudFR5cGU6IFwidGV4dFwiIHwgXCJpbWFnZVwiID0gXCJ0ZXh0XCIpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cdFx0XG5cdFx0aWYgKCFjaGFwdGVySWQpIHtcblx0XHRcdGlmICh0aGlzLmNoYXB0ZXJzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTm8gY2hhcHRlciBhdmFpbGFibGUuIFBsZWFzZSBjcmVhdGUgYSBjaGFwdGVyIGZpcnN0LlwiLCA1MDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0Y2hhcHRlcklkID0gdGhpcy5jaGFwdGVyc1swXS5pZDtcblx0XHR9XG5cblx0XHQvLyBDYWxjdWxhdGUgbmV4dCBvcmRlcl9udW0gZm9yIHRoaXMgY2hhcHRlclxuXHRcdGNvbnN0IGNoYXB0ZXJCbG9ja3MgPSB0aGlzLmNvbnRlbnRCbG9ja3MuZmlsdGVyKGNiID0+IHtcblx0XHRcdGNvbnN0IHJlZnMgPSB0aGlzLmNvbnRlbnRCbG9ja1JlZnMuZmlsdGVyKHIgPT4gci5jb250ZW50X2Jsb2NrX2lkID09PSBjYi5pZCAmJiByLmVudGl0eV90eXBlID09PSBcImNoYXB0ZXJcIiAmJiByLmVudGl0eV9pZCA9PT0gY2hhcHRlcklkKTtcblx0XHRcdHJldHVybiByZWZzLmxlbmd0aCA+IDAgfHwgY2IuY2hhcHRlcl9pZCA9PT0gY2hhcHRlcklkO1xuXHRcdH0pO1xuXHRcdGNvbnN0IG1heE9yZGVyTnVtID0gY2hhcHRlckJsb2Nrcy5sZW5ndGggPiAwIFxuXHRcdFx0PyBNYXRoLm1heCguLi5jaGFwdGVyQmxvY2tzLm1hcChjYiA9PiBjYi5vcmRlcl9udW0gfHwgMCkpXG5cdFx0XHQ6IDA7XG5cdFx0Y29uc3QgbmV4dE9yZGVyTnVtID0gbWF4T3JkZXJOdW0gKyAxO1xuXG5cdFx0Ly8gQ3JlYXRlIGluaXRpYWwgY29udGVudCBibG9jayB3aXRoIHRoZSBzcGVjaWZpZWQgdHlwZVxuXHRcdGNvbnN0IGluaXRpYWxDb250ZW50QmxvY2s6IFBhcnRpYWw8Q29udGVudEJsb2NrPiA9IHtcblx0XHRcdHR5cGU6IGNvbnRlbnRUeXBlLFxuXHRcdFx0a2luZDogXCJmaW5hbFwiLFxuXHRcdFx0Y29udGVudDogXCJcIixcblx0XHRcdG1ldGFkYXRhOiB7fSxcblx0XHR9O1xuXG5cdFx0bmV3IENvbnRlbnRCbG9ja01vZGFsKHRoaXMuYXBwLCBhc3luYyAoY29udGVudEJsb2NrKSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb250ZW50QmxvY2sub3JkZXJfbnVtID0gbmV4dE9yZGVyTnVtO1xuXHRcdFx0XHRjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRCbG9jayhjaGFwdGVySWQsIGNvbnRlbnRCbG9jayk7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QW5jaG9yKGNyZWF0ZWQuaWQsIGVudGl0eVR5cGUsIGVudGl0eUlkKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQ29udGVudCBibG9jayBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHR9XG5cdFx0fSwgaW5pdGlhbENvbnRlbnRCbG9jayBhcyBDb250ZW50QmxvY2ssIHRoaXMucGx1Z2luKS5vcGVuKCk7XG5cdH1cblxuXHQvLyA9PT09PT09PT09PT09PT09PT09PSBXb3JsZCBWaWV3IE1ldGhvZHMgPT09PT09PT09PT09PT09PT09PT1cblxuXHRhc3luYyBzaG93V29ybGREZXRhaWxzKHdvcmxkOiBXb3JsZCkge1xuXHRcdHRoaXMuY3VycmVudFdvcmxkID0gd29ybGQ7XG5cdFx0dGhpcy52aWV3TW9kZSA9IFwid29ybGQtZGV0YWlsc1wiO1xuXHRcdHRoaXMud29ybGRUYWIgPSBcImNoYXJhY3RlcnNcIjtcblx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHR0aGlzLnJlbmRlcldvcmxkRGV0YWlscygpO1xuXHR9XG5cblx0YXN5bmMgbG9hZFdvcmxkRGF0YSgpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFdvcmxkKSByZXR1cm47XG5cblx0XHR0aGlzLmxvYWRpbmdXb3JsZERhdGEgPSB0cnVlO1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLmNoYXJhY3RlcnMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q2hhcmFjdGVycyh0aGlzLmN1cnJlbnRXb3JsZC5pZCk7XG5cdFx0XHR0aGlzLmxvY2F0aW9ucyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRMb2NhdGlvbnModGhpcy5jdXJyZW50V29ybGQuaWQpO1xuXHRcdFx0dGhpcy5hcnRpZmFjdHMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0QXJ0aWZhY3RzKHRoaXMuY3VycmVudFdvcmxkLmlkKTtcblx0XHRcdHRoaXMuZXZlbnRzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldEV2ZW50cyh0aGlzLmN1cnJlbnRXb3JsZC5pZCk7XG5cdFx0XHQvLyBUcmFpdHMgYXJlIGdsb2JhbCwgbm90IHBlci13b3JsZFxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dGhpcy50cmFpdHMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0VHJhaXRzKCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKFwiVHJhaXRzIG5vdCBhdmFpbGFibGU6XCIsIGVycik7XG5cdFx0XHRcdHRoaXMudHJhaXRzID0gW107XG5cdFx0XHR9XG5cdFx0XHQvLyBBcmNoZXR5cGVzIGFyZSBnbG9iYWwgcGVyIHRlbmFudFxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dGhpcy5hcmNoZXR5cGVzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldEFyY2hldHlwZXMoKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oXCJBcmNoZXR5cGVzIG5vdCBhdmFpbGFibGU6XCIsIGVycik7XG5cdFx0XHRcdHRoaXMuYXJjaGV0eXBlcyA9IFtdO1xuXHRcdFx0fVxuXHRcdFx0Ly8gRmFjdGlvbnMgYW5kIExvcmUgYXJlIHBlci13b3JsZFxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dGhpcy5mYWN0aW9ucyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRGYWN0aW9ucyh0aGlzLmN1cnJlbnRXb3JsZC5pZCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKFwiRmFjdGlvbnMgbm90IGF2YWlsYWJsZTpcIiwgZXJyKTtcblx0XHRcdFx0dGhpcy5mYWN0aW9ucyA9IFtdO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dGhpcy5sb3JlcyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRMb3Jlcyh0aGlzLmN1cnJlbnRXb3JsZC5pZCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKFwiTG9yZXMgbm90IGF2YWlsYWJsZTpcIiwgZXJyKTtcblx0XHRcdFx0dGhpcy5sb3JlcyA9IFtdO1xuXHRcdFx0fVxuXHRcdFx0Ly8gUmVsb2FkIHdvcmxkIHRvIGdldCB0aW1lX2NvbmZpZ1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dGhpcy5jdXJyZW50V29ybGQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0V29ybGQodGhpcy5jdXJyZW50V29ybGQuaWQpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybihcIkZhaWxlZCB0byByZWxvYWQgd29ybGQ6XCIsIGVycik7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gbG9hZCB3b3JsZCBkYXRhXCI7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdHRoaXMubG9hZGluZ1dvcmxkRGF0YSA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdHJlbmRlcldvcmxkRGV0YWlscygpIHtcblx0XHRpZiAoIXRoaXMuY29udGVudEVsIHx8ICF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXG5cdFx0Ly8gU3dpdGNoIHRvIHNpZGViYXIgbGF5b3V0IGZvciB3b3JsZCBkZXRhaWwgdmlld1xuXHRcdHRoaXMuY29udGVudEVsLnJlbW92ZUNsYXNzKFwic3RvcnktZW5naW5lLWxpc3QtbGF5b3V0XCIpO1xuXHRcdHRoaXMuY29udGVudEVsLmFkZENsYXNzKFwic3RvcnktZW5naW5lLXNpZGViYXItbGF5b3V0XCIpO1xuXG5cdFx0dGhpcy5yZW5kZXJXb3JsZERldGFpbHNIZWFkZXIoKTtcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXG5cdFx0Ly8gVGFicyBzZWN0aW9uXG5cdFx0dGhpcy5yZW5kZXJXb3JsZFRhYnMoKTtcblx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHR9XG5cblx0cmVuZGVyV29ybGREZXRhaWxzSGVhZGVyKCkge1xuXHRcdGlmICghdGhpcy5oZWFkZXJFbCB8fCAhdGhpcy5jdXJyZW50V29ybGQpIHJldHVybjtcblxuXHRcdHRoaXMuaGVhZGVyRWwuZW1wdHkoKTtcblx0XHRcblx0XHQvLyBNYWluIGhlYWRlciBjb250YWluZXJcblx0XHRjb25zdCBoZWFkZXJDb250YWluZXIgPSB0aGlzLmhlYWRlckVsLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtZGV0YWlscy1oZWFkZXJcIiB9KTtcblx0XHRjb25zdCBoZWFkZXJDb250ZW50ID0gaGVhZGVyQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtaGVhZGVyLWNvbnRlbnRcIiB9KTtcblx0XHRcblx0XHQvLyBUb3Agcm93OiBCYWNrIGJ1dHRvbiArIEFjdGlvbnNcblx0XHRjb25zdCB0b3BSb3cgPSBoZWFkZXJDb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtaGVhZGVyLXRvcFwiIH0pO1xuXHRcdFxuXHRcdGNvbnN0IGJhY2tCdXR0b24gPSB0b3BSb3cuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJcdTIxOTAgQmFja1wiLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1iYWNrLWJ0blwiLFxuXHRcdH0pO1xuXHRcdGJhY2tCdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdHRoaXMuY3VycmVudFdvcmxkID0gbnVsbDtcblx0XHRcdHRoaXMudmlld01vZGUgPSBcImxpc3RcIjtcblx0XHRcdHRoaXMubGlzdFRhYiA9IFwid29ybGRzXCI7XG5cdFx0XHR0aGlzLnJlbmRlckxpc3RIZWFkZXIoKTtcblx0XHRcdHRoaXMucmVuZGVyTGlzdENvbnRlbnQoKTtcblx0XHR9O1xuXG5cdFx0Ly8gSGVhZGVyIGFjdGlvbnMgKGNvbnRleHQgbWVudSlcblx0XHRjb25zdCBoZWFkZXJBY3Rpb25zID0gdG9wUm93LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaGVhZGVyLWFjdGlvbnNcIiB9KTtcblx0XHRcblx0XHRjb25zdCBjb250ZXh0QnV0dG9uID0gaGVhZGVyQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWNvbnRleHQtYnRuXCIsXG5cdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIldvcmxkIEFjdGlvbnNcIiB9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihjb250ZXh0QnV0dG9uLCBcIm1vcmUtdmVydGljYWxcIik7XG5cdFx0XG5cdFx0Ly8gQ3JlYXRlIGRyb3Bkb3duIG1lbnVcblx0XHRjb25zdCBkcm9wZG93bk1lbnUgPSBoZWFkZXJBY3Rpb25zLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZHJvcGRvd24tbWVudVwiIH0pO1xuXHRcdGRyb3Bkb3duTWVudS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XG5cdFx0Ly8gRWRpdCBvcHRpb25cblx0XHRjb25zdCBlZGl0T3B0aW9uID0gZHJvcGRvd25NZW51LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZHJvcGRvd24taXRlbVwiLFxuXHRcdH0pO1xuXHRcdHNldEljb24oZWRpdE9wdGlvbiwgXCJwZW5jaWxcIik7XG5cdFx0ZWRpdE9wdGlvbi5jcmVhdGVTcGFuKHsgdGV4dDogXCJFZGl0IFdvcmxkXCIgfSk7XG5cdFx0ZWRpdE9wdGlvbi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0ZHJvcGRvd25NZW51LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0XHRcdHRoaXMuc2hvd0VkaXRXb3JsZE1vZGFsKCk7XG5cdFx0fTtcblx0XHRcblx0XHQvLyBUb2dnbGUgZHJvcGRvd25cblx0XHRjb250ZXh0QnV0dG9uLm9uY2xpY2sgPSAoZSkgPT4ge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdGNvbnN0IGlzVmlzaWJsZSA9IGRyb3Bkb3duTWVudS5zdHlsZS5kaXNwbGF5ICE9PSBcIm5vbmVcIjtcblx0XHRcdGRyb3Bkb3duTWVudS5zdHlsZS5kaXNwbGF5ID0gaXNWaXNpYmxlID8gXCJub25lXCIgOiBcImJsb2NrXCI7XG5cdFx0fTtcblx0XHRcblx0XHQvLyBDbG9zZSBkcm9wZG93biB3aGVuIGNsaWNraW5nIG91dHNpZGVcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuXHRcdFx0ZHJvcGRvd25NZW51LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0XHR9LCB7IG9uY2U6IHRydWUgfSk7XG5cblx0XHQvLyBUaXRsZSBzZWN0aW9uIHdpdGggbmFtZSBhbmQgZGVzY3JpcHRpb25cblx0XHRjb25zdCB0aXRsZVNlY3Rpb24gPSBoZWFkZXJDb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtdGl0bGUtc2VjdGlvblwiIH0pO1xuXHRcdFxuXHRcdC8vIFdvcmxkIG5hbWVcblx0XHR0aXRsZVNlY3Rpb24uY3JlYXRlRWwoXCJoMVwiLCB7IFxuXHRcdFx0dGV4dDogdGhpcy5jdXJyZW50V29ybGQubmFtZSxcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtbmFtZVwiXG5cdFx0fSk7XG5cblx0XHQvLyBEZXNjcmlwdGlvblxuXHRcdGlmICh0aGlzLmN1cnJlbnRXb3JsZC5kZXNjcmlwdGlvbikge1xuXHRcdFx0dGl0bGVTZWN0aW9uLmNyZWF0ZUVsKFwicFwiLCB7IFxuXHRcdFx0XHR0ZXh0OiB0aGlzLmN1cnJlbnRXb3JsZC5kZXNjcmlwdGlvbixcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC1kZXNjXCJcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vIE1ldGEgcm93IHdpdGggZ2VucmUgYW5kIFVVSURcblx0XHRjb25zdCBtZXRhUm93ID0gdGl0bGVTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtbWV0YS1yb3dcIiB9KTtcblx0XHRcblx0XHQvLyBHZW5yZSBiYWRnZVxuXHRcdGlmICh0aGlzLmN1cnJlbnRXb3JsZC5nZW5yZSkge1xuXHRcdFx0Y29uc3QgZ2VucmVCYWRnZSA9IG1ldGFSb3cuY3JlYXRlU3Bhbih7IFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWJhZGdlIHN0b3J5LWVuZ2luZS1nZW5yZS1iYWRnZVwiXG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24oZ2VucmVCYWRnZSwgXCJ0YWdcIik7XG5cdFx0XHRnZW5yZUJhZGdlLmNyZWF0ZVNwYW4oeyB0ZXh0OiB0aGlzLmN1cnJlbnRXb3JsZC5nZW5yZSB9KTtcblx0XHR9XG5cblx0XHQvLyBVVUlEIGRpc3BsYXkgd2l0aCBjb3B5XG5cdFx0Y29uc3QgdXVpZENvbnRhaW5lciA9IG1ldGFSb3cuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC11dWlkXCIgfSk7XG5cdFx0Y29uc3QgdXVpZFRleHQgPSB1dWlkQ29udGFpbmVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiB0aGlzLmN1cnJlbnRXb3JsZC5pZC5zdWJzdHJpbmcoMCwgOCkgKyBcIi4uLlwiIH0pO1xuXHRcdFxuXHRcdGNvbnN0IGNvcHlVdWlkQnV0dG9uID0gdXVpZENvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWNvcHktdXVpZC1idG5cIixcblx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiQ29weSBVVUlEXCIgfVxuXHRcdH0pO1xuXHRcdHNldEljb24oY29weVV1aWRCdXR0b24sIFwiY29weVwiKTtcblx0XHRjb3B5VXVpZEJ1dHRvbi5vbmNsaWNrID0gKGUpID0+IHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRpZiAoIXRoaXMuY3VycmVudFdvcmxkKSByZXR1cm47XG5cdFx0XHRuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0aGlzLmN1cnJlbnRXb3JsZC5pZCkudGhlbigoKSA9PiB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJVVUlEIGNvcGllZCB0byBjbGlwYm9hcmRcIik7XG5cdFx0XHR9KS5jYXRjaCgoKSA9PiB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJGYWlsZWQgdG8gY29weSBVVUlEXCIsIDMwMDApO1xuXHRcdFx0fSk7XG5cdFx0fTtcblx0fVxuXG5cdHJlbmRlcldvcmxkVGFicygpIHtcblx0XHRpZiAoIXRoaXMuY29udGVudEVsKSByZXR1cm47XG5cblx0XHQvLyBSZW1vdmUgZXhpc3Rpbmcgc2lkZWJhciBpZiBhbnlcblx0XHRjb25zdCBleGlzdGluZ1NpZGViYXIgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKFwiLnN0b3J5LWVuZ2luZS13b3JsZC1zaWRlYmFyXCIpO1xuXHRcdGlmIChleGlzdGluZ1NpZGViYXIpIHtcblx0XHRcdGV4aXN0aW5nU2lkZWJhci5yZW1vdmUoKTtcblx0XHR9XG5cblx0XHQvLyBDcmVhdGUgdmVydGljYWwgc2lkZWJhciBjb250YWluZXJcblx0XHRjb25zdCBzaWRlYmFyUG9zaXRpb24gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaWRlYmFyUG9zaXRpb24gfHwgXCJsZWZ0XCI7XG5cdFx0Y29uc3Qgc2lkZWJhckNvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IFxuXHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLXdvcmxkLXNpZGViYXIgc3RvcnktZW5naW5lLXdvcmxkLXNpZGViYXItJHtzaWRlYmFyUG9zaXRpb259YCBcblx0XHR9KTtcblxuXHRcdC8vIEFsbCB0YWJzIHdpdGggaWNvbnNcblx0XHRjb25zdCBhbGxUYWJzOiB7IFxuXHRcdFx0a2V5OiBcImNoYXJhY3RlcnNcIiB8IFwidHJhaXRzXCIgfCBcImFyY2hldHlwZXNcIiB8IFwiZXZlbnRzXCIgfCBcImxvcmVcIiB8IFwibG9jYXRpb25zXCIgfCBcImZhY3Rpb25zXCIgfCBcImFydGlmYWN0c1wiOyBcblx0XHRcdGxhYmVsOiBzdHJpbmc7XG5cdFx0XHRpY29uOiBzdHJpbmc7XG5cdFx0fVtdID0gW1xuXHRcdFx0eyBrZXk6IFwiY2hhcmFjdGVyc1wiLCBsYWJlbDogXCJDaGFyYWN0ZXJzXCIsIGljb246IFwidXNlclwiIH0sXG5cdFx0XHR7IGtleTogXCJsb2NhdGlvbnNcIiwgbGFiZWw6IFwiTG9jYXRpb25zXCIsIGljb246IFwibWFwLXBpblwiIH0sXG5cdFx0XHR7IGtleTogXCJmYWN0aW9uc1wiLCBsYWJlbDogXCJGYWN0aW9uc1wiLCBpY29uOiBcInVzZXJzXCIgfSxcblx0XHRcdHsga2V5OiBcImFydGlmYWN0c1wiLCBsYWJlbDogXCJBcnRpZmFjdHNcIiwgaWNvbjogXCJnZW1cIiB9LFxuXHRcdFx0eyBrZXk6IFwidHJhaXRzXCIsIGxhYmVsOiBcIlRyYWl0c1wiLCBpY29uOiBcInN0YXJcIiB9LFxuXHRcdFx0eyBrZXk6IFwiYXJjaGV0eXBlc1wiLCBsYWJlbDogXCJBcmNoZXR5cGVzXCIsIGljb246IFwic2hhcGVzXCIgfSxcblx0XHRcdHsga2V5OiBcImV2ZW50c1wiLCBsYWJlbDogXCJFdmVudHNcIiwgaWNvbjogXCJjYWxlbmRhclwiIH0sXG5cdFx0XHR7IGtleTogXCJsb3JlXCIsIGxhYmVsOiBcIkxvcmVcIiwgaWNvbjogXCJib29rLW9wZW5cIiB9LFxuXHRcdF07XG5cblx0XHRmb3IgKGNvbnN0IHRhYiBvZiBhbGxUYWJzKSB7XG5cdFx0XHRjb25zdCB0YWJCdXR0b24gPSBzaWRlYmFyQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLXNpZGViYXItdGFiICR7dGhpcy53b3JsZFRhYiA9PT0gdGFiLmtleSA/IFwiaXMtYWN0aXZlXCIgOiBcIlwifWAsXG5cdFx0XHRcdGF0dHI6IHtcblx0XHRcdFx0XHRcImFyaWEtbGFiZWxcIjogdGFiLmxhYmVsLFxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0Ly8gQWRkIGljb25cblx0XHRcdHNldEljb24odGFiQnV0dG9uLCB0YWIuaWNvbik7XG5cdFx0XHRcblx0XHRcdHRhYkJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLndvcmxkVGFiID0gdGFiLmtleTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYnMoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyV29ybGRUYWJDb250ZW50KCkge1xuXHRcdGlmICghdGhpcy5jb250ZW50RWwpIHJldHVybjtcblxuXHRcdC8vIFJlbW92ZSBleGlzdGluZyBjb250ZW50XG5cdFx0Y29uc3QgZXhpc3RpbmdDb250ZW50ID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcihcIi5zdG9yeS1lbmdpbmUtd29ybGQtdGFiLWNvbnRlbnRcIik7XG5cdFx0aWYgKGV4aXN0aW5nQ29udGVudCkge1xuXHRcdFx0ZXhpc3RpbmdDb250ZW50LnJlbW92ZSgpO1xuXHRcdH1cblxuXHRcdC8vIEdldCBzaWRlYmFyIHBvc2l0aW9uIGZvciBwcm9wZXIgY29udGVudCBwbGFjZW1lbnRcblx0XHRjb25zdCBzaWRlYmFyUG9zaXRpb24gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaWRlYmFyUG9zaXRpb24gfHwgXCJsZWZ0XCI7XG5cdFx0Y29uc3QgY29udGVudENvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IFxuXHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLXdvcmxkLXRhYi1jb250ZW50IHN0b3J5LWVuZ2luZS1jb250ZW50LXNpZGViYXItJHtzaWRlYmFyUG9zaXRpb259YCBcblx0XHR9KTtcblxuXHRcdGlmICh0aGlzLmxvYWRpbmdXb3JsZERhdGEpIHtcblx0XHRcdC8vIE1vZGVybiBza2VsZXRvbiBsb2FkaW5nXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuXHRcdFx0XHRjb250ZW50Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtc2tlbGV0b24gc3RvcnktZW5naW5lLXNrZWxldG9uLWNhcmRcIiB9KTtcblx0XHRcdH1cblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRzd2l0Y2ggKHRoaXMud29ybGRUYWIpIHtcblx0XHRcdGNhc2UgXCJjaGFyYWN0ZXJzXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyQ2hhcmFjdGVyc1RhYihjb250ZW50Q29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwidHJhaXRzXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyVHJhaXRzVGFiKGNvbnRlbnRDb250YWluZXIpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJhcmNoZXR5cGVzXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyQXJjaGV0eXBlc1RhYihjb250ZW50Q29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiZXZlbnRzXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyRXZlbnRzVGFiKGNvbnRlbnRDb250YWluZXIpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJsb3JlXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyTG9yZVRhYihjb250ZW50Q29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwibG9jYXRpb25zXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyTG9jYXRpb25zVGFiKGNvbnRlbnRDb250YWluZXIpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJmYWN0aW9uc1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlckZhY3Rpb25zVGFiKGNvbnRlbnRDb250YWluZXIpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJhcnRpZmFjdHNcIjpcblx0XHRcdFx0dGhpcy5yZW5kZXJBcnRpZmFjdHNUYWIoY29udGVudENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblxuXHRcdC8vIEFjdGlvbnMgYmFyXG5cdFx0dGhpcy5yZW5kZXJXb3JsZEFjdGlvbnNCYXIoY29udGVudENvbnRhaW5lcik7XG5cdH1cblxuXHRyZW5kZXJXb3JsZEFjdGlvbnNCYXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnN0IGFjdGlvbnNCYXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1hY3Rpb25zLWJhclwiIH0pO1xuXHRcdFxuXHRcdGxldCBjcmVhdGVCdXR0b25UZXh0ID0gXCJDcmVhdGUgQ2hhcmFjdGVyXCI7XG5cdFx0bGV0IGNyZWF0ZUJ1dHRvbkFjdGlvbiA9ICgpID0+IHtcblx0XHRcdHRoaXMuc2hvd0NyZWF0ZUNoYXJhY3Rlck1vZGFsKCk7XG5cdFx0fTtcblxuXHRcdHN3aXRjaCAodGhpcy53b3JsZFRhYikge1xuXHRcdFx0Y2FzZSBcInRyYWl0c1wiOlxuXHRcdFx0XHRjcmVhdGVCdXR0b25UZXh0ID0gXCJDcmVhdGUgVHJhaXRcIjtcblx0XHRcdFx0Y3JlYXRlQnV0dG9uQWN0aW9uID0gKCkgPT4gdGhpcy5zaG93Q3JlYXRlVHJhaXRNb2RhbCgpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJhcmNoZXR5cGVzXCI6XG5cdFx0XHRcdGNyZWF0ZUJ1dHRvblRleHQgPSBcIkNyZWF0ZSBBcmNoZXR5cGVcIjtcblx0XHRcdFx0Y3JlYXRlQnV0dG9uQWN0aW9uID0gKCkgPT4gdGhpcy5zaG93Q3JlYXRlQXJjaGV0eXBlTW9kYWwoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiZXZlbnRzXCI6XG5cdFx0XHRcdGNyZWF0ZUJ1dHRvblRleHQgPSBcIkNyZWF0ZSBFdmVudFwiO1xuXHRcdFx0XHRjcmVhdGVCdXR0b25BY3Rpb24gPSAoKSA9PiB0aGlzLnNob3dDcmVhdGVFdmVudE1vZGFsKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImxvcmVcIjpcblx0XHRcdFx0Y3JlYXRlQnV0dG9uVGV4dCA9IFwiQ3JlYXRlIExvcmVcIjtcblx0XHRcdFx0Y3JlYXRlQnV0dG9uQWN0aW9uID0gKCkgPT4gdGhpcy5zaG93Q3JlYXRlTG9yZU1vZGFsKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImxvY2F0aW9uc1wiOlxuXHRcdFx0XHRjcmVhdGVCdXR0b25UZXh0ID0gXCJDcmVhdGUgTG9jYXRpb25cIjtcblx0XHRcdFx0Y3JlYXRlQnV0dG9uQWN0aW9uID0gKCkgPT4gdGhpcy5zaG93Q3JlYXRlTG9jYXRpb25Nb2RhbCgpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJmYWN0aW9uc1wiOlxuXHRcdFx0XHRjcmVhdGVCdXR0b25UZXh0ID0gXCJDcmVhdGUgRmFjdGlvblwiO1xuXHRcdFx0XHRjcmVhdGVCdXR0b25BY3Rpb24gPSAoKSA9PiB0aGlzLnNob3dDcmVhdGVGYWN0aW9uTW9kYWwoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiYXJ0aWZhY3RzXCI6XG5cdFx0XHRcdGNyZWF0ZUJ1dHRvblRleHQgPSBcIkNyZWF0ZSBBcnRpZmFjdFwiO1xuXHRcdFx0XHRjcmVhdGVCdXR0b25BY3Rpb24gPSAoKSA9PiB0aGlzLnNob3dDcmVhdGVBcnRpZmFjdE1vZGFsKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblxuXHRcdGNvbnN0IGNyZWF0ZUJ1dHRvbiA9IGFjdGlvbnNCYXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogY3JlYXRlQnV0dG9uVGV4dCxcblx0XHRcdGNsczogXCJtb2QtY3RhIHN0b3J5LWVuZ2luZS1jcmVhdGUtYnRuXCIsXG5cdFx0fSk7XG5cdFx0Y3JlYXRlQnV0dG9uLm9uY2xpY2sgPSBjcmVhdGVCdXR0b25BY3Rpb247XG5cdH1cblxuXHRyZW5kZXJDaGFyYWN0ZXJzVGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRpZiAodGhpcy5jaGFyYWN0ZXJzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dGhpcy5yZW5kZXJFbXB0eUNhcmQoY29udGFpbmVyLCB7XG5cdFx0XHRcdGljb246IFwidXNlclwiLFxuXHRcdFx0XHR0aXRsZTogXCJObyBjaGFyYWN0ZXJzIGZvdW5kXCIsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkNyZWF0ZSB5b3VyIGZpcnN0IGNoYXJhY3RlciB0byBzdGFydCBidWlsZGluZyB0aGlzIHdvcmxkLlwiLFxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gTW9kZXJuIGNhcmQtYmFzZWQgbGF5b3V0XG5cdFx0Zm9yIChjb25zdCBjaGFyYWN0ZXIgb2YgdGhpcy5jaGFyYWN0ZXJzKSB7XG5cdFx0XHRjb25zdCBjYXJkID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWNhcmRcIiB9KTtcblx0XHRcdGNhcmQuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG5cdFx0XHRcblx0XHRcdC8vIE1ha2UgZW50aXJlIGNhcmQgY2xpY2thYmxlXG5cdFx0XHRjYXJkLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuc2hvd0NoYXJhY3RlckRldGFpbHMoY2hhcmFjdGVyKTtcblx0XHRcdH07XG5cdFx0XHRcblx0XHRcdC8vIENhcmQgaGVhZGVyIHdpdGggdGl0bGUgYW5kIGFjdGlvbnNcblx0XHRcdGNvbnN0IGNhcmRIZWFkZXIgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWNhcmQtaGVhZGVyXCIgfSk7XG5cdFx0XHRcblx0XHRcdGNvbnN0IGNhcmRUaXRsZSA9IGNhcmRIZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktY2FyZC10aXRsZVwiIH0pO1xuXHRcdFx0Y29uc3QgbmFtZUVsID0gY2FyZFRpdGxlLmNyZWF0ZUVsKFwiaDNcIiwgeyBcblx0XHRcdFx0dGV4dDogY2hhcmFjdGVyLm5hbWUsXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LW5hbWVcIlxuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdGlmIChjaGFyYWN0ZXIuYXJjaGV0eXBlX2lkKSB7XG5cdFx0XHRcdGNvbnN0IGFyY2hldHlwZSA9IHRoaXMuYXJjaGV0eXBlcy5maW5kKGEgPT4gYS5pZCA9PT0gY2hhcmFjdGVyLmFyY2hldHlwZV9pZCk7XG5cdFx0XHRcdGlmIChhcmNoZXR5cGUpIHtcblx0XHRcdFx0XHRjYXJkVGl0bGUuY3JlYXRlRWwoXCJwXCIsIHsgXG5cdFx0XHRcdFx0XHR0ZXh0OiBhcmNoZXR5cGUubmFtZSxcblx0XHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LXN1YnRpdGxlXCJcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBDYXJkIGFjdGlvbnMgKGhvdmVyIHZpc2libGUpXG5cdFx0XHRjb25zdCBjYXJkQWN0aW9ucyA9IGNhcmRIZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktY2FyZC1hY3Rpb25zXCIgfSk7XG5cdFx0XHRcblx0XHRcdGNvbnN0IHJlbGF0aW9uc2hpcEJ0biA9IGNhcmRBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkFkZCBSZWxhdGlvbnNoaXBcIiB9XG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24ocmVsYXRpb25zaGlwQnRuLCBcInVzZXJzXCIpO1xuXHRcdFx0cmVsYXRpb25zaGlwQnRuLm9uY2xpY2sgPSAoZSkgPT4ge1xuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHR0aGlzLnNob3dBZGRDaGFyYWN0ZXJSZWxhdGlvbnNoaXBNb2RhbChjaGFyYWN0ZXIpO1xuXHRcdFx0fTtcblx0XHRcdFxuXHRcdFx0Y29uc3QgZWRpdEJ0biA9IGNhcmRBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkVkaXRcIiB9XG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24oZWRpdEJ0biwgXCJwZW5jaWxcIik7XG5cdFx0XHRlZGl0QnRuLm9uY2xpY2sgPSAoZSkgPT4ge1xuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHR0aGlzLnNob3dFZGl0Q2hhcmFjdGVyTW9kYWwoY2hhcmFjdGVyKTtcblx0XHRcdH07XG5cdFx0XHRcblx0XHRcdGNvbnN0IGRlbGV0ZUJ0biA9IGNhcmRBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkRlbGV0ZVwiIH1cblx0XHRcdH0pO1xuXHRcdFx0c2V0SWNvbihkZWxldGVCdG4sIFwidHJhc2hcIik7XG5cdFx0XHRkZWxldGVCdG4ub25jbGljayA9IGFzeW5jIChlKSA9PiB7XG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdGlmIChjb25maXJtKGBEZWxldGUgY2hhcmFjdGVyIFwiJHtjaGFyYWN0ZXIubmFtZX1cIj9gKSkge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZGVsZXRlQ2hhcmFjdGVyKGNoYXJhY3Rlci5pZCk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQ2hhcmFjdGVyIGRlbGV0ZWRcIik7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRcblx0XHRcdC8vIENhcmQgY29udGVudFxuXHRcdFx0Y29uc3QgY2FyZENvbnRlbnQgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWNhcmQtY29udGVudFwiIH0pO1xuXHRcdFx0XG5cdFx0XHRpZiAoY2hhcmFjdGVyLmRlc2NyaXB0aW9uKSB7XG5cdFx0XHRcdGNhcmRDb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IFxuXHRcdFx0XHRcdHRleHQ6IGNoYXJhY3Rlci5kZXNjcmlwdGlvbixcblx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1kZXNjcmlwdGlvblwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJlbmRlckxvY2F0aW9uc1RhYihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0aWYgKHRoaXMubG9jYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dGhpcy5yZW5kZXJFbXB0eUNhcmQoY29udGFpbmVyLCB7XG5cdFx0XHRcdGljb246IFwibWFwLXBpblwiLFxuXHRcdFx0XHR0aXRsZTogXCJObyBsb2NhdGlvbnMgZm91bmRcIixcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQ3JlYXRlIHlvdXIgZmlyc3QgbG9jYXRpb24hXCIsXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBHcm91cCBieSBoaWVyYXJjaHkgbGV2ZWxcblx0XHRjb25zdCByb290TG9jYXRpb25zID0gdGhpcy5sb2NhdGlvbnMuZmlsdGVyKGwgPT4gIWwucGFyZW50X2lkKTtcblx0XHRjb25zdCBsaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbGlzdFwiIH0pO1xuXHRcdFxuXHRcdGZvciAoY29uc3QgbG9jYXRpb24gb2Ygcm9vdExvY2F0aW9ucy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0dGhpcy5yZW5kZXJMb2NhdGlvbkl0ZW0obGlzdCwgbG9jYXRpb24sIDApO1xuXHRcdH1cblx0fVxuXG5cdHJlbmRlckxvY2F0aW9uSXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCBsb2NhdGlvbjogTG9jYXRpb24sIGxldmVsOiBudW1iZXIpIHtcblx0XHRjb25zdCBpdGVtID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbVwiIH0pO1xuXHRcdGl0ZW0uc3R5bGUubWFyZ2luTGVmdCA9IGAke2xldmVsICogMX1yZW1gO1xuXHRcdFxuXHRcdGNvbnN0IHRpdGxlUm93ID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXRpdGxlXCIgfSk7XG5cdFx0dGl0bGVSb3cudGV4dENvbnRlbnQgPSBsb2NhdGlvbi5uYW1lO1xuXHRcdGlmIChsb2NhdGlvbi50eXBlKSB7XG5cdFx0XHRjb25zdCB0eXBlQmFkZ2UgPSB0aXRsZVJvdy5jcmVhdGVTcGFuKHsgY2xzOiBcInN0b3J5LWVuZ2luZS1iYWRnZVwiIH0pO1xuXHRcdFx0dHlwZUJhZGdlLnRleHRDb250ZW50ID0gbG9jYXRpb24udHlwZTtcblx0XHR9XG5cdFx0XG5cdFx0Y29uc3QgbWV0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIgfSk7XG5cdFx0aWYgKGxvY2F0aW9uLmRlc2NyaXB0aW9uKSB7XG5cdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGxvY2F0aW9uLmRlc2NyaXB0aW9uLnN1YnN0cmluZygwLCA1MCkgKyAobG9jYXRpb24uZGVzY3JpcHRpb24ubGVuZ3RoID4gNTAgPyBcIi4uLlwiIDogXCJcIikgfSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgYWN0aW9ucyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtLWFjdGlvbnNcIiB9KTtcblx0XHRjb25zdCBlZGl0QnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkVkaXQgbG9jYXRpb25cIiwgdGl0bGU6IFwiRWRpdCBsb2NhdGlvblwiIH1cblx0XHR9KTtcblx0XHRzZXRJY29uKGVkaXRCdG4sIFwicGVuY2lsXCIpO1xuXHRcdGVkaXRCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdHRoaXMuc2hvd0VkaXRMb2NhdGlvbk1vZGFsKGxvY2F0aW9uKTtcblx0XHR9O1xuXG5cdFx0Y29uc3QgZGVsZXRlQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkRlbGV0ZSBsb2NhdGlvblwiLCB0aXRsZTogXCJEZWxldGUgbG9jYXRpb25cIiB9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihkZWxldGVCdG4sIFwidHJhc2hcIik7XG5cdFx0ZGVsZXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoY29uZmlybShgRGVsZXRlIGxvY2F0aW9uIFwiJHtsb2NhdGlvbi5uYW1lfVwiP2ApKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmRlbGV0ZUxvY2F0aW9uKGxvY2F0aW9uLmlkKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJMb2NhdGlvbiBkZWxldGVkXCIpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvLyBSZW5kZXIgY2hpbGRyZW5cblx0XHRjb25zdCBjaGlsZHJlbiA9IHRoaXMubG9jYXRpb25zLmZpbHRlcihsID0+IGwucGFyZW50X2lkID09PSBsb2NhdGlvbi5pZCk7XG5cdFx0Zm9yIChjb25zdCBjaGlsZCBvZiBjaGlsZHJlbi5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0dGhpcy5yZW5kZXJMb2NhdGlvbkl0ZW0oY29udGFpbmVyLCBjaGlsZCwgbGV2ZWwgKyAxKTtcblx0XHR9XG5cdH1cblxuXHRyZW5kZXJBcnRpZmFjdHNUYWIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGlmICh0aGlzLmFydGlmYWN0cy5sZW5ndGggPT09IDApIHtcblx0XHRcdHRoaXMucmVuZGVyRW1wdHlDYXJkKGNvbnRhaW5lciwge1xuXHRcdFx0XHRpY29uOiBcImdlbVwiLFxuXHRcdFx0XHR0aXRsZTogXCJObyBhcnRpZmFjdHMgZm91bmRcIixcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQ3JlYXRlIHlvdXIgZmlyc3QgYXJ0aWZhY3QhXCIsXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBsaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbGlzdFwiIH0pO1xuXHRcdGZvciAoY29uc3QgYXJ0aWZhY3Qgb2YgdGhpcy5hcnRpZmFjdHMpIHtcblx0XHRcdGNvbnN0IGl0ZW0gPSBsaXN0LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbVwiIH0pO1xuXHRcdFx0XG5cdFx0XHRjb25zdCB0aXRsZVJvdyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiIH0pO1xuXHRcdFx0dGl0bGVSb3cudGV4dENvbnRlbnQgPSBhcnRpZmFjdC5uYW1lO1xuXHRcdFx0aWYgKGFydGlmYWN0LnJhcml0eSkge1xuXHRcdFx0XHRjb25zdCByYXJpdHlCYWRnZSA9IHRpdGxlUm93LmNyZWF0ZVNwYW4oeyBjbHM6IGBzdG9yeS1lbmdpbmUtYmFkZ2Ugc3RvcnktZW5naW5lLXJhcml0eS0ke2FydGlmYWN0LnJhcml0eS50b0xvd2VyQ2FzZSgpfWAgfSk7XG5cdFx0XHRcdHJhcml0eUJhZGdlLnRleHRDb250ZW50ID0gYXJ0aWZhY3QucmFyaXR5O1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRjb25zdCBtZXRhID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRcdGlmIChhcnRpZmFjdC5kZXNjcmlwdGlvbikge1xuXHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGFydGlmYWN0LmRlc2NyaXB0aW9uLnN1YnN0cmluZygwLCA1MCkgKyAoYXJ0aWZhY3QuZGVzY3JpcHRpb24ubGVuZ3RoID4gNTAgPyBcIi4uLlwiIDogXCJcIikgfSk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbS1hY3Rpb25zXCIgfSk7XG5cdFx0XHRjb25zdCBhcnRpZmFjdEVkaXRCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkVkaXQgYXJ0aWZhY3RcIiwgdGl0bGU6IFwiRWRpdCBhcnRpZmFjdFwiIH1cblx0XHRcdH0pO1xuXHRcdFx0c2V0SWNvbihhcnRpZmFjdEVkaXRCdG4sIFwicGVuY2lsXCIpO1xuXHRcdFx0YXJ0aWZhY3RFZGl0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuc2hvd0VkaXRBcnRpZmFjdE1vZGFsKGFydGlmYWN0KTtcblx0XHRcdH07XG5cblx0XHRcdGNvbnN0IGFydGlmYWN0RGVsZXRlQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJEZWxldGUgYXJ0aWZhY3RcIiwgdGl0bGU6IFwiRGVsZXRlIGFydGlmYWN0XCIgfVxuXHRcdFx0fSk7XG5cdFx0XHRzZXRJY29uKGFydGlmYWN0RGVsZXRlQnRuLCBcInRyYXNoXCIpO1xuXHRcdFx0YXJ0aWZhY3REZWxldGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0aWYgKGNvbmZpcm0oYERlbGV0ZSBhcnRpZmFjdCBcIiR7YXJ0aWZhY3QubmFtZX1cIj9gKSkge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZGVsZXRlQXJ0aWZhY3QoYXJ0aWZhY3QuaWQpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkFydGlmYWN0IGRlbGV0ZWRcIik7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyRXZlbnRzVGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHQvLyA9PT0gU0VDQU8gMTogVElNRSBDT05GSUcgPT09XG5cdFx0Y29uc3QgdGltZUNvbmZpZ1NlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aW1lLWNvbmZpZy1zZWN0aW9uXCIgfSk7XG5cdFx0XG5cdFx0aWYgKHRoaXMuY3VycmVudFdvcmxkPy50aW1lX2NvbmZpZykge1xuXHRcdFx0Ly8gTW9zdHJhciBjb25maWd1cmFjYW8gYXR1YWxcblx0XHRcdHRoaXMucmVuZGVyVGltZUNvbmZpZ0Rpc3BsYXkodGltZUNvbmZpZ1NlY3Rpb24sIHRoaXMuY3VycmVudFdvcmxkLnRpbWVfY29uZmlnKTtcblx0XHRcdFxuXHRcdFx0Ly8gQm90YW8gRWRpdFxuXHRcdFx0Y29uc3QgZWRpdEJ0biA9IHRpbWVDb25maWdTZWN0aW9uLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgXG5cdFx0XHRcdHRleHQ6IFwiRWRpdCBUaW1lIENvbmZpZ1wiLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWJ0bi1zZWNvbmRhcnlcIlxuXHRcdFx0fSk7XG5cdFx0XHRlZGl0QnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNob3dUaW1lQ29uZmlnTW9kYWwodGhpcy5jdXJyZW50V29ybGQhLnRpbWVfY29uZmlnISk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIE1vc3RyYXIgYm90YW8gcGFyYSBhZGljaW9uYXJcblx0XHRcdGNvbnN0IGFkZEJ0biA9IHRpbWVDb25maWdTZWN0aW9uLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgXG5cdFx0XHRcdHRleHQ6IFwiQWRkIFRpbWUgQ29uZmlndXJhdGlvblwiLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWJ0bi1wcmltYXJ5XCJcblx0XHRcdH0pO1xuXHRcdFx0YWRkQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNob3dUaW1lQ29uZmlnTW9kYWwobnVsbCk7XG5cdFx0fVxuXHRcdFxuXHRcdC8vID09PSBTRUNBTyAyOiBCT1RBTyBWRVIgVElNRUxJTkUgPT09XG5cdFx0Y29uc3QgdGltZWxpbmVTZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGltZWxpbmUtc2VjdGlvblwiIH0pO1xuXHRcdGNvbnN0IHRpbWVsaW5lQnRuID0gdGltZWxpbmVTZWN0aW9uLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiVmlldyBUaW1lbGluZVwiLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1idG4tc2Vjb25kYXJ5XCJcblx0XHR9KTtcblx0XHR0aW1lbGluZUJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zaG93VGltZWxpbmVNb2RhbCgpO1xuXHRcdFxuXHRcdC8vID09PSBTRUNBTyAzOiBFUE9DSCBFVkVOVCAoWWVhciBaZXJvKSA9PT1cblx0XHRjb25zdCBlcG9jaFNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1lcG9jaC1zZWN0aW9uXCIgfSk7XG5cdFx0ZXBvY2hTZWN0aW9uLmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIlx1MjNGMCBFcG9jaCBFdmVudCAoWWVhciBaZXJvKVwiLCBjbHM6IFwic3RvcnktZW5naW5lLXNlY3Rpb24tdGl0bGVcIiB9KTtcblx0XHRcblx0XHRjb25zdCBlcG9jaEV2ZW50ID0gdGhpcy5ldmVudHMuZmluZChlID0+IGUuaXNfZXBvY2ggJiYgZS50aW1lbGluZV9wb3NpdGlvbiA9PT0gMCk7XG5cdFx0XG5cdFx0aWYgKGVwb2NoRXZlbnQpIHtcblx0XHRcdC8vIEVwb2NoIGV2ZW50IGV4aXN0cyAtIHNob3cgaXQgd2l0aCBlZGl0IG9wdGlvblxuXHRcdFx0Y29uc3QgZXBvY2hJdGVtID0gZXBvY2hTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbSBzdG9yeS1lbmdpbmUtZXBvY2gtaXRlbVwiIH0pO1xuXHRcdFx0XG5cdFx0XHRjb25zdCBlcG9jaFRpdGxlID0gZXBvY2hJdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIiB9KTtcblx0XHRcdGVwb2NoVGl0bGUuY3JlYXRlU3Bhbih7IHRleHQ6IGVwb2NoRXZlbnQubmFtZSB9KTtcblx0XHRcdGVwb2NoVGl0bGUuY3JlYXRlU3Bhbih7IGNsczogXCJzdG9yeS1lbmdpbmUtYmFkZ2Ugc3RvcnktZW5naW5lLWJhZGdlLWVwb2NoXCIsIHRleHQ6IFwiRVBPQ0hcIiB9KTtcblx0XHRcdFxuXHRcdFx0Y29uc3QgZXBvY2hNZXRhID0gZXBvY2hJdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbWV0YVwiIH0pO1xuXHRcdFx0ZXBvY2hNZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IFwiUG9zaXRpb246IDAgKFllYXIgWmVybylcIiB9KTtcblx0XHRcdGlmIChlcG9jaEV2ZW50LmRlc2NyaXB0aW9uKSB7XG5cdFx0XHRcdGVwb2NoTWV0YS5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBlcG9jaEV2ZW50LmRlc2NyaXB0aW9uLnN1YnN0cmluZygwLCA4MCkgKyAoZXBvY2hFdmVudC5kZXNjcmlwdGlvbi5sZW5ndGggPiA4MCA/IFwiLi4uXCIgOiBcIlwiKSB9KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Y29uc3QgZXBvY2hBY3Rpb25zID0gZXBvY2hJdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbS1hY3Rpb25zXCIgfSk7XG5cdFx0XHRjb25zdCBlcG9jaEVkaXRCdG4gPSBlcG9jaEFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiRWRpdCBlcG9jaCBldmVudFwiLCB0aXRsZTogXCJFZGl0IGVwb2NoIGV2ZW50XCIgfVxuXHRcdFx0fSk7XG5cdFx0XHRzZXRJY29uKGVwb2NoRWRpdEJ0biwgXCJwZW5jaWxcIik7XG5cdFx0XHRlcG9jaEVkaXRCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0dGhpcy5zaG93RWRpdEV2ZW50TW9kYWwoZXBvY2hFdmVudCk7XG5cdFx0XHR9O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBObyBlcG9jaCBldmVudCAtIHNob3cgY3JlYXRlIGJ1dHRvblxuXHRcdFx0Y29uc3QgY3JlYXRlRXBvY2hCdG4gPSBlcG9jaFNlY3Rpb24uY3JlYXRlRWwoXCJidXR0b25cIiwgeyBcblx0XHRcdFx0dGV4dDogXCJcdUQ4M0NcdURGMUYgQ3JlYXRlIEVwb2NoIEV2ZW50IChZZWFyIFplcm8pXCIsXG5cdFx0XHRcdGNsczogXCJtb2QtY3RhIHN0b3J5LWVuZ2luZS1jcmVhdGUtZXBvY2gtYnRuXCJcblx0XHRcdH0pO1xuXHRcdFx0Y3JlYXRlRXBvY2hCdG4ub25jbGljayA9ICgpID0+IHRoaXMuc2hvd0NyZWF0ZUVwb2NoRXZlbnRNb2RhbCgpO1xuXHRcdFx0XG5cdFx0XHRlcG9jaFNlY3Rpb24uY3JlYXRlRWwoXCJwXCIsIHsgXG5cdFx0XHRcdHRleHQ6IFwiVGhlIEVwb2NoIEV2ZW50IG1hcmtzIFllYXIgWmVybyAtIGFsbCBvdGhlciBldmVudHMgYXJlIGRhdGVkIHJlbGF0aXZlIHRvIHRoaXMgcG9pbnQuXCIsXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaGludFwiXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gPT09IFNFQ0FPIDQ6IExJU1RBIERFIEVWRU5UT1MgPT09XG5cdFx0Y29uc3QgZXZlbnRzU2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWV2ZW50cy1saXN0LXNlY3Rpb25cIiB9KTtcblx0XHRldmVudHNTZWN0aW9uLmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIlx1RDgzRFx1RENEQyBFdmVudHNcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWN0aW9uLXRpdGxlXCIgfSk7XG5cdFx0XG5cdFx0Ly8gRmlsdGVyIG91dCB0aGUgZXBvY2ggZXZlbnQgZnJvbSB0aGUgbGlzdFxuXHRcdGNvbnN0IHJlZ3VsYXJFdmVudHMgPSB0aGlzLmV2ZW50cy5maWx0ZXIoZSA9PiAhKGUuaXNfZXBvY2ggJiYgZS50aW1lbGluZV9wb3NpdGlvbiA9PT0gMCkpO1xuXHRcdFxuXHRcdGlmIChyZWd1bGFyRXZlbnRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dGhpcy5yZW5kZXJFbXB0eUNhcmQoZXZlbnRzU2VjdGlvbiwge1xuXHRcdFx0XHRpY29uOiBcImNhbGVuZGFyXCIsXG5cdFx0XHRcdHRpdGxlOiBcIk5vIGV2ZW50cyB5ZXRcIixcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQ3JlYXRlIHlvdXIgZmlyc3QgZXZlbnQhXCIsXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBsaXN0ID0gZXZlbnRzU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblx0XHRcblx0XHQvLyBTb3J0IGJ5IHRpbWVsaW5lX3Bvc2l0aW9uIChldmVudHMgY2xvc2VyIHRvIGVwb2NoIGZpcnN0KSwgdGhlbiBieSBpbXBvcnRhbmNlXG5cdFx0Y29uc3Qgc29ydGVkRXZlbnRzID0gcmVndWxhckV2ZW50cy5zb3J0KChhLCBiKSA9PiB7XG5cdFx0XHRjb25zdCBwb3NBID0gYS50aW1lbGluZV9wb3NpdGlvbiA/PyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcblx0XHRcdGNvbnN0IHBvc0IgPSBiLnRpbWVsaW5lX3Bvc2l0aW9uID8/IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xuXHRcdFx0aWYgKHBvc0EgIT09IHBvc0IpIHJldHVybiBwb3NBIC0gcG9zQjtcblx0XHRcdHJldHVybiBiLmltcG9ydGFuY2UgLSBhLmltcG9ydGFuY2U7XG5cdFx0fSk7XG5cdFx0XG5cdFx0Zm9yIChjb25zdCBldmVudCBvZiBzb3J0ZWRFdmVudHMpIHtcblx0XHRcdGNvbnN0IGl0ZW0gPSBsaXN0LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbVwiIH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBUaXRsZSByb3cgd2l0aCBuYW1lIGFuZCBiYWRnZXNcblx0XHRcdGNvbnN0IHRpdGxlUm93ID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXRpdGxlXCIgfSk7XG5cdFx0XHR0aXRsZVJvdy5jcmVhdGVTcGFuKHsgdGV4dDogZXZlbnQubmFtZSB9KTtcblx0XHRcdFxuXHRcdFx0Ly8gSW1wb3J0YW5jZSBiYWRnZVxuXHRcdFx0Y29uc3QgaW1wb3J0YW5jZUJhZGdlID0gdGl0bGVSb3cuY3JlYXRlU3Bhbih7IGNsczogXCJzdG9yeS1lbmdpbmUtYmFkZ2VcIiB9KTtcblx0XHRcdGltcG9ydGFuY2VCYWRnZS50ZXh0Q29udGVudCA9IGBcdTI2MDUke2V2ZW50LmltcG9ydGFuY2V9YDtcblx0XHRcdFxuXHRcdFx0Ly8gVHlwZSBiYWRnZVxuXHRcdFx0aWYgKGV2ZW50LnR5cGUpIHtcblx0XHRcdFx0dGl0bGVSb3cuY3JlYXRlU3Bhbih7IGNsczogXCJzdG9yeS1lbmdpbmUtYmFkZ2VcIiwgdGV4dDogZXZlbnQudHlwZSB9KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gRXBvY2ggYmFkZ2UgaWYgaXNfZXBvY2ggKGJ1dCBub3QgeWVhciB6ZXJvKVxuXHRcdFx0aWYgKGV2ZW50LmlzX2Vwb2NoKSB7XG5cdFx0XHRcdHRpdGxlUm93LmNyZWF0ZVNwYW4oeyBjbHM6IFwic3RvcnktZW5naW5lLWJhZGdlIHN0b3J5LWVuZ2luZS1iYWRnZS1lcG9jaFwiLCB0ZXh0OiBcIkVQT0NIXCIgfSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIE1ldGEgaW5mbyAtIGNsZWFyZXIgc3RydWN0dXJlXG5cdFx0XHRjb25zdCBtZXRhID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRcdFxuXHRcdFx0Ly8gVGltZWxpbmUgUG9zaXRpb24gKERhdGUgc2luY2UgWWVhciBaZXJvKVxuXHRcdFx0aWYgKGV2ZW50LnRpbWVsaW5lX3Bvc2l0aW9uICE9PSB1bmRlZmluZWQgJiYgZXZlbnQudGltZWxpbmVfcG9zaXRpb24gIT09IG51bGwpIHtcblx0XHRcdFx0Y29uc3QgcG9zVGV4dCA9IGV2ZW50LnRpbWVsaW5lX3Bvc2l0aW9uID49IDAgXG5cdFx0XHRcdFx0PyBgWWVhciAke2V2ZW50LnRpbWVsaW5lX3Bvc2l0aW9ufWAgXG5cdFx0XHRcdFx0OiBgJHtNYXRoLmFicyhldmVudC50aW1lbGluZV9wb3NpdGlvbil9IHllYXJzIGJlZm9yZSBZZWFyIFplcm9gO1xuXHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGBcdUQ4M0RcdURDQzUgJHtwb3NUZXh0fWAsIGNsczogXCJzdG9yeS1lbmdpbmUtZXZlbnQtcG9zaXRpb25cIiB9KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gUGFyZW50IEV2ZW50IHJlbGF0aW9uc2hpcFxuXHRcdFx0aWYgKGV2ZW50LnBhcmVudF9pZCkge1xuXHRcdFx0XHRjb25zdCBwYXJlbnRFdmVudCA9IHRoaXMuZXZlbnRzLmZpbmQoZSA9PiBlLmlkID09PSBldmVudC5wYXJlbnRfaWQpO1xuXHRcdFx0XHRpZiAocGFyZW50RXZlbnQpIHtcblx0XHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGBcdTIxQjMgUmVsYXRlZCB0bzogJHtwYXJlbnRFdmVudC5uYW1lfWAsIGNsczogXCJzdG9yeS1lbmdpbmUtZXZlbnQtcGFyZW50XCIgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gRGVzY3JpcHRpb24gcHJldmlld1xuXHRcdFx0aWYgKGV2ZW50LmRlc2NyaXB0aW9uKSB7XG5cdFx0XHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHsgXG5cdFx0XHRcdFx0dGV4dDogZXZlbnQuZGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDYwKSArIChldmVudC5kZXNjcmlwdGlvbi5sZW5ndGggPiA2MCA/IFwiLi4uXCIgOiBcIlwiKSxcblx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV2ZW50LWRlc2NyaXB0aW9uXCJcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFjdGlvbnNcblx0XHRcdGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbS1hY3Rpb25zXCIgfSk7XG5cdFx0XHRcblx0XHRcdC8vIExpbmsgdG8gRW50aXR5XG5cdFx0XHRjb25zdCBsaW5rQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJMaW5rIHRvIGVudGl0eVwiLCB0aXRsZTogXCJMaW5rIHRvIGVudGl0eVwiIH1cblx0XHRcdH0pO1xuXHRcdFx0c2V0SWNvbihsaW5rQnRuLCBcImxpbmtcIik7XG5cdFx0XHRsaW5rQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNob3dMaW5rRXZlbnRUb0VudGl0eU1vZGFsKGV2ZW50KTtcblx0XHRcdFxuXHRcdFx0Ly8gU2V0IFBhcmVudCBFdmVudFxuXHRcdFx0Y29uc3QgZXZlbnRMaW5rQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJTZXQgcGFyZW50IGV2ZW50XCIsIHRpdGxlOiBcIlNldCBwYXJlbnQgZXZlbnRcIiB9XG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24oZXZlbnRMaW5rQnRuLCBcImdpdC1icmFuY2hcIik7XG5cdFx0XHRldmVudExpbmtCdG4ub25jbGljayA9ICgpID0+IHRoaXMuc2hvd1NldEV2ZW50UGFyZW50TW9kYWwoZXZlbnQpO1xuXHRcdFx0XG5cdFx0XHRjb25zdCBldmVudEVkaXRCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkVkaXQgZXZlbnRcIiwgdGl0bGU6IFwiRWRpdCBldmVudFwiIH1cblx0XHRcdH0pO1xuXHRcdFx0c2V0SWNvbihldmVudEVkaXRCdG4sIFwicGVuY2lsXCIpO1xuXHRcdFx0ZXZlbnRFZGl0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuc2hvd0VkaXRFdmVudE1vZGFsKGV2ZW50KTtcblx0XHRcdH07XG5cdFx0XHRcblx0XHRcdGNvbnN0IGV2ZW50RGVsZXRlQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJEZWxldGUgZXZlbnRcIiwgdGl0bGU6IFwiRGVsZXRlIGV2ZW50XCIgfVxuXHRcdFx0fSk7XG5cdFx0XHRzZXRJY29uKGV2ZW50RGVsZXRlQnRuLCBcInRyYXNoXCIpO1xuXHRcdFx0ZXZlbnREZWxldGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0aWYgKGNvbmZpcm0oYERlbGV0ZSBldmVudCBcIiR7ZXZlbnQubmFtZX1cIj9gKSkge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZGVsZXRlRXZlbnQoZXZlbnQuaWQpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkV2ZW50IGRlbGV0ZWRcIik7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0c2hvd0NyZWF0ZUVwb2NoRXZlbnRNb2RhbCgpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFdvcmxkKSByZXR1cm47XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkNyZWF0ZSBFcG9jaCBFdmVudCAoWWVhciBaZXJvKVwiKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBuYW1lID0gXCJcIjtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSBcIlwiO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyBcblx0XHRcdHRleHQ6IFwiVGhlIEVwb2NoIEV2ZW50IGRlZmluZXMgWWVhciBaZXJvIGluIHlvdXIgd29ybGQncyB0aW1lbGluZS4gQWxsIG90aGVyIGV2ZW50cyB3aWxsIGJlIGRhdGVkIHJlbGF0aXZlIHRvIHRoaXMgbW9tZW50LlwiLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1tb2RhbC1oaW50XCJcblx0XHR9KTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRXZlbnQgTmFtZSAqXCIgfSk7XG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgXG5cdFx0XHR0eXBlOiBcInRleHRcIiwgXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsXG5cdFx0XHRwbGFjZWhvbGRlcjogXCJlLmcuLCBUaGUgR3JlYXQgQ2F0YWNseXNtLCBUaGUgRm91bmRpbmcsIFllYXIgb2YgdGhlIERyYWdvblwiXG5cdFx0fSk7XG5cdFx0bmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIsXG5cdFx0XHRwbGFjZWhvbGRlcjogXCJEZXNjcmliZSB3aGF0IGhhcHBlbmVkIGF0IHRoaXMgcGl2b3RhbCBtb21lbnQuLi5cIlxuXHRcdH0pO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBjcmVhdGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNyZWF0ZSBFcG9jaFwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdGNyZWF0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTmFtZSBpcyByZXF1aXJlZFwiKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUV2ZW50KHRoaXMuY3VycmVudFdvcmxkIS5pZCwge1xuXHRcdFx0XHRcdG5hbWU6IG5hbWUudHJpbSgpLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKCkgfHwgdW5kZWZpbmVkLFxuXHRcdFx0XHRcdHRpbWVsaW5lX3Bvc2l0aW9uOiAwLFxuXHRcdFx0XHRcdGlzX2Vwb2NoOiB0cnVlLFxuXHRcdFx0XHRcdGltcG9ydGFuY2U6IDEwLCAvLyBNYXggaW1wb3J0YW5jZSBmb3IgZXBvY2hcblx0XHRcdFx0XHR0eXBlOiBcIkVwb2NoXCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiRXBvY2ggZXZlbnQgY3JlYXRlZCFcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRcblx0XHRjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pO1xuXHRcdGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHJlbmRlclRyYWl0c1RhYihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0aWYgKHRoaXMudHJhaXRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dGhpcy5yZW5kZXJFbXB0eUNhcmQoY29udGFpbmVyLCB7XG5cdFx0XHRcdGljb246IFwic3RhclwiLFxuXHRcdFx0XHR0aXRsZTogXCJObyB0cmFpdHMgZm91bmRcIixcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQ3JlYXRlIHlvdXIgZmlyc3QgdHJhaXQhXCIsXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBHcm91cCBieSBjYXRlZ29yeVxuXHRcdGNvbnN0IHRyYWl0c0J5Q2F0ZWdvcnkgPSBuZXcgTWFwPHN0cmluZywgVHJhaXRbXT4oKTtcblx0XHRmb3IgKGNvbnN0IHRyYWl0IG9mIHRoaXMudHJhaXRzKSB7XG5cdFx0XHRjb25zdCBjYXRlZ29yeSA9IHRyYWl0LmNhdGVnb3J5IHx8IFwiVW5jYXRlZ29yaXplZFwiO1xuXHRcdFx0aWYgKCF0cmFpdHNCeUNhdGVnb3J5LmhhcyhjYXRlZ29yeSkpIHtcblx0XHRcdFx0dHJhaXRzQnlDYXRlZ29yeS5zZXQoY2F0ZWdvcnksIFtdKTtcblx0XHRcdH1cblx0XHRcdHRyYWl0c0J5Q2F0ZWdvcnkuZ2V0KGNhdGVnb3J5KSEucHVzaCh0cmFpdCk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblx0XHRmb3IgKGNvbnN0IFtjYXRlZ29yeSwgY2F0ZWdvcnlUcmFpdHNdIG9mIHRyYWl0c0J5Q2F0ZWdvcnkuZW50cmllcygpKSB7XG5cdFx0XHRjb25zdCBncm91cCA9IGxpc3QuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cFwiIH0pO1xuXHRcdFx0Y29uc3QgZ3JvdXBIZWFkZXIgPSBncm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwLWhlYWRlclwiIH0pO1xuXHRcdFx0Z3JvdXBIZWFkZXIuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IGNhdGVnb3J5IH0pO1xuXG5cdFx0XHRjb25zdCBncm91cEl0ZW1zID0gZ3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1pdGVtc1wiIH0pO1xuXHRcdFx0Zm9yIChjb25zdCB0cmFpdCBvZiBjYXRlZ29yeVRyYWl0cy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0XHRjb25zdCBpdGVtID0gZ3JvdXBJdGVtcy5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIiB9KTtcblx0XHRcdFx0aXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXRpdGxlXCIsIHRleHQ6IHRyYWl0Lm5hbWUgfSk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zdCBtZXRhID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRcdFx0aWYgKHRyYWl0LmRlc2NyaXB0aW9uKSB7XG5cdFx0XHRcdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiB0cmFpdC5kZXNjcmlwdGlvbi5zdWJzdHJpbmcoMCwgNTApICsgKHRyYWl0LmRlc2NyaXB0aW9uLmxlbmd0aCA+IDUwID8gXCIuLi5cIiA6IFwiXCIpIH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgYWN0aW9ucyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtLWFjdGlvbnNcIiB9KTtcblx0XHRcdFx0Y29uc3QgdHJhaXRFZGl0QnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiRWRpdCB0cmFpdFwiLCB0aXRsZTogXCJFZGl0IHRyYWl0XCIgfVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0c2V0SWNvbih0cmFpdEVkaXRCdG4sIFwicGVuY2lsXCIpO1xuXHRcdFx0XHR0cmFpdEVkaXRCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnNob3dFZGl0VHJhaXRNb2RhbCh0cmFpdCk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnN0IHRyYWl0RGVsZXRlQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiRGVsZXRlIHRyYWl0XCIsIHRpdGxlOiBcIkRlbGV0ZSB0cmFpdFwiIH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHNldEljb24odHJhaXREZWxldGVCdG4sIFwidHJhc2hcIik7XG5cdFx0XHRcdHRyYWl0RGVsZXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGNvbmZpcm0oYERlbGV0ZSB0cmFpdCBcIiR7dHJhaXQubmFtZX1cIj9gKSkge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmRlbGV0ZVRyYWl0KHRyYWl0LmlkKTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJUcmFpdCBkZWxldGVkXCIpO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZW5kZXJBcmNoZXR5cGVzVGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRpZiAodGhpcy5hcmNoZXR5cGVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dGhpcy5yZW5kZXJFbXB0eUNhcmQoY29udGFpbmVyLCB7XG5cdFx0XHRcdGljb246IFwic2hhcGVzXCIsXG5cdFx0XHRcdHRpdGxlOiBcIk5vIGFyY2hldHlwZXMgZm91bmRcIixcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQ3JlYXRlIHlvdXIgZmlyc3QgYXJjaGV0eXBlIVwiLFxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblx0XHRmb3IgKGNvbnN0IGFyY2hldHlwZSBvZiB0aGlzLmFyY2hldHlwZXMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdGNvbnN0IGl0ZW0gPSBsaXN0LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbVwiIH0pO1xuXHRcdFx0aXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXRpdGxlXCIsIHRleHQ6IGFyY2hldHlwZS5uYW1lIH0pO1xuXHRcdFx0XG5cdFx0XHRjb25zdCBtZXRhID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRcdGlmIChhcmNoZXR5cGUuZGVzY3JpcHRpb24pIHtcblx0XHRcdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBhcmNoZXR5cGUuZGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDUwKSArIChhcmNoZXR5cGUuZGVzY3JpcHRpb24ubGVuZ3RoID4gNTAgPyBcIi4uLlwiIDogXCJcIikgfSk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbS1hY3Rpb25zXCIgfSk7XG5cdFx0XHRjb25zdCB2aWV3VHJhaXRzQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJWaWV3IHRyYWl0c1wiLCB0aXRsZTogXCJWaWV3IHRyYWl0c1wiIH1cblx0XHRcdH0pO1xuXHRcdFx0c2V0SWNvbih2aWV3VHJhaXRzQnRuLCBcImxpc3RcIik7XG5cdFx0XHR2aWV3VHJhaXRzQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29uc3QgdHJhaXRzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldEFyY2hldHlwZVRyYWl0cyhhcmNoZXR5cGUuaWQpO1xuXHRcdFx0XHRcdHRoaXMuc2hvd0FyY2hldHlwZVRyYWl0c01vZGFsKGFyY2hldHlwZSwgdHJhaXRzKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRjb25zdCBhcmNoZXR5cGVFZGl0QnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJFZGl0IGFyY2hldHlwZVwiLCB0aXRsZTogXCJFZGl0IGFyY2hldHlwZVwiIH1cblx0XHRcdH0pO1xuXHRcdFx0c2V0SWNvbihhcmNoZXR5cGVFZGl0QnRuLCBcInBlbmNpbFwiKTtcblx0XHRcdGFyY2hldHlwZUVkaXRCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0dGhpcy5zaG93RWRpdEFyY2hldHlwZU1vZGFsKGFyY2hldHlwZSk7XG5cdFx0XHR9O1xuXHRcdFx0Y29uc3QgYXJjaGV0eXBlRGVsZXRlQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJEZWxldGUgYXJjaGV0eXBlXCIsIHRpdGxlOiBcIkRlbGV0ZSBhcmNoZXR5cGVcIiB9XG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24oYXJjaGV0eXBlRGVsZXRlQnRuLCBcInRyYXNoXCIpO1xuXHRcdFx0YXJjaGV0eXBlRGVsZXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGlmIChjb25maXJtKGBEZWxldGUgYXJjaGV0eXBlIFwiJHthcmNoZXR5cGUubmFtZX1cIj9gKSkge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZGVsZXRlQXJjaGV0eXBlKGFyY2hldHlwZS5pZCk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQXJjaGV0eXBlIGRlbGV0ZWRcIik7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyTG9yZVRhYihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0aWYgKHRoaXMubG9yZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHR0aGlzLnJlbmRlckVtcHR5Q2FyZChjb250YWluZXIsIHtcblx0XHRcdFx0aWNvbjogXCJib29rLW9wZW5cIixcblx0XHRcdFx0dGl0bGU6IFwiTm8gbG9yZSBmb3VuZFwiLFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJDcmVhdGUgeW91ciBmaXJzdCBsb3JlIVwiLFxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gR3JvdXAgYnkgaGllcmFyY2h5IGxldmVsXG5cdFx0Y29uc3Qgcm9vdExvcmVzID0gdGhpcy5sb3Jlcy5maWx0ZXIobCA9PiAhbC5wYXJlbnRfaWQpO1xuXHRcdGNvbnN0IGxpc3QgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1saXN0XCIgfSk7XG5cdFx0XG5cdFx0Zm9yIChjb25zdCBsb3JlIG9mIHJvb3RMb3Jlcy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0dGhpcy5yZW5kZXJMb3JlSXRlbShsaXN0LCBsb3JlLCAwKTtcblx0XHR9XG5cdH1cblxuXHRyZW5kZXJMb3JlSXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCBsb3JlOiBMb3JlLCBsZXZlbDogbnVtYmVyKSB7XG5cdFx0Y29uc3QgaXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIiB9KTtcblx0XHRpdGVtLnN0eWxlLm1hcmdpbkxlZnQgPSBgJHtsZXZlbCAqIDF9cmVtYDtcblx0XHRcblx0XHRjb25zdCB0aXRsZVJvdyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiIH0pO1xuXHRcdHRpdGxlUm93LnRleHRDb250ZW50ID0gbG9yZS5uYW1lO1xuXHRcdGlmIChsb3JlLmNhdGVnb3J5KSB7XG5cdFx0XHRjb25zdCBjYXRlZ29yeUJhZGdlID0gdGl0bGVSb3cuY3JlYXRlU3Bhbih7IGNsczogXCJzdG9yeS1lbmdpbmUtYmFkZ2VcIiB9KTtcblx0XHRcdGNhdGVnb3J5QmFkZ2UudGV4dENvbnRlbnQgPSBsb3JlLmNhdGVnb3J5O1xuXHRcdH1cblx0XHRcblx0XHRjb25zdCBtZXRhID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRpZiAobG9yZS5kZXNjcmlwdGlvbikge1xuXHRcdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBsb3JlLmRlc2NyaXB0aW9uLnN1YnN0cmluZygwLCA1MCkgKyAobG9yZS5kZXNjcmlwdGlvbi5sZW5ndGggPiA1MCA/IFwiLi4uXCIgOiBcIlwiKSB9KTtcblx0XHR9XG5cblx0XHRjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0tYWN0aW9uc1wiIH0pO1xuXHRcdC8vIExpbmsgdG8gRW50aXR5XG5cdFx0Y29uc3QgbGlua0J0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJMaW5rIHRvIGVudGl0eVwiLCB0aXRsZTogXCJMaW5rIHRvIGVudGl0eVwiIH1cblx0XHR9KTtcblx0XHRzZXRJY29uKGxpbmtCdG4sIFwibGlua1wiKTtcblx0XHRsaW5rQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNob3dBZGRMb3JlUmVmZXJlbmNlTW9kYWwobG9yZSk7XG5cdFx0Ly8gQ3JlYXRlIFN1Yi1Mb3JlXG5cdFx0Y29uc3Qgc3ViQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkNyZWF0ZSBzdWItbG9yZVwiLCB0aXRsZTogXCJDcmVhdGUgc3ViLWxvcmVcIiB9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihzdWJCdG4sIFwiZm9sZGVyLXBsdXNcIik7XG5cdFx0c3ViQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNob3dDcmVhdGVMb3JlTW9kYWwobG9yZS5pZCk7XG5cdFx0Y29uc3QgbG9yZUVkaXRCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiRWRpdCBsb3JlXCIsIHRpdGxlOiBcIkVkaXQgbG9yZVwiIH1cblx0XHR9KTtcblx0XHRzZXRJY29uKGxvcmVFZGl0QnRuLCBcInBlbmNpbFwiKTtcblx0XHRsb3JlRWRpdEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5zaG93RWRpdExvcmVNb2RhbChsb3JlKTtcblx0XHR9O1xuXHRcdGNvbnN0IGxvcmVEZWxldGVCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiRGVsZXRlIGxvcmVcIiwgdGl0bGU6IFwiRGVsZXRlIGxvcmVcIiB9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihsb3JlRGVsZXRlQnRuLCBcInRyYXNoXCIpO1xuXHRcdGxvcmVEZWxldGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmIChjb25maXJtKGBEZWxldGUgbG9yZSBcIiR7bG9yZS5uYW1lfVwiP2ApKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmRlbGV0ZUxvcmUobG9yZS5pZCk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiTG9yZSBkZWxldGVkXCIpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvLyBSZW5kZXIgY2hpbGRyZW5cblx0XHRjb25zdCBjaGlsZHJlbiA9IHRoaXMubG9yZXMuZmlsdGVyKGwgPT4gbC5wYXJlbnRfaWQgPT09IGxvcmUuaWQpO1xuXHRcdGZvciAoY29uc3QgY2hpbGQgb2YgY2hpbGRyZW4uc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdHRoaXMucmVuZGVyTG9yZUl0ZW0oY29udGFpbmVyLCBjaGlsZCwgbGV2ZWwgKyAxKTtcblx0XHR9XG5cdH1cblxuXHRyZW5kZXJGYWN0aW9uc1RhYihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0aWYgKHRoaXMuZmFjdGlvbnMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHR0aGlzLnJlbmRlckVtcHR5Q2FyZChjb250YWluZXIsIHtcblx0XHRcdFx0aWNvbjogXCJ1c2Vyc1wiLFxuXHRcdFx0XHR0aXRsZTogXCJObyBmYWN0aW9ucyBmb3VuZFwiLFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJDcmVhdGUgeW91ciBmaXJzdCBmYWN0aW9uIVwiLFxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gR3JvdXAgYnkgaGllcmFyY2h5IGxldmVsXG5cdFx0Y29uc3Qgcm9vdEZhY3Rpb25zID0gdGhpcy5mYWN0aW9ucy5maWx0ZXIoZiA9PiAhZi5wYXJlbnRfaWQpO1xuXHRcdGNvbnN0IGxpc3QgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1saXN0XCIgfSk7XG5cdFx0XG5cdFx0Zm9yIChjb25zdCBmYWN0aW9uIG9mIHJvb3RGYWN0aW9ucy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0dGhpcy5yZW5kZXJGYWN0aW9uSXRlbShsaXN0LCBmYWN0aW9uLCAwKTtcblx0XHR9XG5cdH1cblxuXHRyZW5kZXJGYWN0aW9uSXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCBmYWN0aW9uOiBGYWN0aW9uLCBsZXZlbDogbnVtYmVyKSB7XG5cdFx0Y29uc3QgaXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIiB9KTtcblx0XHRpdGVtLnN0eWxlLm1hcmdpbkxlZnQgPSBgJHtsZXZlbCAqIDF9cmVtYDtcblx0XHRcblx0XHRjb25zdCB0aXRsZVJvdyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiIH0pO1xuXHRcdHRpdGxlUm93LnRleHRDb250ZW50ID0gZmFjdGlvbi5uYW1lO1xuXHRcdGlmIChmYWN0aW9uLnR5cGUpIHtcblx0XHRcdGNvbnN0IHR5cGVCYWRnZSA9IHRpdGxlUm93LmNyZWF0ZVNwYW4oeyBjbHM6IFwic3RvcnktZW5naW5lLWJhZGdlXCIgfSk7XG5cdFx0XHR0eXBlQmFkZ2UudGV4dENvbnRlbnQgPSBmYWN0aW9uLnR5cGU7XG5cdFx0fVxuXHRcdFxuXHRcdGNvbnN0IG1ldGEgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbWV0YVwiIH0pO1xuXHRcdGlmIChmYWN0aW9uLmRlc2NyaXB0aW9uKSB7XG5cdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGZhY3Rpb24uZGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDUwKSArIChmYWN0aW9uLmRlc2NyaXB0aW9uLmxlbmd0aCA+IDUwID8gXCIuLi5cIiA6IFwiXCIpIH0pO1xuXHRcdH1cblxuXHRcdGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbS1hY3Rpb25zXCIgfSk7XG5cdFx0Ly8gTGluayB0byBFbnRpdHlcblx0XHRjb25zdCBsaW5rQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkxpbmsgdG8gZW50aXR5XCIsIHRpdGxlOiBcIkxpbmsgdG8gZW50aXR5XCIgfVxuXHRcdH0pO1xuXHRcdHNldEljb24obGlua0J0biwgXCJsaW5rXCIpO1xuXHRcdGxpbmtCdG4ub25jbGljayA9ICgpID0+IHRoaXMuc2hvd0FkZEZhY3Rpb25SZWZlcmVuY2VNb2RhbChmYWN0aW9uKTtcblx0XHQvLyBDcmVhdGUgU3ViLUZhY3Rpb25cblx0XHRjb25zdCBzdWJCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiQ3JlYXRlIHN1Yi1mYWN0aW9uXCIsIHRpdGxlOiBcIkNyZWF0ZSBzdWItZmFjdGlvblwiIH1cblx0XHR9KTtcblx0XHRzZXRJY29uKHN1YkJ0biwgXCJmb2xkZXItcGx1c1wiKTtcblx0XHRzdWJCdG4ub25jbGljayA9ICgpID0+IHRoaXMuc2hvd0NyZWF0ZUZhY3Rpb25Nb2RhbChmYWN0aW9uLmlkKTtcblx0XHRjb25zdCBmYWN0aW9uVmlld0J0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJWaWV3IGZhY3Rpb24gZGV0YWlsc1wiLCB0aXRsZTogXCJWaWV3IGZhY3Rpb24gZGV0YWlsc1wiIH1cblx0XHR9KTtcblx0XHRzZXRJY29uKGZhY3Rpb25WaWV3QnRuLCBcImV5ZVwiKTtcblx0XHRmYWN0aW9uVmlld0J0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5zaG93RmFjdGlvbkRldGFpbHNNb2RhbChmYWN0aW9uKTtcblx0XHR9O1xuXHRcdGNvbnN0IGZhY3Rpb25FZGl0QnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkVkaXQgZmFjdGlvblwiLCB0aXRsZTogXCJFZGl0IGZhY3Rpb25cIiB9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihmYWN0aW9uRWRpdEJ0biwgXCJwZW5jaWxcIik7XG5cdFx0ZmFjdGlvbkVkaXRCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdHRoaXMuc2hvd0VkaXRGYWN0aW9uTW9kYWwoZmFjdGlvbik7XG5cdFx0fTtcblx0XHRjb25zdCBmYWN0aW9uRGVsZXRlQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkRlbGV0ZSBmYWN0aW9uXCIsIHRpdGxlOiBcIkRlbGV0ZSBmYWN0aW9uXCIgfVxuXHRcdH0pO1xuXHRcdHNldEljb24oZmFjdGlvbkRlbGV0ZUJ0biwgXCJ0cmFzaFwiKTtcblx0XHRmYWN0aW9uRGVsZXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoY29uZmlybShgRGVsZXRlIGZhY3Rpb24gXCIke2ZhY3Rpb24ubmFtZX1cIj9gKSkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5kZWxldGVGYWN0aW9uKGZhY3Rpb24uaWQpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShcIkZhY3Rpb24gZGVsZXRlZFwiKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gUmVuZGVyIGNoaWxkcmVuXG5cdFx0Y29uc3QgY2hpbGRyZW4gPSB0aGlzLmZhY3Rpb25zLmZpbHRlcihmID0+IGYucGFyZW50X2lkID09PSBmYWN0aW9uLmlkKTtcblx0XHRmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxkcmVuLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHR0aGlzLnJlbmRlckZhY3Rpb25JdGVtKGNvbnRhaW5lciwgY2hpbGQsIGxldmVsICsgMSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gTW9kYWwgbWV0aG9kcyBmb3IgV29ybGQgZW50aXRpZXNcblx0c2hvd0NyZWF0ZUNoYXJhY3Rlck1vZGFsKCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50V29ybGQpIHJldHVybjtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiQ3JlYXRlIENoYXJhY3RlclwiKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBuYW1lID0gXCJcIjtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSBcIlwiO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiIH0pO1xuXHRcdG5hbWVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBuYW1lID0gbmFtZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3QgY3JlYXRlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDcmVhdGVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRjcmVhdGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghbmFtZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk5hbWUgaXMgcmVxdWlyZWRcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVDaGFyYWN0ZXIodGhpcy5jdXJyZW50V29ybGQhLmlkLCB7IG5hbWU6IG5hbWUudHJpbSgpLCBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpIH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkNoYXJhY3RlciBjcmVhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0XHRuYW1lSW5wdXQuZm9jdXMoKTtcblx0fVxuXG5cdHNob3dFZGl0Q2hhcmFjdGVyTW9kYWwoY2hhcmFjdGVyOiBDaGFyYWN0ZXIpIHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiRWRpdCBDaGFyYWN0ZXJcIik7XG5cdFx0XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgbmFtZSA9IGNoYXJhY3Rlci5uYW1lO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IGNoYXJhY3Rlci5kZXNjcmlwdGlvbjtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTmFtZSAqXCIgfSk7XG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgdmFsdWU6IG5hbWUgfSk7XG5cdFx0bmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGRlc2NJbnB1dC52YWx1ZSA9IGRlc2NyaXB0aW9uO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTYXZlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgdXBkYXRlZCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVDaGFyYWN0ZXIoY2hhcmFjdGVyLmlkLCB7IG5hbWU6IG5hbWUudHJpbSgpLCBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpIH0pO1xuXHRcdFx0XHQvLyBVcGRhdGUgY2hhcmFjdGVyIGRldGFpbHMgdmlldyBpZiB3ZSdyZSBpbiBjaGFyYWN0ZXIgZGV0YWlscyB2aWV3XG5cdFx0XHRcdGlmICh0aGlzLnZpZXdNb2RlID09PSBcImNoYXJhY3Rlci1kZXRhaWxzXCIgJiYgdGhpcy5jaGFyYWN0ZXJEZXRhaWxzVmlldyAmJiB0aGlzLmNoYXJhY3RlckRldGFpbHNWaWV3W1wiY2hhcmFjdGVyXCJdLmlkID09PSBjaGFyYWN0ZXIuaWQpIHtcblx0XHRcdFx0XHR0aGlzLmNoYXJhY3RlckRldGFpbHNWaWV3LnVwZGF0ZUNoYXJhY3Rlcih1cGRhdGVkKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJDaGFyYWN0ZXIgdXBkYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRzaG93Q3JlYXRlTG9jYXRpb25Nb2RhbCgpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFdvcmxkKSByZXR1cm47XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkNyZWF0ZSBMb2NhdGlvblwiKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBuYW1lID0gXCJcIjtcblx0XHRsZXQgdHlwZSA9IFwiXCI7XG5cdFx0bGV0IGRlc2NyaXB0aW9uID0gXCJcIjtcblx0XHRsZXQgcGFyZW50SWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiIH0pO1xuXHRcdG5hbWVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBuYW1lID0gbmFtZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJUeXBlXCIgfSk7XG5cdFx0Y29uc3QgdHlwZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgcGxhY2Vob2xkZXI6IFwiZS5nLiwgQ2l0eSwgRm9yZXN0LCBCdWlsZGluZ1wiIH0pO1xuXHRcdHR5cGVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyB0eXBlID0gdHlwZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJQYXJlbnQgTG9jYXRpb25cIiB9KTtcblx0XHRjb25zdCBwYXJlbnRTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHRwYXJlbnRTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJcIiwgdGV4dDogXCJOb25lIChSb290IExvY2F0aW9uKVwiIH0pO1xuXHRcdGZvciAoY29uc3QgbG9jIG9mIHRoaXMubG9jYXRpb25zLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRwYXJlbnRTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogbG9jLmlkLCB0ZXh0OiBsb2MubmFtZSB9KTtcblx0XHR9XG5cdFx0cGFyZW50U2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4geyBwYXJlbnRJZCA9IHBhcmVudFNlbGVjdC52YWx1ZSB8fCBudWxsOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3QgY3JlYXRlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDcmVhdGVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRjcmVhdGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghbmFtZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk5hbWUgaXMgcmVxdWlyZWRcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVMb2NhdGlvbih0aGlzLmN1cnJlbnRXb3JsZCEuaWQsIHsgXG5cdFx0XHRcdFx0bmFtZTogbmFtZS50cmltKCksIFxuXHRcdFx0XHRcdHR5cGU6IHR5cGUudHJpbSgpLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKCksXG5cdFx0XHRcdFx0cGFyZW50X2lkOiBwYXJlbnRJZFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJMb2NhdGlvbiBjcmVhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0XHRuYW1lSW5wdXQuZm9jdXMoKTtcblx0fVxuXG5cdHNob3dFZGl0TG9jYXRpb25Nb2RhbChsb2NhdGlvbjogTG9jYXRpb24pIHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiRWRpdCBMb2NhdGlvblwiKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBuYW1lID0gbG9jYXRpb24ubmFtZTtcblx0XHRsZXQgdHlwZSA9IGxvY2F0aW9uLnR5cGU7XG5cdFx0bGV0IGRlc2NyaXB0aW9uID0gbG9jYXRpb24uZGVzY3JpcHRpb247XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IG5hbWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsIHZhbHVlOiBuYW1lIH0pO1xuXHRcdG5hbWVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBuYW1lID0gbmFtZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJUeXBlXCIgfSk7XG5cdFx0Y29uc3QgdHlwZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgdmFsdWU6IHR5cGUgfSk7XG5cdFx0dHlwZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IHR5cGUgPSB0eXBlSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGRlc2NJbnB1dC52YWx1ZSA9IGRlc2NyaXB0aW9uO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTYXZlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUxvY2F0aW9uKGxvY2F0aW9uLmlkLCB7IG5hbWU6IG5hbWUudHJpbSgpLCB0eXBlOiB0eXBlLnRyaW0oKSwgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSB9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJMb2NhdGlvbiB1cGRhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHNob3dDcmVhdGVBcnRpZmFjdE1vZGFsKCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50V29ybGQpIHJldHVybjtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiQ3JlYXRlIEFydGlmYWN0XCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSBcIlwiO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IFwiXCI7XG5cdFx0bGV0IHJhcml0eSA9IFwiXCI7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IG5hbWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIgfSk7XG5cdFx0bmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlJhcml0eVwiIH0pO1xuXHRcdGNvbnN0IHJhcml0eVNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdHJhcml0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcIlwiLCB0ZXh0OiBcIlNlbGVjdCBSYXJpdHlcIiB9KTtcblx0XHRbXCJDb21tb25cIiwgXCJVbmNvbW1vblwiLCBcIlJhcmVcIiwgXCJFcGljXCIsIFwiTGVnZW5kYXJ5XCIsIFwiVW5pcXVlXCJdLmZvckVhY2gociA9PiB7XG5cdFx0XHRyYXJpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogci50b0xvd2VyQ2FzZSgpLCB0ZXh0OiByIH0pO1xuXHRcdH0pO1xuXHRcdHJhcml0eVNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHsgcmFyaXR5ID0gcmFyaXR5U2VsZWN0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3QgY3JlYXRlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDcmVhdGVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRjcmVhdGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghbmFtZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk5hbWUgaXMgcmVxdWlyZWRcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVBcnRpZmFjdCh0aGlzLmN1cnJlbnRXb3JsZCEuaWQsIHsgXG5cdFx0XHRcdFx0bmFtZTogbmFtZS50cmltKCksIFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKCksXG5cdFx0XHRcdFx0cmFyaXR5OiByYXJpdHlcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQXJ0aWZhY3QgY3JlYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0bmFtZUlucHV0LmZvY3VzKCk7XG5cdH1cblxuXHRzaG93RWRpdEFydGlmYWN0TW9kYWwoYXJ0aWZhY3Q6IEFydGlmYWN0KSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkVkaXQgQXJ0aWZhY3RcIik7XG5cdFx0XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgbmFtZSA9IGFydGlmYWN0Lm5hbWU7XG5cdFx0bGV0IGRlc2NyaXB0aW9uID0gYXJ0aWZhY3QuZGVzY3JpcHRpb247XG5cdFx0bGV0IHJhcml0eSA9IGFydGlmYWN0LnJhcml0eTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTmFtZSAqXCIgfSk7XG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgdmFsdWU6IG5hbWUgfSk7XG5cdFx0bmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlJhcml0eVwiIH0pO1xuXHRcdGNvbnN0IHJhcml0eVNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdHJhcml0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcIlwiLCB0ZXh0OiBcIlNlbGVjdCBSYXJpdHlcIiB9KTtcblx0XHRbXCJDb21tb25cIiwgXCJVbmNvbW1vblwiLCBcIlJhcmVcIiwgXCJFcGljXCIsIFwiTGVnZW5kYXJ5XCIsIFwiVW5pcXVlXCJdLmZvckVhY2gociA9PiB7XG5cdFx0XHRjb25zdCBvcHQgPSByYXJpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogci50b0xvd2VyQ2FzZSgpLCB0ZXh0OiByIH0pO1xuXHRcdFx0aWYgKHJhcml0eS50b0xvd2VyQ2FzZSgpID09PSByLnRvTG93ZXJDYXNlKCkpIG9wdC5zZWxlY3RlZCA9IHRydWU7XG5cdFx0fSk7XG5cdFx0cmFyaXR5U2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4geyByYXJpdHkgPSByYXJpdHlTZWxlY3QudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGRlc2NJbnB1dC52YWx1ZSA9IGRlc2NyaXB0aW9uO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTYXZlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUFydGlmYWN0KGFydGlmYWN0LmlkLCB7IG5hbWU6IG5hbWUudHJpbSgpLCBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpLCByYXJpdHk6IHJhcml0eSB9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJBcnRpZmFjdCB1cGRhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHNob3dDcmVhdGVFdmVudE1vZGFsKCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50V29ybGQpIHJldHVybjtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiQ3JlYXRlIEV2ZW50XCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSBcIlwiO1xuXHRcdGxldCB0eXBlID0gXCJcIjtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSBcIlwiO1xuXHRcdGxldCBpbXBvcnRhbmNlID0gNTtcblx0XHRsZXQgdGltZWxpbmVQb3NpdGlvbjogbnVtYmVyIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG5cdFx0Ly8gPT09IEJBU0lDIElORk8gPT09XG5cdFx0Y29udGVudC5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJCYXNpYyBJbmZvXCIsIGNsczogXCJzdG9yeS1lbmdpbmUtbW9kYWwtc2VjdGlvblwiIH0pO1xuXHRcdFxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRXZlbnQgTmFtZSAqXCIgfSk7XG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgXG5cdFx0XHR0eXBlOiBcInRleHRcIiwgXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsXG5cdFx0XHRwbGFjZWhvbGRlcjogXCJlLmcuLCBUaGUgQmF0dGxlIG9mIENyaW1zb24gRmllbGRzXCJcblx0XHR9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRXZlbnQgVHlwZVwiIH0pO1xuXHRcdGNvbnN0IHR5cGVTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiXCIsIHRleHQ6IFwiU2VsZWN0IHR5cGUuLi5cIiB9KTtcblx0XHRbXCJCYXR0bGVcIiwgXCJUcmVhdHlcIiwgXCJEaXNjb3ZlcnlcIiwgXCJCaXJ0aFwiLCBcIkRlYXRoXCIsIFwiQ29yb25hdGlvblwiLCBcIkRpc2FzdGVyXCIsIFwiTWlncmF0aW9uXCIsIFwiRm91bmRpbmdcIiwgXCJPdGhlclwiXS5mb3JFYWNoKHQgPT4ge1xuXHRcdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiB0LCB0ZXh0OiB0IH0pO1xuXHRcdH0pO1xuXHRcdHR5cGVTZWxlY3Qub25jaGFuZ2UgPSAoKSA9PiB7IHR5cGUgPSB0eXBlU2VsZWN0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiLFxuXHRcdFx0cGxhY2Vob2xkZXI6IFwiV2hhdCBoYXBwZW5lZCBkdXJpbmcgdGhpcyBldmVudD9cIlxuXHRcdH0pO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdC8vID09PSBUSU1FTElORSA9PT1cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIlx1RDgzRFx1RENDNSBUaW1lbGluZSBQb3NpdGlvblwiLCBjbHM6IFwic3RvcnktZW5naW5lLW1vZGFsLXNlY3Rpb25cIiB9KTtcblx0XHRcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlllYXIgKHJlbGF0aXZlIHRvIEVwb2NoL1llYXIgWmVybylcIiB9KTtcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IFxuXHRcdFx0dGV4dDogXCJVc2UgcG9zaXRpdmUgbnVtYmVycyBmb3IgeWVhcnMgYWZ0ZXIgWWVhciBaZXJvLCBuZWdhdGl2ZSBmb3IgeWVhcnMgYmVmb3JlLlwiLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1oaW50XCJcblx0XHR9KTtcblx0XHRjb25zdCB0aW1lbGluZVBvc0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgXG5cdFx0XHR0eXBlOiBcIm51bWJlclwiLCBcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgXG5cdFx0XHRwbGFjZWhvbGRlcjogXCJlLmcuLCAxMDAgKFllYXIgMTAwKSBvciAtNTAgKDUwIHllYXJzIGJlZm9yZSBZZWFyIFplcm8pXCJcblx0XHR9KTtcblx0XHR0aW1lbGluZVBvc0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IFxuXHRcdFx0Y29uc3QgdmFsID0gdGltZWxpbmVQb3NJbnB1dC52YWx1ZTtcblx0XHRcdHRpbWVsaW5lUG9zaXRpb24gPSB2YWwgPyBwYXJzZUludCh2YWwpIDogdW5kZWZpbmVkO1xuXHRcdH07XG5cblx0XHQvLyA9PT0gSU1QT1JUQU5DRSA9PT1cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIlx1MkI1MCBJbXBvcnRhbmNlXCIsIGNsczogXCJzdG9yeS1lbmdpbmUtbW9kYWwtc2VjdGlvblwiIH0pO1xuXHRcdFxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiSW1wb3J0YW5jZSBMZXZlbCAoMS0xMClcIiB9KTtcblx0XHRjb25zdCBpbXBvcnRhbmNlSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyBcblx0XHRcdHR5cGU6IFwicmFuZ2VcIiwgXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXJhbmdlXCIsXG5cdFx0XHR2YWx1ZTogXCI1XCIsIFxuXHRcdFx0YXR0cjogeyBtaW46IFwiMVwiLCBtYXg6IFwiMTBcIiB9IFxuXHRcdH0pO1xuXHRcdGNvbnN0IGltcG9ydGFuY2VWYWx1ZSA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogXCIgNVwiLCBjbHM6IFwic3RvcnktZW5naW5lLXJhbmdlLXZhbHVlXCIgfSk7XG5cdFx0aW1wb3J0YW5jZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IFxuXHRcdFx0aW1wb3J0YW5jZSA9IHBhcnNlSW50KGltcG9ydGFuY2VJbnB1dC52YWx1ZSkgfHwgNTtcblx0XHRcdGltcG9ydGFuY2VWYWx1ZS50ZXh0Q29udGVudCA9IGAgJHtpbXBvcnRhbmNlfWA7XG5cdFx0fTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBjcmVhdGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNyZWF0ZSBFdmVudFwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdGNyZWF0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUV2ZW50KHRoaXMuY3VycmVudFdvcmxkIS5pZCwgeyBcblx0XHRcdFx0XHRuYW1lOiBuYW1lLnRyaW0oKSwgXG5cdFx0XHRcdFx0dHlwZTogdHlwZS50cmltKCkgfHwgdW5kZWZpbmVkLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKCkgfHwgdW5kZWZpbmVkLFxuXHRcdFx0XHRcdGltcG9ydGFuY2U6IE1hdGgubWF4KDEsIE1hdGgubWluKDEwLCBpbXBvcnRhbmNlKSksXG5cdFx0XHRcdFx0dGltZWxpbmVfcG9zaXRpb246IHRpbWVsaW5lUG9zaXRpb25cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiRXZlbnQgY3JlYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0bmFtZUlucHV0LmZvY3VzKCk7XG5cdH1cblxuXHRzaG93RWRpdEV2ZW50TW9kYWwoZXZlbnQ6IFdvcmxkRXZlbnQpIHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiRWRpdCBFdmVudFwiKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBuYW1lID0gZXZlbnQubmFtZTtcblx0XHRsZXQgdHlwZSA9IGV2ZW50LnR5cGUgfHwgXCJcIjtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSBldmVudC5kZXNjcmlwdGlvbiB8fCBcIlwiO1xuXHRcdGxldCBpbXBvcnRhbmNlID0gZXZlbnQuaW1wb3J0YW5jZTtcblx0XHRsZXQgdGltZWxpbmVQb3NpdGlvbjogbnVtYmVyIHwgdW5kZWZpbmVkID0gZXZlbnQudGltZWxpbmVfcG9zaXRpb24gPz8gdW5kZWZpbmVkO1xuXG5cdFx0Ly8gPT09IEJBU0lDIElORk8gPT09XG5cdFx0Y29udGVudC5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJCYXNpYyBJbmZvXCIsIGNsczogXCJzdG9yeS1lbmdpbmUtbW9kYWwtc2VjdGlvblwiIH0pO1xuXHRcdFxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRXZlbnQgTmFtZSAqXCIgfSk7XG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgdmFsdWU6IG5hbWUgfSk7XG5cdFx0bmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkV2ZW50IFR5cGVcIiB9KTtcblx0XHRjb25zdCB0eXBlU2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcIlwiLCB0ZXh0OiBcIlNlbGVjdCB0eXBlLi4uXCIgfSk7XG5cdFx0W1wiQmF0dGxlXCIsIFwiVHJlYXR5XCIsIFwiRGlzY292ZXJ5XCIsIFwiQmlydGhcIiwgXCJEZWF0aFwiLCBcIkNvcm9uYXRpb25cIiwgXCJEaXNhc3RlclwiLCBcIk1pZ3JhdGlvblwiLCBcIkZvdW5kaW5nXCIsIFwiRXBvY2hcIiwgXCJPdGhlclwiXS5mb3JFYWNoKHQgPT4ge1xuXHRcdFx0Y29uc3Qgb3B0ID0gdHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiB0LCB0ZXh0OiB0IH0pO1xuXHRcdFx0aWYgKHR5cGUudG9Mb3dlckNhc2UoKSA9PT0gdC50b0xvd2VyQ2FzZSgpKSBvcHQuc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdH0pO1xuXHRcdHR5cGVTZWxlY3Qub25jaGFuZ2UgPSAoKSA9PiB7IHR5cGUgPSB0eXBlU2VsZWN0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRkZXNjSW5wdXQudmFsdWUgPSBkZXNjcmlwdGlvbjtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHQvLyA9PT0gVElNRUxJTkUgPT09XG5cdFx0Y29udGVudC5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJcdUQ4M0RcdURDQzUgVGltZWxpbmUgUG9zaXRpb25cIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1tb2RhbC1zZWN0aW9uXCIgfSk7XG5cdFx0XG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJZZWFyIChyZWxhdGl2ZSB0byBFcG9jaC9ZZWFyIFplcm8pXCIgfSk7XG5cdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyBcblx0XHRcdHRleHQ6IFwiVXNlIHBvc2l0aXZlIG51bWJlcnMgZm9yIHllYXJzIGFmdGVyIFllYXIgWmVybywgbmVnYXRpdmUgZm9yIHllYXJzIGJlZm9yZS5cIixcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaGludFwiXG5cdFx0fSk7XG5cdFx0Y29uc3QgdGltZWxpbmVQb3NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IFxuXHRcdFx0dHlwZTogXCJudW1iZXJcIiwgXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsIFxuXHRcdFx0dmFsdWU6IHRpbWVsaW5lUG9zaXRpb24/LnRvU3RyaW5nKCkgPz8gXCJcIlxuXHRcdH0pO1xuXHRcdHRpbWVsaW5lUG9zSW5wdXQucGxhY2Vob2xkZXIgPSBcImUuZy4sIDEwMCBvciAtNTBcIjtcblx0XHR0aW1lbGluZVBvc0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IFxuXHRcdFx0Y29uc3QgdmFsID0gdGltZWxpbmVQb3NJbnB1dC52YWx1ZTtcblx0XHRcdHRpbWVsaW5lUG9zaXRpb24gPSB2YWwgPyBwYXJzZUludCh2YWwpIDogdW5kZWZpbmVkO1xuXHRcdH07XG5cblx0XHQvLyA9PT0gSU1QT1JUQU5DRSA9PT1cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIlx1MkI1MCBJbXBvcnRhbmNlXCIsIGNsczogXCJzdG9yeS1lbmdpbmUtbW9kYWwtc2VjdGlvblwiIH0pO1xuXHRcdFxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiSW1wb3J0YW5jZSBMZXZlbCAoMS0xMClcIiB9KTtcblx0XHRjb25zdCBpbXBvcnRhbmNlSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyBcblx0XHRcdHR5cGU6IFwicmFuZ2VcIiwgXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXJhbmdlXCIsXG5cdFx0XHR2YWx1ZTogaW1wb3J0YW5jZS50b1N0cmluZygpLCBcblx0XHRcdGF0dHI6IHsgbWluOiBcIjFcIiwgbWF4OiBcIjEwXCIgfSBcblx0XHR9KTtcblx0XHRjb25zdCBpbXBvcnRhbmNlVmFsdWUgPSBjb250ZW50LmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGAgJHtpbXBvcnRhbmNlfWAsIGNsczogXCJzdG9yeS1lbmdpbmUtcmFuZ2UtdmFsdWVcIiB9KTtcblx0XHRpbXBvcnRhbmNlSW5wdXQub25pbnB1dCA9ICgpID0+IHsgXG5cdFx0XHRpbXBvcnRhbmNlID0gcGFyc2VJbnQoaW1wb3J0YW5jZUlucHV0LnZhbHVlKSB8fCA1O1xuXHRcdFx0aW1wb3J0YW5jZVZhbHVlLnRleHRDb250ZW50ID0gYCAke2ltcG9ydGFuY2V9YDtcblx0XHR9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlNhdmVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIW5hbWUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJOYW1lIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlRXZlbnQoZXZlbnQuaWQsIHsgXG5cdFx0XHRcdFx0bmFtZTogbmFtZS50cmltKCksIFxuXHRcdFx0XHRcdHR5cGU6IHR5cGUudHJpbSgpIHx8IHVuZGVmaW5lZCxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpIHx8IHVuZGVmaW5lZCxcblx0XHRcdFx0XHRpbXBvcnRhbmNlOiBNYXRoLm1heCgxLCBNYXRoLm1pbigxMCwgaW1wb3J0YW5jZSkpLFxuXHRcdFx0XHRcdHRpbWVsaW5lX3Bvc2l0aW9uOiB0aW1lbGluZVBvc2l0aW9uXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkV2ZW50IHVwZGF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0c2hvd0NyZWF0ZVRyYWl0TW9kYWwoKSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkNyZWF0ZSBUcmFpdFwiKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBuYW1lID0gXCJcIjtcblx0XHRsZXQgY2F0ZWdvcnkgPSBcIlwiO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IFwiXCI7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IG5hbWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIgfSk7XG5cdFx0bmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkNhdGVnb3J5XCIgfSk7XG5cdFx0Y29uc3QgY2F0ZWdvcnlJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsIHBsYWNlaG9sZGVyOiBcImUuZy4sIFBlcnNvbmFsaXR5LCBQaHlzaWNhbCwgQmFja2dyb3VuZFwiIH0pO1xuXHRcdGNhdGVnb3J5SW5wdXQub25pbnB1dCA9ICgpID0+IHsgY2F0ZWdvcnkgPSBjYXRlZ29yeUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3QgY3JlYXRlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDcmVhdGVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRjcmVhdGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghbmFtZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk5hbWUgaXMgcmVxdWlyZWRcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVUcmFpdCh7IFxuXHRcdFx0XHRcdG5hbWU6IG5hbWUudHJpbSgpLCBcblx0XHRcdFx0XHRjYXRlZ29yeTogY2F0ZWdvcnkudHJpbSgpLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKClcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiVHJhaXQgY3JlYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0bmFtZUlucHV0LmZvY3VzKCk7XG5cdH1cblxuXHRzaG93RWRpdFRyYWl0TW9kYWwodHJhaXQ6IFRyYWl0KSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkVkaXQgVHJhaXRcIik7XG5cdFx0XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgbmFtZSA9IHRyYWl0Lm5hbWU7XG5cdFx0bGV0IGNhdGVnb3J5ID0gdHJhaXQuY2F0ZWdvcnk7XG5cdFx0bGV0IGRlc2NyaXB0aW9uID0gdHJhaXQuZGVzY3JpcHRpb247XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IG5hbWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsIHZhbHVlOiBuYW1lIH0pO1xuXHRcdG5hbWVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBuYW1lID0gbmFtZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJDYXRlZ29yeVwiIH0pO1xuXHRcdGNvbnN0IGNhdGVnb3J5SW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCB2YWx1ZTogY2F0ZWdvcnkgfSk7XG5cdFx0Y2F0ZWdvcnlJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBjYXRlZ29yeSA9IGNhdGVnb3J5SW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGRlc2NJbnB1dC52YWx1ZSA9IGRlc2NyaXB0aW9uO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTYXZlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZVRyYWl0KHRyYWl0LmlkLCB7IG5hbWU6IG5hbWUudHJpbSgpLCBjYXRlZ29yeTogY2F0ZWdvcnkudHJpbSgpLCBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpIH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIlRyYWl0IHVwZGF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0cmVuZGVyVGltZUNvbmZpZ0Rpc3BsYXkoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgY29uZmlnOiBUaW1lQ29uZmlnKSB7XG5cdFx0Y29udGFpbmVyLmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIlRpbWUgQ29uZmlndXJhdGlvblwiIH0pO1xuXHRcdFxuXHRcdGNvbnN0IGdyaWQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aW1lLWNvbmZpZy1ncmlkXCIgfSk7XG5cdFx0XG5cdFx0Ly8gTW9zdHJhciBjYW1wb3Ncblx0XHRncmlkLmNyZWF0ZURpdigpLnNldFRleHQoYEJhc2UgVW5pdDogJHtjb25maWcuYmFzZV91bml0fWApO1xuXHRcdGdyaWQuY3JlYXRlRGl2KCkuc2V0VGV4dChgSG91cnMvRGF5OiAke2NvbmZpZy5ob3Vyc19wZXJfZGF5fWApO1xuXHRcdGdyaWQuY3JlYXRlRGl2KCkuc2V0VGV4dChgRGF5cy9XZWVrOiAke2NvbmZpZy5kYXlzX3Blcl93ZWVrfWApO1xuXHRcdGdyaWQuY3JlYXRlRGl2KCkuc2V0VGV4dChgRGF5cy9ZZWFyOiAke2NvbmZpZy5kYXlzX3Blcl95ZWFyfWApO1xuXHRcdGdyaWQuY3JlYXRlRGl2KCkuc2V0VGV4dChgTW9udGhzL1llYXI6ICR7Y29uZmlnLm1vbnRoc19wZXJfeWVhcn1gKTtcblx0XHRcblx0XHRpZiAoY29uZmlnLmVyYV9uYW1lKSB7XG5cdFx0XHRncmlkLmNyZWF0ZURpdigpLnNldFRleHQoYEVyYTogJHtjb25maWcuZXJhX25hbWV9YCk7XG5cdFx0fVxuXHRcdGlmIChjb25maWcubW9udGhfbmFtZXM/Lmxlbmd0aCkge1xuXHRcdFx0Z3JpZC5jcmVhdGVEaXYoKS5zZXRUZXh0KGBNb250aHM6ICR7Y29uZmlnLm1vbnRoX25hbWVzLmpvaW4oXCIsIFwiKX1gKTtcblx0XHR9XG5cdFx0aWYgKGNvbmZpZy55ZWFyX3plcm8gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0Z3JpZC5jcmVhdGVEaXYoKS5zZXRUZXh0KGBZZWFyIFplcm86ICR7Y29uZmlnLnllYXJfemVyb31gKTtcblx0XHR9XG5cdH1cblxuXHRzaG93VGltZUNvbmZpZ01vZGFsKGV4aXN0aW5nQ29uZmlnOiBUaW1lQ29uZmlnIHwgbnVsbCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50V29ybGQpIHJldHVybjtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KGV4aXN0aW5nQ29uZmlnID8gXCJFZGl0IFRpbWUgQ29uZmlndXJhdGlvblwiIDogXCJDcmVhdGUgVGltZSBDb25maWd1cmF0aW9uXCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IGJhc2VVbml0ID0gZXhpc3RpbmdDb25maWc/LmJhc2VfdW5pdCB8fCBcInllYXJcIjtcblx0XHRsZXQgaG91cnNQZXJEYXkgPSBleGlzdGluZ0NvbmZpZz8uaG91cnNfcGVyX2RheSB8fCAyNDtcblx0XHRsZXQgZGF5c1BlcldlZWsgPSBleGlzdGluZ0NvbmZpZz8uZGF5c19wZXJfd2VlayB8fCA3O1xuXHRcdGxldCBkYXlzUGVyWWVhciA9IGV4aXN0aW5nQ29uZmlnPy5kYXlzX3Blcl95ZWFyIHx8IDM2NTtcblx0XHRsZXQgbW9udGhzUGVyWWVhciA9IGV4aXN0aW5nQ29uZmlnPy5tb250aHNfcGVyX3llYXIgfHwgMTI7XG5cdFx0bGV0IGVyYU5hbWUgPSBleGlzdGluZ0NvbmZpZz8uZXJhX25hbWUgfHwgXCJcIjtcblx0XHRsZXQgeWVhclplcm8gPSBleGlzdGluZ0NvbmZpZz8ueWVhcl96ZXJvPy50b1N0cmluZygpIHx8IFwiXCI7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkJhc2UgVW5pdCAqXCIgfSk7XG5cdFx0Y29uc3QgYmFzZVVuaXRTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHRbXCJ5ZWFyXCIsIFwiZGF5XCIsIFwiaG91clwiLCBcImN1c3RvbVwiXS5mb3JFYWNoKHVuaXQgPT4ge1xuXHRcdFx0Y29uc3Qgb3B0ID0gYmFzZVVuaXRTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogdW5pdCwgdGV4dDogdW5pdCB9KTtcblx0XHRcdGlmIChiYXNlVW5pdCA9PT0gdW5pdCkgb3B0LnNlbGVjdGVkID0gdHJ1ZTtcblx0XHR9KTtcblx0XHRiYXNlVW5pdFNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHsgYmFzZVVuaXQgPSBiYXNlVW5pdFNlbGVjdC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiSG91cnMgcGVyIERheVwiIH0pO1xuXHRcdGNvbnN0IGhvdXJzUGVyRGF5SW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyBcblx0XHRcdHR5cGU6IFwibnVtYmVyXCIsIFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLFxuXHRcdFx0dmFsdWU6IGhvdXJzUGVyRGF5LnRvU3RyaW5nKClcblx0XHR9KTtcblx0XHRob3Vyc1BlckRheUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGhvdXJzUGVyRGF5ID0gcGFyc2VGbG9hdChob3Vyc1BlckRheUlucHV0LnZhbHVlKSB8fCAyNDsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGF5cyBwZXIgV2Vla1wiIH0pO1xuXHRcdGNvbnN0IGRheXNQZXJXZWVrSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyBcblx0XHRcdHR5cGU6IFwibnVtYmVyXCIsIFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLFxuXHRcdFx0dmFsdWU6IGRheXNQZXJXZWVrLnRvU3RyaW5nKClcblx0XHR9KTtcblx0XHRkYXlzUGVyV2Vla0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRheXNQZXJXZWVrID0gcGFyc2VJbnQoZGF5c1BlcldlZWtJbnB1dC52YWx1ZSkgfHwgNzsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGF5cyBwZXIgWWVhclwiIH0pO1xuXHRcdGNvbnN0IGRheXNQZXJZZWFySW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyBcblx0XHRcdHR5cGU6IFwibnVtYmVyXCIsIFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLFxuXHRcdFx0dmFsdWU6IGRheXNQZXJZZWFyLnRvU3RyaW5nKClcblx0XHR9KTtcblx0XHRkYXlzUGVyWWVhcklucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRheXNQZXJZZWFyID0gcGFyc2VJbnQoZGF5c1BlclllYXJJbnB1dC52YWx1ZSkgfHwgMzY1OyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJNb250aHMgcGVyIFllYXJcIiB9KTtcblx0XHRjb25zdCBtb250aHNQZXJZZWFySW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyBcblx0XHRcdHR5cGU6IFwibnVtYmVyXCIsIFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLFxuXHRcdFx0dmFsdWU6IG1vbnRoc1BlclllYXIudG9TdHJpbmcoKVxuXHRcdH0pO1xuXHRcdG1vbnRoc1BlclllYXJJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBtb250aHNQZXJZZWFyID0gcGFyc2VJbnQobW9udGhzUGVyWWVhcklucHV0LnZhbHVlKSB8fCAxMjsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRXJhIE5hbWUgKG9wdGlvbmFsKVwiIH0pO1xuXHRcdGNvbnN0IGVyYU5hbWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IFxuXHRcdFx0dHlwZTogXCJ0ZXh0XCIsIFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLFxuXHRcdFx0dmFsdWU6IGVyYU5hbWVcblx0XHR9KTtcblx0XHRlcmFOYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZXJhTmFtZSA9IGVyYU5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiWWVhciBaZXJvIChvcHRpb25hbClcIiB9KTtcblx0XHRjb25zdCB5ZWFyWmVyb0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgXG5cdFx0XHR0eXBlOiBcIm51bWJlclwiLCBcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIixcblx0XHRcdHZhbHVlOiB5ZWFyWmVyb1xuXHRcdH0pO1xuXHRcdHllYXJaZXJvSW5wdXQub25pbnB1dCA9ICgpID0+IHsgeWVhclplcm8gPSB5ZWFyWmVyb0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlNhdmVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCB0aW1lQ29uZmlnOiBUaW1lQ29uZmlnID0ge1xuXHRcdFx0XHRcdGJhc2VfdW5pdDogYmFzZVVuaXQsXG5cdFx0XHRcdFx0aG91cnNfcGVyX2RheTogaG91cnNQZXJEYXksXG5cdFx0XHRcdFx0ZGF5c19wZXJfd2VlazogZGF5c1BlcldlZWssXG5cdFx0XHRcdFx0ZGF5c19wZXJfeWVhcjogZGF5c1BlclllYXIsXG5cdFx0XHRcdFx0bW9udGhzX3Blcl95ZWFyOiBtb250aHNQZXJZZWFyLFxuXHRcdFx0XHRcdGVyYV9uYW1lOiBlcmFOYW1lLnRyaW0oKSB8fCB1bmRlZmluZWQsXG5cdFx0XHRcdFx0eWVhcl96ZXJvOiB5ZWFyWmVybyA/IHBhcnNlSW50KHllYXJaZXJvKSA6IHVuZGVmaW5lZCxcblx0XHRcdFx0fTtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZVdvcmxkVGltZUNvbmZpZyh0aGlzLmN1cnJlbnRXb3JsZCEuaWQsIHRpbWVDb25maWcpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIlRpbWUgY29uZmlndXJhdGlvbiBzYXZlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRhc3luYyBzaG93VGltZWxpbmVNb2RhbCgpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFdvcmxkKSByZXR1cm47XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGV2ZW50cyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRUaW1lbGluZSh0aGlzLmN1cnJlbnRXb3JsZC5pZCk7XG5cdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBUaW1lbGluZU1vZGFsKHRoaXMuYXBwLCBldmVudHMsIHRoaXMuY3VycmVudFdvcmxkLnRpbWVfY29uZmlnIHx8IG51bGwpO1xuXHRcdFx0bW9kYWwub3BlbigpO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIGxvYWQgdGltZWxpbmVcIn1gLCA1MDAwKTtcblx0XHR9XG5cdH1cblxuXHQvLyBQbGFjZWhvbGRlciBtZXRob2RzIGZvciBtb2RhbHMgdGhhdCB3aWxsIGJlIGltcGxlbWVudGVkIGxhdGVyXG5cdHNob3dBcmNoZXR5cGVUcmFpdHNNb2RhbChhcmNoZXR5cGU6IEFyY2hldHlwZSwgdHJhaXRzOiBhbnlbXSkge1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoYFRyYWl0cyBmb3IgJHthcmNoZXR5cGUubmFtZX1gKTtcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGlmICh0cmFpdHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gdHJhaXRzIGFzc2lnbmVkIHRvIHRoaXMgYXJjaGV0eXBlLlwiIH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBsaXN0ID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblx0XHRcdGZvciAoY29uc3QgdHJhaXQgb2YgdHJhaXRzKSB7XG5cdFx0XHRcdGNvbnN0IGl0ZW0gPSBsaXN0LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbVwiIH0pO1xuXHRcdFx0XHRpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIiwgdGV4dDogdHJhaXQudHJhaXRfbmFtZSB8fCBcIlVua25vd25cIiB9KTtcblx0XHRcdH1cblx0XHR9XG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0c2hvd0NyZWF0ZUFyY2hldHlwZU1vZGFsKCkge1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJDcmVhdGUgQXJjaGV0eXBlXCIpO1xuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSBcIlwiO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IFwiXCI7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IG5hbWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIgfSk7XG5cdFx0bmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBjcmVhdGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNyZWF0ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdGNyZWF0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUFyY2hldHlwZSh7IG5hbWU6IG5hbWUudHJpbSgpLCBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpIH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkFyY2hldHlwZSBjcmVhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0bmFtZUlucHV0LmZvY3VzKCk7XG5cdH1cblxuXHRzaG93RWRpdEFyY2hldHlwZU1vZGFsKGFyY2hldHlwZTogQXJjaGV0eXBlKSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkVkaXQgQXJjaGV0eXBlXCIpO1xuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSBhcmNoZXR5cGUubmFtZTtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSBhcmNoZXR5cGUuZGVzY3JpcHRpb247XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IG5hbWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsIHZhbHVlOiBuYW1lIH0pO1xuXHRcdG5hbWVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBuYW1lID0gbmFtZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRkZXNjSW5wdXQudmFsdWUgPSBkZXNjcmlwdGlvbjtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghbmFtZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk5hbWUgaXMgcmVxdWlyZWRcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVBcmNoZXR5cGUoYXJjaGV0eXBlLmlkLCB7IG5hbWU6IG5hbWUudHJpbSgpLCBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpIH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkFyY2hldHlwZSB1cGRhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRzaG93TG9yZURldGFpbHNNb2RhbChsb3JlOiBMb3JlKSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChsb3JlLm5hbWUpO1xuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0Y29udGVudC5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogbG9yZS5kZXNjcmlwdGlvbiB8fCBcIk5vIGRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0aWYgKGxvcmUucnVsZXMpIHtcblx0XHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiUnVsZXNcIiB9KTtcblx0XHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogbG9yZS5ydWxlcyB9KTtcblx0XHR9XG5cdFx0aWYgKGxvcmUubGltaXRhdGlvbnMpIHtcblx0XHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiTGltaXRhdGlvbnNcIiB9KTtcblx0XHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogbG9yZS5saW1pdGF0aW9ucyB9KTtcblx0XHR9XG5cdFx0aWYgKGxvcmUucmVxdWlyZW1lbnRzKSB7XG5cdFx0XHRjb250ZW50LmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIlJlcXVpcmVtZW50c1wiIH0pO1xuXHRcdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBsb3JlLnJlcXVpcmVtZW50cyB9KTtcblx0XHR9XG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0c2hvd0NyZWF0ZUxvcmVNb2RhbChwYXJlbnRJZD86IHN0cmluZyB8IG51bGwpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFdvcmxkKSByZXR1cm47XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkNyZWF0ZSBMb3JlXCIpO1xuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSBcIlwiO1xuXHRcdGxldCBjYXRlZ29yeSA9IFwiXCI7XG5cdFx0bGV0IGRlc2NyaXB0aW9uID0gXCJcIjtcblx0XHRsZXQgcnVsZXMgPSBcIlwiO1xuXHRcdGxldCBsaW1pdGF0aW9ucyA9IFwiXCI7XG5cdFx0bGV0IHJlcXVpcmVtZW50cyA9IFwiXCI7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IG5hbWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIgfSk7XG5cdFx0bmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkNhdGVnb3J5XCIgfSk7XG5cdFx0Y29uc3QgY2F0ZWdvcnlJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIgfSk7XG5cdFx0Y2F0ZWdvcnlJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBjYXRlZ29yeSA9IGNhdGVnb3J5SW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiUnVsZXNcIiB9KTtcblx0XHRjb25zdCBydWxlc0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdHJ1bGVzSW5wdXQub25pbnB1dCA9ICgpID0+IHsgcnVsZXMgPSBydWxlc0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJMaW1pdGF0aW9uc1wiIH0pO1xuXHRcdGNvbnN0IGxpbWl0YXRpb25zSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0bGltaXRhdGlvbnNJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBsaW1pdGF0aW9ucyA9IGxpbWl0YXRpb25zSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlJlcXVpcmVtZW50c1wiIH0pO1xuXHRcdGNvbnN0IHJlcXVpcmVtZW50c0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdHJlcXVpcmVtZW50c0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IHJlcXVpcmVtZW50cyA9IHJlcXVpcmVtZW50c0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IGNyZWF0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ3JlYXRlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0Y3JlYXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIW5hbWUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJOYW1lIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlTG9yZSh0aGlzLmN1cnJlbnRXb3JsZCEuaWQsIHtcblx0XHRcdFx0XHRuYW1lOiBuYW1lLnRyaW0oKSxcblx0XHRcdFx0XHRjYXRlZ29yeTogY2F0ZWdvcnkudHJpbSgpIHx8IHVuZGVmaW5lZCxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpLFxuXHRcdFx0XHRcdHJ1bGVzOiBydWxlcy50cmltKCksXG5cdFx0XHRcdFx0bGltaXRhdGlvbnM6IGxpbWl0YXRpb25zLnRyaW0oKSxcblx0XHRcdFx0XHRyZXF1aXJlbWVudHM6IHJlcXVpcmVtZW50cy50cmltKCksXG5cdFx0XHRcdFx0cGFyZW50X2lkOiBwYXJlbnRJZCB8fCB1bmRlZmluZWQsXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkxvcmUgY3JlYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cdFx0bW9kYWwub3BlbigpO1xuXHRcdG5hbWVJbnB1dC5mb2N1cygpO1xuXHR9XG5cblx0c2hvd0VkaXRMb3JlTW9kYWwobG9yZTogTG9yZSkge1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJFZGl0IExvcmVcIik7XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgbmFtZSA9IGxvcmUubmFtZTtcblx0XHRsZXQgY2F0ZWdvcnkgPSBsb3JlLmNhdGVnb3J5IHx8IFwiXCI7XG5cdFx0bGV0IGRlc2NyaXB0aW9uID0gbG9yZS5kZXNjcmlwdGlvbjtcblx0XHRsZXQgcnVsZXMgPSBsb3JlLnJ1bGVzO1xuXHRcdGxldCBsaW1pdGF0aW9ucyA9IGxvcmUubGltaXRhdGlvbnM7XG5cdFx0bGV0IHJlcXVpcmVtZW50cyA9IGxvcmUucmVxdWlyZW1lbnRzO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCB2YWx1ZTogbmFtZSB9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiQ2F0ZWdvcnlcIiB9KTtcblx0XHRjb25zdCBjYXRlZ29yeUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgdmFsdWU6IGNhdGVnb3J5IH0pO1xuXHRcdGNhdGVnb3J5SW5wdXQub25pbnB1dCA9ICgpID0+IHsgY2F0ZWdvcnkgPSBjYXRlZ29yeUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRkZXNjSW5wdXQudmFsdWUgPSBkZXNjcmlwdGlvbjtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlJ1bGVzXCIgfSk7XG5cdFx0Y29uc3QgcnVsZXNJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRydWxlc0lucHV0LnZhbHVlID0gcnVsZXM7XG5cdFx0cnVsZXNJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBydWxlcyA9IHJ1bGVzSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkxpbWl0YXRpb25zXCIgfSk7XG5cdFx0Y29uc3QgbGltaXRhdGlvbnNJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRsaW1pdGF0aW9uc0lucHV0LnZhbHVlID0gbGltaXRhdGlvbnM7XG5cdFx0bGltaXRhdGlvbnNJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBsaW1pdGF0aW9ucyA9IGxpbWl0YXRpb25zSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlJlcXVpcmVtZW50c1wiIH0pO1xuXHRcdGNvbnN0IHJlcXVpcmVtZW50c0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdHJlcXVpcmVtZW50c0lucHV0LnZhbHVlID0gcmVxdWlyZW1lbnRzO1xuXHRcdHJlcXVpcmVtZW50c0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IHJlcXVpcmVtZW50cyA9IHJlcXVpcmVtZW50c0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlNhdmVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIW5hbWUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJOYW1lIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlTG9yZShsb3JlLmlkLCB7XG5cdFx0XHRcdFx0bmFtZTogbmFtZS50cmltKCksXG5cdFx0XHRcdFx0Y2F0ZWdvcnk6IGNhdGVnb3J5LnRyaW0oKSB8fCB1bmRlZmluZWQsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSxcblx0XHRcdFx0XHRydWxlczogcnVsZXMudHJpbSgpLFxuXHRcdFx0XHRcdGxpbWl0YXRpb25zOiBsaW1pdGF0aW9ucy50cmltKCksXG5cdFx0XHRcdFx0cmVxdWlyZW1lbnRzOiByZXF1aXJlbWVudHMudHJpbSgpLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJMb3JlIHVwZGF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHNob3dGYWN0aW9uRGV0YWlsc01vZGFsKGZhY3Rpb246IEZhY3Rpb24pIHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KGZhY3Rpb24ubmFtZSk7XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBmYWN0aW9uLmRlc2NyaXB0aW9uIHx8IFwiTm8gZGVzY3JpcHRpb25cIiB9KTtcblx0XHRpZiAoZmFjdGlvbi5iZWxpZWZzKSB7XG5cdFx0XHRjb250ZW50LmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIkJlbGllZnNcIiB9KTtcblx0XHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogZmFjdGlvbi5iZWxpZWZzIH0pO1xuXHRcdH1cblx0XHRpZiAoZmFjdGlvbi5zdHJ1Y3R1cmUpIHtcblx0XHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiU3RydWN0dXJlXCIgfSk7XG5cdFx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IGZhY3Rpb24uc3RydWN0dXJlIH0pO1xuXHRcdH1cblx0XHRpZiAoZmFjdGlvbi5zeW1ib2xzKSB7XG5cdFx0XHRjb250ZW50LmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIlN5bWJvbHNcIiB9KTtcblx0XHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogZmFjdGlvbi5zeW1ib2xzIH0pO1xuXHRcdH1cblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRzaG93Q3JlYXRlRmFjdGlvbk1vZGFsKHBhcmVudElkPzogc3RyaW5nIHwgbnVsbCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50V29ybGQpIHJldHVybjtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiQ3JlYXRlIEZhY3Rpb25cIik7XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgbmFtZSA9IFwiXCI7XG5cdFx0bGV0IHR5cGUgPSBcIlwiO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IFwiXCI7XG5cdFx0bGV0IGJlbGllZnMgPSBcIlwiO1xuXHRcdGxldCBzdHJ1Y3R1cmUgPSBcIlwiO1xuXHRcdGxldCBzeW1ib2xzID0gXCJcIjtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTmFtZSAqXCIgfSk7XG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiB9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiVHlwZVwiIH0pO1xuXHRcdGNvbnN0IHR5cGVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIgfSk7XG5cdFx0dHlwZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IHR5cGUgPSB0eXBlSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiQmVsaWVmc1wiIH0pO1xuXHRcdGNvbnN0IGJlbGllZnNJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRiZWxpZWZzSW5wdXQub25pbnB1dCA9ICgpID0+IHsgYmVsaWVmcyA9IGJlbGllZnNJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiU3RydWN0dXJlXCIgfSk7XG5cdFx0Y29uc3Qgc3RydWN0dXJlSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0c3RydWN0dXJlSW5wdXQub25pbnB1dCA9ICgpID0+IHsgc3RydWN0dXJlID0gc3RydWN0dXJlSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlN5bWJvbHNcIiB9KTtcblx0XHRjb25zdCBzeW1ib2xzSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0c3ltYm9sc0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IHN5bWJvbHMgPSBzeW1ib2xzSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3QgY3JlYXRlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDcmVhdGVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRjcmVhdGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghbmFtZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk5hbWUgaXMgcmVxdWlyZWRcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVGYWN0aW9uKHRoaXMuY3VycmVudFdvcmxkIS5pZCwge1xuXHRcdFx0XHRcdG5hbWU6IG5hbWUudHJpbSgpLFxuXHRcdFx0XHRcdHR5cGU6IHR5cGUudHJpbSgpIHx8IHVuZGVmaW5lZCxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpLFxuXHRcdFx0XHRcdGJlbGllZnM6IGJlbGllZnMudHJpbSgpLFxuXHRcdFx0XHRcdHN0cnVjdHVyZTogc3RydWN0dXJlLnRyaW0oKSxcblx0XHRcdFx0XHRzeW1ib2xzOiBzeW1ib2xzLnRyaW0oKSxcblx0XHRcdFx0XHRwYXJlbnRfaWQ6IHBhcmVudElkIHx8IHVuZGVmaW5lZCxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiRmFjdGlvbiBjcmVhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0bmFtZUlucHV0LmZvY3VzKCk7XG5cdH1cblxuXHRzaG93RWRpdEZhY3Rpb25Nb2RhbChmYWN0aW9uOiBGYWN0aW9uKSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkVkaXQgRmFjdGlvblwiKTtcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBuYW1lID0gZmFjdGlvbi5uYW1lO1xuXHRcdGxldCB0eXBlID0gZmFjdGlvbi50eXBlIHx8IFwiXCI7XG5cdFx0bGV0IGRlc2NyaXB0aW9uID0gZmFjdGlvbi5kZXNjcmlwdGlvbjtcblx0XHRsZXQgYmVsaWVmcyA9IGZhY3Rpb24uYmVsaWVmcztcblx0XHRsZXQgc3RydWN0dXJlID0gZmFjdGlvbi5zdHJ1Y3R1cmU7XG5cdFx0bGV0IHN5bWJvbHMgPSBmYWN0aW9uLnN5bWJvbHM7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IG5hbWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsIHZhbHVlOiBuYW1lIH0pO1xuXHRcdG5hbWVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBuYW1lID0gbmFtZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJUeXBlXCIgfSk7XG5cdFx0Y29uc3QgdHlwZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgdmFsdWU6IHR5cGUgfSk7XG5cdFx0dHlwZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IHR5cGUgPSB0eXBlSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGRlc2NJbnB1dC52YWx1ZSA9IGRlc2NyaXB0aW9uO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiQmVsaWVmc1wiIH0pO1xuXHRcdGNvbnN0IGJlbGllZnNJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRiZWxpZWZzSW5wdXQudmFsdWUgPSBiZWxpZWZzO1xuXHRcdGJlbGllZnNJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBiZWxpZWZzID0gYmVsaWVmc0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJTdHJ1Y3R1cmVcIiB9KTtcblx0XHRjb25zdCBzdHJ1Y3R1cmVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRzdHJ1Y3R1cmVJbnB1dC52YWx1ZSA9IHN0cnVjdHVyZTtcblx0XHRzdHJ1Y3R1cmVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBzdHJ1Y3R1cmUgPSBzdHJ1Y3R1cmVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiU3ltYm9sc1wiIH0pO1xuXHRcdGNvbnN0IHN5bWJvbHNJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRzeW1ib2xzSW5wdXQudmFsdWUgPSBzeW1ib2xzO1xuXHRcdHN5bWJvbHNJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBzeW1ib2xzID0gc3ltYm9sc0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlNhdmVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIW5hbWUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJOYW1lIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlRmFjdGlvbihmYWN0aW9uLmlkLCB7XG5cdFx0XHRcdFx0bmFtZTogbmFtZS50cmltKCksXG5cdFx0XHRcdFx0dHlwZTogdHlwZS50cmltKCkgfHwgdW5kZWZpbmVkLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKCksXG5cdFx0XHRcdFx0YmVsaWVmczogYmVsaWVmcy50cmltKCksXG5cdFx0XHRcdFx0c3RydWN0dXJlOiBzdHJ1Y3R1cmUudHJpbSgpLFxuXHRcdFx0XHRcdHN5bWJvbHM6IHN5bWJvbHMudHJpbSgpLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJGYWN0aW9uIHVwZGF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdC8vID09PT09PT09PT09PT09PT09PT09IFJlbGF0aW9uc2hpcCBNb2RhbHMgPT09PT09PT09PT09PT09PT09PT1cblxuXHRzaG93QWRkQ2hhcmFjdGVyUmVsYXRpb25zaGlwTW9kYWwoY2hhcmFjdGVyOiBDaGFyYWN0ZXIpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFdvcmxkKSByZXR1cm47XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkFkZCBDaGFyYWN0ZXIgUmVsYXRpb25zaGlwXCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG90aGVyQ2hhcmFjdGVySWQgPSBcIlwiO1xuXHRcdGxldCByZWxhdGlvbnNoaXBUeXBlID0gXCJhbGx5XCI7XG5cdFx0bGV0IGRlc2NyaXB0aW9uID0gXCJcIjtcblx0XHRsZXQgYmlkaXJlY3Rpb25hbCA9IHRydWU7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk90aGVyIENoYXJhY3RlciAqXCIgfSk7XG5cdFx0Y29uc3QgY2hhcmFjdGVyU2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0Y2hhcmFjdGVyU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiXCIsIHRleHQ6IFwiU2VsZWN0IGEgY2hhcmFjdGVyLi4uXCIgfSk7XG5cdFx0Zm9yIChjb25zdCBjaGFyIG9mIHRoaXMuY2hhcmFjdGVycy5maWx0ZXIoYyA9PiBjLmlkICE9PSBjaGFyYWN0ZXIuaWQpLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRjaGFyYWN0ZXJTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogY2hhci5pZCwgdGV4dDogY2hhci5uYW1lIH0pO1xuXHRcdH1cblx0XHRjaGFyYWN0ZXJTZWxlY3Qub25jaGFuZ2UgPSAoKSA9PiB7IG90aGVyQ2hhcmFjdGVySWQgPSBjaGFyYWN0ZXJTZWxlY3QudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlJlbGF0aW9uc2hpcCBUeXBlICpcIiB9KTtcblx0XHRjb25zdCB0eXBlU2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0Y29uc3QgcmVsYXRpb25zaGlwVHlwZXMgPSBbXCJhbGx5XCIsIFwiZW5lbXlcIiwgXCJmYW1pbHlcIiwgXCJsb3ZlclwiLCBcInJpdmFsXCIsIFwibWVudG9yXCIsIFwic3R1ZGVudFwiXTtcblx0XHRmb3IgKGNvbnN0IHR5cGUgb2YgcmVsYXRpb25zaGlwVHlwZXMpIHtcblx0XHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogdHlwZSwgdGV4dDogdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR5cGUuc2xpY2UoMSkgfSk7XG5cdFx0fVxuXHRcdHR5cGVTZWxlY3Qub25jaGFuZ2UgPSAoKSA9PiB7IHJlbGF0aW9uc2hpcFR5cGUgPSB0eXBlU2VsZWN0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkJpZGlyZWN0aW9uYWxcIiB9KTtcblx0XHRjb25zdCBiaWRpcmVjdGlvbmFsQ2hlY2tib3ggPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcImNoZWNrYm94XCIgfSk7XG5cdFx0YmlkaXJlY3Rpb25hbENoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xuXHRcdGJpZGlyZWN0aW9uYWxDaGVja2JveC5vbmNoYW5nZSA9ICgpID0+IHsgYmlkaXJlY3Rpb25hbCA9IGJpZGlyZWN0aW9uYWxDaGVja2JveC5jaGVja2VkOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IGNyZWF0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ3JlYXRlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0Y3JlYXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIW90aGVyQ2hhcmFjdGVySWQpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBzZWxlY3QgYSBjaGFyYWN0ZXJcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVDaGFyYWN0ZXJSZWxhdGlvbnNoaXAoY2hhcmFjdGVyLmlkLCB7XG5cdFx0XHRcdFx0Y2hhcmFjdGVyMl9pZDogb3RoZXJDaGFyYWN0ZXJJZCxcblx0XHRcdFx0XHRyZWxhdGlvbnNoaXBfdHlwZTogcmVsYXRpb25zaGlwVHlwZSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpLFxuXHRcdFx0XHRcdGJpZGlyZWN0aW9uYWw6IGJpZGlyZWN0aW9uYWwsXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIlJlbGF0aW9uc2hpcCBjcmVhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRzaG93TGlua0V2ZW50VG9FbnRpdHlNb2RhbChldmVudDogV29ybGRFdmVudCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50V29ybGQpIHJldHVybjtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KGBMaW5rIEV2ZW50OiAke2V2ZW50Lm5hbWV9YCk7XG5cdFx0XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgZW50aXR5VHlwZTogXCJjaGFyYWN0ZXJcIiB8IFwibG9jYXRpb25cIiB8IFwiYXJ0aWZhY3RcIiB8IFwiZmFjdGlvblwiIHwgXCJsb3JlXCIgPSBcImNoYXJhY3RlclwiO1xuXHRcdGxldCBlbnRpdHlJZCA9IFwiXCI7XG5cdFx0bGV0IHJlbGF0aW9uc2hpcFR5cGUgPSBcIlwiO1xuXHRcdGxldCBub3RlcyA9IFwiXCI7XG5cblx0XHQvLyBFbnRpdHkgVHlwZSBTZWxlY3Rpb25cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkVudGl0eSBUeXBlICpcIiB9KTtcblx0XHRjb25zdCB0eXBlU2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcImNoYXJhY3RlclwiLCB0ZXh0OiBcIlx1RDgzRFx1REM2NCBDaGFyYWN0ZXJcIiB9KTtcblx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwibG9jYXRpb25cIiwgdGV4dDogXCJcdUQ4M0RcdURDQ0QgTG9jYXRpb25cIiB9KTtcblx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiZmFjdGlvblwiLCB0ZXh0OiBcIlx1RDgzQ1x1REZGNCBGYWN0aW9uXCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcImFydGlmYWN0XCIsIHRleHQ6IFwiXHUyNjk0XHVGRTBGIEFydGlmYWN0XCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcImxvcmVcIiwgdGV4dDogXCJcdUQ4M0RcdURDREMgTG9yZVwiIH0pO1xuXHRcdFxuXHRcdC8vIEVudGl0eSBTZWxlY3Rpb24gKGR5bmFtaWMgYmFzZWQgb24gdHlwZSlcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkVudGl0eSAqXCIgfSk7XG5cdFx0Y29uc3QgZW50aXR5U2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0XG5cdFx0Y29uc3QgcG9wdWxhdGVFbnRpdHlTZWxlY3QgPSAoKSA9PiB7XG5cdFx0XHRlbnRpdHlTZWxlY3QuZW1wdHkoKTtcblx0XHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcIlwiLCB0ZXh0OiBgU2VsZWN0IGEgJHtlbnRpdHlUeXBlfS4uLmAgfSk7XG5cdFx0XHRlbnRpdHlJZCA9IFwiXCI7XG5cdFx0XHRcblx0XHRcdGlmIChlbnRpdHlUeXBlID09PSBcImNoYXJhY3RlclwiKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgY2hhciBvZiB0aGlzLmNoYXJhY3RlcnMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdFx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogY2hhci5pZCwgdGV4dDogY2hhci5uYW1lIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKGVudGl0eVR5cGUgPT09IFwibG9jYXRpb25cIikge1xuXHRcdFx0XHRmb3IgKGNvbnN0IGxvYyBvZiB0aGlzLmxvY2F0aW9ucy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0XHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBsb2MuaWQsIHRleHQ6IGxvYy5uYW1lIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKGVudGl0eVR5cGUgPT09IFwiZmFjdGlvblwiKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgZmFjdGlvbiBvZiB0aGlzLmZhY3Rpb25zLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRcdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IGZhY3Rpb24uaWQsIHRleHQ6IGZhY3Rpb24ubmFtZSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChlbnRpdHlUeXBlID09PSBcImFydGlmYWN0XCIpIHtcblx0XHRcdFx0Zm9yIChjb25zdCBhcnQgb2YgdGhpcy5hcnRpZmFjdHMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdFx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogYXJ0LmlkLCB0ZXh0OiBhcnQubmFtZSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChlbnRpdHlUeXBlID09PSBcImxvcmVcIikge1xuXHRcdFx0XHRmb3IgKGNvbnN0IGxvcmUgb2YgdGhpcy5sb3Jlcy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0XHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBsb3JlLmlkLCB0ZXh0OiBsb3JlLm5hbWUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHRcdFxuXHRcdC8vIEluaXRpYWxpemUgd2l0aCBjaGFyYWN0ZXJzXG5cdFx0cG9wdWxhdGVFbnRpdHlTZWxlY3QoKTtcblx0XHRcblx0XHR0eXBlU2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4geyBcblx0XHRcdGVudGl0eVR5cGUgPSB0eXBlU2VsZWN0LnZhbHVlIGFzIHR5cGVvZiBlbnRpdHlUeXBlO1xuXHRcdFx0cG9wdWxhdGVFbnRpdHlTZWxlY3QoKTtcblx0XHR9O1xuXHRcdGVudGl0eVNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHsgZW50aXR5SWQgPSBlbnRpdHlTZWxlY3QudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlJlbGF0aW9uc2hpcCBUeXBlXCIgfSk7XG5cdFx0Y29uc3QgcmVsVHlwZVNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdHJlbFR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJcIiwgdGV4dDogXCJTZWxlY3QgcmVsYXRpb25zaGlwLi4uXCIgfSk7XG5cdFx0W1wiaW52b2x2ZWRcIiwgXCJjYXVzZWRcIiwgXCJhZmZlY3RlZFwiLCBcIndpdG5lc3NlZFwiLCBcImNyZWF0ZWRcIiwgXCJkZXN0cm95ZWRcIiwgXCJwYXJ0aWNpcGF0ZWRcIiwgXCJsZWRcIiwgXCJvcHBvc2VkXCJdLmZvckVhY2gocmVsID0+IHtcblx0XHRcdHJlbFR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogcmVsLCB0ZXh0OiByZWwuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyByZWwuc2xpY2UoMSkgfSk7XG5cdFx0fSk7XG5cdFx0cmVsVHlwZVNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHsgcmVsYXRpb25zaGlwVHlwZSA9IHJlbFR5cGVTZWxlY3QudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk5vdGVzXCIgfSk7XG5cdFx0Y29uc3Qgbm90ZXNJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiLFxuXHRcdFx0cGxhY2Vob2xkZXI6IFwiQWRkaXRpb25hbCBkZXRhaWxzIGFib3V0IHRoaXMgcmVsYXRpb25zaGlwLi4uXCJcblx0XHR9KTtcblx0XHRub3Rlc0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5vdGVzID0gbm90ZXNJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBjcmVhdGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkxpbmsgRW50aXR5XCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0Y3JlYXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIWVudGl0eUlkKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYFBsZWFzZSBzZWxlY3QgYSAke2VudGl0eVR5cGV9YCwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5hZGRFdmVudFJlZmVyZW5jZShldmVudC5pZCwgZW50aXR5VHlwZSwgZW50aXR5SWQsIHJlbGF0aW9uc2hpcFR5cGUudHJpbSgpIHx8IHVuZGVmaW5lZCwgbm90ZXMudHJpbSgpIHx8IHVuZGVmaW5lZCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiRW50aXR5IGxpbmtlZCB0byBldmVudFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0c2hvd1NldEV2ZW50UGFyZW50TW9kYWwoZXZlbnQ6IFdvcmxkRXZlbnQpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFdvcmxkKSByZXR1cm47XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIlNldCBQYXJlbnQgRXZlbnQgKENhdXNlKVwiKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBwYXJlbnRJZDogc3RyaW5nIHwgbnVsbCA9IGV2ZW50LnBhcmVudF9pZCB8fCBudWxsO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyBcblx0XHRcdHRleHQ6IFwiTGluayB0aGlzIGV2ZW50IHRvIGl0cyBjYXVzZSBvciBwYXJlbnQgZXZlbnQgaW4gdGhlIHRpbWVsaW5lIGhpZXJhcmNoeS5cIixcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaGludFwiXG5cdFx0fSk7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlBhcmVudCBFdmVudCAoQ2F1c2UpXCIgfSk7XG5cdFx0Y29uc3QgcGFyZW50U2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0cGFyZW50U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiXCIsIHRleHQ6IFwiTm9uZSAoUm9vdCBFdmVudClcIiB9KTtcblx0XHRcblx0XHQvLyBTb3J0IGJ5IHRpbWVsaW5lIHBvc2l0aW9uLCB0aGVuIGJ5IG5hbWVcblx0XHRjb25zdCBzb3J0ZWRFdmVudHMgPSB0aGlzLmV2ZW50c1xuXHRcdFx0LmZpbHRlcihlID0+IGUuaWQgIT09IGV2ZW50LmlkKVxuXHRcdFx0LnNvcnQoKGEsIGIpID0+IHtcblx0XHRcdFx0Y29uc3QgcG9zQSA9IGEudGltZWxpbmVfcG9zaXRpb24gPz8gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XG5cdFx0XHRcdGNvbnN0IHBvc0IgPSBiLnRpbWVsaW5lX3Bvc2l0aW9uID8/IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xuXHRcdFx0XHRpZiAocG9zQSAhPT0gcG9zQikgcmV0dXJuIHBvc0EgLSBwb3NCO1xuXHRcdFx0XHRyZXR1cm4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKTtcblx0XHRcdH0pO1xuXHRcdFxuXHRcdGZvciAoY29uc3QgZXZ0IG9mIHNvcnRlZEV2ZW50cykge1xuXHRcdFx0Y29uc3QgcG9zTGFiZWwgPSBldnQudGltZWxpbmVfcG9zaXRpb24gIT09IHVuZGVmaW5lZCA/IGAgKFllYXIgJHtldnQudGltZWxpbmVfcG9zaXRpb259KWAgOiBcIlwiO1xuXHRcdFx0Y29uc3Qgb3B0ID0gcGFyZW50U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IGV2dC5pZCwgdGV4dDogYCR7ZXZ0Lm5hbWV9JHtwb3NMYWJlbH1gIH0pO1xuXHRcdFx0aWYgKGV2ZW50LnBhcmVudF9pZCA9PT0gZXZ0LmlkKSB7XG5cdFx0XHRcdG9wdC5zZWxlY3RlZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHBhcmVudFNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHsgcGFyZW50SWQgPSBwYXJlbnRTZWxlY3QudmFsdWUgfHwgbnVsbDsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTYXZlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50Lm1vdmVFdmVudChldmVudC5pZCwgcGFyZW50SWQpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkV2ZW50IHBhcmVudCB1cGRhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRzaG93QWRkRmFjdGlvblJlZmVyZW5jZU1vZGFsKGZhY3Rpb246IEZhY3Rpb24pIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFdvcmxkKSByZXR1cm47XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkxpbmsgRmFjdGlvbiB0byBFbnRpdHlcIik7XG5cdFx0XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgZW50aXR5VHlwZSA9IFwiY2hhcmFjdGVyXCI7XG5cdFx0bGV0IGVudGl0eUlkID0gXCJcIjtcblx0XHRsZXQgcm9sZSA9IFwiXCI7XG5cdFx0bGV0IG5vdGVzID0gXCJcIjtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRW50aXR5IFR5cGUgKlwiIH0pO1xuXHRcdGNvbnN0IHR5cGVTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiY2hhcmFjdGVyXCIsIHRleHQ6IFwiQ2hhcmFjdGVyXCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcImxvY2F0aW9uXCIsIHRleHQ6IFwiTG9jYXRpb25cIiB9KTtcblx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiYXJ0aWZhY3RcIiwgdGV4dDogXCJBcnRpZmFjdFwiIH0pO1xuXHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJldmVudFwiLCB0ZXh0OiBcIkV2ZW50XCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcImZhY3Rpb25cIiwgdGV4dDogXCJGYWN0aW9uXCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHtcblx0XHRcdGVudGl0eVR5cGUgPSB0eXBlU2VsZWN0LnZhbHVlO1xuXHRcdFx0Ly8gVXBkYXRlIGVudGl0eSBzZWxlY3Qgb3B0aW9uc1xuXHRcdFx0ZW50aXR5U2VsZWN0LmVtcHR5KCk7XG5cdFx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJcIiwgdGV4dDogYFNlbGVjdCBhICR7ZW50aXR5VHlwZX0uLi5gIH0pO1xuXHRcdFx0bG9hZEVudGl0aWVzRm9yVHlwZShlbnRpdHlUeXBlKTtcblx0XHR9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJFbnRpdHkgKlwiIH0pO1xuXHRcdGNvbnN0IGVudGl0eVNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcIlwiLCB0ZXh0OiBcIlNlbGVjdCBhbiBlbnRpdHkuLi5cIiB9KTtcblx0XHRcblx0XHRjb25zdCBsb2FkRW50aXRpZXNGb3JUeXBlID0gKHR5cGU6IHN0cmluZykgPT4ge1xuXHRcdFx0aWYgKHR5cGUgPT09IFwiY2hhcmFjdGVyXCIpIHtcblx0XHRcdFx0Zm9yIChjb25zdCBjaGFyIG9mIHRoaXMuY2hhcmFjdGVycy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0XHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBjaGFyLmlkLCB0ZXh0OiBjaGFyLm5hbWUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJsb2NhdGlvblwiKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgbG9jIG9mIHRoaXMubG9jYXRpb25zLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRcdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IGxvYy5pZCwgdGV4dDogbG9jLm5hbWUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJhcnRpZmFjdFwiKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgYXJ0IG9mIHRoaXMuYXJ0aWZhY3RzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRcdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IGFydC5pZCwgdGV4dDogYXJ0Lm5hbWUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJldmVudFwiKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgZXZ0IG9mIHRoaXMuZXZlbnRzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRcdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IGV2dC5pZCwgdGV4dDogZXZ0Lm5hbWUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJmYWN0aW9uXCIpIHtcblx0XHRcdFx0Ly8gRmlsdGVyIG91dCB0aGUgY3VycmVudCBmYWN0aW9uIHRvIGF2b2lkIHNlbGYtcmVmZXJlbmNlXG5cdFx0XHRcdGZvciAoY29uc3QgZmFjIG9mIHRoaXMuZmFjdGlvbnMuZmlsdGVyKGYgPT4gZi5pZCAhPT0gZmFjdGlvbi5pZCkuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdFx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogZmFjLmlkLCB0ZXh0OiBmYWMubmFtZSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdFx0bG9hZEVudGl0aWVzRm9yVHlwZShlbnRpdHlUeXBlKTtcblx0XHRlbnRpdHlTZWxlY3Qub25jaGFuZ2UgPSAoKSA9PiB7IGVudGl0eUlkID0gZW50aXR5U2VsZWN0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJSb2xlXCIgfSk7XG5cdFx0Y29uc3Qgcm9sZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgcGxhY2Vob2xkZXI6IFwiZS5nLiwgbGVhZGVyLCBtZW1iZXIsIGFsbHksIHJpdmFsXCIgfSk7XG5cdFx0cm9sZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IHJvbGUgPSByb2xlSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk5vdGVzXCIgfSk7XG5cdFx0Y29uc3Qgbm90ZXNJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRub3Rlc0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5vdGVzID0gbm90ZXNJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBjcmVhdGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNyZWF0ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdGNyZWF0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFlbnRpdHlJZCkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiUGxlYXNlIHNlbGVjdCBhbiBlbnRpdHlcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5hZGRGYWN0aW9uUmVmZXJlbmNlKGZhY3Rpb24uaWQsIGVudGl0eVR5cGUsIGVudGl0eUlkLCByb2xlLnRyaW0oKSB8fCB1bmRlZmluZWQsIG5vdGVzLnRyaW0oKSB8fCB1bmRlZmluZWQpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIlJlZmVyZW5jZSBjcmVhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRzaG93QWRkTG9yZVJlZmVyZW5jZU1vZGFsKGxvcmU6IExvcmUpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFdvcmxkKSByZXR1cm47XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkxpbmsgTG9yZSB0byBFbnRpdHlcIik7XG5cdFx0XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgZW50aXR5VHlwZSA9IFwiY2hhcmFjdGVyXCI7XG5cdFx0bGV0IGVudGl0eUlkID0gXCJcIjtcblx0XHRsZXQgcmVsYXRpb25zaGlwVHlwZSA9IFwiXCI7XG5cdFx0bGV0IG5vdGVzID0gXCJcIjtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRW50aXR5IFR5cGUgKlwiIH0pO1xuXHRcdGNvbnN0IHR5cGVTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiY2hhcmFjdGVyXCIsIHRleHQ6IFwiQ2hhcmFjdGVyXCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcImxvY2F0aW9uXCIsIHRleHQ6IFwiTG9jYXRpb25cIiB9KTtcblx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiYXJ0aWZhY3RcIiwgdGV4dDogXCJBcnRpZmFjdFwiIH0pO1xuXHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJldmVudFwiLCB0ZXh0OiBcIkV2ZW50XCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcImZhY3Rpb25cIiwgdGV4dDogXCJGYWN0aW9uXCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcImxvcmVcIiwgdGV4dDogXCJMb3JlXCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHtcblx0XHRcdGVudGl0eVR5cGUgPSB0eXBlU2VsZWN0LnZhbHVlO1xuXHRcdFx0Ly8gVXBkYXRlIGVudGl0eSBzZWxlY3Qgb3B0aW9uc1xuXHRcdFx0ZW50aXR5U2VsZWN0LmVtcHR5KCk7XG5cdFx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJcIiwgdGV4dDogYFNlbGVjdCBhICR7ZW50aXR5VHlwZX0uLi5gIH0pO1xuXHRcdFx0bG9hZEVudGl0aWVzRm9yVHlwZShlbnRpdHlUeXBlKTtcblx0XHR9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJFbnRpdHkgKlwiIH0pO1xuXHRcdGNvbnN0IGVudGl0eVNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcIlwiLCB0ZXh0OiBcIlNlbGVjdCBhbiBlbnRpdHkuLi5cIiB9KTtcblx0XHRcblx0XHRjb25zdCBsb2FkRW50aXRpZXNGb3JUeXBlID0gKHR5cGU6IHN0cmluZykgPT4ge1xuXHRcdFx0aWYgKHR5cGUgPT09IFwiY2hhcmFjdGVyXCIpIHtcblx0XHRcdFx0Zm9yIChjb25zdCBjaGFyIG9mIHRoaXMuY2hhcmFjdGVycy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0XHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBjaGFyLmlkLCB0ZXh0OiBjaGFyLm5hbWUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJsb2NhdGlvblwiKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgbG9jIG9mIHRoaXMubG9jYXRpb25zLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRcdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IGxvYy5pZCwgdGV4dDogbG9jLm5hbWUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJhcnRpZmFjdFwiKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgYXJ0IG9mIHRoaXMuYXJ0aWZhY3RzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRcdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IGFydC5pZCwgdGV4dDogYXJ0Lm5hbWUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJldmVudFwiKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgZXZ0IG9mIHRoaXMuZXZlbnRzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRcdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IGV2dC5pZCwgdGV4dDogZXZ0Lm5hbWUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJmYWN0aW9uXCIpIHtcblx0XHRcdFx0Zm9yIChjb25zdCBmYWMgb2YgdGhpcy5mYWN0aW9ucy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0XHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBmYWMuaWQsIHRleHQ6IGZhYy5uYW1lIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwibG9yZVwiKSB7XG5cdFx0XHRcdC8vIEZpbHRlciBvdXQgdGhlIGN1cnJlbnQgbG9yZSB0byBhdm9pZCBzZWxmLXJlZmVyZW5jZVxuXHRcdFx0XHRmb3IgKGNvbnN0IGwgb2YgdGhpcy5sb3Jlcy5maWx0ZXIobCA9PiBsLmlkICE9PSBsb3JlLmlkKS5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0XHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBsLmlkLCB0ZXh0OiBsLm5hbWUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHRcdGxvYWRFbnRpdGllc0ZvclR5cGUoZW50aXR5VHlwZSk7XG5cdFx0ZW50aXR5U2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4geyBlbnRpdHlJZCA9IGVudGl0eVNlbGVjdC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiUmVsYXRpb25zaGlwIFR5cGVcIiB9KTtcblx0XHRjb25zdCByZWxUeXBlSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCBwbGFjZWhvbGRlcjogXCJlLmcuLCBwcmFjdGl0aW9uZXIsIG9yaWdpbiwgZm9yYmlkZGVuXCIgfSk7XG5cdFx0cmVsVHlwZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IHJlbGF0aW9uc2hpcFR5cGUgPSByZWxUeXBlSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk5vdGVzXCIgfSk7XG5cdFx0Y29uc3Qgbm90ZXNJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRub3Rlc0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5vdGVzID0gbm90ZXNJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBjcmVhdGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNyZWF0ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdGNyZWF0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFlbnRpdHlJZCkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiUGxlYXNlIHNlbGVjdCBhbiBlbnRpdHlcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5hZGRMb3JlUmVmZXJlbmNlKGxvcmUuaWQsIGVudGl0eVR5cGUsIGVudGl0eUlkLCByZWxhdGlvbnNoaXBUeXBlLnRyaW0oKSB8fCB1bmRlZmluZWQsIG5vdGVzLnRyaW0oKSB8fCB1bmRlZmluZWQpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIlJlZmVyZW5jZSBjcmVhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHQvLyA9PT09PT09PT09PT09PT09PT09PSBDaGFyYWN0ZXIgRGV0YWlscyBWaWV3IE1ldGhvZHMgPT09PT09PT09PT09PT09PT09PT1cblxuXHRhc3luYyBzaG93Q2hhcmFjdGVyRGV0YWlscyhjaGFyYWN0ZXI6IENoYXJhY3Rlcikge1xuXHRcdHRoaXMudmlld01vZGUgPSBcImNoYXJhY3Rlci1kZXRhaWxzXCI7XG5cdFx0XG5cdFx0Ly8gR2V0IHdvcmxkIGlmIGF2YWlsYWJsZVxuXHRcdGNvbnN0IHdvcmxkID0gY2hhcmFjdGVyLndvcmxkX2lkID8gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldFdvcmxkKGNoYXJhY3Rlci53b3JsZF9pZCkuY2F0Y2goKCkgPT4gbnVsbCkgOiBudWxsO1xuXHRcdFxuXHRcdC8vIEdldCBjaGFyYWN0ZXJzIGZvciByZWxhdGlvbnNoaXBzIChmcm9tIHdvcmxkIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGVtcHR5KVxuXHRcdGNvbnN0IGNoYXJhY3RlcnMgPSB3b3JsZCA/IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRDaGFyYWN0ZXJzKHdvcmxkLmlkKS5jYXRjaCgoKSA9PiBbXSkgOiBbXTtcblx0XHRcblx0XHQvLyBFbnN1cmUgdHJhaXRzIGFuZCBhcmNoZXR5cGVzIGFyZSBsb2FkZWQgKHRoZXkncmUgZ2xvYmFsIHBlciB0ZW5hbnQpXG5cdFx0bGV0IHRyYWl0cyA9IHRoaXMudHJhaXRzO1xuXHRcdGxldCBhcmNoZXR5cGVzID0gdGhpcy5hcmNoZXR5cGVzO1xuXHRcdGxldCBldmVudHMgPSB3b3JsZCA/IHRoaXMuZXZlbnRzIDogW107XG5cdFx0XG5cdFx0Ly8gSWYgdHJhaXRzIG9yIGFyY2hldHlwZXMgYXJlIGVtcHR5LCBsb2FkIHRoZW1cblx0XHRpZiAoIXRyYWl0cyB8fCB0cmFpdHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHR0cmFpdHMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0VHJhaXRzKCk7XG5cdFx0XHRcdHRoaXMudHJhaXRzID0gdHJhaXRzO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBsb2FkIHRyYWl0czpcIiwgZXJyKTtcblx0XHRcdFx0dHJhaXRzID0gW107XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdGlmICghYXJjaGV0eXBlcyB8fCBhcmNoZXR5cGVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXJjaGV0eXBlcyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRBcmNoZXR5cGVzKCk7XG5cdFx0XHRcdHRoaXMuYXJjaGV0eXBlcyA9IGFyY2hldHlwZXM7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGxvYWQgYXJjaGV0eXBlczpcIiwgZXJyKTtcblx0XHRcdFx0YXJjaGV0eXBlcyA9IFtdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHQvLyBJZiB3b3JsZCBpcyBhdmFpbGFibGUgYnV0IGV2ZW50cyBhcmUgZW1wdHksIGxvYWQgdGhlbVxuXHRcdGlmICh3b3JsZCAmJiAoIWV2ZW50cyB8fCBldmVudHMubGVuZ3RoID09PSAwKSkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0ZXZlbnRzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldEV2ZW50cyh3b3JsZC5pZCk7XG5cdFx0XHRcdHRoaXMuZXZlbnRzID0gZXZlbnRzO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBsb2FkIGV2ZW50czpcIiwgZXJyKTtcblx0XHRcdFx0ZXZlbnRzID0gW107XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdC8vIENyZWF0ZSBDaGFyYWN0ZXJEZXRhaWxzVmlldyBpbnN0YW5jZVxuXHRcdHRoaXMuY2hhcmFjdGVyRGV0YWlsc1ZpZXcgPSBuZXcgQ2hhcmFjdGVyRGV0YWlsc1ZpZXcoXG5cdFx0XHR0aGlzLnBsdWdpbixcblx0XHRcdGNoYXJhY3Rlcixcblx0XHRcdHRoaXMuaGVhZGVyRWwsXG5cdFx0XHR0aGlzLmNvbnRlbnRFbCxcblx0XHRcdCgpID0+IHtcblx0XHRcdFx0Ly8gb25CYWNrIGNhbGxiYWNrXG5cdFx0XHRcdHRoaXMuY2hhcmFjdGVyRGV0YWlsc1ZpZXcgPSBudWxsO1xuXHRcdFx0XHRpZiAodGhpcy5jdXJyZW50V29ybGQpIHtcblx0XHRcdFx0XHR0aGlzLnZpZXdNb2RlID0gXCJ3b3JsZC1kZXRhaWxzXCI7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZERldGFpbHMoKTtcblx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLmN1cnJlbnRTdG9yeSkge1xuXHRcdFx0XHRcdHRoaXMudmlld01vZGUgPSBcImRldGFpbHNcIjtcblx0XHRcdFx0XHR0aGlzLnJlbmRlckRldGFpbHMoKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLnZpZXdNb2RlID0gXCJsaXN0XCI7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJMaXN0SGVhZGVyKCk7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJMaXN0Q29udGVudCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0KGNoYXJhY3RlcikgPT4ge1xuXHRcdFx0XHQvLyBvbkVkaXRDaGFyYWN0ZXIgY2FsbGJhY2tcblx0XHRcdFx0dGhpcy5zaG93RWRpdENoYXJhY3Rlck1vZGFsKGNoYXJhY3Rlcik7XG5cdFx0XHR9LFxuXHRcdFx0d29ybGQsXG5cdFx0XHRjaGFyYWN0ZXJzLFxuXHRcdFx0YXJjaGV0eXBlcyxcblx0XHRcdHRyYWl0cyxcblx0XHRcdGV2ZW50c1xuXHRcdCk7XG5cdFx0XG5cdFx0YXdhaXQgdGhpcy5jaGFyYWN0ZXJEZXRhaWxzVmlldy5yZW5kZXIoKTtcblx0fVxuXG59XG5cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IENoYXB0ZXIgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcblxuZXhwb3J0IGNsYXNzIENoYXB0ZXJNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0Y2hhcHRlcjogUGFydGlhbDxDaGFwdGVyPiA9IHtcblx0XHR0aXRsZTogXCJcIixcblx0XHRzdGF0dXM6IFwiZHJhZnRcIixcblx0fTtcblx0aXNFZGl0OiBib29sZWFuID0gZmFsc2U7XG5cdGV4aXN0aW5nQ2hhcHRlcnM6IENoYXB0ZXJbXSA9IFtdO1xuXHRvblN1Ym1pdDogKGNoYXB0ZXI6IFBhcnRpYWw8Q2hhcHRlcj4pID0+IFByb21pc2U8dm9pZD47XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0YXBwOiBBcHAsXG5cdFx0b25TdWJtaXQ6IChjaGFwdGVyOiBQYXJ0aWFsPENoYXB0ZXI+KSA9PiBQcm9taXNlPHZvaWQ+LFxuXHRcdGV4aXN0aW5nQ2hhcHRlcnM6IENoYXB0ZXJbXSA9IFtdLFxuXHRcdGNoYXB0ZXI/OiBDaGFwdGVyXG5cdCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuXHRcdHRoaXMuZXhpc3RpbmdDaGFwdGVycyA9IGV4aXN0aW5nQ2hhcHRlcnM7XG5cdFx0aWYgKGNoYXB0ZXIpIHtcblx0XHRcdHRoaXMuaXNFZGl0ID0gdHJ1ZTtcblx0XHRcdHRoaXMuY2hhcHRlciA9IHtcblx0XHRcdFx0bnVtYmVyOiBjaGFwdGVyLm51bWJlcixcblx0XHRcdFx0dGl0bGU6IGNoYXB0ZXIudGl0bGUsXG5cdFx0XHRcdHN0YXR1czogY2hhcHRlci5zdGF0dXMsXG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHtcblx0XHRcdHRleHQ6IHRoaXMuaXNFZGl0ID8gXCJFZGl0IENoYXB0ZXJcIiA6IFwiQ3JlYXRlIENoYXB0ZXJcIixcblx0XHR9KTtcblxuXHRcdGlmICh0aGlzLmlzRWRpdCkge1xuXHRcdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0XHQuc2V0TmFtZShcIkNoYXB0ZXIgTnVtYmVyXCIpXG5cdFx0XHRcdC5zZXREZXNjKFwiVGhlIGNoYXB0ZXIgbnVtYmVyXCIpXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIjFcIilcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLmNoYXB0ZXIubnVtYmVyPy50b1N0cmluZygpIHx8IFwiMVwiKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGlmICghaXNOYU4obnVtKSAmJiBudW0gPiAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5jaGFwdGVyLm51bWJlciA9IG51bTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblx0XHR9XG5cblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZShcIlRpdGxlXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkNoYXB0ZXIgdGl0bGVcIilcblx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiQ2hhcHRlciBUaXRsZVwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLmNoYXB0ZXIudGl0bGUgfHwgXCJcIilcblx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmNoYXB0ZXIudGl0bGUgPSB2YWx1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zdWJtaXQoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5zZXROYW1lKFwiU3RhdHVzXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkNoYXB0ZXIgc3RhdHVzXCIpXG5cdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxuXHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJkcmFmdFwiLCBcIkRyYWZ0XCIpXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihcImluX3Byb2dyZXNzXCIsIFwiSW4gUHJvZ3Jlc3NcIilcblx0XHRcdFx0XHQuYWRkT3B0aW9uKFwiY29tcGxldGVkXCIsIFwiQ29tcGxldGVkXCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuY2hhcHRlci5zdGF0dXMgfHwgXCJkcmFmdFwiKVxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuY2hhcHRlci5zdGF0dXMgPSB2YWx1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXG5cdFx0Y29uc3Qgc3VibWl0QnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IHRoaXMuaXNFZGl0ID8gXCJVcGRhdGVcIiA6IFwiQ3JlYXRlXCIsXG5cdFx0XHRjbHM6IFwibW9kLWN0YVwiLFxuXHRcdH0pO1xuXHRcdHN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5zdWJtaXQoKSk7XG5cblx0XHRjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJDYW5jZWxcIixcblx0XHR9KTtcblx0XHRjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XG5cblx0XHRjb25zdCB0aXRsZUlucHV0ID0gY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFtwbGFjZWhvbGRlcj0nQ2hhcHRlciBUaXRsZSddXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsO1xuXHRcdGlmICh0aXRsZUlucHV0KSB7XG5cdFx0XHR0aXRsZUlucHV0LmZvY3VzKCk7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgc3VibWl0KCkge1xuXHRcdGlmICghdGhpcy5jaGFwdGVyLnRpdGxlPy50cmltKCkpIHtcblx0XHRcdG5ldyBOb3RpY2UoXCJQbGVhc2UgZW50ZXIgYSBjaGFwdGVyIHRpdGxlXCIsIDMwMDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEF1dG8tY2FsY3VsYXRlIGNoYXB0ZXIgbnVtYmVyIGlmIGNyZWF0aW5nXG5cdFx0aWYgKCF0aGlzLmlzRWRpdCkge1xuXHRcdFx0Y29uc3QgbWF4TnVtYmVyID0gdGhpcy5leGlzdGluZ0NoYXB0ZXJzLmxlbmd0aCA+IDBcblx0XHRcdFx0PyBNYXRoLm1heCguLi50aGlzLmV4aXN0aW5nQ2hhcHRlcnMubWFwKGMgPT4gYy5udW1iZXIpKVxuXHRcdFx0XHQ6IDA7XG5cdFx0XHR0aGlzLmNoYXB0ZXIubnVtYmVyID0gbWF4TnVtYmVyICsgMTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKCF0aGlzLmNoYXB0ZXIubnVtYmVyIHx8IHRoaXMuY2hhcHRlci5udW1iZXIgPCAxKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJDaGFwdGVyIG51bWJlciBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHRoaXMub25TdWJtaXQodGhpcy5jaGFwdGVyKTtcblx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBzYXZlIGNoYXB0ZXJcIjtcblx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yTWVzc2FnZX1gLCA1MDAwKTtcblx0XHR9XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IFNjZW5lLCBDaGFwdGVyIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5cbmV4cG9ydCBjbGFzcyBTY2VuZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRzY2VuZTogUGFydGlhbDxTY2VuZT4gPSB7XG5cdFx0dGltZV9yZWY6IFwiXCIsXG5cdFx0Z29hbDogXCJcIixcblx0fTtcblx0aXNFZGl0OiBib29sZWFuID0gZmFsc2U7XG5cdGNoYXB0ZXJzOiBDaGFwdGVyW10gPSBbXTtcblx0ZXhpc3RpbmdTY2VuZXM6IFNjZW5lW10gPSBbXTtcblx0c3RvcnlJZDogc3RyaW5nO1xuXHRkZWZhdWx0Q2hhcHRlcklkPzogc3RyaW5nIHwgbnVsbDtcblx0b25TdWJtaXQ6IChzY2VuZTogUGFydGlhbDxTY2VuZT4pID0+IFByb21pc2U8dm9pZD47XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0YXBwOiBBcHAsXG5cdFx0c3RvcnlJZDogc3RyaW5nLFxuXHRcdGNoYXB0ZXJzOiBDaGFwdGVyW10sXG5cdFx0b25TdWJtaXQ6IChzY2VuZTogUGFydGlhbDxTY2VuZT4pID0+IFByb21pc2U8dm9pZD4sXG5cdFx0ZXhpc3RpbmdTY2VuZXM6IFNjZW5lW10gPSBbXSxcblx0XHRzY2VuZT86IFNjZW5lLFxuXHRcdGRlZmF1bHRDaGFwdGVySWQ/OiBzdHJpbmcgfCBudWxsXG5cdCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5zdG9yeUlkID0gc3RvcnlJZDtcblx0XHR0aGlzLmNoYXB0ZXJzID0gY2hhcHRlcnM7XG5cdFx0dGhpcy5leGlzdGluZ1NjZW5lcyA9IGV4aXN0aW5nU2NlbmVzO1xuXHRcdHRoaXMuZGVmYXVsdENoYXB0ZXJJZCA9IGRlZmF1bHRDaGFwdGVySWQ7XG5cdFx0dGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuXHRcdGlmIChzY2VuZSkge1xuXHRcdFx0dGhpcy5pc0VkaXQgPSB0cnVlO1xuXHRcdFx0dGhpcy5zY2VuZSA9IHtcblx0XHRcdFx0c3RvcnlfaWQ6IHNjZW5lLnN0b3J5X2lkLFxuXHRcdFx0XHRjaGFwdGVyX2lkOiBzY2VuZS5jaGFwdGVyX2lkIHx8IG51bGwsXG5cdFx0XHRcdG9yZGVyX251bTogc2NlbmUub3JkZXJfbnVtLFxuXHRcdFx0XHR0aW1lX3JlZjogc2NlbmUudGltZV9yZWYsXG5cdFx0XHRcdGdvYWw6IHNjZW5lLmdvYWwsXG5cdFx0XHRcdHBvdl9jaGFyYWN0ZXJfaWQ6IHNjZW5lLnBvdl9jaGFyYWN0ZXJfaWQsXG5cdFx0XHRcdGxvY2F0aW9uX2lkOiBzY2VuZS5sb2NhdGlvbl9pZCxcblx0XHRcdH07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuc2NlbmUuc3RvcnlfaWQgPSBzdG9yeUlkO1xuXHRcdFx0Ly8gUHJlLXNlbGVjdCBjaGFwdGVyIGlmIHByb3ZpZGVkXG5cdFx0XHRpZiAoZGVmYXVsdENoYXB0ZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdHRoaXMuc2NlbmUuY2hhcHRlcl9pZCA9IGRlZmF1bHRDaGFwdGVySWQ7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwge1xuXHRcdFx0dGV4dDogdGhpcy5pc0VkaXQgPyBcIkVkaXQgU2NlbmVcIiA6IFwiQ3JlYXRlIFNjZW5lXCIsXG5cdFx0fSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZShcIkNoYXB0ZXJcIilcblx0XHRcdC5zZXREZXNjKFwiU2VsZWN0IHRoZSBjaGFwdGVyIGZvciB0aGlzIHNjZW5lIChvcHRpb25hbClcIilcblx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcblx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKFwiXCIsIFwiTm8gQ2hhcHRlclwiKTtcblx0XHRcdFx0Zm9yIChjb25zdCBjaGFwdGVyIG9mIHRoaXMuY2hhcHRlcnMuc29ydCgoYSwgYikgPT4gYS5udW1iZXIgLSBiLm51bWJlcikpIHtcblx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24oXG5cdFx0XHRcdFx0XHRjaGFwdGVyLmlkLFxuXHRcdFx0XHRcdFx0YENoYXB0ZXIgJHtjaGFwdGVyLm51bWJlcn06ICR7Y2hhcHRlci50aXRsZX1gXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnNjZW5lLmNoYXB0ZXJfaWQgfHwgXCJcIik7XG5cdFx0XHRcdGRyb3Bkb3duLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuc2NlbmUuY2hhcHRlcl9pZCA9IHZhbHVlIHx8IG51bGw7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRpZiAodGhpcy5pc0VkaXQpIHtcblx0XHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdFx0LnNldE5hbWUoXCJPcmRlciBOdW1iZXJcIilcblx0XHRcdFx0LnNldERlc2MoXCJTY2VuZSBvcmRlciB3aXRoaW4gY2hhcHRlclwiKVxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCIxXCIpXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5zY2VuZS5vcmRlcl9udW0/LnRvU3RyaW5nKCkgfHwgXCIxXCIpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0aWYgKCFpc05hTihudW0pICYmIG51bSA+IDApIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnNjZW5lLm9yZGVyX251bSA9IG51bTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblx0XHR9XG5cblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZShcIkdvYWxcIilcblx0XHRcdC5zZXREZXNjKFwiU2NlbmUgZ29hbCBvciBkZXNjcmlwdGlvblwiKVxuXHRcdFx0LmFkZFRleHRBcmVhKCh0ZXh0KSA9PlxuXHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiV2hhdCBoYXBwZW5zIGluIHRoaXMgc2NlbmU/XCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuc2NlbmUuZ29hbCB8fCBcIlwiKVxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuc2NlbmUuZ29hbCA9IHZhbHVlO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJUaW1lIFJlZmVyZW5jZVwiKVxuXHRcdFx0LnNldERlc2MoXCJXaGVuIGRvZXMgdGhpcyBzY2VuZSB0YWtlIHBsYWNlP1wiKVxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdHRleHRcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJNb3JuaW5nLCBFdmVuaW5nLCBldGMuXCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuc2NlbmUudGltZV9yZWYgfHwgXCJcIilcblx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnNjZW5lLnRpbWVfcmVmID0gdmFsdWU7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblxuXHRcdGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiB0aGlzLmlzRWRpdCA/IFwiVXBkYXRlXCIgOiBcIkNyZWF0ZVwiLFxuXHRcdFx0Y2xzOiBcIm1vZC1jdGFcIixcblx0XHR9KTtcblx0XHRzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuc3VibWl0KCkpO1xuXG5cdFx0Y29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiQ2FuY2VsXCIsXG5cdFx0fSk7XG5cdFx0Y2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuXG5cdFx0Y29uc3QgZ29hbElucHV0ID0gY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoXCJ0ZXh0YXJlYVwiKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50IHwgbnVsbDtcblx0XHRpZiAoZ29hbElucHV0KSB7XG5cdFx0XHRnb2FsSW5wdXQuZm9jdXMoKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBzdWJtaXQoKSB7XG5cdFx0Ly8gQXV0by1jYWxjdWxhdGUgb3JkZXJfbnVtIGlmIGNyZWF0aW5nXG5cdFx0aWYgKCF0aGlzLmlzRWRpdCkge1xuXHRcdFx0Y29uc3QgY2hhcHRlcklkID0gdGhpcy5zY2VuZS5jaGFwdGVyX2lkIHx8IG51bGw7XG5cdFx0XHRjb25zdCBzY2VuZXNJbkNoYXB0ZXIgPSB0aGlzLmV4aXN0aW5nU2NlbmVzLmZpbHRlcihzID0+IFxuXHRcdFx0XHQocy5jaGFwdGVyX2lkIHx8IG51bGwpID09PSBjaGFwdGVySWRcblx0XHRcdCk7XG5cdFx0XHRjb25zdCBtYXhPcmRlck51bSA9IHNjZW5lc0luQ2hhcHRlci5sZW5ndGggPiAwXG5cdFx0XHRcdD8gTWF0aC5tYXgoLi4uc2NlbmVzSW5DaGFwdGVyLm1hcChzID0+IHMub3JkZXJfbnVtKSlcblx0XHRcdFx0OiAwO1xuXHRcdFx0dGhpcy5zY2VuZS5vcmRlcl9udW0gPSBtYXhPcmRlck51bSArIDE7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICghdGhpcy5zY2VuZS5vcmRlcl9udW0gfHwgdGhpcy5zY2VuZS5vcmRlcl9udW0gPCAxKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJPcmRlciBudW1iZXIgbXVzdCBiZSBncmVhdGVyIHRoYW4gMFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCB0aGlzLm9uU3VibWl0KHRoaXMuc2NlbmUpO1xuXHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIHNhdmUgc2NlbmVcIjtcblx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yTWVzc2FnZX1gLCA1MDAwKTtcblx0XHR9XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEJlYXQsIFNjZW5lLCBDaGFwdGVyIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5cbmV4cG9ydCBjbGFzcyBCZWF0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGJlYXQ6IFBhcnRpYWw8QmVhdD4gPSB7XG5cdFx0dHlwZTogXCJzZXR1cFwiLFxuXHRcdGludGVudDogXCJcIixcblx0XHRvdXRjb21lOiBcIlwiLFxuXHR9O1xuXHRpc0VkaXQ6IGJvb2xlYW4gPSBmYWxzZTtcblx0c2NlbmVzOiBTY2VuZVtdID0gW107XG5cdGNoYXB0ZXJzOiBDaGFwdGVyW10gPSBbXTtcblx0ZXhpc3RpbmdCZWF0czogQmVhdFtdID0gW107XG5cdHN0b3J5SWQ6IHN0cmluZztcblx0ZGVmYXVsdFNjZW5lSWQ/OiBzdHJpbmc7XG5cdG9uU3VibWl0OiAoYmVhdDogUGFydGlhbDxCZWF0PikgPT4gUHJvbWlzZTx2b2lkPjtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRhcHA6IEFwcCxcblx0XHRzdG9yeUlkOiBzdHJpbmcsXG5cdFx0c2NlbmVzOiBTY2VuZVtdLFxuXHRcdG9uU3VibWl0OiAoYmVhdDogUGFydGlhbDxCZWF0PikgPT4gUHJvbWlzZTx2b2lkPixcblx0XHRleGlzdGluZ0JlYXRzOiBCZWF0W10gPSBbXSxcblx0XHRiZWF0PzogQmVhdCxcblx0XHRjaGFwdGVyczogQ2hhcHRlcltdID0gW10sXG5cdFx0ZGVmYXVsdFNjZW5lSWQ/OiBzdHJpbmdcblx0KSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnN0b3J5SWQgPSBzdG9yeUlkO1xuXHRcdHRoaXMuc2NlbmVzID0gc2NlbmVzO1xuXHRcdHRoaXMuY2hhcHRlcnMgPSBjaGFwdGVycztcblx0XHR0aGlzLmV4aXN0aW5nQmVhdHMgPSBleGlzdGluZ0JlYXRzO1xuXHRcdHRoaXMuZGVmYXVsdFNjZW5lSWQgPSBkZWZhdWx0U2NlbmVJZDtcblx0XHR0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XG5cdFx0aWYgKGJlYXQpIHtcblx0XHRcdHRoaXMuaXNFZGl0ID0gdHJ1ZTtcblx0XHRcdHRoaXMuYmVhdCA9IHtcblx0XHRcdFx0c2NlbmVfaWQ6IGJlYXQuc2NlbmVfaWQsXG5cdFx0XHRcdG9yZGVyX251bTogYmVhdC5vcmRlcl9udW0sXG5cdFx0XHRcdHR5cGU6IGJlYXQudHlwZSxcblx0XHRcdFx0aW50ZW50OiBiZWF0LmludGVudCxcblx0XHRcdFx0b3V0Y29tZTogYmVhdC5vdXRjb21lLFxuXHRcdFx0fTtcblx0XHR9IGVsc2UgaWYgKGRlZmF1bHRTY2VuZUlkKSB7XG5cdFx0XHR0aGlzLmJlYXQuc2NlbmVfaWQgPSBkZWZhdWx0U2NlbmVJZDtcblx0XHR9XG5cdH1cblxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7XG5cdFx0XHR0ZXh0OiB0aGlzLmlzRWRpdCA/IFwiRWRpdCBCZWF0XCIgOiBcIkNyZWF0ZSBCZWF0XCIsXG5cdFx0fSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZShcIlNjZW5lXCIpXG5cdFx0XHQuc2V0RGVzYyhcIlNlbGVjdCB0aGUgc2NlbmUgZm9yIHRoaXMgYmVhdFwiKVxuXHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuXHRcdFx0XHQvLyBHcm91cCBzY2VuZXMgYnkgY2hhcHRlciBmb3IgYmV0dGVyIFVYXG5cdFx0XHRcdGNvbnN0IHNjZW5lc0J5Q2hhcHRlciA9IG5ldyBNYXA8c3RyaW5nIHwgbnVsbCwgU2NlbmVbXT4oKTtcblx0XHRcdFx0Zm9yIChjb25zdCBzY2VuZSBvZiB0aGlzLnNjZW5lcykge1xuXHRcdFx0XHRcdGNvbnN0IGNoYXB0ZXJJZCA9IHNjZW5lLmNoYXB0ZXJfaWQgfHwgbnVsbDtcblx0XHRcdFx0XHRpZiAoIXNjZW5lc0J5Q2hhcHRlci5oYXMoY2hhcHRlcklkKSkge1xuXHRcdFx0XHRcdFx0c2NlbmVzQnlDaGFwdGVyLnNldChjaGFwdGVySWQsIFtdKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c2NlbmVzQnlDaGFwdGVyLmdldChjaGFwdGVySWQpIS5wdXNoKHNjZW5lKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEhlbHBlciB0byBnZXQgY2hhcHRlciBsYWJlbFxuXHRcdFx0XHRjb25zdCBnZXRDaGFwdGVyTGFiZWwgPSAoY2hhcHRlcklkOiBzdHJpbmcgfCBudWxsKTogc3RyaW5nID0+IHtcblx0XHRcdFx0XHRpZiAoIWNoYXB0ZXJJZCkgcmV0dXJuIFwiTm8gQ2hhcHRlclwiO1xuXHRcdFx0XHRcdGNvbnN0IGNoYXB0ZXIgPSB0aGlzLmNoYXB0ZXJzLmZpbmQoYyA9PiBjLmlkID09PSBjaGFwdGVySWQpO1xuXHRcdFx0XHRcdHJldHVybiBjaGFwdGVyID8gYENoYXB0ZXIgJHtjaGFwdGVyLm51bWJlcn06ICR7Y2hhcHRlci50aXRsZX1gIDogXCJObyBDaGFwdGVyXCI7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gQWRkIHNjZW5lcyBncm91cGVkXG5cdFx0XHRcdGZvciAoY29uc3QgW2NoYXB0ZXJJZCwgY2hhcHRlclNjZW5lc10gb2Ygc2NlbmVzQnlDaGFwdGVyLmVudHJpZXMoKSkge1xuXHRcdFx0XHRcdGNvbnN0IGxhYmVsID0gZ2V0Q2hhcHRlckxhYmVsKGNoYXB0ZXJJZCk7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBjaGFwdGVyU2NlbmVzLnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pKSB7XG5cdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24oXG5cdFx0XHRcdFx0XHRcdHNjZW5lLmlkLFxuXHRcdFx0XHRcdFx0XHRgJHtsYWJlbH0gPiBTY2VuZSAke3NjZW5lLm9yZGVyX251bX06ICR7c2NlbmUuZ29hbCB8fCBcIlVudGl0bGVkXCJ9YFxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLmJlYXQuc2NlbmVfaWQgfHwgXCJcIik7XG5cdFx0XHRcdGRyb3Bkb3duLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuYmVhdC5zY2VuZV9pZCA9IHZhbHVlO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0aWYgKHRoaXMuaXNFZGl0KSB7XG5cdFx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHRcdC5zZXROYW1lKFwiT3JkZXIgTnVtYmVyXCIpXG5cdFx0XHRcdC5zZXREZXNjKFwiQmVhdCBvcmRlciB3aXRoaW4gc2NlbmVcIilcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiMVwiKVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuYmVhdC5vcmRlcl9udW0/LnRvU3RyaW5nKCkgfHwgXCIxXCIpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0aWYgKCFpc05hTihudW0pICYmIG51bSA+IDApIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmJlYXQub3JkZXJfbnVtID0gbnVtO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdH1cblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5zZXROYW1lKFwiVHlwZVwiKVxuXHRcdFx0LnNldERlc2MoXCJCZWF0IHR5cGVcIilcblx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+XG5cdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihcInNldHVwXCIsIFwiU2V0dXBcIilcblx0XHRcdFx0XHQuYWRkT3B0aW9uKFwidHVyblwiLCBcIlR1cm5cIilcblx0XHRcdFx0XHQuYWRkT3B0aW9uKFwicmV2ZWFsXCIsIFwiUmV2ZWFsXCIpXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihcImNvbmZsaWN0XCIsIFwiQ29uZmxpY3RcIilcblx0XHRcdFx0XHQuYWRkT3B0aW9uKFwiY2xpbWF4XCIsIFwiQ2xpbWF4XCIpXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihcInJlc29sdXRpb25cIiwgXCJSZXNvbHV0aW9uXCIpXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihcImhvb2tcIiwgXCJIb29rXCIpXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihcInRyYW5zaXRpb25cIiwgXCJUcmFuc2l0aW9uXCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuYmVhdC50eXBlIHx8IFwic2V0dXBcIilcblx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmJlYXQudHlwZSA9IHZhbHVlO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJJbnRlbnRcIilcblx0XHRcdC5zZXREZXNjKFwiV2hhdCBpcyB0aGUgaW50ZW50IG9mIHRoaXMgYmVhdD9cIilcblx0XHRcdC5hZGRUZXh0QXJlYSgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIldoYXQgZG9lcyB0aGUgY2hhcmFjdGVyIHdhbnQ/XCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuYmVhdC5pbnRlbnQgfHwgXCJcIilcblx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmJlYXQuaW50ZW50ID0gdmFsdWU7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZShcIk91dGNvbWVcIilcblx0XHRcdC5zZXREZXNjKFwiV2hhdCBpcyB0aGUgb3V0Y29tZSBvZiB0aGlzIGJlYXQ/XCIpXG5cdFx0XHQuYWRkVGV4dEFyZWEoKHRleHQpID0+XG5cdFx0XHRcdHRleHRcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJXaGF0IGhhcHBlbnMgYXMgYSByZXN1bHQ/XCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuYmVhdC5vdXRjb21lIHx8IFwiXCIpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5iZWF0Lm91dGNvbWUgPSB2YWx1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXG5cdFx0Y29uc3Qgc3VibWl0QnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IHRoaXMuaXNFZGl0ID8gXCJVcGRhdGVcIiA6IFwiQ3JlYXRlXCIsXG5cdFx0XHRjbHM6IFwibW9kLWN0YVwiLFxuXHRcdH0pO1xuXHRcdHN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5zdWJtaXQoKSk7XG5cblx0XHRjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJDYW5jZWxcIixcblx0XHR9KTtcblx0XHRjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XG5cblx0XHRjb25zdCBpbnRlbnRJbnB1dCA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFcIikgYXMgSFRNTFRleHRBcmVhRWxlbWVudCB8IG51bGw7XG5cdFx0aWYgKGludGVudElucHV0KSB7XG5cdFx0XHRpbnRlbnRJbnB1dC5mb2N1cygpO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIHN1Ym1pdCgpIHtcblx0XHRpZiAoIXRoaXMuYmVhdC5zY2VuZV9pZCkge1xuXHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBzZWxlY3QgYSBzY2VuZVwiLCAzMDAwKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIXRoaXMuYmVhdC50eXBlKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiUGxlYXNlIHNlbGVjdCBhIGJlYXQgdHlwZVwiLCAzMDAwKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBBdXRvLWNhbGN1bGF0ZSBvcmRlcl9udW0gaWYgY3JlYXRpbmdcblx0XHRpZiAoIXRoaXMuaXNFZGl0KSB7XG5cdFx0XHRjb25zdCBiZWF0c0luU2NlbmUgPSB0aGlzLmV4aXN0aW5nQmVhdHMuZmlsdGVyKGIgPT4gYi5zY2VuZV9pZCA9PT0gdGhpcy5iZWF0LnNjZW5lX2lkKTtcblx0XHRcdGNvbnN0IG1heE9yZGVyTnVtID0gYmVhdHNJblNjZW5lLmxlbmd0aCA+IDBcblx0XHRcdFx0PyBNYXRoLm1heCguLi5iZWF0c0luU2NlbmUubWFwKGIgPT4gYi5vcmRlcl9udW0pKVxuXHRcdFx0XHQ6IDA7XG5cdFx0XHR0aGlzLmJlYXQub3JkZXJfbnVtID0gbWF4T3JkZXJOdW0gKyAxO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAoIXRoaXMuYmVhdC5vcmRlcl9udW0gfHwgdGhpcy5iZWF0Lm9yZGVyX251bSA8IDEpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk9yZGVyIG51bWJlciBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHRoaXMub25TdWJtaXQodGhpcy5iZWF0KTtcblx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBzYXZlIGJlYXRcIjtcblx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yTWVzc2FnZX1gLCA1MDAwKTtcblx0XHR9XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IENvbnRlbnRCbG9jayB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgVW5zcGxhc2hDbGllbnQsIFVuc3BsYXNoUGhvdG8gfSBmcm9tIFwiLi4vLi4vYXBpL3Vuc3BsYXNoXCI7XG5pbXBvcnQgU3RvcnlFbmdpbmVQbHVnaW4gZnJvbSBcIi4uLy4uL21haW5cIjtcblxuZXhwb3J0IGNsYXNzIENvbnRlbnRCbG9ja01vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRjb250ZW50QmxvY2s6IFBhcnRpYWw8Q29udGVudEJsb2NrPiA9IHtcblx0XHR0eXBlOiBcInRleHRcIixcblx0XHRraW5kOiBcImZpbmFsXCIsXG5cdFx0Y29udGVudDogXCJcIixcblx0XHRtZXRhZGF0YToge30sXG5cdH07XG5cdGlzRWRpdDogYm9vbGVhbiA9IGZhbHNlO1xuXHRvblN1Ym1pdDogKGNvbnRlbnRCbG9jazogUGFydGlhbDxDb250ZW50QmxvY2s+KSA9PiBQcm9taXNlPHZvaWQ+O1xuXHR1bnNwbGFzaENsaWVudDogVW5zcGxhc2hDbGllbnQ7XG5cdHVuc3BsYXNoUmVzdWx0czogVW5zcGxhc2hQaG90b1tdID0gW107XG5cdHVuc3BsYXNoU2VhcmNoUXVlcnk6IHN0cmluZyA9IFwiXCI7XG5cdHVuc3BsYXNoU2VhcmNoaW5nOiBib29sZWFuID0gZmFsc2U7XG5cdHNlbGVjdGVkSW1hZ2VVcmw6IHN0cmluZyA9IFwiXCI7XG5cdHBsdWdpbjogU3RvcnlFbmdpbmVQbHVnaW47XG5cdGN1cnJlbnRJbWFnZVNvdXJjZVRhYjogXCJ1bnNwbGFzaFwiIHwgXCJpbnRlcm5ldCBsaW5rXCIgfCBcImxvY2FsXCIgPSBcImludGVybmV0IGxpbmtcIjtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRhcHA6IEFwcCxcblx0XHRvblN1Ym1pdDogKGNvbnRlbnRCbG9jazogUGFydGlhbDxDb250ZW50QmxvY2s+KSA9PiBQcm9taXNlPHZvaWQ+LFxuXHRcdGNvbnRlbnRCbG9jaz86IENvbnRlbnRCbG9jayxcblx0XHRwbHVnaW4/OiBTdG9yeUVuZ2luZVBsdWdpblxuXHQpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbiBhcyBTdG9yeUVuZ2luZVBsdWdpbjtcblx0XHRjb25zdCB1bnNwbGFzaEFjY2Vzc0tleSA9IHRoaXMucGx1Z2luPy5zZXR0aW5ncz8udW5zcGxhc2hBY2Nlc3NLZXkgfHwgXCJcIjtcblx0XHRjb25zdCB1bnNwbGFzaFNlY3JldEtleSA9IHRoaXMucGx1Z2luPy5zZXR0aW5ncz8udW5zcGxhc2hTZWNyZXRLZXkgfHwgXCJcIjtcblx0XHR0aGlzLnVuc3BsYXNoQ2xpZW50ID0gbmV3IFVuc3BsYXNoQ2xpZW50KHVuc3BsYXNoQWNjZXNzS2V5LCB1bnNwbGFzaFNlY3JldEtleSk7XG5cdFx0aWYgKGNvbnRlbnRCbG9jaykge1xuXHRcdFx0dGhpcy5pc0VkaXQgPSB0cnVlO1xuXHRcdFx0dGhpcy5jb250ZW50QmxvY2sgPSB7XG5cdFx0XHRcdHR5cGU6IGNvbnRlbnRCbG9jay50eXBlLFxuXHRcdFx0XHRraW5kOiBjb250ZW50QmxvY2sua2luZCB8fCBcImZpbmFsXCIsXG5cdFx0XHRcdGNvbnRlbnQ6IGNvbnRlbnRCbG9jay5jb250ZW50LFxuXHRcdFx0XHRtZXRhZGF0YTogY29udGVudEJsb2NrLm1ldGFkYXRhIHx8IHt9LFxuXHRcdFx0fTtcblx0XHRcdGlmIChjb250ZW50QmxvY2sudHlwZSA9PT0gXCJpbWFnZVwiICYmIGNvbnRlbnRCbG9jay5jb250ZW50KSB7XG5cdFx0XHRcdHRoaXMuc2VsZWN0ZWRJbWFnZVVybCA9IGNvbnRlbnRCbG9jay5jb250ZW50O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHtcblx0XHRcdHRleHQ6IHRoaXMuaXNFZGl0ID8gXCJFZGl0IENvbnRlbnQgQmxvY2tcIiA6IFwiQ3JlYXRlIENvbnRlbnQgQmxvY2tcIixcblx0XHR9KTtcblxuXHRcdC8vIE9ubHkgc2hvdyB0eXBlIHNlbGVjdG9yIGlmIGVkaXRpbmcgYW5kIHR5cGUgaXMgbm90IGFscmVhZHkgc2V0XG5cdFx0aWYgKHRoaXMuaXNFZGl0ICYmICF0aGlzLmNvbnRlbnRCbG9jay50eXBlKSB7XG5cdFx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHRcdC5zZXROYW1lKFwiVHlwZVwiKVxuXHRcdFx0XHQuc2V0RGVzYyhcIlNlbGVjdCB0aGUgY29udGVudCB0eXBlXCIpXG5cdFx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+XG5cdFx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oXCJ0ZXh0XCIsIFwiVGV4dFwiKVxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihcImltYWdlXCIsIFwiSW1hZ2VcIilcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLmNvbnRlbnRCbG9jay50eXBlIHx8IFwidGV4dFwiKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay50eXBlID0gdmFsdWUgYXMgQ29udGVudEJsb2NrW1widHlwZVwiXTtcblx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50RmllbGRzKCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdH1cblxuXHRcdC8vIFJlbmRlciBjb250ZW50IGZpZWxkcyBiYXNlZCBvbiB0eXBlXG5cdFx0dGhpcy5yZW5kZXJDb250ZW50RmllbGRzKCk7XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblxuXHRcdGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiB0aGlzLmlzRWRpdCA/IFwiVXBkYXRlXCIgOiBcIkNyZWF0ZVwiLFxuXHRcdFx0Y2xzOiBcIm1vZC1jdGFcIixcblx0XHR9KTtcblx0XHRzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuc3VibWl0KCkpO1xuXG5cdFx0Y29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiQ2FuY2VsXCIsXG5cdFx0fSk7XG5cdFx0Y2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuXHR9XG5cblx0cmVuZGVyQ29udGVudEZpZWxkcygpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRcblx0XHQvLyBSZW1vdmUgZXhpc3RpbmcgY29udGVudCBmaWVsZHNcblx0XHRjb25zdCBleGlzdGluZ0ZpZWxkcyA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRlbnQtYmxvY2stZmllbGRcIik7XG5cdFx0ZXhpc3RpbmdGaWVsZHMuZm9yRWFjaCgoZWwpID0+IGVsLnJlbW92ZSgpKTtcblxuXHRcdGlmICh0aGlzLmNvbnRlbnRCbG9jay50eXBlID09PSBcInRleHRcIikge1xuXHRcdFx0Y29uc3QgdGV4dEZpZWxkID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJjb250ZW50LWJsb2NrLWZpZWxkXCIgfSk7XG5cdFx0XHRuZXcgU2V0dGluZyh0ZXh0RmllbGQpXG5cdFx0XHRcdC5zZXROYW1lKFwiQ29udGVudFwiKVxuXHRcdFx0XHQuc2V0RGVzYyhcIkVudGVyIHRoZSB0ZXh0IGNvbnRlbnRcIilcblx0XHRcdFx0LmFkZFRleHRBcmVhKCh0ZXh0KSA9PlxuXHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIkVudGVyIHRleHQuLi5cIilcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLmNvbnRlbnRCbG9jay5jb250ZW50IHx8IFwiXCIpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLmNvbnRlbnQgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIHdvcmQgY291bnQgaW4gbWV0YWRhdGFcblx0XHRcdFx0XHRcdFx0aWYgKCF0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhID0ge307XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEud29yZF9jb3VudCA9IHZhbHVlLnRyaW0oKS5zcGxpdCgvXFxzKy8pLmZpbHRlcih3ID0+IHcubGVuZ3RoID4gMCkubGVuZ3RoO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblx0XHR9IGVsc2UgaWYgKHRoaXMuY29udGVudEJsb2NrLnR5cGUgPT09IFwiaW1hZ2VcIikge1xuXHRcdFx0Y29uc3QgaW1hZ2VGaWVsZCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwiY29udGVudC1ibG9jay1maWVsZFwiIH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBEZXRlcm1pbmUgY3VycmVudCBzb3VyY2UgdGFiIGZyb20gbWV0YWRhdGEgb3IgZGVmYXVsdFxuXHRcdFx0Y29uc3Qgc291cmNlVmFsdWUgPSB0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YT8uc291cmNlIHx8IFwiaW50ZXJuZXQgbGlua1wiO1xuXHRcdFx0dGhpcy5jdXJyZW50SW1hZ2VTb3VyY2VUYWIgPSBzb3VyY2VWYWx1ZSBhcyBcInVuc3BsYXNoXCIgfCBcImludGVybmV0IGxpbmtcIiB8IFwibG9jYWxcIjtcblxuXHRcdFx0Ly8gU291cmNlIHRhYnNcblx0XHRcdGNvbnN0IHRhYnNDb250YWluZXIgPSBpbWFnZUZpZWxkLmNyZWF0ZURpdih7IGNsczogXCJjb250ZW50LWJsb2NrLXNvdXJjZS10YWJzXCIgfSk7XG5cdFx0XHRjb25zdCB1bnNwbGFzaFRhYiA9IHRhYnNDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHR0ZXh0OiBcIlVuc3BsYXNoXCIsXG5cdFx0XHRcdGNsczogYGNvbnRlbnQtYmxvY2stc291cmNlLXRhYiAke3RoaXMuY3VycmVudEltYWdlU291cmNlVGFiID09PSBcInVuc3BsYXNoXCIgPyBcImlzLWFjdGl2ZVwiIDogXCJcIn1gLFxuXHRcdFx0fSk7XG5cdFx0XHRjb25zdCBpbnRlcm5ldFRhYiA9IHRhYnNDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHR0ZXh0OiBcIkludGVybmV0IExpbmtcIixcblx0XHRcdFx0Y2xzOiBgY29udGVudC1ibG9jay1zb3VyY2UtdGFiICR7dGhpcy5jdXJyZW50SW1hZ2VTb3VyY2VUYWIgPT09IFwiaW50ZXJuZXQgbGlua1wiID8gXCJpcy1hY3RpdmVcIiA6IFwiXCJ9YCxcblx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgbG9jYWxUYWIgPSB0YWJzQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0dGV4dDogXCJMb2NhbCBVcGxvYWRcIixcblx0XHRcdFx0Y2xzOiBgY29udGVudC1ibG9jay1zb3VyY2UtdGFiICR7dGhpcy5jdXJyZW50SW1hZ2VTb3VyY2VUYWIgPT09IFwibG9jYWxcIiA/IFwiaXMtYWN0aXZlXCIgOiBcIlwifWAsXG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gVGFiIGNvbnRlbnQgY29udGFpbmVyXG5cdFx0XHRjb25zdCB0YWJDb250ZW50ID0gaW1hZ2VGaWVsZC5jcmVhdGVEaXYoeyBjbHM6IFwiY29udGVudC1ibG9jay1zb3VyY2UtdGFiLWNvbnRlbnRcIiB9KTtcblxuXHRcdFx0Ly8gVGFiIGNsaWNrIGhhbmRsZXJzXG5cdFx0XHR1bnNwbGFzaFRhYi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmN1cnJlbnRJbWFnZVNvdXJjZVRhYiA9IFwidW5zcGxhc2hcIjtcblx0XHRcdFx0aWYgKCF0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSkge1xuXHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhID0ge307XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEuc291cmNlID0gXCJ1bnNwbGFzaFwiO1xuXHRcdFx0XHR0aGlzLnJlbmRlckNvbnRlbnRGaWVsZHMoKTtcblx0XHRcdH07XG5cblx0XHRcdGludGVybmV0VGFiLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuY3VycmVudEltYWdlU291cmNlVGFiID0gXCJpbnRlcm5ldCBsaW5rXCI7XG5cdFx0XHRcdGlmICghdGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEpIHtcblx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSA9IHt9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhLnNvdXJjZSA9IFwiaW50ZXJuZXQgbGlua1wiO1xuXHRcdFx0XHR0aGlzLnJlbmRlckNvbnRlbnRGaWVsZHMoKTtcblx0XHRcdH07XG5cblx0XHRcdGxvY2FsVGFiLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuY3VycmVudEltYWdlU291cmNlVGFiID0gXCJsb2NhbFwiO1xuXHRcdFx0XHRpZiAoIXRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhKSB7XG5cdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEgPSB7fTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YS5zb3VyY2UgPSBcImxvY2FsXCI7XG5cdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudEZpZWxkcygpO1xuXHRcdFx0fTtcblxuXHRcdFx0Ly8gUmVuZGVyIGNvbnRlbnQgYmFzZWQgb24gc2VsZWN0ZWQgdGFiXG5cdFx0XHRpZiAodGhpcy5jdXJyZW50SW1hZ2VTb3VyY2VUYWIgPT09IFwidW5zcGxhc2hcIikge1xuXHRcdFx0XHQvLyBVbnNwbGFzaCB0YWIgY29udGVudFxuXHRcdFx0XHRjb25zdCB1bnNwbGFzaEFjY2Vzc0tleSA9IHRoaXMucGx1Z2luPy5zZXR0aW5ncz8udW5zcGxhc2hBY2Nlc3NLZXkgfHwgXCJcIjtcblx0XHRcdFx0aWYgKHVuc3BsYXNoQWNjZXNzS2V5ICYmIHVuc3BsYXNoQWNjZXNzS2V5ICE9PSBcIllPVVJfVU5TUExBU0hfQUNDRVNTX0tFWVwiKSB7XG5cdFx0XHRcdFx0Y29uc3QgdW5zcGxhc2hTZXR0aW5nID0gbmV3IFNldHRpbmcodGFiQ29udGVudCk7XG5cdFx0XHRcdFx0dW5zcGxhc2hTZXR0aW5nLnNldE5hbWUoXCJTZWFyY2ggVW5zcGxhc2hcIik7XG5cdFx0XHRcdFx0dW5zcGxhc2hTZXR0aW5nLnNldERlc2MoXCJTZWFyY2ggZm9yIGZyZWUgaW1hZ2VzXCIpO1xuXHRcdFx0XHRcdHVuc3BsYXNoU2V0dGluZy5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xuXHRcdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoXCJTZWFyY2hcIik7XG5cdFx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuc2hvd1Vuc3BsYXNoU2VhcmNoKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zdCB1bnNwbGFzaFNldHRpbmcgPSBuZXcgU2V0dGluZyh0YWJDb250ZW50KTtcblx0XHRcdFx0XHR1bnNwbGFzaFNldHRpbmcuc2V0TmFtZShcIlNlYXJjaCBVbnNwbGFzaFwiKTtcblx0XHRcdFx0XHR1bnNwbGFzaFNldHRpbmcuc2V0RGVzYyhcIkNvbmZpZ3VyZSBVbnNwbGFzaCBBY2Nlc3MgS2V5IGFuZCBTZWNyZXQgS2V5IGluIHBsdWdpbiBzZXR0aW5ncyB0byBlbmFibGUgaW1hZ2Ugc2VhcmNoXCIpO1xuXHRcdFx0XHRcdHVuc3BsYXNoU2V0dGluZy5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xuXHRcdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoXCJTZWFyY2hcIik7XG5cdFx0XHRcdFx0XHRidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTaG93IGltYWdlIFVSTCBpZiBhbHJlYWR5IHNlbGVjdGVkXG5cdFx0XHRcdGlmICh0aGlzLnNlbGVjdGVkSW1hZ2VVcmwpIHtcblx0XHRcdFx0XHRuZXcgU2V0dGluZyh0YWJDb250ZW50KVxuXHRcdFx0XHRcdFx0LnNldE5hbWUoXCJTZWxlY3RlZCBJbWFnZSBVUkxcIilcblx0XHRcdFx0XHRcdC5zZXREZXNjKFwiSW1hZ2UgVVJMIGZyb20gVW5zcGxhc2hcIilcblx0XHRcdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuc2VsZWN0ZWRJbWFnZVVybClcblx0XHRcdFx0XHRcdFx0XHQuc2V0RGlzYWJsZWQodHJ1ZSlcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodGhpcy5jdXJyZW50SW1hZ2VTb3VyY2VUYWIgPT09IFwiaW50ZXJuZXQgbGlua1wiKSB7XG5cdFx0XHRcdC8vIEludGVybmV0IExpbmsgdGFiIGNvbnRlbnRcblx0XHRcdFx0bmV3IFNldHRpbmcodGFiQ29udGVudClcblx0XHRcdFx0XHQuc2V0TmFtZShcIkltYWdlIFVSTFwiKVxuXHRcdFx0XHRcdC5zZXREZXNjKFwiRW50ZXIgaW1hZ2UgVVJMXCIpXG5cdFx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcImh0dHBzOi8vZXhhbXBsZS5jb20vaW1hZ2UuanBnXCIpXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnNlbGVjdGVkSW1hZ2VVcmwpXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkSW1hZ2VVcmwgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5jb250ZW50ID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCF0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEgPSB7fTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEuc291cmNlID0gXCJpbnRlcm5ldCBsaW5rXCI7XG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0KTtcblx0XHRcdH0gZWxzZSBpZiAodGhpcy5jdXJyZW50SW1hZ2VTb3VyY2VUYWIgPT09IFwibG9jYWxcIikge1xuXHRcdFx0XHQvLyBMb2NhbCBVcGxvYWQgdGFiIGNvbnRlbnRcblx0XHRcdFx0bmV3IFNldHRpbmcodGFiQ29udGVudClcblx0XHRcdFx0XHQuc2V0TmFtZShcIlVwbG9hZCBmcm9tIENvbXB1dGVyXCIpXG5cdFx0XHRcdFx0LnNldERlc2MoXCJVcGxvYWQgaW1hZ2UgZnJvbSB5b3VyIGNvbXB1dGVyIChjb21pbmcgc29vbilcIilcblx0XHRcdFx0XHQuYWRkQnV0dG9uKChidXR0b24pID0+IHtcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KFwiQ2hvb3NlIEZpbGVcIik7XG5cdFx0XHRcdFx0XHRidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbW1vbiBmaWVsZHMgKHNob3duIGZvciBhbGwgdGFicylcblx0XHRcdC8vIEFsdCB0ZXh0XG5cdFx0XHRjb25zdCBhbHRUZXh0VmFsdWUgPSB0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YT8uYWx0X3RleHQgfHwgXCJcIjtcblx0XHRcdGNvbnN0IGFsdFRleHRTZXR0aW5nID0gbmV3IFNldHRpbmcoaW1hZ2VGaWVsZCk7XG5cdFx0XHRhbHRUZXh0U2V0dGluZy5zZXROYW1lKFwiQWx0IFRleHRcIik7XG5cdFx0XHRhbHRUZXh0U2V0dGluZy5zZXREZXNjKFwiQWx0IHRleHQgZm9yIGFjY2Vzc2liaWxpdHlcIik7XG5cdFx0XHRhbHRUZXh0U2V0dGluZy5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiRGVzY3JpYmUgdGhlIGltYWdlIGZvciBhY2Nlc3NpYmlsaXR5XCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKGFsdFRleHRWYWx1ZSlcblx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoIXRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhID0ge307XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YS5hbHRfdGV4dCA9IHZhbHVlIHx8IHVuZGVmaW5lZDtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdFx0Ly8gQXV0aG9yIE5hbWVcblx0XHRcdGNvbnN0IGF1dGhvck5hbWVWYWx1ZSA9IHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhPy5hdXRob3JfbmFtZSB8fCBcIlwiO1xuXHRcdFx0bmV3IFNldHRpbmcoaW1hZ2VGaWVsZClcblx0XHRcdFx0LnNldE5hbWUoXCJBdXRob3IgTmFtZVwiKVxuXHRcdFx0XHQuc2V0RGVzYyhcIk5hbWUgb2YgdGhlIGltYWdlIGF1dGhvci9waG90b2dyYXBoZXJcIilcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiQXV0aG9yIG5hbWVcIilcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShhdXRob3JOYW1lVmFsdWUpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmICghdGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSA9IHt9O1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhLmF1dGhvcl9uYW1lID0gdmFsdWUgfHwgdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblxuXHRcdFx0Ly8gQXR0cmlidXRpb25cblx0XHRcdGNvbnN0IGF0dHJpYnV0aW9uVmFsdWUgPSB0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YT8uYXR0cmlidXRpb24gfHwgXCJcIjtcblx0XHRcdG5ldyBTZXR0aW5nKGltYWdlRmllbGQpXG5cdFx0XHRcdC5zZXROYW1lKFwiQXR0cmlidXRpb25cIilcblx0XHRcdFx0LnNldERlc2MoXCJBdHRyaWJ1dGlvbiB0ZXh0IChlLmcuLCAnUGhvdG8gYnkgSm9obiBEb2Ugb24gVW5zcGxhc2gnKVwiKVxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJQaG90byBieSBBdXRob3IgTmFtZSBvbiBTb3VyY2VcIilcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShhdHRyaWJ1dGlvblZhbHVlKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpZiAoIXRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEgPSB7fTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YS5hdHRyaWJ1dGlvbiA9IHZhbHVlIHx8IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdCk7XG5cblx0XHRcdC8vIEF0dHJpYnV0aW9uIFVSTFxuXHRcdFx0Y29uc3QgYXR0cmlidXRpb25VcmxWYWx1ZSA9IHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhPy5hdHRyaWJ1dGlvbl91cmwgfHwgXCJcIjtcblx0XHRcdG5ldyBTZXR0aW5nKGltYWdlRmllbGQpXG5cdFx0XHRcdC5zZXROYW1lKFwiQXR0cmlidXRpb24gVVJMXCIpXG5cdFx0XHRcdC5zZXREZXNjKFwiTGluayB0byB0aGUgb3JpZ2luYWwgaW1hZ2Ugb3IgYXV0aG9yIHBhZ2VcIilcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9waG90b1wiKVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKGF0dHJpYnV0aW9uVXJsVmFsdWUpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmICghdGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSA9IHt9O1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhLmF0dHJpYnV0aW9uX3VybCA9IHZhbHVlIHx8IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdCk7XG5cdFx0fVxuXHR9XG5cblx0c2hvd1Vuc3BsYXNoU2VhcmNoKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdFxuXHRcdC8vIENyZWF0ZSBzZWFyY2ggbW9kYWxcblx0XHRjb25zdCBzZWFyY2hNb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0c2VhcmNoTW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiU2VhcmNoIFVuc3BsYXNoXCIpO1xuXG5cdFx0Y29uc3Qgc2VhcmNoQ29udGVudCA9IHNlYXJjaE1vZGFsLmNvbnRlbnRFbDtcblx0XHRcblx0XHQvLyBTZWFyY2ggaW5wdXRcblx0XHRjb25zdCBzZWFyY2hJbnB1dCA9IHNlYXJjaENvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG5cdFx0XHR0eXBlOiBcInRleHRcIixcblx0XHRcdHBsYWNlaG9sZGVyOiBcIlNlYXJjaCBmb3IgaW1hZ2VzLi4uXCIsXG5cdFx0XHRjbHM6IFwidW5zcGxhc2gtc2VhcmNoLWlucHV0XCIsXG5cdFx0fSk7XG5cdFx0c2VhcmNoSW5wdXQudmFsdWUgPSB0aGlzLnVuc3BsYXNoU2VhcmNoUXVlcnk7XG5cdFx0c2VhcmNoSW5wdXQuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcblx0XHRzZWFyY2hJbnB1dC5zdHlsZS5wYWRkaW5nID0gXCIwLjVyZW1cIjtcblx0XHRzZWFyY2hJbnB1dC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjFyZW1cIjtcblxuXHRcdC8vIFNlYXJjaCBidXR0b25cblx0XHRjb25zdCBzZWFyY2hCdXR0b24gPSBzZWFyY2hDb250ZW50LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiU2VhcmNoXCIsXG5cdFx0XHRjbHM6IFwibW9kLWN0YVwiLFxuXHRcdH0pO1xuXHRcdHNlYXJjaEJ1dHRvbi5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjFyZW1cIjtcblxuXHRcdC8vIFJlc3VsdHMgY29udGFpbmVyXG5cdFx0Y29uc3QgcmVzdWx0c0NvbnRhaW5lciA9IHNlYXJjaENvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcInVuc3BsYXNoLXJlc3VsdHMtZ3JpZFwiIH0pO1xuXG5cdFx0Y29uc3QgcGVyZm9ybVNlYXJjaCA9IGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IHF1ZXJ5ID0gc2VhcmNoSW5wdXQudmFsdWUudHJpbSgpO1xuXHRcdFx0aWYgKCFxdWVyeSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiUGxlYXNlIGVudGVyIGEgc2VhcmNoIHF1ZXJ5XCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMudW5zcGxhc2hTZWFyY2hpbmcgPSB0cnVlO1xuXHRcdFx0c2VhcmNoQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdHNlYXJjaEJ1dHRvbi5zZXRUZXh0KFwiU2VhcmNoaW5nLi4uXCIpO1xuXHRcdFx0cmVzdWx0c0NvbnRhaW5lci5lbXB0eSgpO1xuXHRcdFx0cmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIlNlYXJjaGluZy4uLlwiIH0pO1xuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMudW5zcGxhc2hDbGllbnQuc2VhcmNoSW1hZ2VzKHF1ZXJ5LCAxLCAyMCk7XG5cdFx0XHRcdHRoaXMudW5zcGxhc2hSZXN1bHRzID0gcmVzcG9uc2UucmVzdWx0cztcblxuXHRcdFx0XHRyZXN1bHRzQ29udGFpbmVyLmVtcHR5KCk7XG5cdFx0XHRcdGlmICh0aGlzLnVuc3BsYXNoUmVzdWx0cy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRyZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gcmVzdWx0cyBmb3VuZC5cIiB9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IHBob3RvIG9mIHRoaXMudW5zcGxhc2hSZXN1bHRzKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBwaG90b0l0ZW0gPSByZXN1bHRzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJ1bnNwbGFzaC1waG90by1pdGVtXCIgfSk7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGNvbnN0IGltZyA9IHBob3RvSXRlbS5jcmVhdGVFbChcImltZ1wiLCB7XG5cdFx0XHRcdFx0XHRcdGF0dHI6IHtcblx0XHRcdFx0XHRcdFx0XHRzcmM6IHRoaXMudW5zcGxhc2hDbGllbnQuZ2V0SW1hZ2VVcmwocGhvdG8sIFwidGh1bWJcIiksXG5cdFx0XHRcdFx0XHRcdFx0YWx0OiBwaG90by5hbHRfZGVzY3JpcHRpb24gfHwgcGhvdG8uZGVzY3JpcHRpb24gfHwgXCJVbnNwbGFzaCBwaG90b1wiLFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRpbWcuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcblx0XHRcdFx0XHRcdGltZy5zdHlsZS5oZWlnaHQgPSBcIjE1MHB4XCI7XG5cdFx0XHRcdFx0XHRpbWcuc3R5bGUub2JqZWN0Rml0ID0gXCJjb3ZlclwiO1xuXHRcdFx0XHRcdFx0aW1nLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNHB4XCI7XG5cdFx0XHRcdFx0XHRpbWcuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG5cblx0XHRcdFx0XHRcdGNvbnN0IHBob3RvSW5mbyA9IHBob3RvSXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwidW5zcGxhc2gtcGhvdG8taW5mb1wiIH0pO1xuXHRcdFx0XHRcdFx0cGhvdG9JbmZvLmNyZWF0ZUVsKFwicFwiLCB7XG5cdFx0XHRcdFx0XHRcdHRleHQ6IHBob3RvLmFsdF9kZXNjcmlwdGlvbiB8fCBwaG90by5kZXNjcmlwdGlvbiB8fCBcIlVudGl0bGVkXCIsXG5cdFx0XHRcdFx0XHRcdGNsczogXCJ1bnNwbGFzaC1waG90by10aXRsZVwiLFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRwaG90b0luZm8uY3JlYXRlRWwoXCJwXCIsIHtcblx0XHRcdFx0XHRcdFx0dGV4dDogdGhpcy51bnNwbGFzaENsaWVudC5nZXRBdHRyaWJ1dGlvblRleHQocGhvdG8pLFxuXHRcdFx0XHRcdFx0XHRjbHM6IFwidW5zcGxhc2gtcGhvdG8tYXR0cmlidXRpb25cIixcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRwaG90b0l0ZW0ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgaW1hZ2VVcmwgPSB0aGlzLnVuc3BsYXNoQ2xpZW50LmdldEltYWdlVXJsKHBob3RvLCBcInJlZ3VsYXJcIik7XG5cdFx0XHRcdFx0XHRcdHRoaXMuc2VsZWN0ZWRJbWFnZVVybCA9IGltYWdlVXJsO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5jb250ZW50ID0gaW1hZ2VVcmw7XG5cdFx0XHRcdFx0XHRcdGlmICghdGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSA9IHt9O1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGFsdFRleHQgPSBwaG90by5hbHRfZGVzY3JpcHRpb24gfHwgcGhvdG8uZGVzY3JpcHRpb24gfHwgXCJcIjtcblx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEuYWx0X3RleHQgPSBhbHRUZXh0O1xuXHRcdFx0XHRcdFx0XHQvLyBBZGQgYXR0cmlidXRpb24gYXMgcmVxdWlyZWQgYnkgVW5zcGxhc2hcblx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEuYXR0cmlidXRpb24gPSB0aGlzLnVuc3BsYXNoQ2xpZW50LmdldEF0dHJpYnV0aW9uVGV4dChwaG90byk7XG5cdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhLmF0dHJpYnV0aW9uX3VybCA9IHRoaXMudW5zcGxhc2hDbGllbnQuZ2V0QXR0cmlidXRpb25VcmwocGhvdG8pO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YS5hdXRob3JfbmFtZSA9IHBob3RvLnVzZXIubmFtZTtcblx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEuc291cmNlID0gXCJ1bnNwbGFzaFwiO1xuXHRcdFx0XHRcdFx0XHRzZWFyY2hNb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlckNvbnRlbnRGaWVsZHMoKTtcblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkltYWdlIHNlbGVjdGVkXCIpO1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gc2VhcmNoIFVuc3BsYXNoXCI7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yTWVzc2FnZX1gLCA1MDAwKTtcblx0XHRcdFx0cmVzdWx0c0NvbnRhaW5lci5lbXB0eSgpO1xuXHRcdFx0XHRyZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7XG5cdFx0XHRcdFx0dGV4dDogYEVycm9yOiAke2Vycm9yTWVzc2FnZX1gLFxuXHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXJyb3JcIixcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHR0aGlzLnVuc3BsYXNoU2VhcmNoaW5nID0gZmFsc2U7XG5cdFx0XHRcdHNlYXJjaEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuXHRcdFx0XHRzZWFyY2hCdXR0b24uc2V0VGV4dChcIlNlYXJjaFwiKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0c2VhcmNoQnV0dG9uLm9uY2xpY2sgPSBwZXJmb3JtU2VhcmNoO1xuXHRcdHNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCAoZSkgPT4ge1xuXHRcdFx0aWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcblx0XHRcdFx0cGVyZm9ybVNlYXJjaCgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gTG9hZCBpbml0aWFsIHJlc3VsdHMgaWYgcXVlcnkgZXhpc3RzXG5cdFx0aWYgKHRoaXMudW5zcGxhc2hTZWFyY2hRdWVyeSkge1xuXHRcdFx0cGVyZm9ybVNlYXJjaCgpO1xuXHRcdH1cblxuXHRcdHNlYXJjaE1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdGFzeW5jIHN1Ym1pdCgpIHtcblx0XHQvLyBUeXBlIHNob3VsZCBhbHdheXMgYmUgc2V0IChlaXRoZXIgZnJvbSBlZGl0IG9yIGZyb20gYnV0dG9uIGNsaWNrKVxuXHRcdGlmICghdGhpcy5jb250ZW50QmxvY2sudHlwZSkge1xuXHRcdFx0dGhpcy5jb250ZW50QmxvY2sudHlwZSA9IFwidGV4dFwiOyAvLyBEZWZhdWx0IGZhbGxiYWNrXG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuY29udGVudEJsb2NrLnR5cGUgPT09IFwidGV4dFwiICYmICF0aGlzLmNvbnRlbnRCbG9jay5jb250ZW50Py50cmltKCkpIHtcblx0XHRcdG5ldyBOb3RpY2UoXCJQbGVhc2UgZW50ZXIgdGV4dCBjb250ZW50XCIsIDMwMDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLmNvbnRlbnRCbG9jay50eXBlID09PSBcImltYWdlXCIgJiYgIXRoaXMuY29udGVudEJsb2NrLmNvbnRlbnQ/LnRyaW0oKSkge1xuXHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBlbnRlciBhbiBpbWFnZSBVUkwgb3Igc2VsZWN0IGFuIGltYWdlXCIsIDMwMDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCB0aGlzLm9uU3VibWl0KHRoaXMuY29udGVudEJsb2NrKTtcblx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBzYXZlIGNvbnRlbnQgYmxvY2tcIjtcblx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yTWVzc2FnZX1gLCA1MDAwKTtcblx0XHR9XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cbiIsICJleHBvcnQgaW50ZXJmYWNlIFVuc3BsYXNoUGhvdG8ge1xuXHRpZDogc3RyaW5nO1xuXHR3aWR0aDogbnVtYmVyO1xuXHRoZWlnaHQ6IG51bWJlcjtcblx0dXJsczoge1xuXHRcdHJhdzogc3RyaW5nO1xuXHRcdGZ1bGw6IHN0cmluZztcblx0XHRyZWd1bGFyOiBzdHJpbmc7XG5cdFx0c21hbGw6IHN0cmluZztcblx0XHR0aHVtYjogc3RyaW5nO1xuXHR9O1xuXHRhbHRfZGVzY3JpcHRpb246IHN0cmluZyB8IG51bGw7XG5cdGRlc2NyaXB0aW9uOiBzdHJpbmcgfCBudWxsO1xuXHR1c2VyOiB7XG5cdFx0bmFtZTogc3RyaW5nO1xuXHRcdHVzZXJuYW1lOiBzdHJpbmc7XG5cdH07XG5cdGxpbmtzOiB7XG5cdFx0aHRtbDogc3RyaW5nO1xuXHR9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVuc3BsYXNoU2VhcmNoUmVzcG9uc2Uge1xuXHR0b3RhbDogbnVtYmVyO1xuXHR0b3RhbF9wYWdlczogbnVtYmVyO1xuXHRyZXN1bHRzOiBVbnNwbGFzaFBob3RvW107XG59XG5cbmV4cG9ydCBjbGFzcyBVbnNwbGFzaENsaWVudCB7XG5cdHByaXZhdGUgcmVhZG9ubHkgYWNjZXNzS2V5OiBzdHJpbmc7XG5cdHByaXZhdGUgcmVhZG9ubHkgc2VjcmV0S2V5OiBzdHJpbmc7XG5cdHByaXZhdGUgcmVhZG9ubHkgYXBpVXJsID0gXCJodHRwczovL2FwaS51bnNwbGFzaC5jb21cIjtcblxuXHRjb25zdHJ1Y3RvcihhY2Nlc3NLZXk/OiBzdHJpbmcsIHNlY3JldEtleT86IHN0cmluZykge1xuXHRcdC8vIFVuc3BsYXNoIHJlcXVpcmVzIGFuIGFjY2VzcyBrZXkgKEFwcGxpY2F0aW9uIElEKSBmb3IgQVBJIGFjY2Vzc1xuXHRcdC8vIFNlY3JldCBLZXkgaXMgb3B0aW9uYWwgYnV0IG1heSBiZSBuZWVkZWQgZm9yIHNvbWUgb3BlcmF0aW9uc1xuXHRcdC8vIFlvdSBjYW4gZ2V0IGJvdGgga2V5cyBmcm9tIGh0dHBzOi8vdW5zcGxhc2guY29tL2RldmVsb3BlcnNcblx0XHR0aGlzLmFjY2Vzc0tleSA9IGFjY2Vzc0tleSB8fCBcIllPVVJfVU5TUExBU0hfQUNDRVNTX0tFWVwiO1xuXHRcdHRoaXMuc2VjcmV0S2V5ID0gc2VjcmV0S2V5IHx8IFwiXCI7XG5cdH1cblxuXHRhc3luYyBzZWFyY2hJbWFnZXMocXVlcnk6IHN0cmluZywgcGFnZTogbnVtYmVyID0gMSwgcGVyUGFnZTogbnVtYmVyID0gMjApOiBQcm9taXNlPFVuc3BsYXNoU2VhcmNoUmVzcG9uc2U+IHtcblx0XHRjb25zdCB1cmwgPSBgJHt0aGlzLmFwaVVybH0vc2VhcmNoL3Bob3Rvcz9xdWVyeT0ke2VuY29kZVVSSUNvbXBvbmVudChxdWVyeSl9JnBhZ2U9JHtwYWdlfSZwZXJfcGFnZT0ke3BlclBhZ2V9YDtcblx0XHRcblx0XHRjb25zdCBoZWFkZXJzOiBIZWFkZXJzSW5pdCA9IHtcblx0XHRcdFwiQWNjZXB0LVZlcnNpb25cIjogXCJ2MVwiLFxuXHRcdH07XG5cblx0XHQvLyBVbnNwbGFzaCBBUEkgcmVxdWlyZXMgQXV0aG9yaXphdGlvbiBoZWFkZXIgd2l0aCBhY2Nlc3Mga2V5XG5cdFx0aWYgKCF0aGlzLmFjY2Vzc0tleSB8fCB0aGlzLmFjY2Vzc0tleSA9PT0gXCJZT1VSX1VOU1BMQVNIX0FDQ0VTU19LRVlcIikge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVW5zcGxhc2ggYWNjZXNzIGtleSBpcyByZXF1aXJlZC4gUGxlYXNlIGNvbmZpZ3VyZSBpdCBpbiBwbHVnaW4gc2V0dGluZ3MuXCIpO1xuXHRcdH1cblxuXHRcdGhlYWRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gYENsaWVudC1JRCAke3RoaXMuYWNjZXNzS2V5fWA7XG5cblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwgeyBoZWFkZXJzIH0pO1xuXG5cdFx0aWYgKCFyZXNwb25zZS5vaykge1xuXHRcdFx0Y29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBVbnNwbGFzaCBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9LiAke2Vycm9yVGV4dH1gKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzcG9uc2UuanNvbigpIGFzIFByb21pc2U8VW5zcGxhc2hTZWFyY2hSZXNwb25zZT47XG5cdH1cblxuXHRnZXRJbWFnZVVybChwaG90bzogVW5zcGxhc2hQaG90bywgc2l6ZTogXCJyYXdcIiB8IFwiZnVsbFwiIHwgXCJyZWd1bGFyXCIgfCBcInNtYWxsXCIgfCBcInRodW1iXCIgPSBcInJlZ3VsYXJcIik6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHBob3RvLnVybHNbc2l6ZV07XG5cdH1cblxuXHRnZXRBdHRyaWJ1dGlvblVybChwaG90bzogVW5zcGxhc2hQaG90byk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHBob3RvLmxpbmtzLmh0bWw7XG5cdH1cblxuXHRnZXRBdHRyaWJ1dGlvblRleHQocGhvdG86IFVuc3BsYXNoUGhvdG8pOiBzdHJpbmcge1xuXHRcdHJldHVybiBgUGhvdG8gYnkgJHtwaG90by51c2VyLm5hbWV9IG9uIFVuc3BsYXNoYDtcblx0fVxufVxuXG4iLCAiaW1wb3J0IHsgTW9kYWwsIEFwcCwgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG4vLyBAdHMtaWdub3JlIC0gZDMgdHlwZXMgbWF5IG5vdCByZXNvbHZlIGNvcnJlY3RseSBpbiBhbGwgZW52aXJvbm1lbnRzXG5pbXBvcnQgKiBhcyBkMyBmcm9tIFwiZDNcIjtcbmltcG9ydCB7IFdvcmxkRXZlbnQsIFRpbWVDb25maWcgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuaW50ZXJmYWNlIFRpbWVsaW5lRXZlbnQgZXh0ZW5kcyBXb3JsZEV2ZW50IHtcblx0dGltZWxpbmVfcG9zaXRpb246IG51bWJlcjtcblx0cGFyZW50X2lkOiBzdHJpbmcgfCBudWxsO1xuXHRpc19lcG9jaDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIFRpbWVsaW5lTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGV2ZW50czogV29ybGRFdmVudFtdO1xuXHR0aW1lQ29uZmlnOiBUaW1lQ29uZmlnIHwgbnVsbDtcblx0XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBldmVudHM6IFdvcmxkRXZlbnRbXSwgdGltZUNvbmZpZzogVGltZUNvbmZpZyB8IG51bGwpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMuZXZlbnRzID0gZXZlbnRzO1xuXHRcdHRoaXMudGltZUNvbmZpZyA9IHRpbWVDb25maWc7XG5cdH1cblx0XG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0XHRjb250ZW50RWwuYWRkQ2xhc3MoXCJzdG9yeS1lbmdpbmUtdGltZWxpbmUtbW9kYWxcIik7XG5cdFx0XG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIldvcmxkIFRpbWVsaW5lXCIgfSk7XG5cdFx0XG5cdFx0Ly8gQ29udGFpbmVyIHBhcmEgbyBncmFmaWNvIEQzXG5cdFx0Y29uc3QgY2hhcnRDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aW1lbGluZS1jaGFydFwiIH0pO1xuXHRcdFxuXHRcdHRoaXMucmVuZGVyVGltZWxpbmUoY2hhcnRDb250YWluZXIpO1xuXHR9XG5cdFxuXHRyZW5kZXJUaW1lbGluZShjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0aWYgKHRoaXMuZXZlbnRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Y29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gZXZlbnRzIHdpdGggdGltZWxpbmUgZGF0YSBmb3VuZC5cIiB9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBEaW1lbnNvZXNcblx0XHRjb25zdCB3aWR0aCA9IDgwMDtcblx0XHRjb25zdCBoZWlnaHQgPSA0MDA7XG5cdFx0Y29uc3QgbWFyZ2luID0geyB0b3A6IDIwLCByaWdodDogMzAsIGJvdHRvbTogNTAsIGxlZnQ6IDYwIH07XG5cdFx0XG5cdFx0Ly8gQ3JpYXIgU1ZHXG5cdFx0Y29uc3Qgc3ZnID0gZDMuc2VsZWN0KGNvbnRhaW5lcilcblx0XHRcdC5hcHBlbmQoXCJzdmdcIilcblx0XHRcdC5hdHRyKFwid2lkdGhcIiwgd2lkdGgpXG5cdFx0XHQuYXR0cihcImhlaWdodFwiLCBoZWlnaHQpO1xuXHRcdFxuXHRcdC8vIEZpbHRyYXIgZXZlbnRvcyBjb20gdGltZWxpbmVfcG9zaXRpb25cblx0XHRjb25zdCBldmVudHNXaXRoUG9zaXRpb246IFRpbWVsaW5lRXZlbnRbXSA9IHRoaXMuZXZlbnRzLm1hcCgoZSwgaSkgPT4gKHtcblx0XHRcdC4uLmUsXG5cdFx0XHR0aW1lbGluZV9wb3NpdGlvbjogZS50aW1lbGluZV9wb3NpdGlvbiA/PyBpICogMTAsXG5cdFx0XHRwYXJlbnRfaWQ6IGUucGFyZW50X2lkID8/IG51bGwsXG5cdFx0XHRpc19lcG9jaDogZS5pc19lcG9jaCA/PyBmYWxzZSxcblx0XHR9KSk7XG5cblx0XHQvLyBFc2NhbGEgWCAodGltZWxpbmVfcG9zaXRpb24gZW0gYW5vcylcblx0XHRjb25zdCB4RXh0ZW50ID0gZDMuZXh0ZW50KGV2ZW50c1dpdGhQb3NpdGlvbiwgKGQ6IFRpbWVsaW5lRXZlbnQpID0+IGQudGltZWxpbmVfcG9zaXRpb24pIGFzIFtudW1iZXIsIG51bWJlcl07XG5cdFx0Y29uc3QgeFNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxuXHRcdFx0LmRvbWFpbihbeEV4dGVudFswXSAtIDEsIHhFeHRlbnRbMV0gKyAxXSlcblx0XHRcdC5yYW5nZShbbWFyZ2luLmxlZnQsIHdpZHRoIC0gbWFyZ2luLnJpZ2h0XSk7XG5cdFx0XG5cdFx0Ly8gRXNjYWxhIFkgKGltcG9ydGFuY2UgMS0xMClcblx0XHRjb25zdCB5U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpXG5cdFx0XHQuZG9tYWluKFswLCAxMF0pXG5cdFx0XHQucmFuZ2UoW2hlaWdodCAtIG1hcmdpbi5ib3R0b20sIG1hcmdpbi50b3BdKTtcblx0XHRcblx0XHQvLyBFc2NhbGEgZGUgY29yIHBvciB0aXBvIGRlIGV2ZW50b1xuXHRcdGNvbnN0IGNvbG9yU2NhbGUgPSBkMy5zY2FsZU9yZGluYWwoZDMuc2NoZW1lQ2F0ZWdvcnkxMCk7XG5cdFx0XG5cdFx0Ly8gRWl4byBYXG5cdFx0c3ZnLmFwcGVuZChcImdcIilcblx0XHRcdC5hdHRyKFwidHJhbnNmb3JtXCIsIGB0cmFuc2xhdGUoMCwke2hlaWdodCAtIG1hcmdpbi5ib3R0b219KWApXG5cdFx0XHQuY2FsbChkMy5heGlzQm90dG9tKHhTY2FsZSkudGlja0Zvcm1hdCgoZDogZDMuTnVtYmVyVmFsdWUpID0+IGBZZWFyICR7ZH1gKSk7XG5cdFx0XG5cdFx0Ly8gRWl4byBZXG5cdFx0c3ZnLmFwcGVuZChcImdcIilcblx0XHRcdC5hdHRyKFwidHJhbnNmb3JtXCIsIGB0cmFuc2xhdGUoJHttYXJnaW4ubGVmdH0sMClgKVxuXHRcdFx0LmNhbGwoZDMuYXhpc0xlZnQoeVNjYWxlKS50aWNrRm9ybWF0KChkOiBkMy5OdW1iZXJWYWx1ZSkgPT4gYEltcCAke2R9YCkpO1xuXHRcdFxuXHRcdC8vIENvbmVjdGFyIGV2ZW50b3MgcGFpLWZpbGhvIGNvbSBsaW5oYXMgKHNlIGhvdXZlciBwYXJlbnRfaWQpXG5cdFx0Y29uc3QgZXZlbnRzV2l0aFBhcmVudCA9IGV2ZW50c1dpdGhQb3NpdGlvbi5maWx0ZXIoZSA9PiBlLnBhcmVudF9pZCk7XG5cdFx0c3ZnLnNlbGVjdEFsbChcImxpbmUucGFyZW50LWxpbmtcIilcblx0XHRcdC5kYXRhKGV2ZW50c1dpdGhQYXJlbnQpXG5cdFx0XHQuam9pbihcImxpbmVcIilcblx0XHRcdC5hdHRyKFwiY2xhc3NcIiwgXCJwYXJlbnQtbGlua1wiKVxuXHRcdFx0LmF0dHIoXCJ4MVwiLCAoZDogVGltZWxpbmVFdmVudCkgPT4ge1xuXHRcdFx0XHRjb25zdCBwYXJlbnQgPSBldmVudHNXaXRoUG9zaXRpb24uZmluZChlID0+IGUuaWQgPT09IGQucGFyZW50X2lkKTtcblx0XHRcdFx0cmV0dXJuIHBhcmVudCA/IHhTY2FsZShwYXJlbnQudGltZWxpbmVfcG9zaXRpb24pIDogMDtcblx0XHRcdH0pXG5cdFx0XHQuYXR0cihcInkxXCIsIChkOiBUaW1lbGluZUV2ZW50KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHBhcmVudCA9IGV2ZW50c1dpdGhQb3NpdGlvbi5maW5kKGUgPT4gZS5pZCA9PT0gZC5wYXJlbnRfaWQpO1xuXHRcdFx0XHRyZXR1cm4gcGFyZW50ID8geVNjYWxlKHBhcmVudC5pbXBvcnRhbmNlKSA6IDA7XG5cdFx0XHR9KVxuXHRcdFx0LmF0dHIoXCJ4MlwiLCAoZDogVGltZWxpbmVFdmVudCkgPT4geFNjYWxlKGQudGltZWxpbmVfcG9zaXRpb24pKVxuXHRcdFx0LmF0dHIoXCJ5MlwiLCAoZDogVGltZWxpbmVFdmVudCkgPT4geVNjYWxlKGQuaW1wb3J0YW5jZSkpXG5cdFx0XHQuYXR0cihcInN0cm9rZVwiLCBcIiM5OTlcIilcblx0XHRcdC5hdHRyKFwic3Ryb2tlLWRhc2hhcnJheVwiLCBcIjQsMlwiKVxuXHRcdFx0LmF0dHIoXCJzdHJva2Utd2lkdGhcIiwgMSk7XG5cdFx0XG5cdFx0Ly8gUGxvdGFyIGV2ZW50b3MgY29tbyBjaXJjdWxvc1xuXHRcdHN2Zy5zZWxlY3RBbGwoXCJjaXJjbGVcIilcblx0XHRcdC5kYXRhKGV2ZW50c1dpdGhQb3NpdGlvbilcblx0XHRcdC5qb2luKFwiY2lyY2xlXCIpXG5cdFx0XHQuYXR0cihcImN4XCIsIChkOiBUaW1lbGluZUV2ZW50KSA9PiB4U2NhbGUoZC50aW1lbGluZV9wb3NpdGlvbikpXG5cdFx0XHQuYXR0cihcImN5XCIsIChkOiBUaW1lbGluZUV2ZW50KSA9PiB5U2NhbGUoZC5pbXBvcnRhbmNlKSlcblx0XHRcdC5hdHRyKFwiclwiLCAoZDogVGltZWxpbmVFdmVudCkgPT4gZC5pc19lcG9jaCA/IDEwIDogNilcblx0XHRcdC5hdHRyKFwiZmlsbFwiLCAoZDogVGltZWxpbmVFdmVudCkgPT4gY29sb3JTY2FsZShkLnR5cGUgfHwgXCJkZWZhdWx0XCIpKVxuXHRcdFx0LmF0dHIoXCJzdHJva2VcIiwgKGQ6IFRpbWVsaW5lRXZlbnQpID0+IGQuaXNfZXBvY2ggPyBcImdvbGRcIiA6IFwibm9uZVwiKVxuXHRcdFx0LmF0dHIoXCJzdHJva2Utd2lkdGhcIiwgMylcblx0XHRcdC5zdHlsZShcImN1cnNvclwiLCBcInBvaW50ZXJcIilcblx0XHRcdC5vbihcImNsaWNrXCIsIChfZXZlbnQ6IE1vdXNlRXZlbnQsIGQ6IFRpbWVsaW5lRXZlbnQpID0+IHRoaXMuc2hvd0V2ZW50RGV0YWlscyhkKSlcblx0XHRcdC5hcHBlbmQoXCJ0aXRsZVwiKVxuXHRcdFx0LnRleHQoKGQ6IFRpbWVsaW5lRXZlbnQpID0+IGAke2QubmFtZX0gKFllYXIgJHtkLnRpbWVsaW5lX3Bvc2l0aW9ufSlgKTtcblx0XHRcblx0XHQvLyBMYWJlbHMgcGFyYSBldmVudG9zIGltcG9ydGFudGVzIChpbXBvcnRhbmNlID49IDgpXG5cdFx0c3ZnLnNlbGVjdEFsbChcInRleHQuZXZlbnQtbGFiZWxcIilcblx0XHRcdC5kYXRhKGV2ZW50c1dpdGhQb3NpdGlvbi5maWx0ZXIoZSA9PiBlLmltcG9ydGFuY2UgPj0gOCkpXG5cdFx0XHQuam9pbihcInRleHRcIilcblx0XHRcdC5hdHRyKFwiY2xhc3NcIiwgXCJldmVudC1sYWJlbFwiKVxuXHRcdFx0LmF0dHIoXCJ4XCIsIChkOiBUaW1lbGluZUV2ZW50KSA9PiB4U2NhbGUoZC50aW1lbGluZV9wb3NpdGlvbikpXG5cdFx0XHQuYXR0cihcInlcIiwgKGQ6IFRpbWVsaW5lRXZlbnQpID0+IHlTY2FsZShkLmltcG9ydGFuY2UpIC0gMTIpXG5cdFx0XHQuYXR0cihcInRleHQtYW5jaG9yXCIsIFwibWlkZGxlXCIpXG5cdFx0XHQuYXR0cihcImZvbnQtc2l6ZVwiLCBcIjEwcHhcIilcblx0XHRcdC50ZXh0KChkOiBUaW1lbGluZUV2ZW50KSA9PiBkLm5hbWUuc3Vic3RyaW5nKDAsIDE1KSArIChkLm5hbWUubGVuZ3RoID4gMTUgPyBcIi4uLlwiIDogXCJcIikpO1xuXHR9XG5cdFxuXHRzaG93RXZlbnREZXRhaWxzKGV2ZW50OiBXb3JsZEV2ZW50KSB7XG5cdFx0Ly8gTW9zdHJhciBkZXRhbGhlcyBkbyBldmVudG8gZW0gdW0gcG9wdXAgb3UgcmVkaXJlY2lvbmFyXG5cdFx0bmV3IE5vdGljZShgRXZlbnQ6ICR7ZXZlbnQubmFtZX1cXG5ZZWFyOiAke2V2ZW50LnRpbWVsaW5lX3Bvc2l0aW9uID8/IFwiTi9BXCJ9XFxuSW1wb3J0YW5jZTogJHtldmVudC5pbXBvcnRhbmNlfWApO1xuXHR9XG5cdFxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBhc2NlbmRpbmcoYSwgYikge1xuICByZXR1cm4gYSA9PSBudWxsIHx8IGIgPT0gbnVsbCA/IE5hTiA6IGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiBhID49IGIgPyAwIDogTmFOO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRlc2NlbmRpbmcoYSwgYikge1xuICByZXR1cm4gYSA9PSBudWxsIHx8IGIgPT0gbnVsbCA/IE5hTlxuICAgIDogYiA8IGEgPyAtMVxuICAgIDogYiA+IGEgPyAxXG4gICAgOiBiID49IGEgPyAwXG4gICAgOiBOYU47XG59XG4iLCAiaW1wb3J0IGFzY2VuZGluZyBmcm9tIFwiLi9hc2NlbmRpbmcuanNcIjtcbmltcG9ydCBkZXNjZW5kaW5nIGZyb20gXCIuL2Rlc2NlbmRpbmcuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYmlzZWN0b3IoZikge1xuICBsZXQgY29tcGFyZTEsIGNvbXBhcmUyLCBkZWx0YTtcblxuICAvLyBJZiBhbiBhY2Nlc3NvciBpcyBzcGVjaWZpZWQsIHByb21vdGUgaXQgdG8gYSBjb21wYXJhdG9yLiBJbiB0aGlzIGNhc2Ugd2VcbiAgLy8gY2FuIHRlc3Qgd2hldGhlciB0aGUgc2VhcmNoIHZhbHVlIGlzIChzZWxmLSkgY29tcGFyYWJsZS4gV2UgY2FuXHUyMDE5dCBkbyB0aGlzXG4gIC8vIGZvciBhIGNvbXBhcmF0b3IgKGV4Y2VwdCBmb3Igc3BlY2lmaWMsIGtub3duIGNvbXBhcmF0b3JzKSBiZWNhdXNlIHdlIGNhblx1MjAxOXRcbiAgLy8gdGVsbCBpZiB0aGUgY29tcGFyYXRvciBpcyBzeW1tZXRyaWMsIGFuZCBhbiBhc3ltbWV0cmljIGNvbXBhcmF0b3IgY2FuXHUyMDE5dCBiZVxuICAvLyB1c2VkIHRvIHRlc3Qgd2hldGhlciBhIHNpbmdsZSB2YWx1ZSBpcyBjb21wYXJhYmxlLlxuICBpZiAoZi5sZW5ndGggIT09IDIpIHtcbiAgICBjb21wYXJlMSA9IGFzY2VuZGluZztcbiAgICBjb21wYXJlMiA9IChkLCB4KSA9PiBhc2NlbmRpbmcoZihkKSwgeCk7XG4gICAgZGVsdGEgPSAoZCwgeCkgPT4gZihkKSAtIHg7XG4gIH0gZWxzZSB7XG4gICAgY29tcGFyZTEgPSBmID09PSBhc2NlbmRpbmcgfHwgZiA9PT0gZGVzY2VuZGluZyA/IGYgOiB6ZXJvO1xuICAgIGNvbXBhcmUyID0gZjtcbiAgICBkZWx0YSA9IGY7XG4gIH1cblxuICBmdW5jdGlvbiBsZWZ0KGEsIHgsIGxvID0gMCwgaGkgPSBhLmxlbmd0aCkge1xuICAgIGlmIChsbyA8IGhpKSB7XG4gICAgICBpZiAoY29tcGFyZTEoeCwgeCkgIT09IDApIHJldHVybiBoaTtcbiAgICAgIGRvIHtcbiAgICAgICAgY29uc3QgbWlkID0gKGxvICsgaGkpID4+PiAxO1xuICAgICAgICBpZiAoY29tcGFyZTIoYVttaWRdLCB4KSA8IDApIGxvID0gbWlkICsgMTtcbiAgICAgICAgZWxzZSBoaSA9IG1pZDtcbiAgICAgIH0gd2hpbGUgKGxvIDwgaGkpO1xuICAgIH1cbiAgICByZXR1cm4gbG87XG4gIH1cblxuICBmdW5jdGlvbiByaWdodChhLCB4LCBsbyA9IDAsIGhpID0gYS5sZW5ndGgpIHtcbiAgICBpZiAobG8gPCBoaSkge1xuICAgICAgaWYgKGNvbXBhcmUxKHgsIHgpICE9PSAwKSByZXR1cm4gaGk7XG4gICAgICBkbyB7XG4gICAgICAgIGNvbnN0IG1pZCA9IChsbyArIGhpKSA+Pj4gMTtcbiAgICAgICAgaWYgKGNvbXBhcmUyKGFbbWlkXSwgeCkgPD0gMCkgbG8gPSBtaWQgKyAxO1xuICAgICAgICBlbHNlIGhpID0gbWlkO1xuICAgICAgfSB3aGlsZSAobG8gPCBoaSk7XG4gICAgfVxuICAgIHJldHVybiBsbztcbiAgfVxuXG4gIGZ1bmN0aW9uIGNlbnRlcihhLCB4LCBsbyA9IDAsIGhpID0gYS5sZW5ndGgpIHtcbiAgICBjb25zdCBpID0gbGVmdChhLCB4LCBsbywgaGkgLSAxKTtcbiAgICByZXR1cm4gaSA+IGxvICYmIGRlbHRhKGFbaSAtIDFdLCB4KSA+IC1kZWx0YShhW2ldLCB4KSA/IGkgLSAxIDogaTtcbiAgfVxuXG4gIHJldHVybiB7bGVmdCwgY2VudGVyLCByaWdodH07XG59XG5cbmZ1bmN0aW9uIHplcm8oKSB7XG4gIHJldHVybiAwO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG51bWJlcih4KSB7XG4gIHJldHVybiB4ID09PSBudWxsID8gTmFOIDogK3g7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiogbnVtYmVycyh2YWx1ZXMsIHZhbHVlb2YpIHtcbiAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkge1xuICAgIGZvciAobGV0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgKHZhbHVlID0gK3ZhbHVlKSA+PSB2YWx1ZSkge1xuICAgICAgICB5aWVsZCB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGV0IGluZGV4ID0gLTE7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAoKHZhbHVlID0gdmFsdWVvZih2YWx1ZSwgKytpbmRleCwgdmFsdWVzKSkgIT0gbnVsbCAmJiAodmFsdWUgPSArdmFsdWUpID49IHZhbHVlKSB7XG4gICAgICAgIHlpZWxkIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCBhc2NlbmRpbmcgZnJvbSBcIi4vYXNjZW5kaW5nLmpzXCI7XG5pbXBvcnQgYmlzZWN0b3IgZnJvbSBcIi4vYmlzZWN0b3IuanNcIjtcbmltcG9ydCBudW1iZXIgZnJvbSBcIi4vbnVtYmVyLmpzXCI7XG5cbmNvbnN0IGFzY2VuZGluZ0Jpc2VjdCA9IGJpc2VjdG9yKGFzY2VuZGluZyk7XG5leHBvcnQgY29uc3QgYmlzZWN0UmlnaHQgPSBhc2NlbmRpbmdCaXNlY3QucmlnaHQ7XG5leHBvcnQgY29uc3QgYmlzZWN0TGVmdCA9IGFzY2VuZGluZ0Jpc2VjdC5sZWZ0O1xuZXhwb3J0IGNvbnN0IGJpc2VjdENlbnRlciA9IGJpc2VjdG9yKG51bWJlcikuY2VudGVyO1xuZXhwb3J0IGRlZmF1bHQgYmlzZWN0UmlnaHQ7XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZXh0ZW50KHZhbHVlcywgdmFsdWVvZikge1xuICBsZXQgbWluO1xuICBsZXQgbWF4O1xuICBpZiAodmFsdWVvZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIGlmIChtaW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmICh2YWx1ZSA+PSB2YWx1ZSkgbWluID0gbWF4ID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKG1pbiA+IHZhbHVlKSBtaW4gPSB2YWx1ZTtcbiAgICAgICAgICBpZiAobWF4IDwgdmFsdWUpIG1heCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxldCBpbmRleCA9IC0xO1xuICAgIGZvciAobGV0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKCh2YWx1ZSA9IHZhbHVlb2YodmFsdWUsICsraW5kZXgsIHZhbHVlcykpICE9IG51bGwpIHtcbiAgICAgICAgaWYgKG1pbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKHZhbHVlID49IHZhbHVlKSBtaW4gPSBtYXggPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAobWluID4gdmFsdWUpIG1pbiA9IHZhbHVlO1xuICAgICAgICAgIGlmIChtYXggPCB2YWx1ZSkgbWF4ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIFttaW4sIG1heF07XG59XG4iLCAiZXhwb3J0IGNsYXNzIEludGVybk1hcCBleHRlbmRzIE1hcCB7XG4gIGNvbnN0cnVjdG9yKGVudHJpZXMsIGtleSA9IGtleW9mKSB7XG4gICAgc3VwZXIoKTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7X2ludGVybjoge3ZhbHVlOiBuZXcgTWFwKCl9LCBfa2V5OiB7dmFsdWU6IGtleX19KTtcbiAgICBpZiAoZW50cmllcyAhPSBudWxsKSBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBlbnRyaWVzKSB0aGlzLnNldChrZXksIHZhbHVlKTtcbiAgfVxuICBnZXQoa2V5KSB7XG4gICAgcmV0dXJuIHN1cGVyLmdldChpbnRlcm5fZ2V0KHRoaXMsIGtleSkpO1xuICB9XG4gIGhhcyhrZXkpIHtcbiAgICByZXR1cm4gc3VwZXIuaGFzKGludGVybl9nZXQodGhpcywga2V5KSk7XG4gIH1cbiAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICByZXR1cm4gc3VwZXIuc2V0KGludGVybl9zZXQodGhpcywga2V5KSwgdmFsdWUpO1xuICB9XG4gIGRlbGV0ZShrZXkpIHtcbiAgICByZXR1cm4gc3VwZXIuZGVsZXRlKGludGVybl9kZWxldGUodGhpcywga2V5KSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEludGVyblNldCBleHRlbmRzIFNldCB7XG4gIGNvbnN0cnVjdG9yKHZhbHVlcywga2V5ID0ga2V5b2YpIHtcbiAgICBzdXBlcigpO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtfaW50ZXJuOiB7dmFsdWU6IG5ldyBNYXAoKX0sIF9rZXk6IHt2YWx1ZToga2V5fX0pO1xuICAgIGlmICh2YWx1ZXMgIT0gbnVsbCkgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMpIHRoaXMuYWRkKHZhbHVlKTtcbiAgfVxuICBoYXModmFsdWUpIHtcbiAgICByZXR1cm4gc3VwZXIuaGFzKGludGVybl9nZXQodGhpcywgdmFsdWUpKTtcbiAgfVxuICBhZGQodmFsdWUpIHtcbiAgICByZXR1cm4gc3VwZXIuYWRkKGludGVybl9zZXQodGhpcywgdmFsdWUpKTtcbiAgfVxuICBkZWxldGUodmFsdWUpIHtcbiAgICByZXR1cm4gc3VwZXIuZGVsZXRlKGludGVybl9kZWxldGUodGhpcywgdmFsdWUpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbnRlcm5fZ2V0KHtfaW50ZXJuLCBfa2V5fSwgdmFsdWUpIHtcbiAgY29uc3Qga2V5ID0gX2tleSh2YWx1ZSk7XG4gIHJldHVybiBfaW50ZXJuLmhhcyhrZXkpID8gX2ludGVybi5nZXQoa2V5KSA6IHZhbHVlO1xufVxuXG5mdW5jdGlvbiBpbnRlcm5fc2V0KHtfaW50ZXJuLCBfa2V5fSwgdmFsdWUpIHtcbiAgY29uc3Qga2V5ID0gX2tleSh2YWx1ZSk7XG4gIGlmIChfaW50ZXJuLmhhcyhrZXkpKSByZXR1cm4gX2ludGVybi5nZXQoa2V5KTtcbiAgX2ludGVybi5zZXQoa2V5LCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gaW50ZXJuX2RlbGV0ZSh7X2ludGVybiwgX2tleX0sIHZhbHVlKSB7XG4gIGNvbnN0IGtleSA9IF9rZXkodmFsdWUpO1xuICBpZiAoX2ludGVybi5oYXMoa2V5KSkge1xuICAgIHZhbHVlID0gX2ludGVybi5nZXQoa2V5KTtcbiAgICBfaW50ZXJuLmRlbGV0ZShrZXkpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24ga2V5b2YodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xufVxuIiwgImNvbnN0IGUxMCA9IE1hdGguc3FydCg1MCksXG4gICAgZTUgPSBNYXRoLnNxcnQoMTApLFxuICAgIGUyID0gTWF0aC5zcXJ0KDIpO1xuXG5mdW5jdGlvbiB0aWNrU3BlYyhzdGFydCwgc3RvcCwgY291bnQpIHtcbiAgY29uc3Qgc3RlcCA9IChzdG9wIC0gc3RhcnQpIC8gTWF0aC5tYXgoMCwgY291bnQpLFxuICAgICAgcG93ZXIgPSBNYXRoLmZsb29yKE1hdGgubG9nMTAoc3RlcCkpLFxuICAgICAgZXJyb3IgPSBzdGVwIC8gTWF0aC5wb3coMTAsIHBvd2VyKSxcbiAgICAgIGZhY3RvciA9IGVycm9yID49IGUxMCA/IDEwIDogZXJyb3IgPj0gZTUgPyA1IDogZXJyb3IgPj0gZTIgPyAyIDogMTtcbiAgbGV0IGkxLCBpMiwgaW5jO1xuICBpZiAocG93ZXIgPCAwKSB7XG4gICAgaW5jID0gTWF0aC5wb3coMTAsIC1wb3dlcikgLyBmYWN0b3I7XG4gICAgaTEgPSBNYXRoLnJvdW5kKHN0YXJ0ICogaW5jKTtcbiAgICBpMiA9IE1hdGgucm91bmQoc3RvcCAqIGluYyk7XG4gICAgaWYgKGkxIC8gaW5jIDwgc3RhcnQpICsraTE7XG4gICAgaWYgKGkyIC8gaW5jID4gc3RvcCkgLS1pMjtcbiAgICBpbmMgPSAtaW5jO1xuICB9IGVsc2Uge1xuICAgIGluYyA9IE1hdGgucG93KDEwLCBwb3dlcikgKiBmYWN0b3I7XG4gICAgaTEgPSBNYXRoLnJvdW5kKHN0YXJ0IC8gaW5jKTtcbiAgICBpMiA9IE1hdGgucm91bmQoc3RvcCAvIGluYyk7XG4gICAgaWYgKGkxICogaW5jIDwgc3RhcnQpICsraTE7XG4gICAgaWYgKGkyICogaW5jID4gc3RvcCkgLS1pMjtcbiAgfVxuICBpZiAoaTIgPCBpMSAmJiAwLjUgPD0gY291bnQgJiYgY291bnQgPCAyKSByZXR1cm4gdGlja1NwZWMoc3RhcnQsIHN0b3AsIGNvdW50ICogMik7XG4gIHJldHVybiBbaTEsIGkyLCBpbmNdO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0aWNrcyhzdGFydCwgc3RvcCwgY291bnQpIHtcbiAgc3RvcCA9ICtzdG9wLCBzdGFydCA9ICtzdGFydCwgY291bnQgPSArY291bnQ7XG4gIGlmICghKGNvdW50ID4gMCkpIHJldHVybiBbXTtcbiAgaWYgKHN0YXJ0ID09PSBzdG9wKSByZXR1cm4gW3N0YXJ0XTtcbiAgY29uc3QgcmV2ZXJzZSA9IHN0b3AgPCBzdGFydCwgW2kxLCBpMiwgaW5jXSA9IHJldmVyc2UgPyB0aWNrU3BlYyhzdG9wLCBzdGFydCwgY291bnQpIDogdGlja1NwZWMoc3RhcnQsIHN0b3AsIGNvdW50KTtcbiAgaWYgKCEoaTIgPj0gaTEpKSByZXR1cm4gW107XG4gIGNvbnN0IG4gPSBpMiAtIGkxICsgMSwgdGlja3MgPSBuZXcgQXJyYXkobik7XG4gIGlmIChyZXZlcnNlKSB7XG4gICAgaWYgKGluYyA8IDApIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgKytpKSB0aWNrc1tpXSA9IChpMiAtIGkpIC8gLWluYztcbiAgICBlbHNlIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgKytpKSB0aWNrc1tpXSA9IChpMiAtIGkpICogaW5jO1xuICB9IGVsc2Uge1xuICAgIGlmIChpbmMgPCAwKSBmb3IgKGxldCBpID0gMDsgaSA8IG47ICsraSkgdGlja3NbaV0gPSAoaTEgKyBpKSAvIC1pbmM7XG4gICAgZWxzZSBmb3IgKGxldCBpID0gMDsgaSA8IG47ICsraSkgdGlja3NbaV0gPSAoaTEgKyBpKSAqIGluYztcbiAgfVxuICByZXR1cm4gdGlja3M7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aWNrSW5jcmVtZW50KHN0YXJ0LCBzdG9wLCBjb3VudCkge1xuICBzdG9wID0gK3N0b3AsIHN0YXJ0ID0gK3N0YXJ0LCBjb3VudCA9ICtjb3VudDtcbiAgcmV0dXJuIHRpY2tTcGVjKHN0YXJ0LCBzdG9wLCBjb3VudClbMl07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aWNrU3RlcChzdGFydCwgc3RvcCwgY291bnQpIHtcbiAgc3RvcCA9ICtzdG9wLCBzdGFydCA9ICtzdGFydCwgY291bnQgPSArY291bnQ7XG4gIGNvbnN0IHJldmVyc2UgPSBzdG9wIDwgc3RhcnQsIGluYyA9IHJldmVyc2UgPyB0aWNrSW5jcmVtZW50KHN0b3AsIHN0YXJ0LCBjb3VudCkgOiB0aWNrSW5jcmVtZW50KHN0YXJ0LCBzdG9wLCBjb3VudCk7XG4gIHJldHVybiAocmV2ZXJzZSA/IC0xIDogMSkgKiAoaW5jIDwgMCA/IDEgLyAtaW5jIDogaW5jKTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbih4KSB7XG4gIHJldHVybiB4O1xufVxuIiwgImltcG9ydCBpZGVudGl0eSBmcm9tIFwiLi9pZGVudGl0eS5qc1wiO1xuXG52YXIgdG9wID0gMSxcbiAgICByaWdodCA9IDIsXG4gICAgYm90dG9tID0gMyxcbiAgICBsZWZ0ID0gNCxcbiAgICBlcHNpbG9uID0gMWUtNjtcblxuZnVuY3Rpb24gdHJhbnNsYXRlWCh4KSB7XG4gIHJldHVybiBcInRyYW5zbGF0ZShcIiArIHggKyBcIiwwKVwiO1xufVxuXG5mdW5jdGlvbiB0cmFuc2xhdGVZKHkpIHtcbiAgcmV0dXJuIFwidHJhbnNsYXRlKDAsXCIgKyB5ICsgXCIpXCI7XG59XG5cbmZ1bmN0aW9uIG51bWJlcihzY2FsZSkge1xuICByZXR1cm4gZCA9PiArc2NhbGUoZCk7XG59XG5cbmZ1bmN0aW9uIGNlbnRlcihzY2FsZSwgb2Zmc2V0KSB7XG4gIG9mZnNldCA9IE1hdGgubWF4KDAsIHNjYWxlLmJhbmR3aWR0aCgpIC0gb2Zmc2V0ICogMikgLyAyO1xuICBpZiAoc2NhbGUucm91bmQoKSkgb2Zmc2V0ID0gTWF0aC5yb3VuZChvZmZzZXQpO1xuICByZXR1cm4gZCA9PiArc2NhbGUoZCkgKyBvZmZzZXQ7XG59XG5cbmZ1bmN0aW9uIGVudGVyaW5nKCkge1xuICByZXR1cm4gIXRoaXMuX19heGlzO1xufVxuXG5mdW5jdGlvbiBheGlzKG9yaWVudCwgc2NhbGUpIHtcbiAgdmFyIHRpY2tBcmd1bWVudHMgPSBbXSxcbiAgICAgIHRpY2tWYWx1ZXMgPSBudWxsLFxuICAgICAgdGlja0Zvcm1hdCA9IG51bGwsXG4gICAgICB0aWNrU2l6ZUlubmVyID0gNixcbiAgICAgIHRpY2tTaXplT3V0ZXIgPSA2LFxuICAgICAgdGlja1BhZGRpbmcgPSAzLFxuICAgICAgb2Zmc2V0ID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA+IDEgPyAwIDogMC41LFxuICAgICAgayA9IG9yaWVudCA9PT0gdG9wIHx8IG9yaWVudCA9PT0gbGVmdCA/IC0xIDogMSxcbiAgICAgIHggPSBvcmllbnQgPT09IGxlZnQgfHwgb3JpZW50ID09PSByaWdodCA/IFwieFwiIDogXCJ5XCIsXG4gICAgICB0cmFuc2Zvcm0gPSBvcmllbnQgPT09IHRvcCB8fCBvcmllbnQgPT09IGJvdHRvbSA/IHRyYW5zbGF0ZVggOiB0cmFuc2xhdGVZO1xuXG4gIGZ1bmN0aW9uIGF4aXMoY29udGV4dCkge1xuICAgIHZhciB2YWx1ZXMgPSB0aWNrVmFsdWVzID09IG51bGwgPyAoc2NhbGUudGlja3MgPyBzY2FsZS50aWNrcy5hcHBseShzY2FsZSwgdGlja0FyZ3VtZW50cykgOiBzY2FsZS5kb21haW4oKSkgOiB0aWNrVmFsdWVzLFxuICAgICAgICBmb3JtYXQgPSB0aWNrRm9ybWF0ID09IG51bGwgPyAoc2NhbGUudGlja0Zvcm1hdCA/IHNjYWxlLnRpY2tGb3JtYXQuYXBwbHkoc2NhbGUsIHRpY2tBcmd1bWVudHMpIDogaWRlbnRpdHkpIDogdGlja0Zvcm1hdCxcbiAgICAgICAgc3BhY2luZyA9IE1hdGgubWF4KHRpY2tTaXplSW5uZXIsIDApICsgdGlja1BhZGRpbmcsXG4gICAgICAgIHJhbmdlID0gc2NhbGUucmFuZ2UoKSxcbiAgICAgICAgcmFuZ2UwID0gK3JhbmdlWzBdICsgb2Zmc2V0LFxuICAgICAgICByYW5nZTEgPSArcmFuZ2VbcmFuZ2UubGVuZ3RoIC0gMV0gKyBvZmZzZXQsXG4gICAgICAgIHBvc2l0aW9uID0gKHNjYWxlLmJhbmR3aWR0aCA/IGNlbnRlciA6IG51bWJlcikoc2NhbGUuY29weSgpLCBvZmZzZXQpLFxuICAgICAgICBzZWxlY3Rpb24gPSBjb250ZXh0LnNlbGVjdGlvbiA/IGNvbnRleHQuc2VsZWN0aW9uKCkgOiBjb250ZXh0LFxuICAgICAgICBwYXRoID0gc2VsZWN0aW9uLnNlbGVjdEFsbChcIi5kb21haW5cIikuZGF0YShbbnVsbF0pLFxuICAgICAgICB0aWNrID0gc2VsZWN0aW9uLnNlbGVjdEFsbChcIi50aWNrXCIpLmRhdGEodmFsdWVzLCBzY2FsZSkub3JkZXIoKSxcbiAgICAgICAgdGlja0V4aXQgPSB0aWNrLmV4aXQoKSxcbiAgICAgICAgdGlja0VudGVyID0gdGljay5lbnRlcigpLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIFwidGlja1wiKSxcbiAgICAgICAgbGluZSA9IHRpY2suc2VsZWN0KFwibGluZVwiKSxcbiAgICAgICAgdGV4dCA9IHRpY2suc2VsZWN0KFwidGV4dFwiKTtcblxuICAgIHBhdGggPSBwYXRoLm1lcmdlKHBhdGguZW50ZXIoKS5pbnNlcnQoXCJwYXRoXCIsIFwiLnRpY2tcIilcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImRvbWFpblwiKVxuICAgICAgICAuYXR0cihcInN0cm9rZVwiLCBcImN1cnJlbnRDb2xvclwiKSk7XG5cbiAgICB0aWNrID0gdGljay5tZXJnZSh0aWNrRW50ZXIpO1xuXG4gICAgbGluZSA9IGxpbmUubWVyZ2UodGlja0VudGVyLmFwcGVuZChcImxpbmVcIilcbiAgICAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCJjdXJyZW50Q29sb3JcIilcbiAgICAgICAgLmF0dHIoeCArIFwiMlwiLCBrICogdGlja1NpemVJbm5lcikpO1xuXG4gICAgdGV4dCA9IHRleHQubWVyZ2UodGlja0VudGVyLmFwcGVuZChcInRleHRcIilcbiAgICAgICAgLmF0dHIoXCJmaWxsXCIsIFwiY3VycmVudENvbG9yXCIpXG4gICAgICAgIC5hdHRyKHgsIGsgKiBzcGFjaW5nKVxuICAgICAgICAuYXR0cihcImR5XCIsIG9yaWVudCA9PT0gdG9wID8gXCIwZW1cIiA6IG9yaWVudCA9PT0gYm90dG9tID8gXCIwLjcxZW1cIiA6IFwiMC4zMmVtXCIpKTtcblxuICAgIGlmIChjb250ZXh0ICE9PSBzZWxlY3Rpb24pIHtcbiAgICAgIHBhdGggPSBwYXRoLnRyYW5zaXRpb24oY29udGV4dCk7XG4gICAgICB0aWNrID0gdGljay50cmFuc2l0aW9uKGNvbnRleHQpO1xuICAgICAgbGluZSA9IGxpbmUudHJhbnNpdGlvbihjb250ZXh0KTtcbiAgICAgIHRleHQgPSB0ZXh0LnRyYW5zaXRpb24oY29udGV4dCk7XG5cbiAgICAgIHRpY2tFeGl0ID0gdGlja0V4aXQudHJhbnNpdGlvbihjb250ZXh0KVxuICAgICAgICAgIC5hdHRyKFwib3BhY2l0eVwiLCBlcHNpbG9uKVxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGlzRmluaXRlKGQgPSBwb3NpdGlvbihkKSkgPyB0cmFuc2Zvcm0oZCArIG9mZnNldCkgOiB0aGlzLmdldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiKTsgfSk7XG5cbiAgICAgIHRpY2tFbnRlclxuICAgICAgICAgIC5hdHRyKFwib3BhY2l0eVwiLCBlcHNpbG9uKVxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgdmFyIHAgPSB0aGlzLnBhcmVudE5vZGUuX19heGlzOyByZXR1cm4gdHJhbnNmb3JtKChwICYmIGlzRmluaXRlKHAgPSBwKGQpKSA/IHAgOiBwb3NpdGlvbihkKSkgKyBvZmZzZXQpOyB9KTtcbiAgICB9XG5cbiAgICB0aWNrRXhpdC5yZW1vdmUoKTtcblxuICAgIHBhdGhcbiAgICAgICAgLmF0dHIoXCJkXCIsIG9yaWVudCA9PT0gbGVmdCB8fCBvcmllbnQgPT09IHJpZ2h0XG4gICAgICAgICAgICA/ICh0aWNrU2l6ZU91dGVyID8gXCJNXCIgKyBrICogdGlja1NpemVPdXRlciArIFwiLFwiICsgcmFuZ2UwICsgXCJIXCIgKyBvZmZzZXQgKyBcIlZcIiArIHJhbmdlMSArIFwiSFwiICsgayAqIHRpY2tTaXplT3V0ZXIgOiBcIk1cIiArIG9mZnNldCArIFwiLFwiICsgcmFuZ2UwICsgXCJWXCIgKyByYW5nZTEpXG4gICAgICAgICAgICA6ICh0aWNrU2l6ZU91dGVyID8gXCJNXCIgKyByYW5nZTAgKyBcIixcIiArIGsgKiB0aWNrU2l6ZU91dGVyICsgXCJWXCIgKyBvZmZzZXQgKyBcIkhcIiArIHJhbmdlMSArIFwiVlwiICsgayAqIHRpY2tTaXplT3V0ZXIgOiBcIk1cIiArIHJhbmdlMCArIFwiLFwiICsgb2Zmc2V0ICsgXCJIXCIgKyByYW5nZTEpKTtcblxuICAgIHRpY2tcbiAgICAgICAgLmF0dHIoXCJvcGFjaXR5XCIsIDEpXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHRyYW5zZm9ybShwb3NpdGlvbihkKSArIG9mZnNldCk7IH0pO1xuXG4gICAgbGluZVxuICAgICAgICAuYXR0cih4ICsgXCIyXCIsIGsgKiB0aWNrU2l6ZUlubmVyKTtcblxuICAgIHRleHRcbiAgICAgICAgLmF0dHIoeCwgayAqIHNwYWNpbmcpXG4gICAgICAgIC50ZXh0KGZvcm1hdCk7XG5cbiAgICBzZWxlY3Rpb24uZmlsdGVyKGVudGVyaW5nKVxuICAgICAgICAuYXR0cihcImZpbGxcIiwgXCJub25lXCIpXG4gICAgICAgIC5hdHRyKFwiZm9udC1zaXplXCIsIDEwKVxuICAgICAgICAuYXR0cihcImZvbnQtZmFtaWx5XCIsIFwic2Fucy1zZXJpZlwiKVxuICAgICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIG9yaWVudCA9PT0gcmlnaHQgPyBcInN0YXJ0XCIgOiBvcmllbnQgPT09IGxlZnQgPyBcImVuZFwiIDogXCJtaWRkbGVcIik7XG5cbiAgICBzZWxlY3Rpb25cbiAgICAgICAgLmVhY2goZnVuY3Rpb24oKSB7IHRoaXMuX19heGlzID0gcG9zaXRpb247IH0pO1xuICB9XG5cbiAgYXhpcy5zY2FsZSA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChzY2FsZSA9IF8sIGF4aXMpIDogc2NhbGU7XG4gIH07XG5cbiAgYXhpcy50aWNrcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aWNrQXJndW1lbnRzID0gQXJyYXkuZnJvbShhcmd1bWVudHMpLCBheGlzO1xuICB9O1xuXG4gIGF4aXMudGlja0FyZ3VtZW50cyA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/ICh0aWNrQXJndW1lbnRzID0gXyA9PSBudWxsID8gW10gOiBBcnJheS5mcm9tKF8pLCBheGlzKSA6IHRpY2tBcmd1bWVudHMuc2xpY2UoKTtcbiAgfTtcblxuICBheGlzLnRpY2tWYWx1ZXMgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAodGlja1ZhbHVlcyA9IF8gPT0gbnVsbCA/IG51bGwgOiBBcnJheS5mcm9tKF8pLCBheGlzKSA6IHRpY2tWYWx1ZXMgJiYgdGlja1ZhbHVlcy5zbGljZSgpO1xuICB9O1xuXG4gIGF4aXMudGlja0Zvcm1hdCA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/ICh0aWNrRm9ybWF0ID0gXywgYXhpcykgOiB0aWNrRm9ybWF0O1xuICB9O1xuXG4gIGF4aXMudGlja1NpemUgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAodGlja1NpemVJbm5lciA9IHRpY2tTaXplT3V0ZXIgPSArXywgYXhpcykgOiB0aWNrU2l6ZUlubmVyO1xuICB9O1xuXG4gIGF4aXMudGlja1NpemVJbm5lciA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/ICh0aWNrU2l6ZUlubmVyID0gK18sIGF4aXMpIDogdGlja1NpemVJbm5lcjtcbiAgfTtcblxuICBheGlzLnRpY2tTaXplT3V0ZXIgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAodGlja1NpemVPdXRlciA9ICtfLCBheGlzKSA6IHRpY2tTaXplT3V0ZXI7XG4gIH07XG5cbiAgYXhpcy50aWNrUGFkZGluZyA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/ICh0aWNrUGFkZGluZyA9ICtfLCBheGlzKSA6IHRpY2tQYWRkaW5nO1xuICB9O1xuXG4gIGF4aXMub2Zmc2V0ID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKG9mZnNldCA9ICtfLCBheGlzKSA6IG9mZnNldDtcbiAgfTtcblxuICByZXR1cm4gYXhpcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGF4aXNUb3Aoc2NhbGUpIHtcbiAgcmV0dXJuIGF4aXModG9wLCBzY2FsZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBheGlzUmlnaHQoc2NhbGUpIHtcbiAgcmV0dXJuIGF4aXMocmlnaHQsIHNjYWxlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGF4aXNCb3R0b20oc2NhbGUpIHtcbiAgcmV0dXJuIGF4aXMoYm90dG9tLCBzY2FsZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBheGlzTGVmdChzY2FsZSkge1xuICByZXR1cm4gYXhpcyhsZWZ0LCBzY2FsZSk7XG59XG4iLCAidmFyIG5vb3AgPSB7dmFsdWU6ICgpID0+IHt9fTtcblxuZnVuY3Rpb24gZGlzcGF0Y2goKSB7XG4gIGZvciAodmFyIGkgPSAwLCBuID0gYXJndW1lbnRzLmxlbmd0aCwgXyA9IHt9LCB0OyBpIDwgbjsgKytpKSB7XG4gICAgaWYgKCEodCA9IGFyZ3VtZW50c1tpXSArIFwiXCIpIHx8ICh0IGluIF8pIHx8IC9bXFxzLl0vLnRlc3QodCkpIHRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgdHlwZTogXCIgKyB0KTtcbiAgICBfW3RdID0gW107XG4gIH1cbiAgcmV0dXJuIG5ldyBEaXNwYXRjaChfKTtcbn1cblxuZnVuY3Rpb24gRGlzcGF0Y2goXykge1xuICB0aGlzLl8gPSBfO1xufVxuXG5mdW5jdGlvbiBwYXJzZVR5cGVuYW1lcyh0eXBlbmFtZXMsIHR5cGVzKSB7XG4gIHJldHVybiB0eXBlbmFtZXMudHJpbSgpLnNwbGl0KC9efFxccysvKS5tYXAoZnVuY3Rpb24odCkge1xuICAgIHZhciBuYW1lID0gXCJcIiwgaSA9IHQuaW5kZXhPZihcIi5cIik7XG4gICAgaWYgKGkgPj0gMCkgbmFtZSA9IHQuc2xpY2UoaSArIDEpLCB0ID0gdC5zbGljZSgwLCBpKTtcbiAgICBpZiAodCAmJiAhdHlwZXMuaGFzT3duUHJvcGVydHkodCkpIHRocm93IG5ldyBFcnJvcihcInVua25vd24gdHlwZTogXCIgKyB0KTtcbiAgICByZXR1cm4ge3R5cGU6IHQsIG5hbWU6IG5hbWV9O1xuICB9KTtcbn1cblxuRGlzcGF0Y2gucHJvdG90eXBlID0gZGlzcGF0Y2gucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogRGlzcGF0Y2gsXG4gIG9uOiBmdW5jdGlvbih0eXBlbmFtZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgXyA9IHRoaXMuXyxcbiAgICAgICAgVCA9IHBhcnNlVHlwZW5hbWVzKHR5cGVuYW1lICsgXCJcIiwgXyksXG4gICAgICAgIHQsXG4gICAgICAgIGkgPSAtMSxcbiAgICAgICAgbiA9IFQubGVuZ3RoO1xuXG4gICAgLy8gSWYgbm8gY2FsbGJhY2sgd2FzIHNwZWNpZmllZCwgcmV0dXJuIHRoZSBjYWxsYmFjayBvZiB0aGUgZ2l2ZW4gdHlwZSBhbmQgbmFtZS5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICAgIHdoaWxlICgrK2kgPCBuKSBpZiAoKHQgPSAodHlwZW5hbWUgPSBUW2ldKS50eXBlKSAmJiAodCA9IGdldChfW3RdLCB0eXBlbmFtZS5uYW1lKSkpIHJldHVybiB0O1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElmIGEgdHlwZSB3YXMgc3BlY2lmaWVkLCBzZXQgdGhlIGNhbGxiYWNrIGZvciB0aGUgZ2l2ZW4gdHlwZSBhbmQgbmFtZS5cbiAgICAvLyBPdGhlcndpc2UsIGlmIGEgbnVsbCBjYWxsYmFjayB3YXMgc3BlY2lmaWVkLCByZW1vdmUgY2FsbGJhY2tzIG9mIHRoZSBnaXZlbiBuYW1lLlxuICAgIGlmIChjYWxsYmFjayAhPSBudWxsICYmIHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIGNhbGxiYWNrOiBcIiArIGNhbGxiYWNrKTtcbiAgICB3aGlsZSAoKytpIDwgbikge1xuICAgICAgaWYgKHQgPSAodHlwZW5hbWUgPSBUW2ldKS50eXBlKSBfW3RdID0gc2V0KF9bdF0sIHR5cGVuYW1lLm5hbWUsIGNhbGxiYWNrKTtcbiAgICAgIGVsc2UgaWYgKGNhbGxiYWNrID09IG51bGwpIGZvciAodCBpbiBfKSBfW3RdID0gc2V0KF9bdF0sIHR5cGVuYW1lLm5hbWUsIG51bGwpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuICBjb3B5OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgY29weSA9IHt9LCBfID0gdGhpcy5fO1xuICAgIGZvciAodmFyIHQgaW4gXykgY29weVt0XSA9IF9bdF0uc2xpY2UoKTtcbiAgICByZXR1cm4gbmV3IERpc3BhdGNoKGNvcHkpO1xuICB9LFxuICBjYWxsOiBmdW5jdGlvbih0eXBlLCB0aGF0KSB7XG4gICAgaWYgKChuID0gYXJndW1lbnRzLmxlbmd0aCAtIDIpID4gMCkgZm9yICh2YXIgYXJncyA9IG5ldyBBcnJheShuKSwgaSA9IDAsIG4sIHQ7IGkgPCBuOyArK2kpIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDJdO1xuICAgIGlmICghdGhpcy5fLmhhc093blByb3BlcnR5KHR5cGUpKSB0aHJvdyBuZXcgRXJyb3IoXCJ1bmtub3duIHR5cGU6IFwiICsgdHlwZSk7XG4gICAgZm9yICh0ID0gdGhpcy5fW3R5cGVdLCBpID0gMCwgbiA9IHQubGVuZ3RoOyBpIDwgbjsgKytpKSB0W2ldLnZhbHVlLmFwcGx5KHRoYXQsIGFyZ3MpO1xuICB9LFxuICBhcHBseTogZnVuY3Rpb24odHlwZSwgdGhhdCwgYXJncykge1xuICAgIGlmICghdGhpcy5fLmhhc093blByb3BlcnR5KHR5cGUpKSB0aHJvdyBuZXcgRXJyb3IoXCJ1bmtub3duIHR5cGU6IFwiICsgdHlwZSk7XG4gICAgZm9yICh2YXIgdCA9IHRoaXMuX1t0eXBlXSwgaSA9IDAsIG4gPSB0Lmxlbmd0aDsgaSA8IG47ICsraSkgdFtpXS52YWx1ZS5hcHBseSh0aGF0LCBhcmdzKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gZ2V0KHR5cGUsIG5hbWUpIHtcbiAgZm9yICh2YXIgaSA9IDAsIG4gPSB0eXBlLmxlbmd0aCwgYzsgaSA8IG47ICsraSkge1xuICAgIGlmICgoYyA9IHR5cGVbaV0pLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgIHJldHVybiBjLnZhbHVlO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzZXQodHlwZSwgbmFtZSwgY2FsbGJhY2spIHtcbiAgZm9yICh2YXIgaSA9IDAsIG4gPSB0eXBlLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgIGlmICh0eXBlW2ldLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgIHR5cGVbaV0gPSBub29wLCB0eXBlID0gdHlwZS5zbGljZSgwLCBpKS5jb25jYXQodHlwZS5zbGljZShpICsgMSkpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGlmIChjYWxsYmFjayAhPSBudWxsKSB0eXBlLnB1c2goe25hbWU6IG5hbWUsIHZhbHVlOiBjYWxsYmFja30pO1xuICByZXR1cm4gdHlwZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZGlzcGF0Y2g7XG4iLCAiZXhwb3J0IHZhciB4aHRtbCA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHN2ZzogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICB4aHRtbDogeGh0bWwsXG4gIHhsaW5rOiBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIixcbiAgeG1sOiBcImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZVwiLFxuICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zL1wiXG59O1xuIiwgImltcG9ydCBuYW1lc3BhY2VzIGZyb20gXCIuL25hbWVzcGFjZXMuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSkge1xuICB2YXIgcHJlZml4ID0gbmFtZSArPSBcIlwiLCBpID0gcHJlZml4LmluZGV4T2YoXCI6XCIpO1xuICBpZiAoaSA+PSAwICYmIChwcmVmaXggPSBuYW1lLnNsaWNlKDAsIGkpKSAhPT0gXCJ4bWxuc1wiKSBuYW1lID0gbmFtZS5zbGljZShpICsgMSk7XG4gIHJldHVybiBuYW1lc3BhY2VzLmhhc093blByb3BlcnR5KHByZWZpeCkgPyB7c3BhY2U6IG5hbWVzcGFjZXNbcHJlZml4XSwgbG9jYWw6IG5hbWV9IDogbmFtZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbn1cbiIsICJpbXBvcnQgbmFtZXNwYWNlIGZyb20gXCIuL25hbWVzcGFjZS5qc1wiO1xuaW1wb3J0IHt4aHRtbH0gZnJvbSBcIi4vbmFtZXNwYWNlcy5qc1wiO1xuXG5mdW5jdGlvbiBjcmVhdG9ySW5oZXJpdChuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZG9jdW1lbnQgPSB0aGlzLm93bmVyRG9jdW1lbnQsXG4gICAgICAgIHVyaSA9IHRoaXMubmFtZXNwYWNlVVJJO1xuICAgIHJldHVybiB1cmkgPT09IHhodG1sICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5uYW1lc3BhY2VVUkkgPT09IHhodG1sXG4gICAgICAgID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKVxuICAgICAgICA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh1cmksIG5hbWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdG9yRml4ZWQoZnVsbG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUpIHtcbiAgdmFyIGZ1bGxuYW1lID0gbmFtZXNwYWNlKG5hbWUpO1xuICByZXR1cm4gKGZ1bGxuYW1lLmxvY2FsXG4gICAgICA/IGNyZWF0b3JGaXhlZFxuICAgICAgOiBjcmVhdG9ySW5oZXJpdCkoZnVsbG5hbWUpO1xufVxuIiwgImZ1bmN0aW9uIG5vbmUoKSB7fVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3Rvcikge1xuICByZXR1cm4gc2VsZWN0b3IgPT0gbnVsbCA/IG5vbmUgOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgfTtcbn1cbiIsICJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCBzZWxlY3RvciBmcm9tIFwiLi4vc2VsZWN0b3IuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc2VsZWN0KSB7XG4gIGlmICh0eXBlb2Ygc2VsZWN0ICE9PSBcImZ1bmN0aW9uXCIpIHNlbGVjdCA9IHNlbGVjdG9yKHNlbGVjdCk7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBzdWJncm91cCA9IHN1Ymdyb3Vwc1tqXSA9IG5ldyBBcnJheShuKSwgbm9kZSwgc3Vibm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmICgobm9kZSA9IGdyb3VwW2ldKSAmJiAoc3Vibm9kZSA9IHNlbGVjdC5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKSkpIHtcbiAgICAgICAgaWYgKFwiX19kYXRhX19cIiBpbiBub2RlKSBzdWJub2RlLl9fZGF0YV9fID0gbm9kZS5fX2RhdGFfXztcbiAgICAgICAgc3ViZ3JvdXBbaV0gPSBzdWJub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHN1Ymdyb3VwcywgdGhpcy5fcGFyZW50cyk7XG59XG4iLCAiLy8gR2l2ZW4gc29tZXRoaW5nIGFycmF5IGxpa2UgKG9yIG51bGwpLCByZXR1cm5zIHNvbWV0aGluZyB0aGF0IGlzIHN0cmljdGx5IGFuXG4vLyBhcnJheS4gVGhpcyBpcyB1c2VkIHRvIGVuc3VyZSB0aGF0IGFycmF5LWxpa2Ugb2JqZWN0cyBwYXNzZWQgdG8gZDMuc2VsZWN0QWxsXG4vLyBvciBzZWxlY3Rpb24uc2VsZWN0QWxsIGFyZSBjb252ZXJ0ZWQgaW50byBwcm9wZXIgYXJyYXlzIHdoZW4gY3JlYXRpbmcgYVxuLy8gc2VsZWN0aW9uOyB3ZSBkb25cdTIwMTl0IGV2ZXIgd2FudCB0byBjcmVhdGUgYSBzZWxlY3Rpb24gYmFja2VkIGJ5IGEgbGl2ZVxuLy8gSFRNTENvbGxlY3Rpb24gb3IgTm9kZUxpc3QuIEhvd2V2ZXIsIG5vdGUgdGhhdCBzZWxlY3Rpb24uc2VsZWN0QWxsIHdpbGwgdXNlIGFcbi8vIHN0YXRpYyBOb2RlTGlzdCBhcyBhIGdyb3VwLCBzaW5jZSBpdCBzYWZlbHkgZGVyaXZlZCBmcm9tIHF1ZXJ5U2VsZWN0b3JBbGwuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBhcnJheSh4KSB7XG4gIHJldHVybiB4ID09IG51bGwgPyBbXSA6IEFycmF5LmlzQXJyYXkoeCkgPyB4IDogQXJyYXkuZnJvbSh4KTtcbn1cbiIsICJmdW5jdGlvbiBlbXB0eSgpIHtcbiAgcmV0dXJuIFtdO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3Rvcikge1xuICByZXR1cm4gc2VsZWN0b3IgPT0gbnVsbCA/IGVtcHR5IDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gIH07XG59XG4iLCAiaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgYXJyYXkgZnJvbSBcIi4uL2FycmF5LmpzXCI7XG5pbXBvcnQgc2VsZWN0b3JBbGwgZnJvbSBcIi4uL3NlbGVjdG9yQWxsLmpzXCI7XG5cbmZ1bmN0aW9uIGFycmF5QWxsKHNlbGVjdCkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGFycmF5KHNlbGVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc2VsZWN0KSB7XG4gIGlmICh0eXBlb2Ygc2VsZWN0ID09PSBcImZ1bmN0aW9uXCIpIHNlbGVjdCA9IGFycmF5QWxsKHNlbGVjdCk7XG4gIGVsc2Ugc2VsZWN0ID0gc2VsZWN0b3JBbGwoc2VsZWN0KTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBbXSwgcGFyZW50cyA9IFtdLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBzdWJncm91cHMucHVzaChzZWxlY3QuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCkpO1xuICAgICAgICBwYXJlbnRzLnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oc3ViZ3JvdXBzLCBwYXJlbnRzKTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3Rvcikge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubWF0Y2hlcyhzZWxlY3Rvcik7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGlsZE1hdGNoZXIoc2VsZWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5tYXRjaGVzKHNlbGVjdG9yKTtcbiAgfTtcbn1cblxuIiwgImltcG9ydCB7Y2hpbGRNYXRjaGVyfSBmcm9tIFwiLi4vbWF0Y2hlci5qc1wiO1xuXG52YXIgZmluZCA9IEFycmF5LnByb3RvdHlwZS5maW5kO1xuXG5mdW5jdGlvbiBjaGlsZEZpbmQobWF0Y2gpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmaW5kLmNhbGwodGhpcy5jaGlsZHJlbiwgbWF0Y2gpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBjaGlsZEZpcnN0KCkge1xuICByZXR1cm4gdGhpcy5maXJzdEVsZW1lbnRDaGlsZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obWF0Y2gpIHtcbiAgcmV0dXJuIHRoaXMuc2VsZWN0KG1hdGNoID09IG51bGwgPyBjaGlsZEZpcnN0XG4gICAgICA6IGNoaWxkRmluZCh0eXBlb2YgbWF0Y2ggPT09IFwiZnVuY3Rpb25cIiA/IG1hdGNoIDogY2hpbGRNYXRjaGVyKG1hdGNoKSkpO1xufVxuIiwgImltcG9ydCB7Y2hpbGRNYXRjaGVyfSBmcm9tIFwiLi4vbWF0Y2hlci5qc1wiO1xuXG52YXIgZmlsdGVyID0gQXJyYXkucHJvdG90eXBlLmZpbHRlcjtcblxuZnVuY3Rpb24gY2hpbGRyZW4oKSB7XG4gIHJldHVybiBBcnJheS5mcm9tKHRoaXMuY2hpbGRyZW4pO1xufVxuXG5mdW5jdGlvbiBjaGlsZHJlbkZpbHRlcihtYXRjaCkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZpbHRlci5jYWxsKHRoaXMuY2hpbGRyZW4sIG1hdGNoKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obWF0Y2gpIHtcbiAgcmV0dXJuIHRoaXMuc2VsZWN0QWxsKG1hdGNoID09IG51bGwgPyBjaGlsZHJlblxuICAgICAgOiBjaGlsZHJlbkZpbHRlcih0eXBlb2YgbWF0Y2ggPT09IFwiZnVuY3Rpb25cIiA/IG1hdGNoIDogY2hpbGRNYXRjaGVyKG1hdGNoKSkpO1xufVxuIiwgImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuaW1wb3J0IG1hdGNoZXIgZnJvbSBcIi4uL21hdGNoZXIuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obWF0Y2gpIHtcbiAgaWYgKHR5cGVvZiBtYXRjaCAhPT0gXCJmdW5jdGlvblwiKSBtYXRjaCA9IG1hdGNoZXIobWF0Y2gpO1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHN1Ymdyb3VwcyA9IG5ldyBBcnJheShtKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc3ViZ3JvdXAgPSBzdWJncm91cHNbal0gPSBbXSwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmICgobm9kZSA9IGdyb3VwW2ldKSAmJiBtYXRjaC5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKSkge1xuICAgICAgICBzdWJncm91cC5wdXNoKG5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHN1Ymdyb3VwcywgdGhpcy5fcGFyZW50cyk7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odXBkYXRlKSB7XG4gIHJldHVybiBuZXcgQXJyYXkodXBkYXRlLmxlbmd0aCk7XG59XG4iLCAiaW1wb3J0IHNwYXJzZSBmcm9tIFwiLi9zcGFyc2UuanNcIjtcbmltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24odGhpcy5fZW50ZXIgfHwgdGhpcy5fZ3JvdXBzLm1hcChzcGFyc2UpLCB0aGlzLl9wYXJlbnRzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEVudGVyTm9kZShwYXJlbnQsIGRhdHVtKSB7XG4gIHRoaXMub3duZXJEb2N1bWVudCA9IHBhcmVudC5vd25lckRvY3VtZW50O1xuICB0aGlzLm5hbWVzcGFjZVVSSSA9IHBhcmVudC5uYW1lc3BhY2VVUkk7XG4gIHRoaXMuX25leHQgPSBudWxsO1xuICB0aGlzLl9wYXJlbnQgPSBwYXJlbnQ7XG4gIHRoaXMuX19kYXRhX18gPSBkYXR1bTtcbn1cblxuRW50ZXJOb2RlLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IEVudGVyTm9kZSxcbiAgYXBwZW5kQ2hpbGQ6IGZ1bmN0aW9uKGNoaWxkKSB7IHJldHVybiB0aGlzLl9wYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCB0aGlzLl9uZXh0KTsgfSxcbiAgaW5zZXJ0QmVmb3JlOiBmdW5jdGlvbihjaGlsZCwgbmV4dCkgeyByZXR1cm4gdGhpcy5fcGFyZW50Lmluc2VydEJlZm9yZShjaGlsZCwgbmV4dCk7IH0sXG4gIHF1ZXJ5U2VsZWN0b3I6IGZ1bmN0aW9uKHNlbGVjdG9yKSB7IHJldHVybiB0aGlzLl9wYXJlbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7IH0sXG4gIHF1ZXJ5U2VsZWN0b3JBbGw6IGZ1bmN0aW9uKHNlbGVjdG9yKSB7IHJldHVybiB0aGlzLl9wYXJlbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7IH1cbn07XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oeCkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHg7XG4gIH07XG59XG4iLCAiaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQge0VudGVyTm9kZX0gZnJvbSBcIi4vZW50ZXIuanNcIjtcbmltcG9ydCBjb25zdGFudCBmcm9tIFwiLi4vY29uc3RhbnQuanNcIjtcblxuZnVuY3Rpb24gYmluZEluZGV4KHBhcmVudCwgZ3JvdXAsIGVudGVyLCB1cGRhdGUsIGV4aXQsIGRhdGEpIHtcbiAgdmFyIGkgPSAwLFxuICAgICAgbm9kZSxcbiAgICAgIGdyb3VwTGVuZ3RoID0gZ3JvdXAubGVuZ3RoLFxuICAgICAgZGF0YUxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuXG4gIC8vIFB1dCBhbnkgbm9uLW51bGwgbm9kZXMgdGhhdCBmaXQgaW50byB1cGRhdGUuXG4gIC8vIFB1dCBhbnkgbnVsbCBub2RlcyBpbnRvIGVudGVyLlxuICAvLyBQdXQgYW55IHJlbWFpbmluZyBkYXRhIGludG8gZW50ZXIuXG4gIGZvciAoOyBpIDwgZGF0YUxlbmd0aDsgKytpKSB7XG4gICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgbm9kZS5fX2RhdGFfXyA9IGRhdGFbaV07XG4gICAgICB1cGRhdGVbaV0gPSBub2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbnRlcltpXSA9IG5ldyBFbnRlck5vZGUocGFyZW50LCBkYXRhW2ldKTtcbiAgICB9XG4gIH1cblxuICAvLyBQdXQgYW55IG5vbi1udWxsIG5vZGVzIHRoYXQgZG9uXHUyMDE5dCBmaXQgaW50byBleGl0LlxuICBmb3IgKDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHtcbiAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICBleGl0W2ldID0gbm9kZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYmluZEtleShwYXJlbnQsIGdyb3VwLCBlbnRlciwgdXBkYXRlLCBleGl0LCBkYXRhLCBrZXkpIHtcbiAgdmFyIGksXG4gICAgICBub2RlLFxuICAgICAgbm9kZUJ5S2V5VmFsdWUgPSBuZXcgTWFwLFxuICAgICAgZ3JvdXBMZW5ndGggPSBncm91cC5sZW5ndGgsXG4gICAgICBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGgsXG4gICAgICBrZXlWYWx1ZXMgPSBuZXcgQXJyYXkoZ3JvdXBMZW5ndGgpLFxuICAgICAga2V5VmFsdWU7XG5cbiAgLy8gQ29tcHV0ZSB0aGUga2V5IGZvciBlYWNoIG5vZGUuXG4gIC8vIElmIG11bHRpcGxlIG5vZGVzIGhhdmUgdGhlIHNhbWUga2V5LCB0aGUgZHVwbGljYXRlcyBhcmUgYWRkZWQgdG8gZXhpdC5cbiAgZm9yIChpID0gMDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHtcbiAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICBrZXlWYWx1ZXNbaV0gPSBrZXlWYWx1ZSA9IGtleS5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKSArIFwiXCI7XG4gICAgICBpZiAobm9kZUJ5S2V5VmFsdWUuaGFzKGtleVZhbHVlKSkge1xuICAgICAgICBleGl0W2ldID0gbm9kZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGVCeUtleVZhbHVlLnNldChrZXlWYWx1ZSwgbm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQ29tcHV0ZSB0aGUga2V5IGZvciBlYWNoIGRhdHVtLlxuICAvLyBJZiB0aGVyZSBhIG5vZGUgYXNzb2NpYXRlZCB3aXRoIHRoaXMga2V5LCBqb2luIGFuZCBhZGQgaXQgdG8gdXBkYXRlLlxuICAvLyBJZiB0aGVyZSBpcyBub3QgKG9yIHRoZSBrZXkgaXMgYSBkdXBsaWNhdGUpLCBhZGQgaXQgdG8gZW50ZXIuXG4gIGZvciAoaSA9IDA7IGkgPCBkYXRhTGVuZ3RoOyArK2kpIHtcbiAgICBrZXlWYWx1ZSA9IGtleS5jYWxsKHBhcmVudCwgZGF0YVtpXSwgaSwgZGF0YSkgKyBcIlwiO1xuICAgIGlmIChub2RlID0gbm9kZUJ5S2V5VmFsdWUuZ2V0KGtleVZhbHVlKSkge1xuICAgICAgdXBkYXRlW2ldID0gbm9kZTtcbiAgICAgIG5vZGUuX19kYXRhX18gPSBkYXRhW2ldO1xuICAgICAgbm9kZUJ5S2V5VmFsdWUuZGVsZXRlKGtleVZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW50ZXJbaV0gPSBuZXcgRW50ZXJOb2RlKHBhcmVudCwgZGF0YVtpXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQWRkIGFueSByZW1haW5pbmcgbm9kZXMgdGhhdCB3ZXJlIG5vdCBib3VuZCB0byBkYXRhIHRvIGV4aXQuXG4gIGZvciAoaSA9IDA7IGkgPCBncm91cExlbmd0aDsgKytpKSB7XG4gICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIChub2RlQnlLZXlWYWx1ZS5nZXQoa2V5VmFsdWVzW2ldKSA9PT0gbm9kZSkpIHtcbiAgICAgIGV4aXRbaV0gPSBub2RlO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkYXR1bShub2RlKSB7XG4gIHJldHVybiBub2RlLl9fZGF0YV9fO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIEFycmF5LmZyb20odGhpcywgZGF0dW0pO1xuXG4gIHZhciBiaW5kID0ga2V5ID8gYmluZEtleSA6IGJpbmRJbmRleCxcbiAgICAgIHBhcmVudHMgPSB0aGlzLl9wYXJlbnRzLFxuICAgICAgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzO1xuXG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdmFsdWUgPSBjb25zdGFudCh2YWx1ZSk7XG5cbiAgZm9yICh2YXIgbSA9IGdyb3Vwcy5sZW5ndGgsIHVwZGF0ZSA9IG5ldyBBcnJheShtKSwgZW50ZXIgPSBuZXcgQXJyYXkobSksIGV4aXQgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgdmFyIHBhcmVudCA9IHBhcmVudHNbal0sXG4gICAgICAgIGdyb3VwID0gZ3JvdXBzW2pdLFxuICAgICAgICBncm91cExlbmd0aCA9IGdyb3VwLmxlbmd0aCxcbiAgICAgICAgZGF0YSA9IGFycmF5bGlrZSh2YWx1ZS5jYWxsKHBhcmVudCwgcGFyZW50ICYmIHBhcmVudC5fX2RhdGFfXywgaiwgcGFyZW50cykpLFxuICAgICAgICBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGgsXG4gICAgICAgIGVudGVyR3JvdXAgPSBlbnRlcltqXSA9IG5ldyBBcnJheShkYXRhTGVuZ3RoKSxcbiAgICAgICAgdXBkYXRlR3JvdXAgPSB1cGRhdGVbal0gPSBuZXcgQXJyYXkoZGF0YUxlbmd0aCksXG4gICAgICAgIGV4aXRHcm91cCA9IGV4aXRbal0gPSBuZXcgQXJyYXkoZ3JvdXBMZW5ndGgpO1xuXG4gICAgYmluZChwYXJlbnQsIGdyb3VwLCBlbnRlckdyb3VwLCB1cGRhdGVHcm91cCwgZXhpdEdyb3VwLCBkYXRhLCBrZXkpO1xuXG4gICAgLy8gTm93IGNvbm5lY3QgdGhlIGVudGVyIG5vZGVzIHRvIHRoZWlyIGZvbGxvd2luZyB1cGRhdGUgbm9kZSwgc3VjaCB0aGF0XG4gICAgLy8gYXBwZW5kQ2hpbGQgY2FuIGluc2VydCB0aGUgbWF0ZXJpYWxpemVkIGVudGVyIG5vZGUgYmVmb3JlIHRoaXMgbm9kZSxcbiAgICAvLyByYXRoZXIgdGhhbiBhdCB0aGUgZW5kIG9mIHRoZSBwYXJlbnQgbm9kZS5cbiAgICBmb3IgKHZhciBpMCA9IDAsIGkxID0gMCwgcHJldmlvdXMsIG5leHQ7IGkwIDwgZGF0YUxlbmd0aDsgKytpMCkge1xuICAgICAgaWYgKHByZXZpb3VzID0gZW50ZXJHcm91cFtpMF0pIHtcbiAgICAgICAgaWYgKGkwID49IGkxKSBpMSA9IGkwICsgMTtcbiAgICAgICAgd2hpbGUgKCEobmV4dCA9IHVwZGF0ZUdyb3VwW2kxXSkgJiYgKytpMSA8IGRhdGFMZW5ndGgpO1xuICAgICAgICBwcmV2aW91cy5fbmV4dCA9IG5leHQgfHwgbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB1cGRhdGUgPSBuZXcgU2VsZWN0aW9uKHVwZGF0ZSwgcGFyZW50cyk7XG4gIHVwZGF0ZS5fZW50ZXIgPSBlbnRlcjtcbiAgdXBkYXRlLl9leGl0ID0gZXhpdDtcbiAgcmV0dXJuIHVwZGF0ZTtcbn1cblxuLy8gR2l2ZW4gc29tZSBkYXRhLCB0aGlzIHJldHVybnMgYW4gYXJyYXktbGlrZSB2aWV3IG9mIGl0OiBhbiBvYmplY3QgdGhhdFxuLy8gZXhwb3NlcyBhIGxlbmd0aCBwcm9wZXJ0eSBhbmQgYWxsb3dzIG51bWVyaWMgaW5kZXhpbmcuIE5vdGUgdGhhdCB1bmxpa2Vcbi8vIHNlbGVjdEFsbCwgdGhpcyBpc25cdTIwMTl0IHdvcnJpZWQgYWJvdXQgXHUyMDFDbGl2ZVx1MjAxRCBjb2xsZWN0aW9ucyBiZWNhdXNlIHRoZSByZXN1bHRpbmdcbi8vIGFycmF5IHdpbGwgb25seSBiZSB1c2VkIGJyaWVmbHkgd2hpbGUgZGF0YSBpcyBiZWluZyBib3VuZC4gKEl0IGlzIHBvc3NpYmxlIHRvXG4vLyBjYXVzZSB0aGUgZGF0YSB0byBjaGFuZ2Ugd2hpbGUgaXRlcmF0aW5nIGJ5IHVzaW5nIGEga2V5IGZ1bmN0aW9uLCBidXQgcGxlYXNlXG4vLyBkb25cdTIwMTl0OyB3ZVx1MjAxOWQgcmF0aGVyIGF2b2lkIGEgZ3JhdHVpdG91cyBjb3B5LilcbmZ1bmN0aW9uIGFycmF5bGlrZShkYXRhKSB7XG4gIHJldHVybiB0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIiAmJiBcImxlbmd0aFwiIGluIGRhdGFcbiAgICA/IGRhdGEgLy8gQXJyYXksIFR5cGVkQXJyYXksIE5vZGVMaXN0LCBhcnJheS1saWtlXG4gICAgOiBBcnJheS5mcm9tKGRhdGEpOyAvLyBNYXAsIFNldCwgaXRlcmFibGUsIHN0cmluZywgb3IgYW55dGhpbmcgZWxzZVxufVxuIiwgImltcG9ydCBzcGFyc2UgZnJvbSBcIi4vc3BhcnNlLmpzXCI7XG5pbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHRoaXMuX2V4aXQgfHwgdGhpcy5fZ3JvdXBzLm1hcChzcGFyc2UpLCB0aGlzLl9wYXJlbnRzKTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihvbmVudGVyLCBvbnVwZGF0ZSwgb25leGl0KSB7XG4gIHZhciBlbnRlciA9IHRoaXMuZW50ZXIoKSwgdXBkYXRlID0gdGhpcywgZXhpdCA9IHRoaXMuZXhpdCgpO1xuICBpZiAodHlwZW9mIG9uZW50ZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGVudGVyID0gb25lbnRlcihlbnRlcik7XG4gICAgaWYgKGVudGVyKSBlbnRlciA9IGVudGVyLnNlbGVjdGlvbigpO1xuICB9IGVsc2Uge1xuICAgIGVudGVyID0gZW50ZXIuYXBwZW5kKG9uZW50ZXIgKyBcIlwiKTtcbiAgfVxuICBpZiAob251cGRhdGUgIT0gbnVsbCkge1xuICAgIHVwZGF0ZSA9IG9udXBkYXRlKHVwZGF0ZSk7XG4gICAgaWYgKHVwZGF0ZSkgdXBkYXRlID0gdXBkYXRlLnNlbGVjdGlvbigpO1xuICB9XG4gIGlmIChvbmV4aXQgPT0gbnVsbCkgZXhpdC5yZW1vdmUoKTsgZWxzZSBvbmV4aXQoZXhpdCk7XG4gIHJldHVybiBlbnRlciAmJiB1cGRhdGUgPyBlbnRlci5tZXJnZSh1cGRhdGUpLm9yZGVyKCkgOiB1cGRhdGU7XG59XG4iLCAiaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNvbnRleHQpIHtcbiAgdmFyIHNlbGVjdGlvbiA9IGNvbnRleHQuc2VsZWN0aW9uID8gY29udGV4dC5zZWxlY3Rpb24oKSA6IGNvbnRleHQ7XG5cbiAgZm9yICh2YXIgZ3JvdXBzMCA9IHRoaXMuX2dyb3VwcywgZ3JvdXBzMSA9IHNlbGVjdGlvbi5fZ3JvdXBzLCBtMCA9IGdyb3VwczAubGVuZ3RoLCBtMSA9IGdyb3VwczEubGVuZ3RoLCBtID0gTWF0aC5taW4obTAsIG0xKSwgbWVyZ2VzID0gbmV3IEFycmF5KG0wKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cDAgPSBncm91cHMwW2pdLCBncm91cDEgPSBncm91cHMxW2pdLCBuID0gZ3JvdXAwLmxlbmd0aCwgbWVyZ2UgPSBtZXJnZXNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwMFtpXSB8fCBncm91cDFbaV0pIHtcbiAgICAgICAgbWVyZ2VbaV0gPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBqIDwgbTA7ICsraikge1xuICAgIG1lcmdlc1tqXSA9IGdyb3VwczBbal07XG4gIH1cblxuICByZXR1cm4gbmV3IFNlbGVjdGlvbihtZXJnZXMsIHRoaXMuX3BhcmVudHMpO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgaiA9IC0xLCBtID0gZ3JvdXBzLmxlbmd0aDsgKytqIDwgbTspIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgaSA9IGdyb3VwLmxlbmd0aCAtIDEsIG5leHQgPSBncm91cFtpXSwgbm9kZTsgLS1pID49IDA7KSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIGlmIChuZXh0ICYmIG5vZGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24obmV4dCkgXiA0KSBuZXh0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIG5leHQpO1xuICAgICAgICBuZXh0ID0gbm9kZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn1cbiIsICJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oY29tcGFyZSkge1xuICBpZiAoIWNvbXBhcmUpIGNvbXBhcmUgPSBhc2NlbmRpbmc7XG5cbiAgZnVuY3Rpb24gY29tcGFyZU5vZGUoYSwgYikge1xuICAgIHJldHVybiBhICYmIGIgPyBjb21wYXJlKGEuX19kYXRhX18sIGIuX19kYXRhX18pIDogIWEgLSAhYjtcbiAgfVxuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHNvcnRncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHNvcnRncm91cCA9IHNvcnRncm91cHNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHNvcnRncm91cFtpXSA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICAgIHNvcnRncm91cC5zb3J0KGNvbXBhcmVOb2RlKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHNvcnRncm91cHMsIHRoaXMuX3BhcmVudHMpLm9yZGVyKCk7XG59XG5cbmZ1bmN0aW9uIGFzY2VuZGluZyhhLCBiKSB7XG4gIHJldHVybiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogYSA+PSBiID8gMCA6IE5hTjtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzWzBdO1xuICBhcmd1bWVudHNbMF0gPSB0aGlzO1xuICBjYWxsYmFjay5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICByZXR1cm4gdGhpcztcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIEFycmF5LmZyb20odGhpcyk7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gMCwgbSA9IGdyb3Vwcy5sZW5ndGg7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgaSA9IDAsIG4gPSBncm91cC5sZW5ndGg7IGkgPCBuOyArK2kpIHtcbiAgICAgIHZhciBub2RlID0gZ3JvdXBbaV07XG4gICAgICBpZiAobm9kZSkgcmV0dXJuIG5vZGU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIGxldCBzaXplID0gMDtcbiAgZm9yIChjb25zdCBub2RlIG9mIHRoaXMpICsrc2l6ZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICByZXR1cm4gc2l6ZTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuICF0aGlzLm5vZGUoKTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihjYWxsYmFjaykge1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgaiA9IDAsIG0gPSBncm91cHMubGVuZ3RoOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSBjYWxsYmFjay5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn1cbiIsICJpbXBvcnQgbmFtZXNwYWNlIGZyb20gXCIuLi9uYW1lc3BhY2UuanNcIjtcblxuZnVuY3Rpb24gYXR0clJlbW92ZShuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0clJlbW92ZU5TKGZ1bGxuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJDb25zdGFudChuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyQ29uc3RhbnROUyhmdWxsbmFtZSwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0QXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsLCB2YWx1ZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJGdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICh2ID09IG51bGwpIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgIGVsc2UgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgdik7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJGdW5jdGlvbk5TKGZ1bGxuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICh2ID09IG51bGwpIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgICBlbHNlIHRoaXMuc2V0QXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsLCB2KTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgdmFyIGZ1bGxuYW1lID0gbmFtZXNwYWNlKG5hbWUpO1xuXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xuICAgIHZhciBub2RlID0gdGhpcy5ub2RlKCk7XG4gICAgcmV0dXJuIGZ1bGxuYW1lLmxvY2FsXG4gICAgICAgID8gbm9kZS5nZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpXG4gICAgICAgIDogbm9kZS5nZXRBdHRyaWJ1dGUoZnVsbG5hbWUpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuZWFjaCgodmFsdWUgPT0gbnVsbFxuICAgICAgPyAoZnVsbG5hbWUubG9jYWwgPyBhdHRyUmVtb3ZlTlMgOiBhdHRyUmVtb3ZlKSA6ICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyAoZnVsbG5hbWUubG9jYWwgPyBhdHRyRnVuY3Rpb25OUyA6IGF0dHJGdW5jdGlvbilcbiAgICAgIDogKGZ1bGxuYW1lLmxvY2FsID8gYXR0ckNvbnN0YW50TlMgOiBhdHRyQ29uc3RhbnQpKSkoZnVsbG5hbWUsIHZhbHVlKSk7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obm9kZSkge1xuICByZXR1cm4gKG5vZGUub3duZXJEb2N1bWVudCAmJiBub2RlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpIC8vIG5vZGUgaXMgYSBOb2RlXG4gICAgICB8fCAobm9kZS5kb2N1bWVudCAmJiBub2RlKSAvLyBub2RlIGlzIGEgV2luZG93XG4gICAgICB8fCBub2RlLmRlZmF1bHRWaWV3OyAvLyBub2RlIGlzIGEgRG9jdW1lbnRcbn1cbiIsICJpbXBvcnQgZGVmYXVsdFZpZXcgZnJvbSBcIi4uL3dpbmRvdy5qc1wiO1xuXG5mdW5jdGlvbiBzdHlsZVJlbW92ZShuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzdHlsZUNvbnN0YW50KG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzdHlsZUZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICh2ID09IG51bGwpIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSk7XG4gICAgZWxzZSB0aGlzLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHYsIHByaW9yaXR5KTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMVxuICAgICAgPyB0aGlzLmVhY2goKHZhbHVlID09IG51bGxcbiAgICAgICAgICAgID8gc3R5bGVSZW1vdmUgOiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgICAgPyBzdHlsZUZ1bmN0aW9uXG4gICAgICAgICAgICA6IHN0eWxlQ29uc3RhbnQpKG5hbWUsIHZhbHVlLCBwcmlvcml0eSA9PSBudWxsID8gXCJcIiA6IHByaW9yaXR5KSlcbiAgICAgIDogc3R5bGVWYWx1ZSh0aGlzLm5vZGUoKSwgbmFtZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHlsZVZhbHVlKG5vZGUsIG5hbWUpIHtcbiAgcmV0dXJuIG5vZGUuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKVxuICAgICAgfHwgZGVmYXVsdFZpZXcobm9kZSkuZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpO1xufVxuIiwgImZ1bmN0aW9uIHByb3BlcnR5UmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGRlbGV0ZSB0aGlzW25hbWVdO1xuICB9O1xufVxuXG5mdW5jdGlvbiBwcm9wZXJ0eUNvbnN0YW50KG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzW25hbWVdID0gdmFsdWU7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHByb3BlcnR5RnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAodiA9PSBudWxsKSBkZWxldGUgdGhpc1tuYW1lXTtcbiAgICBlbHNlIHRoaXNbbmFtZV0gPSB2O1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDFcbiAgICAgID8gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsXG4gICAgICAgICAgPyBwcm9wZXJ0eVJlbW92ZSA6IHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgPyBwcm9wZXJ0eUZ1bmN0aW9uXG4gICAgICAgICAgOiBwcm9wZXJ0eUNvbnN0YW50KShuYW1lLCB2YWx1ZSkpXG4gICAgICA6IHRoaXMubm9kZSgpW25hbWVdO1xufVxuIiwgImZ1bmN0aW9uIGNsYXNzQXJyYXkoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmcudHJpbSgpLnNwbGl0KC9efFxccysvKTtcbn1cblxuZnVuY3Rpb24gY2xhc3NMaXN0KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUuY2xhc3NMaXN0IHx8IG5ldyBDbGFzc0xpc3Qobm9kZSk7XG59XG5cbmZ1bmN0aW9uIENsYXNzTGlzdChub2RlKSB7XG4gIHRoaXMuX25vZGUgPSBub2RlO1xuICB0aGlzLl9uYW1lcyA9IGNsYXNzQXJyYXkobm9kZS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSB8fCBcIlwiKTtcbn1cblxuQ2xhc3NMaXN0LnByb3RvdHlwZSA9IHtcbiAgYWRkOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIGkgPSB0aGlzLl9uYW1lcy5pbmRleE9mKG5hbWUpO1xuICAgIGlmIChpIDwgMCkge1xuICAgICAgdGhpcy5fbmFtZXMucHVzaChuYW1lKTtcbiAgICAgIHRoaXMuX25vZGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgdGhpcy5fbmFtZXMuam9pbihcIiBcIikpO1xuICAgIH1cbiAgfSxcbiAgcmVtb3ZlOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIGkgPSB0aGlzLl9uYW1lcy5pbmRleE9mKG5hbWUpO1xuICAgIGlmIChpID49IDApIHtcbiAgICAgIHRoaXMuX25hbWVzLnNwbGljZShpLCAxKTtcbiAgICAgIHRoaXMuX25vZGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgdGhpcy5fbmFtZXMuam9pbihcIiBcIikpO1xuICAgIH1cbiAgfSxcbiAgY29udGFpbnM6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5fbmFtZXMuaW5kZXhPZihuYW1lKSA+PSAwO1xuICB9XG59O1xuXG5mdW5jdGlvbiBjbGFzc2VkQWRkKG5vZGUsIG5hbWVzKSB7XG4gIHZhciBsaXN0ID0gY2xhc3NMaXN0KG5vZGUpLCBpID0gLTEsIG4gPSBuYW1lcy5sZW5ndGg7XG4gIHdoaWxlICgrK2kgPCBuKSBsaXN0LmFkZChuYW1lc1tpXSk7XG59XG5cbmZ1bmN0aW9uIGNsYXNzZWRSZW1vdmUobm9kZSwgbmFtZXMpIHtcbiAgdmFyIGxpc3QgPSBjbGFzc0xpc3Qobm9kZSksIGkgPSAtMSwgbiA9IG5hbWVzLmxlbmd0aDtcbiAgd2hpbGUgKCsraSA8IG4pIGxpc3QucmVtb3ZlKG5hbWVzW2ldKTtcbn1cblxuZnVuY3Rpb24gY2xhc3NlZFRydWUobmFtZXMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGNsYXNzZWRBZGQodGhpcywgbmFtZXMpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBjbGFzc2VkRmFsc2UobmFtZXMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGNsYXNzZWRSZW1vdmUodGhpcywgbmFtZXMpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBjbGFzc2VkRnVuY3Rpb24obmFtZXMsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAodmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKSA/IGNsYXNzZWRBZGQgOiBjbGFzc2VkUmVtb3ZlKSh0aGlzLCBuYW1lcyk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHZhciBuYW1lcyA9IGNsYXNzQXJyYXkobmFtZSArIFwiXCIpO1xuXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xuICAgIHZhciBsaXN0ID0gY2xhc3NMaXN0KHRoaXMubm9kZSgpKSwgaSA9IC0xLCBuID0gbmFtZXMubGVuZ3RoO1xuICAgIHdoaWxlICgrK2kgPCBuKSBpZiAoIWxpc3QuY29udGFpbnMobmFtZXNbaV0pKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gdGhpcy5lYWNoKCh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyBjbGFzc2VkRnVuY3Rpb24gOiB2YWx1ZVxuICAgICAgPyBjbGFzc2VkVHJ1ZVxuICAgICAgOiBjbGFzc2VkRmFsc2UpKG5hbWVzLCB2YWx1ZSkpO1xufVxuIiwgImZ1bmN0aW9uIHRleHRSZW1vdmUoKSB7XG4gIHRoaXMudGV4dENvbnRlbnQgPSBcIlwiO1xufVxuXG5mdW5jdGlvbiB0ZXh0Q29uc3RhbnQodmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdGV4dEZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy50ZXh0Q29udGVudCA9IHYgPT0gbnVsbCA/IFwiXCIgOiB2O1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLmVhY2godmFsdWUgPT0gbnVsbFxuICAgICAgICAgID8gdGV4dFJlbW92ZSA6ICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgID8gdGV4dEZ1bmN0aW9uXG4gICAgICAgICAgOiB0ZXh0Q29uc3RhbnQpKHZhbHVlKSlcbiAgICAgIDogdGhpcy5ub2RlKCkudGV4dENvbnRlbnQ7XG59XG4iLCAiZnVuY3Rpb24gaHRtbFJlbW92ZSgpIHtcbiAgdGhpcy5pbm5lckhUTUwgPSBcIlwiO1xufVxuXG5mdW5jdGlvbiBodG1sQ29uc3RhbnQodmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaW5uZXJIVE1MID0gdmFsdWU7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGh0bWxGdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHRoaXMuaW5uZXJIVE1MID0gdiA9PSBudWxsID8gXCJcIiA6IHY7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMuZWFjaCh2YWx1ZSA9PSBudWxsXG4gICAgICAgICAgPyBodG1sUmVtb3ZlIDogKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgPyBodG1sRnVuY3Rpb25cbiAgICAgICAgICA6IGh0bWxDb25zdGFudCkodmFsdWUpKVxuICAgICAgOiB0aGlzLm5vZGUoKS5pbm5lckhUTUw7XG59XG4iLCAiZnVuY3Rpb24gcmFpc2UoKSB7XG4gIGlmICh0aGlzLm5leHRTaWJsaW5nKSB0aGlzLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5lYWNoKHJhaXNlKTtcbn1cbiIsICJmdW5jdGlvbiBsb3dlcigpIHtcbiAgaWYgKHRoaXMucHJldmlvdXNTaWJsaW5nKSB0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMsIHRoaXMucGFyZW50Tm9kZS5maXJzdENoaWxkKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmVhY2gobG93ZXIpO1xufVxuIiwgImltcG9ydCBjcmVhdG9yIGZyb20gXCIuLi9jcmVhdG9yLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUpIHtcbiAgdmFyIGNyZWF0ZSA9IHR5cGVvZiBuYW1lID09PSBcImZ1bmN0aW9uXCIgPyBuYW1lIDogY3JlYXRvcihuYW1lKTtcbiAgcmV0dXJuIHRoaXMuc2VsZWN0KGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmFwcGVuZENoaWxkKGNyZWF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfSk7XG59XG4iLCAiaW1wb3J0IGNyZWF0b3IgZnJvbSBcIi4uL2NyZWF0b3IuanNcIjtcbmltcG9ydCBzZWxlY3RvciBmcm9tIFwiLi4vc2VsZWN0b3IuanNcIjtcblxuZnVuY3Rpb24gY29uc3RhbnROdWxsKCkge1xuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgYmVmb3JlKSB7XG4gIHZhciBjcmVhdGUgPSB0eXBlb2YgbmFtZSA9PT0gXCJmdW5jdGlvblwiID8gbmFtZSA6IGNyZWF0b3IobmFtZSksXG4gICAgICBzZWxlY3QgPSBiZWZvcmUgPT0gbnVsbCA/IGNvbnN0YW50TnVsbCA6IHR5cGVvZiBiZWZvcmUgPT09IFwiZnVuY3Rpb25cIiA/IGJlZm9yZSA6IHNlbGVjdG9yKGJlZm9yZSk7XG4gIHJldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pbnNlcnRCZWZvcmUoY3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHNlbGVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IG51bGwpO1xuICB9KTtcbn1cbiIsICJmdW5jdGlvbiByZW1vdmUoKSB7XG4gIHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudE5vZGU7XG4gIGlmIChwYXJlbnQpIHBhcmVudC5yZW1vdmVDaGlsZCh0aGlzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmVhY2gocmVtb3ZlKTtcbn1cbiIsICJmdW5jdGlvbiBzZWxlY3Rpb25fY2xvbmVTaGFsbG93KCkge1xuICB2YXIgY2xvbmUgPSB0aGlzLmNsb25lTm9kZShmYWxzZSksIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgcmV0dXJuIHBhcmVudCA/IHBhcmVudC5pbnNlcnRCZWZvcmUoY2xvbmUsIHRoaXMubmV4dFNpYmxpbmcpIDogY2xvbmU7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdGlvbl9jbG9uZURlZXAoKSB7XG4gIHZhciBjbG9uZSA9IHRoaXMuY2xvbmVOb2RlKHRydWUpLCBwYXJlbnQgPSB0aGlzLnBhcmVudE5vZGU7XG4gIHJldHVybiBwYXJlbnQgPyBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNsb25lLCB0aGlzLm5leHRTaWJsaW5nKSA6IGNsb25lO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihkZWVwKSB7XG4gIHJldHVybiB0aGlzLnNlbGVjdChkZWVwID8gc2VsZWN0aW9uX2Nsb25lRGVlcCA6IHNlbGVjdGlvbl9jbG9uZVNoYWxsb3cpO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMucHJvcGVydHkoXCJfX2RhdGFfX1wiLCB2YWx1ZSlcbiAgICAgIDogdGhpcy5ub2RlKCkuX19kYXRhX187XG59XG4iLCAiZnVuY3Rpb24gY29udGV4dExpc3RlbmVyKGxpc3RlbmVyKSB7XG4gIHJldHVybiBmdW5jdGlvbihldmVudCkge1xuICAgIGxpc3RlbmVyLmNhbGwodGhpcywgZXZlbnQsIHRoaXMuX19kYXRhX18pO1xuICB9O1xufVxuXG5mdW5jdGlvbiBwYXJzZVR5cGVuYW1lcyh0eXBlbmFtZXMpIHtcbiAgcmV0dXJuIHR5cGVuYW1lcy50cmltKCkuc3BsaXQoL158XFxzKy8pLm1hcChmdW5jdGlvbih0KSB7XG4gICAgdmFyIG5hbWUgPSBcIlwiLCBpID0gdC5pbmRleE9mKFwiLlwiKTtcbiAgICBpZiAoaSA+PSAwKSBuYW1lID0gdC5zbGljZShpICsgMSksIHQgPSB0LnNsaWNlKDAsIGkpO1xuICAgIHJldHVybiB7dHlwZTogdCwgbmFtZTogbmFtZX07XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBvblJlbW92ZSh0eXBlbmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG9uID0gdGhpcy5fX29uO1xuICAgIGlmICghb24pIHJldHVybjtcbiAgICBmb3IgKHZhciBqID0gMCwgaSA9IC0xLCBtID0gb24ubGVuZ3RoLCBvOyBqIDwgbTsgKytqKSB7XG4gICAgICBpZiAobyA9IG9uW2pdLCAoIXR5cGVuYW1lLnR5cGUgfHwgby50eXBlID09PSB0eXBlbmFtZS50eXBlKSAmJiBvLm5hbWUgPT09IHR5cGVuYW1lLm5hbWUpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKG8udHlwZSwgby5saXN0ZW5lciwgby5vcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9uWysraV0gPSBvO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoKytpKSBvbi5sZW5ndGggPSBpO1xuICAgIGVsc2UgZGVsZXRlIHRoaXMuX19vbjtcbiAgfTtcbn1cblxuZnVuY3Rpb24gb25BZGQodHlwZW5hbWUsIHZhbHVlLCBvcHRpb25zKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgb24gPSB0aGlzLl9fb24sIG8sIGxpc3RlbmVyID0gY29udGV4dExpc3RlbmVyKHZhbHVlKTtcbiAgICBpZiAob24pIGZvciAodmFyIGogPSAwLCBtID0gb24ubGVuZ3RoOyBqIDwgbTsgKytqKSB7XG4gICAgICBpZiAoKG8gPSBvbltqXSkudHlwZSA9PT0gdHlwZW5hbWUudHlwZSAmJiBvLm5hbWUgPT09IHR5cGVuYW1lLm5hbWUpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKG8udHlwZSwgby5saXN0ZW5lciwgby5vcHRpb25zKTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKG8udHlwZSwgby5saXN0ZW5lciA9IGxpc3RlbmVyLCBvLm9wdGlvbnMgPSBvcHRpb25zKTtcbiAgICAgICAgby52YWx1ZSA9IHZhbHVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0eXBlbmFtZS50eXBlLCBsaXN0ZW5lciwgb3B0aW9ucyk7XG4gICAgbyA9IHt0eXBlOiB0eXBlbmFtZS50eXBlLCBuYW1lOiB0eXBlbmFtZS5uYW1lLCB2YWx1ZTogdmFsdWUsIGxpc3RlbmVyOiBsaXN0ZW5lciwgb3B0aW9uczogb3B0aW9uc307XG4gICAgaWYgKCFvbikgdGhpcy5fX29uID0gW29dO1xuICAgIGVsc2Ugb24ucHVzaChvKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odHlwZW5hbWUsIHZhbHVlLCBvcHRpb25zKSB7XG4gIHZhciB0eXBlbmFtZXMgPSBwYXJzZVR5cGVuYW1lcyh0eXBlbmFtZSArIFwiXCIpLCBpLCBuID0gdHlwZW5hbWVzLmxlbmd0aCwgdDtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICB2YXIgb24gPSB0aGlzLm5vZGUoKS5fX29uO1xuICAgIGlmIChvbikgZm9yICh2YXIgaiA9IDAsIG0gPSBvbi5sZW5ndGgsIG87IGogPCBtOyArK2opIHtcbiAgICAgIGZvciAoaSA9IDAsIG8gPSBvbltqXTsgaSA8IG47ICsraSkge1xuICAgICAgICBpZiAoKHQgPSB0eXBlbmFtZXNbaV0pLnR5cGUgPT09IG8udHlwZSAmJiB0Lm5hbWUgPT09IG8ubmFtZSkge1xuICAgICAgICAgIHJldHVybiBvLnZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIG9uID0gdmFsdWUgPyBvbkFkZCA6IG9uUmVtb3ZlO1xuICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB0aGlzLmVhY2gob24odHlwZW5hbWVzW2ldLCB2YWx1ZSwgb3B0aW9ucykpO1xuICByZXR1cm4gdGhpcztcbn1cbiIsICJpbXBvcnQgZGVmYXVsdFZpZXcgZnJvbSBcIi4uL3dpbmRvdy5qc1wiO1xuXG5mdW5jdGlvbiBkaXNwYXRjaEV2ZW50KG5vZGUsIHR5cGUsIHBhcmFtcykge1xuICB2YXIgd2luZG93ID0gZGVmYXVsdFZpZXcobm9kZSksXG4gICAgICBldmVudCA9IHdpbmRvdy5DdXN0b21FdmVudDtcblxuICBpZiAodHlwZW9mIGV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBldmVudCA9IG5ldyBldmVudCh0eXBlLCBwYXJhbXMpO1xuICB9IGVsc2Uge1xuICAgIGV2ZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7XG4gICAgaWYgKHBhcmFtcykgZXZlbnQuaW5pdEV2ZW50KHR5cGUsIHBhcmFtcy5idWJibGVzLCBwYXJhbXMuY2FuY2VsYWJsZSksIGV2ZW50LmRldGFpbCA9IHBhcmFtcy5kZXRhaWw7XG4gICAgZWxzZSBldmVudC5pbml0RXZlbnQodHlwZSwgZmFsc2UsIGZhbHNlKTtcbiAgfVxuXG4gIG5vZGUuZGlzcGF0Y2hFdmVudChldmVudCk7XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoQ29uc3RhbnQodHlwZSwgcGFyYW1zKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2hFdmVudCh0aGlzLCB0eXBlLCBwYXJhbXMpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBkaXNwYXRjaEZ1bmN0aW9uKHR5cGUsIHBhcmFtcykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoRXZlbnQodGhpcywgdHlwZSwgcGFyYW1zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih0eXBlLCBwYXJhbXMpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaCgodHlwZW9mIHBhcmFtcyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IGRpc3BhdGNoRnVuY3Rpb25cbiAgICAgIDogZGlzcGF0Y2hDb25zdGFudCkodHlwZSwgcGFyYW1zKSk7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24qKCkge1xuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIGogPSAwLCBtID0gZ3JvdXBzLmxlbmd0aDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gMCwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZTsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgeWllbGQgbm9kZTtcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgc2VsZWN0aW9uX3NlbGVjdCBmcm9tIFwiLi9zZWxlY3QuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fc2VsZWN0QWxsIGZyb20gXCIuL3NlbGVjdEFsbC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9zZWxlY3RDaGlsZCBmcm9tIFwiLi9zZWxlY3RDaGlsZC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9zZWxlY3RDaGlsZHJlbiBmcm9tIFwiLi9zZWxlY3RDaGlsZHJlbi5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9maWx0ZXIgZnJvbSBcIi4vZmlsdGVyLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2RhdGEgZnJvbSBcIi4vZGF0YS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9lbnRlciBmcm9tIFwiLi9lbnRlci5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9leGl0IGZyb20gXCIuL2V4aXQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fam9pbiBmcm9tIFwiLi9qb2luLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX21lcmdlIGZyb20gXCIuL21lcmdlLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX29yZGVyIGZyb20gXCIuL29yZGVyLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3NvcnQgZnJvbSBcIi4vc29ydC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9jYWxsIGZyb20gXCIuL2NhbGwuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fbm9kZXMgZnJvbSBcIi4vbm9kZXMuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fbm9kZSBmcm9tIFwiLi9ub2RlLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3NpemUgZnJvbSBcIi4vc2l6ZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9lbXB0eSBmcm9tIFwiLi9lbXB0eS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9lYWNoIGZyb20gXCIuL2VhY2guanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fYXR0ciBmcm9tIFwiLi9hdHRyLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3N0eWxlIGZyb20gXCIuL3N0eWxlLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3Byb3BlcnR5IGZyb20gXCIuL3Byb3BlcnR5LmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2NsYXNzZWQgZnJvbSBcIi4vY2xhc3NlZC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl90ZXh0IGZyb20gXCIuL3RleHQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25faHRtbCBmcm9tIFwiLi9odG1sLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3JhaXNlIGZyb20gXCIuL3JhaXNlLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2xvd2VyIGZyb20gXCIuL2xvd2VyLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2FwcGVuZCBmcm9tIFwiLi9hcHBlbmQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25faW5zZXJ0IGZyb20gXCIuL2luc2VydC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9yZW1vdmUgZnJvbSBcIi4vcmVtb3ZlLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2Nsb25lIGZyb20gXCIuL2Nsb25lLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2RhdHVtIGZyb20gXCIuL2RhdHVtLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX29uIGZyb20gXCIuL29uLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2Rpc3BhdGNoIGZyb20gXCIuL2Rpc3BhdGNoLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2l0ZXJhdG9yIGZyb20gXCIuL2l0ZXJhdG9yLmpzXCI7XG5cbmV4cG9ydCB2YXIgcm9vdCA9IFtudWxsXTtcblxuZXhwb3J0IGZ1bmN0aW9uIFNlbGVjdGlvbihncm91cHMsIHBhcmVudHMpIHtcbiAgdGhpcy5fZ3JvdXBzID0gZ3JvdXBzO1xuICB0aGlzLl9wYXJlbnRzID0gcGFyZW50cztcbn1cblxuZnVuY3Rpb24gc2VsZWN0aW9uKCkge1xuICByZXR1cm4gbmV3IFNlbGVjdGlvbihbW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudF1dLCByb290KTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0aW9uX3NlbGVjdGlvbigpIHtcbiAgcmV0dXJuIHRoaXM7XG59XG5cblNlbGVjdGlvbi5wcm90b3R5cGUgPSBzZWxlY3Rpb24ucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogU2VsZWN0aW9uLFxuICBzZWxlY3Q6IHNlbGVjdGlvbl9zZWxlY3QsXG4gIHNlbGVjdEFsbDogc2VsZWN0aW9uX3NlbGVjdEFsbCxcbiAgc2VsZWN0Q2hpbGQ6IHNlbGVjdGlvbl9zZWxlY3RDaGlsZCxcbiAgc2VsZWN0Q2hpbGRyZW46IHNlbGVjdGlvbl9zZWxlY3RDaGlsZHJlbixcbiAgZmlsdGVyOiBzZWxlY3Rpb25fZmlsdGVyLFxuICBkYXRhOiBzZWxlY3Rpb25fZGF0YSxcbiAgZW50ZXI6IHNlbGVjdGlvbl9lbnRlcixcbiAgZXhpdDogc2VsZWN0aW9uX2V4aXQsXG4gIGpvaW46IHNlbGVjdGlvbl9qb2luLFxuICBtZXJnZTogc2VsZWN0aW9uX21lcmdlLFxuICBzZWxlY3Rpb246IHNlbGVjdGlvbl9zZWxlY3Rpb24sXG4gIG9yZGVyOiBzZWxlY3Rpb25fb3JkZXIsXG4gIHNvcnQ6IHNlbGVjdGlvbl9zb3J0LFxuICBjYWxsOiBzZWxlY3Rpb25fY2FsbCxcbiAgbm9kZXM6IHNlbGVjdGlvbl9ub2RlcyxcbiAgbm9kZTogc2VsZWN0aW9uX25vZGUsXG4gIHNpemU6IHNlbGVjdGlvbl9zaXplLFxuICBlbXB0eTogc2VsZWN0aW9uX2VtcHR5LFxuICBlYWNoOiBzZWxlY3Rpb25fZWFjaCxcbiAgYXR0cjogc2VsZWN0aW9uX2F0dHIsXG4gIHN0eWxlOiBzZWxlY3Rpb25fc3R5bGUsXG4gIHByb3BlcnR5OiBzZWxlY3Rpb25fcHJvcGVydHksXG4gIGNsYXNzZWQ6IHNlbGVjdGlvbl9jbGFzc2VkLFxuICB0ZXh0OiBzZWxlY3Rpb25fdGV4dCxcbiAgaHRtbDogc2VsZWN0aW9uX2h0bWwsXG4gIHJhaXNlOiBzZWxlY3Rpb25fcmFpc2UsXG4gIGxvd2VyOiBzZWxlY3Rpb25fbG93ZXIsXG4gIGFwcGVuZDogc2VsZWN0aW9uX2FwcGVuZCxcbiAgaW5zZXJ0OiBzZWxlY3Rpb25faW5zZXJ0LFxuICByZW1vdmU6IHNlbGVjdGlvbl9yZW1vdmUsXG4gIGNsb25lOiBzZWxlY3Rpb25fY2xvbmUsXG4gIGRhdHVtOiBzZWxlY3Rpb25fZGF0dW0sXG4gIG9uOiBzZWxlY3Rpb25fb24sXG4gIGRpc3BhdGNoOiBzZWxlY3Rpb25fZGlzcGF0Y2gsXG4gIFtTeW1ib2wuaXRlcmF0b3JdOiBzZWxlY3Rpb25faXRlcmF0b3Jcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHNlbGVjdGlvbjtcbiIsICJpbXBvcnQge1NlbGVjdGlvbiwgcm9vdH0gZnJvbSBcIi4vc2VsZWN0aW9uL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gIHJldHVybiB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCJcbiAgICAgID8gbmV3IFNlbGVjdGlvbihbW2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXV0sIFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRdKVxuICAgICAgOiBuZXcgU2VsZWN0aW9uKFtbc2VsZWN0b3JdXSwgcm9vdCk7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oY29uc3RydWN0b3IsIGZhY3RvcnksIHByb3RvdHlwZSkge1xuICBjb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSBmYWN0b3J5LnByb3RvdHlwZSA9IHByb3RvdHlwZTtcbiAgcHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY29uc3RydWN0b3I7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQocGFyZW50LCBkZWZpbml0aW9uKSB7XG4gIHZhciBwcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHBhcmVudC5wcm90b3R5cGUpO1xuICBmb3IgKHZhciBrZXkgaW4gZGVmaW5pdGlvbikgcHJvdG90eXBlW2tleV0gPSBkZWZpbml0aW9uW2tleV07XG4gIHJldHVybiBwcm90b3R5cGU7XG59XG4iLCAiaW1wb3J0IGRlZmluZSwge2V4dGVuZH0gZnJvbSBcIi4vZGVmaW5lLmpzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBDb2xvcigpIHt9XG5cbmV4cG9ydCB2YXIgZGFya2VyID0gMC43O1xuZXhwb3J0IHZhciBicmlnaHRlciA9IDEgLyBkYXJrZXI7XG5cbnZhciByZUkgPSBcIlxcXFxzKihbKy1dP1xcXFxkKylcXFxccypcIixcbiAgICByZU4gPSBcIlxcXFxzKihbKy1dPyg/OlxcXFxkKlxcXFwuKT9cXFxcZCsoPzpbZUVdWystXT9cXFxcZCspPylcXFxccypcIixcbiAgICByZVAgPSBcIlxcXFxzKihbKy1dPyg/OlxcXFxkKlxcXFwuKT9cXFxcZCsoPzpbZUVdWystXT9cXFxcZCspPyklXFxcXHMqXCIsXG4gICAgcmVIZXggPSAvXiMoWzAtOWEtZl17Myw4fSkkLyxcbiAgICByZVJnYkludGVnZXIgPSBuZXcgUmVnRXhwKGBecmdiXFxcXCgke3JlSX0sJHtyZUl9LCR7cmVJfVxcXFwpJGApLFxuICAgIHJlUmdiUGVyY2VudCA9IG5ldyBSZWdFeHAoYF5yZ2JcXFxcKCR7cmVQfSwke3JlUH0sJHtyZVB9XFxcXCkkYCksXG4gICAgcmVSZ2JhSW50ZWdlciA9IG5ldyBSZWdFeHAoYF5yZ2JhXFxcXCgke3JlSX0sJHtyZUl9LCR7cmVJfSwke3JlTn1cXFxcKSRgKSxcbiAgICByZVJnYmFQZXJjZW50ID0gbmV3IFJlZ0V4cChgXnJnYmFcXFxcKCR7cmVQfSwke3JlUH0sJHtyZVB9LCR7cmVOfVxcXFwpJGApLFxuICAgIHJlSHNsUGVyY2VudCA9IG5ldyBSZWdFeHAoYF5oc2xcXFxcKCR7cmVOfSwke3JlUH0sJHtyZVB9XFxcXCkkYCksXG4gICAgcmVIc2xhUGVyY2VudCA9IG5ldyBSZWdFeHAoYF5oc2xhXFxcXCgke3JlTn0sJHtyZVB9LCR7cmVQfSwke3JlTn1cXFxcKSRgKTtcblxudmFyIG5hbWVkID0ge1xuICBhbGljZWJsdWU6IDB4ZjBmOGZmLFxuICBhbnRpcXVld2hpdGU6IDB4ZmFlYmQ3LFxuICBhcXVhOiAweDAwZmZmZixcbiAgYXF1YW1hcmluZTogMHg3ZmZmZDQsXG4gIGF6dXJlOiAweGYwZmZmZixcbiAgYmVpZ2U6IDB4ZjVmNWRjLFxuICBiaXNxdWU6IDB4ZmZlNGM0LFxuICBibGFjazogMHgwMDAwMDAsXG4gIGJsYW5jaGVkYWxtb25kOiAweGZmZWJjZCxcbiAgYmx1ZTogMHgwMDAwZmYsXG4gIGJsdWV2aW9sZXQ6IDB4OGEyYmUyLFxuICBicm93bjogMHhhNTJhMmEsXG4gIGJ1cmx5d29vZDogMHhkZWI4ODcsXG4gIGNhZGV0Ymx1ZTogMHg1ZjllYTAsXG4gIGNoYXJ0cmV1c2U6IDB4N2ZmZjAwLFxuICBjaG9jb2xhdGU6IDB4ZDI2OTFlLFxuICBjb3JhbDogMHhmZjdmNTAsXG4gIGNvcm5mbG93ZXJibHVlOiAweDY0OTVlZCxcbiAgY29ybnNpbGs6IDB4ZmZmOGRjLFxuICBjcmltc29uOiAweGRjMTQzYyxcbiAgY3lhbjogMHgwMGZmZmYsXG4gIGRhcmtibHVlOiAweDAwMDA4YixcbiAgZGFya2N5YW46IDB4MDA4YjhiLFxuICBkYXJrZ29sZGVucm9kOiAweGI4ODYwYixcbiAgZGFya2dyYXk6IDB4YTlhOWE5LFxuICBkYXJrZ3JlZW46IDB4MDA2NDAwLFxuICBkYXJrZ3JleTogMHhhOWE5YTksXG4gIGRhcmtraGFraTogMHhiZGI3NmIsXG4gIGRhcmttYWdlbnRhOiAweDhiMDA4YixcbiAgZGFya29saXZlZ3JlZW46IDB4NTU2YjJmLFxuICBkYXJrb3JhbmdlOiAweGZmOGMwMCxcbiAgZGFya29yY2hpZDogMHg5OTMyY2MsXG4gIGRhcmtyZWQ6IDB4OGIwMDAwLFxuICBkYXJrc2FsbW9uOiAweGU5OTY3YSxcbiAgZGFya3NlYWdyZWVuOiAweDhmYmM4ZixcbiAgZGFya3NsYXRlYmx1ZTogMHg0ODNkOGIsXG4gIGRhcmtzbGF0ZWdyYXk6IDB4MmY0ZjRmLFxuICBkYXJrc2xhdGVncmV5OiAweDJmNGY0ZixcbiAgZGFya3R1cnF1b2lzZTogMHgwMGNlZDEsXG4gIGRhcmt2aW9sZXQ6IDB4OTQwMGQzLFxuICBkZWVwcGluazogMHhmZjE0OTMsXG4gIGRlZXBza3libHVlOiAweDAwYmZmZixcbiAgZGltZ3JheTogMHg2OTY5NjksXG4gIGRpbWdyZXk6IDB4Njk2OTY5LFxuICBkb2RnZXJibHVlOiAweDFlOTBmZixcbiAgZmlyZWJyaWNrOiAweGIyMjIyMixcbiAgZmxvcmFsd2hpdGU6IDB4ZmZmYWYwLFxuICBmb3Jlc3RncmVlbjogMHgyMjhiMjIsXG4gIGZ1Y2hzaWE6IDB4ZmYwMGZmLFxuICBnYWluc2Jvcm86IDB4ZGNkY2RjLFxuICBnaG9zdHdoaXRlOiAweGY4ZjhmZixcbiAgZ29sZDogMHhmZmQ3MDAsXG4gIGdvbGRlbnJvZDogMHhkYWE1MjAsXG4gIGdyYXk6IDB4ODA4MDgwLFxuICBncmVlbjogMHgwMDgwMDAsXG4gIGdyZWVueWVsbG93OiAweGFkZmYyZixcbiAgZ3JleTogMHg4MDgwODAsXG4gIGhvbmV5ZGV3OiAweGYwZmZmMCxcbiAgaG90cGluazogMHhmZjY5YjQsXG4gIGluZGlhbnJlZDogMHhjZDVjNWMsXG4gIGluZGlnbzogMHg0YjAwODIsXG4gIGl2b3J5OiAweGZmZmZmMCxcbiAga2hha2k6IDB4ZjBlNjhjLFxuICBsYXZlbmRlcjogMHhlNmU2ZmEsXG4gIGxhdmVuZGVyYmx1c2g6IDB4ZmZmMGY1LFxuICBsYXduZ3JlZW46IDB4N2NmYzAwLFxuICBsZW1vbmNoaWZmb246IDB4ZmZmYWNkLFxuICBsaWdodGJsdWU6IDB4YWRkOGU2LFxuICBsaWdodGNvcmFsOiAweGYwODA4MCxcbiAgbGlnaHRjeWFuOiAweGUwZmZmZixcbiAgbGlnaHRnb2xkZW5yb2R5ZWxsb3c6IDB4ZmFmYWQyLFxuICBsaWdodGdyYXk6IDB4ZDNkM2QzLFxuICBsaWdodGdyZWVuOiAweDkwZWU5MCxcbiAgbGlnaHRncmV5OiAweGQzZDNkMyxcbiAgbGlnaHRwaW5rOiAweGZmYjZjMSxcbiAgbGlnaHRzYWxtb246IDB4ZmZhMDdhLFxuICBsaWdodHNlYWdyZWVuOiAweDIwYjJhYSxcbiAgbGlnaHRza3libHVlOiAweDg3Y2VmYSxcbiAgbGlnaHRzbGF0ZWdyYXk6IDB4Nzc4ODk5LFxuICBsaWdodHNsYXRlZ3JleTogMHg3Nzg4OTksXG4gIGxpZ2h0c3RlZWxibHVlOiAweGIwYzRkZSxcbiAgbGlnaHR5ZWxsb3c6IDB4ZmZmZmUwLFxuICBsaW1lOiAweDAwZmYwMCxcbiAgbGltZWdyZWVuOiAweDMyY2QzMixcbiAgbGluZW46IDB4ZmFmMGU2LFxuICBtYWdlbnRhOiAweGZmMDBmZixcbiAgbWFyb29uOiAweDgwMDAwMCxcbiAgbWVkaXVtYXF1YW1hcmluZTogMHg2NmNkYWEsXG4gIG1lZGl1bWJsdWU6IDB4MDAwMGNkLFxuICBtZWRpdW1vcmNoaWQ6IDB4YmE1NWQzLFxuICBtZWRpdW1wdXJwbGU6IDB4OTM3MGRiLFxuICBtZWRpdW1zZWFncmVlbjogMHgzY2IzNzEsXG4gIG1lZGl1bXNsYXRlYmx1ZTogMHg3YjY4ZWUsXG4gIG1lZGl1bXNwcmluZ2dyZWVuOiAweDAwZmE5YSxcbiAgbWVkaXVtdHVycXVvaXNlOiAweDQ4ZDFjYyxcbiAgbWVkaXVtdmlvbGV0cmVkOiAweGM3MTU4NSxcbiAgbWlkbmlnaHRibHVlOiAweDE5MTk3MCxcbiAgbWludGNyZWFtOiAweGY1ZmZmYSxcbiAgbWlzdHlyb3NlOiAweGZmZTRlMSxcbiAgbW9jY2FzaW46IDB4ZmZlNGI1LFxuICBuYXZham93aGl0ZTogMHhmZmRlYWQsXG4gIG5hdnk6IDB4MDAwMDgwLFxuICBvbGRsYWNlOiAweGZkZjVlNixcbiAgb2xpdmU6IDB4ODA4MDAwLFxuICBvbGl2ZWRyYWI6IDB4NmI4ZTIzLFxuICBvcmFuZ2U6IDB4ZmZhNTAwLFxuICBvcmFuZ2VyZWQ6IDB4ZmY0NTAwLFxuICBvcmNoaWQ6IDB4ZGE3MGQ2LFxuICBwYWxlZ29sZGVucm9kOiAweGVlZThhYSxcbiAgcGFsZWdyZWVuOiAweDk4ZmI5OCxcbiAgcGFsZXR1cnF1b2lzZTogMHhhZmVlZWUsXG4gIHBhbGV2aW9sZXRyZWQ6IDB4ZGI3MDkzLFxuICBwYXBheWF3aGlwOiAweGZmZWZkNSxcbiAgcGVhY2hwdWZmOiAweGZmZGFiOSxcbiAgcGVydTogMHhjZDg1M2YsXG4gIHBpbms6IDB4ZmZjMGNiLFxuICBwbHVtOiAweGRkYTBkZCxcbiAgcG93ZGVyYmx1ZTogMHhiMGUwZTYsXG4gIHB1cnBsZTogMHg4MDAwODAsXG4gIHJlYmVjY2FwdXJwbGU6IDB4NjYzMzk5LFxuICByZWQ6IDB4ZmYwMDAwLFxuICByb3N5YnJvd246IDB4YmM4ZjhmLFxuICByb3lhbGJsdWU6IDB4NDE2OWUxLFxuICBzYWRkbGVicm93bjogMHg4YjQ1MTMsXG4gIHNhbG1vbjogMHhmYTgwNzIsXG4gIHNhbmR5YnJvd246IDB4ZjRhNDYwLFxuICBzZWFncmVlbjogMHgyZThiNTcsXG4gIHNlYXNoZWxsOiAweGZmZjVlZSxcbiAgc2llbm5hOiAweGEwNTIyZCxcbiAgc2lsdmVyOiAweGMwYzBjMCxcbiAgc2t5Ymx1ZTogMHg4N2NlZWIsXG4gIHNsYXRlYmx1ZTogMHg2YTVhY2QsXG4gIHNsYXRlZ3JheTogMHg3MDgwOTAsXG4gIHNsYXRlZ3JleTogMHg3MDgwOTAsXG4gIHNub3c6IDB4ZmZmYWZhLFxuICBzcHJpbmdncmVlbjogMHgwMGZmN2YsXG4gIHN0ZWVsYmx1ZTogMHg0NjgyYjQsXG4gIHRhbjogMHhkMmI0OGMsXG4gIHRlYWw6IDB4MDA4MDgwLFxuICB0aGlzdGxlOiAweGQ4YmZkOCxcbiAgdG9tYXRvOiAweGZmNjM0NyxcbiAgdHVycXVvaXNlOiAweDQwZTBkMCxcbiAgdmlvbGV0OiAweGVlODJlZSxcbiAgd2hlYXQ6IDB4ZjVkZWIzLFxuICB3aGl0ZTogMHhmZmZmZmYsXG4gIHdoaXRlc21va2U6IDB4ZjVmNWY1LFxuICB5ZWxsb3c6IDB4ZmZmZjAwLFxuICB5ZWxsb3dncmVlbjogMHg5YWNkMzJcbn07XG5cbmRlZmluZShDb2xvciwgY29sb3IsIHtcbiAgY29weShjaGFubmVscykge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG5ldyB0aGlzLmNvbnN0cnVjdG9yLCB0aGlzLCBjaGFubmVscyk7XG4gIH0sXG4gIGRpc3BsYXlhYmxlKCkge1xuICAgIHJldHVybiB0aGlzLnJnYigpLmRpc3BsYXlhYmxlKCk7XG4gIH0sXG4gIGhleDogY29sb3JfZm9ybWF0SGV4LCAvLyBEZXByZWNhdGVkISBVc2UgY29sb3IuZm9ybWF0SGV4LlxuICBmb3JtYXRIZXg6IGNvbG9yX2Zvcm1hdEhleCxcbiAgZm9ybWF0SGV4ODogY29sb3JfZm9ybWF0SGV4OCxcbiAgZm9ybWF0SHNsOiBjb2xvcl9mb3JtYXRIc2wsXG4gIGZvcm1hdFJnYjogY29sb3JfZm9ybWF0UmdiLFxuICB0b1N0cmluZzogY29sb3JfZm9ybWF0UmdiXG59KTtcblxuZnVuY3Rpb24gY29sb3JfZm9ybWF0SGV4KCkge1xuICByZXR1cm4gdGhpcy5yZ2IoKS5mb3JtYXRIZXgoKTtcbn1cblxuZnVuY3Rpb24gY29sb3JfZm9ybWF0SGV4OCgpIHtcbiAgcmV0dXJuIHRoaXMucmdiKCkuZm9ybWF0SGV4OCgpO1xufVxuXG5mdW5jdGlvbiBjb2xvcl9mb3JtYXRIc2woKSB7XG4gIHJldHVybiBoc2xDb252ZXJ0KHRoaXMpLmZvcm1hdEhzbCgpO1xufVxuXG5mdW5jdGlvbiBjb2xvcl9mb3JtYXRSZ2IoKSB7XG4gIHJldHVybiB0aGlzLnJnYigpLmZvcm1hdFJnYigpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb2xvcihmb3JtYXQpIHtcbiAgdmFyIG0sIGw7XG4gIGZvcm1hdCA9IChmb3JtYXQgKyBcIlwiKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIChtID0gcmVIZXguZXhlYyhmb3JtYXQpKSA/IChsID0gbVsxXS5sZW5ndGgsIG0gPSBwYXJzZUludChtWzFdLCAxNiksIGwgPT09IDYgPyByZ2JuKG0pIC8vICNmZjAwMDBcbiAgICAgIDogbCA9PT0gMyA/IG5ldyBSZ2IoKG0gPj4gOCAmIDB4ZikgfCAobSA+PiA0ICYgMHhmMCksIChtID4+IDQgJiAweGYpIHwgKG0gJiAweGYwKSwgKChtICYgMHhmKSA8PCA0KSB8IChtICYgMHhmKSwgMSkgLy8gI2YwMFxuICAgICAgOiBsID09PSA4ID8gcmdiYShtID4+IDI0ICYgMHhmZiwgbSA+PiAxNiAmIDB4ZmYsIG0gPj4gOCAmIDB4ZmYsIChtICYgMHhmZikgLyAweGZmKSAvLyAjZmYwMDAwMDBcbiAgICAgIDogbCA9PT0gNCA/IHJnYmEoKG0gPj4gMTIgJiAweGYpIHwgKG0gPj4gOCAmIDB4ZjApLCAobSA+PiA4ICYgMHhmKSB8IChtID4+IDQgJiAweGYwKSwgKG0gPj4gNCAmIDB4ZikgfCAobSAmIDB4ZjApLCAoKChtICYgMHhmKSA8PCA0KSB8IChtICYgMHhmKSkgLyAweGZmKSAvLyAjZjAwMFxuICAgICAgOiBudWxsKSAvLyBpbnZhbGlkIGhleFxuICAgICAgOiAobSA9IHJlUmdiSW50ZWdlci5leGVjKGZvcm1hdCkpID8gbmV3IFJnYihtWzFdLCBtWzJdLCBtWzNdLCAxKSAvLyByZ2IoMjU1LCAwLCAwKVxuICAgICAgOiAobSA9IHJlUmdiUGVyY2VudC5leGVjKGZvcm1hdCkpID8gbmV3IFJnYihtWzFdICogMjU1IC8gMTAwLCBtWzJdICogMjU1IC8gMTAwLCBtWzNdICogMjU1IC8gMTAwLCAxKSAvLyByZ2IoMTAwJSwgMCUsIDAlKVxuICAgICAgOiAobSA9IHJlUmdiYUludGVnZXIuZXhlYyhmb3JtYXQpKSA/IHJnYmEobVsxXSwgbVsyXSwgbVszXSwgbVs0XSkgLy8gcmdiYSgyNTUsIDAsIDAsIDEpXG4gICAgICA6IChtID0gcmVSZ2JhUGVyY2VudC5leGVjKGZvcm1hdCkpID8gcmdiYShtWzFdICogMjU1IC8gMTAwLCBtWzJdICogMjU1IC8gMTAwLCBtWzNdICogMjU1IC8gMTAwLCBtWzRdKSAvLyByZ2IoMTAwJSwgMCUsIDAlLCAxKVxuICAgICAgOiAobSA9IHJlSHNsUGVyY2VudC5leGVjKGZvcm1hdCkpID8gaHNsYShtWzFdLCBtWzJdIC8gMTAwLCBtWzNdIC8gMTAwLCAxKSAvLyBoc2woMTIwLCA1MCUsIDUwJSlcbiAgICAgIDogKG0gPSByZUhzbGFQZXJjZW50LmV4ZWMoZm9ybWF0KSkgPyBoc2xhKG1bMV0sIG1bMl0gLyAxMDAsIG1bM10gLyAxMDAsIG1bNF0pIC8vIGhzbGEoMTIwLCA1MCUsIDUwJSwgMSlcbiAgICAgIDogbmFtZWQuaGFzT3duUHJvcGVydHkoZm9ybWF0KSA/IHJnYm4obmFtZWRbZm9ybWF0XSkgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbiAgICAgIDogZm9ybWF0ID09PSBcInRyYW5zcGFyZW50XCIgPyBuZXcgUmdiKE5hTiwgTmFOLCBOYU4sIDApXG4gICAgICA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIHJnYm4obikge1xuICByZXR1cm4gbmV3IFJnYihuID4+IDE2ICYgMHhmZiwgbiA+PiA4ICYgMHhmZiwgbiAmIDB4ZmYsIDEpO1xufVxuXG5mdW5jdGlvbiByZ2JhKHIsIGcsIGIsIGEpIHtcbiAgaWYgKGEgPD0gMCkgciA9IGcgPSBiID0gTmFOO1xuICByZXR1cm4gbmV3IFJnYihyLCBnLCBiLCBhKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJnYkNvbnZlcnQobykge1xuICBpZiAoIShvIGluc3RhbmNlb2YgQ29sb3IpKSBvID0gY29sb3Iobyk7XG4gIGlmICghbykgcmV0dXJuIG5ldyBSZ2I7XG4gIG8gPSBvLnJnYigpO1xuICByZXR1cm4gbmV3IFJnYihvLnIsIG8uZywgby5iLCBvLm9wYWNpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmdiKHIsIGcsIGIsIG9wYWNpdHkpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyByZ2JDb252ZXJ0KHIpIDogbmV3IFJnYihyLCBnLCBiLCBvcGFjaXR5ID09IG51bGwgPyAxIDogb3BhY2l0eSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZ2IociwgZywgYiwgb3BhY2l0eSkge1xuICB0aGlzLnIgPSArcjtcbiAgdGhpcy5nID0gK2c7XG4gIHRoaXMuYiA9ICtiO1xuICB0aGlzLm9wYWNpdHkgPSArb3BhY2l0eTtcbn1cblxuZGVmaW5lKFJnYiwgcmdiLCBleHRlbmQoQ29sb3IsIHtcbiAgYnJpZ2h0ZXIoaykge1xuICAgIGsgPSBrID09IG51bGwgPyBicmlnaHRlciA6IE1hdGgucG93KGJyaWdodGVyLCBrKTtcbiAgICByZXR1cm4gbmV3IFJnYih0aGlzLnIgKiBrLCB0aGlzLmcgKiBrLCB0aGlzLmIgKiBrLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICBkYXJrZXIoaykge1xuICAgIGsgPSBrID09IG51bGwgPyBkYXJrZXIgOiBNYXRoLnBvdyhkYXJrZXIsIGspO1xuICAgIHJldHVybiBuZXcgUmdiKHRoaXMuciAqIGssIHRoaXMuZyAqIGssIHRoaXMuYiAqIGssIHRoaXMub3BhY2l0eSk7XG4gIH0sXG4gIHJnYigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSxcbiAgY2xhbXAoKSB7XG4gICAgcmV0dXJuIG5ldyBSZ2IoY2xhbXBpKHRoaXMuciksIGNsYW1waSh0aGlzLmcpLCBjbGFtcGkodGhpcy5iKSwgY2xhbXBhKHRoaXMub3BhY2l0eSkpO1xuICB9LFxuICBkaXNwbGF5YWJsZSgpIHtcbiAgICByZXR1cm4gKC0wLjUgPD0gdGhpcy5yICYmIHRoaXMuciA8IDI1NS41KVxuICAgICAgICAmJiAoLTAuNSA8PSB0aGlzLmcgJiYgdGhpcy5nIDwgMjU1LjUpXG4gICAgICAgICYmICgtMC41IDw9IHRoaXMuYiAmJiB0aGlzLmIgPCAyNTUuNSlcbiAgICAgICAgJiYgKDAgPD0gdGhpcy5vcGFjaXR5ICYmIHRoaXMub3BhY2l0eSA8PSAxKTtcbiAgfSxcbiAgaGV4OiByZ2JfZm9ybWF0SGV4LCAvLyBEZXByZWNhdGVkISBVc2UgY29sb3IuZm9ybWF0SGV4LlxuICBmb3JtYXRIZXg6IHJnYl9mb3JtYXRIZXgsXG4gIGZvcm1hdEhleDg6IHJnYl9mb3JtYXRIZXg4LFxuICBmb3JtYXRSZ2I6IHJnYl9mb3JtYXRSZ2IsXG4gIHRvU3RyaW5nOiByZ2JfZm9ybWF0UmdiXG59KSk7XG5cbmZ1bmN0aW9uIHJnYl9mb3JtYXRIZXgoKSB7XG4gIHJldHVybiBgIyR7aGV4KHRoaXMucil9JHtoZXgodGhpcy5nKX0ke2hleCh0aGlzLmIpfWA7XG59XG5cbmZ1bmN0aW9uIHJnYl9mb3JtYXRIZXg4KCkge1xuICByZXR1cm4gYCMke2hleCh0aGlzLnIpfSR7aGV4KHRoaXMuZyl9JHtoZXgodGhpcy5iKX0ke2hleCgoaXNOYU4odGhpcy5vcGFjaXR5KSA/IDEgOiB0aGlzLm9wYWNpdHkpICogMjU1KX1gO1xufVxuXG5mdW5jdGlvbiByZ2JfZm9ybWF0UmdiKCkge1xuICBjb25zdCBhID0gY2xhbXBhKHRoaXMub3BhY2l0eSk7XG4gIHJldHVybiBgJHthID09PSAxID8gXCJyZ2IoXCIgOiBcInJnYmEoXCJ9JHtjbGFtcGkodGhpcy5yKX0sICR7Y2xhbXBpKHRoaXMuZyl9LCAke2NsYW1waSh0aGlzLmIpfSR7YSA9PT0gMSA/IFwiKVwiIDogYCwgJHthfSlgfWA7XG59XG5cbmZ1bmN0aW9uIGNsYW1wYShvcGFjaXR5KSB7XG4gIHJldHVybiBpc05hTihvcGFjaXR5KSA/IDEgOiBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBvcGFjaXR5KSk7XG59XG5cbmZ1bmN0aW9uIGNsYW1waSh2YWx1ZSkge1xuICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKHZhbHVlKSB8fCAwKSk7XG59XG5cbmZ1bmN0aW9uIGhleCh2YWx1ZSkge1xuICB2YWx1ZSA9IGNsYW1waSh2YWx1ZSk7XG4gIHJldHVybiAodmFsdWUgPCAxNiA/IFwiMFwiIDogXCJcIikgKyB2YWx1ZS50b1N0cmluZygxNik7XG59XG5cbmZ1bmN0aW9uIGhzbGEoaCwgcywgbCwgYSkge1xuICBpZiAoYSA8PSAwKSBoID0gcyA9IGwgPSBOYU47XG4gIGVsc2UgaWYgKGwgPD0gMCB8fCBsID49IDEpIGggPSBzID0gTmFOO1xuICBlbHNlIGlmIChzIDw9IDApIGggPSBOYU47XG4gIHJldHVybiBuZXcgSHNsKGgsIHMsIGwsIGEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaHNsQ29udmVydChvKSB7XG4gIGlmIChvIGluc3RhbmNlb2YgSHNsKSByZXR1cm4gbmV3IEhzbChvLmgsIG8ucywgby5sLCBvLm9wYWNpdHkpO1xuICBpZiAoIShvIGluc3RhbmNlb2YgQ29sb3IpKSBvID0gY29sb3Iobyk7XG4gIGlmICghbykgcmV0dXJuIG5ldyBIc2w7XG4gIGlmIChvIGluc3RhbmNlb2YgSHNsKSByZXR1cm4gbztcbiAgbyA9IG8ucmdiKCk7XG4gIHZhciByID0gby5yIC8gMjU1LFxuICAgICAgZyA9IG8uZyAvIDI1NSxcbiAgICAgIGIgPSBvLmIgLyAyNTUsXG4gICAgICBtaW4gPSBNYXRoLm1pbihyLCBnLCBiKSxcbiAgICAgIG1heCA9IE1hdGgubWF4KHIsIGcsIGIpLFxuICAgICAgaCA9IE5hTixcbiAgICAgIHMgPSBtYXggLSBtaW4sXG4gICAgICBsID0gKG1heCArIG1pbikgLyAyO1xuICBpZiAocykge1xuICAgIGlmIChyID09PSBtYXgpIGggPSAoZyAtIGIpIC8gcyArIChnIDwgYikgKiA2O1xuICAgIGVsc2UgaWYgKGcgPT09IG1heCkgaCA9IChiIC0gcikgLyBzICsgMjtcbiAgICBlbHNlIGggPSAociAtIGcpIC8gcyArIDQ7XG4gICAgcyAvPSBsIDwgMC41ID8gbWF4ICsgbWluIDogMiAtIG1heCAtIG1pbjtcbiAgICBoICo9IDYwO1xuICB9IGVsc2Uge1xuICAgIHMgPSBsID4gMCAmJiBsIDwgMSA/IDAgOiBoO1xuICB9XG4gIHJldHVybiBuZXcgSHNsKGgsIHMsIGwsIG8ub3BhY2l0eSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoc2woaCwgcywgbCwgb3BhY2l0eSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IGhzbENvbnZlcnQoaCkgOiBuZXcgSHNsKGgsIHMsIGwsIG9wYWNpdHkgPT0gbnVsbCA/IDEgOiBvcGFjaXR5KTtcbn1cblxuZnVuY3Rpb24gSHNsKGgsIHMsIGwsIG9wYWNpdHkpIHtcbiAgdGhpcy5oID0gK2g7XG4gIHRoaXMucyA9ICtzO1xuICB0aGlzLmwgPSArbDtcbiAgdGhpcy5vcGFjaXR5ID0gK29wYWNpdHk7XG59XG5cbmRlZmluZShIc2wsIGhzbCwgZXh0ZW5kKENvbG9yLCB7XG4gIGJyaWdodGVyKGspIHtcbiAgICBrID0gayA9PSBudWxsID8gYnJpZ2h0ZXIgOiBNYXRoLnBvdyhicmlnaHRlciwgayk7XG4gICAgcmV0dXJuIG5ldyBIc2wodGhpcy5oLCB0aGlzLnMsIHRoaXMubCAqIGssIHRoaXMub3BhY2l0eSk7XG4gIH0sXG4gIGRhcmtlcihrKSB7XG4gICAgayA9IGsgPT0gbnVsbCA/IGRhcmtlciA6IE1hdGgucG93KGRhcmtlciwgayk7XG4gICAgcmV0dXJuIG5ldyBIc2wodGhpcy5oLCB0aGlzLnMsIHRoaXMubCAqIGssIHRoaXMub3BhY2l0eSk7XG4gIH0sXG4gIHJnYigpIHtcbiAgICB2YXIgaCA9IHRoaXMuaCAlIDM2MCArICh0aGlzLmggPCAwKSAqIDM2MCxcbiAgICAgICAgcyA9IGlzTmFOKGgpIHx8IGlzTmFOKHRoaXMucykgPyAwIDogdGhpcy5zLFxuICAgICAgICBsID0gdGhpcy5sLFxuICAgICAgICBtMiA9IGwgKyAobCA8IDAuNSA/IGwgOiAxIC0gbCkgKiBzLFxuICAgICAgICBtMSA9IDIgKiBsIC0gbTI7XG4gICAgcmV0dXJuIG5ldyBSZ2IoXG4gICAgICBoc2wycmdiKGggPj0gMjQwID8gaCAtIDI0MCA6IGggKyAxMjAsIG0xLCBtMiksXG4gICAgICBoc2wycmdiKGgsIG0xLCBtMiksXG4gICAgICBoc2wycmdiKGggPCAxMjAgPyBoICsgMjQwIDogaCAtIDEyMCwgbTEsIG0yKSxcbiAgICAgIHRoaXMub3BhY2l0eVxuICAgICk7XG4gIH0sXG4gIGNsYW1wKCkge1xuICAgIHJldHVybiBuZXcgSHNsKGNsYW1waCh0aGlzLmgpLCBjbGFtcHQodGhpcy5zKSwgY2xhbXB0KHRoaXMubCksIGNsYW1wYSh0aGlzLm9wYWNpdHkpKTtcbiAgfSxcbiAgZGlzcGxheWFibGUoKSB7XG4gICAgcmV0dXJuICgwIDw9IHRoaXMucyAmJiB0aGlzLnMgPD0gMSB8fCBpc05hTih0aGlzLnMpKVxuICAgICAgICAmJiAoMCA8PSB0aGlzLmwgJiYgdGhpcy5sIDw9IDEpXG4gICAgICAgICYmICgwIDw9IHRoaXMub3BhY2l0eSAmJiB0aGlzLm9wYWNpdHkgPD0gMSk7XG4gIH0sXG4gIGZvcm1hdEhzbCgpIHtcbiAgICBjb25zdCBhID0gY2xhbXBhKHRoaXMub3BhY2l0eSk7XG4gICAgcmV0dXJuIGAke2EgPT09IDEgPyBcImhzbChcIiA6IFwiaHNsYShcIn0ke2NsYW1waCh0aGlzLmgpfSwgJHtjbGFtcHQodGhpcy5zKSAqIDEwMH0lLCAke2NsYW1wdCh0aGlzLmwpICogMTAwfSUke2EgPT09IDEgPyBcIilcIiA6IGAsICR7YX0pYH1gO1xuICB9XG59KSk7XG5cbmZ1bmN0aW9uIGNsYW1waCh2YWx1ZSkge1xuICB2YWx1ZSA9ICh2YWx1ZSB8fCAwKSAlIDM2MDtcbiAgcmV0dXJuIHZhbHVlIDwgMCA/IHZhbHVlICsgMzYwIDogdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGNsYW1wdCh2YWx1ZSkge1xuICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgdmFsdWUgfHwgMCkpO1xufVxuXG4vKiBGcm9tIEZ2RCAxMy4zNywgQ1NTIENvbG9yIE1vZHVsZSBMZXZlbCAzICovXG5mdW5jdGlvbiBoc2wycmdiKGgsIG0xLCBtMikge1xuICByZXR1cm4gKGggPCA2MCA/IG0xICsgKG0yIC0gbTEpICogaCAvIDYwXG4gICAgICA6IGggPCAxODAgPyBtMlxuICAgICAgOiBoIDwgMjQwID8gbTEgKyAobTIgLSBtMSkgKiAoMjQwIC0gaCkgLyA2MFxuICAgICAgOiBtMSkgKiAyNTU7XG59XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGJhc2lzKHQxLCB2MCwgdjEsIHYyLCB2Mykge1xuICB2YXIgdDIgPSB0MSAqIHQxLCB0MyA9IHQyICogdDE7XG4gIHJldHVybiAoKDEgLSAzICogdDEgKyAzICogdDIgLSB0MykgKiB2MFxuICAgICAgKyAoNCAtIDYgKiB0MiArIDMgKiB0MykgKiB2MVxuICAgICAgKyAoMSArIDMgKiB0MSArIDMgKiB0MiAtIDMgKiB0MykgKiB2MlxuICAgICAgKyB0MyAqIHYzKSAvIDY7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlcykge1xuICB2YXIgbiA9IHZhbHVlcy5sZW5ndGggLSAxO1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHZhciBpID0gdCA8PSAwID8gKHQgPSAwKSA6IHQgPj0gMSA/ICh0ID0gMSwgbiAtIDEpIDogTWF0aC5mbG9vcih0ICogbiksXG4gICAgICAgIHYxID0gdmFsdWVzW2ldLFxuICAgICAgICB2MiA9IHZhbHVlc1tpICsgMV0sXG4gICAgICAgIHYwID0gaSA+IDAgPyB2YWx1ZXNbaSAtIDFdIDogMiAqIHYxIC0gdjIsXG4gICAgICAgIHYzID0gaSA8IG4gLSAxID8gdmFsdWVzW2kgKyAyXSA6IDIgKiB2MiAtIHYxO1xuICAgIHJldHVybiBiYXNpcygodCAtIGkgLyBuKSAqIG4sIHYwLCB2MSwgdjIsIHYzKTtcbiAgfTtcbn1cbiIsICJpbXBvcnQge2Jhc2lzfSBmcm9tIFwiLi9iYXNpcy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZXMpIHtcbiAgdmFyIG4gPSB2YWx1ZXMubGVuZ3RoO1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHZhciBpID0gTWF0aC5mbG9vcigoKHQgJT0gMSkgPCAwID8gKyt0IDogdCkgKiBuKSxcbiAgICAgICAgdjAgPSB2YWx1ZXNbKGkgKyBuIC0gMSkgJSBuXSxcbiAgICAgICAgdjEgPSB2YWx1ZXNbaSAlIG5dLFxuICAgICAgICB2MiA9IHZhbHVlc1soaSArIDEpICUgbl0sXG4gICAgICAgIHYzID0gdmFsdWVzWyhpICsgMikgJSBuXTtcbiAgICByZXR1cm4gYmFzaXMoKHQgLSBpIC8gbikgKiBuLCB2MCwgdjEsIHYyLCB2Myk7XG4gIH07XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgeCA9PiAoKSA9PiB4O1xuIiwgImltcG9ydCBjb25zdGFudCBmcm9tIFwiLi9jb25zdGFudC5qc1wiO1xuXG5mdW5jdGlvbiBsaW5lYXIoYSwgZCkge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHJldHVybiBhICsgdCAqIGQ7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGV4cG9uZW50aWFsKGEsIGIsIHkpIHtcbiAgcmV0dXJuIGEgPSBNYXRoLnBvdyhhLCB5KSwgYiA9IE1hdGgucG93KGIsIHkpIC0gYSwgeSA9IDEgLyB5LCBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIE1hdGgucG93KGEgKyB0ICogYiwgeSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBodWUoYSwgYikge1xuICB2YXIgZCA9IGIgLSBhO1xuICByZXR1cm4gZCA/IGxpbmVhcihhLCBkID4gMTgwIHx8IGQgPCAtMTgwID8gZCAtIDM2MCAqIE1hdGgucm91bmQoZCAvIDM2MCkgOiBkKSA6IGNvbnN0YW50KGlzTmFOKGEpID8gYiA6IGEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2FtbWEoeSkge1xuICByZXR1cm4gKHkgPSAreSkgPT09IDEgPyBub2dhbW1hIDogZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBiIC0gYSA/IGV4cG9uZW50aWFsKGEsIGIsIHkpIDogY29uc3RhbnQoaXNOYU4oYSkgPyBiIDogYSk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG5vZ2FtbWEoYSwgYikge1xuICB2YXIgZCA9IGIgLSBhO1xuICByZXR1cm4gZCA/IGxpbmVhcihhLCBkKSA6IGNvbnN0YW50KGlzTmFOKGEpID8gYiA6IGEpO1xufVxuIiwgImltcG9ydCB7cmdiIGFzIGNvbG9yUmdifSBmcm9tIFwiZDMtY29sb3JcIjtcbmltcG9ydCBiYXNpcyBmcm9tIFwiLi9iYXNpcy5qc1wiO1xuaW1wb3J0IGJhc2lzQ2xvc2VkIGZyb20gXCIuL2Jhc2lzQ2xvc2VkLmpzXCI7XG5pbXBvcnQgbm9nYW1tYSwge2dhbW1hfSBmcm9tIFwiLi9jb2xvci5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gcmdiR2FtbWEoeSkge1xuICB2YXIgY29sb3IgPSBnYW1tYSh5KTtcblxuICBmdW5jdGlvbiByZ2Ioc3RhcnQsIGVuZCkge1xuICAgIHZhciByID0gY29sb3IoKHN0YXJ0ID0gY29sb3JSZ2Ioc3RhcnQpKS5yLCAoZW5kID0gY29sb3JSZ2IoZW5kKSkuciksXG4gICAgICAgIGcgPSBjb2xvcihzdGFydC5nLCBlbmQuZyksXG4gICAgICAgIGIgPSBjb2xvcihzdGFydC5iLCBlbmQuYiksXG4gICAgICAgIG9wYWNpdHkgPSBub2dhbW1hKHN0YXJ0Lm9wYWNpdHksIGVuZC5vcGFjaXR5KTtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgc3RhcnQuciA9IHIodCk7XG4gICAgICBzdGFydC5nID0gZyh0KTtcbiAgICAgIHN0YXJ0LmIgPSBiKHQpO1xuICAgICAgc3RhcnQub3BhY2l0eSA9IG9wYWNpdHkodCk7XG4gICAgICByZXR1cm4gc3RhcnQgKyBcIlwiO1xuICAgIH07XG4gIH1cblxuICByZ2IuZ2FtbWEgPSByZ2JHYW1tYTtcblxuICByZXR1cm4gcmdiO1xufSkoMSk7XG5cbmZ1bmN0aW9uIHJnYlNwbGluZShzcGxpbmUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGNvbG9ycykge1xuICAgIHZhciBuID0gY29sb3JzLmxlbmd0aCxcbiAgICAgICAgciA9IG5ldyBBcnJheShuKSxcbiAgICAgICAgZyA9IG5ldyBBcnJheShuKSxcbiAgICAgICAgYiA9IG5ldyBBcnJheShuKSxcbiAgICAgICAgaSwgY29sb3I7XG4gICAgZm9yIChpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgY29sb3IgPSBjb2xvclJnYihjb2xvcnNbaV0pO1xuICAgICAgcltpXSA9IGNvbG9yLnIgfHwgMDtcbiAgICAgIGdbaV0gPSBjb2xvci5nIHx8IDA7XG4gICAgICBiW2ldID0gY29sb3IuYiB8fCAwO1xuICAgIH1cbiAgICByID0gc3BsaW5lKHIpO1xuICAgIGcgPSBzcGxpbmUoZyk7XG4gICAgYiA9IHNwbGluZShiKTtcbiAgICBjb2xvci5vcGFjaXR5ID0gMTtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgY29sb3IuciA9IHIodCk7XG4gICAgICBjb2xvci5nID0gZyh0KTtcbiAgICAgIGNvbG9yLmIgPSBiKHQpO1xuICAgICAgcmV0dXJuIGNvbG9yICsgXCJcIjtcbiAgICB9O1xuICB9O1xufVxuXG5leHBvcnQgdmFyIHJnYkJhc2lzID0gcmdiU3BsaW5lKGJhc2lzKTtcbmV4cG9ydCB2YXIgcmdiQmFzaXNDbG9zZWQgPSByZ2JTcGxpbmUoYmFzaXNDbG9zZWQpO1xuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgaWYgKCFiKSBiID0gW107XG4gIHZhciBuID0gYSA/IE1hdGgubWluKGIubGVuZ3RoLCBhLmxlbmd0aCkgOiAwLFxuICAgICAgYyA9IGIuc2xpY2UoKSxcbiAgICAgIGk7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgZm9yIChpID0gMDsgaSA8IG47ICsraSkgY1tpXSA9IGFbaV0gKiAoMSAtIHQpICsgYltpXSAqIHQ7XG4gICAgcmV0dXJuIGM7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc051bWJlckFycmF5KHgpIHtcbiAgcmV0dXJuIEFycmF5QnVmZmVyLmlzVmlldyh4KSAmJiAhKHggaW5zdGFuY2VvZiBEYXRhVmlldyk7XG59XG4iLCAiaW1wb3J0IHZhbHVlIGZyb20gXCIuL3ZhbHVlLmpzXCI7XG5pbXBvcnQgbnVtYmVyQXJyYXksIHtpc051bWJlckFycmF5fSBmcm9tIFwiLi9udW1iZXJBcnJheS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihhLCBiKSB7XG4gIHJldHVybiAoaXNOdW1iZXJBcnJheShiKSA/IG51bWJlckFycmF5IDogZ2VuZXJpY0FycmF5KShhLCBiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyaWNBcnJheShhLCBiKSB7XG4gIHZhciBuYiA9IGIgPyBiLmxlbmd0aCA6IDAsXG4gICAgICBuYSA9IGEgPyBNYXRoLm1pbihuYiwgYS5sZW5ndGgpIDogMCxcbiAgICAgIHggPSBuZXcgQXJyYXkobmEpLFxuICAgICAgYyA9IG5ldyBBcnJheShuYiksXG4gICAgICBpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBuYTsgKytpKSB4W2ldID0gdmFsdWUoYVtpXSwgYltpXSk7XG4gIGZvciAoOyBpIDwgbmI7ICsraSkgY1tpXSA9IGJbaV07XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbmE7ICsraSkgY1tpXSA9IHhbaV0odCk7XG4gICAgcmV0dXJuIGM7XG4gIH07XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgZCA9IG5ldyBEYXRlO1xuICByZXR1cm4gYSA9ICthLCBiID0gK2IsIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gZC5zZXRUaW1lKGEgKiAoMSAtIHQpICsgYiAqIHQpLCBkO1xuICB9O1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgcmV0dXJuIGEgPSArYSwgYiA9ICtiLCBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIGEgKiAoMSAtIHQpICsgYiAqIHQ7XG4gIH07XG59XG4iLCAiaW1wb3J0IHZhbHVlIGZyb20gXCIuL3ZhbHVlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgdmFyIGkgPSB7fSxcbiAgICAgIGMgPSB7fSxcbiAgICAgIGs7XG5cbiAgaWYgKGEgPT09IG51bGwgfHwgdHlwZW9mIGEgIT09IFwib2JqZWN0XCIpIGEgPSB7fTtcbiAgaWYgKGIgPT09IG51bGwgfHwgdHlwZW9mIGIgIT09IFwib2JqZWN0XCIpIGIgPSB7fTtcblxuICBmb3IgKGsgaW4gYikge1xuICAgIGlmIChrIGluIGEpIHtcbiAgICAgIGlba10gPSB2YWx1ZShhW2tdLCBiW2tdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY1trXSA9IGJba107XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICBmb3IgKGsgaW4gaSkgY1trXSA9IGlba10odCk7XG4gICAgcmV0dXJuIGM7XG4gIH07XG59XG4iLCAiaW1wb3J0IG51bWJlciBmcm9tIFwiLi9udW1iZXIuanNcIjtcblxudmFyIHJlQSA9IC9bLStdPyg/OlxcZCtcXC4/XFxkKnxcXC4/XFxkKykoPzpbZUVdWy0rXT9cXGQrKT8vZyxcbiAgICByZUIgPSBuZXcgUmVnRXhwKHJlQS5zb3VyY2UsIFwiZ1wiKTtcblxuZnVuY3Rpb24gemVybyhiKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gYjtcbiAgfTtcbn1cblxuZnVuY3Rpb24gb25lKGIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gYih0KSArIFwiXCI7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgdmFyIGJpID0gcmVBLmxhc3RJbmRleCA9IHJlQi5sYXN0SW5kZXggPSAwLCAvLyBzY2FuIGluZGV4IGZvciBuZXh0IG51bWJlciBpbiBiXG4gICAgICBhbSwgLy8gY3VycmVudCBtYXRjaCBpbiBhXG4gICAgICBibSwgLy8gY3VycmVudCBtYXRjaCBpbiBiXG4gICAgICBicywgLy8gc3RyaW5nIHByZWNlZGluZyBjdXJyZW50IG51bWJlciBpbiBiLCBpZiBhbnlcbiAgICAgIGkgPSAtMSwgLy8gaW5kZXggaW4gc1xuICAgICAgcyA9IFtdLCAvLyBzdHJpbmcgY29uc3RhbnRzIGFuZCBwbGFjZWhvbGRlcnNcbiAgICAgIHEgPSBbXTsgLy8gbnVtYmVyIGludGVycG9sYXRvcnNcblxuICAvLyBDb2VyY2UgaW5wdXRzIHRvIHN0cmluZ3MuXG4gIGEgPSBhICsgXCJcIiwgYiA9IGIgKyBcIlwiO1xuXG4gIC8vIEludGVycG9sYXRlIHBhaXJzIG9mIG51bWJlcnMgaW4gYSAmIGIuXG4gIHdoaWxlICgoYW0gPSByZUEuZXhlYyhhKSlcbiAgICAgICYmIChibSA9IHJlQi5leGVjKGIpKSkge1xuICAgIGlmICgoYnMgPSBibS5pbmRleCkgPiBiaSkgeyAvLyBhIHN0cmluZyBwcmVjZWRlcyB0aGUgbmV4dCBudW1iZXIgaW4gYlxuICAgICAgYnMgPSBiLnNsaWNlKGJpLCBicyk7XG4gICAgICBpZiAoc1tpXSkgc1tpXSArPSBiczsgLy8gY29hbGVzY2Ugd2l0aCBwcmV2aW91cyBzdHJpbmdcbiAgICAgIGVsc2Ugc1srK2ldID0gYnM7XG4gICAgfVxuICAgIGlmICgoYW0gPSBhbVswXSkgPT09IChibSA9IGJtWzBdKSkgeyAvLyBudW1iZXJzIGluIGEgJiBiIG1hdGNoXG4gICAgICBpZiAoc1tpXSkgc1tpXSArPSBibTsgLy8gY29hbGVzY2Ugd2l0aCBwcmV2aW91cyBzdHJpbmdcbiAgICAgIGVsc2Ugc1srK2ldID0gYm07XG4gICAgfSBlbHNlIHsgLy8gaW50ZXJwb2xhdGUgbm9uLW1hdGNoaW5nIG51bWJlcnNcbiAgICAgIHNbKytpXSA9IG51bGw7XG4gICAgICBxLnB1c2goe2k6IGksIHg6IG51bWJlcihhbSwgYm0pfSk7XG4gICAgfVxuICAgIGJpID0gcmVCLmxhc3RJbmRleDtcbiAgfVxuXG4gIC8vIEFkZCByZW1haW5zIG9mIGIuXG4gIGlmIChiaSA8IGIubGVuZ3RoKSB7XG4gICAgYnMgPSBiLnNsaWNlKGJpKTtcbiAgICBpZiAoc1tpXSkgc1tpXSArPSBiczsgLy8gY29hbGVzY2Ugd2l0aCBwcmV2aW91cyBzdHJpbmdcbiAgICBlbHNlIHNbKytpXSA9IGJzO1xuICB9XG5cbiAgLy8gU3BlY2lhbCBvcHRpbWl6YXRpb24gZm9yIG9ubHkgYSBzaW5nbGUgbWF0Y2guXG4gIC8vIE90aGVyd2lzZSwgaW50ZXJwb2xhdGUgZWFjaCBvZiB0aGUgbnVtYmVycyBhbmQgcmVqb2luIHRoZSBzdHJpbmcuXG4gIHJldHVybiBzLmxlbmd0aCA8IDIgPyAocVswXVxuICAgICAgPyBvbmUocVswXS54KVxuICAgICAgOiB6ZXJvKGIpKVxuICAgICAgOiAoYiA9IHEubGVuZ3RoLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG87IGkgPCBiOyArK2kpIHNbKG8gPSBxW2ldKS5pXSA9IG8ueCh0KTtcbiAgICAgICAgICByZXR1cm4gcy5qb2luKFwiXCIpO1xuICAgICAgICB9KTtcbn1cbiIsICJpbXBvcnQge2NvbG9yfSBmcm9tIFwiZDMtY29sb3JcIjtcbmltcG9ydCByZ2IgZnJvbSBcIi4vcmdiLmpzXCI7XG5pbXBvcnQge2dlbmVyaWNBcnJheX0gZnJvbSBcIi4vYXJyYXkuanNcIjtcbmltcG9ydCBkYXRlIGZyb20gXCIuL2RhdGUuanNcIjtcbmltcG9ydCBudW1iZXIgZnJvbSBcIi4vbnVtYmVyLmpzXCI7XG5pbXBvcnQgb2JqZWN0IGZyb20gXCIuL29iamVjdC5qc1wiO1xuaW1wb3J0IHN0cmluZyBmcm9tIFwiLi9zdHJpbmcuanNcIjtcbmltcG9ydCBjb25zdGFudCBmcm9tIFwiLi9jb25zdGFudC5qc1wiO1xuaW1wb3J0IG51bWJlckFycmF5LCB7aXNOdW1iZXJBcnJheX0gZnJvbSBcIi4vbnVtYmVyQXJyYXkuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgdCA9IHR5cGVvZiBiLCBjO1xuICByZXR1cm4gYiA9PSBudWxsIHx8IHQgPT09IFwiYm9vbGVhblwiID8gY29uc3RhbnQoYilcbiAgICAgIDogKHQgPT09IFwibnVtYmVyXCIgPyBudW1iZXJcbiAgICAgIDogdCA9PT0gXCJzdHJpbmdcIiA/ICgoYyA9IGNvbG9yKGIpKSA/IChiID0gYywgcmdiKSA6IHN0cmluZylcbiAgICAgIDogYiBpbnN0YW5jZW9mIGNvbG9yID8gcmdiXG4gICAgICA6IGIgaW5zdGFuY2VvZiBEYXRlID8gZGF0ZVxuICAgICAgOiBpc051bWJlckFycmF5KGIpID8gbnVtYmVyQXJyYXlcbiAgICAgIDogQXJyYXkuaXNBcnJheShiKSA/IGdlbmVyaWNBcnJheVxuICAgICAgOiB0eXBlb2YgYi52YWx1ZU9mICE9PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIGIudG9TdHJpbmcgIT09IFwiZnVuY3Rpb25cIiB8fCBpc05hTihiKSA/IG9iamVjdFxuICAgICAgOiBudW1iZXIpKGEsIGIpO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgcmV0dXJuIGEgPSArYSwgYiA9ICtiLCBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoYSAqICgxIC0gdCkgKyBiICogdCk7XG4gIH07XG59XG4iLCAidmFyIGRlZ3JlZXMgPSAxODAgLyBNYXRoLlBJO1xuXG5leHBvcnQgdmFyIGlkZW50aXR5ID0ge1xuICB0cmFuc2xhdGVYOiAwLFxuICB0cmFuc2xhdGVZOiAwLFxuICByb3RhdGU6IDAsXG4gIHNrZXdYOiAwLFxuICBzY2FsZVg6IDEsXG4gIHNjYWxlWTogMVxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYiwgYywgZCwgZSwgZikge1xuICB2YXIgc2NhbGVYLCBzY2FsZVksIHNrZXdYO1xuICBpZiAoc2NhbGVYID0gTWF0aC5zcXJ0KGEgKiBhICsgYiAqIGIpKSBhIC89IHNjYWxlWCwgYiAvPSBzY2FsZVg7XG4gIGlmIChza2V3WCA9IGEgKiBjICsgYiAqIGQpIGMgLT0gYSAqIHNrZXdYLCBkIC09IGIgKiBza2V3WDtcbiAgaWYgKHNjYWxlWSA9IE1hdGguc3FydChjICogYyArIGQgKiBkKSkgYyAvPSBzY2FsZVksIGQgLz0gc2NhbGVZLCBza2V3WCAvPSBzY2FsZVk7XG4gIGlmIChhICogZCA8IGIgKiBjKSBhID0gLWEsIGIgPSAtYiwgc2tld1ggPSAtc2tld1gsIHNjYWxlWCA9IC1zY2FsZVg7XG4gIHJldHVybiB7XG4gICAgdHJhbnNsYXRlWDogZSxcbiAgICB0cmFuc2xhdGVZOiBmLFxuICAgIHJvdGF0ZTogTWF0aC5hdGFuMihiLCBhKSAqIGRlZ3JlZXMsXG4gICAgc2tld1g6IE1hdGguYXRhbihza2V3WCkgKiBkZWdyZWVzLFxuICAgIHNjYWxlWDogc2NhbGVYLFxuICAgIHNjYWxlWTogc2NhbGVZXG4gIH07XG59XG4iLCAiaW1wb3J0IGRlY29tcG9zZSwge2lkZW50aXR5fSBmcm9tIFwiLi9kZWNvbXBvc2UuanNcIjtcblxudmFyIHN2Z05vZGU7XG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDc3ModmFsdWUpIHtcbiAgY29uc3QgbSA9IG5ldyAodHlwZW9mIERPTU1hdHJpeCA9PT0gXCJmdW5jdGlvblwiID8gRE9NTWF0cml4IDogV2ViS2l0Q1NTTWF0cml4KSh2YWx1ZSArIFwiXCIpO1xuICByZXR1cm4gbS5pc0lkZW50aXR5ID8gaWRlbnRpdHkgOiBkZWNvbXBvc2UobS5hLCBtLmIsIG0uYywgbS5kLCBtLmUsIG0uZik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVN2Zyh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIGlkZW50aXR5O1xuICBpZiAoIXN2Z05vZGUpIHN2Z05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcImdcIik7XG4gIHN2Z05vZGUuc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsIHZhbHVlKTtcbiAgaWYgKCEodmFsdWUgPSBzdmdOb2RlLnRyYW5zZm9ybS5iYXNlVmFsLmNvbnNvbGlkYXRlKCkpKSByZXR1cm4gaWRlbnRpdHk7XG4gIHZhbHVlID0gdmFsdWUubWF0cml4O1xuICByZXR1cm4gZGVjb21wb3NlKHZhbHVlLmEsIHZhbHVlLmIsIHZhbHVlLmMsIHZhbHVlLmQsIHZhbHVlLmUsIHZhbHVlLmYpO1xufVxuIiwgImltcG9ydCBudW1iZXIgZnJvbSBcIi4uL251bWJlci5qc1wiO1xuaW1wb3J0IHtwYXJzZUNzcywgcGFyc2VTdmd9IGZyb20gXCIuL3BhcnNlLmpzXCI7XG5cbmZ1bmN0aW9uIGludGVycG9sYXRlVHJhbnNmb3JtKHBhcnNlLCBweENvbW1hLCBweFBhcmVuLCBkZWdQYXJlbikge1xuXG4gIGZ1bmN0aW9uIHBvcChzKSB7XG4gICAgcmV0dXJuIHMubGVuZ3RoID8gcy5wb3AoKSArIFwiIFwiIDogXCJcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYW5zbGF0ZSh4YSwgeWEsIHhiLCB5YiwgcywgcSkge1xuICAgIGlmICh4YSAhPT0geGIgfHwgeWEgIT09IHliKSB7XG4gICAgICB2YXIgaSA9IHMucHVzaChcInRyYW5zbGF0ZShcIiwgbnVsbCwgcHhDb21tYSwgbnVsbCwgcHhQYXJlbik7XG4gICAgICBxLnB1c2goe2k6IGkgLSA0LCB4OiBudW1iZXIoeGEsIHhiKX0sIHtpOiBpIC0gMiwgeDogbnVtYmVyKHlhLCB5Yil9KTtcbiAgICB9IGVsc2UgaWYgKHhiIHx8IHliKSB7XG4gICAgICBzLnB1c2goXCJ0cmFuc2xhdGUoXCIgKyB4YiArIHB4Q29tbWEgKyB5YiArIHB4UGFyZW4pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJvdGF0ZShhLCBiLCBzLCBxKSB7XG4gICAgaWYgKGEgIT09IGIpIHtcbiAgICAgIGlmIChhIC0gYiA+IDE4MCkgYiArPSAzNjA7IGVsc2UgaWYgKGIgLSBhID4gMTgwKSBhICs9IDM2MDsgLy8gc2hvcnRlc3QgcGF0aFxuICAgICAgcS5wdXNoKHtpOiBzLnB1c2gocG9wKHMpICsgXCJyb3RhdGUoXCIsIG51bGwsIGRlZ1BhcmVuKSAtIDIsIHg6IG51bWJlcihhLCBiKX0pO1xuICAgIH0gZWxzZSBpZiAoYikge1xuICAgICAgcy5wdXNoKHBvcChzKSArIFwicm90YXRlKFwiICsgYiArIGRlZ1BhcmVuKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBza2V3WChhLCBiLCBzLCBxKSB7XG4gICAgaWYgKGEgIT09IGIpIHtcbiAgICAgIHEucHVzaCh7aTogcy5wdXNoKHBvcChzKSArIFwic2tld1goXCIsIG51bGwsIGRlZ1BhcmVuKSAtIDIsIHg6IG51bWJlcihhLCBiKX0pO1xuICAgIH0gZWxzZSBpZiAoYikge1xuICAgICAgcy5wdXNoKHBvcChzKSArIFwic2tld1goXCIgKyBiICsgZGVnUGFyZW4pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNjYWxlKHhhLCB5YSwgeGIsIHliLCBzLCBxKSB7XG4gICAgaWYgKHhhICE9PSB4YiB8fCB5YSAhPT0geWIpIHtcbiAgICAgIHZhciBpID0gcy5wdXNoKHBvcChzKSArIFwic2NhbGUoXCIsIG51bGwsIFwiLFwiLCBudWxsLCBcIilcIik7XG4gICAgICBxLnB1c2goe2k6IGkgLSA0LCB4OiBudW1iZXIoeGEsIHhiKX0sIHtpOiBpIC0gMiwgeDogbnVtYmVyKHlhLCB5Yil9KTtcbiAgICB9IGVsc2UgaWYgKHhiICE9PSAxIHx8IHliICE9PSAxKSB7XG4gICAgICBzLnB1c2gocG9wKHMpICsgXCJzY2FsZShcIiArIHhiICsgXCIsXCIgKyB5YiArIFwiKVwiKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24oYSwgYikge1xuICAgIHZhciBzID0gW10sIC8vIHN0cmluZyBjb25zdGFudHMgYW5kIHBsYWNlaG9sZGVyc1xuICAgICAgICBxID0gW107IC8vIG51bWJlciBpbnRlcnBvbGF0b3JzXG4gICAgYSA9IHBhcnNlKGEpLCBiID0gcGFyc2UoYik7XG4gICAgdHJhbnNsYXRlKGEudHJhbnNsYXRlWCwgYS50cmFuc2xhdGVZLCBiLnRyYW5zbGF0ZVgsIGIudHJhbnNsYXRlWSwgcywgcSk7XG4gICAgcm90YXRlKGEucm90YXRlLCBiLnJvdGF0ZSwgcywgcSk7XG4gICAgc2tld1goYS5za2V3WCwgYi5za2V3WCwgcywgcSk7XG4gICAgc2NhbGUoYS5zY2FsZVgsIGEuc2NhbGVZLCBiLnNjYWxlWCwgYi5zY2FsZVksIHMsIHEpO1xuICAgIGEgPSBiID0gbnVsbDsgLy8gZ2NcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgdmFyIGkgPSAtMSwgbiA9IHEubGVuZ3RoLCBvO1xuICAgICAgd2hpbGUgKCsraSA8IG4pIHNbKG8gPSBxW2ldKS5pXSA9IG8ueCh0KTtcbiAgICAgIHJldHVybiBzLmpvaW4oXCJcIik7XG4gICAgfTtcbiAgfTtcbn1cblxuZXhwb3J0IHZhciBpbnRlcnBvbGF0ZVRyYW5zZm9ybUNzcyA9IGludGVycG9sYXRlVHJhbnNmb3JtKHBhcnNlQ3NzLCBcInB4LCBcIiwgXCJweClcIiwgXCJkZWcpXCIpO1xuZXhwb3J0IHZhciBpbnRlcnBvbGF0ZVRyYW5zZm9ybVN2ZyA9IGludGVycG9sYXRlVHJhbnNmb3JtKHBhcnNlU3ZnLCBcIiwgXCIsIFwiKVwiLCBcIilcIik7XG4iLCAidmFyIGZyYW1lID0gMCwgLy8gaXMgYW4gYW5pbWF0aW9uIGZyYW1lIHBlbmRpbmc/XG4gICAgdGltZW91dCA9IDAsIC8vIGlzIGEgdGltZW91dCBwZW5kaW5nP1xuICAgIGludGVydmFsID0gMCwgLy8gYXJlIGFueSB0aW1lcnMgYWN0aXZlP1xuICAgIHBva2VEZWxheSA9IDEwMDAsIC8vIGhvdyBmcmVxdWVudGx5IHdlIGNoZWNrIGZvciBjbG9jayBza2V3XG4gICAgdGFza0hlYWQsXG4gICAgdGFza1RhaWwsXG4gICAgY2xvY2tMYXN0ID0gMCxcbiAgICBjbG9ja05vdyA9IDAsXG4gICAgY2xvY2tTa2V3ID0gMCxcbiAgICBjbG9jayA9IHR5cGVvZiBwZXJmb3JtYW5jZSA9PT0gXCJvYmplY3RcIiAmJiBwZXJmb3JtYW5jZS5ub3cgPyBwZXJmb3JtYW5jZSA6IERhdGUsXG4gICAgc2V0RnJhbWUgPSB0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiICYmIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPyB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lLmJpbmQod2luZG93KSA6IGZ1bmN0aW9uKGYpIHsgc2V0VGltZW91dChmLCAxNyk7IH07XG5cbmV4cG9ydCBmdW5jdGlvbiBub3coKSB7XG4gIHJldHVybiBjbG9ja05vdyB8fCAoc2V0RnJhbWUoY2xlYXJOb3cpLCBjbG9ja05vdyA9IGNsb2NrLm5vdygpICsgY2xvY2tTa2V3KTtcbn1cblxuZnVuY3Rpb24gY2xlYXJOb3coKSB7XG4gIGNsb2NrTm93ID0gMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFRpbWVyKCkge1xuICB0aGlzLl9jYWxsID1cbiAgdGhpcy5fdGltZSA9XG4gIHRoaXMuX25leHQgPSBudWxsO1xufVxuXG5UaW1lci5wcm90b3R5cGUgPSB0aW1lci5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBUaW1lcixcbiAgcmVzdGFydDogZnVuY3Rpb24oY2FsbGJhY2ssIGRlbGF5LCB0aW1lKSB7XG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2FsbGJhY2sgaXMgbm90IGEgZnVuY3Rpb25cIik7XG4gICAgdGltZSA9ICh0aW1lID09IG51bGwgPyBub3coKSA6ICt0aW1lKSArIChkZWxheSA9PSBudWxsID8gMCA6ICtkZWxheSk7XG4gICAgaWYgKCF0aGlzLl9uZXh0ICYmIHRhc2tUYWlsICE9PSB0aGlzKSB7XG4gICAgICBpZiAodGFza1RhaWwpIHRhc2tUYWlsLl9uZXh0ID0gdGhpcztcbiAgICAgIGVsc2UgdGFza0hlYWQgPSB0aGlzO1xuICAgICAgdGFza1RhaWwgPSB0aGlzO1xuICAgIH1cbiAgICB0aGlzLl9jYWxsID0gY2FsbGJhY2s7XG4gICAgdGhpcy5fdGltZSA9IHRpbWU7XG4gICAgc2xlZXAoKTtcbiAgfSxcbiAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX2NhbGwpIHtcbiAgICAgIHRoaXMuX2NhbGwgPSBudWxsO1xuICAgICAgdGhpcy5fdGltZSA9IEluZmluaXR5O1xuICAgICAgc2xlZXAoKTtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiB0aW1lcihjYWxsYmFjaywgZGVsYXksIHRpbWUpIHtcbiAgdmFyIHQgPSBuZXcgVGltZXI7XG4gIHQucmVzdGFydChjYWxsYmFjaywgZGVsYXksIHRpbWUpO1xuICByZXR1cm4gdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRpbWVyRmx1c2goKSB7XG4gIG5vdygpOyAvLyBHZXQgdGhlIGN1cnJlbnQgdGltZSwgaWYgbm90IGFscmVhZHkgc2V0LlxuICArK2ZyYW1lOyAvLyBQcmV0ZW5kIHdlXHUyMDE5dmUgc2V0IGFuIGFsYXJtLCBpZiB3ZSBoYXZlblx1MjAxOXQgYWxyZWFkeS5cbiAgdmFyIHQgPSB0YXNrSGVhZCwgZTtcbiAgd2hpbGUgKHQpIHtcbiAgICBpZiAoKGUgPSBjbG9ja05vdyAtIHQuX3RpbWUpID49IDApIHQuX2NhbGwuY2FsbCh1bmRlZmluZWQsIGUpO1xuICAgIHQgPSB0Ll9uZXh0O1xuICB9XG4gIC0tZnJhbWU7XG59XG5cbmZ1bmN0aW9uIHdha2UoKSB7XG4gIGNsb2NrTm93ID0gKGNsb2NrTGFzdCA9IGNsb2NrLm5vdygpKSArIGNsb2NrU2tldztcbiAgZnJhbWUgPSB0aW1lb3V0ID0gMDtcbiAgdHJ5IHtcbiAgICB0aW1lckZsdXNoKCk7XG4gIH0gZmluYWxseSB7XG4gICAgZnJhbWUgPSAwO1xuICAgIG5hcCgpO1xuICAgIGNsb2NrTm93ID0gMDtcbiAgfVxufVxuXG5mdW5jdGlvbiBwb2tlKCkge1xuICB2YXIgbm93ID0gY2xvY2subm93KCksIGRlbGF5ID0gbm93IC0gY2xvY2tMYXN0O1xuICBpZiAoZGVsYXkgPiBwb2tlRGVsYXkpIGNsb2NrU2tldyAtPSBkZWxheSwgY2xvY2tMYXN0ID0gbm93O1xufVxuXG5mdW5jdGlvbiBuYXAoKSB7XG4gIHZhciB0MCwgdDEgPSB0YXNrSGVhZCwgdDIsIHRpbWUgPSBJbmZpbml0eTtcbiAgd2hpbGUgKHQxKSB7XG4gICAgaWYgKHQxLl9jYWxsKSB7XG4gICAgICBpZiAodGltZSA+IHQxLl90aW1lKSB0aW1lID0gdDEuX3RpbWU7XG4gICAgICB0MCA9IHQxLCB0MSA9IHQxLl9uZXh0O1xuICAgIH0gZWxzZSB7XG4gICAgICB0MiA9IHQxLl9uZXh0LCB0MS5fbmV4dCA9IG51bGw7XG4gICAgICB0MSA9IHQwID8gdDAuX25leHQgPSB0MiA6IHRhc2tIZWFkID0gdDI7XG4gICAgfVxuICB9XG4gIHRhc2tUYWlsID0gdDA7XG4gIHNsZWVwKHRpbWUpO1xufVxuXG5mdW5jdGlvbiBzbGVlcCh0aW1lKSB7XG4gIGlmIChmcmFtZSkgcmV0dXJuOyAvLyBTb29uZXN0IGFsYXJtIGFscmVhZHkgc2V0LCBvciB3aWxsIGJlLlxuICBpZiAodGltZW91dCkgdGltZW91dCA9IGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgdmFyIGRlbGF5ID0gdGltZSAtIGNsb2NrTm93OyAvLyBTdHJpY3RseSBsZXNzIHRoYW4gaWYgd2UgcmVjb21wdXRlZCBjbG9ja05vdy5cbiAgaWYgKGRlbGF5ID4gMjQpIHtcbiAgICBpZiAodGltZSA8IEluZmluaXR5KSB0aW1lb3V0ID0gc2V0VGltZW91dCh3YWtlLCB0aW1lIC0gY2xvY2subm93KCkgLSBjbG9ja1NrZXcpO1xuICAgIGlmIChpbnRlcnZhbCkgaW50ZXJ2YWwgPSBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIWludGVydmFsKSBjbG9ja0xhc3QgPSBjbG9jay5ub3coKSwgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChwb2tlLCBwb2tlRGVsYXkpO1xuICAgIGZyYW1lID0gMSwgc2V0RnJhbWUod2FrZSk7XG4gIH1cbn1cbiIsICJpbXBvcnQge1RpbWVyfSBmcm9tIFwiLi90aW1lci5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihjYWxsYmFjaywgZGVsYXksIHRpbWUpIHtcbiAgdmFyIHQgPSBuZXcgVGltZXI7XG4gIGRlbGF5ID0gZGVsYXkgPT0gbnVsbCA/IDAgOiArZGVsYXk7XG4gIHQucmVzdGFydChlbGFwc2VkID0+IHtcbiAgICB0LnN0b3AoKTtcbiAgICBjYWxsYmFjayhlbGFwc2VkICsgZGVsYXkpO1xuICB9LCBkZWxheSwgdGltZSk7XG4gIHJldHVybiB0O1xufVxuIiwgImltcG9ydCB7ZGlzcGF0Y2h9IGZyb20gXCJkMy1kaXNwYXRjaFwiO1xuaW1wb3J0IHt0aW1lciwgdGltZW91dH0gZnJvbSBcImQzLXRpbWVyXCI7XG5cbnZhciBlbXB0eU9uID0gZGlzcGF0Y2goXCJzdGFydFwiLCBcImVuZFwiLCBcImNhbmNlbFwiLCBcImludGVycnVwdFwiKTtcbnZhciBlbXB0eVR3ZWVuID0gW107XG5cbmV4cG9ydCB2YXIgQ1JFQVRFRCA9IDA7XG5leHBvcnQgdmFyIFNDSEVEVUxFRCA9IDE7XG5leHBvcnQgdmFyIFNUQVJUSU5HID0gMjtcbmV4cG9ydCB2YXIgU1RBUlRFRCA9IDM7XG5leHBvcnQgdmFyIFJVTk5JTkcgPSA0O1xuZXhwb3J0IHZhciBFTkRJTkcgPSA1O1xuZXhwb3J0IHZhciBFTkRFRCA9IDY7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5vZGUsIG5hbWUsIGlkLCBpbmRleCwgZ3JvdXAsIHRpbWluZykge1xuICB2YXIgc2NoZWR1bGVzID0gbm9kZS5fX3RyYW5zaXRpb247XG4gIGlmICghc2NoZWR1bGVzKSBub2RlLl9fdHJhbnNpdGlvbiA9IHt9O1xuICBlbHNlIGlmIChpZCBpbiBzY2hlZHVsZXMpIHJldHVybjtcbiAgY3JlYXRlKG5vZGUsIGlkLCB7XG4gICAgbmFtZTogbmFtZSxcbiAgICBpbmRleDogaW5kZXgsIC8vIEZvciBjb250ZXh0IGR1cmluZyBjYWxsYmFjay5cbiAgICBncm91cDogZ3JvdXAsIC8vIEZvciBjb250ZXh0IGR1cmluZyBjYWxsYmFjay5cbiAgICBvbjogZW1wdHlPbixcbiAgICB0d2VlbjogZW1wdHlUd2VlbixcbiAgICB0aW1lOiB0aW1pbmcudGltZSxcbiAgICBkZWxheTogdGltaW5nLmRlbGF5LFxuICAgIGR1cmF0aW9uOiB0aW1pbmcuZHVyYXRpb24sXG4gICAgZWFzZTogdGltaW5nLmVhc2UsXG4gICAgdGltZXI6IG51bGwsXG4gICAgc3RhdGU6IENSRUFURURcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0KG5vZGUsIGlkKSB7XG4gIHZhciBzY2hlZHVsZSA9IGdldChub2RlLCBpZCk7XG4gIGlmIChzY2hlZHVsZS5zdGF0ZSA+IENSRUFURUQpIHRocm93IG5ldyBFcnJvcihcInRvbyBsYXRlOyBhbHJlYWR5IHNjaGVkdWxlZFwiKTtcbiAgcmV0dXJuIHNjaGVkdWxlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0KG5vZGUsIGlkKSB7XG4gIHZhciBzY2hlZHVsZSA9IGdldChub2RlLCBpZCk7XG4gIGlmIChzY2hlZHVsZS5zdGF0ZSA+IFNUQVJURUQpIHRocm93IG5ldyBFcnJvcihcInRvbyBsYXRlOyBhbHJlYWR5IHJ1bm5pbmdcIik7XG4gIHJldHVybiBzY2hlZHVsZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldChub2RlLCBpZCkge1xuICB2YXIgc2NoZWR1bGUgPSBub2RlLl9fdHJhbnNpdGlvbjtcbiAgaWYgKCFzY2hlZHVsZSB8fCAhKHNjaGVkdWxlID0gc2NoZWR1bGVbaWRdKSkgdGhyb3cgbmV3IEVycm9yKFwidHJhbnNpdGlvbiBub3QgZm91bmRcIik7XG4gIHJldHVybiBzY2hlZHVsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlKG5vZGUsIGlkLCBzZWxmKSB7XG4gIHZhciBzY2hlZHVsZXMgPSBub2RlLl9fdHJhbnNpdGlvbixcbiAgICAgIHR3ZWVuO1xuXG4gIC8vIEluaXRpYWxpemUgdGhlIHNlbGYgdGltZXIgd2hlbiB0aGUgdHJhbnNpdGlvbiBpcyBjcmVhdGVkLlxuICAvLyBOb3RlIHRoZSBhY3R1YWwgZGVsYXkgaXMgbm90IGtub3duIHVudGlsIHRoZSBmaXJzdCBjYWxsYmFjayFcbiAgc2NoZWR1bGVzW2lkXSA9IHNlbGY7XG4gIHNlbGYudGltZXIgPSB0aW1lcihzY2hlZHVsZSwgMCwgc2VsZi50aW1lKTtcblxuICBmdW5jdGlvbiBzY2hlZHVsZShlbGFwc2VkKSB7XG4gICAgc2VsZi5zdGF0ZSA9IFNDSEVEVUxFRDtcbiAgICBzZWxmLnRpbWVyLnJlc3RhcnQoc3RhcnQsIHNlbGYuZGVsYXksIHNlbGYudGltZSk7XG5cbiAgICAvLyBJZiB0aGUgZWxhcHNlZCBkZWxheSBpcyBsZXNzIHRoYW4gb3VyIGZpcnN0IHNsZWVwLCBzdGFydCBpbW1lZGlhdGVseS5cbiAgICBpZiAoc2VsZi5kZWxheSA8PSBlbGFwc2VkKSBzdGFydChlbGFwc2VkIC0gc2VsZi5kZWxheSk7XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydChlbGFwc2VkKSB7XG4gICAgdmFyIGksIGosIG4sIG87XG5cbiAgICAvLyBJZiB0aGUgc3RhdGUgaXMgbm90IFNDSEVEVUxFRCwgdGhlbiB3ZSBwcmV2aW91c2x5IGVycm9yZWQgb24gc3RhcnQuXG4gICAgaWYgKHNlbGYuc3RhdGUgIT09IFNDSEVEVUxFRCkgcmV0dXJuIHN0b3AoKTtcblxuICAgIGZvciAoaSBpbiBzY2hlZHVsZXMpIHtcbiAgICAgIG8gPSBzY2hlZHVsZXNbaV07XG4gICAgICBpZiAoby5uYW1lICE9PSBzZWxmLm5hbWUpIGNvbnRpbnVlO1xuXG4gICAgICAvLyBXaGlsZSB0aGlzIGVsZW1lbnQgYWxyZWFkeSBoYXMgYSBzdGFydGluZyB0cmFuc2l0aW9uIGR1cmluZyB0aGlzIGZyYW1lLFxuICAgICAgLy8gZGVmZXIgc3RhcnRpbmcgYW4gaW50ZXJydXB0aW5nIHRyYW5zaXRpb24gdW50aWwgdGhhdCB0cmFuc2l0aW9uIGhhcyBhXG4gICAgICAvLyBjaGFuY2UgdG8gdGljayAoYW5kIHBvc3NpYmx5IGVuZCk7IHNlZSBkMy9kMy10cmFuc2l0aW9uIzU0IVxuICAgICAgaWYgKG8uc3RhdGUgPT09IFNUQVJURUQpIHJldHVybiB0aW1lb3V0KHN0YXJ0KTtcblxuICAgICAgLy8gSW50ZXJydXB0IHRoZSBhY3RpdmUgdHJhbnNpdGlvbiwgaWYgYW55LlxuICAgICAgaWYgKG8uc3RhdGUgPT09IFJVTk5JTkcpIHtcbiAgICAgICAgby5zdGF0ZSA9IEVOREVEO1xuICAgICAgICBvLnRpbWVyLnN0b3AoKTtcbiAgICAgICAgby5vbi5jYWxsKFwiaW50ZXJydXB0XCIsIG5vZGUsIG5vZGUuX19kYXRhX18sIG8uaW5kZXgsIG8uZ3JvdXApO1xuICAgICAgICBkZWxldGUgc2NoZWR1bGVzW2ldO1xuICAgICAgfVxuXG4gICAgICAvLyBDYW5jZWwgYW55IHByZS1lbXB0ZWQgdHJhbnNpdGlvbnMuXG4gICAgICBlbHNlIGlmICgraSA8IGlkKSB7XG4gICAgICAgIG8uc3RhdGUgPSBFTkRFRDtcbiAgICAgICAgby50aW1lci5zdG9wKCk7XG4gICAgICAgIG8ub24uY2FsbChcImNhbmNlbFwiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBvLmluZGV4LCBvLmdyb3VwKTtcbiAgICAgICAgZGVsZXRlIHNjaGVkdWxlc1tpXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBEZWZlciB0aGUgZmlyc3QgdGljayB0byBlbmQgb2YgdGhlIGN1cnJlbnQgZnJhbWU7IHNlZSBkMy9kMyMxNTc2LlxuICAgIC8vIE5vdGUgdGhlIHRyYW5zaXRpb24gbWF5IGJlIGNhbmNlbGVkIGFmdGVyIHN0YXJ0IGFuZCBiZWZvcmUgdGhlIGZpcnN0IHRpY2shXG4gICAgLy8gTm90ZSB0aGlzIG11c3QgYmUgc2NoZWR1bGVkIGJlZm9yZSB0aGUgc3RhcnQgZXZlbnQ7IHNlZSBkMy9kMy10cmFuc2l0aW9uIzE2IVxuICAgIC8vIEFzc3VtaW5nIHRoaXMgaXMgc3VjY2Vzc2Z1bCwgc3Vic2VxdWVudCBjYWxsYmFja3MgZ28gc3RyYWlnaHQgdG8gdGljay5cbiAgICB0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHNlbGYuc3RhdGUgPT09IFNUQVJURUQpIHtcbiAgICAgICAgc2VsZi5zdGF0ZSA9IFJVTk5JTkc7XG4gICAgICAgIHNlbGYudGltZXIucmVzdGFydCh0aWNrLCBzZWxmLmRlbGF5LCBzZWxmLnRpbWUpO1xuICAgICAgICB0aWNrKGVsYXBzZWQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gRGlzcGF0Y2ggdGhlIHN0YXJ0IGV2ZW50LlxuICAgIC8vIE5vdGUgdGhpcyBtdXN0IGJlIGRvbmUgYmVmb3JlIHRoZSB0d2VlbiBhcmUgaW5pdGlhbGl6ZWQuXG4gICAgc2VsZi5zdGF0ZSA9IFNUQVJUSU5HO1xuICAgIHNlbGYub24uY2FsbChcInN0YXJ0XCIsIG5vZGUsIG5vZGUuX19kYXRhX18sIHNlbGYuaW5kZXgsIHNlbGYuZ3JvdXApO1xuICAgIGlmIChzZWxmLnN0YXRlICE9PSBTVEFSVElORykgcmV0dXJuOyAvLyBpbnRlcnJ1cHRlZFxuICAgIHNlbGYuc3RhdGUgPSBTVEFSVEVEO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgdHdlZW4sIGRlbGV0aW5nIG51bGwgdHdlZW4uXG4gICAgdHdlZW4gPSBuZXcgQXJyYXkobiA9IHNlbGYudHdlZW4ubGVuZ3RoKTtcbiAgICBmb3IgKGkgPSAwLCBqID0gLTE7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChvID0gc2VsZi50d2VlbltpXS52YWx1ZS5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIHNlbGYuaW5kZXgsIHNlbGYuZ3JvdXApKSB7XG4gICAgICAgIHR3ZWVuWysral0gPSBvO1xuICAgICAgfVxuICAgIH1cbiAgICB0d2Vlbi5sZW5ndGggPSBqICsgMTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRpY2soZWxhcHNlZCkge1xuICAgIHZhciB0ID0gZWxhcHNlZCA8IHNlbGYuZHVyYXRpb24gPyBzZWxmLmVhc2UuY2FsbChudWxsLCBlbGFwc2VkIC8gc2VsZi5kdXJhdGlvbikgOiAoc2VsZi50aW1lci5yZXN0YXJ0KHN0b3ApLCBzZWxmLnN0YXRlID0gRU5ESU5HLCAxKSxcbiAgICAgICAgaSA9IC0xLFxuICAgICAgICBuID0gdHdlZW4ubGVuZ3RoO1xuXG4gICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgIHR3ZWVuW2ldLmNhbGwobm9kZSwgdCk7XG4gICAgfVxuXG4gICAgLy8gRGlzcGF0Y2ggdGhlIGVuZCBldmVudC5cbiAgICBpZiAoc2VsZi5zdGF0ZSA9PT0gRU5ESU5HKSB7XG4gICAgICBzZWxmLm9uLmNhbGwoXCJlbmRcIiwgbm9kZSwgbm9kZS5fX2RhdGFfXywgc2VsZi5pbmRleCwgc2VsZi5ncm91cCk7XG4gICAgICBzdG9wKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBzZWxmLnN0YXRlID0gRU5ERUQ7XG4gICAgc2VsZi50aW1lci5zdG9wKCk7XG4gICAgZGVsZXRlIHNjaGVkdWxlc1tpZF07XG4gICAgZm9yICh2YXIgaSBpbiBzY2hlZHVsZXMpIHJldHVybjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIGRlbGV0ZSBub2RlLl9fdHJhbnNpdGlvbjtcbiAgfVxufVxuIiwgImltcG9ydCB7U1RBUlRJTkcsIEVORElORywgRU5ERUR9IGZyb20gXCIuL3RyYW5zaXRpb24vc2NoZWR1bGUuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obm9kZSwgbmFtZSkge1xuICB2YXIgc2NoZWR1bGVzID0gbm9kZS5fX3RyYW5zaXRpb24sXG4gICAgICBzY2hlZHVsZSxcbiAgICAgIGFjdGl2ZSxcbiAgICAgIGVtcHR5ID0gdHJ1ZSxcbiAgICAgIGk7XG5cbiAgaWYgKCFzY2hlZHVsZXMpIHJldHVybjtcblxuICBuYW1lID0gbmFtZSA9PSBudWxsID8gbnVsbCA6IG5hbWUgKyBcIlwiO1xuXG4gIGZvciAoaSBpbiBzY2hlZHVsZXMpIHtcbiAgICBpZiAoKHNjaGVkdWxlID0gc2NoZWR1bGVzW2ldKS5uYW1lICE9PSBuYW1lKSB7IGVtcHR5ID0gZmFsc2U7IGNvbnRpbnVlOyB9XG4gICAgYWN0aXZlID0gc2NoZWR1bGUuc3RhdGUgPiBTVEFSVElORyAmJiBzY2hlZHVsZS5zdGF0ZSA8IEVORElORztcbiAgICBzY2hlZHVsZS5zdGF0ZSA9IEVOREVEO1xuICAgIHNjaGVkdWxlLnRpbWVyLnN0b3AoKTtcbiAgICBzY2hlZHVsZS5vbi5jYWxsKGFjdGl2ZSA/IFwiaW50ZXJydXB0XCIgOiBcImNhbmNlbFwiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBzY2hlZHVsZS5pbmRleCwgc2NoZWR1bGUuZ3JvdXApO1xuICAgIGRlbGV0ZSBzY2hlZHVsZXNbaV07XG4gIH1cblxuICBpZiAoZW1wdHkpIGRlbGV0ZSBub2RlLl9fdHJhbnNpdGlvbjtcbn1cbiIsICJpbXBvcnQgaW50ZXJydXB0IGZyb20gXCIuLi9pbnRlcnJ1cHQuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSkge1xuICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgIGludGVycnVwdCh0aGlzLCBuYW1lKTtcbiAgfSk7XG59XG4iLCAiaW1wb3J0IHtnZXQsIHNldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZnVuY3Rpb24gdHdlZW5SZW1vdmUoaWQsIG5hbWUpIHtcbiAgdmFyIHR3ZWVuMCwgdHdlZW4xO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNjaGVkdWxlID0gc2V0KHRoaXMsIGlkKSxcbiAgICAgICAgdHdlZW4gPSBzY2hlZHVsZS50d2VlbjtcblxuICAgIC8vIElmIHRoaXMgbm9kZSBzaGFyZWQgdHdlZW4gd2l0aCB0aGUgcHJldmlvdXMgbm9kZSxcbiAgICAvLyBqdXN0IGFzc2lnbiB0aGUgdXBkYXRlZCBzaGFyZWQgdHdlZW4gYW5kIHdlXHUyMDE5cmUgZG9uZSFcbiAgICAvLyBPdGhlcndpc2UsIGNvcHktb24td3JpdGUuXG4gICAgaWYgKHR3ZWVuICE9PSB0d2VlbjApIHtcbiAgICAgIHR3ZWVuMSA9IHR3ZWVuMCA9IHR3ZWVuO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSB0d2VlbjEubGVuZ3RoOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIGlmICh0d2VlbjFbaV0ubmFtZSA9PT0gbmFtZSkge1xuICAgICAgICAgIHR3ZWVuMSA9IHR3ZWVuMS5zbGljZSgpO1xuICAgICAgICAgIHR3ZWVuMS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBzY2hlZHVsZS50d2VlbiA9IHR3ZWVuMTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdHdlZW5GdW5jdGlvbihpZCwgbmFtZSwgdmFsdWUpIHtcbiAgdmFyIHR3ZWVuMCwgdHdlZW4xO1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcjtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzY2hlZHVsZSA9IHNldCh0aGlzLCBpZCksXG4gICAgICAgIHR3ZWVuID0gc2NoZWR1bGUudHdlZW47XG5cbiAgICAvLyBJZiB0aGlzIG5vZGUgc2hhcmVkIHR3ZWVuIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsXG4gICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIHR3ZWVuIGFuZCB3ZVx1MjAxOXJlIGRvbmUhXG4gICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLlxuICAgIGlmICh0d2VlbiAhPT0gdHdlZW4wKSB7XG4gICAgICB0d2VlbjEgPSAodHdlZW4wID0gdHdlZW4pLnNsaWNlKCk7XG4gICAgICBmb3IgKHZhciB0ID0ge25hbWU6IG5hbWUsIHZhbHVlOiB2YWx1ZX0sIGkgPSAwLCBuID0gdHdlZW4xLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgICAgICBpZiAodHdlZW4xW2ldLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgICB0d2VlbjFbaV0gPSB0O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaSA9PT0gbikgdHdlZW4xLnB1c2godCk7XG4gICAgfVxuXG4gICAgc2NoZWR1bGUudHdlZW4gPSB0d2VlbjE7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHZhciBpZCA9IHRoaXMuX2lkO1xuXG4gIG5hbWUgKz0gXCJcIjtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICB2YXIgdHdlZW4gPSBnZXQodGhpcy5ub2RlKCksIGlkKS50d2VlbjtcbiAgICBmb3IgKHZhciBpID0gMCwgbiA9IHR3ZWVuLmxlbmd0aCwgdDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKCh0ID0gdHdlZW5baV0pLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHQudmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuZWFjaCgodmFsdWUgPT0gbnVsbCA/IHR3ZWVuUmVtb3ZlIDogdHdlZW5GdW5jdGlvbikoaWQsIG5hbWUsIHZhbHVlKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0d2VlblZhbHVlKHRyYW5zaXRpb24sIG5hbWUsIHZhbHVlKSB7XG4gIHZhciBpZCA9IHRyYW5zaXRpb24uX2lkO1xuXG4gIHRyYW5zaXRpb24uZWFjaChmdW5jdGlvbigpIHtcbiAgICB2YXIgc2NoZWR1bGUgPSBzZXQodGhpcywgaWQpO1xuICAgIChzY2hlZHVsZS52YWx1ZSB8fCAoc2NoZWR1bGUudmFsdWUgPSB7fSkpW25hbWVdID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICByZXR1cm4gZ2V0KG5vZGUsIGlkKS52YWx1ZVtuYW1lXTtcbiAgfTtcbn1cbiIsICJpbXBvcnQge2NvbG9yfSBmcm9tIFwiZDMtY29sb3JcIjtcbmltcG9ydCB7aW50ZXJwb2xhdGVOdW1iZXIsIGludGVycG9sYXRlUmdiLCBpbnRlcnBvbGF0ZVN0cmluZ30gZnJvbSBcImQzLWludGVycG9sYXRlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgdmFyIGM7XG4gIHJldHVybiAodHlwZW9mIGIgPT09IFwibnVtYmVyXCIgPyBpbnRlcnBvbGF0ZU51bWJlclxuICAgICAgOiBiIGluc3RhbmNlb2YgY29sb3IgPyBpbnRlcnBvbGF0ZVJnYlxuICAgICAgOiAoYyA9IGNvbG9yKGIpKSA/IChiID0gYywgaW50ZXJwb2xhdGVSZ2IpXG4gICAgICA6IGludGVycG9sYXRlU3RyaW5nKShhLCBiKTtcbn1cbiIsICJpbXBvcnQge2ludGVycG9sYXRlVHJhbnNmb3JtU3ZnIGFzIGludGVycG9sYXRlVHJhbnNmb3JtfSBmcm9tIFwiZDMtaW50ZXJwb2xhdGVcIjtcbmltcG9ydCB7bmFtZXNwYWNlfSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQge3R3ZWVuVmFsdWV9IGZyb20gXCIuL3R3ZWVuLmpzXCI7XG5pbXBvcnQgaW50ZXJwb2xhdGUgZnJvbSBcIi4vaW50ZXJwb2xhdGUuanNcIjtcblxuZnVuY3Rpb24gYXR0clJlbW92ZShuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0clJlbW92ZU5TKGZ1bGxuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJDb25zdGFudChuYW1lLCBpbnRlcnBvbGF0ZSwgdmFsdWUxKSB7XG4gIHZhciBzdHJpbmcwMCxcbiAgICAgIHN0cmluZzEgPSB2YWx1ZTEgKyBcIlwiLFxuICAgICAgaW50ZXJwb2xhdGUwO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0cmluZzAgPSB0aGlzLmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgICByZXR1cm4gc3RyaW5nMCA9PT0gc3RyaW5nMSA/IG51bGxcbiAgICAgICAgOiBzdHJpbmcwID09PSBzdHJpbmcwMCA/IGludGVycG9sYXRlMFxuICAgICAgICA6IGludGVycG9sYXRlMCA9IGludGVycG9sYXRlKHN0cmluZzAwID0gc3RyaW5nMCwgdmFsdWUxKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckNvbnN0YW50TlMoZnVsbG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZTEpIHtcbiAgdmFyIHN0cmluZzAwLFxuICAgICAgc3RyaW5nMSA9IHZhbHVlMSArIFwiXCIsXG4gICAgICBpbnRlcnBvbGF0ZTA7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RyaW5nMCA9IHRoaXMuZ2V0QXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgICByZXR1cm4gc3RyaW5nMCA9PT0gc3RyaW5nMSA/IG51bGxcbiAgICAgICAgOiBzdHJpbmcwID09PSBzdHJpbmcwMCA/IGludGVycG9sYXRlMFxuICAgICAgICA6IGludGVycG9sYXRlMCA9IGludGVycG9sYXRlKHN0cmluZzAwID0gc3RyaW5nMCwgdmFsdWUxKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckZ1bmN0aW9uKG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZSkge1xuICB2YXIgc3RyaW5nMDAsXG4gICAgICBzdHJpbmcxMCxcbiAgICAgIGludGVycG9sYXRlMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHJpbmcwLCB2YWx1ZTEgPSB2YWx1ZSh0aGlzKSwgc3RyaW5nMTtcbiAgICBpZiAodmFsdWUxID09IG51bGwpIHJldHVybiB2b2lkIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgIHN0cmluZzAgPSB0aGlzLmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgICBzdHJpbmcxID0gdmFsdWUxICsgXCJcIjtcbiAgICByZXR1cm4gc3RyaW5nMCA9PT0gc3RyaW5nMSA/IG51bGxcbiAgICAgICAgOiBzdHJpbmcwID09PSBzdHJpbmcwMCAmJiBzdHJpbmcxID09PSBzdHJpbmcxMCA/IGludGVycG9sYXRlMFxuICAgICAgICA6IChzdHJpbmcxMCA9IHN0cmluZzEsIGludGVycG9sYXRlMCA9IGludGVycG9sYXRlKHN0cmluZzAwID0gc3RyaW5nMCwgdmFsdWUxKSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJGdW5jdGlvbk5TKGZ1bGxuYW1lLCBpbnRlcnBvbGF0ZSwgdmFsdWUpIHtcbiAgdmFyIHN0cmluZzAwLFxuICAgICAgc3RyaW5nMTAsXG4gICAgICBpbnRlcnBvbGF0ZTA7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RyaW5nMCwgdmFsdWUxID0gdmFsdWUodGhpcyksIHN0cmluZzE7XG4gICAgaWYgKHZhbHVlMSA9PSBudWxsKSByZXR1cm4gdm9pZCB0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7XG4gICAgc3RyaW5nMCA9IHRoaXMuZ2V0QXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgICBzdHJpbmcxID0gdmFsdWUxICsgXCJcIjtcbiAgICByZXR1cm4gc3RyaW5nMCA9PT0gc3RyaW5nMSA/IG51bGxcbiAgICAgICAgOiBzdHJpbmcwID09PSBzdHJpbmcwMCAmJiBzdHJpbmcxID09PSBzdHJpbmcxMCA/IGludGVycG9sYXRlMFxuICAgICAgICA6IChzdHJpbmcxMCA9IHN0cmluZzEsIGludGVycG9sYXRlMCA9IGludGVycG9sYXRlKHN0cmluZzAwID0gc3RyaW5nMCwgdmFsdWUxKSk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHZhciBmdWxsbmFtZSA9IG5hbWVzcGFjZShuYW1lKSwgaSA9IGZ1bGxuYW1lID09PSBcInRyYW5zZm9ybVwiID8gaW50ZXJwb2xhdGVUcmFuc2Zvcm0gOiBpbnRlcnBvbGF0ZTtcbiAgcmV0dXJuIHRoaXMuYXR0clR3ZWVuKG5hbWUsIHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJGdW5jdGlvbk5TIDogYXR0ckZ1bmN0aW9uKShmdWxsbmFtZSwgaSwgdHdlZW5WYWx1ZSh0aGlzLCBcImF0dHIuXCIgKyBuYW1lLCB2YWx1ZSkpXG4gICAgICA6IHZhbHVlID09IG51bGwgPyAoZnVsbG5hbWUubG9jYWwgPyBhdHRyUmVtb3ZlTlMgOiBhdHRyUmVtb3ZlKShmdWxsbmFtZSlcbiAgICAgIDogKGZ1bGxuYW1lLmxvY2FsID8gYXR0ckNvbnN0YW50TlMgOiBhdHRyQ29uc3RhbnQpKGZ1bGxuYW1lLCBpLCB2YWx1ZSkpO1xufVxuIiwgImltcG9ydCB7bmFtZXNwYWNlfSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5cbmZ1bmN0aW9uIGF0dHJJbnRlcnBvbGF0ZShuYW1lLCBpKSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUobmFtZSwgaS5jYWxsKHRoaXMsIHQpKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckludGVycG9sYXRlTlMoZnVsbG5hbWUsIGkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCwgaS5jYWxsKHRoaXMsIHQpKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0clR3ZWVuTlMoZnVsbG5hbWUsIHZhbHVlKSB7XG4gIHZhciB0MCwgaTA7XG4gIGZ1bmN0aW9uIHR3ZWVuKCkge1xuICAgIHZhciBpID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoaSAhPT0gaTApIHQwID0gKGkwID0gaSkgJiYgYXR0ckludGVycG9sYXRlTlMoZnVsbG5hbWUsIGkpO1xuICAgIHJldHVybiB0MDtcbiAgfVxuICB0d2Vlbi5fdmFsdWUgPSB2YWx1ZTtcbiAgcmV0dXJuIHR3ZWVuO1xufVxuXG5mdW5jdGlvbiBhdHRyVHdlZW4obmFtZSwgdmFsdWUpIHtcbiAgdmFyIHQwLCBpMDtcbiAgZnVuY3Rpb24gdHdlZW4oKSB7XG4gICAgdmFyIGkgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChpICE9PSBpMCkgdDAgPSAoaTAgPSBpKSAmJiBhdHRySW50ZXJwb2xhdGUobmFtZSwgaSk7XG4gICAgcmV0dXJuIHQwO1xuICB9XG4gIHR3ZWVuLl92YWx1ZSA9IHZhbHVlO1xuICByZXR1cm4gdHdlZW47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHZhciBrZXkgPSBcImF0dHIuXCIgKyBuYW1lO1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHJldHVybiAoa2V5ID0gdGhpcy50d2VlbihrZXkpKSAmJiBrZXkuX3ZhbHVlO1xuICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIHRoaXMudHdlZW4oa2V5LCBudWxsKTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3I7XG4gIHZhciBmdWxsbmFtZSA9IG5hbWVzcGFjZShuYW1lKTtcbiAgcmV0dXJuIHRoaXMudHdlZW4oa2V5LCAoZnVsbG5hbWUubG9jYWwgPyBhdHRyVHdlZW5OUyA6IGF0dHJUd2VlbikoZnVsbG5hbWUsIHZhbHVlKSk7XG59XG4iLCAiaW1wb3J0IHtnZXQsIGluaXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmZ1bmN0aW9uIGRlbGF5RnVuY3Rpb24oaWQsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBpbml0KHRoaXMsIGlkKS5kZWxheSA9ICt2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBkZWxheUNvbnN0YW50KGlkLCB2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPSArdmFsdWUsIGZ1bmN0aW9uKCkge1xuICAgIGluaXQodGhpcywgaWQpLmRlbGF5ID0gdmFsdWU7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHZhciBpZCA9IHRoaXMuX2lkO1xuXG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IGRlbGF5RnVuY3Rpb25cbiAgICAgICAgICA6IGRlbGF5Q29uc3RhbnQpKGlkLCB2YWx1ZSkpXG4gICAgICA6IGdldCh0aGlzLm5vZGUoKSwgaWQpLmRlbGF5O1xufVxuIiwgImltcG9ydCB7Z2V0LCBzZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmZ1bmN0aW9uIGR1cmF0aW9uRnVuY3Rpb24oaWQsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBzZXQodGhpcywgaWQpLmR1cmF0aW9uID0gK3ZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGR1cmF0aW9uQ29uc3RhbnQoaWQsIHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9ICt2YWx1ZSwgZnVuY3Rpb24oKSB7XG4gICAgc2V0KHRoaXMsIGlkKS5kdXJhdGlvbiA9IHZhbHVlO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICB2YXIgaWQgPSB0aGlzLl9pZDtcblxuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLmVhY2goKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgPyBkdXJhdGlvbkZ1bmN0aW9uXG4gICAgICAgICAgOiBkdXJhdGlvbkNvbnN0YW50KShpZCwgdmFsdWUpKVxuICAgICAgOiBnZXQodGhpcy5ub2RlKCksIGlkKS5kdXJhdGlvbjtcbn1cbiIsICJpbXBvcnQge2dldCwgc2V0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5mdW5jdGlvbiBlYXNlQ29uc3RhbnQoaWQsIHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgc2V0KHRoaXMsIGlkKS5lYXNlID0gdmFsdWU7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHZhciBpZCA9IHRoaXMuX2lkO1xuXG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMuZWFjaChlYXNlQ29uc3RhbnQoaWQsIHZhbHVlKSlcbiAgICAgIDogZ2V0KHRoaXMubm9kZSgpLCBpZCkuZWFzZTtcbn1cbiIsICJpbXBvcnQge3NldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZnVuY3Rpb24gZWFzZVZhcnlpbmcoaWQsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHR5cGVvZiB2ICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcjtcbiAgICBzZXQodGhpcywgaWQpLmVhc2UgPSB2O1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcjtcbiAgcmV0dXJuIHRoaXMuZWFjaChlYXNlVmFyeWluZyh0aGlzLl9pZCwgdmFsdWUpKTtcbn1cbiIsICJpbXBvcnQge21hdGNoZXJ9IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcbmltcG9ydCB7VHJhbnNpdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obWF0Y2gpIHtcbiAgaWYgKHR5cGVvZiBtYXRjaCAhPT0gXCJmdW5jdGlvblwiKSBtYXRjaCA9IG1hdGNoZXIobWF0Y2gpO1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHN1Ymdyb3VwcyA9IG5ldyBBcnJheShtKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc3ViZ3JvdXAgPSBzdWJncm91cHNbal0gPSBbXSwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmICgobm9kZSA9IGdyb3VwW2ldKSAmJiBtYXRjaC5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKSkge1xuICAgICAgICBzdWJncm91cC5wdXNoKG5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgVHJhbnNpdGlvbihzdWJncm91cHMsIHRoaXMuX3BhcmVudHMsIHRoaXMuX25hbWUsIHRoaXMuX2lkKTtcbn1cbiIsICJpbXBvcnQge1RyYW5zaXRpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHRyYW5zaXRpb24pIHtcbiAgaWYgKHRyYW5zaXRpb24uX2lkICE9PSB0aGlzLl9pZCkgdGhyb3cgbmV3IEVycm9yO1xuXG4gIGZvciAodmFyIGdyb3VwczAgPSB0aGlzLl9ncm91cHMsIGdyb3VwczEgPSB0cmFuc2l0aW9uLl9ncm91cHMsIG0wID0gZ3JvdXBzMC5sZW5ndGgsIG0xID0gZ3JvdXBzMS5sZW5ndGgsIG0gPSBNYXRoLm1pbihtMCwgbTEpLCBtZXJnZXMgPSBuZXcgQXJyYXkobTApLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwMCA9IGdyb3VwczBbal0sIGdyb3VwMSA9IGdyb3VwczFbal0sIG4gPSBncm91cDAubGVuZ3RoLCBtZXJnZSA9IG1lcmdlc1tqXSA9IG5ldyBBcnJheShuKSwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXAwW2ldIHx8IGdyb3VwMVtpXSkge1xuICAgICAgICBtZXJnZVtpXSA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZm9yICg7IGogPCBtMDsgKytqKSB7XG4gICAgbWVyZ2VzW2pdID0gZ3JvdXBzMFtqXTtcbiAgfVxuXG4gIHJldHVybiBuZXcgVHJhbnNpdGlvbihtZXJnZXMsIHRoaXMuX3BhcmVudHMsIHRoaXMuX25hbWUsIHRoaXMuX2lkKTtcbn1cbiIsICJpbXBvcnQge2dldCwgc2V0LCBpbml0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5mdW5jdGlvbiBzdGFydChuYW1lKSB7XG4gIHJldHVybiAobmFtZSArIFwiXCIpLnRyaW0oKS5zcGxpdCgvXnxcXHMrLykuZXZlcnkoZnVuY3Rpb24odCkge1xuICAgIHZhciBpID0gdC5pbmRleE9mKFwiLlwiKTtcbiAgICBpZiAoaSA+PSAwKSB0ID0gdC5zbGljZSgwLCBpKTtcbiAgICByZXR1cm4gIXQgfHwgdCA9PT0gXCJzdGFydFwiO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gb25GdW5jdGlvbihpZCwgbmFtZSwgbGlzdGVuZXIpIHtcbiAgdmFyIG9uMCwgb24xLCBzaXQgPSBzdGFydChuYW1lKSA/IGluaXQgOiBzZXQ7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2NoZWR1bGUgPSBzaXQodGhpcywgaWQpLFxuICAgICAgICBvbiA9IHNjaGVkdWxlLm9uO1xuXG4gICAgLy8gSWYgdGhpcyBub2RlIHNoYXJlZCBhIGRpc3BhdGNoIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsXG4gICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIGRpc3BhdGNoIGFuZCB3ZVx1MjAxOXJlIGRvbmUhXG4gICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLlxuICAgIGlmIChvbiAhPT0gb24wKSAob24xID0gKG9uMCA9IG9uKS5jb3B5KCkpLm9uKG5hbWUsIGxpc3RlbmVyKTtcblxuICAgIHNjaGVkdWxlLm9uID0gb24xO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCBsaXN0ZW5lcikge1xuICB2YXIgaWQgPSB0aGlzLl9pZDtcblxuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA8IDJcbiAgICAgID8gZ2V0KHRoaXMubm9kZSgpLCBpZCkub24ub24obmFtZSlcbiAgICAgIDogdGhpcy5lYWNoKG9uRnVuY3Rpb24oaWQsIG5hbWUsIGxpc3RlbmVyKSk7XG59XG4iLCAiZnVuY3Rpb24gcmVtb3ZlRnVuY3Rpb24oaWQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudE5vZGU7XG4gICAgZm9yICh2YXIgaSBpbiB0aGlzLl9fdHJhbnNpdGlvbikgaWYgKCtpICE9PSBpZCkgcmV0dXJuO1xuICAgIGlmIChwYXJlbnQpIHBhcmVudC5yZW1vdmVDaGlsZCh0aGlzKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLm9uKFwiZW5kLnJlbW92ZVwiLCByZW1vdmVGdW5jdGlvbih0aGlzLl9pZCkpO1xufVxuIiwgImltcG9ydCB7c2VsZWN0b3J9IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcbmltcG9ydCB7VHJhbnNpdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCBzY2hlZHVsZSwge2dldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc2VsZWN0KSB7XG4gIHZhciBuYW1lID0gdGhpcy5fbmFtZSxcbiAgICAgIGlkID0gdGhpcy5faWQ7XG5cbiAgaWYgKHR5cGVvZiBzZWxlY3QgIT09IFwiZnVuY3Rpb25cIikgc2VsZWN0ID0gc2VsZWN0b3Ioc2VsZWN0KTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHN1Ymdyb3VwID0gc3ViZ3JvdXBzW2pdID0gbmV3IEFycmF5KG4pLCBub2RlLCBzdWJub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIChzdWJub2RlID0gc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSkge1xuICAgICAgICBpZiAoXCJfX2RhdGFfX1wiIGluIG5vZGUpIHN1Ym5vZGUuX19kYXRhX18gPSBub2RlLl9fZGF0YV9fO1xuICAgICAgICBzdWJncm91cFtpXSA9IHN1Ym5vZGU7XG4gICAgICAgIHNjaGVkdWxlKHN1Ymdyb3VwW2ldLCBuYW1lLCBpZCwgaSwgc3ViZ3JvdXAsIGdldChub2RlLCBpZCkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgVHJhbnNpdGlvbihzdWJncm91cHMsIHRoaXMuX3BhcmVudHMsIG5hbWUsIGlkKTtcbn1cbiIsICJpbXBvcnQge3NlbGVjdG9yQWxsfSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQge1RyYW5zaXRpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgc2NoZWR1bGUsIHtnZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdCkge1xuICB2YXIgbmFtZSA9IHRoaXMuX25hbWUsXG4gICAgICBpZCA9IHRoaXMuX2lkO1xuXG4gIGlmICh0eXBlb2Ygc2VsZWN0ICE9PSBcImZ1bmN0aW9uXCIpIHNlbGVjdCA9IHNlbGVjdG9yQWxsKHNlbGVjdCk7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gW10sIHBhcmVudHMgPSBbXSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgZm9yICh2YXIgY2hpbGRyZW4gPSBzZWxlY3QuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCksIGNoaWxkLCBpbmhlcml0ID0gZ2V0KG5vZGUsIGlkKSwgayA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGsgPCBsOyArK2spIHtcbiAgICAgICAgICBpZiAoY2hpbGQgPSBjaGlsZHJlbltrXSkge1xuICAgICAgICAgICAgc2NoZWR1bGUoY2hpbGQsIG5hbWUsIGlkLCBrLCBjaGlsZHJlbiwgaW5oZXJpdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN1Ymdyb3Vwcy5wdXNoKGNoaWxkcmVuKTtcbiAgICAgICAgcGFyZW50cy5wdXNoKG5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgVHJhbnNpdGlvbihzdWJncm91cHMsIHBhcmVudHMsIG5hbWUsIGlkKTtcbn1cbiIsICJpbXBvcnQge3NlbGVjdGlvbn0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuXG52YXIgU2VsZWN0aW9uID0gc2VsZWN0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvcjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHRoaXMuX2dyb3VwcywgdGhpcy5fcGFyZW50cyk7XG59XG4iLCAiaW1wb3J0IHtpbnRlcnBvbGF0ZVRyYW5zZm9ybUNzcyBhcyBpbnRlcnBvbGF0ZVRyYW5zZm9ybX0gZnJvbSBcImQzLWludGVycG9sYXRlXCI7XG5pbXBvcnQge3N0eWxlfSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQge3NldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcbmltcG9ydCB7dHdlZW5WYWx1ZX0gZnJvbSBcIi4vdHdlZW4uanNcIjtcbmltcG9ydCBpbnRlcnBvbGF0ZSBmcm9tIFwiLi9pbnRlcnBvbGF0ZS5qc1wiO1xuXG5mdW5jdGlvbiBzdHlsZU51bGwobmFtZSwgaW50ZXJwb2xhdGUpIHtcbiAgdmFyIHN0cmluZzAwLFxuICAgICAgc3RyaW5nMTAsXG4gICAgICBpbnRlcnBvbGF0ZTA7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RyaW5nMCA9IHN0eWxlKHRoaXMsIG5hbWUpLFxuICAgICAgICBzdHJpbmcxID0gKHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSksIHN0eWxlKHRoaXMsIG5hbWUpKTtcbiAgICByZXR1cm4gc3RyaW5nMCA9PT0gc3RyaW5nMSA/IG51bGxcbiAgICAgICAgOiBzdHJpbmcwID09PSBzdHJpbmcwMCAmJiBzdHJpbmcxID09PSBzdHJpbmcxMCA/IGludGVycG9sYXRlMFxuICAgICAgICA6IGludGVycG9sYXRlMCA9IGludGVycG9sYXRlKHN0cmluZzAwID0gc3RyaW5nMCwgc3RyaW5nMTAgPSBzdHJpbmcxKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVSZW1vdmUobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVDb25zdGFudChuYW1lLCBpbnRlcnBvbGF0ZSwgdmFsdWUxKSB7XG4gIHZhciBzdHJpbmcwMCxcbiAgICAgIHN0cmluZzEgPSB2YWx1ZTEgKyBcIlwiLFxuICAgICAgaW50ZXJwb2xhdGUwO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0cmluZzAgPSBzdHlsZSh0aGlzLCBuYW1lKTtcbiAgICByZXR1cm4gc3RyaW5nMCA9PT0gc3RyaW5nMSA/IG51bGxcbiAgICAgICAgOiBzdHJpbmcwID09PSBzdHJpbmcwMCA/IGludGVycG9sYXRlMFxuICAgICAgICA6IGludGVycG9sYXRlMCA9IGludGVycG9sYXRlKHN0cmluZzAwID0gc3RyaW5nMCwgdmFsdWUxKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVGdW5jdGlvbihuYW1lLCBpbnRlcnBvbGF0ZSwgdmFsdWUpIHtcbiAgdmFyIHN0cmluZzAwLFxuICAgICAgc3RyaW5nMTAsXG4gICAgICBpbnRlcnBvbGF0ZTA7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RyaW5nMCA9IHN0eWxlKHRoaXMsIG5hbWUpLFxuICAgICAgICB2YWx1ZTEgPSB2YWx1ZSh0aGlzKSxcbiAgICAgICAgc3RyaW5nMSA9IHZhbHVlMSArIFwiXCI7XG4gICAgaWYgKHZhbHVlMSA9PSBudWxsKSBzdHJpbmcxID0gdmFsdWUxID0gKHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSksIHN0eWxlKHRoaXMsIG5hbWUpKTtcbiAgICByZXR1cm4gc3RyaW5nMCA9PT0gc3RyaW5nMSA/IG51bGxcbiAgICAgICAgOiBzdHJpbmcwID09PSBzdHJpbmcwMCAmJiBzdHJpbmcxID09PSBzdHJpbmcxMCA/IGludGVycG9sYXRlMFxuICAgICAgICA6IChzdHJpbmcxMCA9IHN0cmluZzEsIGludGVycG9sYXRlMCA9IGludGVycG9sYXRlKHN0cmluZzAwID0gc3RyaW5nMCwgdmFsdWUxKSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0eWxlTWF5YmVSZW1vdmUoaWQsIG5hbWUpIHtcbiAgdmFyIG9uMCwgb24xLCBsaXN0ZW5lcjAsIGtleSA9IFwic3R5bGUuXCIgKyBuYW1lLCBldmVudCA9IFwiZW5kLlwiICsga2V5LCByZW1vdmU7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2NoZWR1bGUgPSBzZXQodGhpcywgaWQpLFxuICAgICAgICBvbiA9IHNjaGVkdWxlLm9uLFxuICAgICAgICBsaXN0ZW5lciA9IHNjaGVkdWxlLnZhbHVlW2tleV0gPT0gbnVsbCA/IHJlbW92ZSB8fCAocmVtb3ZlID0gc3R5bGVSZW1vdmUobmFtZSkpIDogdW5kZWZpbmVkO1xuXG4gICAgLy8gSWYgdGhpcyBub2RlIHNoYXJlZCBhIGRpc3BhdGNoIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsXG4gICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIGRpc3BhdGNoIGFuZCB3ZVx1MjAxOXJlIGRvbmUhXG4gICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLlxuICAgIGlmIChvbiAhPT0gb24wIHx8IGxpc3RlbmVyMCAhPT0gbGlzdGVuZXIpIChvbjEgPSAob24wID0gb24pLmNvcHkoKSkub24oZXZlbnQsIGxpc3RlbmVyMCA9IGxpc3RlbmVyKTtcblxuICAgIHNjaGVkdWxlLm9uID0gb24xO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgdmFyIGkgPSAobmFtZSArPSBcIlwiKSA9PT0gXCJ0cmFuc2Zvcm1cIiA/IGludGVycG9sYXRlVHJhbnNmb3JtIDogaW50ZXJwb2xhdGU7XG4gIHJldHVybiB2YWx1ZSA9PSBudWxsID8gdGhpc1xuICAgICAgLnN0eWxlVHdlZW4obmFtZSwgc3R5bGVOdWxsKG5hbWUsIGkpKVxuICAgICAgLm9uKFwiZW5kLnN0eWxlLlwiICsgbmFtZSwgc3R5bGVSZW1vdmUobmFtZSkpXG4gICAgOiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiA/IHRoaXNcbiAgICAgIC5zdHlsZVR3ZWVuKG5hbWUsIHN0eWxlRnVuY3Rpb24obmFtZSwgaSwgdHdlZW5WYWx1ZSh0aGlzLCBcInN0eWxlLlwiICsgbmFtZSwgdmFsdWUpKSlcbiAgICAgIC5lYWNoKHN0eWxlTWF5YmVSZW1vdmUodGhpcy5faWQsIG5hbWUpKVxuICAgIDogdGhpc1xuICAgICAgLnN0eWxlVHdlZW4obmFtZSwgc3R5bGVDb25zdGFudChuYW1lLCBpLCB2YWx1ZSksIHByaW9yaXR5KVxuICAgICAgLm9uKFwiZW5kLnN0eWxlLlwiICsgbmFtZSwgbnVsbCk7XG59XG4iLCAiZnVuY3Rpb24gc3R5bGVJbnRlcnBvbGF0ZShuYW1lLCBpLCBwcmlvcml0eSkge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHRoaXMuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgaS5jYWxsKHRoaXMsIHQpLCBwcmlvcml0eSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0eWxlVHdlZW4obmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7XG4gIHZhciB0LCBpMDtcbiAgZnVuY3Rpb24gdHdlZW4oKSB7XG4gICAgdmFyIGkgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChpICE9PSBpMCkgdCA9IChpMCA9IGkpICYmIHN0eWxlSW50ZXJwb2xhdGUobmFtZSwgaSwgcHJpb3JpdHkpO1xuICAgIHJldHVybiB0O1xuICB9XG4gIHR3ZWVuLl92YWx1ZSA9IHZhbHVlO1xuICByZXR1cm4gdHdlZW47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICB2YXIga2V5ID0gXCJzdHlsZS5cIiArIChuYW1lICs9IFwiXCIpO1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHJldHVybiAoa2V5ID0gdGhpcy50d2VlbihrZXkpKSAmJiBrZXkuX3ZhbHVlO1xuICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIHRoaXMudHdlZW4oa2V5LCBudWxsKTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3I7XG4gIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgc3R5bGVUd2VlbihuYW1lLCB2YWx1ZSwgcHJpb3JpdHkgPT0gbnVsbCA/IFwiXCIgOiBwcmlvcml0eSkpO1xufVxuIiwgImltcG9ydCB7dHdlZW5WYWx1ZX0gZnJvbSBcIi4vdHdlZW4uanNcIjtcblxuZnVuY3Rpb24gdGV4dENvbnN0YW50KHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnRleHRDb250ZW50ID0gdmFsdWU7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHRleHRGdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZhbHVlMSA9IHZhbHVlKHRoaXMpO1xuICAgIHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTEgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZTE7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiB0aGlzLnR3ZWVuKFwidGV4dFwiLCB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyB0ZXh0RnVuY3Rpb24odHdlZW5WYWx1ZSh0aGlzLCBcInRleHRcIiwgdmFsdWUpKVxuICAgICAgOiB0ZXh0Q29uc3RhbnQodmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZSArIFwiXCIpKTtcbn1cbiIsICJmdW5jdGlvbiB0ZXh0SW50ZXJwb2xhdGUoaSkge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHRoaXMudGV4dENvbnRlbnQgPSBpLmNhbGwodGhpcywgdCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHRleHRUd2Vlbih2YWx1ZSkge1xuICB2YXIgdDAsIGkwO1xuICBmdW5jdGlvbiB0d2VlbigpIHtcbiAgICB2YXIgaSA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKGkgIT09IGkwKSB0MCA9IChpMCA9IGkpICYmIHRleHRJbnRlcnBvbGF0ZShpKTtcbiAgICByZXR1cm4gdDA7XG4gIH1cbiAgdHdlZW4uX3ZhbHVlID0gdmFsdWU7XG4gIHJldHVybiB0d2Vlbjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgdmFyIGtleSA9IFwidGV4dFwiO1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEpIHJldHVybiAoa2V5ID0gdGhpcy50d2VlbihrZXkpKSAmJiBrZXkuX3ZhbHVlO1xuICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIHRoaXMudHdlZW4oa2V5LCBudWxsKTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3I7XG4gIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgdGV4dFR3ZWVuKHZhbHVlKSk7XG59XG4iLCAiaW1wb3J0IHtUcmFuc2l0aW9uLCBuZXdJZH0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCBzY2hlZHVsZSwge2dldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHZhciBuYW1lID0gdGhpcy5fbmFtZSxcbiAgICAgIGlkMCA9IHRoaXMuX2lkLFxuICAgICAgaWQxID0gbmV3SWQoKTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICB2YXIgaW5oZXJpdCA9IGdldChub2RlLCBpZDApO1xuICAgICAgICBzY2hlZHVsZShub2RlLCBuYW1lLCBpZDEsIGksIGdyb3VwLCB7XG4gICAgICAgICAgdGltZTogaW5oZXJpdC50aW1lICsgaW5oZXJpdC5kZWxheSArIGluaGVyaXQuZHVyYXRpb24sXG4gICAgICAgICAgZGVsYXk6IDAsXG4gICAgICAgICAgZHVyYXRpb246IGluaGVyaXQuZHVyYXRpb24sXG4gICAgICAgICAgZWFzZTogaW5oZXJpdC5lYXNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgVHJhbnNpdGlvbihncm91cHMsIHRoaXMuX3BhcmVudHMsIG5hbWUsIGlkMSk7XG59XG4iLCAiaW1wb3J0IHtzZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICB2YXIgb24wLCBvbjEsIHRoYXQgPSB0aGlzLCBpZCA9IHRoYXQuX2lkLCBzaXplID0gdGhhdC5zaXplKCk7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgY2FuY2VsID0ge3ZhbHVlOiByZWplY3R9LFxuICAgICAgICBlbmQgPSB7dmFsdWU6IGZ1bmN0aW9uKCkgeyBpZiAoLS1zaXplID09PSAwKSByZXNvbHZlKCk7IH19O1xuXG4gICAgdGhhdC5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNjaGVkdWxlID0gc2V0KHRoaXMsIGlkKSxcbiAgICAgICAgICBvbiA9IHNjaGVkdWxlLm9uO1xuXG4gICAgICAvLyBJZiB0aGlzIG5vZGUgc2hhcmVkIGEgZGlzcGF0Y2ggd2l0aCB0aGUgcHJldmlvdXMgbm9kZSxcbiAgICAgIC8vIGp1c3QgYXNzaWduIHRoZSB1cGRhdGVkIHNoYXJlZCBkaXNwYXRjaCBhbmQgd2VcdTIwMTlyZSBkb25lIVxuICAgICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLlxuICAgICAgaWYgKG9uICE9PSBvbjApIHtcbiAgICAgICAgb24xID0gKG9uMCA9IG9uKS5jb3B5KCk7XG4gICAgICAgIG9uMS5fLmNhbmNlbC5wdXNoKGNhbmNlbCk7XG4gICAgICAgIG9uMS5fLmludGVycnVwdC5wdXNoKGNhbmNlbCk7XG4gICAgICAgIG9uMS5fLmVuZC5wdXNoKGVuZCk7XG4gICAgICB9XG5cbiAgICAgIHNjaGVkdWxlLm9uID0gb24xO1xuICAgIH0pO1xuXG4gICAgLy8gVGhlIHNlbGVjdGlvbiB3YXMgZW1wdHksIHJlc29sdmUgZW5kIGltbWVkaWF0ZWx5XG4gICAgaWYgKHNpemUgPT09IDApIHJlc29sdmUoKTtcbiAgfSk7XG59XG4iLCAiaW1wb3J0IHtzZWxlY3Rpb259IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcbmltcG9ydCB0cmFuc2l0aW9uX2F0dHIgZnJvbSBcIi4vYXR0ci5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fYXR0clR3ZWVuIGZyb20gXCIuL2F0dHJUd2Vlbi5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fZGVsYXkgZnJvbSBcIi4vZGVsYXkuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX2R1cmF0aW9uIGZyb20gXCIuL2R1cmF0aW9uLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9lYXNlIGZyb20gXCIuL2Vhc2UuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX2Vhc2VWYXJ5aW5nIGZyb20gXCIuL2Vhc2VWYXJ5aW5nLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9maWx0ZXIgZnJvbSBcIi4vZmlsdGVyLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9tZXJnZSBmcm9tIFwiLi9tZXJnZS5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fb24gZnJvbSBcIi4vb24uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3JlbW92ZSBmcm9tIFwiLi9yZW1vdmUuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3NlbGVjdCBmcm9tIFwiLi9zZWxlY3QuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3NlbGVjdEFsbCBmcm9tIFwiLi9zZWxlY3RBbGwuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3NlbGVjdGlvbiBmcm9tIFwiLi9zZWxlY3Rpb24uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3N0eWxlIGZyb20gXCIuL3N0eWxlLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9zdHlsZVR3ZWVuIGZyb20gXCIuL3N0eWxlVHdlZW4uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3RleHQgZnJvbSBcIi4vdGV4dC5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fdGV4dFR3ZWVuIGZyb20gXCIuL3RleHRUd2Vlbi5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fdHJhbnNpdGlvbiBmcm9tIFwiLi90cmFuc2l0aW9uLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl90d2VlbiBmcm9tIFwiLi90d2Vlbi5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fZW5kIGZyb20gXCIuL2VuZC5qc1wiO1xuXG52YXIgaWQgPSAwO1xuXG5leHBvcnQgZnVuY3Rpb24gVHJhbnNpdGlvbihncm91cHMsIHBhcmVudHMsIG5hbWUsIGlkKSB7XG4gIHRoaXMuX2dyb3VwcyA9IGdyb3VwcztcbiAgdGhpcy5fcGFyZW50cyA9IHBhcmVudHM7XG4gIHRoaXMuX25hbWUgPSBuYW1lO1xuICB0aGlzLl9pZCA9IGlkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0cmFuc2l0aW9uKG5hbWUpIHtcbiAgcmV0dXJuIHNlbGVjdGlvbigpLnRyYW5zaXRpb24obmFtZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBuZXdJZCgpIHtcbiAgcmV0dXJuICsraWQ7XG59XG5cbnZhciBzZWxlY3Rpb25fcHJvdG90eXBlID0gc2VsZWN0aW9uLnByb3RvdHlwZTtcblxuVHJhbnNpdGlvbi5wcm90b3R5cGUgPSB0cmFuc2l0aW9uLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IFRyYW5zaXRpb24sXG4gIHNlbGVjdDogdHJhbnNpdGlvbl9zZWxlY3QsXG4gIHNlbGVjdEFsbDogdHJhbnNpdGlvbl9zZWxlY3RBbGwsXG4gIHNlbGVjdENoaWxkOiBzZWxlY3Rpb25fcHJvdG90eXBlLnNlbGVjdENoaWxkLFxuICBzZWxlY3RDaGlsZHJlbjogc2VsZWN0aW9uX3Byb3RvdHlwZS5zZWxlY3RDaGlsZHJlbixcbiAgZmlsdGVyOiB0cmFuc2l0aW9uX2ZpbHRlcixcbiAgbWVyZ2U6IHRyYW5zaXRpb25fbWVyZ2UsXG4gIHNlbGVjdGlvbjogdHJhbnNpdGlvbl9zZWxlY3Rpb24sXG4gIHRyYW5zaXRpb246IHRyYW5zaXRpb25fdHJhbnNpdGlvbixcbiAgY2FsbDogc2VsZWN0aW9uX3Byb3RvdHlwZS5jYWxsLFxuICBub2Rlczogc2VsZWN0aW9uX3Byb3RvdHlwZS5ub2RlcyxcbiAgbm9kZTogc2VsZWN0aW9uX3Byb3RvdHlwZS5ub2RlLFxuICBzaXplOiBzZWxlY3Rpb25fcHJvdG90eXBlLnNpemUsXG4gIGVtcHR5OiBzZWxlY3Rpb25fcHJvdG90eXBlLmVtcHR5LFxuICBlYWNoOiBzZWxlY3Rpb25fcHJvdG90eXBlLmVhY2gsXG4gIG9uOiB0cmFuc2l0aW9uX29uLFxuICBhdHRyOiB0cmFuc2l0aW9uX2F0dHIsXG4gIGF0dHJUd2VlbjogdHJhbnNpdGlvbl9hdHRyVHdlZW4sXG4gIHN0eWxlOiB0cmFuc2l0aW9uX3N0eWxlLFxuICBzdHlsZVR3ZWVuOiB0cmFuc2l0aW9uX3N0eWxlVHdlZW4sXG4gIHRleHQ6IHRyYW5zaXRpb25fdGV4dCxcbiAgdGV4dFR3ZWVuOiB0cmFuc2l0aW9uX3RleHRUd2VlbixcbiAgcmVtb3ZlOiB0cmFuc2l0aW9uX3JlbW92ZSxcbiAgdHdlZW46IHRyYW5zaXRpb25fdHdlZW4sXG4gIGRlbGF5OiB0cmFuc2l0aW9uX2RlbGF5LFxuICBkdXJhdGlvbjogdHJhbnNpdGlvbl9kdXJhdGlvbixcbiAgZWFzZTogdHJhbnNpdGlvbl9lYXNlLFxuICBlYXNlVmFyeWluZzogdHJhbnNpdGlvbl9lYXNlVmFyeWluZyxcbiAgZW5kOiB0cmFuc2l0aW9uX2VuZCxcbiAgW1N5bWJvbC5pdGVyYXRvcl06IHNlbGVjdGlvbl9wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXVxufTtcbiIsICJleHBvcnQgZnVuY3Rpb24gY3ViaWNJbih0KSB7XG4gIHJldHVybiB0ICogdCAqIHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjdWJpY091dCh0KSB7XG4gIHJldHVybiAtLXQgKiB0ICogdCArIDE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjdWJpY0luT3V0KHQpIHtcbiAgcmV0dXJuICgodCAqPSAyKSA8PSAxID8gdCAqIHQgKiB0IDogKHQgLT0gMikgKiB0ICogdCArIDIpIC8gMjtcbn1cbiIsICJpbXBvcnQge1RyYW5zaXRpb24sIG5ld0lkfSBmcm9tIFwiLi4vdHJhbnNpdGlvbi9pbmRleC5qc1wiO1xuaW1wb3J0IHNjaGVkdWxlIGZyb20gXCIuLi90cmFuc2l0aW9uL3NjaGVkdWxlLmpzXCI7XG5pbXBvcnQge2Vhc2VDdWJpY0luT3V0fSBmcm9tIFwiZDMtZWFzZVwiO1xuaW1wb3J0IHtub3d9IGZyb20gXCJkMy10aW1lclwiO1xuXG52YXIgZGVmYXVsdFRpbWluZyA9IHtcbiAgdGltZTogbnVsbCwgLy8gU2V0IG9uIHVzZS5cbiAgZGVsYXk6IDAsXG4gIGR1cmF0aW9uOiAyNTAsXG4gIGVhc2U6IGVhc2VDdWJpY0luT3V0XG59O1xuXG5mdW5jdGlvbiBpbmhlcml0KG5vZGUsIGlkKSB7XG4gIHZhciB0aW1pbmc7XG4gIHdoaWxlICghKHRpbWluZyA9IG5vZGUuX190cmFuc2l0aW9uKSB8fCAhKHRpbWluZyA9IHRpbWluZ1tpZF0pKSB7XG4gICAgaWYgKCEobm9kZSA9IG5vZGUucGFyZW50Tm9kZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdHJhbnNpdGlvbiAke2lkfSBub3QgZm91bmRgKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRpbWluZztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSkge1xuICB2YXIgaWQsXG4gICAgICB0aW1pbmc7XG5cbiAgaWYgKG5hbWUgaW5zdGFuY2VvZiBUcmFuc2l0aW9uKSB7XG4gICAgaWQgPSBuYW1lLl9pZCwgbmFtZSA9IG5hbWUuX25hbWU7XG4gIH0gZWxzZSB7XG4gICAgaWQgPSBuZXdJZCgpLCAodGltaW5nID0gZGVmYXVsdFRpbWluZykudGltZSA9IG5vdygpLCBuYW1lID0gbmFtZSA9PSBudWxsID8gbnVsbCA6IG5hbWUgKyBcIlwiO1xuICB9XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgc2NoZWR1bGUobm9kZSwgbmFtZSwgaWQsIGksIGdyb3VwLCB0aW1pbmcgfHwgaW5oZXJpdChub2RlLCBpZCkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgVHJhbnNpdGlvbihncm91cHMsIHRoaXMuX3BhcmVudHMsIG5hbWUsIGlkKTtcbn1cbiIsICJpbXBvcnQge3NlbGVjdGlvbn0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuaW1wb3J0IHNlbGVjdGlvbl9pbnRlcnJ1cHQgZnJvbSBcIi4vaW50ZXJydXB0LmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3RyYW5zaXRpb24gZnJvbSBcIi4vdHJhbnNpdGlvbi5qc1wiO1xuXG5zZWxlY3Rpb24ucHJvdG90eXBlLmludGVycnVwdCA9IHNlbGVjdGlvbl9pbnRlcnJ1cHQ7XG5zZWxlY3Rpb24ucHJvdG90eXBlLnRyYW5zaXRpb24gPSBzZWxlY3Rpb25fdHJhbnNpdGlvbjtcbiIsICJpbXBvcnQge2Rpc3BhdGNofSBmcm9tIFwiZDMtZGlzcGF0Y2hcIjtcbmltcG9ydCB7ZHJhZ0Rpc2FibGUsIGRyYWdFbmFibGV9IGZyb20gXCJkMy1kcmFnXCI7XG5pbXBvcnQge2ludGVycG9sYXRlfSBmcm9tIFwiZDMtaW50ZXJwb2xhdGVcIjtcbmltcG9ydCB7cG9pbnRlciwgc2VsZWN0fSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQge2ludGVycnVwdH0gZnJvbSBcImQzLXRyYW5zaXRpb25cIjtcbmltcG9ydCBjb25zdGFudCBmcm9tIFwiLi9jb25zdGFudC5qc1wiO1xuaW1wb3J0IEJydXNoRXZlbnQgZnJvbSBcIi4vZXZlbnQuanNcIjtcbmltcG9ydCBub2V2ZW50LCB7bm9wcm9wYWdhdGlvbn0gZnJvbSBcIi4vbm9ldmVudC5qc1wiO1xuXG52YXIgTU9ERV9EUkFHID0ge25hbWU6IFwiZHJhZ1wifSxcbiAgICBNT0RFX1NQQUNFID0ge25hbWU6IFwic3BhY2VcIn0sXG4gICAgTU9ERV9IQU5ETEUgPSB7bmFtZTogXCJoYW5kbGVcIn0sXG4gICAgTU9ERV9DRU5URVIgPSB7bmFtZTogXCJjZW50ZXJcIn07XG5cbmNvbnN0IHthYnMsIG1heCwgbWlufSA9IE1hdGg7XG5cbmZ1bmN0aW9uIG51bWJlcjEoZSkge1xuICByZXR1cm4gWytlWzBdLCArZVsxXV07XG59XG5cbmZ1bmN0aW9uIG51bWJlcjIoZSkge1xuICByZXR1cm4gW251bWJlcjEoZVswXSksIG51bWJlcjEoZVsxXSldO1xufVxuXG52YXIgWCA9IHtcbiAgbmFtZTogXCJ4XCIsXG4gIGhhbmRsZXM6IFtcIndcIiwgXCJlXCJdLm1hcCh0eXBlKSxcbiAgaW5wdXQ6IGZ1bmN0aW9uKHgsIGUpIHsgcmV0dXJuIHggPT0gbnVsbCA/IG51bGwgOiBbWyt4WzBdLCBlWzBdWzFdXSwgWyt4WzFdLCBlWzFdWzFdXV07IH0sXG4gIG91dHB1dDogZnVuY3Rpb24oeHkpIHsgcmV0dXJuIHh5ICYmIFt4eVswXVswXSwgeHlbMV1bMF1dOyB9XG59O1xuXG52YXIgWSA9IHtcbiAgbmFtZTogXCJ5XCIsXG4gIGhhbmRsZXM6IFtcIm5cIiwgXCJzXCJdLm1hcCh0eXBlKSxcbiAgaW5wdXQ6IGZ1bmN0aW9uKHksIGUpIHsgcmV0dXJuIHkgPT0gbnVsbCA/IG51bGwgOiBbW2VbMF1bMF0sICt5WzBdXSwgW2VbMV1bMF0sICt5WzFdXV07IH0sXG4gIG91dHB1dDogZnVuY3Rpb24oeHkpIHsgcmV0dXJuIHh5ICYmIFt4eVswXVsxXSwgeHlbMV1bMV1dOyB9XG59O1xuXG52YXIgWFkgPSB7XG4gIG5hbWU6IFwieHlcIixcbiAgaGFuZGxlczogW1wiblwiLCBcIndcIiwgXCJlXCIsIFwic1wiLCBcIm53XCIsIFwibmVcIiwgXCJzd1wiLCBcInNlXCJdLm1hcCh0eXBlKSxcbiAgaW5wdXQ6IGZ1bmN0aW9uKHh5KSB7IHJldHVybiB4eSA9PSBudWxsID8gbnVsbCA6IG51bWJlcjIoeHkpOyB9LFxuICBvdXRwdXQ6IGZ1bmN0aW9uKHh5KSB7IHJldHVybiB4eTsgfVxufTtcblxudmFyIGN1cnNvcnMgPSB7XG4gIG92ZXJsYXk6IFwiY3Jvc3NoYWlyXCIsXG4gIHNlbGVjdGlvbjogXCJtb3ZlXCIsXG4gIG46IFwibnMtcmVzaXplXCIsXG4gIGU6IFwiZXctcmVzaXplXCIsXG4gIHM6IFwibnMtcmVzaXplXCIsXG4gIHc6IFwiZXctcmVzaXplXCIsXG4gIG53OiBcIm53c2UtcmVzaXplXCIsXG4gIG5lOiBcIm5lc3ctcmVzaXplXCIsXG4gIHNlOiBcIm53c2UtcmVzaXplXCIsXG4gIHN3OiBcIm5lc3ctcmVzaXplXCJcbn07XG5cbnZhciBmbGlwWCA9IHtcbiAgZTogXCJ3XCIsXG4gIHc6IFwiZVwiLFxuICBudzogXCJuZVwiLFxuICBuZTogXCJud1wiLFxuICBzZTogXCJzd1wiLFxuICBzdzogXCJzZVwiXG59O1xuXG52YXIgZmxpcFkgPSB7XG4gIG46IFwic1wiLFxuICBzOiBcIm5cIixcbiAgbnc6IFwic3dcIixcbiAgbmU6IFwic2VcIixcbiAgc2U6IFwibmVcIixcbiAgc3c6IFwibndcIlxufTtcblxudmFyIHNpZ25zWCA9IHtcbiAgb3ZlcmxheTogKzEsXG4gIHNlbGVjdGlvbjogKzEsXG4gIG46IG51bGwsXG4gIGU6ICsxLFxuICBzOiBudWxsLFxuICB3OiAtMSxcbiAgbnc6IC0xLFxuICBuZTogKzEsXG4gIHNlOiArMSxcbiAgc3c6IC0xXG59O1xuXG52YXIgc2lnbnNZID0ge1xuICBvdmVybGF5OiArMSxcbiAgc2VsZWN0aW9uOiArMSxcbiAgbjogLTEsXG4gIGU6IG51bGwsXG4gIHM6ICsxLFxuICB3OiBudWxsLFxuICBudzogLTEsXG4gIG5lOiAtMSxcbiAgc2U6ICsxLFxuICBzdzogKzFcbn07XG5cbmZ1bmN0aW9uIHR5cGUodCkge1xuICByZXR1cm4ge3R5cGU6IHR9O1xufVxuXG4vLyBJZ25vcmUgcmlnaHQtY2xpY2ssIHNpbmNlIHRoYXQgc2hvdWxkIG9wZW4gdGhlIGNvbnRleHQgbWVudS5cbmZ1bmN0aW9uIGRlZmF1bHRGaWx0ZXIoZXZlbnQpIHtcbiAgcmV0dXJuICFldmVudC5jdHJsS2V5ICYmICFldmVudC5idXR0b247XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRFeHRlbnQoKSB7XG4gIHZhciBzdmcgPSB0aGlzLm93bmVyU1ZHRWxlbWVudCB8fCB0aGlzO1xuICBpZiAoc3ZnLmhhc0F0dHJpYnV0ZShcInZpZXdCb3hcIikpIHtcbiAgICBzdmcgPSBzdmcudmlld0JveC5iYXNlVmFsO1xuICAgIHJldHVybiBbW3N2Zy54LCBzdmcueV0sIFtzdmcueCArIHN2Zy53aWR0aCwgc3ZnLnkgKyBzdmcuaGVpZ2h0XV07XG4gIH1cbiAgcmV0dXJuIFtbMCwgMF0sIFtzdmcud2lkdGguYmFzZVZhbC52YWx1ZSwgc3ZnLmhlaWdodC5iYXNlVmFsLnZhbHVlXV07XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRUb3VjaGFibGUoKSB7XG4gIHJldHVybiBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgfHwgKFwib250b3VjaHN0YXJ0XCIgaW4gdGhpcyk7XG59XG5cbi8vIExpa2UgZDMubG9jYWwsIGJ1dCB3aXRoIHRoZSBuYW1lIFx1MjAxQ19fYnJ1c2hcdTIwMUQgcmF0aGVyIHRoYW4gYXV0by1nZW5lcmF0ZWQuXG5mdW5jdGlvbiBsb2NhbChub2RlKSB7XG4gIHdoaWxlICghbm9kZS5fX2JydXNoKSBpZiAoIShub2RlID0gbm9kZS5wYXJlbnROb2RlKSkgcmV0dXJuO1xuICByZXR1cm4gbm9kZS5fX2JydXNoO1xufVxuXG5mdW5jdGlvbiBlbXB0eShleHRlbnQpIHtcbiAgcmV0dXJuIGV4dGVudFswXVswXSA9PT0gZXh0ZW50WzFdWzBdXG4gICAgICB8fCBleHRlbnRbMF1bMV0gPT09IGV4dGVudFsxXVsxXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJydXNoU2VsZWN0aW9uKG5vZGUpIHtcbiAgdmFyIHN0YXRlID0gbm9kZS5fX2JydXNoO1xuICByZXR1cm4gc3RhdGUgPyBzdGF0ZS5kaW0ub3V0cHV0KHN0YXRlLnNlbGVjdGlvbikgOiBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYnJ1c2hYKCkge1xuICByZXR1cm4gYnJ1c2goWCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBicnVzaFkoKSB7XG4gIHJldHVybiBicnVzaChZKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiBicnVzaChYWSk7XG59XG5cbmZ1bmN0aW9uIGJydXNoKGRpbSkge1xuICB2YXIgZXh0ZW50ID0gZGVmYXVsdEV4dGVudCxcbiAgICAgIGZpbHRlciA9IGRlZmF1bHRGaWx0ZXIsXG4gICAgICB0b3VjaGFibGUgPSBkZWZhdWx0VG91Y2hhYmxlLFxuICAgICAga2V5cyA9IHRydWUsXG4gICAgICBsaXN0ZW5lcnMgPSBkaXNwYXRjaChcInN0YXJ0XCIsIFwiYnJ1c2hcIiwgXCJlbmRcIiksXG4gICAgICBoYW5kbGVTaXplID0gNixcbiAgICAgIHRvdWNoZW5kaW5nO1xuXG4gIGZ1bmN0aW9uIGJydXNoKGdyb3VwKSB7XG4gICAgdmFyIG92ZXJsYXkgPSBncm91cFxuICAgICAgICAucHJvcGVydHkoXCJfX2JydXNoXCIsIGluaXRpYWxpemUpXG4gICAgICAuc2VsZWN0QWxsKFwiLm92ZXJsYXlcIilcbiAgICAgIC5kYXRhKFt0eXBlKFwib3ZlcmxheVwiKV0pO1xuXG4gICAgb3ZlcmxheS5lbnRlcigpLmFwcGVuZChcInJlY3RcIilcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcIm92ZXJsYXlcIilcbiAgICAgICAgLmF0dHIoXCJwb2ludGVyLWV2ZW50c1wiLCBcImFsbFwiKVxuICAgICAgICAuYXR0cihcImN1cnNvclwiLCBjdXJzb3JzLm92ZXJsYXkpXG4gICAgICAubWVyZ2Uob3ZlcmxheSlcbiAgICAgICAgLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGV4dGVudCA9IGxvY2FsKHRoaXMpLmV4dGVudDtcbiAgICAgICAgICBzZWxlY3QodGhpcylcbiAgICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIGV4dGVudFswXVswXSlcbiAgICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIGV4dGVudFswXVsxXSlcbiAgICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCBleHRlbnRbMV1bMF0gLSBleHRlbnRbMF1bMF0pXG4gICAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGV4dGVudFsxXVsxXSAtIGV4dGVudFswXVsxXSk7XG4gICAgICAgIH0pO1xuXG4gICAgZ3JvdXAuc2VsZWN0QWxsKFwiLnNlbGVjdGlvblwiKVxuICAgICAgLmRhdGEoW3R5cGUoXCJzZWxlY3Rpb25cIildKVxuICAgICAgLmVudGVyKCkuYXBwZW5kKFwicmVjdFwiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwic2VsZWN0aW9uXCIpXG4gICAgICAgIC5hdHRyKFwiY3Vyc29yXCIsIGN1cnNvcnMuc2VsZWN0aW9uKVxuICAgICAgICAuYXR0cihcImZpbGxcIiwgXCIjNzc3XCIpXG4gICAgICAgIC5hdHRyKFwiZmlsbC1vcGFjaXR5XCIsIDAuMylcbiAgICAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCIjZmZmXCIpXG4gICAgICAgIC5hdHRyKFwic2hhcGUtcmVuZGVyaW5nXCIsIFwiY3Jpc3BFZGdlc1wiKTtcblxuICAgIHZhciBoYW5kbGUgPSBncm91cC5zZWxlY3RBbGwoXCIuaGFuZGxlXCIpXG4gICAgICAuZGF0YShkaW0uaGFuZGxlcywgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC50eXBlOyB9KTtcblxuICAgIGhhbmRsZS5leGl0KCkucmVtb3ZlKCk7XG5cbiAgICBoYW5kbGUuZW50ZXIoKS5hcHBlbmQoXCJyZWN0XCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJoYW5kbGUgaGFuZGxlLS1cIiArIGQudHlwZTsgfSlcbiAgICAgICAgLmF0dHIoXCJjdXJzb3JcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gY3Vyc29yc1tkLnR5cGVdOyB9KTtcblxuICAgIGdyb3VwXG4gICAgICAgIC5lYWNoKHJlZHJhdylcbiAgICAgICAgLmF0dHIoXCJmaWxsXCIsIFwibm9uZVwiKVxuICAgICAgICAuYXR0cihcInBvaW50ZXItZXZlbnRzXCIsIFwiYWxsXCIpXG4gICAgICAgIC5vbihcIm1vdXNlZG93bi5icnVzaFwiLCBzdGFydGVkKVxuICAgICAgLmZpbHRlcih0b3VjaGFibGUpXG4gICAgICAgIC5vbihcInRvdWNoc3RhcnQuYnJ1c2hcIiwgc3RhcnRlZClcbiAgICAgICAgLm9uKFwidG91Y2htb3ZlLmJydXNoXCIsIHRvdWNobW92ZWQpXG4gICAgICAgIC5vbihcInRvdWNoZW5kLmJydXNoIHRvdWNoY2FuY2VsLmJydXNoXCIsIHRvdWNoZW5kZWQpXG4gICAgICAgIC5zdHlsZShcInRvdWNoLWFjdGlvblwiLCBcIm5vbmVcIilcbiAgICAgICAgLnN0eWxlKFwiLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yXCIsIFwicmdiYSgwLDAsMCwwKVwiKTtcbiAgfVxuXG4gIGJydXNoLm1vdmUgPSBmdW5jdGlvbihncm91cCwgc2VsZWN0aW9uLCBldmVudCkge1xuICAgIGlmIChncm91cC50d2Vlbikge1xuICAgICAgZ3JvdXBcbiAgICAgICAgICAub24oXCJzdGFydC5icnVzaFwiLCBmdW5jdGlvbihldmVudCkgeyBlbWl0dGVyKHRoaXMsIGFyZ3VtZW50cykuYmVmb3Jlc3RhcnQoKS5zdGFydChldmVudCk7IH0pXG4gICAgICAgICAgLm9uKFwiaW50ZXJydXB0LmJydXNoIGVuZC5icnVzaFwiLCBmdW5jdGlvbihldmVudCkgeyBlbWl0dGVyKHRoaXMsIGFyZ3VtZW50cykuZW5kKGV2ZW50KTsgfSlcbiAgICAgICAgICAudHdlZW4oXCJicnVzaFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcyxcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IHRoYXQuX19icnVzaCxcbiAgICAgICAgICAgICAgICBlbWl0ID0gZW1pdHRlcih0aGF0LCBhcmd1bWVudHMpLFxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbjAgPSBzdGF0ZS5zZWxlY3Rpb24sXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uMSA9IGRpbS5pbnB1dCh0eXBlb2Ygc2VsZWN0aW9uID09PSBcImZ1bmN0aW9uXCIgPyBzZWxlY3Rpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKSA6IHNlbGVjdGlvbiwgc3RhdGUuZXh0ZW50KSxcbiAgICAgICAgICAgICAgICBpID0gaW50ZXJwb2xhdGUoc2VsZWN0aW9uMCwgc2VsZWN0aW9uMSk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHR3ZWVuKHQpIHtcbiAgICAgICAgICAgICAgc3RhdGUuc2VsZWN0aW9uID0gdCA9PT0gMSAmJiBzZWxlY3Rpb24xID09PSBudWxsID8gbnVsbCA6IGkodCk7XG4gICAgICAgICAgICAgIHJlZHJhdy5jYWxsKHRoYXQpO1xuICAgICAgICAgICAgICBlbWl0LmJydXNoKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBzZWxlY3Rpb24wICE9PSBudWxsICYmIHNlbGVjdGlvbjEgIT09IG51bGwgPyB0d2VlbiA6IHR3ZWVuKDEpO1xuICAgICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBncm91cFxuICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzLFxuICAgICAgICAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgc3RhdGUgPSB0aGF0Ll9fYnJ1c2gsXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uMSA9IGRpbS5pbnB1dCh0eXBlb2Ygc2VsZWN0aW9uID09PSBcImZ1bmN0aW9uXCIgPyBzZWxlY3Rpb24uYXBwbHkodGhhdCwgYXJncykgOiBzZWxlY3Rpb24sIHN0YXRlLmV4dGVudCksXG4gICAgICAgICAgICAgICAgZW1pdCA9IGVtaXR0ZXIodGhhdCwgYXJncykuYmVmb3Jlc3RhcnQoKTtcblxuICAgICAgICAgICAgaW50ZXJydXB0KHRoYXQpO1xuICAgICAgICAgICAgc3RhdGUuc2VsZWN0aW9uID0gc2VsZWN0aW9uMSA9PT0gbnVsbCA/IG51bGwgOiBzZWxlY3Rpb24xO1xuICAgICAgICAgICAgcmVkcmF3LmNhbGwodGhhdCk7XG4gICAgICAgICAgICBlbWl0LnN0YXJ0KGV2ZW50KS5icnVzaChldmVudCkuZW5kKGV2ZW50KTtcbiAgICAgICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgYnJ1c2guY2xlYXIgPSBmdW5jdGlvbihncm91cCwgZXZlbnQpIHtcbiAgICBicnVzaC5tb3ZlKGdyb3VwLCBudWxsLCBldmVudCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gcmVkcmF3KCkge1xuICAgIHZhciBncm91cCA9IHNlbGVjdCh0aGlzKSxcbiAgICAgICAgc2VsZWN0aW9uID0gbG9jYWwodGhpcykuc2VsZWN0aW9uO1xuXG4gICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgZ3JvdXAuc2VsZWN0QWxsKFwiLnNlbGVjdGlvblwiKVxuICAgICAgICAgIC5zdHlsZShcImRpc3BsYXlcIiwgbnVsbClcbiAgICAgICAgICAuYXR0cihcInhcIiwgc2VsZWN0aW9uWzBdWzBdKVxuICAgICAgICAgIC5hdHRyKFwieVwiLCBzZWxlY3Rpb25bMF1bMV0pXG4gICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCBzZWxlY3Rpb25bMV1bMF0gLSBzZWxlY3Rpb25bMF1bMF0pXG4gICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgc2VsZWN0aW9uWzFdWzFdIC0gc2VsZWN0aW9uWzBdWzFdKTtcblxuICAgICAgZ3JvdXAuc2VsZWN0QWxsKFwiLmhhbmRsZVwiKVxuICAgICAgICAgIC5zdHlsZShcImRpc3BsYXlcIiwgbnVsbClcbiAgICAgICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC50eXBlW2QudHlwZS5sZW5ndGggLSAxXSA9PT0gXCJlXCIgPyBzZWxlY3Rpb25bMV1bMF0gLSBoYW5kbGVTaXplIC8gMiA6IHNlbGVjdGlvblswXVswXSAtIGhhbmRsZVNpemUgLyAyOyB9KVxuICAgICAgICAgIC5hdHRyKFwieVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnR5cGVbMF0gPT09IFwic1wiID8gc2VsZWN0aW9uWzFdWzFdIC0gaGFuZGxlU2l6ZSAvIDIgOiBzZWxlY3Rpb25bMF1bMV0gLSBoYW5kbGVTaXplIC8gMjsgfSlcbiAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudHlwZSA9PT0gXCJuXCIgfHwgZC50eXBlID09PSBcInNcIiA/IHNlbGVjdGlvblsxXVswXSAtIHNlbGVjdGlvblswXVswXSArIGhhbmRsZVNpemUgOiBoYW5kbGVTaXplOyB9KVxuICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudHlwZSA9PT0gXCJlXCIgfHwgZC50eXBlID09PSBcIndcIiA/IHNlbGVjdGlvblsxXVsxXSAtIHNlbGVjdGlvblswXVsxXSArIGhhbmRsZVNpemUgOiBoYW5kbGVTaXplOyB9KTtcbiAgICB9XG5cbiAgICBlbHNlIHtcbiAgICAgIGdyb3VwLnNlbGVjdEFsbChcIi5zZWxlY3Rpb24sLmhhbmRsZVwiKVxuICAgICAgICAgIC5zdHlsZShcImRpc3BsYXlcIiwgXCJub25lXCIpXG4gICAgICAgICAgLmF0dHIoXCJ4XCIsIG51bGwpXG4gICAgICAgICAgLmF0dHIoXCJ5XCIsIG51bGwpXG4gICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCBudWxsKVxuICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIG51bGwpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGVtaXR0ZXIodGhhdCwgYXJncywgY2xlYW4pIHtcbiAgICB2YXIgZW1pdCA9IHRoYXQuX19icnVzaC5lbWl0dGVyO1xuICAgIHJldHVybiBlbWl0ICYmICghY2xlYW4gfHwgIWVtaXQuY2xlYW4pID8gZW1pdCA6IG5ldyBFbWl0dGVyKHRoYXQsIGFyZ3MsIGNsZWFuKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIEVtaXR0ZXIodGhhdCwgYXJncywgY2xlYW4pIHtcbiAgICB0aGlzLnRoYXQgPSB0aGF0O1xuICAgIHRoaXMuYXJncyA9IGFyZ3M7XG4gICAgdGhpcy5zdGF0ZSA9IHRoYXQuX19icnVzaDtcbiAgICB0aGlzLmFjdGl2ZSA9IDA7XG4gICAgdGhpcy5jbGVhbiA9IGNsZWFuO1xuICB9XG5cbiAgRW1pdHRlci5wcm90b3R5cGUgPSB7XG4gICAgYmVmb3Jlc3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCsrdGhpcy5hY3RpdmUgPT09IDEpIHRoaXMuc3RhdGUuZW1pdHRlciA9IHRoaXMsIHRoaXMuc3RhcnRpbmcgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBzdGFydDogZnVuY3Rpb24oZXZlbnQsIG1vZGUpIHtcbiAgICAgIGlmICh0aGlzLnN0YXJ0aW5nKSB0aGlzLnN0YXJ0aW5nID0gZmFsc2UsIHRoaXMuZW1pdChcInN0YXJ0XCIsIGV2ZW50LCBtb2RlKTtcbiAgICAgIGVsc2UgdGhpcy5lbWl0KFwiYnJ1c2hcIiwgZXZlbnQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBicnVzaDogZnVuY3Rpb24oZXZlbnQsIG1vZGUpIHtcbiAgICAgIHRoaXMuZW1pdChcImJydXNoXCIsIGV2ZW50LCBtb2RlKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgZW5kOiBmdW5jdGlvbihldmVudCwgbW9kZSkge1xuICAgICAgaWYgKC0tdGhpcy5hY3RpdmUgPT09IDApIGRlbGV0ZSB0aGlzLnN0YXRlLmVtaXR0ZXIsIHRoaXMuZW1pdChcImVuZFwiLCBldmVudCwgbW9kZSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIGVtaXQ6IGZ1bmN0aW9uKHR5cGUsIGV2ZW50LCBtb2RlKSB7XG4gICAgICB2YXIgZCA9IHNlbGVjdCh0aGlzLnRoYXQpLmRhdHVtKCk7XG4gICAgICBsaXN0ZW5lcnMuY2FsbChcbiAgICAgICAgdHlwZSxcbiAgICAgICAgdGhpcy50aGF0LFxuICAgICAgICBuZXcgQnJ1c2hFdmVudCh0eXBlLCB7XG4gICAgICAgICAgc291cmNlRXZlbnQ6IGV2ZW50LFxuICAgICAgICAgIHRhcmdldDogYnJ1c2gsXG4gICAgICAgICAgc2VsZWN0aW9uOiBkaW0ub3V0cHV0KHRoaXMuc3RhdGUuc2VsZWN0aW9uKSxcbiAgICAgICAgICBtb2RlLFxuICAgICAgICAgIGRpc3BhdGNoOiBsaXN0ZW5lcnNcbiAgICAgICAgfSksXG4gICAgICAgIGRcbiAgICAgICk7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIHN0YXJ0ZWQoZXZlbnQpIHtcbiAgICBpZiAodG91Y2hlbmRpbmcgJiYgIWV2ZW50LnRvdWNoZXMpIHJldHVybjtcbiAgICBpZiAoIWZpbHRlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSByZXR1cm47XG5cbiAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgIHR5cGUgPSBldmVudC50YXJnZXQuX19kYXRhX18udHlwZSxcbiAgICAgICAgbW9kZSA9IChrZXlzICYmIGV2ZW50Lm1ldGFLZXkgPyB0eXBlID0gXCJvdmVybGF5XCIgOiB0eXBlKSA9PT0gXCJzZWxlY3Rpb25cIiA/IE1PREVfRFJBRyA6IChrZXlzICYmIGV2ZW50LmFsdEtleSA/IE1PREVfQ0VOVEVSIDogTU9ERV9IQU5ETEUpLFxuICAgICAgICBzaWduWCA9IGRpbSA9PT0gWSA/IG51bGwgOiBzaWduc1hbdHlwZV0sXG4gICAgICAgIHNpZ25ZID0gZGltID09PSBYID8gbnVsbCA6IHNpZ25zWVt0eXBlXSxcbiAgICAgICAgc3RhdGUgPSBsb2NhbCh0aGF0KSxcbiAgICAgICAgZXh0ZW50ID0gc3RhdGUuZXh0ZW50LFxuICAgICAgICBzZWxlY3Rpb24gPSBzdGF0ZS5zZWxlY3Rpb24sXG4gICAgICAgIFcgPSBleHRlbnRbMF1bMF0sIHcwLCB3MSxcbiAgICAgICAgTiA9IGV4dGVudFswXVsxXSwgbjAsIG4xLFxuICAgICAgICBFID0gZXh0ZW50WzFdWzBdLCBlMCwgZTEsXG4gICAgICAgIFMgPSBleHRlbnRbMV1bMV0sIHMwLCBzMSxcbiAgICAgICAgZHggPSAwLFxuICAgICAgICBkeSA9IDAsXG4gICAgICAgIG1vdmluZyxcbiAgICAgICAgc2hpZnRpbmcgPSBzaWduWCAmJiBzaWduWSAmJiBrZXlzICYmIGV2ZW50LnNoaWZ0S2V5LFxuICAgICAgICBsb2NrWCxcbiAgICAgICAgbG9ja1ksXG4gICAgICAgIHBvaW50cyA9IEFycmF5LmZyb20oZXZlbnQudG91Y2hlcyB8fCBbZXZlbnRdLCB0ID0+IHtcbiAgICAgICAgICBjb25zdCBpID0gdC5pZGVudGlmaWVyO1xuICAgICAgICAgIHQgPSBwb2ludGVyKHQsIHRoYXQpO1xuICAgICAgICAgIHQucG9pbnQwID0gdC5zbGljZSgpO1xuICAgICAgICAgIHQuaWRlbnRpZmllciA9IGk7XG4gICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIH0pO1xuXG4gICAgaW50ZXJydXB0KHRoYXQpO1xuICAgIHZhciBlbWl0ID0gZW1pdHRlcih0aGF0LCBhcmd1bWVudHMsIHRydWUpLmJlZm9yZXN0YXJ0KCk7XG5cbiAgICBpZiAodHlwZSA9PT0gXCJvdmVybGF5XCIpIHtcbiAgICAgIGlmIChzZWxlY3Rpb24pIG1vdmluZyA9IHRydWU7XG4gICAgICBjb25zdCBwdHMgPSBbcG9pbnRzWzBdLCBwb2ludHNbMV0gfHwgcG9pbnRzWzBdXTtcbiAgICAgIHN0YXRlLnNlbGVjdGlvbiA9IHNlbGVjdGlvbiA9IFtbXG4gICAgICAgICAgdzAgPSBkaW0gPT09IFkgPyBXIDogbWluKHB0c1swXVswXSwgcHRzWzFdWzBdKSxcbiAgICAgICAgICBuMCA9IGRpbSA9PT0gWCA/IE4gOiBtaW4ocHRzWzBdWzFdLCBwdHNbMV1bMV0pXG4gICAgICAgIF0sIFtcbiAgICAgICAgICBlMCA9IGRpbSA9PT0gWSA/IEUgOiBtYXgocHRzWzBdWzBdLCBwdHNbMV1bMF0pLFxuICAgICAgICAgIHMwID0gZGltID09PSBYID8gUyA6IG1heChwdHNbMF1bMV0sIHB0c1sxXVsxXSlcbiAgICAgICAgXV07XG4gICAgICBpZiAocG9pbnRzLmxlbmd0aCA+IDEpIG1vdmUoZXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3MCA9IHNlbGVjdGlvblswXVswXTtcbiAgICAgIG4wID0gc2VsZWN0aW9uWzBdWzFdO1xuICAgICAgZTAgPSBzZWxlY3Rpb25bMV1bMF07XG4gICAgICBzMCA9IHNlbGVjdGlvblsxXVsxXTtcbiAgICB9XG5cbiAgICB3MSA9IHcwO1xuICAgIG4xID0gbjA7XG4gICAgZTEgPSBlMDtcbiAgICBzMSA9IHMwO1xuXG4gICAgdmFyIGdyb3VwID0gc2VsZWN0KHRoYXQpXG4gICAgICAgIC5hdHRyKFwicG9pbnRlci1ldmVudHNcIiwgXCJub25lXCIpO1xuXG4gICAgdmFyIG92ZXJsYXkgPSBncm91cC5zZWxlY3RBbGwoXCIub3ZlcmxheVwiKVxuICAgICAgICAuYXR0cihcImN1cnNvclwiLCBjdXJzb3JzW3R5cGVdKTtcblxuICAgIGlmIChldmVudC50b3VjaGVzKSB7XG4gICAgICBlbWl0Lm1vdmVkID0gbW92ZWQ7XG4gICAgICBlbWl0LmVuZGVkID0gZW5kZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB2aWV3ID0gc2VsZWN0KGV2ZW50LnZpZXcpXG4gICAgICAgICAgLm9uKFwibW91c2Vtb3ZlLmJydXNoXCIsIG1vdmVkLCB0cnVlKVxuICAgICAgICAgIC5vbihcIm1vdXNldXAuYnJ1c2hcIiwgZW5kZWQsIHRydWUpO1xuICAgICAgaWYgKGtleXMpIHZpZXdcbiAgICAgICAgICAub24oXCJrZXlkb3duLmJydXNoXCIsIGtleWRvd25lZCwgdHJ1ZSlcbiAgICAgICAgICAub24oXCJrZXl1cC5icnVzaFwiLCBrZXl1cHBlZCwgdHJ1ZSlcblxuICAgICAgZHJhZ0Rpc2FibGUoZXZlbnQudmlldyk7XG4gICAgfVxuXG4gICAgcmVkcmF3LmNhbGwodGhhdCk7XG4gICAgZW1pdC5zdGFydChldmVudCwgbW9kZS5uYW1lKTtcblxuICAgIGZ1bmN0aW9uIG1vdmVkKGV2ZW50KSB7XG4gICAgICBmb3IgKGNvbnN0IHAgb2YgZXZlbnQuY2hhbmdlZFRvdWNoZXMgfHwgW2V2ZW50XSkge1xuICAgICAgICBmb3IgKGNvbnN0IGQgb2YgcG9pbnRzKVxuICAgICAgICAgIGlmIChkLmlkZW50aWZpZXIgPT09IHAuaWRlbnRpZmllcikgZC5jdXIgPSBwb2ludGVyKHAsIHRoYXQpO1xuICAgICAgfVxuICAgICAgaWYgKHNoaWZ0aW5nICYmICFsb2NrWCAmJiAhbG9ja1kgJiYgcG9pbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCBwb2ludCA9IHBvaW50c1swXTtcbiAgICAgICAgaWYgKGFicyhwb2ludC5jdXJbMF0gLSBwb2ludFswXSkgPiBhYnMocG9pbnQuY3VyWzFdIC0gcG9pbnRbMV0pKVxuICAgICAgICAgIGxvY2tZID0gdHJ1ZTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIGxvY2tYID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgcG9pbnQgb2YgcG9pbnRzKVxuICAgICAgICBpZiAocG9pbnQuY3VyKSBwb2ludFswXSA9IHBvaW50LmN1clswXSwgcG9pbnRbMV0gPSBwb2ludC5jdXJbMV07XG4gICAgICBtb3ZpbmcgPSB0cnVlO1xuICAgICAgbm9ldmVudChldmVudCk7XG4gICAgICBtb3ZlKGV2ZW50KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb3ZlKGV2ZW50KSB7XG4gICAgICBjb25zdCBwb2ludCA9IHBvaW50c1swXSwgcG9pbnQwID0gcG9pbnQucG9pbnQwO1xuICAgICAgdmFyIHQ7XG5cbiAgICAgIGR4ID0gcG9pbnRbMF0gLSBwb2ludDBbMF07XG4gICAgICBkeSA9IHBvaW50WzFdIC0gcG9pbnQwWzFdO1xuXG4gICAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgICAgY2FzZSBNT0RFX1NQQUNFOlxuICAgICAgICBjYXNlIE1PREVfRFJBRzoge1xuICAgICAgICAgIGlmIChzaWduWCkgZHggPSBtYXgoVyAtIHcwLCBtaW4oRSAtIGUwLCBkeCkpLCB3MSA9IHcwICsgZHgsIGUxID0gZTAgKyBkeDtcbiAgICAgICAgICBpZiAoc2lnblkpIGR5ID0gbWF4KE4gLSBuMCwgbWluKFMgLSBzMCwgZHkpKSwgbjEgPSBuMCArIGR5LCBzMSA9IHMwICsgZHk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBNT0RFX0hBTkRMRToge1xuICAgICAgICAgIGlmIChwb2ludHNbMV0pIHtcbiAgICAgICAgICAgIGlmIChzaWduWCkgdzEgPSBtYXgoVywgbWluKEUsIHBvaW50c1swXVswXSkpLCBlMSA9IG1heChXLCBtaW4oRSwgcG9pbnRzWzFdWzBdKSksIHNpZ25YID0gMTtcbiAgICAgICAgICAgIGlmIChzaWduWSkgbjEgPSBtYXgoTiwgbWluKFMsIHBvaW50c1swXVsxXSkpLCBzMSA9IG1heChOLCBtaW4oUywgcG9pbnRzWzFdWzFdKSksIHNpZ25ZID0gMTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHNpZ25YIDwgMCkgZHggPSBtYXgoVyAtIHcwLCBtaW4oRSAtIHcwLCBkeCkpLCB3MSA9IHcwICsgZHgsIGUxID0gZTA7XG4gICAgICAgICAgICBlbHNlIGlmIChzaWduWCA+IDApIGR4ID0gbWF4KFcgLSBlMCwgbWluKEUgLSBlMCwgZHgpKSwgdzEgPSB3MCwgZTEgPSBlMCArIGR4O1xuICAgICAgICAgICAgaWYgKHNpZ25ZIDwgMCkgZHkgPSBtYXgoTiAtIG4wLCBtaW4oUyAtIG4wLCBkeSkpLCBuMSA9IG4wICsgZHksIHMxID0gczA7XG4gICAgICAgICAgICBlbHNlIGlmIChzaWduWSA+IDApIGR5ID0gbWF4KE4gLSBzMCwgbWluKFMgLSBzMCwgZHkpKSwgbjEgPSBuMCwgczEgPSBzMCArIGR5O1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIE1PREVfQ0VOVEVSOiB7XG4gICAgICAgICAgaWYgKHNpZ25YKSB3MSA9IG1heChXLCBtaW4oRSwgdzAgLSBkeCAqIHNpZ25YKSksIGUxID0gbWF4KFcsIG1pbihFLCBlMCArIGR4ICogc2lnblgpKTtcbiAgICAgICAgICBpZiAoc2lnblkpIG4xID0gbWF4KE4sIG1pbihTLCBuMCAtIGR5ICogc2lnblkpKSwgczEgPSBtYXgoTiwgbWluKFMsIHMwICsgZHkgKiBzaWduWSkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChlMSA8IHcxKSB7XG4gICAgICAgIHNpZ25YICo9IC0xO1xuICAgICAgICB0ID0gdzAsIHcwID0gZTAsIGUwID0gdDtcbiAgICAgICAgdCA9IHcxLCB3MSA9IGUxLCBlMSA9IHQ7XG4gICAgICAgIGlmICh0eXBlIGluIGZsaXBYKSBvdmVybGF5LmF0dHIoXCJjdXJzb3JcIiwgY3Vyc29yc1t0eXBlID0gZmxpcFhbdHlwZV1dKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHMxIDwgbjEpIHtcbiAgICAgICAgc2lnblkgKj0gLTE7XG4gICAgICAgIHQgPSBuMCwgbjAgPSBzMCwgczAgPSB0O1xuICAgICAgICB0ID0gbjEsIG4xID0gczEsIHMxID0gdDtcbiAgICAgICAgaWYgKHR5cGUgaW4gZmxpcFkpIG92ZXJsYXkuYXR0cihcImN1cnNvclwiLCBjdXJzb3JzW3R5cGUgPSBmbGlwWVt0eXBlXV0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUuc2VsZWN0aW9uKSBzZWxlY3Rpb24gPSBzdGF0ZS5zZWxlY3Rpb247IC8vIE1heSBiZSBzZXQgYnkgYnJ1c2gubW92ZSFcbiAgICAgIGlmIChsb2NrWCkgdzEgPSBzZWxlY3Rpb25bMF1bMF0sIGUxID0gc2VsZWN0aW9uWzFdWzBdO1xuICAgICAgaWYgKGxvY2tZKSBuMSA9IHNlbGVjdGlvblswXVsxXSwgczEgPSBzZWxlY3Rpb25bMV1bMV07XG5cbiAgICAgIGlmIChzZWxlY3Rpb25bMF1bMF0gIT09IHcxXG4gICAgICAgICAgfHwgc2VsZWN0aW9uWzBdWzFdICE9PSBuMVxuICAgICAgICAgIHx8IHNlbGVjdGlvblsxXVswXSAhPT0gZTFcbiAgICAgICAgICB8fCBzZWxlY3Rpb25bMV1bMV0gIT09IHMxKSB7XG4gICAgICAgIHN0YXRlLnNlbGVjdGlvbiA9IFtbdzEsIG4xXSwgW2UxLCBzMV1dO1xuICAgICAgICByZWRyYXcuY2FsbCh0aGF0KTtcbiAgICAgICAgZW1pdC5icnVzaChldmVudCwgbW9kZS5uYW1lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbmRlZChldmVudCkge1xuICAgICAgbm9wcm9wYWdhdGlvbihldmVudCk7XG4gICAgICBpZiAoZXZlbnQudG91Y2hlcykge1xuICAgICAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgaWYgKHRvdWNoZW5kaW5nKSBjbGVhclRpbWVvdXQodG91Y2hlbmRpbmcpO1xuICAgICAgICB0b3VjaGVuZGluZyA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHRvdWNoZW5kaW5nID0gbnVsbDsgfSwgNTAwKTsgLy8gR2hvc3QgY2xpY2tzIGFyZSBkZWxheWVkIVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZHJhZ0VuYWJsZShldmVudC52aWV3LCBtb3ZpbmcpO1xuICAgICAgICB2aWV3Lm9uKFwia2V5ZG93bi5icnVzaCBrZXl1cC5icnVzaCBtb3VzZW1vdmUuYnJ1c2ggbW91c2V1cC5icnVzaFwiLCBudWxsKTtcbiAgICAgIH1cbiAgICAgIGdyb3VwLmF0dHIoXCJwb2ludGVyLWV2ZW50c1wiLCBcImFsbFwiKTtcbiAgICAgIG92ZXJsYXkuYXR0cihcImN1cnNvclwiLCBjdXJzb3JzLm92ZXJsYXkpO1xuICAgICAgaWYgKHN0YXRlLnNlbGVjdGlvbikgc2VsZWN0aW9uID0gc3RhdGUuc2VsZWN0aW9uOyAvLyBNYXkgYmUgc2V0IGJ5IGJydXNoLm1vdmUgKG9uIHN0YXJ0KSFcbiAgICAgIGlmIChlbXB0eShzZWxlY3Rpb24pKSBzdGF0ZS5zZWxlY3Rpb24gPSBudWxsLCByZWRyYXcuY2FsbCh0aGF0KTtcbiAgICAgIGVtaXQuZW5kKGV2ZW50LCBtb2RlLm5hbWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGtleWRvd25lZChldmVudCkge1xuICAgICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7XG4gICAgICAgIGNhc2UgMTY6IHsgLy8gU0hJRlRcbiAgICAgICAgICBzaGlmdGluZyA9IHNpZ25YICYmIHNpZ25ZO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMTg6IHsgLy8gQUxUXG4gICAgICAgICAgaWYgKG1vZGUgPT09IE1PREVfSEFORExFKSB7XG4gICAgICAgICAgICBpZiAoc2lnblgpIGUwID0gZTEgLSBkeCAqIHNpZ25YLCB3MCA9IHcxICsgZHggKiBzaWduWDtcbiAgICAgICAgICAgIGlmIChzaWduWSkgczAgPSBzMSAtIGR5ICogc2lnblksIG4wID0gbjEgKyBkeSAqIHNpZ25ZO1xuICAgICAgICAgICAgbW9kZSA9IE1PREVfQ0VOVEVSO1xuICAgICAgICAgICAgbW92ZShldmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMzI6IHsgLy8gU1BBQ0U7IHRha2VzIHByaW9yaXR5IG92ZXIgQUxUXG4gICAgICAgICAgaWYgKG1vZGUgPT09IE1PREVfSEFORExFIHx8IG1vZGUgPT09IE1PREVfQ0VOVEVSKSB7XG4gICAgICAgICAgICBpZiAoc2lnblggPCAwKSBlMCA9IGUxIC0gZHg7IGVsc2UgaWYgKHNpZ25YID4gMCkgdzAgPSB3MSAtIGR4O1xuICAgICAgICAgICAgaWYgKHNpZ25ZIDwgMCkgczAgPSBzMSAtIGR5OyBlbHNlIGlmIChzaWduWSA+IDApIG4wID0gbjEgLSBkeTtcbiAgICAgICAgICAgIG1vZGUgPSBNT0RFX1NQQUNFO1xuICAgICAgICAgICAgb3ZlcmxheS5hdHRyKFwiY3Vyc29yXCIsIGN1cnNvcnMuc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIG1vdmUoZXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiByZXR1cm47XG4gICAgICB9XG4gICAgICBub2V2ZW50KGV2ZW50KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBrZXl1cHBlZChldmVudCkge1xuICAgICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7XG4gICAgICAgIGNhc2UgMTY6IHsgLy8gU0hJRlRcbiAgICAgICAgICBpZiAoc2hpZnRpbmcpIHtcbiAgICAgICAgICAgIGxvY2tYID0gbG9ja1kgPSBzaGlmdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgbW92ZShldmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMTg6IHsgLy8gQUxUXG4gICAgICAgICAgaWYgKG1vZGUgPT09IE1PREVfQ0VOVEVSKSB7XG4gICAgICAgICAgICBpZiAoc2lnblggPCAwKSBlMCA9IGUxOyBlbHNlIGlmIChzaWduWCA+IDApIHcwID0gdzE7XG4gICAgICAgICAgICBpZiAoc2lnblkgPCAwKSBzMCA9IHMxOyBlbHNlIGlmIChzaWduWSA+IDApIG4wID0gbjE7XG4gICAgICAgICAgICBtb2RlID0gTU9ERV9IQU5ETEU7XG4gICAgICAgICAgICBtb3ZlKGV2ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzMjogeyAvLyBTUEFDRVxuICAgICAgICAgIGlmIChtb2RlID09PSBNT0RFX1NQQUNFKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuYWx0S2V5KSB7XG4gICAgICAgICAgICAgIGlmIChzaWduWCkgZTAgPSBlMSAtIGR4ICogc2lnblgsIHcwID0gdzEgKyBkeCAqIHNpZ25YO1xuICAgICAgICAgICAgICBpZiAoc2lnblkpIHMwID0gczEgLSBkeSAqIHNpZ25ZLCBuMCA9IG4xICsgZHkgKiBzaWduWTtcbiAgICAgICAgICAgICAgbW9kZSA9IE1PREVfQ0VOVEVSO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKHNpZ25YIDwgMCkgZTAgPSBlMTsgZWxzZSBpZiAoc2lnblggPiAwKSB3MCA9IHcxO1xuICAgICAgICAgICAgICBpZiAoc2lnblkgPCAwKSBzMCA9IHMxOyBlbHNlIGlmIChzaWduWSA+IDApIG4wID0gbjE7XG4gICAgICAgICAgICAgIG1vZGUgPSBNT0RFX0hBTkRMRTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG92ZXJsYXkuYXR0cihcImN1cnNvclwiLCBjdXJzb3JzW3R5cGVdKTtcbiAgICAgICAgICAgIG1vdmUoZXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiByZXR1cm47XG4gICAgICB9XG4gICAgICBub2V2ZW50KGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB0b3VjaG1vdmVkKGV2ZW50KSB7XG4gICAgZW1pdHRlcih0aGlzLCBhcmd1bWVudHMpLm1vdmVkKGV2ZW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvdWNoZW5kZWQoZXZlbnQpIHtcbiAgICBlbWl0dGVyKHRoaXMsIGFyZ3VtZW50cykuZW5kZWQoZXZlbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcbiAgICB2YXIgc3RhdGUgPSB0aGlzLl9fYnJ1c2ggfHwge3NlbGVjdGlvbjogbnVsbH07XG4gICAgc3RhdGUuZXh0ZW50ID0gbnVtYmVyMihleHRlbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgc3RhdGUuZGltID0gZGltO1xuICAgIHJldHVybiBzdGF0ZTtcbiAgfVxuXG4gIGJydXNoLmV4dGVudCA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChleHRlbnQgPSB0eXBlb2YgXyA9PT0gXCJmdW5jdGlvblwiID8gXyA6IGNvbnN0YW50KG51bWJlcjIoXykpLCBicnVzaCkgOiBleHRlbnQ7XG4gIH07XG5cbiAgYnJ1c2guZmlsdGVyID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKGZpbHRlciA9IHR5cGVvZiBfID09PSBcImZ1bmN0aW9uXCIgPyBfIDogY29uc3RhbnQoISFfKSwgYnJ1c2gpIDogZmlsdGVyO1xuICB9O1xuXG4gIGJydXNoLnRvdWNoYWJsZSA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/ICh0b3VjaGFibGUgPSB0eXBlb2YgXyA9PT0gXCJmdW5jdGlvblwiID8gXyA6IGNvbnN0YW50KCEhXyksIGJydXNoKSA6IHRvdWNoYWJsZTtcbiAgfTtcblxuICBicnVzaC5oYW5kbGVTaXplID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKGhhbmRsZVNpemUgPSArXywgYnJ1c2gpIDogaGFuZGxlU2l6ZTtcbiAgfTtcblxuICBicnVzaC5rZXlNb2RpZmllcnMgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoa2V5cyA9ICEhXywgYnJ1c2gpIDoga2V5cztcbiAgfTtcblxuICBicnVzaC5vbiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2YWx1ZSA9IGxpc3RlbmVycy5vbi5hcHBseShsaXN0ZW5lcnMsIGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIHZhbHVlID09PSBsaXN0ZW5lcnMgPyBicnVzaCA6IHZhbHVlO1xuICB9O1xuXG4gIHJldHVybiBicnVzaDtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbih4KSB7XG4gIHJldHVybiBNYXRoLmFicyh4ID0gTWF0aC5yb3VuZCh4KSkgPj0gMWUyMVxuICAgICAgPyB4LnRvTG9jYWxlU3RyaW5nKFwiZW5cIikucmVwbGFjZSgvLC9nLCBcIlwiKVxuICAgICAgOiB4LnRvU3RyaW5nKDEwKTtcbn1cblxuLy8gQ29tcHV0ZXMgdGhlIGRlY2ltYWwgY29lZmZpY2llbnQgYW5kIGV4cG9uZW50IG9mIHRoZSBzcGVjaWZpZWQgbnVtYmVyIHggd2l0aFxuLy8gc2lnbmlmaWNhbnQgZGlnaXRzIHAsIHdoZXJlIHggaXMgcG9zaXRpdmUgYW5kIHAgaXMgaW4gWzEsIDIxXSBvciB1bmRlZmluZWQuXG4vLyBGb3IgZXhhbXBsZSwgZm9ybWF0RGVjaW1hbFBhcnRzKDEuMjMpIHJldHVybnMgW1wiMTIzXCIsIDBdLlxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdERlY2ltYWxQYXJ0cyh4LCBwKSB7XG4gIGlmICgoaSA9ICh4ID0gcCA/IHgudG9FeHBvbmVudGlhbChwIC0gMSkgOiB4LnRvRXhwb25lbnRpYWwoKSkuaW5kZXhPZihcImVcIikpIDwgMCkgcmV0dXJuIG51bGw7IC8vIE5hTiwgXHUwMEIxSW5maW5pdHlcbiAgdmFyIGksIGNvZWZmaWNpZW50ID0geC5zbGljZSgwLCBpKTtcblxuICAvLyBUaGUgc3RyaW5nIHJldHVybmVkIGJ5IHRvRXhwb25lbnRpYWwgZWl0aGVyIGhhcyB0aGUgZm9ybSBcXGRcXC5cXGQrZVstK11cXGQrXG4gIC8vIChlLmcuLCAxLjJlKzMpIG9yIHRoZSBmb3JtIFxcZGVbLStdXFxkKyAoZS5nLiwgMWUrMykuXG4gIHJldHVybiBbXG4gICAgY29lZmZpY2llbnQubGVuZ3RoID4gMSA/IGNvZWZmaWNpZW50WzBdICsgY29lZmZpY2llbnQuc2xpY2UoMikgOiBjb2VmZmljaWVudCxcbiAgICAreC5zbGljZShpICsgMSlcbiAgXTtcbn1cbiIsICJpbXBvcnQge2Zvcm1hdERlY2ltYWxQYXJ0c30gZnJvbSBcIi4vZm9ybWF0RGVjaW1hbC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih4KSB7XG4gIHJldHVybiB4ID0gZm9ybWF0RGVjaW1hbFBhcnRzKE1hdGguYWJzKHgpKSwgeCA/IHhbMV0gOiBOYU47XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oZ3JvdXBpbmcsIHRob3VzYW5kcykge1xuICByZXR1cm4gZnVuY3Rpb24odmFsdWUsIHdpZHRoKSB7XG4gICAgdmFyIGkgPSB2YWx1ZS5sZW5ndGgsXG4gICAgICAgIHQgPSBbXSxcbiAgICAgICAgaiA9IDAsXG4gICAgICAgIGcgPSBncm91cGluZ1swXSxcbiAgICAgICAgbGVuZ3RoID0gMDtcblxuICAgIHdoaWxlIChpID4gMCAmJiBnID4gMCkge1xuICAgICAgaWYgKGxlbmd0aCArIGcgKyAxID4gd2lkdGgpIGcgPSBNYXRoLm1heCgxLCB3aWR0aCAtIGxlbmd0aCk7XG4gICAgICB0LnB1c2godmFsdWUuc3Vic3RyaW5nKGkgLT0gZywgaSArIGcpKTtcbiAgICAgIGlmICgobGVuZ3RoICs9IGcgKyAxKSA+IHdpZHRoKSBicmVhaztcbiAgICAgIGcgPSBncm91cGluZ1tqID0gKGogKyAxKSAlIGdyb3VwaW5nLmxlbmd0aF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHQucmV2ZXJzZSgpLmpvaW4odGhvdXNhbmRzKTtcbiAgfTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihudW1lcmFscykge1xuICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUucmVwbGFjZSgvWzAtOV0vZywgZnVuY3Rpb24oaSkge1xuICAgICAgcmV0dXJuIG51bWVyYWxzWytpXTtcbiAgICB9KTtcbiAgfTtcbn1cbiIsICIvLyBbW2ZpbGxdYWxpZ25dW3NpZ25dW3N5bWJvbF1bMF1bd2lkdGhdWyxdWy5wcmVjaXNpb25dW35dW3R5cGVdXG52YXIgcmUgPSAvXig/OiguKT8oWzw+PV5dKSk/KFsrXFwtKCBdKT8oWyQjXSk/KDApPyhcXGQrKT8oLCk/KFxcLlxcZCspPyh+KT8oW2EteiVdKT8kL2k7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGZvcm1hdFNwZWNpZmllcihzcGVjaWZpZXIpIHtcbiAgaWYgKCEobWF0Y2ggPSByZS5leGVjKHNwZWNpZmllcikpKSB0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkIGZvcm1hdDogXCIgKyBzcGVjaWZpZXIpO1xuICB2YXIgbWF0Y2g7XG4gIHJldHVybiBuZXcgRm9ybWF0U3BlY2lmaWVyKHtcbiAgICBmaWxsOiBtYXRjaFsxXSxcbiAgICBhbGlnbjogbWF0Y2hbMl0sXG4gICAgc2lnbjogbWF0Y2hbM10sXG4gICAgc3ltYm9sOiBtYXRjaFs0XSxcbiAgICB6ZXJvOiBtYXRjaFs1XSxcbiAgICB3aWR0aDogbWF0Y2hbNl0sXG4gICAgY29tbWE6IG1hdGNoWzddLFxuICAgIHByZWNpc2lvbjogbWF0Y2hbOF0gJiYgbWF0Y2hbOF0uc2xpY2UoMSksXG4gICAgdHJpbTogbWF0Y2hbOV0sXG4gICAgdHlwZTogbWF0Y2hbMTBdXG4gIH0pO1xufVxuXG5mb3JtYXRTcGVjaWZpZXIucHJvdG90eXBlID0gRm9ybWF0U3BlY2lmaWVyLnByb3RvdHlwZTsgLy8gaW5zdGFuY2VvZlxuXG5leHBvcnQgZnVuY3Rpb24gRm9ybWF0U3BlY2lmaWVyKHNwZWNpZmllcikge1xuICB0aGlzLmZpbGwgPSBzcGVjaWZpZXIuZmlsbCA9PT0gdW5kZWZpbmVkID8gXCIgXCIgOiBzcGVjaWZpZXIuZmlsbCArIFwiXCI7XG4gIHRoaXMuYWxpZ24gPSBzcGVjaWZpZXIuYWxpZ24gPT09IHVuZGVmaW5lZCA/IFwiPlwiIDogc3BlY2lmaWVyLmFsaWduICsgXCJcIjtcbiAgdGhpcy5zaWduID0gc3BlY2lmaWVyLnNpZ24gPT09IHVuZGVmaW5lZCA/IFwiLVwiIDogc3BlY2lmaWVyLnNpZ24gKyBcIlwiO1xuICB0aGlzLnN5bWJvbCA9IHNwZWNpZmllci5zeW1ib2wgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBzcGVjaWZpZXIuc3ltYm9sICsgXCJcIjtcbiAgdGhpcy56ZXJvID0gISFzcGVjaWZpZXIuemVybztcbiAgdGhpcy53aWR0aCA9IHNwZWNpZmllci53aWR0aCA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogK3NwZWNpZmllci53aWR0aDtcbiAgdGhpcy5jb21tYSA9ICEhc3BlY2lmaWVyLmNvbW1hO1xuICB0aGlzLnByZWNpc2lvbiA9IHNwZWNpZmllci5wcmVjaXNpb24gPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6ICtzcGVjaWZpZXIucHJlY2lzaW9uO1xuICB0aGlzLnRyaW0gPSAhIXNwZWNpZmllci50cmltO1xuICB0aGlzLnR5cGUgPSBzcGVjaWZpZXIudHlwZSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHNwZWNpZmllci50eXBlICsgXCJcIjtcbn1cblxuRm9ybWF0U3BlY2lmaWVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5maWxsXG4gICAgICArIHRoaXMuYWxpZ25cbiAgICAgICsgdGhpcy5zaWduXG4gICAgICArIHRoaXMuc3ltYm9sXG4gICAgICArICh0aGlzLnplcm8gPyBcIjBcIiA6IFwiXCIpXG4gICAgICArICh0aGlzLndpZHRoID09PSB1bmRlZmluZWQgPyBcIlwiIDogTWF0aC5tYXgoMSwgdGhpcy53aWR0aCB8IDApKVxuICAgICAgKyAodGhpcy5jb21tYSA/IFwiLFwiIDogXCJcIilcbiAgICAgICsgKHRoaXMucHJlY2lzaW9uID09PSB1bmRlZmluZWQgPyBcIlwiIDogXCIuXCIgKyBNYXRoLm1heCgwLCB0aGlzLnByZWNpc2lvbiB8IDApKVxuICAgICAgKyAodGhpcy50cmltID8gXCJ+XCIgOiBcIlwiKVxuICAgICAgKyB0aGlzLnR5cGU7XG59O1xuIiwgIi8vIFRyaW1zIGluc2lnbmlmaWNhbnQgemVyb3MsIGUuZy4sIHJlcGxhY2VzIDEuMjAwMGsgd2l0aCAxLjJrLlxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24ocykge1xuICBvdXQ6IGZvciAodmFyIG4gPSBzLmxlbmd0aCwgaSA9IDEsIGkwID0gLTEsIGkxOyBpIDwgbjsgKytpKSB7XG4gICAgc3dpdGNoIChzW2ldKSB7XG4gICAgICBjYXNlIFwiLlwiOiBpMCA9IGkxID0gaTsgYnJlYWs7XG4gICAgICBjYXNlIFwiMFwiOiBpZiAoaTAgPT09IDApIGkwID0gaTsgaTEgPSBpOyBicmVhaztcbiAgICAgIGRlZmF1bHQ6IGlmICghK3NbaV0pIGJyZWFrIG91dDsgaWYgKGkwID4gMCkgaTAgPSAwOyBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGkwID4gMCA/IHMuc2xpY2UoMCwgaTApICsgcy5zbGljZShpMSArIDEpIDogcztcbn1cbiIsICJpbXBvcnQge2Zvcm1hdERlY2ltYWxQYXJ0c30gZnJvbSBcIi4vZm9ybWF0RGVjaW1hbC5qc1wiO1xuXG5leHBvcnQgdmFyIHByZWZpeEV4cG9uZW50O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih4LCBwKSB7XG4gIHZhciBkID0gZm9ybWF0RGVjaW1hbFBhcnRzKHgsIHApO1xuICBpZiAoIWQpIHJldHVybiB4ICsgXCJcIjtcbiAgdmFyIGNvZWZmaWNpZW50ID0gZFswXSxcbiAgICAgIGV4cG9uZW50ID0gZFsxXSxcbiAgICAgIGkgPSBleHBvbmVudCAtIChwcmVmaXhFeHBvbmVudCA9IE1hdGgubWF4KC04LCBNYXRoLm1pbig4LCBNYXRoLmZsb29yKGV4cG9uZW50IC8gMykpKSAqIDMpICsgMSxcbiAgICAgIG4gPSBjb2VmZmljaWVudC5sZW5ndGg7XG4gIHJldHVybiBpID09PSBuID8gY29lZmZpY2llbnRcbiAgICAgIDogaSA+IG4gPyBjb2VmZmljaWVudCArIG5ldyBBcnJheShpIC0gbiArIDEpLmpvaW4oXCIwXCIpXG4gICAgICA6IGkgPiAwID8gY29lZmZpY2llbnQuc2xpY2UoMCwgaSkgKyBcIi5cIiArIGNvZWZmaWNpZW50LnNsaWNlKGkpXG4gICAgICA6IFwiMC5cIiArIG5ldyBBcnJheSgxIC0gaSkuam9pbihcIjBcIikgKyBmb3JtYXREZWNpbWFsUGFydHMoeCwgTWF0aC5tYXgoMCwgcCArIGkgLSAxKSlbMF07IC8vIGxlc3MgdGhhbiAxeSFcbn1cbiIsICJpbXBvcnQge2Zvcm1hdERlY2ltYWxQYXJ0c30gZnJvbSBcIi4vZm9ybWF0RGVjaW1hbC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih4LCBwKSB7XG4gIHZhciBkID0gZm9ybWF0RGVjaW1hbFBhcnRzKHgsIHApO1xuICBpZiAoIWQpIHJldHVybiB4ICsgXCJcIjtcbiAgdmFyIGNvZWZmaWNpZW50ID0gZFswXSxcbiAgICAgIGV4cG9uZW50ID0gZFsxXTtcbiAgcmV0dXJuIGV4cG9uZW50IDwgMCA/IFwiMC5cIiArIG5ldyBBcnJheSgtZXhwb25lbnQpLmpvaW4oXCIwXCIpICsgY29lZmZpY2llbnRcbiAgICAgIDogY29lZmZpY2llbnQubGVuZ3RoID4gZXhwb25lbnQgKyAxID8gY29lZmZpY2llbnQuc2xpY2UoMCwgZXhwb25lbnQgKyAxKSArIFwiLlwiICsgY29lZmZpY2llbnQuc2xpY2UoZXhwb25lbnQgKyAxKVxuICAgICAgOiBjb2VmZmljaWVudCArIG5ldyBBcnJheShleHBvbmVudCAtIGNvZWZmaWNpZW50Lmxlbmd0aCArIDIpLmpvaW4oXCIwXCIpO1xufVxuIiwgImltcG9ydCBmb3JtYXREZWNpbWFsIGZyb20gXCIuL2Zvcm1hdERlY2ltYWwuanNcIjtcbmltcG9ydCBmb3JtYXRQcmVmaXhBdXRvIGZyb20gXCIuL2Zvcm1hdFByZWZpeEF1dG8uanNcIjtcbmltcG9ydCBmb3JtYXRSb3VuZGVkIGZyb20gXCIuL2Zvcm1hdFJvdW5kZWQuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBcIiVcIjogKHgsIHApID0+ICh4ICogMTAwKS50b0ZpeGVkKHApLFxuICBcImJcIjogKHgpID0+IE1hdGgucm91bmQoeCkudG9TdHJpbmcoMiksXG4gIFwiY1wiOiAoeCkgPT4geCArIFwiXCIsXG4gIFwiZFwiOiBmb3JtYXREZWNpbWFsLFxuICBcImVcIjogKHgsIHApID0+IHgudG9FeHBvbmVudGlhbChwKSxcbiAgXCJmXCI6ICh4LCBwKSA9PiB4LnRvRml4ZWQocCksXG4gIFwiZ1wiOiAoeCwgcCkgPT4geC50b1ByZWNpc2lvbihwKSxcbiAgXCJvXCI6ICh4KSA9PiBNYXRoLnJvdW5kKHgpLnRvU3RyaW5nKDgpLFxuICBcInBcIjogKHgsIHApID0+IGZvcm1hdFJvdW5kZWQoeCAqIDEwMCwgcCksXG4gIFwiclwiOiBmb3JtYXRSb3VuZGVkLFxuICBcInNcIjogZm9ybWF0UHJlZml4QXV0byxcbiAgXCJYXCI6ICh4KSA9PiBNYXRoLnJvdW5kKHgpLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpLFxuICBcInhcIjogKHgpID0+IE1hdGgucm91bmQoeCkudG9TdHJpbmcoMTYpXG59O1xuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIHg7XG59XG4iLCAiaW1wb3J0IGV4cG9uZW50IGZyb20gXCIuL2V4cG9uZW50LmpzXCI7XG5pbXBvcnQgZm9ybWF0R3JvdXAgZnJvbSBcIi4vZm9ybWF0R3JvdXAuanNcIjtcbmltcG9ydCBmb3JtYXROdW1lcmFscyBmcm9tIFwiLi9mb3JtYXROdW1lcmFscy5qc1wiO1xuaW1wb3J0IGZvcm1hdFNwZWNpZmllciBmcm9tIFwiLi9mb3JtYXRTcGVjaWZpZXIuanNcIjtcbmltcG9ydCBmb3JtYXRUcmltIGZyb20gXCIuL2Zvcm1hdFRyaW0uanNcIjtcbmltcG9ydCBmb3JtYXRUeXBlcyBmcm9tIFwiLi9mb3JtYXRUeXBlcy5qc1wiO1xuaW1wb3J0IHtwcmVmaXhFeHBvbmVudH0gZnJvbSBcIi4vZm9ybWF0UHJlZml4QXV0by5qc1wiO1xuaW1wb3J0IGlkZW50aXR5IGZyb20gXCIuL2lkZW50aXR5LmpzXCI7XG5cbnZhciBtYXAgPSBBcnJheS5wcm90b3R5cGUubWFwLFxuICAgIHByZWZpeGVzID0gW1wieVwiLFwielwiLFwiYVwiLFwiZlwiLFwicFwiLFwiblwiLFwiXHUwMEI1XCIsXCJtXCIsXCJcIixcImtcIixcIk1cIixcIkdcIixcIlRcIixcIlBcIixcIkVcIixcIlpcIixcIllcIl07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGxvY2FsZSkge1xuICB2YXIgZ3JvdXAgPSBsb2NhbGUuZ3JvdXBpbmcgPT09IHVuZGVmaW5lZCB8fCBsb2NhbGUudGhvdXNhbmRzID09PSB1bmRlZmluZWQgPyBpZGVudGl0eSA6IGZvcm1hdEdyb3VwKG1hcC5jYWxsKGxvY2FsZS5ncm91cGluZywgTnVtYmVyKSwgbG9jYWxlLnRob3VzYW5kcyArIFwiXCIpLFxuICAgICAgY3VycmVuY3lQcmVmaXggPSBsb2NhbGUuY3VycmVuY3kgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBsb2NhbGUuY3VycmVuY3lbMF0gKyBcIlwiLFxuICAgICAgY3VycmVuY3lTdWZmaXggPSBsb2NhbGUuY3VycmVuY3kgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBsb2NhbGUuY3VycmVuY3lbMV0gKyBcIlwiLFxuICAgICAgZGVjaW1hbCA9IGxvY2FsZS5kZWNpbWFsID09PSB1bmRlZmluZWQgPyBcIi5cIiA6IGxvY2FsZS5kZWNpbWFsICsgXCJcIixcbiAgICAgIG51bWVyYWxzID0gbG9jYWxlLm51bWVyYWxzID09PSB1bmRlZmluZWQgPyBpZGVudGl0eSA6IGZvcm1hdE51bWVyYWxzKG1hcC5jYWxsKGxvY2FsZS5udW1lcmFscywgU3RyaW5nKSksXG4gICAgICBwZXJjZW50ID0gbG9jYWxlLnBlcmNlbnQgPT09IHVuZGVmaW5lZCA/IFwiJVwiIDogbG9jYWxlLnBlcmNlbnQgKyBcIlwiLFxuICAgICAgbWludXMgPSBsb2NhbGUubWludXMgPT09IHVuZGVmaW5lZCA/IFwiXHUyMjEyXCIgOiBsb2NhbGUubWludXMgKyBcIlwiLFxuICAgICAgbmFuID0gbG9jYWxlLm5hbiA9PT0gdW5kZWZpbmVkID8gXCJOYU5cIiA6IGxvY2FsZS5uYW4gKyBcIlwiO1xuXG4gIGZ1bmN0aW9uIG5ld0Zvcm1hdChzcGVjaWZpZXIpIHtcbiAgICBzcGVjaWZpZXIgPSBmb3JtYXRTcGVjaWZpZXIoc3BlY2lmaWVyKTtcblxuICAgIHZhciBmaWxsID0gc3BlY2lmaWVyLmZpbGwsXG4gICAgICAgIGFsaWduID0gc3BlY2lmaWVyLmFsaWduLFxuICAgICAgICBzaWduID0gc3BlY2lmaWVyLnNpZ24sXG4gICAgICAgIHN5bWJvbCA9IHNwZWNpZmllci5zeW1ib2wsXG4gICAgICAgIHplcm8gPSBzcGVjaWZpZXIuemVybyxcbiAgICAgICAgd2lkdGggPSBzcGVjaWZpZXIud2lkdGgsXG4gICAgICAgIGNvbW1hID0gc3BlY2lmaWVyLmNvbW1hLFxuICAgICAgICBwcmVjaXNpb24gPSBzcGVjaWZpZXIucHJlY2lzaW9uLFxuICAgICAgICB0cmltID0gc3BlY2lmaWVyLnRyaW0sXG4gICAgICAgIHR5cGUgPSBzcGVjaWZpZXIudHlwZTtcblxuICAgIC8vIFRoZSBcIm5cIiB0eXBlIGlzIGFuIGFsaWFzIGZvciBcIixnXCIuXG4gICAgaWYgKHR5cGUgPT09IFwiblwiKSBjb21tYSA9IHRydWUsIHR5cGUgPSBcImdcIjtcblxuICAgIC8vIFRoZSBcIlwiIHR5cGUsIGFuZCBhbnkgaW52YWxpZCB0eXBlLCBpcyBhbiBhbGlhcyBmb3IgXCIuMTJ+Z1wiLlxuICAgIGVsc2UgaWYgKCFmb3JtYXRUeXBlc1t0eXBlXSkgcHJlY2lzaW9uID09PSB1bmRlZmluZWQgJiYgKHByZWNpc2lvbiA9IDEyKSwgdHJpbSA9IHRydWUsIHR5cGUgPSBcImdcIjtcblxuICAgIC8vIElmIHplcm8gZmlsbCBpcyBzcGVjaWZpZWQsIHBhZGRpbmcgZ29lcyBhZnRlciBzaWduIGFuZCBiZWZvcmUgZGlnaXRzLlxuICAgIGlmICh6ZXJvIHx8IChmaWxsID09PSBcIjBcIiAmJiBhbGlnbiA9PT0gXCI9XCIpKSB6ZXJvID0gdHJ1ZSwgZmlsbCA9IFwiMFwiLCBhbGlnbiA9IFwiPVwiO1xuXG4gICAgLy8gQ29tcHV0ZSB0aGUgcHJlZml4IGFuZCBzdWZmaXguXG4gICAgLy8gRm9yIFNJLXByZWZpeCwgdGhlIHN1ZmZpeCBpcyBsYXppbHkgY29tcHV0ZWQuXG4gICAgdmFyIHByZWZpeCA9IHN5bWJvbCA9PT0gXCIkXCIgPyBjdXJyZW5jeVByZWZpeCA6IHN5bWJvbCA9PT0gXCIjXCIgJiYgL1tib3hYXS8udGVzdCh0eXBlKSA/IFwiMFwiICsgdHlwZS50b0xvd2VyQ2FzZSgpIDogXCJcIixcbiAgICAgICAgc3VmZml4ID0gc3ltYm9sID09PSBcIiRcIiA/IGN1cnJlbmN5U3VmZml4IDogL1slcF0vLnRlc3QodHlwZSkgPyBwZXJjZW50IDogXCJcIjtcblxuICAgIC8vIFdoYXQgZm9ybWF0IGZ1bmN0aW9uIHNob3VsZCB3ZSB1c2U/XG4gICAgLy8gSXMgdGhpcyBhbiBpbnRlZ2VyIHR5cGU/XG4gICAgLy8gQ2FuIHRoaXMgdHlwZSBnZW5lcmF0ZSBleHBvbmVudGlhbCBub3RhdGlvbj9cbiAgICB2YXIgZm9ybWF0VHlwZSA9IGZvcm1hdFR5cGVzW3R5cGVdLFxuICAgICAgICBtYXliZVN1ZmZpeCA9IC9bZGVmZ3BycyVdLy50ZXN0KHR5cGUpO1xuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0IHByZWNpc2lvbiBpZiBub3Qgc3BlY2lmaWVkLFxuICAgIC8vIG9yIGNsYW1wIHRoZSBzcGVjaWZpZWQgcHJlY2lzaW9uIHRvIHRoZSBzdXBwb3J0ZWQgcmFuZ2UuXG4gICAgLy8gRm9yIHNpZ25pZmljYW50IHByZWNpc2lvbiwgaXQgbXVzdCBiZSBpbiBbMSwgMjFdLlxuICAgIC8vIEZvciBmaXhlZCBwcmVjaXNpb24sIGl0IG11c3QgYmUgaW4gWzAsIDIwXS5cbiAgICBwcmVjaXNpb24gPSBwcmVjaXNpb24gPT09IHVuZGVmaW5lZCA/IDZcbiAgICAgICAgOiAvW2dwcnNdLy50ZXN0KHR5cGUpID8gTWF0aC5tYXgoMSwgTWF0aC5taW4oMjEsIHByZWNpc2lvbikpXG4gICAgICAgIDogTWF0aC5tYXgoMCwgTWF0aC5taW4oMjAsIHByZWNpc2lvbikpO1xuXG4gICAgZnVuY3Rpb24gZm9ybWF0KHZhbHVlKSB7XG4gICAgICB2YXIgdmFsdWVQcmVmaXggPSBwcmVmaXgsXG4gICAgICAgICAgdmFsdWVTdWZmaXggPSBzdWZmaXgsXG4gICAgICAgICAgaSwgbiwgYztcblxuICAgICAgaWYgKHR5cGUgPT09IFwiY1wiKSB7XG4gICAgICAgIHZhbHVlU3VmZml4ID0gZm9ybWF0VHlwZSh2YWx1ZSkgKyB2YWx1ZVN1ZmZpeDtcbiAgICAgICAgdmFsdWUgPSBcIlwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSArdmFsdWU7XG5cbiAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBzaWduLiAtMCBpcyBub3QgbGVzcyB0aGFuIDAsIGJ1dCAxIC8gLTAgaXMhXG4gICAgICAgIHZhciB2YWx1ZU5lZ2F0aXZlID0gdmFsdWUgPCAwIHx8IDEgLyB2YWx1ZSA8IDA7XG5cbiAgICAgICAgLy8gUGVyZm9ybSB0aGUgaW5pdGlhbCBmb3JtYXR0aW5nLlxuICAgICAgICB2YWx1ZSA9IGlzTmFOKHZhbHVlKSA/IG5hbiA6IGZvcm1hdFR5cGUoTWF0aC5hYnModmFsdWUpLCBwcmVjaXNpb24pO1xuXG4gICAgICAgIC8vIFRyaW0gaW5zaWduaWZpY2FudCB6ZXJvcy5cbiAgICAgICAgaWYgKHRyaW0pIHZhbHVlID0gZm9ybWF0VHJpbSh2YWx1ZSk7XG5cbiAgICAgICAgLy8gSWYgYSBuZWdhdGl2ZSB2YWx1ZSByb3VuZHMgdG8gemVybyBhZnRlciBmb3JtYXR0aW5nLCBhbmQgbm8gZXhwbGljaXQgcG9zaXRpdmUgc2lnbiBpcyByZXF1ZXN0ZWQsIGhpZGUgdGhlIHNpZ24uXG4gICAgICAgIGlmICh2YWx1ZU5lZ2F0aXZlICYmICt2YWx1ZSA9PT0gMCAmJiBzaWduICE9PSBcIitcIikgdmFsdWVOZWdhdGl2ZSA9IGZhbHNlO1xuXG4gICAgICAgIC8vIENvbXB1dGUgdGhlIHByZWZpeCBhbmQgc3VmZml4LlxuICAgICAgICB2YWx1ZVByZWZpeCA9ICh2YWx1ZU5lZ2F0aXZlID8gKHNpZ24gPT09IFwiKFwiID8gc2lnbiA6IG1pbnVzKSA6IHNpZ24gPT09IFwiLVwiIHx8IHNpZ24gPT09IFwiKFwiID8gXCJcIiA6IHNpZ24pICsgdmFsdWVQcmVmaXg7XG4gICAgICAgIHZhbHVlU3VmZml4ID0gKHR5cGUgPT09IFwic1wiID8gcHJlZml4ZXNbOCArIHByZWZpeEV4cG9uZW50IC8gM10gOiBcIlwiKSArIHZhbHVlU3VmZml4ICsgKHZhbHVlTmVnYXRpdmUgJiYgc2lnbiA9PT0gXCIoXCIgPyBcIilcIiA6IFwiXCIpO1xuXG4gICAgICAgIC8vIEJyZWFrIHRoZSBmb3JtYXR0ZWQgdmFsdWUgaW50byB0aGUgaW50ZWdlciBcdTIwMUN2YWx1ZVx1MjAxRCBwYXJ0IHRoYXQgY2FuIGJlXG4gICAgICAgIC8vIGdyb3VwZWQsIGFuZCBmcmFjdGlvbmFsIG9yIGV4cG9uZW50aWFsIFx1MjAxQ3N1ZmZpeFx1MjAxRCBwYXJ0IHRoYXQgaXMgbm90LlxuICAgICAgICBpZiAobWF5YmVTdWZmaXgpIHtcbiAgICAgICAgICBpID0gLTEsIG4gPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgICAgICAgIGlmIChjID0gdmFsdWUuY2hhckNvZGVBdChpKSwgNDggPiBjIHx8IGMgPiA1Nykge1xuICAgICAgICAgICAgICB2YWx1ZVN1ZmZpeCA9IChjID09PSA0NiA/IGRlY2ltYWwgKyB2YWx1ZS5zbGljZShpICsgMSkgOiB2YWx1ZS5zbGljZShpKSkgKyB2YWx1ZVN1ZmZpeDtcbiAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgwLCBpKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZSBmaWxsIGNoYXJhY3RlciBpcyBub3QgXCIwXCIsIGdyb3VwaW5nIGlzIGFwcGxpZWQgYmVmb3JlIHBhZGRpbmcuXG4gICAgICBpZiAoY29tbWEgJiYgIXplcm8pIHZhbHVlID0gZ3JvdXAodmFsdWUsIEluZmluaXR5KTtcblxuICAgICAgLy8gQ29tcHV0ZSB0aGUgcGFkZGluZy5cbiAgICAgIHZhciBsZW5ndGggPSB2YWx1ZVByZWZpeC5sZW5ndGggKyB2YWx1ZS5sZW5ndGggKyB2YWx1ZVN1ZmZpeC5sZW5ndGgsXG4gICAgICAgICAgcGFkZGluZyA9IGxlbmd0aCA8IHdpZHRoID8gbmV3IEFycmF5KHdpZHRoIC0gbGVuZ3RoICsgMSkuam9pbihmaWxsKSA6IFwiXCI7XG5cbiAgICAgIC8vIElmIHRoZSBmaWxsIGNoYXJhY3RlciBpcyBcIjBcIiwgZ3JvdXBpbmcgaXMgYXBwbGllZCBhZnRlciBwYWRkaW5nLlxuICAgICAgaWYgKGNvbW1hICYmIHplcm8pIHZhbHVlID0gZ3JvdXAocGFkZGluZyArIHZhbHVlLCBwYWRkaW5nLmxlbmd0aCA/IHdpZHRoIC0gdmFsdWVTdWZmaXgubGVuZ3RoIDogSW5maW5pdHkpLCBwYWRkaW5nID0gXCJcIjtcblxuICAgICAgLy8gUmVjb25zdHJ1Y3QgdGhlIGZpbmFsIG91dHB1dCBiYXNlZCBvbiB0aGUgZGVzaXJlZCBhbGlnbm1lbnQuXG4gICAgICBzd2l0Y2ggKGFsaWduKSB7XG4gICAgICAgIGNhc2UgXCI8XCI6IHZhbHVlID0gdmFsdWVQcmVmaXggKyB2YWx1ZSArIHZhbHVlU3VmZml4ICsgcGFkZGluZzsgYnJlYWs7XG4gICAgICAgIGNhc2UgXCI9XCI6IHZhbHVlID0gdmFsdWVQcmVmaXggKyBwYWRkaW5nICsgdmFsdWUgKyB2YWx1ZVN1ZmZpeDsgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJeXCI6IHZhbHVlID0gcGFkZGluZy5zbGljZSgwLCBsZW5ndGggPSBwYWRkaW5nLmxlbmd0aCA+PiAxKSArIHZhbHVlUHJlZml4ICsgdmFsdWUgKyB2YWx1ZVN1ZmZpeCArIHBhZGRpbmcuc2xpY2UobGVuZ3RoKTsgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IHZhbHVlID0gcGFkZGluZyArIHZhbHVlUHJlZml4ICsgdmFsdWUgKyB2YWx1ZVN1ZmZpeDsgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudW1lcmFscyh2YWx1ZSk7XG4gICAgfVxuXG4gICAgZm9ybWF0LnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gc3BlY2lmaWVyICsgXCJcIjtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGZvcm1hdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZvcm1hdFByZWZpeChzcGVjaWZpZXIsIHZhbHVlKSB7XG4gICAgdmFyIGYgPSBuZXdGb3JtYXQoKHNwZWNpZmllciA9IGZvcm1hdFNwZWNpZmllcihzcGVjaWZpZXIpLCBzcGVjaWZpZXIudHlwZSA9IFwiZlwiLCBzcGVjaWZpZXIpKSxcbiAgICAgICAgZSA9IE1hdGgubWF4KC04LCBNYXRoLm1pbig4LCBNYXRoLmZsb29yKGV4cG9uZW50KHZhbHVlKSAvIDMpKSkgKiAzLFxuICAgICAgICBrID0gTWF0aC5wb3coMTAsIC1lKSxcbiAgICAgICAgcHJlZml4ID0gcHJlZml4ZXNbOCArIGUgLyAzXTtcbiAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiBmKGsgKiB2YWx1ZSkgKyBwcmVmaXg7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZm9ybWF0OiBuZXdGb3JtYXQsXG4gICAgZm9ybWF0UHJlZml4OiBmb3JtYXRQcmVmaXhcbiAgfTtcbn1cbiIsICJpbXBvcnQgZm9ybWF0TG9jYWxlIGZyb20gXCIuL2xvY2FsZS5qc1wiO1xuXG52YXIgbG9jYWxlO1xuZXhwb3J0IHZhciBmb3JtYXQ7XG5leHBvcnQgdmFyIGZvcm1hdFByZWZpeDtcblxuZGVmYXVsdExvY2FsZSh7XG4gIHRob3VzYW5kczogXCIsXCIsXG4gIGdyb3VwaW5nOiBbM10sXG4gIGN1cnJlbmN5OiBbXCIkXCIsIFwiXCJdXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGVmYXVsdExvY2FsZShkZWZpbml0aW9uKSB7XG4gIGxvY2FsZSA9IGZvcm1hdExvY2FsZShkZWZpbml0aW9uKTtcbiAgZm9ybWF0ID0gbG9jYWxlLmZvcm1hdDtcbiAgZm9ybWF0UHJlZml4ID0gbG9jYWxlLmZvcm1hdFByZWZpeDtcbiAgcmV0dXJuIGxvY2FsZTtcbn1cbiIsICJpbXBvcnQgZXhwb25lbnQgZnJvbSBcIi4vZXhwb25lbnQuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc3RlcCkge1xuICByZXR1cm4gTWF0aC5tYXgoMCwgLWV4cG9uZW50KE1hdGguYWJzKHN0ZXApKSk7XG59XG4iLCAiaW1wb3J0IGV4cG9uZW50IGZyb20gXCIuL2V4cG9uZW50LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHN0ZXAsIHZhbHVlKSB7XG4gIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1heCgtOCwgTWF0aC5taW4oOCwgTWF0aC5mbG9vcihleHBvbmVudCh2YWx1ZSkgLyAzKSkpICogMyAtIGV4cG9uZW50KE1hdGguYWJzKHN0ZXApKSk7XG59XG4iLCAiaW1wb3J0IGV4cG9uZW50IGZyb20gXCIuL2V4cG9uZW50LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHN0ZXAsIG1heCkge1xuICBzdGVwID0gTWF0aC5hYnMoc3RlcCksIG1heCA9IE1hdGguYWJzKG1heCkgLSBzdGVwO1xuICByZXR1cm4gTWF0aC5tYXgoMCwgZXhwb25lbnQobWF4KSAtIGV4cG9uZW50KHN0ZXApKSArIDE7XG59XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGluaXRSYW5nZShkb21haW4sIHJhbmdlKSB7XG4gIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgIGNhc2UgMDogYnJlYWs7XG4gICAgY2FzZSAxOiB0aGlzLnJhbmdlKGRvbWFpbik7IGJyZWFrO1xuICAgIGRlZmF1bHQ6IHRoaXMucmFuZ2UocmFuZ2UpLmRvbWFpbihkb21haW4pOyBicmVhaztcbiAgfVxuICByZXR1cm4gdGhpcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRJbnRlcnBvbGF0b3IoZG9tYWluLCBpbnRlcnBvbGF0b3IpIHtcbiAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgY2FzZSAwOiBicmVhaztcbiAgICBjYXNlIDE6IHtcbiAgICAgIGlmICh0eXBlb2YgZG9tYWluID09PSBcImZ1bmN0aW9uXCIpIHRoaXMuaW50ZXJwb2xhdG9yKGRvbWFpbik7XG4gICAgICBlbHNlIHRoaXMucmFuZ2UoZG9tYWluKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBkZWZhdWx0OiB7XG4gICAgICB0aGlzLmRvbWFpbihkb21haW4pO1xuICAgICAgaWYgKHR5cGVvZiBpbnRlcnBvbGF0b3IgPT09IFwiZnVuY3Rpb25cIikgdGhpcy5pbnRlcnBvbGF0b3IoaW50ZXJwb2xhdG9yKTtcbiAgICAgIGVsc2UgdGhpcy5yYW5nZShpbnRlcnBvbGF0b3IpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiB0aGlzO1xufVxuIiwgImltcG9ydCB7SW50ZXJuTWFwfSBmcm9tIFwiZDMtYXJyYXlcIjtcbmltcG9ydCB7aW5pdFJhbmdlfSBmcm9tIFwiLi9pbml0LmpzXCI7XG5cbmV4cG9ydCBjb25zdCBpbXBsaWNpdCA9IFN5bWJvbChcImltcGxpY2l0XCIpO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBvcmRpbmFsKCkge1xuICB2YXIgaW5kZXggPSBuZXcgSW50ZXJuTWFwKCksXG4gICAgICBkb21haW4gPSBbXSxcbiAgICAgIHJhbmdlID0gW10sXG4gICAgICB1bmtub3duID0gaW1wbGljaXQ7XG5cbiAgZnVuY3Rpb24gc2NhbGUoZCkge1xuICAgIGxldCBpID0gaW5kZXguZ2V0KGQpO1xuICAgIGlmIChpID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICh1bmtub3duICE9PSBpbXBsaWNpdCkgcmV0dXJuIHVua25vd247XG4gICAgICBpbmRleC5zZXQoZCwgaSA9IGRvbWFpbi5wdXNoKGQpIC0gMSk7XG4gICAgfVxuICAgIHJldHVybiByYW5nZVtpICUgcmFuZ2UubGVuZ3RoXTtcbiAgfVxuXG4gIHNjYWxlLmRvbWFpbiA9IGZ1bmN0aW9uKF8pIHtcbiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBkb21haW4uc2xpY2UoKTtcbiAgICBkb21haW4gPSBbXSwgaW5kZXggPSBuZXcgSW50ZXJuTWFwKCk7XG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiBfKSB7XG4gICAgICBpZiAoaW5kZXguaGFzKHZhbHVlKSkgY29udGludWU7XG4gICAgICBpbmRleC5zZXQodmFsdWUsIGRvbWFpbi5wdXNoKHZhbHVlKSAtIDEpO1xuICAgIH1cbiAgICByZXR1cm4gc2NhbGU7XG4gIH07XG5cbiAgc2NhbGUucmFuZ2UgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAocmFuZ2UgPSBBcnJheS5mcm9tKF8pLCBzY2FsZSkgOiByYW5nZS5zbGljZSgpO1xuICB9O1xuXG4gIHNjYWxlLnVua25vd24gPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAodW5rbm93biA9IF8sIHNjYWxlKSA6IHVua25vd247XG4gIH07XG5cbiAgc2NhbGUuY29weSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBvcmRpbmFsKGRvbWFpbiwgcmFuZ2UpLnVua25vd24odW5rbm93bik7XG4gIH07XG5cbiAgaW5pdFJhbmdlLmFwcGx5KHNjYWxlLCBhcmd1bWVudHMpO1xuXG4gIHJldHVybiBzY2FsZTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb25zdGFudHMoeCkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHg7XG4gIH07XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbnVtYmVyKHgpIHtcbiAgcmV0dXJuICt4O1xufVxuIiwgImltcG9ydCB7YmlzZWN0fSBmcm9tIFwiZDMtYXJyYXlcIjtcbmltcG9ydCB7aW50ZXJwb2xhdGUgYXMgaW50ZXJwb2xhdGVWYWx1ZSwgaW50ZXJwb2xhdGVOdW1iZXIsIGludGVycG9sYXRlUm91bmR9IGZyb20gXCJkMy1pbnRlcnBvbGF0ZVwiO1xuaW1wb3J0IGNvbnN0YW50IGZyb20gXCIuL2NvbnN0YW50LmpzXCI7XG5pbXBvcnQgbnVtYmVyIGZyb20gXCIuL251bWJlci5qc1wiO1xuXG52YXIgdW5pdCA9IFswLCAxXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5KHgpIHtcbiAgcmV0dXJuIHg7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZShhLCBiKSB7XG4gIHJldHVybiAoYiAtPSAoYSA9ICthKSlcbiAgICAgID8gZnVuY3Rpb24oeCkgeyByZXR1cm4gKHggLSBhKSAvIGI7IH1cbiAgICAgIDogY29uc3RhbnQoaXNOYU4oYikgPyBOYU4gOiAwLjUpO1xufVxuXG5mdW5jdGlvbiBjbGFtcGVyKGEsIGIpIHtcbiAgdmFyIHQ7XG4gIGlmIChhID4gYikgdCA9IGEsIGEgPSBiLCBiID0gdDtcbiAgcmV0dXJuIGZ1bmN0aW9uKHgpIHsgcmV0dXJuIE1hdGgubWF4KGEsIE1hdGgubWluKGIsIHgpKTsgfTtcbn1cblxuLy8gbm9ybWFsaXplKGEsIGIpKHgpIHRha2VzIGEgZG9tYWluIHZhbHVlIHggaW4gW2EsYl0gYW5kIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcGFyYW1ldGVyIHQgaW4gWzAsMV0uXG4vLyBpbnRlcnBvbGF0ZShhLCBiKSh0KSB0YWtlcyBhIHBhcmFtZXRlciB0IGluIFswLDFdIGFuZCByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHJhbmdlIHZhbHVlIHggaW4gW2EsYl0uXG5mdW5jdGlvbiBiaW1hcChkb21haW4sIHJhbmdlLCBpbnRlcnBvbGF0ZSkge1xuICB2YXIgZDAgPSBkb21haW5bMF0sIGQxID0gZG9tYWluWzFdLCByMCA9IHJhbmdlWzBdLCByMSA9IHJhbmdlWzFdO1xuICBpZiAoZDEgPCBkMCkgZDAgPSBub3JtYWxpemUoZDEsIGQwKSwgcjAgPSBpbnRlcnBvbGF0ZShyMSwgcjApO1xuICBlbHNlIGQwID0gbm9ybWFsaXplKGQwLCBkMSksIHIwID0gaW50ZXJwb2xhdGUocjAsIHIxKTtcbiAgcmV0dXJuIGZ1bmN0aW9uKHgpIHsgcmV0dXJuIHIwKGQwKHgpKTsgfTtcbn1cblxuZnVuY3Rpb24gcG9seW1hcChkb21haW4sIHJhbmdlLCBpbnRlcnBvbGF0ZSkge1xuICB2YXIgaiA9IE1hdGgubWluKGRvbWFpbi5sZW5ndGgsIHJhbmdlLmxlbmd0aCkgLSAxLFxuICAgICAgZCA9IG5ldyBBcnJheShqKSxcbiAgICAgIHIgPSBuZXcgQXJyYXkoaiksXG4gICAgICBpID0gLTE7XG5cbiAgLy8gUmV2ZXJzZSBkZXNjZW5kaW5nIGRvbWFpbnMuXG4gIGlmIChkb21haW5bal0gPCBkb21haW5bMF0pIHtcbiAgICBkb21haW4gPSBkb21haW4uc2xpY2UoKS5yZXZlcnNlKCk7XG4gICAgcmFuZ2UgPSByYW5nZS5zbGljZSgpLnJldmVyc2UoKTtcbiAgfVxuXG4gIHdoaWxlICgrK2kgPCBqKSB7XG4gICAgZFtpXSA9IG5vcm1hbGl6ZShkb21haW5baV0sIGRvbWFpbltpICsgMV0pO1xuICAgIHJbaV0gPSBpbnRlcnBvbGF0ZShyYW5nZVtpXSwgcmFuZ2VbaSArIDFdKTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbih4KSB7XG4gICAgdmFyIGkgPSBiaXNlY3QoZG9tYWluLCB4LCAxLCBqKSAtIDE7XG4gICAgcmV0dXJuIHJbaV0oZFtpXSh4KSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb3B5KHNvdXJjZSwgdGFyZ2V0KSB7XG4gIHJldHVybiB0YXJnZXRcbiAgICAgIC5kb21haW4oc291cmNlLmRvbWFpbigpKVxuICAgICAgLnJhbmdlKHNvdXJjZS5yYW5nZSgpKVxuICAgICAgLmludGVycG9sYXRlKHNvdXJjZS5pbnRlcnBvbGF0ZSgpKVxuICAgICAgLmNsYW1wKHNvdXJjZS5jbGFtcCgpKVxuICAgICAgLnVua25vd24oc291cmNlLnVua25vd24oKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1lcigpIHtcbiAgdmFyIGRvbWFpbiA9IHVuaXQsXG4gICAgICByYW5nZSA9IHVuaXQsXG4gICAgICBpbnRlcnBvbGF0ZSA9IGludGVycG9sYXRlVmFsdWUsXG4gICAgICB0cmFuc2Zvcm0sXG4gICAgICB1bnRyYW5zZm9ybSxcbiAgICAgIHVua25vd24sXG4gICAgICBjbGFtcCA9IGlkZW50aXR5LFxuICAgICAgcGllY2V3aXNlLFxuICAgICAgb3V0cHV0LFxuICAgICAgaW5wdXQ7XG5cbiAgZnVuY3Rpb24gcmVzY2FsZSgpIHtcbiAgICB2YXIgbiA9IE1hdGgubWluKGRvbWFpbi5sZW5ndGgsIHJhbmdlLmxlbmd0aCk7XG4gICAgaWYgKGNsYW1wICE9PSBpZGVudGl0eSkgY2xhbXAgPSBjbGFtcGVyKGRvbWFpblswXSwgZG9tYWluW24gLSAxXSk7XG4gICAgcGllY2V3aXNlID0gbiA+IDIgPyBwb2x5bWFwIDogYmltYXA7XG4gICAgb3V0cHV0ID0gaW5wdXQgPSBudWxsO1xuICAgIHJldHVybiBzY2FsZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNjYWxlKHgpIHtcbiAgICByZXR1cm4geCA9PSBudWxsIHx8IGlzTmFOKHggPSAreCkgPyB1bmtub3duIDogKG91dHB1dCB8fCAob3V0cHV0ID0gcGllY2V3aXNlKGRvbWFpbi5tYXAodHJhbnNmb3JtKSwgcmFuZ2UsIGludGVycG9sYXRlKSkpKHRyYW5zZm9ybShjbGFtcCh4KSkpO1xuICB9XG5cbiAgc2NhbGUuaW52ZXJ0ID0gZnVuY3Rpb24oeSkge1xuICAgIHJldHVybiBjbGFtcCh1bnRyYW5zZm9ybSgoaW5wdXQgfHwgKGlucHV0ID0gcGllY2V3aXNlKHJhbmdlLCBkb21haW4ubWFwKHRyYW5zZm9ybSksIGludGVycG9sYXRlTnVtYmVyKSkpKHkpKSk7XG4gIH07XG5cbiAgc2NhbGUuZG9tYWluID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKGRvbWFpbiA9IEFycmF5LmZyb20oXywgbnVtYmVyKSwgcmVzY2FsZSgpKSA6IGRvbWFpbi5zbGljZSgpO1xuICB9O1xuXG4gIHNjYWxlLnJhbmdlID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHJhbmdlID0gQXJyYXkuZnJvbShfKSwgcmVzY2FsZSgpKSA6IHJhbmdlLnNsaWNlKCk7XG4gIH07XG5cbiAgc2NhbGUucmFuZ2VSb3VuZCA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gcmFuZ2UgPSBBcnJheS5mcm9tKF8pLCBpbnRlcnBvbGF0ZSA9IGludGVycG9sYXRlUm91bmQsIHJlc2NhbGUoKTtcbiAgfTtcblxuICBzY2FsZS5jbGFtcCA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChjbGFtcCA9IF8gPyB0cnVlIDogaWRlbnRpdHksIHJlc2NhbGUoKSkgOiBjbGFtcCAhPT0gaWRlbnRpdHk7XG4gIH07XG5cbiAgc2NhbGUuaW50ZXJwb2xhdGUgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoaW50ZXJwb2xhdGUgPSBfLCByZXNjYWxlKCkpIDogaW50ZXJwb2xhdGU7XG4gIH07XG5cbiAgc2NhbGUudW5rbm93biA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/ICh1bmtub3duID0gXywgc2NhbGUpIDogdW5rbm93bjtcbiAgfTtcblxuICByZXR1cm4gZnVuY3Rpb24odCwgdSkge1xuICAgIHRyYW5zZm9ybSA9IHQsIHVudHJhbnNmb3JtID0gdTtcbiAgICByZXR1cm4gcmVzY2FsZSgpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb250aW51b3VzKCkge1xuICByZXR1cm4gdHJhbnNmb3JtZXIoKShpZGVudGl0eSwgaWRlbnRpdHkpO1xufVxuIiwgImltcG9ydCB7dGlja1N0ZXB9IGZyb20gXCJkMy1hcnJheVwiO1xuaW1wb3J0IHtmb3JtYXQsIGZvcm1hdFByZWZpeCwgZm9ybWF0U3BlY2lmaWVyLCBwcmVjaXNpb25GaXhlZCwgcHJlY2lzaW9uUHJlZml4LCBwcmVjaXNpb25Sb3VuZH0gZnJvbSBcImQzLWZvcm1hdFwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0aWNrRm9ybWF0KHN0YXJ0LCBzdG9wLCBjb3VudCwgc3BlY2lmaWVyKSB7XG4gIHZhciBzdGVwID0gdGlja1N0ZXAoc3RhcnQsIHN0b3AsIGNvdW50KSxcbiAgICAgIHByZWNpc2lvbjtcbiAgc3BlY2lmaWVyID0gZm9ybWF0U3BlY2lmaWVyKHNwZWNpZmllciA9PSBudWxsID8gXCIsZlwiIDogc3BlY2lmaWVyKTtcbiAgc3dpdGNoIChzcGVjaWZpZXIudHlwZSkge1xuICAgIGNhc2UgXCJzXCI6IHtcbiAgICAgIHZhciB2YWx1ZSA9IE1hdGgubWF4KE1hdGguYWJzKHN0YXJ0KSwgTWF0aC5hYnMoc3RvcCkpO1xuICAgICAgaWYgKHNwZWNpZmllci5wcmVjaXNpb24gPT0gbnVsbCAmJiAhaXNOYU4ocHJlY2lzaW9uID0gcHJlY2lzaW9uUHJlZml4KHN0ZXAsIHZhbHVlKSkpIHNwZWNpZmllci5wcmVjaXNpb24gPSBwcmVjaXNpb247XG4gICAgICByZXR1cm4gZm9ybWF0UHJlZml4KHNwZWNpZmllciwgdmFsdWUpO1xuICAgIH1cbiAgICBjYXNlIFwiXCI6XG4gICAgY2FzZSBcImVcIjpcbiAgICBjYXNlIFwiZ1wiOlxuICAgIGNhc2UgXCJwXCI6XG4gICAgY2FzZSBcInJcIjoge1xuICAgICAgaWYgKHNwZWNpZmllci5wcmVjaXNpb24gPT0gbnVsbCAmJiAhaXNOYU4ocHJlY2lzaW9uID0gcHJlY2lzaW9uUm91bmQoc3RlcCwgTWF0aC5tYXgoTWF0aC5hYnMoc3RhcnQpLCBNYXRoLmFicyhzdG9wKSkpKSkgc3BlY2lmaWVyLnByZWNpc2lvbiA9IHByZWNpc2lvbiAtIChzcGVjaWZpZXIudHlwZSA9PT0gXCJlXCIpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgXCJmXCI6XG4gICAgY2FzZSBcIiVcIjoge1xuICAgICAgaWYgKHNwZWNpZmllci5wcmVjaXNpb24gPT0gbnVsbCAmJiAhaXNOYU4ocHJlY2lzaW9uID0gcHJlY2lzaW9uRml4ZWQoc3RlcCkpKSBzcGVjaWZpZXIucHJlY2lzaW9uID0gcHJlY2lzaW9uIC0gKHNwZWNpZmllci50eXBlID09PSBcIiVcIikgKiAyO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBmb3JtYXQoc3BlY2lmaWVyKTtcbn1cbiIsICJpbXBvcnQge3RpY2tzLCB0aWNrSW5jcmVtZW50fSBmcm9tIFwiZDMtYXJyYXlcIjtcbmltcG9ydCBjb250aW51b3VzLCB7Y29weX0gZnJvbSBcIi4vY29udGludW91cy5qc1wiO1xuaW1wb3J0IHtpbml0UmFuZ2V9IGZyb20gXCIuL2luaXQuanNcIjtcbmltcG9ydCB0aWNrRm9ybWF0IGZyb20gXCIuL3RpY2tGb3JtYXQuanNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhcmlzaChzY2FsZSkge1xuICB2YXIgZG9tYWluID0gc2NhbGUuZG9tYWluO1xuXG4gIHNjYWxlLnRpY2tzID0gZnVuY3Rpb24oY291bnQpIHtcbiAgICB2YXIgZCA9IGRvbWFpbigpO1xuICAgIHJldHVybiB0aWNrcyhkWzBdLCBkW2QubGVuZ3RoIC0gMV0sIGNvdW50ID09IG51bGwgPyAxMCA6IGNvdW50KTtcbiAgfTtcblxuICBzY2FsZS50aWNrRm9ybWF0ID0gZnVuY3Rpb24oY291bnQsIHNwZWNpZmllcikge1xuICAgIHZhciBkID0gZG9tYWluKCk7XG4gICAgcmV0dXJuIHRpY2tGb3JtYXQoZFswXSwgZFtkLmxlbmd0aCAtIDFdLCBjb3VudCA9PSBudWxsID8gMTAgOiBjb3VudCwgc3BlY2lmaWVyKTtcbiAgfTtcblxuICBzY2FsZS5uaWNlID0gZnVuY3Rpb24oY291bnQpIHtcbiAgICBpZiAoY291bnQgPT0gbnVsbCkgY291bnQgPSAxMDtcblxuICAgIHZhciBkID0gZG9tYWluKCk7XG4gICAgdmFyIGkwID0gMDtcbiAgICB2YXIgaTEgPSBkLmxlbmd0aCAtIDE7XG4gICAgdmFyIHN0YXJ0ID0gZFtpMF07XG4gICAgdmFyIHN0b3AgPSBkW2kxXTtcbiAgICB2YXIgcHJlc3RlcDtcbiAgICB2YXIgc3RlcDtcbiAgICB2YXIgbWF4SXRlciA9IDEwO1xuXG4gICAgaWYgKHN0b3AgPCBzdGFydCkge1xuICAgICAgc3RlcCA9IHN0YXJ0LCBzdGFydCA9IHN0b3AsIHN0b3AgPSBzdGVwO1xuICAgICAgc3RlcCA9IGkwLCBpMCA9IGkxLCBpMSA9IHN0ZXA7XG4gICAgfVxuICAgIFxuICAgIHdoaWxlIChtYXhJdGVyLS0gPiAwKSB7XG4gICAgICBzdGVwID0gdGlja0luY3JlbWVudChzdGFydCwgc3RvcCwgY291bnQpO1xuICAgICAgaWYgKHN0ZXAgPT09IHByZXN0ZXApIHtcbiAgICAgICAgZFtpMF0gPSBzdGFydFxuICAgICAgICBkW2kxXSA9IHN0b3BcbiAgICAgICAgcmV0dXJuIGRvbWFpbihkKTtcbiAgICAgIH0gZWxzZSBpZiAoc3RlcCA+IDApIHtcbiAgICAgICAgc3RhcnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gc3RlcCkgKiBzdGVwO1xuICAgICAgICBzdG9wID0gTWF0aC5jZWlsKHN0b3AgLyBzdGVwKSAqIHN0ZXA7XG4gICAgICB9IGVsc2UgaWYgKHN0ZXAgPCAwKSB7XG4gICAgICAgIHN0YXJ0ID0gTWF0aC5jZWlsKHN0YXJ0ICogc3RlcCkgLyBzdGVwO1xuICAgICAgICBzdG9wID0gTWF0aC5mbG9vcihzdG9wICogc3RlcCkgLyBzdGVwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBwcmVzdGVwID0gc3RlcDtcbiAgICB9XG5cbiAgICByZXR1cm4gc2NhbGU7XG4gIH07XG5cbiAgcmV0dXJuIHNjYWxlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBsaW5lYXIoKSB7XG4gIHZhciBzY2FsZSA9IGNvbnRpbnVvdXMoKTtcblxuICBzY2FsZS5jb3B5ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGNvcHkoc2NhbGUsIGxpbmVhcigpKTtcbiAgfTtcblxuICBpbml0UmFuZ2UuYXBwbHkoc2NhbGUsIGFyZ3VtZW50cyk7XG5cbiAgcmV0dXJuIGxpbmVhcmlzaChzY2FsZSk7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc3BlY2lmaWVyKSB7XG4gIHZhciBuID0gc3BlY2lmaWVyLmxlbmd0aCAvIDYgfCAwLCBjb2xvcnMgPSBuZXcgQXJyYXkobiksIGkgPSAwO1xuICB3aGlsZSAoaSA8IG4pIGNvbG9yc1tpXSA9IFwiI1wiICsgc3BlY2lmaWVyLnNsaWNlKGkgKiA2LCArK2kgKiA2KTtcbiAgcmV0dXJuIGNvbG9ycztcbn1cbiIsICJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY29sb3JzKFwiMWY3N2I0ZmY3ZjBlMmNhMDJjZDYyNzI4OTQ2N2JkOGM1NjRiZTM3N2MyN2Y3ZjdmYmNiZDIyMTdiZWNmXCIpO1xuIiwgImV4cG9ydCBmdW5jdGlvbiBUcmFuc2Zvcm0oaywgeCwgeSkge1xuICB0aGlzLmsgPSBrO1xuICB0aGlzLnggPSB4O1xuICB0aGlzLnkgPSB5O1xufVxuXG5UcmFuc2Zvcm0ucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogVHJhbnNmb3JtLFxuICBzY2FsZTogZnVuY3Rpb24oaykge1xuICAgIHJldHVybiBrID09PSAxID8gdGhpcyA6IG5ldyBUcmFuc2Zvcm0odGhpcy5rICogaywgdGhpcy54LCB0aGlzLnkpO1xuICB9LFxuICB0cmFuc2xhdGU6IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICByZXR1cm4geCA9PT0gMCAmIHkgPT09IDAgPyB0aGlzIDogbmV3IFRyYW5zZm9ybSh0aGlzLmssIHRoaXMueCArIHRoaXMuayAqIHgsIHRoaXMueSArIHRoaXMuayAqIHkpO1xuICB9LFxuICBhcHBseTogZnVuY3Rpb24ocG9pbnQpIHtcbiAgICByZXR1cm4gW3BvaW50WzBdICogdGhpcy5rICsgdGhpcy54LCBwb2ludFsxXSAqIHRoaXMuayArIHRoaXMueV07XG4gIH0sXG4gIGFwcGx5WDogZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiB4ICogdGhpcy5rICsgdGhpcy54O1xuICB9LFxuICBhcHBseVk6IGZ1bmN0aW9uKHkpIHtcbiAgICByZXR1cm4geSAqIHRoaXMuayArIHRoaXMueTtcbiAgfSxcbiAgaW52ZXJ0OiBmdW5jdGlvbihsb2NhdGlvbikge1xuICAgIHJldHVybiBbKGxvY2F0aW9uWzBdIC0gdGhpcy54KSAvIHRoaXMuaywgKGxvY2F0aW9uWzFdIC0gdGhpcy55KSAvIHRoaXMua107XG4gIH0sXG4gIGludmVydFg6IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gKHggLSB0aGlzLngpIC8gdGhpcy5rO1xuICB9LFxuICBpbnZlcnRZOiBmdW5jdGlvbih5KSB7XG4gICAgcmV0dXJuICh5IC0gdGhpcy55KSAvIHRoaXMuaztcbiAgfSxcbiAgcmVzY2FsZVg6IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4geC5jb3B5KCkuZG9tYWluKHgucmFuZ2UoKS5tYXAodGhpcy5pbnZlcnRYLCB0aGlzKS5tYXAoeC5pbnZlcnQsIHgpKTtcbiAgfSxcbiAgcmVzY2FsZVk6IGZ1bmN0aW9uKHkpIHtcbiAgICByZXR1cm4geS5jb3B5KCkuZG9tYWluKHkucmFuZ2UoKS5tYXAodGhpcy5pbnZlcnRZLCB0aGlzKS5tYXAoeS5pbnZlcnQsIHkpKTtcbiAgfSxcbiAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIHRoaXMueCArIFwiLFwiICsgdGhpcy55ICsgXCIpIHNjYWxlKFwiICsgdGhpcy5rICsgXCIpXCI7XG4gIH1cbn07XG5cbmV4cG9ydCB2YXIgaWRlbnRpdHkgPSBuZXcgVHJhbnNmb3JtKDEsIDAsIDApO1xuXG50cmFuc2Zvcm0ucHJvdG90eXBlID0gVHJhbnNmb3JtLnByb3RvdHlwZTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdHJhbnNmb3JtKG5vZGUpIHtcbiAgd2hpbGUgKCFub2RlLl9fem9vbSkgaWYgKCEobm9kZSA9IG5vZGUucGFyZW50Tm9kZSkpIHJldHVybiBpZGVudGl0eTtcbiAgcmV0dXJuIG5vZGUuX196b29tO1xufVxuIiwgImltcG9ydCB7IE5vdGljZSwgTW9kYWwsIHNldEljb24gfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBTdG9yeUVuZ2luZVBsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xuaW1wb3J0IHtcblx0Q2hhcmFjdGVyLFxuXHRDaGFyYWN0ZXJUcmFpdCxcblx0Q2hhcmFjdGVyUmVsYXRpb25zaGlwLFxuXHRXb3JsZEV2ZW50LFxuXHRTY2VuZSxcblx0U3RvcnksXG5cdEFyY2hldHlwZSxcblx0VHJhaXQsXG5cdFdvcmxkLFxufSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuZXhwb3J0IGNsYXNzIENoYXJhY3RlckRldGFpbHNWaWV3IHtcblx0cHJpdmF0ZSBwbHVnaW46IFN0b3J5RW5naW5lUGx1Z2luO1xuXHRjaGFyYWN0ZXI6IENoYXJhY3RlcjsgLy8gTWFkZSBwdWJsaWMgZm9yIGFjY2VzcyBmcm9tIFN0b3J5TGlzdFZpZXdcblx0cHJpdmF0ZSB3b3JsZDogV29ybGQgfCBudWxsO1xuXHRwcml2YXRlIGNoYXJhY3RlcnM6IENoYXJhY3RlcltdO1xuXHRwcml2YXRlIGFyY2hldHlwZXM6IEFyY2hldHlwZVtdO1xuXHRwcml2YXRlIHRyYWl0czogVHJhaXRbXTtcblx0cHJpdmF0ZSBldmVudHM6IFdvcmxkRXZlbnRbXTtcblx0cHJpdmF0ZSBoZWFkZXJFbDogSFRNTEVsZW1lbnQ7XG5cdHByaXZhdGUgY29udGVudEVsOiBIVE1MRWxlbWVudDtcblx0cHJpdmF0ZSBvbkJhY2s6ICgpID0+IHZvaWQ7XG5cdHByaXZhdGUgb25FZGl0Q2hhcmFjdGVyOiAoY2hhcmFjdGVyOiBDaGFyYWN0ZXIpID0+IHZvaWQ7XG5cblx0Ly8gU3RhdGVcblx0cHJpdmF0ZSBjaGFyYWN0ZXJUYWI6IFwib3ZlcnZpZXdcIiB8IFwidHJhaXRzXCIgfCBcImV2ZW50c1wiIHwgXCJzY2VuZXNcIiB8IFwicmVsYXRpb25zaGlwc1wiID0gXCJvdmVydmlld1wiO1xuXHRwcml2YXRlIGNoYXJhY3RlclRyYWl0czogQ2hhcmFjdGVyVHJhaXRbXSA9IFtdO1xuXHRwcml2YXRlIGNoYXJhY3RlckV2ZW50czogeyBldmVudDogV29ybGRFdmVudDsgcm9sZT86IHN0cmluZyB9W10gPSBbXTtcblx0cHJpdmF0ZSBjaGFyYWN0ZXJTY2VuZXM6IHsgc2NlbmU6IFNjZW5lOyBzdG9yeTogU3Rvcnk7IHR5cGU6IFwicG92XCIgfCBcImNvYWRqdXZhbnRlXCIgfVtdID0gW107XG5cdHByaXZhdGUgY2hhcmFjdGVyUmVsYXRpb25zaGlwczogQ2hhcmFjdGVyUmVsYXRpb25zaGlwW10gPSBbXTtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwbHVnaW46IFN0b3J5RW5naW5lUGx1Z2luLFxuXHRcdGNoYXJhY3RlcjogQ2hhcmFjdGVyLFxuXHRcdGhlYWRlckVsOiBIVE1MRWxlbWVudCxcblx0XHRjb250ZW50RWw6IEhUTUxFbGVtZW50LFxuXHRcdG9uQmFjazogKCkgPT4gdm9pZCxcblx0XHRvbkVkaXRDaGFyYWN0ZXI6IChjaGFyYWN0ZXI6IENoYXJhY3RlcikgPT4gdm9pZCxcblx0XHR3b3JsZDogV29ybGQgfCBudWxsID0gbnVsbCxcblx0XHRjaGFyYWN0ZXJzOiBDaGFyYWN0ZXJbXSA9IFtdLFxuXHRcdGFyY2hldHlwZXM6IEFyY2hldHlwZVtdID0gW10sXG5cdFx0dHJhaXRzOiBUcmFpdFtdID0gW10sXG5cdFx0ZXZlbnRzOiBXb3JsZEV2ZW50W10gPSBbXVxuXHQpIHtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0XHR0aGlzLmNoYXJhY3RlciA9IGNoYXJhY3Rlcjtcblx0XHR0aGlzLndvcmxkID0gd29ybGQ7XG5cdFx0dGhpcy5jaGFyYWN0ZXJzID0gY2hhcmFjdGVycztcblx0XHR0aGlzLmFyY2hldHlwZXMgPSBhcmNoZXR5cGVzO1xuXHRcdHRoaXMudHJhaXRzID0gdHJhaXRzO1xuXHRcdHRoaXMuZXZlbnRzID0gZXZlbnRzO1xuXHRcdHRoaXMuaGVhZGVyRWwgPSBoZWFkZXJFbDtcblx0XHR0aGlzLmNvbnRlbnRFbCA9IGNvbnRlbnRFbDtcblx0XHR0aGlzLm9uQmFjayA9IG9uQmFjaztcblx0XHR0aGlzLm9uRWRpdENoYXJhY3RlciA9IG9uRWRpdENoYXJhY3Rlcjtcblx0fVxuXG5cdGFzeW5jIHJlbmRlcigpIHtcblx0XHRhd2FpdCB0aGlzLmxvYWRDaGFyYWN0ZXJEYXRhKCk7XG5cdFx0dGhpcy5yZW5kZXJIZWFkZXIoKTtcblx0XHR0aGlzLnJlbmRlckNvbnRlbnQoKTtcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyQ29udGVudCgpIHtcblx0XHQvLyBDbGVhciBjb250ZW50IGNvbXBsZXRlbHlcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXHRcdFxuXHRcdC8vIENyZWF0ZSBtYWluIGNvbnRhaW5lciBmb3IgdGFicyBhbmQgY29udGVudFxuXHRcdGNvbnN0IG1haW5Db250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwiY2hhcmFjdGVyLWRldGFpbHMtY29udGFpbmVyXCIgfSk7XG5cdFx0XG5cdFx0Ly8gUmVuZGVyIHRhYnNcblx0XHR0aGlzLnJlbmRlclRhYnMobWFpbkNvbnRhaW5lcik7XG5cdFx0XG5cdFx0Ly8gUmVuZGVyIHRhYiBjb250ZW50XG5cdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KG1haW5Db250YWluZXIpO1xuXHR9XG5cblx0YXN5bmMgbG9hZENoYXJhY3RlckRhdGEoKSB7XG5cdFx0dHJ5IHtcblx0XHRcdC8vIExvYWQgY2hhcmFjdGVyIHRyYWl0c1xuXHRcdFx0dGhpcy5jaGFyYWN0ZXJUcmFpdHMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q2hhcmFjdGVyVHJhaXRzKHRoaXMuY2hhcmFjdGVyLmlkKTtcblxuXHRcdFx0Ly8gTG9hZCBjaGFyYWN0ZXIgZXZlbnRzXG5cdFx0XHRjb25zdCBldmVudENoYXJhY3RlcnMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q2hhcmFjdGVyRXZlbnRzKHRoaXMuY2hhcmFjdGVyLmlkKTtcblx0XHRcdHRoaXMuY2hhcmFjdGVyRXZlbnRzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG5cdFx0XHRcdGV2ZW50Q2hhcmFjdGVycy5tYXAoYXN5bmMgKGVjKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgZXZlbnQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0RXZlbnQoZWMuZXZlbnRfaWQpO1xuXHRcdFx0XHRcdHJldHVybiB7IGV2ZW50LCByb2xlOiBlYy5yb2xlIHx8IHVuZGVmaW5lZCB9O1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdFx0Ly8gTG9hZCBjaGFyYWN0ZXIgcmVsYXRpb25zaGlwc1xuXHRcdFx0dGhpcy5jaGFyYWN0ZXJSZWxhdGlvbnNoaXBzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldENoYXJhY3RlclJlbGF0aW9uc2hpcHModGhpcy5jaGFyYWN0ZXIuaWQpO1xuXG5cdFx0XHQvLyBMb2FkIGNoYXJhY3RlciBzY2VuZXMgKHdvcmthcm91bmQpXG5cdFx0XHR0aGlzLmNoYXJhY3RlclNjZW5lcyA9IFtdO1xuXHRcdFx0aWYgKHRoaXMud29ybGQpIHtcblx0XHRcdFx0Ly8gR2V0IGFsbCBzdG9yaWVzIGZvciB0aGlzIHdvcmxkXG5cdFx0XHRcdGNvbnN0IGFsbFN0b3JpZXMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQubGlzdFN0b3JpZXMoKTtcblx0XHRcdFx0Y29uc3Qgd29ybGRTdG9yaWVzID0gYWxsU3Rvcmllcy5maWx0ZXIoKHMpID0+IHMud29ybGRfaWQgPT09IHRoaXMud29ybGQhLmlkKTtcblxuXHRcdFx0XHRmb3IgKGNvbnN0IHN0b3J5IG9mIHdvcmxkU3Rvcmllcykge1xuXHRcdFx0XHRcdC8vIEdldCBhbGwgc2NlbmVzIGZvciB0aGlzIHN0b3J5XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldFNjZW5lc0J5U3Rvcnkoc3RvcnkuaWQpO1xuXG5cdFx0XHRcdFx0Ly8gRmlsdGVyIFBPViBzY2VuZXNcblx0XHRcdFx0XHRjb25zdCBwb3ZTY2VuZXMgPSBzY2VuZXMuZmlsdGVyKChzKSA9PiBzLnBvdl9jaGFyYWN0ZXJfaWQgPT09IHRoaXMuY2hhcmFjdGVyLmlkKTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIHBvdlNjZW5lcykge1xuXHRcdFx0XHRcdFx0dGhpcy5jaGFyYWN0ZXJTY2VuZXMucHVzaCh7IHNjZW5lLCBzdG9yeSwgdHlwZTogXCJwb3ZcIiB9KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBGaWx0ZXIgY29hZGp1dmFudGUgc2NlbmVzICh2aWEgU2NlbmVSZWZlcmVuY2VzKVxuXHRcdFx0XHRcdGZvciAoY29uc3Qgc2NlbmUgb2Ygc2NlbmVzKSB7XG5cdFx0XHRcdFx0XHRjb25zdCByZWZzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldFNjZW5lUmVmZXJlbmNlcyhzY2VuZS5pZCk7XG5cdFx0XHRcdFx0XHRjb25zdCBjaGFyUmVmID0gcmVmcy5maW5kKFxuXHRcdFx0XHRcdFx0XHQocikgPT4gci5lbnRpdHlfdHlwZSA9PT0gXCJjaGFyYWN0ZXJcIiAmJiByLmVudGl0eV9pZCA9PT0gdGhpcy5jaGFyYWN0ZXIuaWRcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRpZiAoY2hhclJlZikge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmNoYXJhY3RlclNjZW5lcy5wdXNoKHsgc2NlbmUsIHN0b3J5LCB0eXBlOiBcImNvYWRqdXZhbnRlXCIgfSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gbG9hZCBjaGFyYWN0ZXIgZGF0YVwiO1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdH1cblx0fVxuXG5cdHJlbmRlckhlYWRlcigpIHtcblx0XHRpZiAoIXRoaXMuaGVhZGVyRWwpIHJldHVybjtcblxuXHRcdHRoaXMuaGVhZGVyRWwuZW1wdHkoKTtcblxuXHRcdGNvbnN0IGhlYWRlckxlZnQgPSB0aGlzLmhlYWRlckVsLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaGVhZGVyLWxlZnRcIiB9KTtcblxuXHRcdGNvbnN0IGJhY2tCdXR0b24gPSBoZWFkZXJMZWZ0LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiXHUyMTkwIEJhY2tcIixcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtYmFjay1idG5cIixcblx0XHR9KTtcblx0XHRiYWNrQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLm9uQmFjaygpO1xuXHRcdH07XG5cblx0XHRjb25zdCB0aXRsZURpdiA9IGhlYWRlckxlZnQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1oZWFkZXItdGl0bGVcIiB9KTtcblx0XHRjb25zdCB0aXRsZVJvdyA9IHRpdGxlRGl2LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGUtcm93XCIgfSk7XG5cdFx0dGl0bGVSb3cuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IHRoaXMuY2hhcmFjdGVyLm5hbWUgfSk7XG5cblx0XHQvLyBBcmNoZXR5cGUgcGlsbFxuXHRcdGlmICh0aGlzLmNoYXJhY3Rlci5hcmNoZXR5cGVfaWQpIHtcblx0XHRcdGNvbnN0IGFyY2hldHlwZSA9IHRoaXMuYXJjaGV0eXBlcy5maW5kKChhKSA9PiBhLmlkID09PSB0aGlzLmNoYXJhY3Rlci5hcmNoZXR5cGVfaWQpO1xuXHRcdFx0aWYgKGFyY2hldHlwZSkge1xuXHRcdFx0XHRjb25zdCBhcmNoZXR5cGVQaWxsID0gdGl0bGVSb3cuY3JlYXRlU3Bhbih7IGNsczogXCJzdG9yeS1lbmdpbmUtYmFkZ2VcIiB9KTtcblx0XHRcdFx0YXJjaGV0eXBlUGlsbC50ZXh0Q29udGVudCA9IGFyY2hldHlwZS5uYW1lO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENvcHkgSUQgYnV0dG9uIHdpdGggdG9vbHRpcFxuXHRcdGNvbnN0IGNvcHlJZEJ0biA9IHRpdGxlUm93LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWNvcHktaWQtYnRuXCIsXG5cdFx0XHRhdHRyOiB7IFxuXHRcdFx0XHRcImFyaWEtbGFiZWxcIjogXCJDb3B5IElEXCIsXG5cdFx0XHRcdFwidGl0bGVcIjogYElEOiAke3RoaXMuY2hhcmFjdGVyLmlkfVxcbkNsaWNrIHRvIGNvcHlgXG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihjb3B5SWRCdG4sIFwiY29weVwiKTtcblx0XHRjb3B5SWRCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRoaXMuY2hhcmFjdGVyLmlkKTtcblx0XHRcdG5ldyBOb3RpY2UoXCJVVUlEIGNvcGllZCB0byBjbGlwYm9hcmRcIik7XG5cdFx0fTtcblxuXHRcdGNvbnN0IGhlYWRlclJpZ2h0ID0gdGhpcy5oZWFkZXJFbC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWhlYWRlci1yaWdodFwiIH0pO1xuXHRcdGNvbnN0IG1lbnVCdXR0b24gPSBoZWFkZXJSaWdodC5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiRWRpdCBDaGFyYWN0ZXJcIiB9KTtcblx0XHRtZW51QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLm9uRWRpdENoYXJhY3Rlcih0aGlzLmNoYXJhY3Rlcik7XG5cdFx0fTtcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyVGFicyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0Y29uc3QgdGFic0NvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwiY2hhcmFjdGVyLWRldGFpbHMtdGFic1wiIH0pO1xuXHRcdFxuXHRcdHR5cGUgVGFiS2V5ID0gXCJvdmVydmlld1wiIHwgXCJ0cmFpdHNcIiB8IFwiZXZlbnRzXCIgfCBcInNjZW5lc1wiIHwgXCJyZWxhdGlvbnNoaXBzXCI7XG5cdFx0Y29uc3QgdGFiczogeyBrZXk6IFRhYktleTsgbGFiZWw6IHN0cmluZyB9W10gPSBbXG5cdFx0XHR7IGtleTogXCJvdmVydmlld1wiLCBsYWJlbDogXCJPdmVydmlld1wiIH0sXG5cdFx0XHR7IGtleTogXCJ0cmFpdHNcIiwgbGFiZWw6IFwiVHJhaXRzXCIgfSxcblx0XHRcdHsga2V5OiBcImV2ZW50c1wiLCBsYWJlbDogXCJFdmVudHNcIiB9LFxuXHRcdFx0eyBrZXk6IFwic2NlbmVzXCIsIGxhYmVsOiBcIlNjZW5lc1wiIH0sXG5cdFx0XHR7IGtleTogXCJyZWxhdGlvbnNoaXBzXCIsIGxhYmVsOiBcIlJlbGF0aW9uc2hpcHNcIiB9LFxuXHRcdF07XG5cblx0XHR0YWJzLmZvckVhY2godGFiID0+IHtcblx0XHRcdGNvbnN0IGlzQWN0aXZlID0gdGhpcy5jaGFyYWN0ZXJUYWIgPT09IHRhYi5rZXk7XG5cdFx0XHRjb25zdCB0YWJCdXR0b24gPSB0YWJzQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0dGV4dDogdGFiLmxhYmVsLFxuXHRcdFx0XHRjbHM6IGlzQWN0aXZlID8gXCJjaGFyYWN0ZXItdGFiIGNoYXJhY3Rlci10YWItYWN0aXZlXCIgOiBcImNoYXJhY3Rlci10YWJcIixcblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHR0YWJCdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMuY2hhcmFjdGVyVGFiICE9PSB0YWIua2V5KSB7XG5cdFx0XHRcdFx0dGhpcy5jaGFyYWN0ZXJUYWIgPSB0YWIua2V5O1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJUYWJDb250ZW50KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRjb25zdCBjb250ZW50Q29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJjaGFyYWN0ZXItZGV0YWlscy1jb250ZW50LWlubmVyXCIgfSk7XG5cblx0XHRzd2l0Y2ggKHRoaXMuY2hhcmFjdGVyVGFiKSB7XG5cdFx0XHRjYXNlIFwib3ZlcnZpZXdcIjpcblx0XHRcdFx0dGhpcy5yZW5kZXJPdmVydmlld1RhYihjb250ZW50Q29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwidHJhaXRzXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyVHJhaXRzVGFiKGNvbnRlbnRDb250YWluZXIpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJldmVudHNcIjpcblx0XHRcdFx0dGhpcy5yZW5kZXJFdmVudHNUYWIoY29udGVudENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcInNjZW5lc1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlclNjZW5lc1RhYihjb250ZW50Q29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwicmVsYXRpb25zaGlwc1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlclJlbGF0aW9uc2hpcHNUYWIoY29udGVudENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXG5cdHJlbmRlck92ZXJ2aWV3VGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHQvLyBEZXNjcmlwdGlvbiAoZWRpdGFibGUgdGV4dGFyZWEpXG5cdFx0Y29uc3QgZGVzY1NlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWN0aW9uXCIgfSk7XG5cdFx0ZGVzY1NlY3Rpb24uY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjVGV4dGFyZWEgPSBkZXNjU2VjdGlvbi5jcmVhdGVFbChcInRleHRhcmVhXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIixcblx0XHRcdGF0dHI6IHsgcm93czogXCI1XCIgfSxcblx0XHR9KTtcblx0XHRkZXNjVGV4dGFyZWEudmFsdWUgPSB0aGlzLmNoYXJhY3Rlci5kZXNjcmlwdGlvbiB8fCBcIlwiO1xuXHRcdGRlc2NUZXh0YXJlYS5wbGFjZWhvbGRlciA9IFwiRW50ZXIgY2hhcmFjdGVyIGRlc2NyaXB0aW9uLi4uXCI7XG5cblx0XHRjb25zdCBkZXNjQWN0aW9ucyA9IGRlc2NTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtYWN0aW9uc1wiIH0pO1xuXHRcdGNvbnN0IHNhdmVEZXNjQnRuID0gZGVzY0FjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlNhdmUgRGVzY3JpcHRpb25cIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlRGVzY0J0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgdXBkYXRlZCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVDaGFyYWN0ZXIodGhpcy5jaGFyYWN0ZXIuaWQsIHtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY1RleHRhcmVhLnZhbHVlLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0dGhpcy5jaGFyYWN0ZXIgPSB1cGRhdGVkO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiRGVzY3JpcHRpb24gc2F2ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIEFyY2hldHlwZSBkcm9wZG93blxuXHRcdGNvbnN0IGFyY2hldHlwZVNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWN0aW9uXCIgfSk7XG5cdFx0YXJjaGV0eXBlU2VjdGlvbi5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJBcmNoZXR5cGVcIiB9KTtcblx0XHRjb25zdCBhcmNoZXR5cGVTZWxlY3QgPSBhcmNoZXR5cGVTZWN0aW9uLmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblxuXHRcdC8vIEFkZCBcIk5vbmVcIiBvcHRpb25cblx0XHRjb25zdCBub25lT3B0aW9uID0gYXJjaGV0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogXCJOb25lXCIsIHZhbHVlOiBcIlwiIH0pO1xuXHRcdGlmICghdGhpcy5jaGFyYWN0ZXIuYXJjaGV0eXBlX2lkKSB7XG5cdFx0XHRub25lT3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBBZGQgYXJjaGV0eXBlIG9wdGlvbnNcblx0XHRmb3IgKGNvbnN0IGFyY2hldHlwZSBvZiB0aGlzLmFyY2hldHlwZXMpIHtcblx0XHRcdGNvbnN0IG9wdGlvbiA9IGFyY2hldHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7XG5cdFx0XHRcdHRleHQ6IGFyY2hldHlwZS5uYW1lLFxuXHRcdFx0XHR2YWx1ZTogYXJjaGV0eXBlLmlkLFxuXHRcdFx0fSk7XG5cdFx0XHRpZiAodGhpcy5jaGFyYWN0ZXIuYXJjaGV0eXBlX2lkID09PSBhcmNoZXR5cGUuaWQpIHtcblx0XHRcdFx0b3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRjb25zdCBhcmNoZXR5cGVBY3Rpb25zID0gYXJjaGV0eXBlU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWFjdGlvbnNcIiB9KTtcblx0XHRjb25zdCBzYXZlQXJjaGV0eXBlQnRuID0gYXJjaGV0eXBlQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZSBBcmNoZXR5cGVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlQXJjaGV0eXBlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCBhcmNoZXR5cGVJZCA9IGFyY2hldHlwZVNlbGVjdC52YWx1ZSB8fCBudWxsO1xuXHRcdFx0XHRjb25zdCB1cGRhdGVkID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUNoYXJhY3Rlcih0aGlzLmNoYXJhY3Rlci5pZCwge1xuXHRcdFx0XHRcdGFyY2hldHlwZV9pZDogYXJjaGV0eXBlSWQsXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHR0aGlzLmNoYXJhY3RlciA9IHVwZGF0ZWQ7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZENoYXJhY3RlckRhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJIZWFkZXIoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50KCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJBcmNoZXR5cGUgc2F2ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdHJlbmRlclRyYWl0c1RhYihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0Y29uc3QgYWN0aW9uc0JhciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWFjdGlvbnMtYmFyXCIgfSk7XG5cdFx0Y29uc3QgYWRkQnRuID0gYWN0aW9uc0Jhci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQWRkIFRyYWl0XCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0YWRkQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLnNob3dBZGRUcmFpdE1vZGFsKCk7XG5cdFx0fTtcblxuXHRcdGlmICh0aGlzLmNoYXJhY3RlclRyYWl0cy5sZW5ndGggPT09IDApIHtcblx0XHRcdGNvbnRhaW5lci5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIHRyYWl0cyBhc3NpZ25lZC4gQWRkIGEgdHJhaXQgdG8gZ2V0IHN0YXJ0ZWQhXCIgfSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblx0XHRmb3IgKGNvbnN0IGNoYXJUcmFpdCBvZiB0aGlzLmNoYXJhY3RlclRyYWl0cykge1xuXHRcdFx0Y29uc3QgaXRlbSA9IGxpc3QuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtXCIgfSk7XG5cblx0XHRcdGNvbnN0IHRpdGxlUm93ID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXRpdGxlXCIgfSk7XG5cdFx0XHR0aXRsZVJvdy5jcmVhdGVFbChcInN0cm9uZ1wiLCB7IHRleHQ6IGNoYXJUcmFpdC50cmFpdF9uYW1lIH0pO1xuXHRcdFx0Y29uc3QgY2F0ZWdvcnlQaWxsID0gdGl0bGVSb3cuY3JlYXRlU3Bhbih7IGNsczogXCJzdG9yeS1lbmdpbmUtYmFkZ2VcIiB9KTtcblx0XHRcdGNhdGVnb3J5UGlsbC50ZXh0Q29udGVudCA9IGNoYXJUcmFpdC50cmFpdF9jYXRlZ29yeTtcblxuXHRcdFx0Y29uc3QgbWV0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIgfSk7XG5cdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGBWYWx1ZTogJHtjaGFyVHJhaXQudmFsdWUgfHwgXCJOL0FcIn1gIH0pO1xuXHRcdFx0aWYgKGNoYXJUcmFpdC5ub3Rlcykge1xuXHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGAgfCBOb3RlczogJHtjaGFyVHJhaXQubm90ZXN9YCB9KTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgYWN0aW9ucyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtLWFjdGlvbnNcIiB9KTtcblx0XHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkVkaXRcIiB9KS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnNob3dFZGl0VHJhaXRNb2RhbChjaGFyVHJhaXQpO1xuXHRcdFx0fTtcblx0XHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkRlbGV0ZVwiIH0pLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGlmIChjb25maXJtKGBSZW1vdmUgdHJhaXQgXCIke2NoYXJUcmFpdC50cmFpdF9uYW1lfVwiP2ApKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5yZW1vdmVDaGFyYWN0ZXJUcmFpdCh0aGlzLmNoYXJhY3Rlci5pZCwgY2hhclRyYWl0LnRyYWl0X2lkKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZENoYXJhY3RlckRhdGEoKTtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIlRyYWl0IHJlbW92ZWRcIik7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyRXZlbnRzVGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRjb25zdCBhY3Rpb25zQmFyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtYWN0aW9ucy1iYXJcIiB9KTtcblx0XHRjb25zdCBhZGRCdG4gPSBhY3Rpb25zQmFyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJBZGQgRXZlbnRcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRhZGRCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdHRoaXMuc2hvd0FkZEV2ZW50TW9kYWwoKTtcblx0XHR9O1xuXG5cdFx0aWYgKHRoaXMuY2hhcmFjdGVyRXZlbnRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Y29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gZXZlbnRzIGFzc2lnbmVkLiBBZGQgYW4gZXZlbnQgdG8gZ2V0IHN0YXJ0ZWQhXCIgfSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblx0XHRmb3IgKGNvbnN0IHsgZXZlbnQsIHJvbGUgfSBvZiB0aGlzLmNoYXJhY3RlckV2ZW50cykge1xuXHRcdFx0Y29uc3QgaXRlbSA9IGxpc3QuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtXCIgfSk7XG5cdFx0XHRpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIiwgdGV4dDogZXZlbnQubmFtZSB9KTtcblxuXHRcdFx0Y29uc3QgbWV0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIgfSk7XG5cdFx0XHRpZiAocm9sZSkge1xuXHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGBSb2xlOiAke3JvbGV9YCB9KTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgYWN0aW9ucyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtLWFjdGlvbnNcIiB9KTtcblx0XHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkVkaXQgUm9sZVwiIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuc2hvd0VkaXRFdmVudFJvbGVNb2RhbChldmVudCwgcm9sZSk7XG5cdFx0XHR9O1xuXHRcdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiUmVtb3ZlXCIgfSkub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0aWYgKGNvbmZpcm0oYFJlbW92ZSBjaGFyYWN0ZXIgZnJvbSBldmVudCBcIiR7ZXZlbnQubmFtZX1cIj9gKSkge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQucmVtb3ZlRXZlbnRDaGFyYWN0ZXIoZXZlbnQuaWQsIHRoaXMuY2hhcmFjdGVyLmlkKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZENoYXJhY3RlckRhdGEoKTtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkNoYXJhY3RlciByZW1vdmVkIGZyb20gZXZlbnRcIik7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyU2NlbmVzVGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRpZiAodGhpcy5jaGFyYWN0ZXJTY2VuZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBzY2VuZXMgZm91bmQgZm9yIHRoaXMgY2hhcmFjdGVyLlwiIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGxpc3QgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1saXN0XCIgfSk7XG5cdFx0Zm9yIChjb25zdCB7IHNjZW5lLCBzdG9yeSwgdHlwZSB9IG9mIHRoaXMuY2hhcmFjdGVyU2NlbmVzKSB7XG5cdFx0XHRjb25zdCBpdGVtID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIiB9KTtcblxuXHRcdFx0Y29uc3QgdGl0bGVSb3cgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIiB9KTtcblx0XHRcdHRpdGxlUm93LmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IHNjZW5lLmdvYWwgfHwgXCJObyBnb2FsXCIgfSk7XG5cblx0XHRcdGNvbnN0IHR5cGVQaWxsID0gdGl0bGVSb3cuY3JlYXRlU3Bhbih7XG5cdFx0XHRcdGNsczpcblx0XHRcdFx0XHR0eXBlID09PSBcInBvdlwiXG5cdFx0XHRcdFx0XHQ/IFwic3RvcnktZW5naW5lLWJhZGdlIHN0b3J5LWVuZ2luZS1iYWRnZS1ncmVlblwiXG5cdFx0XHRcdFx0XHQ6IFwic3RvcnktZW5naW5lLWJhZGdlIHN0b3J5LWVuZ2luZS1iYWRnZS1ibHVlXCIsXG5cdFx0XHR9KTtcblx0XHRcdHR5cGVQaWxsLnRleHRDb250ZW50ID0gdHlwZSA9PT0gXCJwb3ZcIiA/IFwiUE9WXCIgOiBcIkNvYWRqdXZhbnRlXCI7XG5cblx0XHRcdGNvbnN0IG1ldGEgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbWV0YVwiIH0pO1xuXHRcdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBgU3Rvcnk6ICR7c3RvcnkudGl0bGV9YCB9KTtcblx0XHR9XG5cdH1cblxuXHRyZW5kZXJSZWxhdGlvbnNoaXBzVGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRjb25zdCBhY3Rpb25zQmFyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtYWN0aW9ucy1iYXJcIiB9KTtcblx0XHRjb25zdCBhZGRCdG4gPSBhY3Rpb25zQmFyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJBZGQgUmVsYXRpb25zaGlwXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0YWRkQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLnNob3dBZGRSZWxhdGlvbnNoaXBNb2RhbCgpO1xuXHRcdH07XG5cblx0XHRpZiAodGhpcy5jaGFyYWN0ZXJSZWxhdGlvbnNoaXBzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Y29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gcmVsYXRpb25zaGlwcyBkZWZpbmVkLiBBZGQgYSByZWxhdGlvbnNoaXAgdG8gZ2V0IHN0YXJ0ZWQhXCIgfSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblx0XHRmb3IgKGNvbnN0IHJlbCBvZiB0aGlzLmNoYXJhY3RlclJlbGF0aW9uc2hpcHMpIHtcblx0XHRcdC8vIERldGVybWluZSB0aGUgb3RoZXIgY2hhcmFjdGVyXG5cdFx0XHRjb25zdCBvdGhlckNoYXJJZCA9XG5cdFx0XHRcdHJlbC5jaGFyYWN0ZXIxX2lkID09PSB0aGlzLmNoYXJhY3Rlci5pZCA/IHJlbC5jaGFyYWN0ZXIyX2lkIDogcmVsLmNoYXJhY3RlcjFfaWQ7XG5cdFx0XHRjb25zdCBvdGhlckNoYXIgPSB0aGlzLmNoYXJhY3RlcnMuZmluZCgoYykgPT4gYy5pZCA9PT0gb3RoZXJDaGFySWQpO1xuXHRcdFx0Y29uc3Qgb3RoZXJDaGFyTmFtZSA9IG90aGVyQ2hhciA/IG90aGVyQ2hhci5uYW1lIDogXCJVbmtub3duXCI7XG5cblx0XHRcdGNvbnN0IGl0ZW0gPSBsaXN0LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbVwiIH0pO1xuXG5cdFx0XHRjb25zdCB0aXRsZVJvdyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiIH0pO1xuXHRcdFx0dGl0bGVSb3cuY3JlYXRlRWwoXCJzdHJvbmdcIiwgeyB0ZXh0OiBvdGhlckNoYXJOYW1lIH0pO1xuXG5cdFx0XHRjb25zdCB0eXBlUGlsbCA9IHRpdGxlUm93LmNyZWF0ZVNwYW4oeyBjbHM6IFwic3RvcnktZW5naW5lLWJhZGdlXCIgfSk7XG5cdFx0XHR0eXBlUGlsbC50ZXh0Q29udGVudCA9IHJlbC5yZWxhdGlvbnNoaXBfdHlwZTtcblxuXHRcdFx0Y29uc3QgZGlyZWN0aW9uSWNvbiA9IHRpdGxlUm93LmNyZWF0ZVNwYW4oeyBjbHM6IFwic3RvcnktZW5naW5lLWRpcmVjdGlvblwiIH0pO1xuXHRcdFx0ZGlyZWN0aW9uSWNvbi50ZXh0Q29udGVudCA9IHJlbC5iaWRpcmVjdGlvbmFsID8gXCJcdTIxOTRcIiA6IFwiXHUyMTkyXCI7XG5cblx0XHRcdGNvbnN0IG1ldGEgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbWV0YVwiIH0pO1xuXHRcdFx0aWYgKHJlbC5kZXNjcmlwdGlvbikge1xuXHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IHJlbC5kZXNjcmlwdGlvbiB9KTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgYWN0aW9ucyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtLWFjdGlvbnNcIiB9KTtcblx0XHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkVkaXRcIiB9KS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnNob3dFZGl0UmVsYXRpb25zaGlwTW9kYWwocmVsKTtcblx0XHRcdH07XG5cdFx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJEZWxldGVcIiB9KS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRpZiAoY29uZmlybShgRGVsZXRlIHJlbGF0aW9uc2hpcCB3aXRoIFwiJHtvdGhlckNoYXJOYW1lfVwiP2ApKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5kZWxldGVDaGFyYWN0ZXJSZWxhdGlvbnNoaXAocmVsLmlkKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZENoYXJhY3RlckRhdGEoKTtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIlJlbGF0aW9uc2hpcCBkZWxldGVkXCIpO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdC8vIE1vZGFsIG1ldGhvZHNcblx0c2hvd0FkZFRyYWl0TW9kYWwoKSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5wbHVnaW4uYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnRleHRDb250ZW50ID0gXCJBZGQgVHJhaXRcIjtcblxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIlNlbGVjdCBhIHRyYWl0IHRvIGFkZDpcIiB9KTtcblxuXHRcdGNvbnN0IHRyYWl0U2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0Y29uc3QgYXZhaWxhYmxlVHJhaXRzID0gdGhpcy50cmFpdHMuZmlsdGVyKFxuXHRcdFx0KHQpID0+ICF0aGlzLmNoYXJhY3RlclRyYWl0cy5zb21lKChjdCkgPT4gY3QudHJhaXRfaWQgPT09IHQuaWQpXG5cdFx0KTtcblxuXHRcdGlmIChhdmFpbGFibGVUcmFpdHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gYXZhaWxhYmxlIHRyYWl0cy4gQ3JlYXRlIGEgdHJhaXQgZmlyc3QhXCIgfSk7XG5cdFx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0XHRjb25zdCBjbG9zZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2xvc2VcIiB9KTtcblx0XHRcdGNsb3NlQnRuLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGZvciAoY29uc3QgdHJhaXQgb2YgYXZhaWxhYmxlVHJhaXRzKSB7XG5cdFx0XHR0cmFpdFNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IGAke3RyYWl0Lm5hbWV9ICgke3RyYWl0LmNhdGVnb3J5fSlgLCB2YWx1ZTogdHJhaXQuaWQgfSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgdmFsdWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsXG5cdFx0XHRhdHRyOiB7IHR5cGU6IFwidGV4dFwiLCBwbGFjZWhvbGRlcjogXCJWYWx1ZSAob3B0aW9uYWwpXCIgfSxcblx0XHR9KTtcblxuXHRcdGNvbnN0IG5vdGVzSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiLFxuXHRcdFx0YXR0cjogeyByb3dzOiBcIjNcIiwgcGxhY2Vob2xkZXI6IFwiTm90ZXMgKG9wdGlvbmFsKVwiIH0sXG5cdFx0fSk7XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQWRkXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmFkZENoYXJhY3RlclRyYWl0KFxuXHRcdFx0XHRcdHRoaXMuY2hhcmFjdGVyLmlkLFxuXHRcdFx0XHRcdHRyYWl0U2VsZWN0LnZhbHVlLFxuXHRcdFx0XHRcdHZhbHVlSW5wdXQudmFsdWUgfHwgdW5kZWZpbmVkLFxuXHRcdFx0XHRcdG5vdGVzSW5wdXQudmFsdWUgfHwgdW5kZWZpbmVkXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZENoYXJhY3RlckRhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJUcmFpdCBhZGRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KTtcblx0XHRjYW5jZWxCdG4ub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRzaG93RWRpdFRyYWl0TW9kYWwoY2hhclRyYWl0OiBDaGFyYWN0ZXJUcmFpdCkge1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMucGx1Z2luLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC50ZXh0Q29udGVudCA9IFwiRWRpdCBUcmFpdFwiO1xuXG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IGBFZGl0aW5nOiAke2NoYXJUcmFpdC50cmFpdF9uYW1lfWAgfSk7XG5cblx0XHRjb25zdCB2YWx1ZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIixcblx0XHRcdGF0dHI6IHsgdHlwZTogXCJ0ZXh0XCIsIHBsYWNlaG9sZGVyOiBcIlZhbHVlXCIgfSxcblx0XHR9KTtcblx0XHR2YWx1ZUlucHV0LnZhbHVlID0gY2hhclRyYWl0LnZhbHVlIHx8IFwiXCI7XG5cblx0XHRjb25zdCBub3Rlc0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIixcblx0XHRcdGF0dHI6IHsgcm93czogXCIzXCIsIHBsYWNlaG9sZGVyOiBcIk5vdGVzXCIgfSxcblx0XHR9KTtcblx0XHRub3Rlc0lucHV0LnZhbHVlID0gY2hhclRyYWl0Lm5vdGVzIHx8IFwiXCI7XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVDaGFyYWN0ZXJUcmFpdChcblx0XHRcdFx0XHR0aGlzLmNoYXJhY3Rlci5pZCxcblx0XHRcdFx0XHRjaGFyVHJhaXQudHJhaXRfaWQsXG5cdFx0XHRcdFx0dmFsdWVJbnB1dC52YWx1ZSB8fCB1bmRlZmluZWQsXG5cdFx0XHRcdFx0bm90ZXNJbnB1dC52YWx1ZSB8fCB1bmRlZmluZWRcblx0XHRcdFx0KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkQ2hhcmFjdGVyRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlckNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIlRyYWl0IHVwZGF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSk7XG5cdFx0Y2FuY2VsQnRuLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0c2hvd0FkZEV2ZW50TW9kYWwoKSB7XG5cdFx0aWYgKCF0aGlzLndvcmxkKSByZXR1cm47XG5cblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLnBsdWdpbi5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwudGV4dENvbnRlbnQgPSBcIkFkZCBFdmVudFwiO1xuXG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiU2VsZWN0IGFuIGV2ZW50OlwiIH0pO1xuXG5cdFx0Y29uc3QgZXZlbnRTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHRjb25zdCBhdmFpbGFibGVFdmVudHMgPSB0aGlzLmV2ZW50cy5maWx0ZXIoXG5cdFx0XHQoZSkgPT4gIXRoaXMuY2hhcmFjdGVyRXZlbnRzLnNvbWUoKGNlKSA9PiBjZS5ldmVudC5pZCA9PT0gZS5pZClcblx0XHQpO1xuXG5cdFx0aWYgKGF2YWlsYWJsZUV2ZW50cy5sZW5ndGggPT09IDApIHtcblx0XHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBhdmFpbGFibGUgZXZlbnRzLiBDcmVhdGUgYW4gZXZlbnQgZmlyc3QhXCIgfSk7XG5cdFx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0XHRjb25zdCBjbG9zZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2xvc2VcIiB9KTtcblx0XHRcdGNsb3NlQnRuLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGZvciAoY29uc3QgZXZlbnQgb2YgYXZhaWxhYmxlRXZlbnRzKSB7XG5cdFx0XHRldmVudFNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IGV2ZW50Lm5hbWUsIHZhbHVlOiBldmVudC5pZCB9KTtcblx0XHR9XG5cblx0XHRjb25zdCByb2xlSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLFxuXHRcdFx0YXR0cjogeyB0eXBlOiBcInRleHRcIiwgcGxhY2Vob2xkZXI6IFwiUm9sZSAob3B0aW9uYWwpXCIgfSxcblx0XHR9KTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJBZGRcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuYWRkRXZlbnRDaGFyYWN0ZXIoXG5cdFx0XHRcdFx0ZXZlbnRTZWxlY3QudmFsdWUsXG5cdFx0XHRcdFx0dGhpcy5jaGFyYWN0ZXIuaWQsXG5cdFx0XHRcdFx0cm9sZUlucHV0LnZhbHVlIHx8IHVuZGVmaW5lZFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRDaGFyYWN0ZXJEYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQ2hhcmFjdGVyIGFkZGVkIHRvIGV2ZW50XCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pO1xuXHRcdGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHNob3dFZGl0RXZlbnRSb2xlTW9kYWwoZXZlbnQ6IFdvcmxkRXZlbnQsIGN1cnJlbnRSb2xlPzogc3RyaW5nKSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5wbHVnaW4uYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnRleHRDb250ZW50ID0gXCJFZGl0IFJvbGVcIjtcblxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBgRXZlbnQ6ICR7ZXZlbnQubmFtZX1gIH0pO1xuXG5cdFx0Y29uc3Qgcm9sZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIixcblx0XHRcdGF0dHI6IHsgdHlwZTogXCJ0ZXh0XCIsIHBsYWNlaG9sZGVyOiBcIlJvbGVcIiB9LFxuXHRcdFx0dmFsdWU6IGN1cnJlbnRSb2xlIHx8IFwiXCIsXG5cdFx0fSk7XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5yZW1vdmVFdmVudENoYXJhY3RlcihldmVudC5pZCwgdGhpcy5jaGFyYWN0ZXIuaWQpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuYWRkRXZlbnRDaGFyYWN0ZXIoXG5cdFx0XHRcdFx0ZXZlbnQuaWQsXG5cdFx0XHRcdFx0dGhpcy5jaGFyYWN0ZXIuaWQsXG5cdFx0XHRcdFx0cm9sZUlucHV0LnZhbHVlIHx8IHVuZGVmaW5lZFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRDaGFyYWN0ZXJEYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiUm9sZSB1cGRhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pO1xuXHRcdGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHNob3dBZGRSZWxhdGlvbnNoaXBNb2RhbCgpIHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLnBsdWdpbi5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwudGV4dENvbnRlbnQgPSBcIkFkZCBSZWxhdGlvbnNoaXBcIjtcblxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIlNlbGVjdCBhbm90aGVyIGNoYXJhY3RlcjpcIiB9KTtcblxuXHRcdGNvbnN0IGNoYXJhY3RlclNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdGNvbnN0IGF2YWlsYWJsZUNoYXJhY3RlcnMgPSB0aGlzLmNoYXJhY3RlcnMuZmlsdGVyKChjKSA9PiBjLmlkICE9PSB0aGlzLmNoYXJhY3Rlci5pZCk7XG5cblx0XHRpZiAoYXZhaWxhYmxlQ2hhcmFjdGVycy5sZW5ndGggPT09IDApIHtcblx0XHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBvdGhlciBjaGFyYWN0ZXJzIGF2YWlsYWJsZS5cIiB9KTtcblx0XHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRcdGNvbnN0IGNsb3NlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDbG9zZVwiIH0pO1xuXHRcdFx0Y2xvc2VCdG4ub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Zm9yIChjb25zdCBjaGFyIG9mIGF2YWlsYWJsZUNoYXJhY3RlcnMpIHtcblx0XHRcdGNoYXJhY3RlclNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IGNoYXIubmFtZSwgdmFsdWU6IGNoYXIuaWQgfSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgcmVsYXRpb25zaGlwVHlwZVNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdHJlbGF0aW9uc2hpcFR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB0ZXh0OiBcIkFsbHlcIiwgdmFsdWU6IFwiYWxseVwiIH0pO1xuXHRcdHJlbGF0aW9uc2hpcFR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB0ZXh0OiBcIkVuZW15XCIsIHZhbHVlOiBcImVuZW15XCIgfSk7XG5cdFx0cmVsYXRpb25zaGlwVHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IFwiRmFtaWx5XCIsIHZhbHVlOiBcImZhbWlseVwiIH0pO1xuXHRcdHJlbGF0aW9uc2hpcFR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB0ZXh0OiBcIkxvdmVyXCIsIHZhbHVlOiBcImxvdmVyXCIgfSk7XG5cdFx0cmVsYXRpb25zaGlwVHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IFwiUml2YWxcIiwgdmFsdWU6IFwicml2YWxcIiB9KTtcblx0XHRyZWxhdGlvbnNoaXBUeXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogXCJNZW50b3JcIiwgdmFsdWU6IFwibWVudG9yXCIgfSk7XG5cdFx0cmVsYXRpb25zaGlwVHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IFwiU3R1ZGVudFwiLCB2YWx1ZTogXCJzdHVkZW50XCIgfSk7XG5cblx0XHRjb25zdCBkZXNjcmlwdGlvbklucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIixcblx0XHRcdGF0dHI6IHsgcm93czogXCIzXCIsIHBsYWNlaG9sZGVyOiBcIkRlc2NyaXB0aW9uIChvcHRpb25hbClcIiB9LFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgYmlkaXJlY3Rpb25hbENoZWNrYm94ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHtcblx0XHRcdGF0dHI6IHsgdHlwZTogXCJjaGVja2JveFwiIH0sXG5cdFx0fSk7XG5cdFx0YmlkaXJlY3Rpb25hbENoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xuXHRcdGNvbnN0IGJpZGlyZWN0aW9uYWxMYWJlbCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiKTtcblx0XHRiaWRpcmVjdGlvbmFsTGFiZWwuYXBwZW5kQ2hpbGQoYmlkaXJlY3Rpb25hbENoZWNrYm94KTtcblx0XHRiaWRpcmVjdGlvbmFsTGFiZWwuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCIgQmlkaXJlY3Rpb25hbFwiKSk7XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQWRkXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUNoYXJhY3RlclJlbGF0aW9uc2hpcCh0aGlzLmNoYXJhY3Rlci5pZCwge1xuXHRcdFx0XHRcdGNoYXJhY3RlcjFfaWQ6IHRoaXMuY2hhcmFjdGVyLmlkLFxuXHRcdFx0XHRcdGNoYXJhY3RlcjJfaWQ6IGNoYXJhY3RlclNlbGVjdC52YWx1ZSxcblx0XHRcdFx0XHRyZWxhdGlvbnNoaXBfdHlwZTogcmVsYXRpb25zaGlwVHlwZVNlbGVjdC52YWx1ZSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb25JbnB1dC52YWx1ZSB8fCBcIlwiLFxuXHRcdFx0XHRcdGJpZGlyZWN0aW9uYWw6IGJpZGlyZWN0aW9uYWxDaGVja2JveC5jaGVja2VkLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkQ2hhcmFjdGVyRGF0YSgpO1xuXHRcdFx0dGhpcy5yZW5kZXJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJSZWxhdGlvbnNoaXAgYWRkZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSk7XG5cdFx0Y2FuY2VsQnRuLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0c2hvd0VkaXRSZWxhdGlvbnNoaXBNb2RhbChyZWw6IENoYXJhY3RlclJlbGF0aW9uc2hpcCkge1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMucGx1Z2luLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC50ZXh0Q29udGVudCA9IFwiRWRpdCBSZWxhdGlvbnNoaXBcIjtcblxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cblx0XHRjb25zdCByZWxhdGlvbnNoaXBUeXBlU2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0cmVsYXRpb25zaGlwVHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IFwiQWxseVwiLCB2YWx1ZTogXCJhbGx5XCIgfSk7XG5cdFx0cmVsYXRpb25zaGlwVHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IFwiRW5lbXlcIiwgdmFsdWU6IFwiZW5lbXlcIiB9KTtcblx0XHRyZWxhdGlvbnNoaXBUeXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogXCJGYW1pbHlcIiwgdmFsdWU6IFwiZmFtaWx5XCIgfSk7XG5cdFx0cmVsYXRpb25zaGlwVHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IFwiTG92ZXJcIiwgdmFsdWU6IFwibG92ZXJcIiB9KTtcblx0XHRyZWxhdGlvbnNoaXBUeXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogXCJSaXZhbFwiLCB2YWx1ZTogXCJyaXZhbFwiIH0pO1xuXHRcdHJlbGF0aW9uc2hpcFR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB0ZXh0OiBcIk1lbnRvclwiLCB2YWx1ZTogXCJtZW50b3JcIiB9KTtcblx0XHRyZWxhdGlvbnNoaXBUeXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogXCJTdHVkZW50XCIsIHZhbHVlOiBcInN0dWRlbnRcIiB9KTtcblx0XHRyZWxhdGlvbnNoaXBUeXBlU2VsZWN0LnZhbHVlID0gcmVsLnJlbGF0aW9uc2hpcF90eXBlO1xuXG5cdFx0Y29uc3QgZGVzY3JpcHRpb25JbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIsXG5cdFx0XHRhdHRyOiB7IHJvd3M6IFwiM1wiLCBwbGFjZWhvbGRlcjogXCJEZXNjcmlwdGlvblwiIH0sXG5cdFx0XHR0ZXh0OiByZWwuZGVzY3JpcHRpb24gfHwgXCJcIixcblx0XHR9KTtcblxuXHRcdGNvbnN0IGJpZGlyZWN0aW9uYWxDaGVja2JveCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG5cdFx0XHRhdHRyOiB7IHR5cGU6IFwiY2hlY2tib3hcIiB9LFxuXHRcdH0pO1xuXHRcdGJpZGlyZWN0aW9uYWxDaGVja2JveC5jaGVja2VkID0gcmVsLmJpZGlyZWN0aW9uYWw7XG5cdFx0Y29uc3QgYmlkaXJlY3Rpb25hbExhYmVsID0gY29udGVudC5jcmVhdGVFbChcImxhYmVsXCIpO1xuXHRcdGJpZGlyZWN0aW9uYWxMYWJlbC5hcHBlbmRDaGlsZChiaWRpcmVjdGlvbmFsQ2hlY2tib3gpO1xuXHRcdGJpZGlyZWN0aW9uYWxMYWJlbC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIiBCaWRpcmVjdGlvbmFsXCIpKTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTYXZlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUNoYXJhY3RlclJlbGF0aW9uc2hpcChyZWwuaWQsIHtcblx0XHRcdFx0XHRyZWxhdGlvbnNoaXBfdHlwZTogcmVsYXRpb25zaGlwVHlwZVNlbGVjdC52YWx1ZSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb25JbnB1dC52YWx1ZSB8fCBcIlwiLFxuXHRcdFx0XHRcdGJpZGlyZWN0aW9uYWw6IGJpZGlyZWN0aW9uYWxDaGVja2JveC5jaGVja2VkLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkQ2hhcmFjdGVyRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlckNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIlJlbGF0aW9uc2hpcCB1cGRhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pO1xuXHRcdGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdC8vIE1ldGhvZCB0byB1cGRhdGUgY2hhcmFjdGVyIGFmdGVyIGVkaXRcblx0dXBkYXRlQ2hhcmFjdGVyKGNoYXJhY3RlcjogQ2hhcmFjdGVyKSB7XG5cdFx0dGhpcy5jaGFyYWN0ZXIgPSBjaGFyYWN0ZXI7XG5cdFx0dGhpcy5yZW5kZXJIZWFkZXIoKTtcblx0XHR0aGlzLnJlbmRlckNvbnRlbnQoKTtcblx0fVxufVxuXG4iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIE5vdGljZSwgV29ya3NwYWNlTGVhZiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IFN0b3J5RW5naW5lUGx1Z2luIGZyb20gXCIuLi9tYWluXCI7XG5pbXBvcnQge1xuXHRFeHRyYWN0RW50aXR5LFxuXHRFeHRyYWN0RW50aXR5TWF0Y2gsXG5cdEV4dHJhY3RFbnRpdHlSZXN1bHQsXG59IGZyb20gXCIuLi90eXBlc1wiO1xuXG5leHBvcnQgY29uc3QgU1RPUllfRU5HSU5FX0VYVFJBQ1RfVklFV19UWVBFID0gXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC12aWV3XCI7XG5cbmV4cG9ydCBjbGFzcyBTdG9yeUVuZ2luZUV4dHJhY3RWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuXHRwbHVnaW46IFN0b3J5RW5naW5lUGx1Z2luO1xuXHRwcml2YXRlIHJlc3VsdDogRXh0cmFjdEVudGl0eVJlc3VsdCB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIGNvbnRlbnRSb290ITogSFRNTEVsZW1lbnQ7XG5cdHByaXZhdGUgbG9ncyA9IFtdIGFzIFN0b3J5RW5naW5lUGx1Z2luW1wiZXh0cmFjdExvZ3NcIl07XG5cdHByaXZhdGUgc3RhdHVzOiBTdG9yeUVuZ2luZVBsdWdpbltcImV4dHJhY3RTdGF0dXNcIl0gPSBcImlkbGVcIjtcblx0cHJpdmF0ZSBhY3RpdmVUYWI6IFwiZW50aXRpZXNcIiB8IFwicHJvZ3Jlc3NcIiA9IFwicHJvZ3Jlc3NcIjtcblx0cHJpdmF0ZSBleHBhbmRlZExvZ3MgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuXHRjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IFN0b3J5RW5naW5lUGx1Z2luKSB7XG5cdFx0c3VwZXIobGVhZik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdFx0dGhpcy5sb2dzID0gcGx1Z2luLmV4dHJhY3RMb2dzO1xuXHRcdHRoaXMuc3RhdHVzID0gcGx1Z2luLmV4dHJhY3RTdGF0dXM7XG5cdH1cblxuXHRnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiBTVE9SWV9FTkdJTkVfRVhUUkFDVF9WSUVXX1RZUEU7XG5cdH1cblxuXHRnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuXHRcdHJldHVybiBcIkV4dHJhY3RcIjtcblx0fVxuXG5cdGdldEljb24oKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gXCJzZWFyY2hcIjtcblx0fVxuXG5cdGFzeW5jIG9uT3BlbigpIHtcblx0XHRjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdIGFzIEhUTUxFbGVtZW50O1xuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xuXHRcdGNvbnRhaW5lci5hZGRDbGFzcyhcInN0b3J5LWVuZ2luZS1leHRyYWN0LWNvbnRhaW5lclwiKTtcblx0XHR0aGlzLmNvbnRlbnRSb290ID0gY29udGFpbmVyO1xuXHRcdHRoaXMuc2V0UmVzdWx0KHRoaXMucGx1Z2luLmV4dHJhY3RSZXN1bHQpO1xuXHRcdHRoaXMuc2V0TG9ncyh0aGlzLnBsdWdpbi5leHRyYWN0TG9ncywgdGhpcy5wbHVnaW4uZXh0cmFjdFN0YXR1cyk7XG5cdH1cblxuXHRzZXRSZXN1bHQocmVzdWx0OiBFeHRyYWN0RW50aXR5UmVzdWx0IHwgbnVsbCkge1xuXHRcdHRoaXMucmVzdWx0ID0gcmVzdWx0O1xuXHRcdHRoaXMucmVuZGVyKCk7XG5cdH1cblxuXHRzZXRMb2dzKGxvZ3M6IHR5cGVvZiB0aGlzLmxvZ3MsIHN0YXR1czogdHlwZW9mIHRoaXMuc3RhdHVzKSB7XG5cdFx0dGhpcy5sb2dzID0gbG9ncztcblx0XHR0aGlzLnN0YXR1cyA9IHN0YXR1cztcblx0XHR0aGlzLnJlbmRlcigpO1xuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXIoKSB7XG5cdFx0aWYgKCF0aGlzLmNvbnRlbnRSb290KSByZXR1cm47XG5cdFx0dGhpcy5jb250ZW50Um9vdC5lbXB0eSgpO1xuXG5cdFx0aWYgKHRoaXMuYWN0aXZlVGFiID09PSBcImVudGl0aWVzXCIgJiYgdGhpcy5zdGF0dXMgPT09IFwicnVubmluZ1wiKSB7XG5cdFx0XHR0aGlzLmFjdGl2ZVRhYiA9IFwicHJvZ3Jlc3NcIjtcblx0XHR9XG5cblx0XHRjb25zdCBoZWFkZXIgPSB0aGlzLmNvbnRlbnRSb290LmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtaGVhZGVyXCIsXG5cdFx0fSk7XG5cdFx0aGVhZGVyLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIkV4dHJhY3RcIiB9KTtcblxuXHRcdGNvbnN0IGhlYWRlck1ldGEgPSBoZWFkZXIuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1tZXRhXCIsXG5cdFx0fSk7XG5cdFx0aGVhZGVyTWV0YS5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHR0ZXh0OiBgU3RhdHVzOiAke3RoaXMuc3RhdHVzfWAsXG5cdFx0fSk7XG5cdFx0aWYgKHRoaXMucmVzdWx0KSB7XG5cdFx0XHRjb25zdCBmb3VuZENvdW50ID0gdGhpcy5yZXN1bHQuZW50aXRpZXMuZmlsdGVyKChlbnRpdHkpID0+IGVudGl0eS5mb3VuZClcblx0XHRcdFx0Lmxlbmd0aDtcblx0XHRcdGhlYWRlck1ldGEuY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0XHR0ZXh0OiBgRW50aXRpZXM6ICR7dGhpcy5yZXN1bHQuZW50aXRpZXMubGVuZ3RofWAsXG5cdFx0XHR9KTtcblx0XHRcdGhlYWRlck1ldGEuY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0XHR0ZXh0OiBgRm91bmQ6ICR7Zm91bmRDb3VudH1gLFxuXHRcdFx0fSk7XG5cdFx0XHRoZWFkZXJNZXRhLmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdFx0dGV4dDogYFRleHQgbGVuZ3RoOiAke3RoaXMucmVzdWx0LnRleHQubGVuZ3RofWAsXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRjb25zdCBoZWFkZXJBY3Rpb25zID0gaGVhZGVyLmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtaGVhZGVyLWFjdGlvbnNcIixcblx0XHR9KTtcblx0XHRjb25zdCBiYWNrQnV0dG9uID0gaGVhZGVyQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIkJhY2sgdG8gU3Rvcmllc1wiLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWJhY2tcIixcblx0XHR9KTtcblx0XHRiYWNrQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLnBsdWdpbi5hY3RpdmF0ZVZpZXcoKTtcblx0XHR9O1xuXHRcdGlmICh0aGlzLnN0YXR1cyA9PT0gXCJydW5uaW5nXCIpIHtcblx0XHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGhlYWRlckFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHR0ZXh0OiBcIkNhbmNlbFwiLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtY2FuY2VsXCIsXG5cdFx0XHR9KTtcblx0XHRcdGNhbmNlbEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5jYW5jZWxFeHRyYWN0U3RyZWFtKCk7XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdGlmICghdGhpcy5yZXN1bHQpIHtcblx0XHRcdHRoaXMucmVuZGVyTG9ncygpO1xuXHRcdFx0dGhpcy5jb250ZW50Um9vdC5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0XHR0ZXh0OiBcIk5vIGV4dHJhY3Rpb24gcmVzdWx0cyB5ZXQuXCIsXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1lbXB0eVwiLFxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgcXVlcnlCbG9jayA9IHRoaXMuY29udGVudFJvb3QuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1xdWVyeVwiLFxuXHRcdH0pO1xuXHRcdHF1ZXJ5QmxvY2suY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0dGV4dDogXCJUZXh0XCIsXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtbGFiZWxcIixcblx0XHR9KTtcblx0XHRxdWVyeUJsb2NrLmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdHRleHQ6IHRoaXMucmVzdWx0LnRleHQsXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtcXVlcnktdGV4dFwiLFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgdGFicyA9IHRoaXMuY29udGVudFJvb3QuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC10YWJzXCIsXG5cdFx0fSk7XG5cblx0XHRjb25zdCBoYXNFbnRpdGllcyA9IHRoaXMucmVzdWx0LmVudGl0aWVzLmxlbmd0aCA+IDA7XG5cdFx0Y29uc3QgZW50aXRpZXNEaXNhYmxlZCA9ICFoYXNFbnRpdGllcyB8fCB0aGlzLnN0YXR1cyA9PT0gXCJydW5uaW5nXCI7XG5cdFx0Y29uc3QgZW50aXRpZXNUYWIgPSB0YWJzLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiRW50aXRpZXMgRm91bmRcIixcblx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS1leHRyYWN0LXRhYiAke1xuXHRcdFx0XHR0aGlzLmFjdGl2ZVRhYiA9PT0gXCJlbnRpdGllc1wiID8gXCJpcy1hY3RpdmVcIiA6IFwiXCJcblx0XHRcdH1gLFxuXHRcdH0pO1xuXHRcdGlmIChlbnRpdGllc0Rpc2FibGVkKSB7XG5cdFx0XHRlbnRpdGllc1RhYi5kaXNhYmxlZCA9IHRydWU7XG5cdFx0XHRlbnRpdGllc1RhYi5hZGRDbGFzcyhcImlzLWRpc2FibGVkXCIpO1xuXHRcdFx0aWYgKHRoaXMuYWN0aXZlVGFiID09PSBcImVudGl0aWVzXCIpIHtcblx0XHRcdFx0dGhpcy5hY3RpdmVUYWIgPSBcInByb2dyZXNzXCI7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVudGl0aWVzVGFiLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRpZiAoZW50aXRpZXNEaXNhYmxlZCkgcmV0dXJuO1xuXHRcdFx0dGhpcy5hY3RpdmVUYWIgPSBcImVudGl0aWVzXCI7XG5cdFx0XHR0aGlzLnJlbmRlcigpO1xuXHRcdH07XG5cblx0XHRjb25zdCBwcm9ncmVzc1RhYiA9IHRhYnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJQcm9ncmVzc1wiLFxuXHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLWV4dHJhY3QtdGFiICR7XG5cdFx0XHRcdHRoaXMuYWN0aXZlVGFiID09PSBcInByb2dyZXNzXCIgPyBcImlzLWFjdGl2ZVwiIDogXCJcIlxuXHRcdFx0fWAsXG5cdFx0fSk7XG5cdFx0cHJvZ3Jlc3NUYWIub25jbGljayA9ICgpID0+IHtcblx0XHRcdHRoaXMuYWN0aXZlVGFiID0gXCJwcm9ncmVzc1wiO1xuXHRcdFx0dGhpcy5yZW5kZXIoKTtcblx0XHR9O1xuXG5cdFx0Y29uc3QgcGFuZWxzID0gdGhpcy5jb250ZW50Um9vdC5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LXBhbmVsc1wiLFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgZW50aXRpZXNQYW5lbCA9IHBhbmVscy5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLWV4dHJhY3QtcGFuZWwgJHtcblx0XHRcdFx0dGhpcy5hY3RpdmVUYWIgPT09IFwiZW50aXRpZXNcIiA/IFwiaXMtYWN0aXZlXCIgOiBcIlwiXG5cdFx0XHR9YCxcblx0XHR9KTtcblxuXHRcdGNvbnN0IHByb2dyZXNzUGFuZWwgPSBwYW5lbHMuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS1leHRyYWN0LXBhbmVsICR7XG5cdFx0XHRcdHRoaXMuYWN0aXZlVGFiID09PSBcInByb2dyZXNzXCIgPyBcImlzLWFjdGl2ZVwiIDogXCJcIlxuXHRcdFx0fWAsXG5cdFx0fSk7XG5cblx0XHRjb25zdCBhY3Rpb25zID0gdGhpcy5jb250ZW50Um9vdC5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWFjdGlvbnNcIixcblx0XHR9KTtcblx0XHRjb25zdCBjbGVhckJ1dHRvbiA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJDbGVhciBSZXN1bHRzXCIsXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtY2xlYXJcIixcblx0XHR9KTtcblx0XHRjbGVhckJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5wbHVnaW4uZXh0cmFjdFJlc3VsdCA9IG51bGw7XG5cdFx0XHR0aGlzLnNldFJlc3VsdChudWxsKTtcblx0XHRcdHRoaXMucGx1Z2luLnVwZGF0ZUV4dHJhY3RWaWV3cygpO1xuXHRcdH07XG5cblx0XHR0aGlzLnJlbmRlckxvZ3MocHJvZ3Jlc3NQYW5lbCk7XG5cblx0XHRpZiAoaGFzRW50aXRpZXMpIHtcblx0XHRcdGNvbnN0IGxpc3QgPSBlbnRpdGllc1BhbmVsLmNyZWF0ZURpdih7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1saXN0XCIsXG5cdFx0XHR9KTtcblx0XHRcdHRoaXMucmVzdWx0LmVudGl0aWVzLmZvckVhY2goKGVudGl0eSwgaW5kZXgpID0+IHtcblx0XHRcdFx0dGhpcy5yZW5kZXJFbnRpdHkobGlzdCwgZW50aXR5LCBpbmRleCk7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZW50aXRpZXNQYW5lbC5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0XHR0ZXh0OiBcIk5vIGVudGl0aWVzIHJldHVybmVkIGZyb20gZXh0cmFjdGlvbi5cIixcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWVtcHR5XCIsXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckxvZ3MoY29udGFpbmVyPzogSFRNTEVsZW1lbnQpIHtcblx0XHRjb25zdCByb290ID0gY29udGFpbmVyID8/IHRoaXMuY29udGVudFJvb3Q7XG5cdFx0Y29uc3QgbG9nQmxvY2sgPSByb290LmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtbG9nc1wiLFxuXHRcdH0pO1xuXHRcdGxvZ0Jsb2NrLmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdHRleHQ6IFwiUHJvZ3Jlc3NcIixcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1sYWJlbFwiLFxuXHRcdH0pO1xuXG5cdFx0aWYgKCF0aGlzLmxvZ3MubGVuZ3RoKSB7XG5cdFx0XHRsb2dCbG9jay5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0XHR0ZXh0OiBcIk5vIGV2ZW50cyB5ZXQuXCIsXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1lbXB0eVwiLFxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGxvZ0Jsb2NrLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1sb2ctbGlzdFwiIH0pO1xuXHRcdGNvbnN0IGxhc3RJbmRleCA9IHRoaXMubG9ncy5sZW5ndGggLSAxO1xuXHRcdHRoaXMubG9ncy5mb3JFYWNoKChlbnRyeSwgaW5kZXgpID0+IHtcblx0XHRcdGNvbnN0IGV2ZW50TGFiZWwgPSBlbnRyeS5waGFzZVxuXHRcdFx0XHQ/IGAke2VudHJ5LnBoYXNlfSBcdTAwQjcgJHtlbnRyeS5ldmVudFR5cGV9YFxuXHRcdFx0XHQ6IGVudHJ5LmV2ZW50VHlwZTtcblx0XHRcdGNvbnN0IGl0ZW0gPSBsaXN0LmNyZWF0ZURpdih7XG5cdFx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS1leHRyYWN0LWxvZy1pdGVtICR7XG5cdFx0XHRcdFx0aW5kZXggPT09IGxhc3RJbmRleCA/IFwiaXMtbGF0ZXN0XCIgOiBcIlwiXG5cdFx0XHRcdH1gLFxuXHRcdFx0fSk7XG5cdFx0XHRjb25zdCBoZWFkZXIgPSBpdGVtLmNyZWF0ZURpdih7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1sb2ctaGVhZGVyXCIsXG5cdFx0XHR9KTtcblx0XHRcdGhlYWRlci5jcmVhdGVTcGFuKHtcblx0XHRcdFx0dGV4dDogYCR7ZW50cnkudGltZXN0YW1wfSB8ICR7ZXZlbnRMYWJlbH1gLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtbG9nLXRpdGxlXCIsXG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgbGFiZWwgPSBpdGVtLmNyZWF0ZURpdih7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1sb2ctbGFiZWxcIixcblx0XHRcdH0pO1xuXHRcdFx0bGFiZWwuY3JlYXRlU3Bhbih7IHRleHQ6IGVudHJ5Lm1lc3NhZ2UgfSk7XG5cdFx0XHRjb25zdCB0b2dnbGUgPSBsYWJlbC5jcmVhdGVTcGFuKHtcblx0XHRcdFx0dGV4dDogaW5kZXggPT09IGxhc3RJbmRleFxuXHRcdFx0XHRcdD8gXCIuLi5cIlxuXHRcdFx0XHRcdDogdGhpcy5leHBhbmRlZExvZ3MuaGFzKGVudHJ5LmlkKVxuXHRcdFx0XHRcdFx0PyBcIlx1MjIxMlwiXG5cdFx0XHRcdFx0XHQ6IFwiK1wiLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtbG9nLXRvZ2dsZVwiLFxuXHRcdFx0fSk7XG5cdFx0XHRsYWJlbC5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRpZiAodGhpcy5leHBhbmRlZExvZ3MuaGFzKGVudHJ5LmlkKSkge1xuXHRcdFx0XHRcdHRoaXMuZXhwYW5kZWRMb2dzLmRlbGV0ZShlbnRyeS5pZCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5leHBhbmRlZExvZ3MuYWRkKGVudHJ5LmlkKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLnJlbmRlcigpO1xuXHRcdFx0fTtcblx0XHRcdGlmIChpbmRleCA9PT0gbGFzdEluZGV4KSB7XG5cdFx0XHRcdHRvZ2dsZS5hZGRDbGFzcyhcImlzLXR5cGluZ1wiKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHRoaXMuZXhwYW5kZWRMb2dzLmhhcyhlbnRyeS5pZCkgJiYgZW50cnkuZGF0YSkge1xuXHRcdFx0XHRpdGVtLmNyZWF0ZUVsKFwicHJlXCIsIHtcblx0XHRcdFx0XHR0ZXh0OiBKU09OLnN0cmluZ2lmeShlbnRyeS5kYXRhLCBudWxsLCAyKSxcblx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtbG9nLWRhdGFcIixcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0bGlzdC5zY3JvbGxUb3AgPSBsaXN0LnNjcm9sbEhlaWdodDtcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyRW50aXR5KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGVudGl0eTogRXh0cmFjdEVudGl0eSwgaW5kZXg6IG51bWJlcikge1xuXHRcdGNvbnN0IGl0ZW0gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWl0ZW1cIiB9KTtcblx0XHRjb25zdCBoZWFkZXIgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1pdGVtLWhlYWRlclwiIH0pO1xuXHRcdGhlYWRlci5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHR0ZXh0OiBgIyR7aW5kZXggKyAxfWAsXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtcmFua1wiLFxuXHRcdH0pO1xuXHRcdGNvbnN0IHN0YXR1c1RleHQgPSBlbnRpdHkuY3JlYXRlZFxuXHRcdFx0PyBcIkNyZWF0ZWRcIlxuXHRcdFx0OiBlbnRpdHkuZm91bmRcblx0XHRcdFx0PyBcIkZvdW5kXCJcblx0XHRcdFx0OiBcIk5ld1wiO1xuXHRcdGNvbnN0IHN0YXR1c0NsYXNzID0gZW50aXR5LmNyZWF0ZWRcblx0XHRcdD8gXCJpcy1jcmVhdGVkXCJcblx0XHRcdDogZW50aXR5LmZvdW5kXG5cdFx0XHRcdD8gXCJpcy1mb3VuZFwiXG5cdFx0XHRcdDogXCJpcy1uZXdcIjtcblx0XHRoZWFkZXIuY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0dGV4dDogc3RhdHVzVGV4dCxcblx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS1leHRyYWN0LXN0YXR1cyAke3N0YXR1c0NsYXNzfWAsXG5cdFx0fSk7XG5cblx0XHRjb25zdCB0aXRsZSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWl0ZW0tdGl0bGVcIiB9KTtcblx0XHR0aXRsZS5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHR0ZXh0OiBlbnRpdHkubmFtZSxcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1lbnRpdHktbmFtZVwiLFxuXHRcdH0pO1xuXHRcdHRpdGxlLmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdHRleHQ6IGVudGl0eS50eXBlLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWVudGl0eS10eXBlXCIsXG5cdFx0fSk7XG5cblx0XHRpZiAoZW50aXR5LnN1bW1hcnkpIHtcblx0XHRcdGl0ZW0uY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0XHR0ZXh0OiBlbnRpdHkuc3VtbWFyeSxcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWNvbnRlbnRcIixcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmIChlbnRpdHkubWF0Y2gpIHtcblx0XHRcdGl0ZW0uYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJNYXRjaChcIk1hdGNoXCIsIGVudGl0eS5tYXRjaCkpO1xuXHRcdH1cblxuXHRcdGlmIChlbnRpdHkuY2FuZGlkYXRlcyAmJiBlbnRpdHkuY2FuZGlkYXRlcy5sZW5ndGgpIHtcblx0XHRcdGNvbnN0IGxpc3QgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1jYW5kaWRhdGVzXCIgfSk7XG5cdFx0XHRsaXN0LmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdFx0dGV4dDogXCJDYW5kaWRhdGVzXCIsXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1sYWJlbFwiLFxuXHRcdFx0fSk7XG5cdFx0XHRlbnRpdHkuY2FuZGlkYXRlcy5mb3JFYWNoKChjYW5kaWRhdGUpID0+IHtcblx0XHRcdFx0bGlzdC5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlck1hdGNoKFwiXCIsIGNhbmRpZGF0ZSkpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKCFlbnRpdHkuY3JlYXRlZCkge1xuXHRcdFx0Y29uc3QgYWN0aW9ucyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWFjdGlvbnNcIiB9KTtcblx0XHRcdGNvbnN0IGFjdGlvbkJ1dHRvbiA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHR0ZXh0OiBlbnRpdHkuZm91bmQgPyBcIlVwZGF0ZSBFbnRpdHlcIiA6IFwiQ3JlYXRlIEVudGl0eVwiLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtYWN0aW9uXCIsXG5cdFx0XHR9KTtcblx0XHRcdGFjdGlvbkJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRhY3Rpb25CdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGlmIChlbnRpdHkuZm91bmQpIHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMudXBkYXRlRW50aXR5KGVudGl0eSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuY3JlYXRlRW50aXR5KGVudGl0eSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRcdGFjdGlvbkJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyTWF0Y2gobGFiZWw6IHN0cmluZywgbWF0Y2g6IEV4dHJhY3RFbnRpdHlNYXRjaCk6IEhUTUxFbGVtZW50IHtcblx0XHRjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHR3cmFwcGVyLmNsYXNzTmFtZSA9IFwic3RvcnktZW5naW5lLWV4dHJhY3QtbWF0Y2hcIjtcblx0XHRjb25zdCBwYXJ0cyA9IFtdO1xuXHRcdGlmIChsYWJlbCkge1xuXHRcdFx0cGFydHMucHVzaChsYWJlbCk7XG5cdFx0fVxuXHRcdHBhcnRzLnB1c2goYCR7bWF0Y2guc291cmNlX3R5cGV9OiR7bWF0Y2guc291cmNlX2lkfWApO1xuXHRcdGlmIChtYXRjaC5lbnRpdHlfbmFtZSkge1xuXHRcdFx0cGFydHMucHVzaChtYXRjaC5lbnRpdHlfbmFtZSk7XG5cdFx0fVxuXHRcdHBhcnRzLnB1c2goYHNpbSAke21hdGNoLnNpbWlsYXJpdHkudG9GaXhlZCgzKX1gKTtcblx0XHRpZiAobWF0Y2gucmVhc29uKSB7XG5cdFx0XHRwYXJ0cy5wdXNoKG1hdGNoLnJlYXNvbik7XG5cdFx0fVxuXHRcdHdyYXBwZXIudGV4dENvbnRlbnQgPSBwYXJ0cy5qb2luKFwiIFx1MDBCNyBcIik7XG5cdFx0cmV0dXJuIHdyYXBwZXI7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGNyZWF0ZUVudGl0eShlbnRpdHk6IEV4dHJhY3RFbnRpdHkpIHtcblx0XHRpZiAoIXRoaXMucmVzdWx0Py53b3JsZF9pZCkge1xuXHRcdFx0bmV3IE5vdGljZShcIldvcmxkIElEIG1pc3NpbmcuIFNlbGVjdCBhIHN0b3J5IG9yIHdvcmxkIGZpcnN0LlwiLCA0MDAwKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBkZXNjcmlwdGlvbiA9IGVudGl0eS5zdW1tYXJ5Py50cmltKCkgfHwgZW50aXR5Lm5hbWU7XG5cdFx0bGV0IGNyZWF0ZWRJZCA9IFwiXCI7XG5cblx0XHRzd2l0Y2ggKGVudGl0eS50eXBlKSB7XG5cdFx0XHRjYXNlIFwiY2hhcmFjdGVyXCI6IHtcblx0XHRcdFx0Y29uc3QgY3JlYXRlZCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVDaGFyYWN0ZXIoXG5cdFx0XHRcdFx0dGhpcy5yZXN1bHQud29ybGRfaWQsXG5cdFx0XHRcdFx0eyBuYW1lOiBlbnRpdHkubmFtZSwgZGVzY3JpcHRpb24gfVxuXHRcdFx0XHQpO1xuXHRcdFx0XHRjcmVhdGVkSWQgPSBjcmVhdGVkLmlkO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGNhc2UgXCJsb2NhdGlvblwiOiB7XG5cdFx0XHRcdGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlTG9jYXRpb24oXG5cdFx0XHRcdFx0dGhpcy5yZXN1bHQud29ybGRfaWQsXG5cdFx0XHRcdFx0eyBuYW1lOiBlbnRpdHkubmFtZSwgZGVzY3JpcHRpb24gfVxuXHRcdFx0XHQpO1xuXHRcdFx0XHRjcmVhdGVkSWQgPSBjcmVhdGVkLmlkO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGNhc2UgXCJhcnRlZmFjdFwiOiB7XG5cdFx0XHRcdGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlQXJ0aWZhY3QoXG5cdFx0XHRcdFx0dGhpcy5yZXN1bHQud29ybGRfaWQsXG5cdFx0XHRcdFx0eyBuYW1lOiBlbnRpdHkubmFtZSwgZGVzY3JpcHRpb24gfVxuXHRcdFx0XHQpO1xuXHRcdFx0XHRjcmVhdGVkSWQgPSBjcmVhdGVkLmlkO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGNhc2UgXCJmYWN0aW9uXCI6IHtcblx0XHRcdFx0Y29uc3QgY3JlYXRlZCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVGYWN0aW9uKFxuXHRcdFx0XHRcdHRoaXMucmVzdWx0LndvcmxkX2lkLFxuXHRcdFx0XHRcdHsgbmFtZTogZW50aXR5Lm5hbWUsIGRlc2NyaXB0aW9uIH1cblx0XHRcdFx0KTtcblx0XHRcdFx0Y3JlYXRlZElkID0gY3JlYXRlZC5pZDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRjYXNlIFwiZXZlbnRcIjoge1xuXHRcdFx0XHRjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUV2ZW50KFxuXHRcdFx0XHRcdHRoaXMucmVzdWx0LndvcmxkX2lkLFxuXHRcdFx0XHRcdHsgbmFtZTogZW50aXR5Lm5hbWUsIGRlc2NyaXB0aW9uIH1cblx0XHRcdFx0KTtcblx0XHRcdFx0Y3JlYXRlZElkID0gY3JlYXRlZC5pZDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRuZXcgTm90aWNlKGBVbnN1cHBvcnRlZCB0eXBlOiAke2VudGl0eS50eXBlfWAsIDQwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0ZW50aXR5LmZvdW5kID0gZmFsc2U7XG5cdFx0ZW50aXR5LmNyZWF0ZWQgPSB0cnVlO1xuXHRcdGVudGl0eS5tYXRjaCA9IHtcblx0XHRcdHNvdXJjZV90eXBlOiBlbnRpdHkudHlwZSxcblx0XHRcdHNvdXJjZV9pZDogY3JlYXRlZElkLFxuXHRcdFx0ZW50aXR5X25hbWU6IGVudGl0eS5uYW1lLFxuXHRcdFx0c2ltaWxhcml0eTogMSxcblx0XHRcdHJlYXNvbjogXCJDcmVhdGVkIGZyb20gZXh0cmFjdFwiLFxuXHRcdH07XG5cdFx0dGhpcy5yZW5kZXIoKTtcblx0XHRuZXcgTm90aWNlKGBDcmVhdGVkICR7ZW50aXR5LnR5cGV9OiAke2VudGl0eS5uYW1lfWAsIDMwMDApO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyB1cGRhdGVFbnRpdHkoZW50aXR5OiBFeHRyYWN0RW50aXR5KSB7XG5cdFx0aWYgKCFlbnRpdHkubWF0Y2g/LnNvdXJjZV9pZCkge1xuXHRcdFx0bmV3IE5vdGljZShcIk5vIG1hdGNoIGF2YWlsYWJsZSB0byB1cGRhdGUuXCIsIDQwMDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGRlc2NyaXB0aW9uID0gZW50aXR5LnN1bW1hcnkgPz8gXCJcIjtcblx0XHRzd2l0Y2ggKGVudGl0eS50eXBlKSB7XG5cdFx0XHRjYXNlIFwiY2hhcmFjdGVyXCI6XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVDaGFyYWN0ZXIoZW50aXR5Lm1hdGNoLnNvdXJjZV9pZCwge1xuXHRcdFx0XHRcdG5hbWU6IGVudGl0eS5uYW1lLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwibG9jYXRpb25cIjpcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUxvY2F0aW9uKGVudGl0eS5tYXRjaC5zb3VyY2VfaWQsIHtcblx0XHRcdFx0XHRuYW1lOiBlbnRpdHkubmFtZSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbixcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImFydGVmYWN0XCI6XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVBcnRpZmFjdChlbnRpdHkubWF0Y2guc291cmNlX2lkLCB7XG5cdFx0XHRcdFx0bmFtZTogZW50aXR5Lm5hbWUsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb24sXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJmYWN0aW9uXCI6XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVGYWN0aW9uKGVudGl0eS5tYXRjaC5zb3VyY2VfaWQsIHtcblx0XHRcdFx0XHRuYW1lOiBlbnRpdHkubmFtZSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbixcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImV2ZW50XCI6XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVFdmVudChlbnRpdHkubWF0Y2guc291cmNlX2lkLCB7XG5cdFx0XHRcdFx0bmFtZTogZW50aXR5Lm5hbWUsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb24sXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdG5ldyBOb3RpY2UoYFVuc3VwcG9ydGVkIHR5cGU6ICR7ZW50aXR5LnR5cGV9YCwgNDAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRuZXcgTm90aWNlKGBVcGRhdGVkICR7ZW50aXR5LnR5cGV9OiAke2VudGl0eS5uYW1lfWAsIDMwMDApO1xuXHR9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG9CQUErQjs7O0FDSS9CLElBQU0sb0JBQU4sTUFBd0I7QUFBQSxFQUF4QjtBQUNDLFNBQVEsY0FBYyxvQkFBSSxJQUFnQjtBQUFBO0FBQUEsRUFFMUMsVUFBVSxZQUFvQztBQUM3QyxTQUFLLFlBQVksSUFBSSxVQUFVO0FBQy9CLFdBQU8sTUFBTTtBQUNaLFdBQUssWUFBWSxPQUFPLFVBQVU7QUFBQSxJQUNuQztBQUFBLEVBQ0Q7QUFBQSxFQUVBLE1BQU0sT0FBTyxTQUEyQztBQUN2RCxlQUFXLGNBQWMsS0FBSyxhQUFhO0FBQzFDLFVBQUk7QUFDSCxjQUFNLFdBQVcsT0FBTztBQUFBLE1BQ3pCLFNBQVMsS0FBSztBQUNiLGdCQUFRLE1BQU0sK0JBQStCLEdBQUc7QUFBQSxNQUNqRDtBQUFBLElBQ0Q7QUFBQSxFQUNEO0FBQ0Q7QUFFTyxJQUFNLG9CQUFvQixJQUFJLGtCQUFrQjs7O0FDVWhELElBQU0sb0JBQU4sTUFBd0I7QUFBQSxFQUk5QixZQUNTLFFBQ0EsUUFDQSxXQUFtQixJQUMxQjtBQUhPO0FBQ0E7QUFDQTtBQU5ULFNBQVEsT0FBMkI7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QU87QUFBQSxFQUNQLFdBQVc7QUFBQSxFQUNYLFdBQVc7QUFBQSxFQUNYLFlBQVk7QUFBQSxFQUNaLFdBQVc7QUFBQSxFQUNYLE9BQU87QUFBQSxFQUNQLGdCQUFnQjtBQUFBLEVBQ2hCLFVBQVU7QUFBQSxFQUNWLFNBQVM7QUFBQSxFQUNULE1BQU07QUFBQSxFQUNOLFVBQVU7QUFBQSxFQUNWLFVBQVU7QUFBQSxFQUNWLGVBQWU7QUFBQSxFQUNmLFVBQVU7QUFBQSxFQUNWLFdBQVc7QUFBQSxFQUNYLFVBQVU7QUFBQSxFQUNWLFdBQVc7QUFBQSxFQUNYLGFBQWE7QUFBQSxFQUNiLGdCQUFnQjtBQUFBLEVBQ2hCLFlBQVk7QUFBQSxFQUNaLFlBQVk7QUFBQSxFQUNaLFNBQVM7QUFBQSxFQUNULFlBQVk7QUFBQSxFQUNaLGNBQWM7QUFBQSxFQUNkLGVBQWU7QUFBQSxFQUNmLGVBQWU7QUFBQSxFQUNmLGVBQWU7QUFBQSxFQUNmLGVBQWU7QUFBQSxFQUNmLFlBQVk7QUFBQSxFQUNaLFVBQVU7QUFBQSxFQUNWLGFBQWE7QUFBQSxFQUNiLFNBQVM7QUFBQSxFQUNULFNBQVM7QUFBQSxFQUNULFlBQVk7QUFBQSxFQUNaLFdBQVc7QUFBQSxFQUNYLGFBQWE7QUFBQSxFQUNiLGFBQWE7QUFBQSxFQUNiLFNBQVM7QUFBQSxFQUNULFdBQVc7QUFBQSxFQUNYLFlBQVk7QUFBQSxFQUNaLE1BQU07QUFBQSxFQUNOLFdBQVc7QUFBQSxFQUNYLE1BQU07QUFBQSxFQUNOLE9BQU87QUFBQSxFQUNQLGFBQWE7QUFBQSxFQUNiLE1BQU07QUFBQSxFQUNOLFVBQVU7QUFBQSxFQUNWLFNBQVM7QUFBQSxFQUNULFdBQVc7QUFBQSxFQUNYLFFBQVE7QUFBQSxFQUNSLE9BQU87QUFBQSxFQUNQLE9BQU87QUFBQSxFQUNQLFVBQVU7QUFBQSxFQUNWLGVBQWU7QUFBQSxFQUNmLFdBQVc7QUFBQSxFQUNYLGNBQWM7QUFBQSxFQUNkLFdBQVc7QUFBQSxFQUNYLFlBQVk7QUFBQSxFQUNaLFdBQVc7QUFBQSxFQUNYLHNCQUFzQjtBQUFBLEVBQ3RCLFdBQVc7QUFBQSxFQUNYLFlBQVk7QUFBQSxFQUNaLFdBQVc7QUFBQSxFQUNYLFdBQVc7QUFBQSxFQUNYLGFBQWE7QUFBQSxFQUNiLGVBQWU7QUFBQSxFQUNmLGNBQWM7QUFBQSxFQUNkLGdCQUFnQjtBQUFBLEVBQ2hCLGdCQUFnQjtBQUFBLEVBQ2hCLGdCQUFnQjtBQUFBLEVBQ2hCLGFBQWE7QUFBQSxFQUNiLE1BQU07QUFBQSxFQUNOLFdBQVc7QUFBQSxFQUNYLE9BQU87QUFBQSxFQUNQLFNBQVM7QUFBQSxFQUNULFFBQVE7QUFBQSxFQUNSLGtCQUFrQjtBQUFBLEVBQ2xCLFlBQVk7QUFBQSxFQUNaLGNBQWM7QUFBQSxFQUNkLGNBQWM7QUFBQSxFQUNkLGdCQUFnQjtBQUFBLEVBQ2hCLGlCQUFpQjtBQUFBLEVBQ2pCLG1CQUFtQjtBQUFBLEVBQ25CLGlCQUFpQjtBQUFBLEVBQ2pCLGlCQUFpQjtBQUFBLEVBQ2pCLGNBQWM7QUFBQSxFQUNkLFdBQVc7QUFBQSxFQUNYLFdBQVc7QUFBQSxFQUNYLFVBQVU7QUFBQSxFQUNWLGFBQWE7QUFBQSxFQUNiLE1BQU07QUFBQSxFQUNOLFNBQVM7QUFBQSxFQUNULE9BQU87QUFBQSxFQUNQLFdBQVc7QUFBQSxFQUNYLFFBQVE7QUFBQSxFQUNSLFdBQVc7QUFBQSxFQUNYLFFBQVE7QUFBQSxFQUNSLGVBQWU7QUFBQSxFQUNmLFdBQVc7QUFBQSxFQUNYLGVBQWU7QUFBQSxFQUNmLGVBQWU7QUFBQSxFQUNmLFlBQVk7QUFBQSxFQUNaLFdBQVc7QUFBQSxFQUNYLE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLFlBQVk7QUFBQSxFQUNaLFFBQVE7QUFBQSxFQUNSLGVBQWU7QUFBQSxFQUNmLEtBQUs7QUFBQSxFQUNMLFdBQVc7QUFBQSxFQUNYLFdBQVc7QUFBQSxFQUNYLGFBQWE7QUFBQSxFQUNiLFFBQVE7QUFBQSxFQUNSLFlBQVk7QUFBQSxFQUNaLFVBQVU7QUFBQSxFQUNWLFVBQVU7QUFBQSxFQUNWLFFBQVE7QUFBQSxFQUNSLFFBQVE7QUFBQSxFQUNSLFNBQVM7QUFBQSxFQUNULFdBQVc7QUFBQSxFQUNYLFdBQVc7QUFBQSxFQUNYLFdBQVc7QUFBQSxFQUNYLE1BQU07QUFBQSxFQUNOLGFBQWE7QUFBQSxFQUNiLFdBQVc7QUFBQSxFQUNYLEtBQUs7QUFBQSxFQUNMLE1BQU07QUFBQSxFQUNOLFNBQVM7QUFBQSxFQUNULFFBQVE7QUFBQSxFQUNSLFdBQVc7QUFBQSxFQUNYLFFBQVE7QUFBQSxFQUNSLE9BQU87QUFBQSxFQUNQLE9BQU87QUFBQSxFQUNQLFlBQVk7QUFBQSxFQUNaLFFBQVE7QUFBQSxFQUNSLGFBQWE7QUFDZjtBQUVBLGVBQU8sT0FBTyxPQUFPO0FBQUEsRUFDbkIsS0FBSyxVQUFVO0FBQ2IsV0FBTyxPQUFPLE9BQU8sSUFBSSxLQUFLLGVBQWEsTUFBTSxRQUFRO0FBQUEsRUFDM0Q7QUFBQSxFQUNBLGNBQWM7QUFDWixXQUFPLEtBQUssSUFBSSxFQUFFLFlBQVk7QUFBQSxFQUNoQztBQUFBLEVBQ0EsS0FBSztBQUFBO0FBQUEsRUFDTCxXQUFXO0FBQUEsRUFDWCxZQUFZO0FBQUEsRUFDWixXQUFXO0FBQUEsRUFDWCxXQUFXO0FBQUEsRUFDWCxVQUFVO0FBQ1osQ0FBQztBQUVELFNBQVMsa0JBQWtCO0FBQ3pCLFNBQU8sS0FBSyxJQUFJLEVBQUUsVUFBVTtBQUM5QjtBQUVBLFNBQVMsbUJBQW1CO0FBQzFCLFNBQU8sS0FBSyxJQUFJLEVBQUUsV0FBVztBQUMvQjtBQUVBLFNBQVMsa0JBQWtCO0FBQ3pCLFNBQU8sV0FBVyxJQUFJLEVBQUUsVUFBVTtBQUNwQztBQUVBLFNBQVMsa0JBQWtCO0FBQ3pCLFNBQU8sS0FBSyxJQUFJLEVBQUUsVUFBVTtBQUM5QjtBQUVlLFNBQVIsTUFBdUJDLFNBQVE7QUFDcEMsTUFBSSxHQUFHO0FBQ1AsRUFBQUEsV0FBVUEsVUFBUyxJQUFJLEtBQUssRUFBRSxZQUFZO0FBQzFDLFVBQVEsSUFBSSxNQUFNLEtBQUtBLE9BQU0sTUFBTSxJQUFJLEVBQUUsQ0FBQyxFQUFFLFFBQVEsSUFBSSxTQUFTLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxNQUFNLElBQUksS0FBSyxDQUFDLElBQ3RGLE1BQU0sSUFBSSxJQUFJLElBQUssS0FBSyxJQUFJLEtBQVEsS0FBSyxJQUFJLEtBQVEsS0FBSyxJQUFJLEtBQVEsSUFBSSxNQUFTLElBQUksT0FBUSxJQUFNLElBQUksSUFBTSxDQUFDLElBQ2hILE1BQU0sSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFNLEtBQUssS0FBSyxLQUFNLEtBQUssSUFBSSxNQUFPLElBQUksT0FBUSxHQUFJLElBQy9FLE1BQU0sSUFBSSxLQUFNLEtBQUssS0FBSyxLQUFRLEtBQUssSUFBSSxLQUFRLEtBQUssSUFBSSxLQUFRLEtBQUssSUFBSSxLQUFRLEtBQUssSUFBSSxLQUFRLElBQUksT0FBVSxJQUFJLE9BQVEsSUFBTSxJQUFJLE1BQVEsR0FBSSxJQUN0SixTQUNDLElBQUksYUFBYSxLQUFLQSxPQUFNLEtBQUssSUFBSSxJQUFJLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsS0FDNUQsSUFBSSxhQUFhLEtBQUtBLE9BQU0sS0FBSyxJQUFJLElBQUksRUFBRSxDQUFDLElBQUksTUFBTSxLQUFLLEVBQUUsQ0FBQyxJQUFJLE1BQU0sS0FBSyxFQUFFLENBQUMsSUFBSSxNQUFNLEtBQUssQ0FBQyxLQUNoRyxJQUFJLGNBQWMsS0FBS0EsT0FBTSxLQUFLLEtBQUssRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsS0FDN0QsSUFBSSxjQUFjLEtBQUtBLE9BQU0sS0FBSyxLQUFLLEVBQUUsQ0FBQyxJQUFJLE1BQU0sS0FBSyxFQUFFLENBQUMsSUFBSSxNQUFNLEtBQUssRUFBRSxDQUFDLElBQUksTUFBTSxLQUFLLEVBQUUsQ0FBQyxDQUFDLEtBQ2pHLElBQUksYUFBYSxLQUFLQSxPQUFNLEtBQUssS0FBSyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxLQUFLLEVB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ZUFBZTtBQUNkLFVBQU0sVUFBVyxLQUFLLElBQVk7QUFDbEMsUUFBSSxTQUFTO0FBQ1osY0FBUSxLQUFLO0FBQ2IsaUJBQVcsTUFBTTtBQUNoQixnQkFBUSxZQUFZLEtBQUssU0FBUyxFQUFFO0FBQUEsTUFDckMsR0FBRyxHQUFHO0FBQUEsSUFDUDtBQUFBLEVBQ0Q7QUFDRDsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImlkIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAidGl0bGUiLCAic2VsZWN0aW9uIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgInR5cGUiLCAiaW1wb3J0X29ic2lkaWFuIiwgInByb3NlQ29udGVudCIsICJnb2FsIiwgInRpbWVSZWYiLCAiaW50ZW50IiwgIm91dGNvbWUiLCAidHlwZSIsICJwYXJ0cyIsICJpbXBvcnRfb2JzaWRpYW4iLCAic2NlbmVzRm9sZGVyUGF0aCIsICJiZWF0c0ZvbGRlclBhdGgiLCAiaWQiLCAibWFwIiwgImFsbFNjZW5lcyIsICJyb290IiwgInVwZGF0ZWRDb250ZW50IiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJsZWZ0IiwgInJpZ2h0IiwgImNlbnRlciIsICJtaW4iLCAibWF4IiwgImtleSIsICJzdGFydCIsICJ0aWNrcyIsICJudW1iZXIiLCAidGlja0Zvcm1hdCIsICJ0cmFuc2Zvcm0iLCAiYXhpcyIsICJmb3JtYXQiLCAic2VsZWN0aW9uIiwgImNvcHkiLCAidHlwZSIsICJkb2N1bWVudCIsICJkYXR1bSIsICJzZWxlY3Rpb24iLCAiYXNjZW5kaW5nIiwgImNyZWF0ZSIsICJjcmVhdGUiLCAicGFyc2VUeXBlbmFtZXMiLCAidHlwZSIsICJ3aW5kb3ciLCAiZGlzcGF0Y2hfZGVmYXVsdCIsICJkaXNwYXRjaF9kZWZhdWx0IiwgInNlbGVjdF9kZWZhdWx0IiwgImZvcm1hdCIsICJtaW4iLCAibWF4IiwgImNvbnN0YW50X2RlZmF1bHQiLCAiY29uc3RhbnRfZGVmYXVsdCIsICJjb2xvciIsICJyZ2IiLCAic3RhcnQiLCAiemVybyIsICJpIiwgImNvbnN0YW50X2RlZmF1bHQiLCAibm93IiwgImlkIiwgImdldCIsICJzZXQiLCAic3RhcnQiLCAiZW1wdHkiLCAiaW50ZXJydXB0X2RlZmF1bHQiLCAiaWQiLCAic2V0IiwgImdldCIsICJ0cmFuc2l0aW9uIiwgImF0dHJSZW1vdmUiLCAiYXR0clJlbW92ZU5TIiwgImF0dHJDb25zdGFudCIsICJhdHRyQ29uc3RhbnROUyIsICJhdHRyRnVuY3Rpb24iLCAiYXR0ckZ1bmN0aW9uTlMiLCAiYXR0cl9kZWZhdWx0IiwgImlkIiwgImdldCIsICJpZCIsICJzZXQiLCAiZ2V0IiwgImlkIiwgInNldCIsICJnZXQiLCAiaWQiLCAic2V0IiwgImZpbHRlcl9kZWZhdWx0IiwgIm1lcmdlX2RlZmF1bHQiLCAidHJhbnNpdGlvbiIsICJpZCIsICJzZXQiLCAib25fZGVmYXVsdCIsICJnZXQiLCAiaWQiLCAicmVtb3ZlX2RlZmF1bHQiLCAic2VsZWN0X2RlZmF1bHQiLCAiaWQiLCAiZ2V0IiwgInNlbGVjdEFsbF9kZWZhdWx0IiwgImlkIiwgImNoaWxkcmVuIiwgImluaGVyaXQiLCAiZ2V0IiwgIlNlbGVjdGlvbiIsICJzZWxlY3Rpb25fZGVmYXVsdCIsICJzdHlsZVJlbW92ZSIsICJzdHlsZUNvbnN0YW50IiwgInN0eWxlRnVuY3Rpb24iLCAiaWQiLCAicmVtb3ZlIiwgInNldCIsICJzdHlsZV9kZWZhdWx0IiwgInRleHRDb25zdGFudCIsICJ0ZXh0RnVuY3Rpb24iLCAidGV4dF9kZWZhdWx0IiwgImluaGVyaXQiLCAiZ2V0IiwgImlkIiwgInNldCIsICJpZCIsICJzZWxlY3RfZGVmYXVsdCIsICJzZWxlY3RBbGxfZGVmYXVsdCIsICJmaWx0ZXJfZGVmYXVsdCIsICJtZXJnZV9kZWZhdWx0IiwgInNlbGVjdGlvbl9kZWZhdWx0IiwgIm9uX2RlZmF1bHQiLCAiYXR0cl9kZWZhdWx0IiwgInN0eWxlX2RlZmF1bHQiLCAidGV4dF9kZWZhdWx0IiwgInJlbW92ZV9kZWZhdWx0IiwgImlkIiwgInRyYW5zaXRpb25fZGVmYXVsdCIsICJpbnRlcnJ1cHRfZGVmYXVsdCIsICJ0cmFuc2l0aW9uX2RlZmF1bHQiLCAibnVtYmVyMiIsICJpZGVudGl0eV9kZWZhdWx0IiwgImxvY2FsZSIsICJpZGVudGl0eV9kZWZhdWx0IiwgInplcm8iLCAidHlwZSIsICJmb3JtYXQiLCAiZm9ybWF0UHJlZml4IiwgInZhbHVlIiwgIm1heCIsICJudW1iZXIiLCAiaWRlbnRpdHkiLCAiaSIsICJ0cmFuc2Zvcm0iLCAibnVtYmVyIiwgInN0YXJ0IiwgInN0YXJ0IiwgImxpbmVhciIsICJpZGVudGl0eSIsICJzZWxlY3RfZGVmYXVsdCIsICJsaW5lYXIiLCAiaW1wb3J0X29ic2lkaWFuIiwgInR5cGUiLCAiYnV0dG9uQ29udGFpbmVyIiwgImNvcHkiLCAidGV4dEJ0biIsICJpbWFnZUJ0biIsICJiZWF0Q29udGVudHMiLCAiY2hpbGRyZW4iLCAiX2EiLCAidHlwZSIsICJ1bml0IiwgImwiLCAiY2hhcmFjdGVyIiwgImltcG9ydF9vYnNpZGlhbiIsICJyb290IiwgInNlbGVjdGlvbiJdCn0K
