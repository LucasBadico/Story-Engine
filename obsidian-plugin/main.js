/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => StoryEnginePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian19 = require("obsidian");

// src/sync/apiUpdateNotifier.ts
var ApiUpdateNotifier = class {
  constructor() {
    this.subscribers = /* @__PURE__ */ new Set();
  }
  subscribe(subscriber) {
    this.subscribers.add(subscriber);
    return () => {
      this.subscribers.delete(subscriber);
    };
  }
  async notify(payload) {
    for (const subscriber of this.subscribers) {
      try {
        await subscriber(payload);
      } catch (err) {
        console.error("Auto sync subscriber failed", err);
      }
    }
  }
};
var apiUpdateNotifier = new ApiUpdateNotifier();

// src/api/client.ts
var StoryEngineClient = class {
  constructor(apiUrl, apiKey, tenantId = "") {
    this.apiUrl = apiUrl;
    this.apiKey = apiKey;
    this.tenantId = tenantId;
    this.mode = "remote";
    this.autoSyncOnApiUpdates = true;
  }
  setTenantId(tenantId) {
    this.tenantId = tenantId.trim();
  }
  setMode(mode) {
    this.mode = mode;
  }
  setAutoSyncOnApiUpdates(enabled) {
    this.autoSyncOnApiUpdates = enabled;
  }
  async request(method, endpoint, body, tenantIdOverride) {
    const url = `${this.apiUrl}${endpoint}`;
    const headers = new Headers();
    headers.set("Content-Type", "application/json");
    if (this.apiKey) {
      headers.set("Authorization", `Bearer ${this.apiKey}`);
    }
    const effectiveTenantId = tenantIdOverride != null ? tenantIdOverride : this.tenantId;
    if (effectiveTenantId) {
      const trimmedTenantId = effectiveTenantId.trim();
      if (trimmedTenantId) {
        headers.set("X-Tenant-ID", trimmedTenantId);
      }
    }
    const options = {
      method,
      headers
    };
    if (body) {
      options.body = JSON.stringify(body);
    }
    const response = await fetch(url, options);
    if (!response.ok) {
      let error;
      try {
        error = await response.json();
      } catch (e) {
        error = {
          error: "unknown_error",
          message: `HTTP ${response.status}: ${response.statusText}`,
          code: "HTTP_ERROR"
        };
      }
      const errorMessage = error.message || error.error || `HTTP ${response.status}: ${response.statusText}`;
      throw new Error(errorMessage);
    }
    return response.json();
  }
  async listStories() {
    if (this.mode === "remote" && (!this.tenantId || !this.tenantId.trim())) {
      throw new Error("Tenant ID is required");
    }
    const response = await this.request(
      "GET",
      "/api/v1/stories"
    );
    return response.stories || [];
  }
  async getStory(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/stories/${id2}`
    );
    return response.story;
  }
  async createStory(title, worldId) {
    if (this.mode === "remote" && (!this.tenantId || !this.tenantId.trim())) {
      throw new Error("Tenant ID is required");
    }
    const body = { title: title.trim() };
    if (worldId) {
      body.world_id = worldId;
    }
    const response = await this.request(
      "POST",
      "/api/v1/stories",
      body
    );
    return response.story;
  }
  async cloneStory(id2) {
    if (!this.tenantId || !this.tenantId.trim()) {
      throw new Error("Tenant ID is required");
    }
    const response = await this.request(
      "POST",
      `/api/v1/stories/${id2}/clone`,
      {}
    );
    return response.story;
  }
  async getTenant(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/tenants/${id2}`
    );
    return response.tenant;
  }
  async testConnection() {
    try {
      await this.request("GET", "/health");
      return true;
    } catch (e) {
      return false;
    }
  }
  async updateStory(id2, title, status) {
    const body = { title: title.trim() };
    if (status) {
      body.status = status;
    }
    const response = await this.request(
      "PUT",
      `/api/v1/stories/${id2}`,
      body
    );
    return response.story;
  }
  async getStoryWithHierarchy(id2) {
    const story = await this.getStory(id2);
    const chapters = await this.getChapters(id2);
    const chaptersWithContent = await Promise.all(
      chapters.map(async (chapter) => {
        const scenes = await this.getScenes(chapter.id);
        const scenesWithBeats = await Promise.all(
          scenes.map(async (scene) => {
            const beats = await this.getBeats(scene.id);
            return { scene, beats };
          })
        );
        return { chapter, scenes: scenesWithBeats };
      })
    );
    return {
      story,
      chapters: chaptersWithContent
    };
  }
  async createChapter(storyId, chapter) {
    const response = await this.request(
      "POST",
      "/api/v1/chapters",
      {
        story_id: storyId,
        number: chapter.number,
        title: chapter.title,
        status: chapter.status
      }
    );
    void this.publishChapterUpdate(response.chapter.id);
    return response.chapter;
  }
  async updateChapter(id2, chapter) {
    const response = await this.request(
      "PUT",
      `/api/v1/chapters/${id2}`,
      chapter
    );
    void this.publishChapterUpdate(response.chapter.id);
    return response.chapter;
  }
  async getChapters(storyId) {
    const response = await this.request(
      "GET",
      `/api/v1/stories/${storyId}/chapters`
    );
    return response.chapters || [];
  }
  async getChapter(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/chapters/${id2}`
    );
    return response.chapter;
  }
  async deleteChapter(id2) {
    await this.request("DELETE", `/api/v1/chapters/${id2}`);
  }
  async createScene(scene) {
    const response = await this.request(
      "POST",
      "/api/v1/scenes",
      scene
    );
    void this.publishSceneTree(response.scene.id);
    return response.scene;
  }
  async updateScene(id2, scene) {
    const response = await this.request(
      "PUT",
      `/api/v1/scenes/${id2}`,
      scene
    );
    void this.publishSceneTree(response.scene.id);
    return response.scene;
  }
  async getScenes(chapterId) {
    const response = await this.request(
      "GET",
      `/api/v1/chapters/${chapterId}/scenes`
    );
    return response.scenes || [];
  }
  async getScene(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/scenes/${id2}`
    );
    return response.scene;
  }
  async deleteScene(id2) {
    await this.request("DELETE", `/api/v1/scenes/${id2}`);
  }
  async createBeat(beat) {
    if (!beat.scene_id) {
      throw new Error("scene_id is required to create a beat");
    }
    const payload = { ...beat };
    if (!payload.order_num || payload.order_num <= 0) {
      const existingBeats = await this.getBeats(beat.scene_id);
      const nextOrder = existingBeats.length > 0 ? Math.max(...existingBeats.map((b) => b.order_num || 0)) + 1 : 1;
      payload.order_num = nextOrder;
    }
    const response = await this.request(
      "POST",
      "/api/v1/beats",
      payload
    );
    void this.publishSceneTree(response.beat.scene_id);
    return response.beat;
  }
  async updateBeat(id2, beat) {
    const response = await this.request(
      "PUT",
      `/api/v1/beats/${id2}`,
      beat
    );
    void this.publishSceneTree(response.beat.scene_id);
    return response.beat;
  }
  async getBeats(sceneId) {
    const response = await this.request(
      "GET",
      `/api/v1/scenes/${sceneId}/beats`
    );
    return response.beats || [];
  }
  async getBeat(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/beats/${id2}`
    );
    return response.beat;
  }
  async deleteBeat(id2) {
    await this.request("DELETE", `/api/v1/beats/${id2}`);
  }
  // Get all versions of a story (for version history)
  async getStoryVersions(rootStoryId) {
    const response = await this.request(
      "GET",
      `/api/v1/stories/${rootStoryId}/versions`
    );
    return response.stories || [];
  }
  async getScenesByStory(storyId) {
    const response = await this.request(
      "GET",
      `/api/v1/stories/${storyId}/scenes`
    );
    return response.scenes || [];
  }
  async moveScene(sceneId, chapterId) {
    const body = {};
    if (chapterId !== null) {
      body.chapter_id = chapterId;
    } else {
      body.chapter_id = null;
    }
    const response = await this.request(
      "PUT",
      `/api/v1/scenes/${sceneId}/move`,
      body
    );
    void this.publishSceneTree(response.scene.id);
    return response.scene;
  }
  async getBeatsByStory(storyId) {
    const response = await this.request(
      "GET",
      `/api/v1/stories/${storyId}/beats`
    );
    return response.beats || [];
  }
  async moveBeat(beatId, sceneId) {
    const response = await this.request(
      "PUT",
      `/api/v1/beats/${beatId}/move`,
      { scene_id: sceneId }
    );
    void this.publishSceneTree(response.beat.scene_id);
    return response.beat;
  }
  async getContentBlocks(chapterId) {
    const response = await this.request(
      "GET",
      `/api/v1/chapters/${chapterId}/content-blocks`
    );
    return response.content_blocks || [];
  }
  async getContentBlock(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/content-blocks/${id2}`
    );
    return response.content_block;
  }
  async createContentBlock(chapterId, contentBlock) {
    const response = await this.request(
      "POST",
      `/api/v1/chapters/${chapterId}/content-blocks`,
      contentBlock
    );
    void this.publishContentBlockUpdate(response.content_block.id);
    return response.content_block;
  }
  async updateContentBlock(id2, contentBlock) {
    const response = await this.request(
      "PUT",
      `/api/v1/content-blocks/${id2}`,
      contentBlock
    );
    void this.publishContentBlockUpdate(response.content_block.id);
    return response.content_block;
  }
  async deleteContentBlock(id2) {
    await this.request("DELETE", `/api/v1/content-blocks/${id2}`);
  }
  async getContentAnchors(contentBlockId) {
    const response = await this.request(
      "GET",
      `/api/v1/content-blocks/${contentBlockId}/anchors`
    );
    return response.anchors || [];
  }
  async getContentBlocksByScene(sceneId) {
    const response = await this.request(
      "GET",
      `/api/v1/scenes/${sceneId}/content-blocks`
    );
    return response.content_blocks || [];
  }
  async getContentBlocksByBeat(beatId) {
    const response = await this.request(
      "GET",
      `/api/v1/beats/${beatId}/content-blocks`
    );
    return response.content_blocks || [];
  }
  async createContentAnchor(contentBlockId, entityType, entityId) {
    const response = await this.request(
      "POST",
      `/api/v1/content-blocks/${contentBlockId}/anchors`,
      {
        entity_type: entityType,
        entity_id: entityId
      }
    );
    return response.anchor;
  }
  async deleteContentAnchor(id2) {
    await this.request("DELETE", `/api/v1/content-anchors/${id2}`);
  }
  async getWorlds() {
    const response = await this.request(
      "GET",
      "/api/v1/worlds"
    );
    return response.worlds || [];
  }
  async getWorld(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${id2}`
    );
    return response.world;
  }
  async createWorld(name, description, genre) {
    const response = await this.request(
      "POST",
      "/api/v1/worlds",
      {
        name: name.trim(),
        description: description.trim(),
        genre: genre.trim()
      }
    );
    return response.world;
  }
  async updateWorld(id2, name, description, genre) {
    const response = await this.request(
      "PUT",
      `/api/v1/worlds/${id2}`,
      {
        name: name.trim(),
        description: description.trim(),
        genre: genre.trim()
      }
    );
    return response.world;
  }
  async getRPGSystems() {
    const response = await this.request(
      "GET",
      "/api/v1/rpg-systems"
    );
    return response.rpg_systems || [];
  }
  async getRPGSystem(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/rpg-systems/${id2}`
    );
    return response.rpg_system;
  }
  // Character methods
  async getCharacters(worldId) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${worldId}/characters`
    );
    return response.characters || [];
  }
  async getCharacter(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/characters/${id2}`
    );
    return response.character;
  }
  async createCharacter(worldId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/worlds/${worldId}/characters`,
      data
    );
    return response.character;
  }
  async updateCharacter(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/characters/${id2}`,
      data
    );
    return response.character;
  }
  async deleteCharacter(id2) {
    await this.request("DELETE", `/api/v1/characters/${id2}`);
  }
  // Location methods
  async getLocations(worldId) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${worldId}/locations`
    );
    return response.locations || [];
  }
  async getLocation(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/locations/${id2}`
    );
    return response.location;
  }
  async createLocation(worldId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/worlds/${worldId}/locations`,
      data
    );
    return response.location;
  }
  async updateLocation(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/locations/${id2}`,
      data
    );
    return response.location;
  }
  async deleteLocation(id2) {
    await this.request("DELETE", `/api/v1/locations/${id2}`);
  }
  // Artifact methods
  async getArtifacts(worldId) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${worldId}/artifacts`
    );
    return response.artifacts || [];
  }
  async getArtifact(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/artifacts/${id2}`
    );
    return response.artifact;
  }
  async createArtifact(worldId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/worlds/${worldId}/artifacts`,
      data
    );
    return response.artifact;
  }
  async updateArtifact(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/artifacts/${id2}`,
      data
    );
    return response.artifact;
  }
  async deleteArtifact(id2) {
    await this.request("DELETE", `/api/v1/artifacts/${id2}`);
  }
  // Event methods
  async getEvents(worldId) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${worldId}/events`
    );
    return response.events || [];
  }
  async getEvent(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/events/${id2}`
    );
    return response.event;
  }
  async createEvent(worldId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/worlds/${worldId}/events`,
      data
    );
    return response.event;
  }
  async updateEvent(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/events/${id2}`,
      data
    );
    return response.event;
  }
  async deleteEvent(id2) {
    await this.request("DELETE", `/api/v1/events/${id2}`);
  }
  async moveEvent(id2, parentId) {
    const response = await this.request(
      "PUT",
      `/api/v1/events/${id2}/move`,
      { parent_id: parentId }
    );
    return response.event;
  }
  // Trait methods
  async getTraits() {
    const response = await this.request(
      "GET",
      "/api/v1/traits"
    );
    return response.traits || [];
  }
  async getTrait(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/traits/${id2}`
    );
    return response.trait;
  }
  async createTrait(data) {
    const response = await this.request(
      "POST",
      "/api/v1/traits",
      data
    );
    return response.trait;
  }
  async updateTrait(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/traits/${id2}`,
      data
    );
    return response.trait;
  }
  async deleteTrait(id2) {
    await this.request("DELETE", `/api/v1/traits/${id2}`);
  }
  // Archetype methods
  async getArchetypes() {
    const response = await this.request(
      "GET",
      "/api/v1/archetypes"
    );
    return response.archetypes || [];
  }
  async getArchetype(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/archetypes/${id2}`
    );
    return response.archetype;
  }
  async createArchetype(data) {
    const response = await this.request(
      "POST",
      "/api/v1/archetypes",
      data
    );
    return response.archetype;
  }
  async updateArchetype(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/archetypes/${id2}`,
      data
    );
    return response.archetype;
  }
  async deleteArchetype(id2) {
    await this.request("DELETE", `/api/v1/archetypes/${id2}`);
  }
  async getArchetypeTraits(archetypeId) {
    const response = await this.request(
      "GET",
      `/api/v1/archetypes/${archetypeId}/traits`
    );
    return response.archetype_traits || [];
  }
  async addArchetypeTrait(archetypeId, traitId, defaultValue) {
    await this.request(
      "POST",
      `/api/v1/archetypes/${archetypeId}/traits`,
      {
        trait_id: traitId,
        default_value: defaultValue
      }
    );
  }
  async removeArchetypeTrait(archetypeId, traitId) {
    await this.request(
      "DELETE",
      `/api/v1/archetypes/${archetypeId}/traits/${traitId}`
    );
  }
  // Faction methods
  async getFactions(worldId) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${worldId}/factions`
    );
    return response.factions || [];
  }
  async getFaction(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/factions/${id2}`
    );
    return response.faction;
  }
  async createFaction(worldId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/worlds/${worldId}/factions`,
      data
    );
    return response.faction;
  }
  async updateFaction(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/factions/${id2}`,
      data
    );
    return response.faction;
  }
  async deleteFaction(id2) {
    await this.request("DELETE", `/api/v1/factions/${id2}`);
  }
  async getFactionChildren(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/factions/${id2}/children`
    );
    return response.factions || [];
  }
  async getFactionReferences(factionId) {
    const response = await this.request(
      "GET",
      `/api/v1/factions/${factionId}/references`
    );
    return response.references || [];
  }
  async addFactionReference(factionId, entityType, entityId, role, notes) {
    const response = await this.request(
      "POST",
      `/api/v1/factions/${factionId}/references`,
      {
        entity_type: entityType,
        entity_id: entityId,
        role,
        notes
      }
    );
    return response.reference;
  }
  async updateFactionReference(id2, role, notes) {
    const response = await this.request(
      "PUT",
      `/api/v1/faction-references/${id2}`,
      {
        role,
        notes
      }
    );
    return response.reference;
  }
  async removeFactionReference(factionId, entityType, entityId) {
    await this.request(
      "DELETE",
      `/api/v1/factions/${factionId}/references/${entityType}/${entityId}`
    );
  }
  // Lore methods
  async getLores(worldId) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${worldId}/lores`
    );
    return response.lores || [];
  }
  async getLore(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/lores/${id2}`
    );
    return response.lore;
  }
  async createLore(worldId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/worlds/${worldId}/lores`,
      data
    );
    return response.lore;
  }
  async updateLore(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/lores/${id2}`,
      data
    );
    return response.lore;
  }
  async deleteLore(id2) {
    await this.request("DELETE", `/api/v1/lores/${id2}`);
  }
  async getLoreChildren(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/lores/${id2}/children`
    );
    return response.lores || [];
  }
  async getLoreReferences(loreId) {
    const response = await this.request(
      "GET",
      `/api/v1/lores/${loreId}/references`
    );
    return response.references || [];
  }
  async addLoreReference(loreId, entityType, entityId, relationshipType, notes) {
    const response = await this.request(
      "POST",
      `/api/v1/lores/${loreId}/references`,
      {
        entity_type: entityType,
        entity_id: entityId,
        relationship_type: relationshipType,
        notes
      }
    );
    return response.reference;
  }
  async updateLoreReference(id2, relationshipType, notes) {
    const response = await this.request(
      "PUT",
      `/api/v1/lore-references/${id2}`,
      {
        relationship_type: relationshipType,
        notes
      }
    );
    return response.reference;
  }
  async removeLoreReference(loreId, entityType, entityId) {
    await this.request(
      "DELETE",
      `/api/v1/lores/${loreId}/references/${entityType}/${entityId}`
    );
  }
  // Character Traits methods
  async getCharacterTraits(characterId) {
    const response = await this.request(
      "GET",
      `/api/v1/characters/${characterId}/traits`
    );
    return response.character_traits || [];
  }
  async addCharacterTrait(characterId, traitId, value, notes) {
    const response = await this.request(
      "POST",
      `/api/v1/characters/${characterId}/traits`,
      {
        trait_id: traitId,
        value,
        notes
      }
    );
    return response.character_trait;
  }
  async updateCharacterTrait(characterId, traitId, value, notes) {
    const response = await this.request(
      "PUT",
      `/api/v1/characters/${characterId}/traits/${traitId}`,
      {
        value,
        notes
      }
    );
    return response.character_trait;
  }
  async removeCharacterTrait(characterId, traitId) {
    await this.request(
      "DELETE",
      `/api/v1/characters/${characterId}/traits/${traitId}`
    );
  }
  // Character Events methods
  async getCharacterEvents(characterId) {
    const response = await this.request(
      "GET",
      `/api/v1/characters/${characterId}/events`
    );
    return response.event_characters || [];
  }
  // Character Relationships methods
  async getCharacterRelationships(characterId) {
    const response = await this.request(
      "GET",
      `/api/v1/characters/${characterId}/relationships`
    );
    return response.relationships || [];
  }
  async createCharacterRelationship(characterId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/characters/${characterId}/relationships`,
      data
    );
    return response.relationship;
  }
  async updateCharacterRelationship(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/character-relationships/${id2}`,
      data
    );
    return response.relationship;
  }
  async deleteCharacterRelationship(id2) {
    await this.request("DELETE", `/api/v1/character-relationships/${id2}`);
  }
  async createEntityRelation(input) {
    var _a;
    const response = await this.request(
      "POST",
      "/api/v1/relations",
      {
        world_id: input.world_id,
        source_type: input.source_type,
        source_id: input.source_id,
        target_type: input.target_type,
        target_id: input.target_id,
        relation_type: input.relation_type,
        summary: input.summary,
        create_mirror: (_a = input.create_mirror) != null ? _a : false
      }
    );
    return response.relation;
  }
  // Event Characters/References methods
  async getEventCharacters(eventId) {
    const response = await this.request(
      "GET",
      `/api/v1/events/${eventId}/characters`
    );
    return response.event_characters || [];
  }
  async addEventCharacter(eventId, characterId, role) {
    const response = await this.request(
      "POST",
      `/api/v1/events/${eventId}/characters`,
      {
        character_id: characterId,
        role
      }
    );
    return response.event_character;
  }
  async removeEventCharacter(eventId, characterId) {
    await this.request(
      "DELETE",
      `/api/v1/events/${eventId}/characters/${characterId}`
    );
  }
  async getEventReferences(eventId) {
    const response = await this.request(
      "GET",
      `/api/v1/events/${eventId}/references`
    );
    return response.references || [];
  }
  async addEventReference(eventId, entityType, entityId, relationshipType, notes) {
    const response = await this.request(
      "POST",
      `/api/v1/events/${eventId}/references`,
      {
        entity_type: entityType,
        entity_id: entityId,
        relationship_type: relationshipType,
        notes
      }
    );
    return response.reference;
  }
  async updateEventReference(id2, relationshipType, notes) {
    const response = await this.request(
      "PUT",
      `/api/v1/event-references/${id2}`,
      {
        relationship_type: relationshipType,
        notes
      }
    );
    return response.reference;
  }
  async removeEventReference(eventId, entityType, entityId) {
    await this.request(
      "DELETE",
      `/api/v1/events/${eventId}/references/${entityType}/${entityId}`
    );
  }
  // Scene References methods
  async getSceneReferences(sceneId) {
    const response = await this.request(
      "GET",
      `/api/v1/scenes/${sceneId}/references`
    );
    return response.references || [];
  }
  async addSceneReference(sceneId, entityType, entityId) {
    const response = await this.request(
      "POST",
      `/api/v1/scenes/${sceneId}/references`,
      {
        entity_type: entityType,
        entity_id: entityId
      }
    );
    return response.reference;
  }
  async removeSceneReference(sceneId, entityType, entityId) {
    await this.request(
      "DELETE",
      `/api/v1/scenes/${sceneId}/references/${entityType}/${entityId}`
    );
  }
  // Timeline methods
  async getTimeline(worldId, fromPos, toPos) {
    const queryParams = new URLSearchParams();
    if (fromPos !== void 0) {
      queryParams.append("from_pos", fromPos.toString());
    }
    if (toPos !== void 0) {
      queryParams.append("to_pos", toPos.toString());
    }
    const queryString = queryParams.toString();
    const endpoint = `/api/v1/worlds/${worldId}/timeline${queryString ? `?${queryString}` : ""}`;
    const response = await this.request(
      "GET",
      endpoint
    );
    return response.events || [];
  }
  // World TimeConfig methods
  async updateWorldTimeConfig(worldId, timeConfig) {
    const response = await this.request(
      "PUT",
      `/api/v1/worlds/${worldId}/time-config`,
      timeConfig
    );
    return response.world;
  }
  isAutoSyncEnabled() {
    return this.autoSyncOnApiUpdates;
  }
  async publishChapterUpdate(chapterId) {
    if (!this.isAutoSyncEnabled()) {
      return;
    }
    try {
      const chapter = await this.getChapter(chapterId);
      const story = await this.getStory(chapter.story_id);
      const scenes = await this.getScenes(chapterId);
      const scenesWithBeats = await Promise.all(
        scenes.map(async (scene) => {
          const beats = await this.getBeats(scene.id);
          return { scene, beats };
        })
      );
      const contentBlocks = await this.getContentBlocks(chapterId);
      const contentBlockRefs = [];
      for (const block of contentBlocks) {
        const refs = await this.getContentAnchors(block.id);
        contentBlockRefs.push(...refs);
      }
      await this.notifyEntityUpdate({
        type: "chapter",
        story,
        chapter,
        scenes: scenesWithBeats,
        contentBlocks,
        contentBlockRefs
      });
    } catch (err) {
      console.error("Failed to auto-sync chapter update", err);
    }
  }
  async publishSceneTree(sceneId) {
    if (!this.isAutoSyncEnabled()) {
      return;
    }
    try {
      const scene = await this.getScene(sceneId);
      if (scene.chapter_id) {
        await this.publishChapterUpdate(scene.chapter_id);
        return;
      }
      const story = await this.getStory(scene.story_id);
      const beats = await this.getBeats(scene.id);
      const sceneContentBlocks = await this.getContentBlocksByScene(scene.id);
      const beatContentBlocks = {};
      for (const beat of beats) {
        beatContentBlocks[beat.id] = await this.getContentBlocksByBeat(beat.id);
      }
      await this.notifyEntityUpdate({
        type: "scene",
        story,
        scene,
        beats,
        sceneContentBlocks,
        beatContentBlocks
      });
    } catch (err) {
      console.error("Failed to auto-sync scene update", err);
    }
  }
  async publishContentBlockUpdate(contentBlockId) {
    if (!this.isAutoSyncEnabled()) {
      return;
    }
    try {
      const contentBlock = await this.getContentBlock(contentBlockId);
      let story = null;
      if (contentBlock.chapter_id) {
        const chapter = await this.getChapter(contentBlock.chapter_id);
        story = await this.getStory(chapter.story_id);
      } else {
        const anchors = await this.getContentAnchors(contentBlock.id);
        const sceneAnchor = anchors.find((anchor) => anchor.entity_type === "scene");
        if (sceneAnchor) {
          const scene = await this.getScene(sceneAnchor.entity_id);
          story = await this.getStory(scene.story_id);
        }
      }
      if (!story) {
        console.warn("Unable to resolve story for content block auto-sync", contentBlockId);
        return;
      }
      await this.notifyEntityUpdate({
        type: "content",
        story,
        contentBlock
      });
    } catch (err) {
      console.error("Failed to auto-sync content block update", err);
    }
  }
  async notifyEntityUpdate(payload) {
    await apiUpdateNotifier.notify(payload);
  }
};

// src/settings.ts
var import_obsidian = require("obsidian");
var StoryEngineSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Story Engine Settings" });
    let tenantIdSetting = null;
    let videoLinkSetting = null;
    let conflictResolutionSetting = null;
    const modeSetting = new import_obsidian.Setting(containerEl).setName("Connection Mode").setDesc("Choose between local (offline) or remote (cloud) mode").addDropdown(
      (dropdown) => dropdown.addOption("local", "Local").addOption("remote", "Remote").setValue(this.plugin.settings.mode || "local").onChange(async (value) => {
        this.plugin.settings.mode = value;
        if (value === "local") {
          this.plugin.settings.conflictResolution = "local";
          if (conflictResolutionSetting) {
            conflictResolutionSetting.settingEl.style.display = "none";
          }
        } else {
          if (conflictResolutionSetting) {
            conflictResolutionSetting.settingEl.style.display = "";
          }
        }
        if (tenantIdSetting) {
          tenantIdSetting.settingEl.style.display = value === "remote" ? "" : "none";
        }
        if (videoLinkSetting) {
          videoLinkSetting.settingEl.style.display = value === "local" ? "" : "none";
        }
        if (this.plugin.apiClient) {
          this.plugin.apiClient.setMode(value);
        }
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("API URL").setDesc("The base URL of the Story Engine API").addText(
      (text) => text.setPlaceholder("http://localhost:8080").setValue(this.plugin.settings.apiUrl).onChange(async (value) => {
        this.plugin.settings.apiUrl = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("LLM Gateway URL").setDesc("The base URL of the LLM Gateway service").addText(
      (text) => text.setPlaceholder("http://localhost:8081").setValue(this.plugin.settings.llmGatewayUrl).onChange(async (value) => {
        this.plugin.settings.llmGatewayUrl = value.trim();
        await this.plugin.saveSettings();
      })
    );
    tenantIdSetting = new import_obsidian.Setting(containerEl).setName("Tenant ID").setDesc("Your workspace tenant ID (UUID format) - Required in remote mode").addText(
      (text) => text.setPlaceholder("00000000-0000-0000-0000-000000000000").setValue(this.plugin.settings.tenantId || "").onChange(async (value) => {
        this.plugin.settings.tenantId = value.trim();
        if (this.plugin.apiClient) {
          this.plugin.apiClient.setTenantId(value.trim());
        }
        await this.plugin.saveSettings();
      })
    );
    if (this.plugin.settings.mode === "local") {
      tenantIdSetting.settingEl.style.display = "none";
    }
    const videoUrl = this.plugin.settings.localModeVideoUrl || "https://example.com/setup-video";
    videoLinkSetting = new import_obsidian.Setting(containerEl).setName("Setup Guide").setDesc(`\u{1F4F9} Learn how to setup local mode: ${videoUrl}`).addButton((button) => {
      button.setButtonText("Open Video").onClick(() => {
        window.open(videoUrl, "_blank");
      });
    });
    if (this.plugin.settings.mode === "remote") {
      videoLinkSetting.settingEl.style.display = "none";
    }
    new import_obsidian.Setting(containerEl).setName("API Key").setDesc("API key for authentication (optional for MVP)").addText((text) => {
      text.setPlaceholder("Enter API key").setValue(this.plugin.settings.apiKey).inputEl.type = "password";
      text.onChange(async (value) => {
        this.plugin.settings.apiKey = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Sync Folder Path").setDesc("Folder path where synced stories will be stored").addText(
      (text) => text.setPlaceholder("Stories").setValue(this.plugin.settings.syncFolderPath || "Stories").onChange(async (value) => {
        this.plugin.settings.syncFolderPath = value.trim() || "Stories";
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Auto Version Snapshots").setDesc("Automatically create version snapshots when syncing").addToggle(
      (toggle) => {
        var _a;
        return toggle.setValue((_a = this.plugin.settings.autoVersionSnapshots) != null ? _a : true).onChange(async (value) => {
          this.plugin.settings.autoVersionSnapshots = value;
          await this.plugin.saveSettings();
        });
      }
    );
    new import_obsidian.Setting(containerEl).setName("Auto Sync on API Updates").setDesc("Apply API update payloads directly to local files when available").addToggle(
      (toggle) => {
        var _a;
        return toggle.setValue((_a = this.plugin.settings.autoSyncOnApiUpdates) != null ? _a : true).onChange(async (value) => {
          this.plugin.settings.autoSyncOnApiUpdates = value;
          await this.plugin.saveSettings();
        });
      }
    );
    new import_obsidian.Setting(containerEl).setName("Auto Push on Blur/Idle").setDesc("When you leave a chapter/scene/beat or stay idle for 1 min, push changes upstream automatically").addToggle(
      (toggle) => {
        var _a;
        return toggle.setValue((_a = this.plugin.settings.autoPushOnFileBlur) != null ? _a : true).onChange(async (value) => {
          this.plugin.settings.autoPushOnFileBlur = value;
          await this.plugin.saveSettings();
        });
      }
    );
    conflictResolutionSetting = new import_obsidian.Setting(containerEl).setName("Conflict Resolution").setDesc("How to resolve conflicts when both local and service have changes").addDropdown(
      (dropdown) => dropdown.addOption("service", "Service Wins").addOption("local", "Local Wins").addOption("manual", "Manual (Newer Wins)").setValue(this.plugin.settings.conflictResolution || "service").onChange(async (value) => {
        this.plugin.settings.conflictResolution = value;
        await this.plugin.saveSettings();
      })
    );
    if (this.plugin.settings.mode === "local") {
      conflictResolutionSetting.settingEl.style.display = "none";
    }
    new import_obsidian.Setting(containerEl).setName("Show Help Box in MD Files").setDesc("Enable/disable info/help boxes in markdown files").addToggle(
      (toggle) => {
        var _a;
        return toggle.setValue((_a = this.plugin.settings.showHelpBox) != null ? _a : true).onChange(async (value) => {
          this.plugin.settings.showHelpBox = value;
          await this.plugin.saveSettings();
        });
      }
    );
    const sidebarPositionSetting = new import_obsidian.Setting(containerEl).setName("World Sidebar Position").setDesc("Choose whether the world sidebar appears on the left or right side").addDropdown(
      (dropdown) => dropdown.addOption("left", "Left").addOption("right", "Right").setValue(this.plugin.settings.sidebarPosition || "left").onChange(async (value) => {
        this.plugin.settings.sidebarPosition = value;
        await this.plugin.saveSettings();
        this.app.workspace.trigger("layout-change");
      })
    );
    sidebarPositionSetting.settingEl.style.display = "none";
    new import_obsidian.Setting(containerEl).setName("Unsplash Access Key").setDesc("Application ID / Access Key for Unsplash API (get one at https://unsplash.com/developers)").addText((text) => {
      text.setPlaceholder("Enter Unsplash access key").setValue(this.plugin.settings.unsplashAccessKey || "").inputEl.type = "password";
      text.onChange(async (value) => {
        this.plugin.settings.unsplashAccessKey = value.trim();
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Unsplash Secret Key").setDesc("Secret Key for Unsplash API (optional, needed for some operations)").addText((text) => {
      text.setPlaceholder("Enter Unsplash secret key").setValue(this.plugin.settings.unsplashSecretKey || "").inputEl.type = "password";
      text.onChange(async (value) => {
        this.plugin.settings.unsplashSecretKey = value.trim();
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Test Connection").setDesc("Test connection to the Story Engine API").addButton(
      (button) => button.setButtonText("Test").onClick(async () => {
        button.setButtonText("Testing...");
        button.setDisabled(true);
        try {
          const result = await this.plugin.apiClient.testConnection();
          if (result) {
            button.setButtonText("Success!");
            setTimeout(() => {
              button.setButtonText("Test");
              button.setDisabled(false);
            }, 2e3);
          } else {
            button.setButtonText("Failed");
            setTimeout(() => {
              button.setButtonText("Test");
              button.setDisabled(false);
            }, 2e3);
          }
        } catch (err) {
          button.setButtonText("Error");
          setTimeout(() => {
            button.setButtonText("Test");
            button.setDisabled(false);
          }, 2e3);
        }
      })
    );
  }
};

// src/commands.ts
var import_obsidian3 = require("obsidian");

// src/views/StorySyncModal.ts
var import_obsidian2 = require("obsidian");
var StorySyncModal = class extends import_obsidian2.Modal {
  constructor(plugin, mode) {
    super(plugin.app);
    this.stories = [];
    this.loading = true;
    this.error = null;
    this.plugin = plugin;
    this.mode = mode;
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    const title = this.mode === "pull" ? "Sync Story from Service" : "Push Story to Service";
    contentEl.createEl("h2", { text: title });
    await this.loadStories();
    if (this.loading) {
      contentEl.createEl("p", { text: "Loading stories..." });
      return;
    }
    if (this.error) {
      contentEl.createEl("p", {
        text: `Error: ${this.error}`,
        cls: "story-engine-error"
      });
      return;
    }
    if (this.stories.length === 0) {
      contentEl.createEl("p", { text: "No stories found." });
      return;
    }
    const storiesList = contentEl.createEl("div", { cls: "story-engine-list" });
    for (const story of this.stories) {
      const storyItem = storiesList.createEl("div", {
        cls: "story-engine-item"
      });
      const title2 = storyItem.createEl("div", {
        cls: "story-engine-title",
        text: story.title
      });
      const meta = storyItem.createEl("div", {
        cls: "story-engine-meta"
      });
      meta.createEl("span", {
        text: `Version ${story.version_number}`
      });
      meta.createEl("span", {
        text: `Status: ${story.status}`
      });
      storyItem.onclick = async () => {
        this.close();
        try {
          if (this.mode === "pull") {
            await this.plugin.syncService.pullStory(story.id);
          } else {
            const folderPath = this.plugin.fileManager.getStoryFolderPath(
              story.title
            );
            await this.plugin.syncService.pushStory(folderPath);
          }
        } catch (err) {
          const errorMessage = err instanceof Error ? err.message : "Failed to sync story";
          new import_obsidian2.Notice(`Error: ${errorMessage}`, 5e3);
        }
      };
    }
  }
  async loadStories() {
    this.loading = true;
    this.error = null;
    try {
      if (!this.plugin.settings.tenantId) {
        this.error = "Tenant ID not configured";
        this.loading = false;
        return;
      }
      this.stories = await this.plugin.apiClient.listStories();
    } catch (err) {
      this.error = err instanceof Error ? err.message : "Unknown error";
    } finally {
      this.loading = false;
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/commands.ts
function registerCommands(plugin) {
  plugin.addCommand({
    id: "list-stories",
    name: "List Stories",
    callback: () => {
      plugin.activateView();
    }
  });
  plugin.addCommand({
    id: "create-story",
    name: "Create Story",
    callback: () => {
      plugin.createStoryCommand();
    }
  });
  plugin.addCommand({
    id: "sync-story-from-service",
    name: "Sync Story from Service",
    callback: () => {
      new StorySyncModal(plugin, "pull").open();
    }
  });
  plugin.addCommand({
    id: "push-story-to-service",
    name: "Push Story to Service",
    callback: () => {
      new StorySyncModal(plugin, "push").open();
    }
  });
  plugin.addCommand({
    id: "sync-all-stories",
    name: "Sync All Stories",
    callback: async () => {
      if (plugin.settings.mode === "remote" && !plugin.settings.tenantId) {
        new import_obsidian3.Notice("Please configure Tenant ID in settings", 5e3);
        return;
      }
      try {
        new import_obsidian3.Notice("Syncing all stories...");
        await plugin.syncService.pullAllStories();
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to sync stories";
        new import_obsidian3.Notice(`Error: ${errorMessage}`, 5e3);
      }
    }
  });
  plugin.addCommand({
    id: "extract-entities-from-selection",
    name: "Extract Entities and Relations from Selection",
    editorCallback: (editor) => {
      const selection2 = editor.getSelection();
      if (!selection2.trim()) {
        new import_obsidian3.Notice("Select text to extract entities and relations", 3e3);
        return;
      }
      plugin.extractSelectionCommand(selection2, true);
    }
  });
  plugin.addCommand({
    id: "extract-entities-only-from-selection",
    name: "Extract Entities Only from Selection",
    editorCallback: (editor) => {
      const selection2 = editor.getSelection();
      if (!selection2.trim()) {
        new import_obsidian3.Notice("Select text to extract entities", 3e3);
        return;
      }
      plugin.extractSelectionCommand(selection2, false);
    }
  });
}

// src/views/CreateStoryModal.ts
var import_obsidian5 = require("obsidian");

// src/views/CreateWorldModal.ts
var import_obsidian4 = require("obsidian");
var CreateWorldModal = class extends import_obsidian4.Modal {
  constructor(app, onSubmit) {
    super(app);
    this.name = "";
    this.description = "";
    this.genre = "";
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Create New World" });
    new import_obsidian4.Setting(contentEl).setName("World Name").setDesc("Enter the name for your new world").addText(
      (text) => text.setPlaceholder("My New World").setValue(this.name).onChange((value) => {
        this.name = value;
      }).inputEl.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          const descriptionInput = contentEl.querySelector("textarea");
          if (descriptionInput) {
            descriptionInput.focus();
          }
        }
      })
    );
    new import_obsidian4.Setting(contentEl).setName("Description").setDesc("Enter a description for your world").addTextArea(
      (text) => text.setPlaceholder("A brief description of your world...").setValue(this.description).onChange((value) => {
        this.description = value;
      })
    );
    new import_obsidian4.Setting(contentEl).setName("Genre").setDesc("Enter the genre of your world").addText(
      (text) => text.setPlaceholder("Fantasy, Sci-Fi, Contemporary, etc.").setValue(this.genre).onChange((value) => {
        this.genre = value;
      }).inputEl.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          this.submit();
        }
      })
    );
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const createButton = buttonContainer.createEl("button", {
      text: "Create",
      cls: "mod-cta"
    });
    createButton.addEventListener("click", () => this.submit());
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.addEventListener("click", () => this.close());
    const nameInput = contentEl.querySelector("input");
    if (nameInput) {
      nameInput.focus();
    }
  }
  submit() {
    const trimmedName = this.name.trim();
    const trimmedDescription = this.description.trim();
    const trimmedGenre = this.genre.trim();
    if (!trimmedName) {
      new import_obsidian4.Notice("Please enter a world name", 3e3);
      return;
    }
    if (!trimmedGenre) {
      new import_obsidian4.Notice("Please enter a genre", 3e3);
      return;
    }
    this.close();
    this.onSubmit(trimmedName, trimmedDescription, trimmedGenre);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/CreateStoryModal.ts
var CreateStoryModal = class extends import_obsidian5.Modal {
  constructor(app, plugin, onSubmit) {
    super(app);
    this.title = "";
    this.selectedWorldId = "";
    this.shouldSync = true;
    this.worlds = [];
    this.plugin = plugin;
    this.onSubmit = onSubmit;
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Create New Story" });
    try {
      this.worlds = await this.plugin.apiClient.getWorlds();
    } catch (err) {
      console.error("Failed to load worlds:", err);
      this.worlds = [];
    }
    new import_obsidian5.Setting(contentEl).setName("Story Title").setDesc("Enter the title for your new story").addText(
      (text) => text.setPlaceholder("My New Story").setValue(this.title).onChange((value) => {
        this.title = value;
      }).inputEl.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          this.submit();
        }
      })
    );
    const worldOptions = {
      "": "No World"
    };
    for (const world of this.worlds) {
      worldOptions[world.id] = world.name;
    }
    worldOptions["__create_new__"] = "Create new world...";
    new import_obsidian5.Setting(contentEl).setName("World").setDesc("Select a world for this story (optional)").addDropdown((dropdown) => {
      for (const [value, label] of Object.entries(worldOptions)) {
        dropdown.addOption(value, label);
      }
      dropdown.setValue(this.selectedWorldId || "");
      dropdown.onChange(async (value) => {
        if (value === "__create_new__") {
          new CreateWorldModal(this.app, async (name, description, genre) => {
            try {
              const newWorld = await this.plugin.apiClient.createWorld(name, description, genre);
              this.worlds.push(newWorld);
              this.onClose();
              this.onOpen();
              this.selectedWorldId = newWorld.id;
            } catch (err) {
              const errorMessage = err instanceof Error ? err.message : "Failed to create world";
              new import_obsidian5.Notice(`Error: ${errorMessage}`, 5e3);
            }
          }).open();
        } else {
          this.selectedWorldId = value;
        }
      });
    });
    new import_obsidian5.Setting(contentEl).setName("Sync to Obsidian").setDesc("Automatically sync the story files to your vault after creation").addToggle(
      (toggle) => toggle.setValue(this.shouldSync).onChange((value) => {
        this.shouldSync = value;
      })
    );
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const createButton = buttonContainer.createEl("button", {
      text: "Create",
      cls: "mod-cta"
    });
    createButton.addEventListener("click", () => this.submit());
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.addEventListener("click", () => this.close());
    const titleInput = contentEl.querySelector("input");
    if (titleInput) {
      titleInput.focus();
    }
  }
  submit() {
    const trimmedTitle = this.title.trim();
    if (!trimmedTitle) {
      new import_obsidian5.Notice("Please enter a story title", 3e3);
      return;
    }
    this.close();
    const worldId = this.selectedWorldId && this.selectedWorldId !== "__create_new__" ? this.selectedWorldId : void 0;
    this.onSubmit(trimmedTitle, worldId, this.shouldSync);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/ExtractConfigModal.ts
var import_obsidian6 = require("obsidian");
var ENTITY_TYPE_OPTIONS = [
  { value: "character", label: "Character" },
  { value: "location", label: "Location" },
  { value: "artefact", label: "Artefact" },
  { value: "faction", label: "Faction" },
  { value: "event", label: "Event" }
];
var ExtractConfigModal = class _ExtractConfigModal extends import_obsidian6.Modal {
  constructor(app, defaultTypes, defaultIncludeRelations) {
    super(app);
    this.resolve = null;
    this.selectedTypes = /* @__PURE__ */ new Set();
    this.includeRelations = true;
    defaultTypes.forEach((type2) => this.selectedTypes.add(type2));
    this.includeRelations = defaultIncludeRelations;
  }
  static open(app, defaultTypes, defaultIncludeRelations) {
    return new Promise((resolve) => {
      const modal = new _ExtractConfigModal(
        app,
        defaultTypes,
        defaultIncludeRelations
      );
      modal.resolve = resolve;
      modal.open();
    });
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h3", { text: "Extract Configuration" });
    contentEl.createEl("p", {
      text: "Choose which entity types to extract and whether to include relations."
    });
    const typeBlock = contentEl.createDiv({ cls: "story-engine-extract-config" });
    typeBlock.createEl("div", {
      text: "Entity types",
      cls: "story-engine-extract-label"
    });
    ENTITY_TYPE_OPTIONS.forEach((option) => {
      const row = typeBlock.createDiv({
        cls: "story-engine-extract-config-row"
      });
      const checkbox = row.createEl("input", {
        type: "checkbox"
      });
      checkbox.checked = this.selectedTypes.has(option.value);
      checkbox.onchange = () => {
        if (checkbox.checked) {
          this.selectedTypes.add(option.value);
        } else {
          this.selectedTypes.delete(option.value);
        }
      };
      row.createEl("span", { text: option.label });
    });
    const relationRow = contentEl.createDiv({
      cls: "story-engine-extract-config-row"
    });
    const relationsCheckbox = relationRow.createEl("input", {
      type: "checkbox"
    });
    relationsCheckbox.checked = this.includeRelations;
    relationsCheckbox.onchange = () => {
      this.includeRelations = relationsCheckbox.checked;
    };
    relationRow.createEl("span", { text: "Include relations" });
    const buttonContainer = contentEl.createDiv({
      cls: "modal-button-container"
    });
    const submitButton = buttonContainer.createEl("button", {
      text: "Start Extraction",
      cls: "mod-cta"
    });
    submitButton.onclick = () => this.submit();
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.onclick = () => this.cancel();
  }
  submit() {
    const types = Array.from(this.selectedTypes);
    if (types.length === 0) {
      new import_obsidian6.Notice("Select at least one entity type.", 3e3);
      return;
    }
    if (this.resolve) {
      this.resolve({
        entityTypes: types,
        includeRelations: this.includeRelations
      });
    }
    this.close();
  }
  cancel() {
    if (this.resolve) {
      this.resolve(null);
    }
    this.close();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/sync/fileManager.ts
var import_obsidian7 = require("obsidian");
var FileManager = class {
  constructor(vault, baseFolder) {
    this.vault = vault;
    this.baseFolder = baseFolder;
  }
  // Expose vault for sync operations
  getVault() {
    return this.vault;
  }
  // Get the folder path for a specific story
  getStoryFolderPath(storyTitle) {
    const sanitized = this.sanitizeFolderName(storyTitle);
    return `${this.baseFolder}/${sanitized}`;
  }
  // Sanitize folder/file names
  sanitizeFolderName(name) {
    return name.replace(/[<>:"/\\|?*]/g, "-").replace(/\s+/g, " ").trim();
  }
  // Generate frontmatter with Obsidian tags
  generateFrontmatter(baseFields, extraFields, options) {
    const fields = { ...baseFields };
    if (extraFields) {
      Object.assign(fields, extraFields);
    }
    const tags = [];
    if (options) {
      tags.push(`story-engine/${options.entityType}`);
      if (options.storyName) {
        const sanitizedStoryName = this.sanitizeFolderName(options.storyName).toLowerCase().replace(/\s+/g, "-");
        tags.push(`story/${sanitizedStoryName}`);
      }
      if (options.date) {
        const date = typeof options.date === "string" ? new Date(options.date) : options.date;
        if (!isNaN(date.getTime())) {
          const year = date.getFullYear();
          const month = String(date.getMonth() + 1).padStart(2, "0");
          const day = String(date.getDate()).padStart(2, "0");
          tags.push(`date/${year}/${month}/${day}`);
        }
      }
    }
    const lines = ["---"];
    for (const [key, value] of Object.entries(fields)) {
      if (value === null || value === void 0) {
        lines.push(`${key}: null`);
      } else if (typeof value === "string") {
        const escaped = value.replace(/"/g, '\\"');
        if (value.includes(":") || value.includes("\n") || value.includes('"')) {
          lines.push(`${key}: "${escaped}"`);
        } else {
          lines.push(`${key}: ${escaped}`);
        }
      } else {
        lines.push(`${key}: ${value}`);
      }
    }
    if (tags.length > 0) {
      lines.push(`tags:`);
      for (const tag of tags) {
        lines.push(`  - ${tag}`);
      }
    }
    lines.push("---", "");
    return lines.join("\n");
  }
  // Ensure folder exists
  async ensureFolderExists(path) {
    const folder = this.vault.getAbstractFileByPath(path);
    if (!folder) {
      await this.vault.createFolder(path);
    }
  }
  // Write story metadata (story.md)
  async writeStoryMetadata(story, folderPath, chapters, orphanScenes, orphanBeats, chapterContentData) {
    var _a, _b;
    await this.ensureFolderExists(folderPath);
    const baseFields = {
      id: story.id,
      title: story.title,
      status: story.status,
      version: story.version_number,
      root_story_id: story.root_story_id,
      previous_version_id: story.previous_story_id,
      created_at: story.created_at,
      updated_at: story.updated_at
    };
    const frontmatter = this.generateFrontmatter(baseFields, void 0, {
      entityType: "story",
      storyName: story.title,
      date: story.created_at
    });
    let content = `${frontmatter}
# ${story.title}

Version: ${story.version_number}
Status: ${story.status}

`;
    const temporaryChapterTitles = ["Story Prose", "Scene-Level Prose", "Beat-Level Prose"];
    const filteredChapters = (chapters == null ? void 0 : chapters.filter(
      (c) => !temporaryChapterTitles.includes(c.chapter.title) && c.chapter.number < 9e3
    )) || [];
    if (filteredChapters.length > 0) {
      content += `## Chapters, Scenes & Beats

`;
      content += `> [!info] How to use this list
`;
      content += `> - **Create new item**: Add a line with \`-\` followed by the text
`;
      content += `>   - **Chapter**: No indentation (level 0)
`;
      content += `>   - **Scene**: Use 1 tab indentation (inside a chapter)
`;
      content += `>   - **Beat**: Use 2 tabs indentation (inside a scene)
`;
      content += `> - **Reorder**: Move items up/down to change order
`;
      content += `> - **Links**: Use \`[[link-name|text]]\` to create links to existing files
`;
      content += `> - **Format**:
`;
      content += `>   - **Chapter**:
`;
      content += `>     - Complete: \`Chapter N: title\`
`;
      content += `>     - Simplified: \`title\`
`;
      content += `>   - **Scene**:
`;
      content += `>     - Complete: \`Scene N: goal - timeRef\`
`;
      content += `>     - Simplified:
`;
      content += `>       - \`goal - timeRef\`
`;
      content += `>       - \`goal\`
`;
      content += `>   - **Beat**:
`;
      content += `>     - Complete: \`Beat N: intent -> outcome\`
`;
      content += `>     - Simplified:
`;
      content += `>       - \`intent -> outcome\`
`;
      content += `>       - \`intent\`
`;
      content += `> - **Markers**: \`-\` indicates no associated prose, \`+\` indicates associated prose

`;
      for (const chapterWithContent of filteredChapters) {
        const chapter = chapterWithContent.chapter;
        const chapterFileName = `Chapter-${chapter.number}.md`;
        const chapterLinkName = chapterFileName.replace(/\.md$/, "");
        content += `- [[${chapterLinkName}|Chapter ${chapter.number}: ${chapter.title}]]
`;
        for (const { scene, beats } of chapterWithContent.scenes) {
          const sceneFileName = this.generateSceneFileName(scene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
          content += `	- [[${sceneLinkName}|Scene ${scene.order_num}: ${sceneDisplayText}]]
`;
          for (const beat of beats) {
            const beatFileName = this.generateBeatFileName(beat);
            const beatLinkName = beatFileName.replace(/\.md$/, "");
            const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
            content += `		- [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
          }
        }
      }
      content += `
`;
    }
    if (orphanScenes && orphanScenes.length > 0) {
      content += `## Orphan Scenes

`;
      content += `> [!info] Scenes without a chapter
`;
      content += `> These scenes are not associated with any chapter. You can:
`;
      content += `> - **Reorder**: Move items up/down to change order
`;
      content += `> - **Links**: Use \`[[link-name|text]]\` to create links to existing files
`;
      content += `> - **Format**:
`;
      content += `>   - Complete: \`Scene N: goal - timeRef\`
`;
      content += `>   - Simplified:
`;
      content += `>     - \`goal - timeRef\`
`;
      content += `>     - \`goal\`
`;
      content += `> - **Markers**: \`-\` indicates no associated prose, \`+\` indicates associated prose

`;
      for (const { scene, beats } of orphanScenes) {
        const sceneFileName = this.generateSceneFileName(scene);
        const sceneLinkName = sceneFileName.replace(/\.md$/, "");
        const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
        content += `- [[${sceneLinkName}|Scene ${scene.order_num}: ${sceneDisplayText}]]
`;
        for (const beat of beats) {
          const beatFileName = this.generateBeatFileName(beat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
          content += `	- [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
        }
      }
      content += `
`;
    }
    if (orphanBeats && orphanBeats.length > 0) {
      content += `## Orphan Beats

`;
      content += `> [!info] Beats without a scene
`;
      content += `> These beats are not associated with any scene. You can:
`;
      content += `> - **Reorder**: Move items up/down to change order
`;
      content += `> - **Links**: Use \`[[link-name|text]]\` to create links to existing files
`;
      content += `> - **Format**:
`;
      content += `>   - Complete: \`Beat N: intent -> outcome\`
`;
      content += `>   - Simplified:
`;
      content += `>     - \`intent -> outcome\`
`;
      content += `>     - \`intent\`
`;
      content += `> - **Markers**: \`-\` indicates no associated prose, \`+\` indicates associated prose

`;
      for (const beat of orphanBeats) {
        const beatFileName = this.generateBeatFileName(beat);
        const beatLinkName = beatFileName.replace(/\.md$/, "");
        const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
        content += `- [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
      }
      content += `
`;
    }
    content += `# Story: ${story.title}

`;
    if (filteredChapters.length > 0) {
      for (const chapterWithContent of filteredChapters) {
        const chapter = chapterWithContent.chapter;
        const chapterFileName = `Chapter-${chapter.number}.md`;
        const chapterLinkName = chapterFileName.replace(/\.md$/, "");
        content += `## Chapter ${chapter.number}: [[${chapterLinkName}|${chapter.title}]]

`;
        const contentData = chapterContentData == null ? void 0 : chapterContentData.get(chapter.id);
        let organization = null;
        if (contentData) {
          organization = this.organizeContentBlocks(
            contentData.contentBlocks,
            contentData.contentBlockRefs,
            chapterWithContent.scenes
          );
          for (const contentBlock of organization.chapterOnly) {
            const fileName = this.generateContentBlockFileName(contentBlock);
            const linkName = fileName.replace(/\.md$/, "");
            content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
          }
        }
        for (const { scene, beats } of chapterWithContent.scenes) {
          const sceneFileName = this.generateSceneFileName(scene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
          content += `### Scene: [[${sceneLinkName}|${sceneDisplayText}]]

`;
          if (organization) {
            const sceneContentBlocks = ((_a = organization.byScene.get(scene.id)) == null ? void 0 : _a.contentBlocks) || [];
            for (const contentBlock of sceneContentBlocks) {
              const fileName = this.generateContentBlockFileName(contentBlock);
              const linkName = fileName.replace(/\.md$/, "");
              content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
            }
          }
          for (const beat of beats) {
            const beatFileName = this.generateBeatFileName(beat);
            const beatLinkName = beatFileName.replace(/\.md$/, "");
            const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
            content += `#### Beat: [[${beatLinkName}|${beatDisplayText}]]

`;
            if (organization) {
              const beatContentBlocks = ((_b = organization.byBeat.get(beat.id)) == null ? void 0 : _b.contentBlocks) || [];
              for (const contentBlock of beatContentBlocks) {
                const fileName = this.generateContentBlockFileName(contentBlock);
                const linkName = fileName.replace(/\.md$/, "");
                content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
              }
            }
          }
        }
      }
    }
    if (orphanScenes && orphanScenes.length > 0) {
      for (const { scene, beats } of orphanScenes) {
        const sceneFileName = this.generateSceneFileName(scene);
        const sceneLinkName = sceneFileName.replace(/\.md$/, "");
        const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
        content += `### Scene: [[${sceneLinkName}|${sceneDisplayText}]]

`;
        for (const beat of beats) {
          const beatFileName = this.generateBeatFileName(beat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
          content += `#### Beat: [[${beatLinkName}|${beatDisplayText}]]

`;
        }
      }
    }
    const filePath = `${folderPath}/story.md`;
    const file = this.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian7.TFile) {
      await this.vault.modify(file, content);
    } else {
      await this.vault.create(filePath, content);
    }
  }
  // Write chapter file
  async writeChapterFile(chapterWithContent, filePath, storyName, contentBlocks, contentBlockRefs, orphanScenes) {
    var _a, _b, _c, _d;
    const { chapter, scenes } = chapterWithContent;
    const baseFields = {
      id: chapter.id,
      story_id: chapter.story_id,
      number: chapter.number,
      title: chapter.title,
      status: chapter.status,
      created_at: chapter.created_at,
      updated_at: chapter.updated_at
    };
    const frontmatter = this.generateFrontmatter(baseFields, void 0, {
      entityType: "chapter",
      storyName,
      date: chapter.created_at
    });
    let content = `${frontmatter}
# ${chapter.title}

`;
    const organization = this.organizeContentBlocks(
      contentBlocks || [],
      contentBlockRefs || [],
      scenes
    );
    content += `## Scenes & Beats

`;
    content += `> [!info] How to use this list
`;
    content += `> - **Create new item**: Add a line with \`-\` followed by the text
`;
    content += `>   - **Scene**: No indentation (level 0)
`;
    content += `>   - **Beat**: Use 1 tab indentation (inside a scene)
`;
    content += `> - **Reorder**: Move items up/down to change order
`;
    content += `> - **Links**: Use \`[[link-name|text]]\` to create links to existing files
`;
    content += `> - **Format**:
`;
    content += `>   - **Scene**:
`;
    content += `>     - Complete: \`Scene N: goal - timeRef\`
`;
    content += `>     - Simplified:
`;
    content += `>       - \`goal - timeRef\`
`;
    content += `>       - \`goal\`
`;
    content += `>   - **Beat**:
`;
    content += `>     - Complete: \`Beat N: intent -> outcome\`
`;
    content += `>     - Simplified:
`;
    content += `>       - \`intent -> outcome\`
`;
    content += `>       - \`intent\`
`;
    content += `> - **Markers**: \`-\` indicates no associated prose, \`+\` indicates associated prose
`;
    content += `> - **Orphan scenes** (without chapter) are shown below for easy association

`;
    for (const { scene, beats } of scenes) {
      const sceneFileName = this.generateSceneFileName(scene);
      const sceneLinkName = sceneFileName.replace(/\.md$/, "");
      const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
      const sceneContentBlocks = ((_a = organization.byScene.get(scene.id)) == null ? void 0 : _a.contentBlocks) || [];
      const hasSceneContent = sceneContentBlocks.length > 0;
      const sceneMarker = hasSceneContent ? "+" : "-";
      content += `${sceneMarker} [[${sceneLinkName}|Scene ${scene.order_num}: ${sceneDisplayText}]]
`;
      for (const beat of beats) {
        const beatFileName = this.generateBeatFileName(beat);
        const beatLinkName = beatFileName.replace(/\.md$/, "");
        const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
        const beatContentBlocks = ((_b = organization.byBeat.get(beat.id)) == null ? void 0 : _b.contentBlocks) || [];
        const hasBeatContent = beatContentBlocks.length > 0;
        const beatMarker = hasBeatContent ? "+" : "-";
        content += `	${beatMarker} [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
      }
    }
    if (orphanScenes && orphanScenes.length > 0) {
      content += `
`;
      content += `> [!info] Orphan Scenes (not yet associated with this chapter)
`;
      content += `> You can associate these scenes with this chapter by moving them here.

`;
      for (const { scene, beats } of orphanScenes) {
        const sceneFileName = this.generateSceneFileName(scene);
        const sceneLinkName = sceneFileName.replace(/\.md$/, "");
        const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
        content += `- [[${sceneLinkName}|Scene ${scene.order_num}: ${sceneDisplayText}]]
`;
        for (const beat of beats) {
          const beatFileName = this.generateBeatFileName(beat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
          content += `	- [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
        }
      }
    }
    content += `
`;
    content += `## Chapter ${chapter.number}: ${chapter.title}

`;
    for (const contentBlock of organization.chapterOnly) {
      const fileName = this.generateContentBlockFileName(contentBlock);
      const linkName = fileName.replace(/\.md$/, "");
      content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
    }
    for (const { scene, beats } of scenes) {
      const sceneFileName = this.generateSceneFileName(scene);
      const sceneLinkName = sceneFileName.replace(/\.md$/, "");
      const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
      content += `## Scene: [[${sceneLinkName}|${sceneDisplayText}]]

`;
      const sceneContentBlocks = ((_c = organization.byScene.get(scene.id)) == null ? void 0 : _c.contentBlocks) || [];
      for (const contentBlock of sceneContentBlocks) {
        const fileName = this.generateContentBlockFileName(contentBlock);
        const linkName = fileName.replace(/\.md$/, "");
        content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
      }
      for (const beat of beats) {
        const beatFileName = this.generateBeatFileName(beat);
        const beatLinkName = beatFileName.replace(/\.md$/, "");
        const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
        content += `### Beat: [[${beatLinkName}|${beatDisplayText}]]

`;
        const beatContentBlocks = ((_d = organization.byBeat.get(beat.id)) == null ? void 0 : _d.contentBlocks) || [];
        for (const contentBlock of beatContentBlocks) {
          const fileName = this.generateContentBlockFileName(contentBlock);
          const linkName = fileName.replace(/\.md$/, "");
          content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
        }
      }
    }
    const file = this.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian7.TFile) {
      await this.vault.modify(file, content);
    } else {
      await this.vault.create(filePath, content);
    }
  }
  // Read story metadata
  async readStoryMetadata(folderPath) {
    const filePath = `${folderPath}/story.md`;
    const file = this.vault.getAbstractFileByPath(filePath);
    if (!(file instanceof import_obsidian7.TFile)) {
      throw new Error(`Story metadata file not found: ${filePath}`);
    }
    const content = await this.vault.read(file);
    const frontmatter = this.parseFrontmatter(content);
    return {
      frontmatter: {
        id: frontmatter.id,
        title: frontmatter.title,
        status: frontmatter.status,
        version: parseInt(frontmatter.version),
        root_story_id: frontmatter.root_story_id,
        previous_version_id: frontmatter.previous_version_id || null,
        created_at: frontmatter.created_at,
        updated_at: frontmatter.updated_at
      },
      content: content.split("---").slice(2).join("---").trim()
    };
  }
  // Parse YAML frontmatter
  parseFrontmatter(content) {
    const match = content.match(/^---\n([\s\S]*?)\n---/);
    if (!match) {
      return {};
    }
    const frontmatterText = match[1];
    const result = {};
    for (const line of frontmatterText.split("\n")) {
      const colonIndex = line.indexOf(":");
      if (colonIndex > 0) {
        const key = line.slice(0, colonIndex).trim();
        const value = line.slice(colonIndex + 1).trim().replace(/^["']|["']$/g, "");
        result[key] = value;
      }
    }
    return result;
  }
  // Copy story folder to versions folder
  async createVersionSnapshot(storyFolderPath, versionNumber) {
    const versionsPath = `${storyFolderPath}/versions`;
    await this.ensureFolderExists(versionsPath);
    const versionFolderPath = `${versionsPath}/v${versionNumber}`;
    const existingVersion = this.vault.getAbstractFileByPath(versionFolderPath);
    if (existingVersion) {
      console.log(`Version v${versionNumber} already exists, skipping snapshot`);
      return;
    }
    await this.ensureFolderExists(versionFolderPath);
    const storyFolder = this.vault.getAbstractFileByPath(storyFolderPath);
    if (!(storyFolder instanceof import_obsidian7.TFolder)) {
      throw new Error(`Story folder not found: ${storyFolderPath}`);
    }
    await this.copyFolderContents(storyFolder, versionFolderPath, "versions");
    console.log(`Created version snapshot: v${versionNumber}`);
  }
  // Recursively copy folder contents
  async copyFolderContents(sourceFolder, destPath, excludeFolderName) {
    for (const child of sourceFolder.children) {
      if (child instanceof import_obsidian7.TFile) {
        const relativePath = child.path.replace(sourceFolder.path + "/", "");
        const destFilePath = `${destPath}/${relativePath}`;
        const content = await this.vault.read(child);
        await this.vault.create(destFilePath, content);
      } else if (child instanceof import_obsidian7.TFolder) {
        if (excludeFolderName && child.name === excludeFolderName) {
          continue;
        }
        const relativePath = child.path.replace(sourceFolder.path + "/", "");
        const destFolderPath = `${destPath}/${relativePath}`;
        await this.ensureFolderExists(destFolderPath);
        await this.copyFolderContents(child, destFolderPath, excludeFolderName);
      }
    }
  }
  // Write scene file
  async writeSceneFile(sceneWithBeats, filePath, storyName, contentBlocks, orphanBeats) {
    var _a;
    const { scene, beats } = sceneWithBeats;
    const baseFields = {
      id: scene.id,
      story_id: scene.story_id,
      chapter_id: (_a = scene.chapter_id) != null ? _a : null,
      order_num: scene.order_num,
      time_ref: scene.time_ref || "",
      goal: scene.goal || "",
      created_at: scene.created_at,
      updated_at: scene.updated_at
    };
    const extraFields = {};
    if (scene.pov_character_id) {
      extraFields.pov_character_id = scene.pov_character_id;
    }
    if (scene.location_id) {
      extraFields.location_id = scene.location_id;
    }
    const frontmatter = this.generateFrontmatter(baseFields, extraFields, {
      entityType: "scene",
      storyName,
      date: scene.created_at
    });
    let content = `${frontmatter}
# Scene ${scene.order_num}

`;
    if (scene.goal) {
      content += `**Goal:** ${scene.goal}

`;
    }
    if (scene.time_ref) {
      content += `**Time:** ${scene.time_ref}

`;
    }
    if (beats.length > 0) {
      content += `## Beats

`;
      content += `> [!info] How to use this list
`;
      content += `> - **Create new item**: Add a line with \`-\` followed by the text
`;
      content += `>   - **Beat**: No indentation (level 0)
`;
      content += `> - **Reorder**: Move items up/down to change order
`;
      content += `> - **Links**: Use \`[[link-name|text]]\` to create links to existing files
`;
      content += `> - **Format**:
`;
      content += `>   - **Beat**:
`;
      content += `>     - Complete: \`Beat N: intent -> outcome\`
`;
      content += `>     - Simplified:
`;
      content += `>       - \`intent -> outcome\`
`;
      content += `>       - \`intent\`
`;
      content += `> - **Markers**: \`-\` indicates no associated prose, \`+\` indicates associated prose
`;
      content += `> - **Orphan beats** (without scene) are shown below for easy association

`;
      const beatsWithProse = /* @__PURE__ */ new Set();
      if (contentBlocks) {
        for (const contentBlock of contentBlocks) {
        }
      }
      for (const beat of beats.sort((a, b) => a.order_num - b.order_num)) {
        const beatFileName = this.generateBeatFileName(beat);
        const beatLinkName = beatFileName.replace(/\.md$/, "");
        const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
        const hasBeatProse = beatsWithProse.has(beat.id);
        const beatMarker = hasBeatProse ? "+" : "-";
        content += `${beatMarker} [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
      }
      if (orphanBeats && orphanBeats.length > 0) {
        content += `
`;
        content += `> [!info] Orphan Beats (not yet associated with this scene)
`;
        content += `> You can associate these beats with this scene by moving them here.

`;
        for (const beat of orphanBeats) {
          const beatFileName = this.generateBeatFileName(beat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
          content += `- [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
        }
      }
      content += `
`;
    }
    const sceneFileName = this.generateSceneFileName(scene);
    const sceneLinkName = sceneFileName.replace(/\.md$/, "");
    const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
    content += `## Scene: [[${sceneLinkName}|${sceneDisplayText}]]

`;
    if (contentBlocks && contentBlocks.length > 0) {
      const sortedContentBlocks = [...contentBlocks].sort((a, b) => (a.order_num || 0) - (b.order_num || 0));
      for (const contentBlock of sortedContentBlocks) {
        const fileName = this.generateContentBlockFileName(contentBlock);
        const linkName = fileName.replace(/\.md$/, "");
        content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
      }
    }
    for (const beat of beats.sort((a, b) => a.order_num - b.order_num)) {
      const beatFileName = this.generateBeatFileName(beat);
      const beatLinkName = beatFileName.replace(/\.md$/, "");
      const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
      content += `### Beat: [[${beatLinkName}|${beatDisplayText}]]

`;
    }
    const file = this.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian7.TFile) {
      await this.vault.modify(file, content);
    } else {
      await this.vault.create(filePath, content);
    }
  }
  // Write beat file
  async writeBeatFile(beat, filePath, storyName, contentBlocks) {
    const baseFields = {
      id: beat.id,
      scene_id: beat.scene_id,
      order_num: beat.order_num,
      type: beat.type,
      intent: beat.intent || "",
      outcome: beat.outcome || "",
      created_at: beat.created_at,
      updated_at: beat.updated_at
    };
    const frontmatter = this.generateFrontmatter(baseFields, void 0, {
      entityType: "beat",
      storyName,
      date: beat.created_at
    });
    let content = `${frontmatter}
# Beat ${beat.order_num} - ${beat.type}

`;
    if (beat.intent) {
      content += `**Intent:** ${beat.intent}

`;
    }
    if (beat.outcome) {
      content += `**Outcome:** ${beat.outcome}

`;
    }
    const beatFileName = this.generateBeatFileName(beat);
    const beatLinkName = beatFileName.replace(/\.md$/, "");
    const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
    content += `## Beat: [[${beatLinkName}|${beatDisplayText}]]

`;
    if (contentBlocks && contentBlocks.length > 0) {
      const sortedContentBlocks = [...contentBlocks].sort((a, b) => (a.order_num || 0) - (b.order_num || 0));
      for (const contentBlock of sortedContentBlocks) {
        const fileName = this.generateContentBlockFileName(contentBlock);
        const linkName = fileName.replace(/\.md$/, "");
        content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
      }
    }
    const file = this.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian7.TFile) {
      await this.vault.modify(file, content);
    } else {
      await this.vault.create(filePath, content);
    }
  }
  // List all chapter files in a story folder
  async listChapterFiles(storyFolderPath) {
    const chaptersPath = `${storyFolderPath}/00-chapters`;
    const folder = this.vault.getAbstractFileByPath(chaptersPath);
    if (!(folder instanceof import_obsidian7.TFolder)) {
      return [];
    }
    const chapterFiles = [];
    for (const child of folder.children) {
      if (child instanceof import_obsidian7.TFile && child.extension === "md") {
        chapterFiles.push(child.path);
      }
    }
    return chapterFiles.sort();
  }
  // List all scene files in a chapter folder
  async listSceneFiles(chapterFolderPath) {
    const scenesPath = `${chapterFolderPath}/01-scenes`;
    const folder = this.vault.getAbstractFileByPath(scenesPath);
    if (!(folder instanceof import_obsidian7.TFolder)) {
      return [];
    }
    const sceneFiles = [];
    for (const child of folder.children) {
      if (child instanceof import_obsidian7.TFile && child.extension === "md") {
        sceneFiles.push(child.path);
      }
    }
    return sceneFiles.sort();
  }
  // List all scene files in a story folder
  async listStorySceneFiles(storyFolderPath) {
    const scenesPath = `${storyFolderPath}/01-scenes`;
    const folder = this.vault.getAbstractFileByPath(scenesPath);
    if (!(folder instanceof import_obsidian7.TFolder)) {
      return [];
    }
    const sceneFiles = [];
    for (const child of folder.children) {
      if (child instanceof import_obsidian7.TFile && child.extension === "md") {
        sceneFiles.push(child.path);
      }
    }
    return sceneFiles.sort();
  }
  // List all beat files in a story folder
  async listStoryBeatFiles(storyFolderPath) {
    const beatsPath = `${storyFolderPath}/02-beats`;
    const folder = this.vault.getAbstractFileByPath(beatsPath);
    if (!(folder instanceof import_obsidian7.TFolder)) {
      return [];
    }
    const beatFiles = [];
    for (const child of folder.children) {
      if (child instanceof import_obsidian7.TFile && child.extension === "md") {
        beatFiles.push(child.path);
      }
    }
    return beatFiles.sort();
  }
  // List all beat files in a scene folder
  async listBeatFiles(sceneFolderPath) {
    const beatsPath = `${sceneFolderPath}/02-beats`;
    const folder = this.vault.getAbstractFileByPath(beatsPath);
    if (!(folder instanceof import_obsidian7.TFolder)) {
      return [];
    }
    const beatFiles = [];
    for (const child of folder.children) {
      if (child instanceof import_obsidian7.TFile && child.extension === "md") {
        beatFiles.push(child.path);
      }
    }
    return beatFiles.sort();
  }
  // Get the subfolder name for a content block type
  getContentTypeFolder(type2) {
    const typeFolders = {
      text: "00-texts",
      image: "01-images",
      video: "02-videos",
      audio: "03-audios",
      embed: "04-embeds",
      link: "05-links"
    };
    return typeFolders[type2] || "99-other";
  }
  // Get the full folder path for content blocks of a specific type
  getContentBlockFolderPath(storyFolderPath, type2) {
    const typeFolder = this.getContentTypeFolder(type2);
    return `${storyFolderPath}/03-contents/${typeFolder}`;
  }
  // Generate filename for content block based on date and content preview
  generateContentBlockFileName(contentBlock) {
    const date = new Date(contentBlock.created_at);
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    const hours = String(date.getHours()).padStart(2, "0");
    const minutes = String(date.getMinutes()).padStart(2, "0");
    const dateStr = `${year}-${month}-${day}T${hours}-${minutes}`;
    let textPart;
    const type2 = contentBlock.type || "text";
    if (type2 === "text") {
      textPart = contentBlock.content.substring(0, 30).trim().replace(/[<>:"/\\|?*\n\r\t]/g, "-").replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "").toLowerCase() || "content";
    } else if (type2 === "image" || type2 === "video" || type2 === "audio") {
      const meta = contentBlock.metadata || {};
      textPart = (meta.alt_text || meta.caption || meta.title || type2).substring(0, 30).trim().replace(/[<>:"/\\|?*\n\r\t]/g, "-").replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "").toLowerCase();
    } else if (type2 === "embed") {
      const meta = contentBlock.metadata || {};
      textPart = (meta.provider || meta.title || "embed").substring(0, 30).trim().replace(/[<>:"/\\|?*\n\r\t]/g, "-").replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "").toLowerCase();
    } else if (type2 === "link") {
      const meta = contentBlock.metadata || {};
      textPart = (meta.title || meta.site_name || "link").substring(0, 30).trim().replace(/[<>:"/\\|?*\n\r\t]/g, "-").replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "").toLowerCase();
    } else {
      textPart = "content";
    }
    return `${dateStr}_${textPart}.md`;
  }
  // Organize content blocks by their associations (chapter, scene, beat)
  organizeContentBlocks(contentBlocks, contentBlockRefs, scenes) {
    const organization = {
      chapterOnly: [],
      byScene: /* @__PURE__ */ new Map(),
      byBeat: /* @__PURE__ */ new Map()
    };
    const contentBlockRefsByContentBlock = /* @__PURE__ */ new Map();
    for (const ref of contentBlockRefs) {
      if (!contentBlockRefsByContentBlock.has(ref.content_block_id)) {
        contentBlockRefsByContentBlock.set(ref.content_block_id, []);
      }
      contentBlockRefsByContentBlock.get(ref.content_block_id).push(ref);
    }
    const sceneMap = /* @__PURE__ */ new Map();
    const beatMap = /* @__PURE__ */ new Map();
    for (const { scene, beats } of scenes) {
      sceneMap.set(scene.id, scene);
      for (const beat of beats) {
        beatMap.set(beat.id, beat);
      }
    }
    const sortedContentBlocks = [...contentBlocks].sort((a, b) => (a.order_num || 0) - (b.order_num || 0));
    for (const contentBlock of sortedContentBlocks) {
      const refs = contentBlockRefsByContentBlock.get(contentBlock.id) || [];
      const sceneRef = refs.find((r) => r.entity_type === "scene");
      const beatRef = refs.find((r) => r.entity_type === "beat");
      if (beatRef && beatMap.has(beatRef.entity_id)) {
        const beat = beatMap.get(beatRef.entity_id);
        if (!organization.byBeat.has(beat.id)) {
          organization.byBeat.set(beat.id, { beat, contentBlocks: [] });
        }
        organization.byBeat.get(beat.id).contentBlocks.push(contentBlock);
      } else if (sceneRef && sceneMap.has(sceneRef.entity_id)) {
        const scene = sceneMap.get(sceneRef.entity_id);
        if (!organization.byScene.has(scene.id)) {
          organization.byScene.set(scene.id, { scene, contentBlocks: [] });
        }
        organization.byScene.get(scene.id).contentBlocks.push(contentBlock);
      } else {
        organization.chapterOnly.push(contentBlock);
      }
    }
    return organization;
  }
  // Generate filename for scene based on date and goal
  generateSceneFileName(scene) {
    const date = new Date(scene.created_at);
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    const hours = String(date.getHours()).padStart(2, "0");
    const minutes = String(date.getMinutes()).padStart(2, "0");
    const dateStr = `${year}-${month}-${day}T${hours}-${minutes}`;
    const goalSanitized = (scene.goal || "scene").trim().replace(/[<>:"/\\|?*\n\r\t]/g, "-").replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "").toLowerCase();
    return `${dateStr}_${goalSanitized}.md`;
  }
  // Generate filename for beat based on date and intent
  generateBeatFileName(beat) {
    const date = new Date(beat.created_at);
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    const hours = String(date.getHours()).padStart(2, "0");
    const minutes = String(date.getMinutes()).padStart(2, "0");
    const dateStr = `${year}-${month}-${day}T${hours}-${minutes}`;
    const intentSanitized = (beat.intent || "beat").trim().replace(/[<>:"/\\|?*\n\r\t]/g, "-").replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "").toLowerCase();
    return `${dateStr}_${intentSanitized}.md`;
  }
  // Write content block file
  async writeContentBlockFile(contentBlock, filePath, storyName) {
    const type2 = contentBlock.type || "text";
    const baseFields = {
      id: contentBlock.id,
      chapter_id: contentBlock.chapter_id || null,
      order_num: contentBlock.order_num || 0,
      type: type2,
      kind: contentBlock.kind,
      created_at: contentBlock.created_at,
      updated_at: contentBlock.updated_at
    };
    const meta = contentBlock.metadata || {};
    if (type2 === "text" && meta.word_count) {
      baseFields.word_count = meta.word_count;
    } else if (type2 === "image") {
      if (contentBlock.content && contentBlock.content.startsWith("http")) {
        baseFields.original_url = contentBlock.content;
      }
      if (meta.alt_text)
        baseFields.alt_text = meta.alt_text;
      if (meta.caption)
        baseFields.caption = meta.caption;
      if (meta.width)
        baseFields.width = meta.width;
      if (meta.height)
        baseFields.height = meta.height;
      if (meta.mime_type)
        baseFields.mime_type = meta.mime_type;
      if (meta.source)
        baseFields.source = meta.source;
      if (meta.author_name)
        baseFields.author_name = meta.author_name;
      if (meta.attribution)
        baseFields.attribution = meta.attribution;
      if (meta.attribution_url)
        baseFields.attribution_url = meta.attribution_url;
    } else if (type2 === "video" || type2 === "audio") {
      if (meta.provider)
        baseFields.provider = meta.provider;
      if (meta.video_id)
        baseFields.video_id = meta.video_id;
      if (meta.duration)
        baseFields.duration = meta.duration;
      if (meta.thumbnail_url)
        baseFields.thumbnail_url = meta.thumbnail_url;
    } else if (type2 === "embed") {
      if (meta.provider)
        baseFields.provider = meta.provider;
      if (meta.html)
        baseFields.embed_html = meta.html;
    } else if (type2 === "link") {
      if (meta.title)
        baseFields.link_title = meta.title;
      if (meta.description)
        baseFields.link_description = meta.description;
      if (meta.image_url)
        baseFields.link_image = meta.image_url;
      if (meta.site_name)
        baseFields.site_name = meta.site_name;
    }
    const frontmatter = this.generateFrontmatter(baseFields, void 0, {
      entityType: "content-block",
      storyName,
      date: contentBlock.created_at
    });
    let fileContent;
    if (type2 === "text") {
      fileContent = `${frontmatter}${contentBlock.content}`;
    } else if (type2 === "image") {
      let localImagePath = contentBlock.content || "";
      if (contentBlock.content && !contentBlock.content.startsWith("http")) {
        localImagePath = contentBlock.content;
      } else if (contentBlock.content) {
        try {
          localImagePath = await this.downloadImage(contentBlock.content, filePath, contentBlock.id);
        } catch (err) {
          console.error("Failed to download image:", err);
          localImagePath = contentBlock.content;
        }
      }
      const altText = meta.alt_text || "";
      fileContent = `${frontmatter}![${altText}](${localImagePath})`;
      if (meta.caption) {
        fileContent += `

*${meta.caption}*`;
      }
    } else if (type2 === "video") {
      fileContent = `${frontmatter}[Video](${contentBlock.content})`;
      if (meta.thumbnail_url) {
        fileContent += `

![Thumbnail](${meta.thumbnail_url})`;
      }
    } else if (type2 === "audio") {
      fileContent = `${frontmatter}[Audio](${contentBlock.content})`;
    } else if (type2 === "embed") {
      fileContent = `${frontmatter}${meta.html || contentBlock.content}`;
    } else if (type2 === "link") {
      const title = meta.title || contentBlock.content;
      fileContent = `${frontmatter}[${title}](${contentBlock.content})`;
      if (meta.description) {
        fileContent += `

${meta.description}`;
      }
    } else {
      fileContent = `${frontmatter}${contentBlock.content}`;
    }
    const file = this.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian7.TFile) {
      await this.vault.modify(file, fileContent);
    } else {
      await this.vault.create(filePath, fileContent);
    }
  }
  // Download image from URL and save locally (same folder as content block .md)
  async downloadImage(imageUrl, contentBlockFilePath, contentBlockId) {
    try {
      const response = await fetch(imageUrl);
      if (!response.ok) {
        throw new Error(`Failed to fetch image: ${response.statusText}`);
      }
      const blob = await response.blob();
      const arrayBuffer = await blob.arrayBuffer();
      let extension = "jpg";
      const contentType = response.headers.get("content-type");
      if (contentType) {
        if (contentType.includes("png"))
          extension = "png";
        else if (contentType.includes("gif"))
          extension = "gif";
        else if (contentType.includes("webp"))
          extension = "webp";
        else if (contentType.includes("svg"))
          extension = "svg";
      } else {
        const urlMatch = imageUrl.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i);
        if (urlMatch) {
          extension = urlMatch[1].toLowerCase();
        }
      }
      const contentBlockDir = contentBlockFilePath.substring(0, contentBlockFilePath.lastIndexOf("/"));
      const imageFileName = `${contentBlockId}.${extension}`;
      const imagePath = `${contentBlockDir}/${imageFileName}`;
      const existingFile = this.vault.getAbstractFileByPath(imagePath);
      if (existingFile instanceof import_obsidian7.TFile) {
        await this.vault.modifyBinary(existingFile, arrayBuffer);
      } else {
        await this.vault.createBinary(imagePath, arrayBuffer);
      }
      return imageFileName;
    } catch (err) {
      console.error("Error downloading image:", err);
      throw err;
    }
  }
  // Read content block from file
  async readContentBlockFromFile(filePath) {
    const file = this.vault.getAbstractFileByPath(filePath);
    if (!(file instanceof import_obsidian7.TFile)) {
      return null;
    }
    try {
      const fileContent = await this.vault.read(file);
      const frontmatter = this.parseFrontmatter(fileContent);
      const contentMatch = fileContent.match(/^---\n[\s\S]*?\n---\n([\s\S]*)$/);
      let blockContent = contentMatch ? contentMatch[1].trim() : "";
      if (!frontmatter.id) {
        return null;
      }
      const type2 = frontmatter.type || "text";
      const metadata = {};
      if (type2 === "image") {
        const imgMatch = blockContent.match(/!\[[^\]]*\]\(([^)]+)\)/);
        if (imgMatch) {
          blockContent = imgMatch[1];
          if (!blockContent.startsWith("http") && frontmatter.original_url) {
            blockContent = frontmatter.original_url;
          }
        }
      } else if (type2 === "video" || type2 === "audio" || type2 === "link") {
        const linkMatch = blockContent.match(/\[[^\]]*\]\(([^)]+)\)/);
        if (linkMatch) {
          blockContent = linkMatch[1];
        }
      }
      if (frontmatter.word_count)
        metadata.word_count = parseInt(frontmatter.word_count, 10);
      if (frontmatter.alt_text)
        metadata.alt_text = frontmatter.alt_text;
      if (frontmatter.caption)
        metadata.caption = frontmatter.caption;
      if (frontmatter.width)
        metadata.width = parseInt(frontmatter.width, 10);
      if (frontmatter.height)
        metadata.height = parseInt(frontmatter.height, 10);
      if (frontmatter.mime_type)
        metadata.mime_type = frontmatter.mime_type;
      if (frontmatter.source)
        metadata.source = frontmatter.source;
      if (frontmatter.author_name)
        metadata.author_name = frontmatter.author_name;
      if (frontmatter.attribution)
        metadata.attribution = frontmatter.attribution;
      if (frontmatter.attribution_url)
        metadata.attribution_url = frontmatter.attribution_url;
      if (frontmatter.provider)
        metadata.provider = frontmatter.provider;
      if (frontmatter.video_id)
        metadata.video_id = frontmatter.video_id;
      if (frontmatter.duration)
        metadata.duration = parseInt(frontmatter.duration, 10);
      if (frontmatter.thumbnail_url)
        metadata.thumbnail_url = frontmatter.thumbnail_url;
      if (frontmatter.embed_html)
        metadata.html = frontmatter.embed_html;
      if (frontmatter.link_title)
        metadata.title = frontmatter.link_title;
      if (frontmatter.link_description)
        metadata.description = frontmatter.link_description;
      if (frontmatter.link_image)
        metadata.image_url = frontmatter.link_image;
      if (frontmatter.site_name)
        metadata.site_name = frontmatter.site_name;
      return {
        id: frontmatter.id,
        chapter_id: frontmatter.chapter_id || null,
        order_num: parseInt(frontmatter.order_num || "0", 10),
        type: type2,
        kind: frontmatter.kind || "final",
        content: blockContent,
        metadata,
        created_at: frontmatter.created_at || "",
        updated_at: frontmatter.updated_at || ""
      };
    } catch (err) {
      console.error(`Failed to read content block from ${filePath}:`, err);
      return null;
    }
  }
  // List all content block files in a story folder (across all type subfolders)
  async listContentBlockFiles(storyFolderPath) {
    const contentsPath = `${storyFolderPath}/03-contents`;
    const folder = this.vault.getAbstractFileByPath(contentsPath);
    if (!(folder instanceof import_obsidian7.TFolder)) {
      return [];
    }
    const contentFiles = [];
    for (const child of folder.children) {
      if (child instanceof import_obsidian7.TFolder) {
        for (const file of child.children) {
          if (file instanceof import_obsidian7.TFile && file.extension === "md") {
            contentFiles.push(file.path);
          }
        }
      }
    }
    return contentFiles.sort();
  }
};

// src/sync/syncService.ts
var import_obsidian9 = require("obsidian");

// src/sync/contentBlockParser.ts
function parseHierarchicalProse(chapterContent) {
  const sections = [];
  const frontmatterMatch = chapterContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = chapterContent.substring(contentStart).trim();
  const chapterSectionMatch = bodyContent.match(/##\s+Chapter\s+\d+:\s+[^\n]+\s*\n+([\s\S]*?)(?=\n##\s+Chapter\s+\d+:|$)/);
  if (!chapterSectionMatch) {
    const chapterSectionMatchSameLine = bodyContent.match(/##\s+Chapter\s+\d+:\s+[^\n]+\s+([^\n]+)/);
    if (chapterSectionMatchSameLine) {
      const proseContent2 = chapterSectionMatchSameLine[1].trim();
      if (proseContent2.length > 0 && !proseContent2.startsWith("#")) {
        const paragraph = {
          content: proseContent2,
          linkName: null,
          originalOrder: 0
        };
        sections.push({
          type: "prose",
          prose: paragraph,
          originalOrder: 0
        });
      }
      return { sections };
    }
    return { sections: [] };
  }
  const proseContent = chapterSectionMatch[1].trim();
  const lines = proseContent.split(/\n/);
  let currentScene = null;
  let currentBeat = null;
  let order = 0;
  for (let i = 0; i < lines.length; i++) {
    const line = lines[i].trim();
    if (!line) {
      continue;
    }
    const sceneMatch = line.match(/^##\s+Scene:\s*(.+)$/);
    if (sceneMatch) {
      const sceneText = sceneMatch[1].trim();
      const parsedScene = parseSceneHeader(sceneText);
      parsedScene.originalOrder = order++;
      currentScene = parsedScene;
      currentBeat = null;
      sections.push({
        type: "scene",
        scene: parsedScene,
        originalOrder: parsedScene.originalOrder
      });
      continue;
    }
    const beatMatch = line.match(/^###\s+Beat:\s*(.+)$/);
    if (beatMatch) {
      const beatText = beatMatch[1].trim();
      const parsedBeat = parseBeatHeader(beatText);
      parsedBeat.originalOrder = order++;
      currentBeat = parsedBeat;
      sections.push({
        type: "beat",
        beat: parsedBeat,
        originalOrder: parsedBeat.originalOrder
      });
      continue;
    }
    if (line.startsWith("#") && !line.match(/^##\s+Scene:/) && !line.match(/^###\s+Beat:/)) {
      continue;
    }
    const proseMatch = line.match(/^\s*\[\[([^\|]+)\|([^\]]+)\]\]\s*$/);
    if (proseMatch) {
      const linkName = proseMatch[1].trim();
      const content = proseMatch[2].trim();
      const paragraph = {
        content,
        linkName,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
      continue;
    }
    if (line.length > 0 && !line.startsWith("#")) {
      const paragraph = {
        content: line,
        linkName: null,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
    }
  }
  return { sections };
}
function parseSceneHeader(text) {
  const linkMatch = text.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
  if (linkMatch) {
    const linkName = linkMatch[1].trim();
    const displayText = linkMatch[2].trim();
    const { goal: goal2, timeRef: timeRef2 } = parseSceneText(displayText);
    return {
      linkName,
      goal: goal2,
      timeRef: timeRef2,
      originalOrder: 0
      // Will be set by caller
    };
  }
  const simpleLinkMatch = text.match(/^\[\[([^\]]+)\]\]$/);
  if (simpleLinkMatch) {
    return {
      linkName: simpleLinkMatch[1].trim(),
      goal: "",
      timeRef: "",
      originalOrder: 0
    };
  }
  const { goal, timeRef } = parseSceneText(text);
  return {
    linkName: null,
    goal,
    timeRef,
    originalOrder: 0
  };
}
function parseSceneText(text) {
  const parts = text.split(/\s*-\s*/);
  if (parts.length >= 2) {
    return {
      goal: parts[0].trim(),
      timeRef: parts.slice(1).join(" - ").trim()
      // Join in case there are multiple "-"
    };
  }
  return {
    goal: text.trim(),
    timeRef: ""
  };
}
function parseBeatHeader(text) {
  const linkMatch = text.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
  if (linkMatch) {
    const linkName = linkMatch[1].trim();
    const displayText = linkMatch[2].trim();
    const { intent: intent2, outcome: outcome2 } = parseBeatText(displayText);
    return {
      linkName,
      intent: intent2,
      outcome: outcome2,
      originalOrder: 0
      // Will be set by caller
    };
  }
  const simpleLinkMatch = text.match(/^\[\[([^\]]+)\]\]$/);
  if (simpleLinkMatch) {
    return {
      linkName: simpleLinkMatch[1].trim(),
      intent: "",
      outcome: "",
      originalOrder: 0
    };
  }
  const { intent, outcome } = parseBeatText(text);
  return {
    linkName: null,
    intent,
    outcome,
    originalOrder: 0
  };
}
function parseBeatText(text) {
  const parts = text.split(/\s*->\s*/);
  if (parts.length >= 2) {
    return {
      intent: parts[0].trim(),
      outcome: parts.slice(1).join(" -> ").trim()
      // Join in case there are multiple "->"
    };
  }
  return {
    intent: text.trim(),
    outcome: ""
  };
}
function compareContentBlocks(paragraph, localContentBlock, remoteContentBlock) {
  const paragraphContent = paragraph.content.trim();
  if (!paragraph.linkName) {
    if (remoteContentBlock && remoteContentBlock.content.trim() === paragraphContent) {
      if (localContentBlock && localContentBlock.id === remoteContentBlock.id) {
        return "unchanged";
      }
      return "unchanged";
    }
    return "new";
  }
  if (!localContentBlock) {
    if (remoteContentBlock && remoteContentBlock.content.trim() === paragraphContent) {
      return "remote_modified";
    }
    return "new";
  }
  if (!remoteContentBlock) {
    return "local_modified";
  }
  const localContent = localContentBlock.content.trim();
  const remoteContent = remoteContentBlock.content.trim();
  if (localContent === paragraphContent && remoteContent === paragraphContent) {
    return "unchanged";
  }
  if (paragraphContent !== localContent && paragraphContent !== remoteContent && localContent === remoteContent) {
    return "local_modified";
  }
  if (localContent === paragraphContent && remoteContent !== paragraphContent) {
    return "remote_modified";
  }
  if (paragraphContent !== localContent && paragraphContent !== remoteContent && localContent !== remoteContent) {
    return "conflict";
  }
  if (paragraphContent === remoteContent && localContent !== remoteContent) {
    return "remote_modified";
  }
  return "conflict";
}
function parseSceneBeatList(chapterContent) {
  const items = [];
  const frontmatterMatch = chapterContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = chapterContent.substring(contentStart).trim();
  const listSectionMatch = bodyContent.match(/##\s+Scenes\s+&\s+Beats\s*\n+([\s\S]*?)(?=\n##|$)/);
  if (!listSectionMatch) {
    return { items: [] };
  }
  const listContent = listSectionMatch[1].trim();
  const lines = listContent.split(/\n/);
  let order = 0;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    const itemMatch = trimmedLine.match(/^([+-])\s+(.+)$/);
    if (!itemMatch) {
      continue;
    }
    const hasProse = itemMatch[1] === "+";
    const itemText = itemMatch[2].trim();
    const tabMatch = line.match(/^(\t*)/);
    const indentLevel = tabMatch ? tabMatch[1].length : 0;
    const isBeat = indentLevel > 0;
    const linkMatch = itemText.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
    let linkName = null;
    let displayText;
    if (linkMatch) {
      linkName = linkMatch[1].trim();
      displayText = linkMatch[2].trim();
    } else {
      displayText = itemText;
    }
    items.push({
      type: isBeat ? "beat" : "scene",
      linkName,
      displayText,
      hasProse,
      indentLevel: isBeat ? 1 : 0,
      originalOrder: order++
    });
  }
  return { items };
}
function parseChapterList(storyContent) {
  const items = [];
  const frontmatterMatch = storyContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = storyContent.substring(contentStart).trim();
  const listSectionMatch = bodyContent.match(/##\s+Chapters(?:,\s*Scenes\s*&\s*Beats)?\s*\n+([\s\S]*?)(?=\n##|$)/);
  if (!listSectionMatch) {
    return { items: [] };
  }
  const listContent = listSectionMatch[1].trim();
  const lines = listContent.split(/\n/);
  let order = 0;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    const itemMatch = trimmedLine.match(/^([+-])\s+(.+)$/);
    if (!itemMatch) {
      continue;
    }
    const hasProse = itemMatch[1] === "+";
    const itemText = itemMatch[2].trim();
    const tabMatch = line.match(/^(\t*)/);
    const indentLevel = tabMatch ? tabMatch[1].length : 0;
    let type2;
    if (indentLevel === 0) {
      type2 = "chapter";
    } else if (indentLevel === 1) {
      type2 = "scene";
    } else if (indentLevel === 2) {
      type2 = "beat";
    } else {
      continue;
    }
    const linkMatch = itemText.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
    let linkName = null;
    let displayText;
    if (linkMatch) {
      linkName = linkMatch[1].trim();
      displayText = linkMatch[2].trim();
    } else {
      displayText = itemText;
    }
    items.push({
      type: type2,
      linkName,
      displayText,
      hasProse,
      indentLevel: indentLevel / 2,
      // Normalize to 0, 1, 2
      originalOrder: order++
    });
  }
  return { items };
}
function parseBeatList(sceneContent) {
  const items = [];
  const frontmatterMatch = sceneContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = sceneContent.substring(contentStart).trim();
  const listSectionMatch = bodyContent.match(/##\s+Beats\s*\n+([\s\S]*?)(?=\n##|$)/);
  if (!listSectionMatch) {
    return { items: [] };
  }
  const listContent = listSectionMatch[1].trim();
  const lines = listContent.split(/\n/);
  let order = 0;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    if (trimmedLine.startsWith(">")) {
      continue;
    }
    const itemMatch = trimmedLine.match(/^([+-])\s+(.+)$/);
    if (!itemMatch) {
      continue;
    }
    const hasProse = itemMatch[1] === "+";
    const itemText = itemMatch[2].trim();
    const linkMatch = itemText.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
    let linkName = null;
    let displayText;
    if (linkMatch) {
      linkName = linkMatch[1].trim();
      displayText = linkMatch[2].trim();
    } else {
      displayText = itemText;
    }
    items.push({
      linkName,
      displayText,
      hasProse,
      originalOrder: order++
    });
  }
  return { items };
}
function parseOrphanScenesList(storyContent) {
  const items = [];
  const frontmatterMatch = storyContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = storyContent.substring(contentStart).trim();
  const listSectionMatch = bodyContent.match(/##\s+Orphan\s+Scenes\s*\n+([\s\S]*?)(?=\n##|$)/);
  if (!listSectionMatch) {
    return { items: [] };
  }
  const listContent = listSectionMatch[1].trim();
  const lines = listContent.split(/\n/);
  let order = 0;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    if (trimmedLine.startsWith(">")) {
      continue;
    }
    const itemMatch = trimmedLine.match(/^([+-])\s+(.+)$/);
    if (!itemMatch) {
      continue;
    }
    const hasProse = itemMatch[1] === "+";
    const itemText = itemMatch[2].trim();
    const tabMatch = line.match(/^(\t*)/);
    const indentLevel = tabMatch ? tabMatch[1].length : 0;
    const isBeat = indentLevel > 0;
    const linkMatch = itemText.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
    let linkName = null;
    let displayText;
    if (linkMatch) {
      linkName = linkMatch[1].trim();
      displayText = linkMatch[2].trim();
    } else {
      displayText = itemText;
    }
    items.push({
      type: isBeat ? "beat" : "scene",
      linkName,
      displayText,
      hasProse,
      indentLevel: isBeat ? 1 : 0,
      originalOrder: order++
    });
  }
  return { items };
}
function parseOrphanBeatsList(storyContent) {
  const items = [];
  const frontmatterMatch = storyContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = storyContent.substring(contentStart).trim();
  const listSectionMatch = bodyContent.match(/##\s+Orphan\s+Beats\s*\n+([\s\S]*?)(?=\n##|$)/);
  if (!listSectionMatch) {
    return { items: [] };
  }
  const listContent = listSectionMatch[1].trim();
  const lines = listContent.split(/\n/);
  let order = 0;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    if (trimmedLine.startsWith(">")) {
      continue;
    }
    const itemMatch = trimmedLine.match(/^([+-])\s+(.+)$/);
    if (!itemMatch) {
      continue;
    }
    const hasProse = itemMatch[1] === "+";
    const itemText = itemMatch[2].trim();
    const linkMatch = itemText.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
    let linkName = null;
    let displayText;
    if (linkMatch) {
      linkName = linkMatch[1].trim();
      displayText = linkMatch[2].trim();
    } else {
      displayText = itemText;
    }
    items.push({
      linkName,
      displayText,
      hasProse,
      originalOrder: order++
    });
  }
  return { items };
}
function parseStoryProse(storyContent) {
  const sections = [];
  const frontmatterMatch = storyContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = storyContent.substring(contentStart).trim();
  const storyHeaderMatch = bodyContent.match(/^(#\s+Story:\s*.+)$/m);
  const chapterHeaderMatch = bodyContent.match(/^(##\s+Chapter\s*\d*:\s*.+)$/m);
  let proseStartIndex = -1;
  if (storyHeaderMatch) {
    proseStartIndex = bodyContent.indexOf(storyHeaderMatch[0]);
  } else if (chapterHeaderMatch) {
    proseStartIndex = bodyContent.indexOf(chapterHeaderMatch[0]);
  }
  if (proseStartIndex === -1) {
    return { sections: [] };
  }
  const proseContent = bodyContent.substring(proseStartIndex);
  const lines = proseContent.split(/\n/);
  let order = 0;
  let currentChapter = null;
  let currentScene = null;
  let currentBeat = null;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    if (trimmedLine.startsWith(">")) {
      continue;
    }
    const storyMatch = trimmedLine.match(/^#\s+Story:\s*(.+)$/i);
    if (storyMatch) {
      continue;
    }
    const chapterMatch = trimmedLine.match(/^##\s+Chapter\s*\d*:\s*(.+)$/i);
    if (chapterMatch) {
      const chapterText = chapterMatch[1].trim();
      const linkMatch = chapterText.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
      if (linkMatch) {
        currentChapter = {
          linkName: linkMatch[1].trim(),
          title: linkMatch[2].trim()
        };
      } else {
        currentChapter = {
          linkName: null,
          title: chapterText
        };
      }
      currentScene = null;
      currentBeat = null;
      continue;
    }
    const sceneMatch = trimmedLine.match(/^###\s+Scene:\s*(.+)$/i);
    if (sceneMatch) {
      const sceneText = sceneMatch[1].trim();
      currentScene = parseSceneHeaderText(sceneText);
      currentScene.originalOrder = order++;
      sections.push({
        type: "scene",
        scene: currentScene,
        originalOrder: currentScene.originalOrder
      });
      currentBeat = null;
      continue;
    }
    const beatMatch = trimmedLine.match(/^####\s+Beat:\s*(.+)$/i);
    if (beatMatch) {
      const beatText = beatMatch[1].trim();
      currentBeat = parseBeatHeaderText(beatText);
      currentBeat.originalOrder = order++;
      sections.push({
        type: "beat",
        beat: currentBeat,
        originalOrder: currentBeat.originalOrder
      });
      continue;
    }
    if (trimmedLine.startsWith("#")) {
      continue;
    }
    if (trimmedLine.match(/^[+-]\s+/)) {
      continue;
    }
    const proseMatch = trimmedLine.match(/^\s*\[\[([^\|]+)\|([^\]]+)\]\]\s*$/);
    if (proseMatch) {
      const linkName = proseMatch[1].trim();
      const content = proseMatch[2].trim();
      const paragraph = {
        content,
        linkName,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
      continue;
    }
    if (trimmedLine.length > 0) {
      const paragraph = {
        content: trimmedLine,
        linkName: null,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
    }
  }
  return { sections };
}
function parseSceneHeaderText(text) {
  const linkMatch = text.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
  if (linkMatch) {
    const linkName = linkMatch[1].trim();
    const displayText = linkMatch[2].trim();
    const parts2 = displayText.split(/\s*-\s*/);
    return {
      linkName,
      goal: parts2[0].trim(),
      timeRef: parts2.length > 1 ? parts2.slice(1).join(" - ").trim() : "",
      originalOrder: 0
    };
  }
  const simpleLinkMatch = text.match(/^\[\[([^\]]+)\]\]$/);
  if (simpleLinkMatch) {
    return {
      linkName: simpleLinkMatch[1].trim(),
      goal: "",
      timeRef: "",
      originalOrder: 0
    };
  }
  const parts = text.split(/\s*-\s*/);
  return {
    linkName: null,
    goal: parts[0].trim(),
    timeRef: parts.length > 1 ? parts.slice(1).join(" - ").trim() : "",
    originalOrder: 0
  };
}
function parseBeatHeaderText(text) {
  const linkMatch = text.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
  if (linkMatch) {
    const linkName = linkMatch[1].trim();
    const displayText = linkMatch[2].trim();
    const parts2 = displayText.split(/\s*->\s*/);
    return {
      linkName,
      intent: parts2[0].trim(),
      outcome: parts2.length > 1 ? parts2.slice(1).join(" -> ").trim() : "",
      originalOrder: 0
    };
  }
  const simpleLinkMatch = text.match(/^\[\[([^\]]+)\]\]$/);
  if (simpleLinkMatch) {
    return {
      linkName: simpleLinkMatch[1].trim(),
      intent: "",
      outcome: "",
      originalOrder: 0
    };
  }
  const parts = text.split(/\s*->\s*/);
  return {
    linkName: null,
    intent: parts[0].trim(),
    outcome: parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "",
    originalOrder: 0
  };
}
function parseSceneProse(sceneContent) {
  const sections = [];
  const frontmatterMatch = sceneContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = sceneContent.substring(contentStart).trim();
  const sceneHeaderMatch = bodyContent.match(/^(###\s+Scene:\s*.+)$/m);
  const beatHeaderMatch = bodyContent.match(/^(#{3,4}\s+Beat:\s*.+)$/m);
  let proseStartIndex = -1;
  if (sceneHeaderMatch) {
    proseStartIndex = bodyContent.indexOf(sceneHeaderMatch[0]);
  } else if (beatHeaderMatch) {
    proseStartIndex = bodyContent.indexOf(beatHeaderMatch[0]);
  } else {
    const beatsListEnd = bodyContent.match(/##\s+Beats\s*\n+[\s\S]*?(?=\n###|\n####|\n[^#\-\+>\s]|$)/);
    if (beatsListEnd) {
      proseStartIndex = bodyContent.indexOf(beatsListEnd[0]) + beatsListEnd[0].length;
    } else {
      const firstNonListContent = bodyContent.match(/(?:^|\n)([^#\-\+>\s\n].+)/);
      if (firstNonListContent) {
        proseStartIndex = bodyContent.indexOf(firstNonListContent[1]);
      }
    }
  }
  if (proseStartIndex === -1) {
    return { sections: [] };
  }
  const proseContent = bodyContent.substring(proseStartIndex);
  const lines = proseContent.split(/\n/);
  let order = 0;
  let currentBeat = null;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    if (trimmedLine.startsWith(">")) {
      continue;
    }
    const sceneMatch = trimmedLine.match(/^###\s+Scene:\s*(.+)$/i);
    if (sceneMatch) {
      const sceneText = sceneMatch[1].trim();
      const parsedScene = parseSceneHeaderText(sceneText);
      parsedScene.originalOrder = order++;
      sections.push({
        type: "scene",
        scene: parsedScene,
        originalOrder: parsedScene.originalOrder
      });
      currentBeat = null;
      continue;
    }
    const beatMatch = trimmedLine.match(/^#{3,4}\s+Beat:\s*(.+)$/i);
    if (beatMatch) {
      const beatText = beatMatch[1].trim();
      currentBeat = parseBeatHeaderText(beatText);
      currentBeat.originalOrder = order++;
      sections.push({
        type: "beat",
        beat: currentBeat,
        originalOrder: currentBeat.originalOrder
      });
      continue;
    }
    if (trimmedLine.startsWith("#")) {
      continue;
    }
    if (trimmedLine.match(/^[+-]\s+/)) {
      continue;
    }
    const proseMatch = trimmedLine.match(/^\s*\[\[([^\|]+)\|([^\]]+)\]\]\s*$/);
    if (proseMatch) {
      const linkName = proseMatch[1].trim();
      const content = proseMatch[2].trim();
      const paragraph = {
        content,
        linkName,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
      continue;
    }
    if (trimmedLine.length > 0) {
      const paragraph = {
        content: trimmedLine,
        linkName: null,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
    }
  }
  return { sections };
}
function parseBeatProse(beatContent) {
  const sections = [];
  const frontmatterMatch = beatContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = beatContent.substring(contentStart).trim();
  const beatHeaderMatch = bodyContent.match(/^(##\s+Beat:\s*.+)$/m);
  let proseStartIndex = -1;
  if (beatHeaderMatch) {
    proseStartIndex = bodyContent.indexOf(beatHeaderMatch[0]);
  }
  if (proseStartIndex === -1) {
    return { sections: [] };
  }
  const proseContent = bodyContent.substring(proseStartIndex);
  const lines = proseContent.split(/\n/);
  let order = 0;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    if (trimmedLine.startsWith(">")) {
      continue;
    }
    const beatMatch = trimmedLine.match(/^##\s+Beat:\s*(.+)$/i);
    if (beatMatch) {
      continue;
    }
    if (trimmedLine.startsWith("#")) {
      continue;
    }
    if (trimmedLine.match(/^[+-]\s+/)) {
      continue;
    }
    const proseMatch = trimmedLine.match(/^\s*\[\[([^\|]+)\|([^\]]+)\]\]\s*$/);
    if (proseMatch) {
      const linkName = proseMatch[1].trim();
      const content = proseMatch[2].trim();
      const paragraph = {
        content,
        linkName,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
      continue;
    }
    if (trimmedLine.length > 0) {
      const paragraph = {
        content: trimmedLine,
        linkName: null,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
    }
  }
  return { sections };
}

// src/views/modals/ConflictModal.ts
var import_obsidian8 = require("obsidian");
var ConflictModal = class extends import_obsidian8.Modal {
  constructor(app, localContentBlock, remoteContentBlock, onResolve) {
    super(app);
    this.resolution = null;
    this.localContentBlock = localContentBlock;
    this.remoteContentBlock = remoteContentBlock;
    this.onResolve = onResolve;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", {
      text: "Content Block Conflict"
    });
    contentEl.createEl("p", {
      text: "This content block has been modified both locally and remotely. Choose how to resolve the conflict:"
    });
    const diffContainer = contentEl.createDiv("conflict-diff-container");
    const localDiv = diffContainer.createDiv("conflict-local");
    localDiv.createEl("h3", { text: "Local Version" });
    const localContent = localDiv.createEl("pre", {
      text: this.localContentBlock.content,
      cls: "conflict-content"
    });
    localContent.style.whiteSpace = "pre-wrap";
    localContent.style.maxHeight = "200px";
    localContent.style.overflow = "auto";
    localContent.style.border = "1px solid var(--background-modifier-border)";
    localContent.style.padding = "10px";
    localContent.style.borderRadius = "4px";
    const remoteDiv = diffContainer.createDiv("conflict-remote");
    remoteDiv.createEl("h3", { text: "Remote Version" });
    const remoteContent = remoteDiv.createEl("pre", {
      text: this.remoteContentBlock.content,
      cls: "conflict-content"
    });
    remoteContent.style.whiteSpace = "pre-wrap";
    remoteContent.style.maxHeight = "200px";
    remoteContent.style.overflow = "auto";
    remoteContent.style.border = "1px solid var(--background-modifier-border)";
    remoteContent.style.padding = "10px";
    remoteContent.style.borderRadius = "4px";
    const manualDiv = contentEl.createDiv("conflict-manual");
    manualDiv.createEl("h3", { text: "Manual Merge (Optional)" });
    const manualTextarea = manualDiv.createEl("textarea", {
      text: this.localContentBlock.content,
      cls: "conflict-manual-input"
    });
    manualTextarea.style.width = "100%";
    manualTextarea.style.minHeight = "150px";
    manualTextarea.style.padding = "10px";
    manualTextarea.style.border = "1px solid var(--background-modifier-border)";
    manualTextarea.style.borderRadius = "4px";
    manualTextarea.style.fontFamily = "var(--font-monospace)";
    const buttonContainer = contentEl.createDiv("conflict-buttons");
    buttonContainer.style.marginTop = "20px";
    buttonContainer.style.display = "flex";
    buttonContainer.style.gap = "10px";
    const useLocalBtn = buttonContainer.createEl("button", {
      text: "Use Local",
      cls: "mod-cta"
    });
    useLocalBtn.onclick = async () => {
      this.resolution = { resolution: "local" };
      await this.onResolve(this.resolution);
      this.close();
    };
    const useRemoteBtn = buttonContainer.createEl("button", {
      text: "Use Remote"
    });
    useRemoteBtn.onclick = async () => {
      this.resolution = { resolution: "remote" };
      await this.onResolve(this.resolution);
      this.close();
    };
    const useManualBtn = buttonContainer.createEl("button", {
      text: "Use Manual Merge",
      cls: "mod-primary"
    });
    useManualBtn.onclick = async () => {
      this.resolution = {
        resolution: "manual",
        mergedContent: manualTextarea.value
      };
      await this.onResolve(this.resolution);
      this.close();
    };
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/sync/syncService.ts
var SyncService = class {
  constructor(apiClient, fileManager, settings, app) {
    this.apiClient = apiClient;
    this.fileManager = fileManager;
    this.settings = settings;
    this.app = app;
    if (this.settings.autoSyncOnApiUpdates) {
      this.unsubscribeFromNotifier = apiUpdateNotifier.subscribe(async (payload) => {
        try {
          await this.applyEntityData(payload);
        } catch (err) {
          console.error("Failed to auto-sync entity data", err);
        }
      });
    }
  }
  dispose() {
    if (this.unsubscribeFromNotifier) {
      this.unsubscribeFromNotifier();
      this.unsubscribeFromNotifier = void 0;
    }
  }
  // Pull story from service to Obsidian (Service  Obsidian)
  async pullStory(storyId, target) {
    try {
      if (target) {
        await this.pullSingleEntity(storyId, target);
        return;
      }
      const storyData = await this.apiClient.getStoryWithHierarchy(storyId);
      const folderPath = this.fileManager.getStoryFolderPath(
        storyData.story.title
      );
      const existingMetadata = await this.fileManager.readStoryMetadata(folderPath).catch(() => null);
      const allScenes = await this.apiClient.getScenesByStory(storyId);
      const orphanScenes = [];
      for (const scene of allScenes) {
        if (!scene.chapter_id) {
          const beats = await this.apiClient.getBeats(scene.id);
          orphanScenes.push({ scene, beats });
        }
      }
      orphanScenes.sort((a, b) => a.scene.order_num - b.scene.order_num);
      const allBeats = await this.apiClient.getBeatsByStory(storyId);
      const orphanBeats = [];
      const sceneIdSet = new Set(allScenes.map((s) => s.id));
      for (const beat of allBeats) {
        if (!beat.scene_id || !sceneIdSet.has(beat.scene_id)) {
          orphanBeats.push(beat);
        }
      }
      orphanBeats.sort((a, b) => a.order_num - b.order_num);
      const chapterContentData = /* @__PURE__ */ new Map();
      for (const chapterWithContent of storyData.chapters) {
        const contentBlocks = await this.apiClient.getContentBlocks(chapterWithContent.chapter.id);
        const contentBlockRefs = [];
        for (const contentBlock of contentBlocks) {
          const refs = await this.apiClient.getContentAnchors(contentBlock.id);
          contentBlockRefs.push(...refs);
        }
        chapterContentData.set(chapterWithContent.chapter.id, { contentBlocks, contentBlockRefs });
      }
      await this.fileManager.writeStoryMetadata(
        storyData.story,
        folderPath,
        storyData.chapters,
        orphanScenes,
        orphanBeats,
        chapterContentData
      );
      const contentsFolderPath = `${folderPath}/03-contents`;
      await this.fileManager.ensureFolderExists(contentsFolderPath);
      for (const typeFolder of ["00-texts", "01-images", "02-videos", "03-audios", "04-embeds", "05-links"]) {
        await this.fileManager.ensureFolderExists(`${contentsFolderPath}/${typeFolder}`);
      }
      const chaptersFolderPath = `${folderPath}/00-chapters`;
      await this.fileManager.ensureFolderExists(chaptersFolderPath);
      for (const chapterWithContent of storyData.chapters) {
        const contentData = chapterContentData.get(chapterWithContent.chapter.id);
        const contentBlocks = (contentData == null ? void 0 : contentData.contentBlocks) || [];
        const contentBlockRefs = (contentData == null ? void 0 : contentData.contentBlockRefs) || [];
        for (const contentBlock of contentBlocks) {
          const contentBlockFileName = this.fileManager.generateContentBlockFileName(contentBlock);
          const typeFolderPath = this.fileManager.getContentBlockFolderPath(folderPath, contentBlock.type || "text");
          await this.fileManager.ensureFolderExists(typeFolderPath);
          const contentBlockFilePath = `${typeFolderPath}/${contentBlockFileName}`;
          await this.fileManager.writeContentBlockFile(
            contentBlock,
            contentBlockFilePath,
            storyData.story.title
          );
        }
        const chapterFileName = `Chapter-${chapterWithContent.chapter.number}.md`;
        const chapterFilePath = `${chaptersFolderPath}/${chapterFileName}`;
        await this.fileManager.writeChapterFile(
          chapterWithContent,
          chapterFilePath,
          storyData.story.title,
          contentBlocks,
          contentBlockRefs,
          orphanScenes
          // Include orphan scenes for easy association
        );
        const scenesFolderPath2 = `${folderPath}/01-scenes`;
        await this.fileManager.ensureFolderExists(scenesFolderPath2);
        for (const { scene, beats } of chapterWithContent.scenes) {
          const sceneContentBlocks = await this.apiClient.getContentBlocksByScene(scene.id);
          const sceneFileName = this.fileManager.generateSceneFileName(scene);
          const sceneFilePath = `${scenesFolderPath2}/${sceneFileName}`;
          await this.fileManager.writeSceneFile(
            { scene, beats },
            sceneFilePath,
            storyData.story.title,
            sceneContentBlocks,
            orphanBeats
            // Include orphan beats for easy association
          );
          const beatsFolderPath2 = `${folderPath}/02-beats`;
          await this.fileManager.ensureFolderExists(beatsFolderPath2);
          for (const beat of beats) {
            const beatContentBlocks = await this.apiClient.getContentBlocksByBeat(beat.id);
            const beatFileName = this.fileManager.generateBeatFileName(beat);
            const beatFilePath = `${beatsFolderPath2}/${beatFileName}`;
            await this.fileManager.writeBeatFile(beat, beatFilePath, storyData.story.title, beatContentBlocks);
          }
        }
      }
      const scenesFolderPath = `${folderPath}/01-scenes`;
      await this.fileManager.ensureFolderExists(scenesFolderPath);
      for (const { scene, beats } of orphanScenes) {
        const sceneContentBlocks = await this.apiClient.getContentBlocksByScene(scene.id);
        const sceneFileName = this.fileManager.generateSceneFileName(scene);
        const sceneFilePath = `${scenesFolderPath}/${sceneFileName}`;
        await this.fileManager.writeSceneFile(
          { scene, beats },
          sceneFilePath,
          storyData.story.title,
          sceneContentBlocks,
          orphanBeats
          // Include orphan beats for easy association
        );
        const beatsFolderPath2 = `${folderPath}/02-beats`;
        await this.fileManager.ensureFolderExists(beatsFolderPath2);
        for (const beat of beats) {
          const beatContentBlocks = await this.apiClient.getContentBlocksByBeat(beat.id);
          const beatFileName = this.fileManager.generateBeatFileName(beat);
          const beatFilePath = `${beatsFolderPath2}/${beatFileName}`;
          await this.fileManager.writeBeatFile(beat, beatFilePath, storyData.story.title, beatContentBlocks);
        }
      }
      const beatsFolderPath = `${folderPath}/02-beats`;
      await this.fileManager.ensureFolderExists(beatsFolderPath);
      for (const beat of orphanBeats) {
        const beatContentBlocks = await this.apiClient.getContentBlocksByBeat(beat.id);
        const beatFileName = this.fileManager.generateBeatFileName(beat);
        const beatFilePath = `${beatsFolderPath}/${beatFileName}`;
        await this.fileManager.writeBeatFile(beat, beatFilePath, storyData.story.title, beatContentBlocks);
      }
      if (existingMetadata && existingMetadata.frontmatter.version !== void 0 && existingMetadata.frontmatter.version !== storyData.story.version_number) {
        await this.fileManager.createVersionSnapshot(
          folderPath,
          existingMetadata.frontmatter.version
        );
      }
      await this.syncVersionHistory(storyData.story.root_story_id, folderPath);
      new import_obsidian9.Notice(`Story "${storyData.story.title}" synced successfully`);
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to sync story";
      new import_obsidian9.Notice(`Error syncing story: ${errorMessage}`, 5e3);
      throw err;
    }
  }
  // Sync all previous versions of a story
  async syncVersionHistory(rootStoryId, storyFolderPath) {
    try {
      const allStories = await this.apiClient.listStories();
      const versions = allStories.filter((s) => s.root_story_id === rootStoryId);
      versions.sort((a, b) => a.version_number - b.version_number);
      const versionsPath = `${storyFolderPath}/versions`;
      await this.fileManager.ensureFolderExists(versionsPath);
      for (const versionStory of versions) {
        const currentVersion = versions[versions.length - 1].version_number;
        if (versionStory.version_number === currentVersion) {
          continue;
        }
        const versionFolderPath = `${versionsPath}/v${versionStory.version_number}`;
        const existingVersionFolder = this.fileManager.getVault().getAbstractFileByPath(
          versionFolderPath
        );
        if (existingVersionFolder) {
          console.log(`Version v${versionStory.version_number} already exists, skipping`);
          continue;
        }
        const versionData = await this.apiClient.getStoryWithHierarchy(
          versionStory.id
        );
        await this.fileManager.ensureFolderExists(versionFolderPath);
        await this.fileManager.writeStoryMetadata(
          versionData.story,
          versionFolderPath
        );
        const versionContentsFolderPath = `${versionFolderPath}/03-contents`;
        await this.fileManager.ensureFolderExists(versionContentsFolderPath);
        for (const typeFolder of ["00-texts", "01-images", "02-videos", "03-audios", "04-embeds", "05-links"]) {
          await this.fileManager.ensureFolderExists(`${versionContentsFolderPath}/${typeFolder}`);
        }
        const versionChaptersPath = `${versionFolderPath}/00-chapters`;
        await this.fileManager.ensureFolderExists(versionChaptersPath);
        for (const chapterWithContent of versionData.chapters) {
          const contentBlocks = await this.apiClient.getContentBlocks(chapterWithContent.chapter.id);
          const contentBlockRefs = [];
          for (const contentBlock of contentBlocks) {
            const refs = await this.apiClient.getContentAnchors(contentBlock.id);
            contentBlockRefs.push(...refs);
          }
          for (const contentBlock of contentBlocks) {
            const contentBlockFileName = this.fileManager.generateContentBlockFileName(contentBlock);
            const typeFolderPath = this.fileManager.getContentBlockFolderPath(versionFolderPath, contentBlock.type || "text");
            await this.fileManager.ensureFolderExists(typeFolderPath);
            const contentBlockFilePath = `${typeFolderPath}/${contentBlockFileName}`;
            await this.fileManager.writeContentBlockFile(
              contentBlock,
              contentBlockFilePath,
              versionData.story.title
            );
          }
          const chapterFileName = `Chapter-${chapterWithContent.chapter.number}.md`;
          const chapterFilePath = `${versionChaptersPath}/${chapterFileName}`;
          await this.fileManager.writeChapterFile(
            chapterWithContent,
            chapterFilePath,
            versionData.story.title,
            contentBlocks,
            contentBlockRefs
          );
          const versionScenesPath = `${versionFolderPath}/01-scenes`;
          await this.fileManager.ensureFolderExists(versionScenesPath);
          for (const { scene, beats } of chapterWithContent.scenes) {
            const sceneContentBlocks = await this.apiClient.getContentBlocksByScene(scene.id);
            const sceneFileName = this.fileManager.generateSceneFileName(scene);
            const sceneFilePath = `${versionScenesPath}/${sceneFileName}`;
            await this.fileManager.writeSceneFile(
              { scene, beats },
              sceneFilePath,
              versionData.story.title,
              sceneContentBlocks
            );
            const versionBeatsPath = `${versionFolderPath}/02-beats`;
            await this.fileManager.ensureFolderExists(versionBeatsPath);
            for (const beat of beats) {
              const beatContentBlocks = await this.apiClient.getContentBlocksByBeat(beat.id);
              const beatFileName = this.fileManager.generateBeatFileName(beat);
              const beatFilePath = `${versionBeatsPath}/${beatFileName}`;
              await this.fileManager.writeBeatFile(beat, beatFilePath, versionData.story.title, beatContentBlocks);
            }
          }
        }
        console.log(`Synced version v${versionStory.version_number}`);
      }
    } catch (err) {
      console.error("Error syncing version history:", err);
    }
  }
  // Pull all stories
  async pullAllStories() {
    if (this.settings.mode === "remote" && !this.settings.tenantId) {
      throw new Error("Tenant ID is required");
    }
    try {
      await this.apiClient.getWorlds();
    } catch (err) {
      console.error("Failed to load worlds:", err);
    }
    const stories = await this.apiClient.listStories();
    for (const story of stories) {
      try {
        await this.pullStory(story.id);
      } catch (err) {
        console.error(`Failed to sync story ${story.id}:`, err);
      }
    }
    new import_obsidian9.Notice(`Synced ${stories.length} stories`);
  }
  // Apply entity data received from API without fetching
  async applyEntityData(payload) {
    switch (payload.type) {
      case "chapter": {
        await this.writeChapterBundle({
          story: payload.story,
          chapter: payload.chapter,
          scenes: payload.scenes,
          contentBlocks: payload.contentBlocks,
          contentBlockRefs: payload.contentBlockRefs
        });
        new import_obsidian9.Notice(`Chapter "${payload.chapter.title}" synced successfully`);
        break;
      }
      case "scene": {
        const beatContentBlockMap = /* @__PURE__ */ new Map();
        if (payload.beatContentBlocks) {
          for (const [beatId, blocks] of Object.entries(payload.beatContentBlocks)) {
            beatContentBlockMap.set(beatId, blocks);
          }
        }
        const folderPath = this.fileManager.getStoryFolderPath(payload.story.title);
        await this.ensureStoryFolders(folderPath);
        await this.writeSceneBundle({
          storyTitle: payload.story.title,
          folderPath,
          scene: payload.scene,
          beats: payload.beats,
          sceneContentBlocks: payload.sceneContentBlocks,
          beatContentBlockMap,
          skipRemoteContentFetch: true
        });
        if (payload.sceneContentBlocks) {
          for (const contentBlock of payload.sceneContentBlocks) {
            await this.writeContentBlockToFolder(folderPath, payload.story.title, contentBlock);
          }
        }
        for (const blocks of beatContentBlockMap.values()) {
          for (const contentBlock of blocks) {
            await this.writeContentBlockToFolder(folderPath, payload.story.title, contentBlock);
          }
        }
        new import_obsidian9.Notice(`Scene "${payload.scene.goal}" synced successfully`);
        break;
      }
      case "content": {
        const folderPath = this.fileManager.getStoryFolderPath(payload.story.title);
        await this.ensureContentFolders(folderPath);
        await this.writeContentBlockToFolder(
          folderPath,
          payload.story.title,
          payload.contentBlock
        );
        new import_obsidian9.Notice("Content block synced successfully");
        break;
      }
    }
  }
  // Push story from Obsidian to service (Obsidian  Service)
  async pushStory(folderPath, target) {
    try {
      const { frontmatter: storyFrontmatter } = await this.fileManager.readStoryMetadata(folderPath);
      if (!storyFrontmatter.id) {
        throw new Error("Story metadata missing ID");
      }
      const storyId = storyFrontmatter.id;
      if (target) {
        await this.pushSingleEntity(folderPath, target, storyId, storyFrontmatter.title);
        return;
      }
      const storyFilePath = `${folderPath}/story.md`;
      const storyFile = this.fileManager.getVault().getAbstractFileByPath(storyFilePath);
      if (storyFile instanceof import_obsidian9.TFile) {
        const storyContent = await this.fileManager.getVault().read(storyFile);
        const chapterList = parseChapterList(storyContent);
        if (chapterList.items.length > 0) {
          await this.processChapterList(chapterList, storyId);
        }
        const orphanScenesList = parseOrphanScenesList(storyContent);
        if (orphanScenesList.items.length > 0) {
          await this.processOrphanScenesList(orphanScenesList, storyId);
        }
        const orphanBeatsList = parseOrphanBeatsList(storyContent);
        if (orphanBeatsList.items.length > 0) {
          await this.processOrphanBeatsList(orphanBeatsList, storyId);
        }
        const storyProse = parseStoryProse(storyContent);
        if (storyProse.sections.length > 0) {
          await this.pushStoryContentBlocks(storyFilePath, folderPath, storyId);
        }
      }
      await this.apiClient.updateStory(
        storyId,
        storyFrontmatter.title,
        storyFrontmatter.status
      );
      const chapterFiles = await this.fileManager.listChapterFiles(folderPath);
      for (const chapterFilePath of chapterFiles) {
        console.log(`Would update chapter: ${chapterFilePath}`);
      }
      for (const chapterFilePath of chapterFiles) {
        await this.pushChapterContentBlocks(chapterFilePath, folderPath);
      }
      const sceneFiles = await this.fileManager.listStorySceneFiles(folderPath);
      for (const sceneFilePath of sceneFiles) {
        await this.pushSceneBeats(sceneFilePath, storyId);
        await this.pushSceneContentBlocks(sceneFilePath, folderPath);
      }
      const beatFiles = await this.fileManager.listStoryBeatFiles(folderPath);
      for (const beatFilePath of beatFiles) {
        await this.pushBeatContentBlocks(beatFilePath, folderPath);
      }
      new import_obsidian9.Notice(`Story "${storyFrontmatter.title}" pushed successfully`);
      try {
        new import_obsidian9.Notice(`Syncing story "${storyFrontmatter.title}" from service...`);
        await this.pullStory(storyId);
        new import_obsidian9.Notice(`Story "${storyFrontmatter.title}" synced successfully`);
      } catch (pullErr) {
        const pullErrorMessage = pullErr instanceof Error ? pullErr.message : "Failed to sync story after push";
        new import_obsidian9.Notice(`Warning: ${pullErrorMessage}`, 5e3);
      }
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to push story";
      new import_obsidian9.Notice(`Error pushing story: ${errorMessage}`, 5e3);
      throw err;
    }
  }
  // Push prose blocks from a chapter file (hierarchical structure)
  async pushChapterContentBlocks(chapterFilePath, storyFolderPath) {
    const file = this.fileManager.getVault().getAbstractFileByPath(chapterFilePath);
    if (!(file instanceof import_obsidian9.TFile)) {
      throw new Error(`Chapter file not found: ${chapterFilePath}`);
    }
    const chapterContent = await this.fileManager.getVault().read(file);
    const frontmatter = this.fileManager.parseFrontmatter(chapterContent);
    if (!frontmatter.id || !frontmatter.story_id) {
      throw new Error("Chapter metadata missing ID or story_id");
    }
    const chapterId = frontmatter.id;
    const storyId = frontmatter.story_id;
    const contentsFolderPath = `${storyFolderPath}/03-contents`;
    const sceneBeatList = parseSceneBeatList(chapterContent);
    await this.processSceneBeatList(sceneBeatList, chapterId, storyId);
    const remoteContentBlocks = await this.apiClient.getContentBlocks(chapterId);
    const remoteContentBlocksMap = /* @__PURE__ */ new Map();
    for (const pb of remoteContentBlocks) {
      remoteContentBlocksMap.set(pb.id, pb);
    }
    const existingScenes = await this.apiClient.getScenes(chapterId);
    const sceneMap = /* @__PURE__ */ new Map();
    const sceneIdMap = /* @__PURE__ */ new Map();
    for (const scene of existingScenes) {
      const fileName = this.fileManager.generateSceneFileName(scene);
      const linkName = fileName.replace(/\.md$/, "");
      sceneMap.set(linkName, scene);
      sceneIdMap.set(scene.id, scene);
    }
    const beatMap = /* @__PURE__ */ new Map();
    const beatIdMap = /* @__PURE__ */ new Map();
    for (const scene of existingScenes) {
      const beats = await this.apiClient.getBeats(scene.id);
      for (const beat of beats) {
        const fileName = this.fileManager.generateBeatFileName(beat);
        const linkName = fileName.replace(/\.md$/, "");
        beatMap.set(linkName, beat);
        beatIdMap.set(beat.id, beat);
      }
    }
    const hierarchical = parseHierarchicalProse(chapterContent);
    const updatedSections = [];
    let currentScene = null;
    let currentBeat = null;
    let proseOrderNum = 1;
    let sceneOrderNum = existingScenes.length > 0 ? Math.max(...existingScenes.map((s) => s.order_num)) + 1 : 1;
    for (const section of hierarchical.sections) {
      if (section.type === "scene" && section.scene) {
        const { scene: parsedScene } = section;
        if (parsedScene.linkName) {
          currentScene = sceneMap.get(parsedScene.linkName) || null;
          if (!currentScene) {
            currentScene = sceneIdMap.get(parsedScene.linkName) || null;
          }
          if (currentScene) {
            if (parsedScene.goal !== currentScene.goal || parsedScene.timeRef !== currentScene.time_ref) {
              currentScene = await this.apiClient.updateScene(currentScene.id, {
                goal: parsedScene.goal,
                time_ref: parsedScene.timeRef
              });
            }
          }
        } else {
          currentScene = await this.apiClient.createScene({
            story_id: storyId,
            chapter_id: chapterId,
            order_num: sceneOrderNum++,
            goal: parsedScene.goal,
            time_ref: parsedScene.timeRef
          });
          const sceneFileName = this.fileManager.generateSceneFileName(currentScene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          sceneMap.set(sceneLinkName, currentScene);
          sceneIdMap.set(currentScene.id, currentScene);
        }
        if (currentScene) {
          const sceneFileName = this.fileManager.generateSceneFileName(currentScene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          const sceneDisplayText = currentScene.time_ref ? `${currentScene.goal} - ${currentScene.time_ref}` : currentScene.goal;
          updatedSections.push(`## Scene: [[${sceneLinkName}|${sceneDisplayText}]]`);
        }
        currentBeat = null;
      } else if (section.type === "beat" && section.beat) {
        const { beat: parsedBeat } = section;
        if (!currentScene) {
          throw new Error("Beat found without a parent scene");
        }
        if (parsedBeat.linkName) {
          currentBeat = beatMap.get(parsedBeat.linkName) || null;
          if (!currentBeat) {
            currentBeat = beatIdMap.get(parsedBeat.linkName) || null;
          }
          if (currentBeat) {
            if (parsedBeat.intent !== currentBeat.intent || parsedBeat.outcome !== currentBeat.outcome) {
              currentBeat = await this.apiClient.updateBeat(currentBeat.id, {
                intent: parsedBeat.intent,
                outcome: parsedBeat.outcome
              });
            }
          }
        } else {
          const existingBeats = await this.apiClient.getBeats(currentScene.id);
          const beatOrderNum = existingBeats.length > 0 ? Math.max(...existingBeats.map((b) => b.order_num)) + 1 : 1;
          currentBeat = await this.apiClient.createBeat({
            scene_id: currentScene.id,
            order_num: beatOrderNum,
            type: "setup",
            // Default type
            intent: parsedBeat.intent,
            outcome: parsedBeat.outcome
          });
          const beatFileName = this.fileManager.generateBeatFileName(currentBeat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          beatMap.set(beatLinkName, currentBeat);
          beatIdMap.set(currentBeat.id, currentBeat);
        }
        if (currentBeat) {
          const beatFileName = this.fileManager.generateBeatFileName(currentBeat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          const beatDisplayText = currentBeat.outcome ? `${currentBeat.intent} -> ${currentBeat.outcome}` : currentBeat.intent;
          updatedSections.push(`### Beat: [[${beatLinkName}|${beatDisplayText}]]`);
        }
      } else if (section.type === "prose" && section.prose) {
        const { prose: paragraph } = section;
        let localContentBlock = null;
        let remoteContentBlock = null;
        if (paragraph.linkName) {
          const contentBlockFilePath = await this.findContentBlockFileByLinkName(contentsFolderPath, paragraph.linkName);
          if (contentBlockFilePath) {
            localContentBlock = await this.fileManager.readContentBlockFromFile(contentBlockFilePath);
          }
          if (!localContentBlock) {
            localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          }
          if (localContentBlock) {
            remoteContentBlock = remoteContentBlocksMap.get(localContentBlock.id) || null;
          } else {
            const normalizedContent = paragraph.content.trim();
            for (const [id2, remotePB] of remoteContentBlocksMap.entries()) {
              if (remotePB.content.trim() === normalizedContent) {
                remoteContentBlock = remotePB;
                break;
              }
            }
          }
        } else {
          localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          const normalizedContent = paragraph.content.trim();
          for (const [id2, remotePB] of remoteContentBlocksMap.entries()) {
            if (remotePB.content.trim() === normalizedContent) {
              remoteContentBlock = remotePB;
              if (!localContentBlock) {
                localContentBlock = await this.findContentBlockById(contentsFolderPath, remotePB.id);
              }
              break;
            }
          }
        }
        const status = compareContentBlocks(paragraph, localContentBlock, remoteContentBlock);
        let finalContentBlock;
        switch (status) {
          case "new": {
            finalContentBlock = await this.apiClient.createContentBlock(chapterId, {
              order_num: proseOrderNum++,
              kind: "final",
              content: paragraph.content
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            if (currentScene) {
              await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", currentScene.id);
            }
            if (currentBeat) {
              await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
            }
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            break;
          }
          case "unchanged": {
            if (!localContentBlock && remoteContentBlock) {
              finalContentBlock = remoteContentBlock;
              const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
              await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            } else if (localContentBlock) {
              if (localContentBlock.order_num !== proseOrderNum) {
                finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
                  order_num: proseOrderNum++
                });
                const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
                await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
              } else {
                finalContentBlock = localContentBlock;
                proseOrderNum++;
              }
            } else {
              finalContentBlock = remoteContentBlock;
              proseOrderNum++;
            }
            if (finalContentBlock) {
              const existingRefs = await this.apiClient.getContentAnchors(finalContentBlock.id);
              const hasSceneRef = existingRefs.some((r) => r.entity_type === "scene" && r.entity_id === (currentScene == null ? void 0 : currentScene.id));
              const hasBeatRef = existingRefs.some((r) => r.entity_type === "beat" && r.entity_id === (currentBeat == null ? void 0 : currentBeat.id));
              if (currentScene && !hasSceneRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", currentScene.id);
              }
              if (currentBeat && !hasBeatRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
              }
            }
            if (paragraph.linkName) {
              updatedSections.push(`[[${paragraph.linkName}|${paragraph.content}]]`);
            } else {
              const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
              updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            }
            break;
          }
          case "local_modified": {
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: paragraph.content,
              order_num: proseOrderNum++
            });
            const filePathLocalMod = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePathLocalMod, void 0);
            if (finalContentBlock) {
              const existingRefs = await this.apiClient.getContentAnchors(finalContentBlock.id);
              const hasSceneRef = existingRefs.some((r) => r.entity_type === "scene" && r.entity_id === (currentScene == null ? void 0 : currentScene.id));
              const hasBeatRef = existingRefs.some((r) => r.entity_type === "beat" && r.entity_id === (currentBeat == null ? void 0 : currentBeat.id));
              if (currentScene && !hasSceneRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", currentScene.id);
              }
              if (currentBeat && !hasBeatRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
              }
            }
            const linkNameLocalMod = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkNameLocalMod}|${paragraph.content}]]`);
            break;
          }
          case "remote_modified": {
            finalContentBlock = remoteContentBlock;
            const filePathRemoteMod = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePathRemoteMod, void 0);
            if (finalContentBlock) {
              const existingRefs = await this.apiClient.getContentAnchors(finalContentBlock.id);
              const hasSceneRef = existingRefs.some((r) => r.entity_type === "scene" && r.entity_id === (currentScene == null ? void 0 : currentScene.id));
              const hasBeatRef = existingRefs.some((r) => r.entity_type === "beat" && r.entity_id === (currentBeat == null ? void 0 : currentBeat.id));
              if (currentScene && !hasSceneRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", currentScene.id);
              }
              if (currentBeat && !hasBeatRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
              }
            }
            const linkNameRemoteMod = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkNameRemoteMod}|${finalContentBlock.content}]]`);
            new import_obsidian9.Notice(`Prose block updated from remote: ${linkNameRemoteMod}`, 3e3);
            proseOrderNum++;
            break;
          }
          case "conflict": {
            const resolution = await this.resolveConflict(localContentBlock, remoteContentBlock);
            let resolvedContent;
            if (resolution.resolution === "local") {
              resolvedContent = paragraph.content;
            } else if (resolution.resolution === "remote") {
              resolvedContent = remoteContentBlock.content;
            } else {
              resolvedContent = resolution.mergedContent || paragraph.content;
            }
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: resolvedContent,
              order_num: proseOrderNum++
            });
            const filePathConflict = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePathConflict, void 0);
            if (finalContentBlock) {
              const existingRefs = await this.apiClient.getContentAnchors(finalContentBlock.id);
              const hasSceneRef = existingRefs.some((r) => r.entity_type === "scene" && r.entity_id === (currentScene == null ? void 0 : currentScene.id));
              const hasBeatRef = existingRefs.some((r) => r.entity_type === "beat" && r.entity_id === (currentBeat == null ? void 0 : currentBeat.id));
              if (currentScene && !hasSceneRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", currentScene.id);
              }
              if (currentBeat && !hasBeatRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
              }
            }
            const linkNameConflict = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkNameConflict}|${resolvedContent}]]`);
            break;
          }
        }
      }
    }
    await this.updateChapterFile(chapterContent, updatedSections, file, frontmatter, existingScenes, beatMap, remoteContentBlocks, chapterId);
  }
  // Update chapter file with both scene/beat list and chapter content
  async updateChapterFile(originalContent, updatedSections, file, frontmatter, scenes, beatMap, contentBlocks, chapterId) {
    const allContentAnchors = [];
    for (const contentBlock of contentBlocks) {
      const refs = await this.apiClient.getContentAnchors(contentBlock.id);
      allContentAnchors.push(...refs);
    }
    const proseRefsByScene = /* @__PURE__ */ new Map();
    const proseRefsByBeat = /* @__PURE__ */ new Map();
    for (const ref of allContentAnchors) {
      if (ref.entity_type === "scene") {
        if (!proseRefsByScene.has(ref.entity_id)) {
          proseRefsByScene.set(ref.entity_id, []);
        }
        proseRefsByScene.get(ref.entity_id).push(ref);
      } else if (ref.entity_type === "beat") {
        if (!proseRefsByBeat.has(ref.entity_id)) {
          proseRefsByBeat.set(ref.entity_id, []);
        }
        proseRefsByBeat.get(ref.entity_id).push(ref);
      }
    }
    const sceneBeatListItems = [];
    for (const scene of scenes.sort((a, b) => a.order_num - b.order_num)) {
      const sceneFileName = this.fileManager.generateSceneFileName(scene);
      const sceneLinkName = sceneFileName.replace(/\.md$/, "");
      const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
      const sceneProseRefs = proseRefsByScene.get(scene.id) || [];
      const sceneContentBlockIds = new Set(sceneProseRefs.map((r) => r.content_block_id));
      const hasSceneProse = Array.from(sceneContentBlockIds).some((contentBlockId) => {
        const blockRefs = allContentAnchors.filter((r) => r.content_block_id === contentBlockId);
        return !blockRefs.some((r) => r.entity_type === "beat");
      });
      const sceneMarker = hasSceneProse ? "+" : "-";
      sceneBeatListItems.push(`${sceneMarker} [[${sceneLinkName}|Scene ${scene.order_num}: ${sceneDisplayText}]]`);
      const sceneBeats = [];
      for (const [linkName, beat] of beatMap.entries()) {
        if (beat.scene_id === scene.id) {
          sceneBeats.push(beat);
        }
      }
      for (const beat of sceneBeats.sort((a, b) => a.order_num - b.order_num)) {
        const beatFileName = this.fileManager.generateBeatFileName(beat);
        const beatLinkName = beatFileName.replace(/\.md$/, "");
        const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
        const beatProseRefs = proseRefsByBeat.get(beat.id) || [];
        const hasBeatProse = beatProseRefs.length > 0;
        const beatMarker = hasBeatProse ? "+" : "-";
        sceneBeatListItems.push(`	${beatMarker} [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]`);
      }
    }
    const frontmatterMatch = originalContent.match(/^---\n([\s\S]*?)\n---/);
    const frontmatterText = frontmatterMatch ? frontmatterMatch[0] : "";
    const bodyStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
    const bodyContent = originalContent.substring(bodyStart).trim();
    const chapterNumber = frontmatter.number || "1";
    const chapterTitle = frontmatter.title || "Untitled";
    const listSectionMatch = bodyContent.match(/([\s\S]*?##\s+Scenes\s+&\s+Beats\s*\n+)([\s\S]*?)(?=\n##|$)/);
    const updatedListSection = `## Scenes & Beats

${sceneBeatListItems.join("\n")}

`;
    let updatedBody;
    if (listSectionMatch) {
      const beforeList = listSectionMatch[1];
      const afterList = bodyContent.substring(listSectionMatch.index + listSectionMatch[0].length);
      updatedBody = `${beforeList}${updatedListSection}${afterList}`;
    } else {
      const titleMatch = bodyContent.match(/(#\s+[^\n]+\n+)([\s\S]*)/);
      if (titleMatch) {
        updatedBody = `${titleMatch[1]}${updatedListSection}${titleMatch[2]}`;
      } else {
        updatedBody = `${updatedListSection}${bodyContent}`;
      }
    }
    const chapterHeaderPattern = `##\\s+Chapter\\s+${chapterNumber}:\\s+[^\\n]+`;
    const chapterSectionMatch = updatedBody.match(new RegExp(`([\\s\\S]*?${chapterHeaderPattern}\\s*\\n+)([\\s\\S]*?)(?=\\n##\\s+Chapter\\s+\\d+:|$)`, "i"));
    if (!chapterSectionMatch) {
      const newChapterSection = `

## Chapter ${chapterNumber}: ${chapterTitle}

${updatedSections.join("\n\n")}

`;
      updatedBody = `${updatedBody}${newChapterSection}`;
    } else {
      const beforeChapter = chapterSectionMatch[1];
      const afterChapter = updatedBody.substring(chapterSectionMatch.index + chapterSectionMatch[0].length);
      const newChapterContent = updatedSections.join("\n\n");
      updatedBody = `${beforeChapter}${newChapterContent}

${afterChapter}`;
    }
    const updatedContent = `${frontmatterText}
${updatedBody}`;
    await this.fileManager.getVault().modify(file, updatedContent);
  }
  // Process the "## Chapters, Scenes & Beats" list and update order
  async processChapterList(list, storyId) {
    const existingChapters = await this.apiClient.getChapters(storyId);
    const chapterMap = /* @__PURE__ */ new Map();
    const chapterIdMap = /* @__PURE__ */ new Map();
    for (const chapter of existingChapters) {
      const fileName = `Chapter-${chapter.number}.md`;
      const linkName = fileName.replace(/\.md$/, "");
      chapterMap.set(linkName, chapter);
      chapterIdMap.set(chapter.id, chapter);
    }
    let currentChapter = null;
    let currentScene = null;
    let chapterOrderNum = 1;
    const sceneOrderNums = /* @__PURE__ */ new Map();
    const beatOrderNums = /* @__PURE__ */ new Map();
    for (const item of list.items) {
      if (item.type === "chapter") {
        let title;
        let chapterNumber = null;
        const chapterMatch = item.displayText.match(/Chapter\s+(\d+):\s*(.+)/);
        if (chapterMatch) {
          chapterNumber = parseInt(chapterMatch[1], 10);
          title = chapterMatch[2].trim();
        } else {
          title = item.displayText.trim();
        }
        currentScene = null;
        sceneOrderNums.set("current", 1);
        if (item.linkName) {
          currentChapter = chapterMap.get(item.linkName) || null;
          if (!currentChapter) {
            currentChapter = chapterIdMap.get(item.linkName) || null;
          }
          if (currentChapter) {
            const needsOrderUpdate = currentChapter.number !== chapterOrderNum;
            const needsTitleUpdate = title !== currentChapter.title;
            if (needsOrderUpdate || needsTitleUpdate) {
              currentChapter = await this.apiClient.updateChapter(currentChapter.id, {
                number: chapterOrderNum,
                title: needsTitleUpdate ? title : void 0
              });
              const fileName = `Chapter-${currentChapter.number}.md`;
              const linkName = fileName.replace(/\.md$/, "");
              chapterMap.set(linkName, currentChapter);
              chapterIdMap.set(currentChapter.id, currentChapter);
            }
          }
        } else {
          if (title) {
            currentChapter = await this.apiClient.createChapter(storyId, {
              number: chapterOrderNum,
              title,
              status: "draft"
            });
            const fileName = `Chapter-${currentChapter.number}.md`;
            const linkName = fileName.replace(/\.md$/, "");
            chapterMap.set(linkName, currentChapter);
            chapterIdMap.set(currentChapter.id, currentChapter);
          }
        }
        if (currentChapter) {
          sceneOrderNums.set(currentChapter.id, 1);
        }
        chapterOrderNum++;
      } else if (item.type === "scene" && currentChapter) {
        let goal;
        let timeRef = "";
        const sceneMatch = item.displayText.match(/Scene\s+\d+:\s*(.+)/);
        if (sceneMatch) {
          const sceneText = sceneMatch[1].trim();
          const parts = sceneText.split(/\s*-\s*/);
          goal = parts[0].trim();
          timeRef = parts.length > 1 ? parts.slice(1).join(" - ").trim() : "";
        } else {
          const parts = item.displayText.split(/\s*-\s*/);
          goal = parts[0].trim();
          timeRef = parts.length > 1 ? parts.slice(1).join(" - ").trim() : "";
        }
        const currentSceneOrderNum = sceneOrderNums.get(currentChapter.id) || 1;
        currentScene = null;
        if (item.linkName) {
          const existingScenes = await this.apiClient.getScenes(currentChapter.id);
          const sceneMap = /* @__PURE__ */ new Map();
          const sceneIdMap = /* @__PURE__ */ new Map();
          for (const scene of existingScenes) {
            const fileName = this.fileManager.generateSceneFileName(scene);
            const linkName = fileName.replace(/\.md$/, "");
            sceneMap.set(linkName, scene);
            sceneIdMap.set(scene.id, scene);
          }
          currentScene = sceneMap.get(item.linkName) || null;
          if (!currentScene) {
            currentScene = sceneIdMap.get(item.linkName) || null;
          }
          if (currentScene) {
            const needsOrderUpdate = currentScene.order_num !== currentSceneOrderNum;
            const needsContentUpdate = goal !== currentScene.goal || timeRef !== currentScene.time_ref;
            const needsChapterUpdate = currentScene.chapter_id !== currentChapter.id;
            if (needsOrderUpdate || needsContentUpdate || needsChapterUpdate) {
              currentScene = await this.apiClient.updateScene(currentScene.id, {
                goal,
                time_ref: timeRef,
                order_num: currentSceneOrderNum,
                chapter_id: currentChapter.id
              });
            }
            const existingBeats = await this.apiClient.getBeats(currentScene.id);
            if (existingBeats.length === 0) {
              beatOrderNums.set(currentScene.id, 1);
            } else {
              const maxOrderNum = Math.max(...existingBeats.map((b) => b.order_num));
              beatOrderNums.set(currentScene.id, maxOrderNum + 1);
            }
          }
        } else {
          currentScene = await this.apiClient.createScene({
            story_id: storyId,
            chapter_id: currentChapter.id,
            order_num: currentSceneOrderNum,
            goal,
            time_ref: timeRef
          });
          beatOrderNums.set(currentScene.id, 1);
        }
        sceneOrderNums.set(currentChapter.id, currentSceneOrderNum + 1);
      } else if (item.type === "beat" && currentScene) {
        let intent;
        let outcome = "";
        const beatMatch = item.displayText.match(/Beat\s+\d+:\s*(.+)/);
        if (beatMatch) {
          const beatText = beatMatch[1].trim();
          const parts = beatText.split(/\s*->\s*/);
          intent = parts[0].trim();
          outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
        } else {
          const parts = item.displayText.split(/\s*->\s*/);
          intent = parts[0].trim();
          outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
        }
        const currentBeatOrderNum = beatOrderNums.get(currentScene.id) || 1;
        if (item.linkName) {
          const existingBeats = await this.apiClient.getBeats(currentScene.id);
          const beatMap = /* @__PURE__ */ new Map();
          const beatIdMap = /* @__PURE__ */ new Map();
          for (const beat of existingBeats) {
            const fileName = this.fileManager.generateBeatFileName(beat);
            const linkName = fileName.replace(/\.md$/, "");
            beatMap.set(linkName, beat);
            beatIdMap.set(beat.id, beat);
          }
          let currentBeat = beatMap.get(item.linkName) || null;
          if (!currentBeat) {
            currentBeat = beatIdMap.get(item.linkName) || null;
          }
          if (currentBeat) {
            const needsOrderUpdate = currentBeat.order_num !== currentBeatOrderNum;
            const needsContentUpdate = intent !== currentBeat.intent || outcome !== currentBeat.outcome;
            const needsSceneUpdate = currentBeat.scene_id !== currentScene.id;
            if (needsOrderUpdate || needsContentUpdate || needsSceneUpdate) {
              currentBeat = await this.apiClient.updateBeat(currentBeat.id, {
                intent,
                outcome,
                order_num: currentBeatOrderNum,
                scene_id: currentScene.id
              });
            }
          }
        } else {
          await this.apiClient.createBeat({
            scene_id: currentScene.id,
            order_num: currentBeatOrderNum,
            type: "setup",
            // Default type
            intent,
            outcome
          });
        }
        beatOrderNums.set(currentScene.id, currentBeatOrderNum + 1);
      }
    }
  }
  // Process the "## Beats" list from a scene file and update beat order
  async pushSceneBeats(sceneFilePath, storyId) {
    const file = this.fileManager.getVault().getAbstractFileByPath(sceneFilePath);
    if (!(file instanceof import_obsidian9.TFile)) {
      return;
    }
    const sceneContent = await this.fileManager.getVault().read(file);
    const frontmatter = this.fileManager.parseFrontmatter(sceneContent);
    if (!frontmatter.id) {
      return;
    }
    const sceneId = frontmatter.id;
    const beatList = parseBeatList(sceneContent);
    if (beatList.items.length === 0) {
      return;
    }
    const existingBeats = await this.apiClient.getBeats(sceneId);
    const beatMap = /* @__PURE__ */ new Map();
    const beatIdMap = /* @__PURE__ */ new Map();
    for (const beat of existingBeats) {
      const fileName = this.fileManager.generateBeatFileName(beat);
      const linkName = fileName.replace(/\.md$/, "");
      beatMap.set(linkName, beat);
      beatIdMap.set(beat.id, beat);
    }
    let beatOrderNum = 1;
    for (const item of beatList.items) {
      let intent;
      let outcome = "";
      const beatMatch = item.displayText.match(/Beat\s+\d+:\s*(.+)/);
      if (beatMatch) {
        const beatText = beatMatch[1].trim();
        const parts = beatText.split(/\s*->\s*/);
        intent = parts[0].trim();
        outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
      } else {
        const parts = item.displayText.split(/\s*->\s*/);
        intent = parts[0].trim();
        outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
      }
      if (item.linkName) {
        let currentBeat = beatMap.get(item.linkName) || null;
        if (!currentBeat) {
          currentBeat = beatIdMap.get(item.linkName) || null;
        }
        if (currentBeat) {
          const needsOrderUpdate = currentBeat.order_num !== beatOrderNum;
          const needsContentUpdate = intent !== currentBeat.intent || outcome !== currentBeat.outcome;
          if (needsOrderUpdate || needsContentUpdate) {
            currentBeat = await this.apiClient.updateBeat(currentBeat.id, {
              intent,
              outcome,
              order_num: beatOrderNum
            });
          }
        }
      } else {
        await this.apiClient.createBeat({
          scene_id: sceneId,
          order_num: beatOrderNum,
          type: "setup",
          // Default type
          intent,
          outcome
        });
      }
      beatOrderNum++;
    }
  }
  // Push prose blocks from a story file with hierarchical structure
  // Format: # Story: title, ## Chapter: title, ### Scene: title, #### Beat: title
  async pushStoryContentBlocks(storyFilePath, storyFolderPath, storyId) {
    const file = this.fileManager.getVault().getAbstractFileByPath(storyFilePath);
    if (!(file instanceof import_obsidian9.TFile)) {
      throw new Error(`Story file not found: ${storyFilePath}`);
    }
    const storyContent = await this.fileManager.getVault().read(file);
    const contentsFolderPath = `${storyFolderPath}/03-contents`;
    const storyProse = parseStoryProse(storyContent);
    if (storyProse.sections.length === 0) {
      return;
    }
    const existingChapters = await this.apiClient.getChapters(storyId);
    const chapterByTitle = /* @__PURE__ */ new Map();
    for (const ch of existingChapters) {
      chapterByTitle.set(ch.title.toLowerCase(), ch);
    }
    let currentChapter = null;
    let currentScene = null;
    let currentBeat = null;
    let proseOrderNum = 1;
    const sceneMap = /* @__PURE__ */ new Map();
    const beatMap = /* @__PURE__ */ new Map();
    const remoteContentBlocksCache = /* @__PURE__ */ new Map();
    const getRemoteContentBlocksMap = async (chapterId) => {
      if (!remoteContentBlocksCache.has(chapterId)) {
        const blocks = await this.apiClient.getContentBlocks(chapterId);
        const map2 = /* @__PURE__ */ new Map();
        for (const pb of blocks) {
          map2.set(pb.id, pb);
        }
        remoteContentBlocksCache.set(chapterId, map2);
      }
      return remoteContentBlocksCache.get(chapterId);
    };
    for (const section of storyProse.sections) {
      if (section.type === "scene" && section.scene) {
        const { scene: parsedScene } = section;
        if (!currentChapter) {
          currentChapter = chapterByTitle.get("story prose") || null;
          if (!currentChapter) {
            currentChapter = await this.apiClient.createChapter(storyId, {
              number: 9999,
              title: "Story Prose",
              status: "draft"
            });
            chapterByTitle.set("story prose", currentChapter);
          }
        }
        if (parsedScene.linkName) {
          currentScene = sceneMap.get(parsedScene.linkName) || null;
        }
        if (!currentScene && parsedScene.goal) {
          const allScenes = await this.apiClient.getScenes(currentChapter.id);
          currentScene = allScenes.find((s) => s.goal === parsedScene.goal) || null;
        }
        if (!currentScene) {
          const existingScenes = await this.apiClient.getScenes(currentChapter.id);
          const sceneOrderNum = existingScenes.length > 0 ? Math.max(...existingScenes.map((s) => s.order_num)) + 1 : 1;
          currentScene = await this.apiClient.createScene({
            story_id: storyId,
            chapter_id: currentChapter.id,
            order_num: sceneOrderNum,
            goal: parsedScene.goal,
            time_ref: parsedScene.timeRef
          });
        }
        if (currentScene) {
          const sceneFileName = this.fileManager.generateSceneFileName(currentScene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          sceneMap.set(sceneLinkName, currentScene);
        }
        currentBeat = null;
        proseOrderNum = 1;
      } else if (section.type === "beat" && section.beat) {
        const { beat: parsedBeat } = section;
        if (!currentScene) {
          continue;
        }
        if (parsedBeat.linkName) {
          currentBeat = beatMap.get(parsedBeat.linkName) || null;
        }
        if (!currentBeat && parsedBeat.intent) {
          const allBeats = await this.apiClient.getBeats(currentScene.id);
          currentBeat = allBeats.find((b) => b.intent === parsedBeat.intent) || null;
        }
        if (!currentBeat) {
          const existingBeats = await this.apiClient.getBeats(currentScene.id);
          const beatOrderNum = existingBeats.length > 0 ? Math.max(...existingBeats.map((b) => b.order_num)) + 1 : 1;
          currentBeat = await this.apiClient.createBeat({
            scene_id: currentScene.id,
            order_num: beatOrderNum,
            type: "setup",
            intent: parsedBeat.intent,
            outcome: parsedBeat.outcome
          });
        }
        if (currentBeat) {
          const beatFileName = this.fileManager.generateBeatFileName(currentBeat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          beatMap.set(beatLinkName, currentBeat);
        }
      } else if (section.type === "prose" && section.prose) {
        const { prose: paragraph } = section;
        if (!currentChapter) {
          currentChapter = chapterByTitle.get("story prose") || null;
          if (!currentChapter) {
            currentChapter = await this.apiClient.createChapter(storyId, {
              number: 9999,
              title: "Story Prose",
              status: "draft"
            });
            chapterByTitle.set("story prose", currentChapter);
          }
        }
        const remoteContentBlocksMap = await getRemoteContentBlocksMap(currentChapter.id);
        let localContentBlock = null;
        let remoteContentBlock = null;
        if (paragraph.linkName) {
          const contentBlockFilePath = await this.findContentBlockFileByLinkName(contentsFolderPath, paragraph.linkName);
          if (contentBlockFilePath) {
            localContentBlock = await this.fileManager.readContentBlockFromFile(contentBlockFilePath);
          }
          if (!localContentBlock) {
            localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          }
          if (localContentBlock) {
            remoteContentBlock = remoteContentBlocksMap.get(localContentBlock.id) || null;
          } else {
            const normalizedContent = paragraph.content.trim();
            for (const [, remotePB] of remoteContentBlocksMap.entries()) {
              if (remotePB.content.trim() === normalizedContent) {
                remoteContentBlock = remotePB;
                break;
              }
            }
          }
        } else {
          localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          const normalizedContent = paragraph.content.trim();
          for (const [, remotePB] of remoteContentBlocksMap.entries()) {
            if (remotePB.content.trim() === normalizedContent) {
              remoteContentBlock = remotePB;
              if (!localContentBlock) {
                localContentBlock = await this.findContentBlockById(contentsFolderPath, remotePB.id);
              }
              break;
            }
          }
        }
        const status = compareContentBlocks(paragraph, localContentBlock, remoteContentBlock);
        let finalContentBlock;
        switch (status) {
          case "new": {
            finalContentBlock = await this.apiClient.createContentBlock(currentChapter.id, {
              order_num: proseOrderNum++,
              kind: "final",
              content: paragraph.content
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            if (currentScene) {
              await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", currentScene.id);
            }
            if (currentBeat) {
              await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
            }
            break;
          }
          case "unchanged": {
            if (!localContentBlock && remoteContentBlock) {
              finalContentBlock = remoteContentBlock;
              const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
              await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            } else if (localContentBlock) {
              finalContentBlock = localContentBlock;
              proseOrderNum++;
            } else {
              finalContentBlock = remoteContentBlock;
              proseOrderNum++;
            }
            break;
          }
          case "local_modified": {
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: paragraph.content,
              order_num: proseOrderNum++
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            break;
          }
          case "remote_modified": {
            finalContentBlock = remoteContentBlock;
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            proseOrderNum++;
            break;
          }
          case "conflict": {
            const resolution = await this.resolveConflict(localContentBlock, remoteContentBlock);
            let resolvedContent = resolution.resolution === "local" ? paragraph.content : resolution.resolution === "remote" ? remoteContentBlock.content : resolution.mergedContent || paragraph.content;
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: resolvedContent,
              order_num: proseOrderNum++
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            break;
          }
        }
      }
    }
  }
  // Push prose blocks from a scene file (scene-level prose, not inside chapters)
  async pushSceneContentBlocks(sceneFilePath, storyFolderPath) {
    const file = this.fileManager.getVault().getAbstractFileByPath(sceneFilePath);
    if (!(file instanceof import_obsidian9.TFile)) {
      return;
    }
    const sceneContent = await this.fileManager.getVault().read(file);
    const frontmatter = this.fileManager.parseFrontmatter(sceneContent);
    if (!frontmatter.id || !frontmatter.story_id) {
      return;
    }
    const sceneId = frontmatter.id;
    const storyId = frontmatter.story_id;
    const contentsFolderPath = `${storyFolderPath}/03-contents`;
    const sceneProse = parseSceneProse(sceneContent);
    if (sceneProse.sections.length === 0) {
      return;
    }
    const chapters = await this.apiClient.getChapters(storyId);
    let tempChapter = chapters.find((c) => c.title === "Scene-Level Prose");
    if (!tempChapter) {
      tempChapter = await this.apiClient.createChapter(storyId, {
        number: 9998,
        // High number to keep it at the end
        title: "Scene-Level Prose",
        status: "draft"
      });
    }
    const remoteContentBlocks = await this.apiClient.getContentBlocks(tempChapter.id);
    const remoteContentBlocksMap = /* @__PURE__ */ new Map();
    for (const pb of remoteContentBlocks) {
      remoteContentBlocksMap.set(pb.id, pb);
    }
    const existingBeats = await this.apiClient.getBeats(sceneId);
    const beatMap = /* @__PURE__ */ new Map();
    const beatIdMap = /* @__PURE__ */ new Map();
    for (const beat of existingBeats) {
      const fileName = this.fileManager.generateBeatFileName(beat);
      const linkName = fileName.replace(/\.md$/, "");
      beatMap.set(linkName, beat);
      beatIdMap.set(beat.id, beat);
    }
    let proseOrderNum = 1;
    let currentBeat = null;
    const updatedSections = [];
    for (const section of sceneProse.sections) {
      if (section.type === "beat" && section.beat) {
        const { beat: parsedBeat } = section;
        if (parsedBeat.linkName) {
          currentBeat = beatMap.get(parsedBeat.linkName) || null;
          if (!currentBeat) {
            currentBeat = beatIdMap.get(parsedBeat.linkName) || null;
          }
        }
        if (currentBeat) {
          const beatFileName = this.fileManager.generateBeatFileName(currentBeat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          const beatDisplayText = currentBeat.outcome ? `${currentBeat.intent} -> ${currentBeat.outcome}` : currentBeat.intent;
          updatedSections.push(`### Beat: [[${beatLinkName}|${beatDisplayText}]]`);
        }
      } else if (section.type === "prose" && section.prose) {
        const { prose: paragraph } = section;
        let localContentBlock = null;
        let remoteContentBlock = null;
        if (paragraph.linkName) {
          const contentBlockFilePath = await this.findContentBlockFileByLinkName(contentsFolderPath, paragraph.linkName);
          if (contentBlockFilePath) {
            localContentBlock = await this.fileManager.readContentBlockFromFile(contentBlockFilePath);
          }
          if (!localContentBlock) {
            localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          }
          if (localContentBlock) {
            remoteContentBlock = remoteContentBlocksMap.get(localContentBlock.id) || null;
          } else {
            const normalizedContent = paragraph.content.trim();
            for (const [id2, remotePB] of remoteContentBlocksMap.entries()) {
              if (remotePB.content.trim() === normalizedContent) {
                remoteContentBlock = remotePB;
                break;
              }
            }
          }
        } else {
          localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          const normalizedContent = paragraph.content.trim();
          for (const [id2, remotePB] of remoteContentBlocksMap.entries()) {
            if (remotePB.content.trim() === normalizedContent) {
              remoteContentBlock = remotePB;
              if (!localContentBlock) {
                localContentBlock = await this.findContentBlockById(contentsFolderPath, remotePB.id);
              }
              break;
            }
          }
        }
        const status = compareContentBlocks(paragraph, localContentBlock, remoteContentBlock);
        let finalContentBlock;
        switch (status) {
          case "new": {
            finalContentBlock = await this.apiClient.createContentBlock(tempChapter.id, {
              order_num: proseOrderNum++,
              kind: "final",
              content: paragraph.content
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", sceneId);
            if (currentBeat) {
              await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
            }
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            break;
          }
          case "unchanged": {
            if (!localContentBlock && remoteContentBlock) {
              finalContentBlock = remoteContentBlock;
              const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
              await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            } else if (localContentBlock) {
              if (localContentBlock.order_num !== proseOrderNum) {
                finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
                  order_num: proseOrderNum++
                });
                const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
                await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
              } else {
                finalContentBlock = localContentBlock;
                proseOrderNum++;
              }
            } else {
              finalContentBlock = remoteContentBlock;
              proseOrderNum++;
            }
            if (paragraph.linkName) {
              updatedSections.push(`[[${paragraph.linkName}|${paragraph.content}]]`);
            } else {
              const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
              updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            }
            break;
          }
          case "local_modified": {
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: paragraph.content,
              order_num: proseOrderNum++
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            break;
          }
          case "remote_modified": {
            finalContentBlock = remoteContentBlock;
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${finalContentBlock.content}]]`);
            new import_obsidian9.Notice(`Scene prose block updated from remote: ${linkName}`, 3e3);
            proseOrderNum++;
            break;
          }
          case "conflict": {
            const resolution = await this.resolveConflict(localContentBlock, remoteContentBlock);
            let resolvedContent;
            if (resolution.resolution === "local") {
              resolvedContent = paragraph.content;
            } else if (resolution.resolution === "remote") {
              resolvedContent = remoteContentBlock.content;
            } else {
              resolvedContent = resolution.mergedContent || paragraph.content;
            }
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: resolvedContent,
              order_num: proseOrderNum++
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${resolvedContent}]]`);
            break;
          }
        }
      }
    }
    if (updatedSections.length > 0) {
      const frontmatterMatch = sceneContent.match(/^---\n([\s\S]*?)\n---/);
      const frontmatterEnd = frontmatterMatch ? frontmatterMatch[0].length : 0;
      const afterFrontmatter = sceneContent.substring(frontmatterEnd).trim();
      const beatsSectionMatch = afterFrontmatter.match(/\n##\s+Beats\s*\n/);
      const insertionPoint = beatsSectionMatch ? frontmatterEnd + afterFrontmatter.indexOf(beatsSectionMatch[0]) : sceneContent.length;
      const beforeProse = sceneContent.substring(0, insertionPoint).trimEnd();
      const afterProse = sceneContent.substring(insertionPoint);
      const updatedContent = `${beforeProse}

${updatedSections.join("\n\n")}
${afterProse}`;
      await this.fileManager.getVault().modify(file, updatedContent);
    }
  }
  // Push prose blocks from a beat file
  async pushBeatContentBlocks(beatFilePath, storyFolderPath) {
    const file = this.fileManager.getVault().getAbstractFileByPath(beatFilePath);
    if (!(file instanceof import_obsidian9.TFile)) {
      return;
    }
    const beatContent = await this.fileManager.getVault().read(file);
    const frontmatter = this.fileManager.parseFrontmatter(beatContent);
    if (!frontmatter.id || !frontmatter.scene_id) {
      return;
    }
    const beatId = frontmatter.id;
    const sceneId = frontmatter.scene_id;
    const contentsFolderPath = `${storyFolderPath}/03-contents`;
    const beatProse = parseBeatProse(beatContent);
    if (beatProse.sections.length === 0) {
      return;
    }
    const scene = await this.apiClient.getScene(sceneId);
    if (!scene) {
      return;
    }
    const storyId = scene.story_id;
    const chapters = await this.apiClient.getChapters(storyId);
    let tempChapter = chapters.find((c) => c.title === "Beat-Level Prose");
    if (!tempChapter) {
      tempChapter = await this.apiClient.createChapter(storyId, {
        number: 9997,
        // High number to keep it at the end
        title: "Beat-Level Prose",
        status: "draft"
      });
    }
    const remoteContentBlocks = await this.apiClient.getContentBlocks(tempChapter.id);
    const remoteContentBlocksMap = /* @__PURE__ */ new Map();
    for (const pb of remoteContentBlocks) {
      remoteContentBlocksMap.set(pb.id, pb);
    }
    let proseOrderNum = 1;
    const updatedSections = [];
    const beat = await this.apiClient.getBeat(beatId);
    if (beat) {
      const beatFileName = this.fileManager.generateBeatFileName(beat);
      const beatLinkName = beatFileName.replace(/\.md$/, "");
      const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
      updatedSections.push(`## Beat: [[${beatLinkName}|${beatDisplayText}]]`);
    }
    for (const section of beatProse.sections) {
      if (section.type === "prose" && section.prose) {
        const { prose: paragraph } = section;
        let localContentBlock = null;
        let remoteContentBlock = null;
        if (paragraph.linkName) {
          const contentBlockFilePath = await this.findContentBlockFileByLinkName(contentsFolderPath, paragraph.linkName);
          if (contentBlockFilePath) {
            localContentBlock = await this.fileManager.readContentBlockFromFile(contentBlockFilePath);
          }
          if (!localContentBlock) {
            localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          }
          if (localContentBlock) {
            remoteContentBlock = remoteContentBlocksMap.get(localContentBlock.id) || null;
          } else {
            const normalizedContent = paragraph.content.trim();
            for (const [, remotePB] of remoteContentBlocksMap.entries()) {
              if (remotePB.content.trim() === normalizedContent) {
                remoteContentBlock = remotePB;
                break;
              }
            }
          }
        } else {
          localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          const normalizedContent = paragraph.content.trim();
          for (const [, remotePB] of remoteContentBlocksMap.entries()) {
            if (remotePB.content.trim() === normalizedContent) {
              remoteContentBlock = remotePB;
              if (!localContentBlock) {
                localContentBlock = await this.findContentBlockById(contentsFolderPath, remotePB.id);
              }
              break;
            }
          }
        }
        const status = compareContentBlocks(paragraph, localContentBlock, remoteContentBlock);
        let finalContentBlock;
        switch (status) {
          case "new": {
            finalContentBlock = await this.apiClient.createContentBlock(tempChapter.id, {
              order_num: proseOrderNum++,
              kind: "final",
              content: paragraph.content
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", sceneId);
            await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", beatId);
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            break;
          }
          case "unchanged": {
            if (!localContentBlock && remoteContentBlock) {
              finalContentBlock = remoteContentBlock;
              const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
              await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
              const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
              updatedSections.push(`[[${linkName}|${remoteContentBlock.content}]]`);
            } else if (localContentBlock) {
              finalContentBlock = localContentBlock;
              const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
              updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
              proseOrderNum++;
            } else {
              proseOrderNum++;
              continue;
            }
            break;
          }
          case "local_modified": {
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: paragraph.content,
              order_num: proseOrderNum++
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            break;
          }
          case "remote_modified": {
            finalContentBlock = remoteContentBlock;
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            proseOrderNum++;
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${remoteContentBlock.content}]]`);
            break;
          }
          case "conflict": {
            const resolution = await this.resolveConflict(localContentBlock, remoteContentBlock);
            let resolvedContent;
            if (resolution.resolution === "local") {
              resolvedContent = paragraph.content;
            } else if (resolution.resolution === "remote") {
              resolvedContent = remoteContentBlock.content;
            } else {
              resolvedContent = resolution.mergedContent || paragraph.content;
            }
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: resolvedContent,
              order_num: proseOrderNum++
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${resolvedContent}]]`);
            break;
          }
        }
      }
    }
    if (updatedSections.length > 1) {
      const frontmatterMatch = beatContent.match(/^---\n([\s\S]*?)\n---/);
      const frontmatterEnd = frontmatterMatch ? frontmatterMatch[0].length : 0;
      const afterFrontmatter = beatContent.substring(frontmatterEnd).trim();
      const beatSectionMatch = afterFrontmatter.match(/##\s+Beat:\s*.+[\s\S]*/);
      if (beatSectionMatch) {
        const beforeBeatSection = beatContent.substring(0, frontmatterEnd + afterFrontmatter.indexOf(beatSectionMatch[0]));
        const updatedContent = `${beforeBeatSection.trimEnd()}

${updatedSections.join("\n\n")}
`;
        await this.fileManager.getVault().modify(file, updatedContent);
      } else {
        const updatedContent = `${beatContent.trimEnd()}

${updatedSections.join("\n\n")}
`;
        await this.fileManager.getVault().modify(file, updatedContent);
      }
    }
  }
  // Process the "## Orphan Scenes" list and update orphan scenes order
  async processOrphanScenesList(list, storyId) {
    const allScenes = await this.apiClient.getScenesByStory(storyId);
    const sceneMap = /* @__PURE__ */ new Map();
    const sceneIdMap = /* @__PURE__ */ new Map();
    const orphanScenes = allScenes.filter((s) => !s.chapter_id);
    for (const scene of orphanScenes) {
      const fileName = this.fileManager.generateSceneFileName(scene);
      const linkName = fileName.replace(/\.md$/, "");
      sceneMap.set(linkName, scene);
      sceneIdMap.set(scene.id, scene);
    }
    const beatMap = /* @__PURE__ */ new Map();
    const beatIdMap = /* @__PURE__ */ new Map();
    for (const scene of orphanScenes) {
      const beats = await this.apiClient.getBeats(scene.id);
      for (const beat of beats) {
        const fileName = this.fileManager.generateBeatFileName(beat);
        const linkName = fileName.replace(/\.md$/, "");
        beatMap.set(linkName, beat);
        beatIdMap.set(beat.id, beat);
      }
    }
    let currentScene = null;
    let sceneOrderNum = 1;
    const beatOrderNums = /* @__PURE__ */ new Map();
    for (const item of list.items) {
      if (item.type === "scene") {
        let goal;
        let timeRef = "";
        const sceneMatch = item.displayText.match(/Scene\s+\d+:\s*(.+)/);
        if (sceneMatch) {
          const sceneText = sceneMatch[1].trim();
          const parts = sceneText.split(/\s*-\s*/);
          goal = parts[0].trim();
          timeRef = parts.length > 1 ? parts.slice(1).join(" - ").trim() : "";
        } else {
          const parts = item.displayText.split(/\s*-\s*/);
          goal = parts[0].trim();
          timeRef = parts.length > 1 ? parts.slice(1).join(" - ").trim() : "";
        }
        if (item.linkName) {
          currentScene = sceneMap.get(item.linkName) || null;
          if (!currentScene) {
            currentScene = sceneIdMap.get(item.linkName) || null;
          }
          if (currentScene) {
            const needsOrderUpdate = currentScene.order_num !== sceneOrderNum;
            const needsContentUpdate = goal !== currentScene.goal || timeRef !== currentScene.time_ref;
            if (needsOrderUpdate || needsContentUpdate) {
              currentScene = await this.apiClient.updateScene(currentScene.id, {
                goal,
                time_ref: timeRef,
                order_num: sceneOrderNum
              });
            }
            const existingBeats = await this.apiClient.getBeats(currentScene.id);
            if (existingBeats.length === 0) {
              beatOrderNums.set(currentScene.id, 1);
            } else {
              const maxOrderNum = Math.max(...existingBeats.map((b) => b.order_num));
              beatOrderNums.set(currentScene.id, maxOrderNum + 1);
            }
          }
        } else {
          currentScene = await this.apiClient.createScene({
            story_id: storyId,
            chapter_id: null,
            // Orphan scene
            order_num: sceneOrderNum,
            goal,
            time_ref: timeRef
          });
          const sceneFileName = this.fileManager.generateSceneFileName(currentScene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          sceneMap.set(sceneLinkName, currentScene);
          sceneIdMap.set(currentScene.id, currentScene);
          beatOrderNums.set(currentScene.id, 1);
        }
        sceneOrderNum++;
      } else if (item.type === "beat" && currentScene) {
        let intent;
        let outcome = "";
        const beatMatch = item.displayText.match(/Beat\s+\d+:\s*(.+)/);
        if (beatMatch) {
          const beatText = beatMatch[1].trim();
          const parts = beatText.split(/\s*->\s*/);
          intent = parts[0].trim();
          outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
        } else {
          const parts = item.displayText.split(/\s*->\s*/);
          intent = parts[0].trim();
          outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
        }
        const currentBeatOrderNum = beatOrderNums.get(currentScene.id) || 1;
        if (item.linkName) {
          let currentBeat = beatMap.get(item.linkName) || null;
          if (!currentBeat) {
            currentBeat = beatIdMap.get(item.linkName) || null;
          }
          if (currentBeat) {
            const needsOrderUpdate = currentBeat.order_num !== currentBeatOrderNum;
            const needsContentUpdate = intent !== currentBeat.intent || outcome !== currentBeat.outcome;
            const needsSceneUpdate = currentBeat.scene_id !== currentScene.id;
            if (needsOrderUpdate || needsContentUpdate || needsSceneUpdate) {
              currentBeat = await this.apiClient.updateBeat(currentBeat.id, {
                intent,
                outcome,
                order_num: currentBeatOrderNum,
                scene_id: currentScene.id
              });
            }
          }
        } else {
          await this.apiClient.createBeat({
            scene_id: currentScene.id,
            order_num: currentBeatOrderNum,
            type: "setup",
            // Default type
            intent,
            outcome
          });
        }
        beatOrderNums.set(currentScene.id, currentBeatOrderNum + 1);
      }
    }
  }
  // Process the "## Orphan Beats" list and update orphan beats order
  async processOrphanBeatsList(list, storyId) {
    const allBeats = await this.apiClient.getBeatsByStory(storyId);
    const allScenes = await this.apiClient.getScenesByStory(storyId);
    const sceneIdSet = new Set(allScenes.map((s) => s.id));
    const orphanBeats = allBeats.filter((b) => !b.scene_id || !sceneIdSet.has(b.scene_id));
    const beatMap = /* @__PURE__ */ new Map();
    const beatIdMap = /* @__PURE__ */ new Map();
    for (const beat of orphanBeats) {
      const fileName = this.fileManager.generateBeatFileName(beat);
      const linkName = fileName.replace(/\.md$/, "");
      beatMap.set(linkName, beat);
      beatIdMap.set(beat.id, beat);
    }
    let beatOrderNum = 1;
    for (const item of list.items) {
      let intent;
      let outcome = "";
      const beatMatch = item.displayText.match(/Beat\s+\d+:\s*(.+)/);
      if (beatMatch) {
        const beatText = beatMatch[1].trim();
        const parts = beatText.split(/\s*->\s*/);
        intent = parts[0].trim();
        outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
      } else {
        const parts = item.displayText.split(/\s*->\s*/);
        intent = parts[0].trim();
        outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
      }
      if (item.linkName) {
        let currentBeat = beatMap.get(item.linkName) || null;
        if (!currentBeat) {
          currentBeat = beatIdMap.get(item.linkName) || null;
        }
        if (currentBeat) {
          const needsOrderUpdate = currentBeat.order_num !== beatOrderNum;
          const needsContentUpdate = intent !== currentBeat.intent || outcome !== currentBeat.outcome;
          if (needsOrderUpdate || needsContentUpdate) {
            currentBeat = await this.apiClient.updateBeat(currentBeat.id, {
              intent,
              outcome,
              order_num: beatOrderNum
              // Keep scene_id as null or invalid (orphan) - don't update it
            });
          }
        }
      } else {
        const allScenes2 = await this.apiClient.getScenesByStory(storyId);
        let orphanBeatScene = allScenes2.find((s) => !s.chapter_id && s.goal.startsWith("Orphan Beats Container"));
        if (!orphanBeatScene) {
          orphanBeatScene = await this.apiClient.createScene({
            story_id: storyId,
            chapter_id: null,
            order_num: 9999,
            // High number to keep it at the end
            goal: "Orphan Beats Container",
            time_ref: ""
          });
        }
        await this.apiClient.createBeat({
          scene_id: orphanBeatScene.id,
          order_num: beatOrderNum,
          type: "setup",
          // Default type
          intent,
          outcome
        });
      }
      beatOrderNum++;
    }
  }
  // Process the "## Scenes & Beats" list and create/update/delete scenes and beats
  async processSceneBeatList(list, chapterId, storyId) {
    const existingScenes = await this.apiClient.getScenes(chapterId);
    const sceneMap = /* @__PURE__ */ new Map();
    const sceneIdMap = /* @__PURE__ */ new Map();
    for (const scene of existingScenes) {
      const fileName = this.fileManager.generateSceneFileName(scene);
      const linkName = fileName.replace(/\.md$/, "");
      sceneMap.set(linkName, scene);
      sceneIdMap.set(scene.id, scene);
    }
    const beatMap = /* @__PURE__ */ new Map();
    const beatIdMap = /* @__PURE__ */ new Map();
    for (const scene of existingScenes) {
      const beats = await this.apiClient.getBeats(scene.id);
      for (const beat of beats) {
        const fileName = this.fileManager.generateBeatFileName(beat);
        const linkName = fileName.replace(/\.md$/, "");
        beatMap.set(linkName, beat);
        beatIdMap.set(beat.id, beat);
      }
    }
    let currentScene = null;
    let sceneOrderNum = 1;
    const beatOrderNums = /* @__PURE__ */ new Map();
    for (const item of list.items) {
      if (item.type === "scene") {
        currentScene = null;
        let goal;
        let timeRef = "";
        const sceneMatch = item.displayText.match(/Scene\s+\d+:\s*(.+)/);
        if (sceneMatch) {
          const sceneText = sceneMatch[1].trim();
          const parts = sceneText.split(/\s*-\s*/);
          goal = parts[0].trim();
          timeRef = parts.length > 1 ? parts.slice(1).join(" - ").trim() : "";
        } else {
          const parts = item.displayText.split(/\s*-\s*/);
          goal = parts[0].trim();
          timeRef = parts.length > 1 ? parts.slice(1).join(" - ").trim() : "";
        }
        currentScene = null;
        if (item.linkName) {
          currentScene = sceneMap.get(item.linkName) || null;
          if (!currentScene) {
            currentScene = sceneIdMap.get(item.linkName) || null;
          }
          if (currentScene) {
            const needsOrderUpdate = currentScene.order_num !== sceneOrderNum;
            const needsContentUpdate = goal !== currentScene.goal || timeRef !== currentScene.time_ref;
            if (needsOrderUpdate || needsContentUpdate) {
              currentScene = await this.apiClient.updateScene(currentScene.id, {
                goal,
                time_ref: timeRef,
                order_num: sceneOrderNum
              });
            }
            const existingBeats = await this.apiClient.getBeats(currentScene.id);
            if (existingBeats.length === 0) {
              beatOrderNums.set(currentScene.id, 1);
            } else {
              const maxOrderNum = Math.max(...existingBeats.map((b) => b.order_num));
              beatOrderNums.set(currentScene.id, maxOrderNum + 1);
            }
          }
        } else {
          currentScene = await this.apiClient.createScene({
            story_id: storyId,
            chapter_id: chapterId,
            order_num: sceneOrderNum,
            goal,
            time_ref: timeRef
          });
          const sceneFileName = this.fileManager.generateSceneFileName(currentScene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          sceneMap.set(sceneLinkName, currentScene);
          sceneIdMap.set(currentScene.id, currentScene);
          beatOrderNums.set(currentScene.id, 1);
        }
        sceneOrderNum++;
      } else if (item.type === "beat" && currentScene) {
        let intent;
        let outcome = "";
        const beatMatch = item.displayText.match(/Beat\s+\d+:\s*(.+)/);
        if (beatMatch) {
          const beatText = beatMatch[1].trim();
          const parts = beatText.split(/\s*->\s*/);
          intent = parts[0].trim();
          outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
        } else {
          const parts = item.displayText.split(/\s*->\s*/);
          intent = parts[0].trim();
          outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
        }
        const currentBeatOrderNum = beatOrderNums.get(currentScene.id) || 1;
        if (item.linkName) {
          let currentBeat = beatMap.get(item.linkName) || null;
          if (!currentBeat) {
            currentBeat = beatIdMap.get(item.linkName) || null;
          }
          if (currentBeat) {
            const needsOrderUpdate = currentBeat.order_num !== currentBeatOrderNum;
            const needsContentUpdate = intent !== currentBeat.intent || outcome !== currentBeat.outcome;
            const needsSceneUpdate = currentBeat.scene_id !== currentScene.id;
            if (needsOrderUpdate || needsContentUpdate || needsSceneUpdate) {
              currentBeat = await this.apiClient.updateBeat(currentBeat.id, {
                intent,
                outcome,
                order_num: currentBeatOrderNum,
                scene_id: currentScene.id
              });
              if (needsSceneUpdate) {
                const beatFileName = this.fileManager.generateBeatFileName(currentBeat);
                const beatLinkName = beatFileName.replace(/\.md$/, "");
                beatMap.set(beatLinkName, currentBeat);
                beatIdMap.set(currentBeat.id, currentBeat);
              }
            }
          }
        } else {
          const newBeat = await this.apiClient.createBeat({
            scene_id: currentScene.id,
            order_num: currentBeatOrderNum,
            type: "setup",
            // Default type
            intent,
            outcome
          });
          const beatFileName = this.fileManager.generateBeatFileName(newBeat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          beatMap.set(beatLinkName, newBeat);
          beatIdMap.set(newBeat.id, newBeat);
        }
        beatOrderNums.set(currentScene.id, currentBeatOrderNum + 1);
      }
    }
  }
  // Find content block file by link name (searches recursively in all type subfolders)
  async findContentBlockFileByLinkName(contentsRoot, linkName) {
    const root2 = this.fileManager.getVault().getAbstractFileByPath(contentsRoot);
    if (!(root2 instanceof import_obsidian9.TFolder))
      return null;
    const target = `${linkName}.md`;
    const stack = [root2];
    while (stack.length) {
      const folder = stack.pop();
      for (const child of folder.children) {
        if (child instanceof import_obsidian9.TFolder) {
          stack.push(child);
        } else if (child instanceof import_obsidian9.TFile && child.name === target) {
          return child.path;
        }
      }
    }
    return null;
  }
  // Find prose block by content when file name doesn't match (searches recursively in all type subfolders)
  async findContentBlockByContent(contentsFolderPath, content) {
    try {
      const folder = this.fileManager.getVault().getAbstractFileByPath(contentsFolderPath);
      if (!(folder instanceof import_obsidian9.TFolder)) {
        return null;
      }
      const normalizedContent = content.trim();
      const stack = [folder];
      while (stack.length) {
        const currentFolder = stack.pop();
        for (const child of currentFolder.children) {
          if (child instanceof import_obsidian9.TFolder) {
            stack.push(child);
          } else if (child instanceof import_obsidian9.TFile && child.extension === "md") {
            const contentBlock = await this.fileManager.readContentBlockFromFile(child.path);
            if (contentBlock && contentBlock.content.trim() === normalizedContent) {
              return contentBlock;
            }
          }
        }
      }
    } catch (err) {
      console.error("Error searching for prose block by content:", err);
    }
    return null;
  }
  // Find prose block by ID when we have remote ID but need local file (searches recursively in all type subfolders)
  async findContentBlockById(contentsFolderPath, id2) {
    try {
      const folder = this.fileManager.getVault().getAbstractFileByPath(contentsFolderPath);
      if (!(folder instanceof import_obsidian9.TFolder)) {
        return null;
      }
      const stack = [folder];
      while (stack.length) {
        const currentFolder = stack.pop();
        for (const child of currentFolder.children) {
          if (child instanceof import_obsidian9.TFolder) {
            stack.push(child);
          } else if (child instanceof import_obsidian9.TFile && child.extension === "md") {
            const contentBlock = await this.fileManager.readContentBlockFromFile(child.path);
            if (contentBlock && contentBlock.id === id2) {
              return contentBlock;
            }
          }
        }
      }
    } catch (err) {
      console.error("Error searching for prose block by ID:", err);
    }
    return null;
  }
  // Get the correct file path for a content block (always uses type subfolders)
  getContentBlockFilePath(storyFolderPath, contentBlock) {
    const fileName = this.fileManager.generateContentBlockFileName(contentBlock);
    const typeFolderPath = this.fileManager.getContentBlockFolderPath(storyFolderPath, contentBlock.type || "text");
    return `${typeFolderPath}/${fileName}`;
  }
  // Get content block file path from contents folder path (03-contents)
  async getContentBlockFilePathFromContents(contentsFolderPath, contentBlock) {
    const typeFolder = this.fileManager.getContentTypeFolder(contentBlock.type || "text");
    const typeFolderPath = `${contentsFolderPath}/${typeFolder}`;
    await this.fileManager.ensureFolderExists(typeFolderPath);
    const fileName = this.fileManager.generateContentBlockFileName(contentBlock);
    return `${typeFolderPath}/${fileName}`;
  }
  // Resolve conflict using modal or auto-resolve based on mode
  async resolveConflict(localContentBlock, remoteContentBlock) {
    if (this.settings.mode === "local") {
      return { resolution: "local" };
    }
    return new Promise((resolve) => {
      const modal = new ConflictModal(
        this.app,
        localContentBlock,
        remoteContentBlock,
        async (result) => {
          resolve(result);
        }
      );
      modal.open();
    });
  }
  // Update the Chapter section in chapter file (hierarchical structure)
  async updateChapterProseSectionHierarchical(originalContent, updatedSections, file, frontmatter) {
    const frontmatterMatch = originalContent.match(/^---\n([\s\S]*?)\n---/);
    const frontmatterText = frontmatterMatch ? frontmatterMatch[0] : "";
    const bodyStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
    const bodyContent = originalContent.substring(bodyStart).trim();
    const chapterNumber = frontmatter.number || "1";
    const chapterTitle = frontmatter.title || "Untitled";
    const chapterHeaderPattern = `##\\s+Chapter\\s+${chapterNumber}:\\s+[^\\n]+`;
    const chapterSectionMatch = bodyContent.match(new RegExp(`([\\s\\S]*?${chapterHeaderPattern}\\s*\\n+)([\\s\\S]*?)(?=\\n##\\s+Chapter\\s+\\d+:|$)`, "i"));
    if (!chapterSectionMatch) {
      const newChapterSection = `

## Chapter ${chapterNumber}: ${chapterTitle}

${updatedSections.join("\n\n")}

`;
      const updatedContent2 = `${frontmatterText}
${bodyContent}${newChapterSection}`;
      await this.fileManager.getVault().modify(file, updatedContent2);
      return;
    }
    const beforeChapter = chapterSectionMatch[1];
    const afterChapter = bodyContent.substring(chapterSectionMatch.index + chapterSectionMatch[0].length);
    const newChapterContent = updatedSections.join("\n\n");
    const updatedBody = `${beforeChapter}${newChapterContent}

${afterChapter}`;
    const updatedContent = `${frontmatterText}
${updatedBody}`;
    await this.fileManager.getVault().modify(file, updatedContent);
  }
  // Update the Prose section in chapter file
  async updateChapterProseSection(originalContent, updatedParagraphs, file) {
    const frontmatterMatch = originalContent.match(/^---\n([\s\S]*?)\n---/);
    const frontmatter = frontmatterMatch ? frontmatterMatch[0] : "";
    const bodyStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
    const bodyContent = originalContent.substring(bodyStart).trim();
    const proseSectionMatch = bodyContent.match(/([\s\S]*?##\s+Prose\s*\n\n)([\s\S]*?)(?=\n##|\n*$)/);
    if (!proseSectionMatch) {
      const newProseSection = `

## Prose

${updatedParagraphs.join("\n\n")}

`;
      const updatedContent2 = `${frontmatter}
${bodyContent}${newProseSection}`;
      await this.fileManager.getVault().modify(file, updatedContent2);
      return;
    }
    const beforeProse = proseSectionMatch[1];
    const newProseContent = updatedParagraphs.join("\n\n");
    const afterProse = bodyContent.substring(proseSectionMatch.index + proseSectionMatch[0].length);
    const updatedBody = `${beforeProse}${newProseContent}

${afterProse}`;
    const updatedContent = `${frontmatter}
${updatedBody}`;
    await this.fileManager.getVault().modify(file, updatedContent);
  }
  async writeChapterBundle(data) {
    const folderPath = this.fileManager.getStoryFolderPath(data.story.title);
    await this.ensureStoryFolders(folderPath);
    for (const contentBlock of data.contentBlocks) {
      await this.writeContentBlockToFolder(folderPath, data.story.title, contentBlock);
    }
    const chaptersFolderPath = `${folderPath}/00-chapters`;
    const chapterFileName = `Chapter-${data.chapter.number}.md`;
    const chapterFilePath = `${chaptersFolderPath}/${chapterFileName}`;
    await this.fileManager.writeChapterFile(
      { chapter: data.chapter, scenes: data.scenes },
      chapterFilePath,
      data.story.title,
      data.contentBlocks,
      data.contentBlockRefs,
      []
    );
    const { byScene, byBeat } = this.buildContentBlockAssociationMaps(
      data.contentBlocks,
      data.contentBlockRefs
    );
    await this.syncScenesToFilesystem(
      data.scenes,
      folderPath,
      data.story.title,
      byScene,
      byBeat
    );
  }
  async writeSceneBundle(data) {
    var _a, _b;
    await this.fileManager.ensureFolderExists(`${data.folderPath}/01-scenes`);
    await this.fileManager.ensureFolderExists(`${data.folderPath}/02-beats`);
    const sceneContentBlocks = (_a = data.sceneContentBlocks) != null ? _a : data.skipRemoteContentFetch ? [] : await this.apiClient.getContentBlocksByScene(data.scene.id);
    const sceneFileName = this.fileManager.generateSceneFileName(data.scene);
    const sceneFilePath = `${data.folderPath}/01-scenes/${sceneFileName}`;
    await this.fileManager.writeSceneFile(
      { scene: data.scene, beats: data.beats },
      sceneFilePath,
      data.storyTitle,
      sceneContentBlocks,
      []
    );
    for (const beat of data.beats) {
      const provided = (_b = data.beatContentBlockMap) == null ? void 0 : _b.get(beat.id);
      const beatContentBlocks = provided != null ? provided : data.skipRemoteContentFetch ? [] : await this.apiClient.getContentBlocksByBeat(beat.id);
      const beatFileName = this.fileManager.generateBeatFileName(beat);
      const beatFilePath = `${data.folderPath}/02-beats/${beatFileName}`;
      await this.fileManager.writeBeatFile(
        beat,
        beatFilePath,
        data.storyTitle,
        beatContentBlocks
      );
    }
  }
  buildContentBlockAssociationMaps(contentBlocks, contentBlockRefs) {
    const byScene = /* @__PURE__ */ new Map();
    const byBeat = /* @__PURE__ */ new Map();
    const blockById = new Map(contentBlocks.map((block) => [block.id, block]));
    for (const ref of contentBlockRefs) {
      const block = blockById.get(ref.content_block_id);
      if (!block) {
        continue;
      }
      if (ref.entity_type === "scene") {
        if (!byScene.has(ref.entity_id)) {
          byScene.set(ref.entity_id, []);
        }
        byScene.get(ref.entity_id).push(block);
      } else if (ref.entity_type === "beat") {
        if (!byBeat.has(ref.entity_id)) {
          byBeat.set(ref.entity_id, []);
        }
        byBeat.get(ref.entity_id).push(block);
      }
    }
    return { byScene, byBeat };
  }
  async pullSingleEntity(storyId, target) {
    switch (target.type) {
      case "chapter":
        await this.pullChapterEntity(storyId, target.id);
        break;
      case "scene":
        await this.pullSceneEntity(storyId, target.id);
        break;
      case "content":
        await this.pullContentBlockEntity(storyId, target.id);
        break;
      default:
        throw new Error(`Unsupported entity type: ${target.type}`);
    }
  }
  async pullChapterEntity(storyId, chapterId) {
    const story = await this.apiClient.getStory(storyId);
    const chapter = await this.apiClient.getChapter(chapterId);
    if (chapter.story_id !== storyId) {
      throw new Error("Chapter does not belong to the selected story");
    }
    const scenes = await this.apiClient.getScenes(chapterId);
    const scenesWithBeats = await Promise.all(
      scenes.map(async (scene) => {
        const beats = await this.apiClient.getBeats(scene.id);
        return { scene, beats };
      })
    );
    const contentBlocks = await this.apiClient.getContentBlocks(chapterId);
    const contentBlockRefs = [];
    for (const contentBlock of contentBlocks) {
      const refs = await this.apiClient.getContentAnchors(contentBlock.id);
      contentBlockRefs.push(...refs);
    }
    await this.writeChapterBundle({
      story,
      chapter,
      scenes: scenesWithBeats,
      contentBlocks,
      contentBlockRefs
    });
    new import_obsidian9.Notice(`Chapter "${chapter.title}" synced successfully`);
  }
  async pullSceneEntity(storyId, sceneId) {
    const scene = await this.apiClient.getScene(sceneId);
    if (scene.story_id !== storyId) {
      throw new Error("Scene does not belong to the selected story");
    }
    const story = await this.apiClient.getStory(storyId);
    const folderPath = this.fileManager.getStoryFolderPath(story.title);
    await this.ensureStoryFolders(folderPath);
    const beats = await this.apiClient.getBeats(scene.id);
    const sceneContentBlocks = await this.apiClient.getContentBlocksByScene(scene.id);
    const beatContentBlockMap = /* @__PURE__ */ new Map();
    for (const beat of beats) {
      const beatContentBlocks = await this.apiClient.getContentBlocksByBeat(beat.id);
      beatContentBlockMap.set(beat.id, beatContentBlocks);
    }
    await this.writeSceneBundle({
      storyTitle: story.title,
      folderPath,
      scene,
      beats,
      sceneContentBlocks,
      beatContentBlockMap
    });
    await this.syncSceneContentBlocks(scene, beats, folderPath, story.title);
    new import_obsidian9.Notice(`Scene "${scene.goal}" synced successfully`);
  }
  async pullContentBlockEntity(storyId, contentBlockId) {
    const story = await this.apiClient.getStory(storyId);
    const contentBlock = await this.apiClient.getContentBlock(contentBlockId);
    if (contentBlock.chapter_id) {
      const chapter = await this.apiClient.getChapter(contentBlock.chapter_id);
      if (chapter.story_id !== storyId) {
        throw new Error("Content block does not belong to the selected story");
      }
    }
    const folderPath = this.fileManager.getStoryFolderPath(story.title);
    await this.ensureContentFolders(folderPath);
    await this.writeContentBlockToFolder(folderPath, story.title, contentBlock);
    new import_obsidian9.Notice("Content block synced successfully");
  }
  async pushSingleEntity(folderPath, target, storyId, storyTitle) {
    let entityLabel;
    switch (target.type) {
      case "chapter":
        entityLabel = await this.pushChapterEntity(folderPath, target.id);
        break;
      case "scene":
        entityLabel = await this.pushSceneEntity(folderPath, storyId, target.id);
        break;
      case "content":
        entityLabel = await this.pushContentBlockEntity(folderPath, target.id, storyTitle);
        break;
      default:
        throw new Error(`Unsupported entity type: ${target.type}`);
    }
    new import_obsidian9.Notice(`${entityLabel} pushed successfully`);
    try {
      await this.pullSingleEntity(storyId, target);
    } catch (pullErr) {
      const pullErrorMessage = pullErr instanceof Error ? pullErr.message : "Failed to sync entity after push";
      new import_obsidian9.Notice(`Warning: ${pullErrorMessage}`, 5e3);
    }
  }
  async pushChapterEntity(folderPath, chapterId) {
    var _a, _b;
    const chapterFile = await this.findChapterFileById(folderPath, chapterId);
    if (!chapterFile) {
      throw new Error("Chapter file not found locally");
    }
    await this.pushChapterContentBlocks(chapterFile.path, folderPath);
    const label = ((_a = chapterFile.frontmatter) == null ? void 0 : _a.title) || (((_b = chapterFile.frontmatter) == null ? void 0 : _b.number) ? `Chapter ${chapterFile.frontmatter.number}` : "Chapter");
    return label;
  }
  async pushSceneEntity(folderPath, storyId, sceneId) {
    var _a;
    const sceneFile = await this.findSceneFileById(folderPath, sceneId);
    if (!sceneFile) {
      throw new Error("Scene file not found locally");
    }
    await this.pushSceneBeats(sceneFile.path, storyId);
    await this.pushSceneContentBlocks(sceneFile.path, folderPath);
    const label = ((_a = sceneFile.frontmatter) == null ? void 0 : _a.goal) ? `Scene: ${sceneFile.frontmatter.goal}` : "Scene";
    return label;
  }
  async pushContentBlockEntity(folderPath, contentBlockId, storyTitle) {
    var _a;
    const contentsFolderPath = `${folderPath}/03-contents`;
    await this.fileManager.ensureFolderExists(contentsFolderPath);
    const localContentBlock = await this.findContentBlockById(contentsFolderPath, contentBlockId);
    if (!localContentBlock) {
      throw new Error("Content block file not found locally");
    }
    const updatedBlock = await this.apiClient.updateContentBlock(contentBlockId, {
      content: localContentBlock.content,
      metadata: localContentBlock.metadata,
      type: localContentBlock.type,
      kind: localContentBlock.kind,
      order_num: (_a = localContentBlock.order_num) != null ? _a : void 0
    });
    const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, updatedBlock);
    await this.fileManager.writeContentBlockFile(updatedBlock, filePath, storyTitle);
    return "Content block";
  }
  async ensureStoryFolders(folderPath) {
    await this.fileManager.ensureFolderExists(folderPath);
    await this.ensureContentFolders(folderPath);
    await this.fileManager.ensureFolderExists(`${folderPath}/00-chapters`);
    await this.fileManager.ensureFolderExists(`${folderPath}/01-scenes`);
    await this.fileManager.ensureFolderExists(`${folderPath}/02-beats`);
  }
  async ensureContentFolders(folderPath) {
    const contentsFolderPath = `${folderPath}/03-contents`;
    await this.fileManager.ensureFolderExists(contentsFolderPath);
    for (const typeFolder of ["00-texts", "01-images", "02-videos", "03-audios", "04-embeds", "05-links"]) {
      await this.fileManager.ensureFolderExists(`${contentsFolderPath}/${typeFolder}`);
    }
  }
  async writeContentBlockToFolder(storyFolderPath, storyTitle, contentBlock) {
    const typeFolderPath = this.fileManager.getContentBlockFolderPath(
      storyFolderPath,
      contentBlock.type || "text"
    );
    await this.fileManager.ensureFolderExists(typeFolderPath);
    const contentBlockFileName = this.fileManager.generateContentBlockFileName(contentBlock);
    const contentBlockFilePath = `${typeFolderPath}/${contentBlockFileName}`;
    await this.fileManager.writeContentBlockFile(contentBlock, contentBlockFilePath, storyTitle);
  }
  async syncScenesToFilesystem(scenesWithBeats, folderPath, storyTitle, contentBlocksByScene, contentBlocksByBeat) {
    const skipRemoteFetch = Boolean(contentBlocksByScene || contentBlocksByBeat);
    for (const { scene, beats } of scenesWithBeats) {
      await this.writeSceneBundle({
        storyTitle,
        folderPath,
        scene,
        beats,
        sceneContentBlocks: contentBlocksByScene == null ? void 0 : contentBlocksByScene.get(scene.id),
        beatContentBlockMap: contentBlocksByBeat,
        skipRemoteContentFetch: skipRemoteFetch
      });
    }
  }
  async syncSceneContentBlocks(scene, beats, folderPath, storyTitle) {
    if (!scene.chapter_id) {
      return;
    }
    const contentBlocks = await this.apiClient.getContentBlocks(scene.chapter_id);
    for (const contentBlock of contentBlocks) {
      const refs = await this.apiClient.getContentAnchors(contentBlock.id);
      const hasSceneRef = refs.some(
        (ref) => ref.entity_type === "scene" && ref.entity_id === scene.id
      );
      const beatIds = beats.map((beat) => beat.id);
      const hasBeatRef = refs.some(
        (ref) => ref.entity_type === "beat" && beatIds.includes(ref.entity_id)
      );
      if (hasSceneRef || hasBeatRef) {
        await this.writeContentBlockToFolder(folderPath, storyTitle, contentBlock);
      }
    }
  }
  async findChapterFileById(folderPath, chapterId) {
    const chapterFiles = await this.fileManager.listChapterFiles(folderPath);
    for (const chapterFilePath of chapterFiles) {
      const file = this.fileManager.getVault().getAbstractFileByPath(chapterFilePath);
      if (!(file instanceof import_obsidian9.TFile)) {
        continue;
      }
      const content = await this.fileManager.getVault().read(file);
      const frontmatter = this.fileManager.parseFrontmatter(content);
      if (frontmatter.id === chapterId) {
        return { path: chapterFilePath, frontmatter };
      }
    }
    return null;
  }
  async findSceneFileById(folderPath, sceneId) {
    const sceneFiles = await this.fileManager.listStorySceneFiles(folderPath);
    for (const sceneFilePath of sceneFiles) {
      const file = this.fileManager.getVault().getAbstractFileByPath(sceneFilePath);
      if (!(file instanceof import_obsidian9.TFile)) {
        continue;
      }
      const content = await this.fileManager.getVault().read(file);
      const frontmatter = this.fileManager.parseFrontmatter(content);
      if (frontmatter.id === sceneId) {
        return { path: sceneFilePath, frontmatter };
      }
    }
    return null;
  }
};

// src/sync/autoSyncManager.ts
var import_obsidian10 = require("obsidian");
var IDLE_DELAY_MS = 6e4;
var AutoSyncManager = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.idleTimeoutId = null;
    this.activeFile = null;
    this.lastEditTs = 0;
    this.dirtyFiles = /* @__PURE__ */ new Set();
    this.pendingSyncs = /* @__PURE__ */ new Set();
    this.handleActiveLeafChange = (leaf) => {
      const previousFile = this.activeFile;
      const newFile = this.plugin.app.workspace.getActiveFile();
      if (previousFile && (!newFile || previousFile.path !== newFile.path) && this.dirtyFiles.has(previousFile.path)) {
        void this.triggerSyncForFile(previousFile, "blur");
      }
      this.activeFile = newFile;
      this.lastEditTs = Date.now();
      this.resetIdleTimer();
    };
    this.activeFile = this.plugin.app.workspace.getActiveFile();
    this.lastEditTs = Date.now();
    this.registerEvents();
    this.resetIdleTimer();
  }
  dispose() {
    if (this.leafChangeRef) {
      this.plugin.app.workspace.offref(this.leafChangeRef);
      this.leafChangeRef = void 0;
    }
    if (this.editorChangeRef) {
      this.plugin.app.workspace.offref(this.editorChangeRef);
      this.editorChangeRef = void 0;
    }
    if (this.idleTimeoutId !== null) {
      window.clearTimeout(this.idleTimeoutId);
      this.idleTimeoutId = null;
    }
    this.dirtyFiles.clear();
    this.pendingSyncs.clear();
  }
  registerEvents() {
    this.leafChangeRef = this.plugin.app.workspace.on(
      "active-leaf-change",
      this.handleActiveLeafChange
    );
    this.plugin.registerEvent(this.leafChangeRef);
    this.editorChangeRef = this.plugin.app.workspace.on("editor-change", () => {
      const file = this.plugin.app.workspace.getActiveFile();
      if (!file) {
        return;
      }
      this.activeFile = file;
      this.lastEditTs = Date.now();
      this.dirtyFiles.add(file.path);
      this.resetIdleTimer();
    });
    this.plugin.registerEvent(this.editorChangeRef);
  }
  resetIdleTimer() {
    if (this.idleTimeoutId !== null) {
      window.clearTimeout(this.idleTimeoutId);
    }
    if (!this.activeFile) {
      this.idleTimeoutId = null;
      return;
    }
    this.idleTimeoutId = window.setTimeout(() => {
      const file = this.activeFile;
      if (!file) {
        return;
      }
      const idleDuration = Date.now() - this.lastEditTs;
      if (idleDuration >= IDLE_DELAY_MS && this.dirtyFiles.has(file.path)) {
        void this.triggerSyncForFile(file, "idle");
      } else {
        this.resetIdleTimer();
      }
    }, IDLE_DELAY_MS);
  }
  async triggerSyncForFile(file, reason) {
    const path = file.path;
    if (this.pendingSyncs.has(path)) {
      return;
    }
    this.pendingSyncs.add(path);
    try {
      const target = await this.resolveTarget(file);
      if (!target) {
        return;
      }
      if (target.pushWholeStory) {
        await this.plugin.syncService.pushStory(target.folderPath);
      } else if (target.syncTarget) {
        await this.plugin.syncService.pushStory(target.folderPath, target.syncTarget);
      }
      this.dirtyFiles.delete(path);
      if (reason === "idle") {
        this.lastEditTs = Date.now();
        this.resetIdleTimer();
      }
    } catch (err) {
      console.error(`Auto push failed for ${file.path}`, err);
    } finally {
      this.pendingSyncs.delete(path);
    }
  }
  async resolveTarget(file) {
    const folderPath = this.findStoryFolderPath(file);
    if (!folderPath) {
      return null;
    }
    if (file.name === "story.md") {
      return { folderPath, pushWholeStory: true };
    }
    const content = await this.plugin.app.vault.read(file);
    const frontmatter = this.plugin.fileManager.parseFrontmatter(content);
    const entityId = frontmatter == null ? void 0 : frontmatter.id;
    if (!entityId) {
      return null;
    }
    const sceneId = frontmatter.scene_id;
    const chapterId = frontmatter.chapter_id;
    const isContentFile = file.path.includes("/03-contents/");
    const isChapterFile = file.path.includes("/00-chapters/");
    const isSceneFile = file.path.includes("/01-scenes/");
    if (frontmatter.story_id && frontmatter.number && isChapterFile) {
      return {
        folderPath,
        pushWholeStory: false,
        syncTarget: { type: "chapter", id: entityId }
      };
    }
    if (frontmatter.story_id && (isSceneFile || chapterId)) {
      return {
        folderPath,
        pushWholeStory: false,
        syncTarget: { type: "scene", id: entityId }
      };
    }
    if (sceneId) {
      return {
        folderPath,
        pushWholeStory: false,
        syncTarget: { type: "scene", id: sceneId }
      };
    }
    if (isContentFile) {
      return {
        folderPath,
        pushWholeStory: false,
        syncTarget: { type: "content", id: entityId }
      };
    }
    return null;
  }
  findStoryFolderPath(file) {
    let current = file.parent;
    while (current) {
      const storyFilePath = `${current.path}/story.md`;
      const maybeStoryFile = this.plugin.app.vault.getAbstractFileByPath(storyFilePath);
      if (maybeStoryFile instanceof import_obsidian10.TFile) {
        return current.path;
      }
      const parent = current.parent;
      if (parent instanceof import_obsidian10.TFolder) {
        current = parent;
      } else {
        current = null;
      }
    }
    return null;
  }
};

// src/views/StoryListView.ts
var import_obsidian17 = require("obsidian");

// src/views/modals/ChapterModal.ts
var import_obsidian11 = require("obsidian");
var ChapterModal = class extends import_obsidian11.Modal {
  constructor(app, onSubmit, existingChapters = [], chapter) {
    super(app);
    this.chapter = {
      title: "",
      status: "draft"
    };
    this.isEdit = false;
    this.existingChapters = [];
    this.onSubmit = onSubmit;
    this.existingChapters = existingChapters;
    if (chapter) {
      this.isEdit = true;
      this.chapter = {
        number: chapter.number,
        title: chapter.title,
        status: chapter.status
      };
    }
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", {
      text: this.isEdit ? "Edit Chapter" : "Create Chapter"
    });
    if (this.isEdit) {
      new import_obsidian11.Setting(contentEl).setName("Chapter Number").setDesc("The chapter number").addText(
        (text) => {
          var _a;
          return text.setPlaceholder("1").setValue(((_a = this.chapter.number) == null ? void 0 : _a.toString()) || "1").onChange((value) => {
            const num = parseInt(value);
            if (!isNaN(num) && num > 0) {
              this.chapter.number = num;
            }
          });
        }
      );
    }
    new import_obsidian11.Setting(contentEl).setName("Title").setDesc("Chapter title").addText(
      (text) => text.setPlaceholder("Chapter Title").setValue(this.chapter.title || "").onChange((value) => {
        this.chapter.title = value;
      }).inputEl.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          this.submit();
        }
      })
    );
    new import_obsidian11.Setting(contentEl).setName("Status").setDesc("Chapter status").addDropdown(
      (dropdown) => dropdown.addOption("draft", "Draft").addOption("in_progress", "In Progress").addOption("completed", "Completed").setValue(this.chapter.status || "draft").onChange((value) => {
        this.chapter.status = value;
      })
    );
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const submitButton = buttonContainer.createEl("button", {
      text: this.isEdit ? "Update" : "Create",
      cls: "mod-cta"
    });
    submitButton.addEventListener("click", () => this.submit());
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.addEventListener("click", () => this.close());
    const titleInput = contentEl.querySelector("input[placeholder='Chapter Title']");
    if (titleInput) {
      titleInput.focus();
    }
  }
  async submit() {
    var _a;
    if (!((_a = this.chapter.title) == null ? void 0 : _a.trim())) {
      new import_obsidian11.Notice("Please enter a chapter title", 3e3);
      return;
    }
    if (!this.isEdit) {
      const maxNumber = this.existingChapters.length > 0 ? Math.max(...this.existingChapters.map((c) => c.number)) : 0;
      this.chapter.number = maxNumber + 1;
    } else {
      if (!this.chapter.number || this.chapter.number < 1) {
        new import_obsidian11.Notice("Chapter number must be greater than 0", 3e3);
        return;
      }
    }
    try {
      await this.onSubmit(this.chapter);
      this.close();
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to save chapter";
      new import_obsidian11.Notice(`Error: ${errorMessage}`, 5e3);
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/modals/SceneModal.ts
var import_obsidian12 = require("obsidian");
var SceneModal = class extends import_obsidian12.Modal {
  constructor(app, storyId, chapters, onSubmit, existingScenes = [], scene, defaultChapterId) {
    super(app);
    this.scene = {
      time_ref: "",
      goal: ""
    };
    this.isEdit = false;
    this.chapters = [];
    this.existingScenes = [];
    this.storyId = storyId;
    this.chapters = chapters;
    this.existingScenes = existingScenes;
    this.defaultChapterId = defaultChapterId;
    this.onSubmit = onSubmit;
    if (scene) {
      this.isEdit = true;
      this.scene = {
        story_id: scene.story_id,
        chapter_id: scene.chapter_id || null,
        order_num: scene.order_num,
        time_ref: scene.time_ref,
        goal: scene.goal,
        pov_character_id: scene.pov_character_id,
        location_id: scene.location_id
      };
    } else {
      this.scene.story_id = storyId;
      if (defaultChapterId !== void 0) {
        this.scene.chapter_id = defaultChapterId;
      }
    }
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", {
      text: this.isEdit ? "Edit Scene" : "Create Scene"
    });
    new import_obsidian12.Setting(contentEl).setName("Chapter").setDesc("Select the chapter for this scene (optional)").addDropdown((dropdown) => {
      dropdown.addOption("", "No Chapter");
      for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
        dropdown.addOption(
          chapter.id,
          `Chapter ${chapter.number}: ${chapter.title}`
        );
      }
      dropdown.setValue(this.scene.chapter_id || "");
      dropdown.onChange((value) => {
        this.scene.chapter_id = value || null;
      });
    });
    if (this.isEdit) {
      new import_obsidian12.Setting(contentEl).setName("Order Number").setDesc("Scene order within chapter").addText(
        (text) => {
          var _a;
          return text.setPlaceholder("1").setValue(((_a = this.scene.order_num) == null ? void 0 : _a.toString()) || "1").onChange((value) => {
            const num = parseInt(value);
            if (!isNaN(num) && num > 0) {
              this.scene.order_num = num;
            }
          });
        }
      );
    }
    new import_obsidian12.Setting(contentEl).setName("Goal").setDesc("Scene goal or description").addTextArea(
      (text) => text.setPlaceholder("What happens in this scene?").setValue(this.scene.goal || "").onChange((value) => {
        this.scene.goal = value;
      })
    );
    new import_obsidian12.Setting(contentEl).setName("Time Reference").setDesc("When does this scene take place?").addText(
      (text) => text.setPlaceholder("Morning, Evening, etc.").setValue(this.scene.time_ref || "").onChange((value) => {
        this.scene.time_ref = value;
      })
    );
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const submitButton = buttonContainer.createEl("button", {
      text: this.isEdit ? "Update" : "Create",
      cls: "mod-cta"
    });
    submitButton.addEventListener("click", () => this.submit());
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.addEventListener("click", () => this.close());
    const goalInput = contentEl.querySelector("textarea");
    if (goalInput) {
      goalInput.focus();
    }
  }
  async submit() {
    if (!this.isEdit) {
      const chapterId = this.scene.chapter_id || null;
      const scenesInChapter = this.existingScenes.filter(
        (s) => (s.chapter_id || null) === chapterId
      );
      const maxOrderNum = scenesInChapter.length > 0 ? Math.max(...scenesInChapter.map((s) => s.order_num)) : 0;
      this.scene.order_num = maxOrderNum + 1;
    } else {
      if (!this.scene.order_num || this.scene.order_num < 1) {
        new import_obsidian12.Notice("Order number must be greater than 0", 3e3);
        return;
      }
    }
    try {
      await this.onSubmit(this.scene);
      this.close();
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to save scene";
      new import_obsidian12.Notice(`Error: ${errorMessage}`, 5e3);
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/modals/BeatModal.ts
var import_obsidian13 = require("obsidian");
var BeatModal = class extends import_obsidian13.Modal {
  constructor(app, storyId, scenes, onSubmit, existingBeats = [], beat, chapters = [], defaultSceneId) {
    super(app);
    this.beat = {
      type: "setup",
      intent: "",
      outcome: ""
    };
    this.isEdit = false;
    this.scenes = [];
    this.chapters = [];
    this.existingBeats = [];
    this.storyId = storyId;
    this.scenes = scenes;
    this.chapters = chapters;
    this.existingBeats = existingBeats;
    this.defaultSceneId = defaultSceneId;
    this.onSubmit = onSubmit;
    if (beat) {
      this.isEdit = true;
      this.beat = {
        scene_id: beat.scene_id,
        order_num: beat.order_num,
        type: beat.type,
        intent: beat.intent,
        outcome: beat.outcome
      };
    } else if (defaultSceneId) {
      this.beat.scene_id = defaultSceneId;
    }
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", {
      text: this.isEdit ? "Edit Beat" : "Create Beat"
    });
    new import_obsidian13.Setting(contentEl).setName("Scene").setDesc("Select the scene for this beat").addDropdown((dropdown) => {
      const scenesByChapter = /* @__PURE__ */ new Map();
      for (const scene of this.scenes) {
        const chapterId = scene.chapter_id || null;
        if (!scenesByChapter.has(chapterId)) {
          scenesByChapter.set(chapterId, []);
        }
        scenesByChapter.get(chapterId).push(scene);
      }
      const getChapterLabel = (chapterId) => {
        if (!chapterId)
          return "No Chapter";
        const chapter = this.chapters.find((c) => c.id === chapterId);
        return chapter ? `Chapter ${chapter.number}: ${chapter.title}` : "No Chapter";
      };
      for (const [chapterId, chapterScenes] of scenesByChapter.entries()) {
        const label = getChapterLabel(chapterId);
        for (const scene of chapterScenes.sort((a, b) => a.order_num - b.order_num)) {
          dropdown.addOption(
            scene.id,
            `${label} > Scene ${scene.order_num}: ${scene.goal || "Untitled"}`
          );
        }
      }
      dropdown.setValue(this.beat.scene_id || "");
      dropdown.onChange((value) => {
        this.beat.scene_id = value;
      });
    });
    if (this.isEdit) {
      new import_obsidian13.Setting(contentEl).setName("Order Number").setDesc("Beat order within scene").addText(
        (text) => {
          var _a;
          return text.setPlaceholder("1").setValue(((_a = this.beat.order_num) == null ? void 0 : _a.toString()) || "1").onChange((value) => {
            const num = parseInt(value);
            if (!isNaN(num) && num > 0) {
              this.beat.order_num = num;
            }
          });
        }
      );
    }
    new import_obsidian13.Setting(contentEl).setName("Type").setDesc("Beat type").addDropdown(
      (dropdown) => dropdown.addOption("setup", "Setup").addOption("turn", "Turn").addOption("reveal", "Reveal").addOption("conflict", "Conflict").addOption("climax", "Climax").addOption("resolution", "Resolution").addOption("hook", "Hook").addOption("transition", "Transition").setValue(this.beat.type || "setup").onChange((value) => {
        this.beat.type = value;
      })
    );
    new import_obsidian13.Setting(contentEl).setName("Intent").setDesc("What is the intent of this beat?").addTextArea(
      (text) => text.setPlaceholder("What does the character want?").setValue(this.beat.intent || "").onChange((value) => {
        this.beat.intent = value;
      })
    );
    new import_obsidian13.Setting(contentEl).setName("Outcome").setDesc("What is the outcome of this beat?").addTextArea(
      (text) => text.setPlaceholder("What happens as a result?").setValue(this.beat.outcome || "").onChange((value) => {
        this.beat.outcome = value;
      })
    );
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const submitButton = buttonContainer.createEl("button", {
      text: this.isEdit ? "Update" : "Create",
      cls: "mod-cta"
    });
    submitButton.addEventListener("click", () => this.submit());
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.addEventListener("click", () => this.close());
    const intentInput = contentEl.querySelector("textarea");
    if (intentInput) {
      intentInput.focus();
    }
  }
  async submit() {
    if (!this.beat.scene_id) {
      new import_obsidian13.Notice("Please select a scene", 3e3);
      return;
    }
    if (!this.beat.type) {
      new import_obsidian13.Notice("Please select a beat type", 3e3);
      return;
    }
    if (!this.isEdit) {
      const beatsInScene = this.existingBeats.filter((b) => b.scene_id === this.beat.scene_id);
      const maxOrderNum = beatsInScene.length > 0 ? Math.max(...beatsInScene.map((b) => b.order_num)) : 0;
      this.beat.order_num = maxOrderNum + 1;
    } else {
      if (!this.beat.order_num || this.beat.order_num < 1) {
        new import_obsidian13.Notice("Order number must be greater than 0", 3e3);
        return;
      }
    }
    try {
      await this.onSubmit(this.beat);
      this.close();
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to save beat";
      new import_obsidian13.Notice(`Error: ${errorMessage}`, 5e3);
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/modals/ContentBlockModal.ts
var import_obsidian14 = require("obsidian");

// src/api/unsplash.ts
var UnsplashClient = class {
  constructor(accessKey, secretKey) {
    this.apiUrl = "https://api.unsplash.com";
    this.accessKey = accessKey || "YOUR_UNSPLASH_ACCESS_KEY";
    this.secretKey = secretKey || "";
  }
  async searchImages(query, page = 1, perPage = 20) {
    const url = `${this.apiUrl}/search/photos?query=${encodeURIComponent(query)}&page=${page}&per_page=${perPage}`;
    const headers = {
      "Accept-Version": "v1"
    };
    if (!this.accessKey || this.accessKey === "YOUR_UNSPLASH_ACCESS_KEY") {
      throw new Error("Unsplash access key is required. Please configure it in plugin settings.");
    }
    headers["Authorization"] = `Client-ID ${this.accessKey}`;
    const response = await fetch(url, { headers });
    if (!response.ok) {
      const errorText = await response.text();
      throw new Error(`Unsplash API error: ${response.status} ${response.statusText}. ${errorText}`);
    }
    return response.json();
  }
  getImageUrl(photo, size = "regular") {
    return photo.urls[size];
  }
  getAttributionUrl(photo) {
    return photo.links.html;
  }
  getAttributionText(photo) {
    return `Photo by ${photo.user.name} on Unsplash`;
  }
};

// src/views/modals/ContentBlockModal.ts
var ContentBlockModal = class extends import_obsidian14.Modal {
  constructor(app, onSubmit, contentBlock, plugin) {
    var _a, _b, _c, _d;
    super(app);
    this.contentBlock = {
      type: "text",
      kind: "final",
      content: "",
      metadata: {}
    };
    this.isEdit = false;
    this.unsplashResults = [];
    this.unsplashSearchQuery = "";
    this.unsplashSearching = false;
    this.selectedImageUrl = "";
    this.currentImageSourceTab = "internet link";
    this.onSubmit = onSubmit;
    this.plugin = plugin;
    const unsplashAccessKey = ((_b = (_a = this.plugin) == null ? void 0 : _a.settings) == null ? void 0 : _b.unsplashAccessKey) || "";
    const unsplashSecretKey = ((_d = (_c = this.plugin) == null ? void 0 : _c.settings) == null ? void 0 : _d.unsplashSecretKey) || "";
    this.unsplashClient = new UnsplashClient(unsplashAccessKey, unsplashSecretKey);
    if (contentBlock) {
      this.isEdit = true;
      this.contentBlock = {
        type: contentBlock.type,
        kind: contentBlock.kind || "final",
        content: contentBlock.content,
        metadata: contentBlock.metadata || {}
      };
      if (contentBlock.type === "image" && contentBlock.content) {
        this.selectedImageUrl = contentBlock.content;
      }
    }
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", {
      text: this.isEdit ? "Edit Content Block" : "Create Content Block"
    });
    if (this.isEdit && !this.contentBlock.type) {
      new import_obsidian14.Setting(contentEl).setName("Type").setDesc("Select the content type").addDropdown(
        (dropdown) => dropdown.addOption("text", "Text").addOption("image", "Image").setValue(this.contentBlock.type || "text").onChange((value) => {
          this.contentBlock.type = value;
          this.renderContentFields();
        })
      );
    }
    this.renderContentFields();
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const submitButton = buttonContainer.createEl("button", {
      text: this.isEdit ? "Update" : "Create",
      cls: "mod-cta"
    });
    submitButton.addEventListener("click", () => this.submit());
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.addEventListener("click", () => this.close());
  }
  renderContentFields() {
    var _a, _b, _c, _d, _e, _f, _g;
    const { contentEl } = this;
    const existingFields = contentEl.querySelectorAll(".content-block-field");
    existingFields.forEach((el) => el.remove());
    if (this.contentBlock.type === "text") {
      const textField = contentEl.createDiv({ cls: "content-block-field" });
      new import_obsidian14.Setting(textField).setName("Content").setDesc("Enter the text content").addTextArea(
        (text) => text.setPlaceholder("Enter text...").setValue(this.contentBlock.content || "").onChange((value) => {
          this.contentBlock.content = value;
          if (!this.contentBlock.metadata) {
            this.contentBlock.metadata = {};
          }
          this.contentBlock.metadata.word_count = value.trim().split(/\s+/).filter((w) => w.length > 0).length;
        })
      );
    } else if (this.contentBlock.type === "image") {
      const imageField = contentEl.createDiv({ cls: "content-block-field" });
      const sourceValue = ((_a = this.contentBlock.metadata) == null ? void 0 : _a.source) || "internet link";
      this.currentImageSourceTab = sourceValue;
      const tabsContainer = imageField.createDiv({ cls: "content-block-source-tabs" });
      const unsplashTab = tabsContainer.createEl("button", {
        text: "Unsplash",
        cls: `content-block-source-tab ${this.currentImageSourceTab === "unsplash" ? "is-active" : ""}`
      });
      const internetTab = tabsContainer.createEl("button", {
        text: "Internet Link",
        cls: `content-block-source-tab ${this.currentImageSourceTab === "internet link" ? "is-active" : ""}`
      });
      const localTab = tabsContainer.createEl("button", {
        text: "Local Upload",
        cls: `content-block-source-tab ${this.currentImageSourceTab === "local" ? "is-active" : ""}`
      });
      const tabContent = imageField.createDiv({ cls: "content-block-source-tab-content" });
      unsplashTab.onclick = () => {
        this.currentImageSourceTab = "unsplash";
        if (!this.contentBlock.metadata) {
          this.contentBlock.metadata = {};
        }
        this.contentBlock.metadata.source = "unsplash";
        this.renderContentFields();
      };
      internetTab.onclick = () => {
        this.currentImageSourceTab = "internet link";
        if (!this.contentBlock.metadata) {
          this.contentBlock.metadata = {};
        }
        this.contentBlock.metadata.source = "internet link";
        this.renderContentFields();
      };
      localTab.onclick = () => {
        this.currentImageSourceTab = "local";
        if (!this.contentBlock.metadata) {
          this.contentBlock.metadata = {};
        }
        this.contentBlock.metadata.source = "local";
        this.renderContentFields();
      };
      if (this.currentImageSourceTab === "unsplash") {
        const unsplashAccessKey = ((_c = (_b = this.plugin) == null ? void 0 : _b.settings) == null ? void 0 : _c.unsplashAccessKey) || "";
        if (unsplashAccessKey && unsplashAccessKey !== "YOUR_UNSPLASH_ACCESS_KEY") {
          const unsplashSetting = new import_obsidian14.Setting(tabContent);
          unsplashSetting.setName("Search Unsplash");
          unsplashSetting.setDesc("Search for free images");
          unsplashSetting.addButton((button) => {
            button.setButtonText("Search");
            button.onClick(() => {
              this.showUnsplashSearch();
            });
          });
        } else {
          const unsplashSetting = new import_obsidian14.Setting(tabContent);
          unsplashSetting.setName("Search Unsplash");
          unsplashSetting.setDesc("Configure Unsplash Access Key and Secret Key in plugin settings to enable image search");
          unsplashSetting.addButton((button) => {
            button.setButtonText("Search");
            button.setDisabled(true);
          });
        }
        if (this.selectedImageUrl) {
          new import_obsidian14.Setting(tabContent).setName("Selected Image URL").setDesc("Image URL from Unsplash").addText(
            (text) => text.setValue(this.selectedImageUrl).setDisabled(true)
          );
        }
      } else if (this.currentImageSourceTab === "internet link") {
        new import_obsidian14.Setting(tabContent).setName("Image URL").setDesc("Enter image URL").addText(
          (text) => text.setPlaceholder("https://example.com/image.jpg").setValue(this.selectedImageUrl).onChange((value) => {
            this.selectedImageUrl = value;
            this.contentBlock.content = value;
            if (!this.contentBlock.metadata) {
              this.contentBlock.metadata = {};
            }
            this.contentBlock.metadata.source = "internet link";
          })
        );
      } else if (this.currentImageSourceTab === "local") {
        new import_obsidian14.Setting(tabContent).setName("Upload from Computer").setDesc("Upload image from your computer (coming soon)").addButton((button) => {
          button.setButtonText("Choose File");
          button.setDisabled(true);
        });
      }
      const altTextValue = ((_d = this.contentBlock.metadata) == null ? void 0 : _d.alt_text) || "";
      const altTextSetting = new import_obsidian14.Setting(imageField);
      altTextSetting.setName("Alt Text");
      altTextSetting.setDesc("Alt text for accessibility");
      altTextSetting.addText(
        (text) => text.setPlaceholder("Describe the image for accessibility").setValue(altTextValue).onChange((value) => {
          if (!this.contentBlock.metadata) {
            this.contentBlock.metadata = {};
          }
          this.contentBlock.metadata.alt_text = value || void 0;
        })
      );
      const authorNameValue = ((_e = this.contentBlock.metadata) == null ? void 0 : _e.author_name) || "";
      new import_obsidian14.Setting(imageField).setName("Author Name").setDesc("Name of the image author/photographer").addText(
        (text) => text.setPlaceholder("Author name").setValue(authorNameValue).onChange((value) => {
          if (!this.contentBlock.metadata) {
            this.contentBlock.metadata = {};
          }
          this.contentBlock.metadata.author_name = value || void 0;
        })
      );
      const attributionValue = ((_f = this.contentBlock.metadata) == null ? void 0 : _f.attribution) || "";
      new import_obsidian14.Setting(imageField).setName("Attribution").setDesc("Attribution text (e.g., 'Photo by John Doe on Unsplash')").addText(
        (text) => text.setPlaceholder("Photo by Author Name on Source").setValue(attributionValue).onChange((value) => {
          if (!this.contentBlock.metadata) {
            this.contentBlock.metadata = {};
          }
          this.contentBlock.metadata.attribution = value || void 0;
        })
      );
      const attributionUrlValue = ((_g = this.contentBlock.metadata) == null ? void 0 : _g.attribution_url) || "";
      new import_obsidian14.Setting(imageField).setName("Attribution URL").setDesc("Link to the original image or author page").addText(
        (text) => text.setPlaceholder("https://example.com/photo").setValue(attributionUrlValue).onChange((value) => {
          if (!this.contentBlock.metadata) {
            this.contentBlock.metadata = {};
          }
          this.contentBlock.metadata.attribution_url = value || void 0;
        })
      );
    }
  }
  showUnsplashSearch() {
    const { contentEl } = this;
    const searchModal = new import_obsidian14.Modal(this.app);
    searchModal.titleEl.setText("Search Unsplash");
    const searchContent = searchModal.contentEl;
    const searchInput = searchContent.createEl("input", {
      type: "text",
      placeholder: "Search for images...",
      cls: "unsplash-search-input"
    });
    searchInput.value = this.unsplashSearchQuery;
    searchInput.style.width = "100%";
    searchInput.style.padding = "0.5rem";
    searchInput.style.marginBottom = "1rem";
    const searchButton = searchContent.createEl("button", {
      text: "Search",
      cls: "mod-cta"
    });
    searchButton.style.marginBottom = "1rem";
    const resultsContainer = searchContent.createDiv({ cls: "unsplash-results-grid" });
    const performSearch = async () => {
      const query = searchInput.value.trim();
      if (!query) {
        new import_obsidian14.Notice("Please enter a search query", 3e3);
        return;
      }
      this.unsplashSearching = true;
      searchButton.disabled = true;
      searchButton.setText("Searching...");
      resultsContainer.empty();
      resultsContainer.createEl("p", { text: "Searching..." });
      try {
        const response = await this.unsplashClient.searchImages(query, 1, 20);
        this.unsplashResults = response.results;
        resultsContainer.empty();
        if (this.unsplashResults.length === 0) {
          resultsContainer.createEl("p", { text: "No results found." });
        } else {
          for (const photo of this.unsplashResults) {
            const photoItem = resultsContainer.createDiv({ cls: "unsplash-photo-item" });
            const img = photoItem.createEl("img", {
              attr: {
                src: this.unsplashClient.getImageUrl(photo, "thumb"),
                alt: photo.alt_description || photo.description || "Unsplash photo"
              }
            });
            img.style.width = "100%";
            img.style.height = "150px";
            img.style.objectFit = "cover";
            img.style.borderRadius = "4px";
            img.style.cursor = "pointer";
            const photoInfo = photoItem.createDiv({ cls: "unsplash-photo-info" });
            photoInfo.createEl("p", {
              text: photo.alt_description || photo.description || "Untitled",
              cls: "unsplash-photo-title"
            });
            photoInfo.createEl("p", {
              text: this.unsplashClient.getAttributionText(photo),
              cls: "unsplash-photo-attribution"
            });
            photoItem.onclick = () => {
              const imageUrl = this.unsplashClient.getImageUrl(photo, "regular");
              this.selectedImageUrl = imageUrl;
              this.contentBlock.content = imageUrl;
              if (!this.contentBlock.metadata) {
                this.contentBlock.metadata = {};
              }
              const altText = photo.alt_description || photo.description || "";
              this.contentBlock.metadata.alt_text = altText;
              this.contentBlock.metadata.attribution = this.unsplashClient.getAttributionText(photo);
              this.contentBlock.metadata.attribution_url = this.unsplashClient.getAttributionUrl(photo);
              this.contentBlock.metadata.author_name = photo.user.name;
              this.contentBlock.metadata.source = "unsplash";
              searchModal.close();
              this.renderContentFields();
              new import_obsidian14.Notice("Image selected");
            };
          }
        }
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to search Unsplash";
        new import_obsidian14.Notice(`Error: ${errorMessage}`, 5e3);
        resultsContainer.empty();
        resultsContainer.createEl("p", {
          text: `Error: ${errorMessage}`,
          cls: "story-engine-error"
        });
      } finally {
        this.unsplashSearching = false;
        searchButton.disabled = false;
        searchButton.setText("Search");
      }
    };
    searchButton.onclick = performSearch;
    searchInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        performSearch();
      }
    });
    if (this.unsplashSearchQuery) {
      performSearch();
    }
    searchModal.open();
  }
  async submit() {
    var _a, _b;
    if (!this.contentBlock.type) {
      this.contentBlock.type = "text";
    }
    if (this.contentBlock.type === "text" && !((_a = this.contentBlock.content) == null ? void 0 : _a.trim())) {
      new import_obsidian14.Notice("Please enter text content", 3e3);
      return;
    }
    if (this.contentBlock.type === "image" && !((_b = this.contentBlock.content) == null ? void 0 : _b.trim())) {
      new import_obsidian14.Notice("Please enter an image URL or select an image", 3e3);
      return;
    }
    try {
      await this.onSubmit(this.contentBlock);
      this.close();
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to save content block";
      new import_obsidian14.Notice(`Error: ${errorMessage}`, 5e3);
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/TimelineModal.ts
var import_obsidian15 = require("obsidian");

// node_modules/d3-array/src/ascending.js
function ascending(a, b) {
  return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;
}

// node_modules/d3-array/src/descending.js
function descending(a, b) {
  return a == null || b == null ? NaN : b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;
}

// node_modules/d3-array/src/bisector.js
function bisector(f) {
  let compare1, compare2, delta;
  if (f.length !== 2) {
    compare1 = ascending;
    compare2 = (d, x) => ascending(f(d), x);
    delta = (d, x) => f(d) - x;
  } else {
    compare1 = f === ascending || f === descending ? f : zero;
    compare2 = f;
    delta = f;
  }
  function left2(a, x, lo = 0, hi = a.length) {
    if (lo < hi) {
      if (compare1(x, x) !== 0)
        return hi;
      do {
        const mid = lo + hi >>> 1;
        if (compare2(a[mid], x) < 0)
          lo = mid + 1;
        else
          hi = mid;
      } while (lo < hi);
    }
    return lo;
  }
  function right2(a, x, lo = 0, hi = a.length) {
    if (lo < hi) {
      if (compare1(x, x) !== 0)
        return hi;
      do {
        const mid = lo + hi >>> 1;
        if (compare2(a[mid], x) <= 0)
          lo = mid + 1;
        else
          hi = mid;
      } while (lo < hi);
    }
    return lo;
  }
  function center2(a, x, lo = 0, hi = a.length) {
    const i = left2(a, x, lo, hi - 1);
    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;
  }
  return { left: left2, center: center2, right: right2 };
}
function zero() {
  return 0;
}

// node_modules/d3-array/src/number.js
function number(x) {
  return x === null ? NaN : +x;
}

// node_modules/d3-array/src/bisect.js
var ascendingBisect = bisector(ascending);
var bisectRight = ascendingBisect.right;
var bisectLeft = ascendingBisect.left;
var bisectCenter = bisector(number).center;
var bisect_default = bisectRight;

// node_modules/d3-array/src/extent.js
function extent(values, valueof) {
  let min2;
  let max2;
  if (valueof === void 0) {
    for (const value of values) {
      if (value != null) {
        if (min2 === void 0) {
          if (value >= value)
            min2 = max2 = value;
        } else {
          if (min2 > value)
            min2 = value;
          if (max2 < value)
            max2 = value;
        }
      }
    }
  } else {
    let index = -1;
    for (let value of values) {
      if ((value = valueof(value, ++index, values)) != null) {
        if (min2 === void 0) {
          if (value >= value)
            min2 = max2 = value;
        } else {
          if (min2 > value)
            min2 = value;
          if (max2 < value)
            max2 = value;
        }
      }
    }
  }
  return [min2, max2];
}

// node_modules/internmap/src/index.js
var InternMap = class extends Map {
  constructor(entries, key = keyof) {
    super();
    Object.defineProperties(this, { _intern: { value: /* @__PURE__ */ new Map() }, _key: { value: key } });
    if (entries != null)
      for (const [key2, value] of entries)
        this.set(key2, value);
  }
  get(key) {
    return super.get(intern_get(this, key));
  }
  has(key) {
    return super.has(intern_get(this, key));
  }
  set(key, value) {
    return super.set(intern_set(this, key), value);
  }
  delete(key) {
    return super.delete(intern_delete(this, key));
  }
};
function intern_get({ _intern, _key }, value) {
  const key = _key(value);
  return _intern.has(key) ? _intern.get(key) : value;
}
function intern_set({ _intern, _key }, value) {
  const key = _key(value);
  if (_intern.has(key))
    return _intern.get(key);
  _intern.set(key, value);
  return value;
}
function intern_delete({ _intern, _key }, value) {
  const key = _key(value);
  if (_intern.has(key)) {
    value = _intern.get(key);
    _intern.delete(key);
  }
  return value;
}
function keyof(value) {
  return value !== null && typeof value === "object" ? value.valueOf() : value;
}

// node_modules/d3-array/src/ticks.js
var e10 = Math.sqrt(50);
var e5 = Math.sqrt(10);
var e2 = Math.sqrt(2);
function tickSpec(start2, stop, count) {
  const step = (stop - start2) / Math.max(0, count), power = Math.floor(Math.log10(step)), error = step / Math.pow(10, power), factor = error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1;
  let i1, i2, inc;
  if (power < 0) {
    inc = Math.pow(10, -power) / factor;
    i1 = Math.round(start2 * inc);
    i2 = Math.round(stop * inc);
    if (i1 / inc < start2)
      ++i1;
    if (i2 / inc > stop)
      --i2;
    inc = -inc;
  } else {
    inc = Math.pow(10, power) * factor;
    i1 = Math.round(start2 / inc);
    i2 = Math.round(stop / inc);
    if (i1 * inc < start2)
      ++i1;
    if (i2 * inc > stop)
      --i2;
  }
  if (i2 < i1 && 0.5 <= count && count < 2)
    return tickSpec(start2, stop, count * 2);
  return [i1, i2, inc];
}
function ticks(start2, stop, count) {
  stop = +stop, start2 = +start2, count = +count;
  if (!(count > 0))
    return [];
  if (start2 === stop)
    return [start2];
  const reverse = stop < start2, [i1, i2, inc] = reverse ? tickSpec(stop, start2, count) : tickSpec(start2, stop, count);
  if (!(i2 >= i1))
    return [];
  const n = i2 - i1 + 1, ticks2 = new Array(n);
  if (reverse) {
    if (inc < 0)
      for (let i = 0; i < n; ++i)
        ticks2[i] = (i2 - i) / -inc;
    else
      for (let i = 0; i < n; ++i)
        ticks2[i] = (i2 - i) * inc;
  } else {
    if (inc < 0)
      for (let i = 0; i < n; ++i)
        ticks2[i] = (i1 + i) / -inc;
    else
      for (let i = 0; i < n; ++i)
        ticks2[i] = (i1 + i) * inc;
  }
  return ticks2;
}
function tickIncrement(start2, stop, count) {
  stop = +stop, start2 = +start2, count = +count;
  return tickSpec(start2, stop, count)[2];
}
function tickStep(start2, stop, count) {
  stop = +stop, start2 = +start2, count = +count;
  const reverse = stop < start2, inc = reverse ? tickIncrement(stop, start2, count) : tickIncrement(start2, stop, count);
  return (reverse ? -1 : 1) * (inc < 0 ? 1 / -inc : inc);
}

// node_modules/d3-axis/src/identity.js
function identity_default(x) {
  return x;
}

// node_modules/d3-axis/src/axis.js
var top = 1;
var right = 2;
var bottom = 3;
var left = 4;
var epsilon = 1e-6;
function translateX(x) {
  return "translate(" + x + ",0)";
}
function translateY(y) {
  return "translate(0," + y + ")";
}
function number2(scale) {
  return (d) => +scale(d);
}
function center(scale, offset) {
  offset = Math.max(0, scale.bandwidth() - offset * 2) / 2;
  if (scale.round())
    offset = Math.round(offset);
  return (d) => +scale(d) + offset;
}
function entering() {
  return !this.__axis;
}
function axis(orient, scale) {
  var tickArguments = [], tickValues = null, tickFormat2 = null, tickSizeInner = 6, tickSizeOuter = 6, tickPadding = 3, offset = typeof window !== "undefined" && window.devicePixelRatio > 1 ? 0 : 0.5, k = orient === top || orient === left ? -1 : 1, x = orient === left || orient === right ? "x" : "y", transform2 = orient === top || orient === bottom ? translateX : translateY;
  function axis2(context) {
    var values = tickValues == null ? scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain() : tickValues, format2 = tickFormat2 == null ? scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity_default : tickFormat2, spacing = Math.max(tickSizeInner, 0) + tickPadding, range = scale.range(), range0 = +range[0] + offset, range1 = +range[range.length - 1] + offset, position = (scale.bandwidth ? center : number2)(scale.copy(), offset), selection2 = context.selection ? context.selection() : context, path = selection2.selectAll(".domain").data([null]), tick = selection2.selectAll(".tick").data(values, scale).order(), tickExit = tick.exit(), tickEnter = tick.enter().append("g").attr("class", "tick"), line = tick.select("line"), text = tick.select("text");
    path = path.merge(path.enter().insert("path", ".tick").attr("class", "domain").attr("stroke", "currentColor"));
    tick = tick.merge(tickEnter);
    line = line.merge(tickEnter.append("line").attr("stroke", "currentColor").attr(x + "2", k * tickSizeInner));
    text = text.merge(tickEnter.append("text").attr("fill", "currentColor").attr(x, k * spacing).attr("dy", orient === top ? "0em" : orient === bottom ? "0.71em" : "0.32em"));
    if (context !== selection2) {
      path = path.transition(context);
      tick = tick.transition(context);
      line = line.transition(context);
      text = text.transition(context);
      tickExit = tickExit.transition(context).attr("opacity", epsilon).attr("transform", function(d) {
        return isFinite(d = position(d)) ? transform2(d + offset) : this.getAttribute("transform");
      });
      tickEnter.attr("opacity", epsilon).attr("transform", function(d) {
        var p = this.parentNode.__axis;
        return transform2((p && isFinite(p = p(d)) ? p : position(d)) + offset);
      });
    }
    tickExit.remove();
    path.attr("d", orient === left || orient === right ? tickSizeOuter ? "M" + k * tickSizeOuter + "," + range0 + "H" + offset + "V" + range1 + "H" + k * tickSizeOuter : "M" + offset + "," + range0 + "V" + range1 : tickSizeOuter ? "M" + range0 + "," + k * tickSizeOuter + "V" + offset + "H" + range1 + "V" + k * tickSizeOuter : "M" + range0 + "," + offset + "H" + range1);
    tick.attr("opacity", 1).attr("transform", function(d) {
      return transform2(position(d) + offset);
    });
    line.attr(x + "2", k * tickSizeInner);
    text.attr(x, k * spacing).text(format2);
    selection2.filter(entering).attr("fill", "none").attr("font-size", 10).attr("font-family", "sans-serif").attr("text-anchor", orient === right ? "start" : orient === left ? "end" : "middle");
    selection2.each(function() {
      this.__axis = position;
    });
  }
  axis2.scale = function(_) {
    return arguments.length ? (scale = _, axis2) : scale;
  };
  axis2.ticks = function() {
    return tickArguments = Array.from(arguments), axis2;
  };
  axis2.tickArguments = function(_) {
    return arguments.length ? (tickArguments = _ == null ? [] : Array.from(_), axis2) : tickArguments.slice();
  };
  axis2.tickValues = function(_) {
    return arguments.length ? (tickValues = _ == null ? null : Array.from(_), axis2) : tickValues && tickValues.slice();
  };
  axis2.tickFormat = function(_) {
    return arguments.length ? (tickFormat2 = _, axis2) : tickFormat2;
  };
  axis2.tickSize = function(_) {
    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis2) : tickSizeInner;
  };
  axis2.tickSizeInner = function(_) {
    return arguments.length ? (tickSizeInner = +_, axis2) : tickSizeInner;
  };
  axis2.tickSizeOuter = function(_) {
    return arguments.length ? (tickSizeOuter = +_, axis2) : tickSizeOuter;
  };
  axis2.tickPadding = function(_) {
    return arguments.length ? (tickPadding = +_, axis2) : tickPadding;
  };
  axis2.offset = function(_) {
    return arguments.length ? (offset = +_, axis2) : offset;
  };
  return axis2;
}
function axisBottom(scale) {
  return axis(bottom, scale);
}
function axisLeft(scale) {
  return axis(left, scale);
}

// node_modules/d3-dispatch/src/dispatch.js
var noop = { value: () => {
} };
function dispatch() {
  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {
    if (!(t = arguments[i] + "") || t in _ || /[\s.]/.test(t))
      throw new Error("illegal type: " + t);
    _[t] = [];
  }
  return new Dispatch(_);
}
function Dispatch(_) {
  this._ = _;
}
function parseTypenames(typenames, types) {
  return typenames.trim().split(/^|\s+/).map(function(t) {
    var name = "", i = t.indexOf(".");
    if (i >= 0)
      name = t.slice(i + 1), t = t.slice(0, i);
    if (t && !types.hasOwnProperty(t))
      throw new Error("unknown type: " + t);
    return { type: t, name };
  });
}
Dispatch.prototype = dispatch.prototype = {
  constructor: Dispatch,
  on: function(typename, callback) {
    var _ = this._, T = parseTypenames(typename + "", _), t, i = -1, n = T.length;
    if (arguments.length < 2) {
      while (++i < n)
        if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name)))
          return t;
      return;
    }
    if (callback != null && typeof callback !== "function")
      throw new Error("invalid callback: " + callback);
    while (++i < n) {
      if (t = (typename = T[i]).type)
        _[t] = set(_[t], typename.name, callback);
      else if (callback == null)
        for (t in _)
          _[t] = set(_[t], typename.name, null);
    }
    return this;
  },
  copy: function() {
    var copy2 = {}, _ = this._;
    for (var t in _)
      copy2[t] = _[t].slice();
    return new Dispatch(copy2);
  },
  call: function(type2, that) {
    if ((n = arguments.length - 2) > 0)
      for (var args = new Array(n), i = 0, n, t; i < n; ++i)
        args[i] = arguments[i + 2];
    if (!this._.hasOwnProperty(type2))
      throw new Error("unknown type: " + type2);
    for (t = this._[type2], i = 0, n = t.length; i < n; ++i)
      t[i].value.apply(that, args);
  },
  apply: function(type2, that, args) {
    if (!this._.hasOwnProperty(type2))
      throw new Error("unknown type: " + type2);
    for (var t = this._[type2], i = 0, n = t.length; i < n; ++i)
      t[i].value.apply(that, args);
  }
};
function get(type2, name) {
  for (var i = 0, n = type2.length, c; i < n; ++i) {
    if ((c = type2[i]).name === name) {
      return c.value;
    }
  }
}
function set(type2, name, callback) {
  for (var i = 0, n = type2.length; i < n; ++i) {
    if (type2[i].name === name) {
      type2[i] = noop, type2 = type2.slice(0, i).concat(type2.slice(i + 1));
      break;
    }
  }
  if (callback != null)
    type2.push({ name, value: callback });
  return type2;
}
var dispatch_default = dispatch;

// node_modules/d3-selection/src/namespaces.js
var xhtml = "http://www.w3.org/1999/xhtml";
var namespaces_default = {
  svg: "http://www.w3.org/2000/svg",
  xhtml,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
};

// node_modules/d3-selection/src/namespace.js
function namespace_default(name) {
  var prefix = name += "", i = prefix.indexOf(":");
  if (i >= 0 && (prefix = name.slice(0, i)) !== "xmlns")
    name = name.slice(i + 1);
  return namespaces_default.hasOwnProperty(prefix) ? { space: namespaces_default[prefix], local: name } : name;
}

// node_modules/d3-selection/src/creator.js
function creatorInherit(name) {
  return function() {
    var document2 = this.ownerDocument, uri = this.namespaceURI;
    return uri === xhtml && document2.documentElement.namespaceURI === xhtml ? document2.createElement(name) : document2.createElementNS(uri, name);
  };
}
function creatorFixed(fullname) {
  return function() {
    return this.ownerDocument.createElementNS(fullname.space, fullname.local);
  };
}
function creator_default(name) {
  var fullname = namespace_default(name);
  return (fullname.local ? creatorFixed : creatorInherit)(fullname);
}

// node_modules/d3-selection/src/selector.js
function none() {
}
function selector_default(selector) {
  return selector == null ? none : function() {
    return this.querySelector(selector);
  };
}

// node_modules/d3-selection/src/selection/select.js
function select_default(select) {
  if (typeof select !== "function")
    select = selector_default(select);
  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {
      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {
        if ("__data__" in node)
          subnode.__data__ = node.__data__;
        subgroup[i] = subnode;
      }
    }
  }
  return new Selection(subgroups, this._parents);
}

// node_modules/d3-selection/src/array.js
function array(x) {
  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);
}

// node_modules/d3-selection/src/selectorAll.js
function empty() {
  return [];
}
function selectorAll_default(selector) {
  return selector == null ? empty : function() {
    return this.querySelectorAll(selector);
  };
}

// node_modules/d3-selection/src/selection/selectAll.js
function arrayAll(select) {
  return function() {
    return array(select.apply(this, arguments));
  };
}
function selectAll_default(select) {
  if (typeof select === "function")
    select = arrayAll(select);
  else
    select = selectorAll_default(select);
  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        subgroups.push(select.call(node, node.__data__, i, group));
        parents.push(node);
      }
    }
  }
  return new Selection(subgroups, parents);
}

// node_modules/d3-selection/src/matcher.js
function matcher_default(selector) {
  return function() {
    return this.matches(selector);
  };
}
function childMatcher(selector) {
  return function(node) {
    return node.matches(selector);
  };
}

// node_modules/d3-selection/src/selection/selectChild.js
var find = Array.prototype.find;
function childFind(match) {
  return function() {
    return find.call(this.children, match);
  };
}
function childFirst() {
  return this.firstElementChild;
}
function selectChild_default(match) {
  return this.select(match == null ? childFirst : childFind(typeof match === "function" ? match : childMatcher(match)));
}

// node_modules/d3-selection/src/selection/selectChildren.js
var filter = Array.prototype.filter;
function children() {
  return Array.from(this.children);
}
function childrenFilter(match) {
  return function() {
    return filter.call(this.children, match);
  };
}
function selectChildren_default(match) {
  return this.selectAll(match == null ? children : childrenFilter(typeof match === "function" ? match : childMatcher(match)));
}

// node_modules/d3-selection/src/selection/filter.js
function filter_default(match) {
  if (typeof match !== "function")
    match = matcher_default(match);
  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {
      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {
        subgroup.push(node);
      }
    }
  }
  return new Selection(subgroups, this._parents);
}

// node_modules/d3-selection/src/selection/sparse.js
function sparse_default(update) {
  return new Array(update.length);
}

// node_modules/d3-selection/src/selection/enter.js
function enter_default() {
  return new Selection(this._enter || this._groups.map(sparse_default), this._parents);
}
function EnterNode(parent, datum2) {
  this.ownerDocument = parent.ownerDocument;
  this.namespaceURI = parent.namespaceURI;
  this._next = null;
  this._parent = parent;
  this.__data__ = datum2;
}
EnterNode.prototype = {
  constructor: EnterNode,
  appendChild: function(child) {
    return this._parent.insertBefore(child, this._next);
  },
  insertBefore: function(child, next) {
    return this._parent.insertBefore(child, next);
  },
  querySelector: function(selector) {
    return this._parent.querySelector(selector);
  },
  querySelectorAll: function(selector) {
    return this._parent.querySelectorAll(selector);
  }
};

// node_modules/d3-selection/src/constant.js
function constant_default(x) {
  return function() {
    return x;
  };
}

// node_modules/d3-selection/src/selection/data.js
function bindIndex(parent, group, enter, update, exit, data) {
  var i = 0, node, groupLength = group.length, dataLength = data.length;
  for (; i < dataLength; ++i) {
    if (node = group[i]) {
      node.__data__ = data[i];
      update[i] = node;
    } else {
      enter[i] = new EnterNode(parent, data[i]);
    }
  }
  for (; i < groupLength; ++i) {
    if (node = group[i]) {
      exit[i] = node;
    }
  }
}
function bindKey(parent, group, enter, update, exit, data, key) {
  var i, node, nodeByKeyValue = /* @__PURE__ */ new Map(), groupLength = group.length, dataLength = data.length, keyValues = new Array(groupLength), keyValue;
  for (i = 0; i < groupLength; ++i) {
    if (node = group[i]) {
      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + "";
      if (nodeByKeyValue.has(keyValue)) {
        exit[i] = node;
      } else {
        nodeByKeyValue.set(keyValue, node);
      }
    }
  }
  for (i = 0; i < dataLength; ++i) {
    keyValue = key.call(parent, data[i], i, data) + "";
    if (node = nodeByKeyValue.get(keyValue)) {
      update[i] = node;
      node.__data__ = data[i];
      nodeByKeyValue.delete(keyValue);
    } else {
      enter[i] = new EnterNode(parent, data[i]);
    }
  }
  for (i = 0; i < groupLength; ++i) {
    if ((node = group[i]) && nodeByKeyValue.get(keyValues[i]) === node) {
      exit[i] = node;
    }
  }
}
function datum(node) {
  return node.__data__;
}
function data_default(value, key) {
  if (!arguments.length)
    return Array.from(this, datum);
  var bind = key ? bindKey : bindIndex, parents = this._parents, groups = this._groups;
  if (typeof value !== "function")
    value = constant_default(value);
  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {
    var parent = parents[j], group = groups[j], groupLength = group.length, data = arraylike(value.call(parent, parent && parent.__data__, j, parents)), dataLength = data.length, enterGroup = enter[j] = new Array(dataLength), updateGroup = update[j] = new Array(dataLength), exitGroup = exit[j] = new Array(groupLength);
    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);
    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {
      if (previous = enterGroup[i0]) {
        if (i0 >= i1)
          i1 = i0 + 1;
        while (!(next = updateGroup[i1]) && ++i1 < dataLength)
          ;
        previous._next = next || null;
      }
    }
  }
  update = new Selection(update, parents);
  update._enter = enter;
  update._exit = exit;
  return update;
}
function arraylike(data) {
  return typeof data === "object" && "length" in data ? data : Array.from(data);
}

// node_modules/d3-selection/src/selection/exit.js
function exit_default() {
  return new Selection(this._exit || this._groups.map(sparse_default), this._parents);
}

// node_modules/d3-selection/src/selection/join.js
function join_default(onenter, onupdate, onexit) {
  var enter = this.enter(), update = this, exit = this.exit();
  if (typeof onenter === "function") {
    enter = onenter(enter);
    if (enter)
      enter = enter.selection();
  } else {
    enter = enter.append(onenter + "");
  }
  if (onupdate != null) {
    update = onupdate(update);
    if (update)
      update = update.selection();
  }
  if (onexit == null)
    exit.remove();
  else
    onexit(exit);
  return enter && update ? enter.merge(update).order() : update;
}

// node_modules/d3-selection/src/selection/merge.js
function merge_default(context) {
  var selection2 = context.selection ? context.selection() : context;
  for (var groups0 = this._groups, groups1 = selection2._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {
    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group0[i] || group1[i]) {
        merge[i] = node;
      }
    }
  }
  for (; j < m0; ++j) {
    merges[j] = groups0[j];
  }
  return new Selection(merges, this._parents);
}

// node_modules/d3-selection/src/selection/order.js
function order_default() {
  for (var groups = this._groups, j = -1, m = groups.length; ++j < m; ) {
    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0; ) {
      if (node = group[i]) {
        if (next && node.compareDocumentPosition(next) ^ 4)
          next.parentNode.insertBefore(node, next);
        next = node;
      }
    }
  }
  return this;
}

// node_modules/d3-selection/src/selection/sort.js
function sort_default(compare) {
  if (!compare)
    compare = ascending2;
  function compareNode(a, b) {
    return a && b ? compare(a.__data__, b.__data__) : !a - !b;
  }
  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        sortgroup[i] = node;
      }
    }
    sortgroup.sort(compareNode);
  }
  return new Selection(sortgroups, this._parents).order();
}
function ascending2(a, b) {
  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;
}

// node_modules/d3-selection/src/selection/call.js
function call_default() {
  var callback = arguments[0];
  arguments[0] = this;
  callback.apply(null, arguments);
  return this;
}

// node_modules/d3-selection/src/selection/nodes.js
function nodes_default() {
  return Array.from(this);
}

// node_modules/d3-selection/src/selection/node.js
function node_default() {
  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {
      var node = group[i];
      if (node)
        return node;
    }
  }
  return null;
}

// node_modules/d3-selection/src/selection/size.js
function size_default() {
  let size = 0;
  for (const node of this)
    ++size;
  return size;
}

// node_modules/d3-selection/src/selection/empty.js
function empty_default() {
  return !this.node();
}

// node_modules/d3-selection/src/selection/each.js
function each_default(callback) {
  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {
      if (node = group[i])
        callback.call(node, node.__data__, i, group);
    }
  }
  return this;
}

// node_modules/d3-selection/src/selection/attr.js
function attrRemove(name) {
  return function() {
    this.removeAttribute(name);
  };
}
function attrRemoveNS(fullname) {
  return function() {
    this.removeAttributeNS(fullname.space, fullname.local);
  };
}
function attrConstant(name, value) {
  return function() {
    this.setAttribute(name, value);
  };
}
function attrConstantNS(fullname, value) {
  return function() {
    this.setAttributeNS(fullname.space, fullname.local, value);
  };
}
function attrFunction(name, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null)
      this.removeAttribute(name);
    else
      this.setAttribute(name, v);
  };
}
function attrFunctionNS(fullname, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null)
      this.removeAttributeNS(fullname.space, fullname.local);
    else
      this.setAttributeNS(fullname.space, fullname.local, v);
  };
}
function attr_default(name, value) {
  var fullname = namespace_default(name);
  if (arguments.length < 2) {
    var node = this.node();
    return fullname.local ? node.getAttributeNS(fullname.space, fullname.local) : node.getAttribute(fullname);
  }
  return this.each((value == null ? fullname.local ? attrRemoveNS : attrRemove : typeof value === "function" ? fullname.local ? attrFunctionNS : attrFunction : fullname.local ? attrConstantNS : attrConstant)(fullname, value));
}

// node_modules/d3-selection/src/window.js
function window_default(node) {
  return node.ownerDocument && node.ownerDocument.defaultView || node.document && node || node.defaultView;
}

// node_modules/d3-selection/src/selection/style.js
function styleRemove(name) {
  return function() {
    this.style.removeProperty(name);
  };
}
function styleConstant(name, value, priority) {
  return function() {
    this.style.setProperty(name, value, priority);
  };
}
function styleFunction(name, value, priority) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null)
      this.style.removeProperty(name);
    else
      this.style.setProperty(name, v, priority);
  };
}
function style_default(name, value, priority) {
  return arguments.length > 1 ? this.each((value == null ? styleRemove : typeof value === "function" ? styleFunction : styleConstant)(name, value, priority == null ? "" : priority)) : styleValue(this.node(), name);
}
function styleValue(node, name) {
  return node.style.getPropertyValue(name) || window_default(node).getComputedStyle(node, null).getPropertyValue(name);
}

// node_modules/d3-selection/src/selection/property.js
function propertyRemove(name) {
  return function() {
    delete this[name];
  };
}
function propertyConstant(name, value) {
  return function() {
    this[name] = value;
  };
}
function propertyFunction(name, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null)
      delete this[name];
    else
      this[name] = v;
  };
}
function property_default(name, value) {
  return arguments.length > 1 ? this.each((value == null ? propertyRemove : typeof value === "function" ? propertyFunction : propertyConstant)(name, value)) : this.node()[name];
}

// node_modules/d3-selection/src/selection/classed.js
function classArray(string) {
  return string.trim().split(/^|\s+/);
}
function classList(node) {
  return node.classList || new ClassList(node);
}
function ClassList(node) {
  this._node = node;
  this._names = classArray(node.getAttribute("class") || "");
}
ClassList.prototype = {
  add: function(name) {
    var i = this._names.indexOf(name);
    if (i < 0) {
      this._names.push(name);
      this._node.setAttribute("class", this._names.join(" "));
    }
  },
  remove: function(name) {
    var i = this._names.indexOf(name);
    if (i >= 0) {
      this._names.splice(i, 1);
      this._node.setAttribute("class", this._names.join(" "));
    }
  },
  contains: function(name) {
    return this._names.indexOf(name) >= 0;
  }
};
function classedAdd(node, names) {
  var list = classList(node), i = -1, n = names.length;
  while (++i < n)
    list.add(names[i]);
}
function classedRemove(node, names) {
  var list = classList(node), i = -1, n = names.length;
  while (++i < n)
    list.remove(names[i]);
}
function classedTrue(names) {
  return function() {
    classedAdd(this, names);
  };
}
function classedFalse(names) {
  return function() {
    classedRemove(this, names);
  };
}
function classedFunction(names, value) {
  return function() {
    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);
  };
}
function classed_default(name, value) {
  var names = classArray(name + "");
  if (arguments.length < 2) {
    var list = classList(this.node()), i = -1, n = names.length;
    while (++i < n)
      if (!list.contains(names[i]))
        return false;
    return true;
  }
  return this.each((typeof value === "function" ? classedFunction : value ? classedTrue : classedFalse)(names, value));
}

// node_modules/d3-selection/src/selection/text.js
function textRemove() {
  this.textContent = "";
}
function textConstant(value) {
  return function() {
    this.textContent = value;
  };
}
function textFunction(value) {
  return function() {
    var v = value.apply(this, arguments);
    this.textContent = v == null ? "" : v;
  };
}
function text_default(value) {
  return arguments.length ? this.each(value == null ? textRemove : (typeof value === "function" ? textFunction : textConstant)(value)) : this.node().textContent;
}

// node_modules/d3-selection/src/selection/html.js
function htmlRemove() {
  this.innerHTML = "";
}
function htmlConstant(value) {
  return function() {
    this.innerHTML = value;
  };
}
function htmlFunction(value) {
  return function() {
    var v = value.apply(this, arguments);
    this.innerHTML = v == null ? "" : v;
  };
}
function html_default(value) {
  return arguments.length ? this.each(value == null ? htmlRemove : (typeof value === "function" ? htmlFunction : htmlConstant)(value)) : this.node().innerHTML;
}

// node_modules/d3-selection/src/selection/raise.js
function raise() {
  if (this.nextSibling)
    this.parentNode.appendChild(this);
}
function raise_default() {
  return this.each(raise);
}

// node_modules/d3-selection/src/selection/lower.js
function lower() {
  if (this.previousSibling)
    this.parentNode.insertBefore(this, this.parentNode.firstChild);
}
function lower_default() {
  return this.each(lower);
}

// node_modules/d3-selection/src/selection/append.js
function append_default(name) {
  var create2 = typeof name === "function" ? name : creator_default(name);
  return this.select(function() {
    return this.appendChild(create2.apply(this, arguments));
  });
}

// node_modules/d3-selection/src/selection/insert.js
function constantNull() {
  return null;
}
function insert_default(name, before) {
  var create2 = typeof name === "function" ? name : creator_default(name), select = before == null ? constantNull : typeof before === "function" ? before : selector_default(before);
  return this.select(function() {
    return this.insertBefore(create2.apply(this, arguments), select.apply(this, arguments) || null);
  });
}

// node_modules/d3-selection/src/selection/remove.js
function remove() {
  var parent = this.parentNode;
  if (parent)
    parent.removeChild(this);
}
function remove_default() {
  return this.each(remove);
}

// node_modules/d3-selection/src/selection/clone.js
function selection_cloneShallow() {
  var clone = this.cloneNode(false), parent = this.parentNode;
  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;
}
function selection_cloneDeep() {
  var clone = this.cloneNode(true), parent = this.parentNode;
  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;
}
function clone_default(deep) {
  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);
}

// node_modules/d3-selection/src/selection/datum.js
function datum_default(value) {
  return arguments.length ? this.property("__data__", value) : this.node().__data__;
}

// node_modules/d3-selection/src/selection/on.js
function contextListener(listener) {
  return function(event) {
    listener.call(this, event, this.__data__);
  };
}
function parseTypenames2(typenames) {
  return typenames.trim().split(/^|\s+/).map(function(t) {
    var name = "", i = t.indexOf(".");
    if (i >= 0)
      name = t.slice(i + 1), t = t.slice(0, i);
    return { type: t, name };
  });
}
function onRemove(typename) {
  return function() {
    var on = this.__on;
    if (!on)
      return;
    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {
      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {
        this.removeEventListener(o.type, o.listener, o.options);
      } else {
        on[++i] = o;
      }
    }
    if (++i)
      on.length = i;
    else
      delete this.__on;
  };
}
function onAdd(typename, value, options) {
  return function() {
    var on = this.__on, o, listener = contextListener(value);
    if (on)
      for (var j = 0, m = on.length; j < m; ++j) {
        if ((o = on[j]).type === typename.type && o.name === typename.name) {
          this.removeEventListener(o.type, o.listener, o.options);
          this.addEventListener(o.type, o.listener = listener, o.options = options);
          o.value = value;
          return;
        }
      }
    this.addEventListener(typename.type, listener, options);
    o = { type: typename.type, name: typename.name, value, listener, options };
    if (!on)
      this.__on = [o];
    else
      on.push(o);
  };
}
function on_default(typename, value, options) {
  var typenames = parseTypenames2(typename + ""), i, n = typenames.length, t;
  if (arguments.length < 2) {
    var on = this.node().__on;
    if (on)
      for (var j = 0, m = on.length, o; j < m; ++j) {
        for (i = 0, o = on[j]; i < n; ++i) {
          if ((t = typenames[i]).type === o.type && t.name === o.name) {
            return o.value;
          }
        }
      }
    return;
  }
  on = value ? onAdd : onRemove;
  for (i = 0; i < n; ++i)
    this.each(on(typenames[i], value, options));
  return this;
}

// node_modules/d3-selection/src/selection/dispatch.js
function dispatchEvent(node, type2, params) {
  var window2 = window_default(node), event = window2.CustomEvent;
  if (typeof event === "function") {
    event = new event(type2, params);
  } else {
    event = window2.document.createEvent("Event");
    if (params)
      event.initEvent(type2, params.bubbles, params.cancelable), event.detail = params.detail;
    else
      event.initEvent(type2, false, false);
  }
  node.dispatchEvent(event);
}
function dispatchConstant(type2, params) {
  return function() {
    return dispatchEvent(this, type2, params);
  };
}
function dispatchFunction(type2, params) {
  return function() {
    return dispatchEvent(this, type2, params.apply(this, arguments));
  };
}
function dispatch_default2(type2, params) {
  return this.each((typeof params === "function" ? dispatchFunction : dispatchConstant)(type2, params));
}

// node_modules/d3-selection/src/selection/iterator.js
function* iterator_default() {
  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {
      if (node = group[i])
        yield node;
    }
  }
}

// node_modules/d3-selection/src/selection/index.js
var root = [null];
function Selection(groups, parents) {
  this._groups = groups;
  this._parents = parents;
}
function selection() {
  return new Selection([[document.documentElement]], root);
}
function selection_selection() {
  return this;
}
Selection.prototype = selection.prototype = {
  constructor: Selection,
  select: select_default,
  selectAll: selectAll_default,
  selectChild: selectChild_default,
  selectChildren: selectChildren_default,
  filter: filter_default,
  data: data_default,
  enter: enter_default,
  exit: exit_default,
  join: join_default,
  merge: merge_default,
  selection: selection_selection,
  order: order_default,
  sort: sort_default,
  call: call_default,
  nodes: nodes_default,
  node: node_default,
  size: size_default,
  empty: empty_default,
  each: each_default,
  attr: attr_default,
  style: style_default,
  property: property_default,
  classed: classed_default,
  text: text_default,
  html: html_default,
  raise: raise_default,
  lower: lower_default,
  append: append_default,
  insert: insert_default,
  remove: remove_default,
  clone: clone_default,
  datum: datum_default,
  on: on_default,
  dispatch: dispatch_default2,
  [Symbol.iterator]: iterator_default
};
var selection_default = selection;

// node_modules/d3-selection/src/select.js
function select_default2(selector) {
  return typeof selector === "string" ? new Selection([[document.querySelector(selector)]], [document.documentElement]) : new Selection([[selector]], root);
}

// node_modules/d3-color/src/define.js
function define_default(constructor, factory, prototype) {
  constructor.prototype = factory.prototype = prototype;
  prototype.constructor = constructor;
}
function extend(parent, definition) {
  var prototype = Object.create(parent.prototype);
  for (var key in definition)
    prototype[key] = definition[key];
  return prototype;
}

// node_modules/d3-color/src/color.js
function Color() {
}
var darker = 0.7;
var brighter = 1 / darker;
var reI = "\\s*([+-]?\\d+)\\s*";
var reN = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*";
var reP = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*";
var reHex = /^#([0-9a-f]{3,8})$/;
var reRgbInteger = new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`);
var reRgbPercent = new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`);
var reRgbaInteger = new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`);
var reRgbaPercent = new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`);
var reHslPercent = new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`);
var reHslaPercent = new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`);
var named = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
define_default(Color, color, {
  copy(channels) {
    return Object.assign(new this.constructor(), this, channels);
  },
  displayable() {
    return this.rgb().displayable();
  },
  hex: color_formatHex,
  // Deprecated! Use color.formatHex.
  formatHex: color_formatHex,
  formatHex8: color_formatHex8,
  formatHsl: color_formatHsl,
  formatRgb: color_formatRgb,
  toString: color_formatRgb
});
function color_formatHex() {
  return this.rgb().formatHex();
}
function color_formatHex8() {
  return this.rgb().formatHex8();
}
function color_formatHsl() {
  return hslConvert(this).formatHsl();
}
function color_formatRgb() {
  return this.rgb().formatRgb();
}
function color(format2) {
  var m, l;
  format2 = (format2 + "").trim().toLowerCase();
  return (m = reHex.exec(format2)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) : l === 3 ? new Rgb(m >> 8 & 15 | m >> 4 & 240, m >> 4 & 15 | m & 240, (m & 15) << 4 | m & 15, 1) : l === 8 ? rgba(m >> 24 & 255, m >> 16 & 255, m >> 8 & 255, (m & 255) / 255) : l === 4 ? rgba(m >> 12 & 15 | m >> 8 & 240, m >> 8 & 15 | m >> 4 & 240, m >> 4 & 15 | m & 240, ((m & 15) << 4 | m & 15) / 255) : null) : (m = reRgbInteger.exec(format2)) ? new Rgb(m[1], m[2], m[3], 1) : (m = reRgbPercent.exec(format2)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) : (m = reRgbaInteger.exec(format2)) ? rgba(m[1], m[2], m[3], m[4]) : (m = reRgbaPercent.exec(format2)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) : (m = reHslPercent.exec(format2)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) : (m = reHslaPercent.exec(format2)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) : named.hasOwnProperty(format2) ? rgbn(named[format2]) : format2 === "transparent" ? new Rgb(NaN, NaN, NaN, 0) : null;
}
function rgbn(n) {
  return new Rgb(n >> 16 & 255, n >> 8 & 255, n & 255, 1);
}
function rgba(r, g, b, a) {
  if (a <= 0)
    r = g = b = NaN;
  return new Rgb(r, g, b, a);
}
function rgbConvert(o) {
  if (!(o instanceof Color))
    o = color(o);
  if (!o)
    return new Rgb();
  o = o.rgb();
  return new Rgb(o.r, o.g, o.b, o.opacity);
}
function rgb(r, g, b, opacity) {
  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);
}
function Rgb(r, g, b, opacity) {
  this.r = +r;
  this.g = +g;
  this.b = +b;
  this.opacity = +opacity;
}
define_default(Rgb, rgb, extend(Color, {
  brighter(k) {
    k = k == null ? brighter : Math.pow(brighter, k);
    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
  },
  darker(k) {
    k = k == null ? darker : Math.pow(darker, k);
    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
  },
  rgb() {
    return this;
  },
  clamp() {
    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));
  },
  displayable() {
    return -0.5 <= this.r && this.r < 255.5 && (-0.5 <= this.g && this.g < 255.5) && (-0.5 <= this.b && this.b < 255.5) && (0 <= this.opacity && this.opacity <= 1);
  },
  hex: rgb_formatHex,
  // Deprecated! Use color.formatHex.
  formatHex: rgb_formatHex,
  formatHex8: rgb_formatHex8,
  formatRgb: rgb_formatRgb,
  toString: rgb_formatRgb
}));
function rgb_formatHex() {
  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;
}
function rgb_formatHex8() {
  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;
}
function rgb_formatRgb() {
  const a = clampa(this.opacity);
  return `${a === 1 ? "rgb(" : "rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? ")" : `, ${a})`}`;
}
function clampa(opacity) {
  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));
}
function clampi(value) {
  return Math.max(0, Math.min(255, Math.round(value) || 0));
}
function hex(value) {
  value = clampi(value);
  return (value < 16 ? "0" : "") + value.toString(16);
}
function hsla(h, s, l, a) {
  if (a <= 0)
    h = s = l = NaN;
  else if (l <= 0 || l >= 1)
    h = s = NaN;
  else if (s <= 0)
    h = NaN;
  return new Hsl(h, s, l, a);
}
function hslConvert(o) {
  if (o instanceof Hsl)
    return new Hsl(o.h, o.s, o.l, o.opacity);
  if (!(o instanceof Color))
    o = color(o);
  if (!o)
    return new Hsl();
  if (o instanceof Hsl)
    return o;
  o = o.rgb();
  var r = o.r / 255, g = o.g / 255, b = o.b / 255, min2 = Math.min(r, g, b), max2 = Math.max(r, g, b), h = NaN, s = max2 - min2, l = (max2 + min2) / 2;
  if (s) {
    if (r === max2)
      h = (g - b) / s + (g < b) * 6;
    else if (g === max2)
      h = (b - r) / s + 2;
    else
      h = (r - g) / s + 4;
    s /= l < 0.5 ? max2 + min2 : 2 - max2 - min2;
    h *= 60;
  } else {
    s = l > 0 && l < 1 ? 0 : h;
  }
  return new Hsl(h, s, l, o.opacity);
}
function hsl(h, s, l, opacity) {
  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);
}
function Hsl(h, s, l, opacity) {
  this.h = +h;
  this.s = +s;
  this.l = +l;
  this.opacity = +opacity;
}
define_default(Hsl, hsl, extend(Color, {
  brighter(k) {
    k = k == null ? brighter : Math.pow(brighter, k);
    return new Hsl(this.h, this.s, this.l * k, this.opacity);
  },
  darker(k) {
    k = k == null ? darker : Math.pow(darker, k);
    return new Hsl(this.h, this.s, this.l * k, this.opacity);
  },
  rgb() {
    var h = this.h % 360 + (this.h < 0) * 360, s = isNaN(h) || isNaN(this.s) ? 0 : this.s, l = this.l, m2 = l + (l < 0.5 ? l : 1 - l) * s, m1 = 2 * l - m2;
    return new Rgb(
      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),
      hsl2rgb(h, m1, m2),
      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),
      this.opacity
    );
  },
  clamp() {
    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));
  },
  displayable() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && (0 <= this.l && this.l <= 1) && (0 <= this.opacity && this.opacity <= 1);
  },
  formatHsl() {
    const a = clampa(this.opacity);
    return `${a === 1 ? "hsl(" : "hsla("}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? ")" : `, ${a})`}`;
  }
}));
function clamph(value) {
  value = (value || 0) % 360;
  return value < 0 ? value + 360 : value;
}
function clampt(value) {
  return Math.max(0, Math.min(1, value || 0));
}
function hsl2rgb(h, m1, m2) {
  return (h < 60 ? m1 + (m2 - m1) * h / 60 : h < 180 ? m2 : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60 : m1) * 255;
}

// node_modules/d3-interpolate/src/basis.js
function basis(t1, v0, v1, v2, v3) {
  var t2 = t1 * t1, t3 = t2 * t1;
  return ((1 - 3 * t1 + 3 * t2 - t3) * v0 + (4 - 6 * t2 + 3 * t3) * v1 + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2 + t3 * v3) / 6;
}
function basis_default(values) {
  var n = values.length - 1;
  return function(t) {
    var i = t <= 0 ? t = 0 : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n), v1 = values[i], v2 = values[i + 1], v0 = i > 0 ? values[i - 1] : 2 * v1 - v2, v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;
    return basis((t - i / n) * n, v0, v1, v2, v3);
  };
}

// node_modules/d3-interpolate/src/basisClosed.js
function basisClosed_default(values) {
  var n = values.length;
  return function(t) {
    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n), v0 = values[(i + n - 1) % n], v1 = values[i % n], v2 = values[(i + 1) % n], v3 = values[(i + 2) % n];
    return basis((t - i / n) * n, v0, v1, v2, v3);
  };
}

// node_modules/d3-interpolate/src/constant.js
var constant_default2 = (x) => () => x;

// node_modules/d3-interpolate/src/color.js
function linear(a, d) {
  return function(t) {
    return a + t * d;
  };
}
function exponential(a, b, y) {
  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {
    return Math.pow(a + t * b, y);
  };
}
function gamma(y) {
  return (y = +y) === 1 ? nogamma : function(a, b) {
    return b - a ? exponential(a, b, y) : constant_default2(isNaN(a) ? b : a);
  };
}
function nogamma(a, b) {
  var d = b - a;
  return d ? linear(a, d) : constant_default2(isNaN(a) ? b : a);
}

// node_modules/d3-interpolate/src/rgb.js
var rgb_default = function rgbGamma(y) {
  var color2 = gamma(y);
  function rgb2(start2, end) {
    var r = color2((start2 = rgb(start2)).r, (end = rgb(end)).r), g = color2(start2.g, end.g), b = color2(start2.b, end.b), opacity = nogamma(start2.opacity, end.opacity);
    return function(t) {
      start2.r = r(t);
      start2.g = g(t);
      start2.b = b(t);
      start2.opacity = opacity(t);
      return start2 + "";
    };
  }
  rgb2.gamma = rgbGamma;
  return rgb2;
}(1);
function rgbSpline(spline) {
  return function(colors) {
    var n = colors.length, r = new Array(n), g = new Array(n), b = new Array(n), i, color2;
    for (i = 0; i < n; ++i) {
      color2 = rgb(colors[i]);
      r[i] = color2.r || 0;
      g[i] = color2.g || 0;
      b[i] = color2.b || 0;
    }
    r = spline(r);
    g = spline(g);
    b = spline(b);
    color2.opacity = 1;
    return function(t) {
      color2.r = r(t);
      color2.g = g(t);
      color2.b = b(t);
      return color2 + "";
    };
  };
}
var rgbBasis = rgbSpline(basis_default);
var rgbBasisClosed = rgbSpline(basisClosed_default);

// node_modules/d3-interpolate/src/numberArray.js
function numberArray_default(a, b) {
  if (!b)
    b = [];
  var n = a ? Math.min(b.length, a.length) : 0, c = b.slice(), i;
  return function(t) {
    for (i = 0; i < n; ++i)
      c[i] = a[i] * (1 - t) + b[i] * t;
    return c;
  };
}
function isNumberArray(x) {
  return ArrayBuffer.isView(x) && !(x instanceof DataView);
}

// node_modules/d3-interpolate/src/array.js
function genericArray(a, b) {
  var nb = b ? b.length : 0, na = a ? Math.min(nb, a.length) : 0, x = new Array(na), c = new Array(nb), i;
  for (i = 0; i < na; ++i)
    x[i] = value_default(a[i], b[i]);
  for (; i < nb; ++i)
    c[i] = b[i];
  return function(t) {
    for (i = 0; i < na; ++i)
      c[i] = x[i](t);
    return c;
  };
}

// node_modules/d3-interpolate/src/date.js
function date_default(a, b) {
  var d = /* @__PURE__ */ new Date();
  return a = +a, b = +b, function(t) {
    return d.setTime(a * (1 - t) + b * t), d;
  };
}

// node_modules/d3-interpolate/src/number.js
function number_default(a, b) {
  return a = +a, b = +b, function(t) {
    return a * (1 - t) + b * t;
  };
}

// node_modules/d3-interpolate/src/object.js
function object_default(a, b) {
  var i = {}, c = {}, k;
  if (a === null || typeof a !== "object")
    a = {};
  if (b === null || typeof b !== "object")
    b = {};
  for (k in b) {
    if (k in a) {
      i[k] = value_default(a[k], b[k]);
    } else {
      c[k] = b[k];
    }
  }
  return function(t) {
    for (k in i)
      c[k] = i[k](t);
    return c;
  };
}

// node_modules/d3-interpolate/src/string.js
var reA = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
var reB = new RegExp(reA.source, "g");
function zero2(b) {
  return function() {
    return b;
  };
}
function one(b) {
  return function(t) {
    return b(t) + "";
  };
}
function string_default(a, b) {
  var bi = reA.lastIndex = reB.lastIndex = 0, am, bm, bs, i = -1, s = [], q = [];
  a = a + "", b = b + "";
  while ((am = reA.exec(a)) && (bm = reB.exec(b))) {
    if ((bs = bm.index) > bi) {
      bs = b.slice(bi, bs);
      if (s[i])
        s[i] += bs;
      else
        s[++i] = bs;
    }
    if ((am = am[0]) === (bm = bm[0])) {
      if (s[i])
        s[i] += bm;
      else
        s[++i] = bm;
    } else {
      s[++i] = null;
      q.push({ i, x: number_default(am, bm) });
    }
    bi = reB.lastIndex;
  }
  if (bi < b.length) {
    bs = b.slice(bi);
    if (s[i])
      s[i] += bs;
    else
      s[++i] = bs;
  }
  return s.length < 2 ? q[0] ? one(q[0].x) : zero2(b) : (b = q.length, function(t) {
    for (var i2 = 0, o; i2 < b; ++i2)
      s[(o = q[i2]).i] = o.x(t);
    return s.join("");
  });
}

// node_modules/d3-interpolate/src/value.js
function value_default(a, b) {
  var t = typeof b, c;
  return b == null || t === "boolean" ? constant_default2(b) : (t === "number" ? number_default : t === "string" ? (c = color(b)) ? (b = c, rgb_default) : string_default : b instanceof color ? rgb_default : b instanceof Date ? date_default : isNumberArray(b) ? numberArray_default : Array.isArray(b) ? genericArray : typeof b.valueOf !== "function" && typeof b.toString !== "function" || isNaN(b) ? object_default : number_default)(a, b);
}

// node_modules/d3-interpolate/src/round.js
function round_default(a, b) {
  return a = +a, b = +b, function(t) {
    return Math.round(a * (1 - t) + b * t);
  };
}

// node_modules/d3-interpolate/src/transform/decompose.js
var degrees = 180 / Math.PI;
var identity = {
  translateX: 0,
  translateY: 0,
  rotate: 0,
  skewX: 0,
  scaleX: 1,
  scaleY: 1
};
function decompose_default(a, b, c, d, e, f) {
  var scaleX, scaleY, skewX;
  if (scaleX = Math.sqrt(a * a + b * b))
    a /= scaleX, b /= scaleX;
  if (skewX = a * c + b * d)
    c -= a * skewX, d -= b * skewX;
  if (scaleY = Math.sqrt(c * c + d * d))
    c /= scaleY, d /= scaleY, skewX /= scaleY;
  if (a * d < b * c)
    a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;
  return {
    translateX: e,
    translateY: f,
    rotate: Math.atan2(b, a) * degrees,
    skewX: Math.atan(skewX) * degrees,
    scaleX,
    scaleY
  };
}

// node_modules/d3-interpolate/src/transform/parse.js
var svgNode;
function parseCss(value) {
  const m = new (typeof DOMMatrix === "function" ? DOMMatrix : WebKitCSSMatrix)(value + "");
  return m.isIdentity ? identity : decompose_default(m.a, m.b, m.c, m.d, m.e, m.f);
}
function parseSvg(value) {
  if (value == null)
    return identity;
  if (!svgNode)
    svgNode = document.createElementNS("http://www.w3.org/2000/svg", "g");
  svgNode.setAttribute("transform", value);
  if (!(value = svgNode.transform.baseVal.consolidate()))
    return identity;
  value = value.matrix;
  return decompose_default(value.a, value.b, value.c, value.d, value.e, value.f);
}

// node_modules/d3-interpolate/src/transform/index.js
function interpolateTransform(parse, pxComma, pxParen, degParen) {
  function pop(s) {
    return s.length ? s.pop() + " " : "";
  }
  function translate(xa, ya, xb, yb, s, q) {
    if (xa !== xb || ya !== yb) {
      var i = s.push("translate(", null, pxComma, null, pxParen);
      q.push({ i: i - 4, x: number_default(xa, xb) }, { i: i - 2, x: number_default(ya, yb) });
    } else if (xb || yb) {
      s.push("translate(" + xb + pxComma + yb + pxParen);
    }
  }
  function rotate(a, b, s, q) {
    if (a !== b) {
      if (a - b > 180)
        b += 360;
      else if (b - a > 180)
        a += 360;
      q.push({ i: s.push(pop(s) + "rotate(", null, degParen) - 2, x: number_default(a, b) });
    } else if (b) {
      s.push(pop(s) + "rotate(" + b + degParen);
    }
  }
  function skewX(a, b, s, q) {
    if (a !== b) {
      q.push({ i: s.push(pop(s) + "skewX(", null, degParen) - 2, x: number_default(a, b) });
    } else if (b) {
      s.push(pop(s) + "skewX(" + b + degParen);
    }
  }
  function scale(xa, ya, xb, yb, s, q) {
    if (xa !== xb || ya !== yb) {
      var i = s.push(pop(s) + "scale(", null, ",", null, ")");
      q.push({ i: i - 4, x: number_default(xa, xb) }, { i: i - 2, x: number_default(ya, yb) });
    } else if (xb !== 1 || yb !== 1) {
      s.push(pop(s) + "scale(" + xb + "," + yb + ")");
    }
  }
  return function(a, b) {
    var s = [], q = [];
    a = parse(a), b = parse(b);
    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);
    rotate(a.rotate, b.rotate, s, q);
    skewX(a.skewX, b.skewX, s, q);
    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);
    a = b = null;
    return function(t) {
      var i = -1, n = q.length, o;
      while (++i < n)
        s[(o = q[i]).i] = o.x(t);
      return s.join("");
    };
  };
}
var interpolateTransformCss = interpolateTransform(parseCss, "px, ", "px)", "deg)");
var interpolateTransformSvg = interpolateTransform(parseSvg, ", ", ")", ")");

// node_modules/d3-timer/src/timer.js
var frame = 0;
var timeout = 0;
var interval = 0;
var pokeDelay = 1e3;
var taskHead;
var taskTail;
var clockLast = 0;
var clockNow = 0;
var clockSkew = 0;
var clock = typeof performance === "object" && performance.now ? performance : Date;
var setFrame = typeof window === "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) {
  setTimeout(f, 17);
};
function now() {
  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);
}
function clearNow() {
  clockNow = 0;
}
function Timer() {
  this._call = this._time = this._next = null;
}
Timer.prototype = timer.prototype = {
  constructor: Timer,
  restart: function(callback, delay, time) {
    if (typeof callback !== "function")
      throw new TypeError("callback is not a function");
    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);
    if (!this._next && taskTail !== this) {
      if (taskTail)
        taskTail._next = this;
      else
        taskHead = this;
      taskTail = this;
    }
    this._call = callback;
    this._time = time;
    sleep();
  },
  stop: function() {
    if (this._call) {
      this._call = null;
      this._time = Infinity;
      sleep();
    }
  }
};
function timer(callback, delay, time) {
  var t = new Timer();
  t.restart(callback, delay, time);
  return t;
}
function timerFlush() {
  now();
  ++frame;
  var t = taskHead, e;
  while (t) {
    if ((e = clockNow - t._time) >= 0)
      t._call.call(void 0, e);
    t = t._next;
  }
  --frame;
}
function wake() {
  clockNow = (clockLast = clock.now()) + clockSkew;
  frame = timeout = 0;
  try {
    timerFlush();
  } finally {
    frame = 0;
    nap();
    clockNow = 0;
  }
}
function poke() {
  var now2 = clock.now(), delay = now2 - clockLast;
  if (delay > pokeDelay)
    clockSkew -= delay, clockLast = now2;
}
function nap() {
  var t0, t1 = taskHead, t2, time = Infinity;
  while (t1) {
    if (t1._call) {
      if (time > t1._time)
        time = t1._time;
      t0 = t1, t1 = t1._next;
    } else {
      t2 = t1._next, t1._next = null;
      t1 = t0 ? t0._next = t2 : taskHead = t2;
    }
  }
  taskTail = t0;
  sleep(time);
}
function sleep(time) {
  if (frame)
    return;
  if (timeout)
    timeout = clearTimeout(timeout);
  var delay = time - clockNow;
  if (delay > 24) {
    if (time < Infinity)
      timeout = setTimeout(wake, time - clock.now() - clockSkew);
    if (interval)
      interval = clearInterval(interval);
  } else {
    if (!interval)
      clockLast = clock.now(), interval = setInterval(poke, pokeDelay);
    frame = 1, setFrame(wake);
  }
}

// node_modules/d3-timer/src/timeout.js
function timeout_default(callback, delay, time) {
  var t = new Timer();
  delay = delay == null ? 0 : +delay;
  t.restart((elapsed) => {
    t.stop();
    callback(elapsed + delay);
  }, delay, time);
  return t;
}

// node_modules/d3-transition/src/transition/schedule.js
var emptyOn = dispatch_default("start", "end", "cancel", "interrupt");
var emptyTween = [];
var CREATED = 0;
var SCHEDULED = 1;
var STARTING = 2;
var STARTED = 3;
var RUNNING = 4;
var ENDING = 5;
var ENDED = 6;
function schedule_default(node, name, id2, index, group, timing) {
  var schedules = node.__transition;
  if (!schedules)
    node.__transition = {};
  else if (id2 in schedules)
    return;
  create(node, id2, {
    name,
    index,
    // For context during callback.
    group,
    // For context during callback.
    on: emptyOn,
    tween: emptyTween,
    time: timing.time,
    delay: timing.delay,
    duration: timing.duration,
    ease: timing.ease,
    timer: null,
    state: CREATED
  });
}
function init(node, id2) {
  var schedule = get2(node, id2);
  if (schedule.state > CREATED)
    throw new Error("too late; already scheduled");
  return schedule;
}
function set2(node, id2) {
  var schedule = get2(node, id2);
  if (schedule.state > STARTED)
    throw new Error("too late; already running");
  return schedule;
}
function get2(node, id2) {
  var schedule = node.__transition;
  if (!schedule || !(schedule = schedule[id2]))
    throw new Error("transition not found");
  return schedule;
}
function create(node, id2, self) {
  var schedules = node.__transition, tween;
  schedules[id2] = self;
  self.timer = timer(schedule, 0, self.time);
  function schedule(elapsed) {
    self.state = SCHEDULED;
    self.timer.restart(start2, self.delay, self.time);
    if (self.delay <= elapsed)
      start2(elapsed - self.delay);
  }
  function start2(elapsed) {
    var i, j, n, o;
    if (self.state !== SCHEDULED)
      return stop();
    for (i in schedules) {
      o = schedules[i];
      if (o.name !== self.name)
        continue;
      if (o.state === STARTED)
        return timeout_default(start2);
      if (o.state === RUNNING) {
        o.state = ENDED;
        o.timer.stop();
        o.on.call("interrupt", node, node.__data__, o.index, o.group);
        delete schedules[i];
      } else if (+i < id2) {
        o.state = ENDED;
        o.timer.stop();
        o.on.call("cancel", node, node.__data__, o.index, o.group);
        delete schedules[i];
      }
    }
    timeout_default(function() {
      if (self.state === STARTED) {
        self.state = RUNNING;
        self.timer.restart(tick, self.delay, self.time);
        tick(elapsed);
      }
    });
    self.state = STARTING;
    self.on.call("start", node, node.__data__, self.index, self.group);
    if (self.state !== STARTING)
      return;
    self.state = STARTED;
    tween = new Array(n = self.tween.length);
    for (i = 0, j = -1; i < n; ++i) {
      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {
        tween[++j] = o;
      }
    }
    tween.length = j + 1;
  }
  function tick(elapsed) {
    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1), i = -1, n = tween.length;
    while (++i < n) {
      tween[i].call(node, t);
    }
    if (self.state === ENDING) {
      self.on.call("end", node, node.__data__, self.index, self.group);
      stop();
    }
  }
  function stop() {
    self.state = ENDED;
    self.timer.stop();
    delete schedules[id2];
    for (var i in schedules)
      return;
    delete node.__transition;
  }
}

// node_modules/d3-transition/src/interrupt.js
function interrupt_default(node, name) {
  var schedules = node.__transition, schedule, active, empty2 = true, i;
  if (!schedules)
    return;
  name = name == null ? null : name + "";
  for (i in schedules) {
    if ((schedule = schedules[i]).name !== name) {
      empty2 = false;
      continue;
    }
    active = schedule.state > STARTING && schedule.state < ENDING;
    schedule.state = ENDED;
    schedule.timer.stop();
    schedule.on.call(active ? "interrupt" : "cancel", node, node.__data__, schedule.index, schedule.group);
    delete schedules[i];
  }
  if (empty2)
    delete node.__transition;
}

// node_modules/d3-transition/src/selection/interrupt.js
function interrupt_default2(name) {
  return this.each(function() {
    interrupt_default(this, name);
  });
}

// node_modules/d3-transition/src/transition/tween.js
function tweenRemove(id2, name) {
  var tween0, tween1;
  return function() {
    var schedule = set2(this, id2), tween = schedule.tween;
    if (tween !== tween0) {
      tween1 = tween0 = tween;
      for (var i = 0, n = tween1.length; i < n; ++i) {
        if (tween1[i].name === name) {
          tween1 = tween1.slice();
          tween1.splice(i, 1);
          break;
        }
      }
    }
    schedule.tween = tween1;
  };
}
function tweenFunction(id2, name, value) {
  var tween0, tween1;
  if (typeof value !== "function")
    throw new Error();
  return function() {
    var schedule = set2(this, id2), tween = schedule.tween;
    if (tween !== tween0) {
      tween1 = (tween0 = tween).slice();
      for (var t = { name, value }, i = 0, n = tween1.length; i < n; ++i) {
        if (tween1[i].name === name) {
          tween1[i] = t;
          break;
        }
      }
      if (i === n)
        tween1.push(t);
    }
    schedule.tween = tween1;
  };
}
function tween_default(name, value) {
  var id2 = this._id;
  name += "";
  if (arguments.length < 2) {
    var tween = get2(this.node(), id2).tween;
    for (var i = 0, n = tween.length, t; i < n; ++i) {
      if ((t = tween[i]).name === name) {
        return t.value;
      }
    }
    return null;
  }
  return this.each((value == null ? tweenRemove : tweenFunction)(id2, name, value));
}
function tweenValue(transition2, name, value) {
  var id2 = transition2._id;
  transition2.each(function() {
    var schedule = set2(this, id2);
    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);
  });
  return function(node) {
    return get2(node, id2).value[name];
  };
}

// node_modules/d3-transition/src/transition/interpolate.js
function interpolate_default(a, b) {
  var c;
  return (typeof b === "number" ? number_default : b instanceof color ? rgb_default : (c = color(b)) ? (b = c, rgb_default) : string_default)(a, b);
}

// node_modules/d3-transition/src/transition/attr.js
function attrRemove2(name) {
  return function() {
    this.removeAttribute(name);
  };
}
function attrRemoveNS2(fullname) {
  return function() {
    this.removeAttributeNS(fullname.space, fullname.local);
  };
}
function attrConstant2(name, interpolate, value1) {
  var string00, string1 = value1 + "", interpolate0;
  return function() {
    var string0 = this.getAttribute(name);
    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);
  };
}
function attrConstantNS2(fullname, interpolate, value1) {
  var string00, string1 = value1 + "", interpolate0;
  return function() {
    var string0 = this.getAttributeNS(fullname.space, fullname.local);
    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);
  };
}
function attrFunction2(name, interpolate, value) {
  var string00, string10, interpolate0;
  return function() {
    var string0, value1 = value(this), string1;
    if (value1 == null)
      return void this.removeAttribute(name);
    string0 = this.getAttribute(name);
    string1 = value1 + "";
    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));
  };
}
function attrFunctionNS2(fullname, interpolate, value) {
  var string00, string10, interpolate0;
  return function() {
    var string0, value1 = value(this), string1;
    if (value1 == null)
      return void this.removeAttributeNS(fullname.space, fullname.local);
    string0 = this.getAttributeNS(fullname.space, fullname.local);
    string1 = value1 + "";
    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));
  };
}
function attr_default2(name, value) {
  var fullname = namespace_default(name), i = fullname === "transform" ? interpolateTransformSvg : interpolate_default;
  return this.attrTween(name, typeof value === "function" ? (fullname.local ? attrFunctionNS2 : attrFunction2)(fullname, i, tweenValue(this, "attr." + name, value)) : value == null ? (fullname.local ? attrRemoveNS2 : attrRemove2)(fullname) : (fullname.local ? attrConstantNS2 : attrConstant2)(fullname, i, value));
}

// node_modules/d3-transition/src/transition/attrTween.js
function attrInterpolate(name, i) {
  return function(t) {
    this.setAttribute(name, i.call(this, t));
  };
}
function attrInterpolateNS(fullname, i) {
  return function(t) {
    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));
  };
}
function attrTweenNS(fullname, value) {
  var t0, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0)
      t0 = (i0 = i) && attrInterpolateNS(fullname, i);
    return t0;
  }
  tween._value = value;
  return tween;
}
function attrTween(name, value) {
  var t0, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0)
      t0 = (i0 = i) && attrInterpolate(name, i);
    return t0;
  }
  tween._value = value;
  return tween;
}
function attrTween_default(name, value) {
  var key = "attr." + name;
  if (arguments.length < 2)
    return (key = this.tween(key)) && key._value;
  if (value == null)
    return this.tween(key, null);
  if (typeof value !== "function")
    throw new Error();
  var fullname = namespace_default(name);
  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));
}

// node_modules/d3-transition/src/transition/delay.js
function delayFunction(id2, value) {
  return function() {
    init(this, id2).delay = +value.apply(this, arguments);
  };
}
function delayConstant(id2, value) {
  return value = +value, function() {
    init(this, id2).delay = value;
  };
}
function delay_default(value) {
  var id2 = this._id;
  return arguments.length ? this.each((typeof value === "function" ? delayFunction : delayConstant)(id2, value)) : get2(this.node(), id2).delay;
}

// node_modules/d3-transition/src/transition/duration.js
function durationFunction(id2, value) {
  return function() {
    set2(this, id2).duration = +value.apply(this, arguments);
  };
}
function durationConstant(id2, value) {
  return value = +value, function() {
    set2(this, id2).duration = value;
  };
}
function duration_default(value) {
  var id2 = this._id;
  return arguments.length ? this.each((typeof value === "function" ? durationFunction : durationConstant)(id2, value)) : get2(this.node(), id2).duration;
}

// node_modules/d3-transition/src/transition/ease.js
function easeConstant(id2, value) {
  if (typeof value !== "function")
    throw new Error();
  return function() {
    set2(this, id2).ease = value;
  };
}
function ease_default(value) {
  var id2 = this._id;
  return arguments.length ? this.each(easeConstant(id2, value)) : get2(this.node(), id2).ease;
}

// node_modules/d3-transition/src/transition/easeVarying.js
function easeVarying(id2, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (typeof v !== "function")
      throw new Error();
    set2(this, id2).ease = v;
  };
}
function easeVarying_default(value) {
  if (typeof value !== "function")
    throw new Error();
  return this.each(easeVarying(this._id, value));
}

// node_modules/d3-transition/src/transition/filter.js
function filter_default2(match) {
  if (typeof match !== "function")
    match = matcher_default(match);
  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {
      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {
        subgroup.push(node);
      }
    }
  }
  return new Transition(subgroups, this._parents, this._name, this._id);
}

// node_modules/d3-transition/src/transition/merge.js
function merge_default2(transition2) {
  if (transition2._id !== this._id)
    throw new Error();
  for (var groups0 = this._groups, groups1 = transition2._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {
    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group0[i] || group1[i]) {
        merge[i] = node;
      }
    }
  }
  for (; j < m0; ++j) {
    merges[j] = groups0[j];
  }
  return new Transition(merges, this._parents, this._name, this._id);
}

// node_modules/d3-transition/src/transition/on.js
function start(name) {
  return (name + "").trim().split(/^|\s+/).every(function(t) {
    var i = t.indexOf(".");
    if (i >= 0)
      t = t.slice(0, i);
    return !t || t === "start";
  });
}
function onFunction(id2, name, listener) {
  var on0, on1, sit = start(name) ? init : set2;
  return function() {
    var schedule = sit(this, id2), on = schedule.on;
    if (on !== on0)
      (on1 = (on0 = on).copy()).on(name, listener);
    schedule.on = on1;
  };
}
function on_default2(name, listener) {
  var id2 = this._id;
  return arguments.length < 2 ? get2(this.node(), id2).on.on(name) : this.each(onFunction(id2, name, listener));
}

// node_modules/d3-transition/src/transition/remove.js
function removeFunction(id2) {
  return function() {
    var parent = this.parentNode;
    for (var i in this.__transition)
      if (+i !== id2)
        return;
    if (parent)
      parent.removeChild(this);
  };
}
function remove_default2() {
  return this.on("end.remove", removeFunction(this._id));
}

// node_modules/d3-transition/src/transition/select.js
function select_default3(select) {
  var name = this._name, id2 = this._id;
  if (typeof select !== "function")
    select = selector_default(select);
  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {
      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {
        if ("__data__" in node)
          subnode.__data__ = node.__data__;
        subgroup[i] = subnode;
        schedule_default(subgroup[i], name, id2, i, subgroup, get2(node, id2));
      }
    }
  }
  return new Transition(subgroups, this._parents, name, id2);
}

// node_modules/d3-transition/src/transition/selectAll.js
function selectAll_default2(select) {
  var name = this._name, id2 = this._id;
  if (typeof select !== "function")
    select = selectorAll_default(select);
  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        for (var children2 = select.call(node, node.__data__, i, group), child, inherit2 = get2(node, id2), k = 0, l = children2.length; k < l; ++k) {
          if (child = children2[k]) {
            schedule_default(child, name, id2, k, children2, inherit2);
          }
        }
        subgroups.push(children2);
        parents.push(node);
      }
    }
  }
  return new Transition(subgroups, parents, name, id2);
}

// node_modules/d3-transition/src/transition/selection.js
var Selection2 = selection_default.prototype.constructor;
function selection_default2() {
  return new Selection2(this._groups, this._parents);
}

// node_modules/d3-transition/src/transition/style.js
function styleNull(name, interpolate) {
  var string00, string10, interpolate0;
  return function() {
    var string0 = styleValue(this, name), string1 = (this.style.removeProperty(name), styleValue(this, name));
    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : interpolate0 = interpolate(string00 = string0, string10 = string1);
  };
}
function styleRemove2(name) {
  return function() {
    this.style.removeProperty(name);
  };
}
function styleConstant2(name, interpolate, value1) {
  var string00, string1 = value1 + "", interpolate0;
  return function() {
    var string0 = styleValue(this, name);
    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);
  };
}
function styleFunction2(name, interpolate, value) {
  var string00, string10, interpolate0;
  return function() {
    var string0 = styleValue(this, name), value1 = value(this), string1 = value1 + "";
    if (value1 == null)
      string1 = value1 = (this.style.removeProperty(name), styleValue(this, name));
    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));
  };
}
function styleMaybeRemove(id2, name) {
  var on0, on1, listener0, key = "style." + name, event = "end." + key, remove2;
  return function() {
    var schedule = set2(this, id2), on = schedule.on, listener = schedule.value[key] == null ? remove2 || (remove2 = styleRemove2(name)) : void 0;
    if (on !== on0 || listener0 !== listener)
      (on1 = (on0 = on).copy()).on(event, listener0 = listener);
    schedule.on = on1;
  };
}
function style_default2(name, value, priority) {
  var i = (name += "") === "transform" ? interpolateTransformCss : interpolate_default;
  return value == null ? this.styleTween(name, styleNull(name, i)).on("end.style." + name, styleRemove2(name)) : typeof value === "function" ? this.styleTween(name, styleFunction2(name, i, tweenValue(this, "style." + name, value))).each(styleMaybeRemove(this._id, name)) : this.styleTween(name, styleConstant2(name, i, value), priority).on("end.style." + name, null);
}

// node_modules/d3-transition/src/transition/styleTween.js
function styleInterpolate(name, i, priority) {
  return function(t) {
    this.style.setProperty(name, i.call(this, t), priority);
  };
}
function styleTween(name, value, priority) {
  var t, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0)
      t = (i0 = i) && styleInterpolate(name, i, priority);
    return t;
  }
  tween._value = value;
  return tween;
}
function styleTween_default(name, value, priority) {
  var key = "style." + (name += "");
  if (arguments.length < 2)
    return (key = this.tween(key)) && key._value;
  if (value == null)
    return this.tween(key, null);
  if (typeof value !== "function")
    throw new Error();
  return this.tween(key, styleTween(name, value, priority == null ? "" : priority));
}

// node_modules/d3-transition/src/transition/text.js
function textConstant2(value) {
  return function() {
    this.textContent = value;
  };
}
function textFunction2(value) {
  return function() {
    var value1 = value(this);
    this.textContent = value1 == null ? "" : value1;
  };
}
function text_default2(value) {
  return this.tween("text", typeof value === "function" ? textFunction2(tweenValue(this, "text", value)) : textConstant2(value == null ? "" : value + ""));
}

// node_modules/d3-transition/src/transition/textTween.js
function textInterpolate(i) {
  return function(t) {
    this.textContent = i.call(this, t);
  };
}
function textTween(value) {
  var t0, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0)
      t0 = (i0 = i) && textInterpolate(i);
    return t0;
  }
  tween._value = value;
  return tween;
}
function textTween_default(value) {
  var key = "text";
  if (arguments.length < 1)
    return (key = this.tween(key)) && key._value;
  if (value == null)
    return this.tween(key, null);
  if (typeof value !== "function")
    throw new Error();
  return this.tween(key, textTween(value));
}

// node_modules/d3-transition/src/transition/transition.js
function transition_default() {
  var name = this._name, id0 = this._id, id1 = newId();
  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        var inherit2 = get2(node, id0);
        schedule_default(node, name, id1, i, group, {
          time: inherit2.time + inherit2.delay + inherit2.duration,
          delay: 0,
          duration: inherit2.duration,
          ease: inherit2.ease
        });
      }
    }
  }
  return new Transition(groups, this._parents, name, id1);
}

// node_modules/d3-transition/src/transition/end.js
function end_default() {
  var on0, on1, that = this, id2 = that._id, size = that.size();
  return new Promise(function(resolve, reject) {
    var cancel = { value: reject }, end = { value: function() {
      if (--size === 0)
        resolve();
    } };
    that.each(function() {
      var schedule = set2(this, id2), on = schedule.on;
      if (on !== on0) {
        on1 = (on0 = on).copy();
        on1._.cancel.push(cancel);
        on1._.interrupt.push(cancel);
        on1._.end.push(end);
      }
      schedule.on = on1;
    });
    if (size === 0)
      resolve();
  });
}

// node_modules/d3-transition/src/transition/index.js
var id = 0;
function Transition(groups, parents, name, id2) {
  this._groups = groups;
  this._parents = parents;
  this._name = name;
  this._id = id2;
}
function transition(name) {
  return selection_default().transition(name);
}
function newId() {
  return ++id;
}
var selection_prototype = selection_default.prototype;
Transition.prototype = transition.prototype = {
  constructor: Transition,
  select: select_default3,
  selectAll: selectAll_default2,
  selectChild: selection_prototype.selectChild,
  selectChildren: selection_prototype.selectChildren,
  filter: filter_default2,
  merge: merge_default2,
  selection: selection_default2,
  transition: transition_default,
  call: selection_prototype.call,
  nodes: selection_prototype.nodes,
  node: selection_prototype.node,
  size: selection_prototype.size,
  empty: selection_prototype.empty,
  each: selection_prototype.each,
  on: on_default2,
  attr: attr_default2,
  attrTween: attrTween_default,
  style: style_default2,
  styleTween: styleTween_default,
  text: text_default2,
  textTween: textTween_default,
  remove: remove_default2,
  tween: tween_default,
  delay: delay_default,
  duration: duration_default,
  ease: ease_default,
  easeVarying: easeVarying_default,
  end: end_default,
  [Symbol.iterator]: selection_prototype[Symbol.iterator]
};

// node_modules/d3-ease/src/cubic.js
function cubicInOut(t) {
  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;
}

// node_modules/d3-transition/src/selection/transition.js
var defaultTiming = {
  time: null,
  // Set on use.
  delay: 0,
  duration: 250,
  ease: cubicInOut
};
function inherit(node, id2) {
  var timing;
  while (!(timing = node.__transition) || !(timing = timing[id2])) {
    if (!(node = node.parentNode)) {
      throw new Error(`transition ${id2} not found`);
    }
  }
  return timing;
}
function transition_default2(name) {
  var id2, timing;
  if (name instanceof Transition) {
    id2 = name._id, name = name._name;
  } else {
    id2 = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + "";
  }
  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        schedule_default(node, name, id2, i, group, timing || inherit(node, id2));
      }
    }
  }
  return new Transition(groups, this._parents, name, id2);
}

// node_modules/d3-transition/src/selection/index.js
selection_default.prototype.interrupt = interrupt_default2;
selection_default.prototype.transition = transition_default2;

// node_modules/d3-brush/src/brush.js
var { abs, max, min } = Math;
function number1(e) {
  return [+e[0], +e[1]];
}
function number22(e) {
  return [number1(e[0]), number1(e[1])];
}
var X = {
  name: "x",
  handles: ["w", "e"].map(type),
  input: function(x, e) {
    return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]];
  },
  output: function(xy) {
    return xy && [xy[0][0], xy[1][0]];
  }
};
var Y = {
  name: "y",
  handles: ["n", "s"].map(type),
  input: function(y, e) {
    return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]];
  },
  output: function(xy) {
    return xy && [xy[0][1], xy[1][1]];
  }
};
var XY = {
  name: "xy",
  handles: ["n", "w", "e", "s", "nw", "ne", "sw", "se"].map(type),
  input: function(xy) {
    return xy == null ? null : number22(xy);
  },
  output: function(xy) {
    return xy;
  }
};
function type(t) {
  return { type: t };
}

// node_modules/d3-format/src/formatDecimal.js
function formatDecimal_default(x) {
  return Math.abs(x = Math.round(x)) >= 1e21 ? x.toLocaleString("en").replace(/,/g, "") : x.toString(10);
}
function formatDecimalParts(x, p) {
  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf("e")) < 0)
    return null;
  var i, coefficient = x.slice(0, i);
  return [
    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,
    +x.slice(i + 1)
  ];
}

// node_modules/d3-format/src/exponent.js
function exponent_default(x) {
  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;
}

// node_modules/d3-format/src/formatGroup.js
function formatGroup_default(grouping, thousands) {
  return function(value, width) {
    var i = value.length, t = [], j = 0, g = grouping[0], length = 0;
    while (i > 0 && g > 0) {
      if (length + g + 1 > width)
        g = Math.max(1, width - length);
      t.push(value.substring(i -= g, i + g));
      if ((length += g + 1) > width)
        break;
      g = grouping[j = (j + 1) % grouping.length];
    }
    return t.reverse().join(thousands);
  };
}

// node_modules/d3-format/src/formatNumerals.js
function formatNumerals_default(numerals) {
  return function(value) {
    return value.replace(/[0-9]/g, function(i) {
      return numerals[+i];
    });
  };
}

// node_modules/d3-format/src/formatSpecifier.js
var re = /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;
function formatSpecifier(specifier) {
  if (!(match = re.exec(specifier)))
    throw new Error("invalid format: " + specifier);
  var match;
  return new FormatSpecifier({
    fill: match[1],
    align: match[2],
    sign: match[3],
    symbol: match[4],
    zero: match[5],
    width: match[6],
    comma: match[7],
    precision: match[8] && match[8].slice(1),
    trim: match[9],
    type: match[10]
  });
}
formatSpecifier.prototype = FormatSpecifier.prototype;
function FormatSpecifier(specifier) {
  this.fill = specifier.fill === void 0 ? " " : specifier.fill + "";
  this.align = specifier.align === void 0 ? ">" : specifier.align + "";
  this.sign = specifier.sign === void 0 ? "-" : specifier.sign + "";
  this.symbol = specifier.symbol === void 0 ? "" : specifier.symbol + "";
  this.zero = !!specifier.zero;
  this.width = specifier.width === void 0 ? void 0 : +specifier.width;
  this.comma = !!specifier.comma;
  this.precision = specifier.precision === void 0 ? void 0 : +specifier.precision;
  this.trim = !!specifier.trim;
  this.type = specifier.type === void 0 ? "" : specifier.type + "";
}
FormatSpecifier.prototype.toString = function() {
  return this.fill + this.align + this.sign + this.symbol + (this.zero ? "0" : "") + (this.width === void 0 ? "" : Math.max(1, this.width | 0)) + (this.comma ? "," : "") + (this.precision === void 0 ? "" : "." + Math.max(0, this.precision | 0)) + (this.trim ? "~" : "") + this.type;
};

// node_modules/d3-format/src/formatTrim.js
function formatTrim_default(s) {
  out:
    for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {
      switch (s[i]) {
        case ".":
          i0 = i1 = i;
          break;
        case "0":
          if (i0 === 0)
            i0 = i;
          i1 = i;
          break;
        default:
          if (!+s[i])
            break out;
          if (i0 > 0)
            i0 = 0;
          break;
      }
    }
  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;
}

// node_modules/d3-format/src/formatPrefixAuto.js
var prefixExponent;
function formatPrefixAuto_default(x, p) {
  var d = formatDecimalParts(x, p);
  if (!d)
    return x + "";
  var coefficient = d[0], exponent = d[1], i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1, n = coefficient.length;
  return i === n ? coefficient : i > n ? coefficient + new Array(i - n + 1).join("0") : i > 0 ? coefficient.slice(0, i) + "." + coefficient.slice(i) : "0." + new Array(1 - i).join("0") + formatDecimalParts(x, Math.max(0, p + i - 1))[0];
}

// node_modules/d3-format/src/formatRounded.js
function formatRounded_default(x, p) {
  var d = formatDecimalParts(x, p);
  if (!d)
    return x + "";
  var coefficient = d[0], exponent = d[1];
  return exponent < 0 ? "0." + new Array(-exponent).join("0") + coefficient : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + "." + coefficient.slice(exponent + 1) : coefficient + new Array(exponent - coefficient.length + 2).join("0");
}

// node_modules/d3-format/src/formatTypes.js
var formatTypes_default = {
  "%": (x, p) => (x * 100).toFixed(p),
  "b": (x) => Math.round(x).toString(2),
  "c": (x) => x + "",
  "d": formatDecimal_default,
  "e": (x, p) => x.toExponential(p),
  "f": (x, p) => x.toFixed(p),
  "g": (x, p) => x.toPrecision(p),
  "o": (x) => Math.round(x).toString(8),
  "p": (x, p) => formatRounded_default(x * 100, p),
  "r": formatRounded_default,
  "s": formatPrefixAuto_default,
  "X": (x) => Math.round(x).toString(16).toUpperCase(),
  "x": (x) => Math.round(x).toString(16)
};

// node_modules/d3-format/src/identity.js
function identity_default2(x) {
  return x;
}

// node_modules/d3-format/src/locale.js
var map = Array.prototype.map;
var prefixes = ["y", "z", "a", "f", "p", "n", "\xB5", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"];
function locale_default(locale2) {
  var group = locale2.grouping === void 0 || locale2.thousands === void 0 ? identity_default2 : formatGroup_default(map.call(locale2.grouping, Number), locale2.thousands + ""), currencyPrefix = locale2.currency === void 0 ? "" : locale2.currency[0] + "", currencySuffix = locale2.currency === void 0 ? "" : locale2.currency[1] + "", decimal = locale2.decimal === void 0 ? "." : locale2.decimal + "", numerals = locale2.numerals === void 0 ? identity_default2 : formatNumerals_default(map.call(locale2.numerals, String)), percent = locale2.percent === void 0 ? "%" : locale2.percent + "", minus = locale2.minus === void 0 ? "\u2212" : locale2.minus + "", nan = locale2.nan === void 0 ? "NaN" : locale2.nan + "";
  function newFormat(specifier) {
    specifier = formatSpecifier(specifier);
    var fill = specifier.fill, align = specifier.align, sign = specifier.sign, symbol = specifier.symbol, zero3 = specifier.zero, width = specifier.width, comma = specifier.comma, precision = specifier.precision, trim = specifier.trim, type2 = specifier.type;
    if (type2 === "n")
      comma = true, type2 = "g";
    else if (!formatTypes_default[type2])
      precision === void 0 && (precision = 12), trim = true, type2 = "g";
    if (zero3 || fill === "0" && align === "=")
      zero3 = true, fill = "0", align = "=";
    var prefix = symbol === "$" ? currencyPrefix : symbol === "#" && /[boxX]/.test(type2) ? "0" + type2.toLowerCase() : "", suffix = symbol === "$" ? currencySuffix : /[%p]/.test(type2) ? percent : "";
    var formatType = formatTypes_default[type2], maybeSuffix = /[defgprs%]/.test(type2);
    precision = precision === void 0 ? 6 : /[gprs]/.test(type2) ? Math.max(1, Math.min(21, precision)) : Math.max(0, Math.min(20, precision));
    function format2(value) {
      var valuePrefix = prefix, valueSuffix = suffix, i, n, c;
      if (type2 === "c") {
        valueSuffix = formatType(value) + valueSuffix;
        value = "";
      } else {
        value = +value;
        var valueNegative = value < 0 || 1 / value < 0;
        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);
        if (trim)
          value = formatTrim_default(value);
        if (valueNegative && +value === 0 && sign !== "+")
          valueNegative = false;
        valuePrefix = (valueNegative ? sign === "(" ? sign : minus : sign === "-" || sign === "(" ? "" : sign) + valuePrefix;
        valueSuffix = (type2 === "s" ? prefixes[8 + prefixExponent / 3] : "") + valueSuffix + (valueNegative && sign === "(" ? ")" : "");
        if (maybeSuffix) {
          i = -1, n = value.length;
          while (++i < n) {
            if (c = value.charCodeAt(i), 48 > c || c > 57) {
              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;
              value = value.slice(0, i);
              break;
            }
          }
        }
      }
      if (comma && !zero3)
        value = group(value, Infinity);
      var length = valuePrefix.length + value.length + valueSuffix.length, padding = length < width ? new Array(width - length + 1).join(fill) : "";
      if (comma && zero3)
        value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = "";
      switch (align) {
        case "<":
          value = valuePrefix + value + valueSuffix + padding;
          break;
        case "=":
          value = valuePrefix + padding + value + valueSuffix;
          break;
        case "^":
          value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length);
          break;
        default:
          value = padding + valuePrefix + value + valueSuffix;
          break;
      }
      return numerals(value);
    }
    format2.toString = function() {
      return specifier + "";
    };
    return format2;
  }
  function formatPrefix2(specifier, value) {
    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = "f", specifier)), e = Math.max(-8, Math.min(8, Math.floor(exponent_default(value) / 3))) * 3, k = Math.pow(10, -e), prefix = prefixes[8 + e / 3];
    return function(value2) {
      return f(k * value2) + prefix;
    };
  }
  return {
    format: newFormat,
    formatPrefix: formatPrefix2
  };
}

// node_modules/d3-format/src/defaultLocale.js
var locale;
var format;
var formatPrefix;
defaultLocale({
  thousands: ",",
  grouping: [3],
  currency: ["$", ""]
});
function defaultLocale(definition) {
  locale = locale_default(definition);
  format = locale.format;
  formatPrefix = locale.formatPrefix;
  return locale;
}

// node_modules/d3-format/src/precisionFixed.js
function precisionFixed_default(step) {
  return Math.max(0, -exponent_default(Math.abs(step)));
}

// node_modules/d3-format/src/precisionPrefix.js
function precisionPrefix_default(step, value) {
  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent_default(value) / 3))) * 3 - exponent_default(Math.abs(step)));
}

// node_modules/d3-format/src/precisionRound.js
function precisionRound_default(step, max2) {
  step = Math.abs(step), max2 = Math.abs(max2) - step;
  return Math.max(0, exponent_default(max2) - exponent_default(step)) + 1;
}

// node_modules/d3-scale/src/init.js
function initRange(domain, range) {
  switch (arguments.length) {
    case 0:
      break;
    case 1:
      this.range(domain);
      break;
    default:
      this.range(range).domain(domain);
      break;
  }
  return this;
}

// node_modules/d3-scale/src/ordinal.js
var implicit = Symbol("implicit");
function ordinal() {
  var index = new InternMap(), domain = [], range = [], unknown = implicit;
  function scale(d) {
    let i = index.get(d);
    if (i === void 0) {
      if (unknown !== implicit)
        return unknown;
      index.set(d, i = domain.push(d) - 1);
    }
    return range[i % range.length];
  }
  scale.domain = function(_) {
    if (!arguments.length)
      return domain.slice();
    domain = [], index = new InternMap();
    for (const value of _) {
      if (index.has(value))
        continue;
      index.set(value, domain.push(value) - 1);
    }
    return scale;
  };
  scale.range = function(_) {
    return arguments.length ? (range = Array.from(_), scale) : range.slice();
  };
  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };
  scale.copy = function() {
    return ordinal(domain, range).unknown(unknown);
  };
  initRange.apply(scale, arguments);
  return scale;
}

// node_modules/d3-scale/src/constant.js
function constants(x) {
  return function() {
    return x;
  };
}

// node_modules/d3-scale/src/number.js
function number3(x) {
  return +x;
}

// node_modules/d3-scale/src/continuous.js
var unit = [0, 1];
function identity2(x) {
  return x;
}
function normalize(a, b) {
  return (b -= a = +a) ? function(x) {
    return (x - a) / b;
  } : constants(isNaN(b) ? NaN : 0.5);
}
function clamper(a, b) {
  var t;
  if (a > b)
    t = a, a = b, b = t;
  return function(x) {
    return Math.max(a, Math.min(b, x));
  };
}
function bimap(domain, range, interpolate) {
  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];
  if (d1 < d0)
    d0 = normalize(d1, d0), r0 = interpolate(r1, r0);
  else
    d0 = normalize(d0, d1), r0 = interpolate(r0, r1);
  return function(x) {
    return r0(d0(x));
  };
}
function polymap(domain, range, interpolate) {
  var j = Math.min(domain.length, range.length) - 1, d = new Array(j), r = new Array(j), i = -1;
  if (domain[j] < domain[0]) {
    domain = domain.slice().reverse();
    range = range.slice().reverse();
  }
  while (++i < j) {
    d[i] = normalize(domain[i], domain[i + 1]);
    r[i] = interpolate(range[i], range[i + 1]);
  }
  return function(x) {
    var i2 = bisect_default(domain, x, 1, j) - 1;
    return r[i2](d[i2](x));
  };
}
function copy(source, target) {
  return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown());
}
function transformer() {
  var domain = unit, range = unit, interpolate = value_default, transform2, untransform, unknown, clamp = identity2, piecewise, output, input;
  function rescale() {
    var n = Math.min(domain.length, range.length);
    if (clamp !== identity2)
      clamp = clamper(domain[0], domain[n - 1]);
    piecewise = n > 2 ? polymap : bimap;
    output = input = null;
    return scale;
  }
  function scale(x) {
    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform2), range, interpolate)))(transform2(clamp(x)));
  }
  scale.invert = function(y) {
    return clamp(untransform((input || (input = piecewise(range, domain.map(transform2), number_default)))(y)));
  };
  scale.domain = function(_) {
    return arguments.length ? (domain = Array.from(_, number3), rescale()) : domain.slice();
  };
  scale.range = function(_) {
    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();
  };
  scale.rangeRound = function(_) {
    return range = Array.from(_), interpolate = round_default, rescale();
  };
  scale.clamp = function(_) {
    return arguments.length ? (clamp = _ ? true : identity2, rescale()) : clamp !== identity2;
  };
  scale.interpolate = function(_) {
    return arguments.length ? (interpolate = _, rescale()) : interpolate;
  };
  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };
  return function(t, u) {
    transform2 = t, untransform = u;
    return rescale();
  };
}
function continuous() {
  return transformer()(identity2, identity2);
}

// node_modules/d3-scale/src/tickFormat.js
function tickFormat(start2, stop, count, specifier) {
  var step = tickStep(start2, stop, count), precision;
  specifier = formatSpecifier(specifier == null ? ",f" : specifier);
  switch (specifier.type) {
    case "s": {
      var value = Math.max(Math.abs(start2), Math.abs(stop));
      if (specifier.precision == null && !isNaN(precision = precisionPrefix_default(step, value)))
        specifier.precision = precision;
      return formatPrefix(specifier, value);
    }
    case "":
    case "e":
    case "g":
    case "p":
    case "r": {
      if (specifier.precision == null && !isNaN(precision = precisionRound_default(step, Math.max(Math.abs(start2), Math.abs(stop)))))
        specifier.precision = precision - (specifier.type === "e");
      break;
    }
    case "f":
    case "%": {
      if (specifier.precision == null && !isNaN(precision = precisionFixed_default(step)))
        specifier.precision = precision - (specifier.type === "%") * 2;
      break;
    }
  }
  return format(specifier);
}

// node_modules/d3-scale/src/linear.js
function linearish(scale) {
  var domain = scale.domain;
  scale.ticks = function(count) {
    var d = domain();
    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);
  };
  scale.tickFormat = function(count, specifier) {
    var d = domain();
    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);
  };
  scale.nice = function(count) {
    if (count == null)
      count = 10;
    var d = domain();
    var i0 = 0;
    var i1 = d.length - 1;
    var start2 = d[i0];
    var stop = d[i1];
    var prestep;
    var step;
    var maxIter = 10;
    if (stop < start2) {
      step = start2, start2 = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }
    while (maxIter-- > 0) {
      step = tickIncrement(start2, stop, count);
      if (step === prestep) {
        d[i0] = start2;
        d[i1] = stop;
        return domain(d);
      } else if (step > 0) {
        start2 = Math.floor(start2 / step) * step;
        stop = Math.ceil(stop / step) * step;
      } else if (step < 0) {
        start2 = Math.ceil(start2 * step) / step;
        stop = Math.floor(stop * step) / step;
      } else {
        break;
      }
      prestep = step;
    }
    return scale;
  };
  return scale;
}
function linear2() {
  var scale = continuous();
  scale.copy = function() {
    return copy(scale, linear2());
  };
  initRange.apply(scale, arguments);
  return linearish(scale);
}

// node_modules/d3-scale-chromatic/src/colors.js
function colors_default(specifier) {
  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;
  while (i < n)
    colors[i] = "#" + specifier.slice(i * 6, ++i * 6);
  return colors;
}

// node_modules/d3-scale-chromatic/src/categorical/category10.js
var category10_default = colors_default("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");

// node_modules/d3-zoom/src/transform.js
function Transform(k, x, y) {
  this.k = k;
  this.x = x;
  this.y = y;
}
Transform.prototype = {
  constructor: Transform,
  scale: function(k) {
    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);
  },
  translate: function(x, y) {
    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);
  },
  apply: function(point) {
    return [point[0] * this.k + this.x, point[1] * this.k + this.y];
  },
  applyX: function(x) {
    return x * this.k + this.x;
  },
  applyY: function(y) {
    return y * this.k + this.y;
  },
  invert: function(location) {
    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];
  },
  invertX: function(x) {
    return (x - this.x) / this.k;
  },
  invertY: function(y) {
    return (y - this.y) / this.k;
  },
  rescaleX: function(x) {
    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));
  },
  rescaleY: function(y) {
    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));
  },
  toString: function() {
    return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")";
  }
};
var identity3 = new Transform(1, 0, 0);
transform.prototype = Transform.prototype;
function transform(node) {
  while (!node.__zoom)
    if (!(node = node.parentNode))
      return identity3;
  return node.__zoom;
}

// src/views/TimelineModal.ts
var TimelineModal = class extends import_obsidian15.Modal {
  constructor(app, events, timeConfig) {
    super(app);
    this.events = events;
    this.timeConfig = timeConfig;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("story-engine-timeline-modal");
    contentEl.createEl("h2", { text: "World Timeline" });
    const chartContainer = contentEl.createDiv({ cls: "story-engine-timeline-chart" });
    this.renderTimeline(chartContainer);
  }
  renderTimeline(container) {
    if (this.events.length === 0) {
      container.createEl("p", { text: "No events with timeline data found." });
      return;
    }
    const width = 800;
    const height = 400;
    const margin = { top: 20, right: 30, bottom: 50, left: 60 };
    const svg = select_default2(container).append("svg").attr("width", width).attr("height", height);
    const eventsWithPosition = this.events.map((e, i) => {
      var _a, _b, _c;
      return {
        ...e,
        timeline_position: (_a = e.timeline_position) != null ? _a : i * 10,
        parent_id: (_b = e.parent_id) != null ? _b : null,
        is_epoch: (_c = e.is_epoch) != null ? _c : false
      };
    });
    const xExtent = extent(eventsWithPosition, (d) => d.timeline_position);
    const xScale = linear2().domain([xExtent[0] - 1, xExtent[1] + 1]).range([margin.left, width - margin.right]);
    const yScale = linear2().domain([0, 10]).range([height - margin.bottom, margin.top]);
    const colorScale = ordinal(category10_default);
    svg.append("g").attr("transform", `translate(0,${height - margin.bottom})`).call(axisBottom(xScale).tickFormat((d) => `Year ${d}`));
    svg.append("g").attr("transform", `translate(${margin.left},0)`).call(axisLeft(yScale).tickFormat((d) => `Imp ${d}`));
    const eventsWithParent = eventsWithPosition.filter((e) => e.parent_id);
    svg.selectAll("line.parent-link").data(eventsWithParent).join("line").attr("class", "parent-link").attr("x1", (d) => {
      const parent = eventsWithPosition.find((e) => e.id === d.parent_id);
      return parent ? xScale(parent.timeline_position) : 0;
    }).attr("y1", (d) => {
      const parent = eventsWithPosition.find((e) => e.id === d.parent_id);
      return parent ? yScale(parent.importance) : 0;
    }).attr("x2", (d) => xScale(d.timeline_position)).attr("y2", (d) => yScale(d.importance)).attr("stroke", "#999").attr("stroke-dasharray", "4,2").attr("stroke-width", 1);
    svg.selectAll("circle").data(eventsWithPosition).join("circle").attr("cx", (d) => xScale(d.timeline_position)).attr("cy", (d) => yScale(d.importance)).attr("r", (d) => d.is_epoch ? 10 : 6).attr("fill", (d) => colorScale(d.type || "default")).attr("stroke", (d) => d.is_epoch ? "gold" : "none").attr("stroke-width", 3).style("cursor", "pointer").on("click", (_event, d) => this.showEventDetails(d)).append("title").text((d) => `${d.name} (Year ${d.timeline_position})`);
    svg.selectAll("text.event-label").data(eventsWithPosition.filter((e) => e.importance >= 8)).join("text").attr("class", "event-label").attr("x", (d) => xScale(d.timeline_position)).attr("y", (d) => yScale(d.importance) - 12).attr("text-anchor", "middle").attr("font-size", "10px").text((d) => d.name.substring(0, 15) + (d.name.length > 15 ? "..." : ""));
  }
  showEventDetails(event) {
    var _a;
    new import_obsidian15.Notice(`Event: ${event.name}
Year: ${(_a = event.timeline_position) != null ? _a : "N/A"}
Importance: ${event.importance}`);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/CharacterDetailsView.ts
var import_obsidian16 = require("obsidian");
var CharacterDetailsView = class {
  constructor(plugin, character, headerEl, contentEl, onBack, onEditCharacter, world = null, characters = [], archetypes = [], traits = [], events = []) {
    // State
    this.characterTab = "overview";
    this.characterTraits = [];
    this.characterEvents = [];
    this.characterScenes = [];
    this.characterRelationships = [];
    this.plugin = plugin;
    this.character = character;
    this.world = world;
    this.characters = characters;
    this.archetypes = archetypes;
    this.traits = traits;
    this.events = events;
    this.headerEl = headerEl;
    this.contentEl = contentEl;
    this.onBack = onBack;
    this.onEditCharacter = onEditCharacter;
  }
  async render() {
    await this.loadCharacterData();
    this.renderHeader();
    this.renderContent();
  }
  renderContent() {
    this.contentEl.empty();
    const sidebarPosition = this.plugin.settings.sidebarPosition || "left";
    const mainContainer = this.contentEl.createDiv({ cls: "character-details-container" });
    const tabsContainer = mainContainer.createDiv({
      cls: `story-engine-world-sidebar story-engine-world-sidebar-${sidebarPosition} character-details-sidebar`
    });
    const contentContainer = mainContainer.createDiv({
      cls: `character-details-content story-engine-world-tab-content story-engine-content-sidebar-${sidebarPosition}`
    });
    this.renderTabs(tabsContainer);
    this.renderTabContent(contentContainer);
  }
  async loadCharacterData() {
    try {
      this.characterTraits = await this.plugin.apiClient.getCharacterTraits(this.character.id);
      const eventCharacters = await this.plugin.apiClient.getCharacterEvents(this.character.id);
      this.characterEvents = await Promise.all(
        eventCharacters.map(async (ec) => {
          const event = await this.plugin.apiClient.getEvent(ec.event_id);
          return { event, role: ec.role || void 0 };
        })
      );
      this.characterRelationships = await this.plugin.apiClient.getCharacterRelationships(this.character.id);
      this.characterScenes = [];
      if (this.world) {
        const allStories = await this.plugin.apiClient.listStories();
        const worldStories = allStories.filter((s) => s.world_id === this.world.id);
        for (const story of worldStories) {
          const scenes = await this.plugin.apiClient.getScenesByStory(story.id);
          const povScenes = scenes.filter((s) => s.pov_character_id === this.character.id);
          for (const scene of povScenes) {
            this.characterScenes.push({ scene, story, type: "pov" });
          }
          for (const scene of scenes) {
            const refs = await this.plugin.apiClient.getSceneReferences(scene.id);
            const charRef = refs.find(
              (r) => r.entity_type === "character" && r.entity_id === this.character.id
            );
            if (charRef) {
              this.characterScenes.push({ scene, story, type: "coadjuvante" });
            }
          }
        }
      }
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to load character data";
      new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
    }
  }
  renderHeader() {
    if (!this.headerEl)
      return;
    this.headerEl.empty();
    const headerContainer = this.headerEl.createDiv({ cls: "story-engine-world-details-header" });
    const headerContent = headerContainer.createDiv({ cls: "story-engine-world-header-content" });
    const topRow = headerContent.createDiv({ cls: "story-engine-world-header-top" });
    const backButton = topRow.createEl("button", {
      text: "\u2190 Back",
      cls: "story-engine-back-btn"
    });
    backButton.onclick = () => {
      this.onBack();
    };
    const headerActions = topRow.createDiv({ cls: "story-engine-header-actions" });
    const contextButton = headerActions.createEl("button", {
      cls: "story-engine-context-btn",
      attr: { "aria-label": "Character Actions" }
    });
    (0, import_obsidian16.setIcon)(contextButton, "more-vertical");
    const dropdownMenu = headerActions.createDiv({ cls: "story-engine-dropdown-menu" });
    dropdownMenu.style.display = "none";
    const editOption = dropdownMenu.createEl("button", {
      cls: "story-engine-dropdown-item"
    });
    (0, import_obsidian16.setIcon)(editOption, "pencil");
    editOption.createSpan({ text: "Edit Character" });
    editOption.onclick = () => {
      dropdownMenu.style.display = "none";
      this.onEditCharacter(this.character);
    };
    contextButton.onclick = (e) => {
      e.stopPropagation();
      const isVisible = dropdownMenu.style.display !== "none";
      dropdownMenu.style.display = isVisible ? "none" : "block";
    };
    document.addEventListener("click", () => {
      dropdownMenu.style.display = "none";
    }, { once: true });
    const titleSection = headerContent.createDiv({ cls: "story-engine-world-title-section" });
    titleSection.createEl("h1", {
      text: this.character.name,
      cls: "story-engine-world-name"
    });
    const metaRow = titleSection.createDiv({ cls: "story-engine-world-meta-row" });
    if (this.character.archetype_id) {
      const archetype = this.archetypes.find((a) => a.id === this.character.archetype_id);
      if (archetype) {
        const archetypeBadge = metaRow.createSpan({ cls: "story-engine-badge story-engine-genre-badge" });
        (0, import_obsidian16.setIcon)(archetypeBadge, "tag");
        archetypeBadge.createSpan({ text: archetype.name });
      }
    }
    const uuidContainer = metaRow.createDiv({ cls: "story-engine-world-uuid" });
    uuidContainer.createSpan({ text: this.character.id.substring(0, 8) + "..." });
    const copyIdBtn = uuidContainer.createEl("button", {
      cls: "story-engine-copy-uuid-btn",
      attr: { "aria-label": "Copy UUID" }
    });
    (0, import_obsidian16.setIcon)(copyIdBtn, "copy");
    copyIdBtn.onclick = (e) => {
      e.stopPropagation();
      navigator.clipboard.writeText(this.character.id);
      new import_obsidian16.Notice("UUID copied to clipboard");
    };
  }
  renderTabs(container) {
    const tabs = [
      { key: "overview", label: "Overview", icon: "book-open" },
      { key: "traits", label: "Traits", icon: "tag" },
      { key: "events", label: "Events", icon: "calendar" },
      { key: "scenes", label: "Scenes", icon: "film" },
      { key: "relationships", label: "Relationships", icon: "users" }
    ];
    tabs.forEach((tab) => {
      const isActive = this.characterTab === tab.key;
      const tabButton = container.createEl("button", {
        cls: `story-engine-sidebar-tab ${isActive ? "is-active" : ""}`,
        attr: { "aria-label": tab.label }
      });
      (0, import_obsidian16.setIcon)(tabButton, tab.icon);
      tabButton.onclick = () => {
        if (this.characterTab !== tab.key) {
          this.characterTab = tab.key;
          this.renderContent();
        }
      };
    });
  }
  renderTabContent(container) {
    const contentContainer = container.createDiv({ cls: "character-details-content-inner" });
    switch (this.characterTab) {
      case "overview":
        this.renderOverviewTab(contentContainer);
        break;
      case "traits":
        this.renderTraitsTab(contentContainer);
        break;
      case "events":
        this.renderEventsTab(contentContainer);
        break;
      case "scenes":
        this.renderScenesTab(contentContainer);
        break;
      case "relationships":
        this.renderRelationshipsTab(contentContainer);
        break;
    }
  }
  renderOverviewTab(container) {
    const descSection = container.createDiv({ cls: "story-engine-section" });
    descSection.createEl("h3", { text: "Description" });
    const descTextarea = descSection.createEl("textarea", {
      cls: "story-engine-textarea",
      attr: { rows: "5" }
    });
    descTextarea.value = this.character.description || "";
    descTextarea.placeholder = "Enter character description...";
    const descActions = descSection.createDiv({ cls: "story-engine-actions" });
    const saveDescBtn = descActions.createEl("button", { text: "Save Description", cls: "mod-cta" });
    saveDescBtn.onclick = async () => {
      try {
        const updated = await this.plugin.apiClient.updateCharacter(this.character.id, {
          description: descTextarea.value
        });
        this.character = updated;
        new import_obsidian16.Notice("Description saved");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    const archetypeSection = container.createDiv({ cls: "story-engine-section" });
    archetypeSection.createEl("h3", { text: "Archetype" });
    const archetypeSelect = archetypeSection.createEl("select", { cls: "story-engine-select" });
    const noneOption = archetypeSelect.createEl("option", { text: "None", value: "" });
    if (!this.character.archetype_id) {
      noneOption.selected = true;
    }
    for (const archetype of this.archetypes) {
      const option = archetypeSelect.createEl("option", {
        text: archetype.name,
        value: archetype.id
      });
      if (this.character.archetype_id === archetype.id) {
        option.selected = true;
      }
    }
    const archetypeActions = archetypeSection.createDiv({ cls: "story-engine-actions" });
    const saveArchetypeBtn = archetypeActions.createEl("button", { text: "Save Archetype", cls: "mod-cta" });
    saveArchetypeBtn.onclick = async () => {
      try {
        const archetypeId = archetypeSelect.value || null;
        const updated = await this.plugin.apiClient.updateCharacter(this.character.id, {
          archetype_id: archetypeId
        });
        this.character = updated;
        await this.loadCharacterData();
        this.renderHeader();
        this.renderContent();
        new import_obsidian16.Notice("Archetype saved");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
  }
  renderTraitsTab(container) {
    const actionsBar = container.createDiv({ cls: "story-engine-actions-bar" });
    const addBtn = actionsBar.createEl("button", { text: "Add Trait", cls: "mod-cta" });
    addBtn.onclick = () => {
      this.showAddTraitModal();
    };
    if (this.characterTraits.length === 0) {
      container.createEl("p", { text: "No traits assigned. Add a trait to get started!" });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const charTrait of this.characterTraits) {
      const item = list.createDiv({ cls: "story-engine-item" });
      const titleRow = item.createDiv({ cls: "story-engine-title" });
      titleRow.createEl("strong", { text: charTrait.trait_name });
      const categoryPill = titleRow.createSpan({ cls: "story-engine-badge" });
      categoryPill.textContent = charTrait.trait_category;
      const meta = item.createDiv({ cls: "story-engine-meta" });
      meta.createEl("span", { text: `Value: ${charTrait.value || "N/A"}` });
      if (charTrait.notes) {
        meta.createEl("span", { text: ` | Notes: ${charTrait.notes}` });
      }
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      actions.createEl("button", { text: "Edit" }).onclick = () => {
        this.showEditTraitModal(charTrait);
      };
      actions.createEl("button", { text: "Delete" }).onclick = async () => {
        if (confirm(`Remove trait "${charTrait.trait_name}"?`)) {
          try {
            await this.plugin.apiClient.removeCharacterTrait(this.character.id, charTrait.trait_id);
            await this.loadCharacterData();
            this.renderContent();
            new import_obsidian16.Notice("Trait removed");
          } catch (err) {
            new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
          }
        }
      };
    }
  }
  renderEventsTab(container) {
    const actionsBar = container.createDiv({ cls: "story-engine-actions-bar" });
    const addBtn = actionsBar.createEl("button", { text: "Add Event", cls: "mod-cta" });
    addBtn.onclick = () => {
      this.showAddEventModal();
    };
    if (this.characterEvents.length === 0) {
      container.createEl("p", { text: "No events assigned. Add an event to get started!" });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const { event, role } of this.characterEvents) {
      const item = list.createDiv({ cls: "story-engine-item" });
      item.createDiv({ cls: "story-engine-title", text: event.name });
      const meta = item.createDiv({ cls: "story-engine-meta" });
      if (role) {
        meta.createEl("span", { text: `Role: ${role}` });
      }
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      actions.createEl("button", { text: "Edit Role" }).onclick = () => {
        this.showEditEventRoleModal(event, role);
      };
      actions.createEl("button", { text: "Remove" }).onclick = async () => {
        if (confirm(`Remove character from event "${event.name}"?`)) {
          try {
            await this.plugin.apiClient.removeEventCharacter(event.id, this.character.id);
            await this.loadCharacterData();
            this.renderContent();
            new import_obsidian16.Notice("Character removed from event");
          } catch (err) {
            new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
          }
        }
      };
    }
  }
  renderScenesTab(container) {
    if (this.characterScenes.length === 0) {
      container.createEl("p", { text: "No scenes found for this character." });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const { scene, story, type: type2 } of this.characterScenes) {
      const item = list.createDiv({ cls: "story-engine-item" });
      const titleRow = item.createDiv({ cls: "story-engine-title" });
      titleRow.createEl("span", { text: scene.goal || "No goal" });
      const typePill = titleRow.createSpan({
        cls: type2 === "pov" ? "story-engine-badge story-engine-badge-green" : "story-engine-badge story-engine-badge-blue"
      });
      typePill.textContent = type2 === "pov" ? "POV" : "Coadjuvante";
      const meta = item.createDiv({ cls: "story-engine-meta" });
      meta.createEl("span", { text: `Story: ${story.title}` });
    }
  }
  renderRelationshipsTab(container) {
    const actionsBar = container.createDiv({ cls: "story-engine-actions-bar" });
    const addBtn = actionsBar.createEl("button", { text: "Add Relationship", cls: "mod-cta" });
    addBtn.onclick = () => {
      this.showAddRelationshipModal();
    };
    if (this.characterRelationships.length === 0) {
      container.createEl("p", { text: "No relationships defined. Add a relationship to get started!" });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const rel of this.characterRelationships) {
      const otherCharId = rel.character1_id === this.character.id ? rel.character2_id : rel.character1_id;
      const otherChar = this.characters.find((c) => c.id === otherCharId);
      const otherCharName = otherChar ? otherChar.name : "Unknown";
      const item = list.createDiv({ cls: "story-engine-item" });
      const titleRow = item.createDiv({ cls: "story-engine-title" });
      titleRow.createEl("strong", { text: otherCharName });
      const typePill = titleRow.createSpan({ cls: "story-engine-badge" });
      typePill.textContent = rel.relationship_type;
      const directionIcon = titleRow.createSpan({ cls: "story-engine-direction" });
      directionIcon.textContent = rel.bidirectional ? "\u2194" : "\u2192";
      const meta = item.createDiv({ cls: "story-engine-meta" });
      if (rel.description) {
        meta.createEl("span", { text: rel.description });
      }
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      actions.createEl("button", { text: "Edit" }).onclick = () => {
        this.showEditRelationshipModal(rel);
      };
      actions.createEl("button", { text: "Delete" }).onclick = async () => {
        if (confirm(`Delete relationship with "${otherCharName}"?`)) {
          try {
            await this.plugin.apiClient.deleteCharacterRelationship(rel.id);
            await this.loadCharacterData();
            this.renderContent();
            new import_obsidian16.Notice("Relationship deleted");
          } catch (err) {
            new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
          }
        }
      };
    }
  }
  // Modal methods
  showAddTraitModal() {
    const modal = new import_obsidian16.Modal(this.plugin.app);
    modal.titleEl.textContent = "Add Trait";
    const content = modal.contentEl;
    content.createEl("p", { text: "Select a trait to add:" });
    const traitSelect = content.createEl("select", { cls: "story-engine-select" });
    const availableTraits = this.traits.filter(
      (t) => !this.characterTraits.some((ct) => ct.trait_id === t.id)
    );
    if (availableTraits.length === 0) {
      content.createEl("p", { text: "No available traits. Create a trait first!" });
      const buttonContainer2 = content.createDiv({ cls: "modal-button-container" });
      const closeBtn = buttonContainer2.createEl("button", { text: "Close" });
      closeBtn.onclick = () => modal.close();
      return;
    }
    for (const trait of availableTraits) {
      traitSelect.createEl("option", { text: `${trait.name} (${trait.category})`, value: trait.id });
    }
    const valueInput = content.createEl("input", {
      cls: "story-engine-input",
      attr: { type: "text", placeholder: "Value (optional)" }
    });
    const notesInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      attr: { rows: "3", placeholder: "Notes (optional)" }
    });
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Add", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.addCharacterTrait(
          this.character.id,
          traitSelect.value,
          valueInput.value || void 0,
          notesInput.value || void 0
        );
        await this.loadCharacterData();
        this.renderContent();
        modal.close();
        new import_obsidian16.Notice("Trait added");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  showEditTraitModal(charTrait) {
    const modal = new import_obsidian16.Modal(this.plugin.app);
    modal.titleEl.textContent = "Edit Trait";
    const content = modal.contentEl;
    content.createEl("p", { text: `Editing: ${charTrait.trait_name}` });
    const valueInput = content.createEl("input", {
      cls: "story-engine-input",
      attr: { type: "text", placeholder: "Value" }
    });
    valueInput.value = charTrait.value || "";
    const notesInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      attr: { rows: "3", placeholder: "Notes" }
    });
    notesInput.value = charTrait.notes || "";
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.updateCharacterTrait(
          this.character.id,
          charTrait.trait_id,
          valueInput.value || void 0,
          notesInput.value || void 0
        );
        await this.loadCharacterData();
        this.renderContent();
        modal.close();
        new import_obsidian16.Notice("Trait updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  showAddEventModal() {
    if (!this.world)
      return;
    const modal = new import_obsidian16.Modal(this.plugin.app);
    modal.titleEl.textContent = "Add Event";
    const content = modal.contentEl;
    content.createEl("p", { text: "Select an event:" });
    const eventSelect = content.createEl("select", { cls: "story-engine-select" });
    const availableEvents = this.events.filter(
      (e) => !this.characterEvents.some((ce) => ce.event.id === e.id)
    );
    if (availableEvents.length === 0) {
      content.createEl("p", { text: "No available events. Create an event first!" });
      const buttonContainer2 = content.createDiv({ cls: "modal-button-container" });
      const closeBtn = buttonContainer2.createEl("button", { text: "Close" });
      closeBtn.onclick = () => modal.close();
      return;
    }
    for (const event of availableEvents) {
      eventSelect.createEl("option", { text: event.name, value: event.id });
    }
    const roleInput = content.createEl("input", {
      cls: "story-engine-input",
      attr: { type: "text", placeholder: "Role (optional)" }
    });
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Add", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.addEventCharacter(
          eventSelect.value,
          this.character.id,
          roleInput.value || void 0
        );
        await this.loadCharacterData();
        this.renderContent();
        modal.close();
        new import_obsidian16.Notice("Character added to event");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  showEditEventRoleModal(event, currentRole) {
    const modal = new import_obsidian16.Modal(this.plugin.app);
    modal.titleEl.textContent = "Edit Role";
    const content = modal.contentEl;
    content.createEl("p", { text: `Event: ${event.name}` });
    const roleInput = content.createEl("input", {
      cls: "story-engine-input",
      attr: { type: "text", placeholder: "Role" },
      value: currentRole || ""
    });
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.removeEventCharacter(event.id, this.character.id);
        await this.plugin.apiClient.addEventCharacter(
          event.id,
          this.character.id,
          roleInput.value || void 0
        );
        await this.loadCharacterData();
        this.renderContent();
        modal.close();
        new import_obsidian16.Notice("Role updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  showAddRelationshipModal() {
    const modal = new import_obsidian16.Modal(this.plugin.app);
    modal.titleEl.textContent = "Add Relationship";
    const content = modal.contentEl;
    content.createEl("p", { text: "Select another character:" });
    const characterSelect = content.createEl("select", { cls: "story-engine-select" });
    const availableCharacters = this.characters.filter((c) => c.id !== this.character.id);
    if (availableCharacters.length === 0) {
      content.createEl("p", { text: "No other characters available." });
      const buttonContainer2 = content.createDiv({ cls: "modal-button-container" });
      const closeBtn = buttonContainer2.createEl("button", { text: "Close" });
      closeBtn.onclick = () => modal.close();
      return;
    }
    for (const char of availableCharacters) {
      characterSelect.createEl("option", { text: char.name, value: char.id });
    }
    const relationshipTypeSelect = content.createEl("select", { cls: "story-engine-select" });
    relationshipTypeSelect.createEl("option", { text: "Ally", value: "ally" });
    relationshipTypeSelect.createEl("option", { text: "Enemy", value: "enemy" });
    relationshipTypeSelect.createEl("option", { text: "Family", value: "family" });
    relationshipTypeSelect.createEl("option", { text: "Lover", value: "lover" });
    relationshipTypeSelect.createEl("option", { text: "Rival", value: "rival" });
    relationshipTypeSelect.createEl("option", { text: "Mentor", value: "mentor" });
    relationshipTypeSelect.createEl("option", { text: "Student", value: "student" });
    const descriptionInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      attr: { rows: "3", placeholder: "Description (optional)" }
    });
    const bidirectionalCheckbox = content.createEl("input", {
      attr: { type: "checkbox" }
    });
    bidirectionalCheckbox.checked = true;
    const bidirectionalLabel = content.createEl("label");
    bidirectionalLabel.appendChild(bidirectionalCheckbox);
    bidirectionalLabel.appendChild(document.createTextNode(" Bidirectional"));
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Add", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.createCharacterRelationship(this.character.id, {
          character1_id: this.character.id,
          character2_id: characterSelect.value,
          relationship_type: relationshipTypeSelect.value,
          description: descriptionInput.value || "",
          bidirectional: bidirectionalCheckbox.checked
        });
        await this.loadCharacterData();
        this.renderContent();
        modal.close();
        new import_obsidian16.Notice("Relationship added");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  showEditRelationshipModal(rel) {
    const modal = new import_obsidian16.Modal(this.plugin.app);
    modal.titleEl.textContent = "Edit Relationship";
    const content = modal.contentEl;
    const relationshipTypeSelect = content.createEl("select", { cls: "story-engine-select" });
    relationshipTypeSelect.createEl("option", { text: "Ally", value: "ally" });
    relationshipTypeSelect.createEl("option", { text: "Enemy", value: "enemy" });
    relationshipTypeSelect.createEl("option", { text: "Family", value: "family" });
    relationshipTypeSelect.createEl("option", { text: "Lover", value: "lover" });
    relationshipTypeSelect.createEl("option", { text: "Rival", value: "rival" });
    relationshipTypeSelect.createEl("option", { text: "Mentor", value: "mentor" });
    relationshipTypeSelect.createEl("option", { text: "Student", value: "student" });
    relationshipTypeSelect.value = rel.relationship_type;
    const descriptionInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      attr: { rows: "3", placeholder: "Description" },
      text: rel.description || ""
    });
    const bidirectionalCheckbox = content.createEl("input", {
      attr: { type: "checkbox" }
    });
    bidirectionalCheckbox.checked = rel.bidirectional;
    const bidirectionalLabel = content.createEl("label");
    bidirectionalLabel.appendChild(bidirectionalCheckbox);
    bidirectionalLabel.appendChild(document.createTextNode(" Bidirectional"));
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.updateCharacterRelationship(rel.id, {
          relationship_type: relationshipTypeSelect.value,
          description: descriptionInput.value || "",
          bidirectional: bidirectionalCheckbox.checked
        });
        await this.loadCharacterData();
        this.renderContent();
        modal.close();
        new import_obsidian16.Notice("Relationship updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  // Method to update character after edit
  updateCharacter(character) {
    this.character = character;
    this.renderHeader();
    this.renderContent();
  }
};

// src/views/StoryListView.ts
var STORY_LIST_VIEW_TYPE = "story-engine-list-view";
var StoryListView = class extends import_obsidian17.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.stories = [];
    this.worlds = [];
    this.rpgSystems = [];
    this.loading = true;
    this.error = null;
    this.currentStory = null;
    this.currentWorld = null;
    this.viewMode = "list";
    this.currentTab = "chapters";
    this.storyCharacters = [];
    this.worldTab = "characters";
    this.listTab = "stories";
    this.expandedWorldId = null;
    // Character Details View
    this.characterDetailsView = null;
    this.chapters = [];
    this.scenes = [];
    this.beats = [];
    this.contentBlocks = [];
    this.contentBlockRefs = [];
    this.loadingHierarchy = false;
    // World entities
    this.characters = [];
    this.locations = [];
    this.artifacts = [];
    this.events = [];
    this.traits = [];
    this.archetypes = [];
    this.factions = [];
    this.lores = [];
    this.loadingWorldData = false;
    this.plugin = plugin;
  }
  getViewType() {
    return STORY_LIST_VIEW_TYPE;
  }
  getDisplayText() {
    if (this.viewMode === "details" && this.currentStory) {
      return this.currentStory.title;
    }
    if (this.viewMode === "world-details" && this.currentWorld) {
      return this.currentWorld.name;
    }
    if (this.viewMode === "character-details" && this.characterDetailsView) {
      return this.characterDetailsView["character"].name;
    }
    return "Stories";
  }
  getIcon() {
    return "book-open";
  }
  async onOpen() {
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("story-engine-view-container");
    await this.render(container);
    await this.loadStories();
  }
  async onClose() {
  }
  async render(container) {
    container.empty();
    this.headerEl = container.createDiv({ cls: "story-engine-view-header" });
    this.contentEl = container.createDiv({ cls: "story-engine-view-content" });
    if (this.viewMode === "details" && this.currentStory) {
      this.renderDetails();
    } else if (this.viewMode === "world-details" && this.currentWorld) {
      this.renderWorldDetails();
    } else if (this.viewMode === "character-details" && this.characterDetailsView) {
      this.characterDetailsView.render();
    } else {
      this.renderListHeader();
      this.renderListContent();
    }
  }
  renderListHeader() {
    if (!this.headerEl)
      return;
    this.headerEl.empty();
    this.headerEl.createEl("h2", { text: "Stories" });
    const tabsContainer = this.headerEl.createDiv({ cls: "story-engine-tabs" });
    const storiesTab = tabsContainer.createEl("button", {
      text: "Stories",
      cls: `story-engine-tab ${this.listTab === "stories" ? "is-active" : ""}`
    });
    storiesTab.onclick = () => {
      this.listTab = "stories";
      this.renderListHeader();
      this.renderListContent();
    };
    const worldsTab = tabsContainer.createEl("button", {
      text: "Worlds",
      cls: `story-engine-tab ${this.listTab === "worlds" ? "is-active" : ""}`
    });
    worldsTab.onclick = () => {
      this.listTab = "worlds";
      this.renderListHeader();
      this.renderListContent();
    };
    const rpgSystemsTab = tabsContainer.createEl("button", {
      text: "RPG Systems",
      cls: `story-engine-tab ${this.listTab === "rpg-systems" ? "is-active" : ""}`
    });
    rpgSystemsTab.onclick = () => {
      this.listTab = "rpg-systems";
      this.renderListHeader();
      this.renderListContent();
    };
    const settingsButton = tabsContainer.createEl("button", {
      cls: "story-engine-settings-btn story-engine-tab",
      attr: { "aria-label": "Open Settings" }
    });
    (0, import_obsidian17.setIcon)(settingsButton, "gear");
    settingsButton.onclick = () => {
      this.plugin.openSettings();
    };
  }
  renderListContent() {
    if (!this.contentEl)
      return;
    this.contentEl.addClass("story-engine-list-layout");
    this.contentEl.removeClass("story-engine-sidebar-layout");
    this.contentEl.empty();
    if (this.loading) {
      this.contentEl.createEl("p", { text: "Loading..." });
      return;
    }
    if (this.error) {
      this.contentEl.createEl("p", {
        text: `Error: ${this.error}`,
        cls: "story-engine-error"
      });
      this.renderActionsBar();
      return;
    }
    switch (this.listTab) {
      case "stories":
        this.renderStoriesTab();
        break;
      case "worlds":
        this.renderWorldsTab();
        break;
      case "rpg-systems":
        this.renderRPGSystemsTab();
        break;
    }
    this.renderActionsBar();
  }
  renderActionsBar() {
    if (!this.contentEl)
      return;
    const actionsBar = this.contentEl.createDiv({ cls: "story-engine-actions-bar" });
    const refreshButton = actionsBar.createEl("button", {
      text: "Refresh",
      cls: "story-engine-refresh-btn"
    });
    refreshButton.onclick = async () => {
      await this.loadStories();
    };
    const syncAllButton = actionsBar.createEl("button", {
      text: "Sync All",
      cls: "story-engine-sync-all-btn"
    });
    syncAllButton.onclick = async () => {
      if (!this.plugin.settings.tenantId) {
        new import_obsidian17.Notice("Please configure Tenant ID in settings", 5e3);
        return;
      }
      try {
        new import_obsidian17.Notice("Syncing all stories...");
        await this.plugin.syncService.pullAllStories();
        await this.loadStories();
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to sync stories";
        new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
      }
    };
    let createButtonText = "Create Story";
    let createButtonAction = () => {
      this.plugin.createStoryCommand();
    };
    if (this.listTab === "worlds") {
      createButtonText = "Create World";
      createButtonAction = async () => {
        new CreateWorldModal(this.app, async (name, description, genre) => {
          try {
            new import_obsidian17.Notice(`Creating world "${name}"...`);
            const newWorld = await this.plugin.apiClient.createWorld(name, description, genre);
            new import_obsidian17.Notice(`World "${name}" created successfully`);
            await this.loadStories();
          } catch (err) {
            const errorMessage = err instanceof Error ? err.message : "Failed to create world";
            new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
          }
        }).open();
      };
    } else if (this.listTab === "rpg-systems") {
      createButtonText = "Create RPG System";
      createButtonAction = () => {
        new import_obsidian17.Notice("Create RPG System - Coming soon", 3e3);
      };
    }
    const createButton = actionsBar.createEl("button", {
      text: createButtonText,
      cls: "mod-cta story-engine-create-btn"
    });
    createButton.onclick = createButtonAction;
  }
  renderEmptyCard(container, options) {
    const card = container.createDiv({ cls: "story-engine-empty-card" });
    const iconWrapper = card.createSpan({ cls: "story-engine-empty-icon" });
    (0, import_obsidian17.setIcon)(iconWrapper, options.icon);
    const copy2 = card.createDiv({ cls: "story-engine-empty-copy" });
    copy2.createEl("h3", { text: options.title });
    if (options.description) {
      copy2.createEl("p", { text: options.description });
    }
    if (options.actionText && options.onAction) {
      const actions = copy2.createDiv({ cls: "story-engine-empty-actions" });
      const actionBtn = actions.createEl("button", {
        text: options.actionText,
        cls: "mod-cta story-engine-empty-action"
      });
      actionBtn.onclick = options.onAction;
    }
    return card;
  }
  renderDetailsHeader() {
    if (!this.headerEl || !this.currentStory)
      return;
    this.headerEl.empty();
    const headerCard = this.headerEl.createDiv({ cls: "story-engine-story-details-header" });
    const headerContent = headerCard.createDiv({ cls: "story-engine-story-header-content" });
    const topRow = headerContent.createDiv({ cls: "story-engine-story-header-top" });
    const backButton = topRow.createEl("button", {
      text: "\u2190 Back",
      cls: "story-engine-back-btn"
    });
    backButton.onclick = () => {
      this.showList();
    };
    const headerActions = topRow.createDiv({ cls: "story-engine-header-actions" });
    if (this.currentStory.world_id) {
      const world = this.worlds.find((w) => w.id === this.currentStory.world_id);
      if (world) {
        const worldButton = headerActions.createEl("button", {
          cls: "story-engine-world-btn",
          attr: { "aria-label": `Go to World: ${world.name}` }
        });
        (0, import_obsidian17.setIcon)(worldButton, "globe");
        worldButton.createSpan({ text: "World" });
        worldButton.onclick = () => {
          this.showWorldDetails(world);
        };
      }
    }
    const contextButton = headerActions.createEl("button", {
      cls: "story-engine-context-btn",
      attr: { "aria-label": "Story Actions" }
    });
    (0, import_obsidian17.setIcon)(contextButton, "more-vertical");
    const dropdownMenu = headerActions.createDiv({ cls: "story-engine-dropdown-menu" });
    dropdownMenu.style.display = "none";
    const editOption = dropdownMenu.createEl("button", {
      cls: "story-engine-dropdown-item"
    });
    (0, import_obsidian17.setIcon)(editOption, "pencil");
    editOption.createSpan({ text: "Edit Story Name" });
    editOption.onclick = () => {
      dropdownMenu.style.display = "none";
      this.showEditStoryNameModal();
    };
    const cloneOption = dropdownMenu.createEl("button", {
      cls: "story-engine-dropdown-item"
    });
    (0, import_obsidian17.setIcon)(cloneOption, "copy");
    cloneOption.createSpan({ text: "Clone Story" });
    cloneOption.onclick = async () => {
      dropdownMenu.style.display = "none";
      await this.cloneStory();
    };
    const pullOption = dropdownMenu.createEl("button", {
      cls: "story-engine-dropdown-item"
    });
    (0, import_obsidian17.setIcon)(pullOption, "download");
    pullOption.createSpan({ text: "Pull from Service" });
    pullOption.onclick = async () => {
      dropdownMenu.style.display = "none";
      if (!this.currentStory)
        return;
      try {
        new import_obsidian17.Notice(`Pulling story "${this.currentStory.title}"...`);
        await this.plugin.syncService.pullStory(this.currentStory.id);
        await this.loadHierarchy();
        this.renderTabContent();
        new import_obsidian17.Notice(`Story pulled successfully!`);
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to pull story";
        new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
      }
    };
    const pushOption = dropdownMenu.createEl("button", {
      cls: "story-engine-dropdown-item"
    });
    (0, import_obsidian17.setIcon)(pushOption, "upload");
    pushOption.createSpan({ text: "Push to Service" });
    pushOption.onclick = async () => {
      dropdownMenu.style.display = "none";
      if (!this.currentStory)
        return;
      try {
        const folderPath = this.plugin.fileManager.getStoryFolderPath(this.currentStory.title);
        new import_obsidian17.Notice(`Pushing story "${this.currentStory.title}"...`);
        await this.plugin.syncService.pushStory(folderPath);
        new import_obsidian17.Notice(`Story pushed successfully!`);
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to push story";
        new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
      }
    };
    contextButton.onclick = (e) => {
      e.stopPropagation();
      const isVisible = dropdownMenu.style.display !== "none";
      dropdownMenu.style.display = isVisible ? "none" : "block";
    };
    document.addEventListener("click", () => {
      dropdownMenu.style.display = "none";
    }, { once: true });
    const titleSection = headerContent.createDiv({ cls: "story-engine-story-title-section" });
    titleSection.createEl("h1", { text: this.currentStory.title, cls: "story-engine-story-name" });
    const metaRow = titleSection.createDiv({ cls: "story-engine-story-meta-row" });
    const statusPill = metaRow.createSpan({
      cls: `story-engine-status-pill story-engine-status-${this.currentStory.status.toLowerCase().replace(/\s+/g, "-")}`
    });
    statusPill.textContent = this.currentStory.status;
    const versionBadge = metaRow.createSpan({ cls: "story-engine-pill story-engine-pill-strong" });
    versionBadge.textContent = `v${this.currentStory.version_number}`;
    const uuidContainer = metaRow.createDiv({ cls: "story-engine-story-uuid" });
    uuidContainer.createSpan({ text: `${this.currentStory.id.substring(0, 10)}...` });
    const copyUuidButton = uuidContainer.createEl("button", {
      cls: "story-engine-copy-uuid-btn",
      attr: { "aria-label": "Copy UUID" }
    });
    (0, import_obsidian17.setIcon)(copyUuidButton, "copy");
    copyUuidButton.onclick = (e) => {
      e.stopPropagation();
      this.copyStoryId();
    };
  }
  renderStoriesTab() {
    if (this.stories.length === 0) {
      this.renderEmptyCard(this.contentEl, {
        icon: "book",
        title: "No stories yet",
        description: "Create your first story to get started."
      });
      return;
    }
    const storiesGrid = this.contentEl.createDiv({ cls: "story-engine-story-grid" });
    for (const story of this.stories) {
      const card = storiesGrid.createDiv({ cls: "story-engine-story-card" });
      card.onclick = async () => {
        await this.showStoryDetails(story);
      };
      const header = card.createDiv({ cls: "story-engine-story-card-header" });
      header.createEl("h3", { text: story.title, cls: "story-engine-story-card-name" });
      const badges = header.createDiv({ cls: "story-engine-story-card-badges" });
      badges.createSpan({
        text: `v${story.version_number}`,
        cls: "story-engine-pill story-engine-pill-strong"
      });
      badges.createSpan({
        text: story.status,
        cls: `story-engine-status-pill story-engine-status-${story.status.toLowerCase().replace(/\s+/g, "-")}`
      });
      const body = card.createDiv({ cls: "story-engine-story-card-body" });
      const metaRow = body.createDiv({ cls: "story-engine-story-meta" });
      if (story.world_id) {
        const world = this.worlds.find((w) => w.id === story.world_id);
        if (world) {
          metaRow.createSpan({ text: world.name, cls: "story-engine-pill" });
        }
      } else {
        metaRow.createSpan({ text: "No world linked", cls: "story-engine-pill" });
      }
      card.createDiv({ cls: "story-engine-story-hover-hint", text: "Click to open details" });
    }
  }
  renderWorldsTab() {
    const storiesByWorld = /* @__PURE__ */ new Map();
    for (const story of this.stories) {
      const worldId = story.world_id || null;
      if (!storiesByWorld.has(worldId)) {
        storiesByWorld.set(worldId, []);
      }
      storiesByWorld.get(worldId).push(story);
    }
    const storiesWithoutWorld = storiesByWorld.get(null) || [];
    const hasWorlds = this.worlds.length > 0;
    const hasUnassignedStories = storiesWithoutWorld.length > 0;
    if (!hasWorlds && !hasUnassignedStories) {
      this.renderEmptyCard(this.contentEl, {
        icon: "globe",
        title: "No worlds yet",
        description: "Create a world to start organizing your stories.",
        actionText: "Create World",
        onAction: () => {
          new CreateWorldModal(this.app, async (name, description, genre) => {
            try {
              new import_obsidian17.Notice(`Creating world "${name}"...`);
              await this.plugin.apiClient.createWorld(name, description, genre);
              await this.loadStories();
              new import_obsidian17.Notice(`World "${name}" created successfully`);
            } catch (err) {
              const errorMessage = err instanceof Error ? err.message : "Failed to create world";
              new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
            }
          }).open();
        }
      });
      return;
    }
    const worldsGrid = this.contentEl.createDiv({ cls: "story-engine-worlds-grid" });
    for (const world of this.worlds) {
      const worldStories = storiesByWorld.get(world.id) || [];
      const card = worldsGrid.createDiv({ cls: "story-engine-world-card" });
      card.onclick = () => {
        this.showWorldDetails(world);
      };
      const cardHeader = card.createDiv({ cls: "story-engine-world-card-header" });
      const cardTitle = cardHeader.createDiv({ cls: "story-engine-world-card-title" });
      cardTitle.createEl("h3", { text: world.name, cls: "story-engine-world-card-name" });
      const badgeRow = cardHeader.createDiv({ cls: "story-engine-world-card-meta" });
      if (world.genre) {
        badgeRow.createSpan({ text: world.genre, cls: "story-engine-pill" });
      }
      const storyCount = worldStories.length;
      badgeRow.createSpan({
        text: storyCount === 1 ? "1 story" : `${storyCount} stories`,
        cls: "story-engine-pill story-engine-pill-strong"
      });
      const cardBody = card.createDiv({ cls: "story-engine-world-card-body" });
      if (world.description) {
        cardBody.createEl("p", {
          text: world.description,
          cls: "story-engine-world-card-description"
        });
      }
      if (worldStories.length > 0) {
        const storyChips = cardBody.createDiv({ cls: "story-engine-world-story-chips" });
        const maxChips = 3;
        worldStories.slice(0, maxChips).forEach((story) => {
          storyChips.createSpan({ cls: "story-engine-world-story-chip", text: story.title });
        });
        if (worldStories.length > maxChips) {
          storyChips.createSpan({
            cls: "story-engine-world-story-chip story-engine-world-story-chip-muted",
            text: `+${worldStories.length - maxChips} more`
          });
        }
      } else {
        cardBody.createDiv({ cls: "story-engine-world-empty-label", text: "No stories yet" });
      }
      card.createDiv({ cls: "story-engine-world-card-hint", text: "Click to open details" });
    }
    if (storiesWithoutWorld.length > 0) {
      const unassignedCard = worldsGrid.createDiv({ cls: "story-engine-world-card story-engine-world-card-muted" });
      unassignedCard.createEl("h3", { text: "Unassigned Stories", cls: "story-engine-world-card-name" });
      unassignedCard.createEl("p", { text: "Stories that are not linked to any world.", cls: "story-engine-world-card-description" });
      const storyChips = unassignedCard.createDiv({ cls: "story-engine-world-story-chips" });
      const maxChips = 4;
      storiesWithoutWorld.slice(0, maxChips).forEach((story) => {
        storyChips.createSpan({ cls: "story-engine-world-story-chip", text: story.title });
      });
      if (storiesWithoutWorld.length > maxChips) {
        storyChips.createSpan({
          cls: "story-engine-world-story-chip story-engine-world-story-chip-muted",
          text: `+${storiesWithoutWorld.length - maxChips} more`
        });
      }
    }
  }
  renderRPGSystemsTab() {
    if (this.rpgSystems.length === 0) {
      if (this.plugin.settings.mode === "local") {
        this.contentEl.createEl("p", { text: "RPG systems are not available in local mode." });
      } else {
        this.contentEl.createEl("p", { text: "No RPG systems found." });
      }
      return;
    }
    const rpgSystemsList = this.contentEl.createDiv({ cls: "story-engine-list" });
    for (const rpgSystem of this.rpgSystems) {
      const rpgSystemItem = rpgSystemsList.createDiv({
        cls: "story-engine-item"
      });
      const title = rpgSystemItem.createDiv({
        cls: "story-engine-title",
        text: rpgSystem.name
      });
      const meta = rpgSystemItem.createDiv({
        cls: "story-engine-meta"
      });
      if (rpgSystem.description) {
        meta.createEl("span", {
          text: rpgSystem.description
        });
      }
      if (rpgSystem.is_builtin) {
        meta.createEl("span", {
          text: "Built-in",
          cls: "story-engine-badge"
        });
      }
    }
  }
  renderStoryItem(container, story) {
    const storyItem = container.createDiv({
      cls: "story-engine-item"
    });
    const title = storyItem.createDiv({
      cls: "story-engine-title",
      text: story.title
    });
    const meta = storyItem.createDiv({
      cls: "story-engine-meta"
    });
    meta.createEl("span", {
      text: `Version ${story.version_number}`
    });
    meta.createEl("span", {
      text: `Status: ${story.status}`
    });
    if (story.world_id) {
      const world = this.worlds.find((w) => w.id === story.world_id);
      if (world) {
        meta.createEl("span", {
          text: `World: ${world.name}`
        });
      }
    }
    storyItem.onclick = async () => {
      await this.showStoryDetails(story);
    };
  }
  async loadStories() {
    this.loading = true;
    this.error = null;
    try {
      if (this.plugin.settings.mode === "remote" && !this.plugin.settings.tenantId) {
        this.error = "Tenant ID not configured";
        this.loading = false;
        this.renderListContent();
        return;
      }
      this.worlds = await this.plugin.apiClient.getWorlds();
      this.stories = await this.plugin.apiClient.listStories();
      try {
        this.rpgSystems = await this.plugin.apiClient.getRPGSystems();
      } catch (rpgErr) {
        console.warn("RPG systems not available:", rpgErr);
        this.rpgSystems = [];
      }
    } catch (err) {
      this.error = err instanceof Error ? err.message : "Failed to load stories";
      console.error("Error loading stories:", err);
    } finally {
      this.loading = false;
      this.renderListContent();
    }
  }
  // Method to refresh the view
  async refresh() {
    await this.loadStories();
  }
  async showStoryDetails(story) {
    this.currentStory = story;
    this.viewMode = "details";
    this.currentTab = "chapters";
    await this.loadHierarchy();
    this.renderDetails();
  }
  async loadHierarchy() {
    if (!this.currentStory)
      return;
    this.loadingHierarchy = true;
    try {
      this.chapters = await this.plugin.apiClient.getChapters(this.currentStory.id);
      this.scenes = await this.plugin.apiClient.getScenesByStory(this.currentStory.id);
      this.beats = await this.plugin.apiClient.getBeatsByStory(this.currentStory.id);
      const contentBlocksMap = /* @__PURE__ */ new Map();
      this.contentBlockRefs = [];
      for (const chapter of this.chapters) {
        const chapterBlocks = await this.plugin.apiClient.getContentBlocks(chapter.id);
        for (const block of chapterBlocks) {
          contentBlocksMap.set(block.id, block);
        }
      }
      for (const scene of this.scenes) {
        const sceneBlocks = await this.plugin.apiClient.getContentBlocksByScene(scene.id);
        for (const block of sceneBlocks) {
          contentBlocksMap.set(block.id, block);
        }
      }
      for (const beat of this.beats) {
        const beatBlocks = await this.plugin.apiClient.getContentBlocksByBeat(beat.id);
        for (const block of beatBlocks) {
          contentBlocksMap.set(block.id, block);
        }
      }
      this.contentBlocks = Array.from(contentBlocksMap.values());
      for (const block of this.contentBlocks) {
        const refs = await this.plugin.apiClient.getContentAnchors(block.id);
        this.contentBlockRefs.push(...refs);
      }
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to load hierarchy";
      new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
    } finally {
      this.loadingHierarchy = false;
    }
  }
  showList() {
    this.currentStory = null;
    this.viewMode = "list";
    this.renderListHeader();
    this.renderListContent();
  }
  renderDetails() {
    if (!this.contentEl || !this.currentStory)
      return;
    this.contentEl.removeClass("story-engine-list-layout");
    this.contentEl.addClass("story-engine-sidebar-layout");
    this.renderDetailsHeader();
    this.contentEl.empty();
    this.renderTabs();
    this.renderTabContent();
  }
  renderTabs() {
    if (!this.contentEl)
      return;
    const existingTabs = this.contentEl.querySelector(".story-engine-tabs");
    if (existingTabs) {
      existingTabs.remove();
    }
    const existingSidebar = this.contentEl.querySelector(".story-engine-story-sidebar");
    if (existingSidebar) {
      existingSidebar.remove();
    }
    const sidebarPosition = this.plugin.settings.sidebarPosition || "left";
    const tabsContainer = this.contentEl.createDiv({
      cls: `story-engine-world-sidebar story-engine-world-sidebar-${sidebarPosition} story-engine-story-sidebar`
    });
    const tabs = [
      { key: "chapters", label: "Chapters", icon: "book-open" },
      { key: "scenes", label: "Scenes", icon: "film" },
      { key: "beats", label: "Beats", icon: "activity" },
      { key: "contents", label: "Contents", icon: "file-text" },
      { key: "characters", label: "Characters", icon: "users" }
    ];
    for (const tab of tabs) {
      const tabButton = tabsContainer.createEl("button", {
        cls: `story-engine-sidebar-tab ${this.currentTab === tab.key ? "is-active" : ""}`,
        attr: { "aria-label": tab.label }
      });
      (0, import_obsidian17.setIcon)(tabButton, tab.icon);
      tabButton.onclick = async () => {
        this.currentTab = tab.key;
        this.renderTabs();
        if (tab.key === "characters") {
          await this.loadStoryCharacters();
        }
        this.renderTabContent();
      };
    }
  }
  renderTabContent() {
    if (!this.contentEl)
      return;
    const existingContent = this.contentEl.querySelector(".story-engine-story-tab-content");
    if (existingContent) {
      existingContent.remove();
    }
    const legacyContent = this.contentEl.querySelector(".story-engine-tab-content");
    if (legacyContent) {
      legacyContent.remove();
    }
    const sidebarPosition = this.plugin.settings.sidebarPosition || "left";
    const tabContent = this.contentEl.createDiv({
      cls: `story-engine-story-tab-content story-engine-content-sidebar-${sidebarPosition}`
    });
    if (this.loadingHierarchy) {
      tabContent.createEl("p", { text: "Loading..." });
      return;
    }
    switch (this.currentTab) {
      case "chapters":
        this.renderChaptersTab(tabContent);
        break;
      case "scenes":
        this.renderScenesTab(tabContent);
        break;
      case "beats":
        this.renderBeatsTab(tabContent);
        break;
      case "contents":
        this.renderContentsTab(tabContent);
        break;
      case "characters":
        this.renderStoryCharactersTab(tabContent);
        break;
    }
    this.renderStoryActionsBar(tabContent);
  }
  renderStoryActionsBar(container) {
    const actionsBar = container.createDiv({ cls: "story-engine-actions-bar" });
    let createButtonText = "Create Chapter";
    let createButtonAction = () => {
      if (!this.currentStory)
        return;
      new ChapterModal(this.app, async (chapter) => {
        try {
          await this.plugin.apiClient.createChapter(this.currentStory.id, chapter);
          await this.loadHierarchy();
          this.renderTabContent();
          new import_obsidian17.Notice("Chapter created successfully");
        } catch (err) {
          throw err;
        }
      }, this.chapters).open();
    };
    switch (this.currentTab) {
      case "scenes":
        createButtonText = "Create Scene";
        createButtonAction = () => {
          if (!this.currentStory)
            return;
          new SceneModal(this.app, this.currentStory.id, this.chapters, async (scene) => {
            try {
              scene.chapter_id = null;
              await this.plugin.apiClient.createScene(scene);
              await this.loadHierarchy();
              this.renderTabContent();
              new import_obsidian17.Notice("Scene created successfully");
            } catch (err) {
              throw err;
            }
          }, this.scenes, void 0, null).open();
        };
        break;
      case "beats":
        createButtonText = this.scenes.length > 0 ? "Create Beat" : "Go to Scenes";
        createButtonAction = () => {
          if (this.scenes.length === 0) {
            this.currentTab = "scenes";
            this.renderTabs();
            this.renderTabContent();
            return;
          }
          if (!this.currentStory)
            return;
          const scene = this.scenes.sort((a, b) => a.order_num - b.order_num)[0];
          new BeatModal(this.app, this.currentStory.id, this.scenes, async (beat) => {
            try {
              beat.scene_id = scene.id;
              await this.plugin.apiClient.createBeat(beat);
              await this.loadHierarchy();
              this.renderTabContent();
              new import_obsidian17.Notice("Beat created successfully");
            } catch (err) {
              throw err;
            }
          }, this.beats, void 0, this.chapters, scene.id).open();
        };
        break;
      case "contents":
        createButtonText = this.chapters.length > 0 ? "Add Content" : "Go to Chapters";
        createButtonAction = () => {
          if (this.chapters.length === 0) {
            this.currentTab = "chapters";
            this.renderTabs();
            this.renderTabContent();
            return;
          }
          const chapter = this.chapters.sort((a, b) => a.number - b.number)[0];
          this.createContentForEntity("chapter", chapter.id, chapter.id);
        };
        break;
      case "characters":
        createButtonText = "Create Character";
        createButtonAction = () => {
          var _a;
          if (!((_a = this.currentStory) == null ? void 0 : _a.world_id)) {
            new import_obsidian17.Notice("This story is not linked to a world", 3e3);
            return;
          }
          this.showCreateCharacterModalForStory();
        };
        break;
    }
    const createButton = actionsBar.createEl("button", {
      text: createButtonText,
      cls: "mod-cta story-engine-create-btn"
    });
    createButton.onclick = createButtonAction;
  }
  renderChaptersTab(container) {
    container.empty();
    if (this.chapters.length === 0) {
      this.renderEmptyCard(container, {
        icon: "book-open",
        title: "No chapters yet",
        description: "Create the first chapter to start organizing this story."
      });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const item = list.createDiv({ cls: "story-engine-item" });
      item.createDiv({
        cls: "story-engine-title",
        text: `Chapter ${chapter.number}: ${chapter.title}`
      });
      const meta = item.createDiv({ cls: "story-engine-meta" });
      meta.createEl("span", { text: `Status: ${chapter.status}` });
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      const editBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Edit chapter" }
      });
      (0, import_obsidian17.setIcon)(editBtn, "pencil");
      editBtn.onclick = () => {
        new ChapterModal(this.app, async (updatedChapter) => {
          try {
            await this.plugin.apiClient.updateChapter(chapter.id, updatedChapter);
            await this.loadHierarchy();
            this.renderTabContent();
            new import_obsidian17.Notice("Chapter updated successfully");
          } catch (err) {
            throw err;
          }
        }, this.chapters, chapter).open();
      };
      if (chapter.number > 1) {
        const upBtn = actions.createEl("button", {
          cls: "story-engine-entity-action-btn",
          attr: { "aria-label": "Move chapter up" }
        });
        (0, import_obsidian17.setIcon)(upBtn, "arrow-up");
        upBtn.onclick = () => {
          this.moveChapterUp(chapter);
        };
      }
      if (chapter.number < this.chapters.length) {
        const downBtn = actions.createEl("button", {
          cls: "story-engine-entity-action-btn",
          attr: { "aria-label": "Move chapter down" }
        });
        (0, import_obsidian17.setIcon)(downBtn, "arrow-down");
        downBtn.onclick = () => {
          this.moveChapterDown(chapter);
        };
      }
      if (this.currentTab === "contents") {
        const addContentBtn = actions.createEl("button", {
          cls: "story-engine-entity-action-btn",
          attr: { "aria-label": "Add content" }
        });
        (0, import_obsidian17.setIcon)(addContentBtn, "plus");
        addContentBtn.onclick = () => {
          this.createContentForEntity("chapter", chapter.id, chapter.id);
        };
      }
      const deleteBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Delete chapter" }
      });
      (0, import_obsidian17.setIcon)(deleteBtn, "trash");
      deleteBtn.onclick = async () => {
        if (confirm("Delete this chapter?")) {
          try {
            await this.plugin.apiClient.deleteChapter(chapter.id);
            await this.loadHierarchy();
            this.renderTabContent();
            new import_obsidian17.Notice("Chapter deleted");
          } catch (err) {
            new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
          }
        }
      };
    }
  }
  renderScenesTab(container) {
    container.empty();
    if (this.scenes.length === 0 && this.chapters.length === 0) {
      this.renderEmptyCard(container, {
        icon: "film",
        title: "No scenes yet",
        description: "Add a chapter and its first scene to start structuring the story."
      });
      return;
    }
    const scenesByChapter = /* @__PURE__ */ new Map();
    for (const scene of this.scenes) {
      const chapterId = scene.chapter_id || null;
      if (!scenesByChapter.has(chapterId)) {
        scenesByChapter.set(chapterId, []);
      }
      scenesByChapter.get(chapterId).push(scene);
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const chapterScenes = scenesByChapter.get(chapter.id) || [];
      const group = list.createDiv({ cls: "story-engine-group" });
      const groupHeader = group.createDiv({ cls: "story-engine-group-header" });
      groupHeader.createEl("h3", { text: `Chapter ${chapter.number}: ${chapter.title}` });
      const addButton = groupHeader.createEl("button", {
        cls: "story-engine-add-btn",
        attr: { "aria-label": "Add scene" }
      });
      (0, import_obsidian17.setIcon)(addButton, "plus");
      addButton.createSpan({ text: "Add scene" });
      addButton.onclick = () => {
        if (!this.currentStory)
          return;
        new SceneModal(this.app, this.currentStory.id, this.chapters, async (scene) => {
          try {
            scene.chapter_id = chapter.id;
            await this.plugin.apiClient.createScene(scene);
            await this.loadHierarchy();
            this.renderTabContent();
            new import_obsidian17.Notice("Scene created successfully");
          } catch (err) {
            throw err;
          }
        }, this.scenes, void 0, chapter.id).open();
      };
      const groupItems = group.createDiv({ cls: "story-engine-group-items" });
      if (chapterScenes.length === 0) {
        groupItems.createEl("p", { text: "No scenes in this chapter." });
      } else {
        for (const scene of chapterScenes.sort((a, b) => a.order_num - b.order_num)) {
          this.renderSceneItem(groupItems, scene);
        }
      }
    }
    const orphanScenes = scenesByChapter.get(null) || [];
    if (orphanScenes.length > 0 || scenesByChapter.size === 0) {
      const group = list.createDiv({ cls: "story-engine-group" });
      const groupHeader = group.createDiv({ cls: "story-engine-group-header" });
      groupHeader.createEl("h3", { text: "Without Chapter" });
      const addButton = groupHeader.createEl("button", {
        cls: "story-engine-add-btn",
        attr: { "aria-label": "Add scene" }
      });
      (0, import_obsidian17.setIcon)(addButton, "plus");
      addButton.createSpan({ text: "Add scene" });
      addButton.onclick = () => {
        if (!this.currentStory)
          return;
        new SceneModal(this.app, this.currentStory.id, this.chapters, async (scene) => {
          try {
            scene.chapter_id = null;
            await this.plugin.apiClient.createScene(scene);
            await this.loadHierarchy();
            this.renderTabContent();
            new import_obsidian17.Notice("Scene created successfully");
          } catch (err) {
            throw err;
          }
        }, this.scenes, void 0, null).open();
      };
      const groupItems = group.createDiv({ cls: "story-engine-group-items" });
      for (const scene of orphanScenes.sort((a, b) => a.order_num - b.order_num)) {
        this.renderSceneItem(groupItems, scene);
      }
    }
  }
  renderSceneItem(container, scene) {
    const item = container.createDiv({ cls: "story-engine-item" });
    item.createDiv({
      cls: "story-engine-title",
      text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`
    });
    const meta = item.createDiv({ cls: "story-engine-meta" });
    if (scene.time_ref) {
      meta.createEl("span", { text: `Time: ${scene.time_ref}` });
    }
    const actions = item.createDiv({ cls: "story-engine-item-actions" });
    const editBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Edit scene" }
    });
    (0, import_obsidian17.setIcon)(editBtn, "pencil");
    editBtn.onclick = () => {
      if (!this.currentStory)
        return;
      new SceneModal(this.app, this.currentStory.id, this.chapters, async (updatedScene) => {
        try {
          await this.plugin.apiClient.updateScene(scene.id, updatedScene);
          await this.loadHierarchy();
          this.renderTabContent();
          new import_obsidian17.Notice("Scene updated successfully");
        } catch (err) {
          throw err;
        }
      }, this.scenes, scene).open();
    };
    const siblingScenes = this.scenes.filter((s) => s.chapter_id === scene.chapter_id).sort((a, b) => a.order_num - b.order_num);
    const minOrderNum = siblingScenes.length > 0 ? Math.min(...siblingScenes.map((s) => s.order_num)) : scene.order_num;
    const maxOrderNum = siblingScenes.length > 0 ? Math.max(...siblingScenes.map((s) => s.order_num)) : scene.order_num;
    if (scene.order_num > minOrderNum) {
      const upBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Move scene up" }
      });
      (0, import_obsidian17.setIcon)(upBtn, "arrow-up");
      upBtn.onclick = () => {
        this.moveSceneUp(scene);
      };
    }
    if (scene.order_num < maxOrderNum) {
      const downBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Move scene down" }
      });
      (0, import_obsidian17.setIcon)(downBtn, "arrow-down");
      downBtn.onclick = () => {
        this.moveSceneDown(scene);
      };
    }
    const relinkBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Relink scene" }
    });
    (0, import_obsidian17.setIcon)(relinkBtn, "link-2");
    relinkBtn.onclick = async () => {
      await this.showMoveSceneModal(scene);
    };
    if (this.currentTab === "contents") {
      const chapterId = scene.chapter_id || (this.chapters.length > 0 ? this.chapters[0].id : "");
      if (chapterId) {
        const addContentBtn = actions.createEl("button", {
          cls: "story-engine-entity-action-btn",
          attr: { "aria-label": "Add content" }
        });
        (0, import_obsidian17.setIcon)(addContentBtn, "plus");
        addContentBtn.onclick = () => {
          this.createContentForEntity("scene", scene.id, chapterId);
        };
      }
    }
    const deleteBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Delete scene" }
    });
    (0, import_obsidian17.setIcon)(deleteBtn, "trash");
    deleteBtn.onclick = async () => {
      if (confirm("Delete this scene?")) {
        try {
          await this.plugin.apiClient.deleteScene(scene.id);
          await this.loadHierarchy();
          this.renderTabContent();
          new import_obsidian17.Notice("Scene deleted");
        } catch (err) {
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
        }
      }
    };
  }
  renderBeatsTab(container) {
    container.empty();
    if (this.beats.length === 0) {
      this.renderEmptyCard(container, {
        icon: "activity",
        title: "No beats yet",
        description: this.scenes.length === 0 ? "Create a scene first, then add beats to outline the flow." : "Add beats inside scenes to build the narrative rhythm."
      });
      return;
    }
    const beatsByScene = /* @__PURE__ */ new Map();
    for (const beat of this.beats) {
      if (!beatsByScene.has(beat.scene_id)) {
        beatsByScene.set(beat.scene_id, []);
      }
      beatsByScene.get(beat.scene_id).push(beat);
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const chapterScenes = this.scenes.filter((s) => s.chapter_id === chapter.id).sort((a, b) => a.order_num - b.order_num);
      if (chapterScenes.length > 0) {
        const chapterGroup = list.createDiv({ cls: "story-engine-chapter-group" });
        const chapterHeader = chapterGroup.createDiv({ cls: "story-engine-chapter-group-header" });
        chapterHeader.createEl("h2", {
          text: `Chapter ${chapter.number}: ${chapter.title}`
        });
        const chapterContent = chapterGroup.createDiv({ cls: "story-engine-chapter-group-content" });
        for (const scene of chapterScenes) {
          const sceneBeats = beatsByScene.get(scene.id) || [];
          const sceneGroup = chapterContent.createDiv({ cls: "story-engine-group" });
          const sceneHeader = sceneGroup.createDiv({ cls: "story-engine-group-header" });
          sceneHeader.createEl("h3", {
            text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`
          });
          const addButton = sceneHeader.createEl("button", {
            cls: "story-engine-add-btn",
            attr: { "aria-label": "Add beat" }
          });
          (0, import_obsidian17.setIcon)(addButton, "plus");
          addButton.createSpan({ text: "Add Beat" });
          addButton.onclick = () => {
            if (!this.currentStory)
              return;
            new BeatModal(this.app, this.currentStory.id, this.scenes, async (beat) => {
              try {
                beat.scene_id = scene.id;
                await this.plugin.apiClient.createBeat(beat);
                await this.loadHierarchy();
                this.renderTabContent();
                new import_obsidian17.Notice("Beat created successfully");
              } catch (err) {
                throw err;
              }
            }, this.beats, void 0, this.chapters, scene.id).open();
          };
          const sceneItems = sceneGroup.createDiv({ cls: "story-engine-group-items" });
          if (sceneBeats.length === 0) {
            sceneItems.createEl("p", { text: "No beats in this scene." });
          } else {
            for (const beat of sceneBeats.sort((a, b) => a.order_num - b.order_num)) {
              this.renderBeatItem(sceneItems, beat);
            }
          }
        }
      }
    }
    const orphanBeats = this.beats.filter((b) => {
      const scene = this.scenes.find((s) => s.id === b.scene_id);
      return !scene || !scene.chapter_id;
    });
    if (this.chapters.length === 0 || orphanBeats.length > 0 || this.scenes.some((s) => !s.chapter_id)) {
      const orphanGroup = list.createDiv({ cls: "story-engine-chapter-group" });
      const orphanHeader = orphanGroup.createDiv({ cls: "story-engine-chapter-group-header" });
      orphanHeader.createEl("h2", { text: "Without Chapter" });
      const orphanContent = orphanGroup.createDiv({ cls: "story-engine-chapter-group-content" });
      const orphanScenes = this.scenes.filter((s) => !s.chapter_id).sort((a, b) => a.order_num - b.order_num);
      for (const scene of orphanScenes) {
        const sceneBeats = beatsByScene.get(scene.id) || [];
        const sceneGroup = orphanContent.createDiv({ cls: "story-engine-group" });
        const sceneHeader = sceneGroup.createDiv({ cls: "story-engine-group-header" });
        sceneHeader.createEl("h3", {
          text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`
        });
        const addButton = sceneHeader.createEl("button", {
          cls: "story-engine-add-btn",
          attr: { "aria-label": "Add beat" }
        });
        (0, import_obsidian17.setIcon)(addButton, "plus");
        addButton.createSpan({ text: "Add Beat" });
        addButton.onclick = () => {
          if (!this.currentStory)
            return;
          new BeatModal(this.app, this.currentStory.id, this.scenes, async (beat) => {
            try {
              beat.scene_id = scene.id;
              await this.plugin.apiClient.createBeat(beat);
              await this.loadHierarchy();
              this.renderTabContent();
              new import_obsidian17.Notice("Beat created successfully");
            } catch (err) {
              throw err;
            }
          }, this.beats, void 0, this.chapters, scene.id).open();
        };
        const sceneItems = sceneGroup.createDiv({ cls: "story-engine-group-items" });
        if (sceneBeats.length === 0) {
          sceneItems.createEl("p", { text: "No beats in this scene." });
        } else {
          for (const beat of sceneBeats.sort((a, b) => a.order_num - b.order_num)) {
            this.renderBeatItem(sceneItems, beat);
          }
        }
      }
      const beatsWithoutScene = orphanBeats.filter((b) => {
        const scene = this.scenes.find((s) => s.id === b.scene_id);
        return !scene;
      });
      if (beatsWithoutScene.length > 0 || orphanScenes.length === 0 && this.beats.length > 0 && this.scenes.length === 0) {
        const sceneGroup = orphanContent.createDiv({ cls: "story-engine-group" });
        const sceneHeader = sceneGroup.createDiv({ cls: "story-engine-group-header" });
        sceneHeader.createEl("h3", { text: "Without Scene" });
        const sceneItems = sceneGroup.createDiv({ cls: "story-engine-group-items" });
        if (beatsWithoutScene.length > 0) {
          for (const beat of beatsWithoutScene.sort((a, b) => a.order_num - b.order_num)) {
            this.renderBeatItem(sceneItems, beat);
          }
        } else {
          sceneItems.createEl("p", { text: "No beats without scene." });
        }
      }
    }
  }
  renderBeatItem(container, beat) {
    const item = container.createDiv({ cls: "story-engine-item" });
    item.createDiv({
      cls: "story-engine-title",
      text: `Beat ${beat.order_num}: ${beat.type}`
    });
    const meta = item.createDiv({ cls: "story-engine-meta" });
    if (beat.intent) {
      meta.createEl("span", { text: `Intent: ${beat.intent}` });
    }
    if (beat.outcome) {
      meta.createEl("span", { text: `Outcome: ${beat.outcome}` });
    }
    const actions = item.createDiv({ cls: "story-engine-item-actions" });
    const editBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Edit beat" }
    });
    (0, import_obsidian17.setIcon)(editBtn, "pencil");
    editBtn.onclick = () => {
      if (!this.currentStory)
        return;
      new BeatModal(this.app, this.currentStory.id, this.scenes, async (updatedBeat) => {
        try {
          await this.plugin.apiClient.updateBeat(beat.id, updatedBeat);
          await this.loadHierarchy();
          this.renderTabContent();
          new import_obsidian17.Notice("Beat updated successfully");
        } catch (err) {
          throw err;
        }
      }, this.beats, beat, this.chapters).open();
    };
    const siblingBeats = this.beats.filter((b) => b.scene_id === beat.scene_id).sort((a, b) => a.order_num - b.order_num);
    const minOrderNum = siblingBeats.length > 0 ? Math.min(...siblingBeats.map((b) => b.order_num)) : beat.order_num;
    const maxOrderNum = siblingBeats.length > 0 ? Math.max(...siblingBeats.map((b) => b.order_num)) : beat.order_num;
    if (beat.order_num > minOrderNum) {
      const upBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Move beat up" }
      });
      (0, import_obsidian17.setIcon)(upBtn, "arrow-up");
      upBtn.onclick = () => {
        this.moveBeatUp(beat);
      };
    }
    if (beat.order_num < maxOrderNum) {
      const downBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Move beat down" }
      });
      (0, import_obsidian17.setIcon)(downBtn, "arrow-down");
      downBtn.onclick = () => {
        this.moveBeatDown(beat);
      };
    }
    const relinkBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Relink beat" }
    });
    (0, import_obsidian17.setIcon)(relinkBtn, "link-2");
    relinkBtn.onclick = async () => {
      await this.showMoveBeatModal(beat);
    };
    if (this.currentTab === "contents") {
      const scene = this.scenes.find((s) => s.id === beat.scene_id);
      const chapterId = (scene == null ? void 0 : scene.chapter_id) || (this.chapters.length > 0 ? this.chapters[0].id : "");
      if (chapterId) {
        const addContentBtn = actions.createEl("button", {
          cls: "story-engine-entity-action-btn",
          attr: { "aria-label": "Add content" }
        });
        (0, import_obsidian17.setIcon)(addContentBtn, "plus");
        addContentBtn.onclick = () => {
          this.createContentForEntity("beat", beat.id, chapterId);
        };
      }
    }
    const deleteBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Delete beat" }
    });
    (0, import_obsidian17.setIcon)(deleteBtn, "trash");
    deleteBtn.onclick = async () => {
      if (confirm("Delete this beat?")) {
        try {
          await this.plugin.apiClient.deleteBeat(beat.id);
          await this.loadHierarchy();
          this.renderTabContent();
          new import_obsidian17.Notice("Beat deleted");
        } catch (err) {
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
        }
      }
    };
  }
  showEditStoryNameModal() {
    if (!this.currentStory)
      return;
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Edit Story Name");
    const content = modal.contentEl;
    let title = this.currentStory.title;
    content.createEl("label", { text: "Story Name *" });
    const titleInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: title });
    titleInput.oninput = () => {
      title = titleInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!title.trim()) {
        new import_obsidian17.Notice("Story name is required", 3e3);
        return;
      }
      try {
        const updatedStory = await this.plugin.apiClient.updateStory(this.currentStory.id, title.trim());
        this.currentStory = updatedStory;
        await this.loadStories();
        this.renderDetailsHeader();
        modal.close();
        new import_obsidian17.Notice("Story name updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    titleInput.focus();
    titleInput.select();
  }
  async cloneStory() {
    var _a;
    if (!this.currentStory)
      return;
    const cloneButton = (_a = this.headerEl) == null ? void 0 : _a.querySelector(".story-engine-clone-btn");
    if (cloneButton) {
      cloneButton.disabled = true;
      cloneButton.setText("Cloning...");
    }
    try {
      if (!this.plugin.settings.tenantId) {
        throw new Error("Tenant ID not configured");
      }
      const clonedStory = await this.plugin.apiClient.cloneStory(
        this.currentStory.id
      );
      new import_obsidian17.Notice(`Story "${clonedStory.title}" cloned successfully!`);
      await this.loadStories();
      await this.showStoryDetails(clonedStory);
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Clone failed";
      new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
      if (cloneButton) {
        cloneButton.setText("Clone Story");
        cloneButton.disabled = false;
      }
    }
  }
  showEditWorldModal() {
    if (!this.currentWorld)
      return;
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Edit World");
    const content = modal.contentEl;
    let name = this.currentWorld.name;
    let description = this.currentWorld.description;
    let genre = this.currentWorld.genre;
    content.createEl("label", { text: "World Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Genre *" });
    const genreInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: genre });
    genreInput.oninput = () => {
      genre = genreInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
        new import_obsidian17.Notice("World name is required", 3e3);
        return;
      }
      if (!genre.trim()) {
        new import_obsidian17.Notice("Genre is required", 3e3);
        return;
      }
      try {
        const updatedWorld = await this.plugin.apiClient.updateWorld(
          this.currentWorld.id,
          name.trim(),
          description.trim(),
          genre.trim()
        );
        this.currentWorld = updatedWorld;
        await this.loadStories();
        this.renderWorldDetails();
        modal.close();
        new import_obsidian17.Notice("World updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
    nameInput.select();
  }
  copyStoryId() {
    if (!this.currentStory)
      return;
    navigator.clipboard.writeText(this.currentStory.id).then(() => {
      new import_obsidian17.Notice("UUID copied to clipboard");
    }).catch(() => {
      const textarea = document.createElement("textarea");
      textarea.value = this.currentStory.id;
      textarea.style.position = "fixed";
      textarea.style.opacity = "0";
      textarea.style.left = "-9999px";
      document.body.appendChild(textarea);
      textarea.select();
      try {
        document.execCommand("copy");
        new import_obsidian17.Notice("UUID copied to clipboard");
      } catch (err) {
        new import_obsidian17.Notice("Failed to copy UUID", 3e3);
      }
      document.body.removeChild(textarea);
    });
  }
  async moveChapterUp(chapter) {
    const sortedChapters = [...this.chapters].sort((a, b) => a.number - b.number);
    const currentIndex = sortedChapters.findIndex((c) => c.id === chapter.id);
    if (currentIndex <= 0)
      return;
    const previousChapter = sortedChapters[currentIndex - 1];
    const tempNumber = chapter.number;
    try {
      await this.plugin.apiClient.updateChapter(chapter.id, { number: previousChapter.number });
      await this.plugin.apiClient.updateChapter(previousChapter.id, { number: tempNumber });
      await this.loadHierarchy();
      this.renderTabContent();
      new import_obsidian17.Notice("Chapter moved up");
    } catch (err) {
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
    }
  }
  async moveChapterDown(chapter) {
    const sortedChapters = [...this.chapters].sort((a, b) => a.number - b.number);
    const currentIndex = sortedChapters.findIndex((c) => c.id === chapter.id);
    if (currentIndex < 0 || currentIndex >= sortedChapters.length - 1)
      return;
    const nextChapter = sortedChapters[currentIndex + 1];
    const tempNumber = chapter.number;
    try {
      await this.plugin.apiClient.updateChapter(chapter.id, { number: nextChapter.number });
      await this.plugin.apiClient.updateChapter(nextChapter.id, { number: tempNumber });
      await this.loadHierarchy();
      this.renderTabContent();
      new import_obsidian17.Notice("Chapter moved down");
    } catch (err) {
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
    }
  }
  async moveSceneUp(scene) {
    const siblingScenes = this.scenes.filter((s) => s.chapter_id === scene.chapter_id).sort((a, b) => a.order_num - b.order_num);
    const currentIndex = siblingScenes.findIndex((s) => s.id === scene.id);
    if (currentIndex <= 0)
      return;
    const previousScene = siblingScenes[currentIndex - 1];
    const tempOrderNum = scene.order_num;
    try {
      await this.plugin.apiClient.updateScene(scene.id, { order_num: previousScene.order_num });
      await this.plugin.apiClient.updateScene(previousScene.id, { order_num: tempOrderNum });
      await this.loadHierarchy();
      this.renderTabContent();
      new import_obsidian17.Notice("Scene moved up");
    } catch (err) {
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
    }
  }
  async moveSceneDown(scene) {
    const siblingScenes = this.scenes.filter((s) => s.chapter_id === scene.chapter_id).sort((a, b) => a.order_num - b.order_num);
    const currentIndex = siblingScenes.findIndex((s) => s.id === scene.id);
    if (currentIndex < 0 || currentIndex >= siblingScenes.length - 1)
      return;
    const nextScene = siblingScenes[currentIndex + 1];
    const tempOrderNum = scene.order_num;
    try {
      await this.plugin.apiClient.updateScene(scene.id, { order_num: nextScene.order_num });
      await this.plugin.apiClient.updateScene(nextScene.id, { order_num: tempOrderNum });
      await this.loadHierarchy();
      this.renderTabContent();
      new import_obsidian17.Notice("Scene moved down");
    } catch (err) {
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
    }
  }
  async moveBeatUp(beat) {
    const siblingBeats = this.beats.filter((b) => b.scene_id === beat.scene_id).sort((a, b) => a.order_num - b.order_num);
    const currentIndex = siblingBeats.findIndex((b) => b.id === beat.id);
    if (currentIndex <= 0)
      return;
    const previousBeat = siblingBeats[currentIndex - 1];
    const tempOrderNum = beat.order_num;
    try {
      await this.plugin.apiClient.updateBeat(beat.id, { order_num: previousBeat.order_num });
      await this.plugin.apiClient.updateBeat(previousBeat.id, { order_num: tempOrderNum });
      await this.loadHierarchy();
      this.renderTabContent();
      new import_obsidian17.Notice("Beat moved up");
    } catch (err) {
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
    }
  }
  async moveBeatDown(beat) {
    const siblingBeats = this.beats.filter((b) => b.scene_id === beat.scene_id).sort((a, b) => a.order_num - b.order_num);
    const currentIndex = siblingBeats.findIndex((b) => b.id === beat.id);
    if (currentIndex < 0 || currentIndex >= siblingBeats.length - 1)
      return;
    const nextBeat = siblingBeats[currentIndex + 1];
    const tempOrderNum = beat.order_num;
    try {
      await this.plugin.apiClient.updateBeat(beat.id, { order_num: nextBeat.order_num });
      await this.plugin.apiClient.updateBeat(nextBeat.id, { order_num: tempOrderNum });
      await this.loadHierarchy();
      this.renderTabContent();
      new import_obsidian17.Notice("Beat moved down");
    } catch (err) {
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
    }
  }
  async showMoveSceneModal(scene) {
    if (!this.currentStory)
      return;
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Move Scene");
    const content = modal.contentEl;
    content.createEl("p", { text: `Move scene "${scene.goal || `Scene ${scene.order_num}`}" to:` });
    const select = content.createEl("select", { cls: "story-engine-move-select" });
    const noChapterOption = select.createEl("option", { text: "No Chapter", value: "" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const option = select.createEl("option", {
        text: `Chapter ${chapter.number}: ${chapter.title}`,
        value: chapter.id
      });
      if (scene.chapter_id === chapter.id) {
        option.selected = true;
      }
    }
    if (!scene.chapter_id) {
      noChapterOption.selected = true;
    }
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const moveButton = buttonContainer.createEl("button", {
      text: "Move",
      cls: "mod-cta"
    });
    moveButton.onclick = async () => {
      const selectedChapterId = select.value || null;
      try {
        await this.plugin.apiClient.moveScene(scene.id, selectedChapterId);
        await this.loadHierarchy();
        this.renderTabContent();
        modal.close();
        new import_obsidian17.Notice("Scene moved successfully");
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to move scene";
        new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
      }
    };
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    cancelButton.onclick = () => modal.close();
    modal.open();
  }
  async showMoveBeatModal(beat) {
    if (!this.currentStory)
      return;
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Move Beat");
    const content = modal.contentEl;
    content.createEl("p", { text: `Move beat "${beat.type}" to:` });
    const select = content.createEl("select", { cls: "story-engine-move-select" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const chapterScenes = this.scenes.filter((s) => s.chapter_id === chapter.id).sort((a, b) => a.order_num - b.order_num);
      if (chapterScenes.length > 0) {
        const optgroup = select.createEl("optgroup");
        optgroup.label = `Chapter ${chapter.number}: ${chapter.title}`;
        for (const scene of chapterScenes) {
          const option = optgroup.createEl("option", {
            text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`,
            value: scene.id
          });
          if (beat.scene_id === scene.id) {
            option.selected = true;
          }
        }
      }
    }
    const orphanScenes = this.scenes.filter((s) => !s.chapter_id);
    if (orphanScenes.length > 0) {
      const optgroup = select.createEl("optgroup");
      optgroup.label = "No Chapter";
      for (const scene of orphanScenes.sort((a, b) => a.order_num - b.order_num)) {
        const option = optgroup.createEl("option", {
          text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`,
          value: scene.id
        });
        if (beat.scene_id === scene.id) {
          option.selected = true;
        }
      }
    }
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const moveButton = buttonContainer.createEl("button", {
      text: "Move",
      cls: "mod-cta"
    });
    moveButton.onclick = async () => {
      const selectedSceneId = select.value;
      if (!selectedSceneId) {
        new import_obsidian17.Notice("Please select a scene", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.moveBeat(beat.id, selectedSceneId);
        await this.loadHierarchy();
        this.renderTabContent();
        modal.close();
        new import_obsidian17.Notice("Beat moved successfully");
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to move beat";
        new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
      }
    };
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    cancelButton.onclick = () => modal.close();
    modal.open();
  }
  renderContentsTab(container) {
    container.empty();
    if (this.contentBlocks.length === 0) {
      this.renderEmptyCard(container, {
        icon: "file-text",
        title: "No content yet",
        description: "Add content to chapters, scenes or beats to see it organized here."
      });
      return;
    }
    const contentsByChapter = /* @__PURE__ */ new Map();
    const contentsByScene = /* @__PURE__ */ new Map();
    const contentsByBeat = /* @__PURE__ */ new Map();
    const orphanContents = [];
    for (const block of this.contentBlocks) {
      const refs = this.contentBlockRefs.filter((r) => r.content_block_id === block.id);
      if (refs.length === 0) {
        orphanContents.push(block);
        continue;
      }
      for (const ref of refs) {
        if (ref.entity_type === "chapter") {
          if (!contentsByChapter.has(ref.entity_id)) {
            contentsByChapter.set(ref.entity_id, []);
          }
          contentsByChapter.get(ref.entity_id).push(block);
        } else if (ref.entity_type === "scene") {
          if (!contentsByScene.has(ref.entity_id)) {
            contentsByScene.set(ref.entity_id, []);
          }
          contentsByScene.get(ref.entity_id).push(block);
        } else if (ref.entity_type === "beat") {
          if (!contentsByBeat.has(ref.entity_id)) {
            contentsByBeat.set(ref.entity_id, []);
          }
          contentsByBeat.get(ref.entity_id).push(block);
        }
      }
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const chapterContents = contentsByChapter.get(chapter.id) || [];
      const chapterScenes = this.scenes.filter((s) => s.chapter_id === chapter.id).sort((a, b) => a.order_num - b.order_num);
      if (chapterContents.length > 0 || chapterScenes.length > 0 || chapterScenes.some((s) => {
        const sceneContents = contentsByScene.get(s.id) || [];
        const sceneBeats = this.beats.filter((b) => b.scene_id === s.id);
        const beatContents = sceneBeats.flatMap((b) => contentsByBeat.get(b.id) || []);
        return sceneContents.length > 0 || beatContents.length > 0;
      })) {
        const chapterGroup = list.createDiv({ cls: "story-engine-chapter-group" });
        const chapterHeader = chapterGroup.createDiv({ cls: "story-engine-chapter-group-header story-engine-hoverable-header" });
        chapterHeader.createEl("h2", {
          text: `Chapter ${chapter.number}: ${chapter.title}`
        });
        const chapterHeaderActions = chapterHeader.createDiv({ cls: "story-engine-hover-header-actions" });
        const textBtn = chapterHeaderActions.createEl("button", {
          cls: "story-engine-add-content-btn story-engine-add-text-btn",
          attr: { "aria-label": "Add text content" }
        });
        (0, import_obsidian17.setIcon)(textBtn, "file-text");
        textBtn.onclick = () => {
          this.createContentForEntity("chapter", chapter.id, chapter.id, "text");
        };
        const imageBtn = chapterHeaderActions.createEl("button", {
          cls: "story-engine-add-content-btn story-engine-add-image-btn",
          attr: { "aria-label": "Add image content" }
        });
        (0, import_obsidian17.setIcon)(imageBtn, "image");
        imageBtn.onclick = () => {
          this.createContentForEntity("chapter", chapter.id, chapter.id, "image");
        };
        const chapterContent = chapterGroup.createDiv({ cls: "story-engine-chapter-group-content" });
        const chapterContentsGroup = chapterContent.createDiv({ cls: "story-engine-group" });
        const chapterContentsHeader = chapterContentsGroup.createDiv({ cls: "story-engine-group-header" });
        chapterContentsHeader.createEl("h3", { text: "Chapter Contents" });
        const chapterContentsItems = chapterContentsGroup.createDiv({ cls: "story-engine-group-items" });
        if (chapterContents.length > 0) {
          for (const block of chapterContents) {
            this.renderContentItem(chapterContentsItems, block, "chapter", chapter.id);
          }
        } else {
          chapterContentsItems.createEl("p", { text: "No content in this chapter.", cls: "story-engine-empty-content" });
        }
        for (const scene of chapterScenes) {
          const sceneContents = contentsByScene.get(scene.id) || [];
          const sceneBeats = this.beats.filter((b) => b.scene_id === scene.id).sort((a, b) => a.order_num - b.order_num);
          const beatContents = sceneBeats.flatMap((b) => contentsByBeat.get(b.id) || []);
          const sceneGroup = chapterContent.createDiv({ cls: "story-engine-group" });
          const sceneHeader = sceneGroup.createDiv({ cls: "story-engine-group-header story-engine-hoverable-header" });
          sceneHeader.createEl("h3", {
            text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`
          });
          const sceneHeaderActions = sceneHeader.createDiv({ cls: "story-engine-hover-header-actions" });
          const chapterId = scene.chapter_id || (this.chapters.length > 0 ? this.chapters[0].id : "");
          if (chapterId) {
            const textBtn2 = sceneHeaderActions.createEl("button", {
              cls: "story-engine-add-content-btn story-engine-add-text-btn",
              attr: { "aria-label": "Add text content" }
            });
            (0, import_obsidian17.setIcon)(textBtn2, "file-text");
            textBtn2.onclick = () => {
              this.createContentForEntity("scene", scene.id, chapterId, "text");
            };
            const imageBtn2 = sceneHeaderActions.createEl("button", {
              cls: "story-engine-add-content-btn story-engine-add-image-btn",
              attr: { "aria-label": "Add image content" }
            });
            (0, import_obsidian17.setIcon)(imageBtn2, "image");
            imageBtn2.onclick = () => {
              this.createContentForEntity("scene", scene.id, chapterId, "image");
            };
          }
          const sceneItems = sceneGroup.createDiv({ cls: "story-engine-group-items" });
          if (sceneContents.length > 0) {
            for (const block of sceneContents) {
              this.renderContentItem(sceneItems, block, "scene", scene.id);
            }
          } else {
            sceneItems.createEl("p", { text: "No content in this scene.", cls: "story-engine-empty-content" });
          }
          for (const beat of sceneBeats) {
            const beatContents2 = contentsByBeat.get(beat.id) || [];
            const beatSubGroup = sceneItems.createDiv({ cls: "story-engine-beat-subgroup" });
            const beatSubGroupTitle = beatSubGroup.createDiv({ cls: "story-engine-beat-subgroup-title-container story-engine-hoverable-header" });
            beatSubGroupTitle.createEl("h4", {
              text: `Beat ${beat.order_num}: ${beat.type}`,
              cls: "story-engine-beat-subgroup-title"
            });
            const beatHeaderActions = beatSubGroupTitle.createDiv({ cls: "story-engine-hover-header-actions" });
            const beatChapterId = scene.chapter_id || (this.chapters.length > 0 ? this.chapters[0].id : "");
            if (beatChapterId) {
              const textBtn2 = beatHeaderActions.createEl("button", {
                cls: "story-engine-add-content-btn story-engine-add-text-btn",
                attr: { "aria-label": "Add text content" }
              });
              (0, import_obsidian17.setIcon)(textBtn2, "file-text");
              textBtn2.onclick = () => {
                this.createContentForEntity("beat", beat.id, beatChapterId, "text");
              };
              const imageBtn2 = beatHeaderActions.createEl("button", {
                cls: "story-engine-add-content-btn story-engine-add-image-btn",
                attr: { "aria-label": "Add image content" }
              });
              (0, import_obsidian17.setIcon)(imageBtn2, "image");
              imageBtn2.onclick = () => {
                this.createContentForEntity("beat", beat.id, beatChapterId, "image");
              };
            }
            if (beatContents2.length > 0) {
              for (const block of beatContents2) {
                this.renderContentItem(beatSubGroup, block, "beat", beat.id);
              }
            } else {
              beatSubGroup.createEl("p", { text: "No content in this beat.", cls: "story-engine-empty-beat-content" });
            }
          }
        }
      }
    }
    if (this.chapters.length === 0 || orphanContents.length > 0 || this.scenes.some((s) => !s.chapter_id)) {
      const orphanGroup = list.createDiv({ cls: "story-engine-chapter-group" });
      const orphanHeader = orphanGroup.createDiv({ cls: "story-engine-chapter-group-header" });
      orphanHeader.createEl("h2", { text: "Without Chapter" });
      const orphanContent = orphanGroup.createDiv({ cls: "story-engine-chapter-group-content" });
      const orphanScenes = this.scenes.filter((s) => !s.chapter_id).sort((a, b) => a.order_num - b.order_num);
      for (const scene of orphanScenes) {
        const sceneContents = contentsByScene.get(scene.id) || [];
        const sceneBeats = this.beats.filter((b) => b.scene_id === scene.id).sort((a, b) => a.order_num - b.order_num);
        const beatContents = sceneBeats.flatMap((b) => contentsByBeat.get(b.id) || []);
        const sceneGroup = orphanContent.createDiv({ cls: "story-engine-group" });
        const sceneHeader = sceneGroup.createDiv({ cls: "story-engine-group-header story-engine-hoverable-header" });
        sceneHeader.createEl("h3", {
          text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`
        });
        const sceneHeaderActions = sceneHeader.createDiv({ cls: "story-engine-hover-header-actions" });
        const chapterId = this.chapters.length > 0 ? this.chapters[0].id : "";
        if (chapterId) {
          const addContentBtn = sceneHeaderActions.createEl("button", {
            cls: "story-engine-add-content-btn",
            attr: { "aria-label": "Add content" }
          });
          (0, import_obsidian17.setIcon)(addContentBtn, "plus");
          addContentBtn.onclick = () => {
            this.createContentForEntity("scene", scene.id, chapterId);
          };
        }
        const sceneItems = sceneGroup.createDiv({ cls: "story-engine-group-items" });
        if (sceneContents.length > 0) {
          for (const block of sceneContents) {
            this.renderContentItem(sceneItems, block, "scene", scene.id);
          }
        } else {
          sceneItems.createEl("p", { text: "No content in this scene." });
        }
        for (const beat of sceneBeats) {
          const beatContents2 = contentsByBeat.get(beat.id) || [];
          const beatSubGroup = sceneItems.createDiv({ cls: "story-engine-beat-subgroup" });
          const beatSubGroupTitle = beatSubGroup.createDiv({ cls: "story-engine-beat-subgroup-title-container story-engine-hoverable-header" });
          beatSubGroupTitle.createEl("h4", {
            text: `Beat ${beat.order_num}: ${beat.type}`,
            cls: "story-engine-beat-subgroup-title"
          });
          const beatHeaderActions = beatSubGroupTitle.createDiv({ cls: "story-engine-hover-header-actions" });
          const beatChapterId = this.chapters.length > 0 ? this.chapters[0].id : "";
          if (beatChapterId) {
            const addContentBtn = beatHeaderActions.createEl("button", {
              cls: "story-engine-add-content-btn",
              attr: { "aria-label": "Add content" }
            });
            (0, import_obsidian17.setIcon)(addContentBtn, "plus");
            addContentBtn.onclick = () => {
              this.createContentForEntity("beat", beat.id, beatChapterId);
            };
          }
          if (beatContents2.length > 0) {
            for (const block of beatContents2) {
              this.renderContentItem(beatSubGroup, block, "beat", beat.id);
            }
          } else {
            beatSubGroup.createEl("p", { text: "No content in this beat.", cls: "story-engine-empty-beat-content" });
          }
        }
      }
      if (orphanContents.length > 0) {
        const orphanContentsGroup = orphanContent.createDiv({ cls: "story-engine-group" });
        const orphanContentsHeader = orphanContentsGroup.createDiv({ cls: "story-engine-group-header" });
        orphanContentsHeader.createEl("h3", { text: "Without Reference" });
        const orphanContentsItems = orphanContentsGroup.createDiv({ cls: "story-engine-group-items" });
        for (const block of orphanContents) {
          this.renderContentItem(orphanContentsItems, block, null, null);
        }
      }
    }
  }
  async loadStoryCharacters() {
    if (!this.currentStory || !this.currentStory.world_id) {
      this.storyCharacters = [];
      return;
    }
    try {
      this.storyCharacters = await this.plugin.apiClient.getCharacters(this.currentStory.world_id);
    } catch (err) {
      console.error("Error loading story characters:", err);
      this.storyCharacters = [];
      new import_obsidian17.Notice(`Error loading characters: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
    }
  }
  renderStoryCharactersTab(container) {
    var _a;
    container.empty();
    if (!((_a = this.currentStory) == null ? void 0 : _a.world_id)) {
      this.renderEmptyCard(container, {
        icon: "globe",
        title: "No world linked",
        description: "Link this story to a world to view its characters."
      });
      return;
    }
    if (this.storyCharacters.length === 0) {
      this.renderEmptyCard(container, {
        icon: "user",
        title: "No characters in this world",
        description: "Create the first character linked to this story's world."
      });
    } else {
      const list = container.createDiv({ cls: "story-engine-list" });
      for (const character of this.storyCharacters.sort((a, b) => a.name.localeCompare(b.name))) {
        const item = list.createDiv({ cls: "story-engine-item" });
        const titleDiv = item.createDiv({ cls: "story-engine-title", text: character.name });
        titleDiv.style.cursor = "pointer";
        titleDiv.onclick = () => {
          this.showCharacterDetails(character);
        };
        const meta = item.createDiv({ cls: "story-engine-meta" });
        if (character.description) {
          meta.createEl("span", {
            text: character.description.substring(0, 80) + (character.description.length > 80 ? "..." : "")
          });
        }
        const actions = item.createDiv({ cls: "story-engine-item-actions" });
        const viewBtn = actions.createEl("button", {
          cls: "story-engine-entity-action-btn",
          attr: { "aria-label": "View character" }
        });
        (0, import_obsidian17.setIcon)(viewBtn, "eye");
        viewBtn.onclick = () => {
          this.showCharacterDetails(character);
        };
      }
    }
  }
  showCreateCharacterModalForStory() {
    var _a;
    if (!((_a = this.currentStory) == null ? void 0 : _a.world_id)) {
      new import_obsidian17.Notice("This story is not linked to a world");
      return;
    }
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Create Character");
    const content = modal.contentEl;
    let name = "";
    let description = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
        new import_obsidian17.Notice("Name is required", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.createCharacter(this.currentStory.world_id, {
          name: name.trim(),
          description: description.trim()
        });
        await this.loadStoryCharacters();
        this.renderTabContent();
        modal.close();
        new import_obsidian17.Notice("Character created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  renderContentItem(container, contentBlock, entityType, entityId) {
    var _a, _b;
    const item = container.createDiv({ cls: "story-engine-item story-engine-content-item" });
    const itemContent = item.createDiv({ cls: "story-engine-content-item-content" });
    const iconContainer = itemContent.createDiv({ cls: "story-engine-content-icon" });
    const iconMap = {
      text: "file-text",
      image: "image",
      video: "video",
      audio: "music",
      embed: "code",
      link: "external-link"
    };
    const iconName = iconMap[contentBlock.type] || "file";
    (0, import_obsidian17.setIcon)(iconContainer, iconName);
    const preview = itemContent.createDiv({ cls: "story-engine-content-preview" });
    if (contentBlock.type === "text") {
      const textPreview = contentBlock.content || "";
      const truncated = textPreview.length > 100 ? textPreview.substring(0, 100) + "..." : textPreview;
      preview.createEl("span", { text: truncated });
    } else if (contentBlock.type === "image") {
      const imgContainer = preview.createDiv({ cls: "story-engine-image-container" });
      const img = imgContainer.createEl("img", {
        attr: { src: contentBlock.content || "", alt: ((_a = contentBlock.metadata) == null ? void 0 : _a.alt_text) || "" },
        cls: "story-engine-content-thumbnail"
      });
      img.style.maxWidth = "100px";
      img.style.maxHeight = "60px";
      img.style.objectFit = "cover";
      img.style.borderRadius = "4px";
      if ((_b = contentBlock.metadata) == null ? void 0 : _b.attribution) {
        const attribution = imgContainer.createDiv({ cls: "story-engine-unsplash-attribution" });
        attribution.createEl("span", {
          text: contentBlock.metadata.attribution,
          cls: "story-engine-attribution-text"
        });
      }
    } else {
      preview.createEl("span", { text: contentBlock.content || "" });
    }
    const actions = item.createDiv({ cls: "story-engine-item-actions" });
    const editBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Edit content" }
    });
    (0, import_obsidian17.setIcon)(editBtn, "pencil");
    editBtn.onclick = () => {
      new ContentBlockModal(this.app, async (updatedContentBlock) => {
        try {
          await this.plugin.apiClient.updateContentBlock(contentBlock.id, updatedContentBlock);
          await this.loadHierarchy();
          this.renderTabContent();
          new import_obsidian17.Notice("Content block updated successfully");
        } catch (err) {
          throw err;
        }
      }, contentBlock, this.plugin).open();
    };
    const moveBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Move content" }
    });
    (0, import_obsidian17.setIcon)(moveBtn, "move");
    moveBtn.onclick = async () => {
      await this.showMoveContentModal(contentBlock, entityType, entityId, "move");
    };
    const linkBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Link content" }
    });
    (0, import_obsidian17.setIcon)(linkBtn, "link-2");
    linkBtn.onclick = async () => {
      await this.showMoveContentModal(contentBlock, entityType, entityId, "link");
    };
    const deleteBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Delete content" }
    });
    (0, import_obsidian17.setIcon)(deleteBtn, "trash");
    deleteBtn.onclick = async () => {
      if (confirm("Delete this content block?")) {
        try {
          await this.plugin.apiClient.deleteContentBlock(contentBlock.id);
          await this.loadHierarchy();
          this.renderTabContent();
          new import_obsidian17.Notice("Content block deleted");
        } catch (err) {
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
        }
      }
    };
  }
  async showMoveContentModal(contentBlock, currentEntityType, currentEntityId, mode) {
    if (!this.currentStory)
      return;
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText(mode === "move" ? "Move Content Block" : "Link Content Block");
    const content = modal.contentEl;
    content.createEl("p", {
      text: mode === "move" ? `Move content block to:` : `Link content block to (will appear in both places):`
    });
    const select = content.createEl("select", { cls: "story-engine-move-select" });
    const noRefOption = select.createEl("option", { text: "No Reference", value: "" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const option = select.createEl("option", {
        text: `Chapter ${chapter.number}: ${chapter.title}`,
        value: `chapter:${chapter.id}`
      });
      if (currentEntityType === "chapter" && currentEntityId === chapter.id) {
        option.selected = true;
      }
    }
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const chapterScenes = this.scenes.filter((s) => s.chapter_id === chapter.id).sort((a, b) => a.order_num - b.order_num);
      if (chapterScenes.length > 0) {
        const optgroup = select.createEl("optgroup");
        optgroup.label = `Chapter ${chapter.number}: ${chapter.title} - Scenes`;
        for (const scene of chapterScenes) {
          const option = optgroup.createEl("option", {
            text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`,
            value: `scene:${scene.id}`
          });
          if (currentEntityType === "scene" && currentEntityId === scene.id) {
            option.selected = true;
          }
        }
      }
    }
    const orphanScenes = this.scenes.filter((s) => !s.chapter_id);
    if (orphanScenes.length > 0) {
      const optgroup = select.createEl("optgroup");
      optgroup.label = "No Chapter - Scenes";
      for (const scene of orphanScenes.sort((a, b) => a.order_num - b.order_num)) {
        const option = optgroup.createEl("option", {
          text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`,
          value: `scene:${scene.id}`
        });
        if (currentEntityType === "scene" && currentEntityId === scene.id) {
          option.selected = true;
        }
      }
    }
    for (const scene of this.scenes.sort((a, b) => a.order_num - b.order_num)) {
      const sceneBeats = this.beats.filter((b) => b.scene_id === scene.id).sort((a, b) => a.order_num - b.order_num);
      if (sceneBeats.length > 0) {
        const chapter = this.chapters.find((c) => c.id === scene.chapter_id);
        const chapterLabel = chapter ? `Chapter ${chapter.number}` : "No Chapter";
        const optgroup = select.createEl("optgroup");
        optgroup.label = `${chapterLabel} > Scene ${scene.order_num} - Beats`;
        for (const beat of sceneBeats) {
          const option = optgroup.createEl("option", {
            text: `Beat ${beat.order_num}: ${beat.type}`,
            value: `beat:${beat.id}`
          });
          if (currentEntityType === "beat" && currentEntityId === beat.id) {
            option.selected = true;
          }
        }
      }
    }
    if (!currentEntityType) {
      noRefOption.selected = true;
    }
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const actionButton = buttonContainer.createEl("button", {
      text: mode === "move" ? "Move" : "Link",
      cls: "mod-cta"
    });
    actionButton.onclick = async () => {
      const selectedValue = select.value;
      try {
        if (mode === "move" && currentEntityType && currentEntityId) {
          const currentRef = this.contentBlockRefs.find(
            (r) => r.content_block_id === contentBlock.id && r.entity_type === currentEntityType && r.entity_id === currentEntityId
          );
          if (currentRef) {
            await this.plugin.apiClient.deleteContentAnchor(currentRef.id);
          }
        }
        if (selectedValue) {
          const [entityType, entityId] = selectedValue.split(":");
          await this.plugin.apiClient.createContentAnchor(contentBlock.id, entityType, entityId);
        }
        await this.loadHierarchy();
        this.renderTabContent();
        modal.close();
        new import_obsidian17.Notice(mode === "move" ? "Content block moved successfully" : "Content block linked successfully");
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : `Failed to ${mode} content block`;
        new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
      }
    };
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    cancelButton.onclick = () => modal.close();
    modal.open();
  }
  async createContentForEntity(entityType, entityId, chapterId, contentType = "text") {
    if (!this.currentStory)
      return;
    if (!chapterId) {
      if (this.chapters.length === 0) {
        new import_obsidian17.Notice("No chapter available. Please create a chapter first.", 5e3);
        return;
      }
      chapterId = this.chapters[0].id;
    }
    const chapterBlocks = this.contentBlocks.filter((cb) => {
      const refs = this.contentBlockRefs.filter((r) => r.content_block_id === cb.id && r.entity_type === "chapter" && r.entity_id === chapterId);
      return refs.length > 0 || cb.chapter_id === chapterId;
    });
    const maxOrderNum = chapterBlocks.length > 0 ? Math.max(...chapterBlocks.map((cb) => cb.order_num || 0)) : 0;
    const nextOrderNum = maxOrderNum + 1;
    const initialContentBlock = {
      type: contentType,
      kind: "final",
      content: "",
      metadata: {}
    };
    new ContentBlockModal(this.app, async (contentBlock) => {
      try {
        contentBlock.order_num = nextOrderNum;
        const created = await this.plugin.apiClient.createContentBlock(chapterId, contentBlock);
        await this.plugin.apiClient.createContentAnchor(created.id, entityType, entityId);
        await this.loadHierarchy();
        this.renderTabContent();
        new import_obsidian17.Notice("Content block created successfully");
      } catch (err) {
        throw err;
      }
    }, initialContentBlock, this.plugin).open();
  }
  // ==================== World View Methods ====================
  async showWorldDetails(world) {
    this.currentWorld = world;
    this.viewMode = "world-details";
    this.worldTab = "characters";
    await this.loadWorldData();
    this.renderWorldDetails();
  }
  async loadWorldData() {
    if (!this.currentWorld)
      return;
    this.loadingWorldData = true;
    try {
      this.characters = await this.plugin.apiClient.getCharacters(this.currentWorld.id);
      this.locations = await this.plugin.apiClient.getLocations(this.currentWorld.id);
      this.artifacts = await this.plugin.apiClient.getArtifacts(this.currentWorld.id);
      this.events = await this.plugin.apiClient.getEvents(this.currentWorld.id);
      try {
        this.traits = await this.plugin.apiClient.getTraits();
      } catch (err) {
        console.warn("Traits not available:", err);
        this.traits = [];
      }
      try {
        this.archetypes = await this.plugin.apiClient.getArchetypes();
      } catch (err) {
        console.warn("Archetypes not available:", err);
        this.archetypes = [];
      }
      try {
        this.factions = await this.plugin.apiClient.getFactions(this.currentWorld.id);
      } catch (err) {
        console.warn("Factions not available:", err);
        this.factions = [];
      }
      try {
        this.lores = await this.plugin.apiClient.getLores(this.currentWorld.id);
      } catch (err) {
        console.warn("Lores not available:", err);
        this.lores = [];
      }
      try {
        this.currentWorld = await this.plugin.apiClient.getWorld(this.currentWorld.id);
      } catch (err) {
        console.warn("Failed to reload world:", err);
      }
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to load world data";
      new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
    } finally {
      this.loadingWorldData = false;
    }
  }
  renderWorldDetails() {
    if (!this.contentEl || !this.currentWorld)
      return;
    this.contentEl.removeClass("story-engine-list-layout");
    this.contentEl.addClass("story-engine-sidebar-layout");
    this.renderWorldDetailsHeader();
    this.contentEl.empty();
    this.renderWorldTabs();
    this.renderWorldTabContent();
  }
  renderWorldDetailsHeader() {
    if (!this.headerEl || !this.currentWorld)
      return;
    this.headerEl.empty();
    const headerContainer = this.headerEl.createDiv({ cls: "story-engine-world-details-header" });
    const headerContent = headerContainer.createDiv({ cls: "story-engine-world-header-content" });
    const topRow = headerContent.createDiv({ cls: "story-engine-world-header-top" });
    const backButton = topRow.createEl("button", {
      text: "\u2190 Back",
      cls: "story-engine-back-btn"
    });
    backButton.onclick = () => {
      this.currentWorld = null;
      this.viewMode = "list";
      this.listTab = "worlds";
      this.renderListHeader();
      this.renderListContent();
    };
    const headerActions = topRow.createDiv({ cls: "story-engine-header-actions" });
    const contextButton = headerActions.createEl("button", {
      cls: "story-engine-context-btn",
      attr: { "aria-label": "World Actions" }
    });
    (0, import_obsidian17.setIcon)(contextButton, "more-vertical");
    const dropdownMenu = headerActions.createDiv({ cls: "story-engine-dropdown-menu" });
    dropdownMenu.style.display = "none";
    const editOption = dropdownMenu.createEl("button", {
      cls: "story-engine-dropdown-item"
    });
    (0, import_obsidian17.setIcon)(editOption, "pencil");
    editOption.createSpan({ text: "Edit World" });
    editOption.onclick = () => {
      dropdownMenu.style.display = "none";
      this.showEditWorldModal();
    };
    contextButton.onclick = (e) => {
      e.stopPropagation();
      const isVisible = dropdownMenu.style.display !== "none";
      dropdownMenu.style.display = isVisible ? "none" : "block";
    };
    document.addEventListener("click", () => {
      dropdownMenu.style.display = "none";
    }, { once: true });
    const titleSection = headerContent.createDiv({ cls: "story-engine-world-title-section" });
    titleSection.createEl("h1", {
      text: this.currentWorld.name,
      cls: "story-engine-world-name"
    });
    if (this.currentWorld.description) {
      titleSection.createEl("p", {
        text: this.currentWorld.description,
        cls: "story-engine-world-desc"
      });
    }
    const metaRow = titleSection.createDiv({ cls: "story-engine-world-meta-row" });
    if (this.currentWorld.genre) {
      const genreBadge = metaRow.createSpan({
        cls: "story-engine-badge story-engine-genre-badge"
      });
      (0, import_obsidian17.setIcon)(genreBadge, "tag");
      genreBadge.createSpan({ text: this.currentWorld.genre });
    }
    const uuidContainer = metaRow.createDiv({ cls: "story-engine-world-uuid" });
    const uuidText = uuidContainer.createSpan({ text: this.currentWorld.id.substring(0, 8) + "..." });
    const copyUuidButton = uuidContainer.createEl("button", {
      cls: "story-engine-copy-uuid-btn",
      attr: { "aria-label": "Copy UUID" }
    });
    (0, import_obsidian17.setIcon)(copyUuidButton, "copy");
    copyUuidButton.onclick = (e) => {
      e.stopPropagation();
      if (!this.currentWorld)
        return;
      navigator.clipboard.writeText(this.currentWorld.id).then(() => {
        new import_obsidian17.Notice("UUID copied to clipboard");
      }).catch(() => {
        new import_obsidian17.Notice("Failed to copy UUID", 3e3);
      });
    };
  }
  renderWorldTabs() {
    if (!this.contentEl)
      return;
    const existingSidebar = this.contentEl.querySelector(".story-engine-world-sidebar");
    if (existingSidebar) {
      existingSidebar.remove();
    }
    const sidebarPosition = this.plugin.settings.sidebarPosition || "left";
    const sidebarContainer = this.contentEl.createDiv({
      cls: `story-engine-world-sidebar story-engine-world-sidebar-${sidebarPosition}`
    });
    const allTabs = [
      { key: "characters", label: "Characters", icon: "user" },
      { key: "locations", label: "Locations", icon: "map-pin" },
      { key: "factions", label: "Factions", icon: "users" },
      { key: "artifacts", label: "Artifacts", icon: "gem" },
      { key: "traits", label: "Traits", icon: "star" },
      { key: "archetypes", label: "Archetypes", icon: "shapes" },
      { key: "events", label: "Events", icon: "calendar" },
      { key: "lore", label: "Lore", icon: "book-open" }
    ];
    for (const tab of allTabs) {
      const tabButton = sidebarContainer.createEl("button", {
        cls: `story-engine-sidebar-tab ${this.worldTab === tab.key ? "is-active" : ""}`,
        attr: {
          "aria-label": tab.label
        }
      });
      (0, import_obsidian17.setIcon)(tabButton, tab.icon);
      tabButton.onclick = () => {
        this.worldTab = tab.key;
        this.renderWorldTabs();
        this.renderWorldTabContent();
      };
    }
  }
  renderWorldTabContent() {
    if (!this.contentEl)
      return;
    const existingContent = this.contentEl.querySelector(".story-engine-world-tab-content");
    if (existingContent) {
      existingContent.remove();
    }
    const sidebarPosition = this.plugin.settings.sidebarPosition || "left";
    const contentContainer = this.contentEl.createDiv({
      cls: `story-engine-world-tab-content story-engine-content-sidebar-${sidebarPosition}`
    });
    if (this.loadingWorldData) {
      for (let i = 0; i < 3; i++) {
        contentContainer.createDiv({ cls: "story-engine-skeleton story-engine-skeleton-card" });
      }
      return;
    }
    switch (this.worldTab) {
      case "characters":
        this.renderCharactersTab(contentContainer);
        break;
      case "traits":
        this.renderTraitsTab(contentContainer);
        break;
      case "archetypes":
        this.renderArchetypesTab(contentContainer);
        break;
      case "events":
        this.renderEventsTab(contentContainer);
        break;
      case "lore":
        this.renderLoreTab(contentContainer);
        break;
      case "locations":
        this.renderLocationsTab(contentContainer);
        break;
      case "factions":
        this.renderFactionsTab(contentContainer);
        break;
      case "artifacts":
        this.renderArtifactsTab(contentContainer);
        break;
    }
    this.renderWorldActionsBar(contentContainer);
  }
  renderWorldActionsBar(container) {
    const actionsBar = container.createDiv({ cls: "story-engine-actions-bar" });
    let createButtonText = "Create Character";
    let createButtonAction = () => {
      this.showCreateCharacterModal();
    };
    switch (this.worldTab) {
      case "traits":
        createButtonText = "Create Trait";
        createButtonAction = () => this.showCreateTraitModal();
        break;
      case "archetypes":
        createButtonText = "Create Archetype";
        createButtonAction = () => this.showCreateArchetypeModal();
        break;
      case "events":
        createButtonText = "Create Event";
        createButtonAction = () => this.showCreateEventModal();
        break;
      case "lore":
        createButtonText = "Create Lore";
        createButtonAction = () => this.showCreateLoreModal();
        break;
      case "locations":
        createButtonText = "Create Location";
        createButtonAction = () => this.showCreateLocationModal();
        break;
      case "factions":
        createButtonText = "Create Faction";
        createButtonAction = () => this.showCreateFactionModal();
        break;
      case "artifacts":
        createButtonText = "Create Artifact";
        createButtonAction = () => this.showCreateArtifactModal();
        break;
    }
    const createButton = actionsBar.createEl("button", {
      text: createButtonText,
      cls: "mod-cta story-engine-create-btn"
    });
    createButton.onclick = createButtonAction;
  }
  renderCharactersTab(container) {
    if (this.characters.length === 0) {
      this.renderEmptyCard(container, {
        icon: "user",
        title: "No characters found",
        description: "Create your first character to start building this world."
      });
      return;
    }
    for (const character of this.characters) {
      const card = container.createDiv({ cls: "story-engine-entity-card" });
      card.style.cursor = "pointer";
      card.onclick = () => {
        this.showCharacterDetails(character);
      };
      const cardHeader = card.createDiv({ cls: "story-engine-entity-card-header" });
      const cardTitle = cardHeader.createDiv({ cls: "story-engine-entity-card-title" });
      const nameEl = cardTitle.createEl("h3", {
        text: character.name,
        cls: "story-engine-entity-name"
      });
      if (character.archetype_id) {
        const archetype = this.archetypes.find((a) => a.id === character.archetype_id);
        if (archetype) {
          cardTitle.createEl("p", {
            text: archetype.name,
            cls: "story-engine-entity-subtitle"
          });
        }
      }
      const cardActions = cardHeader.createDiv({ cls: "story-engine-entity-card-actions" });
      const relationshipBtn = cardActions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Add Relationship" }
      });
      (0, import_obsidian17.setIcon)(relationshipBtn, "users");
      relationshipBtn.onclick = (e) => {
        e.stopPropagation();
        this.showAddCharacterRelationshipModal(character);
      };
      const editBtn = cardActions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Edit" }
      });
      (0, import_obsidian17.setIcon)(editBtn, "pencil");
      editBtn.onclick = (e) => {
        e.stopPropagation();
        this.showEditCharacterModal(character);
      };
      const deleteBtn = cardActions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Delete" }
      });
      (0, import_obsidian17.setIcon)(deleteBtn, "trash");
      deleteBtn.onclick = async (e) => {
        e.stopPropagation();
        if (confirm(`Delete character "${character.name}"?`)) {
          try {
            await this.plugin.apiClient.deleteCharacter(character.id);
            await this.loadWorldData();
            this.renderWorldTabContent();
            new import_obsidian17.Notice("Character deleted");
          } catch (err) {
            new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
          }
        }
      };
      const cardContent = card.createDiv({ cls: "story-engine-entity-card-content" });
      if (character.description) {
        cardContent.createEl("p", {
          text: character.description,
          cls: "story-engine-entity-description"
        });
      }
    }
  }
  renderLocationsTab(container) {
    if (this.locations.length === 0) {
      this.renderEmptyCard(container, {
        icon: "map-pin",
        title: "No locations found",
        description: "Create your first location!"
      });
      return;
    }
    const rootLocations = this.locations.filter((l) => !l.parent_id);
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const location of rootLocations.sort((a, b) => a.name.localeCompare(b.name))) {
      this.renderLocationItem(list, location, 0);
    }
  }
  renderLocationItem(container, location, level) {
    const item = container.createDiv({ cls: "story-engine-item" });
    item.style.marginLeft = `${level * 1}rem`;
    const titleRow = item.createDiv({ cls: "story-engine-title" });
    titleRow.textContent = location.name;
    if (location.type) {
      const typeBadge = titleRow.createSpan({ cls: "story-engine-badge" });
      typeBadge.textContent = location.type;
    }
    const meta = item.createDiv({ cls: "story-engine-meta" });
    if (location.description) {
      meta.createEl("span", { text: location.description.substring(0, 50) + (location.description.length > 50 ? "..." : "") });
    }
    const actions = item.createDiv({ cls: "story-engine-item-actions" });
    const editBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Edit location", title: "Edit location" }
    });
    (0, import_obsidian17.setIcon)(editBtn, "pencil");
    editBtn.onclick = () => {
      this.showEditLocationModal(location);
    };
    const deleteBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Delete location", title: "Delete location" }
    });
    (0, import_obsidian17.setIcon)(deleteBtn, "trash");
    deleteBtn.onclick = async () => {
      if (confirm(`Delete location "${location.name}"?`)) {
        try {
          await this.plugin.apiClient.deleteLocation(location.id);
          await this.loadWorldData();
          this.renderWorldTabContent();
          new import_obsidian17.Notice("Location deleted");
        } catch (err) {
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
        }
      }
    };
    const children2 = this.locations.filter((l) => l.parent_id === location.id);
    for (const child of children2.sort((a, b) => a.name.localeCompare(b.name))) {
      this.renderLocationItem(container, child, level + 1);
    }
  }
  renderArtifactsTab(container) {
    if (this.artifacts.length === 0) {
      this.renderEmptyCard(container, {
        icon: "gem",
        title: "No artifacts found",
        description: "Create your first artifact!"
      });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const artifact of this.artifacts) {
      const item = list.createDiv({ cls: "story-engine-item" });
      const titleRow = item.createDiv({ cls: "story-engine-title" });
      titleRow.textContent = artifact.name;
      if (artifact.rarity) {
        const rarityBadge = titleRow.createSpan({ cls: `story-engine-badge story-engine-rarity-${artifact.rarity.toLowerCase()}` });
        rarityBadge.textContent = artifact.rarity;
      }
      const meta = item.createDiv({ cls: "story-engine-meta" });
      if (artifact.description) {
        meta.createEl("span", { text: artifact.description.substring(0, 50) + (artifact.description.length > 50 ? "..." : "") });
      }
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      const artifactEditBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Edit artifact", title: "Edit artifact" }
      });
      (0, import_obsidian17.setIcon)(artifactEditBtn, "pencil");
      artifactEditBtn.onclick = () => {
        this.showEditArtifactModal(artifact);
      };
      const artifactDeleteBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Delete artifact", title: "Delete artifact" }
      });
      (0, import_obsidian17.setIcon)(artifactDeleteBtn, "trash");
      artifactDeleteBtn.onclick = async () => {
        if (confirm(`Delete artifact "${artifact.name}"?`)) {
          try {
            await this.plugin.apiClient.deleteArtifact(artifact.id);
            await this.loadWorldData();
            this.renderWorldTabContent();
            new import_obsidian17.Notice("Artifact deleted");
          } catch (err) {
            new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
          }
        }
      };
    }
  }
  renderEventsTab(container) {
    var _a;
    const timeConfigSection = container.createDiv({ cls: "story-engine-time-config-section" });
    if ((_a = this.currentWorld) == null ? void 0 : _a.time_config) {
      this.renderTimeConfigDisplay(timeConfigSection, this.currentWorld.time_config);
      const editBtn = timeConfigSection.createEl("button", {
        text: "Edit Time Config",
        cls: "story-engine-btn-secondary"
      });
      editBtn.onclick = () => this.showTimeConfigModal(this.currentWorld.time_config);
    } else {
      const addBtn = timeConfigSection.createEl("button", {
        text: "Add Time Configuration",
        cls: "story-engine-btn-primary"
      });
      addBtn.onclick = () => this.showTimeConfigModal(null);
    }
    const timelineSection = container.createDiv({ cls: "story-engine-timeline-section" });
    const timelineBtn = timelineSection.createEl("button", {
      text: "View Timeline",
      cls: "story-engine-btn-secondary"
    });
    timelineBtn.onclick = () => this.showTimelineModal();
    const epochSection = container.createDiv({ cls: "story-engine-epoch-section" });
    epochSection.createEl("h4", { text: "\u23F0 Epoch Event (Year Zero)", cls: "story-engine-section-title" });
    const epochEvent = this.events.find((e) => e.is_epoch && e.timeline_position === 0);
    if (epochEvent) {
      const epochItem = epochSection.createDiv({ cls: "story-engine-item story-engine-epoch-item" });
      const epochTitle = epochItem.createDiv({ cls: "story-engine-title" });
      epochTitle.createSpan({ text: epochEvent.name });
      epochTitle.createSpan({ cls: "story-engine-badge story-engine-badge-epoch", text: "EPOCH" });
      const epochMeta = epochItem.createDiv({ cls: "story-engine-meta" });
      epochMeta.createEl("span", { text: "Position: 0 (Year Zero)" });
      if (epochEvent.description) {
        epochMeta.createEl("span", { text: epochEvent.description.substring(0, 80) + (epochEvent.description.length > 80 ? "..." : "") });
      }
      const epochActions = epochItem.createDiv({ cls: "story-engine-item-actions" });
      const epochEditBtn = epochActions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Edit epoch event", title: "Edit epoch event" }
      });
      (0, import_obsidian17.setIcon)(epochEditBtn, "pencil");
      epochEditBtn.onclick = () => {
        this.showEditEventModal(epochEvent);
      };
    } else {
      const createEpochBtn = epochSection.createEl("button", {
        text: "\u{1F31F} Create Epoch Event (Year Zero)",
        cls: "mod-cta story-engine-create-epoch-btn"
      });
      createEpochBtn.onclick = () => this.showCreateEpochEventModal();
      epochSection.createEl("p", {
        text: "The Epoch Event marks Year Zero - all other events are dated relative to this point.",
        cls: "story-engine-hint"
      });
    }
    const eventsSection = container.createDiv({ cls: "story-engine-events-list-section" });
    eventsSection.createEl("h4", { text: "\u{1F4DC} Events", cls: "story-engine-section-title" });
    const regularEvents = this.events.filter((e) => !(e.is_epoch && e.timeline_position === 0));
    if (regularEvents.length === 0) {
      this.renderEmptyCard(eventsSection, {
        icon: "calendar",
        title: "No events yet",
        description: "Create your first event!"
      });
      return;
    }
    const list = eventsSection.createDiv({ cls: "story-engine-list" });
    const sortedEvents = regularEvents.sort((a, b) => {
      var _a2, _b;
      const posA = (_a2 = a.timeline_position) != null ? _a2 : Number.MAX_SAFE_INTEGER;
      const posB = (_b = b.timeline_position) != null ? _b : Number.MAX_SAFE_INTEGER;
      if (posA !== posB)
        return posA - posB;
      return b.importance - a.importance;
    });
    for (const event of sortedEvents) {
      const item = list.createDiv({ cls: "story-engine-item" });
      const titleRow = item.createDiv({ cls: "story-engine-title" });
      titleRow.createSpan({ text: event.name });
      const importanceBadge = titleRow.createSpan({ cls: "story-engine-badge" });
      importanceBadge.textContent = `\u2605${event.importance}`;
      if (event.type) {
        titleRow.createSpan({ cls: "story-engine-badge", text: event.type });
      }
      if (event.is_epoch) {
        titleRow.createSpan({ cls: "story-engine-badge story-engine-badge-epoch", text: "EPOCH" });
      }
      const meta = item.createDiv({ cls: "story-engine-meta" });
      if (event.timeline_position !== void 0 && event.timeline_position !== null) {
        const posText = event.timeline_position >= 0 ? `Year ${event.timeline_position}` : `${Math.abs(event.timeline_position)} years before Year Zero`;
        meta.createEl("span", { text: `\u{1F4C5} ${posText}`, cls: "story-engine-event-position" });
      }
      if (event.parent_id) {
        const parentEvent = this.events.find((e) => e.id === event.parent_id);
        if (parentEvent) {
          meta.createEl("span", { text: `\u21B3 Related to: ${parentEvent.name}`, cls: "story-engine-event-parent" });
        }
      }
      if (event.description) {
        meta.createEl("span", {
          text: event.description.substring(0, 60) + (event.description.length > 60 ? "..." : ""),
          cls: "story-engine-event-description"
        });
      }
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      const linkBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Link to entity", title: "Link to entity" }
      });
      (0, import_obsidian17.setIcon)(linkBtn, "link");
      linkBtn.onclick = () => this.showLinkEventToEntityModal(event);
      const eventLinkBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Set parent event", title: "Set parent event" }
      });
      (0, import_obsidian17.setIcon)(eventLinkBtn, "git-branch");
      eventLinkBtn.onclick = () => this.showSetEventParentModal(event);
      const eventEditBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Edit event", title: "Edit event" }
      });
      (0, import_obsidian17.setIcon)(eventEditBtn, "pencil");
      eventEditBtn.onclick = () => {
        this.showEditEventModal(event);
      };
      const eventDeleteBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Delete event", title: "Delete event" }
      });
      (0, import_obsidian17.setIcon)(eventDeleteBtn, "trash");
      eventDeleteBtn.onclick = async () => {
        if (confirm(`Delete event "${event.name}"?`)) {
          try {
            await this.plugin.apiClient.deleteEvent(event.id);
            await this.loadWorldData();
            this.renderWorldTabContent();
            new import_obsidian17.Notice("Event deleted");
          } catch (err) {
            new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
          }
        }
      };
    }
  }
  showCreateEpochEventModal() {
    if (!this.currentWorld)
      return;
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Create Epoch Event (Year Zero)");
    const content = modal.contentEl;
    let name = "";
    let description = "";
    content.createEl("p", {
      text: "The Epoch Event defines Year Zero in your world's timeline. All other events will be dated relative to this moment.",
      cls: "story-engine-modal-hint"
    });
    content.createEl("label", { text: "Event Name *" });
    const nameInput = content.createEl("input", {
      type: "text",
      cls: "story-engine-input",
      placeholder: "e.g., The Great Cataclysm, The Founding, Year of the Dragon"
    });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      placeholder: "Describe what happened at this pivotal moment..."
    });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create Epoch", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
        new import_obsidian17.Notice("Name is required");
        return;
      }
      try {
        await this.plugin.apiClient.createEvent(this.currentWorld.id, {
          name: name.trim(),
          description: description.trim() || void 0,
          timeline_position: 0,
          is_epoch: true,
          importance: 10,
          // Max importance for epoch
          type: "Epoch"
        });
        modal.close();
        await this.loadWorldData();
        this.renderWorldTabContent();
        new import_obsidian17.Notice("Epoch event created!");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  renderTraitsTab(container) {
    if (this.traits.length === 0) {
      this.renderEmptyCard(container, {
        icon: "star",
        title: "No traits found",
        description: "Create your first trait!"
      });
      return;
    }
    const traitsByCategory = /* @__PURE__ */ new Map();
    for (const trait of this.traits) {
      const category = trait.category || "Uncategorized";
      if (!traitsByCategory.has(category)) {
        traitsByCategory.set(category, []);
      }
      traitsByCategory.get(category).push(trait);
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const [category, categoryTraits] of traitsByCategory.entries()) {
      const group = list.createDiv({ cls: "story-engine-group" });
      const groupHeader = group.createDiv({ cls: "story-engine-group-header" });
      groupHeader.createEl("h3", { text: category });
      const groupItems = group.createDiv({ cls: "story-engine-group-items" });
      for (const trait of categoryTraits.sort((a, b) => a.name.localeCompare(b.name))) {
        const item = groupItems.createDiv({ cls: "story-engine-item" });
        item.createDiv({ cls: "story-engine-title", text: trait.name });
        const meta = item.createDiv({ cls: "story-engine-meta" });
        if (trait.description) {
          meta.createEl("span", { text: trait.description.substring(0, 50) + (trait.description.length > 50 ? "..." : "") });
        }
        const actions = item.createDiv({ cls: "story-engine-item-actions" });
        const traitEditBtn = actions.createEl("button", {
          cls: "story-engine-entity-action-btn",
          attr: { "aria-label": "Edit trait", title: "Edit trait" }
        });
        (0, import_obsidian17.setIcon)(traitEditBtn, "pencil");
        traitEditBtn.onclick = () => {
          this.showEditTraitModal(trait);
        };
        const traitDeleteBtn = actions.createEl("button", {
          cls: "story-engine-entity-action-btn",
          attr: { "aria-label": "Delete trait", title: "Delete trait" }
        });
        (0, import_obsidian17.setIcon)(traitDeleteBtn, "trash");
        traitDeleteBtn.onclick = async () => {
          if (confirm(`Delete trait "${trait.name}"?`)) {
            try {
              await this.plugin.apiClient.deleteTrait(trait.id);
              await this.loadWorldData();
              this.renderWorldTabContent();
              new import_obsidian17.Notice("Trait deleted");
            } catch (err) {
              new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
            }
          }
        };
      }
    }
  }
  renderArchetypesTab(container) {
    if (this.archetypes.length === 0) {
      this.renderEmptyCard(container, {
        icon: "shapes",
        title: "No archetypes found",
        description: "Create your first archetype!"
      });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const archetype of this.archetypes.sort((a, b) => a.name.localeCompare(b.name))) {
      const item = list.createDiv({ cls: "story-engine-item" });
      item.createDiv({ cls: "story-engine-title", text: archetype.name });
      const meta = item.createDiv({ cls: "story-engine-meta" });
      if (archetype.description) {
        meta.createEl("span", { text: archetype.description.substring(0, 50) + (archetype.description.length > 50 ? "..." : "") });
      }
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      const viewTraitsBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "View traits", title: "View traits" }
      });
      (0, import_obsidian17.setIcon)(viewTraitsBtn, "list");
      viewTraitsBtn.onclick = async () => {
        try {
          const traits = await this.plugin.apiClient.getArchetypeTraits(archetype.id);
          this.showArchetypeTraitsModal(archetype, traits);
        } catch (err) {
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
        }
      };
      const archetypeEditBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Edit archetype", title: "Edit archetype" }
      });
      (0, import_obsidian17.setIcon)(archetypeEditBtn, "pencil");
      archetypeEditBtn.onclick = () => {
        this.showEditArchetypeModal(archetype);
      };
      const archetypeDeleteBtn = actions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Delete archetype", title: "Delete archetype" }
      });
      (0, import_obsidian17.setIcon)(archetypeDeleteBtn, "trash");
      archetypeDeleteBtn.onclick = async () => {
        if (confirm(`Delete archetype "${archetype.name}"?`)) {
          try {
            await this.plugin.apiClient.deleteArchetype(archetype.id);
            await this.loadWorldData();
            this.renderWorldTabContent();
            new import_obsidian17.Notice("Archetype deleted");
          } catch (err) {
            new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
          }
        }
      };
    }
  }
  renderLoreTab(container) {
    if (this.lores.length === 0) {
      this.renderEmptyCard(container, {
        icon: "book-open",
        title: "No lore found",
        description: "Create your first lore!"
      });
      return;
    }
    const rootLores = this.lores.filter((l) => !l.parent_id);
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const lore of rootLores.sort((a, b) => a.name.localeCompare(b.name))) {
      this.renderLoreItem(list, lore, 0);
    }
  }
  renderLoreItem(container, lore, level) {
    const item = container.createDiv({ cls: "story-engine-item" });
    item.style.marginLeft = `${level * 1}rem`;
    const titleRow = item.createDiv({ cls: "story-engine-title" });
    titleRow.textContent = lore.name;
    if (lore.category) {
      const categoryBadge = titleRow.createSpan({ cls: "story-engine-badge" });
      categoryBadge.textContent = lore.category;
    }
    const meta = item.createDiv({ cls: "story-engine-meta" });
    if (lore.description) {
      meta.createEl("span", { text: lore.description.substring(0, 50) + (lore.description.length > 50 ? "..." : "") });
    }
    const actions = item.createDiv({ cls: "story-engine-item-actions" });
    const linkBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Link to entity", title: "Link to entity" }
    });
    (0, import_obsidian17.setIcon)(linkBtn, "link");
    linkBtn.onclick = () => this.showAddLoreReferenceModal(lore);
    const subBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Create sub-lore", title: "Create sub-lore" }
    });
    (0, import_obsidian17.setIcon)(subBtn, "folder-plus");
    subBtn.onclick = () => this.showCreateLoreModal(lore.id);
    const loreEditBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Edit lore", title: "Edit lore" }
    });
    (0, import_obsidian17.setIcon)(loreEditBtn, "pencil");
    loreEditBtn.onclick = () => {
      this.showEditLoreModal(lore);
    };
    const loreDeleteBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Delete lore", title: "Delete lore" }
    });
    (0, import_obsidian17.setIcon)(loreDeleteBtn, "trash");
    loreDeleteBtn.onclick = async () => {
      if (confirm(`Delete lore "${lore.name}"?`)) {
        try {
          await this.plugin.apiClient.deleteLore(lore.id);
          await this.loadWorldData();
          this.renderWorldTabContent();
          new import_obsidian17.Notice("Lore deleted");
        } catch (err) {
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
        }
      }
    };
    const children2 = this.lores.filter((l) => l.parent_id === lore.id);
    for (const child of children2.sort((a, b) => a.name.localeCompare(b.name))) {
      this.renderLoreItem(container, child, level + 1);
    }
  }
  renderFactionsTab(container) {
    if (this.factions.length === 0) {
      this.renderEmptyCard(container, {
        icon: "users",
        title: "No factions found",
        description: "Create your first faction!"
      });
      return;
    }
    const rootFactions = this.factions.filter((f) => !f.parent_id);
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const faction of rootFactions.sort((a, b) => a.name.localeCompare(b.name))) {
      this.renderFactionItem(list, faction, 0);
    }
  }
  renderFactionItem(container, faction, level) {
    const item = container.createDiv({ cls: "story-engine-item" });
    item.style.marginLeft = `${level * 1}rem`;
    const titleRow = item.createDiv({ cls: "story-engine-title" });
    titleRow.textContent = faction.name;
    if (faction.type) {
      const typeBadge = titleRow.createSpan({ cls: "story-engine-badge" });
      typeBadge.textContent = faction.type;
    }
    const meta = item.createDiv({ cls: "story-engine-meta" });
    if (faction.description) {
      meta.createEl("span", { text: faction.description.substring(0, 50) + (faction.description.length > 50 ? "..." : "") });
    }
    const actions = item.createDiv({ cls: "story-engine-item-actions" });
    const linkBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Link to entity", title: "Link to entity" }
    });
    (0, import_obsidian17.setIcon)(linkBtn, "link");
    linkBtn.onclick = () => this.showAddFactionReferenceModal(faction);
    const subBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Create sub-faction", title: "Create sub-faction" }
    });
    (0, import_obsidian17.setIcon)(subBtn, "folder-plus");
    subBtn.onclick = () => this.showCreateFactionModal(faction.id);
    const factionViewBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "View faction details", title: "View faction details" }
    });
    (0, import_obsidian17.setIcon)(factionViewBtn, "eye");
    factionViewBtn.onclick = () => {
      this.showFactionDetailsModal(faction);
    };
    const factionEditBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Edit faction", title: "Edit faction" }
    });
    (0, import_obsidian17.setIcon)(factionEditBtn, "pencil");
    factionEditBtn.onclick = () => {
      this.showEditFactionModal(faction);
    };
    const factionDeleteBtn = actions.createEl("button", {
      cls: "story-engine-entity-action-btn",
      attr: { "aria-label": "Delete faction", title: "Delete faction" }
    });
    (0, import_obsidian17.setIcon)(factionDeleteBtn, "trash");
    factionDeleteBtn.onclick = async () => {
      if (confirm(`Delete faction "${faction.name}"?`)) {
        try {
          await this.plugin.apiClient.deleteFaction(faction.id);
          await this.loadWorldData();
          this.renderWorldTabContent();
          new import_obsidian17.Notice("Faction deleted");
        } catch (err) {
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
        }
      }
    };
    const children2 = this.factions.filter((f) => f.parent_id === faction.id);
    for (const child of children2.sort((a, b) => a.name.localeCompare(b.name))) {
      this.renderFactionItem(container, child, level + 1);
    }
  }
  // Modal methods for World entities
  showCreateCharacterModal() {
    if (!this.currentWorld)
      return;
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Create Character");
    const content = modal.contentEl;
    let name = "";
    let description = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
        new import_obsidian17.Notice("Name is required", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.createCharacter(this.currentWorld.id, { name: name.trim(), description: description.trim() });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Character created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditCharacterModal(character) {
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Edit Character");
    const content = modal.contentEl;
    let name = character.name;
    let description = character.description;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
        new import_obsidian17.Notice("Name is required", 3e3);
        return;
      }
      try {
        const updated = await this.plugin.apiClient.updateCharacter(character.id, { name: name.trim(), description: description.trim() });
        if (this.viewMode === "character-details" && this.characterDetailsView && this.characterDetailsView["character"].id === character.id) {
          this.characterDetailsView.updateCharacter(updated);
        } else {
          await this.loadWorldData();
          this.renderWorldTabContent();
        }
        modal.close();
        new import_obsidian17.Notice("Character updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showCreateLocationModal() {
    if (!this.currentWorld)
      return;
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Create Location");
    const content = modal.contentEl;
    let name = "";
    let type2 = "";
    let description = "";
    let parentId = null;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Type" });
    const typeInput = content.createEl("input", { type: "text", cls: "story-engine-input", placeholder: "e.g., City, Forest, Building" });
    typeInput.oninput = () => {
      type2 = typeInput.value;
    };
    content.createEl("label", { text: "Parent Location" });
    const parentSelect = content.createEl("select", { cls: "story-engine-select" });
    parentSelect.createEl("option", { value: "", text: "None (Root Location)" });
    for (const loc of this.locations.sort((a, b) => a.name.localeCompare(b.name))) {
      parentSelect.createEl("option", { value: loc.id, text: loc.name });
    }
    parentSelect.onchange = () => {
      parentId = parentSelect.value || null;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
        new import_obsidian17.Notice("Name is required", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.createLocation(this.currentWorld.id, {
          name: name.trim(),
          type: type2.trim(),
          description: description.trim(),
          parent_id: parentId
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Location created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditLocationModal(location) {
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Edit Location");
    const content = modal.contentEl;
    let name = location.name;
    let type2 = location.type;
    let description = location.description;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Type" });
    const typeInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: type2 });
    typeInput.oninput = () => {
      type2 = typeInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
        new import_obsidian17.Notice("Name is required", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.updateLocation(location.id, { name: name.trim(), type: type2.trim(), description: description.trim() });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Location updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showCreateArtifactModal() {
    if (!this.currentWorld)
      return;
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Create Artifact");
    const content = modal.contentEl;
    let name = "";
    let description = "";
    let rarity = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Rarity" });
    const raritySelect = content.createEl("select", { cls: "story-engine-select" });
    raritySelect.createEl("option", { value: "", text: "Select Rarity" });
    ["Common", "Uncommon", "Rare", "Epic", "Legendary", "Unique"].forEach((r) => {
      raritySelect.createEl("option", { value: r.toLowerCase(), text: r });
    });
    raritySelect.onchange = () => {
      rarity = raritySelect.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
        new import_obsidian17.Notice("Name is required", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.createArtifact(this.currentWorld.id, {
          name: name.trim(),
          description: description.trim(),
          rarity
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Artifact created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditArtifactModal(artifact) {
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Edit Artifact");
    const content = modal.contentEl;
    let name = artifact.name;
    let description = artifact.description;
    let rarity = artifact.rarity;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Rarity" });
    const raritySelect = content.createEl("select", { cls: "story-engine-select" });
    raritySelect.createEl("option", { value: "", text: "Select Rarity" });
    ["Common", "Uncommon", "Rare", "Epic", "Legendary", "Unique"].forEach((r) => {
      const opt = raritySelect.createEl("option", { value: r.toLowerCase(), text: r });
      if (rarity.toLowerCase() === r.toLowerCase())
        opt.selected = true;
    });
    raritySelect.onchange = () => {
      rarity = raritySelect.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
        new import_obsidian17.Notice("Name is required", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.updateArtifact(artifact.id, { name: name.trim(), description: description.trim(), rarity });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Artifact updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showCreateEventModal() {
    if (!this.currentWorld)
      return;
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Create Event");
    const content = modal.contentEl;
    let name = "";
    let type2 = "";
    let description = "";
    let importance = 5;
    let timelinePosition = void 0;
    content.createEl("h4", { text: "Basic Info", cls: "story-engine-modal-section" });
    content.createEl("label", { text: "Event Name *" });
    const nameInput = content.createEl("input", {
      type: "text",
      cls: "story-engine-input",
      placeholder: "e.g., The Battle of Crimson Fields"
    });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Event Type" });
    const typeSelect = content.createEl("select", { cls: "story-engine-select" });
    typeSelect.createEl("option", { value: "", text: "Select type..." });
    ["Battle", "Treaty", "Discovery", "Birth", "Death", "Coronation", "Disaster", "Migration", "Founding", "Other"].forEach((t) => {
      typeSelect.createEl("option", { value: t, text: t });
    });
    typeSelect.onchange = () => {
      type2 = typeSelect.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      placeholder: "What happened during this event?"
    });
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("h4", { text: "\u{1F4C5} Timeline Position", cls: "story-engine-modal-section" });
    content.createEl("label", { text: "Year (relative to Epoch/Year Zero)" });
    content.createEl("p", {
      text: "Use positive numbers for years after Year Zero, negative for years before.",
      cls: "story-engine-hint"
    });
    const timelinePosInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      placeholder: "e.g., 100 (Year 100) or -50 (50 years before Year Zero)"
    });
    timelinePosInput.oninput = () => {
      const val = timelinePosInput.value;
      timelinePosition = val ? parseInt(val) : void 0;
    };
    content.createEl("h4", { text: "\u2B50 Importance", cls: "story-engine-modal-section" });
    content.createEl("label", { text: "Importance Level (1-10)" });
    const importanceInput = content.createEl("input", {
      type: "range",
      cls: "story-engine-range",
      value: "5",
      attr: { min: "1", max: "10" }
    });
    const importanceValue = content.createEl("span", { text: " 5", cls: "story-engine-range-value" });
    importanceInput.oninput = () => {
      importance = parseInt(importanceInput.value) || 5;
      importanceValue.textContent = ` ${importance}`;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create Event", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
        new import_obsidian17.Notice("Name is required", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.createEvent(this.currentWorld.id, {
          name: name.trim(),
          type: type2.trim() || void 0,
          description: description.trim() || void 0,
          importance: Math.max(1, Math.min(10, importance)),
          timeline_position: timelinePosition
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Event created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditEventModal(event) {
    var _a, _b;
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Edit Event");
    const content = modal.contentEl;
    let name = event.name;
    let type2 = event.type || "";
    let description = event.description || "";
    let importance = event.importance;
    let timelinePosition = (_a = event.timeline_position) != null ? _a : void 0;
    content.createEl("h4", { text: "Basic Info", cls: "story-engine-modal-section" });
    content.createEl("label", { text: "Event Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Event Type" });
    const typeSelect = content.createEl("select", { cls: "story-engine-select" });
    typeSelect.createEl("option", { value: "", text: "Select type..." });
    ["Battle", "Treaty", "Discovery", "Birth", "Death", "Coronation", "Disaster", "Migration", "Founding", "Epoch", "Other"].forEach((t) => {
      const opt = typeSelect.createEl("option", { value: t, text: t });
      if (type2.toLowerCase() === t.toLowerCase())
        opt.selected = true;
    });
    typeSelect.onchange = () => {
      type2 = typeSelect.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("h4", { text: "\u{1F4C5} Timeline Position", cls: "story-engine-modal-section" });
    content.createEl("label", { text: "Year (relative to Epoch/Year Zero)" });
    content.createEl("p", {
      text: "Use positive numbers for years after Year Zero, negative for years before.",
      cls: "story-engine-hint"
    });
    const timelinePosInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      value: (_b = timelinePosition == null ? void 0 : timelinePosition.toString()) != null ? _b : ""
    });
    timelinePosInput.placeholder = "e.g., 100 or -50";
    timelinePosInput.oninput = () => {
      const val = timelinePosInput.value;
      timelinePosition = val ? parseInt(val) : void 0;
    };
    content.createEl("h4", { text: "\u2B50 Importance", cls: "story-engine-modal-section" });
    content.createEl("label", { text: "Importance Level (1-10)" });
    const importanceInput = content.createEl("input", {
      type: "range",
      cls: "story-engine-range",
      value: importance.toString(),
      attr: { min: "1", max: "10" }
    });
    const importanceValue = content.createEl("span", { text: ` ${importance}`, cls: "story-engine-range-value" });
    importanceInput.oninput = () => {
      importance = parseInt(importanceInput.value) || 5;
      importanceValue.textContent = ` ${importance}`;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
        new import_obsidian17.Notice("Name is required", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.updateEvent(event.id, {
          name: name.trim(),
          type: type2.trim() || void 0,
          description: description.trim() || void 0,
          importance: Math.max(1, Math.min(10, importance)),
          timeline_position: timelinePosition
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Event updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showCreateTraitModal() {
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Create Trait");
    const content = modal.contentEl;
    let name = "";
    let category = "";
    let description = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Category" });
    const categoryInput = content.createEl("input", { type: "text", cls: "story-engine-input", placeholder: "e.g., Personality, Physical, Background" });
    categoryInput.oninput = () => {
      category = categoryInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
        new import_obsidian17.Notice("Name is required", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.createTrait({
          name: name.trim(),
          category: category.trim(),
          description: description.trim()
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Trait created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditTraitModal(trait) {
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Edit Trait");
    const content = modal.contentEl;
    let name = trait.name;
    let category = trait.category;
    let description = trait.description;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Category" });
    const categoryInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: category });
    categoryInput.oninput = () => {
      category = categoryInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
        new import_obsidian17.Notice("Name is required", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.updateTrait(trait.id, { name: name.trim(), category: category.trim(), description: description.trim() });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Trait updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  renderTimeConfigDisplay(container, config) {
    var _a;
    container.createEl("h4", { text: "Time Configuration" });
    const grid = container.createDiv({ cls: "story-engine-time-config-grid" });
    grid.createDiv().setText(`Base Unit: ${config.base_unit}`);
    grid.createDiv().setText(`Hours/Day: ${config.hours_per_day}`);
    grid.createDiv().setText(`Days/Week: ${config.days_per_week}`);
    grid.createDiv().setText(`Days/Year: ${config.days_per_year}`);
    grid.createDiv().setText(`Months/Year: ${config.months_per_year}`);
    if (config.era_name) {
      grid.createDiv().setText(`Era: ${config.era_name}`);
    }
    if ((_a = config.month_names) == null ? void 0 : _a.length) {
      grid.createDiv().setText(`Months: ${config.month_names.join(", ")}`);
    }
    if (config.year_zero !== void 0) {
      grid.createDiv().setText(`Year Zero: ${config.year_zero}`);
    }
  }
  showTimeConfigModal(existingConfig) {
    var _a;
    if (!this.currentWorld)
      return;
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText(existingConfig ? "Edit Time Configuration" : "Create Time Configuration");
    const content = modal.contentEl;
    let baseUnit = (existingConfig == null ? void 0 : existingConfig.base_unit) || "year";
    let hoursPerDay = (existingConfig == null ? void 0 : existingConfig.hours_per_day) || 24;
    let daysPerWeek = (existingConfig == null ? void 0 : existingConfig.days_per_week) || 7;
    let daysPerYear = (existingConfig == null ? void 0 : existingConfig.days_per_year) || 365;
    let monthsPerYear = (existingConfig == null ? void 0 : existingConfig.months_per_year) || 12;
    let eraName = (existingConfig == null ? void 0 : existingConfig.era_name) || "";
    let yearZero = ((_a = existingConfig == null ? void 0 : existingConfig.year_zero) == null ? void 0 : _a.toString()) || "";
    content.createEl("label", { text: "Base Unit *" });
    const baseUnitSelect = content.createEl("select", { cls: "story-engine-select" });
    ["year", "day", "hour", "custom"].forEach((unit2) => {
      const opt = baseUnitSelect.createEl("option", { value: unit2, text: unit2 });
      if (baseUnit === unit2)
        opt.selected = true;
    });
    baseUnitSelect.onchange = () => {
      baseUnit = baseUnitSelect.value;
    };
    content.createEl("label", { text: "Hours per Day" });
    const hoursPerDayInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      value: hoursPerDay.toString()
    });
    hoursPerDayInput.oninput = () => {
      hoursPerDay = parseFloat(hoursPerDayInput.value) || 24;
    };
    content.createEl("label", { text: "Days per Week" });
    const daysPerWeekInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      value: daysPerWeek.toString()
    });
    daysPerWeekInput.oninput = () => {
      daysPerWeek = parseInt(daysPerWeekInput.value) || 7;
    };
    content.createEl("label", { text: "Days per Year" });
    const daysPerYearInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      value: daysPerYear.toString()
    });
    daysPerYearInput.oninput = () => {
      daysPerYear = parseInt(daysPerYearInput.value) || 365;
    };
    content.createEl("label", { text: "Months per Year" });
    const monthsPerYearInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      value: monthsPerYear.toString()
    });
    monthsPerYearInput.oninput = () => {
      monthsPerYear = parseInt(monthsPerYearInput.value) || 12;
    };
    content.createEl("label", { text: "Era Name (optional)" });
    const eraNameInput = content.createEl("input", {
      type: "text",
      cls: "story-engine-input",
      value: eraName
    });
    eraNameInput.oninput = () => {
      eraName = eraNameInput.value;
    };
    content.createEl("label", { text: "Year Zero (optional)" });
    const yearZeroInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      value: yearZero
    });
    yearZeroInput.oninput = () => {
      yearZero = yearZeroInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        const timeConfig = {
          base_unit: baseUnit,
          hours_per_day: hoursPerDay,
          days_per_week: daysPerWeek,
          days_per_year: daysPerYear,
          months_per_year: monthsPerYear,
          era_name: eraName.trim() || void 0,
          year_zero: yearZero ? parseInt(yearZero) : void 0
        };
        await this.plugin.apiClient.updateWorldTimeConfig(this.currentWorld.id, timeConfig);
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Time configuration saved");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  async showTimelineModal() {
    if (!this.currentWorld)
      return;
    try {
      const events = await this.plugin.apiClient.getTimeline(this.currentWorld.id);
      const modal = new TimelineModal(this.app, events, this.currentWorld.time_config || null);
      modal.open();
    } catch (err) {
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed to load timeline"}`, 5e3);
    }
  }
  // Placeholder methods for modals that will be implemented later
  showArchetypeTraitsModal(archetype, traits) {
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText(`Traits for ${archetype.name}`);
    const content = modal.contentEl;
    if (traits.length === 0) {
      content.createEl("p", { text: "No traits assigned to this archetype." });
    } else {
      const list = content.createDiv({ cls: "story-engine-list" });
      for (const trait of traits) {
        const item = list.createDiv({ cls: "story-engine-item" });
        item.createDiv({ cls: "story-engine-title", text: trait.trait_name || "Unknown" });
      }
    }
    modal.open();
  }
  showCreateArchetypeModal() {
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Create Archetype");
    const content = modal.contentEl;
    let name = "";
    let description = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
        new import_obsidian17.Notice("Name is required", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.createArchetype({ name: name.trim(), description: description.trim() });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Archetype created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditArchetypeModal(archetype) {
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Edit Archetype");
    const content = modal.contentEl;
    let name = archetype.name;
    let description = archetype.description;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
        new import_obsidian17.Notice("Name is required", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.updateArchetype(archetype.id, { name: name.trim(), description: description.trim() });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Archetype updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showLoreDetailsModal(lore) {
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText(lore.name);
    const content = modal.contentEl;
    content.createEl("h4", { text: "Description" });
    content.createEl("p", { text: lore.description || "No description" });
    if (lore.rules) {
      content.createEl("h4", { text: "Rules" });
      content.createEl("p", { text: lore.rules });
    }
    if (lore.limitations) {
      content.createEl("h4", { text: "Limitations" });
      content.createEl("p", { text: lore.limitations });
    }
    if (lore.requirements) {
      content.createEl("h4", { text: "Requirements" });
      content.createEl("p", { text: lore.requirements });
    }
    modal.open();
  }
  showCreateLoreModal(parentId) {
    if (!this.currentWorld)
      return;
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Create Lore");
    const content = modal.contentEl;
    let name = "";
    let category = "";
    let description = "";
    let rules = "";
    let limitations = "";
    let requirements = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Category" });
    const categoryInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    categoryInput.oninput = () => {
      category = categoryInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("label", { text: "Rules" });
    const rulesInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    rulesInput.oninput = () => {
      rules = rulesInput.value;
    };
    content.createEl("label", { text: "Limitations" });
    const limitationsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    limitationsInput.oninput = () => {
      limitations = limitationsInput.value;
    };
    content.createEl("label", { text: "Requirements" });
    const requirementsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    requirementsInput.oninput = () => {
      requirements = requirementsInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
        new import_obsidian17.Notice("Name is required", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.createLore(this.currentWorld.id, {
          name: name.trim(),
          category: category.trim() || void 0,
          description: description.trim(),
          rules: rules.trim(),
          limitations: limitations.trim(),
          requirements: requirements.trim(),
          parent_id: parentId || void 0
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Lore created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditLoreModal(lore) {
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Edit Lore");
    const content = modal.contentEl;
    let name = lore.name;
    let category = lore.category || "";
    let description = lore.description;
    let rules = lore.rules;
    let limitations = lore.limitations;
    let requirements = lore.requirements;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Category" });
    const categoryInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: category });
    categoryInput.oninput = () => {
      category = categoryInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("label", { text: "Rules" });
    const rulesInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    rulesInput.value = rules;
    rulesInput.oninput = () => {
      rules = rulesInput.value;
    };
    content.createEl("label", { text: "Limitations" });
    const limitationsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    limitationsInput.value = limitations;
    limitationsInput.oninput = () => {
      limitations = limitationsInput.value;
    };
    content.createEl("label", { text: "Requirements" });
    const requirementsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    requirementsInput.value = requirements;
    requirementsInput.oninput = () => {
      requirements = requirementsInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
        new import_obsidian17.Notice("Name is required", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.updateLore(lore.id, {
          name: name.trim(),
          category: category.trim() || void 0,
          description: description.trim(),
          rules: rules.trim(),
          limitations: limitations.trim(),
          requirements: requirements.trim()
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Lore updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showFactionDetailsModal(faction) {
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText(faction.name);
    const content = modal.contentEl;
    content.createEl("h4", { text: "Description" });
    content.createEl("p", { text: faction.description || "No description" });
    if (faction.beliefs) {
      content.createEl("h4", { text: "Beliefs" });
      content.createEl("p", { text: faction.beliefs });
    }
    if (faction.structure) {
      content.createEl("h4", { text: "Structure" });
      content.createEl("p", { text: faction.structure });
    }
    if (faction.symbols) {
      content.createEl("h4", { text: "Symbols" });
      content.createEl("p", { text: faction.symbols });
    }
    modal.open();
  }
  showCreateFactionModal(parentId) {
    if (!this.currentWorld)
      return;
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Create Faction");
    const content = modal.contentEl;
    let name = "";
    let type2 = "";
    let description = "";
    let beliefs = "";
    let structure = "";
    let symbols = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Type" });
    const typeInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    typeInput.oninput = () => {
      type2 = typeInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("label", { text: "Beliefs" });
    const beliefsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    beliefsInput.oninput = () => {
      beliefs = beliefsInput.value;
    };
    content.createEl("label", { text: "Structure" });
    const structureInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    structureInput.oninput = () => {
      structure = structureInput.value;
    };
    content.createEl("label", { text: "Symbols" });
    const symbolsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    symbolsInput.oninput = () => {
      symbols = symbolsInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
        new import_obsidian17.Notice("Name is required", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.createFaction(this.currentWorld.id, {
          name: name.trim(),
          type: type2.trim() || void 0,
          description: description.trim(),
          beliefs: beliefs.trim(),
          structure: structure.trim(),
          symbols: symbols.trim(),
          parent_id: parentId || void 0
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Faction created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditFactionModal(faction) {
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Edit Faction");
    const content = modal.contentEl;
    let name = faction.name;
    let type2 = faction.type || "";
    let description = faction.description;
    let beliefs = faction.beliefs;
    let structure = faction.structure;
    let symbols = faction.symbols;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Type" });
    const typeInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: type2 });
    typeInput.oninput = () => {
      type2 = typeInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("label", { text: "Beliefs" });
    const beliefsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    beliefsInput.value = beliefs;
    beliefsInput.oninput = () => {
      beliefs = beliefsInput.value;
    };
    content.createEl("label", { text: "Structure" });
    const structureInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    structureInput.value = structure;
    structureInput.oninput = () => {
      structure = structureInput.value;
    };
    content.createEl("label", { text: "Symbols" });
    const symbolsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    symbolsInput.value = symbols;
    symbolsInput.oninput = () => {
      symbols = symbolsInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
        new import_obsidian17.Notice("Name is required", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.updateFaction(faction.id, {
          name: name.trim(),
          type: type2.trim() || void 0,
          description: description.trim(),
          beliefs: beliefs.trim(),
          structure: structure.trim(),
          symbols: symbols.trim()
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Faction updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  // ==================== Relationship Modals ====================
  showAddCharacterRelationshipModal(character) {
    if (!this.currentWorld)
      return;
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Add Character Relationship");
    const content = modal.contentEl;
    let otherCharacterId = "";
    let relationshipType = "ally";
    let description = "";
    let bidirectional = true;
    content.createEl("label", { text: "Other Character *" });
    const characterSelect = content.createEl("select", { cls: "story-engine-select" });
    characterSelect.createEl("option", { value: "", text: "Select a character..." });
    for (const char of this.characters.filter((c) => c.id !== character.id).sort((a, b) => a.name.localeCompare(b.name))) {
      characterSelect.createEl("option", { value: char.id, text: char.name });
    }
    characterSelect.onchange = () => {
      otherCharacterId = characterSelect.value;
    };
    content.createEl("label", { text: "Relationship Type *" });
    const typeSelect = content.createEl("select", { cls: "story-engine-select" });
    const relationshipTypes = ["ally", "enemy", "family", "lover", "rival", "mentor", "student"];
    for (const type2 of relationshipTypes) {
      typeSelect.createEl("option", { value: type2, text: type2.charAt(0).toUpperCase() + type2.slice(1) });
    }
    typeSelect.onchange = () => {
      relationshipType = typeSelect.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("label", { text: "Bidirectional" });
    const bidirectionalCheckbox = content.createEl("input", { type: "checkbox" });
    bidirectionalCheckbox.checked = true;
    bidirectionalCheckbox.onchange = () => {
      bidirectional = bidirectionalCheckbox.checked;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!otherCharacterId) {
        new import_obsidian17.Notice("Please select a character", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.createCharacterRelationship(character.id, {
          character2_id: otherCharacterId,
          relationship_type: relationshipType,
          description: description.trim(),
          bidirectional
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Relationship created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showLinkEventToEntityModal(event) {
    if (!this.currentWorld)
      return;
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText(`Link Event: ${event.name}`);
    const content = modal.contentEl;
    let entityType = "character";
    let entityId = "";
    let relationshipType = "";
    let notes = "";
    content.createEl("label", { text: "Entity Type *" });
    const typeSelect = content.createEl("select", { cls: "story-engine-select" });
    typeSelect.createEl("option", { value: "character", text: "\u{1F464} Character" });
    typeSelect.createEl("option", { value: "location", text: "\u{1F4CD} Location" });
    typeSelect.createEl("option", { value: "faction", text: "\u{1F3F4} Faction" });
    typeSelect.createEl("option", { value: "artifact", text: "\u2694\uFE0F Artifact" });
    typeSelect.createEl("option", { value: "lore", text: "\u{1F4DC} Lore" });
    content.createEl("label", { text: "Entity *" });
    const entitySelect = content.createEl("select", { cls: "story-engine-select" });
    const populateEntitySelect = () => {
      entitySelect.empty();
      entitySelect.createEl("option", { value: "", text: `Select a ${entityType}...` });
      entityId = "";
      if (entityType === "character") {
        for (const char of this.characters.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: char.id, text: char.name });
        }
      } else if (entityType === "location") {
        for (const loc of this.locations.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: loc.id, text: loc.name });
        }
      } else if (entityType === "faction") {
        for (const faction of this.factions.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: faction.id, text: faction.name });
        }
      } else if (entityType === "artifact") {
        for (const art of this.artifacts.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: art.id, text: art.name });
        }
      } else if (entityType === "lore") {
        for (const lore of this.lores.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: lore.id, text: lore.name });
        }
      }
    };
    populateEntitySelect();
    typeSelect.onchange = () => {
      entityType = typeSelect.value;
      populateEntitySelect();
    };
    entitySelect.onchange = () => {
      entityId = entitySelect.value;
    };
    content.createEl("label", { text: "Relationship Type" });
    const relTypeSelect = content.createEl("select", { cls: "story-engine-select" });
    relTypeSelect.createEl("option", { value: "", text: "Select relationship..." });
    ["involved", "caused", "affected", "witnessed", "created", "destroyed", "participated", "led", "opposed"].forEach((rel) => {
      relTypeSelect.createEl("option", { value: rel, text: rel.charAt(0).toUpperCase() + rel.slice(1) });
    });
    relTypeSelect.onchange = () => {
      relationshipType = relTypeSelect.value;
    };
    content.createEl("label", { text: "Notes" });
    const notesInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      placeholder: "Additional details about this relationship..."
    });
    notesInput.oninput = () => {
      notes = notesInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Link Entity", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!entityId) {
        new import_obsidian17.Notice(`Please select a ${entityType}`, 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.addEventReference(event.id, entityType, entityId, relationshipType.trim() || void 0, notes.trim() || void 0);
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Entity linked to event");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showSetEventParentModal(event) {
    if (!this.currentWorld)
      return;
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Set Parent Event (Cause)");
    const content = modal.contentEl;
    let parentId = event.parent_id || null;
    content.createEl("p", {
      text: "Link this event to its cause or parent event in the timeline hierarchy.",
      cls: "story-engine-hint"
    });
    content.createEl("label", { text: "Parent Event (Cause)" });
    const parentSelect = content.createEl("select", { cls: "story-engine-select" });
    parentSelect.createEl("option", { value: "", text: "None (Root Event)" });
    const sortedEvents = this.events.filter((e) => e.id !== event.id).sort((a, b) => {
      var _a, _b;
      const posA = (_a = a.timeline_position) != null ? _a : Number.MAX_SAFE_INTEGER;
      const posB = (_b = b.timeline_position) != null ? _b : Number.MAX_SAFE_INTEGER;
      if (posA !== posB)
        return posA - posB;
      return a.name.localeCompare(b.name);
    });
    for (const evt of sortedEvents) {
      const posLabel = evt.timeline_position !== void 0 ? ` (Year ${evt.timeline_position})` : "";
      const opt = parentSelect.createEl("option", { value: evt.id, text: `${evt.name}${posLabel}` });
      if (event.parent_id === evt.id) {
        opt.selected = true;
      }
    }
    parentSelect.onchange = () => {
      parentId = parentSelect.value || null;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.moveEvent(event.id, parentId);
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Event parent updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showAddFactionReferenceModal(faction) {
    if (!this.currentWorld)
      return;
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Link Faction to Entity");
    const content = modal.contentEl;
    let entityType = "character";
    let entityId = "";
    let role = "";
    let notes = "";
    content.createEl("label", { text: "Entity Type *" });
    const typeSelect = content.createEl("select", { cls: "story-engine-select" });
    typeSelect.createEl("option", { value: "character", text: "Character" });
    typeSelect.createEl("option", { value: "location", text: "Location" });
    typeSelect.createEl("option", { value: "artifact", text: "Artifact" });
    typeSelect.createEl("option", { value: "event", text: "Event" });
    typeSelect.createEl("option", { value: "faction", text: "Faction" });
    typeSelect.onchange = () => {
      entityType = typeSelect.value;
      entitySelect.empty();
      entitySelect.createEl("option", { value: "", text: `Select a ${entityType}...` });
      loadEntitiesForType(entityType);
    };
    content.createEl("label", { text: "Entity *" });
    const entitySelect = content.createEl("select", { cls: "story-engine-select" });
    entitySelect.createEl("option", { value: "", text: "Select an entity..." });
    const loadEntitiesForType = (type2) => {
      if (type2 === "character") {
        for (const char of this.characters.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: char.id, text: char.name });
        }
      } else if (type2 === "location") {
        for (const loc of this.locations.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: loc.id, text: loc.name });
        }
      } else if (type2 === "artifact") {
        for (const art of this.artifacts.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: art.id, text: art.name });
        }
      } else if (type2 === "event") {
        for (const evt of this.events.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: evt.id, text: evt.name });
        }
      } else if (type2 === "faction") {
        for (const fac of this.factions.filter((f) => f.id !== faction.id).sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: fac.id, text: fac.name });
        }
      }
    };
    loadEntitiesForType(entityType);
    entitySelect.onchange = () => {
      entityId = entitySelect.value;
    };
    content.createEl("label", { text: "Role" });
    const roleInput = content.createEl("input", { type: "text", cls: "story-engine-input", placeholder: "e.g., leader, member, ally, rival" });
    roleInput.oninput = () => {
      role = roleInput.value;
    };
    content.createEl("label", { text: "Notes" });
    const notesInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    notesInput.oninput = () => {
      notes = notesInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!entityId) {
        new import_obsidian17.Notice("Please select an entity", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.addFactionReference(faction.id, entityType, entityId, role.trim() || void 0, notes.trim() || void 0);
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Reference created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showAddLoreReferenceModal(lore) {
    if (!this.currentWorld)
      return;
    const modal = new import_obsidian17.Modal(this.app);
    modal.titleEl.setText("Link Lore to Entity");
    const content = modal.contentEl;
    let entityType = "character";
    let entityId = "";
    let relationshipType = "";
    let notes = "";
    content.createEl("label", { text: "Entity Type *" });
    const typeSelect = content.createEl("select", { cls: "story-engine-select" });
    typeSelect.createEl("option", { value: "character", text: "Character" });
    typeSelect.createEl("option", { value: "location", text: "Location" });
    typeSelect.createEl("option", { value: "artifact", text: "Artifact" });
    typeSelect.createEl("option", { value: "event", text: "Event" });
    typeSelect.createEl("option", { value: "faction", text: "Faction" });
    typeSelect.createEl("option", { value: "lore", text: "Lore" });
    typeSelect.onchange = () => {
      entityType = typeSelect.value;
      entitySelect.empty();
      entitySelect.createEl("option", { value: "", text: `Select a ${entityType}...` });
      loadEntitiesForType(entityType);
    };
    content.createEl("label", { text: "Entity *" });
    const entitySelect = content.createEl("select", { cls: "story-engine-select" });
    entitySelect.createEl("option", { value: "", text: "Select an entity..." });
    const loadEntitiesForType = (type2) => {
      if (type2 === "character") {
        for (const char of this.characters.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: char.id, text: char.name });
        }
      } else if (type2 === "location") {
        for (const loc of this.locations.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: loc.id, text: loc.name });
        }
      } else if (type2 === "artifact") {
        for (const art of this.artifacts.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: art.id, text: art.name });
        }
      } else if (type2 === "event") {
        for (const evt of this.events.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: evt.id, text: evt.name });
        }
      } else if (type2 === "faction") {
        for (const fac of this.factions.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: fac.id, text: fac.name });
        }
      } else if (type2 === "lore") {
        for (const l of this.lores.filter((l2) => l2.id !== lore.id).sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: l.id, text: l.name });
        }
      }
    };
    loadEntitiesForType(entityType);
    entitySelect.onchange = () => {
      entityId = entitySelect.value;
    };
    content.createEl("label", { text: "Relationship Type" });
    const relTypeInput = content.createEl("input", { type: "text", cls: "story-engine-input", placeholder: "e.g., practitioner, origin, forbidden" });
    relTypeInput.oninput = () => {
      relationshipType = relTypeInput.value;
    };
    content.createEl("label", { text: "Notes" });
    const notesInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    notesInput.oninput = () => {
      notes = notesInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!entityId) {
        new import_obsidian17.Notice("Please select an entity", 3e3);
        return;
      }
      try {
        await this.plugin.apiClient.addLoreReference(lore.id, entityType, entityId, relationshipType.trim() || void 0, notes.trim() || void 0);
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
        new import_obsidian17.Notice("Reference created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  // ==================== Character Details View Methods ====================
  async showCharacterDetails(character) {
    this.viewMode = "character-details";
    const world = character.world_id ? await this.plugin.apiClient.getWorld(character.world_id).catch(() => null) : null;
    const characters = world ? await this.plugin.apiClient.getCharacters(world.id).catch(() => []) : [];
    let traits = this.traits;
    let archetypes = this.archetypes;
    let events = world ? this.events : [];
    if (!traits || traits.length === 0) {
      try {
        traits = await this.plugin.apiClient.getTraits();
        this.traits = traits;
      } catch (err) {
        console.warn("Failed to load traits:", err);
        traits = [];
      }
    }
    if (!archetypes || archetypes.length === 0) {
      try {
        archetypes = await this.plugin.apiClient.getArchetypes();
        this.archetypes = archetypes;
      } catch (err) {
        console.warn("Failed to load archetypes:", err);
        archetypes = [];
      }
    }
    if (world && (!events || events.length === 0)) {
      try {
        events = await this.plugin.apiClient.getEvents(world.id);
        this.events = events;
      } catch (err) {
        console.warn("Failed to load events:", err);
        events = [];
      }
    }
    this.characterDetailsView = new CharacterDetailsView(
      this.plugin,
      character,
      this.headerEl,
      this.contentEl,
      () => {
        this.characterDetailsView = null;
        if (this.currentWorld) {
          this.viewMode = "world-details";
          this.renderWorldDetails();
        } else if (this.currentStory) {
          this.viewMode = "details";
          this.renderDetails();
        } else {
          this.viewMode = "list";
          this.renderListHeader();
          this.renderListContent();
        }
      },
      (character2) => {
        this.showEditCharacterModal(character2);
      },
      world,
      characters,
      archetypes,
      traits,
      events
    );
    await this.characterDetailsView.render();
  }
};

// src/views/StoryEngineExtractView.ts
var import_obsidian18 = require("obsidian");
var STORY_ENGINE_EXTRACT_VIEW_TYPE = "story-engine-extract-view";
var StoryEngineExtractView = class extends import_obsidian18.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.result = null;
    this.logs = [];
    this.status = "idle";
    this.activeTab = "progress";
    this.expandedLogs = /* @__PURE__ */ new Set();
    this.expandedRelationIndex = null;
    this.pendingRelationScrollIndex = null;
    this.pendingTabScroll = false;
    this.entitySearch = "";
    this.entityFilterType = "all";
    this.entitySort = "name";
    this.relationSearch = "";
    this.relationFilterType = "all";
    this.relationSort = "type";
    this.plugin = plugin;
    this.logs = plugin.extractLogs;
    this.status = plugin.extractStatus;
  }
  getViewType() {
    return STORY_ENGINE_EXTRACT_VIEW_TYPE;
  }
  getDisplayText() {
    return "Extract";
  }
  getIcon() {
    return "search";
  }
  async onOpen() {
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("story-engine-extract-container");
    this.contentRoot = container;
    this.setResult(this.plugin.extractResult);
    this.setLogs(this.plugin.extractLogs, this.plugin.extractStatus);
  }
  setResult(result) {
    this.result = result;
    this.render();
  }
  setLogs(logs, status) {
    this.logs = logs;
    this.status = status;
    this.render();
  }
  render() {
    if (!this.contentRoot)
      return;
    this.contentRoot.empty();
    const header = this.contentRoot.createDiv({
      cls: "story-engine-extract-header"
    });
    header.createEl("h2", { text: "Extract" });
    const headerActions = header.createDiv({
      cls: "story-engine-extract-header-actions"
    });
    const backButton = headerActions.createEl("button", {
      text: "Back to Stories",
      cls: "story-engine-extract-back"
    });
    backButton.onclick = () => {
      this.plugin.activateView();
    };
    if (this.status === "running") {
      const cancelButton = headerActions.createEl("button", {
        text: "Cancel",
        cls: "story-engine-extract-cancel"
      });
      cancelButton.onclick = () => {
        this.plugin.cancelExtractStream();
      };
    }
    if (!this.result) {
      this.renderLogs();
      this.contentRoot.createEl("p", {
        text: "No extraction results yet.",
        cls: "story-engine-extract-empty"
      });
      return;
    }
    const queryBlock = this.contentRoot.createDiv({
      cls: "story-engine-extract-query"
    });
    queryBlock.createEl("div", {
      text: "Text",
      cls: "story-engine-extract-label"
    });
    queryBlock.createEl("div", {
      text: this.result.text,
      cls: "story-engine-extract-query-text"
    });
    const headerMeta = this.contentRoot.createDiv({
      cls: "story-engine-extract-meta"
    });
    headerMeta.createEl("div", {
      text: `Status: ${this.status}`
    });
    if (this.result) {
      const foundCount = this.result.entities.filter((entity) => entity.found).length;
      headerMeta.createEl("div", {
        text: `Entities found: ${foundCount}/${this.result.entities.length}`
      });
      headerMeta.createEl("div", {
        text: `Relations found: ${this.result.relations.length}`
      });
      headerMeta.createEl("div", {
        text: `Text length: ${this.result.text.length}`
      });
    }
    const tabs = this.contentRoot.createDiv({
      cls: "story-engine-extract-tabs"
    });
    const hasEntities = this.result.entities.length > 0;
    const hasRelations = this.result.relations.length > 0;
    const includeRelations = this.result.include_relations !== false;
    const entitiesDisabled = !hasEntities && this.status === "idle";
    const relationsDisabled = !hasRelations && this.status === "idle" || !includeRelations;
    const progressTab = tabs.createEl("button", {
      text: "Progress",
      cls: `story-engine-extract-tab ${this.activeTab === "progress" ? "is-active" : ""}`
    });
    progressTab.onclick = () => {
      this.setActiveTab("progress");
    };
    const entitiesTab = tabs.createEl("button", {
      text: "Entities",
      cls: `story-engine-extract-tab ${this.activeTab === "entities" ? "is-active" : ""}`
    });
    if (entitiesDisabled) {
      entitiesTab.disabled = true;
      entitiesTab.addClass("is-disabled");
    }
    entitiesTab.onclick = () => {
      if (entitiesDisabled)
        return;
      this.setActiveTab("entities");
    };
    const relationsTab = tabs.createEl("button", {
      text: "Relations",
      cls: `story-engine-extract-tab ${this.activeTab === "relations" ? "is-active" : ""}`
    });
    if (relationsDisabled) {
      relationsTab.disabled = true;
      relationsTab.addClass("is-disabled");
    }
    relationsTab.onclick = () => {
      if (relationsDisabled)
        return;
      this.setActiveTab("relations");
    };
    const panels = this.contentRoot.createDiv({
      cls: "story-engine-extract-panels"
    });
    const entitiesPanel = panels.createDiv({
      cls: `story-engine-extract-panel ${this.activeTab === "entities" ? "is-active" : ""}`
    });
    const relationsPanel = panels.createDiv({
      cls: `story-engine-extract-panel ${this.activeTab === "relations" ? "is-active" : ""}`
    });
    const progressPanel = panels.createDiv({
      cls: `story-engine-extract-panel ${this.activeTab === "progress" ? "is-active" : ""}`
    });
    const actions = this.contentRoot.createDiv({
      cls: "story-engine-extract-actions"
    });
    const clearButton = actions.createEl("button", {
      text: "Clear Results",
      cls: "story-engine-extract-clear"
    });
    clearButton.onclick = () => {
      this.plugin.extractResult = null;
      this.setResult(null);
      this.plugin.updateExtractViews();
    };
    this.renderLogs(progressPanel);
    if (hasEntities) {
      this.renderEntityControls(entitiesPanel);
      const list = entitiesPanel.createDiv({
        cls: "story-engine-extract-list"
      });
      const filteredEntities = this.filterAndSortEntities(this.result.entities);
      filteredEntities.forEach((entity, index) => {
        this.renderEntity(list, entity, index);
      });
    } else {
      const emptyText = this.status === "running" ? "Extracting entities..." : "No entities returned from extraction.";
      entitiesPanel.createEl("p", {
        text: emptyText,
        cls: "story-engine-extract-empty"
      });
    }
    if (hasRelations) {
      this.renderRelationControls(relationsPanel);
      const list = relationsPanel.createDiv({
        cls: "story-engine-extract-list"
      });
      const filteredRelations = this.filterAndSortRelations(this.result.relations);
      filteredRelations.forEach((relation, index) => {
        this.renderRelation(list, relation, index);
      });
    } else {
      let emptyText = "No relations returned from extraction.";
      if (!includeRelations) {
        emptyText = "Relations not requested.";
      } else if (!hasEntities) {
        emptyText = "Waiting for entity extraction.";
      } else if (this.status === "running") {
        emptyText = "Extracting relations...";
      }
      relationsPanel.createEl("p", {
        text: emptyText,
        cls: "story-engine-extract-empty"
      });
    }
    this.applyPendingScroll();
  }
  renderLogs(container) {
    const root2 = container != null ? container : this.contentRoot;
    const logBlock = root2.createDiv({
      cls: "story-engine-extract-logs"
    });
    logBlock.createEl("div", {
      text: "Progress",
      cls: "story-engine-extract-label"
    });
    if (!this.logs.length) {
      logBlock.createEl("p", {
        text: "No events yet.",
        cls: "story-engine-extract-empty"
      });
      return;
    }
    const list = logBlock.createDiv({ cls: "story-engine-extract-log-list" });
    const lastIndex = this.logs.length - 1;
    this.logs.forEach((entry, index) => {
      const eventLabel = entry.phase ? `${entry.phase} \xB7 ${entry.eventType}` : entry.eventType;
      const item = list.createDiv({
        cls: `story-engine-extract-log-item ${index === lastIndex ? "is-latest" : ""}`
      });
      const header = item.createDiv({
        cls: "story-engine-extract-log-header"
      });
      header.createSpan({
        text: `${entry.timestamp} | ${eventLabel}`,
        cls: "story-engine-extract-log-title"
      });
      const label = item.createDiv({
        cls: "story-engine-extract-log-label"
      });
      label.createSpan({ text: entry.message });
      const toggle = label.createSpan({
        text: index === lastIndex ? "..." : this.expandedLogs.has(entry.id) ? "\u2212" : "+",
        cls: "story-engine-extract-log-toggle"
      });
      label.onclick = () => {
        if (this.expandedLogs.has(entry.id)) {
          this.expandedLogs.delete(entry.id);
        } else {
          this.expandedLogs.add(entry.id);
        }
        this.render();
      };
      if (index === lastIndex) {
        toggle.addClass("is-typing");
      }
      if (this.expandedLogs.has(entry.id) && entry.data) {
        item.createEl("pre", {
          text: JSON.stringify(entry.data, null, 2),
          cls: "story-engine-extract-log-data"
        });
      }
    });
    list.scrollTop = list.scrollHeight;
  }
  renderEntity(container, entity, index) {
    this.renderEntityCard(container, entity, index);
  }
  renderEntityCard(container, entity, index, onCreated) {
    const item = container.createDiv({ cls: "story-engine-extract-item" });
    item.dataset.relationIndex = String(index);
    const header = item.createDiv({ cls: "story-engine-extract-item-header" });
    header.createEl("div", {
      text: `#${index + 1}`,
      cls: "story-engine-extract-rank"
    });
    const statusText = entity.created ? "Created" : entity.found ? "Found" : "New";
    const statusClass = entity.created ? "is-created" : entity.found ? "is-found" : "is-new";
    header.createEl("div", {
      text: statusText,
      cls: `story-engine-extract-status ${statusClass}`
    });
    const title = item.createDiv({ cls: "story-engine-extract-item-title" });
    title.createEl("div", {
      text: entity.name,
      cls: "story-engine-extract-entity-name"
    });
    title.createEl("div", {
      text: entity.type,
      cls: "story-engine-extract-entity-type"
    });
    if (entity.summary) {
      item.createEl("div", {
        text: entity.summary,
        cls: "story-engine-extract-content"
      });
    }
    if (entity.match) {
      item.appendChild(this.renderMatch("Match", entity.match));
    }
    if (entity.candidates && entity.candidates.length) {
      const list = item.createDiv({ cls: "story-engine-extract-candidates" });
      list.createEl("div", {
        text: "Candidates",
        cls: "story-engine-extract-label"
      });
      entity.candidates.forEach((candidate) => {
        list.appendChild(this.renderMatch("", candidate));
      });
    }
    if (!entity.created) {
      const actions = item.createDiv({ cls: "story-engine-extract-actions" });
      const actionButton = actions.createEl("button", {
        text: entity.found ? "Update Entity" : "Create Entity",
        cls: "story-engine-extract-action"
      });
      actionButton.onclick = async () => {
        actionButton.disabled = true;
        try {
          if (entity.found) {
            await this.updateEntity(entity);
          } else {
            const createdId = await this.createEntity(entity);
            if (createdId && onCreated) {
              onCreated(createdId);
            }
          }
        } finally {
          actionButton.disabled = false;
        }
      };
    }
  }
  renderMatch(label, match) {
    const wrapper = document.createElement("div");
    wrapper.className = "story-engine-extract-match";
    const parts = [];
    if (label) {
      parts.push(label);
    }
    parts.push(`${match.source_type}:${match.source_id}`);
    if (match.entity_name) {
      parts.push(match.entity_name);
    }
    parts.push(`sim ${match.similarity.toFixed(3)}`);
    if (match.reason) {
      parts.push(match.reason);
    }
    wrapper.textContent = parts.join(" \xB7 ");
    return wrapper;
  }
  async createEntity(entity) {
    var _a, _b;
    if (!((_a = this.result) == null ? void 0 : _a.world_id)) {
      new import_obsidian18.Notice("World ID missing. Select a story or world first.", 4e3);
      return "";
    }
    const description = ((_b = entity.summary) == null ? void 0 : _b.trim()) || entity.name;
    let createdId = "";
    switch (entity.type) {
      case "character": {
        const created = await this.plugin.apiClient.createCharacter(
          this.result.world_id,
          { name: entity.name, description }
        );
        createdId = created.id;
        break;
      }
      case "location": {
        const created = await this.plugin.apiClient.createLocation(
          this.result.world_id,
          { name: entity.name, description }
        );
        createdId = created.id;
        break;
      }
      case "artefact": {
        const created = await this.plugin.apiClient.createArtifact(
          this.result.world_id,
          { name: entity.name, description }
        );
        createdId = created.id;
        break;
      }
      case "faction": {
        const created = await this.plugin.apiClient.createFaction(
          this.result.world_id,
          { name: entity.name, description }
        );
        createdId = created.id;
        break;
      }
      case "event": {
        const created = await this.plugin.apiClient.createEvent(
          this.result.world_id,
          { name: entity.name, description }
        );
        createdId = created.id;
        break;
      }
      default:
        new import_obsidian18.Notice(`Unsupported type: ${entity.type}`, 4e3);
        return "";
    }
    entity.found = false;
    entity.created = true;
    entity.match = {
      source_type: entity.type,
      source_id: createdId,
      entity_name: entity.name,
      similarity: 1,
      reason: "Created from extract"
    };
    this.render();
    new import_obsidian18.Notice(`Created ${entity.type}: ${entity.name}`, 3e3);
    return createdId;
  }
  async updateEntity(entity) {
    var _a, _b;
    if (!((_a = entity.match) == null ? void 0 : _a.source_id)) {
      new import_obsidian18.Notice("No match available to update.", 4e3);
      return;
    }
    const description = (_b = entity.summary) != null ? _b : "";
    switch (entity.type) {
      case "character":
        await this.plugin.apiClient.updateCharacter(entity.match.source_id, {
          name: entity.name,
          description
        });
        break;
      case "location":
        await this.plugin.apiClient.updateLocation(entity.match.source_id, {
          name: entity.name,
          description
        });
        break;
      case "artefact":
        await this.plugin.apiClient.updateArtifact(entity.match.source_id, {
          name: entity.name,
          description
        });
        break;
      case "faction":
        await this.plugin.apiClient.updateFaction(entity.match.source_id, {
          name: entity.name,
          description
        });
        break;
      case "event":
        await this.plugin.apiClient.updateEvent(entity.match.source_id, {
          name: entity.name,
          description
        });
        break;
      default:
        new import_obsidian18.Notice(`Unsupported type: ${entity.type}`, 4e3);
        return;
    }
    new import_obsidian18.Notice(`Updated ${entity.type}: ${entity.name}`, 3e3);
  }
  renderRelation(container, relation, index) {
    const item = container.createDiv({ cls: "story-engine-extract-item" });
    const header = item.createDiv({ cls: "story-engine-extract-item-header" });
    header.createEl("div", {
      text: `#${index + 1}`,
      cls: "story-engine-extract-rank"
    });
    const statusText = relation.status === "pending_entities" ? "Pending" : relation.status;
    const statusClass = relation.status === "pending_entities" ? "is-new" : "is-found";
    const relationType = relation.relation_type || "relation";
    const typeLabel = `${relationType} | ${relation.source.type} -> ${relation.target.type}`;
    const typeLine = header.createEl("div", {
      text: typeLabel,
      cls: "story-engine-extract-entity-type"
    });
    typeLine.addClass("story-engine-extract-relation-types");
    header.createEl("div", {
      text: statusText,
      cls: `story-engine-extract-status ${statusClass}`
    });
    const title = item.createDiv({ cls: "story-engine-extract-item-title" });
    const sourceLabel = relation.source.name || relation.source.ref;
    const targetLabel = relation.target.name || relation.target.ref;
    title.createEl("div", {
      text: `${sourceLabel} \u2192 ${targetLabel}`,
      cls: "story-engine-extract-entity-type"
    });
    if (relation.summary) {
      item.createEl("div", {
        text: relation.summary,
        cls: "story-engine-extract-content"
      });
    }
    const hasPending = this.hasTempNode(relation.source) || this.hasTempNode(relation.target);
    const relationCreated = relation.status === "created";
    const actions = item.createDiv({ cls: "story-engine-extract-actions" });
    const createRelationButton = actions.createEl("button", {
      text: relationCreated ? "Relation Created" : "Create Relation",
      cls: "story-engine-extract-action"
    });
    if (relationCreated) {
      createRelationButton.disabled = true;
      createRelationButton.addClass("is-disabled");
      createRelationButton.title = "Relation already created.";
    } else if (hasPending) {
      createRelationButton.disabled = true;
      createRelationButton.addClass("is-disabled");
      createRelationButton.title = "Create pending entities first.";
    } else {
      createRelationButton.onclick = async () => {
        createRelationButton.disabled = true;
        try {
          await this.createRelation(relation);
        } finally {
          createRelationButton.disabled = false;
        }
      };
    }
    if (hasPending) {
      const createButton = actions.createEl("button", {
        text: "Create Pending",
        cls: "story-engine-extract-action"
      });
      createButton.onclick = async () => {
        createButton.disabled = true;
        try {
          await this.createPendingEntities(relation);
        } finally {
          createButton.disabled = false;
        }
      };
    }
    const accordionButton = actions.createEl("button", {
      text: "See Entities",
      cls: "story-engine-extract-action"
    });
    accordionButton.onclick = () => {
      const shouldExpand = this.expandedRelationIndex !== index;
      this.expandedRelationIndex = shouldExpand ? index : null;
      this.pendingRelationScrollIndex = shouldExpand ? index : null;
      this.render();
    };
    if (this.expandedRelationIndex === index) {
      const entitiesWrap = item.createDiv({
        cls: "story-engine-extract-relations-entities"
      });
      entitiesWrap.dataset.relationIndex = String(index);
      const entities = [
        this.resolveRelationEntity(relation.source),
        this.resolveRelationEntity(relation.target)
      ];
      entities.forEach((entity, entityIndex) => {
        this.renderEntityCard(entitiesWrap, entity, entityIndex, (createdId) => {
          this.applyCreatedIdToRelation(relation, entity, createdId);
        });
      });
    }
  }
  renderEntityControls(container) {
    if (!this.result)
      return;
    const controls = container.createDiv({ cls: "story-engine-extract-controls" });
    const search = controls.createEl("input", {
      type: "search",
      placeholder: "Search entities",
      cls: "story-engine-extract-search"
    });
    search.value = this.entitySearch;
    search.oninput = () => {
      this.entitySearch = search.value.trim();
      this.render();
    };
    const typeSelect = controls.createEl("select", {
      cls: "story-engine-extract-select"
    });
    typeSelect.createEl("option", { value: "all", text: "All types" });
    this.getEntityTypes(this.result.entities).forEach((type2) => {
      typeSelect.createEl("option", { value: type2, text: type2 });
    });
    typeSelect.value = this.entityFilterType;
    typeSelect.onchange = () => {
      this.entityFilterType = typeSelect.value;
      this.render();
    };
    const sortSelect = controls.createEl("select", {
      cls: "story-engine-extract-select"
    });
    sortSelect.createEl("option", { value: "name", text: "Sort: Name" });
    sortSelect.createEl("option", { value: "type", text: "Sort: Type" });
    sortSelect.createEl("option", { value: "status", text: "Sort: Status" });
    sortSelect.value = this.entitySort;
    sortSelect.onchange = () => {
      this.entitySort = sortSelect.value;
      this.render();
    };
  }
  renderRelationControls(container) {
    if (!this.result)
      return;
    const controls = container.createDiv({ cls: "story-engine-extract-controls" });
    const search = controls.createEl("input", {
      type: "search",
      placeholder: "Search relations",
      cls: "story-engine-extract-search"
    });
    search.value = this.relationSearch;
    search.oninput = () => {
      this.relationSearch = search.value.trim();
      this.render();
    };
    const typeSelect = controls.createEl("select", {
      cls: "story-engine-extract-select"
    });
    typeSelect.createEl("option", { value: "all", text: "All types" });
    this.getRelationTypes(this.result.relations).forEach((type2) => {
      typeSelect.createEl("option", { value: type2, text: type2 });
    });
    typeSelect.value = this.relationFilterType;
    typeSelect.onchange = () => {
      this.relationFilterType = typeSelect.value;
      this.render();
    };
    const sortSelect = controls.createEl("select", {
      cls: "story-engine-extract-select"
    });
    sortSelect.createEl("option", { value: "type", text: "Sort: Type" });
    sortSelect.createEl("option", { value: "status", text: "Sort: Status" });
    sortSelect.createEl("option", { value: "source", text: "Sort: Source" });
    sortSelect.createEl("option", { value: "target", text: "Sort: Target" });
    sortSelect.value = this.relationSort;
    sortSelect.onchange = () => {
      this.relationSort = sortSelect.value;
      this.render();
    };
  }
  getEntityTypes(entities) {
    const set3 = /* @__PURE__ */ new Set();
    entities.forEach((entity) => {
      if (entity.type) {
        set3.add(entity.type);
      }
    });
    return Array.from(set3).sort((a, b) => a.localeCompare(b));
  }
  getRelationTypes(relations) {
    const set3 = /* @__PURE__ */ new Set();
    relations.forEach((relation) => {
      if (relation.relation_type) {
        set3.add(relation.relation_type);
      }
    });
    return Array.from(set3).sort((a, b) => a.localeCompare(b));
  }
  filterAndSortEntities(entities) {
    const search = this.entitySearch.toLowerCase();
    let filtered = entities.filter((entity) => {
      var _a;
      if (this.entityFilterType !== "all" && entity.type !== this.entityFilterType) {
        return false;
      }
      if (!search)
        return true;
      return entity.name.toLowerCase().includes(search) || entity.type.toLowerCase().includes(search) || ((_a = entity.summary) != null ? _a : "").toLowerCase().includes(search);
    });
    const statusRank = (entity) => {
      if (entity.created)
        return 0;
      if (entity.found)
        return 1;
      return 2;
    };
    filtered = [...filtered].sort((a, b) => {
      switch (this.entitySort) {
        case "type":
          return a.type.localeCompare(b.type) || a.name.localeCompare(b.name);
        case "status":
          return statusRank(a) - statusRank(b) || a.name.localeCompare(b.name);
        default:
          return a.name.localeCompare(b.name);
      }
    });
    return filtered;
  }
  filterAndSortRelations(relations) {
    const search = this.relationSearch.toLowerCase();
    let filtered = relations.filter((relation) => {
      var _a, _b, _c, _d, _e;
      if (this.relationFilterType !== "all" && relation.relation_type !== this.relationFilterType) {
        return false;
      }
      if (!search)
        return true;
      const sourceLabel = ((_b = (_a = relation.source.name) != null ? _a : relation.source.ref) != null ? _b : "").toLowerCase();
      const targetLabel = ((_d = (_c = relation.target.name) != null ? _c : relation.target.ref) != null ? _d : "").toLowerCase();
      return relation.relation_type.toLowerCase().includes(search) || sourceLabel.includes(search) || targetLabel.includes(search) || relation.source.type.toLowerCase().includes(search) || relation.target.type.toLowerCase().includes(search) || ((_e = relation.summary) != null ? _e : "").toLowerCase().includes(search);
    });
    const statusRank = (relation) => {
      if (relation.status === "created")
        return 0;
      if (relation.status === "ready")
        return 1;
      if (relation.status === "pending_entities")
        return 2;
      return 3;
    };
    filtered = [...filtered].sort((a, b) => {
      switch (this.relationSort) {
        case "status":
          return statusRank(a) - statusRank(b) || a.relation_type.localeCompare(b.relation_type);
        case "source": {
          const aSource = a.source.name || a.source.ref;
          const bSource = b.source.name || b.source.ref;
          return aSource.localeCompare(bSource) || a.relation_type.localeCompare(b.relation_type);
        }
        case "target": {
          const aTarget = a.target.name || a.target.ref;
          const bTarget = b.target.name || b.target.ref;
          return aTarget.localeCompare(bTarget) || a.relation_type.localeCompare(b.relation_type);
        }
        default:
          return a.relation_type.localeCompare(b.relation_type);
      }
    });
    return filtered;
  }
  resolveRelationEntity(node) {
    if (!this.result) {
      return this.buildRelationEntity(node);
    }
    const existing = this.result.entities.find((entity) => {
      var _a;
      if (node.id && ((_a = entity.match) == null ? void 0 : _a.source_id) === node.id) {
        return true;
      }
      return entity.type === node.type && entity.name === node.name;
    });
    return existing != null ? existing : this.buildRelationEntity(node);
  }
  buildRelationEntity(node) {
    const hasId = !!(node.id && node.id.trim());
    return {
      type: node.type,
      name: node.name || node.ref,
      found: hasId,
      match: hasId ? {
        source_type: node.type,
        source_id: node.id,
        entity_name: node.name,
        similarity: 1,
        reason: "Relation match"
      } : void 0
    };
  }
  hasTempNode(node) {
    if (!node.id || !node.id.trim()) {
      return true;
    }
    if (node.id.startsWith("temp")) {
      return true;
    }
    return node.ref.startsWith("finding:");
  }
  async createPendingEntities(relation) {
    const nodes = [relation.source, relation.target];
    for (const node of nodes) {
      if (!this.hasTempNode(node)) {
        continue;
      }
      const entity = this.buildRelationEntity(node);
      const createdId = await this.createEntity(entity);
      if (createdId) {
        this.applyCreatedIdToRelation(relation, entity, createdId);
      }
    }
    this.render();
  }
  async createRelation(relation) {
    var _a, _b;
    if (!((_a = this.result) == null ? void 0 : _a.world_id)) {
      new import_obsidian18.Notice("World ID missing. Select a story or world first.", 4e3);
      return;
    }
    if (!relation.source.id || !relation.target.id) {
      new import_obsidian18.Notice("Create the related entities before creating the relation.", 4e3);
      return;
    }
    const created = await this.plugin.apiClient.createEntityRelation({
      world_id: this.result.world_id,
      source_type: relation.source.type,
      source_id: relation.source.id,
      target_type: relation.target.type,
      target_id: relation.target.id,
      relation_type: relation.relation_type,
      summary: relation.summary,
      create_mirror: (_b = relation.create_mirror) != null ? _b : false
    });
    relation.status = "created";
    relation.created_id = created.id;
    this.render();
    new import_obsidian18.Notice(`Relation created: ${relation.relation_type}`, 3e3);
  }
  applyCreatedIdToRelation(relation, entity, createdId) {
    const updateNode = (node) => {
      if (node.type !== entity.type)
        return false;
      if (entity.name && node.name && node.name !== entity.name)
        return false;
      node.id = createdId;
      node.name = entity.name;
      return true;
    };
    if (!updateNode(relation.source)) {
      updateNode(relation.target);
    }
    if (!this.hasTempNode(relation.source) && !this.hasTempNode(relation.target)) {
      relation.status = "ready";
    }
  }
  setActiveTab(tab) {
    this.activeTab = tab;
    this.pendingTabScroll = true;
    this.render();
  }
  applyPendingScroll() {
    if (!this.pendingTabScroll && this.pendingRelationScrollIndex === null) {
      return;
    }
    requestAnimationFrame(() => {
      if (this.pendingTabScroll) {
        const panel = this.contentRoot.querySelector(
          ".story-engine-extract-panel.is-active"
        );
        if (panel) {
          panel.scrollTop = 0;
          panel.scrollIntoView({ block: "start" });
        }
        this.pendingTabScroll = false;
      }
      if (this.pendingRelationScrollIndex !== null) {
        const selector = `.story-engine-extract-relations-entities[data-relation-index="${this.pendingRelationScrollIndex}"]`;
        const entityBlock = this.contentRoot.querySelector(selector);
        if (entityBlock) {
          entityBlock.scrollIntoView({ block: "start" });
        }
        this.pendingRelationScrollIndex = null;
      }
    });
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  apiUrl: "http://localhost:8080",
  llmGatewayUrl: "http://localhost:8081",
  apiKey: "",
  tenantId: "",
  tenantName: "",
  syncFolderPath: "Stories",
  autoVersionSnapshots: true,
  conflictResolution: "service",
  mode: "local",
  showHelpBox: true,
  localModeVideoUrl: "https://example.com/setup-video",
  autoSyncOnApiUpdates: true,
  autoPushOnFileBlur: true,
  sidebarPosition: "left"
};
var StoryEnginePlugin = class extends import_obsidian19.Plugin {
  constructor() {
    super(...arguments);
    this.extractResult = null;
    this.extractLogs = [];
    this.extractStatus = "idle";
    this.extractAbortController = null;
  }
  async onload() {
    var _a;
    await this.loadSettings();
    this.apiClient = new StoryEngineClient(
      this.settings.apiUrl,
      this.settings.apiKey,
      this.settings.tenantId || ""
    );
    this.apiClient.setMode(this.settings.mode || "local");
    this.apiClient.setAutoSyncOnApiUpdates(
      (_a = this.settings.autoSyncOnApiUpdates) != null ? _a : true
    );
    this.fileManager = new FileManager(
      this.app.vault,
      this.settings.syncFolderPath || "Stories"
    );
    this.syncService = new SyncService(
      this.apiClient,
      this.fileManager,
      this.settings,
      this.app
    );
    this.initializeAutoSyncManager();
    this.addSettingTab(new StoryEngineSettingTab(this.app, this));
    this.registerView(
      STORY_LIST_VIEW_TYPE,
      (leaf) => new StoryListView(leaf, this)
    );
    this.registerView(
      STORY_ENGINE_EXTRACT_VIEW_TYPE,
      (leaf) => new StoryEngineExtractView(leaf, this)
    );
    this.addRibbonIcon("book-open", "Story Engine", () => {
      this.activateView();
    });
    registerCommands(this);
    this.registerEvent(
      this.app.workspace.on("editor-menu", (menu, editor) => {
        const selection2 = editor.getSelection().trim();
        if (!selection2) {
          return;
        }
        menu.addItem((item) => {
          item.setTitle("Story Engine: Extract Entities and Relations");
          item.setIcon("search");
          item.onClick(() => {
            this.extractSelectionCommand(selection2, true);
          });
        });
        menu.addItem((item) => {
          item.setTitle("Story Engine: Extract Entities Only");
          item.setIcon("search");
          item.onClick(() => {
            this.extractSelectionCommand(selection2, false);
          });
        });
      })
    );
  }
  async onunload() {
    this.app.workspace.detachLeavesOfType(STORY_LIST_VIEW_TYPE);
    this.app.workspace.detachLeavesOfType(STORY_ENGINE_EXTRACT_VIEW_TYPE);
    if (this.syncService) {
      this.syncService.dispose();
    }
    if (this.autoSyncManager) {
      this.autoSyncManager.dispose();
      this.autoSyncManager = void 0;
    }
  }
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  async saveSettings() {
    var _a, _b;
    await this.saveData(this.settings);
    if (this.apiClient) {
      this.apiClient.setTenantId(this.settings.tenantId || "");
      this.apiClient.setMode(this.settings.mode || "local");
      this.apiClient.setAutoSyncOnApiUpdates(
        (_a = this.settings.autoSyncOnApiUpdates) != null ? _a : true
      );
    } else {
      this.apiClient = new StoryEngineClient(
        this.settings.apiUrl,
        this.settings.apiKey,
        this.settings.tenantId || ""
      );
      this.apiClient.setMode(this.settings.mode || "local");
      this.apiClient.setAutoSyncOnApiUpdates(
        (_b = this.settings.autoSyncOnApiUpdates) != null ? _b : true
      );
    }
    this.fileManager = new FileManager(
      this.app.vault,
      this.settings.syncFolderPath || "Stories"
    );
    if (this.syncService) {
      this.syncService.dispose();
    }
    this.syncService = new SyncService(
      this.apiClient,
      this.fileManager,
      this.settings,
      this.app
    );
    this.initializeAutoSyncManager();
  }
  initializeAutoSyncManager() {
    if (this.autoSyncManager) {
      this.autoSyncManager.dispose();
      this.autoSyncManager = void 0;
    }
    if (this.settings.autoPushOnFileBlur) {
      this.autoSyncManager = new AutoSyncManager(this);
    }
  }
  async createStoryCommand() {
    var _a;
    if (this.settings.mode === "remote") {
      const tenantId = (_a = this.settings.tenantId) == null ? void 0 : _a.trim();
      if (!tenantId) {
        new import_obsidian19.Notice("Please configure Tenant ID in settings", 5e3);
        return;
      }
      const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;
      if (!uuidRegex.test(tenantId)) {
        new import_obsidian19.Notice("Invalid Tenant ID format. Please check your settings.", 5e3);
        return;
      }
    }
    new CreateStoryModal(this.app, this, async (title, worldId, shouldSync) => {
      try {
        new import_obsidian19.Notice(`Creating story "${title}"...`);
        const story = await this.apiClient.createStory(title, worldId);
        new import_obsidian19.Notice(`Story "${title}" created successfully`);
        if (shouldSync) {
          try {
            new import_obsidian19.Notice(`Syncing story to Obsidian...`);
            await this.syncService.pullStory(story.id);
            new import_obsidian19.Notice(`Story synced to your vault!`);
          } catch (syncErr) {
            const syncErrorMessage = syncErr instanceof Error ? syncErr.message : "Failed to sync story";
            new import_obsidian19.Notice(`Story created but sync failed: ${syncErrorMessage}`, 5e3);
          }
        }
        const openView = this.app.workspace.getLeavesOfType(STORY_LIST_VIEW_TYPE)[0];
        if (openView) {
          const view = openView.view;
          await view.refresh();
          if (!shouldSync) {
            await view.showStoryDetails(story);
          }
        }
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to create story";
        new import_obsidian19.Notice(`Error: ${errorMessage}`, 5e3);
      }
    }).open();
  }
  async activateView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType(STORY_LIST_VIEW_TYPE)[0];
    if (!leaf) {
      const rightLeaf = workspace.getRightLeaf(false);
      if (!rightLeaf) {
        new import_obsidian19.Notice("Could not create view. Please try again.", 3e3);
        return;
      }
      leaf = rightLeaf;
      await leaf.setViewState({
        type: STORY_LIST_VIEW_TYPE,
        active: true
      });
    }
    workspace.revealLeaf(leaf);
  }
  async activateExtractView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType(STORY_ENGINE_EXTRACT_VIEW_TYPE)[0];
    if (!leaf) {
      leaf = workspace.getLeavesOfType(STORY_LIST_VIEW_TYPE)[0];
    }
    if (!leaf) {
      new import_obsidian19.Notice("Could not open extract view. Please try again.", 3e3);
      return;
    }
    await leaf.setViewState({
      type: STORY_ENGINE_EXTRACT_VIEW_TYPE,
      active: true
    });
    workspace.revealLeaf(leaf);
  }
  async getActiveWorldId() {
    var _a;
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      return null;
    }
    const fileContent = await this.app.vault.read(activeFile);
    const frontmatter = this.fileManager.parseFrontmatter(fileContent);
    const storyId = frontmatter.story_id || (activeFile.name === "story.md" ? frontmatter.id : "");
    if (!storyId) {
      return null;
    }
    const story = await this.apiClient.getStory(storyId);
    return (_a = story.world_id) != null ? _a : null;
  }
  async extractSelectionCommand(selection2, includeRelations = true) {
    var _a, _b, _c;
    const trimmedSelection = selection2.trim();
    if (!trimmedSelection) {
      new import_obsidian19.Notice(
        includeRelations ? "Select text to extract entities and relations" : "Select text to extract entities",
        3e3
      );
      return;
    }
    const defaultTypes = ["character", "location", "artefact", "faction", "event"];
    const config = await ExtractConfigModal.open(
      this.app,
      defaultTypes,
      includeRelations
    );
    if (!config) {
      return;
    }
    if (this.settings.mode !== "remote") {
      new import_obsidian19.Notice("Extraction requires the full remote version.", 5e3);
      return;
    }
    const tenantId = (_a = this.settings.tenantId) == null ? void 0 : _a.trim();
    if (!tenantId) {
      new import_obsidian19.Notice("Please configure Tenant ID in settings", 5e3);
      return;
    }
    const gatewayUrl = (_b = this.settings.llmGatewayUrl) == null ? void 0 : _b.trim();
    if (!gatewayUrl) {
      new import_obsidian19.Notice("Please configure LLM Gateway URL in settings", 5e3);
      return;
    }
    let worldId = null;
    try {
      worldId = await this.getActiveWorldId();
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to resolve story";
      new import_obsidian19.Notice(`Error: ${errorMessage}`, 5e3);
      return;
    }
    if (!worldId) {
      new import_obsidian19.Notice(
        "Open a synced story document before extracting entities.",
        5e3
      );
      return;
    }
    this.resetExtractState(trimmedSelection, worldId, config.includeRelations);
    await this.activateView();
    await this.activateExtractView();
    this.updateExtractViews();
    try {
      if ((_c = navigator == null ? void 0 : navigator.clipboard) == null ? void 0 : _c.writeText) {
        await navigator.clipboard.writeText(trimmedSelection);
      }
    } catch (e) {
    }
    new import_obsidian19.Notice("Starting extraction stream...", 3e3);
    await this.startExtractStream({
      tenantId,
      gatewayUrl,
      worldId,
      text: trimmedSelection,
      includeRelations: config.includeRelations,
      entityTypes: config.entityTypes
    });
  }
  updateExtractViews() {
    const listLeaf = this.app.workspace.getLeavesOfType(STORY_LIST_VIEW_TYPE)[0];
    if (listLeaf) {
      const view = listLeaf.view;
      if (view.viewMode === "list") {
        view.renderListContent();
      }
    }
    const extractLeaf = this.app.workspace.getLeavesOfType(STORY_ENGINE_EXTRACT_VIEW_TYPE)[0];
    if (extractLeaf) {
      const view = extractLeaf.view;
      view.setResult(this.extractResult);
      view.setLogs(this.extractLogs, this.extractStatus);
    }
  }
  resetExtractState(text, worldId, includeRelations = true) {
    this.cancelExtractStream();
    this.extractResult = {
      text,
      world_id: worldId,
      entities: [],
      relations: [],
      received_at: (/* @__PURE__ */ new Date()).toISOString(),
      include_relations: includeRelations
    };
    this.extractLogs = [];
    this.extractStatus = "running";
  }
  cancelExtractStream() {
    if (this.extractAbortController) {
      this.extractAbortController.abort();
      this.extractAbortController = null;
      this.extractStatus = "canceled";
      this.appendExtractLog({
        type: "client.cancel",
        message: "Extraction canceled by user."
      });
      this.updateExtractViews();
    }
  }
  appendExtractLog(event) {
    const timestamp = event.timestamp ? new Date(event.timestamp).toISOString() : (/* @__PURE__ */ new Date()).toISOString();
    this.extractLogs.push({
      id: `${timestamp}-${this.extractLogs.length}`,
      eventType: event.type,
      phase: event.phase,
      message: event.message,
      data: event.data,
      timestamp
    });
  }
  async startExtractStream(params) {
    const { tenantId, gatewayUrl, worldId, text, includeRelations, entityTypes } = params;
    const controller = new AbortController();
    this.extractAbortController = controller;
    this.appendExtractLog({
      type: "client.start",
      message: "Opening extraction stream."
    });
    this.updateExtractViews();
    try {
      const response = await fetch(
        `${gatewayUrl.replace(/\/$/, "")}/api/v1/entity-extract/stream`,
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "X-Tenant-ID": tenantId,
            ...this.settings.apiKey ? { Authorization: `Bearer ${this.settings.apiKey}` } : {}
          },
          body: JSON.stringify({
            text,
            world_id: worldId,
            include_relations: includeRelations,
            entity_types: entityTypes
          }),
          signal: controller.signal
        }
      );
      if (!response.ok) {
        let errorMessage = `HTTP ${response.status}: ${response.statusText}`;
        try {
          const errorBody = await response.json();
          if (errorBody == null ? void 0 : errorBody.error) {
            errorMessage = errorBody.error;
          }
        } catch (e) {
        }
        throw new Error(errorMessage);
      }
      if (!response.body) {
        throw new Error("No response stream available.");
      }
      const reader = response.body.getReader();
      const decoder = new TextDecoder("utf-8");
      let buffer = "";
      let currentEvent = "message";
      let dataLines = [];
      const flushEvent = () => {
        var _a, _b, _c, _d, _e;
        if (!dataLines.length)
          return;
        const rawData = dataLines.join("\n").trim();
        dataLines = [];
        if (!rawData)
          return;
        let parsed = null;
        try {
          parsed = JSON.parse(rawData);
        } catch (e) {
          this.appendExtractLog({
            type: "parse.error",
            message: "Failed to parse stream event payload.",
            data: { raw: rawData, event: currentEvent }
          });
          this.updateExtractViews();
          return;
        }
        if (!parsed.type) {
          parsed.type = currentEvent || "message";
        }
        if (parsed.type === "relation.error") {
          parsed.message = `\u274C ${parsed.message}`;
        } else if (parsed.type === "relation.success") {
          parsed.message = `\u2705 ${parsed.message}`;
        }
        this.appendExtractLog(parsed);
        if (parsed.type === "result_entities" && ((_a = parsed.data) == null ? void 0 : _a.entities)) {
          const entities = parsed.data.entities;
          if (this.extractResult) {
            this.extractResult.entities = entities != null ? entities : [];
            this.extractResult.received_at = (/* @__PURE__ */ new Date()).toISOString();
          }
          const foundCount = (_b = this.extractResult) == null ? void 0 : _b.entities.filter(
            (entity) => entity.found
          ).length;
          new import_obsidian19.Notice(
            `Entities extracted: ${foundCount != null ? foundCount : 0}/${(_d = (_c = this.extractResult) == null ? void 0 : _c.entities.length) != null ? _d : 0} matched`,
            4e3
          );
        }
        if (parsed.type === "result_relations" && ((_e = parsed.data) == null ? void 0 : _e.relations)) {
          const relations = parsed.data.relations;
          if (this.extractResult) {
            this.extractResult.relations = relations != null ? relations : [];
            this.extractResult.received_at = (/* @__PURE__ */ new Date()).toISOString();
          }
        }
        if (parsed.type === "error") {
          this.extractStatus = "error";
        }
        this.updateExtractViews();
      };
      while (true) {
        const { value, done } = await reader.read();
        if (done)
          break;
        buffer += decoder.decode(value, { stream: true });
        let lineEnd = buffer.indexOf("\n");
        while (lineEnd !== -1) {
          const line = buffer.slice(0, lineEnd).replace(/\r$/, "");
          buffer = buffer.slice(lineEnd + 1);
          lineEnd = buffer.indexOf("\n");
          if (!line) {
            flushEvent();
            currentEvent = "message";
            continue;
          }
          if (line.startsWith("event:")) {
            currentEvent = line.replace("event:", "").trim();
            continue;
          }
          if (line.startsWith("data:")) {
            dataLines.push(line.replace("data:", "").trim());
          }
        }
      }
      this.extractAbortController = null;
      if (this.extractStatus === "running") {
        this.extractStatus = "done";
      }
    } catch (err) {
      if (err instanceof DOMException && err.name === "AbortError") {
        return;
      }
      const errorMessage = err instanceof Error ? err.message : "Failed to extract entities";
      this.extractStatus = "error";
      this.appendExtractLog({
        type: "error",
        message: errorMessage
      });
      new import_obsidian19.Notice(`Error: ${errorMessage}`, 5e3);
      this.updateExtractViews();
    }
  }
  openSettings() {
    const setting = this.app.setting;
    if (setting) {
      setting.open();
      setTimeout(() => {
        setting.openTabById(this.manifest.id);
      }, 100);
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3N5bmMvYXBpVXBkYXRlTm90aWZpZXIudHMiLCAic3JjL2FwaS9jbGllbnQudHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9jb21tYW5kcy50cyIsICJzcmMvdmlld3MvU3RvcnlTeW5jTW9kYWwudHMiLCAic3JjL3ZpZXdzL0NyZWF0ZVN0b3J5TW9kYWwudHMiLCAic3JjL3ZpZXdzL0NyZWF0ZVdvcmxkTW9kYWwudHMiLCAic3JjL3ZpZXdzL0V4dHJhY3RDb25maWdNb2RhbC50cyIsICJzcmMvc3luYy9maWxlTWFuYWdlci50cyIsICJzcmMvc3luYy9zeW5jU2VydmljZS50cyIsICJzcmMvc3luYy9jb250ZW50QmxvY2tQYXJzZXIudHMiLCAic3JjL3ZpZXdzL21vZGFscy9Db25mbGljdE1vZGFsLnRzIiwgInNyYy9zeW5jL2F1dG9TeW5jTWFuYWdlci50cyIsICJzcmMvdmlld3MvU3RvcnlMaXN0Vmlldy50cyIsICJzcmMvdmlld3MvbW9kYWxzL0NoYXB0ZXJNb2RhbC50cyIsICJzcmMvdmlld3MvbW9kYWxzL1NjZW5lTW9kYWwudHMiLCAic3JjL3ZpZXdzL21vZGFscy9CZWF0TW9kYWwudHMiLCAic3JjL3ZpZXdzL21vZGFscy9Db250ZW50QmxvY2tNb2RhbC50cyIsICJzcmMvYXBpL3Vuc3BsYXNoLnRzIiwgInNyYy92aWV3cy9UaW1lbGluZU1vZGFsLnRzIiwgIm5vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvYXNjZW5kaW5nLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvZGVzY2VuZGluZy5qcyIsICJub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL2Jpc2VjdG9yLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvbnVtYmVyLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvYmlzZWN0LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvZXh0ZW50LmpzIiwgIm5vZGVfbW9kdWxlcy9pbnRlcm5tYXAvc3JjL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvdGlja3MuanMiLCAibm9kZV9tb2R1bGVzL2QzLWF4aXMvc3JjL2lkZW50aXR5LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1heGlzL3NyYy9heGlzLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1kaXNwYXRjaC9zcmMvZGlzcGF0Y2guanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvbmFtZXNwYWNlcy5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9uYW1lc3BhY2UuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvY3JlYXRvci5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rvci5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vc2VsZWN0LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL2FycmF5LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdG9yQWxsLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zZWxlY3RBbGwuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvbWF0Y2hlci5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vc2VsZWN0Q2hpbGQuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NlbGVjdENoaWxkcmVuLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9maWx0ZXIuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NwYXJzZS5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZW50ZXIuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvY29uc3RhbnQuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2RhdGEuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2V4aXQuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2pvaW4uanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL21lcmdlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9vcmRlci5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vc29ydC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vY2FsbC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vbm9kZXMuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL25vZGUuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NpemUuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2VtcHR5LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9lYWNoLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9hdHRyLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3dpbmRvdy5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vc3R5bGUuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3Byb3BlcnR5LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9jbGFzc2VkLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi90ZXh0LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9odG1sLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9yYWlzZS5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vbG93ZXIuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2FwcGVuZC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vaW5zZXJ0LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9yZW1vdmUuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2Nsb25lLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9kYXR1bS5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vb24uanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2Rpc3BhdGNoLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9pdGVyYXRvci5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1jb2xvci9zcmMvZGVmaW5lLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1jb2xvci9zcmMvY29sb3IuanMiLCAibm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9iYXNpcy5qcyIsICJub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2Jhc2lzQ2xvc2VkLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvY29uc3RhbnQuanMiLCAibm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9jb2xvci5qcyIsICJub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3JnYi5qcyIsICJub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL251bWJlckFycmF5LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvYXJyYXkuanMiLCAibm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9kYXRlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvbnVtYmVyLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvb2JqZWN0LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvc3RyaW5nLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvdmFsdWUuanMiLCAibm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9yb3VuZC5qcyIsICJub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3RyYW5zZm9ybS9kZWNvbXBvc2UuanMiLCAibm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy90cmFuc2Zvcm0vcGFyc2UuanMiLCAibm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy90cmFuc2Zvcm0vaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2QzLXRpbWVyL3NyYy90aW1lci5qcyIsICJub2RlX21vZHVsZXMvZDMtdGltZXIvc3JjL3RpbWVvdXQuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vc2NoZWR1bGUuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL2ludGVycnVwdC5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvc2VsZWN0aW9uL2ludGVycnVwdC5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi90d2Vlbi5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9pbnRlcnBvbGF0ZS5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9hdHRyLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL2F0dHJUd2Vlbi5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9kZWxheS5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9kdXJhdGlvbi5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9lYXNlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL2Vhc2VWYXJ5aW5nLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL2ZpbHRlci5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9tZXJnZS5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9vbi5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9yZW1vdmUuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vc2VsZWN0LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3NlbGVjdEFsbC5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9zZWxlY3Rpb24uanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vc3R5bGUuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vc3R5bGVUd2Vlbi5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi90ZXh0LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3RleHRUd2Vlbi5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi90cmFuc2l0aW9uLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL2VuZC5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvZDMtZWFzZS9zcmMvY3ViaWMuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3NlbGVjdGlvbi90cmFuc2l0aW9uLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy9zZWxlY3Rpb24vaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2QzLWJydXNoL3NyYy9icnVzaC5qcyIsICJub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9mb3JtYXREZWNpbWFsLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1mb3JtYXQvc3JjL2V4cG9uZW50LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1mb3JtYXQvc3JjL2Zvcm1hdEdyb3VwLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1mb3JtYXQvc3JjL2Zvcm1hdE51bWVyYWxzLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1mb3JtYXQvc3JjL2Zvcm1hdFNwZWNpZmllci5qcyIsICJub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9mb3JtYXRUcmltLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1mb3JtYXQvc3JjL2Zvcm1hdFByZWZpeEF1dG8uanMiLCAibm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvZm9ybWF0Um91bmRlZC5qcyIsICJub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9mb3JtYXRUeXBlcy5qcyIsICJub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9pZGVudGl0eS5qcyIsICJub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9sb2NhbGUuanMiLCAibm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvZGVmYXVsdExvY2FsZS5qcyIsICJub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9wcmVjaXNpb25GaXhlZC5qcyIsICJub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9wcmVjaXNpb25QcmVmaXguanMiLCAibm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvcHJlY2lzaW9uUm91bmQuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNjYWxlL3NyYy9pbml0LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zY2FsZS9zcmMvb3JkaW5hbC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2NhbGUvc3JjL2NvbnN0YW50LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zY2FsZS9zcmMvbnVtYmVyLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zY2FsZS9zcmMvY29udGludW91cy5qcyIsICJub2RlX21vZHVsZXMvZDMtc2NhbGUvc3JjL3RpY2tGb3JtYXQuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNjYWxlL3NyYy9saW5lYXIuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY29sb3JzLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2NhdGVnb3JpY2FsL2NhdGVnb3J5MTAuanMiLCAibm9kZV9tb2R1bGVzL2QzLXpvb20vc3JjL3RyYW5zZm9ybS5qcyIsICJzcmMvdmlld3MvQ2hhcmFjdGVyRGV0YWlsc1ZpZXcudHMiLCAic3JjL3ZpZXdzL1N0b3J5RW5naW5lRXh0cmFjdFZpZXcudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IE5vdGljZSwgUGx1Z2luIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQge1xuXHRFeHRyYWN0RW50aXR5UmVzdWx0LFxuXHRFeHRyYWN0TG9nRW50cnksXG5cdEV4dHJhY3RTdHJlYW1FdmVudCxcblx0U3RvcnlFbmdpbmVTZXR0aW5ncyxcbn0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IFN0b3J5RW5naW5lQ2xpZW50IH0gZnJvbSBcIi4vYXBpL2NsaWVudFwiO1xuaW1wb3J0IHsgU3RvcnlFbmdpbmVTZXR0aW5nVGFiIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcbmltcG9ydCB7IHJlZ2lzdGVyQ29tbWFuZHMgfSBmcm9tIFwiLi9jb21tYW5kc1wiO1xuaW1wb3J0IHsgU3RvcnlEZXRhaWxzTW9kYWwgfSBmcm9tIFwiLi92aWV3cy9TdG9yeURldGFpbHNNb2RhbFwiO1xuaW1wb3J0IHsgQ3JlYXRlU3RvcnlNb2RhbCB9IGZyb20gXCIuL3ZpZXdzL0NyZWF0ZVN0b3J5TW9kYWxcIjtcbmltcG9ydCB7IEV4dHJhY3RDb25maWdNb2RhbCB9IGZyb20gXCIuL3ZpZXdzL0V4dHJhY3RDb25maWdNb2RhbFwiO1xuaW1wb3J0IHsgRmlsZU1hbmFnZXIgfSBmcm9tIFwiLi9zeW5jL2ZpbGVNYW5hZ2VyXCI7XG5pbXBvcnQgeyBTeW5jU2VydmljZSB9IGZyb20gXCIuL3N5bmMvc3luY1NlcnZpY2VcIjtcbmltcG9ydCB7IEF1dG9TeW5jTWFuYWdlciB9IGZyb20gXCIuL3N5bmMvYXV0b1N5bmNNYW5hZ2VyXCI7XG5pbXBvcnQgeyBTdG9yeUxpc3RWaWV3LCBTVE9SWV9MSVNUX1ZJRVdfVFlQRSB9IGZyb20gXCIuL3ZpZXdzL1N0b3J5TGlzdFZpZXdcIjtcbmltcG9ydCB7XG5cdFN0b3J5RW5naW5lRXh0cmFjdFZpZXcsXG5cdFNUT1JZX0VOR0lORV9FWFRSQUNUX1ZJRVdfVFlQRSxcbn0gZnJvbSBcIi4vdmlld3MvU3RvcnlFbmdpbmVFeHRyYWN0Vmlld1wiO1xuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBTdG9yeUVuZ2luZVNldHRpbmdzID0ge1xuXHRhcGlVcmw6IFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwXCIsXG5cdGxsbUdhdGV3YXlVcmw6IFwiaHR0cDovL2xvY2FsaG9zdDo4MDgxXCIsXG5cdGFwaUtleTogXCJcIixcblx0dGVuYW50SWQ6IFwiXCIsXG5cdHRlbmFudE5hbWU6IFwiXCIsXG5cdHN5bmNGb2xkZXJQYXRoOiBcIlN0b3JpZXNcIixcblx0YXV0b1ZlcnNpb25TbmFwc2hvdHM6IHRydWUsXG5cdGNvbmZsaWN0UmVzb2x1dGlvbjogXCJzZXJ2aWNlXCIsXG5cdG1vZGU6IFwibG9jYWxcIixcblx0c2hvd0hlbHBCb3g6IHRydWUsXG5cdGxvY2FsTW9kZVZpZGVvVXJsOiBcImh0dHBzOi8vZXhhbXBsZS5jb20vc2V0dXAtdmlkZW9cIixcblx0YXV0b1N5bmNPbkFwaVVwZGF0ZXM6IHRydWUsXG5cdGF1dG9QdXNoT25GaWxlQmx1cjogdHJ1ZSxcblx0c2lkZWJhclBvc2l0aW9uOiBcImxlZnRcIixcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0b3J5RW5naW5lUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3MhOiBTdG9yeUVuZ2luZVNldHRpbmdzO1xuXHRhcGlDbGllbnQhOiBTdG9yeUVuZ2luZUNsaWVudDtcblx0ZmlsZU1hbmFnZXIhOiBGaWxlTWFuYWdlcjtcblx0c3luY1NlcnZpY2UhOiBTeW5jU2VydmljZTtcblx0cHJpdmF0ZSBhdXRvU3luY01hbmFnZXI/OiBBdXRvU3luY01hbmFnZXI7XG5cdGV4dHJhY3RSZXN1bHQ6IEV4dHJhY3RFbnRpdHlSZXN1bHQgfCBudWxsID0gbnVsbDtcblx0ZXh0cmFjdExvZ3M6IEV4dHJhY3RMb2dFbnRyeVtdID0gW107XG5cdGV4dHJhY3RTdGF0dXM6IFwiaWRsZVwiIHwgXCJydW5uaW5nXCIgfCBcImRvbmVcIiB8IFwiZXJyb3JcIiB8IFwiY2FuY2VsZWRcIiA9IFwiaWRsZVwiO1xuXHRwcml2YXRlIGV4dHJhY3RBYm9ydENvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlciB8IG51bGwgPSBudWxsO1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0dGhpcy5hcGlDbGllbnQgPSBuZXcgU3RvcnlFbmdpbmVDbGllbnQoXG5cdFx0XHR0aGlzLnNldHRpbmdzLmFwaVVybCxcblx0XHRcdHRoaXMuc2V0dGluZ3MuYXBpS2V5LFxuXHRcdFx0dGhpcy5zZXR0aW5ncy50ZW5hbnRJZCB8fCBcIlwiXG5cdFx0KTtcblx0XHR0aGlzLmFwaUNsaWVudC5zZXRNb2RlKHRoaXMuc2V0dGluZ3MubW9kZSB8fCBcImxvY2FsXCIpO1xuXHRcdHRoaXMuYXBpQ2xpZW50LnNldEF1dG9TeW5jT25BcGlVcGRhdGVzKFxuXHRcdFx0dGhpcy5zZXR0aW5ncy5hdXRvU3luY09uQXBpVXBkYXRlcyA/PyB0cnVlXG5cdFx0KTtcblxuXHRcdHRoaXMuZmlsZU1hbmFnZXIgPSBuZXcgRmlsZU1hbmFnZXIoXG5cdFx0XHR0aGlzLmFwcC52YXVsdCxcblx0XHRcdHRoaXMuc2V0dGluZ3Muc3luY0ZvbGRlclBhdGggfHwgXCJTdG9yaWVzXCJcblx0XHQpO1xuXG5cdFx0dGhpcy5zeW5jU2VydmljZSA9IG5ldyBTeW5jU2VydmljZShcblx0XHRcdHRoaXMuYXBpQ2xpZW50LFxuXHRcdFx0dGhpcy5maWxlTWFuYWdlcixcblx0XHRcdHRoaXMuc2V0dGluZ3MsXG5cdFx0XHR0aGlzLmFwcFxuXHRcdCk7XG5cdFx0dGhpcy5pbml0aWFsaXplQXV0b1N5bmNNYW5hZ2VyKCk7XG5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFN0b3J5RW5naW5lU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG5cdFx0Ly8gUmVnaXN0ZXIgdGhlIHN0b3J5IGxpc3Qgdmlld1xuXHRcdHRoaXMucmVnaXN0ZXJWaWV3KFxuXHRcdFx0U1RPUllfTElTVF9WSUVXX1RZUEUsXG5cdFx0XHQobGVhZikgPT4gbmV3IFN0b3J5TGlzdFZpZXcobGVhZiwgdGhpcylcblx0XHQpO1xuXG5cdFx0dGhpcy5yZWdpc3RlclZpZXcoXG5cdFx0XHRTVE9SWV9FTkdJTkVfRVhUUkFDVF9WSUVXX1RZUEUsXG5cdFx0XHQobGVhZikgPT4gbmV3IFN0b3J5RW5naW5lRXh0cmFjdFZpZXcobGVhZiwgdGhpcylcblx0XHQpO1xuXG5cdFx0Ly8gQWRkIHJpYmJvbiBpY29uIHRvIG9wZW4gdGhlIHZpZXdcblx0XHR0aGlzLmFkZFJpYmJvbkljb24oXCJib29rLW9wZW5cIiwgXCJTdG9yeSBFbmdpbmVcIiwgKCkgPT4ge1xuXHRcdFx0dGhpcy5hY3RpdmF0ZVZpZXcoKTtcblx0XHR9KTtcblxuXHRcdHJlZ2lzdGVyQ29tbWFuZHModGhpcyk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJlZGl0b3ItbWVudVwiLCAobWVudSwgZWRpdG9yKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKS50cmltKCk7XG5cdFx0XHRcdGlmICghc2VsZWN0aW9uKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG5cdFx0XHRcdFx0aXRlbS5zZXRUaXRsZShcIlN0b3J5IEVuZ2luZTogRXh0cmFjdCBFbnRpdGllcyBhbmQgUmVsYXRpb25zXCIpO1xuXHRcdFx0XHRcdGl0ZW0uc2V0SWNvbihcInNlYXJjaFwiKTtcblx0XHRcdFx0XHRpdGVtLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5leHRyYWN0U2VsZWN0aW9uQ29tbWFuZChzZWxlY3Rpb24sIHRydWUpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKFwiU3RvcnkgRW5naW5lOiBFeHRyYWN0IEVudGl0aWVzIE9ubHlcIik7XG5cdFx0XHRcdFx0aXRlbS5zZXRJY29uKFwic2VhcmNoXCIpO1xuXHRcdFx0XHRcdGl0ZW0ub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmV4dHJhY3RTZWxlY3Rpb25Db21tYW5kKHNlbGVjdGlvbiwgZmFsc2UpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pXG5cdFx0KTtcblx0fVxuXG5cdGFzeW5jIG9udW5sb2FkKCkge1xuXHRcdC8vIERldGFjaCBhbGwgbGVhdmVzIG9mIHRoZSBzdG9yeSBsaXN0IHZpZXdcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFNUT1JZX0xJU1RfVklFV19UWVBFKTtcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFNUT1JZX0VOR0lORV9FWFRSQUNUX1ZJRVdfVFlQRSk7XG5cdFx0aWYgKHRoaXMuc3luY1NlcnZpY2UpIHtcblx0XHRcdHRoaXMuc3luY1NlcnZpY2UuZGlzcG9zZSgpO1xuXHRcdH1cblx0XHRpZiAodGhpcy5hdXRvU3luY01hbmFnZXIpIHtcblx0XHRcdHRoaXMuYXV0b1N5bmNNYW5hZ2VyLmRpc3Bvc2UoKTtcblx0XHRcdHRoaXMuYXV0b1N5bmNNYW5hZ2VyID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihcblx0XHRcdHt9LFxuXHRcdFx0REVGQVVMVF9TRVRUSU5HUyxcblx0XHRcdGF3YWl0IHRoaXMubG9hZERhdGEoKVxuXHRcdCk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0XHQvLyBVcGRhdGUgQVBJIGNsaWVudCB3aGVuIHNldHRpbmdzIGNoYW5nZVxuXHRcdGlmICh0aGlzLmFwaUNsaWVudCkge1xuXHRcdFx0dGhpcy5hcGlDbGllbnQuc2V0VGVuYW50SWQodGhpcy5zZXR0aW5ncy50ZW5hbnRJZCB8fCBcIlwiKTtcblx0XHRcdHRoaXMuYXBpQ2xpZW50LnNldE1vZGUodGhpcy5zZXR0aW5ncy5tb2RlIHx8IFwibG9jYWxcIik7XG5cdFx0XHR0aGlzLmFwaUNsaWVudC5zZXRBdXRvU3luY09uQXBpVXBkYXRlcyhcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5hdXRvU3luY09uQXBpVXBkYXRlcyA/PyB0cnVlXG5cdFx0XHQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmFwaUNsaWVudCA9IG5ldyBTdG9yeUVuZ2luZUNsaWVudChcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5hcGlVcmwsXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuYXBpS2V5LFxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLnRlbmFudElkIHx8IFwiXCJcblx0XHRcdCk7XG5cdFx0XHR0aGlzLmFwaUNsaWVudC5zZXRNb2RlKHRoaXMuc2V0dGluZ3MubW9kZSB8fCBcImxvY2FsXCIpO1xuXHRcdFx0dGhpcy5hcGlDbGllbnQuc2V0QXV0b1N5bmNPbkFwaVVwZGF0ZXMoXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuYXV0b1N5bmNPbkFwaVVwZGF0ZXMgPz8gdHJ1ZVxuXHRcdFx0KTtcblx0XHR9XG5cdFx0Ly8gVXBkYXRlIGZpbGUgbWFuYWdlciBiYXNlIHBhdGhcblx0XHR0aGlzLmZpbGVNYW5hZ2VyID0gbmV3IEZpbGVNYW5hZ2VyKFxuXHRcdFx0dGhpcy5hcHAudmF1bHQsXG5cdFx0XHR0aGlzLnNldHRpbmdzLnN5bmNGb2xkZXJQYXRoIHx8IFwiU3Rvcmllc1wiXG5cdFx0KTtcblx0XHQvLyBVcGRhdGUgc3luYyBzZXJ2aWNlXG5cdFx0aWYgKHRoaXMuc3luY1NlcnZpY2UpIHtcblx0XHRcdHRoaXMuc3luY1NlcnZpY2UuZGlzcG9zZSgpO1xuXHRcdH1cblx0XHR0aGlzLnN5bmNTZXJ2aWNlID0gbmV3IFN5bmNTZXJ2aWNlKFxuXHRcdFx0dGhpcy5hcGlDbGllbnQsXG5cdFx0XHR0aGlzLmZpbGVNYW5hZ2VyLFxuXHRcdFx0dGhpcy5zZXR0aW5ncyxcblx0XHRcdHRoaXMuYXBwXG5cdFx0KTtcblx0XHR0aGlzLmluaXRpYWxpemVBdXRvU3luY01hbmFnZXIoKTtcblx0fVxuXG5cdHByaXZhdGUgaW5pdGlhbGl6ZUF1dG9TeW5jTWFuYWdlcigpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5hdXRvU3luY01hbmFnZXIpIHtcblx0XHRcdHRoaXMuYXV0b1N5bmNNYW5hZ2VyLmRpc3Bvc2UoKTtcblx0XHRcdHRoaXMuYXV0b1N5bmNNYW5hZ2VyID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmF1dG9QdXNoT25GaWxlQmx1cikge1xuXHRcdFx0dGhpcy5hdXRvU3luY01hbmFnZXIgPSBuZXcgQXV0b1N5bmNNYW5hZ2VyKHRoaXMpO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGNyZWF0ZVN0b3J5Q29tbWFuZCgpIHtcblx0XHQvLyBWYWxpZGF0ZSB0ZW5hbnQgSUQgb25seSBpbiByZW1vdGUgbW9kZVxuXHRcdGlmICh0aGlzLnNldHRpbmdzLm1vZGUgPT09IFwicmVtb3RlXCIpIHtcblx0XHRcdGNvbnN0IHRlbmFudElkID0gdGhpcy5zZXR0aW5ncy50ZW5hbnRJZD8udHJpbSgpO1xuXHRcdFx0aWYgKCF0ZW5hbnRJZCkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiUGxlYXNlIGNvbmZpZ3VyZSBUZW5hbnQgSUQgaW4gc2V0dGluZ3NcIiwgNTAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQmFzaWMgVVVJRCBmb3JtYXQgdmFsaWRhdGlvblxuXHRcdFx0Y29uc3QgdXVpZFJlZ2V4ID0gL15bMC05YS1mXXs4fS1bMC05YS1mXXs0fS1bMC05YS1mXXs0fS1bMC05YS1mXXs0fS1bMC05YS1mXXsxMn0kL2k7XG5cdFx0XHRpZiAoIXV1aWRSZWdleC50ZXN0KHRlbmFudElkKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiSW52YWxpZCBUZW5hbnQgSUQgZm9ybWF0LiBQbGVhc2UgY2hlY2sgeW91ciBzZXR0aW5ncy5cIiwgNTAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBPcGVuIG1vZGFsIHRvIGdldCB0aXRsZSwgd29ybGQsIGFuZCBzeW5jIHByZWZlcmVuY2Vcblx0XHRuZXcgQ3JlYXRlU3RvcnlNb2RhbCh0aGlzLmFwcCwgdGhpcywgYXN5bmMgKHRpdGxlOiBzdHJpbmcsIHdvcmxkSWQ6IHN0cmluZyB8IHVuZGVmaW5lZCwgc2hvdWxkU3luYzogYm9vbGVhbikgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0bmV3IE5vdGljZShgQ3JlYXRpbmcgc3RvcnkgXCIke3RpdGxlfVwiLi4uYCk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zdCBzdG9yeSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZVN0b3J5KHRpdGxlLCB3b3JsZElkKTtcblx0XHRcdFx0XG5cdFx0XHRcdG5ldyBOb3RpY2UoYFN0b3J5IFwiJHt0aXRsZX1cIiBjcmVhdGVkIHN1Y2Nlc3NmdWxseWApO1xuXG5cdFx0XHRcdC8vIFN5bmMgdG8gT2JzaWRpYW4gaWYgcmVxdWVzdGVkXG5cdFx0XHRcdGlmIChzaG91bGRTeW5jKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYFN5bmNpbmcgc3RvcnkgdG8gT2JzaWRpYW4uLi5gKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc3luY1NlcnZpY2UucHVsbFN0b3J5KHN0b3J5LmlkKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYFN0b3J5IHN5bmNlZCB0byB5b3VyIHZhdWx0IWApO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKHN5bmNFcnIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHN5bmNFcnJvck1lc3NhZ2UgPSBzeW5jRXJyIGluc3RhbmNlb2YgRXJyb3IgXG5cdFx0XHRcdFx0XHRcdD8gc3luY0Vyci5tZXNzYWdlIFxuXHRcdFx0XHRcdFx0XHQ6IFwiRmFpbGVkIHRvIHN5bmMgc3RvcnlcIjtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYFN0b3J5IGNyZWF0ZWQgYnV0IHN5bmMgZmFpbGVkOiAke3N5bmNFcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVXBkYXRlIHRoZSB2aWV3IGlmIGl0J3Mgb3BlblxuXHRcdFx0XHRjb25zdCBvcGVuVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoU1RPUllfTElTVF9WSUVXX1RZUEUpWzBdO1xuXHRcdFx0XHRpZiAob3BlblZpZXcpIHtcblx0XHRcdFx0XHRjb25zdCB2aWV3ID0gb3BlblZpZXcudmlldyBhcyBTdG9yeUxpc3RWaWV3O1xuXHRcdFx0XHRcdGF3YWl0IHZpZXcucmVmcmVzaCgpO1xuXHRcdFx0XHRcdGlmICghc2hvdWxkU3luYykge1xuXHRcdFx0XHRcdFx0Ly8gU2hvdyBkZXRhaWxzIGluIHRoZSB2aWV3XG5cdFx0XHRcdFx0XHRhd2FpdCB2aWV3LnNob3dTdG9yeURldGFpbHMoc3RvcnkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBjcmVhdGUgc3RvcnlcIjtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH0pLm9wZW4oKTtcblx0fVxuXG5cdGFzeW5jIGFjdGl2YXRlVmlldygpIHtcblx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG5cblx0XHRsZXQgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoU1RPUllfTElTVF9WSUVXX1RZUEUpWzBdO1xuXG5cdFx0aWYgKCFsZWFmKSB7XG5cdFx0XHQvLyBDcmVhdGUgbmV3IGxlYWYgaW4gdGhlIHJpZ2h0IHBhbmVsXG5cdFx0XHRjb25zdCByaWdodExlYWYgPSB3b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcblx0XHRcdGlmICghcmlnaHRMZWFmKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJDb3VsZCBub3QgY3JlYXRlIHZpZXcuIFBsZWFzZSB0cnkgYWdhaW4uXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRsZWFmID0gcmlnaHRMZWFmO1xuXHRcdFx0YXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xuXHRcdFx0XHR0eXBlOiBTVE9SWV9MSVNUX1ZJRVdfVFlQRSxcblx0XHRcdFx0YWN0aXZlOiB0cnVlLFxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0d29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG5cdH1cblxuXHRhc3luYyBhY3RpdmF0ZUV4dHJhY3RWaWV3KCkge1xuXHRcdGNvbnN0IHsgd29ya3NwYWNlIH0gPSB0aGlzLmFwcDtcblxuXHRcdGxldCBsZWFmID0gd29ya3NwYWNlLmdldExlYXZlc09mVHlwZShTVE9SWV9FTkdJTkVfRVhUUkFDVF9WSUVXX1RZUEUpWzBdO1xuXG5cdFx0aWYgKCFsZWFmKSB7XG5cdFx0XHRsZWFmID0gd29ya3NwYWNlLmdldExlYXZlc09mVHlwZShTVE9SWV9MSVNUX1ZJRVdfVFlQRSlbMF07XG5cdFx0fVxuXG5cdFx0aWYgKCFsZWFmKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiQ291bGQgbm90IG9wZW4gZXh0cmFjdCB2aWV3LiBQbGVhc2UgdHJ5IGFnYWluLlwiLCAzMDAwKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7XG5cdFx0XHR0eXBlOiBTVE9SWV9FTkdJTkVfRVhUUkFDVF9WSUVXX1RZUEUsXG5cdFx0XHRhY3RpdmU6IHRydWUsXG5cdFx0fSk7XG5cblx0XHR3b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZ2V0QWN0aXZlV29ybGRJZCgpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRpZiAoIWFjdGl2ZUZpbGUpIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMuZmlsZU1hbmFnZXIucGFyc2VGcm9udG1hdHRlcihmaWxlQ29udGVudCk7XG5cdFx0Y29uc3Qgc3RvcnlJZCA9XG5cdFx0XHRmcm9udG1hdHRlci5zdG9yeV9pZCB8fFxuXHRcdFx0KGFjdGl2ZUZpbGUubmFtZSA9PT0gXCJzdG9yeS5tZFwiID8gZnJvbnRtYXR0ZXIuaWQgOiBcIlwiKTtcblxuXHRcdGlmICghc3RvcnlJZCkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3RvcnkgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRTdG9yeShzdG9yeUlkKTtcblx0XHRyZXR1cm4gc3Rvcnkud29ybGRfaWQgPz8gbnVsbDtcblx0fVxuXG5cdGFzeW5jIGV4dHJhY3RTZWxlY3Rpb25Db21tYW5kKHNlbGVjdGlvbjogc3RyaW5nLCBpbmNsdWRlUmVsYXRpb25zID0gdHJ1ZSkge1xuXHRcdGNvbnN0IHRyaW1tZWRTZWxlY3Rpb24gPSBzZWxlY3Rpb24udHJpbSgpO1xuXHRcdGlmICghdHJpbW1lZFNlbGVjdGlvbikge1xuXHRcdFx0bmV3IE5vdGljZShcblx0XHRcdFx0aW5jbHVkZVJlbGF0aW9uc1xuXHRcdFx0XHRcdD8gXCJTZWxlY3QgdGV4dCB0byBleHRyYWN0IGVudGl0aWVzIGFuZCByZWxhdGlvbnNcIlxuXHRcdFx0XHRcdDogXCJTZWxlY3QgdGV4dCB0byBleHRyYWN0IGVudGl0aWVzXCIsXG5cdFx0XHRcdDMwMDBcblx0XHRcdCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgZGVmYXVsdFR5cGVzID0gW1wiY2hhcmFjdGVyXCIsIFwibG9jYXRpb25cIiwgXCJhcnRlZmFjdFwiLCBcImZhY3Rpb25cIiwgXCJldmVudFwiXTtcblx0XHRjb25zdCBjb25maWcgPSBhd2FpdCBFeHRyYWN0Q29uZmlnTW9kYWwub3Blbihcblx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0ZGVmYXVsdFR5cGVzLFxuXHRcdFx0aW5jbHVkZVJlbGF0aW9uc1xuXHRcdCk7XG5cdFx0aWYgKCFjb25maWcpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5zZXR0aW5ncy5tb2RlICE9PSBcInJlbW90ZVwiKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiRXh0cmFjdGlvbiByZXF1aXJlcyB0aGUgZnVsbCByZW1vdGUgdmVyc2lvbi5cIiwgNTAwMCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgdGVuYW50SWQgPSB0aGlzLnNldHRpbmdzLnRlbmFudElkPy50cmltKCk7XG5cdFx0aWYgKCF0ZW5hbnRJZCkge1xuXHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBjb25maWd1cmUgVGVuYW50IElEIGluIHNldHRpbmdzXCIsIDUwMDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGdhdGV3YXlVcmwgPSB0aGlzLnNldHRpbmdzLmxsbUdhdGV3YXlVcmw/LnRyaW0oKTtcblx0XHRpZiAoIWdhdGV3YXlVcmwpIHtcblx0XHRcdG5ldyBOb3RpY2UoXCJQbGVhc2UgY29uZmlndXJlIExMTSBHYXRld2F5IFVSTCBpbiBzZXR0aW5nc1wiLCA1MDAwKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRsZXQgd29ybGRJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cdFx0dHJ5IHtcblx0XHRcdHdvcmxkSWQgPSBhd2FpdCB0aGlzLmdldEFjdGl2ZVdvcmxkSWQoKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9XG5cdFx0XHRcdGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byByZXNvbHZlIHN0b3J5XCI7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCF3b3JsZElkKSB7XG5cdFx0XHRuZXcgTm90aWNlKFxuXHRcdFx0XHRcIk9wZW4gYSBzeW5jZWQgc3RvcnkgZG9jdW1lbnQgYmVmb3JlIGV4dHJhY3RpbmcgZW50aXRpZXMuXCIsXG5cdFx0XHRcdDUwMDBcblx0XHRcdCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5yZXNldEV4dHJhY3RTdGF0ZSh0cmltbWVkU2VsZWN0aW9uLCB3b3JsZElkLCBjb25maWcuaW5jbHVkZVJlbGF0aW9ucyk7XG5cdFx0YXdhaXQgdGhpcy5hY3RpdmF0ZVZpZXcoKTtcblx0XHRhd2FpdCB0aGlzLmFjdGl2YXRlRXh0cmFjdFZpZXcoKTtcblx0XHR0aGlzLnVwZGF0ZUV4dHJhY3RWaWV3cygpO1xuXG5cdFx0dHJ5IHtcblx0XHRcdGlmIChuYXZpZ2F0b3I/LmNsaXBib2FyZD8ud3JpdGVUZXh0KSB7XG5cdFx0XHRcdGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRyaW1tZWRTZWxlY3Rpb24pO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2gge1xuXHRcdFx0Ly8gQ2xpcGJvYXJkIGlzIG9wdGlvbmFsOyBpZ25vcmUgZmFpbHVyZXMuXG5cdFx0fVxuXG5cdFx0bmV3IE5vdGljZShcIlN0YXJ0aW5nIGV4dHJhY3Rpb24gc3RyZWFtLi4uXCIsIDMwMDApO1xuXHRcdGF3YWl0IHRoaXMuc3RhcnRFeHRyYWN0U3RyZWFtKHtcblx0XHRcdHRlbmFudElkLFxuXHRcdFx0Z2F0ZXdheVVybCxcblx0XHRcdHdvcmxkSWQsXG5cdFx0XHR0ZXh0OiB0cmltbWVkU2VsZWN0aW9uLFxuXHRcdFx0aW5jbHVkZVJlbGF0aW9uczogY29uZmlnLmluY2x1ZGVSZWxhdGlvbnMsXG5cdFx0XHRlbnRpdHlUeXBlczogY29uZmlnLmVudGl0eVR5cGVzLFxuXHRcdH0pO1xuXHR9XG5cblx0dXBkYXRlRXh0cmFjdFZpZXdzKCkge1xuXHRcdGNvbnN0IGxpc3RMZWFmID1cblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoU1RPUllfTElTVF9WSUVXX1RZUEUpWzBdO1xuXHRcdGlmIChsaXN0TGVhZikge1xuXHRcdFx0Y29uc3QgdmlldyA9IGxpc3RMZWFmLnZpZXcgYXMgU3RvcnlMaXN0Vmlldztcblx0XHRcdGlmICh2aWV3LnZpZXdNb2RlID09PSBcImxpc3RcIikge1xuXHRcdFx0XHR2aWV3LnJlbmRlckxpc3RDb250ZW50KCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3QgZXh0cmFjdExlYWYgPVxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShTVE9SWV9FTkdJTkVfRVhUUkFDVF9WSUVXX1RZUEUpWzBdO1xuXHRcdGlmIChleHRyYWN0TGVhZikge1xuXHRcdFx0Y29uc3QgdmlldyA9IGV4dHJhY3RMZWFmLnZpZXcgYXMgU3RvcnlFbmdpbmVFeHRyYWN0Vmlldztcblx0XHRcdHZpZXcuc2V0UmVzdWx0KHRoaXMuZXh0cmFjdFJlc3VsdCk7XG5cdFx0XHR2aWV3LnNldExvZ3ModGhpcy5leHRyYWN0TG9ncywgdGhpcy5leHRyYWN0U3RhdHVzKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHJlc2V0RXh0cmFjdFN0YXRlKFxuXHRcdHRleHQ6IHN0cmluZyxcblx0XHR3b3JsZElkOiBzdHJpbmcsXG5cdFx0aW5jbHVkZVJlbGF0aW9ucyA9IHRydWVcblx0KSB7XG5cdFx0dGhpcy5jYW5jZWxFeHRyYWN0U3RyZWFtKCk7XG5cdFx0dGhpcy5leHRyYWN0UmVzdWx0ID0ge1xuXHRcdFx0dGV4dCxcblx0XHRcdHdvcmxkX2lkOiB3b3JsZElkLFxuXHRcdFx0ZW50aXRpZXM6IFtdLFxuXHRcdFx0cmVsYXRpb25zOiBbXSxcblx0XHRcdHJlY2VpdmVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG5cdFx0XHRpbmNsdWRlX3JlbGF0aW9uczogaW5jbHVkZVJlbGF0aW9ucyxcblx0XHR9O1xuXHRcdHRoaXMuZXh0cmFjdExvZ3MgPSBbXTtcblx0XHR0aGlzLmV4dHJhY3RTdGF0dXMgPSBcInJ1bm5pbmdcIjtcblx0fVxuXG5cdGNhbmNlbEV4dHJhY3RTdHJlYW0oKSB7XG5cdFx0aWYgKHRoaXMuZXh0cmFjdEFib3J0Q29udHJvbGxlcikge1xuXHRcdFx0dGhpcy5leHRyYWN0QWJvcnRDb250cm9sbGVyLmFib3J0KCk7XG5cdFx0XHR0aGlzLmV4dHJhY3RBYm9ydENvbnRyb2xsZXIgPSBudWxsO1xuXHRcdFx0dGhpcy5leHRyYWN0U3RhdHVzID0gXCJjYW5jZWxlZFwiO1xuXHRcdFx0dGhpcy5hcHBlbmRFeHRyYWN0TG9nKHtcblx0XHRcdFx0dHlwZTogXCJjbGllbnQuY2FuY2VsXCIsXG5cdFx0XHRcdG1lc3NhZ2U6IFwiRXh0cmFjdGlvbiBjYW5jZWxlZCBieSB1c2VyLlwiLFxuXHRcdFx0fSk7XG5cdFx0XHR0aGlzLnVwZGF0ZUV4dHJhY3RWaWV3cygpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXBwZW5kRXh0cmFjdExvZyhldmVudDogRXh0cmFjdFN0cmVhbUV2ZW50KSB7XG5cdFx0Y29uc3QgdGltZXN0YW1wID0gZXZlbnQudGltZXN0YW1wXG5cdFx0XHQ/IG5ldyBEYXRlKGV2ZW50LnRpbWVzdGFtcCkudG9JU09TdHJpbmcoKVxuXHRcdFx0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG5cdFx0dGhpcy5leHRyYWN0TG9ncy5wdXNoKHtcblx0XHRcdGlkOiBgJHt0aW1lc3RhbXB9LSR7dGhpcy5leHRyYWN0TG9ncy5sZW5ndGh9YCxcblx0XHRcdGV2ZW50VHlwZTogZXZlbnQudHlwZSxcblx0XHRcdHBoYXNlOiBldmVudC5waGFzZSxcblx0XHRcdG1lc3NhZ2U6IGV2ZW50Lm1lc3NhZ2UsXG5cdFx0XHRkYXRhOiBldmVudC5kYXRhLFxuXHRcdFx0dGltZXN0YW1wLFxuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBzdGFydEV4dHJhY3RTdHJlYW0ocGFyYW1zOiB7XG5cdFx0dGVuYW50SWQ6IHN0cmluZztcblx0XHRnYXRld2F5VXJsOiBzdHJpbmc7XG5cdFx0d29ybGRJZDogc3RyaW5nO1xuXHRcdHRleHQ6IHN0cmluZztcblx0XHRpbmNsdWRlUmVsYXRpb25zOiBib29sZWFuO1xuXHRcdGVudGl0eVR5cGVzOiBzdHJpbmdbXTtcblx0fSkge1xuXHRcdGNvbnN0IHsgdGVuYW50SWQsIGdhdGV3YXlVcmwsIHdvcmxkSWQsIHRleHQsIGluY2x1ZGVSZWxhdGlvbnMsIGVudGl0eVR5cGVzIH0gPVxuXHRcdFx0cGFyYW1zO1xuXHRcdGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cdFx0dGhpcy5leHRyYWN0QWJvcnRDb250cm9sbGVyID0gY29udHJvbGxlcjtcblx0XHR0aGlzLmFwcGVuZEV4dHJhY3RMb2coe1xuXHRcdFx0dHlwZTogXCJjbGllbnQuc3RhcnRcIixcblx0XHRcdG1lc3NhZ2U6IFwiT3BlbmluZyBleHRyYWN0aW9uIHN0cmVhbS5cIixcblx0XHR9KTtcblx0XHR0aGlzLnVwZGF0ZUV4dHJhY3RWaWV3cygpO1xuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG5cdFx0XHRcdGAke2dhdGV3YXlVcmwucmVwbGFjZSgvXFwvJC8sIFwiXCIpfS9hcGkvdjEvZW50aXR5LWV4dHJhY3Qvc3RyZWFtYCxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdFx0XCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG5cdFx0XHRcdFx0XHRcIlgtVGVuYW50LUlEXCI6IHRlbmFudElkLFxuXHRcdFx0XHRcdFx0Li4uKHRoaXMuc2V0dGluZ3MuYXBpS2V5XG5cdFx0XHRcdFx0XHRcdD8geyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5zZXR0aW5ncy5hcGlLZXl9YCB9XG5cdFx0XHRcdFx0XHRcdDoge30pLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0XHRcdFx0dGV4dCxcblx0XHRcdFx0XHRcdHdvcmxkX2lkOiB3b3JsZElkLFxuXHRcdFx0XHRcdFx0aW5jbHVkZV9yZWxhdGlvbnM6IGluY2x1ZGVSZWxhdGlvbnMsXG5cdFx0XHRcdFx0XHRlbnRpdHlfdHlwZXM6IGVudGl0eVR5cGVzLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdHNpZ25hbDogY29udHJvbGxlci5zaWduYWwsXG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cblx0XHRcdGlmICghcmVzcG9uc2Uub2spIHtcblx0XHRcdFx0bGV0IGVycm9yTWVzc2FnZSA9IGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWA7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29uc3QgZXJyb3JCb2R5ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkgYXMgeyBlcnJvcj86IHN0cmluZyB9O1xuXHRcdFx0XHRcdGlmIChlcnJvckJvZHk/LmVycm9yKSB7XG5cdFx0XHRcdFx0XHRlcnJvck1lc3NhZ2UgPSBlcnJvckJvZHkuZXJyb3I7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHQvLyBJZ25vcmUgSlNPTiBwYXJzZSBlcnJvcnMuXG5cdFx0XHRcdH1cblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICghcmVzcG9uc2UuYm9keSkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJObyByZXNwb25zZSBzdHJlYW0gYXZhaWxhYmxlLlwiKTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgcmVhZGVyID0gcmVzcG9uc2UuYm9keS5nZXRSZWFkZXIoKTtcblx0XHRcdGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiKTtcblx0XHRcdGxldCBidWZmZXIgPSBcIlwiO1xuXHRcdFx0bGV0IGN1cnJlbnRFdmVudCA9IFwibWVzc2FnZVwiO1xuXHRcdFx0bGV0IGRhdGFMaW5lczogc3RyaW5nW10gPSBbXTtcblxuXHRcdFx0Y29uc3QgZmx1c2hFdmVudCA9ICgpID0+IHtcblx0XHRcdFx0aWYgKCFkYXRhTGluZXMubGVuZ3RoKSByZXR1cm47XG5cdFx0XHRcdGNvbnN0IHJhd0RhdGEgPSBkYXRhTGluZXMuam9pbihcIlxcblwiKS50cmltKCk7XG5cdFx0XHRcdGRhdGFMaW5lcyA9IFtdO1xuXHRcdFx0XHRpZiAoIXJhd0RhdGEpIHJldHVybjtcblxuXHRcdFx0XHRsZXQgcGFyc2VkOiBFeHRyYWN0U3RyZWFtRXZlbnQgfCBudWxsID0gbnVsbDtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRwYXJzZWQgPSBKU09OLnBhcnNlKHJhd0RhdGEpIGFzIEV4dHJhY3RTdHJlYW1FdmVudDtcblx0XHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdFx0dGhpcy5hcHBlbmRFeHRyYWN0TG9nKHtcblx0XHRcdFx0XHRcdHR5cGU6IFwicGFyc2UuZXJyb3JcIixcblx0XHRcdFx0XHRcdG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHBhcnNlIHN0cmVhbSBldmVudCBwYXlsb2FkLlwiLFxuXHRcdFx0XHRcdFx0ZGF0YTogeyByYXc6IHJhd0RhdGEsIGV2ZW50OiBjdXJyZW50RXZlbnQgfSxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUV4dHJhY3RWaWV3cygpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICghcGFyc2VkLnR5cGUpIHtcblx0XHRcdFx0XHRwYXJzZWQudHlwZSA9IGN1cnJlbnRFdmVudCB8fCBcIm1lc3NhZ2VcIjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChwYXJzZWQudHlwZSA9PT0gXCJyZWxhdGlvbi5lcnJvclwiKSB7XG5cdFx0XHRcdFx0cGFyc2VkLm1lc3NhZ2UgPSBgXHUyNzRDICR7cGFyc2VkLm1lc3NhZ2V9YDtcblx0XHRcdFx0fSBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gXCJyZWxhdGlvbi5zdWNjZXNzXCIpIHtcblx0XHRcdFx0XHRwYXJzZWQubWVzc2FnZSA9IGBcdTI3MDUgJHtwYXJzZWQubWVzc2FnZX1gO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5hcHBlbmRFeHRyYWN0TG9nKHBhcnNlZCk7XG5cblx0XHRcdFx0aWYgKHBhcnNlZC50eXBlID09PSBcInJlc3VsdF9lbnRpdGllc1wiICYmIHBhcnNlZC5kYXRhPy5lbnRpdGllcykge1xuXHRcdFx0XHRcdGNvbnN0IGVudGl0aWVzID0gcGFyc2VkLmRhdGEuZW50aXRpZXMgYXMgRXh0cmFjdEVudGl0eVJlc3VsdFtcImVudGl0aWVzXCJdO1xuXHRcdFx0XHRcdGlmICh0aGlzLmV4dHJhY3RSZXN1bHQpIHtcblx0XHRcdFx0XHRcdHRoaXMuZXh0cmFjdFJlc3VsdC5lbnRpdGllcyA9IGVudGl0aWVzID8/IFtdO1xuXHRcdFx0XHRcdFx0dGhpcy5leHRyYWN0UmVzdWx0LnJlY2VpdmVkX2F0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCBmb3VuZENvdW50ID0gdGhpcy5leHRyYWN0UmVzdWx0Py5lbnRpdGllcy5maWx0ZXIoXG5cdFx0XHRcdFx0XHQoZW50aXR5KSA9PiBlbnRpdHkuZm91bmRcblx0XHRcdFx0XHQpLmxlbmd0aDtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFxuXHRcdFx0XHRcdFx0YEVudGl0aWVzIGV4dHJhY3RlZDogJHtmb3VuZENvdW50ID8/IDB9LyR7dGhpcy5leHRyYWN0UmVzdWx0Py5lbnRpdGllcy5sZW5ndGggPz8gMH0gbWF0Y2hlZGAsXG5cdFx0XHRcdFx0XHQ0MDAwXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChwYXJzZWQudHlwZSA9PT0gXCJyZXN1bHRfcmVsYXRpb25zXCIgJiYgcGFyc2VkLmRhdGE/LnJlbGF0aW9ucykge1xuXHRcdFx0XHRcdGNvbnN0IHJlbGF0aW9ucyA9IHBhcnNlZC5kYXRhLnJlbGF0aW9ucyBhcyBFeHRyYWN0RW50aXR5UmVzdWx0W1wicmVsYXRpb25zXCJdO1xuXHRcdFx0XHRcdGlmICh0aGlzLmV4dHJhY3RSZXN1bHQpIHtcblx0XHRcdFx0XHRcdHRoaXMuZXh0cmFjdFJlc3VsdC5yZWxhdGlvbnMgPSByZWxhdGlvbnMgPz8gW107XG5cdFx0XHRcdFx0XHR0aGlzLmV4dHJhY3RSZXN1bHQucmVjZWl2ZWRfYXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHBhcnNlZC50eXBlID09PSBcImVycm9yXCIpIHtcblx0XHRcdFx0XHR0aGlzLmV4dHJhY3RTdGF0dXMgPSBcImVycm9yXCI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLnVwZGF0ZUV4dHJhY3RWaWV3cygpO1xuXHRcdFx0fTtcblxuXHRcdFx0d2hpbGUgKHRydWUpIHtcblx0XHRcdFx0Y29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcblx0XHRcdFx0aWYgKGRvbmUpIGJyZWFrO1xuXHRcdFx0XHRidWZmZXIgKz0gZGVjb2Rlci5kZWNvZGUodmFsdWUsIHsgc3RyZWFtOiB0cnVlIH0pO1xuXG5cdFx0XHRcdGxldCBsaW5lRW5kID0gYnVmZmVyLmluZGV4T2YoXCJcXG5cIik7XG5cdFx0XHRcdHdoaWxlIChsaW5lRW5kICE9PSAtMSkge1xuXHRcdFx0XHRcdGNvbnN0IGxpbmUgPSBidWZmZXIuc2xpY2UoMCwgbGluZUVuZCkucmVwbGFjZSgvXFxyJC8sIFwiXCIpO1xuXHRcdFx0XHRcdGJ1ZmZlciA9IGJ1ZmZlci5zbGljZShsaW5lRW5kICsgMSk7XG5cdFx0XHRcdFx0bGluZUVuZCA9IGJ1ZmZlci5pbmRleE9mKFwiXFxuXCIpO1xuXG5cdFx0XHRcdFx0aWYgKCFsaW5lKSB7XG5cdFx0XHRcdFx0XHRmbHVzaEV2ZW50KCk7XG5cdFx0XHRcdFx0XHRjdXJyZW50RXZlbnQgPSBcIm1lc3NhZ2VcIjtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChsaW5lLnN0YXJ0c1dpdGgoXCJldmVudDpcIikpIHtcblx0XHRcdFx0XHRcdGN1cnJlbnRFdmVudCA9IGxpbmUucmVwbGFjZShcImV2ZW50OlwiLCBcIlwiKS50cmltKCk7XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAobGluZS5zdGFydHNXaXRoKFwiZGF0YTpcIikpIHtcblx0XHRcdFx0XHRcdGRhdGFMaW5lcy5wdXNoKGxpbmUucmVwbGFjZShcImRhdGE6XCIsIFwiXCIpLnRyaW0oKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuZXh0cmFjdEFib3J0Q29udHJvbGxlciA9IG51bGw7XG5cdFx0XHRpZiAodGhpcy5leHRyYWN0U3RhdHVzID09PSBcInJ1bm5pbmdcIikge1xuXHRcdFx0XHR0aGlzLmV4dHJhY3RTdGF0dXMgPSBcImRvbmVcIjtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGlmIChlcnIgaW5zdGFuY2VvZiBET01FeGNlcHRpb24gJiYgZXJyLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9XG5cdFx0XHRcdGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBleHRyYWN0IGVudGl0aWVzXCI7XG5cdFx0XHR0aGlzLmV4dHJhY3RTdGF0dXMgPSBcImVycm9yXCI7XG5cdFx0XHR0aGlzLmFwcGVuZEV4dHJhY3RMb2coe1xuXHRcdFx0XHR0eXBlOiBcImVycm9yXCIsXG5cdFx0XHRcdG1lc3NhZ2U6IGVycm9yTWVzc2FnZSxcblx0XHRcdH0pO1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0dGhpcy51cGRhdGVFeHRyYWN0Vmlld3MoKTtcblx0XHR9XG5cdH1cblxuXHRvcGVuU2V0dGluZ3MoKSB7XG5cdFx0Y29uc3Qgc2V0dGluZyA9ICh0aGlzLmFwcCBhcyBhbnkpLnNldHRpbmc7XG5cdFx0aWYgKHNldHRpbmcpIHtcblx0XHRcdHNldHRpbmcub3BlbigpO1xuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdHNldHRpbmcub3BlblRhYkJ5SWQodGhpcy5tYW5pZmVzdC5pZCk7XG5cdFx0XHR9LCAxMDApO1xuXHRcdH1cblx0fVxufVxuIiwgImltcG9ydCB7IFN5bmNFbnRpdHlQYXlsb2FkIH0gZnJvbSBcIi4vZW50aXR5U3luY1R5cGVzXCI7XG5cbnR5cGUgU3Vic2NyaWJlciA9IChwYXlsb2FkOiBTeW5jRW50aXR5UGF5bG9hZCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD47XG5cbmNsYXNzIEFwaVVwZGF0ZU5vdGlmaWVyIHtcblx0cHJpdmF0ZSBzdWJzY3JpYmVycyA9IG5ldyBTZXQ8U3Vic2NyaWJlcj4oKTtcblxuXHRzdWJzY3JpYmUoc3Vic2NyaWJlcjogU3Vic2NyaWJlcik6ICgpID0+IHZvaWQge1xuXHRcdHRoaXMuc3Vic2NyaWJlcnMuYWRkKHN1YnNjcmliZXIpO1xuXHRcdHJldHVybiAoKSA9PiB7XG5cdFx0XHR0aGlzLnN1YnNjcmliZXJzLmRlbGV0ZShzdWJzY3JpYmVyKTtcblx0XHR9O1xuXHR9XG5cblx0YXN5bmMgbm90aWZ5KHBheWxvYWQ6IFN5bmNFbnRpdHlQYXlsb2FkKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Zm9yIChjb25zdCBzdWJzY3JpYmVyIG9mIHRoaXMuc3Vic2NyaWJlcnMpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHN1YnNjcmliZXIocGF5bG9hZCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkF1dG8gc3luYyBzdWJzY3JpYmVyIGZhaWxlZFwiLCBlcnIpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgY29uc3QgYXBpVXBkYXRlTm90aWZpZXIgPSBuZXcgQXBpVXBkYXRlTm90aWZpZXIoKTtcblxuIiwgImltcG9ydCB7XG5cdEVycm9yUmVzcG9uc2UsXG5cdFN0b3J5LFxuXHRUZW5hbnQsXG5cdENoYXB0ZXIsXG5cdFNjZW5lLFxuXHRCZWF0LFxuXHRTdG9yeVdpdGhIaWVyYXJjaHksXG5cdENoYXB0ZXJXaXRoQ29udGVudCxcblx0U2NlbmVXaXRoQmVhdHMsXG5cdENvbnRlbnRCbG9jayxcblx0Q29udGVudEFuY2hvcixcblx0V29ybGQsXG5cdFJQR1N5c3RlbSxcblx0Q2hhcmFjdGVyLFxuXHRMb2NhdGlvbixcblx0QXJ0aWZhY3QsXG5cdFdvcmxkRXZlbnQsXG5cdFRyYWl0LFxuXHRBcmNoZXR5cGUsXG5cdEFyY2hldHlwZVRyYWl0LFxuXHRGYWN0aW9uLFxuXHRGYWN0aW9uUmVmZXJlbmNlLFxuXHRMb3JlLFxuXHRMb3JlUmVmZXJlbmNlLFxuXHRDaGFyYWN0ZXJUcmFpdCxcblx0Q2hhcmFjdGVyUmVsYXRpb25zaGlwLFxuXHRFdmVudENoYXJhY3Rlcixcblx0RXZlbnRSZWZlcmVuY2UsXG5cdFNjZW5lUmVmZXJlbmNlLFxuXHRUaW1lQ29uZmlnLFxuXHRFbnRpdHlSZWxhdGlvbixcblx0Q3JlYXRlRW50aXR5UmVsYXRpb25JbnB1dCxcbn0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBTeW5jRW50aXR5UGF5bG9hZCB9IGZyb20gXCIuLi9zeW5jL2VudGl0eVN5bmNUeXBlc1wiO1xuaW1wb3J0IHsgYXBpVXBkYXRlTm90aWZpZXIgfSBmcm9tIFwiLi4vc3luYy9hcGlVcGRhdGVOb3RpZmllclwiO1xuXG5leHBvcnQgY2xhc3MgU3RvcnlFbmdpbmVDbGllbnQge1xuXHRwcml2YXRlIG1vZGU6IFwibG9jYWxcIiB8IFwicmVtb3RlXCIgPSBcInJlbW90ZVwiO1xuXHRwcml2YXRlIGF1dG9TeW5jT25BcGlVcGRhdGVzID0gdHJ1ZTtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIGFwaVVybDogc3RyaW5nLFxuXHRcdHByaXZhdGUgYXBpS2V5OiBzdHJpbmcsXG5cdFx0cHJpdmF0ZSB0ZW5hbnRJZDogc3RyaW5nID0gXCJcIlxuXHQpIHt9XG5cblx0c2V0VGVuYW50SWQodGVuYW50SWQ6IHN0cmluZyk6IHZvaWQge1xuXHRcdHRoaXMudGVuYW50SWQgPSB0ZW5hbnRJZC50cmltKCk7XG5cdH1cblxuXHRzZXRNb2RlKG1vZGU6IFwibG9jYWxcIiB8IFwicmVtb3RlXCIpOiB2b2lkIHtcblx0XHR0aGlzLm1vZGUgPSBtb2RlO1xuXHR9XG5cblx0c2V0QXV0b1N5bmNPbkFwaVVwZGF0ZXMoZW5hYmxlZDogYm9vbGVhbik6IHZvaWQge1xuXHRcdHRoaXMuYXV0b1N5bmNPbkFwaVVwZGF0ZXMgPSBlbmFibGVkO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyByZXF1ZXN0PFQ+KFxuXHRcdG1ldGhvZDogc3RyaW5nLFxuXHRcdGVuZHBvaW50OiBzdHJpbmcsXG5cdFx0Ym9keT86IHVua25vd24sXG5cdFx0dGVuYW50SWRPdmVycmlkZT86IHN0cmluZ1xuXHQpOiBQcm9taXNlPFQ+IHtcblx0XHRjb25zdCB1cmwgPSBgJHt0aGlzLmFwaVVybH0ke2VuZHBvaW50fWA7XG5cdFx0Y29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG5cdFx0XG5cdFx0aGVhZGVycy5zZXQoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuXG5cdFx0aWYgKHRoaXMuYXBpS2V5KSB7XG5cdFx0XHRoZWFkZXJzLnNldChcIkF1dGhvcml6YXRpb25cIiwgYEJlYXJlciAke3RoaXMuYXBpS2V5fWApO1xuXHRcdH1cblxuXHRcdC8vIFVzZSBvdmVycmlkZSBpZiBwcm92aWRlZCwgb3RoZXJ3aXNlIHVzZSBpbnN0YW5jZSB0ZW5hbnRJZFxuXHRcdGNvbnN0IGVmZmVjdGl2ZVRlbmFudElkID0gdGVuYW50SWRPdmVycmlkZSA/PyB0aGlzLnRlbmFudElkO1xuXHRcdGlmIChlZmZlY3RpdmVUZW5hbnRJZCkge1xuXHRcdFx0Y29uc3QgdHJpbW1lZFRlbmFudElkID0gZWZmZWN0aXZlVGVuYW50SWQudHJpbSgpO1xuXHRcdFx0aWYgKHRyaW1tZWRUZW5hbnRJZCkge1xuXHRcdFx0XHRoZWFkZXJzLnNldChcIlgtVGVuYW50LUlEXCIsIHRyaW1tZWRUZW5hbnRJZCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3Qgb3B0aW9uczogUmVxdWVzdEluaXQgPSB7XG5cdFx0XHRtZXRob2QsXG5cdFx0XHRoZWFkZXJzLFxuXHRcdH07XG5cblx0XHRpZiAoYm9keSkge1xuXHRcdFx0b3B0aW9ucy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkoYm9keSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIG9wdGlvbnMpO1xuXG5cdFx0aWYgKCFyZXNwb25zZS5vaykge1xuXHRcdFx0bGV0IGVycm9yOiBFcnJvclJlc3BvbnNlO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0ZXJyb3IgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKSBhcyBFcnJvclJlc3BvbnNlO1xuXHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdGVycm9yID0ge1xuXHRcdFx0XHRcdGVycm9yOiBcInVua25vd25fZXJyb3JcIixcblx0XHRcdFx0XHRtZXNzYWdlOiBgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gLFxuXHRcdFx0XHRcdGNvZGU6IFwiSFRUUF9FUlJPUlwiLFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZSB8fCBlcnJvci5lcnJvciB8fCBgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gO1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3BvbnNlLmpzb24oKSBhcyBQcm9taXNlPFQ+O1xuXHR9XG5cblx0YXN5bmMgbGlzdFN0b3JpZXMoKTogUHJvbWlzZTxTdG9yeVtdPiB7XG5cdFx0aWYgKHRoaXMubW9kZSA9PT0gXCJyZW1vdGVcIiAmJiAoIXRoaXMudGVuYW50SWQgfHwgIXRoaXMudGVuYW50SWQudHJpbSgpKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVGVuYW50IElEIGlzIHJlcXVpcmVkXCIpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgc3RvcmllczogU3RvcnlbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRcIi9hcGkvdjEvc3Rvcmllc1wiXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2Uuc3RvcmllcyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldFN0b3J5KGlkOiBzdHJpbmcpOiBQcm9taXNlPFN0b3J5PiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBzdG9yeTogU3RvcnkgfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvc3Rvcmllcy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5zdG9yeTtcblx0fVxuXG5cdGFzeW5jIGNyZWF0ZVN0b3J5KHRpdGxlOiBzdHJpbmcsIHdvcmxkSWQ/OiBzdHJpbmcpOiBQcm9taXNlPFN0b3J5PiB7XG5cdFx0aWYgKHRoaXMubW9kZSA9PT0gXCJyZW1vdGVcIiAmJiAoIXRoaXMudGVuYW50SWQgfHwgIXRoaXMudGVuYW50SWQudHJpbSgpKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVGVuYW50IElEIGlzIHJlcXVpcmVkXCIpO1xuXHRcdH1cblxuXHRcdGNvbnN0IGJvZHk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7IHRpdGxlOiB0aXRsZS50cmltKCkgfTtcblx0XHRpZiAod29ybGRJZCkge1xuXHRcdFx0Ym9keS53b3JsZF9pZCA9IHdvcmxkSWQ7XG5cdFx0fVxuXG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBzdG9yeTogU3RvcnkgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdFwiL2FwaS92MS9zdG9yaWVzXCIsXG5cdFx0XHRib2R5XG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2Uuc3Rvcnk7XG5cdH1cblxuXHRhc3luYyBjbG9uZVN0b3J5KGlkOiBzdHJpbmcpOiBQcm9taXNlPFN0b3J5PiB7XG5cdFx0aWYgKCF0aGlzLnRlbmFudElkIHx8ICF0aGlzLnRlbmFudElkLnRyaW0oKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVGVuYW50IElEIGlzIHJlcXVpcmVkXCIpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgc3Rvcnk6IFN0b3J5IH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRgL2FwaS92MS9zdG9yaWVzLyR7aWR9L2Nsb25lYCxcblx0XHRcdHt9XG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2Uuc3Rvcnk7XG5cdH1cblxuXHRhc3luYyBnZXRUZW5hbnQoaWQ6IHN0cmluZyk6IFByb21pc2U8VGVuYW50PiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyB0ZW5hbnQ6IFRlbmFudCB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS90ZW5hbnRzLyR7aWR9YFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnRlbmFudDtcblx0fVxuXG5cdGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCB0aGlzLnJlcXVlc3Q8eyBzdGF0dXM6IHN0cmluZyB9PihcIkdFVFwiLCBcIi9oZWFsdGhcIik7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9IGNhdGNoIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyB1cGRhdGVTdG9yeShpZDogc3RyaW5nLCB0aXRsZTogc3RyaW5nLCBzdGF0dXM/OiBzdHJpbmcpOiBQcm9taXNlPFN0b3J5PiB7XG5cdFx0Y29uc3QgYm9keTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHsgdGl0bGU6IHRpdGxlLnRyaW0oKSB9O1xuXHRcdGlmIChzdGF0dXMpIHtcblx0XHRcdGJvZHkuc3RhdHVzID0gc3RhdHVzO1xuXHRcdH1cblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHN0b3J5OiBTdG9yeSB9Pihcblx0XHRcdFwiUFVUXCIsXG5cdFx0XHRgL2FwaS92MS9zdG9yaWVzLyR7aWR9YCxcblx0XHRcdGJvZHlcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5zdG9yeTtcblx0fVxuXG5cdGFzeW5jIGdldFN0b3J5V2l0aEhpZXJhcmNoeShpZDogc3RyaW5nKTogUHJvbWlzZTxTdG9yeVdpdGhIaWVyYXJjaHk+IHtcblx0XHRjb25zdCBzdG9yeSA9IGF3YWl0IHRoaXMuZ2V0U3RvcnkoaWQpO1xuXHRcdGNvbnN0IGNoYXB0ZXJzID0gYXdhaXQgdGhpcy5nZXRDaGFwdGVycyhpZCk7XG5cblx0XHRjb25zdCBjaGFwdGVyc1dpdGhDb250ZW50OiBDaGFwdGVyV2l0aENvbnRlbnRbXSA9IGF3YWl0IFByb21pc2UuYWxsKFxuXHRcdFx0Y2hhcHRlcnMubWFwKGFzeW5jIChjaGFwdGVyKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHNjZW5lcyA9IGF3YWl0IHRoaXMuZ2V0U2NlbmVzKGNoYXB0ZXIuaWQpO1xuXHRcdFx0XHRjb25zdCBzY2VuZXNXaXRoQmVhdHM6IFNjZW5lV2l0aEJlYXRzW10gPSBhd2FpdCBQcm9taXNlLmFsbChcblx0XHRcdFx0XHRzY2VuZXMubWFwKGFzeW5jIChzY2VuZSkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgYmVhdHMgPSBhd2FpdCB0aGlzLmdldEJlYXRzKHNjZW5lLmlkKTtcblx0XHRcdFx0XHRcdHJldHVybiB7IHNjZW5lLCBiZWF0cyB9O1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdCk7XG5cdFx0XHRcdHJldHVybiB7IGNoYXB0ZXIsIHNjZW5lczogc2NlbmVzV2l0aEJlYXRzIH07XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0c3RvcnksXG5cdFx0XHRjaGFwdGVyczogY2hhcHRlcnNXaXRoQ29udGVudCxcblx0XHR9O1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlQ2hhcHRlcihzdG9yeUlkOiBzdHJpbmcsIGNoYXB0ZXI6IFBhcnRpYWw8Q2hhcHRlcj4pOiBQcm9taXNlPENoYXB0ZXI+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGNoYXB0ZXI6IENoYXB0ZXIgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdFwiL2FwaS92MS9jaGFwdGVyc1wiLFxuXHRcdFx0e1xuXHRcdFx0XHRzdG9yeV9pZDogc3RvcnlJZCxcblx0XHRcdFx0bnVtYmVyOiBjaGFwdGVyLm51bWJlcixcblx0XHRcdFx0dGl0bGU6IGNoYXB0ZXIudGl0bGUsXG5cdFx0XHRcdHN0YXR1czogY2hhcHRlci5zdGF0dXMsXG5cdFx0XHR9XG5cdFx0KTtcblx0XHR2b2lkIHRoaXMucHVibGlzaENoYXB0ZXJVcGRhdGUocmVzcG9uc2UuY2hhcHRlci5pZCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmNoYXB0ZXI7XG5cdH1cblxuXHRhc3luYyB1cGRhdGVDaGFwdGVyKGlkOiBzdHJpbmcsIGNoYXB0ZXI6IFBhcnRpYWw8Q2hhcHRlcj4pOiBQcm9taXNlPENoYXB0ZXI+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGNoYXB0ZXI6IENoYXB0ZXIgfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcHRlcnMvJHtpZH1gLFxuXHRcdFx0Y2hhcHRlclxuXHRcdCk7XG5cdFx0dm9pZCB0aGlzLnB1Ymxpc2hDaGFwdGVyVXBkYXRlKHJlc3BvbnNlLmNoYXB0ZXIuaWQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jaGFwdGVyO1xuXHR9XG5cblx0YXN5bmMgZ2V0Q2hhcHRlcnMoc3RvcnlJZDogc3RyaW5nKTogUHJvbWlzZTxDaGFwdGVyW10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGNoYXB0ZXJzOiBDaGFwdGVyW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvc3Rvcmllcy8ke3N0b3J5SWR9L2NoYXB0ZXJzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmNoYXB0ZXJzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgZ2V0Q2hhcHRlcihpZDogc3RyaW5nKTogUHJvbWlzZTxDaGFwdGVyPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBjaGFwdGVyOiBDaGFwdGVyIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2NoYXB0ZXJzLyR7aWR9YFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmNoYXB0ZXI7XG5cdH1cblxuXHRhc3luYyBkZWxldGVDaGFwdGVyKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXCJERUxFVEVcIiwgYC9hcGkvdjEvY2hhcHRlcnMvJHtpZH1gKTtcblx0fVxuXG5cdGFzeW5jIGNyZWF0ZVNjZW5lKHNjZW5lOiBQYXJ0aWFsPFNjZW5lPik6IFByb21pc2U8U2NlbmU+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHNjZW5lOiBTY2VuZSB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0XCIvYXBpL3YxL3NjZW5lc1wiLFxuXHRcdFx0c2NlbmVcblx0XHQpO1xuXHRcdHZvaWQgdGhpcy5wdWJsaXNoU2NlbmVUcmVlKHJlc3BvbnNlLnNjZW5lLmlkKTtcblx0XHRyZXR1cm4gcmVzcG9uc2Uuc2NlbmU7XG5cdH1cblxuXHRhc3luYyB1cGRhdGVTY2VuZShpZDogc3RyaW5nLCBzY2VuZTogUGFydGlhbDxTY2VuZT4pOiBQcm9taXNlPFNjZW5lPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBzY2VuZTogU2NlbmUgfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvc2NlbmVzLyR7aWR9YCxcblx0XHRcdHNjZW5lXG5cdFx0KTtcblx0XHR2b2lkIHRoaXMucHVibGlzaFNjZW5lVHJlZShyZXNwb25zZS5zY2VuZS5pZCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnNjZW5lO1xuXHR9XG5cblx0YXN5bmMgZ2V0U2NlbmVzKGNoYXB0ZXJJZDogc3RyaW5nKTogUHJvbWlzZTxTY2VuZVtdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBzY2VuZXM6IFNjZW5lW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcHRlcnMvJHtjaGFwdGVySWR9L3NjZW5lc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5zY2VuZXMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRTY2VuZShpZDogc3RyaW5nKTogUHJvbWlzZTxTY2VuZT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgc2NlbmU6IFNjZW5lIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL3NjZW5lcy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5zY2VuZTtcblx0fVxuXG5cdGFzeW5jIGRlbGV0ZVNjZW5lKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXCJERUxFVEVcIiwgYC9hcGkvdjEvc2NlbmVzLyR7aWR9YCk7XG5cdH1cblxuXHRhc3luYyBjcmVhdGVCZWF0KGJlYXQ6IFBhcnRpYWw8QmVhdD4pOiBQcm9taXNlPEJlYXQ+IHtcblx0XHRpZiAoIWJlYXQuc2NlbmVfaWQpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcInNjZW5lX2lkIGlzIHJlcXVpcmVkIHRvIGNyZWF0ZSBhIGJlYXRcIik7XG5cdFx0fVxuXG5cdFx0Y29uc3QgcGF5bG9hZDogUGFydGlhbDxCZWF0PiA9IHsgLi4uYmVhdCB9O1xuXG5cdFx0aWYgKCFwYXlsb2FkLm9yZGVyX251bSB8fCBwYXlsb2FkLm9yZGVyX251bSA8PSAwKSB7XG5cdFx0XHRjb25zdCBleGlzdGluZ0JlYXRzID0gYXdhaXQgdGhpcy5nZXRCZWF0cyhiZWF0LnNjZW5lX2lkKTtcblx0XHRcdGNvbnN0IG5leHRPcmRlciA9XG5cdFx0XHRcdGV4aXN0aW5nQmVhdHMubGVuZ3RoID4gMFxuXHRcdFx0XHRcdD8gTWF0aC5tYXgoLi4uZXhpc3RpbmdCZWF0cy5tYXAoKGIpID0+IGIub3JkZXJfbnVtIHx8IDApKSArIDFcblx0XHRcdFx0XHQ6IDE7XG5cdFx0XHRwYXlsb2FkLm9yZGVyX251bSA9IG5leHRPcmRlcjtcblx0XHR9XG5cblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGJlYXQ6IEJlYXQgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdFwiL2FwaS92MS9iZWF0c1wiLFxuXHRcdFx0cGF5bG9hZFxuXHRcdCk7XG5cdFx0dm9pZCB0aGlzLnB1Ymxpc2hTY2VuZVRyZWUocmVzcG9uc2UuYmVhdC5zY2VuZV9pZCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmJlYXQ7XG5cdH1cblxuXHRhc3luYyB1cGRhdGVCZWF0KGlkOiBzdHJpbmcsIGJlYXQ6IFBhcnRpYWw8QmVhdD4pOiBQcm9taXNlPEJlYXQ+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGJlYXQ6IEJlYXQgfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvYmVhdHMvJHtpZH1gLFxuXHRcdFx0YmVhdFxuXHRcdCk7XG5cdFx0dm9pZCB0aGlzLnB1Ymxpc2hTY2VuZVRyZWUocmVzcG9uc2UuYmVhdC5zY2VuZV9pZCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmJlYXQ7XG5cdH1cblxuXHRhc3luYyBnZXRCZWF0cyhzY2VuZUlkOiBzdHJpbmcpOiBQcm9taXNlPEJlYXRbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgYmVhdHM6IEJlYXRbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9zY2VuZXMvJHtzY2VuZUlkfS9iZWF0c2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5iZWF0cyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldEJlYXQoaWQ6IHN0cmluZyk6IFByb21pc2U8QmVhdD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgYmVhdDogQmVhdCB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9iZWF0cy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5iZWF0O1xuXHR9XG5cblx0YXN5bmMgZGVsZXRlQmVhdChpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFwiREVMRVRFXCIsIGAvYXBpL3YxL2JlYXRzLyR7aWR9YCk7XG5cdH1cblxuXHQvLyBHZXQgYWxsIHZlcnNpb25zIG9mIGEgc3RvcnkgKGZvciB2ZXJzaW9uIGhpc3RvcnkpXG5cdGFzeW5jIGdldFN0b3J5VmVyc2lvbnMocm9vdFN0b3J5SWQ6IHN0cmluZyk6IFByb21pc2U8U3RvcnlbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgc3RvcmllczogU3RvcnlbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9zdG9yaWVzLyR7cm9vdFN0b3J5SWR9L3ZlcnNpb25zYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnN0b3JpZXMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRTY2VuZXNCeVN0b3J5KHN0b3J5SWQ6IHN0cmluZyk6IFByb21pc2U8U2NlbmVbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgc2NlbmVzOiBTY2VuZVtdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL3N0b3JpZXMvJHtzdG9yeUlkfS9zY2VuZXNgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2Uuc2NlbmVzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgbW92ZVNjZW5lKHNjZW5lSWQ6IHN0cmluZywgY2hhcHRlcklkOiBzdHJpbmcgfCBudWxsKTogUHJvbWlzZTxTY2VuZT4ge1xuXHRcdGNvbnN0IGJvZHk6IHsgY2hhcHRlcl9pZD86IHN0cmluZyB8IG51bGwgfSA9IHt9O1xuXHRcdGlmIChjaGFwdGVySWQgIT09IG51bGwpIHtcblx0XHRcdGJvZHkuY2hhcHRlcl9pZCA9IGNoYXB0ZXJJZDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ym9keS5jaGFwdGVyX2lkID0gbnVsbDtcblx0XHR9XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBzY2VuZTogU2NlbmUgfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvc2NlbmVzLyR7c2NlbmVJZH0vbW92ZWAsXG5cdFx0XHRib2R5XG5cdFx0KTtcblx0XHR2b2lkIHRoaXMucHVibGlzaFNjZW5lVHJlZShyZXNwb25zZS5zY2VuZS5pZCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnNjZW5lO1xuXHR9XG5cblx0YXN5bmMgZ2V0QmVhdHNCeVN0b3J5KHN0b3J5SWQ6IHN0cmluZyk6IFByb21pc2U8QmVhdFtdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBiZWF0czogQmVhdFtdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL3N0b3JpZXMvJHtzdG9yeUlkfS9iZWF0c2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5iZWF0cyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIG1vdmVCZWF0KGJlYXRJZDogc3RyaW5nLCBzY2VuZUlkOiBzdHJpbmcpOiBQcm9taXNlPEJlYXQ+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGJlYXQ6IEJlYXQgfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvYmVhdHMvJHtiZWF0SWR9L21vdmVgLFxuXHRcdFx0eyBzY2VuZV9pZDogc2NlbmVJZCB9XG5cdFx0KTtcblx0XHR2b2lkIHRoaXMucHVibGlzaFNjZW5lVHJlZShyZXNwb25zZS5iZWF0LnNjZW5lX2lkKTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuYmVhdDtcblx0fVxuXG5cdGFzeW5jIGdldENvbnRlbnRCbG9ja3MoY2hhcHRlcklkOiBzdHJpbmcpOiBQcm9taXNlPENvbnRlbnRCbG9ja1tdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBjb250ZW50X2Jsb2NrczogQ29udGVudEJsb2NrW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcHRlcnMvJHtjaGFwdGVySWR9L2NvbnRlbnQtYmxvY2tzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmNvbnRlbnRfYmxvY2tzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgZ2V0Q29udGVudEJsb2NrKGlkOiBzdHJpbmcpOiBQcm9taXNlPENvbnRlbnRCbG9jaz4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgY29udGVudF9ibG9jazogQ29udGVudEJsb2NrIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2NvbnRlbnQtYmxvY2tzLyR7aWR9YFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmNvbnRlbnRfYmxvY2s7XG5cdH1cblxuXHRhc3luYyBjcmVhdGVDb250ZW50QmxvY2soY2hhcHRlcklkOiBzdHJpbmcsIGNvbnRlbnRCbG9jazogUGFydGlhbDxDb250ZW50QmxvY2s+KTogUHJvbWlzZTxDb250ZW50QmxvY2s+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGNvbnRlbnRfYmxvY2s6IENvbnRlbnRCbG9jayB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcHRlcnMvJHtjaGFwdGVySWR9L2NvbnRlbnQtYmxvY2tzYCxcblx0XHRcdGNvbnRlbnRCbG9ja1xuXHRcdCk7XG5cdFx0dm9pZCB0aGlzLnB1Ymxpc2hDb250ZW50QmxvY2tVcGRhdGUocmVzcG9uc2UuY29udGVudF9ibG9jay5pZCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmNvbnRlbnRfYmxvY2s7XG5cdH1cblxuXHRhc3luYyB1cGRhdGVDb250ZW50QmxvY2soaWQ6IHN0cmluZywgY29udGVudEJsb2NrOiBQYXJ0aWFsPENvbnRlbnRCbG9jaz4pOiBQcm9taXNlPENvbnRlbnRCbG9jaz4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgY29udGVudF9ibG9jazogQ29udGVudEJsb2NrIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2NvbnRlbnQtYmxvY2tzLyR7aWR9YCxcblx0XHRcdGNvbnRlbnRCbG9ja1xuXHRcdCk7XG5cdFx0dm9pZCB0aGlzLnB1Ymxpc2hDb250ZW50QmxvY2tVcGRhdGUocmVzcG9uc2UuY29udGVudF9ibG9jay5pZCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmNvbnRlbnRfYmxvY2s7XG5cdH1cblxuXHRhc3luYyBkZWxldGVDb250ZW50QmxvY2soaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcIkRFTEVURVwiLCBgL2FwaS92MS9jb250ZW50LWJsb2Nrcy8ke2lkfWApO1xuXHR9XG5cblx0YXN5bmMgZ2V0Q29udGVudEFuY2hvcnMoY29udGVudEJsb2NrSWQ6IHN0cmluZyk6IFByb21pc2U8Q29udGVudEFuY2hvcltdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBhbmNob3JzOiBDb250ZW50QW5jaG9yW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvY29udGVudC1ibG9ja3MvJHtjb250ZW50QmxvY2tJZH0vYW5jaG9yc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5hbmNob3JzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgZ2V0Q29udGVudEJsb2Nrc0J5U2NlbmUoc2NlbmVJZDogc3RyaW5nKTogUHJvbWlzZTxDb250ZW50QmxvY2tbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgY29udGVudF9ibG9ja3M6IENvbnRlbnRCbG9ja1tdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL3NjZW5lcy8ke3NjZW5lSWR9L2NvbnRlbnQtYmxvY2tzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmNvbnRlbnRfYmxvY2tzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgZ2V0Q29udGVudEJsb2Nrc0J5QmVhdChiZWF0SWQ6IHN0cmluZyk6IFByb21pc2U8Q29udGVudEJsb2NrW10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGNvbnRlbnRfYmxvY2tzOiBDb250ZW50QmxvY2tbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9iZWF0cy8ke2JlYXRJZH0vY29udGVudC1ibG9ja3NgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuY29udGVudF9ibG9ja3MgfHwgW107XG5cdH1cblxuXHRhc3luYyBjcmVhdGVDb250ZW50QW5jaG9yKGNvbnRlbnRCbG9ja0lkOiBzdHJpbmcsIGVudGl0eVR5cGU6IHN0cmluZywgZW50aXR5SWQ6IHN0cmluZyk6IFByb21pc2U8Q29udGVudEFuY2hvcj4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgYW5jaG9yOiBDb250ZW50QW5jaG9yIH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRgL2FwaS92MS9jb250ZW50LWJsb2Nrcy8ke2NvbnRlbnRCbG9ja0lkfS9hbmNob3JzYCxcblx0XHRcdHtcblx0XHRcdFx0ZW50aXR5X3R5cGU6IGVudGl0eVR5cGUsXG5cdFx0XHRcdGVudGl0eV9pZDogZW50aXR5SWQsXG5cdFx0XHR9XG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuYW5jaG9yO1xuXHR9XG5cblx0YXN5bmMgZGVsZXRlQ29udGVudEFuY2hvcihpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFwiREVMRVRFXCIsIGAvYXBpL3YxL2NvbnRlbnQtYW5jaG9ycy8ke2lkfWApO1xuXHR9XG5cblx0YXN5bmMgZ2V0V29ybGRzKCk6IFByb21pc2U8V29ybGRbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgd29ybGRzOiBXb3JsZFtdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdFwiL2FwaS92MS93b3JsZHNcIlxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLndvcmxkcyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldFdvcmxkKGlkOiBzdHJpbmcpOiBQcm9taXNlPFdvcmxkPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyB3b3JsZDogV29ybGQgfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvd29ybGRzLyR7aWR9YFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLndvcmxkO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlV29ybGQobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBnZW5yZTogc3RyaW5nKTogUHJvbWlzZTxXb3JsZD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgd29ybGQ6IFdvcmxkIH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRcIi9hcGkvdjEvd29ybGRzXCIsXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6IG5hbWUudHJpbSgpLFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpLFxuXHRcdFx0XHRnZW5yZTogZ2VucmUudHJpbSgpLFxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLndvcmxkO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlV29ybGQoaWQ6IHN0cmluZywgbmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBnZW5yZTogc3RyaW5nKTogUHJvbWlzZTxXb3JsZD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgd29ybGQ6IFdvcmxkIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL3dvcmxkcy8ke2lkfWAsXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6IG5hbWUudHJpbSgpLFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpLFxuXHRcdFx0XHRnZW5yZTogZ2VucmUudHJpbSgpLFxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLndvcmxkO1xuXHR9XG5cblx0YXN5bmMgZ2V0UlBHU3lzdGVtcygpOiBQcm9taXNlPFJQR1N5c3RlbVtdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBycGdfc3lzdGVtczogUlBHU3lzdGVtW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0XCIvYXBpL3YxL3JwZy1zeXN0ZW1zXCJcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5ycGdfc3lzdGVtcyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldFJQR1N5c3RlbShpZDogc3RyaW5nKTogUHJvbWlzZTxSUEdTeXN0ZW0+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHJwZ19zeXN0ZW06IFJQR1N5c3RlbSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9ycGctc3lzdGVtcy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5ycGdfc3lzdGVtO1xuXHR9XG5cblx0Ly8gQ2hhcmFjdGVyIG1ldGhvZHNcblx0YXN5bmMgZ2V0Q2hhcmFjdGVycyh3b3JsZElkOiBzdHJpbmcpOiBQcm9taXNlPENoYXJhY3RlcltdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBjaGFyYWN0ZXJzOiBDaGFyYWN0ZXJbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS93b3JsZHMvJHt3b3JsZElkfS9jaGFyYWN0ZXJzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmNoYXJhY3RlcnMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRDaGFyYWN0ZXIoaWQ6IHN0cmluZyk6IFByb21pc2U8Q2hhcmFjdGVyPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBjaGFyYWN0ZXI6IENoYXJhY3RlciB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9jaGFyYWN0ZXJzLyR7aWR9YFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmNoYXJhY3Rlcjtcblx0fVxuXG5cdGFzeW5jIGNyZWF0ZUNoYXJhY3Rlcih3b3JsZElkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8Q2hhcmFjdGVyPik6IFByb21pc2U8Q2hhcmFjdGVyPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBjaGFyYWN0ZXI6IENoYXJhY3RlciB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0YC9hcGkvdjEvd29ybGRzLyR7d29ybGRJZH0vY2hhcmFjdGVyc2AsXG5cdFx0XHRkYXRhXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuY2hhcmFjdGVyO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlQ2hhcmFjdGVyKGlkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8Q2hhcmFjdGVyPik6IFByb21pc2U8Q2hhcmFjdGVyPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBjaGFyYWN0ZXI6IENoYXJhY3RlciB9Pihcblx0XHRcdFwiUFVUXCIsXG5cdFx0XHRgL2FwaS92MS9jaGFyYWN0ZXJzLyR7aWR9YCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jaGFyYWN0ZXI7XG5cdH1cblxuXHRhc3luYyBkZWxldGVDaGFyYWN0ZXIoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcIkRFTEVURVwiLCBgL2FwaS92MS9jaGFyYWN0ZXJzLyR7aWR9YCk7XG5cdH1cblxuXHQvLyBMb2NhdGlvbiBtZXRob2RzXG5cdGFzeW5jIGdldExvY2F0aW9ucyh3b3JsZElkOiBzdHJpbmcpOiBQcm9taXNlPExvY2F0aW9uW10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGxvY2F0aW9uczogTG9jYXRpb25bXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS93b3JsZHMvJHt3b3JsZElkfS9sb2NhdGlvbnNgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UubG9jYXRpb25zIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgZ2V0TG9jYXRpb24oaWQ6IHN0cmluZyk6IFByb21pc2U8TG9jYXRpb24+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGxvY2F0aW9uOiBMb2NhdGlvbiB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9sb2NhdGlvbnMvJHtpZH1gXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UubG9jYXRpb247XG5cdH1cblxuXHRhc3luYyBjcmVhdGVMb2NhdGlvbih3b3JsZElkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8TG9jYXRpb24+KTogUHJvbWlzZTxMb2NhdGlvbj4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgbG9jYXRpb246IExvY2F0aW9uIH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRgL2FwaS92MS93b3JsZHMvJHt3b3JsZElkfS9sb2NhdGlvbnNgLFxuXHRcdFx0ZGF0YVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmxvY2F0aW9uO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlTG9jYXRpb24oaWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxMb2NhdGlvbj4pOiBQcm9taXNlPExvY2F0aW9uPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBsb2NhdGlvbjogTG9jYXRpb24gfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvbG9jYXRpb25zLyR7aWR9YCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5sb2NhdGlvbjtcblx0fVxuXG5cdGFzeW5jIGRlbGV0ZUxvY2F0aW9uKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXCJERUxFVEVcIiwgYC9hcGkvdjEvbG9jYXRpb25zLyR7aWR9YCk7XG5cdH1cblxuXHQvLyBBcnRpZmFjdCBtZXRob2RzXG5cdGFzeW5jIGdldEFydGlmYWN0cyh3b3JsZElkOiBzdHJpbmcpOiBQcm9taXNlPEFydGlmYWN0W10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGFydGlmYWN0czogQXJ0aWZhY3RbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS93b3JsZHMvJHt3b3JsZElkfS9hcnRpZmFjdHNgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuYXJ0aWZhY3RzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgZ2V0QXJ0aWZhY3QoaWQ6IHN0cmluZyk6IFByb21pc2U8QXJ0aWZhY3Q+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGFydGlmYWN0OiBBcnRpZmFjdCB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9hcnRpZmFjdHMvJHtpZH1gXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuYXJ0aWZhY3Q7XG5cdH1cblxuXHRhc3luYyBjcmVhdGVBcnRpZmFjdCh3b3JsZElkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8QXJ0aWZhY3Q+KTogUHJvbWlzZTxBcnRpZmFjdD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgYXJ0aWZhY3Q6IEFydGlmYWN0IH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRgL2FwaS92MS93b3JsZHMvJHt3b3JsZElkfS9hcnRpZmFjdHNgLFxuXHRcdFx0ZGF0YVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmFydGlmYWN0O1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlQXJ0aWZhY3QoaWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxBcnRpZmFjdD4pOiBQcm9taXNlPEFydGlmYWN0PiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBhcnRpZmFjdDogQXJ0aWZhY3QgfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvYXJ0aWZhY3RzLyR7aWR9YCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5hcnRpZmFjdDtcblx0fVxuXG5cdGFzeW5jIGRlbGV0ZUFydGlmYWN0KGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXCJERUxFVEVcIiwgYC9hcGkvdjEvYXJ0aWZhY3RzLyR7aWR9YCk7XG5cdH1cblxuXHQvLyBFdmVudCBtZXRob2RzXG5cdGFzeW5jIGdldEV2ZW50cyh3b3JsZElkOiBzdHJpbmcpOiBQcm9taXNlPFdvcmxkRXZlbnRbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgZXZlbnRzOiBXb3JsZEV2ZW50W10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvd29ybGRzLyR7d29ybGRJZH0vZXZlbnRzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmV2ZW50cyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldEV2ZW50KGlkOiBzdHJpbmcpOiBQcm9taXNlPFdvcmxkRXZlbnQ+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGV2ZW50OiBXb3JsZEV2ZW50IH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2V2ZW50cy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5ldmVudDtcblx0fVxuXG5cdGFzeW5jIGNyZWF0ZUV2ZW50KHdvcmxkSWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxXb3JsZEV2ZW50Pik6IFByb21pc2U8V29ybGRFdmVudD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgZXZlbnQ6IFdvcmxkRXZlbnQgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdGAvYXBpL3YxL3dvcmxkcy8ke3dvcmxkSWR9L2V2ZW50c2AsXG5cdFx0XHRkYXRhXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuZXZlbnQ7XG5cdH1cblxuXHRhc3luYyB1cGRhdGVFdmVudChpZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPFdvcmxkRXZlbnQ+KTogUHJvbWlzZTxXb3JsZEV2ZW50PiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBldmVudDogV29ybGRFdmVudCB9Pihcblx0XHRcdFwiUFVUXCIsXG5cdFx0XHRgL2FwaS92MS9ldmVudHMvJHtpZH1gLFxuXHRcdFx0ZGF0YVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmV2ZW50O1xuXHR9XG5cblx0YXN5bmMgZGVsZXRlRXZlbnQoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcIkRFTEVURVwiLCBgL2FwaS92MS9ldmVudHMvJHtpZH1gKTtcblx0fVxuXG5cdGFzeW5jIG1vdmVFdmVudChpZDogc3RyaW5nLCBwYXJlbnRJZDogc3RyaW5nIHwgbnVsbCk6IFByb21pc2U8V29ybGRFdmVudD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgZXZlbnQ6IFdvcmxkRXZlbnQgfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvZXZlbnRzLyR7aWR9L21vdmVgLFxuXHRcdFx0eyBwYXJlbnRfaWQ6IHBhcmVudElkIH1cblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5ldmVudDtcblx0fVxuXG5cdC8vIFRyYWl0IG1ldGhvZHNcblx0YXN5bmMgZ2V0VHJhaXRzKCk6IFByb21pc2U8VHJhaXRbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgdHJhaXRzOiBUcmFpdFtdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdFwiL2FwaS92MS90cmFpdHNcIlxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnRyYWl0cyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldFRyYWl0KGlkOiBzdHJpbmcpOiBQcm9taXNlPFRyYWl0PiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyB0cmFpdDogVHJhaXQgfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvdHJhaXRzLyR7aWR9YFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnRyYWl0O1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlVHJhaXQoZGF0YTogUGFydGlhbDxUcmFpdD4pOiBQcm9taXNlPFRyYWl0PiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyB0cmFpdDogVHJhaXQgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdFwiL2FwaS92MS90cmFpdHNcIixcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS50cmFpdDtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZVRyYWl0KGlkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8VHJhaXQ+KTogUHJvbWlzZTxUcmFpdD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgdHJhaXQ6IFRyYWl0IH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL3RyYWl0cy8ke2lkfWAsXG5cdFx0XHRkYXRhXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UudHJhaXQ7XG5cdH1cblxuXHRhc3luYyBkZWxldGVUcmFpdChpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFwiREVMRVRFXCIsIGAvYXBpL3YxL3RyYWl0cy8ke2lkfWApO1xuXHR9XG5cblx0Ly8gQXJjaGV0eXBlIG1ldGhvZHNcblx0YXN5bmMgZ2V0QXJjaGV0eXBlcygpOiBQcm9taXNlPEFyY2hldHlwZVtdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBhcmNoZXR5cGVzOiBBcmNoZXR5cGVbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRcIi9hcGkvdjEvYXJjaGV0eXBlc1wiXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuYXJjaGV0eXBlcyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldEFyY2hldHlwZShpZDogc3RyaW5nKTogUHJvbWlzZTxBcmNoZXR5cGU+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGFyY2hldHlwZTogQXJjaGV0eXBlIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2FyY2hldHlwZXMvJHtpZH1gXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuYXJjaGV0eXBlO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlQXJjaGV0eXBlKGRhdGE6IFBhcnRpYWw8QXJjaGV0eXBlPik6IFByb21pc2U8QXJjaGV0eXBlPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBhcmNoZXR5cGU6IEFyY2hldHlwZSB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0XCIvYXBpL3YxL2FyY2hldHlwZXNcIixcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5hcmNoZXR5cGU7XG5cdH1cblxuXHRhc3luYyB1cGRhdGVBcmNoZXR5cGUoaWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxBcmNoZXR5cGU+KTogUHJvbWlzZTxBcmNoZXR5cGU+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGFyY2hldHlwZTogQXJjaGV0eXBlIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2FyY2hldHlwZXMvJHtpZH1gLFxuXHRcdFx0ZGF0YVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmFyY2hldHlwZTtcblx0fVxuXG5cdGFzeW5jIGRlbGV0ZUFyY2hldHlwZShpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFwiREVMRVRFXCIsIGAvYXBpL3YxL2FyY2hldHlwZXMvJHtpZH1gKTtcblx0fVxuXG5cdGFzeW5jIGdldEFyY2hldHlwZVRyYWl0cyhhcmNoZXR5cGVJZDogc3RyaW5nKTogUHJvbWlzZTxBcmNoZXR5cGVUcmFpdFtdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBhcmNoZXR5cGVfdHJhaXRzOiBBcmNoZXR5cGVUcmFpdFtdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2FyY2hldHlwZXMvJHthcmNoZXR5cGVJZH0vdHJhaXRzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmFyY2hldHlwZV90cmFpdHMgfHwgW107XG5cdH1cblxuXHRhc3luYyBhZGRBcmNoZXR5cGVUcmFpdChhcmNoZXR5cGVJZDogc3RyaW5nLCB0cmFpdElkOiBzdHJpbmcsIGRlZmF1bHRWYWx1ZT86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0YC9hcGkvdjEvYXJjaGV0eXBlcy8ke2FyY2hldHlwZUlkfS90cmFpdHNgLFxuXHRcdFx0e1xuXHRcdFx0XHR0cmFpdF9pZDogdHJhaXRJZCxcblx0XHRcdFx0ZGVmYXVsdF92YWx1ZTogZGVmYXVsdFZhbHVlLFxuXHRcdFx0fVxuXHRcdCk7XG5cdH1cblxuXHRhc3luYyByZW1vdmVBcmNoZXR5cGVUcmFpdChhcmNoZXR5cGVJZDogc3RyaW5nLCB0cmFpdElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXG5cdFx0XHRcIkRFTEVURVwiLFxuXHRcdFx0YC9hcGkvdjEvYXJjaGV0eXBlcy8ke2FyY2hldHlwZUlkfS90cmFpdHMvJHt0cmFpdElkfWBcblx0XHQpO1xuXHR9XG5cblx0Ly8gRmFjdGlvbiBtZXRob2RzXG5cdGFzeW5jIGdldEZhY3Rpb25zKHdvcmxkSWQ6IHN0cmluZyk6IFByb21pc2U8RmFjdGlvbltdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBmYWN0aW9uczogRmFjdGlvbltdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL3dvcmxkcy8ke3dvcmxkSWR9L2ZhY3Rpb25zYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmZhY3Rpb25zIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgZ2V0RmFjdGlvbihpZDogc3RyaW5nKTogUHJvbWlzZTxGYWN0aW9uPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBmYWN0aW9uOiBGYWN0aW9uIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2ZhY3Rpb25zLyR7aWR9YFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmZhY3Rpb247XG5cdH1cblxuXHRhc3luYyBjcmVhdGVGYWN0aW9uKHdvcmxkSWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxGYWN0aW9uPik6IFByb21pc2U8RmFjdGlvbj4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgZmFjdGlvbjogRmFjdGlvbiB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0YC9hcGkvdjEvd29ybGRzLyR7d29ybGRJZH0vZmFjdGlvbnNgLFxuXHRcdFx0ZGF0YVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmZhY3Rpb247XG5cdH1cblxuXHRhc3luYyB1cGRhdGVGYWN0aW9uKGlkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8RmFjdGlvbj4pOiBQcm9taXNlPEZhY3Rpb24+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGZhY3Rpb246IEZhY3Rpb24gfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvZmFjdGlvbnMvJHtpZH1gLFxuXHRcdFx0ZGF0YVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmZhY3Rpb247XG5cdH1cblxuXHRhc3luYyBkZWxldGVGYWN0aW9uKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXCJERUxFVEVcIiwgYC9hcGkvdjEvZmFjdGlvbnMvJHtpZH1gKTtcblx0fVxuXG5cdGFzeW5jIGdldEZhY3Rpb25DaGlsZHJlbihpZDogc3RyaW5nKTogUHJvbWlzZTxGYWN0aW9uW10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGZhY3Rpb25zOiBGYWN0aW9uW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvZmFjdGlvbnMvJHtpZH0vY2hpbGRyZW5gXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuZmFjdGlvbnMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRGYWN0aW9uUmVmZXJlbmNlcyhmYWN0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8RmFjdGlvblJlZmVyZW5jZVtdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyByZWZlcmVuY2VzOiBGYWN0aW9uUmVmZXJlbmNlW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvZmFjdGlvbnMvJHtmYWN0aW9uSWR9L3JlZmVyZW5jZXNgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UucmVmZXJlbmNlcyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGFkZEZhY3Rpb25SZWZlcmVuY2UoZmFjdGlvbklkOiBzdHJpbmcsIGVudGl0eVR5cGU6IHN0cmluZywgZW50aXR5SWQ6IHN0cmluZywgcm9sZT86IHN0cmluZywgbm90ZXM/OiBzdHJpbmcpOiBQcm9taXNlPEZhY3Rpb25SZWZlcmVuY2U+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHJlZmVyZW5jZTogRmFjdGlvblJlZmVyZW5jZSB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0YC9hcGkvdjEvZmFjdGlvbnMvJHtmYWN0aW9uSWR9L3JlZmVyZW5jZXNgLFxuXHRcdFx0e1xuXHRcdFx0XHRlbnRpdHlfdHlwZTogZW50aXR5VHlwZSxcblx0XHRcdFx0ZW50aXR5X2lkOiBlbnRpdHlJZCxcblx0XHRcdFx0cm9sZTogcm9sZSxcblx0XHRcdFx0bm90ZXM6IG5vdGVzLFxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnJlZmVyZW5jZTtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZUZhY3Rpb25SZWZlcmVuY2UoaWQ6IHN0cmluZywgcm9sZT86IHN0cmluZywgbm90ZXM/OiBzdHJpbmcpOiBQcm9taXNlPEZhY3Rpb25SZWZlcmVuY2U+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHJlZmVyZW5jZTogRmFjdGlvblJlZmVyZW5jZSB9Pihcblx0XHRcdFwiUFVUXCIsXG5cdFx0XHRgL2FwaS92MS9mYWN0aW9uLXJlZmVyZW5jZXMvJHtpZH1gLFxuXHRcdFx0e1xuXHRcdFx0XHRyb2xlOiByb2xlLFxuXHRcdFx0XHRub3Rlczogbm90ZXMsXG5cdFx0XHR9XG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UucmVmZXJlbmNlO1xuXHR9XG5cblx0YXN5bmMgcmVtb3ZlRmFjdGlvblJlZmVyZW5jZShmYWN0aW9uSWQ6IHN0cmluZywgZW50aXR5VHlwZTogc3RyaW5nLCBlbnRpdHlJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFxuXHRcdFx0XCJERUxFVEVcIixcblx0XHRcdGAvYXBpL3YxL2ZhY3Rpb25zLyR7ZmFjdGlvbklkfS9yZWZlcmVuY2VzLyR7ZW50aXR5VHlwZX0vJHtlbnRpdHlJZH1gXG5cdFx0KTtcblx0fVxuXG5cdC8vIExvcmUgbWV0aG9kc1xuXHRhc3luYyBnZXRMb3Jlcyh3b3JsZElkOiBzdHJpbmcpOiBQcm9taXNlPExvcmVbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgbG9yZXM6IExvcmVbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS93b3JsZHMvJHt3b3JsZElkfS9sb3Jlc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5sb3JlcyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldExvcmUoaWQ6IHN0cmluZyk6IFByb21pc2U8TG9yZT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgbG9yZTogTG9yZSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9sb3Jlcy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5sb3JlO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlTG9yZSh3b3JsZElkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8TG9yZT4pOiBQcm9taXNlPExvcmU+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGxvcmU6IExvcmUgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdGAvYXBpL3YxL3dvcmxkcy8ke3dvcmxkSWR9L2xvcmVzYCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5sb3JlO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlTG9yZShpZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPExvcmU+KTogUHJvbWlzZTxMb3JlPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBsb3JlOiBMb3JlIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2xvcmVzLyR7aWR9YCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5sb3JlO1xuXHR9XG5cblx0YXN5bmMgZGVsZXRlTG9yZShpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFwiREVMRVRFXCIsIGAvYXBpL3YxL2xvcmVzLyR7aWR9YCk7XG5cdH1cblxuXHRhc3luYyBnZXRMb3JlQ2hpbGRyZW4oaWQ6IHN0cmluZyk6IFByb21pc2U8TG9yZVtdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBsb3JlczogTG9yZVtdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2xvcmVzLyR7aWR9L2NoaWxkcmVuYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmxvcmVzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgZ2V0TG9yZVJlZmVyZW5jZXMobG9yZUlkOiBzdHJpbmcpOiBQcm9taXNlPExvcmVSZWZlcmVuY2VbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgcmVmZXJlbmNlczogTG9yZVJlZmVyZW5jZVtdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2xvcmVzLyR7bG9yZUlkfS9yZWZlcmVuY2VzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnJlZmVyZW5jZXMgfHwgW107XG5cdH1cblxuXHRhc3luYyBhZGRMb3JlUmVmZXJlbmNlKGxvcmVJZDogc3RyaW5nLCBlbnRpdHlUeXBlOiBzdHJpbmcsIGVudGl0eUlkOiBzdHJpbmcsIHJlbGF0aW9uc2hpcFR5cGU/OiBzdHJpbmcsIG5vdGVzPzogc3RyaW5nKTogUHJvbWlzZTxMb3JlUmVmZXJlbmNlPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyByZWZlcmVuY2U6IExvcmVSZWZlcmVuY2UgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdGAvYXBpL3YxL2xvcmVzLyR7bG9yZUlkfS9yZWZlcmVuY2VzYCxcblx0XHRcdHtcblx0XHRcdFx0ZW50aXR5X3R5cGU6IGVudGl0eVR5cGUsXG5cdFx0XHRcdGVudGl0eV9pZDogZW50aXR5SWQsXG5cdFx0XHRcdHJlbGF0aW9uc2hpcF90eXBlOiByZWxhdGlvbnNoaXBUeXBlLFxuXHRcdFx0XHRub3Rlczogbm90ZXMsXG5cdFx0XHR9XG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UucmVmZXJlbmNlO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlTG9yZVJlZmVyZW5jZShpZDogc3RyaW5nLCByZWxhdGlvbnNoaXBUeXBlPzogc3RyaW5nLCBub3Rlcz86IHN0cmluZyk6IFByb21pc2U8TG9yZVJlZmVyZW5jZT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgcmVmZXJlbmNlOiBMb3JlUmVmZXJlbmNlIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2xvcmUtcmVmZXJlbmNlcy8ke2lkfWAsXG5cdFx0XHR7XG5cdFx0XHRcdHJlbGF0aW9uc2hpcF90eXBlOiByZWxhdGlvbnNoaXBUeXBlLFxuXHRcdFx0XHRub3Rlczogbm90ZXMsXG5cdFx0XHR9XG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UucmVmZXJlbmNlO1xuXHR9XG5cblx0YXN5bmMgcmVtb3ZlTG9yZVJlZmVyZW5jZShsb3JlSWQ6IHN0cmluZywgZW50aXR5VHlwZTogc3RyaW5nLCBlbnRpdHlJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFxuXHRcdFx0XCJERUxFVEVcIixcblx0XHRcdGAvYXBpL3YxL2xvcmVzLyR7bG9yZUlkfS9yZWZlcmVuY2VzLyR7ZW50aXR5VHlwZX0vJHtlbnRpdHlJZH1gXG5cdFx0KTtcblx0fVxuXG5cdC8vIENoYXJhY3RlciBUcmFpdHMgbWV0aG9kc1xuXHRhc3luYyBnZXRDaGFyYWN0ZXJUcmFpdHMoY2hhcmFjdGVySWQ6IHN0cmluZyk6IFByb21pc2U8Q2hhcmFjdGVyVHJhaXRbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgY2hhcmFjdGVyX3RyYWl0czogQ2hhcmFjdGVyVHJhaXRbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9jaGFyYWN0ZXJzLyR7Y2hhcmFjdGVySWR9L3RyYWl0c2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jaGFyYWN0ZXJfdHJhaXRzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgYWRkQ2hhcmFjdGVyVHJhaXQoY2hhcmFjdGVySWQ6IHN0cmluZywgdHJhaXRJZDogc3RyaW5nLCB2YWx1ZT86IHN0cmluZywgbm90ZXM/OiBzdHJpbmcpOiBQcm9taXNlPENoYXJhY3RlclRyYWl0PiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBjaGFyYWN0ZXJfdHJhaXQ6IENoYXJhY3RlclRyYWl0IH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRgL2FwaS92MS9jaGFyYWN0ZXJzLyR7Y2hhcmFjdGVySWR9L3RyYWl0c2AsXG5cdFx0XHR7XG5cdFx0XHRcdHRyYWl0X2lkOiB0cmFpdElkLFxuXHRcdFx0XHR2YWx1ZTogdmFsdWUsXG5cdFx0XHRcdG5vdGVzOiBub3Rlcyxcblx0XHRcdH1cblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jaGFyYWN0ZXJfdHJhaXQ7XG5cdH1cblxuXHRhc3luYyB1cGRhdGVDaGFyYWN0ZXJUcmFpdChjaGFyYWN0ZXJJZDogc3RyaW5nLCB0cmFpdElkOiBzdHJpbmcsIHZhbHVlPzogc3RyaW5nLCBub3Rlcz86IHN0cmluZyk6IFByb21pc2U8Q2hhcmFjdGVyVHJhaXQ+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGNoYXJhY3Rlcl90cmFpdDogQ2hhcmFjdGVyVHJhaXQgfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcmFjdGVycy8ke2NoYXJhY3RlcklkfS90cmFpdHMvJHt0cmFpdElkfWAsXG5cdFx0XHR7XG5cdFx0XHRcdHZhbHVlOiB2YWx1ZSxcblx0XHRcdFx0bm90ZXM6IG5vdGVzLFxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmNoYXJhY3Rlcl90cmFpdDtcblx0fVxuXG5cdGFzeW5jIHJlbW92ZUNoYXJhY3RlclRyYWl0KGNoYXJhY3RlcklkOiBzdHJpbmcsIHRyYWl0SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcblx0XHRcdFwiREVMRVRFXCIsXG5cdFx0XHRgL2FwaS92MS9jaGFyYWN0ZXJzLyR7Y2hhcmFjdGVySWR9L3RyYWl0cy8ke3RyYWl0SWR9YFxuXHRcdCk7XG5cdH1cblxuXHQvLyBDaGFyYWN0ZXIgRXZlbnRzIG1ldGhvZHNcblx0YXN5bmMgZ2V0Q2hhcmFjdGVyRXZlbnRzKGNoYXJhY3RlcklkOiBzdHJpbmcpOiBQcm9taXNlPEV2ZW50Q2hhcmFjdGVyW10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGV2ZW50X2NoYXJhY3RlcnM6IEV2ZW50Q2hhcmFjdGVyW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcmFjdGVycy8ke2NoYXJhY3RlcklkfS9ldmVudHNgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuZXZlbnRfY2hhcmFjdGVycyB8fCBbXTtcblx0fVxuXG5cdC8vIENoYXJhY3RlciBSZWxhdGlvbnNoaXBzIG1ldGhvZHNcblx0YXN5bmMgZ2V0Q2hhcmFjdGVyUmVsYXRpb25zaGlwcyhjaGFyYWN0ZXJJZDogc3RyaW5nKTogUHJvbWlzZTxDaGFyYWN0ZXJSZWxhdGlvbnNoaXBbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgcmVsYXRpb25zaGlwczogQ2hhcmFjdGVyUmVsYXRpb25zaGlwW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcmFjdGVycy8ke2NoYXJhY3RlcklkfS9yZWxhdGlvbnNoaXBzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnJlbGF0aW9uc2hpcHMgfHwgW107XG5cdH1cblxuXHRhc3luYyBjcmVhdGVDaGFyYWN0ZXJSZWxhdGlvbnNoaXAoY2hhcmFjdGVySWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxDaGFyYWN0ZXJSZWxhdGlvbnNoaXA+KTogUHJvbWlzZTxDaGFyYWN0ZXJSZWxhdGlvbnNoaXA+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHJlbGF0aW9uc2hpcDogQ2hhcmFjdGVyUmVsYXRpb25zaGlwIH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRgL2FwaS92MS9jaGFyYWN0ZXJzLyR7Y2hhcmFjdGVySWR9L3JlbGF0aW9uc2hpcHNgLFxuXHRcdFx0ZGF0YVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnJlbGF0aW9uc2hpcDtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZUNoYXJhY3RlclJlbGF0aW9uc2hpcChpZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPENoYXJhY3RlclJlbGF0aW9uc2hpcD4pOiBQcm9taXNlPENoYXJhY3RlclJlbGF0aW9uc2hpcD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgcmVsYXRpb25zaGlwOiBDaGFyYWN0ZXJSZWxhdGlvbnNoaXAgfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcmFjdGVyLXJlbGF0aW9uc2hpcHMvJHtpZH1gLFxuXHRcdFx0ZGF0YVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnJlbGF0aW9uc2hpcDtcblx0fVxuXG5cdGFzeW5jIGRlbGV0ZUNoYXJhY3RlclJlbGF0aW9uc2hpcChpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFwiREVMRVRFXCIsIGAvYXBpL3YxL2NoYXJhY3Rlci1yZWxhdGlvbnNoaXBzLyR7aWR9YCk7XG5cdH1cblxuXHRhc3luYyBjcmVhdGVFbnRpdHlSZWxhdGlvbihpbnB1dDogQ3JlYXRlRW50aXR5UmVsYXRpb25JbnB1dCk6IFByb21pc2U8RW50aXR5UmVsYXRpb24+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHJlbGF0aW9uOiBFbnRpdHlSZWxhdGlvbiB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0XCIvYXBpL3YxL3JlbGF0aW9uc1wiLFxuXHRcdFx0e1xuXHRcdFx0XHR3b3JsZF9pZDogaW5wdXQud29ybGRfaWQsXG5cdFx0XHRcdHNvdXJjZV90eXBlOiBpbnB1dC5zb3VyY2VfdHlwZSxcblx0XHRcdFx0c291cmNlX2lkOiBpbnB1dC5zb3VyY2VfaWQsXG5cdFx0XHRcdHRhcmdldF90eXBlOiBpbnB1dC50YXJnZXRfdHlwZSxcblx0XHRcdFx0dGFyZ2V0X2lkOiBpbnB1dC50YXJnZXRfaWQsXG5cdFx0XHRcdHJlbGF0aW9uX3R5cGU6IGlucHV0LnJlbGF0aW9uX3R5cGUsXG5cdFx0XHRcdHN1bW1hcnk6IGlucHV0LnN1bW1hcnksXG5cdFx0XHRcdGNyZWF0ZV9taXJyb3I6IGlucHV0LmNyZWF0ZV9taXJyb3IgPz8gZmFsc2UsXG5cdFx0XHR9XG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UucmVsYXRpb247XG5cdH1cblxuXHQvLyBFdmVudCBDaGFyYWN0ZXJzL1JlZmVyZW5jZXMgbWV0aG9kc1xuXHRhc3luYyBnZXRFdmVudENoYXJhY3RlcnMoZXZlbnRJZDogc3RyaW5nKTogUHJvbWlzZTxFdmVudENoYXJhY3RlcltdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBldmVudF9jaGFyYWN0ZXJzOiBFdmVudENoYXJhY3RlcltdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2V2ZW50cy8ke2V2ZW50SWR9L2NoYXJhY3RlcnNgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuZXZlbnRfY2hhcmFjdGVycyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGFkZEV2ZW50Q2hhcmFjdGVyKGV2ZW50SWQ6IHN0cmluZywgY2hhcmFjdGVySWQ6IHN0cmluZywgcm9sZT86IHN0cmluZyk6IFByb21pc2U8RXZlbnRDaGFyYWN0ZXI+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGV2ZW50X2NoYXJhY3RlcjogRXZlbnRDaGFyYWN0ZXIgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdGAvYXBpL3YxL2V2ZW50cy8ke2V2ZW50SWR9L2NoYXJhY3RlcnNgLFxuXHRcdFx0e1xuXHRcdFx0XHRjaGFyYWN0ZXJfaWQ6IGNoYXJhY3RlcklkLFxuXHRcdFx0XHRyb2xlOiByb2xlLFxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmV2ZW50X2NoYXJhY3Rlcjtcblx0fVxuXG5cdGFzeW5jIHJlbW92ZUV2ZW50Q2hhcmFjdGVyKGV2ZW50SWQ6IHN0cmluZywgY2hhcmFjdGVySWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcblx0XHRcdFwiREVMRVRFXCIsXG5cdFx0XHRgL2FwaS92MS9ldmVudHMvJHtldmVudElkfS9jaGFyYWN0ZXJzLyR7Y2hhcmFjdGVySWR9YFxuXHRcdCk7XG5cdH1cblxuXHRhc3luYyBnZXRFdmVudFJlZmVyZW5jZXMoZXZlbnRJZDogc3RyaW5nKTogUHJvbWlzZTxFdmVudFJlZmVyZW5jZVtdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyByZWZlcmVuY2VzOiBFdmVudFJlZmVyZW5jZVtdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2V2ZW50cy8ke2V2ZW50SWR9L3JlZmVyZW5jZXNgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UucmVmZXJlbmNlcyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGFkZEV2ZW50UmVmZXJlbmNlKGV2ZW50SWQ6IHN0cmluZywgZW50aXR5VHlwZTogc3RyaW5nLCBlbnRpdHlJZDogc3RyaW5nLCByZWxhdGlvbnNoaXBUeXBlPzogc3RyaW5nLCBub3Rlcz86IHN0cmluZyk6IFByb21pc2U8RXZlbnRSZWZlcmVuY2U+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHJlZmVyZW5jZTogRXZlbnRSZWZlcmVuY2UgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdGAvYXBpL3YxL2V2ZW50cy8ke2V2ZW50SWR9L3JlZmVyZW5jZXNgLFxuXHRcdFx0e1xuXHRcdFx0XHRlbnRpdHlfdHlwZTogZW50aXR5VHlwZSxcblx0XHRcdFx0ZW50aXR5X2lkOiBlbnRpdHlJZCxcblx0XHRcdFx0cmVsYXRpb25zaGlwX3R5cGU6IHJlbGF0aW9uc2hpcFR5cGUsXG5cdFx0XHRcdG5vdGVzOiBub3Rlcyxcblx0XHRcdH1cblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5yZWZlcmVuY2U7XG5cdH1cblxuXHRhc3luYyB1cGRhdGVFdmVudFJlZmVyZW5jZShpZDogc3RyaW5nLCByZWxhdGlvbnNoaXBUeXBlPzogc3RyaW5nLCBub3Rlcz86IHN0cmluZyk6IFByb21pc2U8RXZlbnRSZWZlcmVuY2U+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHJlZmVyZW5jZTogRXZlbnRSZWZlcmVuY2UgfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvZXZlbnQtcmVmZXJlbmNlcy8ke2lkfWAsXG5cdFx0XHR7XG5cdFx0XHRcdHJlbGF0aW9uc2hpcF90eXBlOiByZWxhdGlvbnNoaXBUeXBlLFxuXHRcdFx0XHRub3Rlczogbm90ZXMsXG5cdFx0XHR9XG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UucmVmZXJlbmNlO1xuXHR9XG5cblx0YXN5bmMgcmVtb3ZlRXZlbnRSZWZlcmVuY2UoZXZlbnRJZDogc3RyaW5nLCBlbnRpdHlUeXBlOiBzdHJpbmcsIGVudGl0eUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXG5cdFx0XHRcIkRFTEVURVwiLFxuXHRcdFx0YC9hcGkvdjEvZXZlbnRzLyR7ZXZlbnRJZH0vcmVmZXJlbmNlcy8ke2VudGl0eVR5cGV9LyR7ZW50aXR5SWR9YFxuXHRcdCk7XG5cdH1cblxuXHQvLyBTY2VuZSBSZWZlcmVuY2VzIG1ldGhvZHNcblx0YXN5bmMgZ2V0U2NlbmVSZWZlcmVuY2VzKHNjZW5lSWQ6IHN0cmluZyk6IFByb21pc2U8U2NlbmVSZWZlcmVuY2VbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgcmVmZXJlbmNlczogU2NlbmVSZWZlcmVuY2VbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9zY2VuZXMvJHtzY2VuZUlkfS9yZWZlcmVuY2VzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnJlZmVyZW5jZXMgfHwgW107XG5cdH1cblxuXHRhc3luYyBhZGRTY2VuZVJlZmVyZW5jZShzY2VuZUlkOiBzdHJpbmcsIGVudGl0eVR5cGU6IHN0cmluZywgZW50aXR5SWQ6IHN0cmluZyk6IFByb21pc2U8U2NlbmVSZWZlcmVuY2U+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHJlZmVyZW5jZTogU2NlbmVSZWZlcmVuY2UgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdGAvYXBpL3YxL3NjZW5lcy8ke3NjZW5lSWR9L3JlZmVyZW5jZXNgLFxuXHRcdFx0e1xuXHRcdFx0XHRlbnRpdHlfdHlwZTogZW50aXR5VHlwZSxcblx0XHRcdFx0ZW50aXR5X2lkOiBlbnRpdHlJZCxcblx0XHRcdH1cblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5yZWZlcmVuY2U7XG5cdH1cblxuXHRhc3luYyByZW1vdmVTY2VuZVJlZmVyZW5jZShzY2VuZUlkOiBzdHJpbmcsIGVudGl0eVR5cGU6IHN0cmluZywgZW50aXR5SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcblx0XHRcdFwiREVMRVRFXCIsXG5cdFx0XHRgL2FwaS92MS9zY2VuZXMvJHtzY2VuZUlkfS9yZWZlcmVuY2VzLyR7ZW50aXR5VHlwZX0vJHtlbnRpdHlJZH1gXG5cdFx0KTtcblx0fVxuXG5cdC8vIFRpbWVsaW5lIG1ldGhvZHNcblx0YXN5bmMgZ2V0VGltZWxpbmUod29ybGRJZDogc3RyaW5nLCBmcm9tUG9zPzogbnVtYmVyLCB0b1Bvcz86IG51bWJlcik6IFByb21pc2U8V29ybGRFdmVudFtdPiB7XG5cdFx0Y29uc3QgcXVlcnlQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG5cdFx0aWYgKGZyb21Qb3MgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0cXVlcnlQYXJhbXMuYXBwZW5kKFwiZnJvbV9wb3NcIiwgZnJvbVBvcy50b1N0cmluZygpKTtcblx0XHR9XG5cdFx0aWYgKHRvUG9zICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdHF1ZXJ5UGFyYW1zLmFwcGVuZChcInRvX3Bvc1wiLCB0b1Bvcy50b1N0cmluZygpKTtcblx0XHR9XG5cdFx0Y29uc3QgcXVlcnlTdHJpbmcgPSBxdWVyeVBhcmFtcy50b1N0cmluZygpO1xuXHRcdGNvbnN0IGVuZHBvaW50ID0gYC9hcGkvdjEvd29ybGRzLyR7d29ybGRJZH0vdGltZWxpbmUke3F1ZXJ5U3RyaW5nID8gYD8ke3F1ZXJ5U3RyaW5nfWAgOiBcIlwifWA7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBldmVudHM6IFdvcmxkRXZlbnRbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRlbmRwb2ludFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmV2ZW50cyB8fCBbXTtcblx0fVxuXG5cdC8vIFdvcmxkIFRpbWVDb25maWcgbWV0aG9kc1xuXHRhc3luYyB1cGRhdGVXb3JsZFRpbWVDb25maWcod29ybGRJZDogc3RyaW5nLCB0aW1lQ29uZmlnOiBUaW1lQ29uZmlnKTogUHJvbWlzZTxXb3JsZD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgd29ybGQ6IFdvcmxkIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL3dvcmxkcy8ke3dvcmxkSWR9L3RpbWUtY29uZmlnYCxcblx0XHRcdHRpbWVDb25maWdcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS53b3JsZDtcblx0fVxuXG5cdHByaXZhdGUgaXNBdXRvU3luY0VuYWJsZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuYXV0b1N5bmNPbkFwaVVwZGF0ZXM7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHB1Ymxpc2hDaGFwdGVyVXBkYXRlKGNoYXB0ZXJJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCF0aGlzLmlzQXV0b1N5bmNFbmFibGVkKCkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgY2hhcHRlciA9IGF3YWl0IHRoaXMuZ2V0Q2hhcHRlcihjaGFwdGVySWQpO1xuXHRcdFx0Y29uc3Qgc3RvcnkgPSBhd2FpdCB0aGlzLmdldFN0b3J5KGNoYXB0ZXIuc3RvcnlfaWQpO1xuXHRcdFx0Y29uc3Qgc2NlbmVzID0gYXdhaXQgdGhpcy5nZXRTY2VuZXMoY2hhcHRlcklkKTtcblx0XHRcdGNvbnN0IHNjZW5lc1dpdGhCZWF0czogU2NlbmVXaXRoQmVhdHNbXSA9IGF3YWl0IFByb21pc2UuYWxsKFxuXHRcdFx0XHRzY2VuZXMubWFwKGFzeW5jIChzY2VuZSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRzID0gYXdhaXQgdGhpcy5nZXRCZWF0cyhzY2VuZS5pZCk7XG5cdFx0XHRcdFx0cmV0dXJuIHsgc2NlbmUsIGJlYXRzIH07XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHRcdFx0Y29uc3QgY29udGVudEJsb2NrcyA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrcyhjaGFwdGVySWQpO1xuXHRcdFx0Y29uc3QgY29udGVudEJsb2NrUmVmczogQ29udGVudEFuY2hvcltdID0gW107XG5cdFx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIGNvbnRlbnRCbG9ja3MpIHtcblx0XHRcdFx0Y29uc3QgcmVmcyA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEFuY2hvcnMoYmxvY2suaWQpO1xuXHRcdFx0XHRjb250ZW50QmxvY2tSZWZzLnB1c2goLi4ucmVmcyk7XG5cdFx0XHR9XG5cblx0XHRcdGF3YWl0IHRoaXMubm90aWZ5RW50aXR5VXBkYXRlKHtcblx0XHRcdFx0dHlwZTogXCJjaGFwdGVyXCIsXG5cdFx0XHRcdHN0b3J5LFxuXHRcdFx0XHRjaGFwdGVyLFxuXHRcdFx0XHRzY2VuZXM6IHNjZW5lc1dpdGhCZWF0cyxcblx0XHRcdFx0Y29udGVudEJsb2Nrcyxcblx0XHRcdFx0Y29udGVudEJsb2NrUmVmcyxcblx0XHRcdH0pO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBhdXRvLXN5bmMgY2hhcHRlciB1cGRhdGVcIiwgZXJyKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHB1Ymxpc2hTY2VuZVRyZWUoc2NlbmVJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCF0aGlzLmlzQXV0b1N5bmNFbmFibGVkKCkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3Qgc2NlbmUgPSBhd2FpdCB0aGlzLmdldFNjZW5lKHNjZW5lSWQpO1xuXHRcdFx0aWYgKHNjZW5lLmNoYXB0ZXJfaWQpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wdWJsaXNoQ2hhcHRlclVwZGF0ZShzY2VuZS5jaGFwdGVyX2lkKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBzdG9yeSA9IGF3YWl0IHRoaXMuZ2V0U3Rvcnkoc2NlbmUuc3RvcnlfaWQpO1xuXHRcdFx0Y29uc3QgYmVhdHMgPSBhd2FpdCB0aGlzLmdldEJlYXRzKHNjZW5lLmlkKTtcblx0XHRcdGNvbnN0IHNjZW5lQ29udGVudEJsb2NrcyA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2Nrc0J5U2NlbmUoc2NlbmUuaWQpO1xuXHRcdFx0Y29uc3QgYmVhdENvbnRlbnRCbG9ja3M6IFJlY29yZDxzdHJpbmcsIENvbnRlbnRCbG9ja1tdPiA9IHt9O1xuXHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIGJlYXRzKSB7XG5cdFx0XHRcdGJlYXRDb250ZW50QmxvY2tzW2JlYXQuaWRdID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tzQnlCZWF0KGJlYXQuaWQpO1xuXHRcdFx0fVxuXG5cdFx0XHRhd2FpdCB0aGlzLm5vdGlmeUVudGl0eVVwZGF0ZSh7XG5cdFx0XHRcdHR5cGU6IFwic2NlbmVcIixcblx0XHRcdFx0c3RvcnksXG5cdFx0XHRcdHNjZW5lLFxuXHRcdFx0XHRiZWF0cyxcblx0XHRcdFx0c2NlbmVDb250ZW50QmxvY2tzLFxuXHRcdFx0XHRiZWF0Q29udGVudEJsb2Nrcyxcblx0XHRcdH0pO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBhdXRvLXN5bmMgc2NlbmUgdXBkYXRlXCIsIGVycik7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBwdWJsaXNoQ29udGVudEJsb2NrVXBkYXRlKGNvbnRlbnRCbG9ja0lkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpZiAoIXRoaXMuaXNBdXRvU3luY0VuYWJsZWQoKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBjb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9jayhjb250ZW50QmxvY2tJZCk7XG5cdFx0XHRsZXQgc3Rvcnk6IFN0b3J5IHwgbnVsbCA9IG51bGw7XG5cdFx0XHRpZiAoY29udGVudEJsb2NrLmNoYXB0ZXJfaWQpIHtcblx0XHRcdFx0Y29uc3QgY2hhcHRlciA9IGF3YWl0IHRoaXMuZ2V0Q2hhcHRlcihjb250ZW50QmxvY2suY2hhcHRlcl9pZCk7XG5cdFx0XHRcdHN0b3J5ID0gYXdhaXQgdGhpcy5nZXRTdG9yeShjaGFwdGVyLnN0b3J5X2lkKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnN0IGFuY2hvcnMgPSBhd2FpdCB0aGlzLmdldENvbnRlbnRBbmNob3JzKGNvbnRlbnRCbG9jay5pZCk7XG5cdFx0XHRcdGNvbnN0IHNjZW5lQW5jaG9yID0gYW5jaG9ycy5maW5kKChhbmNob3IpID0+IGFuY2hvci5lbnRpdHlfdHlwZSA9PT0gXCJzY2VuZVwiKTtcblx0XHRcdFx0aWYgKHNjZW5lQW5jaG9yKSB7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmUgPSBhd2FpdCB0aGlzLmdldFNjZW5lKHNjZW5lQW5jaG9yLmVudGl0eV9pZCk7XG5cdFx0XHRcdFx0c3RvcnkgPSBhd2FpdCB0aGlzLmdldFN0b3J5KHNjZW5lLnN0b3J5X2lkKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIXN0b3J5KSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybihcIlVuYWJsZSB0byByZXNvbHZlIHN0b3J5IGZvciBjb250ZW50IGJsb2NrIGF1dG8tc3luY1wiLCBjb250ZW50QmxvY2tJZCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0YXdhaXQgdGhpcy5ub3RpZnlFbnRpdHlVcGRhdGUoe1xuXHRcdFx0XHR0eXBlOiBcImNvbnRlbnRcIixcblx0XHRcdFx0c3RvcnksXG5cdFx0XHRcdGNvbnRlbnRCbG9jayxcblx0XHRcdH0pO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBhdXRvLXN5bmMgY29udGVudCBibG9jayB1cGRhdGVcIiwgZXJyKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBub3RpZnlFbnRpdHlVcGRhdGUocGF5bG9hZDogU3luY0VudGl0eVBheWxvYWQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCBhcGlVcGRhdGVOb3RpZmllci5ub3RpZnkocGF5bG9hZCk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBTdG9yeUVuZ2luZVBsdWdpbiBmcm9tIFwiLi9tYWluXCI7XG5cbmV4cG9ydCBjbGFzcyBTdG9yeUVuZ2luZVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJTdG9yeSBFbmdpbmUgU2V0dGluZ3NcIiB9KTtcblxuXHRcdC8vIE1vZGUgU2VsZWN0aW9uXG5cdFx0bGV0IHRlbmFudElkU2V0dGluZzogU2V0dGluZyB8IG51bGwgPSBudWxsO1xuXHRcdGxldCB2aWRlb0xpbmtTZXR0aW5nOiBTZXR0aW5nIHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IGNvbmZsaWN0UmVzb2x1dGlvblNldHRpbmc6IFNldHRpbmcgfCBudWxsID0gbnVsbDtcblxuXHRcdGNvbnN0IG1vZGVTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkNvbm5lY3Rpb24gTW9kZVwiKVxuXHRcdFx0LnNldERlc2MoXCJDaG9vc2UgYmV0d2VlbiBsb2NhbCAob2ZmbGluZSkgb3IgcmVtb3RlIChjbG91ZCkgbW9kZVwiKVxuXHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT5cblx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHQuYWRkT3B0aW9uKFwibG9jYWxcIiwgXCJMb2NhbFwiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJyZW1vdGVcIiwgXCJSZW1vdGVcIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZSB8fCBcImxvY2FsXCIpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZSA9IHZhbHVlIGFzIFwibG9jYWxcIiB8IFwicmVtb3RlXCI7XG5cdFx0XHRcdFx0XHQvLyBBdXRvLXNldCBjb25mbGljdCByZXNvbHV0aW9uIGluIGxvY2FsIG1vZGVcblx0XHRcdFx0XHRcdGlmICh2YWx1ZSA9PT0gXCJsb2NhbFwiKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZsaWN0UmVzb2x1dGlvbiA9IFwibG9jYWxcIjtcblx0XHRcdFx0XHRcdFx0aWYgKGNvbmZsaWN0UmVzb2x1dGlvblNldHRpbmcpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25mbGljdFJlc29sdXRpb25TZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGlmIChjb25mbGljdFJlc29sdXRpb25TZXR0aW5nKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uZmxpY3RSZXNvbHV0aW9uU2V0dGluZy5zZXR0aW5nRWwuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC8vIFNob3cvaGlkZSB0ZW5hbnQgSURcblx0XHRcdFx0XHRcdGlmICh0ZW5hbnRJZFNldHRpbmcpIHtcblx0XHRcdFx0XHRcdFx0dGVuYW50SWRTZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPT09IFwicmVtb3RlXCIgPyBcIlwiIDogXCJub25lXCI7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQvLyBTaG93L2hpZGUgdmlkZW8gbGlua1xuXHRcdFx0XHRcdFx0aWYgKHZpZGVvTGlua1NldHRpbmcpIHtcblx0XHRcdFx0XHRcdFx0dmlkZW9MaW5rU2V0dGluZy5zZXR0aW5nRWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID09PSBcImxvY2FsXCIgPyBcIlwiIDogXCJub25lXCI7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgQVBJIGNsaWVudCBtb2RlXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uYXBpQ2xpZW50KSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmFwaUNsaWVudC5zZXRNb2RlKHZhbHVlIGFzIFwibG9jYWxcIiB8IFwicmVtb3RlXCIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHQvLyBBUEkgVVJMXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkFQSSBVUkxcIilcblx0XHRcdC5zZXREZXNjKFwiVGhlIGJhc2UgVVJMIG9mIHRoZSBTdG9yeSBFbmdpbmUgQVBJXCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MFwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcGlVcmwpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpVXJsID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJMTE0gR2F0ZXdheSBVUkxcIilcblx0XHRcdC5zZXREZXNjKFwiVGhlIGJhc2UgVVJMIG9mIHRoZSBMTE0gR2F0ZXdheSBzZXJ2aWNlXCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MVwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1HYXRld2F5VXJsKVxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbUdhdGV3YXlVcmwgPSB2YWx1ZS50cmltKCk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIFRlbmFudCBJRCAoY29uZGl0aW9uYWwgLSBvbmx5IHNob3duIGluIHJlbW90ZSBtb2RlKVxuXHRcdHRlbmFudElkU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJUZW5hbnQgSURcIilcblx0XHRcdC5zZXREZXNjKFwiWW91ciB3b3Jrc3BhY2UgdGVuYW50IElEIChVVUlEIGZvcm1hdCkgLSBSZXF1aXJlZCBpbiByZW1vdGUgbW9kZVwiKVxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdHRleHRcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDBcIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGVuYW50SWQgfHwgXCJcIilcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW5hbnRJZCA9IHZhbHVlLnRyaW0oKTtcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBBUEkgY2xpZW50IHRlbmFudCBJRCBpbW1lZGlhdGVseVxuXHRcdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLmFwaUNsaWVudCkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5hcGlDbGllbnQuc2V0VGVuYW50SWQodmFsdWUudHJpbSgpKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlID09PSBcImxvY2FsXCIpIHtcblx0XHRcdHRlbmFudElkU2V0dGluZy5zZXR0aW5nRWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdH1cblxuXHRcdC8vIFZpZGVvIExpbmsgU2VjdGlvbiAoY29uZGl0aW9uYWwgLSBvbmx5IHNob3duIGluIGxvY2FsIG1vZGUpXG5cdFx0Y29uc3QgdmlkZW9VcmwgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sb2NhbE1vZGVWaWRlb1VybCB8fCBcImh0dHBzOi8vZXhhbXBsZS5jb20vc2V0dXAtdmlkZW9cIjtcblx0XHR2aWRlb0xpbmtTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlNldHVwIEd1aWRlXCIpXG5cdFx0XHQuc2V0RGVzYyhgXHVEODNEXHVEQ0Y5IExlYXJuIGhvdyB0byBzZXR1cCBsb2NhbCBtb2RlOiAke3ZpZGVvVXJsfWApXG5cdFx0XHQuYWRkQnV0dG9uKChidXR0b24pID0+IHtcblx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoXCJPcGVuIFZpZGVvXCIpLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdHdpbmRvdy5vcGVuKHZpZGVvVXJsLCBcIl9ibGFua1wiKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZSA9PT0gXCJyZW1vdGVcIikge1xuXHRcdFx0dmlkZW9MaW5rU2V0dGluZy5zZXR0aW5nRWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdH1cblxuXHRcdC8vIEFQSSBLZXlcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiQVBJIEtleVwiKVxuXHRcdFx0LnNldERlc2MoXCJBUEkga2V5IGZvciBhdXRoZW50aWNhdGlvbiAob3B0aW9uYWwgZm9yIE1WUClcIilcblx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG5cdFx0XHRcdHRleHQuc2V0UGxhY2Vob2xkZXIoXCJFbnRlciBBUEkga2V5XCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSlcblx0XHRcdFx0XHQuaW5wdXRFbC50eXBlID0gXCJwYXNzd29yZFwiO1xuXHRcdFx0XHR0ZXh0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlN5bmMgRm9sZGVyIFBhdGhcIilcblx0XHRcdC5zZXREZXNjKFwiRm9sZGVyIHBhdGggd2hlcmUgc3luY2VkIHN0b3JpZXMgd2lsbCBiZSBzdG9yZWRcIilcblx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiU3Rvcmllc1wiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeW5jRm9sZGVyUGF0aCB8fCBcIlN0b3JpZXNcIilcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeW5jRm9sZGVyUGF0aCA9IHZhbHVlLnRyaW0oKSB8fCBcIlN0b3JpZXNcIjtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkF1dG8gVmVyc2lvbiBTbmFwc2hvdHNcIilcblx0XHRcdC5zZXREZXNjKFwiQXV0b21hdGljYWxseSBjcmVhdGUgdmVyc2lvbiBzbmFwc2hvdHMgd2hlbiBzeW5jaW5nXCIpXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG5cdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvVmVyc2lvblNuYXBzaG90cyA/PyB0cnVlKVxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9WZXJzaW9uU25hcHNob3RzID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJBdXRvIFN5bmMgb24gQVBJIFVwZGF0ZXNcIilcblx0XHRcdC5zZXREZXNjKFwiQXBwbHkgQVBJIHVwZGF0ZSBwYXlsb2FkcyBkaXJlY3RseSB0byBsb2NhbCBmaWxlcyB3aGVuIGF2YWlsYWJsZVwiKVxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1N5bmNPbkFwaVVwZGF0ZXMgPz8gdHJ1ZSlcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvU3luY09uQXBpVXBkYXRlcyA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiQXV0byBQdXNoIG9uIEJsdXIvSWRsZVwiKVxuXHRcdFx0LnNldERlc2MoXCJXaGVuIHlvdSBsZWF2ZSBhIGNoYXB0ZXIvc2NlbmUvYmVhdCBvciBzdGF5IGlkbGUgZm9yIDEgbWluLCBwdXNoIGNoYW5nZXMgdXBzdHJlYW0gYXV0b21hdGljYWxseVwiKVxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1B1c2hPbkZpbGVCbHVyID8/IHRydWUpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1B1c2hPbkZpbGVCbHVyID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIENvbmZsaWN0IFJlc29sdXRpb24gKGNvbmRpdGlvbmFsIC0gaGlkZGVuIGluIGxvY2FsIG1vZGUpXG5cdFx0Y29uZmxpY3RSZXNvbHV0aW9uU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJDb25mbGljdCBSZXNvbHV0aW9uXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkhvdyB0byByZXNvbHZlIGNvbmZsaWN0cyB3aGVuIGJvdGggbG9jYWwgYW5kIHNlcnZpY2UgaGF2ZSBjaGFuZ2VzXCIpXG5cdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxuXHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJzZXJ2aWNlXCIsIFwiU2VydmljZSBXaW5zXCIpXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihcImxvY2FsXCIsIFwiTG9jYWwgV2luc1wiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJtYW51YWxcIiwgXCJNYW51YWwgKE5ld2VyIFdpbnMpXCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZsaWN0UmVzb2x1dGlvbiB8fCBcInNlcnZpY2VcIilcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25mbGljdFJlc29sdXRpb24gPVxuXHRcdFx0XHRcdFx0XHR2YWx1ZSBhcyBcInNlcnZpY2VcIiB8IFwibG9jYWxcIiB8IFwibWFudWFsXCI7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZSA9PT0gXCJsb2NhbFwiKSB7XG5cdFx0XHRjb25mbGljdFJlc29sdXRpb25TZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0fVxuXG5cdFx0Ly8gU2hvdyBIZWxwIEJveCBpbiBNRCBGaWxlc1xuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJTaG93IEhlbHAgQm94IGluIE1EIEZpbGVzXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkVuYWJsZS9kaXNhYmxlIGluZm8vaGVscCBib3hlcyBpbiBtYXJrZG93biBmaWxlc1wiKVxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0hlbHBCb3ggPz8gdHJ1ZSlcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93SGVscEJveCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHQvLyBTaWRlYmFyIFBvc2l0aW9uXG5cdFx0Y29uc3Qgc2lkZWJhclBvc2l0aW9uU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJXb3JsZCBTaWRlYmFyIFBvc2l0aW9uXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkNob29zZSB3aGV0aGVyIHRoZSB3b3JsZCBzaWRlYmFyIGFwcGVhcnMgb24gdGhlIGxlZnQgb3IgcmlnaHQgc2lkZVwiKVxuXHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT5cblx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHQuYWRkT3B0aW9uKFwibGVmdFwiLCBcIkxlZnRcIilcblx0XHRcdFx0XHQuYWRkT3B0aW9uKFwicmlnaHRcIiwgXCJSaWdodFwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaWRlYmFyUG9zaXRpb24gfHwgXCJsZWZ0XCIpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2lkZWJhclBvc2l0aW9uID0gdmFsdWUgYXMgXCJsZWZ0XCIgfCBcInJpZ2h0XCI7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdC8vIFRyaWdnZXIgdmlldyByZWZyZXNoIGlmIG5lZWRlZFxuXHRcdFx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoXCJsYXlvdXQtY2hhbmdlXCIpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHRcdC8vIEhpZGUgZnJvbSB1c2VycyAoZmVhdHVyZSByZW1haW5zIGVuYWJsZWQgaW50ZXJuYWxseSlcblx0XHRzaWRlYmFyUG9zaXRpb25TZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiVW5zcGxhc2ggQWNjZXNzIEtleVwiKVxuXHRcdFx0LnNldERlc2MoXCJBcHBsaWNhdGlvbiBJRCAvIEFjY2VzcyBLZXkgZm9yIFVuc3BsYXNoIEFQSSAoZ2V0IG9uZSBhdCBodHRwczovL3Vuc3BsYXNoLmNvbS9kZXZlbG9wZXJzKVwiKVxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcblx0XHRcdFx0dGV4dC5zZXRQbGFjZWhvbGRlcihcIkVudGVyIFVuc3BsYXNoIGFjY2VzcyBrZXlcIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudW5zcGxhc2hBY2Nlc3NLZXkgfHwgXCJcIilcblx0XHRcdFx0XHQuaW5wdXRFbC50eXBlID0gXCJwYXNzd29yZFwiO1xuXHRcdFx0XHR0ZXh0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnVuc3BsYXNoQWNjZXNzS2V5ID0gdmFsdWUudHJpbSgpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlVuc3BsYXNoIFNlY3JldCBLZXlcIilcblx0XHRcdC5zZXREZXNjKFwiU2VjcmV0IEtleSBmb3IgVW5zcGxhc2ggQVBJIChvcHRpb25hbCwgbmVlZGVkIGZvciBzb21lIG9wZXJhdGlvbnMpXCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xuXHRcdFx0XHR0ZXh0LnNldFBsYWNlaG9sZGVyKFwiRW50ZXIgVW5zcGxhc2ggc2VjcmV0IGtleVwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy51bnNwbGFzaFNlY3JldEtleSB8fCBcIlwiKVxuXHRcdFx0XHRcdC5pbnB1dEVsLnR5cGUgPSBcInBhc3N3b3JkXCI7XG5cdFx0XHRcdHRleHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudW5zcGxhc2hTZWNyZXRLZXkgPSB2YWx1ZS50cmltKCk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHQvLyBUZXN0IGNvbm5lY3Rpb24gYnV0dG9uXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlRlc3QgQ29ubmVjdGlvblwiKVxuXHRcdFx0LnNldERlc2MoXCJUZXN0IGNvbm5lY3Rpb24gdG8gdGhlIFN0b3J5IEVuZ2luZSBBUElcIilcblx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT5cblx0XHRcdFx0YnV0dG9uXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJUZXN0XCIpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoXCJUZXN0aW5nLi4uXCIpO1xuXHRcdFx0XHRcdFx0YnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnRlc3RDb25uZWN0aW9uKCk7XG5cdFx0XHRcdFx0XHRcdGlmIChyZXN1bHQpIHtcblx0XHRcdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChcIlN1Y2Nlc3MhXCIpO1xuXHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoXCJUZXN0XCIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0YnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcblx0XHRcdFx0XHRcdFx0XHR9LCAyMDAwKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChcIkZhaWxlZFwiKTtcblx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KFwiVGVzdFwiKTtcblx0XHRcdFx0XHRcdFx0XHRcdGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG5cdFx0XHRcdFx0XHRcdFx0fSwgMjAwMCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChcIkVycm9yXCIpO1xuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChcIlRlc3RcIik7XG5cdFx0XHRcdFx0XHRcdFx0YnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcblx0XHRcdFx0XHRcdFx0fSwgMjAwMCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdH1cbn1cblxuXG4iLCAiaW1wb3J0IHsgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBTdG9yeVN5bmNNb2RhbCB9IGZyb20gXCIuL3ZpZXdzL1N0b3J5U3luY01vZGFsXCI7XG5pbXBvcnQgU3RvcnlFbmdpbmVQbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb21tYW5kcyhwbHVnaW46IFN0b3J5RW5naW5lUGx1Z2luKSB7XG5cdHBsdWdpbi5hZGRDb21tYW5kKHtcblx0XHRpZDogXCJsaXN0LXN0b3JpZXNcIixcblx0XHRuYW1lOiBcIkxpc3QgU3Rvcmllc1wiLFxuXHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRwbHVnaW4uYWN0aXZhdGVWaWV3KCk7XG5cdFx0fSxcblx0fSk7XG5cblx0cGx1Z2luLmFkZENvbW1hbmQoe1xuXHRcdGlkOiBcImNyZWF0ZS1zdG9yeVwiLFxuXHRcdG5hbWU6IFwiQ3JlYXRlIFN0b3J5XCIsXG5cdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdHBsdWdpbi5jcmVhdGVTdG9yeUNvbW1hbmQoKTtcblx0XHR9LFxuXHR9KTtcblxuXHRwbHVnaW4uYWRkQ29tbWFuZCh7XG5cdFx0aWQ6IFwic3luYy1zdG9yeS1mcm9tLXNlcnZpY2VcIixcblx0XHRuYW1lOiBcIlN5bmMgU3RvcnkgZnJvbSBTZXJ2aWNlXCIsXG5cdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdG5ldyBTdG9yeVN5bmNNb2RhbChwbHVnaW4sIFwicHVsbFwiKS5vcGVuKCk7XG5cdFx0fSxcblx0fSk7XG5cblx0cGx1Z2luLmFkZENvbW1hbmQoe1xuXHRcdGlkOiBcInB1c2gtc3RvcnktdG8tc2VydmljZVwiLFxuXHRcdG5hbWU6IFwiUHVzaCBTdG9yeSB0byBTZXJ2aWNlXCIsXG5cdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdG5ldyBTdG9yeVN5bmNNb2RhbChwbHVnaW4sIFwicHVzaFwiKS5vcGVuKCk7XG5cdFx0fSxcblx0fSk7XG5cblx0cGx1Z2luLmFkZENvbW1hbmQoe1xuXHRcdGlkOiBcInN5bmMtYWxsLXN0b3JpZXNcIixcblx0XHRuYW1lOiBcIlN5bmMgQWxsIFN0b3JpZXNcIixcblx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0Ly8gT25seSB2YWxpZGF0ZSB0ZW5hbnQgSUQgaW4gcmVtb3RlIG1vZGVcblx0XHRcdGlmIChwbHVnaW4uc2V0dGluZ3MubW9kZSA9PT0gXCJyZW1vdGVcIiAmJiAhcGx1Z2luLnNldHRpbmdzLnRlbmFudElkKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJQbGVhc2UgY29uZmlndXJlIFRlbmFudCBJRCBpbiBzZXR0aW5nc1wiLCA1MDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiU3luY2luZyBhbGwgc3Rvcmllcy4uLlwiKTtcblx0XHRcdFx0YXdhaXQgcGx1Z2luLnN5bmNTZXJ2aWNlLnB1bGxBbGxTdG9yaWVzKCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID1cblx0XHRcdFx0XHRlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gc3luYyBzdG9yaWVzXCI7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yTWVzc2FnZX1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9LFxuXHR9KTtcblxuXHRwbHVnaW4uYWRkQ29tbWFuZCh7XG5cdFx0aWQ6IFwiZXh0cmFjdC1lbnRpdGllcy1mcm9tLXNlbGVjdGlvblwiLFxuXHRcdG5hbWU6IFwiRXh0cmFjdCBFbnRpdGllcyBhbmQgUmVsYXRpb25zIGZyb20gU2VsZWN0aW9uXCIsXG5cdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3IpID0+IHtcblx0XHRcdGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcblx0XHRcdGlmICghc2VsZWN0aW9uLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiU2VsZWN0IHRleHQgdG8gZXh0cmFjdCBlbnRpdGllcyBhbmQgcmVsYXRpb25zXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRwbHVnaW4uZXh0cmFjdFNlbGVjdGlvbkNvbW1hbmQoc2VsZWN0aW9uLCB0cnVlKTtcblx0XHR9LFxuXHR9KTtcblxuXHRwbHVnaW4uYWRkQ29tbWFuZCh7XG5cdFx0aWQ6IFwiZXh0cmFjdC1lbnRpdGllcy1vbmx5LWZyb20tc2VsZWN0aW9uXCIsXG5cdFx0bmFtZTogXCJFeHRyYWN0IEVudGl0aWVzIE9ubHkgZnJvbSBTZWxlY3Rpb25cIixcblx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcikgPT4ge1xuXHRcdFx0Y29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuXHRcdFx0aWYgKCFzZWxlY3Rpb24udHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJTZWxlY3QgdGV4dCB0byBleHRyYWN0IGVudGl0aWVzXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRwbHVnaW4uZXh0cmFjdFNlbGVjdGlvbkNvbW1hbmQoc2VsZWN0aW9uLCBmYWxzZSk7XG5cdFx0fSxcblx0fSk7XG59XG4iLCAiaW1wb3J0IHsgTW9kYWwsIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IFN0b3J5RW5naW5lUGx1Z2luIGZyb20gXCIuLi9tYWluXCI7XG5pbXBvcnQgeyBTdG9yeSB9IGZyb20gXCIuLi90eXBlc1wiO1xuXG5leHBvcnQgY2xhc3MgU3RvcnlTeW5jTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdHBsdWdpbjogU3RvcnlFbmdpbmVQbHVnaW47XG5cdG1vZGU6IFwicHVsbFwiIHwgXCJwdXNoXCI7XG5cdHN0b3JpZXM6IFN0b3J5W10gPSBbXTtcblx0bG9hZGluZzogYm9vbGVhbiA9IHRydWU7XG5cdGVycm9yOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IFN0b3J5RW5naW5lUGx1Z2luLCBtb2RlOiBcInB1bGxcIiB8IFwicHVzaFwiKSB7XG5cdFx0c3VwZXIocGx1Z2luLmFwcCk7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdFx0dGhpcy5tb2RlID0gbW9kZTtcblx0fVxuXG5cdGFzeW5jIG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblxuXHRcdGNvbnN0IHRpdGxlID1cblx0XHRcdHRoaXMubW9kZSA9PT0gXCJwdWxsXCJcblx0XHRcdFx0PyBcIlN5bmMgU3RvcnkgZnJvbSBTZXJ2aWNlXCJcblx0XHRcdFx0OiBcIlB1c2ggU3RvcnkgdG8gU2VydmljZVwiO1xuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogdGl0bGUgfSk7XG5cblx0XHRhd2FpdCB0aGlzLmxvYWRTdG9yaWVzKCk7XG5cblx0XHRpZiAodGhpcy5sb2FkaW5nKSB7XG5cdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJMb2FkaW5nIHN0b3JpZXMuLi5cIiB9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5lcnJvcikge1xuXHRcdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7XG5cdFx0XHRcdHRleHQ6IGBFcnJvcjogJHt0aGlzLmVycm9yfWAsXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXJyb3JcIixcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnN0b3JpZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBzdG9yaWVzIGZvdW5kLlwiIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IHN0b3JpZXNMaXN0ID0gY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1saXN0XCIgfSk7XG5cblx0XHRmb3IgKGNvbnN0IHN0b3J5IG9mIHRoaXMuc3Rvcmllcykge1xuXHRcdFx0Y29uc3Qgc3RvcnlJdGVtID0gc3Rvcmllc0xpc3QuY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIixcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCB0aXRsZSA9IHN0b3J5SXRlbS5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIixcblx0XHRcdFx0dGV4dDogc3RvcnkudGl0bGUsXG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgbWV0YSA9IHN0b3J5SXRlbS5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtbWV0YVwiLFxuXHRcdFx0fSk7XG5cdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7XG5cdFx0XHRcdHRleHQ6IGBWZXJzaW9uICR7c3RvcnkudmVyc2lvbl9udW1iZXJ9YCxcblx0XHRcdH0pO1xuXHRcdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwge1xuXHRcdFx0XHR0ZXh0OiBgU3RhdHVzOiAke3N0b3J5LnN0YXR1c31gLFxuXHRcdFx0fSk7XG5cblx0XHRcdHN0b3J5SXRlbS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMubW9kZSA9PT0gXCJwdWxsXCIpIHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnN5bmNTZXJ2aWNlLnB1bGxTdG9yeShzdG9yeS5pZCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnN0IGZvbGRlclBhdGggPSB0aGlzLnBsdWdpbi5maWxlTWFuYWdlci5nZXRTdG9yeUZvbGRlclBhdGgoXG5cdFx0XHRcdFx0XHRcdHN0b3J5LnRpdGxlXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc3luY1NlcnZpY2UucHVzaFN0b3J5KGZvbGRlclBhdGgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID1cblx0XHRcdFx0XHRcdGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBzeW5jIHN0b3J5XCI7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGxvYWRTdG9yaWVzKCkge1xuXHRcdHRoaXMubG9hZGluZyA9IHRydWU7XG5cdFx0dGhpcy5lcnJvciA9IG51bGw7XG5cblx0XHR0cnkge1xuXHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW5hbnRJZCkge1xuXHRcdFx0XHR0aGlzLmVycm9yID0gXCJUZW5hbnQgSUQgbm90IGNvbmZpZ3VyZWRcIjtcblx0XHRcdFx0dGhpcy5sb2FkaW5nID0gZmFsc2U7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5zdG9yaWVzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50Lmxpc3RTdG9yaWVzKCk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHR0aGlzLmVycm9yID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHR0aGlzLmxvYWRpbmcgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cblxuXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgU3RvcnlFbmdpbmVQbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcbmltcG9ydCB7IFdvcmxkIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBDcmVhdGVXb3JsZE1vZGFsIH0gZnJvbSBcIi4vQ3JlYXRlV29ybGRNb2RhbFwiO1xuXG5leHBvcnQgY2xhc3MgQ3JlYXRlU3RvcnlNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0cGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbjtcblx0dGl0bGU6IHN0cmluZyA9IFwiXCI7XG5cdHNlbGVjdGVkV29ybGRJZDogc3RyaW5nID0gXCJcIjtcblx0c2hvdWxkU3luYzogYm9vbGVhbiA9IHRydWU7XG5cdHdvcmxkczogV29ybGRbXSA9IFtdO1xuXHRvblN1Ym1pdDogKHRpdGxlOiBzdHJpbmcsIHdvcmxkSWQ6IHN0cmluZyB8IHVuZGVmaW5lZCwgc2hvdWxkU3luYzogYm9vbGVhbikgPT4gdm9pZDtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbiwgb25TdWJtaXQ6ICh0aXRsZTogc3RyaW5nLCB3b3JsZElkOiBzdHJpbmcgfCB1bmRlZmluZWQsIHNob3VsZFN5bmM6IGJvb2xlYW4pID0+IHZvaWQpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHRcdHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcblx0fVxuXG5cdGFzeW5jIG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJDcmVhdGUgTmV3IFN0b3J5XCIgfSk7XG5cblx0XHQvLyBMb2FkIHdvcmxkc1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLndvcmxkcyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRXb3JsZHMoKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gbG9hZCB3b3JsZHM6XCIsIGVycik7XG5cdFx0XHR0aGlzLndvcmxkcyA9IFtdO1xuXHRcdH1cblxuXHRcdC8vIFRpdGxlIGlucHV0XG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJTdG9yeSBUaXRsZVwiKVxuXHRcdFx0LnNldERlc2MoXCJFbnRlciB0aGUgdGl0bGUgZm9yIHlvdXIgbmV3IHN0b3J5XCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIk15IE5ldyBTdG9yeVwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnRpdGxlKVxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMudGl0bGUgPSB2YWx1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zdWJtaXQoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIFdvcmxkIHNlbGVjdGlvblxuXHRcdGNvbnN0IHdvcmxkT3B0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcblx0XHRcdFwiXCI6IFwiTm8gV29ybGRcIixcblx0XHR9O1xuXHRcdGZvciAoY29uc3Qgd29ybGQgb2YgdGhpcy53b3JsZHMpIHtcblx0XHRcdHdvcmxkT3B0aW9uc1t3b3JsZC5pZF0gPSB3b3JsZC5uYW1lO1xuXHRcdH1cblx0XHR3b3JsZE9wdGlvbnNbXCJfX2NyZWF0ZV9uZXdfX1wiXSA9IFwiQ3JlYXRlIG5ldyB3b3JsZC4uLlwiO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJXb3JsZFwiKVxuXHRcdFx0LnNldERlc2MoXCJTZWxlY3QgYSB3b3JsZCBmb3IgdGhpcyBzdG9yeSAob3B0aW9uYWwpXCIpXG5cdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG5cdFx0XHRcdGZvciAoY29uc3QgW3ZhbHVlLCBsYWJlbF0gb2YgT2JqZWN0LmVudHJpZXMod29ybGRPcHRpb25zKSkge1xuXHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih2YWx1ZSwgbGFiZWwpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRyb3Bkb3duLnNldFZhbHVlKHRoaXMuc2VsZWN0ZWRXb3JsZElkIHx8IFwiXCIpO1xuXHRcdFx0XHRkcm9wZG93bi5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRpZiAodmFsdWUgPT09IFwiX19jcmVhdGVfbmV3X19cIikge1xuXHRcdFx0XHRcdFx0Ly8gT3BlbiBjcmVhdGUgd29ybGQgbW9kYWxcblx0XHRcdFx0XHRcdG5ldyBDcmVhdGVXb3JsZE1vZGFsKHRoaXMuYXBwLCBhc3luYyAobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBnZW5yZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3V29ybGQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlV29ybGQobmFtZSwgZGVzY3JpcHRpb24sIGdlbnJlKTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLndvcmxkcy5wdXNoKG5ld1dvcmxkKTtcblx0XHRcdFx0XHRcdFx0XHQvLyBSZWZyZXNoIGRyb3Bkb3duXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5vbkNsb3NlKCk7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5vbk9wZW4oKTtcblx0XHRcdFx0XHRcdFx0XHQvLyBSZS1zZWxlY3QgdGhlIG5ld2x5IGNyZWF0ZWQgd29ybGRcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkV29ybGRJZCA9IG5ld1dvcmxkLmlkO1xuXHRcdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gY3JlYXRlIHdvcmxkXCI7XG5cdFx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KS5vcGVuKCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMuc2VsZWN0ZWRXb3JsZElkID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0Ly8gU3luYyBjaGVja2JveFxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5zZXROYW1lKFwiU3luYyB0byBPYnNpZGlhblwiKVxuXHRcdFx0LnNldERlc2MoXCJBdXRvbWF0aWNhbGx5IHN5bmMgdGhlIHN0b3J5IGZpbGVzIHRvIHlvdXIgdmF1bHQgYWZ0ZXIgY3JlYXRpb25cIilcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cblx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuc2hvdWxkU3luYylcblx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnNob3VsZFN5bmMgPSB2YWx1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIEJ1dHRvbnNcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRcblx0XHRjb25zdCBjcmVhdGVCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJDcmVhdGVcIixcblx0XHRcdGNsczogXCJtb2QtY3RhXCIsXG5cdFx0fSk7XG5cdFx0Y3JlYXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnN1Ym1pdCgpKTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIkNhbmNlbFwiLFxuXHRcdH0pO1xuXHRcdGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblxuXHRcdC8vIEZvY3VzIG9uIHRpdGxlIGlucHV0XG5cdFx0Y29uc3QgdGl0bGVJbnB1dCA9IChjb250ZW50RWwgYXMgSFRNTEVsZW1lbnQpLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKSBhcyBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbDtcblx0XHRpZiAodGl0bGVJbnB1dCkge1xuXHRcdFx0dGl0bGVJbnB1dC5mb2N1cygpO1xuXHRcdH1cblx0fVxuXG5cdHN1Ym1pdCgpIHtcblx0XHRjb25zdCB0cmltbWVkVGl0bGUgPSB0aGlzLnRpdGxlLnRyaW0oKTtcblx0XHRcblx0XHRpZiAoIXRyaW1tZWRUaXRsZSkge1xuXHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBlbnRlciBhIHN0b3J5IHRpdGxlXCIsIDMwMDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuY2xvc2UoKTtcblx0XHRjb25zdCB3b3JsZElkID0gdGhpcy5zZWxlY3RlZFdvcmxkSWQgJiYgdGhpcy5zZWxlY3RlZFdvcmxkSWQgIT09IFwiX19jcmVhdGVfbmV3X19cIiA/IHRoaXMuc2VsZWN0ZWRXb3JsZElkIDogdW5kZWZpbmVkO1xuXHRcdHRoaXMub25TdWJtaXQodHJpbW1lZFRpdGxlLCB3b3JsZElkLCB0aGlzLnNob3VsZFN5bmMpO1xuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBjbGFzcyBDcmVhdGVXb3JsZE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRuYW1lOiBzdHJpbmcgPSBcIlwiO1xuXHRkZXNjcmlwdGlvbjogc3RyaW5nID0gXCJcIjtcblx0Z2VucmU6IHN0cmluZyA9IFwiXCI7XG5cdG9uU3VibWl0OiAobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBnZW5yZTogc3RyaW5nKSA9PiB2b2lkO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvblN1Ym1pdDogKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgZ2VucmU6IHN0cmluZykgPT4gdm9pZCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIkNyZWF0ZSBOZXcgV29ybGRcIiB9KTtcblxuXHRcdC8vIE5hbWUgaW5wdXRcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZShcIldvcmxkIE5hbWVcIilcblx0XHRcdC5zZXREZXNjKFwiRW50ZXIgdGhlIG5hbWUgZm9yIHlvdXIgbmV3IHdvcmxkXCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIk15IE5ldyBXb3JsZFwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLm5hbWUpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5uYW1lID0gdmFsdWU7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcblx0XHRcdFx0XHRcdGlmIChlLmtleSA9PT0gXCJFbnRlclwiKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGRlc2NyaXB0aW9uSW5wdXQgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcihcInRleHRhcmVhXCIpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQgfCBudWxsO1xuXHRcdFx0XHRcdFx0XHRpZiAoZGVzY3JpcHRpb25JbnB1dCkge1xuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uSW5wdXQuZm9jdXMoKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0Ly8gRGVzY3JpcHRpb24gaW5wdXRcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZShcIkRlc2NyaXB0aW9uXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkVudGVyIGEgZGVzY3JpcHRpb24gZm9yIHlvdXIgd29ybGRcIilcblx0XHRcdC5hZGRUZXh0QXJlYSgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIkEgYnJpZWYgZGVzY3JpcHRpb24gb2YgeW91ciB3b3JsZC4uLlwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLmRlc2NyaXB0aW9uKVxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuZGVzY3JpcHRpb24gPSB2YWx1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIEdlbnJlIGlucHV0XG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJHZW5yZVwiKVxuXHRcdFx0LnNldERlc2MoXCJFbnRlciB0aGUgZ2VucmUgb2YgeW91ciB3b3JsZFwiKVxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdHRleHRcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJGYW50YXN5LCBTY2ktRmksIENvbnRlbXBvcmFyeSwgZXRjLlwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLmdlbnJlKVxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuZ2VucmUgPSB2YWx1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zdWJtaXQoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIEJ1dHRvbnNcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRcblx0XHRjb25zdCBjcmVhdGVCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJDcmVhdGVcIixcblx0XHRcdGNsczogXCJtb2QtY3RhXCIsXG5cdFx0fSk7XG5cdFx0Y3JlYXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnN1Ym1pdCgpKTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIkNhbmNlbFwiLFxuXHRcdH0pO1xuXHRcdGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblxuXHRcdC8vIEZvY3VzIG9uIG5hbWUgaW5wdXRcblx0XHRjb25zdCBuYW1lSW5wdXQgPSAoY29udGVudEVsIGFzIEhUTUxFbGVtZW50KS5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikgYXMgSFRNTElucHV0RWxlbWVudCB8IG51bGw7XG5cdFx0aWYgKG5hbWVJbnB1dCkge1xuXHRcdFx0bmFtZUlucHV0LmZvY3VzKCk7XG5cdFx0fVxuXHR9XG5cblx0c3VibWl0KCkge1xuXHRcdGNvbnN0IHRyaW1tZWROYW1lID0gdGhpcy5uYW1lLnRyaW0oKTtcblx0XHRjb25zdCB0cmltbWVkRGVzY3JpcHRpb24gPSB0aGlzLmRlc2NyaXB0aW9uLnRyaW0oKTtcblx0XHRjb25zdCB0cmltbWVkR2VucmUgPSB0aGlzLmdlbnJlLnRyaW0oKTtcblx0XHRcblx0XHRpZiAoIXRyaW1tZWROYW1lKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiUGxlYXNlIGVudGVyIGEgd29ybGQgbmFtZVwiLCAzMDAwKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIXRyaW1tZWRHZW5yZSkge1xuXHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBlbnRlciBhIGdlbnJlXCIsIDMwMDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuY2xvc2UoKTtcblx0XHR0aGlzLm9uU3VibWl0KHRyaW1tZWROYW1lLCB0cmltbWVkRGVzY3JpcHRpb24sIHRyaW1tZWRHZW5yZSk7XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGludGVyZmFjZSBFeHRyYWN0Q29uZmlnUmVzdWx0IHtcblx0ZW50aXR5VHlwZXM6IHN0cmluZ1tdO1xuXHRpbmNsdWRlUmVsYXRpb25zOiBib29sZWFuO1xufVxuXG5jb25zdCBFTlRJVFlfVFlQRV9PUFRJT05TID0gW1xuXHR7IHZhbHVlOiBcImNoYXJhY3RlclwiLCBsYWJlbDogXCJDaGFyYWN0ZXJcIiB9LFxuXHR7IHZhbHVlOiBcImxvY2F0aW9uXCIsIGxhYmVsOiBcIkxvY2F0aW9uXCIgfSxcblx0eyB2YWx1ZTogXCJhcnRlZmFjdFwiLCBsYWJlbDogXCJBcnRlZmFjdFwiIH0sXG5cdHsgdmFsdWU6IFwiZmFjdGlvblwiLCBsYWJlbDogXCJGYWN0aW9uXCIgfSxcblx0eyB2YWx1ZTogXCJldmVudFwiLCBsYWJlbDogXCJFdmVudFwiIH0sXG5dO1xuXG5leHBvcnQgY2xhc3MgRXh0cmFjdENvbmZpZ01vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRwcml2YXRlIHJlc29sdmU6ICgodmFsdWU6IEV4dHJhY3RDb25maWdSZXN1bHQgfCBudWxsKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIHNlbGVjdGVkVHlwZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcblx0cHJpdmF0ZSBpbmNsdWRlUmVsYXRpb25zID0gdHJ1ZTtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRhcHA6IEFwcCxcblx0XHRkZWZhdWx0VHlwZXM6IHN0cmluZ1tdLFxuXHRcdGRlZmF1bHRJbmNsdWRlUmVsYXRpb25zOiBib29sZWFuXG5cdCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0ZGVmYXVsdFR5cGVzLmZvckVhY2goKHR5cGUpID0+IHRoaXMuc2VsZWN0ZWRUeXBlcy5hZGQodHlwZSkpO1xuXHRcdHRoaXMuaW5jbHVkZVJlbGF0aW9ucyA9IGRlZmF1bHRJbmNsdWRlUmVsYXRpb25zO1xuXHR9XG5cblx0c3RhdGljIG9wZW4oXG5cdFx0YXBwOiBBcHAsXG5cdFx0ZGVmYXVsdFR5cGVzOiBzdHJpbmdbXSxcblx0XHRkZWZhdWx0SW5jbHVkZVJlbGF0aW9uczogYm9vbGVhblxuXHQpOiBQcm9taXNlPEV4dHJhY3RDb25maWdSZXN1bHQgfCBudWxsPiB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBFeHRyYWN0Q29uZmlnTW9kYWwoXG5cdFx0XHRcdGFwcCxcblx0XHRcdFx0ZGVmYXVsdFR5cGVzLFxuXHRcdFx0XHRkZWZhdWx0SW5jbHVkZVJlbGF0aW9uc1xuXHRcdFx0KTtcblx0XHRcdG1vZGFsLnJlc29sdmUgPSByZXNvbHZlO1xuXHRcdFx0bW9kYWwub3BlbigpO1xuXHRcdH0pO1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIkV4dHJhY3QgQ29uZmlndXJhdGlvblwiIH0pO1xuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0dGV4dDogXCJDaG9vc2Ugd2hpY2ggZW50aXR5IHR5cGVzIHRvIGV4dHJhY3QgYW5kIHdoZXRoZXIgdG8gaW5jbHVkZSByZWxhdGlvbnMuXCIsXG5cdFx0fSk7XG5cblx0XHRjb25zdCB0eXBlQmxvY2sgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWNvbmZpZ1wiIH0pO1xuXHRcdHR5cGVCbG9jay5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHR0ZXh0OiBcIkVudGl0eSB0eXBlc1wiLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWxhYmVsXCIsXG5cdFx0fSk7XG5cblx0XHRFTlRJVFlfVFlQRV9PUFRJT05TLmZvckVhY2goKG9wdGlvbikgPT4ge1xuXHRcdFx0Y29uc3Qgcm93ID0gdHlwZUJsb2NrLmNyZWF0ZURpdih7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1jb25maWctcm93XCIsXG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IGNoZWNrYm94ID0gcm93LmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuXHRcdFx0XHR0eXBlOiBcImNoZWNrYm94XCIsXG5cdFx0XHR9KTtcblx0XHRcdGNoZWNrYm94LmNoZWNrZWQgPSB0aGlzLnNlbGVjdGVkVHlwZXMuaGFzKG9wdGlvbi52YWx1ZSk7XG5cdFx0XHRjaGVja2JveC5vbmNoYW5nZSA9ICgpID0+IHtcblx0XHRcdFx0aWYgKGNoZWNrYm94LmNoZWNrZWQpIHtcblx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkVHlwZXMuYWRkKG9wdGlvbi52YWx1ZSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RlZFR5cGVzLmRlbGV0ZShvcHRpb24udmFsdWUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0cm93LmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IG9wdGlvbi5sYWJlbCB9KTtcblx0XHR9KTtcblxuXHRcdGNvbnN0IHJlbGF0aW9uUm93ID0gY29udGVudEVsLmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtY29uZmlnLXJvd1wiLFxuXHRcdH0pO1xuXHRcdGNvbnN0IHJlbGF0aW9uc0NoZWNrYm94ID0gcmVsYXRpb25Sb3cuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG5cdFx0XHR0eXBlOiBcImNoZWNrYm94XCIsXG5cdFx0fSk7XG5cdFx0cmVsYXRpb25zQ2hlY2tib3guY2hlY2tlZCA9IHRoaXMuaW5jbHVkZVJlbGF0aW9ucztcblx0XHRyZWxhdGlvbnNDaGVja2JveC5vbmNoYW5nZSA9ICgpID0+IHtcblx0XHRcdHRoaXMuaW5jbHVkZVJlbGF0aW9ucyA9IHJlbGF0aW9uc0NoZWNrYm94LmNoZWNrZWQ7XG5cdFx0fTtcblx0XHRyZWxhdGlvblJvdy5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBcIkluY2x1ZGUgcmVsYXRpb25zXCIgfSk7XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIsXG5cdFx0fSk7XG5cdFx0Y29uc3Qgc3VibWl0QnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiU3RhcnQgRXh0cmFjdGlvblwiLFxuXHRcdFx0Y2xzOiBcIm1vZC1jdGFcIixcblx0XHR9KTtcblx0XHRzdWJtaXRCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuc3VibWl0KCk7XG5cblx0XHRjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJDYW5jZWxcIixcblx0XHR9KTtcblx0XHRjYW5jZWxCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuY2FuY2VsKCk7XG5cdH1cblxuXHRwcml2YXRlIHN1Ym1pdCgpIHtcblx0XHRjb25zdCB0eXBlcyA9IEFycmF5LmZyb20odGhpcy5zZWxlY3RlZFR5cGVzKTtcblx0XHRpZiAodHlwZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiU2VsZWN0IGF0IGxlYXN0IG9uZSBlbnRpdHkgdHlwZS5cIiwgMzAwMCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmICh0aGlzLnJlc29sdmUpIHtcblx0XHRcdHRoaXMucmVzb2x2ZSh7XG5cdFx0XHRcdGVudGl0eVR5cGVzOiB0eXBlcyxcblx0XHRcdFx0aW5jbHVkZVJlbGF0aW9uczogdGhpcy5pbmNsdWRlUmVsYXRpb25zLFxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdHRoaXMuY2xvc2UoKTtcblx0fVxuXG5cdHByaXZhdGUgY2FuY2VsKCkge1xuXHRcdGlmICh0aGlzLnJlc29sdmUpIHtcblx0XHRcdHRoaXMucmVzb2x2ZShudWxsKTtcblx0XHR9XG5cdFx0dGhpcy5jbG9zZSgpO1xuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuIiwgImltcG9ydCB7IE5vdGljZSwgVEZpbGUsIFRGb2xkZXIsIFZhdWx0IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBTdG9yeSwgQ2hhcHRlciwgQ2hhcHRlcldpdGhDb250ZW50LCBTdG9yeU1ldGFkYXRhLCBTY2VuZSwgQmVhdCwgU2NlbmVXaXRoQmVhdHMsIENvbnRlbnRCbG9jaywgQ29udGVudEFuY2hvciB9IGZyb20gXCIuLi90eXBlc1wiO1xuXG4vLyBTdHJ1Y3R1cmUgdG8gb3JnYW5pemUgY29udGVudCBibG9ja3MgYnkgdGhlaXIgYXNzb2NpYXRpb25zXG5leHBvcnQgaW50ZXJmYWNlIENvbnRlbnRCbG9ja09yZ2FuaXphdGlvbiB7XG5cdGNoYXB0ZXJPbmx5OiBDb250ZW50QmxvY2tbXTsgLy8gQ29udGVudCBibG9ja3Mgb25seSBhc3NvY2lhdGVkIHdpdGggY2hhcHRlclxuXHRieVNjZW5lOiBNYXA8c3RyaW5nLCB7IHNjZW5lOiBTY2VuZTsgY29udGVudEJsb2NrczogQ29udGVudEJsb2NrW10gfT47IC8vIENvbnRlbnQgYmxvY2tzIGJ5IHNjZW5lIElEXG5cdGJ5QmVhdDogTWFwPHN0cmluZywgeyBiZWF0OiBCZWF0OyBjb250ZW50QmxvY2tzOiBDb250ZW50QmxvY2tbXSB9PjsgLy8gQ29udGVudCBibG9ja3MgYnkgYmVhdCBJRFxufVxuXG5leHBvcnQgY2xhc3MgRmlsZU1hbmFnZXIge1xuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIHZhdWx0OiBWYXVsdCxcblx0XHRwcml2YXRlIGJhc2VGb2xkZXI6IHN0cmluZ1xuXHQpIHt9XG5cblx0Ly8gRXhwb3NlIHZhdWx0IGZvciBzeW5jIG9wZXJhdGlvbnNcblx0Z2V0VmF1bHQoKTogVmF1bHQge1xuXHRcdHJldHVybiB0aGlzLnZhdWx0O1xuXHR9XG5cblx0Ly8gR2V0IHRoZSBmb2xkZXIgcGF0aCBmb3IgYSBzcGVjaWZpYyBzdG9yeVxuXHRnZXRTdG9yeUZvbGRlclBhdGgoc3RvcnlUaXRsZTogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRjb25zdCBzYW5pdGl6ZWQgPSB0aGlzLnNhbml0aXplRm9sZGVyTmFtZShzdG9yeVRpdGxlKTtcblx0XHRyZXR1cm4gYCR7dGhpcy5iYXNlRm9sZGVyfS8ke3Nhbml0aXplZH1gO1xuXHR9XG5cblx0Ly8gU2FuaXRpemUgZm9sZGVyL2ZpbGUgbmFtZXNcblx0cHJpdmF0ZSBzYW5pdGl6ZUZvbGRlck5hbWUobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gbmFtZVxuXHRcdFx0LnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXS9nLCBcIi1cIilcblx0XHRcdC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKVxuXHRcdFx0LnRyaW0oKTtcblx0fVxuXG5cdC8vIEdlbmVyYXRlIGZyb250bWF0dGVyIHdpdGggT2JzaWRpYW4gdGFnc1xuXHRwcml2YXRlIGdlbmVyYXRlRnJvbnRtYXR0ZXIoXG5cdFx0YmFzZUZpZWxkczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgbnVsbD4sXG5cdFx0ZXh0cmFGaWVsZHM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXIgfCBudWxsPixcblx0XHRvcHRpb25zPzoge1xuXHRcdFx0ZW50aXR5VHlwZTogXCJzdG9yeVwiIHwgXCJjaGFwdGVyXCIgfCBcInNjZW5lXCIgfCBcImJlYXRcIiB8IFwiY29udGVudC1ibG9ja1wiO1xuXHRcdFx0c3RvcnlOYW1lPzogc3RyaW5nO1xuXHRcdFx0ZGF0ZT86IHN0cmluZzsgLy8gSVNPIGRhdGUgc3RyaW5nIChZWVlZLU1NLUREKSBvciBEYXRlIG9iamVjdFxuXHRcdH1cblx0KTogc3RyaW5nIHtcblx0XHRjb25zdCBmaWVsZHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlciB8IG51bGw+ID0geyAuLi5iYXNlRmllbGRzIH07XG5cblx0XHQvLyBBZGQgZXh0cmEgZmllbGRzIGlmIHByb3ZpZGVkXG5cdFx0aWYgKGV4dHJhRmllbGRzKSB7XG5cdFx0XHRPYmplY3QuYXNzaWduKGZpZWxkcywgZXh0cmFGaWVsZHMpO1xuXHRcdH1cblxuXHRcdC8vIEdlbmVyYXRlIHRhZ3MgKHdpdGhvdXQgIyBwcmVmaXggLSBPYnNpZGlhbiBhZGRzIGl0IGF1dG9tYXRpY2FsbHkpXG5cdFx0Y29uc3QgdGFnczogc3RyaW5nW10gPSBbXTtcblx0XHRpZiAob3B0aW9ucykge1xuXHRcdFx0Ly8gRW50aXR5IHR5cGUgdGFnXG5cdFx0XHR0YWdzLnB1c2goYHN0b3J5LWVuZ2luZS8ke29wdGlvbnMuZW50aXR5VHlwZX1gKTtcblxuXHRcdFx0Ly8gU3RvcnkgbmFtZSB0YWcgKHNhbml0aXplZClcblx0XHRcdGlmIChvcHRpb25zLnN0b3J5TmFtZSkge1xuXHRcdFx0XHRjb25zdCBzYW5pdGl6ZWRTdG9yeU5hbWUgPSB0aGlzLnNhbml0aXplRm9sZGVyTmFtZShvcHRpb25zLnN0b3J5TmFtZSlcblx0XHRcdFx0XHQudG9Mb3dlckNhc2UoKVxuXHRcdFx0XHRcdC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKTtcblx0XHRcdFx0dGFncy5wdXNoKGBzdG9yeS8ke3Nhbml0aXplZFN0b3J5TmFtZX1gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRGF0ZSB0YWcgaW4gZm9ybWF0IFlZWVkvTU0vRERcblx0XHRcdGlmIChvcHRpb25zLmRhdGUpIHtcblx0XHRcdFx0Y29uc3QgZGF0ZSA9IHR5cGVvZiBvcHRpb25zLmRhdGUgPT09IFwic3RyaW5nXCIgPyBuZXcgRGF0ZShvcHRpb25zLmRhdGUpIDogb3B0aW9ucy5kYXRlO1xuXHRcdFx0XHRpZiAoIWlzTmFOKGRhdGUuZ2V0VGltZSgpKSkge1xuXHRcdFx0XHRcdGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG5cdFx0XHRcdFx0Y29uc3QgbW9udGggPSBTdHJpbmcoZGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgXCIwXCIpO1xuXHRcdFx0XHRcdGNvbnN0IGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgXCIwXCIpO1xuXHRcdFx0XHRcdHRhZ3MucHVzaChgZGF0ZS8ke3llYXJ9LyR7bW9udGh9LyR7ZGF5fWApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQnVpbGQgZnJvbnRtYXR0ZXIgbGluZXNcblx0XHRjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXCItLS1cIl07XG5cblx0XHQvLyBBZGQgYWxsIGZpZWxkc1xuXHRcdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGZpZWxkcykpIHtcblx0XHRcdGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGxpbmVzLnB1c2goYCR7a2V5fTogbnVsbGApO1xuXHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcblx0XHRcdFx0Ly8gRXNjYXBlIHF1b3RlcyBhbmQgd3JhcCBpbiBxdW90ZXMgaWYgY29udGFpbnMgc3BlY2lhbCBjaGFyc1xuXHRcdFx0XHRjb25zdCBlc2NhcGVkID0gdmFsdWUucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpO1xuXHRcdFx0XHRpZiAodmFsdWUuaW5jbHVkZXMoXCI6XCIpIHx8IHZhbHVlLmluY2x1ZGVzKFwiXFxuXCIpIHx8IHZhbHVlLmluY2x1ZGVzKCdcIicpKSB7XG5cdFx0XHRcdFx0bGluZXMucHVzaChgJHtrZXl9OiBcIiR7ZXNjYXBlZH1cImApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGxpbmVzLnB1c2goYCR7a2V5fTogJHtlc2NhcGVkfWApO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRsaW5lcy5wdXNoKGAke2tleX06ICR7dmFsdWV9YCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIHRhZ3MgaWYgYW55XG5cdFx0aWYgKHRhZ3MubGVuZ3RoID4gMCkge1xuXHRcdFx0bGluZXMucHVzaChgdGFnczpgKTtcblx0XHRcdGZvciAoY29uc3QgdGFnIG9mIHRhZ3MpIHtcblx0XHRcdFx0bGluZXMucHVzaChgICAtICR7dGFnfWApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGxpbmVzLnB1c2goXCItLS1cIiwgXCJcIik7XG5cblx0XHRyZXR1cm4gbGluZXMuam9pbihcIlxcblwiKTtcblx0fVxuXG5cdC8vIEVuc3VyZSBmb2xkZXIgZXhpc3RzXG5cdGFzeW5jIGVuc3VyZUZvbGRlckV4aXN0cyhwYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBmb2xkZXIgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcblx0XHRpZiAoIWZvbGRlcikge1xuXHRcdFx0YXdhaXQgdGhpcy52YXVsdC5jcmVhdGVGb2xkZXIocGF0aCk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gV3JpdGUgc3RvcnkgbWV0YWRhdGEgKHN0b3J5Lm1kKVxuXHRhc3luYyB3cml0ZVN0b3J5TWV0YWRhdGEoXG5cdFx0c3Rvcnk6IFN0b3J5LCBcblx0XHRmb2xkZXJQYXRoOiBzdHJpbmcsIFxuXHRcdGNoYXB0ZXJzPzogQ2hhcHRlcldpdGhDb250ZW50W10sIFxuXHRcdG9ycGhhblNjZW5lcz86IFNjZW5lV2l0aEJlYXRzW10sIFxuXHRcdG9ycGhhbkJlYXRzPzogQmVhdFtdLFxuXHRcdGNoYXB0ZXJDb250ZW50RGF0YT86IE1hcDxzdHJpbmcsIHsgY29udGVudEJsb2NrczogQ29udGVudEJsb2NrW10sIGNvbnRlbnRCbG9ja1JlZnM6IENvbnRlbnRBbmNob3JbXSB9PlxuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLmVuc3VyZUZvbGRlckV4aXN0cyhmb2xkZXJQYXRoKTtcblxuXHRcdGNvbnN0IGJhc2VGaWVsZHMgPSB7XG5cdFx0XHRpZDogc3RvcnkuaWQsXG5cdFx0XHR0aXRsZTogc3RvcnkudGl0bGUsXG5cdFx0XHRzdGF0dXM6IHN0b3J5LnN0YXR1cyxcblx0XHRcdHZlcnNpb246IHN0b3J5LnZlcnNpb25fbnVtYmVyLFxuXHRcdFx0cm9vdF9zdG9yeV9pZDogc3Rvcnkucm9vdF9zdG9yeV9pZCxcblx0XHRcdHByZXZpb3VzX3ZlcnNpb25faWQ6IHN0b3J5LnByZXZpb3VzX3N0b3J5X2lkLFxuXHRcdFx0Y3JlYXRlZF9hdDogc3RvcnkuY3JlYXRlZF9hdCxcblx0XHRcdHVwZGF0ZWRfYXQ6IHN0b3J5LnVwZGF0ZWRfYXQsXG5cdFx0fTtcblxuXHRcdGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5nZW5lcmF0ZUZyb250bWF0dGVyKGJhc2VGaWVsZHMsIHVuZGVmaW5lZCwge1xuXHRcdFx0ZW50aXR5VHlwZTogXCJzdG9yeVwiLFxuXHRcdFx0c3RvcnlOYW1lOiBzdG9yeS50aXRsZSxcblx0XHRcdGRhdGU6IHN0b3J5LmNyZWF0ZWRfYXQsXG5cdFx0fSk7XG5cblx0XHRsZXQgY29udGVudCA9IGAke2Zyb250bWF0dGVyfVxcbiMgJHtzdG9yeS50aXRsZX1cXG5cXG5WZXJzaW9uOiAke3N0b3J5LnZlcnNpb25fbnVtYmVyfVxcblN0YXR1czogJHtzdG9yeS5zdGF0dXN9XFxuXFxuYDtcblxuXHRcdC8vIEZpbHRlciBvdXQgdGVtcG9yYXJ5IGNoYXB0ZXJzIHVzZWQgZm9yIHByb3NlIHN0b3JhZ2Vcblx0XHRjb25zdCB0ZW1wb3JhcnlDaGFwdGVyVGl0bGVzID0gW1wiU3RvcnkgUHJvc2VcIiwgXCJTY2VuZS1MZXZlbCBQcm9zZVwiLCBcIkJlYXQtTGV2ZWwgUHJvc2VcIl07XG5cdFx0Y29uc3QgZmlsdGVyZWRDaGFwdGVycyA9IGNoYXB0ZXJzPy5maWx0ZXIoYyA9PiBcblx0XHRcdCF0ZW1wb3JhcnlDaGFwdGVyVGl0bGVzLmluY2x1ZGVzKGMuY2hhcHRlci50aXRsZSkgJiYgYy5jaGFwdGVyLm51bWJlciA8IDkwMDBcblx0XHQpIHx8IFtdO1xuXG5cdFx0Ly8gR2VuZXJhdGUgaGllcmFyY2hpY2FsIGxpc3Qgb2YgY2hhcHRlcnMsIHNjZW5lcyBhbmQgYmVhdHMgaWYgcHJvdmlkZWRcblx0XHRpZiAoZmlsdGVyZWRDaGFwdGVycy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb250ZW50ICs9IGAjIyBDaGFwdGVycywgU2NlbmVzICYgQmVhdHNcXG5cXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiBbIWluZm9dIEhvdyB0byB1c2UgdGhpcyBsaXN0XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gLSAqKkNyZWF0ZSBuZXcgaXRlbSoqOiBBZGQgYSBsaW5lIHdpdGggXFxgLVxcYCBmb2xsb3dlZCBieSB0aGUgdGV4dFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgLSAqKkNoYXB0ZXIqKjogTm8gaW5kZW50YXRpb24gKGxldmVsIDApXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAtICoqU2NlbmUqKjogVXNlIDEgdGFiIGluZGVudGF0aW9uIChpbnNpZGUgYSBjaGFwdGVyKVxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgLSAqKkJlYXQqKjogVXNlIDIgdGFicyBpbmRlbnRhdGlvbiAoaW5zaWRlIGEgc2NlbmUpXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gLSAqKlJlb3JkZXIqKjogTW92ZSBpdGVtcyB1cC9kb3duIHRvIGNoYW5nZSBvcmRlclxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipMaW5rcyoqOiBVc2UgXFxgW1tsaW5rLW5hbWV8dGV4dF1dXFxgIHRvIGNyZWF0ZSBsaW5rcyB0byBleGlzdGluZyBmaWxlc1xcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipGb3JtYXQqKjpcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgIC0gKipDaGFwdGVyKio6XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgIC0gQ29tcGxldGU6IFxcYENoYXB0ZXIgTjogdGl0bGVcXGBcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgICAgLSBTaW1wbGlmaWVkOiBcXGB0aXRsZVxcYFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgLSAqKlNjZW5lKio6XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgIC0gQ29tcGxldGU6IFxcYFNjZW5lIE46IGdvYWwgLSB0aW1lUmVmXFxgXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgIC0gU2ltcGxpZmllZDpcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgICAgICAtIFxcYGdvYWwgLSB0aW1lUmVmXFxgXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgICAgLSBcXGBnb2FsXFxgXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAtICoqQmVhdCoqOlxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgICAtIENvbXBsZXRlOiBcXGBCZWF0IE46IGludGVudCAtPiBvdXRjb21lXFxgXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgIC0gU2ltcGxpZmllZDpcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgICAgICAtIFxcYGludGVudCAtPiBvdXRjb21lXFxgXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgICAgLSBcXGBpbnRlbnRcXGBcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqTWFya2VycyoqOiBcXGAtXFxgIGluZGljYXRlcyBubyBhc3NvY2lhdGVkIHByb3NlLCBcXGArXFxgIGluZGljYXRlcyBhc3NvY2lhdGVkIHByb3NlXFxuXFxuYDtcblx0XHRcdFxuXHRcdFx0Ly8gQWRkIGNoYXB0ZXJzIHdpdGggdGhlaXIgc2NlbmVzIGFuZCBiZWF0c1xuXHRcdFx0Zm9yIChjb25zdCBjaGFwdGVyV2l0aENvbnRlbnQgb2YgZmlsdGVyZWRDaGFwdGVycykge1xuXHRcdFx0XHRjb25zdCBjaGFwdGVyID0gY2hhcHRlcldpdGhDb250ZW50LmNoYXB0ZXI7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJGaWxlTmFtZSA9IGBDaGFwdGVyLSR7Y2hhcHRlci5udW1iZXJ9Lm1kYDtcblx0XHRcdFx0Y29uc3QgY2hhcHRlckxpbmtOYW1lID0gY2hhcHRlckZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gRm9yIG5vdywgd2UgZG9uJ3QgdHJhY2sgcHJvc2UgYXQgc3RvcnkgbGV2ZWwsIHNvIGFsd2F5cyB1c2UgXCItXCJcblx0XHRcdFx0Ly8gSW4gdGhlIGZ1dHVyZSwgd2UgY291bGQgY2hlY2sgaWYgY2hhcHRlciBoYXMgYW55IHByb3NlIGJsb2Nrc1xuXHRcdFx0XHRjb250ZW50ICs9IGAtIFtbJHtjaGFwdGVyTGlua05hbWV9fENoYXB0ZXIgJHtjaGFwdGVyLm51bWJlcn06ICR7Y2hhcHRlci50aXRsZX1dXVxcbmA7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBBZGQgc2NlbmVzIGZvciB0aGlzIGNoYXB0ZXJcblx0XHRcdFx0Zm9yIChjb25zdCB7IHNjZW5lLCBiZWF0cyB9IG9mIGNoYXB0ZXJXaXRoQ29udGVudC5zY2VuZXMpIHtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZVNjZW5lRmlsZU5hbWUoc2NlbmUpO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lTGlua05hbWUgPSBzY2VuZUZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lRGlzcGxheVRleHQgPSBzY2VuZS50aW1lX3JlZiBcblx0XHRcdFx0XHRcdD8gYCR7c2NlbmUuZ29hbH0gLSAke3NjZW5lLnRpbWVfcmVmfWBcblx0XHRcdFx0XHRcdDogc2NlbmUuZ29hbDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBGb3Igbm93LCB3ZSBkb24ndCB0cmFjayBwcm9zZSBhdCBzdG9yeSBsZXZlbCwgc28gYWx3YXlzIHVzZSBcIi1cIlxuXHRcdFx0XHRcdGNvbnRlbnQgKz0gYFxcdC0gW1ske3NjZW5lTGlua05hbWV9fFNjZW5lICR7c2NlbmUub3JkZXJfbnVtfTogJHtzY2VuZURpc3BsYXlUZXh0fV1dXFxuYDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBBZGQgYmVhdHMgZm9yIHRoaXMgc2NlbmVcblx0XHRcdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRcdFx0XHRjb25zdCBiZWF0TGlua05hbWUgPSBiZWF0RmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHRjb25zdCBiZWF0RGlzcGxheVRleHQgPSBiZWF0Lm91dGNvbWVcblx0XHRcdFx0XHRcdFx0PyBgJHtiZWF0LmludGVudH0gLT4gJHtiZWF0Lm91dGNvbWV9YFxuXHRcdFx0XHRcdFx0XHQ6IGJlYXQuaW50ZW50O1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvLyBGb3Igbm93LCB3ZSBkb24ndCB0cmFjayBwcm9zZSBhdCBzdG9yeSBsZXZlbCwgc28gYWx3YXlzIHVzZSBcIi1cIlxuXHRcdFx0XHRcdFx0Y29udGVudCArPSBgXFx0XFx0LSBbWyR7YmVhdExpbmtOYW1lfXxCZWF0ICR7YmVhdC5vcmRlcl9udW19OiAke2JlYXREaXNwbGF5VGV4dH1dXVxcbmA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRjb250ZW50ICs9IGBcXG5gO1xuXHRcdH1cblx0XHRcblx0XHQvLyBHZW5lcmF0ZSBzZXBhcmF0ZSBsaXN0IGZvciBvcnBoYW4gc2NlbmVzIChzY2VuZXMgd2l0aG91dCBjaGFwdGVyX2lkKVxuXHRcdGlmIChvcnBoYW5TY2VuZXMgJiYgb3JwaGFuU2NlbmVzLmxlbmd0aCA+IDApIHtcblx0XHRcdGNvbnRlbnQgKz0gYCMjIE9ycGhhbiBTY2VuZXNcXG5cXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiBbIWluZm9dIFNjZW5lcyB3aXRob3V0IGEgY2hhcHRlclxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IFRoZXNlIHNjZW5lcyBhcmUgbm90IGFzc29jaWF0ZWQgd2l0aCBhbnkgY2hhcHRlci4gWW91IGNhbjpcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqUmVvcmRlcioqOiBNb3ZlIGl0ZW1zIHVwL2Rvd24gdG8gY2hhbmdlIG9yZGVyXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gLSAqKkxpbmtzKio6IFVzZSBcXGBbW2xpbmstbmFtZXx0ZXh0XV1cXGAgdG8gY3JlYXRlIGxpbmtzIHRvIGV4aXN0aW5nIGZpbGVzXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gLSAqKkZvcm1hdCoqOlxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgLSBDb21wbGV0ZTogXFxgU2NlbmUgTjogZ29hbCAtIHRpbWVSZWZcXGBcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgIC0gU2ltcGxpZmllZDpcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgICAgLSBcXGBnb2FsIC0gdGltZVJlZlxcYFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgICAtIFxcYGdvYWxcXGBcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqTWFya2VycyoqOiBcXGAtXFxgIGluZGljYXRlcyBubyBhc3NvY2lhdGVkIHByb3NlLCBcXGArXFxgIGluZGljYXRlcyBhc3NvY2lhdGVkIHByb3NlXFxuXFxuYDtcblx0XHRcdFxuXHRcdFx0Zm9yIChjb25zdCB7IHNjZW5lLCBiZWF0cyB9IG9mIG9ycGhhblNjZW5lcykge1xuXHRcdFx0XHRjb25zdCBzY2VuZUZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZVNjZW5lRmlsZU5hbWUoc2NlbmUpO1xuXHRcdFx0XHRjb25zdCBzY2VuZUxpbmtOYW1lID0gc2NlbmVGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0Y29uc3Qgc2NlbmVEaXNwbGF5VGV4dCA9IHNjZW5lLnRpbWVfcmVmIFxuXHRcdFx0XHRcdD8gYCR7c2NlbmUuZ29hbH0gLSAke3NjZW5lLnRpbWVfcmVmfWBcblx0XHRcdFx0XHQ6IHNjZW5lLmdvYWw7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBGb3Igbm93LCB3ZSBkb24ndCB0cmFjayBwcm9zZSBhdCBzdG9yeSBsZXZlbCwgc28gYWx3YXlzIHVzZSBcIi1cIlxuXHRcdFx0XHRjb250ZW50ICs9IGAtIFtbJHtzY2VuZUxpbmtOYW1lfXxTY2VuZSAke3NjZW5lLm9yZGVyX251bX06ICR7c2NlbmVEaXNwbGF5VGV4dH1dXVxcbmA7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBBZGQgYmVhdHMgZm9yIHRoaXMgc2NlbmVcblx0XHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIGJlYXRzKSB7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdFx0XHRjb25zdCBiZWF0TGlua05hbWUgPSBiZWF0RmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdERpc3BsYXlUZXh0ID0gYmVhdC5vdXRjb21lXG5cdFx0XHRcdFx0XHQ/IGAke2JlYXQuaW50ZW50fSAtPiAke2JlYXQub3V0Y29tZX1gXG5cdFx0XHRcdFx0XHQ6IGJlYXQuaW50ZW50O1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIEZvciBub3csIHdlIGRvbid0IHRyYWNrIHByb3NlIGF0IHN0b3J5IGxldmVsLCBzbyBhbHdheXMgdXNlIFwiLVwiXG5cdFx0XHRcdFx0Y29udGVudCArPSBgXFx0LSBbWyR7YmVhdExpbmtOYW1lfXxCZWF0ICR7YmVhdC5vcmRlcl9udW19OiAke2JlYXREaXNwbGF5VGV4dH1dXVxcbmA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGNvbnRlbnQgKz0gYFxcbmA7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIEdlbmVyYXRlIHNlcGFyYXRlIGxpc3QgZm9yIG9ycGhhbiBiZWF0cyAoYmVhdHMgd2l0aG91dCBzY2VuZV9pZClcblx0XHRpZiAob3JwaGFuQmVhdHMgJiYgb3JwaGFuQmVhdHMubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29udGVudCArPSBgIyMgT3JwaGFuIEJlYXRzXFxuXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gWyFpbmZvXSBCZWF0cyB3aXRob3V0IGEgc2NlbmVcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiBUaGVzZSBiZWF0cyBhcmUgbm90IGFzc29jaWF0ZWQgd2l0aCBhbnkgc2NlbmUuIFlvdSBjYW46XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gLSAqKlJlb3JkZXIqKjogTW92ZSBpdGVtcyB1cC9kb3duIHRvIGNoYW5nZSBvcmRlclxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipMaW5rcyoqOiBVc2UgXFxgW1tsaW5rLW5hbWV8dGV4dF1dXFxgIHRvIGNyZWF0ZSBsaW5rcyB0byBleGlzdGluZyBmaWxlc1xcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipGb3JtYXQqKjpcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgIC0gQ29tcGxldGU6IFxcYEJlYXQgTjogaW50ZW50IC0+IG91dGNvbWVcXGBcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgIC0gU2ltcGxpZmllZDpcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgICAgLSBcXGBpbnRlbnQgLT4gb3V0Y29tZVxcYFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgICAtIFxcYGludGVudFxcYFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipNYXJrZXJzKio6IFxcYC1cXGAgaW5kaWNhdGVzIG5vIGFzc29jaWF0ZWQgcHJvc2UsIFxcYCtcXGAgaW5kaWNhdGVzIGFzc29jaWF0ZWQgcHJvc2VcXG5cXG5gO1xuXHRcdFx0XG5cdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2Ygb3JwaGFuQmVhdHMpIHtcblx0XHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRjb25zdCBiZWF0RGlzcGxheVRleHQgPSBiZWF0Lm91dGNvbWVcblx0XHRcdFx0XHQ/IGAke2JlYXQuaW50ZW50fSAtPiAke2JlYXQub3V0Y29tZX1gXG5cdFx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIEZvciBub3csIHdlIGRvbid0IHRyYWNrIHByb3NlIGF0IHN0b3J5IGxldmVsLCBzbyBhbHdheXMgdXNlIFwiLVwiXG5cdFx0XHRcdGNvbnRlbnQgKz0gYC0gW1ske2JlYXRMaW5rTmFtZX18QmVhdCAke2JlYXQub3JkZXJfbnVtfTogJHtiZWF0RGlzcGxheVRleHR9XV1cXG5gO1xuXHRcdFx0fVxuXHRcdFx0Y29udGVudCArPSBgXFxuYDtcblx0XHR9XG5cblx0XHQvLyBHZW5lcmF0ZSBoaWVyYXJjaGljYWwgcHJvc2Ugc2VjdGlvbiBmb3IgdGhlIHN0b3J5XG5cdFx0Y29udGVudCArPSBgIyBTdG9yeTogJHtzdG9yeS50aXRsZX1cXG5cXG5gO1xuXG5cdFx0Ly8gQWRkIGNoYXB0ZXJzIHdpdGggdGhlaXIgc2NlbmVzLCBiZWF0cywgYW5kIHByb3NlIGJsb2Nrc1xuXHRcdGlmIChmaWx0ZXJlZENoYXB0ZXJzLmxlbmd0aCA+IDApIHtcblx0XHRcdGZvciAoY29uc3QgY2hhcHRlcldpdGhDb250ZW50IG9mIGZpbHRlcmVkQ2hhcHRlcnMpIHtcblx0XHRcdFx0Y29uc3QgY2hhcHRlciA9IGNoYXB0ZXJXaXRoQ29udGVudC5jaGFwdGVyO1xuXHRcdFx0XHRjb25zdCBjaGFwdGVyRmlsZU5hbWUgPSBgQ2hhcHRlci0ke2NoYXB0ZXIubnVtYmVyfS5tZGA7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJMaW5rTmFtZSA9IGNoYXB0ZXJGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnRlbnQgKz0gYCMjIENoYXB0ZXIgJHtjaGFwdGVyLm51bWJlcn06IFtbJHtjaGFwdGVyTGlua05hbWV9fCR7Y2hhcHRlci50aXRsZX1dXVxcblxcbmA7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBHZXQgY29udGVudCBkYXRhIGZvciB0aGlzIGNoYXB0ZXJcblx0XHRcdFx0Y29uc3QgY29udGVudERhdGEgPSBjaGFwdGVyQ29udGVudERhdGE/LmdldChjaGFwdGVyLmlkKTtcblx0XHRcdFx0bGV0IG9yZ2FuaXphdGlvbjogUmV0dXJuVHlwZTx0eXBlb2YgdGhpcy5vcmdhbml6ZUNvbnRlbnRCbG9ja3M+IHwgbnVsbCA9IG51bGw7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoY29udGVudERhdGEpIHtcblx0XHRcdFx0XHRvcmdhbml6YXRpb24gPSB0aGlzLm9yZ2FuaXplQ29udGVudEJsb2Nrcyhcblx0XHRcdFx0XHRcdGNvbnRlbnREYXRhLmNvbnRlbnRCbG9ja3MsXG5cdFx0XHRcdFx0XHRjb250ZW50RGF0YS5jb250ZW50QmxvY2tSZWZzLFxuXHRcdFx0XHRcdFx0Y2hhcHRlcldpdGhDb250ZW50LnNjZW5lc1xuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gQWRkIGNoYXB0ZXItb25seSBjb250ZW50IGJsb2Nrc1xuXHRcdFx0XHRcdGZvciAoY29uc3QgY29udGVudEJsb2NrIG9mIG9yZ2FuaXphdGlvbi5jaGFwdGVyT25seSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoY29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHRjb250ZW50ICs9IGBbWyR7bGlua05hbWV9fCR7Y29udGVudEJsb2NrLmNvbnRlbnQuc3Vic3RyaW5nKDAsIDUwKX0uLi5dXVxcblxcbmA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBBZGQgc2NlbmVzIGZvciB0aGlzIGNoYXB0ZXJcblx0XHRcdFx0Zm9yIChjb25zdCB7IHNjZW5lLCBiZWF0cyB9IG9mIGNoYXB0ZXJXaXRoQ29udGVudC5zY2VuZXMpIHtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZVNjZW5lRmlsZU5hbWUoc2NlbmUpO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lTGlua05hbWUgPSBzY2VuZUZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lRGlzcGxheVRleHQgPSBzY2VuZS50aW1lX3JlZiBcblx0XHRcdFx0XHRcdD8gYCR7c2NlbmUuZ29hbH0gLSAke3NjZW5lLnRpbWVfcmVmfWBcblx0XHRcdFx0XHRcdDogc2NlbmUuZ29hbDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjb250ZW50ICs9IGAjIyMgU2NlbmU6IFtbJHtzY2VuZUxpbmtOYW1lfXwke3NjZW5lRGlzcGxheVRleHR9XV1cXG5cXG5gO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIEFkZCBzY2VuZSBjb250ZW50IGJsb2Nrc1xuXHRcdFx0XHRcdGlmIChvcmdhbml6YXRpb24pIHtcblx0XHRcdFx0XHRcdGNvbnN0IHNjZW5lQ29udGVudEJsb2NrcyA9IG9yZ2FuaXphdGlvbi5ieVNjZW5lLmdldChzY2VuZS5pZCk/LmNvbnRlbnRCbG9ja3MgfHwgW107XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBzY2VuZUNvbnRlbnRCbG9ja3MpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoY29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSBmaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRcdFx0Y29udGVudCArPSBgW1ske2xpbmtOYW1lfXwke2NvbnRlbnRCbG9jay5jb250ZW50LnN1YnN0cmluZygwLCA1MCl9Li4uXV1cXG5cXG5gO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBBZGQgYmVhdHMgZm9yIHRoaXMgc2NlbmVcblx0XHRcdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRcdFx0XHRjb25zdCBiZWF0TGlua05hbWUgPSBiZWF0RmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHRjb25zdCBiZWF0RGlzcGxheVRleHQgPSBiZWF0Lm91dGNvbWVcblx0XHRcdFx0XHRcdFx0PyBgJHtiZWF0LmludGVudH0gLT4gJHtiZWF0Lm91dGNvbWV9YFxuXHRcdFx0XHRcdFx0XHQ6IGJlYXQuaW50ZW50O1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRjb250ZW50ICs9IGAjIyMjIEJlYXQ6IFtbJHtiZWF0TGlua05hbWV9fCR7YmVhdERpc3BsYXlUZXh0fV1dXFxuXFxuYDtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gQWRkIGJlYXQgY29udGVudCBibG9ja3Ncblx0XHRcdFx0XHRcdGlmIChvcmdhbml6YXRpb24pIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgYmVhdENvbnRlbnRCbG9ja3MgPSBvcmdhbml6YXRpb24uYnlCZWF0LmdldChiZWF0LmlkKT8uY29udGVudEJsb2NrcyB8fCBbXTtcblx0XHRcdFx0XHRcdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2YgYmVhdENvbnRlbnRCbG9ja3MpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShjb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHRcdFx0Y29udGVudCArPSBgW1ske2xpbmtOYW1lfXwke2NvbnRlbnRCbG9jay5jb250ZW50LnN1YnN0cmluZygwLCA1MCl9Li4uXV1cXG5cXG5gO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIG9ycGhhbiBzY2VuZXMgaW4gdGhlIHByb3NlIHNlY3Rpb25cblx0XHRpZiAob3JwaGFuU2NlbmVzICYmIG9ycGhhblNjZW5lcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRmb3IgKGNvbnN0IHsgc2NlbmUsIGJlYXRzIH0gb2Ygb3JwaGFuU2NlbmVzKSB7XG5cdFx0XHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0XHRcdGNvbnN0IHNjZW5lTGlua05hbWUgPSBzY2VuZUZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRjb25zdCBzY2VuZURpc3BsYXlUZXh0ID0gc2NlbmUudGltZV9yZWYgXG5cdFx0XHRcdFx0PyBgJHtzY2VuZS5nb2FsfSAtICR7c2NlbmUudGltZV9yZWZ9YFxuXHRcdFx0XHRcdDogc2NlbmUuZ29hbDtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnRlbnQgKz0gYCMjIyBTY2VuZTogW1ske3NjZW5lTGlua05hbWV9fCR7c2NlbmVEaXNwbGF5VGV4dH1dXVxcblxcbmA7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBBZGQgYmVhdHMgZm9yIHRoaXMgc2NlbmVcblx0XHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIGJlYXRzKSB7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdFx0XHRjb25zdCBiZWF0TGlua05hbWUgPSBiZWF0RmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdERpc3BsYXlUZXh0ID0gYmVhdC5vdXRjb21lXG5cdFx0XHRcdFx0XHQ/IGAke2JlYXQuaW50ZW50fSAtPiAke2JlYXQub3V0Y29tZX1gXG5cdFx0XHRcdFx0XHQ6IGJlYXQuaW50ZW50O1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGNvbnRlbnQgKz0gYCMjIyMgQmVhdDogW1ske2JlYXRMaW5rTmFtZX18JHtiZWF0RGlzcGxheVRleHR9XV1cXG5cXG5gO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3QgZmlsZVBhdGggPSBgJHtmb2xkZXJQYXRofS9zdG9yeS5tZGA7XG5cblx0XHRjb25zdCBmaWxlID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdGF3YWl0IHRoaXMudmF1bHQubW9kaWZ5KGZpbGUsIGNvbnRlbnQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhd2FpdCB0aGlzLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgY29udGVudCk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gV3JpdGUgY2hhcHRlciBmaWxlXG5cdGFzeW5jIHdyaXRlQ2hhcHRlckZpbGUoXG5cdFx0Y2hhcHRlcldpdGhDb250ZW50OiBDaGFwdGVyV2l0aENvbnRlbnQsXG5cdFx0ZmlsZVBhdGg6IHN0cmluZyxcblx0XHRzdG9yeU5hbWU/OiBzdHJpbmcsXG5cdFx0Y29udGVudEJsb2Nrcz86IENvbnRlbnRCbG9ja1tdLFxuXHRcdGNvbnRlbnRCbG9ja1JlZnM/OiBDb250ZW50QW5jaG9yW10sXG5cdFx0b3JwaGFuU2NlbmVzPzogU2NlbmVXaXRoQmVhdHNbXSAvLyBJbmNsdWRlIG9ycGhhbiBzY2VuZXMgZm9yIGVhc3kgYXNzb2NpYXRpb25cblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgeyBjaGFwdGVyLCBzY2VuZXMgfSA9IGNoYXB0ZXJXaXRoQ29udGVudDtcblxuXHRcdGNvbnN0IGJhc2VGaWVsZHMgPSB7XG5cdFx0XHRpZDogY2hhcHRlci5pZCxcblx0XHRcdHN0b3J5X2lkOiBjaGFwdGVyLnN0b3J5X2lkLFxuXHRcdFx0bnVtYmVyOiBjaGFwdGVyLm51bWJlcixcblx0XHRcdHRpdGxlOiBjaGFwdGVyLnRpdGxlLFxuXHRcdFx0c3RhdHVzOiBjaGFwdGVyLnN0YXR1cyxcblx0XHRcdGNyZWF0ZWRfYXQ6IGNoYXB0ZXIuY3JlYXRlZF9hdCxcblx0XHRcdHVwZGF0ZWRfYXQ6IGNoYXB0ZXIudXBkYXRlZF9hdCxcblx0XHR9O1xuXG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSB0aGlzLmdlbmVyYXRlRnJvbnRtYXR0ZXIoYmFzZUZpZWxkcywgdW5kZWZpbmVkLCB7XG5cdFx0XHRlbnRpdHlUeXBlOiBcImNoYXB0ZXJcIixcblx0XHRcdHN0b3J5TmFtZTogc3RvcnlOYW1lLFxuXHRcdFx0ZGF0ZTogY2hhcHRlci5jcmVhdGVkX2F0LFxuXHRcdH0pO1xuXG5cdFx0bGV0IGNvbnRlbnQgPSBgJHtmcm9udG1hdHRlcn1cXG4jICR7Y2hhcHRlci50aXRsZX1cXG5cXG5gO1xuXG5cdFx0Ly8gT3JnYW5pemUgcHJvc2UgYmxvY2tzIGJ5IHRoZWlyIGFzc29jaWF0aW9uc1xuXHRcdGNvbnN0IG9yZ2FuaXphdGlvbiA9IHRoaXMub3JnYW5pemVDb250ZW50QmxvY2tzKFxuXHRcdFx0Y29udGVudEJsb2NrcyB8fCBbXSxcblx0XHRcdGNvbnRlbnRCbG9ja1JlZnMgfHwgW10sXG5cdFx0XHRzY2VuZXNcblx0XHQpO1xuXG5cdFx0Ly8gR2VuZXJhdGUgbGlzdCBvZiBzY2VuZXMgYW5kIGJlYXRzIHdpdGggcHJvc2UgaW5kaWNhdG9yc1xuXHRcdGNvbnRlbnQgKz0gYCMjIFNjZW5lcyAmIEJlYXRzXFxuXFxuYDtcblx0XHRjb250ZW50ICs9IGA+IFshaW5mb10gSG93IHRvIHVzZSB0aGlzIGxpc3RcXG5gO1xuXHRcdGNvbnRlbnQgKz0gYD4gLSAqKkNyZWF0ZSBuZXcgaXRlbSoqOiBBZGQgYSBsaW5lIHdpdGggXFxgLVxcYCBmb2xsb3dlZCBieSB0aGUgdGV4dFxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAgIC0gKipTY2VuZSoqOiBObyBpbmRlbnRhdGlvbiAobGV2ZWwgMClcXG5gO1xuXHRcdGNvbnRlbnQgKz0gYD4gICAtICoqQmVhdCoqOiBVc2UgMSB0YWIgaW5kZW50YXRpb24gKGluc2lkZSBhIHNjZW5lKVxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAtICoqUmVvcmRlcioqOiBNb3ZlIGl0ZW1zIHVwL2Rvd24gdG8gY2hhbmdlIG9yZGVyXFxuYDtcblx0XHRjb250ZW50ICs9IGA+IC0gKipMaW5rcyoqOiBVc2UgXFxgW1tsaW5rLW5hbWV8dGV4dF1dXFxgIHRvIGNyZWF0ZSBsaW5rcyB0byBleGlzdGluZyBmaWxlc1xcbmA7XG5cdFx0Y29udGVudCArPSBgPiAtICoqRm9ybWF0Kio6XFxuYDtcblx0XHRjb250ZW50ICs9IGA+ICAgLSAqKlNjZW5lKio6XFxuYDtcblx0XHRjb250ZW50ICs9IGA+ICAgICAtIENvbXBsZXRlOiBcXGBTY2VuZSBOOiBnb2FsIC0gdGltZVJlZlxcYFxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAgICAgLSBTaW1wbGlmaWVkOlxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAgICAgICAtIFxcYGdvYWwgLSB0aW1lUmVmXFxgXFxuYDtcblx0XHRjb250ZW50ICs9IGA+ICAgICAgIC0gXFxgZ29hbFxcYFxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAgIC0gKipCZWF0Kio6XFxuYDtcblx0XHRjb250ZW50ICs9IGA+ICAgICAtIENvbXBsZXRlOiBcXGBCZWF0IE46IGludGVudCAtPiBvdXRjb21lXFxgXFxuYDtcblx0XHRjb250ZW50ICs9IGA+ICAgICAtIFNpbXBsaWZpZWQ6XFxuYDtcblx0XHRjb250ZW50ICs9IGA+ICAgICAgIC0gXFxgaW50ZW50IC0+IG91dGNvbWVcXGBcXG5gO1xuXHRcdGNvbnRlbnQgKz0gYD4gICAgICAgLSBcXGBpbnRlbnRcXGBcXG5gO1xuXHRcdGNvbnRlbnQgKz0gYD4gLSAqKk1hcmtlcnMqKjogXFxgLVxcYCBpbmRpY2F0ZXMgbm8gYXNzb2NpYXRlZCBwcm9zZSwgXFxgK1xcYCBpbmRpY2F0ZXMgYXNzb2NpYXRlZCBwcm9zZVxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAtICoqT3JwaGFuIHNjZW5lcyoqICh3aXRob3V0IGNoYXB0ZXIpIGFyZSBzaG93biBiZWxvdyBmb3IgZWFzeSBhc3NvY2lhdGlvblxcblxcbmA7XG5cdFx0XG5cdFx0Ly8gQWRkIHNjZW5lcyBmb3IgdGhpcyBjaGFwdGVyXG5cdFx0Zm9yIChjb25zdCB7IHNjZW5lLCBiZWF0cyB9IG9mIHNjZW5lcykge1xuXHRcdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lKTtcblx0XHRcdGNvbnN0IHNjZW5lTGlua05hbWUgPSBzY2VuZUZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0Y29uc3Qgc2NlbmVEaXNwbGF5VGV4dCA9IHNjZW5lLnRpbWVfcmVmIFxuXHRcdFx0XHQ/IGAke3NjZW5lLmdvYWx9IC0gJHtzY2VuZS50aW1lX3JlZn1gXG5cdFx0XHRcdDogc2NlbmUuZ29hbDtcblx0XHRcdFxuXHRcdFx0Ly8gQ2hlY2sgaWYgc2NlbmUgaGFzIGNvbnRlbnQgYmxvY2tzIChub3QgYXNzb2NpYXRlZCB3aXRoIGJlYXRzKVxuXHRcdFx0Y29uc3Qgc2NlbmVDb250ZW50QmxvY2tzID0gb3JnYW5pemF0aW9uLmJ5U2NlbmUuZ2V0KHNjZW5lLmlkKT8uY29udGVudEJsb2NrcyB8fCBbXTtcblx0XHRcdGNvbnN0IGhhc1NjZW5lQ29udGVudCA9IHNjZW5lQ29udGVudEJsb2Nrcy5sZW5ndGggPiAwO1xuXHRcdFx0Y29uc3Qgc2NlbmVNYXJrZXIgPSBoYXNTY2VuZUNvbnRlbnQgPyBcIitcIiA6IFwiLVwiO1xuXHRcdFx0XG5cdFx0XHRjb250ZW50ICs9IGAke3NjZW5lTWFya2VyfSBbWyR7c2NlbmVMaW5rTmFtZX18U2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lRGlzcGxheVRleHR9XV1cXG5gO1xuXHRcdFx0XG5cdFx0XHQvLyBBZGQgYmVhdHMgZm9yIHRoaXMgc2NlbmVcblx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cykge1xuXHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRjb25zdCBiZWF0TGlua05hbWUgPSBiZWF0RmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdGNvbnN0IGJlYXREaXNwbGF5VGV4dCA9IGJlYXQub3V0Y29tZVxuXHRcdFx0XHRcdD8gYCR7YmVhdC5pbnRlbnR9IC0+ICR7YmVhdC5vdXRjb21lfWBcblx0XHRcdFx0XHQ6IGJlYXQuaW50ZW50O1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgYmVhdCBoYXMgY29udGVudCBibG9ja3Ncblx0XHRcdFx0Y29uc3QgYmVhdENvbnRlbnRCbG9ja3MgPSBvcmdhbml6YXRpb24uYnlCZWF0LmdldChiZWF0LmlkKT8uY29udGVudEJsb2NrcyB8fCBbXTtcblx0XHRcdFx0Y29uc3QgaGFzQmVhdENvbnRlbnQgPSBiZWF0Q29udGVudEJsb2Nrcy5sZW5ndGggPiAwO1xuXHRcdFx0XHRjb25zdCBiZWF0TWFya2VyID0gaGFzQmVhdENvbnRlbnQgPyBcIitcIiA6IFwiLVwiO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29udGVudCArPSBgXFx0JHtiZWF0TWFya2VyfSBbWyR7YmVhdExpbmtOYW1lfXxCZWF0ICR7YmVhdC5vcmRlcl9udW19OiAke2JlYXREaXNwbGF5VGV4dH1dXVxcbmA7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdC8vIEFkZCBvcnBoYW4gc2NlbmVzIChzY2VuZXMgd2l0aG91dCBjaGFwdGVyX2lkKSBmb3IgZWFzeSBhc3NvY2lhdGlvblxuXHRcdGlmIChvcnBoYW5TY2VuZXMgJiYgb3JwaGFuU2NlbmVzLmxlbmd0aCA+IDApIHtcblx0XHRcdGNvbnRlbnQgKz0gYFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IFshaW5mb10gT3JwaGFuIFNjZW5lcyAobm90IHlldCBhc3NvY2lhdGVkIHdpdGggdGhpcyBjaGFwdGVyKVxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IFlvdSBjYW4gYXNzb2NpYXRlIHRoZXNlIHNjZW5lcyB3aXRoIHRoaXMgY2hhcHRlciBieSBtb3ZpbmcgdGhlbSBoZXJlLlxcblxcbmA7XG5cdFx0XHRcblx0XHRcdGZvciAoY29uc3QgeyBzY2VuZSwgYmVhdHMgfSBvZiBvcnBoYW5TY2VuZXMpIHtcblx0XHRcdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lKTtcblx0XHRcdFx0Y29uc3Qgc2NlbmVMaW5rTmFtZSA9IHNjZW5lRmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdGNvbnN0IHNjZW5lRGlzcGxheVRleHQgPSBzY2VuZS50aW1lX3JlZiBcblx0XHRcdFx0XHQ/IGAke3NjZW5lLmdvYWx9IC0gJHtzY2VuZS50aW1lX3JlZn1gXG5cdFx0XHRcdFx0OiBzY2VuZS5nb2FsO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gRm9yIG5vdywgd2UgZG9uJ3QgdHJhY2sgcHJvc2UgYXQgY2hhcHRlciBsZXZlbCwgc28gYWx3YXlzIHVzZSBcIi1cIlxuXHRcdFx0XHRjb250ZW50ICs9IGAtIFtbJHtzY2VuZUxpbmtOYW1lfXxTY2VuZSAke3NjZW5lLm9yZGVyX251bX06ICR7c2NlbmVEaXNwbGF5VGV4dH1dXVxcbmA7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBBZGQgYmVhdHMgZm9yIHRoaXMgb3JwaGFuIHNjZW5lXG5cdFx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cykge1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXREaXNwbGF5VGV4dCA9IGJlYXQub3V0Y29tZVxuXHRcdFx0XHRcdFx0PyBgJHtiZWF0LmludGVudH0gLT4gJHtiZWF0Lm91dGNvbWV9YFxuXHRcdFx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBGb3Igbm93LCB3ZSBkb24ndCB0cmFjayBwcm9zZSBhdCBjaGFwdGVyIGxldmVsLCBzbyBhbHdheXMgdXNlIFwiLVwiXG5cdFx0XHRcdFx0Y29udGVudCArPSBgXFx0LSBbWyR7YmVhdExpbmtOYW1lfXxCZWF0ICR7YmVhdC5vcmRlcl9udW19OiAke2JlYXREaXNwbGF5VGV4dH1dXVxcbmA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0Y29udGVudCArPSBgXFxuYDtcblxuXHRcdC8vIEdlbmVyYXRlIGhpZXJhcmNoaWNhbCBwcm9zZSBzZWN0aW9uIHdpdGggY2hhcHRlciBoZWFkZXJcblx0XHRjb250ZW50ICs9IGAjIyBDaGFwdGVyICR7Y2hhcHRlci5udW1iZXJ9OiAke2NoYXB0ZXIudGl0bGV9XFxuXFxuYDtcblxuXHRcdC8vIEFkZCBwcm9zZSBibG9ja3MgdGhhdCBhcmUgb25seSBhc3NvY2lhdGVkIHdpdGggY2hhcHRlclxuXHRcdGZvciAoY29uc3QgY29udGVudEJsb2NrIG9mIG9yZ2FuaXphdGlvbi5jaGFwdGVyT25seSkge1xuXHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoY29udGVudEJsb2NrKTtcblx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRjb250ZW50ICs9IGBbWyR7bGlua05hbWV9fCR7Y29udGVudEJsb2NrLmNvbnRlbnQuc3Vic3RyaW5nKDAsIDUwKX0uLi5dXVxcblxcbmA7XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIHNjZW5lcyB3aXRoIHRoZWlyIHByb3NlIGJsb2NrcyBhbmQgYmVhdHNcblx0XHRmb3IgKGNvbnN0IHsgc2NlbmUsIGJlYXRzIH0gb2Ygc2NlbmVzKSB7XG5cdFx0XHRjb25zdCBzY2VuZUZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZVNjZW5lRmlsZU5hbWUoc2NlbmUpO1xuXHRcdFx0Y29uc3Qgc2NlbmVMaW5rTmFtZSA9IHNjZW5lRmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcblx0XHRcdC8vIEZvcm1hdCBzY2VuZSBoZWFkZXI6ICMjIFNjZW5lOiBbW2xpbmt8Z29hbCAtIHRpbWVSZWZdXSBvciAjIyBTY2VuZTogW1tsaW5rfGdvYWxdXVxuXHRcdFx0Y29uc3Qgc2NlbmVEaXNwbGF5VGV4dCA9IHNjZW5lLnRpbWVfcmVmIFxuXHRcdFx0XHQ/IGAke3NjZW5lLmdvYWx9IC0gJHtzY2VuZS50aW1lX3JlZn1gXG5cdFx0XHRcdDogc2NlbmUuZ29hbDtcblx0XHRcdGNvbnRlbnQgKz0gYCMjIFNjZW5lOiBbWyR7c2NlbmVMaW5rTmFtZX18JHtzY2VuZURpc3BsYXlUZXh0fV1dXFxuXFxuYDtcblxuXHRcdFx0Ly8gR2V0IHByb3NlIGJsb2NrcyBmb3IgdGhpcyBzY2VuZSAobm90IGFzc29jaWF0ZWQgd2l0aCBhbnkgYmVhdClcblx0XHRcdGNvbnN0IHNjZW5lQ29udGVudEJsb2NrcyA9IG9yZ2FuaXphdGlvbi5ieVNjZW5lLmdldChzY2VuZS5pZCk/LmNvbnRlbnRCbG9ja3MgfHwgW107XG5cdFx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBzY2VuZUNvbnRlbnRCbG9ja3MpIHtcblx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoY29udGVudEJsb2NrKTtcblx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSBmaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0Y29udGVudCArPSBgW1ske2xpbmtOYW1lfXwke2NvbnRlbnRCbG9jay5jb250ZW50LnN1YnN0cmluZygwLCA1MCl9Li4uXV1cXG5cXG5gO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgYmVhdHMgd2l0aCB0aGVpciBwcm9zZSBibG9ja3Ncblx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cykge1xuXHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRjb25zdCBiZWF0TGlua05hbWUgPSBiZWF0RmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBGb3JtYXQgYmVhdCBoZWFkZXI6ICMjIyBCZWF0OiBbW2xpbmt8aW50ZW50IC0+IG91dGNvbWVdXSBvciAjIyMgQmVhdDogW1tsaW5rfGludGVudF1dXG5cdFx0XHRcdGNvbnN0IGJlYXREaXNwbGF5VGV4dCA9IGJlYXQub3V0Y29tZVxuXHRcdFx0XHRcdD8gYCR7YmVhdC5pbnRlbnR9IC0+ICR7YmVhdC5vdXRjb21lfWBcblx0XHRcdFx0XHQ6IGJlYXQuaW50ZW50O1xuXHRcdFx0XHRjb250ZW50ICs9IGAjIyMgQmVhdDogW1ske2JlYXRMaW5rTmFtZX18JHtiZWF0RGlzcGxheVRleHR9XV1cXG5cXG5gO1xuXG5cdFx0XHRcdC8vIEdldCBwcm9zZSBibG9ja3MgZm9yIHRoaXMgYmVhdFxuXHRcdFx0XHRjb25zdCBiZWF0Q29udGVudEJsb2NrcyA9IG9yZ2FuaXphdGlvbi5ieUJlYXQuZ2V0KGJlYXQuaWQpPy5jb250ZW50QmxvY2tzIHx8IFtdO1xuXHRcdFx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBiZWF0Q29udGVudEJsb2Nrcykge1xuXHRcdFx0XHRcdGNvbnN0IGZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGNvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSBmaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRjb250ZW50ICs9IGBbWyR7bGlua05hbWV9fCR7Y29udGVudEJsb2NrLmNvbnRlbnQuc3Vic3RyaW5nKDAsIDUwKX0uLi5dXVxcblxcbmA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRjb25zdCBmaWxlID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdGF3YWl0IHRoaXMudmF1bHQubW9kaWZ5KGZpbGUsIGNvbnRlbnQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhd2FpdCB0aGlzLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgY29udGVudCk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmVhZCBzdG9yeSBtZXRhZGF0YVxuXHRhc3luYyByZWFkU3RvcnlNZXRhZGF0YShmb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPFN0b3J5TWV0YWRhdGE+IHtcblx0XHRjb25zdCBmaWxlUGF0aCA9IGAke2ZvbGRlclBhdGh9L3N0b3J5Lm1kYDtcblx0XHRjb25zdCBmaWxlID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXG5cdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBTdG9yeSBtZXRhZGF0YSBmaWxlIG5vdCBmb3VuZDogJHtmaWxlUGF0aH1gKTtcblx0XHR9XG5cblx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy52YXVsdC5yZWFkKGZpbGUpO1xuXHRcdGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5wYXJzZUZyb250bWF0dGVyKGNvbnRlbnQpO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGZyb250bWF0dGVyOiB7XG5cdFx0XHRcdGlkOiBmcm9udG1hdHRlci5pZCxcblx0XHRcdFx0dGl0bGU6IGZyb250bWF0dGVyLnRpdGxlLFxuXHRcdFx0XHRzdGF0dXM6IGZyb250bWF0dGVyLnN0YXR1cyxcblx0XHRcdFx0dmVyc2lvbjogcGFyc2VJbnQoZnJvbnRtYXR0ZXIudmVyc2lvbiksXG5cdFx0XHRcdHJvb3Rfc3RvcnlfaWQ6IGZyb250bWF0dGVyLnJvb3Rfc3RvcnlfaWQsXG5cdFx0XHRcdHByZXZpb3VzX3ZlcnNpb25faWQ6IGZyb250bWF0dGVyLnByZXZpb3VzX3ZlcnNpb25faWQgfHwgbnVsbCxcblx0XHRcdFx0Y3JlYXRlZF9hdDogZnJvbnRtYXR0ZXIuY3JlYXRlZF9hdCxcblx0XHRcdFx0dXBkYXRlZF9hdDogZnJvbnRtYXR0ZXIudXBkYXRlZF9hdCxcblx0XHRcdH0sXG5cdFx0XHRjb250ZW50OiBjb250ZW50LnNwbGl0KFwiLS0tXCIpLnNsaWNlKDIpLmpvaW4oXCItLS1cIikudHJpbSgpLFxuXHRcdH07XG5cdH1cblxuXHQvLyBQYXJzZSBZQU1MIGZyb250bWF0dGVyXG5cdHBhcnNlRnJvbnRtYXR0ZXIoY29udGVudDogc3RyaW5nKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG5cdFx0Y29uc3QgbWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XG5cdFx0aWYgKCFtYXRjaCkge1xuXHRcdFx0cmV0dXJuIHt9O1xuXHRcdH1cblxuXHRcdGNvbnN0IGZyb250bWF0dGVyVGV4dCA9IG1hdGNoWzFdO1xuXHRcdGNvbnN0IHJlc3VsdDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuXG5cdFx0Zm9yIChjb25zdCBsaW5lIG9mIGZyb250bWF0dGVyVGV4dC5zcGxpdChcIlxcblwiKSkge1xuXHRcdFx0Y29uc3QgY29sb25JbmRleCA9IGxpbmUuaW5kZXhPZihcIjpcIik7XG5cdFx0XHRpZiAoY29sb25JbmRleCA+IDApIHtcblx0XHRcdFx0Y29uc3Qga2V5ID0gbGluZS5zbGljZSgwLCBjb2xvbkluZGV4KS50cmltKCk7XG5cdFx0XHRcdGNvbnN0IHZhbHVlID0gbGluZVxuXHRcdFx0XHRcdC5zbGljZShjb2xvbkluZGV4ICsgMSlcblx0XHRcdFx0XHQudHJpbSgpXG5cdFx0XHRcdFx0LnJlcGxhY2UoL15bXCInXXxbXCInXSQvZywgXCJcIik7XG5cdFx0XHRcdHJlc3VsdFtrZXldID0gdmFsdWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdC8vIENvcHkgc3RvcnkgZm9sZGVyIHRvIHZlcnNpb25zIGZvbGRlclxuXHRhc3luYyBjcmVhdGVWZXJzaW9uU25hcHNob3QoXG5cdFx0c3RvcnlGb2xkZXJQYXRoOiBzdHJpbmcsXG5cdFx0dmVyc2lvbk51bWJlcjogbnVtYmVyXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IHZlcnNpb25zUGF0aCA9IGAke3N0b3J5Rm9sZGVyUGF0aH0vdmVyc2lvbnNgO1xuXHRcdGF3YWl0IHRoaXMuZW5zdXJlRm9sZGVyRXhpc3RzKHZlcnNpb25zUGF0aCk7XG5cblx0XHRjb25zdCB2ZXJzaW9uRm9sZGVyUGF0aCA9IGAke3ZlcnNpb25zUGF0aH0vdiR7dmVyc2lvbk51bWJlcn1gO1xuXG5cdFx0Ly8gQ2hlY2sgaWYgdmVyc2lvbiBhbHJlYWR5IGV4aXN0c1xuXHRcdGNvbnN0IGV4aXN0aW5nVmVyc2lvbiA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHZlcnNpb25Gb2xkZXJQYXRoKTtcblx0XHRpZiAoZXhpc3RpbmdWZXJzaW9uKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhgVmVyc2lvbiB2JHt2ZXJzaW9uTnVtYmVyfSBhbHJlYWR5IGV4aXN0cywgc2tpcHBpbmcgc25hcHNob3RgKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRhd2FpdCB0aGlzLmVuc3VyZUZvbGRlckV4aXN0cyh2ZXJzaW9uRm9sZGVyUGF0aCk7XG5cblx0XHQvLyBDb3B5IGFsbCBmaWxlcyBmcm9tIHN0b3J5IGZvbGRlciB0byB2ZXJzaW9uIGZvbGRlciAoZXhjZXB0IHZlcnNpb25zIGZvbGRlcilcblx0XHRjb25zdCBzdG9yeUZvbGRlciA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHN0b3J5Rm9sZGVyUGF0aCk7XG5cdFx0aWYgKCEoc3RvcnlGb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBTdG9yeSBmb2xkZXIgbm90IGZvdW5kOiAke3N0b3J5Rm9sZGVyUGF0aH1gKTtcblx0XHR9XG5cblx0XHRhd2FpdCB0aGlzLmNvcHlGb2xkZXJDb250ZW50cyhzdG9yeUZvbGRlciwgdmVyc2lvbkZvbGRlclBhdGgsIFwidmVyc2lvbnNcIik7XG5cblx0XHRjb25zb2xlLmxvZyhgQ3JlYXRlZCB2ZXJzaW9uIHNuYXBzaG90OiB2JHt2ZXJzaW9uTnVtYmVyfWApO1xuXHR9XG5cblx0Ly8gUmVjdXJzaXZlbHkgY29weSBmb2xkZXIgY29udGVudHNcblx0cHJpdmF0ZSBhc3luYyBjb3B5Rm9sZGVyQ29udGVudHMoXG5cdFx0c291cmNlRm9sZGVyOiBURm9sZGVyLFxuXHRcdGRlc3RQYXRoOiBzdHJpbmcsXG5cdFx0ZXhjbHVkZUZvbGRlck5hbWU/OiBzdHJpbmdcblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Zm9yIChjb25zdCBjaGlsZCBvZiBzb3VyY2VGb2xkZXIuY2hpbGRyZW4pIHtcblx0XHRcdGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRcdGNvbnN0IHJlbGF0aXZlUGF0aCA9IGNoaWxkLnBhdGgucmVwbGFjZShzb3VyY2VGb2xkZXIucGF0aCArIFwiL1wiLCBcIlwiKTtcblx0XHRcdFx0Y29uc3QgZGVzdEZpbGVQYXRoID0gYCR7ZGVzdFBhdGh9LyR7cmVsYXRpdmVQYXRofWA7XG5cdFx0XHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnZhdWx0LnJlYWQoY2hpbGQpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnZhdWx0LmNyZWF0ZShkZXN0RmlsZVBhdGgsIGNvbnRlbnQpO1xuXHRcdFx0fSBlbHNlIGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcblx0XHRcdFx0Ly8gU2tpcCBleGNsdWRlZCBmb2xkZXIgKGUuZy4sIFwidmVyc2lvbnNcIilcblx0XHRcdFx0aWYgKGV4Y2x1ZGVGb2xkZXJOYW1lICYmIGNoaWxkLm5hbWUgPT09IGV4Y2x1ZGVGb2xkZXJOYW1lKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgcmVsYXRpdmVQYXRoID0gY2hpbGQucGF0aC5yZXBsYWNlKHNvdXJjZUZvbGRlci5wYXRoICsgXCIvXCIsIFwiXCIpO1xuXHRcdFx0XHRjb25zdCBkZXN0Rm9sZGVyUGF0aCA9IGAke2Rlc3RQYXRofS8ke3JlbGF0aXZlUGF0aH1gO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmVuc3VyZUZvbGRlckV4aXN0cyhkZXN0Rm9sZGVyUGF0aCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMuY29weUZvbGRlckNvbnRlbnRzKGNoaWxkLCBkZXN0Rm9sZGVyUGF0aCwgZXhjbHVkZUZvbGRlck5hbWUpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFdyaXRlIHNjZW5lIGZpbGVcblx0YXN5bmMgd3JpdGVTY2VuZUZpbGUoXG5cdFx0c2NlbmVXaXRoQmVhdHM6IFNjZW5lV2l0aEJlYXRzLFxuXHRcdGZpbGVQYXRoOiBzdHJpbmcsXG5cdFx0c3RvcnlOYW1lPzogc3RyaW5nLFxuXHRcdGNvbnRlbnRCbG9ja3M/OiBDb250ZW50QmxvY2tbXSxcblx0XHRvcnBoYW5CZWF0cz86IEJlYXRbXSAvLyBJbmNsdWRlIG9ycGhhbiBiZWF0cyBmb3IgZWFzeSBhc3NvY2lhdGlvblxuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCB7IHNjZW5lLCBiZWF0cyB9ID0gc2NlbmVXaXRoQmVhdHM7XG5cblx0XHRjb25zdCBiYXNlRmllbGRzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXIgfCBudWxsPiA9IHtcblx0XHRcdGlkOiBzY2VuZS5pZCxcblx0XHRcdHN0b3J5X2lkOiBzY2VuZS5zdG9yeV9pZCxcblx0XHRcdGNoYXB0ZXJfaWQ6IHNjZW5lLmNoYXB0ZXJfaWQgPz8gbnVsbCxcblx0XHRcdG9yZGVyX251bTogc2NlbmUub3JkZXJfbnVtLFxuXHRcdFx0dGltZV9yZWY6IHNjZW5lLnRpbWVfcmVmIHx8IFwiXCIsXG5cdFx0XHRnb2FsOiBzY2VuZS5nb2FsIHx8IFwiXCIsXG5cdFx0XHRjcmVhdGVkX2F0OiBzY2VuZS5jcmVhdGVkX2F0LFxuXHRcdFx0dXBkYXRlZF9hdDogc2NlbmUudXBkYXRlZF9hdCxcblx0XHR9O1xuXG5cdFx0Ly8gQWRkIG9wdGlvbmFsIGZpZWxkc1xuXHRcdGNvbnN0IGV4dHJhRmllbGRzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXIgfCBudWxsPiA9IHt9O1xuXHRcdGlmIChzY2VuZS5wb3ZfY2hhcmFjdGVyX2lkKSB7XG5cdFx0XHRleHRyYUZpZWxkcy5wb3ZfY2hhcmFjdGVyX2lkID0gc2NlbmUucG92X2NoYXJhY3Rlcl9pZDtcblx0XHR9XG5cdFx0aWYgKHNjZW5lLmxvY2F0aW9uX2lkKSB7XG5cdFx0XHRleHRyYUZpZWxkcy5sb2NhdGlvbl9pZCA9IHNjZW5lLmxvY2F0aW9uX2lkO1xuXHRcdH1cblxuXHRcdGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5nZW5lcmF0ZUZyb250bWF0dGVyKGJhc2VGaWVsZHMsIGV4dHJhRmllbGRzLCB7XG5cdFx0XHRlbnRpdHlUeXBlOiBcInNjZW5lXCIsXG5cdFx0XHRzdG9yeU5hbWU6IHN0b3J5TmFtZSxcblx0XHRcdGRhdGU6IHNjZW5lLmNyZWF0ZWRfYXQsXG5cdFx0fSk7XG5cblx0XHRsZXQgY29udGVudCA9IGAke2Zyb250bWF0dGVyfVxcbiMgU2NlbmUgJHtzY2VuZS5vcmRlcl9udW19XFxuXFxuYDtcblx0XHRcblx0XHRpZiAoc2NlbmUuZ29hbCkge1xuXHRcdFx0Y29udGVudCArPSBgKipHb2FsOioqICR7c2NlbmUuZ29hbH1cXG5cXG5gO1xuXHRcdH1cblx0XHRpZiAoc2NlbmUudGltZV9yZWYpIHtcblx0XHRcdGNvbnRlbnQgKz0gYCoqVGltZToqKiAke3NjZW5lLnRpbWVfcmVmfVxcblxcbmA7XG5cdFx0fVxuXG5cdFx0Ly8gR2VuZXJhdGUgbGlzdCBvZiBiZWF0cyB3aXRoIHByb3NlIGluZGljYXRvcnNcblx0XHRpZiAoYmVhdHMubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29udGVudCArPSBgIyMgQmVhdHNcXG5cXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiBbIWluZm9dIEhvdyB0byB1c2UgdGhpcyBsaXN0XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gLSAqKkNyZWF0ZSBuZXcgaXRlbSoqOiBBZGQgYSBsaW5lIHdpdGggXFxgLVxcYCBmb2xsb3dlZCBieSB0aGUgdGV4dFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgLSAqKkJlYXQqKjogTm8gaW5kZW50YXRpb24gKGxldmVsIDApXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gLSAqKlJlb3JkZXIqKjogTW92ZSBpdGVtcyB1cC9kb3duIHRvIGNoYW5nZSBvcmRlclxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipMaW5rcyoqOiBVc2UgXFxgW1tsaW5rLW5hbWV8dGV4dF1dXFxgIHRvIGNyZWF0ZSBsaW5rcyB0byBleGlzdGluZyBmaWxlc1xcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipGb3JtYXQqKjpcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgIC0gKipCZWF0Kio6XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgIC0gQ29tcGxldGU6IFxcYEJlYXQgTjogaW50ZW50IC0+IG91dGNvbWVcXGBcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgICAgLSBTaW1wbGlmaWVkOlxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgICAgIC0gXFxgaW50ZW50IC0+IG91dGNvbWVcXGBcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgICAgICAtIFxcYGludGVudFxcYFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipNYXJrZXJzKio6IFxcYC1cXGAgaW5kaWNhdGVzIG5vIGFzc29jaWF0ZWQgcHJvc2UsIFxcYCtcXGAgaW5kaWNhdGVzIGFzc29jaWF0ZWQgcHJvc2VcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqT3JwaGFuIGJlYXRzKiogKHdpdGhvdXQgc2NlbmUpIGFyZSBzaG93biBiZWxvdyBmb3IgZWFzeSBhc3NvY2lhdGlvblxcblxcbmA7XG5cdFx0XHRcblx0XHRcdC8vIENoZWNrIHdoaWNoIGJlYXRzIGhhdmUgcHJvc2UgYmxvY2tzXG5cdFx0XHRjb25zdCBiZWF0c1dpdGhQcm9zZSA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXHRcdFx0aWYgKGNvbnRlbnRCbG9ja3MpIHtcblx0XHRcdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2YgY29udGVudEJsb2Nrcykge1xuXHRcdFx0XHRcdC8vIENoZWNrIGlmIHByb3NlIGJsb2NrIGlzIHJlZmVyZW5jZWQgYnkgYW55IGJlYXRcblx0XHRcdFx0XHQvLyBXZSdsbCBuZWVkIHRvIGNoZWNrIHByb3NlIGJsb2NrIHJlZmVyZW5jZXMsIGJ1dCBmb3Igbm93IHdlJ2xsIHVzZSBhIHNpbXBsZSBjaGVja1xuXHRcdFx0XHRcdC8vIFRoaXMgd2lsbCBiZSB1cGRhdGVkIHdoZW4gd2UgcHJvY2VzcyBwcm9zZSBibG9jayByZWZlcmVuY2VzXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIGJlYXRzLnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pKSB7XG5cdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRcdGNvbnN0IGJlYXRMaW5rTmFtZSA9IGJlYXRGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0Y29uc3QgYmVhdERpc3BsYXlUZXh0ID0gYmVhdC5vdXRjb21lXG5cdFx0XHRcdFx0PyBgJHtiZWF0LmludGVudH0gLT4gJHtiZWF0Lm91dGNvbWV9YFxuXHRcdFx0XHRcdDogYmVhdC5pbnRlbnQ7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBGb3Igbm93LCB3ZSBkb24ndCB0cmFjayBwcm9zZSBhdCBzY2VuZSBsZXZlbCwgc28gYWx3YXlzIHVzZSBcIi1cIlxuXHRcdFx0XHQvLyBJbiB0aGUgZnV0dXJlLCB3ZSBjb3VsZCBjaGVjayBpZiBiZWF0IGhhcyBhbnkgcHJvc2UgYmxvY2tzXG5cdFx0XHRcdGNvbnN0IGhhc0JlYXRQcm9zZSA9IGJlYXRzV2l0aFByb3NlLmhhcyhiZWF0LmlkKTtcblx0XHRcdFx0Y29uc3QgYmVhdE1hcmtlciA9IGhhc0JlYXRQcm9zZSA/IFwiK1wiIDogXCItXCI7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb250ZW50ICs9IGAke2JlYXRNYXJrZXJ9IFtbJHtiZWF0TGlua05hbWV9fEJlYXQgJHtiZWF0Lm9yZGVyX251bX06ICR7YmVhdERpc3BsYXlUZXh0fV1dXFxuYDtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gQWRkIG9ycGhhbiBiZWF0cyAoYmVhdHMgd2l0aG91dCBzY2VuZV9pZCkgZm9yIGVhc3kgYXNzb2NpYXRpb25cblx0XHRcdGlmIChvcnBoYW5CZWF0cyAmJiBvcnBoYW5CZWF0cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNvbnRlbnQgKz0gYFxcbmA7XG5cdFx0XHRcdGNvbnRlbnQgKz0gYD4gWyFpbmZvXSBPcnBoYW4gQmVhdHMgKG5vdCB5ZXQgYXNzb2NpYXRlZCB3aXRoIHRoaXMgc2NlbmUpXFxuYDtcblx0XHRcdFx0Y29udGVudCArPSBgPiBZb3UgY2FuIGFzc29jaWF0ZSB0aGVzZSBiZWF0cyB3aXRoIHRoaXMgc2NlbmUgYnkgbW92aW5nIHRoZW0gaGVyZS5cXG5cXG5gO1xuXHRcdFx0XHRcblx0XHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIG9ycGhhbkJlYXRzKSB7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdFx0XHRjb25zdCBiZWF0TGlua05hbWUgPSBiZWF0RmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdERpc3BsYXlUZXh0ID0gYmVhdC5vdXRjb21lXG5cdFx0XHRcdFx0XHQ/IGAke2JlYXQuaW50ZW50fSAtPiAke2JlYXQub3V0Y29tZX1gXG5cdFx0XHRcdFx0XHQ6IGJlYXQuaW50ZW50O1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIEZvciBub3csIHdlIGRvbid0IHRyYWNrIHByb3NlIGF0IHNjZW5lIGxldmVsLCBzbyBhbHdheXMgdXNlIFwiLVwiXG5cdFx0XHRcdFx0Y29udGVudCArPSBgLSBbWyR7YmVhdExpbmtOYW1lfXxCZWF0ICR7YmVhdC5vcmRlcl9udW19OiAke2JlYXREaXNwbGF5VGV4dH1dXVxcbmA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Y29udGVudCArPSBgXFxuYDtcblx0XHR9XG5cblx0XHQvLyBHZW5lcmF0ZSBoaWVyYXJjaGljYWwgcHJvc2Ugc2VjdGlvbiBmb3IgdGhlIHNjZW5lXG5cdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lKTtcblx0XHRjb25zdCBzY2VuZUxpbmtOYW1lID0gc2NlbmVGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRjb25zdCBzY2VuZURpc3BsYXlUZXh0ID0gc2NlbmUudGltZV9yZWYgXG5cdFx0XHQ/IGAke3NjZW5lLmdvYWx9IC0gJHtzY2VuZS50aW1lX3JlZn1gXG5cdFx0XHQ6IHNjZW5lLmdvYWw7XG5cdFx0XG5cdFx0Y29udGVudCArPSBgIyMgU2NlbmU6IFtbJHtzY2VuZUxpbmtOYW1lfXwke3NjZW5lRGlzcGxheVRleHR9XV1cXG5cXG5gO1xuXG5cdFx0Ly8gQWRkIHByb3NlIGJsb2NrcyBhdCBzY2VuZSBsZXZlbCAobm90IGFzc29jaWF0ZWQgd2l0aCBhbnkgYmVhdClcblx0XHRpZiAoY29udGVudEJsb2NrcyAmJiBjb250ZW50QmxvY2tzLmxlbmd0aCA+IDApIHtcblx0XHRcdC8vIFNvcnQgYnkgb3JkZXJfbnVtXG5cdFx0XHRjb25zdCBzb3J0ZWRDb250ZW50QmxvY2tzID0gWy4uLmNvbnRlbnRCbG9ja3NdLnNvcnQoKGEsIGIpID0+IChhLm9yZGVyX251bSB8fCAwKSAtIChiLm9yZGVyX251bSB8fCAwKSk7XG5cdFx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBzb3J0ZWRDb250ZW50QmxvY2tzKSB7XG5cdFx0XHRcdGNvbnN0IGZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGNvbnRlbnRCbG9jayk7XG5cdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdGNvbnRlbnQgKz0gYFtbJHtsaW5rTmFtZX18JHtjb250ZW50QmxvY2suY29udGVudC5zdWJzdHJpbmcoMCwgNTApfS4uLl1dXFxuXFxuYDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBBZGQgYmVhdHMgd2l0aCB0aGVpciBoaWVyYXJjaGljYWwgc3RydWN0dXJlXG5cdFx0Zm9yIChjb25zdCBiZWF0IG9mIGJlYXRzLnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pKSB7XG5cdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0Y29uc3QgYmVhdERpc3BsYXlUZXh0ID0gYmVhdC5vdXRjb21lXG5cdFx0XHRcdD8gYCR7YmVhdC5pbnRlbnR9IC0+ICR7YmVhdC5vdXRjb21lfWBcblx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdFxuXHRcdFx0Y29udGVudCArPSBgIyMjIEJlYXQ6IFtbJHtiZWF0TGlua05hbWV9fCR7YmVhdERpc3BsYXlUZXh0fV1dXFxuXFxuYDtcblx0XHR9XG5cblx0XHRjb25zdCBmaWxlID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdGF3YWl0IHRoaXMudmF1bHQubW9kaWZ5KGZpbGUsIGNvbnRlbnQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhd2FpdCB0aGlzLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgY29udGVudCk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gV3JpdGUgYmVhdCBmaWxlXG5cdGFzeW5jIHdyaXRlQmVhdEZpbGUoXG5cdFx0YmVhdDogQmVhdCxcblx0XHRmaWxlUGF0aDogc3RyaW5nLFxuXHRcdHN0b3J5TmFtZT86IHN0cmluZyxcblx0XHRjb250ZW50QmxvY2tzPzogQ29udGVudEJsb2NrW11cblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgYmFzZUZpZWxkcyA9IHtcblx0XHRcdGlkOiBiZWF0LmlkLFxuXHRcdFx0c2NlbmVfaWQ6IGJlYXQuc2NlbmVfaWQsXG5cdFx0XHRvcmRlcl9udW06IGJlYXQub3JkZXJfbnVtLFxuXHRcdFx0dHlwZTogYmVhdC50eXBlLFxuXHRcdFx0aW50ZW50OiBiZWF0LmludGVudCB8fCBcIlwiLFxuXHRcdFx0b3V0Y29tZTogYmVhdC5vdXRjb21lIHx8IFwiXCIsXG5cdFx0XHRjcmVhdGVkX2F0OiBiZWF0LmNyZWF0ZWRfYXQsXG5cdFx0XHR1cGRhdGVkX2F0OiBiZWF0LnVwZGF0ZWRfYXQsXG5cdFx0fTtcblxuXHRcdGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5nZW5lcmF0ZUZyb250bWF0dGVyKGJhc2VGaWVsZHMsIHVuZGVmaW5lZCwge1xuXHRcdFx0ZW50aXR5VHlwZTogXCJiZWF0XCIsXG5cdFx0XHRzdG9yeU5hbWU6IHN0b3J5TmFtZSxcblx0XHRcdGRhdGU6IGJlYXQuY3JlYXRlZF9hdCxcblx0XHR9KTtcblxuXHRcdGxldCBjb250ZW50ID0gYCR7ZnJvbnRtYXR0ZXJ9XFxuIyBCZWF0ICR7YmVhdC5vcmRlcl9udW19IC0gJHtiZWF0LnR5cGV9XFxuXFxuYDtcblx0XHRcblx0XHRpZiAoYmVhdC5pbnRlbnQpIHtcblx0XHRcdGNvbnRlbnQgKz0gYCoqSW50ZW50OioqICR7YmVhdC5pbnRlbnR9XFxuXFxuYDtcblx0XHR9XG5cdFx0aWYgKGJlYXQub3V0Y29tZSkge1xuXHRcdFx0Y29udGVudCArPSBgKipPdXRjb21lOioqICR7YmVhdC5vdXRjb21lfVxcblxcbmA7XG5cdFx0fVxuXG5cdFx0Ly8gR2VuZXJhdGUgaGllcmFyY2hpY2FsIHByb3NlIHNlY3Rpb24gZm9yIHRoZSBiZWF0XG5cdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRjb25zdCBiZWF0TGlua05hbWUgPSBiZWF0RmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0Y29uc3QgYmVhdERpc3BsYXlUZXh0ID0gYmVhdC5vdXRjb21lXG5cdFx0XHQ/IGAke2JlYXQuaW50ZW50fSAtPiAke2JlYXQub3V0Y29tZX1gXG5cdFx0XHQ6IGJlYXQuaW50ZW50O1xuXHRcdFxuXHRcdGNvbnRlbnQgKz0gYCMjIEJlYXQ6IFtbJHtiZWF0TGlua05hbWV9fCR7YmVhdERpc3BsYXlUZXh0fV1dXFxuXFxuYDtcblxuXHRcdC8vIEFkZCBjb250ZW50IGJsb2NrcyBmb3IgdGhpcyBiZWF0XG5cdFx0aWYgKGNvbnRlbnRCbG9ja3MgJiYgY29udGVudEJsb2Nrcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCBzb3J0ZWRDb250ZW50QmxvY2tzID0gWy4uLmNvbnRlbnRCbG9ja3NdLnNvcnQoKGEsIGIpID0+IChhLm9yZGVyX251bSB8fCAwKSAtIChiLm9yZGVyX251bSB8fCAwKSk7XG5cdFx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBzb3J0ZWRDb250ZW50QmxvY2tzKSB7XG5cdFx0XHRcdGNvbnN0IGZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGNvbnRlbnRCbG9jayk7XG5cdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdGNvbnRlbnQgKz0gYFtbJHtsaW5rTmFtZX18JHtjb250ZW50QmxvY2suY29udGVudC5zdWJzdHJpbmcoMCwgNTApfS4uLl1dXFxuXFxuYDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRjb25zdCBmaWxlID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdGF3YWl0IHRoaXMudmF1bHQubW9kaWZ5KGZpbGUsIGNvbnRlbnQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhd2FpdCB0aGlzLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgY29udGVudCk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gTGlzdCBhbGwgY2hhcHRlciBmaWxlcyBpbiBhIHN0b3J5IGZvbGRlclxuXHRhc3luYyBsaXN0Q2hhcHRlckZpbGVzKHN0b3J5Rm9sZGVyUGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuXHRcdGNvbnN0IGNoYXB0ZXJzUGF0aCA9IGAke3N0b3J5Rm9sZGVyUGF0aH0vMDAtY2hhcHRlcnNgO1xuXHRcdGNvbnN0IGZvbGRlciA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGNoYXB0ZXJzUGF0aCk7XG5cblx0XHRpZiAoIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH1cblxuXHRcdGNvbnN0IGNoYXB0ZXJGaWxlczogc3RyaW5nW10gPSBbXTtcblx0XHRmb3IgKGNvbnN0IGNoaWxkIG9mIGZvbGRlci5jaGlsZHJlbikge1xuXHRcdFx0aWYgKGNoaWxkIGluc3RhbmNlb2YgVEZpbGUgJiYgY2hpbGQuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcblx0XHRcdFx0Y2hhcHRlckZpbGVzLnB1c2goY2hpbGQucGF0aCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNoYXB0ZXJGaWxlcy5zb3J0KCk7XG5cdH1cblxuXHQvLyBMaXN0IGFsbCBzY2VuZSBmaWxlcyBpbiBhIGNoYXB0ZXIgZm9sZGVyXG5cdGFzeW5jIGxpc3RTY2VuZUZpbGVzKGNoYXB0ZXJGb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG5cdFx0Y29uc3Qgc2NlbmVzUGF0aCA9IGAke2NoYXB0ZXJGb2xkZXJQYXRofS8wMS1zY2VuZXNgO1xuXHRcdGNvbnN0IGZvbGRlciA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHNjZW5lc1BhdGgpO1xuXG5cdFx0aWYgKCEoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcblx0XHRcdHJldHVybiBbXTtcblx0XHR9XG5cblx0XHRjb25zdCBzY2VuZUZpbGVzOiBzdHJpbmdbXSA9IFtdO1xuXHRcdGZvciAoY29uc3QgY2hpbGQgb2YgZm9sZGVyLmNoaWxkcmVuKSB7XG5cdFx0XHRpZiAoY2hpbGQgaW5zdGFuY2VvZiBURmlsZSAmJiBjaGlsZC5leHRlbnNpb24gPT09IFwibWRcIikge1xuXHRcdFx0XHRzY2VuZUZpbGVzLnB1c2goY2hpbGQucGF0aCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHNjZW5lRmlsZXMuc29ydCgpO1xuXHR9XG5cblx0Ly8gTGlzdCBhbGwgc2NlbmUgZmlsZXMgaW4gYSBzdG9yeSBmb2xkZXJcblx0YXN5bmMgbGlzdFN0b3J5U2NlbmVGaWxlcyhzdG9yeUZvbGRlclBhdGg6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcblx0XHRjb25zdCBzY2VuZXNQYXRoID0gYCR7c3RvcnlGb2xkZXJQYXRofS8wMS1zY2VuZXNgO1xuXHRcdGNvbnN0IGZvbGRlciA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHNjZW5lc1BhdGgpO1xuXG5cdFx0aWYgKCEoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcblx0XHRcdHJldHVybiBbXTtcblx0XHR9XG5cblx0XHRjb25zdCBzY2VuZUZpbGVzOiBzdHJpbmdbXSA9IFtdO1xuXHRcdGZvciAoY29uc3QgY2hpbGQgb2YgZm9sZGVyLmNoaWxkcmVuKSB7XG5cdFx0XHRpZiAoY2hpbGQgaW5zdGFuY2VvZiBURmlsZSAmJiBjaGlsZC5leHRlbnNpb24gPT09IFwibWRcIikge1xuXHRcdFx0XHRzY2VuZUZpbGVzLnB1c2goY2hpbGQucGF0aCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHNjZW5lRmlsZXMuc29ydCgpO1xuXHR9XG5cblx0Ly8gTGlzdCBhbGwgYmVhdCBmaWxlcyBpbiBhIHN0b3J5IGZvbGRlclxuXHRhc3luYyBsaXN0U3RvcnlCZWF0RmlsZXMoc3RvcnlGb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG5cdFx0Y29uc3QgYmVhdHNQYXRoID0gYCR7c3RvcnlGb2xkZXJQYXRofS8wMi1iZWF0c2A7XG5cdFx0Y29uc3QgZm9sZGVyID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoYmVhdHNQYXRoKTtcblxuXHRcdGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fVxuXG5cdFx0Y29uc3QgYmVhdEZpbGVzOiBzdHJpbmdbXSA9IFtdO1xuXHRcdGZvciAoY29uc3QgY2hpbGQgb2YgZm9sZGVyLmNoaWxkcmVuKSB7XG5cdFx0XHRpZiAoY2hpbGQgaW5zdGFuY2VvZiBURmlsZSAmJiBjaGlsZC5leHRlbnNpb24gPT09IFwibWRcIikge1xuXHRcdFx0XHRiZWF0RmlsZXMucHVzaChjaGlsZC5wYXRoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gYmVhdEZpbGVzLnNvcnQoKTtcblx0fVxuXG5cdC8vIExpc3QgYWxsIGJlYXQgZmlsZXMgaW4gYSBzY2VuZSBmb2xkZXJcblx0YXN5bmMgbGlzdEJlYXRGaWxlcyhzY2VuZUZvbGRlclBhdGg6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcblx0XHRjb25zdCBiZWF0c1BhdGggPSBgJHtzY2VuZUZvbGRlclBhdGh9LzAyLWJlYXRzYDtcblx0XHRjb25zdCBmb2xkZXIgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChiZWF0c1BhdGgpO1xuXG5cdFx0aWYgKCEoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcblx0XHRcdHJldHVybiBbXTtcblx0XHR9XG5cblx0XHRjb25zdCBiZWF0RmlsZXM6IHN0cmluZ1tdID0gW107XG5cdFx0Zm9yIChjb25zdCBjaGlsZCBvZiBmb2xkZXIuY2hpbGRyZW4pIHtcblx0XHRcdGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGaWxlICYmIGNoaWxkLmV4dGVuc2lvbiA9PT0gXCJtZFwiKSB7XG5cdFx0XHRcdGJlYXRGaWxlcy5wdXNoKGNoaWxkLnBhdGgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBiZWF0RmlsZXMuc29ydCgpO1xuXHR9XG5cblx0Ly8gR2V0IHRoZSBzdWJmb2xkZXIgbmFtZSBmb3IgYSBjb250ZW50IGJsb2NrIHR5cGVcblx0Z2V0Q29udGVudFR5cGVGb2xkZXIodHlwZTogc3RyaW5nKTogc3RyaW5nIHtcblx0XHQvLyBNYXAgdHlwZXMgdG8gZm9sZGVyIG5hbWVzIHdpdGggbnVtZXJpYyBwcmVmaXhlc1xuXHRcdGNvbnN0IHR5cGVGb2xkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuXHRcdFx0dGV4dDogXCIwMC10ZXh0c1wiLFxuXHRcdFx0aW1hZ2U6IFwiMDEtaW1hZ2VzXCIsXG5cdFx0XHR2aWRlbzogXCIwMi12aWRlb3NcIixcblx0XHRcdGF1ZGlvOiBcIjAzLWF1ZGlvc1wiLFxuXHRcdFx0ZW1iZWQ6IFwiMDQtZW1iZWRzXCIsXG5cdFx0XHRsaW5rOiBcIjA1LWxpbmtzXCIsXG5cdFx0fTtcblx0XHRyZXR1cm4gdHlwZUZvbGRlcnNbdHlwZV0gfHwgXCI5OS1vdGhlclwiO1xuXHR9XG5cblx0Ly8gR2V0IHRoZSBmdWxsIGZvbGRlciBwYXRoIGZvciBjb250ZW50IGJsb2NrcyBvZiBhIHNwZWNpZmljIHR5cGVcblx0Z2V0Q29udGVudEJsb2NrRm9sZGVyUGF0aChzdG9yeUZvbGRlclBhdGg6IHN0cmluZywgdHlwZTogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRjb25zdCB0eXBlRm9sZGVyID0gdGhpcy5nZXRDb250ZW50VHlwZUZvbGRlcih0eXBlKTtcblx0XHRyZXR1cm4gYCR7c3RvcnlGb2xkZXJQYXRofS8wMy1jb250ZW50cy8ke3R5cGVGb2xkZXJ9YDtcblx0fVxuXG5cdC8vIEdlbmVyYXRlIGZpbGVuYW1lIGZvciBjb250ZW50IGJsb2NrIGJhc2VkIG9uIGRhdGUgYW5kIGNvbnRlbnQgcHJldmlld1xuXHRnZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGNvbnRlbnRCbG9jazogQ29udGVudEJsb2NrKTogc3RyaW5nIHtcblx0XHQvLyBQYXJzZSBjcmVhdGVkX2F0IGRhdGVcblx0XHRjb25zdCBkYXRlID0gbmV3IERhdGUoY29udGVudEJsb2NrLmNyZWF0ZWRfYXQpO1xuXHRcdGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG5cdFx0Y29uc3QgbW9udGggPSBTdHJpbmcoZGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgXCIwXCIpO1xuXHRcdGNvbnN0IGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgXCIwXCIpO1xuXHRcdGNvbnN0IGhvdXJzID0gU3RyaW5nKGRhdGUuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgXCIwXCIpO1xuXHRcdGNvbnN0IG1pbnV0ZXMgPSBTdHJpbmcoZGF0ZS5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRcblx0XHQvLyBGb3JtYXQ6IDIwMjQtMDEtMTVUMTQtMzBcblx0XHRjb25zdCBkYXRlU3RyID0gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9VCR7aG91cnN9LSR7bWludXRlc31gO1xuXG5cdFx0Ly8gR2V0IHByZXZpZXcgYmFzZWQgb24gY29udGVudCB0eXBlXG5cdFx0bGV0IHRleHRQYXJ0OiBzdHJpbmc7XG5cdFx0Y29uc3QgdHlwZSA9IGNvbnRlbnRCbG9jay50eXBlIHx8IFwidGV4dFwiO1xuXHRcdFxuXHRcdGlmICh0eXBlID09PSBcInRleHRcIikge1xuXHRcdFx0Ly8gRm9yIHRleHQ6IGZpcnN0IDMwIGNoYXJzIG9mIGNvbnRlbnRcblx0XHRcdHRleHRQYXJ0ID0gY29udGVudEJsb2NrLmNvbnRlbnRcblx0XHRcdFx0LnN1YnN0cmluZygwLCAzMClcblx0XHRcdFx0LnRyaW0oKVxuXHRcdFx0XHQucmVwbGFjZSgvWzw+OlwiL1xcXFx8PypcXG5cXHJcXHRdL2csIFwiLVwiKVxuXHRcdFx0XHQucmVwbGFjZSgvXFxzKy9nLCBcIi1cIilcblx0XHRcdFx0LnJlcGxhY2UoLy0rL2csIFwiLVwiKVxuXHRcdFx0XHQucmVwbGFjZSgvXi18LSQvZywgXCJcIilcblx0XHRcdFx0LnRvTG93ZXJDYXNlKCkgfHwgXCJjb250ZW50XCI7XG5cdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImltYWdlXCIgfHwgdHlwZSA9PT0gXCJ2aWRlb1wiIHx8IHR5cGUgPT09IFwiYXVkaW9cIikge1xuXHRcdFx0Ly8gRm9yIG1lZGlhOiB1c2UgYWx0X3RleHQsIGNhcHRpb24sIG9yIGZpbGVuYW1lIGZyb20gbWV0YWRhdGFcblx0XHRcdGNvbnN0IG1ldGEgPSBjb250ZW50QmxvY2subWV0YWRhdGEgfHwge307XG5cdFx0XHR0ZXh0UGFydCA9IChtZXRhLmFsdF90ZXh0IHx8IG1ldGEuY2FwdGlvbiB8fCBtZXRhLnRpdGxlIHx8IHR5cGUpXG5cdFx0XHRcdC5zdWJzdHJpbmcoMCwgMzApXG5cdFx0XHRcdC50cmltKClcblx0XHRcdFx0LnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXFxuXFxyXFx0XS9nLCBcIi1cIilcblx0XHRcdFx0LnJlcGxhY2UoL1xccysvZywgXCItXCIpXG5cdFx0XHRcdC5yZXBsYWNlKC8tKy9nLCBcIi1cIilcblx0XHRcdFx0LnJlcGxhY2UoL14tfC0kL2csIFwiXCIpXG5cdFx0XHRcdC50b0xvd2VyQ2FzZSgpO1xuXHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJlbWJlZFwiKSB7XG5cdFx0XHQvLyBGb3IgZW1iZWRzOiB1c2UgcHJvdmlkZXIgb3IgdGl0bGVcblx0XHRcdGNvbnN0IG1ldGEgPSBjb250ZW50QmxvY2subWV0YWRhdGEgfHwge307XG5cdFx0XHR0ZXh0UGFydCA9IChtZXRhLnByb3ZpZGVyIHx8IG1ldGEudGl0bGUgfHwgXCJlbWJlZFwiKVxuXHRcdFx0XHQuc3Vic3RyaW5nKDAsIDMwKVxuXHRcdFx0XHQudHJpbSgpXG5cdFx0XHRcdC5yZXBsYWNlKC9bPD46XCIvXFxcXHw/KlxcblxcclxcdF0vZywgXCItXCIpXG5cdFx0XHRcdC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKVxuXHRcdFx0XHQucmVwbGFjZSgvLSsvZywgXCItXCIpXG5cdFx0XHRcdC5yZXBsYWNlKC9eLXwtJC9nLCBcIlwiKVxuXHRcdFx0XHQudG9Mb3dlckNhc2UoKTtcblx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwibGlua1wiKSB7XG5cdFx0XHQvLyBGb3IgbGlua3M6IHVzZSB0aXRsZSBvciBzaXRlX25hbWVcblx0XHRcdGNvbnN0IG1ldGEgPSBjb250ZW50QmxvY2subWV0YWRhdGEgfHwge307XG5cdFx0XHR0ZXh0UGFydCA9IChtZXRhLnRpdGxlIHx8IG1ldGEuc2l0ZV9uYW1lIHx8IFwibGlua1wiKVxuXHRcdFx0XHQuc3Vic3RyaW5nKDAsIDMwKVxuXHRcdFx0XHQudHJpbSgpXG5cdFx0XHRcdC5yZXBsYWNlKC9bPD46XCIvXFxcXHw/KlxcblxcclxcdF0vZywgXCItXCIpXG5cdFx0XHRcdC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKVxuXHRcdFx0XHQucmVwbGFjZSgvLSsvZywgXCItXCIpXG5cdFx0XHRcdC5yZXBsYWNlKC9eLXwtJC9nLCBcIlwiKVxuXHRcdFx0XHQudG9Mb3dlckNhc2UoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGV4dFBhcnQgPSBcImNvbnRlbnRcIjtcblx0XHR9XG5cblx0XHRyZXR1cm4gYCR7ZGF0ZVN0cn1fJHt0ZXh0UGFydH0ubWRgO1xuXHR9XG5cblx0Ly8gT3JnYW5pemUgY29udGVudCBibG9ja3MgYnkgdGhlaXIgYXNzb2NpYXRpb25zIChjaGFwdGVyLCBzY2VuZSwgYmVhdClcblx0b3JnYW5pemVDb250ZW50QmxvY2tzKFxuXHRcdGNvbnRlbnRCbG9ja3M6IENvbnRlbnRCbG9ja1tdLFxuXHRcdGNvbnRlbnRCbG9ja1JlZnM6IENvbnRlbnRBbmNob3JbXSxcblx0XHRzY2VuZXM6IFNjZW5lV2l0aEJlYXRzW11cblx0KTogQ29udGVudEJsb2NrT3JnYW5pemF0aW9uIHtcblx0XHRjb25zdCBvcmdhbml6YXRpb246IENvbnRlbnRCbG9ja09yZ2FuaXphdGlvbiA9IHtcblx0XHRcdGNoYXB0ZXJPbmx5OiBbXSxcblx0XHRcdGJ5U2NlbmU6IG5ldyBNYXAoKSxcblx0XHRcdGJ5QmVhdDogbmV3IE1hcCgpLFxuXHRcdH07XG5cblx0XHQvLyBDcmVhdGUgbWFwcyBmb3IgcXVpY2sgbG9va3VwXG5cdFx0Y29uc3QgY29udGVudEJsb2NrUmVmc0J5Q29udGVudEJsb2NrID0gbmV3IE1hcDxzdHJpbmcsIENvbnRlbnRBbmNob3JbXT4oKTtcblx0XHRmb3IgKGNvbnN0IHJlZiBvZiBjb250ZW50QmxvY2tSZWZzKSB7XG5cdFx0XHRpZiAoIWNvbnRlbnRCbG9ja1JlZnNCeUNvbnRlbnRCbG9jay5oYXMocmVmLmNvbnRlbnRfYmxvY2tfaWQpKSB7XG5cdFx0XHRcdGNvbnRlbnRCbG9ja1JlZnNCeUNvbnRlbnRCbG9jay5zZXQocmVmLmNvbnRlbnRfYmxvY2tfaWQsIFtdKTtcblx0XHRcdH1cblx0XHRcdGNvbnRlbnRCbG9ja1JlZnNCeUNvbnRlbnRCbG9jay5nZXQocmVmLmNvbnRlbnRfYmxvY2tfaWQpIS5wdXNoKHJlZik7XG5cdFx0fVxuXG5cdFx0Ly8gQ3JlYXRlIHNjZW5lIGFuZCBiZWF0IG1hcHMgZm9yIHF1aWNrIGxvb2t1cFxuXHRcdGNvbnN0IHNjZW5lTWFwID0gbmV3IE1hcDxzdHJpbmcsIFNjZW5lPigpO1xuXHRcdGNvbnN0IGJlYXRNYXAgPSBuZXcgTWFwPHN0cmluZywgQmVhdD4oKTtcblx0XHRmb3IgKGNvbnN0IHsgc2NlbmUsIGJlYXRzIH0gb2Ygc2NlbmVzKSB7XG5cdFx0XHRzY2VuZU1hcC5zZXQoc2NlbmUuaWQsIHNjZW5lKTtcblx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cykge1xuXHRcdFx0XHRiZWF0TWFwLnNldChiZWF0LmlkLCBiZWF0KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBTb3J0IGNvbnRlbnQgYmxvY2tzIGJ5IG9yZGVyX251bVxuXHRcdGNvbnN0IHNvcnRlZENvbnRlbnRCbG9ja3MgPSBbLi4uY29udGVudEJsb2Nrc10uc29ydCgoYSwgYikgPT4gKGEub3JkZXJfbnVtIHx8IDApIC0gKGIub3JkZXJfbnVtIHx8IDApKTtcblxuXHRcdGZvciAoY29uc3QgY29udGVudEJsb2NrIG9mIHNvcnRlZENvbnRlbnRCbG9ja3MpIHtcblx0XHRcdGNvbnN0IHJlZnMgPSBjb250ZW50QmxvY2tSZWZzQnlDb250ZW50QmxvY2suZ2V0KGNvbnRlbnRCbG9jay5pZCkgfHwgW107XG5cdFx0XHRcblx0XHRcdC8vIEZpbmQgc2NlbmUgYW5kIGJlYXQgcmVmZXJlbmNlc1xuXHRcdFx0Y29uc3Qgc2NlbmVSZWYgPSByZWZzLmZpbmQociA9PiByLmVudGl0eV90eXBlID09PSBcInNjZW5lXCIpO1xuXHRcdFx0Y29uc3QgYmVhdFJlZiA9IHJlZnMuZmluZChyID0+IHIuZW50aXR5X3R5cGUgPT09IFwiYmVhdFwiKTtcblxuXHRcdFx0aWYgKGJlYXRSZWYgJiYgYmVhdE1hcC5oYXMoYmVhdFJlZi5lbnRpdHlfaWQpKSB7XG5cdFx0XHRcdC8vIEFzc29jaWF0ZWQgd2l0aCBhIGJlYXQgKGFuZCBpbXBsaWNpdGx5IHdpdGggaXRzIHNjZW5lKVxuXHRcdFx0XHRjb25zdCBiZWF0ID0gYmVhdE1hcC5nZXQoYmVhdFJlZi5lbnRpdHlfaWQpITtcblx0XHRcdFx0aWYgKCFvcmdhbml6YXRpb24uYnlCZWF0LmhhcyhiZWF0LmlkKSkge1xuXHRcdFx0XHRcdG9yZ2FuaXphdGlvbi5ieUJlYXQuc2V0KGJlYXQuaWQsIHsgYmVhdCwgY29udGVudEJsb2NrczogW10gfSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0b3JnYW5pemF0aW9uLmJ5QmVhdC5nZXQoYmVhdC5pZCkhLmNvbnRlbnRCbG9ja3MucHVzaChjb250ZW50QmxvY2spO1xuXHRcdFx0fSBlbHNlIGlmIChzY2VuZVJlZiAmJiBzY2VuZU1hcC5oYXMoc2NlbmVSZWYuZW50aXR5X2lkKSkge1xuXHRcdFx0XHQvLyBBc3NvY2lhdGVkIHdpdGggYSBzY2VuZSBidXQgbm90IGEgYmVhdFxuXHRcdFx0XHRjb25zdCBzY2VuZSA9IHNjZW5lTWFwLmdldChzY2VuZVJlZi5lbnRpdHlfaWQpITtcblx0XHRcdFx0aWYgKCFvcmdhbml6YXRpb24uYnlTY2VuZS5oYXMoc2NlbmUuaWQpKSB7XG5cdFx0XHRcdFx0b3JnYW5pemF0aW9uLmJ5U2NlbmUuc2V0KHNjZW5lLmlkLCB7IHNjZW5lLCBjb250ZW50QmxvY2tzOiBbXSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRvcmdhbml6YXRpb24uYnlTY2VuZS5nZXQoc2NlbmUuaWQpIS5jb250ZW50QmxvY2tzLnB1c2goY29udGVudEJsb2NrKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIE9ubHkgYXNzb2NpYXRlZCB3aXRoIGNoYXB0ZXJcblx0XHRcdFx0b3JnYW5pemF0aW9uLmNoYXB0ZXJPbmx5LnB1c2goY29udGVudEJsb2NrKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gb3JnYW5pemF0aW9uO1xuXHR9XG5cblx0Ly8gR2VuZXJhdGUgZmlsZW5hbWUgZm9yIHNjZW5lIGJhc2VkIG9uIGRhdGUgYW5kIGdvYWxcblx0Z2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lOiBTY2VuZSk6IHN0cmluZyB7XG5cdFx0Ly8gUGFyc2UgY3JlYXRlZF9hdCBkYXRlXG5cdFx0Y29uc3QgZGF0ZSA9IG5ldyBEYXRlKHNjZW5lLmNyZWF0ZWRfYXQpO1xuXHRcdGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG5cdFx0Y29uc3QgbW9udGggPSBTdHJpbmcoZGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgXCIwXCIpO1xuXHRcdGNvbnN0IGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgXCIwXCIpO1xuXHRcdGNvbnN0IGhvdXJzID0gU3RyaW5nKGRhdGUuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgXCIwXCIpO1xuXHRcdGNvbnN0IG1pbnV0ZXMgPSBTdHJpbmcoZGF0ZS5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRcblx0XHQvLyBGb3JtYXQ6IDIwMjQtMDEtMTVUMTQtMzBcblx0XHRjb25zdCBkYXRlU3RyID0gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9VCR7aG91cnN9LSR7bWludXRlc31gO1xuXG5cdFx0Ly8gU2FuaXRpemUgZ29hbCBmb3IgZmlsZW5hbWVcblx0XHRjb25zdCBnb2FsU2FuaXRpemVkID0gKHNjZW5lLmdvYWwgfHwgXCJzY2VuZVwiKVxuXHRcdFx0LnRyaW0oKVxuXHRcdFx0LnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXFxuXFxyXFx0XS9nLCBcIi1cIilcblx0XHRcdC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKVxuXHRcdFx0LnJlcGxhY2UoLy0rL2csIFwiLVwiKVxuXHRcdFx0LnJlcGxhY2UoL14tfC0kL2csIFwiXCIpXG5cdFx0XHQudG9Mb3dlckNhc2UoKTtcblxuXHRcdHJldHVybiBgJHtkYXRlU3RyfV8ke2dvYWxTYW5pdGl6ZWR9Lm1kYDtcblx0fVxuXG5cdC8vIEdlbmVyYXRlIGZpbGVuYW1lIGZvciBiZWF0IGJhc2VkIG9uIGRhdGUgYW5kIGludGVudFxuXHRnZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0OiBCZWF0KTogc3RyaW5nIHtcblx0XHQvLyBQYXJzZSBjcmVhdGVkX2F0IGRhdGVcblx0XHRjb25zdCBkYXRlID0gbmV3IERhdGUoYmVhdC5jcmVhdGVkX2F0KTtcblx0XHRjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuXHRcdGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRjb25zdCBob3VycyA9IFN0cmluZyhkYXRlLmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRjb25zdCBtaW51dGVzID0gU3RyaW5nKGRhdGUuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCBcIjBcIik7XG5cdFx0XG5cdFx0Ly8gRm9ybWF0OiAyMDI0LTAxLTE1VDE0LTMwXG5cdFx0Y29uc3QgZGF0ZVN0ciA9IGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fVQke2hvdXJzfS0ke21pbnV0ZXN9YDtcblxuXHRcdC8vIFNhbml0aXplIGludGVudCBmb3IgZmlsZW5hbWVcblx0XHRjb25zdCBpbnRlbnRTYW5pdGl6ZWQgPSAoYmVhdC5pbnRlbnQgfHwgXCJiZWF0XCIpXG5cdFx0XHQudHJpbSgpXG5cdFx0XHQucmVwbGFjZSgvWzw+OlwiL1xcXFx8PypcXG5cXHJcXHRdL2csIFwiLVwiKVxuXHRcdFx0LnJlcGxhY2UoL1xccysvZywgXCItXCIpXG5cdFx0XHQucmVwbGFjZSgvLSsvZywgXCItXCIpXG5cdFx0XHQucmVwbGFjZSgvXi18LSQvZywgXCJcIilcblx0XHRcdC50b0xvd2VyQ2FzZSgpO1xuXG5cdFx0cmV0dXJuIGAke2RhdGVTdHJ9XyR7aW50ZW50U2FuaXRpemVkfS5tZGA7XG5cdH1cblxuXHQvLyBXcml0ZSBjb250ZW50IGJsb2NrIGZpbGVcblx0YXN5bmMgd3JpdGVDb250ZW50QmxvY2tGaWxlKFxuXHRcdGNvbnRlbnRCbG9jazogQ29udGVudEJsb2NrLFxuXHRcdGZpbGVQYXRoOiBzdHJpbmcsXG5cdFx0c3RvcnlOYW1lPzogc3RyaW5nXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IHR5cGUgPSBjb250ZW50QmxvY2sudHlwZSB8fCBcInRleHRcIjtcblx0XHRcblx0XHRjb25zdCBiYXNlRmllbGRzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXIgfCBudWxsPiA9IHtcblx0XHRcdGlkOiBjb250ZW50QmxvY2suaWQsXG5cdFx0XHRjaGFwdGVyX2lkOiBjb250ZW50QmxvY2suY2hhcHRlcl9pZCB8fCBudWxsLFxuXHRcdFx0b3JkZXJfbnVtOiBjb250ZW50QmxvY2sub3JkZXJfbnVtIHx8IDAsXG5cdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0a2luZDogY29udGVudEJsb2NrLmtpbmQsXG5cdFx0XHRjcmVhdGVkX2F0OiBjb250ZW50QmxvY2suY3JlYXRlZF9hdCxcblx0XHRcdHVwZGF0ZWRfYXQ6IGNvbnRlbnRCbG9jay51cGRhdGVkX2F0LFxuXHRcdH07XG5cblx0XHQvLyBBZGQgbWV0YWRhdGEgZmllbGRzIGJhc2VkIG9uIHR5cGVcblx0XHRjb25zdCBtZXRhID0gY29udGVudEJsb2NrLm1ldGFkYXRhIHx8IHt9O1xuXHRcdGlmICh0eXBlID09PSBcInRleHRcIiAmJiBtZXRhLndvcmRfY291bnQpIHtcblx0XHRcdGJhc2VGaWVsZHMud29yZF9jb3VudCA9IG1ldGEud29yZF9jb3VudDtcblx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwiaW1hZ2VcIikge1xuXHRcdFx0Ly8gU3RvcmUgb3JpZ2luYWwgVVJMIGZvciBzeW5jIHB1cnBvc2VzXG5cdFx0XHRpZiAoY29udGVudEJsb2NrLmNvbnRlbnQgJiYgY29udGVudEJsb2NrLmNvbnRlbnQuc3RhcnRzV2l0aChcImh0dHBcIikpIHtcblx0XHRcdFx0YmFzZUZpZWxkcy5vcmlnaW5hbF91cmwgPSBjb250ZW50QmxvY2suY29udGVudDtcblx0XHRcdH1cblx0XHRcdGlmIChtZXRhLmFsdF90ZXh0KSBiYXNlRmllbGRzLmFsdF90ZXh0ID0gbWV0YS5hbHRfdGV4dDtcblx0XHRcdGlmIChtZXRhLmNhcHRpb24pIGJhc2VGaWVsZHMuY2FwdGlvbiA9IG1ldGEuY2FwdGlvbjtcblx0XHRcdGlmIChtZXRhLndpZHRoKSBiYXNlRmllbGRzLndpZHRoID0gbWV0YS53aWR0aDtcblx0XHRcdGlmIChtZXRhLmhlaWdodCkgYmFzZUZpZWxkcy5oZWlnaHQgPSBtZXRhLmhlaWdodDtcblx0XHRcdGlmIChtZXRhLm1pbWVfdHlwZSkgYmFzZUZpZWxkcy5taW1lX3R5cGUgPSBtZXRhLm1pbWVfdHlwZTtcblx0XHRcdGlmIChtZXRhLnNvdXJjZSkgYmFzZUZpZWxkcy5zb3VyY2UgPSBtZXRhLnNvdXJjZTtcblx0XHRcdGlmIChtZXRhLmF1dGhvcl9uYW1lKSBiYXNlRmllbGRzLmF1dGhvcl9uYW1lID0gbWV0YS5hdXRob3JfbmFtZTtcblx0XHRcdGlmIChtZXRhLmF0dHJpYnV0aW9uKSBiYXNlRmllbGRzLmF0dHJpYnV0aW9uID0gbWV0YS5hdHRyaWJ1dGlvbjtcblx0XHRcdGlmIChtZXRhLmF0dHJpYnV0aW9uX3VybCkgYmFzZUZpZWxkcy5hdHRyaWJ1dGlvbl91cmwgPSBtZXRhLmF0dHJpYnV0aW9uX3VybDtcblx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwidmlkZW9cIiB8fCB0eXBlID09PSBcImF1ZGlvXCIpIHtcblx0XHRcdGlmIChtZXRhLnByb3ZpZGVyKSBiYXNlRmllbGRzLnByb3ZpZGVyID0gbWV0YS5wcm92aWRlcjtcblx0XHRcdGlmIChtZXRhLnZpZGVvX2lkKSBiYXNlRmllbGRzLnZpZGVvX2lkID0gbWV0YS52aWRlb19pZDtcblx0XHRcdGlmIChtZXRhLmR1cmF0aW9uKSBiYXNlRmllbGRzLmR1cmF0aW9uID0gbWV0YS5kdXJhdGlvbjtcblx0XHRcdGlmIChtZXRhLnRodW1ibmFpbF91cmwpIGJhc2VGaWVsZHMudGh1bWJuYWlsX3VybCA9IG1ldGEudGh1bWJuYWlsX3VybDtcblx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwiZW1iZWRcIikge1xuXHRcdFx0aWYgKG1ldGEucHJvdmlkZXIpIGJhc2VGaWVsZHMucHJvdmlkZXIgPSBtZXRhLnByb3ZpZGVyO1xuXHRcdFx0aWYgKG1ldGEuaHRtbCkgYmFzZUZpZWxkcy5lbWJlZF9odG1sID0gbWV0YS5odG1sO1xuXHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJsaW5rXCIpIHtcblx0XHRcdGlmIChtZXRhLnRpdGxlKSBiYXNlRmllbGRzLmxpbmtfdGl0bGUgPSBtZXRhLnRpdGxlO1xuXHRcdFx0aWYgKG1ldGEuZGVzY3JpcHRpb24pIGJhc2VGaWVsZHMubGlua19kZXNjcmlwdGlvbiA9IG1ldGEuZGVzY3JpcHRpb247XG5cdFx0XHRpZiAobWV0YS5pbWFnZV91cmwpIGJhc2VGaWVsZHMubGlua19pbWFnZSA9IG1ldGEuaW1hZ2VfdXJsO1xuXHRcdFx0aWYgKG1ldGEuc2l0ZV9uYW1lKSBiYXNlRmllbGRzLnNpdGVfbmFtZSA9IG1ldGEuc2l0ZV9uYW1lO1xuXHRcdH1cblxuXHRcdGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5nZW5lcmF0ZUZyb250bWF0dGVyKGJhc2VGaWVsZHMsIHVuZGVmaW5lZCwge1xuXHRcdFx0ZW50aXR5VHlwZTogXCJjb250ZW50LWJsb2NrXCIsXG5cdFx0XHRzdG9yeU5hbWU6IHN0b3J5TmFtZSxcblx0XHRcdGRhdGU6IGNvbnRlbnRCbG9jay5jcmVhdGVkX2F0LFxuXHRcdH0pO1xuXG5cdFx0Ly8gR2VuZXJhdGUgY29udGVudCBiYXNlZCBvbiB0eXBlXG5cdFx0bGV0IGZpbGVDb250ZW50OiBzdHJpbmc7XG5cdFx0aWYgKHR5cGUgPT09IFwidGV4dFwiKSB7XG5cdFx0XHRmaWxlQ29udGVudCA9IGAke2Zyb250bWF0dGVyfSR7Y29udGVudEJsb2NrLmNvbnRlbnR9YDtcblx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwiaW1hZ2VcIikge1xuXHRcdFx0Ly8gRG93bmxvYWQgaW1hZ2UgYW5kIHNhdmUgbG9jYWxseVxuXHRcdFx0bGV0IGxvY2FsSW1hZ2VQYXRoOiBzdHJpbmcgPSBjb250ZW50QmxvY2suY29udGVudCB8fCBcIlwiO1xuXHRcdFx0aWYgKGNvbnRlbnRCbG9jay5jb250ZW50ICYmICFjb250ZW50QmxvY2suY29udGVudC5zdGFydHNXaXRoKFwiaHR0cFwiKSkge1xuXHRcdFx0XHQvLyBBbHJlYWR5IGEgbG9jYWwgcGF0aCwgdXNlIGFzIGlzXG5cdFx0XHRcdGxvY2FsSW1hZ2VQYXRoID0gY29udGVudEJsb2NrLmNvbnRlbnQ7XG5cdFx0XHR9IGVsc2UgaWYgKGNvbnRlbnRCbG9jay5jb250ZW50KSB7XG5cdFx0XHRcdC8vIERvd25sb2FkIGltYWdlIGZyb20gcmVtb3RlIFVSTFxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGxvY2FsSW1hZ2VQYXRoID0gYXdhaXQgdGhpcy5kb3dubG9hZEltYWdlKGNvbnRlbnRCbG9jay5jb250ZW50LCBmaWxlUGF0aCwgY29udGVudEJsb2NrLmlkKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBkb3dubG9hZCBpbWFnZTpcIiwgZXJyKTtcblx0XHRcdFx0XHQvLyBGYWxsYmFjayB0byBvcmlnaW5hbCBVUkwgaWYgZG93bmxvYWQgZmFpbHNcblx0XHRcdFx0XHRsb2NhbEltYWdlUGF0aCA9IGNvbnRlbnRCbG9jay5jb250ZW50O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGNvbnN0IGFsdFRleHQgPSBtZXRhLmFsdF90ZXh0IHx8IFwiXCI7XG5cdFx0XHRmaWxlQ29udGVudCA9IGAke2Zyb250bWF0dGVyfSFbJHthbHRUZXh0fV0oJHtsb2NhbEltYWdlUGF0aH0pYDtcblx0XHRcdGlmIChtZXRhLmNhcHRpb24pIHtcblx0XHRcdFx0ZmlsZUNvbnRlbnQgKz0gYFxcblxcbioke21ldGEuY2FwdGlvbn0qYDtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwidmlkZW9cIikge1xuXHRcdFx0ZmlsZUNvbnRlbnQgPSBgJHtmcm9udG1hdHRlcn1bVmlkZW9dKCR7Y29udGVudEJsb2NrLmNvbnRlbnR9KWA7XG5cdFx0XHRpZiAobWV0YS50aHVtYm5haWxfdXJsKSB7XG5cdFx0XHRcdGZpbGVDb250ZW50ICs9IGBcXG5cXG4hW1RodW1ibmFpbF0oJHttZXRhLnRodW1ibmFpbF91cmx9KWA7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImF1ZGlvXCIpIHtcblx0XHRcdGZpbGVDb250ZW50ID0gYCR7ZnJvbnRtYXR0ZXJ9W0F1ZGlvXSgke2NvbnRlbnRCbG9jay5jb250ZW50fSlgO1xuXHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJlbWJlZFwiKSB7XG5cdFx0XHRmaWxlQ29udGVudCA9IGAke2Zyb250bWF0dGVyfSR7bWV0YS5odG1sIHx8IGNvbnRlbnRCbG9jay5jb250ZW50fWA7XG5cdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImxpbmtcIikge1xuXHRcdFx0Y29uc3QgdGl0bGUgPSBtZXRhLnRpdGxlIHx8IGNvbnRlbnRCbG9jay5jb250ZW50O1xuXHRcdFx0ZmlsZUNvbnRlbnQgPSBgJHtmcm9udG1hdHRlcn1bJHt0aXRsZX1dKCR7Y29udGVudEJsb2NrLmNvbnRlbnR9KWA7XG5cdFx0XHRpZiAobWV0YS5kZXNjcmlwdGlvbikge1xuXHRcdFx0XHRmaWxlQ29udGVudCArPSBgXFxuXFxuJHttZXRhLmRlc2NyaXB0aW9ufWA7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGZpbGVDb250ZW50ID0gYCR7ZnJvbnRtYXR0ZXJ9JHtjb250ZW50QmxvY2suY29udGVudH1gO1xuXHRcdH1cblxuXHRcdGNvbnN0IGZpbGUgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG5cdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0YXdhaXQgdGhpcy52YXVsdC5tb2RpZnkoZmlsZSwgZmlsZUNvbnRlbnQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhd2FpdCB0aGlzLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgZmlsZUNvbnRlbnQpO1xuXHRcdH1cblx0fVxuXG5cdC8vIERvd25sb2FkIGltYWdlIGZyb20gVVJMIGFuZCBzYXZlIGxvY2FsbHkgKHNhbWUgZm9sZGVyIGFzIGNvbnRlbnQgYmxvY2sgLm1kKVxuXHRwcml2YXRlIGFzeW5jIGRvd25sb2FkSW1hZ2UoaW1hZ2VVcmw6IHN0cmluZywgY29udGVudEJsb2NrRmlsZVBhdGg6IHN0cmluZywgY29udGVudEJsb2NrSWQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0dHJ5IHtcblx0XHRcdC8vIEZldGNoIGltYWdlXG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGltYWdlVXJsKTtcblx0XHRcdGlmICghcmVzcG9uc2Uub2spIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggaW1hZ2U6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcblx0XHRcdGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpO1xuXG5cdFx0XHQvLyBEZXRlcm1pbmUgZmlsZSBleHRlbnNpb24gZnJvbSBjb250ZW50IHR5cGUgb3IgVVJMXG5cdFx0XHRsZXQgZXh0ZW5zaW9uID0gXCJqcGdcIjtcblx0XHRcdGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIik7XG5cdFx0XHRpZiAoY29udGVudFR5cGUpIHtcblx0XHRcdFx0aWYgKGNvbnRlbnRUeXBlLmluY2x1ZGVzKFwicG5nXCIpKSBleHRlbnNpb24gPSBcInBuZ1wiO1xuXHRcdFx0XHRlbHNlIGlmIChjb250ZW50VHlwZS5pbmNsdWRlcyhcImdpZlwiKSkgZXh0ZW5zaW9uID0gXCJnaWZcIjtcblx0XHRcdFx0ZWxzZSBpZiAoY29udGVudFR5cGUuaW5jbHVkZXMoXCJ3ZWJwXCIpKSBleHRlbnNpb24gPSBcIndlYnBcIjtcblx0XHRcdFx0ZWxzZSBpZiAoY29udGVudFR5cGUuaW5jbHVkZXMoXCJzdmdcIikpIGV4dGVuc2lvbiA9IFwic3ZnXCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBUcnkgdG8gZ2V0IGV4dGVuc2lvbiBmcm9tIFVSTFxuXHRcdFx0XHRjb25zdCB1cmxNYXRjaCA9IGltYWdlVXJsLm1hdGNoKC9cXC4oanBnfGpwZWd8cG5nfGdpZnx3ZWJwfHN2ZykoXFw/fCQpL2kpO1xuXHRcdFx0XHRpZiAodXJsTWF0Y2gpIHtcblx0XHRcdFx0XHRleHRlbnNpb24gPSB1cmxNYXRjaFsxXS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEdldCBkaXJlY3Rvcnkgb2YgY29udGVudCBibG9jayBmaWxlIChzYW1lIGZvbGRlciBmb3IgaW1hZ2UpXG5cdFx0XHRjb25zdCBjb250ZW50QmxvY2tEaXIgPSBjb250ZW50QmxvY2tGaWxlUGF0aC5zdWJzdHJpbmcoMCwgY29udGVudEJsb2NrRmlsZVBhdGgubGFzdEluZGV4T2YoXCIvXCIpKTtcblxuXHRcdFx0Ly8gR2VuZXJhdGUgaW1hZ2UgZmlsZW5hbWUgYmFzZWQgb24gY29udGVudCBibG9jayBJRFxuXHRcdFx0Y29uc3QgaW1hZ2VGaWxlTmFtZSA9IGAke2NvbnRlbnRCbG9ja0lkfS4ke2V4dGVuc2lvbn1gO1xuXHRcdFx0Y29uc3QgaW1hZ2VQYXRoID0gYCR7Y29udGVudEJsb2NrRGlyfS8ke2ltYWdlRmlsZU5hbWV9YDtcblxuXHRcdFx0Ly8gU2F2ZSBpbWFnZSBmaWxlIChPYnNpZGlhbidzIGNyZWF0ZUJpbmFyeSBleHBlY3RzIEFycmF5QnVmZmVyKVxuXHRcdFx0Y29uc3QgZXhpc3RpbmdGaWxlID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoaW1hZ2VQYXRoKTtcblx0XHRcdGlmIChleGlzdGluZ0ZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnZhdWx0Lm1vZGlmeUJpbmFyeShleGlzdGluZ0ZpbGUsIGFycmF5QnVmZmVyKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMudmF1bHQuY3JlYXRlQmluYXJ5KGltYWdlUGF0aCwgYXJyYXlCdWZmZXIpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXR1cm4ganVzdCB0aGUgZmlsZW5hbWUgKHNhbWUgZm9sZGVyKVxuXHRcdFx0cmV0dXJuIGltYWdlRmlsZU5hbWU7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgZG93bmxvYWRpbmcgaW1hZ2U6XCIsIGVycik7XG5cdFx0XHR0aHJvdyBlcnI7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmVhZCBjb250ZW50IGJsb2NrIGZyb20gZmlsZVxuXHRhc3luYyByZWFkQ29udGVudEJsb2NrRnJvbUZpbGUoZmlsZVBhdGg6IHN0cmluZyk6IFByb21pc2U8Q29udGVudEJsb2NrIHwgbnVsbD4ge1xuXHRcdGNvbnN0IGZpbGUgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG5cdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy52YXVsdC5yZWFkKGZpbGUpO1xuXHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSB0aGlzLnBhcnNlRnJvbnRtYXR0ZXIoZmlsZUNvbnRlbnQpO1xuXG5cdFx0XHQvLyBFeHRyYWN0IGNvbnRlbnQgYWZ0ZXIgZnJvbnRtYXR0ZXJcblx0XHRcdGNvbnN0IGNvbnRlbnRNYXRjaCA9IGZpbGVDb250ZW50Lm1hdGNoKC9eLS0tXFxuW1xcc1xcU10qP1xcbi0tLVxcbihbXFxzXFxTXSopJC8pO1xuXHRcdFx0bGV0IGJsb2NrQ29udGVudCA9IGNvbnRlbnRNYXRjaCA/IGNvbnRlbnRNYXRjaFsxXS50cmltKCkgOiBcIlwiO1xuXG5cdFx0XHRpZiAoIWZyb250bWF0dGVyLmlkKSB7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCB0eXBlID0gKGZyb250bWF0dGVyLnR5cGUgfHwgXCJ0ZXh0XCIpIGFzIENvbnRlbnRCbG9ja1tcInR5cGVcIl07XG5cdFx0XHRcblx0XHRcdC8vIEJ1aWxkIG1ldGFkYXRhIGZyb20gZnJvbnRtYXR0ZXIgZmlyc3Rcblx0XHRcdGNvbnN0IG1ldGFkYXRhOiBDb250ZW50QmxvY2tbXCJtZXRhZGF0YVwiXSA9IHt9O1xuXHRcdFx0XG5cdFx0XHQvLyBQYXJzZSBjb250ZW50IGJhc2VkIG9uIHR5cGVcblx0XHRcdGlmICh0eXBlID09PSBcImltYWdlXCIpIHtcblx0XHRcdFx0Ly8gRXh0cmFjdCBpbWFnZSBwYXRoIGZyb20gIVthbHRdKHBhdGgpXG5cdFx0XHRcdGNvbnN0IGltZ01hdGNoID0gYmxvY2tDb250ZW50Lm1hdGNoKC8hXFxbW15cXF1dKlxcXVxcKChbXildKylcXCkvKTtcblx0XHRcdFx0aWYgKGltZ01hdGNoKSB7XG5cdFx0XHRcdFx0YmxvY2tDb250ZW50ID0gaW1nTWF0Y2hbMV07XG5cdFx0XHRcdFx0Ly8gSWYgaXQncyBhIGxvY2FsIGZpbGVuYW1lIChub3QgYSBVUkwpLCB1c2Ugb3JpZ2luYWxfdXJsIGZyb20gZnJvbnRtYXR0ZXIgZm9yIHN5bmNcblx0XHRcdFx0XHRpZiAoIWJsb2NrQ29udGVudC5zdGFydHNXaXRoKFwiaHR0cFwiKSAmJiBmcm9udG1hdHRlci5vcmlnaW5hbF91cmwpIHtcblx0XHRcdFx0XHRcdGJsb2NrQ29udGVudCA9IGZyb250bWF0dGVyLm9yaWdpbmFsX3VybCBhcyBzdHJpbmc7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwidmlkZW9cIiB8fCB0eXBlID09PSBcImF1ZGlvXCIgfHwgdHlwZSA9PT0gXCJsaW5rXCIpIHtcblx0XHRcdFx0Ly8gRXh0cmFjdCBVUkwgZnJvbSBbdGV4dF0odXJsKVxuXHRcdFx0XHRjb25zdCBsaW5rTWF0Y2ggPSBibG9ja0NvbnRlbnQubWF0Y2goL1xcW1teXFxdXSpcXF1cXCgoW14pXSspXFwpLyk7XG5cdFx0XHRcdGlmIChsaW5rTWF0Y2gpIHtcblx0XHRcdFx0XHRibG9ja0NvbnRlbnQgPSBsaW5rTWF0Y2hbMV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29udGludWUgYnVpbGRpbmcgbWV0YWRhdGEgZnJvbSBmcm9udG1hdHRlclxuXHRcdFx0aWYgKGZyb250bWF0dGVyLndvcmRfY291bnQpIG1ldGFkYXRhLndvcmRfY291bnQgPSBwYXJzZUludChmcm9udG1hdHRlci53b3JkX2NvdW50LCAxMCk7XG5cdFx0XHRpZiAoZnJvbnRtYXR0ZXIuYWx0X3RleHQpIG1ldGFkYXRhLmFsdF90ZXh0ID0gZnJvbnRtYXR0ZXIuYWx0X3RleHQ7XG5cdFx0XHRpZiAoZnJvbnRtYXR0ZXIuY2FwdGlvbikgbWV0YWRhdGEuY2FwdGlvbiA9IGZyb250bWF0dGVyLmNhcHRpb247XG5cdFx0XHRpZiAoZnJvbnRtYXR0ZXIud2lkdGgpIG1ldGFkYXRhLndpZHRoID0gcGFyc2VJbnQoZnJvbnRtYXR0ZXIud2lkdGgsIDEwKTtcblx0XHRcdGlmIChmcm9udG1hdHRlci5oZWlnaHQpIG1ldGFkYXRhLmhlaWdodCA9IHBhcnNlSW50KGZyb250bWF0dGVyLmhlaWdodCwgMTApO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLm1pbWVfdHlwZSkgbWV0YWRhdGEubWltZV90eXBlID0gZnJvbnRtYXR0ZXIubWltZV90eXBlO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLnNvdXJjZSkgbWV0YWRhdGEuc291cmNlID0gZnJvbnRtYXR0ZXIuc291cmNlIGFzIFwidW5zcGxhc2hcIiB8IFwiaW50ZXJuZXQgbGlua1wiIHwgXCJsb2NhbFwiO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLmF1dGhvcl9uYW1lKSBtZXRhZGF0YS5hdXRob3JfbmFtZSA9IGZyb250bWF0dGVyLmF1dGhvcl9uYW1lO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLmF0dHJpYnV0aW9uKSBtZXRhZGF0YS5hdHRyaWJ1dGlvbiA9IGZyb250bWF0dGVyLmF0dHJpYnV0aW9uO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLmF0dHJpYnV0aW9uX3VybCkgbWV0YWRhdGEuYXR0cmlidXRpb25fdXJsID0gZnJvbnRtYXR0ZXIuYXR0cmlidXRpb25fdXJsO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLnByb3ZpZGVyKSBtZXRhZGF0YS5wcm92aWRlciA9IGZyb250bWF0dGVyLnByb3ZpZGVyO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLnZpZGVvX2lkKSBtZXRhZGF0YS52aWRlb19pZCA9IGZyb250bWF0dGVyLnZpZGVvX2lkO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLmR1cmF0aW9uKSBtZXRhZGF0YS5kdXJhdGlvbiA9IHBhcnNlSW50KGZyb250bWF0dGVyLmR1cmF0aW9uLCAxMCk7XG5cdFx0XHRpZiAoZnJvbnRtYXR0ZXIudGh1bWJuYWlsX3VybCkgbWV0YWRhdGEudGh1bWJuYWlsX3VybCA9IGZyb250bWF0dGVyLnRodW1ibmFpbF91cmw7XG5cdFx0XHRpZiAoZnJvbnRtYXR0ZXIuZW1iZWRfaHRtbCkgbWV0YWRhdGEuaHRtbCA9IGZyb250bWF0dGVyLmVtYmVkX2h0bWw7XG5cdFx0XHRpZiAoZnJvbnRtYXR0ZXIubGlua190aXRsZSkgbWV0YWRhdGEudGl0bGUgPSBmcm9udG1hdHRlci5saW5rX3RpdGxlO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLmxpbmtfZGVzY3JpcHRpb24pIG1ldGFkYXRhLmRlc2NyaXB0aW9uID0gZnJvbnRtYXR0ZXIubGlua19kZXNjcmlwdGlvbjtcblx0XHRcdGlmIChmcm9udG1hdHRlci5saW5rX2ltYWdlKSBtZXRhZGF0YS5pbWFnZV91cmwgPSBmcm9udG1hdHRlci5saW5rX2ltYWdlO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLnNpdGVfbmFtZSkgbWV0YWRhdGEuc2l0ZV9uYW1lID0gZnJvbnRtYXR0ZXIuc2l0ZV9uYW1lO1xuXG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRpZDogZnJvbnRtYXR0ZXIuaWQsXG5cdFx0XHRcdGNoYXB0ZXJfaWQ6IGZyb250bWF0dGVyLmNoYXB0ZXJfaWQgfHwgbnVsbCxcblx0XHRcdFx0b3JkZXJfbnVtOiBwYXJzZUludChmcm9udG1hdHRlci5vcmRlcl9udW0gfHwgXCIwXCIsIDEwKSxcblx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0a2luZDogZnJvbnRtYXR0ZXIua2luZCB8fCBcImZpbmFsXCIsXG5cdFx0XHRcdGNvbnRlbnQ6IGJsb2NrQ29udGVudCxcblx0XHRcdFx0bWV0YWRhdGE6IG1ldGFkYXRhLFxuXHRcdFx0XHRjcmVhdGVkX2F0OiBmcm9udG1hdHRlci5jcmVhdGVkX2F0IHx8IFwiXCIsXG5cdFx0XHRcdHVwZGF0ZWRfYXQ6IGZyb250bWF0dGVyLnVwZGF0ZWRfYXQgfHwgXCJcIixcblx0XHRcdH07XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcmVhZCBjb250ZW50IGJsb2NrIGZyb20gJHtmaWxlUGF0aH06YCwgZXJyKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0fVxuXG5cdC8vIExpc3QgYWxsIGNvbnRlbnQgYmxvY2sgZmlsZXMgaW4gYSBzdG9yeSBmb2xkZXIgKGFjcm9zcyBhbGwgdHlwZSBzdWJmb2xkZXJzKVxuXHRhc3luYyBsaXN0Q29udGVudEJsb2NrRmlsZXMoc3RvcnlGb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG5cdFx0Y29uc3QgY29udGVudHNQYXRoID0gYCR7c3RvcnlGb2xkZXJQYXRofS8wMy1jb250ZW50c2A7XG5cdFx0Y29uc3QgZm9sZGVyID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY29udGVudHNQYXRoKTtcblxuXHRcdGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fVxuXG5cdFx0Y29uc3QgY29udGVudEZpbGVzOiBzdHJpbmdbXSA9IFtdO1xuXHRcdFxuXHRcdC8vIEl0ZXJhdGUgdGhyb3VnaCB0eXBlIHN1YmZvbGRlcnNcblx0XHRmb3IgKGNvbnN0IGNoaWxkIG9mIGZvbGRlci5jaGlsZHJlbikge1xuXHRcdFx0aWYgKGNoaWxkIGluc3RhbmNlb2YgVEZvbGRlcikge1xuXHRcdFx0XHQvLyBUaGlzIGlzIGEgdHlwZSBzdWJmb2xkZXIgKHRleHQsIGltYWdlcywgZXRjLilcblx0XHRcdFx0Zm9yIChjb25zdCBmaWxlIG9mIGNoaWxkLmNoaWxkcmVuKSB7XG5cdFx0XHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gXCJtZFwiKSB7XG5cdFx0XHRcdFx0XHRjb250ZW50RmlsZXMucHVzaChmaWxlLnBhdGgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjb250ZW50RmlsZXMuc29ydCgpO1xuXHR9XG59XG5cbiIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgVEZpbGUsIFRGb2xkZXIgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IFN0b3J5RW5naW5lQ2xpZW50IH0gZnJvbSBcIi4uL2FwaS9jbGllbnRcIjtcbmltcG9ydCB7IEZpbGVNYW5hZ2VyIH0gZnJvbSBcIi4vZmlsZU1hbmFnZXJcIjtcbmltcG9ydCB7XG5cdFN0b3J5RW5naW5lU2V0dGluZ3MsXG5cdENvbnRlbnRCbG9jayxcblx0Q29udGVudEFuY2hvcixcblx0U2NlbmUsXG5cdEJlYXQsXG5cdENoYXB0ZXIsXG5cdFNjZW5lV2l0aEJlYXRzLFxuXHRTdG9yeSxcbn0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBwYXJzZUhpZXJhcmNoaWNhbFByb3NlLCBwYXJzZUNoYXB0ZXJQcm9zZSwgY29tcGFyZUNvbnRlbnRCbG9ja3MsIFBhcnNlZFBhcmFncmFwaCwgQ29udGVudEJsb2NrQ29tcGFyaXNvbiwgSGllcmFyY2hpY2FsUHJvc2UsIHBhcnNlU2NlbmVCZWF0TGlzdCwgUGFyc2VkU2NlbmVCZWF0TGlzdEl0ZW0sIHBhcnNlQ2hhcHRlckxpc3QsIFBhcnNlZENoYXB0ZXJMaXN0SXRlbSwgUGFyc2VkQ2hhcHRlckxpc3QsIHBhcnNlQmVhdExpc3QsIFBhcnNlZEJlYXRMaXN0LCBQYXJzZWRCZWF0TGlzdEl0ZW0sIHBhcnNlT3JwaGFuU2NlbmVzTGlzdCwgcGFyc2VPcnBoYW5CZWF0c0xpc3QsIHBhcnNlU3RvcnlQcm9zZSwgcGFyc2VTY2VuZVByb3NlLCBwYXJzZUJlYXRQcm9zZSB9IGZyb20gXCIuL2NvbnRlbnRCbG9ja1BhcnNlclwiO1xuaW1wb3J0IHsgQ29uZmxpY3RNb2RhbCwgQ29uZmxpY3RSZXNvbHV0aW9uUmVzdWx0IH0gZnJvbSBcIi4uL3ZpZXdzL21vZGFscy9Db25mbGljdE1vZGFsXCI7XG5pbXBvcnQgeyBTeW5jRW50aXR5UGF5bG9hZCwgU3luY0VudGl0eVRhcmdldCB9IGZyb20gXCIuL2VudGl0eVN5bmNUeXBlc1wiO1xuaW1wb3J0IHsgYXBpVXBkYXRlTm90aWZpZXIgfSBmcm9tIFwiLi9hcGlVcGRhdGVOb3RpZmllclwiO1xuXG5leHBvcnQgY2xhc3MgU3luY1NlcnZpY2Uge1xuXHRwcml2YXRlIHVuc3Vic2NyaWJlRnJvbU5vdGlmaWVyPzogKCkgPT4gdm9pZDtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIGFwaUNsaWVudDogU3RvcnlFbmdpbmVDbGllbnQsXG5cdFx0cHJpdmF0ZSBmaWxlTWFuYWdlcjogRmlsZU1hbmFnZXIsXG5cdFx0cHJpdmF0ZSBzZXR0aW5nczogU3RvcnlFbmdpbmVTZXR0aW5ncyxcblx0XHRwcml2YXRlIGFwcDogQXBwXG5cdCkge1xuXHRcdGlmICh0aGlzLnNldHRpbmdzLmF1dG9TeW5jT25BcGlVcGRhdGVzKSB7XG5cdFx0XHR0aGlzLnVuc3Vic2NyaWJlRnJvbU5vdGlmaWVyID0gYXBpVXBkYXRlTm90aWZpZXIuc3Vic2NyaWJlKGFzeW5jIChwYXlsb2FkKSA9PiB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHBseUVudGl0eURhdGEocGF5bG9hZCk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gYXV0by1zeW5jIGVudGl0eSBkYXRhXCIsIGVycik7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdGRpc3Bvc2UoKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMudW5zdWJzY3JpYmVGcm9tTm90aWZpZXIpIHtcblx0XHRcdHRoaXMudW5zdWJzY3JpYmVGcm9tTm90aWZpZXIoKTtcblx0XHRcdHRoaXMudW5zdWJzY3JpYmVGcm9tTm90aWZpZXIgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUHVsbCBzdG9yeSBmcm9tIHNlcnZpY2UgdG8gT2JzaWRpYW4gKFNlcnZpY2UgXHUyMTkyIE9ic2lkaWFuKVxuXHRhc3luYyBwdWxsU3Rvcnkoc3RvcnlJZDogc3RyaW5nLCB0YXJnZXQ/OiBTeW5jRW50aXR5VGFyZ2V0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0dHJ5IHtcblx0XHRcdGlmICh0YXJnZXQpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wdWxsU2luZ2xlRW50aXR5KHN0b3J5SWQsIHRhcmdldCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3Qgc3RvcnlEYXRhID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0U3RvcnlXaXRoSGllcmFyY2h5KHN0b3J5SWQpO1xuXHRcdFx0Y29uc3QgZm9sZGVyUGF0aCA9IHRoaXMuZmlsZU1hbmFnZXIuZ2V0U3RvcnlGb2xkZXJQYXRoKFxuXHRcdFx0XHRzdG9yeURhdGEuc3RvcnkudGl0bGVcblx0XHRcdCk7XG5cblx0XHRcdC8vIElNUE9SVEFOVDogUmVhZCBleGlzdGluZyBtZXRhZGF0YSBCRUZPUkUgd3JpdGluZyB0byBkZXRlY3QgdmVyc2lvbiBjaGFuZ2VzXG5cdFx0XHRjb25zdCBleGlzdGluZ01ldGFkYXRhID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlclxuXHRcdFx0XHQucmVhZFN0b3J5TWV0YWRhdGEoZm9sZGVyUGF0aClcblx0XHRcdFx0LmNhdGNoKCgpID0+IG51bGwpO1xuXG5cdFx0XHQvLyBGZXRjaCBzY2VuZXMgYW5kIGJlYXRzIHdpdGhvdXQgY2hhcHRlcl9pZCAob3JwaGFucylcblx0XHRcdGNvbnN0IGFsbFNjZW5lcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFNjZW5lc0J5U3Rvcnkoc3RvcnlJZCk7XG5cdFx0XHRjb25zdCBvcnBoYW5TY2VuZXM6IFNjZW5lV2l0aEJlYXRzW10gPSBbXTtcblx0XHRcdFxuXHRcdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBhbGxTY2VuZXMpIHtcblx0XHRcdFx0aWYgKCFzY2VuZS5jaGFwdGVyX2lkKSB7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0cyhzY2VuZS5pZCk7XG5cdFx0XHRcdFx0b3JwaGFuU2NlbmVzLnB1c2goeyBzY2VuZSwgYmVhdHMgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gU29ydCBvcnBoYW4gc2NlbmVzIGJ5IG9yZGVyX251bVxuXHRcdFx0b3JwaGFuU2NlbmVzLnNvcnQoKGEsIGIpID0+IGEuc2NlbmUub3JkZXJfbnVtIC0gYi5zY2VuZS5vcmRlcl9udW0pO1xuXHRcdFx0XG5cdFx0XHQvLyBGZXRjaCBiZWF0cyB3aXRob3V0IHNjZW5lX2lkIChvcnBoYW4gYmVhdHMpXG5cdFx0XHRjb25zdCBhbGxCZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzQnlTdG9yeShzdG9yeUlkKTtcblx0XHRcdGNvbnN0IG9ycGhhbkJlYXRzOiBCZWF0W10gPSBbXTtcblx0XHRcdGNvbnN0IHNjZW5lSWRTZXQgPSBuZXcgU2V0KGFsbFNjZW5lcy5tYXAocyA9PiBzLmlkKSk7XG5cdFx0XHRcblx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBhbGxCZWF0cykge1xuXHRcdFx0XHQvLyBDaGVjayBpZiBiZWF0J3Mgc2NlbmVfaWQgZG9lc24ndCBleGlzdCBvciBpcyBpbnZhbGlkXG5cdFx0XHRcdGlmICghYmVhdC5zY2VuZV9pZCB8fCAhc2NlbmVJZFNldC5oYXMoYmVhdC5zY2VuZV9pZCkpIHtcblx0XHRcdFx0XHRvcnBoYW5CZWF0cy5wdXNoKGJlYXQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIFNvcnQgb3JwaGFuIGJlYXRzIGJ5IG9yZGVyX251bVxuXHRcdFx0b3JwaGFuQmVhdHMuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSk7XG5cdFx0XHRcblx0XHRcdC8vIEZldGNoIHByb3NlIGJsb2NrcyBmb3IgYWxsIGNoYXB0ZXJzIHRvIGluY2x1ZGUgaW4gc3RvcnkubWRcblx0XHRcdGNvbnN0IGNoYXB0ZXJDb250ZW50RGF0YSA9IG5ldyBNYXA8c3RyaW5nLCB7IGNvbnRlbnRCbG9ja3M6IENvbnRlbnRCbG9ja1tdLCBjb250ZW50QmxvY2tSZWZzOiBDb250ZW50QW5jaG9yW10gfT4oKTtcblx0XHRcdGZvciAoY29uc3QgY2hhcHRlcldpdGhDb250ZW50IG9mIHN0b3J5RGF0YS5jaGFwdGVycykge1xuXHRcdFx0XHRjb25zdCBjb250ZW50QmxvY2tzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2NrcyhjaGFwdGVyV2l0aENvbnRlbnQuY2hhcHRlci5pZCk7XG5cdFx0XHRcdGNvbnN0IGNvbnRlbnRCbG9ja1JlZnM6IENvbnRlbnRBbmNob3JbXSA9IFtdO1xuXHRcdFx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBjb250ZW50QmxvY2tzKSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVmcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRBbmNob3JzKGNvbnRlbnRCbG9jay5pZCk7XG5cdFx0XHRcdFx0Y29udGVudEJsb2NrUmVmcy5wdXNoKC4uLnJlZnMpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNoYXB0ZXJDb250ZW50RGF0YS5zZXQoY2hhcHRlcldpdGhDb250ZW50LmNoYXB0ZXIuaWQsIHsgY29udGVudEJsb2NrcywgY29udGVudEJsb2NrUmVmcyB9KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gV3JpdGUgc3RvcnkgbWV0YWRhdGEgd2l0aCBjaGFwdGVycyBsaXN0LCBvcnBoYW4gc2NlbmVzLCBvcnBoYW4gYmVhdHMsIGFuZCBwcm9zZSBkYXRhXG5cdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlU3RvcnlNZXRhZGF0YShcblx0XHRcdFx0c3RvcnlEYXRhLnN0b3J5LFxuXHRcdFx0XHRmb2xkZXJQYXRoLFxuXHRcdFx0XHRzdG9yeURhdGEuY2hhcHRlcnMsXG5cdFx0XHRcdG9ycGhhblNjZW5lcyxcblx0XHRcdFx0b3JwaGFuQmVhdHMsXG5cdFx0XHRcdGNoYXB0ZXJDb250ZW50RGF0YVxuXHRcdFx0KTtcblxuXHRcdFx0Ly8gRW5zdXJlIGNvbnRlbnRzIGZvbGRlciBhbmQgdHlwZSBzdWJmb2xkZXJzIGV4aXN0XG5cdFx0XHRjb25zdCBjb250ZW50c0ZvbGRlclBhdGggPSBgJHtmb2xkZXJQYXRofS8wMy1jb250ZW50c2A7XG5cdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyhjb250ZW50c0ZvbGRlclBhdGgpO1xuXHRcdFx0Ly8gQ3JlYXRlIHR5cGUgc3ViZm9sZGVyc1xuXHRcdFx0Zm9yIChjb25zdCB0eXBlRm9sZGVyIG9mIFtcIjAwLXRleHRzXCIsIFwiMDEtaW1hZ2VzXCIsIFwiMDItdmlkZW9zXCIsIFwiMDMtYXVkaW9zXCIsIFwiMDQtZW1iZWRzXCIsIFwiMDUtbGlua3NcIl0pIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHMoYCR7Y29udGVudHNGb2xkZXJQYXRofS8ke3R5cGVGb2xkZXJ9YCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEVuc3VyZSBjaGFwdGVycyBmb2xkZXIgZXhpc3RzXG5cdFx0XHRjb25zdCBjaGFwdGVyc0ZvbGRlclBhdGggPSBgJHtmb2xkZXJQYXRofS8wMC1jaGFwdGVyc2A7XG5cdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyhjaGFwdGVyc0ZvbGRlclBhdGgpO1xuXG5cdFx0XHQvLyBXcml0ZSBjaGFwdGVyIGZpbGVzIHdpdGggY29udGVudCBibG9ja3Ncblx0XHRcdGZvciAoY29uc3QgY2hhcHRlcldpdGhDb250ZW50IG9mIHN0b3J5RGF0YS5jaGFwdGVycykge1xuXHRcdFx0XHQvLyBHZXQgY29udGVudCBibG9ja3MgZnJvbSB0aGUgYWxyZWFkeSBmZXRjaGVkIGRhdGFcblx0XHRcdFx0Y29uc3QgY29udGVudERhdGEgPSBjaGFwdGVyQ29udGVudERhdGEuZ2V0KGNoYXB0ZXJXaXRoQ29udGVudC5jaGFwdGVyLmlkKTtcblx0XHRcdFx0Y29uc3QgY29udGVudEJsb2NrcyA9IGNvbnRlbnREYXRhPy5jb250ZW50QmxvY2tzIHx8IFtdO1xuXHRcdFx0XHRjb25zdCBjb250ZW50QmxvY2tSZWZzID0gY29udGVudERhdGE/LmNvbnRlbnRCbG9ja1JlZnMgfHwgW107XG5cblx0XHRcdFx0Ly8gV3JpdGUgY29udGVudCBibG9jayBmaWxlcyB0byB0aGVpciB0eXBlLXNwZWNpZmljIHN1YmZvbGRlcnNcblx0XHRcdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2YgY29udGVudEJsb2Nrcykge1xuXHRcdFx0XHRcdGNvbnN0IGNvbnRlbnRCbG9ja0ZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGNvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0Y29uc3QgdHlwZUZvbGRlclBhdGggPSB0aGlzLmZpbGVNYW5hZ2VyLmdldENvbnRlbnRCbG9ja0ZvbGRlclBhdGgoZm9sZGVyUGF0aCwgY29udGVudEJsb2NrLnR5cGUgfHwgXCJ0ZXh0XCIpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKHR5cGVGb2xkZXJQYXRoKTtcblx0XHRcdFx0XHRjb25zdCBjb250ZW50QmxvY2tGaWxlUGF0aCA9IGAke3R5cGVGb2xkZXJQYXRofS8ke2NvbnRlbnRCbG9ja0ZpbGVOYW1lfWA7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoXG5cdFx0XHRcdFx0XHRjb250ZW50QmxvY2ssXG5cdFx0XHRcdFx0XHRjb250ZW50QmxvY2tGaWxlUGF0aCxcblx0XHRcdFx0XHRcdHN0b3J5RGF0YS5zdG9yeS50aXRsZVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBXcml0ZSBjaGFwdGVyIGZpbGUgd2l0aCBoaWVyYXJjaGljYWwgcHJvc2Ugc3RydWN0dXJlXG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJGaWxlTmFtZSA9IGBDaGFwdGVyLSR7Y2hhcHRlcldpdGhDb250ZW50LmNoYXB0ZXIubnVtYmVyfS5tZGA7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJGaWxlUGF0aCA9IGAke2NoYXB0ZXJzRm9sZGVyUGF0aH0vJHtjaGFwdGVyRmlsZU5hbWV9YDtcblx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNoYXB0ZXJGaWxlKFxuXHRcdFx0XHRcdGNoYXB0ZXJXaXRoQ29udGVudCxcblx0XHRcdFx0XHRjaGFwdGVyRmlsZVBhdGgsXG5cdFx0XHRcdFx0c3RvcnlEYXRhLnN0b3J5LnRpdGxlLFxuXHRcdFx0XHRcdGNvbnRlbnRCbG9ja3MsXG5cdFx0XHRcdFx0Y29udGVudEJsb2NrUmVmcyxcblx0XHRcdFx0XHRvcnBoYW5TY2VuZXMgLy8gSW5jbHVkZSBvcnBoYW4gc2NlbmVzIGZvciBlYXN5IGFzc29jaWF0aW9uXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0Ly8gV3JpdGUgc2NlbmUgZmlsZXMgd2l0aCBwcm9zZSBibG9jayByZWZlcmVuY2VzIChmbGF0IHN0cnVjdHVyZSlcblx0XHRcdFx0Y29uc3Qgc2NlbmVzRm9sZGVyUGF0aCA9IGAke2ZvbGRlclBhdGh9LzAxLXNjZW5lc2A7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKHNjZW5lc0ZvbGRlclBhdGgpO1xuXHRcdFx0XHRcblx0XHRcdFx0Zm9yIChjb25zdCB7IHNjZW5lLCBiZWF0cyB9IG9mIGNoYXB0ZXJXaXRoQ29udGVudC5zY2VuZXMpIHtcblx0XHRcdFx0XHQvLyBGZXRjaCBwcm9zZSBibG9ja3MgcmVmZXJlbmNlZCBieSB0aGlzIHNjZW5lXG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVDb250ZW50QmxvY2tzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrc0J5U2NlbmUoc2NlbmUuaWQpO1xuXG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lKTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUZpbGVQYXRoID0gYCR7c2NlbmVzRm9sZGVyUGF0aH0vJHtzY2VuZUZpbGVOYW1lfWA7XG5cblx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlU2NlbmVGaWxlKFxuXHRcdFx0XHRcdFx0eyBzY2VuZSwgYmVhdHMgfSxcblx0XHRcdFx0XHRcdHNjZW5lRmlsZVBhdGgsXG5cdFx0XHRcdFx0XHRzdG9yeURhdGEuc3RvcnkudGl0bGUsXG5cdFx0XHRcdFx0XHRzY2VuZUNvbnRlbnRCbG9ja3MsXG5cdFx0XHRcdFx0XHRvcnBoYW5CZWF0cyAvLyBJbmNsdWRlIG9ycGhhbiBiZWF0cyBmb3IgZWFzeSBhc3NvY2lhdGlvblxuXHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHQvLyBXcml0ZSBiZWF0IGZpbGVzIHdpdGggcHJvc2UgYmxvY2sgcmVmZXJlbmNlcyAoZmxhdCBzdHJ1Y3R1cmUpXG5cdFx0XHRcdFx0Y29uc3QgYmVhdHNGb2xkZXJQYXRoID0gYCR7Zm9sZGVyUGF0aH0vMDItYmVhdHNgO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKGJlYXRzRm9sZGVyUGF0aCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIGJlYXRzKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBiZWF0Q29udGVudEJsb2NrcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRCbG9ja3NCeUJlYXQoYmVhdC5pZCk7XG5cdFx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRcdFx0Y29uc3QgYmVhdEZpbGVQYXRoID0gYCR7YmVhdHNGb2xkZXJQYXRofS8ke2JlYXRGaWxlTmFtZX1gO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUJlYXRGaWxlKGJlYXQsIGJlYXRGaWxlUGF0aCwgc3RvcnlEYXRhLnN0b3J5LnRpdGxlLCBiZWF0Q29udGVudEJsb2Nrcyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIFdyaXRlIG9ycGhhbiBzY2VuZSBmaWxlcyAoc2NlbmVzIHdpdGhvdXQgY2hhcHRlcl9pZClcblx0XHRcdGNvbnN0IHNjZW5lc0ZvbGRlclBhdGggPSBgJHtmb2xkZXJQYXRofS8wMS1zY2VuZXNgO1xuXHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHMoc2NlbmVzRm9sZGVyUGF0aCk7XG5cdFx0XHRcblx0XHRcdGZvciAoY29uc3QgeyBzY2VuZSwgYmVhdHMgfSBvZiBvcnBoYW5TY2VuZXMpIHtcblx0XHRcdFx0Ly8gRmV0Y2ggcHJvc2UgYmxvY2tzIHJlZmVyZW5jZWQgYnkgdGhpcyBzY2VuZVxuXHRcdFx0XHRjb25zdCBzY2VuZUNvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzQnlTY2VuZShzY2VuZS5pZCk7XG5cblx0XHRcdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lKTtcblx0XHRcdFx0Y29uc3Qgc2NlbmVGaWxlUGF0aCA9IGAke3NjZW5lc0ZvbGRlclBhdGh9LyR7c2NlbmVGaWxlTmFtZX1gO1xuXG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVTY2VuZUZpbGUoXG5cdFx0XHRcdFx0eyBzY2VuZSwgYmVhdHMgfSxcblx0XHRcdFx0XHRzY2VuZUZpbGVQYXRoLFxuXHRcdFx0XHRcdHN0b3J5RGF0YS5zdG9yeS50aXRsZSxcblx0XHRcdFx0XHRzY2VuZUNvbnRlbnRCbG9ja3MsXG5cdFx0XHRcdFx0b3JwaGFuQmVhdHMgLy8gSW5jbHVkZSBvcnBoYW4gYmVhdHMgZm9yIGVhc3kgYXNzb2NpYXRpb25cblx0XHRcdFx0KTtcblxuXHRcdFx0XHQvLyBXcml0ZSBiZWF0IGZpbGVzIHdpdGggcHJvc2UgYmxvY2sgcmVmZXJlbmNlcyAoZmxhdCBzdHJ1Y3R1cmUpXG5cdFx0XHRcdGNvbnN0IGJlYXRzRm9sZGVyUGF0aCA9IGAke2ZvbGRlclBhdGh9LzAyLWJlYXRzYDtcblx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHMoYmVhdHNGb2xkZXJQYXRoKTtcblx0XHRcdFx0XG5cdFx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cykge1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRDb250ZW50QmxvY2tzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrc0J5QmVhdChiZWF0LmlkKTtcblx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlUGF0aCA9IGAke2JlYXRzRm9sZGVyUGF0aH0vJHtiZWF0RmlsZU5hbWV9YDtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQmVhdEZpbGUoYmVhdCwgYmVhdEZpbGVQYXRoLCBzdG9yeURhdGEuc3RvcnkudGl0bGUsIGJlYXRDb250ZW50QmxvY2tzKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBXcml0ZSBvcnBoYW4gYmVhdCBmaWxlcyAoYmVhdHMgd2l0aG91dCBzY2VuZV9pZClcblx0XHRcdGNvbnN0IGJlYXRzRm9sZGVyUGF0aCA9IGAke2ZvbGRlclBhdGh9LzAyLWJlYXRzYDtcblx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKGJlYXRzRm9sZGVyUGF0aCk7XG5cdFx0XHRcblx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBvcnBoYW5CZWF0cykge1xuXHRcdFx0XHRjb25zdCBiZWF0Q29udGVudEJsb2NrcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRCbG9ja3NCeUJlYXQoYmVhdC5pZCk7XG5cdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRcdGNvbnN0IGJlYXRGaWxlUGF0aCA9IGAke2JlYXRzRm9sZGVyUGF0aH0vJHtiZWF0RmlsZU5hbWV9YDtcblx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUJlYXRGaWxlKGJlYXQsIGJlYXRGaWxlUGF0aCwgc3RvcnlEYXRhLnN0b3J5LnRpdGxlLCBiZWF0Q29udGVudEJsb2Nrcyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENoZWNrIGlmIHZlcnNpb24gY2hhbmdlZCBhbmQgY3JlYXRlIHNuYXBzaG90IGlmIG5lZWRlZCAoZXhpc3RpbmdNZXRhZGF0YSB3YXMgcmVhZCBCRUZPUkUgd3JpdGluZylcblx0XHRcdGlmIChcblx0XHRcdFx0ZXhpc3RpbmdNZXRhZGF0YSAmJlxuXHRcdFx0XHRleGlzdGluZ01ldGFkYXRhLmZyb250bWF0dGVyLnZlcnNpb24gIT09IHVuZGVmaW5lZCAmJlxuXHRcdFx0XHRleGlzdGluZ01ldGFkYXRhLmZyb250bWF0dGVyLnZlcnNpb24gIT09IHN0b3J5RGF0YS5zdG9yeS52ZXJzaW9uX251bWJlclxuXHRcdFx0KSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuY3JlYXRlVmVyc2lvblNuYXBzaG90KFxuXHRcdFx0XHRcdGZvbGRlclBhdGgsXG5cdFx0XHRcdFx0ZXhpc3RpbmdNZXRhZGF0YS5mcm9udG1hdHRlci52ZXJzaW9uXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN5bmMgYWxsIHByZXZpb3VzIHZlcnNpb25zIHRvIHRoZSB2ZXJzaW9ucyBmb2xkZXJcblx0XHRcdGF3YWl0IHRoaXMuc3luY1ZlcnNpb25IaXN0b3J5KHN0b3J5RGF0YS5zdG9yeS5yb290X3N0b3J5X2lkLCBmb2xkZXJQYXRoKTtcblxuXHRcdFx0bmV3IE5vdGljZShgU3RvcnkgXCIke3N0b3J5RGF0YS5zdG9yeS50aXRsZX1cIiBzeW5jZWQgc3VjY2Vzc2Z1bGx5YCk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPVxuXHRcdFx0XHRlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gc3luYyBzdG9yeVwiO1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3Igc3luY2luZyBzdG9yeTogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHR0aHJvdyBlcnI7XG5cdFx0fVxuXHR9XG5cblx0Ly8gU3luYyBhbGwgcHJldmlvdXMgdmVyc2lvbnMgb2YgYSBzdG9yeVxuXHRwcml2YXRlIGFzeW5jIHN5bmNWZXJzaW9uSGlzdG9yeShcblx0XHRyb290U3RvcnlJZDogc3RyaW5nLFxuXHRcdHN0b3J5Rm9sZGVyUGF0aDogc3RyaW5nXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRyeSB7XG5cdFx0XHQvLyBHZXQgQUxMIHN0b3JpZXMgYW5kIGZpbHRlciBieSByb290X3N0b3J5X2lkXG5cdFx0XHRjb25zdCBhbGxTdG9yaWVzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQubGlzdFN0b3JpZXMoKTtcblx0XHRcdGNvbnN0IHZlcnNpb25zID0gYWxsU3Rvcmllcy5maWx0ZXIocyA9PiBzLnJvb3Rfc3RvcnlfaWQgPT09IHJvb3RTdG9yeUlkKTtcblxuXHRcdFx0Ly8gU29ydCBieSB2ZXJzaW9uIG51bWJlclxuXHRcdFx0dmVyc2lvbnMuc29ydCgoYSwgYikgPT4gYS52ZXJzaW9uX251bWJlciAtIGIudmVyc2lvbl9udW1iZXIpO1xuXG5cdFx0XHRjb25zdCB2ZXJzaW9uc1BhdGggPSBgJHtzdG9yeUZvbGRlclBhdGh9L3ZlcnNpb25zYDtcblx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKHZlcnNpb25zUGF0aCk7XG5cblx0XHRcdC8vIEZvciBlYWNoIHZlcnNpb24gKGV4Y2VwdCB0aGUgY3VycmVudCBvbmUpLCBmZXRjaCBhbmQgc3RvcmVcblx0XHRcdGZvciAoY29uc3QgdmVyc2lvblN0b3J5IG9mIHZlcnNpb25zKSB7XG5cdFx0XHRcdC8vIFNraXAgdGhlIGN1cnJlbnQgdmVyc2lvbiAoaXQncyBhbHJlYWR5IGluIHRoZSByb290IGZvbGRlcilcblx0XHRcdFx0Y29uc3QgY3VycmVudFZlcnNpb24gPSB2ZXJzaW9uc1t2ZXJzaW9ucy5sZW5ndGggLSAxXS52ZXJzaW9uX251bWJlcjtcblx0XHRcdFx0aWYgKHZlcnNpb25TdG9yeS52ZXJzaW9uX251bWJlciA9PT0gY3VycmVudFZlcnNpb24pIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IHZlcnNpb25Gb2xkZXJQYXRoID0gYCR7dmVyc2lvbnNQYXRofS92JHt2ZXJzaW9uU3RvcnkudmVyc2lvbl9udW1iZXJ9YDtcblxuXHRcdFx0XHQvLyBDaGVjayBpZiB0aGlzIHZlcnNpb24gYWxyZWFkeSBleGlzdHNcblx0XHRcdFx0Ly8gKFdlIHdvbid0IG92ZXJ3cml0ZSBleGlzdGluZyB2ZXJzaW9ucyB0byBwcmVzZXJ2ZSBsb2NhbCBlZGl0cylcblx0XHRcdFx0Y29uc3QgZXhpc3RpbmdWZXJzaW9uRm9sZGVyID0gdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLmdldEFic3RyYWN0RmlsZUJ5UGF0aChcblx0XHRcdFx0XHR2ZXJzaW9uRm9sZGVyUGF0aFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRpZiAoZXhpc3RpbmdWZXJzaW9uRm9sZGVyKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coYFZlcnNpb24gdiR7dmVyc2lvblN0b3J5LnZlcnNpb25fbnVtYmVyfSBhbHJlYWR5IGV4aXN0cywgc2tpcHBpbmdgKTtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEZldGNoIGZ1bGwgdmVyc2lvbiBkYXRhXG5cdFx0XHRcdGNvbnN0IHZlcnNpb25EYXRhID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0U3RvcnlXaXRoSGllcmFyY2h5KFxuXHRcdFx0XHRcdHZlcnNpb25TdG9yeS5pZFxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdC8vIENyZWF0ZSB2ZXJzaW9uIGZvbGRlclxuXHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyh2ZXJzaW9uRm9sZGVyUGF0aCk7XG5cblx0XHRcdFx0Ly8gV3JpdGUgdmVyc2lvbiBtZXRhZGF0YVxuXHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlU3RvcnlNZXRhZGF0YShcblx0XHRcdFx0XHR2ZXJzaW9uRGF0YS5zdG9yeSxcblx0XHRcdFx0XHR2ZXJzaW9uRm9sZGVyUGF0aFxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdC8vIEVuc3VyZSBjb250ZW50cyBmb2xkZXIgYW5kIHR5cGUgc3ViZm9sZGVycyBleGlzdCBmb3IgdmVyc2lvblxuXHRcdFx0XHRjb25zdCB2ZXJzaW9uQ29udGVudHNGb2xkZXJQYXRoID0gYCR7dmVyc2lvbkZvbGRlclBhdGh9LzAzLWNvbnRlbnRzYDtcblx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHModmVyc2lvbkNvbnRlbnRzRm9sZGVyUGF0aCk7XG5cdFx0XHRcdGZvciAoY29uc3QgdHlwZUZvbGRlciBvZiBbXCIwMC10ZXh0c1wiLCBcIjAxLWltYWdlc1wiLCBcIjAyLXZpZGVvc1wiLCBcIjAzLWF1ZGlvc1wiLCBcIjA0LWVtYmVkc1wiLCBcIjA1LWxpbmtzXCJdKSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHMoYCR7dmVyc2lvbkNvbnRlbnRzRm9sZGVyUGF0aH0vJHt0eXBlRm9sZGVyfWApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gV3JpdGUgdmVyc2lvbiBjaGFwdGVyc1xuXHRcdFx0XHRjb25zdCB2ZXJzaW9uQ2hhcHRlcnNQYXRoID0gYCR7dmVyc2lvbkZvbGRlclBhdGh9LzAwLWNoYXB0ZXJzYDtcblx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHModmVyc2lvbkNoYXB0ZXJzUGF0aCk7XG5cblx0XHRcdFx0Zm9yIChjb25zdCBjaGFwdGVyV2l0aENvbnRlbnQgb2YgdmVyc2lvbkRhdGEuY2hhcHRlcnMpIHtcblx0XHRcdFx0XHQvLyBGZXRjaCBwcm9zZSBibG9ja3MgZm9yIHRoaXMgY2hhcHRlclxuXHRcdFx0XHRcdGNvbnN0IGNvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzKGNoYXB0ZXJXaXRoQ29udGVudC5jaGFwdGVyLmlkKTtcblxuXHRcdFx0XHRcdC8vIEZldGNoIHByb3NlIGJsb2NrIHJlZmVyZW5jZXMgZm9yIGFsbCBwcm9zZSBibG9ja3Ncblx0XHRcdFx0XHRjb25zdCBjb250ZW50QmxvY2tSZWZzOiBDb250ZW50QW5jaG9yW10gPSBbXTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBjb250ZW50QmxvY2tzKSB7XG5cdFx0XHRcdFx0XHRjb25zdCByZWZzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEFuY2hvcnMoY29udGVudEJsb2NrLmlkKTtcblx0XHRcdFx0XHRcdGNvbnRlbnRCbG9ja1JlZnMucHVzaCguLi5yZWZzKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBXcml0ZSBwcm9zZSBibG9jayBmaWxlc1xuXHRcdFx0XHRcdGZvciAoY29uc3QgY29udGVudEJsb2NrIG9mIGNvbnRlbnRCbG9ja3MpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGNvbnRlbnRCbG9ja0ZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGNvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRjb25zdCB0eXBlRm9sZGVyUGF0aCA9IHRoaXMuZmlsZU1hbmFnZXIuZ2V0Q29udGVudEJsb2NrRm9sZGVyUGF0aCh2ZXJzaW9uRm9sZGVyUGF0aCwgY29udGVudEJsb2NrLnR5cGUgfHwgXCJ0ZXh0XCIpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHModHlwZUZvbGRlclBhdGgpO1xuXHRcdFx0XHRcdFx0Y29uc3QgY29udGVudEJsb2NrRmlsZVBhdGggPSBgJHt0eXBlRm9sZGVyUGF0aH0vJHtjb250ZW50QmxvY2tGaWxlTmFtZX1gO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoXG5cdFx0XHRcdFx0XHRcdGNvbnRlbnRCbG9jayxcblx0XHRcdFx0XHRcdFx0Y29udGVudEJsb2NrRmlsZVBhdGgsXG5cdFx0XHRcdFx0XHRcdHZlcnNpb25EYXRhLnN0b3J5LnRpdGxlXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNvbnN0IGNoYXB0ZXJGaWxlTmFtZSA9IGBDaGFwdGVyLSR7Y2hhcHRlcldpdGhDb250ZW50LmNoYXB0ZXIubnVtYmVyfS5tZGA7XG5cdFx0XHRcdFx0Y29uc3QgY2hhcHRlckZpbGVQYXRoID0gYCR7dmVyc2lvbkNoYXB0ZXJzUGF0aH0vJHtjaGFwdGVyRmlsZU5hbWV9YDtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQ2hhcHRlckZpbGUoXG5cdFx0XHRcdFx0XHRjaGFwdGVyV2l0aENvbnRlbnQsXG5cdFx0XHRcdFx0XHRjaGFwdGVyRmlsZVBhdGgsXG5cdFx0XHRcdFx0XHR2ZXJzaW9uRGF0YS5zdG9yeS50aXRsZSxcblx0XHRcdFx0XHRcdGNvbnRlbnRCbG9ja3MsXG5cdFx0XHRcdFx0XHRjb250ZW50QmxvY2tSZWZzXG5cdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdC8vIFdyaXRlIHNjZW5lIGZpbGVzIChmbGF0IHN0cnVjdHVyZSlcblx0XHRcdFx0XHRjb25zdCB2ZXJzaW9uU2NlbmVzUGF0aCA9IGAke3ZlcnNpb25Gb2xkZXJQYXRofS8wMS1zY2VuZXNgO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKHZlcnNpb25TY2VuZXNQYXRoKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRmb3IgKGNvbnN0IHsgc2NlbmUsIGJlYXRzIH0gb2YgY2hhcHRlcldpdGhDb250ZW50LnNjZW5lcykge1xuXHRcdFx0XHRcdFx0Y29uc3Qgc2NlbmVDb250ZW50QmxvY2tzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrc0J5U2NlbmUoc2NlbmUuaWQpO1xuXHRcdFx0XHRcdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lKTtcblx0XHRcdFx0XHRcdGNvbnN0IHNjZW5lRmlsZVBhdGggPSBgJHt2ZXJzaW9uU2NlbmVzUGF0aH0vJHtzY2VuZUZpbGVOYW1lfWA7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlU2NlbmVGaWxlKFxuXHRcdFx0XHRcdFx0XHR7IHNjZW5lLCBiZWF0cyB9LFxuXHRcdFx0XHRcdFx0XHRzY2VuZUZpbGVQYXRoLFxuXHRcdFx0XHRcdFx0XHR2ZXJzaW9uRGF0YS5zdG9yeS50aXRsZSxcblx0XHRcdFx0XHRcdFx0c2NlbmVDb250ZW50QmxvY2tzXG5cdFx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0XHQvLyBXcml0ZSBiZWF0IGZpbGVzIChmbGF0IHN0cnVjdHVyZSlcblx0XHRcdFx0XHRcdGNvbnN0IHZlcnNpb25CZWF0c1BhdGggPSBgJHt2ZXJzaW9uRm9sZGVyUGF0aH0vMDItYmVhdHNgO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHModmVyc2lvbkJlYXRzUGF0aCk7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cykge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBiZWF0Q29udGVudEJsb2NrcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRCbG9ja3NCeUJlYXQoYmVhdC5pZCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlUGF0aCA9IGAke3ZlcnNpb25CZWF0c1BhdGh9LyR7YmVhdEZpbGVOYW1lfWA7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVCZWF0RmlsZShiZWF0LCBiZWF0RmlsZVBhdGgsIHZlcnNpb25EYXRhLnN0b3J5LnRpdGxlLCBiZWF0Q29udGVudEJsb2Nrcyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc29sZS5sb2coYFN5bmNlZCB2ZXJzaW9uIHYke3ZlcnNpb25TdG9yeS52ZXJzaW9uX251bWJlcn1gKTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzeW5jaW5nIHZlcnNpb24gaGlzdG9yeTpcIiwgZXJyKTtcblx0XHRcdC8vIERvbid0IHRocm93IC0gdmVyc2lvbiBzeW5jIGlzIG9wdGlvbmFsXG5cdFx0fVxuXHR9XG5cblx0Ly8gUHVsbCBhbGwgc3Rvcmllc1xuXHRhc3luYyBwdWxsQWxsU3RvcmllcygpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBPbmx5IHZhbGlkYXRlIHRlbmFudCBJRCBpbiByZW1vdGUgbW9kZVxuXHRcdGlmICh0aGlzLnNldHRpbmdzLm1vZGUgPT09IFwicmVtb3RlXCIgJiYgIXRoaXMuc2V0dGluZ3MudGVuYW50SWQpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlRlbmFudCBJRCBpcyByZXF1aXJlZFwiKTtcblx0XHR9XG5cblx0XHQvLyBQdWxsIHdvcmxkcyAoZm9yIGRpc3BsYXkvbWV0YWRhdGEpXG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFdvcmxkcygpO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBsb2FkIHdvcmxkczpcIiwgZXJyKTtcblx0XHRcdC8vIERvbid0IGZhaWwgdGhlIGVudGlyZSBzeW5jIGlmIHdvcmxkcyBmYWlsXG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3RvcmllcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50Lmxpc3RTdG9yaWVzKCk7XG5cblx0XHRmb3IgKGNvbnN0IHN0b3J5IG9mIHN0b3JpZXMpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucHVsbFN0b3J5KHN0b3J5LmlkKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gc3luYyBzdG9yeSAke3N0b3J5LmlkfTpgLCBlcnIpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdG5ldyBOb3RpY2UoYFN5bmNlZCAke3N0b3JpZXMubGVuZ3RofSBzdG9yaWVzYCk7XG5cdH1cblxuXHQvLyBBcHBseSBlbnRpdHkgZGF0YSByZWNlaXZlZCBmcm9tIEFQSSB3aXRob3V0IGZldGNoaW5nXG5cdGFzeW5jIGFwcGx5RW50aXR5RGF0YShwYXlsb2FkOiBTeW5jRW50aXR5UGF5bG9hZCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHN3aXRjaCAocGF5bG9hZC50eXBlKSB7XG5cdFx0XHRjYXNlIFwiY2hhcHRlclwiOiB7XG5cdFx0XHRcdGF3YWl0IHRoaXMud3JpdGVDaGFwdGVyQnVuZGxlKHtcblx0XHRcdFx0XHRzdG9yeTogcGF5bG9hZC5zdG9yeSxcblx0XHRcdFx0XHRjaGFwdGVyOiBwYXlsb2FkLmNoYXB0ZXIsXG5cdFx0XHRcdFx0c2NlbmVzOiBwYXlsb2FkLnNjZW5lcyxcblx0XHRcdFx0XHRjb250ZW50QmxvY2tzOiBwYXlsb2FkLmNvbnRlbnRCbG9ja3MsXG5cdFx0XHRcdFx0Y29udGVudEJsb2NrUmVmczogcGF5bG9hZC5jb250ZW50QmxvY2tSZWZzLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0bmV3IE5vdGljZShgQ2hhcHRlciBcIiR7cGF5bG9hZC5jaGFwdGVyLnRpdGxlfVwiIHN5bmNlZCBzdWNjZXNzZnVsbHlgKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRjYXNlIFwic2NlbmVcIjoge1xuXHRcdFx0XHRjb25zdCBiZWF0Q29udGVudEJsb2NrTWFwID0gbmV3IE1hcDxzdHJpbmcsIENvbnRlbnRCbG9ja1tdPigpO1xuXHRcdFx0XHRpZiAocGF5bG9hZC5iZWF0Q29udGVudEJsb2Nrcykge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgW2JlYXRJZCwgYmxvY2tzXSBvZiBPYmplY3QuZW50cmllcyhwYXlsb2FkLmJlYXRDb250ZW50QmxvY2tzKSkge1xuXHRcdFx0XHRcdFx0YmVhdENvbnRlbnRCbG9ja01hcC5zZXQoYmVhdElkLCBibG9ja3MpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGZvbGRlclBhdGggPSB0aGlzLmZpbGVNYW5hZ2VyLmdldFN0b3J5Rm9sZGVyUGF0aChwYXlsb2FkLnN0b3J5LnRpdGxlKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5lbnN1cmVTdG9yeUZvbGRlcnMoZm9sZGVyUGF0aCk7XG5cblx0XHRcdFx0YXdhaXQgdGhpcy53cml0ZVNjZW5lQnVuZGxlKHtcblx0XHRcdFx0XHRzdG9yeVRpdGxlOiBwYXlsb2FkLnN0b3J5LnRpdGxlLFxuXHRcdFx0XHRcdGZvbGRlclBhdGgsXG5cdFx0XHRcdFx0c2NlbmU6IHBheWxvYWQuc2NlbmUsXG5cdFx0XHRcdFx0YmVhdHM6IHBheWxvYWQuYmVhdHMsXG5cdFx0XHRcdFx0c2NlbmVDb250ZW50QmxvY2tzOiBwYXlsb2FkLnNjZW5lQ29udGVudEJsb2Nrcyxcblx0XHRcdFx0XHRiZWF0Q29udGVudEJsb2NrTWFwLFxuXHRcdFx0XHRcdHNraXBSZW1vdGVDb250ZW50RmV0Y2g6IHRydWUsXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGlmIChwYXlsb2FkLnNjZW5lQ29udGVudEJsb2Nrcykge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgY29udGVudEJsb2NrIG9mIHBheWxvYWQuc2NlbmVDb250ZW50QmxvY2tzKSB7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLndyaXRlQ29udGVudEJsb2NrVG9Gb2xkZXIoZm9sZGVyUGF0aCwgcGF5bG9hZC5zdG9yeS50aXRsZSwgY29udGVudEJsb2NrKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmb3IgKGNvbnN0IGJsb2NrcyBvZiBiZWF0Q29udGVudEJsb2NrTWFwLnZhbHVlcygpKSB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2YgYmxvY2tzKSB7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLndyaXRlQ29udGVudEJsb2NrVG9Gb2xkZXIoZm9sZGVyUGF0aCwgcGF5bG9hZC5zdG9yeS50aXRsZSwgY29udGVudEJsb2NrKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRuZXcgTm90aWNlKGBTY2VuZSBcIiR7cGF5bG9hZC5zY2VuZS5nb2FsfVwiIHN5bmNlZCBzdWNjZXNzZnVsbHlgKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRjYXNlIFwiY29udGVudFwiOiB7XG5cdFx0XHRcdGNvbnN0IGZvbGRlclBhdGggPSB0aGlzLmZpbGVNYW5hZ2VyLmdldFN0b3J5Rm9sZGVyUGF0aChwYXlsb2FkLnN0b3J5LnRpdGxlKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5lbnN1cmVDb250ZW50Rm9sZGVycyhmb2xkZXJQYXRoKTtcblx0XHRcdFx0YXdhaXQgdGhpcy53cml0ZUNvbnRlbnRCbG9ja1RvRm9sZGVyKFxuXHRcdFx0XHRcdGZvbGRlclBhdGgsXG5cdFx0XHRcdFx0cGF5bG9hZC5zdG9yeS50aXRsZSxcblx0XHRcdFx0XHRwYXlsb2FkLmNvbnRlbnRCbG9ja1xuXHRcdFx0XHQpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQ29udGVudCBibG9jayBzeW5jZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBQdXNoIHN0b3J5IGZyb20gT2JzaWRpYW4gdG8gc2VydmljZSAoT2JzaWRpYW4gXHUyMTkyIFNlcnZpY2UpXG5cdGFzeW5jIHB1c2hTdG9yeShmb2xkZXJQYXRoOiBzdHJpbmcsIHRhcmdldD86IFN5bmNFbnRpdHlUYXJnZXQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0cnkge1xuXHRcdFx0Ly8gUmVhZCBzdG9yeSBtZXRhZGF0YVxuXHRcdFx0Y29uc3QgeyBmcm9udG1hdHRlcjogc3RvcnlGcm9udG1hdHRlciB9ID1cblx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5yZWFkU3RvcnlNZXRhZGF0YShmb2xkZXJQYXRoKTtcblxuXHRcdFx0aWYgKCFzdG9yeUZyb250bWF0dGVyLmlkKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIlN0b3J5IG1ldGFkYXRhIG1pc3NpbmcgSURcIik7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHN0b3J5SWQgPSBzdG9yeUZyb250bWF0dGVyLmlkO1xuXG5cdFx0XHRpZiAodGFyZ2V0KSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucHVzaFNpbmdsZUVudGl0eShmb2xkZXJQYXRoLCB0YXJnZXQsIHN0b3J5SWQsIHN0b3J5RnJvbnRtYXR0ZXIudGl0bGUpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJlYWQgc3RvcnkgZmlsZSB0byBwYXJzZSBjaGFwdGVyIGxpc3QgYW5kIG9ycGhhbiBsaXN0c1xuXHRcdFx0Y29uc3Qgc3RvcnlGaWxlUGF0aCA9IGAke2ZvbGRlclBhdGh9L3N0b3J5Lm1kYDtcblx0XHRcdGNvbnN0IHN0b3J5RmlsZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoc3RvcnlGaWxlUGF0aCk7XG5cdFx0XHRpZiAoc3RvcnlGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdFx0Y29uc3Qgc3RvcnlDb250ZW50ID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLnJlYWQoc3RvcnlGaWxlKTtcblx0XHRcdFx0Y29uc3QgY2hhcHRlckxpc3QgPSBwYXJzZUNoYXB0ZXJMaXN0KHN0b3J5Q29udGVudCk7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBQcm9jZXNzIGNoYXB0ZXIgbGlzdCB0byB1cGRhdGUgb3JkZXJcblx0XHRcdFx0aWYgKGNoYXB0ZXJMaXN0Lml0ZW1zLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnByb2Nlc3NDaGFwdGVyTGlzdChjaGFwdGVyTGlzdCwgc3RvcnlJZCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdC8vIFBhcnNlIGFuZCBwcm9jZXNzIG9ycGhhbiBzY2VuZXMgbGlzdFxuXHRcdFx0XHRjb25zdCBvcnBoYW5TY2VuZXNMaXN0ID0gcGFyc2VPcnBoYW5TY2VuZXNMaXN0KHN0b3J5Q29udGVudCk7XG5cdFx0XHRcdGlmIChvcnBoYW5TY2VuZXNMaXN0Lml0ZW1zLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnByb2Nlc3NPcnBoYW5TY2VuZXNMaXN0KG9ycGhhblNjZW5lc0xpc3QsIHN0b3J5SWQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUGFyc2UgYW5kIHByb2Nlc3Mgb3JwaGFuIGJlYXRzIGxpc3Rcblx0XHRcdFx0Y29uc3Qgb3JwaGFuQmVhdHNMaXN0ID0gcGFyc2VPcnBoYW5CZWF0c0xpc3Qoc3RvcnlDb250ZW50KTtcblx0XHRcdFx0aWYgKG9ycGhhbkJlYXRzTGlzdC5pdGVtcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wcm9jZXNzT3JwaGFuQmVhdHNMaXN0KG9ycGhhbkJlYXRzTGlzdCwgc3RvcnlJZCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBQYXJzZSBhbmQgcHJvY2VzcyBwcm9zZSBibG9ja3MgYXQgc3RvcnkgbGV2ZWxcblx0XHRcdFx0Y29uc3Qgc3RvcnlQcm9zZSA9IHBhcnNlU3RvcnlQcm9zZShzdG9yeUNvbnRlbnQpO1xuXHRcdFx0XHRpZiAoc3RvcnlQcm9zZS5zZWN0aW9ucy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wdXNoU3RvcnlDb250ZW50QmxvY2tzKHN0b3J5RmlsZVBhdGgsIGZvbGRlclBhdGgsIHN0b3J5SWQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBVcGRhdGUgc3RvcnkgbWV0YWRhdGFcblx0XHRcdGF3YWl0IHRoaXMuYXBpQ2xpZW50LnVwZGF0ZVN0b3J5KFxuXHRcdFx0XHRzdG9yeUlkLFxuXHRcdFx0XHRzdG9yeUZyb250bWF0dGVyLnRpdGxlLFxuXHRcdFx0XHRzdG9yeUZyb250bWF0dGVyLnN0YXR1c1xuXHRcdFx0KTtcblxuXHRcdFx0Ly8gUmVhZCBhbmQgdXBkYXRlIGNoYXB0ZXJzXG5cdFx0XHRjb25zdCBjaGFwdGVyRmlsZXMgPSBhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmxpc3RDaGFwdGVyRmlsZXMoZm9sZGVyUGF0aCk7XG5cblx0XHRcdGZvciAoY29uc3QgY2hhcHRlckZpbGVQYXRoIG9mIGNoYXB0ZXJGaWxlcykge1xuXHRcdFx0XHQvLyBQYXJzZSBjaGFwdGVyIGZpbGUgYW5kIHVwZGF0ZSB2aWEgQVBJXG5cdFx0XHRcdC8vIChUaGlzIHdvdWxkIHJlcXVpcmUgaW1wbGVtZW50aW5nIGNoYXB0ZXIgdXBkYXRlIGxvZ2ljKVxuXHRcdFx0XHRjb25zb2xlLmxvZyhgV291bGQgdXBkYXRlIGNoYXB0ZXI6ICR7Y2hhcHRlckZpbGVQYXRofWApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBQdXNoIHByb3NlIGJsb2NrcyBmb3IgZWFjaCBjaGFwdGVyXG5cdFx0XHRmb3IgKGNvbnN0IGNoYXB0ZXJGaWxlUGF0aCBvZiBjaGFwdGVyRmlsZXMpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wdXNoQ2hhcHRlckNvbnRlbnRCbG9ja3MoY2hhcHRlckZpbGVQYXRoLCBmb2xkZXJQYXRoKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUHJvY2VzcyBzY2VuZSBmaWxlcyB0byB1cGRhdGUgYmVhdCBsaXN0cyBhbmQgcHJvc2UgYmxvY2tzXG5cdFx0XHQvLyBTY2VuZXMgYXJlIHN0b3JlZCBpbiAke2ZvbGRlclBhdGh9LzAxLXNjZW5lcyAobm90IGluIGNoYXB0ZXJzLzAxLXNjZW5lcylcblx0XHRcdGNvbnN0IHNjZW5lRmlsZXMgPSBhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmxpc3RTdG9yeVNjZW5lRmlsZXMoZm9sZGVyUGF0aCk7XG5cdFx0XHRcblx0XHRcdGZvciAoY29uc3Qgc2NlbmVGaWxlUGF0aCBvZiBzY2VuZUZpbGVzKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucHVzaFNjZW5lQmVhdHMoc2NlbmVGaWxlUGF0aCwgc3RvcnlJZCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMucHVzaFNjZW5lQ29udGVudEJsb2NrcyhzY2VuZUZpbGVQYXRoLCBmb2xkZXJQYXRoKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUHJvY2VzcyBiZWF0IGZpbGVzIHRvIHVwZGF0ZSBwcm9zZSBibG9ja3Ncblx0XHRcdC8vIEJlYXRzIGFyZSBzdG9yZWQgaW4gJHtmb2xkZXJQYXRofS8wMi1iZWF0c1xuXHRcdFx0Y29uc3QgYmVhdEZpbGVzID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlci5saXN0U3RvcnlCZWF0RmlsZXMoZm9sZGVyUGF0aCk7XG5cdFx0XHRcblx0XHRcdGZvciAoY29uc3QgYmVhdEZpbGVQYXRoIG9mIGJlYXRGaWxlcykge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnB1c2hCZWF0Q29udGVudEJsb2NrcyhiZWF0RmlsZVBhdGgsIGZvbGRlclBhdGgpO1xuXHRcdFx0fVxuXG5cdFx0XHRuZXcgTm90aWNlKGBTdG9yeSBcIiR7c3RvcnlGcm9udG1hdHRlci50aXRsZX1cIiBwdXNoZWQgc3VjY2Vzc2Z1bGx5YCk7XG5cblx0XHRcdC8vIFB1bGwgc3RvcnkgYWZ0ZXIgcHVzaCB0byBzeW5jIGFueSBzZXJ2ZXItc2lkZSBjaGFuZ2VzIGFuZCB1cGRhdGUgbG9jYWwgZmlsZXNcblx0XHRcdHRyeSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYFN5bmNpbmcgc3RvcnkgXCIke3N0b3J5RnJvbnRtYXR0ZXIudGl0bGV9XCIgZnJvbSBzZXJ2aWNlLi4uYCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMucHVsbFN0b3J5KHN0b3J5SWQpO1xuXHRcdFx0XHRuZXcgTm90aWNlKGBTdG9yeSBcIiR7c3RvcnlGcm9udG1hdHRlci50aXRsZX1cIiBzeW5jZWQgc3VjY2Vzc2Z1bGx5YCk7XG5cdFx0XHR9IGNhdGNoIChwdWxsRXJyKSB7XG5cdFx0XHRcdGNvbnN0IHB1bGxFcnJvck1lc3NhZ2UgPVxuXHRcdFx0XHRcdHB1bGxFcnIgaW5zdGFuY2VvZiBFcnJvciA/IHB1bGxFcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIHN5bmMgc3RvcnkgYWZ0ZXIgcHVzaFwiO1xuXHRcdFx0XHRuZXcgTm90aWNlKGBXYXJuaW5nOiAke3B1bGxFcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHRcdC8vIERvbid0IHRocm93IC0gcHVzaCB3YXMgc3VjY2Vzc2Z1bCwgc3luYyBmYWlsdXJlIGlzIGp1c3QgYSB3YXJuaW5nXG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPVxuXHRcdFx0XHRlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gcHVzaCBzdG9yeVwiO1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3IgcHVzaGluZyBzdG9yeTogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHR0aHJvdyBlcnI7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUHVzaCBwcm9zZSBibG9ja3MgZnJvbSBhIGNoYXB0ZXIgZmlsZSAoaGllcmFyY2hpY2FsIHN0cnVjdHVyZSlcblx0YXN5bmMgcHVzaENoYXB0ZXJDb250ZW50QmxvY2tzKGNoYXB0ZXJGaWxlUGF0aDogc3RyaW5nLCBzdG9yeUZvbGRlclBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdC8vIFJlYWQgY2hhcHRlciBmaWxlXG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY2hhcHRlckZpbGVQYXRoKTtcblx0XHRpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYENoYXB0ZXIgZmlsZSBub3QgZm91bmQ6ICR7Y2hhcHRlckZpbGVQYXRofWApO1xuXHRcdH1cblxuXHRcdGNvbnN0IGNoYXB0ZXJDb250ZW50ID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLnJlYWQoZmlsZSk7XG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSB0aGlzLmZpbGVNYW5hZ2VyLnBhcnNlRnJvbnRtYXR0ZXIoY2hhcHRlckNvbnRlbnQpO1xuXG5cdFx0aWYgKCFmcm9udG1hdHRlci5pZCB8fCAhZnJvbnRtYXR0ZXIuc3RvcnlfaWQpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIkNoYXB0ZXIgbWV0YWRhdGEgbWlzc2luZyBJRCBvciBzdG9yeV9pZFwiKTtcblx0XHR9XG5cblx0XHRjb25zdCBjaGFwdGVySWQgPSBmcm9udG1hdHRlci5pZDtcblx0XHRjb25zdCBzdG9yeUlkID0gZnJvbnRtYXR0ZXIuc3RvcnlfaWQ7XG5cdFx0Y29uc3QgY29udGVudHNGb2xkZXJQYXRoID0gYCR7c3RvcnlGb2xkZXJQYXRofS8wMy1jb250ZW50c2A7XG5cblx0XHQvLyBQYXJzZSBhbmQgcHJvY2VzcyB0aGUgXCIjIyBTY2VuZXMgJiBCZWF0c1wiIGxpc3QgZmlyc3Rcblx0XHRjb25zdCBzY2VuZUJlYXRMaXN0ID0gcGFyc2VTY2VuZUJlYXRMaXN0KGNoYXB0ZXJDb250ZW50KTtcblx0XHRhd2FpdCB0aGlzLnByb2Nlc3NTY2VuZUJlYXRMaXN0KHNjZW5lQmVhdExpc3QsIGNoYXB0ZXJJZCwgc3RvcnlJZCk7XG5cblx0XHQvLyBHZXQgYWxsIHByb3NlIGJsb2NrcyBmcm9tIEFQSSBmb3IgdGhpcyBjaGFwdGVyXG5cdFx0Y29uc3QgcmVtb3RlQ29udGVudEJsb2NrcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRCbG9ja3MoY2hhcHRlcklkKTtcblx0XHRjb25zdCByZW1vdGVDb250ZW50QmxvY2tzTWFwID0gbmV3IE1hcDxzdHJpbmcsIENvbnRlbnRCbG9jaz4oKTtcblx0XHRmb3IgKGNvbnN0IHBiIG9mIHJlbW90ZUNvbnRlbnRCbG9ja3MpIHtcblx0XHRcdHJlbW90ZUNvbnRlbnRCbG9ja3NNYXAuc2V0KHBiLmlkLCBwYik7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IGV4aXN0aW5nIHNjZW5lcyBhbmQgYmVhdHMgZm9yIHRoaXMgY2hhcHRlciAoYWZ0ZXIgcHJvY2Vzc2luZyBsaXN0KVxuXHRcdGNvbnN0IGV4aXN0aW5nU2NlbmVzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0U2NlbmVzKGNoYXB0ZXJJZCk7XG5cdFx0Y29uc3Qgc2NlbmVNYXAgPSBuZXcgTWFwPHN0cmluZywgU2NlbmU+KCk7IC8vIE1hcCBieSBsaW5rIG5hbWVcblx0XHRjb25zdCBzY2VuZUlkTWFwID0gbmV3IE1hcDxzdHJpbmcsIFNjZW5lPigpOyAvLyBNYXAgYnkgSURcblx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIGV4aXN0aW5nU2NlbmVzKSB7XG5cdFx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lKTtcblx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRzY2VuZU1hcC5zZXQobGlua05hbWUsIHNjZW5lKTtcblx0XHRcdHNjZW5lSWRNYXAuc2V0KHNjZW5lLmlkLCBzY2VuZSk7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IGFsbCBiZWF0cyBmb3Igc2NlbmVzIGluIHRoaXMgY2hhcHRlclxuXHRcdGNvbnN0IGJlYXRNYXAgPSBuZXcgTWFwPHN0cmluZywgQmVhdD4oKTsgLy8gTWFwIGJ5IGxpbmsgbmFtZVxuXHRcdGNvbnN0IGJlYXRJZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBCZWF0PigpOyAvLyBNYXAgYnkgSURcblx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIGV4aXN0aW5nU2NlbmVzKSB7XG5cdFx0XHRjb25zdCBiZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzKHNjZW5lLmlkKTtcblx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cykge1xuXHRcdFx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdGJlYXRNYXAuc2V0KGxpbmtOYW1lLCBiZWF0KTtcblx0XHRcdFx0YmVhdElkTWFwLnNldChiZWF0LmlkLCBiZWF0KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBQYXJzZSBoaWVyYXJjaGljYWwgc3RydWN0dXJlIGZyb20gQ2hhcHRlciBzZWN0aW9uXG5cdFx0Y29uc3QgaGllcmFyY2hpY2FsID0gcGFyc2VIaWVyYXJjaGljYWxQcm9zZShjaGFwdGVyQ29udGVudCk7XG5cblx0XHQvLyBQcm9jZXNzIHNlY3Rpb25zIGhpZXJhcmNoaWNhbGx5XG5cdFx0Y29uc3QgdXBkYXRlZFNlY3Rpb25zOiBzdHJpbmdbXSA9IFtdO1xuXHRcdGxldCBjdXJyZW50U2NlbmU6IFNjZW5lIHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IGN1cnJlbnRCZWF0OiBCZWF0IHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IHByb3NlT3JkZXJOdW0gPSAxO1xuXHRcdGxldCBzY2VuZU9yZGVyTnVtID0gZXhpc3RpbmdTY2VuZXMubGVuZ3RoID4gMCBcblx0XHRcdD8gTWF0aC5tYXgoLi4uZXhpc3RpbmdTY2VuZXMubWFwKHMgPT4gcy5vcmRlcl9udW0pKSArIDEgXG5cdFx0XHQ6IDE7XG5cblx0XHRmb3IgKGNvbnN0IHNlY3Rpb24gb2YgaGllcmFyY2hpY2FsLnNlY3Rpb25zKSB7XG5cdFx0XHRpZiAoc2VjdGlvbi50eXBlID09PSBcInNjZW5lXCIgJiYgc2VjdGlvbi5zY2VuZSkge1xuXHRcdFx0XHRjb25zdCB7IHNjZW5lOiBwYXJzZWRTY2VuZSB9ID0gc2VjdGlvbjtcblx0XHRcdFx0XG5cdFx0XHRcdGlmIChwYXJzZWRTY2VuZS5saW5rTmFtZSkge1xuXHRcdFx0XHRcdC8vIFNjZW5lIGV4aXN0cyAtIGZpbmQgaXRcblx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBzY2VuZU1hcC5nZXQocGFyc2VkU2NlbmUubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0aWYgKCFjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0XHRcdC8vIFRyeSB0byBmaW5kIGJ5IElEIGlmIGxpbmtOYW1lIGlzIGFjdHVhbGx5IGFuIElEXG5cdFx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBzY2VuZUlkTWFwLmdldChwYXJzZWRTY2VuZS5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKGN1cnJlbnRTY2VuZSkge1xuXHRcdFx0XHRcdFx0Ly8gVXBkYXRlIHNjZW5lIGlmIG5lZWRlZFxuXHRcdFx0XHRcdFx0aWYgKHBhcnNlZFNjZW5lLmdvYWwgIT09IGN1cnJlbnRTY2VuZS5nb2FsIHx8IHBhcnNlZFNjZW5lLnRpbWVSZWYgIT09IGN1cnJlbnRTY2VuZS50aW1lX3JlZikge1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVTY2VuZShjdXJyZW50U2NlbmUuaWQsIHtcblx0XHRcdFx0XHRcdFx0XHRnb2FsOiBwYXJzZWRTY2VuZS5nb2FsLFxuXHRcdFx0XHRcdFx0XHRcdHRpbWVfcmVmOiBwYXJzZWRTY2VuZS50aW1lUmVmLFxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIG5ldyBzY2VuZVxuXHRcdFx0XHRcdGN1cnJlbnRTY2VuZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZVNjZW5lKHtcblx0XHRcdFx0XHRcdHN0b3J5X2lkOiBzdG9yeUlkLFxuXHRcdFx0XHRcdFx0Y2hhcHRlcl9pZDogY2hhcHRlcklkLFxuXHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBzY2VuZU9yZGVyTnVtKyssXG5cdFx0XHRcdFx0XHRnb2FsOiBwYXJzZWRTY2VuZS5nb2FsLFxuXHRcdFx0XHRcdFx0dGltZV9yZWY6IHBhcnNlZFNjZW5lLnRpbWVSZWYsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gVXBkYXRlIG1hcHNcblx0XHRcdFx0XHRjb25zdCBzY2VuZUZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZVNjZW5lRmlsZU5hbWUoY3VycmVudFNjZW5lKTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUxpbmtOYW1lID0gc2NlbmVGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRzY2VuZU1hcC5zZXQoc2NlbmVMaW5rTmFtZSwgY3VycmVudFNjZW5lKTtcblx0XHRcdFx0XHRzY2VuZUlkTWFwLnNldChjdXJyZW50U2NlbmUuaWQsIGN1cnJlbnRTY2VuZSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gV3JpdGUgc2NlbmUgZmlsZSAoc2NlbmVzIGFyZSB3cml0dGVuIHNlcGFyYXRlbHkgZHVyaW5nIHB1bGwsIHNvIHdlIHNraXAgaGVyZSlcblx0XHRcdFx0XHQvLyBUaGUgc2NlbmUgd2lsbCBiZSB3cml0dGVuIHByb3Blcmx5IG9uIG5leHQgcHVsbFxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gRm9ybWF0IHNjZW5lIGhlYWRlciB3aXRoIGxpbmsgYW5kIHByZWZpeFxuXHRcdFx0XHRpZiAoY3VycmVudFNjZW5lKSB7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKGN1cnJlbnRTY2VuZSk7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVMaW5rTmFtZSA9IHNjZW5lRmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVEaXNwbGF5VGV4dCA9IGN1cnJlbnRTY2VuZS50aW1lX3JlZlxuXHRcdFx0XHRcdFx0PyBgJHtjdXJyZW50U2NlbmUuZ29hbH0gLSAke2N1cnJlbnRTY2VuZS50aW1lX3JlZn1gXG5cdFx0XHRcdFx0XHQ6IGN1cnJlbnRTY2VuZS5nb2FsO1xuXHRcdFx0XHRcdHVwZGF0ZWRTZWN0aW9ucy5wdXNoKGAjIyBTY2VuZTogW1ske3NjZW5lTGlua05hbWV9fCR7c2NlbmVEaXNwbGF5VGV4dH1dXWApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRjdXJyZW50QmVhdCA9IG51bGw7IC8vIFJlc2V0IGJlYXQgd2hlbiBuZXcgc2NlbmUgc3RhcnRzXG5cdFx0XHR9IGVsc2UgaWYgKHNlY3Rpb24udHlwZSA9PT0gXCJiZWF0XCIgJiYgc2VjdGlvbi5iZWF0KSB7XG5cdFx0XHRcdGNvbnN0IHsgYmVhdDogcGFyc2VkQmVhdCB9ID0gc2VjdGlvbjtcblx0XHRcdFx0XG5cdFx0XHRcdGlmICghY3VycmVudFNjZW5lKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiQmVhdCBmb3VuZCB3aXRob3V0IGEgcGFyZW50IHNjZW5lXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAocGFyc2VkQmVhdC5saW5rTmFtZSkge1xuXHRcdFx0XHRcdC8vIEJlYXQgZXhpc3RzIC0gZmluZCBpdFxuXHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYmVhdE1hcC5nZXQocGFyc2VkQmVhdC5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0XHRpZiAoIWN1cnJlbnRCZWF0KSB7XG5cdFx0XHRcdFx0XHQvLyBUcnkgdG8gZmluZCBieSBJRCBpZiBsaW5rTmFtZSBpcyBhY3R1YWxseSBhbiBJRFxuXHRcdFx0XHRcdFx0Y3VycmVudEJlYXQgPSBiZWF0SWRNYXAuZ2V0KHBhcnNlZEJlYXQubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdFx0Ly8gVXBkYXRlIGJlYXQgaWYgbmVlZGVkXG5cdFx0XHRcdFx0XHRpZiAocGFyc2VkQmVhdC5pbnRlbnQgIT09IGN1cnJlbnRCZWF0LmludGVudCB8fCBwYXJzZWRCZWF0Lm91dGNvbWUgIT09IGN1cnJlbnRCZWF0Lm91dGNvbWUpIHtcblx0XHRcdFx0XHRcdFx0Y3VycmVudEJlYXQgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVCZWF0KGN1cnJlbnRCZWF0LmlkLCB7XG5cdFx0XHRcdFx0XHRcdFx0aW50ZW50OiBwYXJzZWRCZWF0LmludGVudCxcblx0XHRcdFx0XHRcdFx0XHRvdXRjb21lOiBwYXJzZWRCZWF0Lm91dGNvbWUsXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBDcmVhdGUgbmV3IGJlYXRcblx0XHRcdFx0XHRjb25zdCBleGlzdGluZ0JlYXRzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0QmVhdHMoY3VycmVudFNjZW5lLmlkKTtcblx0XHRcdFx0XHRjb25zdCBiZWF0T3JkZXJOdW0gPSBleGlzdGluZ0JlYXRzLmxlbmd0aCA+IDBcblx0XHRcdFx0XHRcdD8gTWF0aC5tYXgoLi4uZXhpc3RpbmdCZWF0cy5tYXAoYiA9PiBiLm9yZGVyX251bSkpICsgMVxuXHRcdFx0XHRcdFx0OiAxO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQmVhdCh7XG5cdFx0XHRcdFx0XHRzY2VuZV9pZDogY3VycmVudFNjZW5lLmlkLFxuXHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBiZWF0T3JkZXJOdW0sXG5cdFx0XHRcdFx0XHR0eXBlOiBcInNldHVwXCIsIC8vIERlZmF1bHQgdHlwZVxuXHRcdFx0XHRcdFx0aW50ZW50OiBwYXJzZWRCZWF0LmludGVudCxcblx0XHRcdFx0XHRcdG91dGNvbWU6IHBhcnNlZEJlYXQub3V0Y29tZSxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBVcGRhdGUgbWFwc1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoY3VycmVudEJlYXQpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRMaW5rTmFtZSA9IGJlYXRGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRiZWF0TWFwLnNldChiZWF0TGlua05hbWUsIGN1cnJlbnRCZWF0KTtcblx0XHRcdFx0XHRiZWF0SWRNYXAuc2V0KGN1cnJlbnRCZWF0LmlkLCBjdXJyZW50QmVhdCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gV3JpdGUgYmVhdCBmaWxlIChiZWF0cyBhcmUgd3JpdHRlbiBzZXBhcmF0ZWx5IGR1cmluZyBwdWxsLCBzbyB3ZSBza2lwIGhlcmUpXG5cdFx0XHRcdFx0Ly8gVGhlIGJlYXQgd2lsbCBiZSB3cml0dGVuIHByb3Blcmx5IG9uIG5leHQgcHVsbFxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gRm9ybWF0IGJlYXQgaGVhZGVyIHdpdGggbGluayBhbmQgcHJlZml4XG5cdFx0XHRcdGlmIChjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoY3VycmVudEJlYXQpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRMaW5rTmFtZSA9IGJlYXRGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRjb25zdCBiZWF0RGlzcGxheVRleHQgPSBjdXJyZW50QmVhdC5vdXRjb21lXG5cdFx0XHRcdFx0XHQ/IGAke2N1cnJlbnRCZWF0LmludGVudH0gLT4gJHtjdXJyZW50QmVhdC5vdXRjb21lfWBcblx0XHRcdFx0XHRcdDogY3VycmVudEJlYXQuaW50ZW50O1xuXHRcdFx0XHRcdHVwZGF0ZWRTZWN0aW9ucy5wdXNoKGAjIyMgQmVhdDogW1ske2JlYXRMaW5rTmFtZX18JHtiZWF0RGlzcGxheVRleHR9XV1gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChzZWN0aW9uLnR5cGUgPT09IFwicHJvc2VcIiAmJiBzZWN0aW9uLnByb3NlKSB7XG5cdFx0XHRcdGNvbnN0IHsgcHJvc2U6IHBhcmFncmFwaCB9ID0gc2VjdGlvbjtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIFByb2Nlc3MgcHJvc2UgYmxvY2tcblx0XHRcdFx0bGV0IGxvY2FsQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2sgfCBudWxsID0gbnVsbDtcblx0XHRcdFx0bGV0IHJlbW90ZUNvbnRlbnRCbG9jazogQ29udGVudEJsb2NrIHwgbnVsbCA9IG51bGw7XG5cblx0XHRcdFx0Ly8gSWYgcGFyYWdyYXBoIGhhcyBhIGxpbmssIHJlYWQgdGhlIGxvY2FsIGZpbGVcblx0XHRcdFx0aWYgKHBhcmFncmFwaC5saW5rTmFtZSkge1xuXHRcdFx0XHRcdC8vIFNlYXJjaCBmb3IgZmlsZSBpbiB0eXBlIHN1YmZvbGRlcnNcblx0XHRcdFx0XHRjb25zdCBjb250ZW50QmxvY2tGaWxlUGF0aCA9IGF3YWl0IHRoaXMuZmluZENvbnRlbnRCbG9ja0ZpbGVCeUxpbmtOYW1lKGNvbnRlbnRzRm9sZGVyUGF0aCwgcGFyYWdyYXBoLmxpbmtOYW1lKTtcblx0XHRcdFx0XHRpZiAoY29udGVudEJsb2NrRmlsZVBhdGgpIHtcblx0XHRcdFx0XHRcdGxvY2FsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlci5yZWFkQ29udGVudEJsb2NrRnJvbUZpbGUoY29udGVudEJsb2NrRmlsZVBhdGgpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIElmIGZpbGUgbm90IGZvdW5kIGJ5IGV4YWN0IG5hbWUsIHRyeSB0byBmaW5kIGJ5IHNlYXJjaGluZyBhbGwgcHJvc2UgYmxvY2sgZmlsZXNcblx0XHRcdFx0XHRpZiAoIWxvY2FsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmluZENvbnRlbnRCbG9ja0J5Q29udGVudChjb250ZW50c0ZvbGRlclBhdGgsIHBhcmFncmFwaC5jb250ZW50KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBGaW5kIGNvcnJlc3BvbmRpbmcgcmVtb3RlIHByb3NlIGJsb2NrXG5cdFx0XHRcdFx0aWYgKGxvY2FsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRyZW1vdGVDb250ZW50QmxvY2sgPSByZW1vdGVDb250ZW50QmxvY2tzTWFwLmdldChsb2NhbENvbnRlbnRCbG9jay5pZCkgfHwgbnVsbDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gSWYgbG9jYWwgZmlsZSBub3QgZm91bmQsIHRyeSB0byBmaW5kIHJlbW90ZSBieSBjb250ZW50IG1hdGNoXG5cdFx0XHRcdFx0XHRjb25zdCBub3JtYWxpemVkQ29udGVudCA9IHBhcmFncmFwaC5jb250ZW50LnRyaW0oKTtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgW2lkLCByZW1vdGVQQl0gb2YgcmVtb3RlQ29udGVudEJsb2Nrc01hcC5lbnRyaWVzKCkpIHtcblx0XHRcdFx0XHRcdFx0aWYgKHJlbW90ZVBCLmNvbnRlbnQudHJpbSgpID09PSBub3JtYWxpemVkQ29udGVudCkge1xuXHRcdFx0XHRcdFx0XHRcdHJlbW90ZUNvbnRlbnRCbG9jayA9IHJlbW90ZVBCO1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIE5vIGxpbmsgLSBjaGVjayBpZiB0aGVyZSdzIGEgbG9jYWwgZmlsZSB3aXRoIG1hdGNoaW5nIGNvbnRlbnRcblx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmluZENvbnRlbnRCbG9ja0J5Q29udGVudChjb250ZW50c0ZvbGRlclBhdGgsIHBhcmFncmFwaC5jb250ZW50KTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBBbHNvIGNoZWNrIHJlbW90ZSBwcm9zZSBibG9ja3MgZm9yIGNvbnRlbnQgbWF0Y2hcblx0XHRcdFx0XHRjb25zdCBub3JtYWxpemVkQ29udGVudCA9IHBhcmFncmFwaC5jb250ZW50LnRyaW0oKTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IFtpZCwgcmVtb3RlUEJdIG9mIHJlbW90ZUNvbnRlbnRCbG9ja3NNYXAuZW50cmllcygpKSB7XG5cdFx0XHRcdFx0XHRpZiAocmVtb3RlUEIuY29udGVudC50cmltKCkgPT09IG5vcm1hbGl6ZWRDb250ZW50KSB7XG5cdFx0XHRcdFx0XHRcdHJlbW90ZUNvbnRlbnRCbG9jayA9IHJlbW90ZVBCO1xuXHRcdFx0XHRcdFx0XHQvLyBJZiB3ZSBmb3VuZCBhIHJlbW90ZSBtYXRjaCwgdHJ5IHRvIGZpbmQgbG9jYWwgZmlsZSBieSBJRFxuXHRcdFx0XHRcdFx0XHRpZiAoIWxvY2FsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gU2VhcmNoIGZvciBmaWxlIHdpdGggdGhpcyBJRCBpbiBmcm9udG1hdHRlclxuXHRcdFx0XHRcdFx0XHRcdGxvY2FsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5maW5kQ29udGVudEJsb2NrQnlJZChjb250ZW50c0ZvbGRlclBhdGgsIHJlbW90ZVBCLmlkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBDb21wYXJlIGFuZCBkZXRlcm1pbmUgc3RhdHVzXG5cdFx0XHRcdGNvbnN0IHN0YXR1cyA9IGNvbXBhcmVDb250ZW50QmxvY2tzKHBhcmFncmFwaCwgbG9jYWxDb250ZW50QmxvY2ssIHJlbW90ZUNvbnRlbnRCbG9jayk7XG5cblx0XHRcdFx0bGV0IGZpbmFsQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2s7XG5cblx0XHRcdFx0c3dpdGNoIChzdGF0dXMpIHtcblx0XHRcdFx0XHRjYXNlIFwibmV3XCI6IHtcblx0XHRcdFx0XHRcdC8vIENyZWF0ZSBuZXcgcHJvc2UgYmxvY2tcblx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEJsb2NrKGNoYXB0ZXJJZCwge1xuXHRcdFx0XHRcdFx0XHRvcmRlcl9udW06IHByb3NlT3JkZXJOdW0rKyxcblx0XHRcdFx0XHRcdFx0a2luZDogXCJmaW5hbFwiLFxuXHRcdFx0XHRcdFx0XHRjb250ZW50OiBwYXJhZ3JhcGguY29udGVudCxcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHQvLyBDcmVhdGUgZmlsZSBpbiBjb3JyZWN0IHR5cGUgc3ViZm9sZGVyXG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQ29udGVudEJsb2NrRmlsZShmaW5hbENvbnRlbnRCbG9jaywgZmlsZVBhdGgsIHVuZGVmaW5lZCk7XG5cblx0XHRcdFx0XHRcdC8vIENyZWF0ZSByZWZlcmVuY2VzIGlmIG5lZWRlZFxuXHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRTY2VuZSkge1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QW5jaG9yKGZpbmFsQ29udGVudEJsb2NrLmlkLCBcInNjZW5lXCIsIGN1cnJlbnRTY2VuZS5pZCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoY3VycmVudEJlYXQpIHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJiZWF0XCIsIGN1cnJlbnRCZWF0LmlkKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gQWRkIGxpbmsgdG8gcGFyYWdyYXBoXG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShmaW5hbENvbnRlbnRCbG9jaykucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lfXwke3BhcmFncmFwaC5jb250ZW50fV1dYCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwidW5jaGFuZ2VkXCI6IHtcblx0XHRcdFx0XHRcdC8vIFVzZSByZW1vdGVDb250ZW50QmxvY2sgaWYgbG9jYWxDb250ZW50QmxvY2sgZG9lc24ndCBleGlzdFxuXHRcdFx0XHRcdFx0aWYgKCFsb2NhbENvbnRlbnRCbG9jayAmJiByZW1vdGVDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSByZW1vdGVDb250ZW50QmxvY2s7XG5cdFx0XHRcdFx0XHRcdC8vIENyZWF0ZSBsb2NhbCBmaWxlIGluIGNvcnJlY3QgdHlwZSBzdWJmb2xkZXIgc2luY2UgaXQgZG9lc24ndCBleGlzdFxuXHRcdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobG9jYWxDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgb3JkZXJfbnVtIG5lZWRzIHVwZGF0ZVxuXHRcdFx0XHRcdFx0XHRpZiAobG9jYWxDb250ZW50QmxvY2sub3JkZXJfbnVtICE9PSBwcm9zZU9yZGVyTnVtKSB7XG5cdFx0XHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVDb250ZW50QmxvY2sobG9jYWxDb250ZW50QmxvY2suaWQsIHtcblx0XHRcdFx0XHRcdFx0XHRcdG9yZGVyX251bTogcHJvc2VPcmRlck51bSsrLFxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQ29udGVudEJsb2NrRmlsZShmaW5hbENvbnRlbnRCbG9jaywgZmlsZVBhdGgsIHVuZGVmaW5lZCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBsb2NhbENvbnRlbnRCbG9jaztcblx0XHRcdFx0XHRcdFx0XHRwcm9zZU9yZGVyTnVtKys7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIFNob3VsZCBub3QgaGFwcGVuLCBidXQgaGFuZGxlIGdyYWNlZnVsbHlcblx0XHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSByZW1vdGVDb250ZW50QmxvY2shO1xuXHRcdFx0XHRcdFx0XHRwcm9zZU9yZGVyTnVtKys7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSByZWZlcmVuY2VzIGlmIG5lZWRlZFxuXHRcdFx0XHRcdFx0aWYgKGZpbmFsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nUmVmcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRBbmNob3JzKGZpbmFsQ29udGVudEJsb2NrLmlkKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgaGFzU2NlbmVSZWYgPSBleGlzdGluZ1JlZnMuc29tZShyID0+IHIuZW50aXR5X3R5cGUgPT09IFwic2NlbmVcIiAmJiByLmVudGl0eV9pZCA9PT0gY3VycmVudFNjZW5lPy5pZCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGhhc0JlYXRSZWYgPSBleGlzdGluZ1JlZnMuc29tZShyID0+IHIuZW50aXR5X3R5cGUgPT09IFwiYmVhdFwiICYmIHIuZW50aXR5X2lkID09PSBjdXJyZW50QmVhdD8uaWQpO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRTY2VuZSAmJiAhaGFzU2NlbmVSZWYpIHtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QW5jaG9yKGZpbmFsQ29udGVudEJsb2NrLmlkLCBcInNjZW5lXCIsIGN1cnJlbnRTY2VuZS5pZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRCZWF0ICYmICFoYXNCZWF0UmVmKSB7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJiZWF0XCIsIGN1cnJlbnRCZWF0LmlkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBBZGQgbGluayAtIHVzZSBleGlzdGluZyBsaW5rTmFtZSBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBnZW5lcmF0ZSBmcm9tIGZpbGVcblx0XHRcdFx0XHRcdGlmIChwYXJhZ3JhcGgubGlua05hbWUpIHtcblx0XHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtwYXJhZ3JhcGgubGlua05hbWV9fCR7cGFyYWdyYXBoLmNvbnRlbnR9XV1gKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIE5vIGxpbmtOYW1lIC0gZ2VuZXJhdGUgZnJvbSBmaW5hbENvbnRlbnRCbG9ja1xuXHRcdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShmaW5hbENvbnRlbnRCbG9jaykucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRTZWN0aW9ucy5wdXNoKGBbWyR7bGlua05hbWV9fCR7cGFyYWdyYXBoLmNvbnRlbnR9XV1gKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhc2UgXCJsb2NhbF9tb2RpZmllZFwiOiB7XG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgcHJvc2UgYmxvY2sgd2l0aCBsb2NhbCBjb250ZW50XG5cdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnVwZGF0ZUNvbnRlbnRCbG9jayhsb2NhbENvbnRlbnRCbG9jayEuaWQsIHtcblx0XHRcdFx0XHRcdFx0Y29udGVudDogcGFyYWdyYXBoLmNvbnRlbnQsXG5cdFx0XHRcdFx0XHRcdG9yZGVyX251bTogcHJvc2VPcmRlck51bSsrLFxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBsb2NhbCBmaWxlIGluIGNvcnJlY3QgdHlwZSBzdWJmb2xkZXJcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoTG9jYWxNb2QgPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoTG9jYWxNb2QsIHVuZGVmaW5lZCk7XG5cblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSByZWZlcmVuY2VzIGlmIG5lZWRlZFxuXHRcdFx0XHRcdFx0aWYgKGZpbmFsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nUmVmcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRBbmNob3JzKGZpbmFsQ29udGVudEJsb2NrLmlkKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgaGFzU2NlbmVSZWYgPSBleGlzdGluZ1JlZnMuc29tZShyID0+IHIuZW50aXR5X3R5cGUgPT09IFwic2NlbmVcIiAmJiByLmVudGl0eV9pZCA9PT0gY3VycmVudFNjZW5lPy5pZCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGhhc0JlYXRSZWYgPSBleGlzdGluZ1JlZnMuc29tZShyID0+IHIuZW50aXR5X3R5cGUgPT09IFwiYmVhdFwiICYmIHIuZW50aXR5X2lkID09PSBjdXJyZW50QmVhdD8uaWQpO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRTY2VuZSAmJiAhaGFzU2NlbmVSZWYpIHtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QW5jaG9yKGZpbmFsQ29udGVudEJsb2NrLmlkLCBcInNjZW5lXCIsIGN1cnJlbnRTY2VuZS5pZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRCZWF0ICYmICFoYXNCZWF0UmVmKSB7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJiZWF0XCIsIGN1cnJlbnRCZWF0LmlkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZUxvY2FsTW9kID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGZpbmFsQ29udGVudEJsb2NrKS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRcdHVwZGF0ZWRTZWN0aW9ucy5wdXNoKGBbWyR7bGlua05hbWVMb2NhbE1vZH18JHtwYXJhZ3JhcGguY29udGVudH1dXWApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y2FzZSBcInJlbW90ZV9tb2RpZmllZFwiOiB7XG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgbG9jYWwgZmlsZSB3aXRoIHJlbW90ZSBjb250ZW50IGluIGNvcnJlY3QgdHlwZSBzdWJmb2xkZXJcblx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gcmVtb3RlQ29udGVudEJsb2NrITtcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoUmVtb3RlTW9kID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aFJlbW90ZU1vZCwgdW5kZWZpbmVkKTtcblxuXHRcdFx0XHRcdFx0Ly8gVXBkYXRlIHJlZmVyZW5jZXMgaWYgbmVlZGVkXG5cdFx0XHRcdFx0XHRpZiAoZmluYWxDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdSZWZzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEFuY2hvcnMoZmluYWxDb250ZW50QmxvY2suaWQpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBoYXNTY2VuZVJlZiA9IGV4aXN0aW5nUmVmcy5zb21lKHIgPT4gci5lbnRpdHlfdHlwZSA9PT0gXCJzY2VuZVwiICYmIHIuZW50aXR5X2lkID09PSBjdXJyZW50U2NlbmU/LmlkKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgaGFzQmVhdFJlZiA9IGV4aXN0aW5nUmVmcy5zb21lKHIgPT4gci5lbnRpdHlfdHlwZSA9PT0gXCJiZWF0XCIgJiYgci5lbnRpdHlfaWQgPT09IGN1cnJlbnRCZWF0Py5pZCk7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRpZiAoY3VycmVudFNjZW5lICYmICFoYXNTY2VuZVJlZikge1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRBbmNob3IoZmluYWxDb250ZW50QmxvY2suaWQsIFwic2NlbmVcIiwgY3VycmVudFNjZW5lLmlkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpZiAoY3VycmVudEJlYXQgJiYgIWhhc0JlYXRSZWYpIHtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QW5jaG9yKGZpbmFsQ29udGVudEJsb2NrLmlkLCBcImJlYXRcIiwgY3VycmVudEJlYXQuaWQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lUmVtb3RlTW9kID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGZpbmFsQ29udGVudEJsb2NrKS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRcdHVwZGF0ZWRTZWN0aW9ucy5wdXNoKGBbWyR7bGlua05hbWVSZW1vdGVNb2R9fCR7ZmluYWxDb250ZW50QmxvY2suY29udGVudH1dXWApO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgUHJvc2UgYmxvY2sgdXBkYXRlZCBmcm9tIHJlbW90ZTogJHtsaW5rTmFtZVJlbW90ZU1vZH1gLCAzMDAwKTtcblx0XHRcdFx0XHRcdHByb3NlT3JkZXJOdW0rKztcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhc2UgXCJjb25mbGljdFwiOiB7XG5cdFx0XHRcdFx0XHQvLyBTaG93IGNvbmZsaWN0IG1vZGFsXG5cdFx0XHRcdFx0XHRjb25zdCByZXNvbHV0aW9uID0gYXdhaXQgdGhpcy5yZXNvbHZlQ29uZmxpY3QobG9jYWxDb250ZW50QmxvY2shLCByZW1vdGVDb250ZW50QmxvY2shKTtcblxuXHRcdFx0XHRcdFx0bGV0IHJlc29sdmVkQ29udGVudDogc3RyaW5nO1xuXHRcdFx0XHRcdFx0aWYgKHJlc29sdXRpb24ucmVzb2x1dGlvbiA9PT0gXCJsb2NhbFwiKSB7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmVkQ29udGVudCA9IHBhcmFncmFwaC5jb250ZW50O1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChyZXNvbHV0aW9uLnJlc29sdXRpb24gPT09IFwicmVtb3RlXCIpIHtcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZWRDb250ZW50ID0gcmVtb3RlQ29udGVudEJsb2NrIS5jb250ZW50O1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZWRDb250ZW50ID0gcmVzb2x1dGlvbi5tZXJnZWRDb250ZW50IHx8IHBhcmFncmFwaC5jb250ZW50O1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgcHJvc2UgYmxvY2sgd2l0aCByZXNvbHZlZCBjb250ZW50XG5cdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnVwZGF0ZUNvbnRlbnRCbG9jayhsb2NhbENvbnRlbnRCbG9jayEuaWQsIHtcblx0XHRcdFx0XHRcdFx0Y29udGVudDogcmVzb2x2ZWRDb250ZW50LFxuXHRcdFx0XHRcdFx0XHRvcmRlcl9udW06IHByb3NlT3JkZXJOdW0rKyxcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgbG9jYWwgZmlsZSBpbiBjb3JyZWN0IHR5cGUgc3ViZm9sZGVyXG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aENvbmZsaWN0ID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aENvbmZsaWN0LCB1bmRlZmluZWQpO1xuXG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgcmVmZXJlbmNlcyBpZiBuZWVkZWRcblx0XHRcdFx0XHRcdGlmIChmaW5hbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBleGlzdGluZ1JlZnMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QW5jaG9ycyhmaW5hbENvbnRlbnRCbG9jay5pZCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGhhc1NjZW5lUmVmID0gZXhpc3RpbmdSZWZzLnNvbWUociA9PiByLmVudGl0eV90eXBlID09PSBcInNjZW5lXCIgJiYgci5lbnRpdHlfaWQgPT09IGN1cnJlbnRTY2VuZT8uaWQpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBoYXNCZWF0UmVmID0gZXhpc3RpbmdSZWZzLnNvbWUociA9PiByLmVudGl0eV90eXBlID09PSBcImJlYXRcIiAmJiByLmVudGl0eV9pZCA9PT0gY3VycmVudEJlYXQ/LmlkKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdGlmIChjdXJyZW50U2NlbmUgJiYgIWhhc1NjZW5lUmVmKSB7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJzY2VuZVwiLCBjdXJyZW50U2NlbmUuaWQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmIChjdXJyZW50QmVhdCAmJiAhaGFzQmVhdFJlZikge1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRBbmNob3IoZmluYWxDb250ZW50QmxvY2suaWQsIFwiYmVhdFwiLCBjdXJyZW50QmVhdC5pZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWVDb25mbGljdCA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShmaW5hbENvbnRlbnRCbG9jaykucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lQ29uZmxpY3R9fCR7cmVzb2x2ZWRDb250ZW50fV1dYCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBVcGRhdGUgY2hhcHRlciBmaWxlIHdpdGggbmV3IGhpZXJhcmNoaWNhbCBjb250ZW50IGFuZCBzY2VuZS9iZWF0IGxpc3Rcblx0XHRhd2FpdCB0aGlzLnVwZGF0ZUNoYXB0ZXJGaWxlKGNoYXB0ZXJDb250ZW50LCB1cGRhdGVkU2VjdGlvbnMsIGZpbGUsIGZyb250bWF0dGVyLCBleGlzdGluZ1NjZW5lcywgYmVhdE1hcCwgcmVtb3RlQ29udGVudEJsb2NrcywgY2hhcHRlcklkKTtcblx0fVxuXG5cdC8vIFVwZGF0ZSBjaGFwdGVyIGZpbGUgd2l0aCBib3RoIHNjZW5lL2JlYXQgbGlzdCBhbmQgY2hhcHRlciBjb250ZW50XG5cdHByaXZhdGUgYXN5bmMgdXBkYXRlQ2hhcHRlckZpbGUoXG5cdFx0b3JpZ2luYWxDb250ZW50OiBzdHJpbmcsXG5cdFx0dXBkYXRlZFNlY3Rpb25zOiBzdHJpbmdbXSxcblx0XHRmaWxlOiBURmlsZSxcblx0XHRmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgc3RyaW5nPixcblx0XHRzY2VuZXM6IFNjZW5lW10sXG5cdFx0YmVhdE1hcDogTWFwPHN0cmluZywgQmVhdD4sXG5cdFx0Y29udGVudEJsb2NrczogQ29udGVudEJsb2NrW10sXG5cdFx0Y2hhcHRlcklkOiBzdHJpbmdcblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Ly8gR2V0IHByb3NlIGJsb2NrIHJlZmVyZW5jZXMgdG8gZGV0ZXJtaW5lIHdoaWNoIHNjZW5lcy8wMi1iZWF0cyBoYXZlIHByb3NlXG5cdFx0Y29uc3QgYWxsQ29udGVudEFuY2hvcnM6IENvbnRlbnRBbmNob3JbXSA9IFtdO1xuXHRcdGZvciAoY29uc3QgY29udGVudEJsb2NrIG9mIGNvbnRlbnRCbG9ja3MpIHtcblx0XHRcdGNvbnN0IHJlZnMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QW5jaG9ycyhjb250ZW50QmxvY2suaWQpO1xuXHRcdFx0YWxsQ29udGVudEFuY2hvcnMucHVzaCguLi5yZWZzKTtcblx0XHR9XG5cblx0XHQvLyBDcmVhdGUgbWFwcyBmb3IgcXVpY2sgbG9va3VwXG5cdFx0Y29uc3QgcHJvc2VSZWZzQnlTY2VuZSA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QW5jaG9yW10+KCk7XG5cdFx0Y29uc3QgcHJvc2VSZWZzQnlCZWF0ID0gbmV3IE1hcDxzdHJpbmcsIENvbnRlbnRBbmNob3JbXT4oKTtcblx0XHRmb3IgKGNvbnN0IHJlZiBvZiBhbGxDb250ZW50QW5jaG9ycykge1xuXHRcdFx0aWYgKHJlZi5lbnRpdHlfdHlwZSA9PT0gXCJzY2VuZVwiKSB7XG5cdFx0XHRcdGlmICghcHJvc2VSZWZzQnlTY2VuZS5oYXMocmVmLmVudGl0eV9pZCkpIHtcblx0XHRcdFx0XHRwcm9zZVJlZnNCeVNjZW5lLnNldChyZWYuZW50aXR5X2lkLCBbXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cHJvc2VSZWZzQnlTY2VuZS5nZXQocmVmLmVudGl0eV9pZCkhLnB1c2gocmVmKTtcblx0XHRcdH0gZWxzZSBpZiAocmVmLmVudGl0eV90eXBlID09PSBcImJlYXRcIikge1xuXHRcdFx0XHRpZiAoIXByb3NlUmVmc0J5QmVhdC5oYXMocmVmLmVudGl0eV9pZCkpIHtcblx0XHRcdFx0XHRwcm9zZVJlZnNCeUJlYXQuc2V0KHJlZi5lbnRpdHlfaWQsIFtdKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRwcm9zZVJlZnNCeUJlYXQuZ2V0KHJlZi5lbnRpdHlfaWQpIS5wdXNoKHJlZik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gR2VuZXJhdGUgdXBkYXRlZCBzY2VuZS9iZWF0IGxpc3Rcblx0XHRjb25zdCBzY2VuZUJlYXRMaXN0SXRlbXM6IHN0cmluZ1tdID0gW107XG5cdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBzY2VuZXMuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSkpIHtcblx0XHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0XHRjb25zdCBzY2VuZUxpbmtOYW1lID0gc2NlbmVGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdGNvbnN0IHNjZW5lRGlzcGxheVRleHQgPSBzY2VuZS50aW1lX3JlZiBcblx0XHRcdFx0PyBgJHtzY2VuZS5nb2FsfSAtICR7c2NlbmUudGltZV9yZWZ9YFxuXHRcdFx0XHQ6IHNjZW5lLmdvYWw7XG5cdFx0XHRcblx0XHRcdC8vIENoZWNrIGlmIHNjZW5lIGhhcyBwcm9zZSBibG9ja3MgKG5vdCBhc3NvY2lhdGVkIHdpdGggYmVhdHMpXG5cdFx0XHRjb25zdCBzY2VuZVByb3NlUmVmcyA9IHByb3NlUmVmc0J5U2NlbmUuZ2V0KHNjZW5lLmlkKSB8fCBbXTtcblx0XHRcdGNvbnN0IHNjZW5lQ29udGVudEJsb2NrSWRzID0gbmV3IFNldChzY2VuZVByb3NlUmVmcy5tYXAoKHI6IENvbnRlbnRBbmNob3IpID0+IHIuY29udGVudF9ibG9ja19pZCkpO1xuXHRcdFx0Ly8gQ2hlY2sgaWYgYW55IHByb3NlIGJsb2NrIGlzIG5vdCBhbHNvIGFzc29jaWF0ZWQgd2l0aCBhIGJlYXRcblx0XHRcdGNvbnN0IGhhc1NjZW5lUHJvc2UgPSBBcnJheS5mcm9tKHNjZW5lQ29udGVudEJsb2NrSWRzKS5zb21lKChjb250ZW50QmxvY2tJZDogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGJsb2NrUmVmcyA9IGFsbENvbnRlbnRBbmNob3JzLmZpbHRlcigocjogQ29udGVudEFuY2hvcikgPT4gci5jb250ZW50X2Jsb2NrX2lkID09PSBjb250ZW50QmxvY2tJZCk7XG5cdFx0XHRcdHJldHVybiAhYmxvY2tSZWZzLnNvbWUoKHI6IENvbnRlbnRBbmNob3IpID0+IHIuZW50aXR5X3R5cGUgPT09IFwiYmVhdFwiKTtcblx0XHRcdH0pO1xuXHRcdFx0Y29uc3Qgc2NlbmVNYXJrZXIgPSBoYXNTY2VuZVByb3NlID8gXCIrXCIgOiBcIi1cIjtcblx0XHRcdFxuXHRcdFx0c2NlbmVCZWF0TGlzdEl0ZW1zLnB1c2goYCR7c2NlbmVNYXJrZXJ9IFtbJHtzY2VuZUxpbmtOYW1lfXxTY2VuZSAke3NjZW5lLm9yZGVyX251bX06ICR7c2NlbmVEaXNwbGF5VGV4dH1dXWApO1xuXHRcdFx0XG5cdFx0XHQvLyBHZXQgYmVhdHMgZm9yIHRoaXMgc2NlbmVcblx0XHRcdGNvbnN0IHNjZW5lQmVhdHM6IEJlYXRbXSA9IFtdO1xuXHRcdFx0Zm9yIChjb25zdCBbbGlua05hbWUsIGJlYXRdIG9mIGJlYXRNYXAuZW50cmllcygpKSB7XG5cdFx0XHRcdGlmIChiZWF0LnNjZW5lX2lkID09PSBzY2VuZS5pZCkge1xuXHRcdFx0XHRcdHNjZW5lQmVhdHMucHVzaChiZWF0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2Ygc2NlbmVCZWF0cy5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKSkge1xuXHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRjb25zdCBiZWF0TGlua05hbWUgPSBiZWF0RmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdGNvbnN0IGJlYXREaXNwbGF5VGV4dCA9IGJlYXQub3V0Y29tZVxuXHRcdFx0XHRcdD8gYCR7YmVhdC5pbnRlbnR9IC0+ICR7YmVhdC5vdXRjb21lfWBcblx0XHRcdFx0XHQ6IGJlYXQuaW50ZW50O1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgYmVhdCBoYXMgcHJvc2UgYmxvY2tzXG5cdFx0XHRcdGNvbnN0IGJlYXRQcm9zZVJlZnMgPSBwcm9zZVJlZnNCeUJlYXQuZ2V0KGJlYXQuaWQpIHx8IFtdO1xuXHRcdFx0XHRjb25zdCBoYXNCZWF0UHJvc2UgPSBiZWF0UHJvc2VSZWZzLmxlbmd0aCA+IDA7XG5cdFx0XHRcdGNvbnN0IGJlYXRNYXJrZXIgPSBoYXNCZWF0UHJvc2UgPyBcIitcIiA6IFwiLVwiO1xuXHRcdFx0XHRcblx0XHRcdFx0c2NlbmVCZWF0TGlzdEl0ZW1zLnB1c2goYFxcdCR7YmVhdE1hcmtlcn0gW1ske2JlYXRMaW5rTmFtZX18QmVhdCAke2JlYXQub3JkZXJfbnVtfTogJHtiZWF0RGlzcGxheVRleHR9XV1gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBFeHRyYWN0IGZyb250bWF0dGVyXG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IG9yaWdpbmFsQ29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuXHRcdGNvbnN0IGZyb250bWF0dGVyVGV4dCA9IGZyb250bWF0dGVyTWF0Y2ggPyBmcm9udG1hdHRlck1hdGNoWzBdIDogXCJcIjtcblxuXHRcdC8vIEV4dHJhY3QgY29udGVudCBhZnRlciBmcm9udG1hdHRlclxuXHRcdGNvbnN0IGJvZHlTdGFydCA9IGZyb250bWF0dGVyTWF0Y2ggPyBmcm9udG1hdHRlck1hdGNoWzBdLmxlbmd0aCA6IDA7XG5cdFx0Y29uc3QgYm9keUNvbnRlbnQgPSBvcmlnaW5hbENvbnRlbnQuc3Vic3RyaW5nKGJvZHlTdGFydCkudHJpbSgpO1xuXG5cdFx0Ly8gR2V0IGNoYXB0ZXIgbnVtYmVyIGFuZCB0aXRsZSBmcm9tIGZyb250bWF0dGVyXG5cdFx0Y29uc3QgY2hhcHRlck51bWJlciA9IGZyb250bWF0dGVyLm51bWJlciB8fCBcIjFcIjtcblx0XHRjb25zdCBjaGFwdGVyVGl0bGUgPSBmcm9udG1hdHRlci50aXRsZSB8fCBcIlVudGl0bGVkXCI7XG5cblx0XHQvLyBVcGRhdGUgc2NlbmUvYmVhdCBsaXN0IHNlY3Rpb25cblx0XHRjb25zdCBsaXN0U2VjdGlvbk1hdGNoID0gYm9keUNvbnRlbnQubWF0Y2goLyhbXFxzXFxTXSo/IyNcXHMrU2NlbmVzXFxzKyZcXHMrQmVhdHNcXHMqXFxuKykoW1xcc1xcU10qPykoPz1cXG4jI3wkKS8pO1xuXHRcdGNvbnN0IHVwZGF0ZWRMaXN0U2VjdGlvbiA9IGAjIyBTY2VuZXMgJiBCZWF0c1xcblxcbiR7c2NlbmVCZWF0TGlzdEl0ZW1zLmpvaW4oXCJcXG5cIil9XFxuXFxuYDtcblxuXHRcdGxldCB1cGRhdGVkQm9keTogc3RyaW5nO1xuXHRcdGlmIChsaXN0U2VjdGlvbk1hdGNoKSB7XG5cdFx0XHQvLyBSZXBsYWNlIGV4aXN0aW5nIGxpc3Qgc2VjdGlvblxuXHRcdFx0Y29uc3QgYmVmb3JlTGlzdCA9IGxpc3RTZWN0aW9uTWF0Y2hbMV07XG5cdFx0XHRjb25zdCBhZnRlckxpc3QgPSBib2R5Q29udGVudC5zdWJzdHJpbmcobGlzdFNlY3Rpb25NYXRjaC5pbmRleCEgKyBsaXN0U2VjdGlvbk1hdGNoWzBdLmxlbmd0aCk7XG5cdFx0XHR1cGRhdGVkQm9keSA9IGAke2JlZm9yZUxpc3R9JHt1cGRhdGVkTGlzdFNlY3Rpb259JHthZnRlckxpc3R9YDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gQWRkIGxpc3Qgc2VjdGlvbiBhZnRlciB0aXRsZVxuXHRcdFx0Y29uc3QgdGl0bGVNYXRjaCA9IGJvZHlDb250ZW50Lm1hdGNoKC8oI1xccytbXlxcbl0rXFxuKykoW1xcc1xcU10qKS8pO1xuXHRcdFx0aWYgKHRpdGxlTWF0Y2gpIHtcblx0XHRcdFx0dXBkYXRlZEJvZHkgPSBgJHt0aXRsZU1hdGNoWzFdfSR7dXBkYXRlZExpc3RTZWN0aW9ufSR7dGl0bGVNYXRjaFsyXX1gO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dXBkYXRlZEJvZHkgPSBgJHt1cGRhdGVkTGlzdFNlY3Rpb259JHtib2R5Q29udGVudH1gO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFVwZGF0ZSBjaGFwdGVyIHNlY3Rpb25cblx0XHRjb25zdCBjaGFwdGVySGVhZGVyUGF0dGVybiA9IGAjI1xcXFxzK0NoYXB0ZXJcXFxccyske2NoYXB0ZXJOdW1iZXJ9OlxcXFxzK1teXFxcXG5dK2A7XG5cdFx0Y29uc3QgY2hhcHRlclNlY3Rpb25NYXRjaCA9IHVwZGF0ZWRCb2R5Lm1hdGNoKG5ldyBSZWdFeHAoYChbXFxcXHNcXFxcU10qPyR7Y2hhcHRlckhlYWRlclBhdHRlcm59XFxcXHMqXFxcXG4rKShbXFxcXHNcXFxcU10qPykoPz1cXFxcbiMjXFxcXHMrQ2hhcHRlclxcXFxzK1xcXFxkKzp8JClgLCBcImlcIikpO1xuXHRcdFxuXHRcdGlmICghY2hhcHRlclNlY3Rpb25NYXRjaCkge1xuXHRcdFx0Ly8gTm8gQ2hhcHRlciBzZWN0aW9uIGZvdW5kLCBhZGQgaXRcblx0XHRcdGNvbnN0IG5ld0NoYXB0ZXJTZWN0aW9uID0gYFxcblxcbiMjIENoYXB0ZXIgJHtjaGFwdGVyTnVtYmVyfTogJHtjaGFwdGVyVGl0bGV9XFxuXFxuJHt1cGRhdGVkU2VjdGlvbnMuam9pbihcIlxcblxcblwiKX1cXG5cXG5gO1xuXHRcdFx0dXBkYXRlZEJvZHkgPSBgJHt1cGRhdGVkQm9keX0ke25ld0NoYXB0ZXJTZWN0aW9ufWA7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFJlcGxhY2UgQ2hhcHRlciBzZWN0aW9uIGNvbnRlbnRcblx0XHRcdGNvbnN0IGJlZm9yZUNoYXB0ZXIgPSBjaGFwdGVyU2VjdGlvbk1hdGNoWzFdO1xuXHRcdFx0Y29uc3QgYWZ0ZXJDaGFwdGVyID0gdXBkYXRlZEJvZHkuc3Vic3RyaW5nKGNoYXB0ZXJTZWN0aW9uTWF0Y2guaW5kZXghICsgY2hhcHRlclNlY3Rpb25NYXRjaFswXS5sZW5ndGgpO1xuXHRcdFx0Y29uc3QgbmV3Q2hhcHRlckNvbnRlbnQgPSB1cGRhdGVkU2VjdGlvbnMuam9pbihcIlxcblxcblwiKTtcblx0XHRcdHVwZGF0ZWRCb2R5ID0gYCR7YmVmb3JlQ2hhcHRlcn0ke25ld0NoYXB0ZXJDb250ZW50fVxcblxcbiR7YWZ0ZXJDaGFwdGVyfWA7XG5cdFx0fVxuXG5cdFx0Y29uc3QgdXBkYXRlZENvbnRlbnQgPSBgJHtmcm9udG1hdHRlclRleHR9XFxuJHt1cGRhdGVkQm9keX1gO1xuXHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5tb2RpZnkoZmlsZSwgdXBkYXRlZENvbnRlbnQpO1xuXHR9XG5cblx0Ly8gUHJvY2VzcyB0aGUgXCIjIyBDaGFwdGVycywgU2NlbmVzICYgQmVhdHNcIiBsaXN0IGFuZCB1cGRhdGUgb3JkZXJcblx0cHJpdmF0ZSBhc3luYyBwcm9jZXNzQ2hhcHRlckxpc3QoXG5cdFx0bGlzdDogUGFyc2VkQ2hhcHRlckxpc3QsXG5cdFx0c3RvcnlJZDogc3RyaW5nXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdC8vIEdldCBleGlzdGluZyBjaGFwdGVycyBmb3IgdGhpcyBzdG9yeVxuXHRcdGNvbnN0IGV4aXN0aW5nQ2hhcHRlcnMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDaGFwdGVycyhzdG9yeUlkKTtcblx0XHRjb25zdCBjaGFwdGVyTWFwID0gbmV3IE1hcDxzdHJpbmcsIENoYXB0ZXI+KCk7IC8vIE1hcCBieSBsaW5rIG5hbWVcblx0XHRjb25zdCBjaGFwdGVySWRNYXAgPSBuZXcgTWFwPHN0cmluZywgQ2hhcHRlcj4oKTsgLy8gTWFwIGJ5IElEXG5cdFx0XG5cdFx0Zm9yIChjb25zdCBjaGFwdGVyIG9mIGV4aXN0aW5nQ2hhcHRlcnMpIHtcblx0XHRcdGNvbnN0IGZpbGVOYW1lID0gYENoYXB0ZXItJHtjaGFwdGVyLm51bWJlcn0ubWRgO1xuXHRcdFx0Y29uc3QgbGlua05hbWUgPSBmaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdGNoYXB0ZXJNYXAuc2V0KGxpbmtOYW1lLCBjaGFwdGVyKTtcblx0XHRcdGNoYXB0ZXJJZE1hcC5zZXQoY2hhcHRlci5pZCwgY2hhcHRlcik7XG5cdFx0fVxuXG5cdFx0bGV0IGN1cnJlbnRDaGFwdGVyOiBDaGFwdGVyIHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IGN1cnJlbnRTY2VuZTogU2NlbmUgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgY2hhcHRlck9yZGVyTnVtID0gMTsgLy8gU3RhcnQgZnJvbSAxLCB3aWxsIGluY3JlbWVudCBhcyB3ZSBwcm9jZXNzXG5cdFx0Y29uc3Qgc2NlbmVPcmRlck51bXMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpOyAvLyBUcmFjayBvcmRlcl9udW0gcGVyIGNoYXB0ZXJcblx0XHRjb25zdCBiZWF0T3JkZXJOdW1zID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTsgLy8gVHJhY2sgb3JkZXJfbnVtIHBlciBzY2VuZVxuXG5cdFx0Ly8gUHJvY2VzcyBsaXN0IGl0ZW1zIC0gb3JkZXIgbWF0dGVycyFcblx0XHRmb3IgKGNvbnN0IGl0ZW0gb2YgbGlzdC5pdGVtcykge1xuXHRcdFx0aWYgKGl0ZW0udHlwZSA9PT0gXCJjaGFwdGVyXCIpIHtcblx0XHRcdFx0Ly8gUGFyc2UgY2hhcHRlciBkaXNwbGF5IHRleHRcblx0XHRcdFx0Ly8gQ2FuIGJlOiBcIkNoYXB0ZXIgTjogdGl0bGVcIiBvciBqdXN0IFwidGl0bGVcIlxuXHRcdFx0XHRsZXQgdGl0bGU6IHN0cmluZztcblx0XHRcdFx0bGV0IGNoYXB0ZXJOdW1iZXI6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJNYXRjaCA9IGl0ZW0uZGlzcGxheVRleHQubWF0Y2goL0NoYXB0ZXJcXHMrKFxcZCspOlxccyooLispLyk7XG5cdFx0XHRcdGlmIChjaGFwdGVyTWF0Y2gpIHtcblx0XHRcdFx0XHQvLyBGb3JtYXQ6IFwiQ2hhcHRlciBOOiB0aXRsZVwiXG5cdFx0XHRcdFx0Y2hhcHRlck51bWJlciA9IHBhcnNlSW50KGNoYXB0ZXJNYXRjaFsxXSwgMTApO1xuXHRcdFx0XHRcdHRpdGxlID0gY2hhcHRlck1hdGNoWzJdLnRyaW0oKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBGb3JtYXQ6IGp1c3QgXCJ0aXRsZVwiXG5cdFx0XHRcdFx0dGl0bGUgPSBpdGVtLmRpc3BsYXlUZXh0LnRyaW0oKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlc2V0IHNjZW5lIG9yZGVyIGZvciBuZXcgY2hhcHRlclxuXHRcdFx0XHRjdXJyZW50U2NlbmUgPSBudWxsO1xuXHRcdFx0XHRzY2VuZU9yZGVyTnVtcy5zZXQoXCJjdXJyZW50XCIsIDEpO1xuXG5cdFx0XHRcdGlmIChpdGVtLmxpbmtOYW1lKSB7XG5cdFx0XHRcdFx0Ly8gQ2hhcHRlciBleGlzdHMgLSBmaW5kIGl0XG5cdFx0XHRcdFx0Y3VycmVudENoYXB0ZXIgPSBjaGFwdGVyTWFwLmdldChpdGVtLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdGlmICghY3VycmVudENoYXB0ZXIpIHtcblx0XHRcdFx0XHRcdC8vIFRyeSB0byBmaW5kIGJ5IElEIGlmIGxpbmtOYW1lIGlzIGFjdHVhbGx5IGFuIElEXG5cdFx0XHRcdFx0XHRjdXJyZW50Q2hhcHRlciA9IGNoYXB0ZXJJZE1hcC5nZXQoaXRlbS5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKGN1cnJlbnRDaGFwdGVyKSB7XG5cdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBvcmRlcl9udW0gbmVlZHMgdG8gYmUgdXBkYXRlZFxuXHRcdFx0XHRcdFx0Y29uc3QgbmVlZHNPcmRlclVwZGF0ZSA9IGN1cnJlbnRDaGFwdGVyLm51bWJlciAhPT0gY2hhcHRlck9yZGVyTnVtO1xuXHRcdFx0XHRcdFx0Y29uc3QgbmVlZHNUaXRsZVVwZGF0ZSA9IHRpdGxlICE9PSBjdXJyZW50Q2hhcHRlci50aXRsZTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0aWYgKG5lZWRzT3JkZXJVcGRhdGUgfHwgbmVlZHNUaXRsZVVwZGF0ZSkge1xuXHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgY2hhcHRlciBudW1iZXIgYW5kIHRpdGxlXG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRDaGFwdGVyID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQ2hhcHRlcihjdXJyZW50Q2hhcHRlci5pZCwge1xuXHRcdFx0XHRcdFx0XHRcdG51bWJlcjogY2hhcHRlck9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0XHRcdHRpdGxlOiBuZWVkc1RpdGxlVXBkYXRlID8gdGl0bGUgOiB1bmRlZmluZWQsXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIG1hcHNcblx0XHRcdFx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSBgQ2hhcHRlci0ke2N1cnJlbnRDaGFwdGVyLm51bWJlcn0ubWRgO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0XHRjaGFwdGVyTWFwLnNldChsaW5rTmFtZSwgY3VycmVudENoYXB0ZXIpO1xuXHRcdFx0XHRcdFx0XHRjaGFwdGVySWRNYXAuc2V0KGN1cnJlbnRDaGFwdGVyLmlkLCBjdXJyZW50Q2hhcHRlcik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIENyZWF0ZSBuZXcgY2hhcHRlciAoaWYgdGl0bGUgaXMgcHJvdmlkZWQpXG5cdFx0XHRcdFx0aWYgKHRpdGxlKSB7XG5cdFx0XHRcdFx0XHRjdXJyZW50Q2hhcHRlciA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNoYXB0ZXIoc3RvcnlJZCwge1xuXHRcdFx0XHRcdFx0XHRudW1iZXI6IGNoYXB0ZXJPcmRlck51bSxcblx0XHRcdFx0XHRcdFx0dGl0bGUsXG5cdFx0XHRcdFx0XHRcdHN0YXR1czogXCJkcmFmdFwiLFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBtYXBzXG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlTmFtZSA9IGBDaGFwdGVyLSR7Y3VycmVudENoYXB0ZXIubnVtYmVyfS5tZGA7XG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0Y2hhcHRlck1hcC5zZXQobGlua05hbWUsIGN1cnJlbnRDaGFwdGVyKTtcblx0XHRcdFx0XHRcdGNoYXB0ZXJJZE1hcC5zZXQoY3VycmVudENoYXB0ZXIuaWQsIGN1cnJlbnRDaGFwdGVyKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdC8vIEluaXRpYWxpemUgc2NlbmUgb3JkZXIgZm9yIHRoaXMgY2hhcHRlclxuXHRcdFx0XHRpZiAoY3VycmVudENoYXB0ZXIpIHtcblx0XHRcdFx0XHRzY2VuZU9yZGVyTnVtcy5zZXQoY3VycmVudENoYXB0ZXIuaWQsIDEpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRjaGFwdGVyT3JkZXJOdW0rKztcblx0XHRcdH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSBcInNjZW5lXCIgJiYgY3VycmVudENoYXB0ZXIpIHtcblx0XHRcdFx0Ly8gUGFyc2Ugc2NlbmUgZGlzcGxheSB0ZXh0XG5cdFx0XHRcdC8vIENhbiBiZTogXCJTY2VuZSBOOiBnb2FsIC0gdGltZVJlZlwiLCBcImdvYWwgLSB0aW1lUmVmXCIsIG9yIGp1c3QgXCJnb2FsXCJcblx0XHRcdFx0bGV0IGdvYWw6IHN0cmluZztcblx0XHRcdFx0bGV0IHRpbWVSZWY6IHN0cmluZyA9IFwiXCI7XG5cblx0XHRcdFx0Y29uc3Qgc2NlbmVNYXRjaCA9IGl0ZW0uZGlzcGxheVRleHQubWF0Y2goL1NjZW5lXFxzK1xcZCs6XFxzKiguKykvKTtcblx0XHRcdFx0aWYgKHNjZW5lTWF0Y2gpIHtcblx0XHRcdFx0XHQvLyBGb3JtYXQ6IFwiU2NlbmUgTjogZ29hbCAtIHRpbWVSZWZcIiBvciBcIlNjZW5lIE46IGdvYWxcIlxuXHRcdFx0XHRcdGNvbnN0IHNjZW5lVGV4dCA9IHNjZW5lTWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0XHRcdGNvbnN0IHBhcnRzID0gc2NlbmVUZXh0LnNwbGl0KC9cXHMqLVxccyovKTtcblx0XHRcdFx0XHRnb2FsID0gcGFydHNbMF0udHJpbSgpO1xuXHRcdFx0XHRcdHRpbWVSZWYgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbihcIiAtIFwiKS50cmltKCkgOiBcIlwiO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIEZvcm1hdDogXCJnb2FsIC0gdGltZVJlZlwiIG9yIGp1c3QgXCJnb2FsXCJcblx0XHRcdFx0XHRjb25zdCBwYXJ0cyA9IGl0ZW0uZGlzcGxheVRleHQuc3BsaXQoL1xccyotXFxzKi8pO1xuXHRcdFx0XHRcdGdvYWwgPSBwYXJ0c1swXS50cmltKCk7XG5cdFx0XHRcdFx0dGltZVJlZiA9IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0gXCIpLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBHZXQgY3VycmVudCBzY2VuZSBvcmRlcl9udW0gZm9yIHRoaXMgY2hhcHRlclxuXHRcdFx0XHRjb25zdCBjdXJyZW50U2NlbmVPcmRlck51bSA9IHNjZW5lT3JkZXJOdW1zLmdldChjdXJyZW50Q2hhcHRlci5pZCkgfHwgMTtcblxuXHRcdFx0XHQvLyBSZXNldCBjdXJyZW50U2NlbmUgYmVmb3JlIHByb2Nlc3Npbmdcblx0XHRcdFx0Y3VycmVudFNjZW5lID0gbnVsbDtcblxuXHRcdFx0XHRpZiAoaXRlbS5saW5rTmFtZSkge1xuXHRcdFx0XHRcdC8vIFNjZW5lIGV4aXN0cyAtIGZpbmQgaXRcblx0XHRcdFx0XHRjb25zdCBleGlzdGluZ1NjZW5lcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFNjZW5lcyhjdXJyZW50Q2hhcHRlci5pZCk7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVNYXAgPSBuZXcgTWFwPHN0cmluZywgU2NlbmU+KCk7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVJZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBTY2VuZT4oKTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIGV4aXN0aW5nU2NlbmVzKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lKTtcblx0XHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHRzY2VuZU1hcC5zZXQobGlua05hbWUsIHNjZW5lKTtcblx0XHRcdFx0XHRcdHNjZW5lSWRNYXAuc2V0KHNjZW5lLmlkLCBzY2VuZSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gc2NlbmVNYXAuZ2V0KGl0ZW0ubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0aWYgKCFjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0XHRcdGN1cnJlbnRTY2VuZSA9IHNjZW5lSWRNYXAuZ2V0KGl0ZW0ubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIG9yZGVyX251bSBvciBjb250ZW50IG5lZWRzIHRvIGJlIHVwZGF0ZWRcblx0XHRcdFx0XHRcdGNvbnN0IG5lZWRzT3JkZXJVcGRhdGUgPSBjdXJyZW50U2NlbmUub3JkZXJfbnVtICE9PSBjdXJyZW50U2NlbmVPcmRlck51bTtcblx0XHRcdFx0XHRcdGNvbnN0IG5lZWRzQ29udGVudFVwZGF0ZSA9IGdvYWwgIT09IGN1cnJlbnRTY2VuZS5nb2FsIHx8IHRpbWVSZWYgIT09IGN1cnJlbnRTY2VuZS50aW1lX3JlZjtcblx0XHRcdFx0XHRcdGNvbnN0IG5lZWRzQ2hhcHRlclVwZGF0ZSA9IGN1cnJlbnRTY2VuZS5jaGFwdGVyX2lkICE9PSBjdXJyZW50Q2hhcHRlci5pZDtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0aWYgKG5lZWRzT3JkZXJVcGRhdGUgfHwgbmVlZHNDb250ZW50VXBkYXRlIHx8IG5lZWRzQ2hhcHRlclVwZGF0ZSkge1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVTY2VuZShjdXJyZW50U2NlbmUuaWQsIHtcblx0XHRcdFx0XHRcdFx0XHRnb2FsLFxuXHRcdFx0XHRcdFx0XHRcdHRpbWVfcmVmOiB0aW1lUmVmLFxuXHRcdFx0XHRcdFx0XHRcdG9yZGVyX251bTogY3VycmVudFNjZW5lT3JkZXJOdW0sXG5cdFx0XHRcdFx0XHRcdFx0Y2hhcHRlcl9pZDogY3VycmVudENoYXB0ZXIuaWQsXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvLyBJbml0aWFsaXplIGJlYXQgb3JkZXIgZm9yIHRoaXMgc2NlbmUgKGltcG9ydGFudCBmb3IgZW1wdHkgc2NlbmVzKVxuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgc2NlbmUgYWxyZWFkeSBoYXMgYmVhdHMsIGlmIG5vdCwgc3RhcnQgZnJvbSAxXG5cdFx0XHRcdFx0XHRjb25zdCBleGlzdGluZ0JlYXRzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0QmVhdHMoY3VycmVudFNjZW5lLmlkKTtcblx0XHRcdFx0XHRcdGlmIChleGlzdGluZ0JlYXRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0XHRiZWF0T3JkZXJOdW1zLnNldChjdXJyZW50U2NlbmUuaWQsIDEpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8gU2NlbmUgaGFzIGJlYXRzLCB1c2UgbWF4IG9yZGVyX251bSArIDEgZm9yIG5ldyBiZWF0c1xuXHRcdFx0XHRcdFx0XHRjb25zdCBtYXhPcmRlck51bSA9IE1hdGgubWF4KC4uLmV4aXN0aW5nQmVhdHMubWFwKGIgPT4gYi5vcmRlcl9udW0pKTtcblx0XHRcdFx0XHRcdFx0YmVhdE9yZGVyTnVtcy5zZXQoY3VycmVudFNjZW5lLmlkLCBtYXhPcmRlck51bSArIDEpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBDcmVhdGUgbmV3IHNjZW5lXG5cdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlU2NlbmUoe1xuXHRcdFx0XHRcdFx0c3RvcnlfaWQ6IHN0b3J5SWQsXG5cdFx0XHRcdFx0XHRjaGFwdGVyX2lkOiBjdXJyZW50Q2hhcHRlci5pZCxcblx0XHRcdFx0XHRcdG9yZGVyX251bTogY3VycmVudFNjZW5lT3JkZXJOdW0sXG5cdFx0XHRcdFx0XHRnb2FsLFxuXHRcdFx0XHRcdFx0dGltZV9yZWY6IHRpbWVSZWYsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gSW5pdGlhbGl6ZSBiZWF0IG9yZGVyIGZvciBuZXcgc2NlbmUgKHN0YXJ0cyBhdCAxKVxuXHRcdFx0XHRcdGJlYXRPcmRlck51bXMuc2V0KGN1cnJlbnRTY2VuZS5pZCwgMSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdC8vIEluY3JlbWVudCBzY2VuZSBvcmRlciBmb3IgbmV4dCBzY2VuZSBpbiB0aGlzIGNoYXB0ZXJcblx0XHRcdFx0c2NlbmVPcmRlck51bXMuc2V0KGN1cnJlbnRDaGFwdGVyLmlkLCBjdXJyZW50U2NlbmVPcmRlck51bSArIDEpO1xuXHRcdFx0fSBlbHNlIGlmIChpdGVtLnR5cGUgPT09IFwiYmVhdFwiICYmIGN1cnJlbnRTY2VuZSkge1xuXHRcdFx0XHQvLyBQYXJzZSBiZWF0IGRpc3BsYXkgdGV4dFxuXHRcdFx0XHQvLyBDYW4gYmU6IFwiQmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZVwiLCBcImludGVudCAtPiBvdXRjb21lXCIsIG9yIGp1c3QgXCJpbnRlbnRcIlxuXHRcdFx0XHRsZXQgaW50ZW50OiBzdHJpbmc7XG5cdFx0XHRcdGxldCBvdXRjb21lOiBzdHJpbmcgPSBcIlwiO1xuXG5cdFx0XHRcdGNvbnN0IGJlYXRNYXRjaCA9IGl0ZW0uZGlzcGxheVRleHQubWF0Y2goL0JlYXRcXHMrXFxkKzpcXHMqKC4rKS8pO1xuXHRcdFx0XHRpZiAoYmVhdE1hdGNoKSB7XG5cdFx0XHRcdFx0Ly8gRm9ybWF0OiBcIkJlYXQgTjogaW50ZW50IC0+IG91dGNvbWVcIiBvciBcIkJlYXQgTjogaW50ZW50XCJcblx0XHRcdFx0XHRjb25zdCBiZWF0VGV4dCA9IGJlYXRNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRcdFx0Y29uc3QgcGFydHMgPSBiZWF0VGV4dC5zcGxpdCgvXFxzKi0+XFxzKi8pO1xuXHRcdFx0XHRcdGludGVudCA9IHBhcnRzWzBdLnRyaW0oKTtcblx0XHRcdFx0XHRvdXRjb21lID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLT4gXCIpLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gRm9ybWF0OiBcImludGVudCAtPiBvdXRjb21lXCIgb3IganVzdCBcImludGVudFwiXG5cdFx0XHRcdFx0Y29uc3QgcGFydHMgPSBpdGVtLmRpc3BsYXlUZXh0LnNwbGl0KC9cXHMqLT5cXHMqLyk7XG5cdFx0XHRcdFx0aW50ZW50ID0gcGFydHNbMF0udHJpbSgpO1xuXHRcdFx0XHRcdG91dGNvbWUgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbihcIiAtPiBcIikudHJpbSgpIDogXCJcIjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEdldCBjdXJyZW50IGJlYXQgb3JkZXJfbnVtIGZvciB0aGlzIHNjZW5lXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRCZWF0T3JkZXJOdW0gPSBiZWF0T3JkZXJOdW1zLmdldChjdXJyZW50U2NlbmUuaWQpIHx8IDE7XG5cblx0XHRcdFx0aWYgKGl0ZW0ubGlua05hbWUpIHtcblx0XHRcdFx0XHQvLyBCZWF0IGV4aXN0cyAtIGZpbmQgaXRcblx0XHRcdFx0XHRjb25zdCBleGlzdGluZ0JlYXRzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0QmVhdHMoY3VycmVudFNjZW5lLmlkKTtcblx0XHRcdFx0XHRjb25zdCBiZWF0TWFwID0gbmV3IE1hcDxzdHJpbmcsIEJlYXQ+KCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdElkTWFwID0gbmV3IE1hcDxzdHJpbmcsIEJlYXQ+KCk7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIGV4aXN0aW5nQmVhdHMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHRiZWF0TWFwLnNldChsaW5rTmFtZSwgYmVhdCk7XG5cdFx0XHRcdFx0XHRiZWF0SWRNYXAuc2V0KGJlYXQuaWQsIGJlYXQpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGxldCBjdXJyZW50QmVhdCA9IGJlYXRNYXAuZ2V0KGl0ZW0ubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0aWYgKCFjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdFx0Y3VycmVudEJlYXQgPSBiZWF0SWRNYXAuZ2V0KGl0ZW0ubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgb3JkZXJfbnVtIG9yIGNvbnRlbnQgbmVlZHMgdG8gYmUgdXBkYXRlZFxuXHRcdFx0XHRcdFx0Y29uc3QgbmVlZHNPcmRlclVwZGF0ZSA9IGN1cnJlbnRCZWF0Lm9yZGVyX251bSAhPT0gY3VycmVudEJlYXRPcmRlck51bTtcblx0XHRcdFx0XHRcdGNvbnN0IG5lZWRzQ29udGVudFVwZGF0ZSA9IGludGVudCAhPT0gY3VycmVudEJlYXQuaW50ZW50IHx8IG91dGNvbWUgIT09IGN1cnJlbnRCZWF0Lm91dGNvbWU7XG5cdFx0XHRcdFx0XHRjb25zdCBuZWVkc1NjZW5lVXBkYXRlID0gY3VycmVudEJlYXQuc2NlbmVfaWQgIT09IGN1cnJlbnRTY2VuZS5pZDtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0aWYgKG5lZWRzT3JkZXJVcGRhdGUgfHwgbmVlZHNDb250ZW50VXBkYXRlIHx8IG5lZWRzU2NlbmVVcGRhdGUpIHtcblx0XHRcdFx0XHRcdFx0Y3VycmVudEJlYXQgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVCZWF0KGN1cnJlbnRCZWF0LmlkLCB7XG5cdFx0XHRcdFx0XHRcdFx0aW50ZW50LFxuXHRcdFx0XHRcdFx0XHRcdG91dGNvbWUsXG5cdFx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBjdXJyZW50QmVhdE9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0XHRcdHNjZW5lX2lkOiBjdXJyZW50U2NlbmUuaWQsXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBDcmVhdGUgbmV3IGJlYXRcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVCZWF0KHtcblx0XHRcdFx0XHRcdHNjZW5lX2lkOiBjdXJyZW50U2NlbmUuaWQsXG5cdFx0XHRcdFx0XHRvcmRlcl9udW06IGN1cnJlbnRCZWF0T3JkZXJOdW0sXG5cdFx0XHRcdFx0XHR0eXBlOiBcInNldHVwXCIsIC8vIERlZmF1bHQgdHlwZVxuXHRcdFx0XHRcdFx0aW50ZW50LFxuXHRcdFx0XHRcdFx0b3V0Y29tZSxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0Ly8gSW5jcmVtZW50IGJlYXQgb3JkZXIgZm9yIG5leHQgYmVhdCBpbiB0aGlzIHNjZW5lXG5cdFx0XHRcdGJlYXRPcmRlck51bXMuc2V0KGN1cnJlbnRTY2VuZS5pZCwgY3VycmVudEJlYXRPcmRlck51bSArIDEpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFByb2Nlc3MgdGhlIFwiIyMgQmVhdHNcIiBsaXN0IGZyb20gYSBzY2VuZSBmaWxlIGFuZCB1cGRhdGUgYmVhdCBvcmRlclxuXHRwcml2YXRlIGFzeW5jIHB1c2hTY2VuZUJlYXRzKHNjZW5lRmlsZVBhdGg6IHN0cmluZywgc3RvcnlJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Ly8gUmVhZCBzY2VuZSBmaWxlXG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoc2NlbmVGaWxlUGF0aCk7XG5cdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IHNjZW5lQ29udGVudCA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5yZWFkKGZpbGUpO1xuXHRcdGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5maWxlTWFuYWdlci5wYXJzZUZyb250bWF0dGVyKHNjZW5lQ29udGVudCk7XG5cblx0XHRpZiAoIWZyb250bWF0dGVyLmlkKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc2NlbmVJZCA9IGZyb250bWF0dGVyLmlkO1xuXG5cdFx0Ly8gUGFyc2UgYmVhdCBsaXN0IGZyb20gc2NlbmUgZmlsZVxuXHRcdGNvbnN0IGJlYXRMaXN0ID0gcGFyc2VCZWF0TGlzdChzY2VuZUNvbnRlbnQpO1xuXHRcdFxuXHRcdGlmIChiZWF0TGlzdC5pdGVtcy5sZW5ndGggPT09IDApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBHZXQgZXhpc3RpbmcgYmVhdHMgZm9yIHRoaXMgc2NlbmVcblx0XHRjb25zdCBleGlzdGluZ0JlYXRzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0QmVhdHMoc2NlbmVJZCk7XG5cdFx0Y29uc3QgYmVhdE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBCZWF0PigpOyAvLyBNYXAgYnkgbGluayBuYW1lXG5cdFx0Y29uc3QgYmVhdElkTWFwID0gbmV3IE1hcDxzdHJpbmcsIEJlYXQ+KCk7IC8vIE1hcCBieSBJRFxuXHRcdFxuXHRcdGZvciAoY29uc3QgYmVhdCBvZiBleGlzdGluZ0JlYXRzKSB7XG5cdFx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0YmVhdE1hcC5zZXQobGlua05hbWUsIGJlYXQpO1xuXHRcdFx0YmVhdElkTWFwLnNldChiZWF0LmlkLCBiZWF0KTtcblx0XHR9XG5cblx0XHRsZXQgYmVhdE9yZGVyTnVtID0gMTsgLy8gU3RhcnQgZnJvbSAxLCB3aWxsIGluY3JlbWVudCBhcyB3ZSBwcm9jZXNzXG5cblx0XHQvLyBQcm9jZXNzIGxpc3QgaXRlbXMgLSBvcmRlciBtYXR0ZXJzIVxuXHRcdGZvciAoY29uc3QgaXRlbSBvZiBiZWF0TGlzdC5pdGVtcykge1xuXHRcdFx0Ly8gUGFyc2UgYmVhdCBkaXNwbGF5IHRleHRcblx0XHRcdC8vIENhbiBiZTogXCJCZWF0IE46IGludGVudCAtPiBvdXRjb21lXCIsIFwiaW50ZW50IC0+IG91dGNvbWVcIiwgb3IganVzdCBcImludGVudFwiXG5cdFx0XHRsZXQgaW50ZW50OiBzdHJpbmc7XG5cdFx0XHRsZXQgb3V0Y29tZTogc3RyaW5nID0gXCJcIjtcblxuXHRcdFx0Y29uc3QgYmVhdE1hdGNoID0gaXRlbS5kaXNwbGF5VGV4dC5tYXRjaCgvQmVhdFxccytcXGQrOlxccyooLispLyk7XG5cdFx0XHRpZiAoYmVhdE1hdGNoKSB7XG5cdFx0XHRcdC8vIEZvcm1hdDogXCJCZWF0IE46IGludGVudCAtPiBvdXRjb21lXCIgb3IgXCJCZWF0IE46IGludGVudFwiXG5cdFx0XHRcdGNvbnN0IGJlYXRUZXh0ID0gYmVhdE1hdGNoWzFdLnRyaW0oKTtcblx0XHRcdFx0Y29uc3QgcGFydHMgPSBiZWF0VGV4dC5zcGxpdCgvXFxzKi0+XFxzKi8pO1xuXHRcdFx0XHRpbnRlbnQgPSBwYXJ0c1swXS50cmltKCk7XG5cdFx0XHRcdG91dGNvbWUgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbihcIiAtPiBcIikudHJpbSgpIDogXCJcIjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEZvcm1hdDogXCJpbnRlbnQgLT4gb3V0Y29tZVwiIG9yIGp1c3QgXCJpbnRlbnRcIlxuXHRcdFx0XHRjb25zdCBwYXJ0cyA9IGl0ZW0uZGlzcGxheVRleHQuc3BsaXQoL1xccyotPlxccyovKTtcblx0XHRcdFx0aW50ZW50ID0gcGFydHNbMF0udHJpbSgpO1xuXHRcdFx0XHRvdXRjb21lID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLT4gXCIpLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpdGVtLmxpbmtOYW1lKSB7XG5cdFx0XHRcdC8vIEJlYXQgZXhpc3RzIC0gZmluZCBpdFxuXHRcdFx0XHRsZXQgY3VycmVudEJlYXQgPSBiZWF0TWFwLmdldChpdGVtLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRpZiAoIWN1cnJlbnRCZWF0KSB7XG5cdFx0XHRcdFx0Ly8gVHJ5IHRvIGZpbmQgYnkgSUQgaWYgbGlua05hbWUgaXMgYWN0dWFsbHkgYW4gSURcblx0XHRcdFx0XHRjdXJyZW50QmVhdCA9IGJlYXRJZE1hcC5nZXQoaXRlbS5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0aWYgKGN1cnJlbnRCZWF0KSB7XG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgb3JkZXJfbnVtIG9yIGNvbnRlbnQgbmVlZHMgdG8gYmUgdXBkYXRlZFxuXHRcdFx0XHRcdGNvbnN0IG5lZWRzT3JkZXJVcGRhdGUgPSBjdXJyZW50QmVhdC5vcmRlcl9udW0gIT09IGJlYXRPcmRlck51bTtcblx0XHRcdFx0XHRjb25zdCBuZWVkc0NvbnRlbnRVcGRhdGUgPSBpbnRlbnQgIT09IGN1cnJlbnRCZWF0LmludGVudCB8fCBvdXRjb21lICE9PSBjdXJyZW50QmVhdC5vdXRjb21lO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChuZWVkc09yZGVyVXBkYXRlIHx8IG5lZWRzQ29udGVudFVwZGF0ZSkge1xuXHRcdFx0XHRcdFx0Y3VycmVudEJlYXQgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVCZWF0KGN1cnJlbnRCZWF0LmlkLCB7XG5cdFx0XHRcdFx0XHRcdGludGVudCxcblx0XHRcdFx0XHRcdFx0b3V0Y29tZSxcblx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBiZWF0T3JkZXJOdW0sXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIENyZWF0ZSBuZXcgYmVhdFxuXHRcdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVCZWF0KHtcblx0XHRcdFx0XHRzY2VuZV9pZDogc2NlbmVJZCxcblx0XHRcdFx0XHRvcmRlcl9udW06IGJlYXRPcmRlck51bSxcblx0XHRcdFx0XHR0eXBlOiBcInNldHVwXCIsIC8vIERlZmF1bHQgdHlwZVxuXHRcdFx0XHRcdGludGVudCxcblx0XHRcdFx0XHRvdXRjb21lLFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0YmVhdE9yZGVyTnVtKys7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUHVzaCBwcm9zZSBibG9ja3MgZnJvbSBhIHN0b3J5IGZpbGUgd2l0aCBoaWVyYXJjaGljYWwgc3RydWN0dXJlXG5cdC8vIEZvcm1hdDogIyBTdG9yeTogdGl0bGUsICMjIENoYXB0ZXI6IHRpdGxlLCAjIyMgU2NlbmU6IHRpdGxlLCAjIyMjIEJlYXQ6IHRpdGxlXG5cdHByaXZhdGUgYXN5bmMgcHVzaFN0b3J5Q29udGVudEJsb2NrcyhzdG9yeUZpbGVQYXRoOiBzdHJpbmcsIHN0b3J5Rm9sZGVyUGF0aDogc3RyaW5nLCBzdG9yeUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBmaWxlID0gdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLmdldEFic3RyYWN0RmlsZUJ5UGF0aChzdG9yeUZpbGVQYXRoKTtcblx0XHRpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYFN0b3J5IGZpbGUgbm90IGZvdW5kOiAke3N0b3J5RmlsZVBhdGh9YCk7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3RvcnlDb250ZW50ID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLnJlYWQoZmlsZSk7XG5cdFx0Y29uc3QgY29udGVudHNGb2xkZXJQYXRoID0gYCR7c3RvcnlGb2xkZXJQYXRofS8wMy1jb250ZW50c2A7XG5cblx0XHQvLyBQYXJzZSBoaWVyYXJjaGljYWwgcHJvc2UgZnJvbSBzdG9yeSBjb250ZW50XG5cdFx0Y29uc3Qgc3RvcnlQcm9zZSA9IHBhcnNlU3RvcnlQcm9zZShzdG9yeUNvbnRlbnQpO1xuXHRcdFxuXHRcdGlmIChzdG9yeVByb3NlLnNlY3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEdldCBleGlzdGluZyBjaGFwdGVycywgc2NlbmVzLCBiZWF0c1xuXHRcdGNvbnN0IGV4aXN0aW5nQ2hhcHRlcnMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDaGFwdGVycyhzdG9yeUlkKTtcblx0XHRjb25zdCBjaGFwdGVyQnlUaXRsZSA9IG5ldyBNYXA8c3RyaW5nLCBDaGFwdGVyPigpO1xuXHRcdGZvciAoY29uc3QgY2ggb2YgZXhpc3RpbmdDaGFwdGVycykge1xuXHRcdFx0Y2hhcHRlckJ5VGl0bGUuc2V0KGNoLnRpdGxlLnRvTG93ZXJDYXNlKCksIGNoKTtcblx0XHR9XG5cblx0XHQvLyBUcmFjayBjdXJyZW50IGNvbnRleHRcblx0XHRsZXQgY3VycmVudENoYXB0ZXI6IENoYXB0ZXIgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgY3VycmVudFNjZW5lOiBTY2VuZSB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBjdXJyZW50QmVhdDogQmVhdCB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBwcm9zZU9yZGVyTnVtID0gMTtcblxuXHRcdC8vIE1hcHMgZm9yIHNjZW5lcyBhbmQgYmVhdHNcblx0XHRjb25zdCBzY2VuZU1hcCA9IG5ldyBNYXA8c3RyaW5nLCBTY2VuZT4oKTtcblx0XHRjb25zdCBiZWF0TWFwID0gbmV3IE1hcDxzdHJpbmcsIEJlYXQ+KCk7XG5cblx0XHQvLyBDYWNoZSBmb3IgcmVtb3RlIGNvbnRlbnQgYmxvY2tzIGJ5IGNoYXB0ZXIgSUQgKGF2b2lkcyBOKzEgcXVlcmllcylcblx0XHRjb25zdCByZW1vdGVDb250ZW50QmxvY2tzQ2FjaGUgPSBuZXcgTWFwPHN0cmluZywgTWFwPHN0cmluZywgQ29udGVudEJsb2NrPj4oKTtcblx0XHRjb25zdCBnZXRSZW1vdGVDb250ZW50QmxvY2tzTWFwID0gYXN5bmMgKGNoYXB0ZXJJZDogc3RyaW5nKTogUHJvbWlzZTxNYXA8c3RyaW5nLCBDb250ZW50QmxvY2s+PiA9PiB7XG5cdFx0XHRpZiAoIXJlbW90ZUNvbnRlbnRCbG9ja3NDYWNoZS5oYXMoY2hhcHRlcklkKSkge1xuXHRcdFx0XHRjb25zdCBibG9ja3MgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzKGNoYXB0ZXJJZCk7XG5cdFx0XHRcdGNvbnN0IG1hcCA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2s+KCk7XG5cdFx0XHRcdGZvciAoY29uc3QgcGIgb2YgYmxvY2tzKSB7XG5cdFx0XHRcdFx0bWFwLnNldChwYi5pZCwgcGIpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJlbW90ZUNvbnRlbnRCbG9ja3NDYWNoZS5zZXQoY2hhcHRlcklkLCBtYXApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlbW90ZUNvbnRlbnRCbG9ja3NDYWNoZS5nZXQoY2hhcHRlcklkKSE7XG5cdFx0fTtcblxuXHRcdC8vIFByb2Nlc3MgZWFjaCBzZWN0aW9uXG5cdFx0Zm9yIChjb25zdCBzZWN0aW9uIG9mIHN0b3J5UHJvc2Uuc2VjdGlvbnMpIHtcblx0XHRcdGlmIChzZWN0aW9uLnR5cGUgPT09IFwic2NlbmVcIiAmJiBzZWN0aW9uLnNjZW5lKSB7XG5cdFx0XHRcdGNvbnN0IHsgc2NlbmU6IHBhcnNlZFNjZW5lIH0gPSBzZWN0aW9uO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gSWYgbm8gY3VycmVudCBjaGFwdGVyLCBjcmVhdGUgYSBkZWZhdWx0IG9uZSBmb3Igb3JwaGFuIHNjZW5lc1xuXHRcdFx0XHRpZiAoIWN1cnJlbnRDaGFwdGVyKSB7XG5cdFx0XHRcdFx0Y3VycmVudENoYXB0ZXIgPSBjaGFwdGVyQnlUaXRsZS5nZXQoXCJzdG9yeSBwcm9zZVwiKSB8fCBudWxsO1xuXHRcdFx0XHRcdGlmICghY3VycmVudENoYXB0ZXIpIHtcblx0XHRcdFx0XHRcdGN1cnJlbnRDaGFwdGVyID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ2hhcHRlcihzdG9yeUlkLCB7XG5cdFx0XHRcdFx0XHRcdG51bWJlcjogOTk5OSxcblx0XHRcdFx0XHRcdFx0dGl0bGU6IFwiU3RvcnkgUHJvc2VcIixcblx0XHRcdFx0XHRcdFx0c3RhdHVzOiBcImRyYWZ0XCIsXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGNoYXB0ZXJCeVRpdGxlLnNldChcInN0b3J5IHByb3NlXCIsIGN1cnJlbnRDaGFwdGVyKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBGaW5kIG9yIGNyZWF0ZSBzY2VuZVxuXHRcdFx0XHRpZiAocGFyc2VkU2NlbmUubGlua05hbWUpIHtcblx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBzY2VuZU1hcC5nZXQocGFyc2VkU2NlbmUubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdGlmICghY3VycmVudFNjZW5lICYmIHBhcnNlZFNjZW5lLmdvYWwpIHtcblx0XHRcdFx0XHQvLyBUcnkgdG8gZmluZCBieSBnb2FsXG5cdFx0XHRcdFx0Y29uc3QgYWxsU2NlbmVzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0U2NlbmVzKGN1cnJlbnRDaGFwdGVyLmlkKTtcblx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBhbGxTY2VuZXMuZmluZChzID0+IHMuZ29hbCA9PT0gcGFyc2VkU2NlbmUuZ29hbCkgfHwgbnVsbDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICghY3VycmVudFNjZW5lKSB7XG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIG5ldyBzY2VuZVxuXHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nU2NlbmVzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0U2NlbmVzKGN1cnJlbnRDaGFwdGVyLmlkKTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZU9yZGVyTnVtID0gZXhpc3RpbmdTY2VuZXMubGVuZ3RoID4gMFxuXHRcdFx0XHRcdFx0PyBNYXRoLm1heCguLi5leGlzdGluZ1NjZW5lcy5tYXAocyA9PiBzLm9yZGVyX251bSkpICsgMVxuXHRcdFx0XHRcdFx0OiAxO1xuXG5cdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlU2NlbmUoe1xuXHRcdFx0XHRcdFx0c3RvcnlfaWQ6IHN0b3J5SWQsXG5cdFx0XHRcdFx0XHRjaGFwdGVyX2lkOiBjdXJyZW50Q2hhcHRlci5pZCxcblx0XHRcdFx0XHRcdG9yZGVyX251bTogc2NlbmVPcmRlck51bSxcblx0XHRcdFx0XHRcdGdvYWw6IHBhcnNlZFNjZW5lLmdvYWwsXG5cdFx0XHRcdFx0XHR0aW1lX3JlZjogcGFyc2VkU2NlbmUudGltZVJlZixcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvLyBTY2VuZSBmaWxlIHdpbGwgYmUgY3JlYXRlZCBkdXJpbmcgcHVsbFxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGN1cnJlbnRTY2VuZSkge1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShjdXJyZW50U2NlbmUpO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lTGlua05hbWUgPSBzY2VuZUZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdHNjZW5lTWFwLnNldChzY2VuZUxpbmtOYW1lLCBjdXJyZW50U2NlbmUpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y3VycmVudEJlYXQgPSBudWxsO1xuXHRcdFx0XHRwcm9zZU9yZGVyTnVtID0gMTtcblxuXHRcdFx0fSBlbHNlIGlmIChzZWN0aW9uLnR5cGUgPT09IFwiYmVhdFwiICYmIHNlY3Rpb24uYmVhdCkge1xuXHRcdFx0XHRjb25zdCB7IGJlYXQ6IHBhcnNlZEJlYXQgfSA9IHNlY3Rpb247XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoIWN1cnJlbnRTY2VuZSkge1xuXHRcdFx0XHRcdC8vIENhbid0IGNyZWF0ZSBiZWF0IHdpdGhvdXQgc2NlbmUgLSBza2lwXG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBGaW5kIG9yIGNyZWF0ZSBiZWF0XG5cdFx0XHRcdGlmIChwYXJzZWRCZWF0LmxpbmtOYW1lKSB7XG5cdFx0XHRcdFx0Y3VycmVudEJlYXQgPSBiZWF0TWFwLmdldChwYXJzZWRCZWF0LmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCFjdXJyZW50QmVhdCAmJiBwYXJzZWRCZWF0LmludGVudCkge1xuXHRcdFx0XHRcdGNvbnN0IGFsbEJlYXRzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0QmVhdHMoY3VycmVudFNjZW5lLmlkKTtcblx0XHRcdFx0XHRjdXJyZW50QmVhdCA9IGFsbEJlYXRzLmZpbmQoYiA9PiBiLmludGVudCA9PT0gcGFyc2VkQmVhdC5pbnRlbnQpIHx8IG51bGw7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIWN1cnJlbnRCZWF0KSB7XG5cdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdCZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzKGN1cnJlbnRTY2VuZS5pZCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdE9yZGVyTnVtID0gZXhpc3RpbmdCZWF0cy5sZW5ndGggPiAwXG5cdFx0XHRcdFx0XHQ/IE1hdGgubWF4KC4uLmV4aXN0aW5nQmVhdHMubWFwKGIgPT4gYi5vcmRlcl9udW0pKSArIDFcblx0XHRcdFx0XHRcdDogMTtcblxuXHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQmVhdCh7XG5cdFx0XHRcdFx0XHRzY2VuZV9pZDogY3VycmVudFNjZW5lLmlkLFxuXHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBiZWF0T3JkZXJOdW0sXG5cdFx0XHRcdFx0XHR0eXBlOiBcInNldHVwXCIsXG5cdFx0XHRcdFx0XHRpbnRlbnQ6IHBhcnNlZEJlYXQuaW50ZW50LFxuXHRcdFx0XHRcdFx0b3V0Y29tZTogcGFyc2VkQmVhdC5vdXRjb21lLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vIEJlYXQgZmlsZSB3aWxsIGJlIGNyZWF0ZWQgZHVyaW5nIHB1bGxcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoY3VycmVudEJlYXQpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRMaW5rTmFtZSA9IGJlYXRGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRiZWF0TWFwLnNldChiZWF0TGlua05hbWUsIGN1cnJlbnRCZWF0KTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9IGVsc2UgaWYgKHNlY3Rpb24udHlwZSA9PT0gXCJwcm9zZVwiICYmIHNlY3Rpb24ucHJvc2UpIHtcblx0XHRcdFx0Y29uc3QgeyBwcm9zZTogcGFyYWdyYXBoIH0gPSBzZWN0aW9uO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gTmVlZCBhIGNoYXB0ZXIgZm9yIHByb3NlIGJsb2Nrc1xuXHRcdFx0XHRpZiAoIWN1cnJlbnRDaGFwdGVyKSB7XG5cdFx0XHRcdFx0Y3VycmVudENoYXB0ZXIgPSBjaGFwdGVyQnlUaXRsZS5nZXQoXCJzdG9yeSBwcm9zZVwiKSB8fCBudWxsO1xuXHRcdFx0XHRcdGlmICghY3VycmVudENoYXB0ZXIpIHtcblx0XHRcdFx0XHRcdGN1cnJlbnRDaGFwdGVyID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ2hhcHRlcihzdG9yeUlkLCB7XG5cdFx0XHRcdFx0XHRcdG51bWJlcjogOTk5OSxcblx0XHRcdFx0XHRcdFx0dGl0bGU6IFwiU3RvcnkgUHJvc2VcIixcblx0XHRcdFx0XHRcdFx0c3RhdHVzOiBcImRyYWZ0XCIsXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGNoYXB0ZXJCeVRpdGxlLnNldChcInN0b3J5IHByb3NlXCIsIGN1cnJlbnRDaGFwdGVyKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBHZXQgcmVtb3RlIHByb3NlIGJsb2NrcyBmb3IgY3VycmVudCBjaGFwdGVyICh1c2luZyBjYWNoZSlcblx0XHRcdFx0Y29uc3QgcmVtb3RlQ29udGVudEJsb2Nrc01hcCA9IGF3YWl0IGdldFJlbW90ZUNvbnRlbnRCbG9ja3NNYXAoY3VycmVudENoYXB0ZXIuaWQpO1xuXG5cdFx0XHRcdGxldCBsb2NhbENvbnRlbnRCbG9jazogQ29udGVudEJsb2NrIHwgbnVsbCA9IG51bGw7XG5cdFx0XHRcdGxldCByZW1vdGVDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayB8IG51bGwgPSBudWxsO1xuXG5cdFx0XHRcdGlmIChwYXJhZ3JhcGgubGlua05hbWUpIHtcblx0XHRcdFx0XHQvLyBTZWFyY2ggZm9yIGZpbGUgaW4gdHlwZSBzdWJmb2xkZXJzXG5cdFx0XHRcdFx0Y29uc3QgY29udGVudEJsb2NrRmlsZVBhdGggPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tGaWxlQnlMaW5rTmFtZShjb250ZW50c0ZvbGRlclBhdGgsIHBhcmFncmFwaC5saW5rTmFtZSk7XG5cdFx0XHRcdFx0aWYgKGNvbnRlbnRCbG9ja0ZpbGVQYXRoKSB7XG5cdFx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIucmVhZENvbnRlbnRCbG9ja0Zyb21GaWxlKGNvbnRlbnRCbG9ja0ZpbGVQYXRoKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIWxvY2FsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmluZENvbnRlbnRCbG9ja0J5Q29udGVudChjb250ZW50c0ZvbGRlclBhdGgsIHBhcmFncmFwaC5jb250ZW50KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAobG9jYWxDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdHJlbW90ZUNvbnRlbnRCbG9jayA9IHJlbW90ZUNvbnRlbnRCbG9ja3NNYXAuZ2V0KGxvY2FsQ29udGVudEJsb2NrLmlkKSB8fCBudWxsO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb25zdCBub3JtYWxpemVkQ29udGVudCA9IHBhcmFncmFwaC5jb250ZW50LnRyaW0oKTtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgWywgcmVtb3RlUEJdIG9mIHJlbW90ZUNvbnRlbnRCbG9ja3NNYXAuZW50cmllcygpKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChyZW1vdGVQQi5jb250ZW50LnRyaW0oKSA9PT0gbm9ybWFsaXplZENvbnRlbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRyZW1vdGVDb250ZW50QmxvY2sgPSByZW1vdGVQQjtcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmluZENvbnRlbnRCbG9ja0J5Q29udGVudChjb250ZW50c0ZvbGRlclBhdGgsIHBhcmFncmFwaC5jb250ZW50KTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjb25zdCBub3JtYWxpemVkQ29udGVudCA9IHBhcmFncmFwaC5jb250ZW50LnRyaW0oKTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IFssIHJlbW90ZVBCXSBvZiByZW1vdGVDb250ZW50QmxvY2tzTWFwLmVudHJpZXMoKSkge1xuXHRcdFx0XHRcdFx0aWYgKHJlbW90ZVBCLmNvbnRlbnQudHJpbSgpID09PSBub3JtYWxpemVkQ29udGVudCkge1xuXHRcdFx0XHRcdFx0XHRyZW1vdGVDb250ZW50QmxvY2sgPSByZW1vdGVQQjtcblx0XHRcdFx0XHRcdFx0aWYgKCFsb2NhbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0XHRcdGxvY2FsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5maW5kQ29udGVudEJsb2NrQnlJZChjb250ZW50c0ZvbGRlclBhdGgsIHJlbW90ZVBCLmlkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBzdGF0dXMgPSBjb21wYXJlQ29udGVudEJsb2NrcyhwYXJhZ3JhcGgsIGxvY2FsQ29udGVudEJsb2NrLCByZW1vdGVDb250ZW50QmxvY2spO1xuXHRcdFx0XHRsZXQgZmluYWxDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jaztcblxuXHRcdFx0XHRzd2l0Y2ggKHN0YXR1cykge1xuXHRcdFx0XHRcdGNhc2UgXCJuZXdcIjoge1xuXHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QmxvY2soY3VycmVudENoYXB0ZXIuaWQsIHtcblx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBwcm9zZU9yZGVyTnVtKyssXG5cdFx0XHRcdFx0XHRcdGtpbmQ6IFwiZmluYWxcIixcblx0XHRcdFx0XHRcdFx0Y29udGVudDogcGFyYWdyYXBoLmNvbnRlbnQsXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0Ly8gQ3JlYXRlIGZpbGUgaW4gY29ycmVjdCB0eXBlIHN1YmZvbGRlclxuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoLCB1bmRlZmluZWQpO1xuXG5cdFx0XHRcdFx0XHQvLyBDcmVhdGUgcmVmZXJlbmNlc1xuXHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRTY2VuZSkge1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QW5jaG9yKGZpbmFsQ29udGVudEJsb2NrLmlkLCBcInNjZW5lXCIsIGN1cnJlbnRTY2VuZS5pZCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoY3VycmVudEJlYXQpIHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJiZWF0XCIsIGN1cnJlbnRCZWF0LmlkKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhc2UgXCJ1bmNoYW5nZWRcIjoge1xuXHRcdFx0XHRcdFx0aWYgKCFsb2NhbENvbnRlbnRCbG9jayAmJiByZW1vdGVDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSByZW1vdGVDb250ZW50QmxvY2s7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoLCB1bmRlZmluZWQpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChsb2NhbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IGxvY2FsQ29udGVudEJsb2NrO1xuXHRcdFx0XHRcdFx0XHRwcm9zZU9yZGVyTnVtKys7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IHJlbW90ZUNvbnRlbnRCbG9jayE7XG5cdFx0XHRcdFx0XHRcdHByb3NlT3JkZXJOdW0rKztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhc2UgXCJsb2NhbF9tb2RpZmllZFwiOiB7XG5cdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnVwZGF0ZUNvbnRlbnRCbG9jayhsb2NhbENvbnRlbnRCbG9jayEuaWQsIHtcblx0XHRcdFx0XHRcdFx0Y29udGVudDogcGFyYWdyYXBoLmNvbnRlbnQsXG5cdFx0XHRcdFx0XHRcdG9yZGVyX251bTogcHJvc2VPcmRlck51bSsrLFxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhc2UgXCJyZW1vdGVfbW9kaWZpZWRcIjoge1xuXHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSByZW1vdGVDb250ZW50QmxvY2shO1xuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoLCB1bmRlZmluZWQpO1xuXHRcdFx0XHRcdFx0cHJvc2VPcmRlck51bSsrO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y2FzZSBcImNvbmZsaWN0XCI6IHtcblx0XHRcdFx0XHRcdGNvbnN0IHJlc29sdXRpb24gPSBhd2FpdCB0aGlzLnJlc29sdmVDb25mbGljdChsb2NhbENvbnRlbnRCbG9jayEsIHJlbW90ZUNvbnRlbnRCbG9jayEpO1xuXHRcdFx0XHRcdFx0bGV0IHJlc29sdmVkQ29udGVudCA9IHJlc29sdXRpb24ucmVzb2x1dGlvbiA9PT0gXCJsb2NhbFwiIFxuXHRcdFx0XHRcdFx0XHQ/IHBhcmFncmFwaC5jb250ZW50IFxuXHRcdFx0XHRcdFx0XHQ6IHJlc29sdXRpb24ucmVzb2x1dGlvbiA9PT0gXCJyZW1vdGVcIiBcblx0XHRcdFx0XHRcdFx0XHQ/IHJlbW90ZUNvbnRlbnRCbG9jayEuY29udGVudCBcblx0XHRcdFx0XHRcdFx0XHQ6IHJlc29sdXRpb24ubWVyZ2VkQ29udGVudCB8fCBwYXJhZ3JhcGguY29udGVudDtcblxuXHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVDb250ZW50QmxvY2sobG9jYWxDb250ZW50QmxvY2shLmlkLCB7XG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQ6IHJlc29sdmVkQ29udGVudCxcblx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBwcm9zZU9yZGVyTnVtKyssXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoLCB1bmRlZmluZWQpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gUHVzaCBwcm9zZSBibG9ja3MgZnJvbSBhIHNjZW5lIGZpbGUgKHNjZW5lLWxldmVsIHByb3NlLCBub3QgaW5zaWRlIGNoYXB0ZXJzKVxuXHRwcml2YXRlIGFzeW5jIHB1c2hTY2VuZUNvbnRlbnRCbG9ja3Moc2NlbmVGaWxlUGF0aDogc3RyaW5nLCBzdG9yeUZvbGRlclBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdC8vIFJlYWQgc2NlbmUgZmlsZVxuXHRcdGNvbnN0IGZpbGUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHNjZW5lRmlsZVBhdGgpO1xuXHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBzY2VuZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkucmVhZChmaWxlKTtcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMuZmlsZU1hbmFnZXIucGFyc2VGcm9udG1hdHRlcihzY2VuZUNvbnRlbnQpO1xuXG5cdFx0aWYgKCFmcm9udG1hdHRlci5pZCB8fCAhZnJvbnRtYXR0ZXIuc3RvcnlfaWQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBzY2VuZUlkID0gZnJvbnRtYXR0ZXIuaWQ7XG5cdFx0Y29uc3Qgc3RvcnlJZCA9IGZyb250bWF0dGVyLnN0b3J5X2lkO1xuXHRcdGNvbnN0IGNvbnRlbnRzRm9sZGVyUGF0aCA9IGAke3N0b3J5Rm9sZGVyUGF0aH0vMDMtY29udGVudHNgO1xuXG5cdFx0Ly8gUGFyc2UgcHJvc2UgYmxvY2tzIGZyb20gc2NlbmUgY29udGVudFxuXHRcdGNvbnN0IHNjZW5lUHJvc2UgPSBwYXJzZVNjZW5lUHJvc2Uoc2NlbmVDb250ZW50KTtcblx0XHRcblx0XHRpZiAoc2NlbmVQcm9zZS5zZWN0aW9ucy5sZW5ndGggPT09IDApIHtcblx0XHRcdHJldHVybjsgLy8gTm8gcHJvc2UgYmxvY2tzIHRvIHByb2Nlc3Ncblx0XHR9XG5cblx0XHQvLyBHZXQgb3IgY3JlYXRlIGEgdGVtcG9yYXJ5IGNoYXB0ZXIgZm9yIHNjZW5lLWxldmVsIHByb3NlIGJsb2Nrc1xuXHRcdGNvbnN0IGNoYXB0ZXJzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q2hhcHRlcnMoc3RvcnlJZCk7XG5cdFx0bGV0IHRlbXBDaGFwdGVyID0gY2hhcHRlcnMuZmluZChjID0+IGMudGl0bGUgPT09IFwiU2NlbmUtTGV2ZWwgUHJvc2VcIik7XG5cdFx0XG5cdFx0aWYgKCF0ZW1wQ2hhcHRlcikge1xuXHRcdFx0dGVtcENoYXB0ZXIgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDaGFwdGVyKHN0b3J5SWQsIHtcblx0XHRcdFx0bnVtYmVyOiA5OTk4LCAvLyBIaWdoIG51bWJlciB0byBrZWVwIGl0IGF0IHRoZSBlbmRcblx0XHRcdFx0dGl0bGU6IFwiU2NlbmUtTGV2ZWwgUHJvc2VcIixcblx0XHRcdFx0c3RhdHVzOiBcImRyYWZ0XCIsXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvLyBHZXQgcHJvc2UgYmxvY2tzIHJlZmVyZW5jZWQgdG8gdGhpcyBzY2VuZVxuXHRcdGNvbnN0IHJlbW90ZUNvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzKHRlbXBDaGFwdGVyLmlkKTtcblx0XHRjb25zdCByZW1vdGVDb250ZW50QmxvY2tzTWFwID0gbmV3IE1hcDxzdHJpbmcsIENvbnRlbnRCbG9jaz4oKTtcblx0XHRmb3IgKGNvbnN0IHBiIG9mIHJlbW90ZUNvbnRlbnRCbG9ja3MpIHtcblx0XHRcdHJlbW90ZUNvbnRlbnRCbG9ja3NNYXAuc2V0KHBiLmlkLCBwYik7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IGJlYXRzIGZvciB0aGlzIHNjZW5lXG5cdFx0Y29uc3QgZXhpc3RpbmdCZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzKHNjZW5lSWQpO1xuXHRcdGNvbnN0IGJlYXRNYXAgPSBuZXcgTWFwPHN0cmluZywgQmVhdD4oKTtcblx0XHRjb25zdCBiZWF0SWRNYXAgPSBuZXcgTWFwPHN0cmluZywgQmVhdD4oKTtcblx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgZXhpc3RpbmdCZWF0cykge1xuXHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0Y29uc3QgbGlua05hbWUgPSBmaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdGJlYXRNYXAuc2V0KGxpbmtOYW1lLCBiZWF0KTtcblx0XHRcdGJlYXRJZE1hcC5zZXQoYmVhdC5pZCwgYmVhdCk7XG5cdFx0fVxuXG5cdFx0Ly8gUHJvY2VzcyBwcm9zZSBzZWN0aW9uc1xuXHRcdGxldCBwcm9zZU9yZGVyTnVtID0gMTtcblx0XHRsZXQgY3VycmVudEJlYXQ6IEJlYXQgfCBudWxsID0gbnVsbDtcblx0XHRjb25zdCB1cGRhdGVkU2VjdGlvbnM6IHN0cmluZ1tdID0gW107XG5cblx0XHRmb3IgKGNvbnN0IHNlY3Rpb24gb2Ygc2NlbmVQcm9zZS5zZWN0aW9ucykge1xuXHRcdFx0aWYgKHNlY3Rpb24udHlwZSA9PT0gXCJiZWF0XCIgJiYgc2VjdGlvbi5iZWF0KSB7XG5cdFx0XHRcdGNvbnN0IHsgYmVhdDogcGFyc2VkQmVhdCB9ID0gc2VjdGlvbjtcblx0XHRcdFx0XG5cdFx0XHRcdGlmIChwYXJzZWRCZWF0LmxpbmtOYW1lKSB7XG5cdFx0XHRcdFx0Y3VycmVudEJlYXQgPSBiZWF0TWFwLmdldChwYXJzZWRCZWF0LmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdGlmICghY3VycmVudEJlYXQpIHtcblx0XHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYmVhdElkTWFwLmdldChwYXJzZWRCZWF0LmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0aWYgKGN1cnJlbnRCZWF0KSB7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUJlYXRGaWxlTmFtZShjdXJyZW50QmVhdCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXREaXNwbGF5VGV4dCA9IGN1cnJlbnRCZWF0Lm91dGNvbWVcblx0XHRcdFx0XHRcdD8gYCR7Y3VycmVudEJlYXQuaW50ZW50fSAtPiAke2N1cnJlbnRCZWF0Lm91dGNvbWV9YFxuXHRcdFx0XHRcdFx0OiBjdXJyZW50QmVhdC5pbnRlbnQ7XG5cdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYCMjIyBCZWF0OiBbWyR7YmVhdExpbmtOYW1lfXwke2JlYXREaXNwbGF5VGV4dH1dXWApO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHNlY3Rpb24udHlwZSA9PT0gXCJwcm9zZVwiICYmIHNlY3Rpb24ucHJvc2UpIHtcblx0XHRcdFx0Y29uc3QgeyBwcm9zZTogcGFyYWdyYXBoIH0gPSBzZWN0aW9uO1xuXHRcdFx0XHRcblx0XHRcdFx0bGV0IGxvY2FsQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2sgfCBudWxsID0gbnVsbDtcblx0XHRcdFx0bGV0IHJlbW90ZUNvbnRlbnRCbG9jazogQ29udGVudEJsb2NrIHwgbnVsbCA9IG51bGw7XG5cblx0XHRcdFx0aWYgKHBhcmFncmFwaC5saW5rTmFtZSkge1xuXHRcdFx0XHRcdC8vIFNlYXJjaCBmb3IgZmlsZSBpbiB0eXBlIHN1YmZvbGRlcnNcblx0XHRcdFx0XHRjb25zdCBjb250ZW50QmxvY2tGaWxlUGF0aCA9IGF3YWl0IHRoaXMuZmluZENvbnRlbnRCbG9ja0ZpbGVCeUxpbmtOYW1lKGNvbnRlbnRzRm9sZGVyUGF0aCwgcGFyYWdyYXBoLmxpbmtOYW1lKTtcblx0XHRcdFx0XHRpZiAoY29udGVudEJsb2NrRmlsZVBhdGgpIHtcblx0XHRcdFx0XHRcdGxvY2FsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlci5yZWFkQ29udGVudEJsb2NrRnJvbUZpbGUoY29udGVudEJsb2NrRmlsZVBhdGgpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICghbG9jYWxDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdGxvY2FsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5maW5kQ29udGVudEJsb2NrQnlDb250ZW50KGNvbnRlbnRzRm9sZGVyUGF0aCwgcGFyYWdyYXBoLmNvbnRlbnQpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChsb2NhbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0cmVtb3RlQ29udGVudEJsb2NrID0gcmVtb3RlQ29udGVudEJsb2Nrc01hcC5nZXQobG9jYWxDb250ZW50QmxvY2suaWQpIHx8IG51bGw7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnN0IG5vcm1hbGl6ZWRDb250ZW50ID0gcGFyYWdyYXBoLmNvbnRlbnQudHJpbSgpO1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBbaWQsIHJlbW90ZVBCXSBvZiByZW1vdGVDb250ZW50QmxvY2tzTWFwLmVudHJpZXMoKSkge1xuXHRcdFx0XHRcdFx0XHRpZiAocmVtb3RlUEIuY29udGVudC50cmltKCkgPT09IG5vcm1hbGl6ZWRDb250ZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVtb3RlQ29udGVudEJsb2NrID0gcmVtb3RlUEI7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bG9jYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tCeUNvbnRlbnQoY29udGVudHNGb2xkZXJQYXRoLCBwYXJhZ3JhcGguY29udGVudCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29uc3Qgbm9ybWFsaXplZENvbnRlbnQgPSBwYXJhZ3JhcGguY29udGVudC50cmltKCk7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBbaWQsIHJlbW90ZVBCXSBvZiByZW1vdGVDb250ZW50QmxvY2tzTWFwLmVudHJpZXMoKSkge1xuXHRcdFx0XHRcdFx0aWYgKHJlbW90ZVBCLmNvbnRlbnQudHJpbSgpID09PSBub3JtYWxpemVkQ29udGVudCkge1xuXHRcdFx0XHRcdFx0XHRyZW1vdGVDb250ZW50QmxvY2sgPSByZW1vdGVQQjtcblx0XHRcdFx0XHRcdFx0aWYgKCFsb2NhbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0XHRcdGxvY2FsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5maW5kQ29udGVudEJsb2NrQnlJZChjb250ZW50c0ZvbGRlclBhdGgsIHJlbW90ZVBCLmlkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBzdGF0dXMgPSBjb21wYXJlQ29udGVudEJsb2NrcyhwYXJhZ3JhcGgsIGxvY2FsQ29udGVudEJsb2NrLCByZW1vdGVDb250ZW50QmxvY2spO1xuXG5cdFx0XHRcdGxldCBmaW5hbENvbnRlbnRCbG9jazogQ29udGVudEJsb2NrO1xuXG5cdFx0XHRcdHN3aXRjaCAoc3RhdHVzKSB7XG5cdFx0XHRcdFx0Y2FzZSBcIm5ld1wiOiB7XG5cdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRCbG9jayh0ZW1wQ2hhcHRlciEuaWQsIHtcblx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBwcm9zZU9yZGVyTnVtKyssXG5cdFx0XHRcdFx0XHRcdGtpbmQ6IFwiZmluYWxcIixcblx0XHRcdFx0XHRcdFx0Y29udGVudDogcGFyYWdyYXBoLmNvbnRlbnQsXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0Ly8gQ3JlYXRlIGZpbGUgaW4gY29ycmVjdCB0eXBlIHN1YmZvbGRlclxuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoLCB1bmRlZmluZWQpO1xuXG5cdFx0XHRcdFx0XHQvLyBDcmVhdGUgcmVmZXJlbmNlIHRvIHNjZW5lXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QW5jaG9yKGZpbmFsQ29udGVudEJsb2NrLmlkLCBcInNjZW5lXCIsIHNjZW5lSWQpO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvLyBBbHNvIGNyZWF0ZSByZWZlcmVuY2UgdG8gYmVhdCBpZiB3ZSdyZSB1bmRlciBvbmVcblx0XHRcdFx0XHRcdGlmIChjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QW5jaG9yKGZpbmFsQ29udGVudEJsb2NrLmlkLCBcImJlYXRcIiwgY3VycmVudEJlYXQuaWQpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShmaW5hbENvbnRlbnRCbG9jaykucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lfXwke3BhcmFncmFwaC5jb250ZW50fV1dYCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwidW5jaGFuZ2VkXCI6IHtcblx0XHRcdFx0XHRcdGlmICghbG9jYWxDb250ZW50QmxvY2sgJiYgcmVtb3RlQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gcmVtb3RlQ29udGVudEJsb2NrO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobG9jYWxDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdFx0aWYgKGxvY2FsQ29udGVudEJsb2NrLm9yZGVyX251bSAhPT0gcHJvc2VPcmRlck51bSkge1xuXHRcdFx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQ29udGVudEJsb2NrKGxvY2FsQ29udGVudEJsb2NrLmlkLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRvcmRlcl9udW06IHByb3NlT3JkZXJOdW0rKyxcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoLCB1bmRlZmluZWQpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gbG9jYWxDb250ZW50QmxvY2s7XG5cdFx0XHRcdFx0XHRcdFx0cHJvc2VPcmRlck51bSsrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IHJlbW90ZUNvbnRlbnRCbG9jayE7XG5cdFx0XHRcdFx0XHRcdHByb3NlT3JkZXJOdW0rKztcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKHBhcmFncmFwaC5saW5rTmFtZSkge1xuXHRcdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske3BhcmFncmFwaC5saW5rTmFtZX18JHtwYXJhZ3JhcGguY29udGVudH1dXWApO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoZmluYWxDb250ZW50QmxvY2spLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lfXwke3BhcmFncmFwaC5jb250ZW50fV1dYCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwibG9jYWxfbW9kaWZpZWRcIjoge1xuXHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVDb250ZW50QmxvY2sobG9jYWxDb250ZW50QmxvY2shLmlkLCB7XG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQ6IHBhcmFncmFwaC5jb250ZW50LFxuXHRcdFx0XHRcdFx0XHRvcmRlcl9udW06IHByb3NlT3JkZXJOdW0rKyxcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQ29udGVudEJsb2NrRmlsZShmaW5hbENvbnRlbnRCbG9jaywgZmlsZVBhdGgsIHVuZGVmaW5lZCk7XG5cblx0XHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGZpbmFsQ29udGVudEJsb2NrKS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRcdHVwZGF0ZWRTZWN0aW9ucy5wdXNoKGBbWyR7bGlua05hbWV9fCR7cGFyYWdyYXBoLmNvbnRlbnR9XV1gKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhc2UgXCJyZW1vdGVfbW9kaWZpZWRcIjoge1xuXHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSByZW1vdGVDb250ZW50QmxvY2shO1xuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoLCB1bmRlZmluZWQpO1xuXG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShmaW5hbENvbnRlbnRCbG9jaykucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lfXwke2ZpbmFsQ29udGVudEJsb2NrLmNvbnRlbnR9XV1gKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYFNjZW5lIHByb3NlIGJsb2NrIHVwZGF0ZWQgZnJvbSByZW1vdGU6ICR7bGlua05hbWV9YCwgMzAwMCk7XG5cdFx0XHRcdFx0XHRwcm9zZU9yZGVyTnVtKys7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwiY29uZmxpY3RcIjoge1xuXHRcdFx0XHRcdFx0Y29uc3QgcmVzb2x1dGlvbiA9IGF3YWl0IHRoaXMucmVzb2x2ZUNvbmZsaWN0KGxvY2FsQ29udGVudEJsb2NrISwgcmVtb3RlQ29udGVudEJsb2NrISk7XG5cblx0XHRcdFx0XHRcdGxldCByZXNvbHZlZENvbnRlbnQ6IHN0cmluZztcblx0XHRcdFx0XHRcdGlmIChyZXNvbHV0aW9uLnJlc29sdXRpb24gPT09IFwibG9jYWxcIikge1xuXHRcdFx0XHRcdFx0XHRyZXNvbHZlZENvbnRlbnQgPSBwYXJhZ3JhcGguY29udGVudDtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAocmVzb2x1dGlvbi5yZXNvbHV0aW9uID09PSBcInJlbW90ZVwiKSB7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmVkQ29udGVudCA9IHJlbW90ZUNvbnRlbnRCbG9jayEuY29udGVudDtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmVkQ29udGVudCA9IHJlc29sdXRpb24ubWVyZ2VkQ29udGVudCB8fCBwYXJhZ3JhcGguY29udGVudDtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVDb250ZW50QmxvY2sobG9jYWxDb250ZW50QmxvY2shLmlkLCB7XG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQ6IHJlc29sdmVkQ29udGVudCxcblx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBwcm9zZU9yZGVyTnVtKyssXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoLCB1bmRlZmluZWQpO1xuXG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShmaW5hbENvbnRlbnRCbG9jaykucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lfXwke3Jlc29sdmVkQ29udGVudH1dXWApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gVXBkYXRlIHNjZW5lIGZpbGUgd2l0aCBsaW5rcyBpZiB0aGVyZSBhcmUgdXBkYXRlZCBzZWN0aW9uc1xuXHRcdGlmICh1cGRhdGVkU2VjdGlvbnMubGVuZ3RoID4gMCkge1xuXHRcdFx0Ly8gRmluZCB0aGUgaW5zZXJ0aW9uIHBvaW50IGluIHRoZSBzY2VuZSBmaWxlXG5cdFx0XHRjb25zdCBmcm9udG1hdHRlck1hdGNoID0gc2NlbmVDb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XG5cdFx0XHRjb25zdCBmcm9udG1hdHRlckVuZCA9IGZyb250bWF0dGVyTWF0Y2ggPyBmcm9udG1hdHRlck1hdGNoWzBdLmxlbmd0aCA6IDA7XG5cdFx0XHRjb25zdCBhZnRlckZyb250bWF0dGVyID0gc2NlbmVDb250ZW50LnN1YnN0cmluZyhmcm9udG1hdHRlckVuZCkudHJpbSgpO1xuXHRcdFx0XG5cdFx0XHQvLyBGaW5kIHRoZSAjIyBCZWF0cyBzZWN0aW9uIHRvIGluc2VydCBiZWZvcmUgaXRcblx0XHRcdGNvbnN0IGJlYXRzU2VjdGlvbk1hdGNoID0gYWZ0ZXJGcm9udG1hdHRlci5tYXRjaCgvXFxuIyNcXHMrQmVhdHNcXHMqXFxuLyk7XG5cdFx0XHRjb25zdCBpbnNlcnRpb25Qb2ludCA9IGJlYXRzU2VjdGlvbk1hdGNoIFxuXHRcdFx0XHQ/IGZyb250bWF0dGVyRW5kICsgYWZ0ZXJGcm9udG1hdHRlci5pbmRleE9mKGJlYXRzU2VjdGlvbk1hdGNoWzBdKVxuXHRcdFx0XHQ6IHNjZW5lQ29udGVudC5sZW5ndGg7XG5cdFx0XHRcblx0XHRcdC8vIEJ1aWxkIHVwZGF0ZWQgY29udGVudCB3aXRoIHByb3NlIHNlY3Rpb25zXG5cdFx0XHRjb25zdCBiZWZvcmVQcm9zZSA9IHNjZW5lQ29udGVudC5zdWJzdHJpbmcoMCwgaW5zZXJ0aW9uUG9pbnQpLnRyaW1FbmQoKTtcblx0XHRcdGNvbnN0IGFmdGVyUHJvc2UgPSBzY2VuZUNvbnRlbnQuc3Vic3RyaW5nKGluc2VydGlvblBvaW50KTtcblx0XHRcdFxuXHRcdFx0Y29uc3QgdXBkYXRlZENvbnRlbnQgPSBgJHtiZWZvcmVQcm9zZX1cXG5cXG4ke3VwZGF0ZWRTZWN0aW9ucy5qb2luKFwiXFxuXFxuXCIpfVxcbiR7YWZ0ZXJQcm9zZX1gO1xuXHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLm1vZGlmeShmaWxlLCB1cGRhdGVkQ29udGVudCk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUHVzaCBwcm9zZSBibG9ja3MgZnJvbSBhIGJlYXQgZmlsZVxuXHRwcml2YXRlIGFzeW5jIHB1c2hCZWF0Q29udGVudEJsb2NrcyhiZWF0RmlsZVBhdGg6IHN0cmluZywgc3RvcnlGb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBSZWFkIGJlYXQgZmlsZVxuXHRcdGNvbnN0IGZpbGUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGJlYXRGaWxlUGF0aCk7XG5cdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGJlYXRDb250ZW50ID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLnJlYWQoZmlsZSk7XG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSB0aGlzLmZpbGVNYW5hZ2VyLnBhcnNlRnJvbnRtYXR0ZXIoYmVhdENvbnRlbnQpO1xuXG5cdFx0aWYgKCFmcm9udG1hdHRlci5pZCB8fCAhZnJvbnRtYXR0ZXIuc2NlbmVfaWQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBiZWF0SWQgPSBmcm9udG1hdHRlci5pZDtcblx0XHRjb25zdCBzY2VuZUlkID0gZnJvbnRtYXR0ZXIuc2NlbmVfaWQ7XG5cdFx0Y29uc3QgY29udGVudHNGb2xkZXJQYXRoID0gYCR7c3RvcnlGb2xkZXJQYXRofS8wMy1jb250ZW50c2A7XG5cblx0XHQvLyBQYXJzZSBwcm9zZSBibG9ja3MgZnJvbSBiZWF0IGNvbnRlbnRcblx0XHRjb25zdCBiZWF0UHJvc2UgPSBwYXJzZUJlYXRQcm9zZShiZWF0Q29udGVudCk7XG5cdFx0XG5cdFx0aWYgKGJlYXRQcm9zZS5zZWN0aW9ucy5sZW5ndGggPT09IDApIHtcblx0XHRcdHJldHVybjsgLy8gTm8gcHJvc2UgYmxvY2tzIHRvIHByb2Nlc3Ncblx0XHR9XG5cblx0XHQvLyBHZXQgdGhlIHNjZW5lIHRvIGZpbmQgc3RvcnlfaWQgYW5kIGNoYXB0ZXJfaWRcblx0XHRjb25zdCBzY2VuZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFNjZW5lKHNjZW5lSWQpO1xuXHRcdGlmICghc2NlbmUpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBzdG9yeUlkID0gc2NlbmUuc3RvcnlfaWQ7XG5cblx0XHQvLyBHZXQgb3IgY3JlYXRlIGEgdGVtcG9yYXJ5IGNoYXB0ZXIgZm9yIGJlYXQtbGV2ZWwgcHJvc2UgYmxvY2tzXG5cdFx0Y29uc3QgY2hhcHRlcnMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDaGFwdGVycyhzdG9yeUlkKTtcblx0XHRsZXQgdGVtcENoYXB0ZXIgPSBjaGFwdGVycy5maW5kKGMgPT4gYy50aXRsZSA9PT0gXCJCZWF0LUxldmVsIFByb3NlXCIpO1xuXHRcdFxuXHRcdGlmICghdGVtcENoYXB0ZXIpIHtcblx0XHRcdHRlbXBDaGFwdGVyID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ2hhcHRlcihzdG9yeUlkLCB7XG5cdFx0XHRcdG51bWJlcjogOTk5NywgLy8gSGlnaCBudW1iZXIgdG8ga2VlcCBpdCBhdCB0aGUgZW5kXG5cdFx0XHRcdHRpdGxlOiBcIkJlYXQtTGV2ZWwgUHJvc2VcIixcblx0XHRcdFx0c3RhdHVzOiBcImRyYWZ0XCIsXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvLyBHZXQgZXhpc3RpbmcgcmVtb3RlIHByb3NlIGJsb2Nrc1xuXHRcdGNvbnN0IHJlbW90ZUNvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzKHRlbXBDaGFwdGVyLmlkKTtcblx0XHRjb25zdCByZW1vdGVDb250ZW50QmxvY2tzTWFwID0gbmV3IE1hcDxzdHJpbmcsIENvbnRlbnRCbG9jaz4oKTtcblx0XHRmb3IgKGNvbnN0IHBiIG9mIHJlbW90ZUNvbnRlbnRCbG9ja3MpIHtcblx0XHRcdHJlbW90ZUNvbnRlbnRCbG9ja3NNYXAuc2V0KHBiLmlkLCBwYik7XG5cdFx0fVxuXG5cdFx0Ly8gUHJvY2VzcyBwcm9zZSBzZWN0aW9uc1xuXHRcdGxldCBwcm9zZU9yZGVyTnVtID0gMTtcblx0XHRjb25zdCB1cGRhdGVkU2VjdGlvbnM6IHN0cmluZ1tdID0gW107XG5cblx0XHQvLyBBZGQgYmVhdCBoZWFkZXJcblx0XHRjb25zdCBiZWF0ID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0QmVhdChiZWF0SWQpO1xuXHRcdGlmIChiZWF0KSB7XG5cdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0Y29uc3QgYmVhdERpc3BsYXlUZXh0ID0gYmVhdC5vdXRjb21lXG5cdFx0XHRcdD8gYCR7YmVhdC5pbnRlbnR9IC0+ICR7YmVhdC5vdXRjb21lfWBcblx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdHVwZGF0ZWRTZWN0aW9ucy5wdXNoKGAjIyBCZWF0OiBbWyR7YmVhdExpbmtOYW1lfXwke2JlYXREaXNwbGF5VGV4dH1dXWApO1xuXHRcdH1cblxuXHRcdGZvciAoY29uc3Qgc2VjdGlvbiBvZiBiZWF0UHJvc2Uuc2VjdGlvbnMpIHtcblx0XHRcdGlmIChzZWN0aW9uLnR5cGUgPT09IFwicHJvc2VcIiAmJiBzZWN0aW9uLnByb3NlKSB7XG5cdFx0XHRcdGNvbnN0IHsgcHJvc2U6IHBhcmFncmFwaCB9ID0gc2VjdGlvbjtcblx0XHRcdFx0XG5cdFx0XHRcdGxldCBsb2NhbENvbnRlbnRCbG9jazogQ29udGVudEJsb2NrIHwgbnVsbCA9IG51bGw7XG5cdFx0XHRcdGxldCByZW1vdGVDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayB8IG51bGwgPSBudWxsO1xuXG5cdFx0XHRcdGlmIChwYXJhZ3JhcGgubGlua05hbWUpIHtcblx0XHRcdFx0XHQvLyBTZWFyY2ggZm9yIGZpbGUgaW4gdHlwZSBzdWJmb2xkZXJzXG5cdFx0XHRcdFx0Y29uc3QgY29udGVudEJsb2NrRmlsZVBhdGggPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tGaWxlQnlMaW5rTmFtZShjb250ZW50c0ZvbGRlclBhdGgsIHBhcmFncmFwaC5saW5rTmFtZSk7XG5cdFx0XHRcdFx0aWYgKGNvbnRlbnRCbG9ja0ZpbGVQYXRoKSB7XG5cdFx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIucmVhZENvbnRlbnRCbG9ja0Zyb21GaWxlKGNvbnRlbnRCbG9ja0ZpbGVQYXRoKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIWxvY2FsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmluZENvbnRlbnRCbG9ja0J5Q29udGVudChjb250ZW50c0ZvbGRlclBhdGgsIHBhcmFncmFwaC5jb250ZW50KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAobG9jYWxDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdHJlbW90ZUNvbnRlbnRCbG9jayA9IHJlbW90ZUNvbnRlbnRCbG9ja3NNYXAuZ2V0KGxvY2FsQ29udGVudEJsb2NrLmlkKSB8fCBudWxsO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb25zdCBub3JtYWxpemVkQ29udGVudCA9IHBhcmFncmFwaC5jb250ZW50LnRyaW0oKTtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgWywgcmVtb3RlUEJdIG9mIHJlbW90ZUNvbnRlbnRCbG9ja3NNYXAuZW50cmllcygpKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChyZW1vdGVQQi5jb250ZW50LnRyaW0oKSA9PT0gbm9ybWFsaXplZENvbnRlbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRyZW1vdGVDb250ZW50QmxvY2sgPSByZW1vdGVQQjtcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmluZENvbnRlbnRCbG9ja0J5Q29udGVudChjb250ZW50c0ZvbGRlclBhdGgsIHBhcmFncmFwaC5jb250ZW50KTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjb25zdCBub3JtYWxpemVkQ29udGVudCA9IHBhcmFncmFwaC5jb250ZW50LnRyaW0oKTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IFssIHJlbW90ZVBCXSBvZiByZW1vdGVDb250ZW50QmxvY2tzTWFwLmVudHJpZXMoKSkge1xuXHRcdFx0XHRcdFx0aWYgKHJlbW90ZVBCLmNvbnRlbnQudHJpbSgpID09PSBub3JtYWxpemVkQ29udGVudCkge1xuXHRcdFx0XHRcdFx0XHRyZW1vdGVDb250ZW50QmxvY2sgPSByZW1vdGVQQjtcblx0XHRcdFx0XHRcdFx0aWYgKCFsb2NhbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0XHRcdGxvY2FsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5maW5kQ29udGVudEJsb2NrQnlJZChjb250ZW50c0ZvbGRlclBhdGgsIHJlbW90ZVBCLmlkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBzdGF0dXMgPSBjb21wYXJlQ29udGVudEJsb2NrcyhwYXJhZ3JhcGgsIGxvY2FsQ29udGVudEJsb2NrLCByZW1vdGVDb250ZW50QmxvY2spO1xuXG5cdFx0XHRcdGxldCBmaW5hbENvbnRlbnRCbG9jazogQ29udGVudEJsb2NrO1xuXG5cdFx0XHRcdHN3aXRjaCAoc3RhdHVzKSB7XG5cdFx0XHRcdFx0Y2FzZSBcIm5ld1wiOiB7XG5cdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRCbG9jayh0ZW1wQ2hhcHRlciEuaWQsIHtcblx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBwcm9zZU9yZGVyTnVtKyssXG5cdFx0XHRcdFx0XHRcdGtpbmQ6IFwiZmluYWxcIixcblx0XHRcdFx0XHRcdFx0Y29udGVudDogcGFyYWdyYXBoLmNvbnRlbnQsXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0Ly8gQ3JlYXRlIGZpbGUgaW4gY29ycmVjdCB0eXBlIHN1YmZvbGRlclxuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoLCB1bmRlZmluZWQpO1xuXG5cdFx0XHRcdFx0XHQvLyBDcmVhdGUgcmVmZXJlbmNlIHRvIHNjZW5lIGFuZCBiZWF0XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QW5jaG9yKGZpbmFsQ29udGVudEJsb2NrLmlkLCBcInNjZW5lXCIsIHNjZW5lSWQpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJiZWF0XCIsIGJlYXRJZCk7XG5cblx0XHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGZpbmFsQ29udGVudEJsb2NrKS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRcdHVwZGF0ZWRTZWN0aW9ucy5wdXNoKGBbWyR7bGlua05hbWV9fCR7cGFyYWdyYXBoLmNvbnRlbnR9XV1gKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhc2UgXCJ1bmNoYW5nZWRcIjoge1xuXHRcdFx0XHRcdFx0aWYgKCFsb2NhbENvbnRlbnRCbG9jayAmJiByZW1vdGVDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSByZW1vdGVDb250ZW50QmxvY2s7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoLCB1bmRlZmluZWQpO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoZmluYWxDb250ZW50QmxvY2spLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lfXwke3JlbW90ZUNvbnRlbnRCbG9jay5jb250ZW50fV1dYCk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGxvY2FsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gbG9jYWxDb250ZW50QmxvY2s7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGZpbmFsQ29udGVudEJsb2NrKS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtsaW5rTmFtZX18JHtwYXJhZ3JhcGguY29udGVudH1dXWApO1xuXHRcdFx0XHRcdFx0XHRwcm9zZU9yZGVyTnVtKys7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRwcm9zZU9yZGVyTnVtKys7XG5cdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y2FzZSBcImxvY2FsX21vZGlmaWVkXCI6IHtcblx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQ29udGVudEJsb2NrKGxvY2FsQ29udGVudEJsb2NrIS5pZCwge1xuXHRcdFx0XHRcdFx0XHRjb250ZW50OiBwYXJhZ3JhcGguY29udGVudCxcblx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBwcm9zZU9yZGVyTnVtKyssXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoLCB1bmRlZmluZWQpO1xuXG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShmaW5hbENvbnRlbnRCbG9jaykucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lfXwke3BhcmFncmFwaC5jb250ZW50fV1dYCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwicmVtb3RlX21vZGlmaWVkXCI6IHtcblx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gcmVtb3RlQ29udGVudEJsb2NrITtcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblx0XHRcdFx0XHRcdHByb3NlT3JkZXJOdW0rKztcblxuXHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoZmluYWxDb250ZW50QmxvY2spLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtsaW5rTmFtZX18JHtyZW1vdGVDb250ZW50QmxvY2shLmNvbnRlbnR9XV1gKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhc2UgXCJjb25mbGljdFwiOiB7XG5cdFx0XHRcdFx0XHRjb25zdCByZXNvbHV0aW9uID0gYXdhaXQgdGhpcy5yZXNvbHZlQ29uZmxpY3QobG9jYWxDb250ZW50QmxvY2shLCByZW1vdGVDb250ZW50QmxvY2shKTtcblxuXHRcdFx0XHRcdFx0bGV0IHJlc29sdmVkQ29udGVudDogc3RyaW5nO1xuXHRcdFx0XHRcdFx0aWYgKHJlc29sdXRpb24ucmVzb2x1dGlvbiA9PT0gXCJsb2NhbFwiKSB7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmVkQ29udGVudCA9IHBhcmFncmFwaC5jb250ZW50O1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChyZXNvbHV0aW9uLnJlc29sdXRpb24gPT09IFwicmVtb3RlXCIpIHtcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZWRDb250ZW50ID0gcmVtb3RlQ29udGVudEJsb2NrIS5jb250ZW50O1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZWRDb250ZW50ID0gcmVzb2x1dGlvbi5tZXJnZWRDb250ZW50IHx8IHBhcmFncmFwaC5jb250ZW50O1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnVwZGF0ZUNvbnRlbnRCbG9jayhsb2NhbENvbnRlbnRCbG9jayEuaWQsIHtcblx0XHRcdFx0XHRcdFx0Y29udGVudDogcmVzb2x2ZWRDb250ZW50LFxuXHRcdFx0XHRcdFx0XHRvcmRlcl9udW06IHByb3NlT3JkZXJOdW0rKyxcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQ29udGVudEJsb2NrRmlsZShmaW5hbENvbnRlbnRCbG9jaywgZmlsZVBhdGgsIHVuZGVmaW5lZCk7XG5cblx0XHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGZpbmFsQ29udGVudEJsb2NrKS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRcdHVwZGF0ZWRTZWN0aW9ucy5wdXNoKGBbWyR7bGlua05hbWV9fCR7cmVzb2x2ZWRDb250ZW50fV1dYCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBVcGRhdGUgYmVhdCBmaWxlIHdpdGggbGlua3MgaWYgdGhlcmUgYXJlIHVwZGF0ZWQgc2VjdGlvbnMgKG1vcmUgdGhhbiBqdXN0IHRoZSBoZWFkZXIpXG5cdFx0aWYgKHVwZGF0ZWRTZWN0aW9ucy5sZW5ndGggPiAxKSB7XG5cdFx0XHQvLyBGaW5kIHRoZSBpbnNlcnRpb24gcG9pbnQgaW4gdGhlIGJlYXQgZmlsZSAoYWZ0ZXIgIyBCZWF0IGhlYWRlciBhbmQgaW50ZW50L291dGNvbWUpXG5cdFx0XHRjb25zdCBmcm9udG1hdHRlck1hdGNoID0gYmVhdENvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcblx0XHRcdGNvbnN0IGZyb250bWF0dGVyRW5kID0gZnJvbnRtYXR0ZXJNYXRjaCA/IGZyb250bWF0dGVyTWF0Y2hbMF0ubGVuZ3RoIDogMDtcblx0XHRcdGNvbnN0IGFmdGVyRnJvbnRtYXR0ZXIgPSBiZWF0Q29udGVudC5zdWJzdHJpbmcoZnJvbnRtYXR0ZXJFbmQpLnRyaW0oKTtcblx0XHRcdFxuXHRcdFx0Ly8gRmluZCB0aGUgIyMgQmVhdDogc2VjdGlvbiB0byByZXBsYWNlIGl0XG5cdFx0XHRjb25zdCBiZWF0U2VjdGlvbk1hdGNoID0gYWZ0ZXJGcm9udG1hdHRlci5tYXRjaCgvIyNcXHMrQmVhdDpcXHMqLitbXFxzXFxTXSovKTtcblx0XHRcdFxuXHRcdFx0aWYgKGJlYXRTZWN0aW9uTWF0Y2gpIHtcblx0XHRcdFx0Ly8gUmVwbGFjZSB0aGUgZW50aXJlICMjIEJlYXQgc2VjdGlvblxuXHRcdFx0XHRjb25zdCBiZWZvcmVCZWF0U2VjdGlvbiA9IGJlYXRDb250ZW50LnN1YnN0cmluZygwLCBmcm9udG1hdHRlckVuZCArIGFmdGVyRnJvbnRtYXR0ZXIuaW5kZXhPZihiZWF0U2VjdGlvbk1hdGNoWzBdKSk7XG5cdFx0XHRcdGNvbnN0IHVwZGF0ZWRDb250ZW50ID0gYCR7YmVmb3JlQmVhdFNlY3Rpb24udHJpbUVuZCgpfVxcblxcbiR7dXBkYXRlZFNlY3Rpb25zLmpvaW4oXCJcXG5cXG5cIil9XFxuYDtcblx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLm1vZGlmeShmaWxlLCB1cGRhdGVkQ29udGVudCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBBcHBlbmQgIyMgQmVhdCBzZWN0aW9uXG5cdFx0XHRcdGNvbnN0IHVwZGF0ZWRDb250ZW50ID0gYCR7YmVhdENvbnRlbnQudHJpbUVuZCgpfVxcblxcbiR7dXBkYXRlZFNlY3Rpb25zLmpvaW4oXCJcXG5cXG5cIil9XFxuYDtcblx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLm1vZGlmeShmaWxlLCB1cGRhdGVkQ29udGVudCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gUHJvY2VzcyB0aGUgXCIjIyBPcnBoYW4gU2NlbmVzXCIgbGlzdCBhbmQgdXBkYXRlIG9ycGhhbiBzY2VuZXMgb3JkZXJcblx0cHJpdmF0ZSBhc3luYyBwcm9jZXNzT3JwaGFuU2NlbmVzTGlzdChcblx0XHRsaXN0OiB7IGl0ZW1zOiBQYXJzZWRTY2VuZUJlYXRMaXN0SXRlbVtdIH0sXG5cdFx0c3RvcnlJZDogc3RyaW5nXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdC8vIEdldCBhbGwgc2NlbmVzIGZvciB0aGlzIHN0b3J5XG5cdFx0Y29uc3QgYWxsU2NlbmVzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0U2NlbmVzQnlTdG9yeShzdG9yeUlkKTtcblx0XHRjb25zdCBzY2VuZU1hcCA9IG5ldyBNYXA8c3RyaW5nLCBTY2VuZT4oKTsgLy8gTWFwIGJ5IGxpbmsgbmFtZVxuXHRcdGNvbnN0IHNjZW5lSWRNYXAgPSBuZXcgTWFwPHN0cmluZywgU2NlbmU+KCk7IC8vIE1hcCBieSBJRFxuXHRcdFxuXHRcdC8vIEZpbHRlciB0byBvbmx5IG9ycGhhbiBzY2VuZXMgKHdpdGhvdXQgY2hhcHRlcl9pZClcblx0XHRjb25zdCBvcnBoYW5TY2VuZXMgPSBhbGxTY2VuZXMuZmlsdGVyKHMgPT4gIXMuY2hhcHRlcl9pZCk7XG5cdFx0XG5cdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBvcnBoYW5TY2VuZXMpIHtcblx0XHRcdGNvbnN0IGZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZVNjZW5lRmlsZU5hbWUoc2NlbmUpO1xuXHRcdFx0Y29uc3QgbGlua05hbWUgPSBmaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdHNjZW5lTWFwLnNldChsaW5rTmFtZSwgc2NlbmUpO1xuXHRcdFx0c2NlbmVJZE1hcC5zZXQoc2NlbmUuaWQsIHNjZW5lKTtcblx0XHR9XG5cblx0XHQvLyBHZXQgYWxsIGJlYXRzIGZvciBvcnBoYW4gc2NlbmVzXG5cdFx0Y29uc3QgYmVhdE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBCZWF0PigpOyAvLyBNYXAgYnkgbGluayBuYW1lXG5cdFx0Y29uc3QgYmVhdElkTWFwID0gbmV3IE1hcDxzdHJpbmcsIEJlYXQ+KCk7IC8vIE1hcCBieSBJRFxuXHRcdGZvciAoY29uc3Qgc2NlbmUgb2Ygb3JwaGFuU2NlbmVzKSB7XG5cdFx0XHRjb25zdCBiZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzKHNjZW5lLmlkKTtcblx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cykge1xuXHRcdFx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdGJlYXRNYXAuc2V0KGxpbmtOYW1lLCBiZWF0KTtcblx0XHRcdFx0YmVhdElkTWFwLnNldChiZWF0LmlkLCBiZWF0KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRsZXQgY3VycmVudFNjZW5lOiBTY2VuZSB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBzY2VuZU9yZGVyTnVtID0gMTsgLy8gU3RhcnQgZnJvbSAxLCB3aWxsIGluY3JlbWVudCBhcyB3ZSBwcm9jZXNzXG5cdFx0Y29uc3QgYmVhdE9yZGVyTnVtcyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7IC8vIFRyYWNrIG9yZGVyX251bSBwZXIgc2NlbmVcblxuXHRcdC8vIFByb2Nlc3MgbGlzdCBpdGVtcyAtIG9yZGVyIG1hdHRlcnMhXG5cdFx0Zm9yIChjb25zdCBpdGVtIG9mIGxpc3QuaXRlbXMpIHtcblx0XHRcdGlmIChpdGVtLnR5cGUgPT09IFwic2NlbmVcIikge1xuXHRcdFx0XHQvLyBQYXJzZSBzY2VuZSBkaXNwbGF5IHRleHRcblx0XHRcdFx0Ly8gQ2FuIGJlOiBcIlNjZW5lIE46IGdvYWwgLSB0aW1lUmVmXCIsIFwiZ29hbCAtIHRpbWVSZWZcIiwgb3IganVzdCBcImdvYWxcIlxuXHRcdFx0XHRsZXQgZ29hbDogc3RyaW5nO1xuXHRcdFx0XHRsZXQgdGltZVJlZjogc3RyaW5nID0gXCJcIjtcblxuXHRcdFx0XHRjb25zdCBzY2VuZU1hdGNoID0gaXRlbS5kaXNwbGF5VGV4dC5tYXRjaCgvU2NlbmVcXHMrXFxkKzpcXHMqKC4rKS8pO1xuXHRcdFx0XHRpZiAoc2NlbmVNYXRjaCkge1xuXHRcdFx0XHRcdC8vIEZvcm1hdDogXCJTY2VuZSBOOiBnb2FsIC0gdGltZVJlZlwiIG9yIFwiU2NlbmUgTjogZ29hbFwiXG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVUZXh0ID0gc2NlbmVNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRcdFx0Y29uc3QgcGFydHMgPSBzY2VuZVRleHQuc3BsaXQoL1xccyotXFxzKi8pO1xuXHRcdFx0XHRcdGdvYWwgPSBwYXJ0c1swXS50cmltKCk7XG5cdFx0XHRcdFx0dGltZVJlZiA9IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0gXCIpLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gRm9ybWF0OiBcImdvYWwgLSB0aW1lUmVmXCIgb3IganVzdCBcImdvYWxcIlxuXHRcdFx0XHRcdGNvbnN0IHBhcnRzID0gaXRlbS5kaXNwbGF5VGV4dC5zcGxpdCgvXFxzKi1cXHMqLyk7XG5cdFx0XHRcdFx0Z29hbCA9IHBhcnRzWzBdLnRyaW0oKTtcblx0XHRcdFx0XHR0aW1lUmVmID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLSBcIikudHJpbSgpIDogXCJcIjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChpdGVtLmxpbmtOYW1lKSB7XG5cdFx0XHRcdFx0Ly8gU2NlbmUgZXhpc3RzIC0gZmluZCBpdFxuXHRcdFx0XHRcdGN1cnJlbnRTY2VuZSA9IHNjZW5lTWFwLmdldChpdGVtLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdGlmICghY3VycmVudFNjZW5lKSB7XG5cdFx0XHRcdFx0XHQvLyBUcnkgdG8gZmluZCBieSBJRCBpZiBsaW5rTmFtZSBpcyBhY3R1YWxseSBhbiBJRFxuXHRcdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gc2NlbmVJZE1hcC5nZXQoaXRlbS5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKGN1cnJlbnRTY2VuZSkge1xuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgb3JkZXJfbnVtIG9yIGNvbnRlbnQgbmVlZHMgdG8gYmUgdXBkYXRlZFxuXHRcdFx0XHRcdFx0Y29uc3QgbmVlZHNPcmRlclVwZGF0ZSA9IGN1cnJlbnRTY2VuZS5vcmRlcl9udW0gIT09IHNjZW5lT3JkZXJOdW07XG5cdFx0XHRcdFx0XHRjb25zdCBuZWVkc0NvbnRlbnRVcGRhdGUgPSBnb2FsICE9PSBjdXJyZW50U2NlbmUuZ29hbCB8fCB0aW1lUmVmICE9PSBjdXJyZW50U2NlbmUudGltZV9yZWY7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGlmIChuZWVkc09yZGVyVXBkYXRlIHx8IG5lZWRzQ29udGVudFVwZGF0ZSkge1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVTY2VuZShjdXJyZW50U2NlbmUuaWQsIHtcblx0XHRcdFx0XHRcdFx0XHRnb2FsLFxuXHRcdFx0XHRcdFx0XHRcdHRpbWVfcmVmOiB0aW1lUmVmLFxuXHRcdFx0XHRcdFx0XHRcdG9yZGVyX251bTogc2NlbmVPcmRlck51bSxcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vIEluaXRpYWxpemUgYmVhdCBvcmRlciBmb3IgdGhpcyBzY2VuZVxuXHRcdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdCZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzKGN1cnJlbnRTY2VuZS5pZCk7XG5cdFx0XHRcdFx0XHRpZiAoZXhpc3RpbmdCZWF0cy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRcdFx0YmVhdE9yZGVyTnVtcy5zZXQoY3VycmVudFNjZW5lLmlkLCAxKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1heE9yZGVyTnVtID0gTWF0aC5tYXgoLi4uZXhpc3RpbmdCZWF0cy5tYXAoYiA9PiBiLm9yZGVyX251bSkpO1xuXHRcdFx0XHRcdFx0XHRiZWF0T3JkZXJOdW1zLnNldChjdXJyZW50U2NlbmUuaWQsIG1heE9yZGVyTnVtICsgMSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIENyZWF0ZSBuZXcgb3JwaGFuIHNjZW5lXG5cdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlU2NlbmUoe1xuXHRcdFx0XHRcdFx0c3RvcnlfaWQ6IHN0b3J5SWQsXG5cdFx0XHRcdFx0XHRjaGFwdGVyX2lkOiBudWxsLCAvLyBPcnBoYW4gc2NlbmVcblx0XHRcdFx0XHRcdG9yZGVyX251bTogc2NlbmVPcmRlck51bSxcblx0XHRcdFx0XHRcdGdvYWwsXG5cdFx0XHRcdFx0XHR0aW1lX3JlZjogdGltZVJlZixcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBVcGRhdGUgbWFwc1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShjdXJyZW50U2NlbmUpO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lTGlua05hbWUgPSBzY2VuZUZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdHNjZW5lTWFwLnNldChzY2VuZUxpbmtOYW1lLCBjdXJyZW50U2NlbmUpO1xuXHRcdFx0XHRcdHNjZW5lSWRNYXAuc2V0KGN1cnJlbnRTY2VuZS5pZCwgY3VycmVudFNjZW5lKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBJbml0aWFsaXplIGJlYXQgb3JkZXIgZm9yIG5ldyBzY2VuZSAoc3RhcnRzIGF0IDEpXG5cdFx0XHRcdFx0YmVhdE9yZGVyTnVtcy5zZXQoY3VycmVudFNjZW5lLmlkLCAxKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0c2NlbmVPcmRlck51bSsrO1xuXHRcdFx0fSBlbHNlIGlmIChpdGVtLnR5cGUgPT09IFwiYmVhdFwiICYmIGN1cnJlbnRTY2VuZSkge1xuXHRcdFx0XHQvLyBQYXJzZSBiZWF0IGRpc3BsYXkgdGV4dFxuXHRcdFx0XHQvLyBDYW4gYmU6IFwiQmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZVwiLCBcImludGVudCAtPiBvdXRjb21lXCIsIG9yIGp1c3QgXCJpbnRlbnRcIlxuXHRcdFx0XHRsZXQgaW50ZW50OiBzdHJpbmc7XG5cdFx0XHRcdGxldCBvdXRjb21lOiBzdHJpbmcgPSBcIlwiO1xuXG5cdFx0XHRcdGNvbnN0IGJlYXRNYXRjaCA9IGl0ZW0uZGlzcGxheVRleHQubWF0Y2goL0JlYXRcXHMrXFxkKzpcXHMqKC4rKS8pO1xuXHRcdFx0XHRpZiAoYmVhdE1hdGNoKSB7XG5cdFx0XHRcdFx0Ly8gRm9ybWF0OiBcIkJlYXQgTjogaW50ZW50IC0+IG91dGNvbWVcIiBvciBcIkJlYXQgTjogaW50ZW50XCJcblx0XHRcdFx0XHRjb25zdCBiZWF0VGV4dCA9IGJlYXRNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRcdFx0Y29uc3QgcGFydHMgPSBiZWF0VGV4dC5zcGxpdCgvXFxzKi0+XFxzKi8pO1xuXHRcdFx0XHRcdGludGVudCA9IHBhcnRzWzBdLnRyaW0oKTtcblx0XHRcdFx0XHRvdXRjb21lID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLT4gXCIpLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gRm9ybWF0OiBcImludGVudCAtPiBvdXRjb21lXCIgb3IganVzdCBcImludGVudFwiXG5cdFx0XHRcdFx0Y29uc3QgcGFydHMgPSBpdGVtLmRpc3BsYXlUZXh0LnNwbGl0KC9cXHMqLT5cXHMqLyk7XG5cdFx0XHRcdFx0aW50ZW50ID0gcGFydHNbMF0udHJpbSgpO1xuXHRcdFx0XHRcdG91dGNvbWUgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbihcIiAtPiBcIikudHJpbSgpIDogXCJcIjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEdldCBjdXJyZW50IGJlYXQgb3JkZXJfbnVtIGZvciB0aGlzIHNjZW5lXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRCZWF0T3JkZXJOdW0gPSBiZWF0T3JkZXJOdW1zLmdldChjdXJyZW50U2NlbmUuaWQpIHx8IDE7XG5cblx0XHRcdFx0aWYgKGl0ZW0ubGlua05hbWUpIHtcblx0XHRcdFx0XHQvLyBCZWF0IGV4aXN0cyAtIGZpbmQgaXRcblx0XHRcdFx0XHRsZXQgY3VycmVudEJlYXQgPSBiZWF0TWFwLmdldChpdGVtLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdGlmICghY3VycmVudEJlYXQpIHtcblx0XHRcdFx0XHRcdC8vIFRyeSB0byBmaW5kIGJ5IElEIGlmIGxpbmtOYW1lIGlzIGFjdHVhbGx5IGFuIElEXG5cdFx0XHRcdFx0XHRjdXJyZW50QmVhdCA9IGJlYXRJZE1hcC5nZXQoaXRlbS5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKGN1cnJlbnRCZWF0KSB7XG5cdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBvcmRlcl9udW0gb3IgY29udGVudCBuZWVkcyB0byBiZSB1cGRhdGVkXG5cdFx0XHRcdFx0XHRjb25zdCBuZWVkc09yZGVyVXBkYXRlID0gY3VycmVudEJlYXQub3JkZXJfbnVtICE9PSBjdXJyZW50QmVhdE9yZGVyTnVtO1xuXHRcdFx0XHRcdFx0Y29uc3QgbmVlZHNDb250ZW50VXBkYXRlID0gaW50ZW50ICE9PSBjdXJyZW50QmVhdC5pbnRlbnQgfHwgb3V0Y29tZSAhPT0gY3VycmVudEJlYXQub3V0Y29tZTtcblx0XHRcdFx0XHRcdGNvbnN0IG5lZWRzU2NlbmVVcGRhdGUgPSBjdXJyZW50QmVhdC5zY2VuZV9pZCAhPT0gY3VycmVudFNjZW5lLmlkO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRpZiAobmVlZHNPcmRlclVwZGF0ZSB8fCBuZWVkc0NvbnRlbnRVcGRhdGUgfHwgbmVlZHNTY2VuZVVwZGF0ZSkge1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50QmVhdCA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnVwZGF0ZUJlYXQoY3VycmVudEJlYXQuaWQsIHtcblx0XHRcdFx0XHRcdFx0XHRpbnRlbnQsXG5cdFx0XHRcdFx0XHRcdFx0b3V0Y29tZSxcblx0XHRcdFx0XHRcdFx0XHRvcmRlcl9udW06IGN1cnJlbnRCZWF0T3JkZXJOdW0sXG5cdFx0XHRcdFx0XHRcdFx0c2NlbmVfaWQ6IGN1cnJlbnRTY2VuZS5pZCxcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIENyZWF0ZSBuZXcgYmVhdFxuXHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUJlYXQoe1xuXHRcdFx0XHRcdFx0c2NlbmVfaWQ6IGN1cnJlbnRTY2VuZS5pZCxcblx0XHRcdFx0XHRcdG9yZGVyX251bTogY3VycmVudEJlYXRPcmRlck51bSxcblx0XHRcdFx0XHRcdHR5cGU6IFwic2V0dXBcIiwgLy8gRGVmYXVsdCB0eXBlXG5cdFx0XHRcdFx0XHRpbnRlbnQsXG5cdFx0XHRcdFx0XHRvdXRjb21lLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRiZWF0T3JkZXJOdW1zLnNldChjdXJyZW50U2NlbmUuaWQsIGN1cnJlbnRCZWF0T3JkZXJOdW0gKyAxKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBQcm9jZXNzIHRoZSBcIiMjIE9ycGhhbiBCZWF0c1wiIGxpc3QgYW5kIHVwZGF0ZSBvcnBoYW4gYmVhdHMgb3JkZXJcblx0cHJpdmF0ZSBhc3luYyBwcm9jZXNzT3JwaGFuQmVhdHNMaXN0KFxuXHRcdGxpc3Q6IHsgaXRlbXM6IFBhcnNlZEJlYXRMaXN0SXRlbVtdIH0sXG5cdFx0c3RvcnlJZDogc3RyaW5nXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdC8vIEdldCBhbGwgYmVhdHMgZm9yIHRoaXMgc3Rvcnlcblx0XHRjb25zdCBhbGxCZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzQnlTdG9yeShzdG9yeUlkKTtcblx0XHRjb25zdCBhbGxTY2VuZXMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRTY2VuZXNCeVN0b3J5KHN0b3J5SWQpO1xuXHRcdGNvbnN0IHNjZW5lSWRTZXQgPSBuZXcgU2V0KGFsbFNjZW5lcy5tYXAocyA9PiBzLmlkKSk7XG5cdFx0XG5cdFx0Ly8gRmlsdGVyIHRvIG9ubHkgb3JwaGFuIGJlYXRzICh3aXRob3V0IHNjZW5lX2lkIG9yIHdpdGggaW52YWxpZCBzY2VuZV9pZClcblx0XHRjb25zdCBvcnBoYW5CZWF0cyA9IGFsbEJlYXRzLmZpbHRlcihiID0+ICFiLnNjZW5lX2lkIHx8ICFzY2VuZUlkU2V0LmhhcyhiLnNjZW5lX2lkKSk7XG5cdFx0XG5cdFx0Y29uc3QgYmVhdE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBCZWF0PigpOyAvLyBNYXAgYnkgbGluayBuYW1lXG5cdFx0Y29uc3QgYmVhdElkTWFwID0gbmV3IE1hcDxzdHJpbmcsIEJlYXQ+KCk7IC8vIE1hcCBieSBJRFxuXHRcdFxuXHRcdGZvciAoY29uc3QgYmVhdCBvZiBvcnBoYW5CZWF0cykge1xuXHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0Y29uc3QgbGlua05hbWUgPSBmaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdGJlYXRNYXAuc2V0KGxpbmtOYW1lLCBiZWF0KTtcblx0XHRcdGJlYXRJZE1hcC5zZXQoYmVhdC5pZCwgYmVhdCk7XG5cdFx0fVxuXG5cdFx0bGV0IGJlYXRPcmRlck51bSA9IDE7IC8vIFN0YXJ0IGZyb20gMSwgd2lsbCBpbmNyZW1lbnQgYXMgd2UgcHJvY2Vzc1xuXG5cdFx0Ly8gUHJvY2VzcyBsaXN0IGl0ZW1zIC0gb3JkZXIgbWF0dGVycyFcblx0XHRmb3IgKGNvbnN0IGl0ZW0gb2YgbGlzdC5pdGVtcykge1xuXHRcdFx0Ly8gUGFyc2UgYmVhdCBkaXNwbGF5IHRleHRcblx0XHRcdC8vIENhbiBiZTogXCJCZWF0IE46IGludGVudCAtPiBvdXRjb21lXCIsIFwiaW50ZW50IC0+IG91dGNvbWVcIiwgb3IganVzdCBcImludGVudFwiXG5cdFx0XHRsZXQgaW50ZW50OiBzdHJpbmc7XG5cdFx0XHRsZXQgb3V0Y29tZTogc3RyaW5nID0gXCJcIjtcblxuXHRcdFx0Y29uc3QgYmVhdE1hdGNoID0gaXRlbS5kaXNwbGF5VGV4dC5tYXRjaCgvQmVhdFxccytcXGQrOlxccyooLispLyk7XG5cdFx0XHRpZiAoYmVhdE1hdGNoKSB7XG5cdFx0XHRcdC8vIEZvcm1hdDogXCJCZWF0IE46IGludGVudCAtPiBvdXRjb21lXCIgb3IgXCJCZWF0IE46IGludGVudFwiXG5cdFx0XHRcdGNvbnN0IGJlYXRUZXh0ID0gYmVhdE1hdGNoWzFdLnRyaW0oKTtcblx0XHRcdFx0Y29uc3QgcGFydHMgPSBiZWF0VGV4dC5zcGxpdCgvXFxzKi0+XFxzKi8pO1xuXHRcdFx0XHRpbnRlbnQgPSBwYXJ0c1swXS50cmltKCk7XG5cdFx0XHRcdG91dGNvbWUgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbihcIiAtPiBcIikudHJpbSgpIDogXCJcIjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEZvcm1hdDogXCJpbnRlbnQgLT4gb3V0Y29tZVwiIG9yIGp1c3QgXCJpbnRlbnRcIlxuXHRcdFx0XHRjb25zdCBwYXJ0cyA9IGl0ZW0uZGlzcGxheVRleHQuc3BsaXQoL1xccyotPlxccyovKTtcblx0XHRcdFx0aW50ZW50ID0gcGFydHNbMF0udHJpbSgpO1xuXHRcdFx0XHRvdXRjb21lID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLT4gXCIpLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpdGVtLmxpbmtOYW1lKSB7XG5cdFx0XHRcdC8vIEJlYXQgZXhpc3RzIC0gZmluZCBpdFxuXHRcdFx0XHRsZXQgY3VycmVudEJlYXQgPSBiZWF0TWFwLmdldChpdGVtLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRpZiAoIWN1cnJlbnRCZWF0KSB7XG5cdFx0XHRcdFx0Ly8gVHJ5IHRvIGZpbmQgYnkgSUQgaWYgbGlua05hbWUgaXMgYWN0dWFsbHkgYW4gSURcblx0XHRcdFx0XHRjdXJyZW50QmVhdCA9IGJlYXRJZE1hcC5nZXQoaXRlbS5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0aWYgKGN1cnJlbnRCZWF0KSB7XG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgb3JkZXJfbnVtIG9yIGNvbnRlbnQgbmVlZHMgdG8gYmUgdXBkYXRlZFxuXHRcdFx0XHRcdGNvbnN0IG5lZWRzT3JkZXJVcGRhdGUgPSBjdXJyZW50QmVhdC5vcmRlcl9udW0gIT09IGJlYXRPcmRlck51bTtcblx0XHRcdFx0XHRjb25zdCBuZWVkc0NvbnRlbnRVcGRhdGUgPSBpbnRlbnQgIT09IGN1cnJlbnRCZWF0LmludGVudCB8fCBvdXRjb21lICE9PSBjdXJyZW50QmVhdC5vdXRjb21lO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChuZWVkc09yZGVyVXBkYXRlIHx8IG5lZWRzQ29udGVudFVwZGF0ZSkge1xuXHRcdFx0XHRcdFx0Y3VycmVudEJlYXQgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVCZWF0KGN1cnJlbnRCZWF0LmlkLCB7XG5cdFx0XHRcdFx0XHRcdGludGVudCxcblx0XHRcdFx0XHRcdFx0b3V0Y29tZSxcblx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBiZWF0T3JkZXJOdW0sXG5cdFx0XHRcdFx0XHRcdC8vIEtlZXAgc2NlbmVfaWQgYXMgbnVsbCBvciBpbnZhbGlkIChvcnBoYW4pIC0gZG9uJ3QgdXBkYXRlIGl0XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIENyZWF0ZSBuZXcgb3JwaGFuIGJlYXRcblx0XHRcdFx0Ly8gVGhlIEFQSSByZXF1aXJlcyBzY2VuZV9pZCwgc28gd2UgbmVlZCB0byBmaW5kIG9yIGNyZWF0ZSBhbiBvcnBoYW4gc2NlbmUgZm9yIG9ycGhhbiBiZWF0c1xuXHRcdFx0XHQvLyBGaXJzdCwgdHJ5IHRvIGZpbmQgYW4gZXhpc3Rpbmcgb3JwaGFuIHNjZW5lIHNwZWNpZmljYWxseSBmb3Igb3JwaGFuIGJlYXRzXG5cdFx0XHRcdGNvbnN0IGFsbFNjZW5lcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFNjZW5lc0J5U3Rvcnkoc3RvcnlJZCk7XG5cdFx0XHRcdGxldCBvcnBoYW5CZWF0U2NlbmUgPSBhbGxTY2VuZXMuZmluZChzID0+ICFzLmNoYXB0ZXJfaWQgJiYgcy5nb2FsLnN0YXJ0c1dpdGgoXCJPcnBoYW4gQmVhdHMgQ29udGFpbmVyXCIpKTtcblx0XHRcdFx0XG5cdFx0XHRcdGlmICghb3JwaGFuQmVhdFNjZW5lKSB7XG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIGEgc3BlY2lhbCBvcnBoYW4gc2NlbmUgZm9yIG9ycGhhbiBiZWF0c1xuXHRcdFx0XHRcdG9ycGhhbkJlYXRTY2VuZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZVNjZW5lKHtcblx0XHRcdFx0XHRcdHN0b3J5X2lkOiBzdG9yeUlkLFxuXHRcdFx0XHRcdFx0Y2hhcHRlcl9pZDogbnVsbCxcblx0XHRcdFx0XHRcdG9yZGVyX251bTogOTk5OSwgLy8gSGlnaCBudW1iZXIgdG8ga2VlcCBpdCBhdCB0aGUgZW5kXG5cdFx0XHRcdFx0XHRnb2FsOiBcIk9ycGhhbiBCZWF0cyBDb250YWluZXJcIixcblx0XHRcdFx0XHRcdHRpbWVfcmVmOiBcIlwiLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVCZWF0KHtcblx0XHRcdFx0XHRzY2VuZV9pZDogb3JwaGFuQmVhdFNjZW5lLmlkLFxuXHRcdFx0XHRcdG9yZGVyX251bTogYmVhdE9yZGVyTnVtLFxuXHRcdFx0XHRcdHR5cGU6IFwic2V0dXBcIiwgLy8gRGVmYXVsdCB0eXBlXG5cdFx0XHRcdFx0aW50ZW50LFxuXHRcdFx0XHRcdG91dGNvbWUsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRiZWF0T3JkZXJOdW0rKztcblx0XHR9XG5cdH1cblxuXHQvLyBQcm9jZXNzIHRoZSBcIiMjIFNjZW5lcyAmIEJlYXRzXCIgbGlzdCBhbmQgY3JlYXRlL3VwZGF0ZS9kZWxldGUgc2NlbmVzIGFuZCBiZWF0c1xuXHRwcml2YXRlIGFzeW5jIHByb2Nlc3NTY2VuZUJlYXRMaXN0KFxuXHRcdGxpc3Q6IHsgaXRlbXM6IFBhcnNlZFNjZW5lQmVhdExpc3RJdGVtW10gfSxcblx0XHRjaGFwdGVySWQ6IHN0cmluZyxcblx0XHRzdG9yeUlkOiBzdHJpbmdcblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Ly8gR2V0IGV4aXN0aW5nIHNjZW5lcyBhbmQgYmVhdHMgZm9yIHRoaXMgY2hhcHRlclxuXHRcdGNvbnN0IGV4aXN0aW5nU2NlbmVzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0U2NlbmVzKGNoYXB0ZXJJZCk7XG5cdFx0Y29uc3Qgc2NlbmVNYXAgPSBuZXcgTWFwPHN0cmluZywgU2NlbmU+KCk7IC8vIE1hcCBieSBsaW5rIG5hbWVcblx0XHRjb25zdCBzY2VuZUlkTWFwID0gbmV3IE1hcDxzdHJpbmcsIFNjZW5lPigpOyAvLyBNYXAgYnkgSURcblx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIGV4aXN0aW5nU2NlbmVzKSB7XG5cdFx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lKTtcblx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRzY2VuZU1hcC5zZXQobGlua05hbWUsIHNjZW5lKTtcblx0XHRcdHNjZW5lSWRNYXAuc2V0KHNjZW5lLmlkLCBzY2VuZSk7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IGFsbCBiZWF0cyBmb3Igc2NlbmVzIGluIHRoaXMgY2hhcHRlclxuXHRcdGNvbnN0IGJlYXRNYXAgPSBuZXcgTWFwPHN0cmluZywgQmVhdD4oKTsgLy8gTWFwIGJ5IGxpbmsgbmFtZVxuXHRcdGNvbnN0IGJlYXRJZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBCZWF0PigpOyAvLyBNYXAgYnkgSURcblx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIGV4aXN0aW5nU2NlbmVzKSB7XG5cdFx0XHRjb25zdCBiZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzKHNjZW5lLmlkKTtcblx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cykge1xuXHRcdFx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdGJlYXRNYXAuc2V0KGxpbmtOYW1lLCBiZWF0KTtcblx0XHRcdFx0YmVhdElkTWFwLnNldChiZWF0LmlkLCBiZWF0KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRsZXQgY3VycmVudFNjZW5lOiBTY2VuZSB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBzY2VuZU9yZGVyTnVtID0gMTsgLy8gU3RhcnQgZnJvbSAxLCB3aWxsIGluY3JlbWVudCBhcyB3ZSBwcm9jZXNzXG5cdFx0Y29uc3QgYmVhdE9yZGVyTnVtcyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7IC8vIFRyYWNrIG9yZGVyX251bSBwZXIgc2NlbmVcblxuXHRcdC8vIFByb2Nlc3MgbGlzdCBpdGVtcyAtIG9yZGVyIG1hdHRlcnMhXG5cdFx0Zm9yIChjb25zdCBpdGVtIG9mIGxpc3QuaXRlbXMpIHtcblx0XHRcdGlmIChpdGVtLnR5cGUgPT09IFwic2NlbmVcIikge1xuXHRcdFx0XHQvLyBSZXNldCBjdXJyZW50U2NlbmUgYmVmb3JlIHByb2Nlc3Npbmdcblx0XHRcdFx0Y3VycmVudFNjZW5lID0gbnVsbDtcblx0XHRcdFx0Ly8gUGFyc2Ugc2NlbmUgZGlzcGxheSB0ZXh0XG5cdFx0XHRcdC8vIENhbiBiZTogXCJTY2VuZSBOOiBnb2FsIC0gdGltZVJlZlwiLCBcImdvYWwgLSB0aW1lUmVmXCIsIG9yIGp1c3QgXCJnb2FsXCJcblx0XHRcdFx0bGV0IGdvYWw6IHN0cmluZztcblx0XHRcdFx0bGV0IHRpbWVSZWY6IHN0cmluZyA9IFwiXCI7XG5cblx0XHRcdFx0Y29uc3Qgc2NlbmVNYXRjaCA9IGl0ZW0uZGlzcGxheVRleHQubWF0Y2goL1NjZW5lXFxzK1xcZCs6XFxzKiguKykvKTtcblx0XHRcdFx0aWYgKHNjZW5lTWF0Y2gpIHtcblx0XHRcdFx0XHQvLyBGb3JtYXQ6IFwiU2NlbmUgTjogZ29hbCAtIHRpbWVSZWZcIiBvciBcIlNjZW5lIE46IGdvYWxcIlxuXHRcdFx0XHRcdGNvbnN0IHNjZW5lVGV4dCA9IHNjZW5lTWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0XHRcdGNvbnN0IHBhcnRzID0gc2NlbmVUZXh0LnNwbGl0KC9cXHMqLVxccyovKTtcblx0XHRcdFx0XHRnb2FsID0gcGFydHNbMF0udHJpbSgpO1xuXHRcdFx0XHRcdHRpbWVSZWYgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbihcIiAtIFwiKS50cmltKCkgOiBcIlwiO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIEZvcm1hdDogXCJnb2FsIC0gdGltZVJlZlwiIG9yIGp1c3QgXCJnb2FsXCJcblx0XHRcdFx0XHRjb25zdCBwYXJ0cyA9IGl0ZW0uZGlzcGxheVRleHQuc3BsaXQoL1xccyotXFxzKi8pO1xuXHRcdFx0XHRcdGdvYWwgPSBwYXJ0c1swXS50cmltKCk7XG5cdFx0XHRcdFx0dGltZVJlZiA9IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0gXCIpLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBSZXNldCBjdXJyZW50U2NlbmUgYmVmb3JlIHByb2Nlc3Npbmdcblx0XHRcdFx0Y3VycmVudFNjZW5lID0gbnVsbDtcblxuXHRcdFx0XHRpZiAoaXRlbS5saW5rTmFtZSkge1xuXHRcdFx0XHRcdC8vIFNjZW5lIGV4aXN0cyAtIGZpbmQgaXRcblx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBzY2VuZU1hcC5nZXQoaXRlbS5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0XHRpZiAoIWN1cnJlbnRTY2VuZSkge1xuXHRcdFx0XHRcdFx0Ly8gVHJ5IHRvIGZpbmQgYnkgSUQgaWYgbGlua05hbWUgaXMgYWN0dWFsbHkgYW4gSURcblx0XHRcdFx0XHRcdGN1cnJlbnRTY2VuZSA9IHNjZW5lSWRNYXAuZ2V0KGl0ZW0ubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIG9yZGVyX251bSBuZWVkcyB0byBiZSB1cGRhdGVkXG5cdFx0XHRcdFx0XHRjb25zdCBuZWVkc09yZGVyVXBkYXRlID0gY3VycmVudFNjZW5lLm9yZGVyX251bSAhPT0gc2NlbmVPcmRlck51bTtcblx0XHRcdFx0XHRcdGNvbnN0IG5lZWRzQ29udGVudFVwZGF0ZSA9IGdvYWwgIT09IGN1cnJlbnRTY2VuZS5nb2FsIHx8IHRpbWVSZWYgIT09IGN1cnJlbnRTY2VuZS50aW1lX3JlZjtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0aWYgKG5lZWRzT3JkZXJVcGRhdGUgfHwgbmVlZHNDb250ZW50VXBkYXRlKSB7XG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRTY2VuZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnVwZGF0ZVNjZW5lKGN1cnJlbnRTY2VuZS5pZCwge1xuXHRcdFx0XHRcdFx0XHRcdGdvYWwsXG5cdFx0XHRcdFx0XHRcdFx0dGltZV9yZWY6IHRpbWVSZWYsXG5cdFx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBzY2VuZU9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gSW5pdGlhbGl6ZSBiZWF0IG9yZGVyIGZvciB0aGlzIHNjZW5lIChpbXBvcnRhbnQgZm9yIGVtcHR5IHNjZW5lcylcblx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIHNjZW5lIGFscmVhZHkgaGFzIGJlYXRzLCBpZiBub3QsIHN0YXJ0IGZyb20gMVxuXHRcdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdCZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzKGN1cnJlbnRTY2VuZS5pZCk7XG5cdFx0XHRcdFx0XHRpZiAoZXhpc3RpbmdCZWF0cy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRcdFx0YmVhdE9yZGVyTnVtcy5zZXQoY3VycmVudFNjZW5lLmlkLCAxKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIFNjZW5lIGhhcyBiZWF0cywgdXNlIG1heCBvcmRlcl9udW0gKyAxIGZvciBuZXcgYmVhdHNcblx0XHRcdFx0XHRcdFx0Y29uc3QgbWF4T3JkZXJOdW0gPSBNYXRoLm1heCguLi5leGlzdGluZ0JlYXRzLm1hcChiID0+IGIub3JkZXJfbnVtKSk7XG5cdFx0XHRcdFx0XHRcdGJlYXRPcmRlck51bXMuc2V0KGN1cnJlbnRTY2VuZS5pZCwgbWF4T3JkZXJOdW0gKyAxKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIG5ldyBzY2VuZVxuXHRcdFx0XHRcdGN1cnJlbnRTY2VuZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZVNjZW5lKHtcblx0XHRcdFx0XHRcdHN0b3J5X2lkOiBzdG9yeUlkLFxuXHRcdFx0XHRcdFx0Y2hhcHRlcl9pZDogY2hhcHRlcklkLFxuXHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBzY2VuZU9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0Z29hbCxcblx0XHRcdFx0XHRcdHRpbWVfcmVmOiB0aW1lUmVmLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIFVwZGF0ZSBtYXBzXG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKGN1cnJlbnRTY2VuZSk7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVMaW5rTmFtZSA9IHNjZW5lRmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0c2NlbmVNYXAuc2V0KHNjZW5lTGlua05hbWUsIGN1cnJlbnRTY2VuZSk7XG5cdFx0XHRcdFx0c2NlbmVJZE1hcC5zZXQoY3VycmVudFNjZW5lLmlkLCBjdXJyZW50U2NlbmUpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIEluaXRpYWxpemUgYmVhdCBvcmRlciBmb3IgbmV3IHNjZW5lIChzdGFydHMgYXQgMSlcblx0XHRcdFx0XHRiZWF0T3JkZXJOdW1zLnNldChjdXJyZW50U2NlbmUuaWQsIDEpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRzY2VuZU9yZGVyTnVtKys7XG5cdFx0XHR9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gXCJiZWF0XCIgJiYgY3VycmVudFNjZW5lKSB7XG5cdFx0XHRcdC8vIFBhcnNlIGJlYXQgZGlzcGxheSB0ZXh0XG5cdFx0XHRcdC8vIENhbiBiZTogXCJCZWF0IE46IGludGVudCAtPiBvdXRjb21lXCIsIFwiaW50ZW50IC0+IG91dGNvbWVcIiwgb3IganVzdCBcImludGVudFwiXG5cdFx0XHRcdGxldCBpbnRlbnQ6IHN0cmluZztcblx0XHRcdFx0bGV0IG91dGNvbWU6IHN0cmluZyA9IFwiXCI7XG5cblx0XHRcdFx0Y29uc3QgYmVhdE1hdGNoID0gaXRlbS5kaXNwbGF5VGV4dC5tYXRjaCgvQmVhdFxccytcXGQrOlxccyooLispLyk7XG5cdFx0XHRcdGlmIChiZWF0TWF0Y2gpIHtcblx0XHRcdFx0XHQvLyBGb3JtYXQ6IFwiQmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZVwiIG9yIFwiQmVhdCBOOiBpbnRlbnRcIlxuXHRcdFx0XHRcdGNvbnN0IGJlYXRUZXh0ID0gYmVhdE1hdGNoWzFdLnRyaW0oKTtcblx0XHRcdFx0XHRjb25zdCBwYXJ0cyA9IGJlYXRUZXh0LnNwbGl0KC9cXHMqLT5cXHMqLyk7XG5cdFx0XHRcdFx0aW50ZW50ID0gcGFydHNbMF0udHJpbSgpO1xuXHRcdFx0XHRcdG91dGNvbWUgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbihcIiAtPiBcIikudHJpbSgpIDogXCJcIjtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBGb3JtYXQ6IFwiaW50ZW50IC0+IG91dGNvbWVcIiBvciBqdXN0IFwiaW50ZW50XCJcblx0XHRcdFx0XHRjb25zdCBwYXJ0cyA9IGl0ZW0uZGlzcGxheVRleHQuc3BsaXQoL1xccyotPlxccyovKTtcblx0XHRcdFx0XHRpbnRlbnQgPSBwYXJ0c1swXS50cmltKCk7XG5cdFx0XHRcdFx0b3V0Y29tZSA9IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0+IFwiKS50cmltKCkgOiBcIlwiO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gR2V0IGN1cnJlbnQgYmVhdCBvcmRlcl9udW0gZm9yIHRoaXMgc2NlbmVcblx0XHRcdFx0Y29uc3QgY3VycmVudEJlYXRPcmRlck51bSA9IGJlYXRPcmRlck51bXMuZ2V0KGN1cnJlbnRTY2VuZS5pZCkgfHwgMTtcblxuXHRcdFx0XHRpZiAoaXRlbS5saW5rTmFtZSkge1xuXHRcdFx0XHRcdC8vIEJlYXQgZXhpc3RzIC0gZmluZCBpdFxuXHRcdFx0XHRcdGxldCBjdXJyZW50QmVhdCA9IGJlYXRNYXAuZ2V0KGl0ZW0ubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0aWYgKCFjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdFx0Ly8gVHJ5IHRvIGZpbmQgYnkgSUQgaWYgbGlua05hbWUgaXMgYWN0dWFsbHkgYW4gSURcblx0XHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYmVhdElkTWFwLmdldChpdGVtLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAoY3VycmVudEJlYXQpIHtcblx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIG9yZGVyX251bSBvciBjb250ZW50IG5lZWRzIHRvIGJlIHVwZGF0ZWRcblx0XHRcdFx0XHRcdGNvbnN0IG5lZWRzT3JkZXJVcGRhdGUgPSBjdXJyZW50QmVhdC5vcmRlcl9udW0gIT09IGN1cnJlbnRCZWF0T3JkZXJOdW07XG5cdFx0XHRcdFx0XHRjb25zdCBuZWVkc0NvbnRlbnRVcGRhdGUgPSBpbnRlbnQgIT09IGN1cnJlbnRCZWF0LmludGVudCB8fCBvdXRjb21lICE9PSBjdXJyZW50QmVhdC5vdXRjb21lO1xuXHRcdFx0XHRcdFx0Y29uc3QgbmVlZHNTY2VuZVVwZGF0ZSA9IGN1cnJlbnRCZWF0LnNjZW5lX2lkICE9PSBjdXJyZW50U2NlbmUuaWQ7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGlmIChuZWVkc09yZGVyVXBkYXRlIHx8IG5lZWRzQ29udGVudFVwZGF0ZSB8fCBuZWVkc1NjZW5lVXBkYXRlKSB7XG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQmVhdChjdXJyZW50QmVhdC5pZCwge1xuXHRcdFx0XHRcdFx0XHRcdGludGVudCxcblx0XHRcdFx0XHRcdFx0XHRvdXRjb21lLFxuXHRcdFx0XHRcdFx0XHRcdG9yZGVyX251bTogY3VycmVudEJlYXRPcmRlck51bSxcblx0XHRcdFx0XHRcdFx0XHRzY2VuZV9pZDogY3VycmVudFNjZW5lLmlkLFxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBtYXBzIGlmIHNjZW5lIGNoYW5nZWRcblx0XHRcdFx0XHRcdFx0aWYgKG5lZWRzU2NlbmVVcGRhdGUpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGN1cnJlbnRCZWF0KTtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBiZWF0TGlua05hbWUgPSBiZWF0RmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHRcdFx0YmVhdE1hcC5zZXQoYmVhdExpbmtOYW1lLCBjdXJyZW50QmVhdCk7XG5cdFx0XHRcdFx0XHRcdFx0YmVhdElkTWFwLnNldChjdXJyZW50QmVhdC5pZCwgY3VycmVudEJlYXQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIENyZWF0ZSBuZXcgYmVhdFxuXHRcdFx0XHRcdGNvbnN0IG5ld0JlYXQgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVCZWF0KHtcblx0XHRcdFx0XHRcdHNjZW5lX2lkOiBjdXJyZW50U2NlbmUuaWQsXG5cdFx0XHRcdFx0XHRvcmRlcl9udW06IGN1cnJlbnRCZWF0T3JkZXJOdW0sXG5cdFx0XHRcdFx0XHR0eXBlOiBcInNldHVwXCIsIC8vIERlZmF1bHQgdHlwZVxuXHRcdFx0XHRcdFx0aW50ZW50LFxuXHRcdFx0XHRcdFx0b3V0Y29tZSxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBVcGRhdGUgbWFwc1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVCZWF0RmlsZU5hbWUobmV3QmVhdCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdGJlYXRNYXAuc2V0KGJlYXRMaW5rTmFtZSwgbmV3QmVhdCk7XG5cdFx0XHRcdFx0YmVhdElkTWFwLnNldChuZXdCZWF0LmlkLCBuZXdCZWF0KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0Ly8gSW5jcmVtZW50IGJlYXQgb3JkZXIgZm9yIG5leHQgYmVhdCBpbiB0aGlzIHNjZW5lXG5cdFx0XHRcdGJlYXRPcmRlck51bXMuc2V0KGN1cnJlbnRTY2VuZS5pZCwgY3VycmVudEJlYXRPcmRlck51bSArIDEpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIEZpbmQgY29udGVudCBibG9jayBmaWxlIGJ5IGxpbmsgbmFtZSAoc2VhcmNoZXMgcmVjdXJzaXZlbHkgaW4gYWxsIHR5cGUgc3ViZm9sZGVycylcblx0cHJpdmF0ZSBhc3luYyBmaW5kQ29udGVudEJsb2NrRmlsZUJ5TGlua05hbWUoXG5cdFx0Y29udGVudHNSb290OiBzdHJpbmcsXG5cdFx0bGlua05hbWU6IHN0cmluZ1xuXHQpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcblx0XHRjb25zdCByb290ID0gdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLmdldEFic3RyYWN0RmlsZUJ5UGF0aChjb250ZW50c1Jvb3QpO1xuXHRcdGlmICghKHJvb3QgaW5zdGFuY2VvZiBURm9sZGVyKSkgcmV0dXJuIG51bGw7XG5cblx0XHRjb25zdCB0YXJnZXQgPSBgJHtsaW5rTmFtZX0ubWRgO1xuXG5cdFx0Ly8gUmVjdXJzaXZlIHNlYXJjaCBpbiBhbGwgc3ViZm9sZGVyc1xuXHRcdGNvbnN0IHN0YWNrOiBURm9sZGVyW10gPSBbcm9vdF07XG5cdFx0d2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuXHRcdFx0Y29uc3QgZm9sZGVyID0gc3RhY2sucG9wKCkhO1xuXHRcdFx0Zm9yIChjb25zdCBjaGlsZCBvZiBmb2xkZXIuY2hpbGRyZW4pIHtcblx0XHRcdFx0aWYgKGNoaWxkIGluc3RhbmNlb2YgVEZvbGRlcikge1xuXHRcdFx0XHRcdHN0YWNrLnB1c2goY2hpbGQpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGNoaWxkIGluc3RhbmNlb2YgVEZpbGUgJiYgY2hpbGQubmFtZSA9PT0gdGFyZ2V0KSB7XG5cdFx0XHRcdFx0cmV0dXJuIGNoaWxkLnBhdGg7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8vIEZpbmQgcHJvc2UgYmxvY2sgYnkgY29udGVudCB3aGVuIGZpbGUgbmFtZSBkb2Vzbid0IG1hdGNoIChzZWFyY2hlcyByZWN1cnNpdmVseSBpbiBhbGwgdHlwZSBzdWJmb2xkZXJzKVxuXHRwcml2YXRlIGFzeW5jIGZpbmRDb250ZW50QmxvY2tCeUNvbnRlbnQoXG5cdFx0Y29udGVudHNGb2xkZXJQYXRoOiBzdHJpbmcsXG5cdFx0Y29udGVudDogc3RyaW5nXG5cdCk6IFByb21pc2U8Q29udGVudEJsb2NrIHwgbnVsbD4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBmb2xkZXIgPSB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGNvbnRlbnRzRm9sZGVyUGF0aCk7XG5cdFx0XHRpZiAoIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3Qgbm9ybWFsaXplZENvbnRlbnQgPSBjb250ZW50LnRyaW0oKTtcblxuXHRcdFx0Ly8gUmVjdXJzaXZlIHNlYXJjaCB0aHJvdWdoIGFsbCBzdWJmb2xkZXJzXG5cdFx0XHRjb25zdCBzdGFjazogVEZvbGRlcltdID0gW2ZvbGRlcl07XG5cdFx0XHR3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRGb2xkZXIgPSBzdGFjay5wb3AoKSE7XG5cdFx0XHRcdGZvciAoY29uc3QgY2hpbGQgb2YgY3VycmVudEZvbGRlci5jaGlsZHJlbikge1xuXHRcdFx0XHRcdGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcblx0XHRcdFx0XHRcdHN0YWNrLnB1c2goY2hpbGQpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoY2hpbGQgaW5zdGFuY2VvZiBURmlsZSAmJiBjaGlsZC5leHRlbnNpb24gPT09IFwibWRcIikge1xuXHRcdFx0XHRcdFx0Y29uc3QgY29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlci5yZWFkQ29udGVudEJsb2NrRnJvbUZpbGUoY2hpbGQucGF0aCk7XG5cdFx0XHRcdFx0XHRpZiAoY29udGVudEJsb2NrICYmIGNvbnRlbnRCbG9jay5jb250ZW50LnRyaW0oKSA9PT0gbm9ybWFsaXplZENvbnRlbnQpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGNvbnRlbnRCbG9jaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzZWFyY2hpbmcgZm9yIHByb3NlIGJsb2NrIGJ5IGNvbnRlbnQ6XCIsIGVycik7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHQvLyBGaW5kIHByb3NlIGJsb2NrIGJ5IElEIHdoZW4gd2UgaGF2ZSByZW1vdGUgSUQgYnV0IG5lZWQgbG9jYWwgZmlsZSAoc2VhcmNoZXMgcmVjdXJzaXZlbHkgaW4gYWxsIHR5cGUgc3ViZm9sZGVycylcblx0cHJpdmF0ZSBhc3luYyBmaW5kQ29udGVudEJsb2NrQnlJZChcblx0XHRjb250ZW50c0ZvbGRlclBhdGg6IHN0cmluZyxcblx0XHRpZDogc3RyaW5nXG5cdCk6IFByb21pc2U8Q29udGVudEJsb2NrIHwgbnVsbD4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBmb2xkZXIgPSB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGNvbnRlbnRzRm9sZGVyUGF0aCk7XG5cdFx0XHRpZiAoIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmVjdXJzaXZlIHNlYXJjaCB0aHJvdWdoIGFsbCBzdWJmb2xkZXJzXG5cdFx0XHRjb25zdCBzdGFjazogVEZvbGRlcltdID0gW2ZvbGRlcl07XG5cdFx0XHR3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRGb2xkZXIgPSBzdGFjay5wb3AoKSE7XG5cdFx0XHRcdGZvciAoY29uc3QgY2hpbGQgb2YgY3VycmVudEZvbGRlci5jaGlsZHJlbikge1xuXHRcdFx0XHRcdGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcblx0XHRcdFx0XHRcdHN0YWNrLnB1c2goY2hpbGQpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoY2hpbGQgaW5zdGFuY2VvZiBURmlsZSAmJiBjaGlsZC5leHRlbnNpb24gPT09IFwibWRcIikge1xuXHRcdFx0XHRcdFx0Y29uc3QgY29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlci5yZWFkQ29udGVudEJsb2NrRnJvbUZpbGUoY2hpbGQucGF0aCk7XG5cdFx0XHRcdFx0XHRpZiAoY29udGVudEJsb2NrICYmIGNvbnRlbnRCbG9jay5pZCA9PT0gaWQpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGNvbnRlbnRCbG9jaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzZWFyY2hpbmcgZm9yIHByb3NlIGJsb2NrIGJ5IElEOlwiLCBlcnIpO1xuXHRcdH1cblxuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0Ly8gR2V0IHRoZSBjb3JyZWN0IGZpbGUgcGF0aCBmb3IgYSBjb250ZW50IGJsb2NrIChhbHdheXMgdXNlcyB0eXBlIHN1YmZvbGRlcnMpXG5cdHByaXZhdGUgZ2V0Q29udGVudEJsb2NrRmlsZVBhdGgoc3RvcnlGb2xkZXJQYXRoOiBzdHJpbmcsIGNvbnRlbnRCbG9jazogQ29udGVudEJsb2NrKTogc3RyaW5nIHtcblx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShjb250ZW50QmxvY2spO1xuXHRcdGNvbnN0IHR5cGVGb2xkZXJQYXRoID0gdGhpcy5maWxlTWFuYWdlci5nZXRDb250ZW50QmxvY2tGb2xkZXJQYXRoKHN0b3J5Rm9sZGVyUGF0aCwgY29udGVudEJsb2NrLnR5cGUgfHwgXCJ0ZXh0XCIpO1xuXHRcdHJldHVybiBgJHt0eXBlRm9sZGVyUGF0aH0vJHtmaWxlTmFtZX1gO1xuXHR9XG5cblx0Ly8gR2V0IGNvbnRlbnQgYmxvY2sgZmlsZSBwYXRoIGZyb20gY29udGVudHMgZm9sZGVyIHBhdGggKDAzLWNvbnRlbnRzKVxuXHRwcml2YXRlIGFzeW5jIGdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKFxuXHRcdGNvbnRlbnRzRm9sZGVyUGF0aDogc3RyaW5nLCBcblx0XHRjb250ZW50QmxvY2s6IENvbnRlbnRCbG9ja1xuXHQpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdGNvbnN0IHR5cGVGb2xkZXIgPSB0aGlzLmZpbGVNYW5hZ2VyLmdldENvbnRlbnRUeXBlRm9sZGVyKGNvbnRlbnRCbG9jay50eXBlIHx8IFwidGV4dFwiKTtcblx0XHRjb25zdCB0eXBlRm9sZGVyUGF0aCA9IGAke2NvbnRlbnRzRm9sZGVyUGF0aH0vJHt0eXBlRm9sZGVyfWA7XG5cdFx0Ly8gRW5zdXJlIHR5cGUgc3ViZm9sZGVyIGV4aXN0c1xuXHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKHR5cGVGb2xkZXJQYXRoKTtcblx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShjb250ZW50QmxvY2spO1xuXHRcdHJldHVybiBgJHt0eXBlRm9sZGVyUGF0aH0vJHtmaWxlTmFtZX1gO1xuXHR9XG5cblx0Ly8gUmVzb2x2ZSBjb25mbGljdCB1c2luZyBtb2RhbCBvciBhdXRvLXJlc29sdmUgYmFzZWQgb24gbW9kZVxuXHRwcml2YXRlIGFzeW5jIHJlc29sdmVDb25mbGljdChcblx0XHRsb2NhbENvbnRlbnRCbG9jazogQ29udGVudEJsb2NrLFxuXHRcdHJlbW90ZUNvbnRlbnRCbG9jazogQ29udGVudEJsb2NrXG5cdCk6IFByb21pc2U8Q29uZmxpY3RSZXNvbHV0aW9uUmVzdWx0PiB7XG5cdFx0Ly8gSW4gbG9jYWwgbW9kZSwgYXV0b21hdGljYWxseSByZXNvbHZlIHRvIFwibG9jYWwgd2luc1wiXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MubW9kZSA9PT0gXCJsb2NhbFwiKSB7XG5cdFx0XHRyZXR1cm4geyByZXNvbHV0aW9uOiBcImxvY2FsXCIgfTtcblx0XHR9XG5cblx0XHQvLyBJbiByZW1vdGUgbW9kZSwgc2hvdyBtb2RhbCBmb3IgdXNlciB0byBjaG9vc2Vcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IENvbmZsaWN0TW9kYWwoXG5cdFx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayxcblx0XHRcdFx0cmVtb3RlQ29udGVudEJsb2NrLFxuXHRcdFx0XHRhc3luYyAocmVzdWx0KSA9PiB7XG5cdFx0XHRcdFx0cmVzb2x2ZShyZXN1bHQpO1xuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXHRcdFx0bW9kYWwub3BlbigpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gVXBkYXRlIHRoZSBDaGFwdGVyIHNlY3Rpb24gaW4gY2hhcHRlciBmaWxlIChoaWVyYXJjaGljYWwgc3RydWN0dXJlKVxuXHRwcml2YXRlIGFzeW5jIHVwZGF0ZUNoYXB0ZXJQcm9zZVNlY3Rpb25IaWVyYXJjaGljYWwoXG5cdFx0b3JpZ2luYWxDb250ZW50OiBzdHJpbmcsXG5cdFx0dXBkYXRlZFNlY3Rpb25zOiBzdHJpbmdbXSxcblx0XHRmaWxlOiBURmlsZSxcblx0XHRmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgc3RyaW5nPlxuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBFeHRyYWN0IGZyb250bWF0dGVyXG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IG9yaWdpbmFsQ29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuXHRcdGNvbnN0IGZyb250bWF0dGVyVGV4dCA9IGZyb250bWF0dGVyTWF0Y2ggPyBmcm9udG1hdHRlck1hdGNoWzBdIDogXCJcIjtcblxuXHRcdC8vIEV4dHJhY3QgY29udGVudCBhZnRlciBmcm9udG1hdHRlclxuXHRcdGNvbnN0IGJvZHlTdGFydCA9IGZyb250bWF0dGVyTWF0Y2ggPyBmcm9udG1hdHRlck1hdGNoWzBdLmxlbmd0aCA6IDA7XG5cdFx0Y29uc3QgYm9keUNvbnRlbnQgPSBvcmlnaW5hbENvbnRlbnQuc3Vic3RyaW5nKGJvZHlTdGFydCkudHJpbSgpO1xuXG5cdFx0Ly8gR2V0IGNoYXB0ZXIgbnVtYmVyIGFuZCB0aXRsZSBmcm9tIGZyb250bWF0dGVyXG5cdFx0Y29uc3QgY2hhcHRlck51bWJlciA9IGZyb250bWF0dGVyLm51bWJlciB8fCBcIjFcIjtcblx0XHRjb25zdCBjaGFwdGVyVGl0bGUgPSBmcm9udG1hdHRlci50aXRsZSB8fCBcIlVudGl0bGVkXCI7XG5cblx0XHQvLyBGaW5kIENoYXB0ZXIgc2VjdGlvbiBhbmQgcmVwbGFjZSBpdFxuXHRcdC8vIENhcHR1cmUgZXZlcnl0aGluZyB1bnRpbCB0aGUgZW5kIHNpbmNlIFNjZW5lIGFuZCBCZWF0IGFyZSBwYXJ0IG9mIHRoZSBjaGFwdGVyIHNlY3Rpb25cblx0XHQvLyBBY2NlcHQgd2l0aCBvciB3aXRob3V0IGJsYW5rIGxpbmUgYWZ0ZXIgdGhlIGNoYXB0ZXIgaGVhZGVyXG5cdFx0Ly8gVXNlIG5vbi1ncmVlZHkgbWF0Y2ggdG8gc3RvcCBhdCBuZXh0ICMjIENoYXB0ZXIgaWYgaXQgZXhpc3RzXG5cdFx0Y29uc3QgY2hhcHRlckhlYWRlclBhdHRlcm4gPSBgIyNcXFxccytDaGFwdGVyXFxcXHMrJHtjaGFwdGVyTnVtYmVyfTpcXFxccytbXlxcXFxuXStgO1xuXHRcdGNvbnN0IGNoYXB0ZXJTZWN0aW9uTWF0Y2ggPSBib2R5Q29udGVudC5tYXRjaChuZXcgUmVnRXhwKGAoW1xcXFxzXFxcXFNdKj8ke2NoYXB0ZXJIZWFkZXJQYXR0ZXJufVxcXFxzKlxcXFxuKykoW1xcXFxzXFxcXFNdKj8pKD89XFxcXG4jI1xcXFxzK0NoYXB0ZXJcXFxccytcXFxcZCs6fCQpYCwgXCJpXCIpKTtcblx0XHRcblx0XHRpZiAoIWNoYXB0ZXJTZWN0aW9uTWF0Y2gpIHtcblx0XHRcdC8vIE5vIENoYXB0ZXIgc2VjdGlvbiBmb3VuZCwgYWRkIGl0XG5cdFx0XHRjb25zdCBuZXdDaGFwdGVyU2VjdGlvbiA9IGBcXG5cXG4jIyBDaGFwdGVyICR7Y2hhcHRlck51bWJlcn06ICR7Y2hhcHRlclRpdGxlfVxcblxcbiR7dXBkYXRlZFNlY3Rpb25zLmpvaW4oXCJcXG5cXG5cIil9XFxuXFxuYDtcblx0XHRcdGNvbnN0IHVwZGF0ZWRDb250ZW50ID0gYCR7ZnJvbnRtYXR0ZXJUZXh0fVxcbiR7Ym9keUNvbnRlbnR9JHtuZXdDaGFwdGVyU2VjdGlvbn1gO1xuXHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLm1vZGlmeShmaWxlLCB1cGRhdGVkQ29udGVudCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gUmVwbGFjZSBDaGFwdGVyIHNlY3Rpb24gY29udGVudFxuXHRcdGNvbnN0IGJlZm9yZUNoYXB0ZXIgPSBjaGFwdGVyU2VjdGlvbk1hdGNoWzFdO1xuXHRcdGNvbnN0IGFmdGVyQ2hhcHRlciA9IGJvZHlDb250ZW50LnN1YnN0cmluZyhjaGFwdGVyU2VjdGlvbk1hdGNoLmluZGV4ISArIGNoYXB0ZXJTZWN0aW9uTWF0Y2hbMF0ubGVuZ3RoKTtcblx0XHRjb25zdCBuZXdDaGFwdGVyQ29udGVudCA9IHVwZGF0ZWRTZWN0aW9ucy5qb2luKFwiXFxuXFxuXCIpO1xuXHRcdGNvbnN0IHVwZGF0ZWRCb2R5ID0gYCR7YmVmb3JlQ2hhcHRlcn0ke25ld0NoYXB0ZXJDb250ZW50fVxcblxcbiR7YWZ0ZXJDaGFwdGVyfWA7XG5cdFx0Y29uc3QgdXBkYXRlZENvbnRlbnQgPSBgJHtmcm9udG1hdHRlclRleHR9XFxuJHt1cGRhdGVkQm9keX1gO1xuXHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5tb2RpZnkoZmlsZSwgdXBkYXRlZENvbnRlbnQpO1xuXHR9XG5cblx0Ly8gVXBkYXRlIHRoZSBQcm9zZSBzZWN0aW9uIGluIGNoYXB0ZXIgZmlsZVxuXHRwcml2YXRlIGFzeW5jIHVwZGF0ZUNoYXB0ZXJQcm9zZVNlY3Rpb24oXG5cdFx0b3JpZ2luYWxDb250ZW50OiBzdHJpbmcsXG5cdFx0dXBkYXRlZFBhcmFncmFwaHM6IHN0cmluZ1tdLFxuXHRcdGZpbGU6IFRGaWxlXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdC8vIEV4dHJhY3QgZnJvbnRtYXR0ZXJcblx0XHRjb25zdCBmcm9udG1hdHRlck1hdGNoID0gb3JpZ2luYWxDb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXSA6IFwiXCI7XG5cblx0XHQvLyBFeHRyYWN0IGNvbnRlbnQgYWZ0ZXIgZnJvbnRtYXR0ZXJcblx0XHRjb25zdCBib2R5U3RhcnQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXS5sZW5ndGggOiAwO1xuXHRcdGNvbnN0IGJvZHlDb250ZW50ID0gb3JpZ2luYWxDb250ZW50LnN1YnN0cmluZyhib2R5U3RhcnQpLnRyaW0oKTtcblxuXHRcdC8vIEZpbmQgUHJvc2Ugc2VjdGlvbiBhbmQgcmVwbGFjZSBpdFxuXHRcdGNvbnN0IHByb3NlU2VjdGlvbk1hdGNoID0gYm9keUNvbnRlbnQubWF0Y2goLyhbXFxzXFxTXSo/IyNcXHMrUHJvc2VcXHMqXFxuXFxuKShbXFxzXFxTXSo/KSg/PVxcbiMjfFxcbiokKS8pO1xuXHRcdFxuXHRcdGlmICghcHJvc2VTZWN0aW9uTWF0Y2gpIHtcblx0XHRcdC8vIE5vIFByb3NlIHNlY3Rpb24gZm91bmQsIGFkZCBpdFxuXHRcdFx0Y29uc3QgbmV3UHJvc2VTZWN0aW9uID0gYFxcblxcbiMjIFByb3NlXFxuXFxuJHt1cGRhdGVkUGFyYWdyYXBocy5qb2luKFwiXFxuXFxuXCIpfVxcblxcbmA7XG5cdFx0XHRjb25zdCB1cGRhdGVkQ29udGVudCA9IGAke2Zyb250bWF0dGVyfVxcbiR7Ym9keUNvbnRlbnR9JHtuZXdQcm9zZVNlY3Rpb259YDtcblx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5tb2RpZnkoZmlsZSwgdXBkYXRlZENvbnRlbnQpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFJlcGxhY2UgUHJvc2Ugc2VjdGlvbiBjb250ZW50XG5cdFx0Y29uc3QgYmVmb3JlUHJvc2UgPSBwcm9zZVNlY3Rpb25NYXRjaFsxXTtcblx0XHRjb25zdCBuZXdQcm9zZUNvbnRlbnQgPSB1cGRhdGVkUGFyYWdyYXBocy5qb2luKFwiXFxuXFxuXCIpO1xuXHRcdGNvbnN0IGFmdGVyUHJvc2UgPSBib2R5Q29udGVudC5zdWJzdHJpbmcocHJvc2VTZWN0aW9uTWF0Y2guaW5kZXghICsgcHJvc2VTZWN0aW9uTWF0Y2hbMF0ubGVuZ3RoKTtcblxuXHRcdGNvbnN0IHVwZGF0ZWRCb2R5ID0gYCR7YmVmb3JlUHJvc2V9JHtuZXdQcm9zZUNvbnRlbnR9XFxuXFxuJHthZnRlclByb3NlfWA7XG5cdFx0Y29uc3QgdXBkYXRlZENvbnRlbnQgPSBgJHtmcm9udG1hdHRlcn1cXG4ke3VwZGF0ZWRCb2R5fWA7XG5cblx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkubW9kaWZ5KGZpbGUsIHVwZGF0ZWRDb250ZW50KTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgd3JpdGVDaGFwdGVyQnVuZGxlKGRhdGE6IHtcblx0XHRzdG9yeTogU3Rvcnk7XG5cdFx0Y2hhcHRlcjogQ2hhcHRlcjtcblx0XHRzY2VuZXM6IFNjZW5lV2l0aEJlYXRzW107XG5cdFx0Y29udGVudEJsb2NrczogQ29udGVudEJsb2NrW107XG5cdFx0Y29udGVudEJsb2NrUmVmczogQ29udGVudEFuY2hvcltdO1xuXHR9KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgZm9sZGVyUGF0aCA9IHRoaXMuZmlsZU1hbmFnZXIuZ2V0U3RvcnlGb2xkZXJQYXRoKGRhdGEuc3RvcnkudGl0bGUpO1xuXHRcdGF3YWl0IHRoaXMuZW5zdXJlU3RvcnlGb2xkZXJzKGZvbGRlclBhdGgpO1xuXG5cdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2YgZGF0YS5jb250ZW50QmxvY2tzKSB7XG5cdFx0XHRhd2FpdCB0aGlzLndyaXRlQ29udGVudEJsb2NrVG9Gb2xkZXIoZm9sZGVyUGF0aCwgZGF0YS5zdG9yeS50aXRsZSwgY29udGVudEJsb2NrKTtcblx0XHR9XG5cblx0XHRjb25zdCBjaGFwdGVyc0ZvbGRlclBhdGggPSBgJHtmb2xkZXJQYXRofS8wMC1jaGFwdGVyc2A7XG5cdFx0Y29uc3QgY2hhcHRlckZpbGVOYW1lID0gYENoYXB0ZXItJHtkYXRhLmNoYXB0ZXIubnVtYmVyfS5tZGA7XG5cdFx0Y29uc3QgY2hhcHRlckZpbGVQYXRoID0gYCR7Y2hhcHRlcnNGb2xkZXJQYXRofS8ke2NoYXB0ZXJGaWxlTmFtZX1gO1xuXG5cdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNoYXB0ZXJGaWxlKFxuXHRcdFx0eyBjaGFwdGVyOiBkYXRhLmNoYXB0ZXIsIHNjZW5lczogZGF0YS5zY2VuZXMgfSxcblx0XHRcdGNoYXB0ZXJGaWxlUGF0aCxcblx0XHRcdGRhdGEuc3RvcnkudGl0bGUsXG5cdFx0XHRkYXRhLmNvbnRlbnRCbG9ja3MsXG5cdFx0XHRkYXRhLmNvbnRlbnRCbG9ja1JlZnMsXG5cdFx0XHRbXVxuXHRcdCk7XG5cblx0XHRjb25zdCB7IGJ5U2NlbmUsIGJ5QmVhdCB9ID0gdGhpcy5idWlsZENvbnRlbnRCbG9ja0Fzc29jaWF0aW9uTWFwcyhcblx0XHRcdGRhdGEuY29udGVudEJsb2Nrcyxcblx0XHRcdGRhdGEuY29udGVudEJsb2NrUmVmc1xuXHRcdCk7XG5cblx0XHRhd2FpdCB0aGlzLnN5bmNTY2VuZXNUb0ZpbGVzeXN0ZW0oXG5cdFx0XHRkYXRhLnNjZW5lcyxcblx0XHRcdGZvbGRlclBhdGgsXG5cdFx0XHRkYXRhLnN0b3J5LnRpdGxlLFxuXHRcdFx0YnlTY2VuZSxcblx0XHRcdGJ5QmVhdFxuXHRcdCk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHdyaXRlU2NlbmVCdW5kbGUoZGF0YToge1xuXHRcdHN0b3J5VGl0bGU6IHN0cmluZztcblx0XHRmb2xkZXJQYXRoOiBzdHJpbmc7XG5cdFx0c2NlbmU6IFNjZW5lO1xuXHRcdGJlYXRzOiBCZWF0W107XG5cdFx0c2NlbmVDb250ZW50QmxvY2tzPzogQ29udGVudEJsb2NrW107XG5cdFx0YmVhdENvbnRlbnRCbG9ja01hcD86IE1hcDxzdHJpbmcsIENvbnRlbnRCbG9ja1tdPjtcblx0XHRza2lwUmVtb3RlQ29udGVudEZldGNoPzogYm9vbGVhbjtcblx0fSk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKGAke2RhdGEuZm9sZGVyUGF0aH0vMDEtc2NlbmVzYCk7XG5cdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHMoYCR7ZGF0YS5mb2xkZXJQYXRofS8wMi1iZWF0c2ApO1xuXG5cdFx0Y29uc3Qgc2NlbmVDb250ZW50QmxvY2tzID1cblx0XHRcdGRhdGEuc2NlbmVDb250ZW50QmxvY2tzID8/XG5cdFx0XHQoZGF0YS5za2lwUmVtb3RlQ29udGVudEZldGNoXG5cdFx0XHRcdD8gW11cblx0XHRcdFx0OiBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzQnlTY2VuZShkYXRhLnNjZW5lLmlkKSk7XG5cblx0XHRjb25zdCBzY2VuZUZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZVNjZW5lRmlsZU5hbWUoZGF0YS5zY2VuZSk7XG5cdFx0Y29uc3Qgc2NlbmVGaWxlUGF0aCA9IGAke2RhdGEuZm9sZGVyUGF0aH0vMDEtc2NlbmVzLyR7c2NlbmVGaWxlTmFtZX1gO1xuXG5cdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZVNjZW5lRmlsZShcblx0XHRcdHsgc2NlbmU6IGRhdGEuc2NlbmUsIGJlYXRzOiBkYXRhLmJlYXRzIH0sXG5cdFx0XHRzY2VuZUZpbGVQYXRoLFxuXHRcdFx0ZGF0YS5zdG9yeVRpdGxlLFxuXHRcdFx0c2NlbmVDb250ZW50QmxvY2tzLFxuXHRcdFx0W11cblx0XHQpO1xuXG5cdFx0Zm9yIChjb25zdCBiZWF0IG9mIGRhdGEuYmVhdHMpIHtcblx0XHRcdGNvbnN0IHByb3ZpZGVkID0gZGF0YS5iZWF0Q29udGVudEJsb2NrTWFwPy5nZXQoYmVhdC5pZCk7XG5cdFx0XHRjb25zdCBiZWF0Q29udGVudEJsb2NrcyA9XG5cdFx0XHRcdHByb3ZpZGVkID8/XG5cdFx0XHRcdChkYXRhLnNraXBSZW1vdGVDb250ZW50RmV0Y2hcblx0XHRcdFx0XHQ/IFtdXG5cdFx0XHRcdFx0OiBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzQnlCZWF0KGJlYXQuaWQpKTtcblxuXHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdGNvbnN0IGJlYXRGaWxlUGF0aCA9IGAke2RhdGEuZm9sZGVyUGF0aH0vMDItYmVhdHMvJHtiZWF0RmlsZU5hbWV9YDtcblxuXHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUJlYXRGaWxlKFxuXHRcdFx0XHRiZWF0LFxuXHRcdFx0XHRiZWF0RmlsZVBhdGgsXG5cdFx0XHRcdGRhdGEuc3RvcnlUaXRsZSxcblx0XHRcdFx0YmVhdENvbnRlbnRCbG9ja3Ncblx0XHRcdCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBidWlsZENvbnRlbnRCbG9ja0Fzc29jaWF0aW9uTWFwcyhcblx0XHRjb250ZW50QmxvY2tzOiBDb250ZW50QmxvY2tbXSxcblx0XHRjb250ZW50QmxvY2tSZWZzOiBDb250ZW50QW5jaG9yW11cblx0KToge1xuXHRcdGJ5U2NlbmU6IE1hcDxzdHJpbmcsIENvbnRlbnRCbG9ja1tdPjtcblx0XHRieUJlYXQ6IE1hcDxzdHJpbmcsIENvbnRlbnRCbG9ja1tdPjtcblx0fSB7XG5cdFx0Y29uc3QgYnlTY2VuZSA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2tbXT4oKTtcblx0XHRjb25zdCBieUJlYXQgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudEJsb2NrW10+KCk7XG5cdFx0Y29uc3QgYmxvY2tCeUlkID0gbmV3IE1hcChjb250ZW50QmxvY2tzLm1hcChibG9jayA9PiBbYmxvY2suaWQsIGJsb2NrXSkpO1xuXG5cdFx0Zm9yIChjb25zdCByZWYgb2YgY29udGVudEJsb2NrUmVmcykge1xuXHRcdFx0Y29uc3QgYmxvY2sgPSBibG9ja0J5SWQuZ2V0KHJlZi5jb250ZW50X2Jsb2NrX2lkKTtcblx0XHRcdGlmICghYmxvY2spIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChyZWYuZW50aXR5X3R5cGUgPT09IFwic2NlbmVcIikge1xuXHRcdFx0XHRpZiAoIWJ5U2NlbmUuaGFzKHJlZi5lbnRpdHlfaWQpKSB7XG5cdFx0XHRcdFx0YnlTY2VuZS5zZXQocmVmLmVudGl0eV9pZCwgW10pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJ5U2NlbmUuZ2V0KHJlZi5lbnRpdHlfaWQpIS5wdXNoKGJsb2NrKTtcblx0XHRcdH0gZWxzZSBpZiAocmVmLmVudGl0eV90eXBlID09PSBcImJlYXRcIikge1xuXHRcdFx0XHRpZiAoIWJ5QmVhdC5oYXMocmVmLmVudGl0eV9pZCkpIHtcblx0XHRcdFx0XHRieUJlYXQuc2V0KHJlZi5lbnRpdHlfaWQsIFtdKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRieUJlYXQuZ2V0KHJlZi5lbnRpdHlfaWQpIS5wdXNoKGJsb2NrKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4geyBieVNjZW5lLCBieUJlYXQgfTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcHVsbFNpbmdsZUVudGl0eShzdG9yeUlkOiBzdHJpbmcsIHRhcmdldDogU3luY0VudGl0eVRhcmdldCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHN3aXRjaCAodGFyZ2V0LnR5cGUpIHtcblx0XHRcdGNhc2UgXCJjaGFwdGVyXCI6XG5cdFx0XHRcdGF3YWl0IHRoaXMucHVsbENoYXB0ZXJFbnRpdHkoc3RvcnlJZCwgdGFyZ2V0LmlkKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwic2NlbmVcIjpcblx0XHRcdFx0YXdhaXQgdGhpcy5wdWxsU2NlbmVFbnRpdHkoc3RvcnlJZCwgdGFyZ2V0LmlkKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiY29udGVudFwiOlxuXHRcdFx0XHRhd2FpdCB0aGlzLnB1bGxDb250ZW50QmxvY2tFbnRpdHkoc3RvcnlJZCwgdGFyZ2V0LmlkKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGVudGl0eSB0eXBlOiAke3RhcmdldC50eXBlfWApO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcHVsbENoYXB0ZXJFbnRpdHkoc3RvcnlJZDogc3RyaW5nLCBjaGFwdGVySWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IHN0b3J5ID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0U3Rvcnkoc3RvcnlJZCk7XG5cdFx0Y29uc3QgY2hhcHRlciA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENoYXB0ZXIoY2hhcHRlcklkKTtcblxuXHRcdGlmIChjaGFwdGVyLnN0b3J5X2lkICE9PSBzdG9yeUlkKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDaGFwdGVyIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgc2VsZWN0ZWQgc3RvcnlcIik7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc2NlbmVzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0U2NlbmVzKGNoYXB0ZXJJZCk7XG5cdFx0Y29uc3Qgc2NlbmVzV2l0aEJlYXRzOiBTY2VuZVdpdGhCZWF0c1tdID0gYXdhaXQgUHJvbWlzZS5hbGwoXG5cdFx0XHRzY2VuZXMubWFwKGFzeW5jIChzY2VuZSkgPT4ge1xuXHRcdFx0XHRjb25zdCBiZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzKHNjZW5lLmlkKTtcblx0XHRcdFx0cmV0dXJuIHsgc2NlbmUsIGJlYXRzIH07XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHRjb25zdCBjb250ZW50QmxvY2tzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2NrcyhjaGFwdGVySWQpO1xuXHRcdGNvbnN0IGNvbnRlbnRCbG9ja1JlZnM6IENvbnRlbnRBbmNob3JbXSA9IFtdO1xuXG5cdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2YgY29udGVudEJsb2Nrcykge1xuXHRcdFx0Y29uc3QgcmVmcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRBbmNob3JzKGNvbnRlbnRCbG9jay5pZCk7XG5cdFx0XHRjb250ZW50QmxvY2tSZWZzLnB1c2goLi4ucmVmcyk7XG5cdFx0fVxuXG5cdFx0YXdhaXQgdGhpcy53cml0ZUNoYXB0ZXJCdW5kbGUoe1xuXHRcdFx0c3RvcnksXG5cdFx0XHRjaGFwdGVyLFxuXHRcdFx0c2NlbmVzOiBzY2VuZXNXaXRoQmVhdHMsXG5cdFx0XHRjb250ZW50QmxvY2tzLFxuXHRcdFx0Y29udGVudEJsb2NrUmVmcyxcblx0XHR9KTtcblxuXHRcdG5ldyBOb3RpY2UoYENoYXB0ZXIgXCIke2NoYXB0ZXIudGl0bGV9XCIgc3luY2VkIHN1Y2Nlc3NmdWxseWApO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBwdWxsU2NlbmVFbnRpdHkoc3RvcnlJZDogc3RyaW5nLCBzY2VuZUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBzY2VuZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFNjZW5lKHNjZW5lSWQpO1xuXHRcdGlmIChzY2VuZS5zdG9yeV9pZCAhPT0gc3RvcnlJZCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiU2NlbmUgZG9lcyBub3QgYmVsb25nIHRvIHRoZSBzZWxlY3RlZCBzdG9yeVwiKTtcblx0XHR9XG5cblx0XHRjb25zdCBzdG9yeSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFN0b3J5KHN0b3J5SWQpO1xuXHRcdGNvbnN0IGZvbGRlclBhdGggPSB0aGlzLmZpbGVNYW5hZ2VyLmdldFN0b3J5Rm9sZGVyUGF0aChzdG9yeS50aXRsZSk7XG5cdFx0YXdhaXQgdGhpcy5lbnN1cmVTdG9yeUZvbGRlcnMoZm9sZGVyUGF0aCk7XG5cblx0XHRjb25zdCBiZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzKHNjZW5lLmlkKTtcblx0XHRjb25zdCBzY2VuZUNvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzQnlTY2VuZShzY2VuZS5pZCk7XG5cdFx0Y29uc3QgYmVhdENvbnRlbnRCbG9ja01hcCA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2tbXT4oKTtcblxuXHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cykge1xuXHRcdFx0Y29uc3QgYmVhdENvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzQnlCZWF0KGJlYXQuaWQpO1xuXHRcdFx0YmVhdENvbnRlbnRCbG9ja01hcC5zZXQoYmVhdC5pZCwgYmVhdENvbnRlbnRCbG9ja3MpO1xuXHRcdH1cblxuXHRcdGF3YWl0IHRoaXMud3JpdGVTY2VuZUJ1bmRsZSh7XG5cdFx0XHRzdG9yeVRpdGxlOiBzdG9yeS50aXRsZSxcblx0XHRcdGZvbGRlclBhdGgsXG5cdFx0XHRzY2VuZSxcblx0XHRcdGJlYXRzLFxuXHRcdFx0c2NlbmVDb250ZW50QmxvY2tzLFxuXHRcdFx0YmVhdENvbnRlbnRCbG9ja01hcCxcblx0XHR9KTtcblxuXHRcdGF3YWl0IHRoaXMuc3luY1NjZW5lQ29udGVudEJsb2NrcyhzY2VuZSwgYmVhdHMsIGZvbGRlclBhdGgsIHN0b3J5LnRpdGxlKTtcblxuXHRcdG5ldyBOb3RpY2UoYFNjZW5lIFwiJHtzY2VuZS5nb2FsfVwiIHN5bmNlZCBzdWNjZXNzZnVsbHlgKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcHVsbENvbnRlbnRCbG9ja0VudGl0eShzdG9yeUlkOiBzdHJpbmcsIGNvbnRlbnRCbG9ja0lkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBzdG9yeSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFN0b3J5KHN0b3J5SWQpO1xuXHRcdGNvbnN0IGNvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRCbG9jayhjb250ZW50QmxvY2tJZCk7XG5cblx0XHRpZiAoY29udGVudEJsb2NrLmNoYXB0ZXJfaWQpIHtcblx0XHRcdGNvbnN0IGNoYXB0ZXIgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDaGFwdGVyKGNvbnRlbnRCbG9jay5jaGFwdGVyX2lkKTtcblx0XHRcdGlmIChjaGFwdGVyLnN0b3J5X2lkICE9PSBzdG9yeUlkKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIkNvbnRlbnQgYmxvY2sgZG9lcyBub3QgYmVsb25nIHRvIHRoZSBzZWxlY3RlZCBzdG9yeVwiKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRjb25zdCBmb2xkZXJQYXRoID0gdGhpcy5maWxlTWFuYWdlci5nZXRTdG9yeUZvbGRlclBhdGgoc3RvcnkudGl0bGUpO1xuXHRcdGF3YWl0IHRoaXMuZW5zdXJlQ29udGVudEZvbGRlcnMoZm9sZGVyUGF0aCk7XG5cblx0XHRhd2FpdCB0aGlzLndyaXRlQ29udGVudEJsb2NrVG9Gb2xkZXIoZm9sZGVyUGF0aCwgc3RvcnkudGl0bGUsIGNvbnRlbnRCbG9jayk7XG5cdFx0bmV3IE5vdGljZShcIkNvbnRlbnQgYmxvY2sgc3luY2VkIHN1Y2Nlc3NmdWxseVwiKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcHVzaFNpbmdsZUVudGl0eShcblx0XHRmb2xkZXJQYXRoOiBzdHJpbmcsXG5cdFx0dGFyZ2V0OiBTeW5jRW50aXR5VGFyZ2V0LFxuXHRcdHN0b3J5SWQ6IHN0cmluZyxcblx0XHRzdG9yeVRpdGxlOiBzdHJpbmdcblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0bGV0IGVudGl0eUxhYmVsOiBzdHJpbmc7XG5cblx0XHRzd2l0Y2ggKHRhcmdldC50eXBlKSB7XG5cdFx0XHRjYXNlIFwiY2hhcHRlclwiOlxuXHRcdFx0XHRlbnRpdHlMYWJlbCA9IGF3YWl0IHRoaXMucHVzaENoYXB0ZXJFbnRpdHkoZm9sZGVyUGF0aCwgdGFyZ2V0LmlkKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwic2NlbmVcIjpcblx0XHRcdFx0ZW50aXR5TGFiZWwgPSBhd2FpdCB0aGlzLnB1c2hTY2VuZUVudGl0eShmb2xkZXJQYXRoLCBzdG9yeUlkLCB0YXJnZXQuaWQpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJjb250ZW50XCI6XG5cdFx0XHRcdGVudGl0eUxhYmVsID0gYXdhaXQgdGhpcy5wdXNoQ29udGVudEJsb2NrRW50aXR5KGZvbGRlclBhdGgsIHRhcmdldC5pZCwgc3RvcnlUaXRsZSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBlbnRpdHkgdHlwZTogJHt0YXJnZXQudHlwZX1gKTtcblx0XHR9XG5cblx0XHRuZXcgTm90aWNlKGAke2VudGl0eUxhYmVsfSBwdXNoZWQgc3VjY2Vzc2Z1bGx5YCk7XG5cblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5wdWxsU2luZ2xlRW50aXR5KHN0b3J5SWQsIHRhcmdldCk7XG5cdFx0fSBjYXRjaCAocHVsbEVycikge1xuXHRcdFx0Y29uc3QgcHVsbEVycm9yTWVzc2FnZSA9XG5cdFx0XHRcdHB1bGxFcnIgaW5zdGFuY2VvZiBFcnJvciA/IHB1bGxFcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIHN5bmMgZW50aXR5IGFmdGVyIHB1c2hcIjtcblx0XHRcdG5ldyBOb3RpY2UoYFdhcm5pbmc6ICR7cHVsbEVycm9yTWVzc2FnZX1gLCA1MDAwKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHB1c2hDaGFwdGVyRW50aXR5KGZvbGRlclBhdGg6IHN0cmluZywgY2hhcHRlcklkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdGNvbnN0IGNoYXB0ZXJGaWxlID0gYXdhaXQgdGhpcy5maW5kQ2hhcHRlckZpbGVCeUlkKGZvbGRlclBhdGgsIGNoYXB0ZXJJZCk7XG5cdFx0aWYgKCFjaGFwdGVyRmlsZSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiQ2hhcHRlciBmaWxlIG5vdCBmb3VuZCBsb2NhbGx5XCIpO1xuXHRcdH1cblxuXHRcdGF3YWl0IHRoaXMucHVzaENoYXB0ZXJDb250ZW50QmxvY2tzKGNoYXB0ZXJGaWxlLnBhdGgsIGZvbGRlclBhdGgpO1xuXHRcdGNvbnN0IGxhYmVsID1cblx0XHRcdGNoYXB0ZXJGaWxlLmZyb250bWF0dGVyPy50aXRsZSB8fFxuXHRcdFx0KGNoYXB0ZXJGaWxlLmZyb250bWF0dGVyPy5udW1iZXIgPyBgQ2hhcHRlciAke2NoYXB0ZXJGaWxlLmZyb250bWF0dGVyLm51bWJlcn1gIDogXCJDaGFwdGVyXCIpO1xuXHRcdHJldHVybiBsYWJlbDtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcHVzaFNjZW5lRW50aXR5KGZvbGRlclBhdGg6IHN0cmluZywgc3RvcnlJZDogc3RyaW5nLCBzY2VuZUlkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdGNvbnN0IHNjZW5lRmlsZSA9IGF3YWl0IHRoaXMuZmluZFNjZW5lRmlsZUJ5SWQoZm9sZGVyUGF0aCwgc2NlbmVJZCk7XG5cdFx0aWYgKCFzY2VuZUZpbGUpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlNjZW5lIGZpbGUgbm90IGZvdW5kIGxvY2FsbHlcIik7XG5cdFx0fVxuXG5cdFx0YXdhaXQgdGhpcy5wdXNoU2NlbmVCZWF0cyhzY2VuZUZpbGUucGF0aCwgc3RvcnlJZCk7XG5cdFx0YXdhaXQgdGhpcy5wdXNoU2NlbmVDb250ZW50QmxvY2tzKHNjZW5lRmlsZS5wYXRoLCBmb2xkZXJQYXRoKTtcblxuXHRcdGNvbnN0IGxhYmVsID0gc2NlbmVGaWxlLmZyb250bWF0dGVyPy5nb2FsXG5cdFx0XHQ/IGBTY2VuZTogJHtzY2VuZUZpbGUuZnJvbnRtYXR0ZXIuZ29hbH1gXG5cdFx0XHQ6IFwiU2NlbmVcIjtcblx0XHRyZXR1cm4gbGFiZWw7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHB1c2hDb250ZW50QmxvY2tFbnRpdHkoXG5cdFx0Zm9sZGVyUGF0aDogc3RyaW5nLFxuXHRcdGNvbnRlbnRCbG9ja0lkOiBzdHJpbmcsXG5cdFx0c3RvcnlUaXRsZTogc3RyaW5nXG5cdCk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0Y29uc3QgY29udGVudHNGb2xkZXJQYXRoID0gYCR7Zm9sZGVyUGF0aH0vMDMtY29udGVudHNgO1xuXHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKGNvbnRlbnRzRm9sZGVyUGF0aCk7XG5cblx0XHRjb25zdCBsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmluZENvbnRlbnRCbG9ja0J5SWQoY29udGVudHNGb2xkZXJQYXRoLCBjb250ZW50QmxvY2tJZCk7XG5cdFx0aWYgKCFsb2NhbENvbnRlbnRCbG9jaykge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiQ29udGVudCBibG9jayBmaWxlIG5vdCBmb3VuZCBsb2NhbGx5XCIpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHVwZGF0ZWRCbG9jayA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnVwZGF0ZUNvbnRlbnRCbG9jayhjb250ZW50QmxvY2tJZCwge1xuXHRcdFx0Y29udGVudDogbG9jYWxDb250ZW50QmxvY2suY29udGVudCxcblx0XHRcdG1ldGFkYXRhOiBsb2NhbENvbnRlbnRCbG9jay5tZXRhZGF0YSxcblx0XHRcdHR5cGU6IGxvY2FsQ29udGVudEJsb2NrLnR5cGUsXG5cdFx0XHRraW5kOiBsb2NhbENvbnRlbnRCbG9jay5raW5kLFxuXHRcdFx0b3JkZXJfbnVtOiBsb2NhbENvbnRlbnRCbG9jay5vcmRlcl9udW0gPz8gdW5kZWZpbmVkLFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgdXBkYXRlZEJsb2NrKTtcblx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQ29udGVudEJsb2NrRmlsZSh1cGRhdGVkQmxvY2ssIGZpbGVQYXRoLCBzdG9yeVRpdGxlKTtcblxuXHRcdHJldHVybiBcIkNvbnRlbnQgYmxvY2tcIjtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZW5zdXJlU3RvcnlGb2xkZXJzKGZvbGRlclBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKGZvbGRlclBhdGgpO1xuXHRcdGF3YWl0IHRoaXMuZW5zdXJlQ29udGVudEZvbGRlcnMoZm9sZGVyUGF0aCk7XG5cdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHMoYCR7Zm9sZGVyUGF0aH0vMDAtY2hhcHRlcnNgKTtcblx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyhgJHtmb2xkZXJQYXRofS8wMS1zY2VuZXNgKTtcblx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyhgJHtmb2xkZXJQYXRofS8wMi1iZWF0c2ApO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBlbnN1cmVDb250ZW50Rm9sZGVycyhmb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBjb250ZW50c0ZvbGRlclBhdGggPSBgJHtmb2xkZXJQYXRofS8wMy1jb250ZW50c2A7XG5cdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHMoY29udGVudHNGb2xkZXJQYXRoKTtcblx0XHRmb3IgKGNvbnN0IHR5cGVGb2xkZXIgb2YgW1wiMDAtdGV4dHNcIiwgXCIwMS1pbWFnZXNcIiwgXCIwMi12aWRlb3NcIiwgXCIwMy1hdWRpb3NcIiwgXCIwNC1lbWJlZHNcIiwgXCIwNS1saW5rc1wiXSkge1xuXHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHMoYCR7Y29udGVudHNGb2xkZXJQYXRofS8ke3R5cGVGb2xkZXJ9YCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyB3cml0ZUNvbnRlbnRCbG9ja1RvRm9sZGVyKFxuXHRcdHN0b3J5Rm9sZGVyUGF0aDogc3RyaW5nLFxuXHRcdHN0b3J5VGl0bGU6IHN0cmluZyxcblx0XHRjb250ZW50QmxvY2s6IENvbnRlbnRCbG9ja1xuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCB0eXBlRm9sZGVyUGF0aCA9IHRoaXMuZmlsZU1hbmFnZXIuZ2V0Q29udGVudEJsb2NrRm9sZGVyUGF0aChcblx0XHRcdHN0b3J5Rm9sZGVyUGF0aCxcblx0XHRcdGNvbnRlbnRCbG9jay50eXBlIHx8IFwidGV4dFwiXG5cdFx0KTtcblx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyh0eXBlRm9sZGVyUGF0aCk7XG5cdFx0Y29uc3QgY29udGVudEJsb2NrRmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoY29udGVudEJsb2NrKTtcblx0XHRjb25zdCBjb250ZW50QmxvY2tGaWxlUGF0aCA9IGAke3R5cGVGb2xkZXJQYXRofS8ke2NvbnRlbnRCbG9ja0ZpbGVOYW1lfWA7XG5cdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoY29udGVudEJsb2NrLCBjb250ZW50QmxvY2tGaWxlUGF0aCwgc3RvcnlUaXRsZSk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHN5bmNTY2VuZXNUb0ZpbGVzeXN0ZW0oXG5cdFx0c2NlbmVzV2l0aEJlYXRzOiBTY2VuZVdpdGhCZWF0c1tdLFxuXHRcdGZvbGRlclBhdGg6IHN0cmluZyxcblx0XHRzdG9yeVRpdGxlOiBzdHJpbmcsXG5cdFx0Y29udGVudEJsb2Nrc0J5U2NlbmU/OiBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2tbXT4sXG5cdFx0Y29udGVudEJsb2Nrc0J5QmVhdD86IE1hcDxzdHJpbmcsIENvbnRlbnRCbG9ja1tdPlxuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBza2lwUmVtb3RlRmV0Y2ggPSBCb29sZWFuKGNvbnRlbnRCbG9ja3NCeVNjZW5lIHx8IGNvbnRlbnRCbG9ja3NCeUJlYXQpO1xuXHRcdGZvciAoY29uc3QgeyBzY2VuZSwgYmVhdHMgfSBvZiBzY2VuZXNXaXRoQmVhdHMpIHtcblx0XHRcdGF3YWl0IHRoaXMud3JpdGVTY2VuZUJ1bmRsZSh7XG5cdFx0XHRcdHN0b3J5VGl0bGUsXG5cdFx0XHRcdGZvbGRlclBhdGgsXG5cdFx0XHRcdHNjZW5lLFxuXHRcdFx0XHRiZWF0cyxcblx0XHRcdFx0c2NlbmVDb250ZW50QmxvY2tzOiBjb250ZW50QmxvY2tzQnlTY2VuZT8uZ2V0KHNjZW5lLmlkKSxcblx0XHRcdFx0YmVhdENvbnRlbnRCbG9ja01hcDogY29udGVudEJsb2Nrc0J5QmVhdCxcblx0XHRcdFx0c2tpcFJlbW90ZUNvbnRlbnRGZXRjaDogc2tpcFJlbW90ZUZldGNoLFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBzeW5jU2NlbmVDb250ZW50QmxvY2tzKFxuXHRcdHNjZW5lOiBTY2VuZSxcblx0XHRiZWF0czogQmVhdFtdLFxuXHRcdGZvbGRlclBhdGg6IHN0cmluZyxcblx0XHRzdG9yeVRpdGxlOiBzdHJpbmdcblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCFzY2VuZS5jaGFwdGVyX2lkKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgY29udGVudEJsb2NrcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRCbG9ja3Moc2NlbmUuY2hhcHRlcl9pZCk7XG5cblx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBjb250ZW50QmxvY2tzKSB7XG5cdFx0XHRjb25zdCByZWZzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEFuY2hvcnMoY29udGVudEJsb2NrLmlkKTtcblx0XHRcdGNvbnN0IGhhc1NjZW5lUmVmID0gcmVmcy5zb21lKFxuXHRcdFx0XHQocmVmKSA9PiByZWYuZW50aXR5X3R5cGUgPT09IFwic2NlbmVcIiAmJiByZWYuZW50aXR5X2lkID09PSBzY2VuZS5pZFxuXHRcdFx0KTtcblx0XHRcdGNvbnN0IGJlYXRJZHMgPSBiZWF0cy5tYXAoKGJlYXQpID0+IGJlYXQuaWQpO1xuXHRcdFx0Y29uc3QgaGFzQmVhdFJlZiA9IHJlZnMuc29tZShcblx0XHRcdFx0KHJlZikgPT4gcmVmLmVudGl0eV90eXBlID09PSBcImJlYXRcIiAmJiBiZWF0SWRzLmluY2x1ZGVzKHJlZi5lbnRpdHlfaWQpXG5cdFx0XHQpO1xuXG5cdFx0XHRpZiAoaGFzU2NlbmVSZWYgfHwgaGFzQmVhdFJlZikge1xuXHRcdFx0XHRhd2FpdCB0aGlzLndyaXRlQ29udGVudEJsb2NrVG9Gb2xkZXIoZm9sZGVyUGF0aCwgc3RvcnlUaXRsZSwgY29udGVudEJsb2NrKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGZpbmRDaGFwdGVyRmlsZUJ5SWQoXG5cdFx0Zm9sZGVyUGF0aDogc3RyaW5nLFxuXHRcdGNoYXB0ZXJJZDogc3RyaW5nXG5cdCk6IFByb21pc2U8eyBwYXRoOiBzdHJpbmc7IGZyb250bWF0dGVyOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgbnVsbCB9IHwgbnVsbD4ge1xuXHRcdGNvbnN0IGNoYXB0ZXJGaWxlcyA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIubGlzdENoYXB0ZXJGaWxlcyhmb2xkZXJQYXRoKTtcblx0XHRmb3IgKGNvbnN0IGNoYXB0ZXJGaWxlUGF0aCBvZiBjaGFwdGVyRmlsZXMpIHtcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGNoYXB0ZXJGaWxlUGF0aCk7XG5cdFx0XHRpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5yZWFkKGZpbGUpO1xuXHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSB0aGlzLmZpbGVNYW5hZ2VyLnBhcnNlRnJvbnRtYXR0ZXIoY29udGVudCk7XG5cdFx0XHRpZiAoZnJvbnRtYXR0ZXIuaWQgPT09IGNoYXB0ZXJJZCkge1xuXHRcdFx0XHRyZXR1cm4geyBwYXRoOiBjaGFwdGVyRmlsZVBhdGgsIGZyb250bWF0dGVyIH07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBmaW5kU2NlbmVGaWxlQnlJZChcblx0XHRmb2xkZXJQYXRoOiBzdHJpbmcsXG5cdFx0c2NlbmVJZDogc3RyaW5nXG5cdCk6IFByb21pc2U8eyBwYXRoOiBzdHJpbmc7IGZyb250bWF0dGVyOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgbnVsbCB9IHwgbnVsbD4ge1xuXHRcdGNvbnN0IHNjZW5lRmlsZXMgPSBhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmxpc3RTdG9yeVNjZW5lRmlsZXMoZm9sZGVyUGF0aCk7XG5cdFx0Zm9yIChjb25zdCBzY2VuZUZpbGVQYXRoIG9mIHNjZW5lRmlsZXMpIHtcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHNjZW5lRmlsZVBhdGgpO1xuXHRcdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkucmVhZChmaWxlKTtcblx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5maWxlTWFuYWdlci5wYXJzZUZyb250bWF0dGVyKGNvbnRlbnQpO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLmlkID09PSBzY2VuZUlkKSB7XG5cdFx0XHRcdHJldHVybiB7IHBhdGg6IHNjZW5lRmlsZVBhdGgsIGZyb250bWF0dGVyIH07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBudWxsO1xuXHR9XG59XG5cbiIsICJpbXBvcnQgeyBDb250ZW50QmxvY2sgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBQYXJzZWRQYXJhZ3JhcGgge1xuXHRjb250ZW50OiBzdHJpbmc7IC8vIFRleHQgd2l0aG91dCB0aGUgbGlua1xuXHRsaW5rTmFtZTogc3RyaW5nIHwgbnVsbDsgLy8gRmlsZSBuYW1lIChpZiBoYXMgbGluaylcblx0b3JpZ2luYWxPcmRlcjogbnVtYmVyOyAvLyBQb3NpdGlvbiBpbiBjaGFwdGVyICgwLWluZGV4ZWQpXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFyc2VkU2NlbmUge1xuXHRsaW5rTmFtZTogc3RyaW5nIHwgbnVsbDsgLy8gRmlsZSBuYW1lIChpZiBoYXMgbGluaylcblx0Z29hbDogc3RyaW5nOyAvLyBUZXh0IGJlZm9yZSBcIi1cIiBvciBmdWxsIHRleHQgaWYgbm8gXCItXCJcblx0dGltZVJlZjogc3RyaW5nOyAvLyBUZXh0IGFmdGVyIFwiLVwiIG9yIGVtcHR5XG5cdG9yaWdpbmFsT3JkZXI6IG51bWJlcjsgLy8gUG9zaXRpb24gaW4gY2hhcHRlciAoMC1pbmRleGVkKVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnNlZEJlYXQge1xuXHRsaW5rTmFtZTogc3RyaW5nIHwgbnVsbDsgLy8gRmlsZSBuYW1lIChpZiBoYXMgbGluaylcblx0aW50ZW50OiBzdHJpbmc7IC8vIFRleHQgYmVmb3JlIFwiLT5cIiBvciBmdWxsIHRleHQgaWYgbm8gXCItPlwiXG5cdG91dGNvbWU6IHN0cmluZzsgLy8gVGV4dCBhZnRlciBcIi0+XCIgb3IgZW1wdHlcblx0b3JpZ2luYWxPcmRlcjogbnVtYmVyOyAvLyBQb3NpdGlvbiByZWxhdGl2ZSB0byBzY2VuZSAoMC1pbmRleGVkKVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnNlZFNlY3Rpb24ge1xuXHR0eXBlOiBcInByb3NlXCIgfCBcInNjZW5lXCIgfCBcImJlYXRcIjtcblx0cHJvc2U/OiBQYXJzZWRQYXJhZ3JhcGg7XG5cdHNjZW5lPzogUGFyc2VkU2NlbmU7XG5cdGJlYXQ/OiBQYXJzZWRCZWF0O1xuXHRvcmlnaW5hbE9yZGVyOiBudW1iZXI7IC8vIEFic29sdXRlIHBvc2l0aW9uIGluIGNoYXB0ZXIgKDAtaW5kZXhlZClcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIaWVyYXJjaGljYWxQcm9zZSB7XG5cdHNlY3Rpb25zOiBQYXJzZWRTZWN0aW9uW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFyc2VkU2NlbmVCZWF0TGlzdEl0ZW0ge1xuXHR0eXBlOiBcInNjZW5lXCIgfCBcImJlYXRcIjtcblx0bGlua05hbWU6IHN0cmluZyB8IG51bGw7XG5cdGRpc3BsYXlUZXh0OiBzdHJpbmc7XG5cdGhhc1Byb3NlOiBib29sZWFuO1xuXHRpbmRlbnRMZXZlbDogbnVtYmVyOyAvLyAwIGZvciBzY2VuZSwgMSBmb3IgYmVhdFxuXHRvcmlnaW5hbE9yZGVyOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFyc2VkU2NlbmVCZWF0TGlzdCB7XG5cdGl0ZW1zOiBQYXJzZWRTY2VuZUJlYXRMaXN0SXRlbVtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnNlZENoYXB0ZXJMaXN0SXRlbSB7XG5cdHR5cGU6IFwiY2hhcHRlclwiIHwgXCJzY2VuZVwiIHwgXCJiZWF0XCI7XG5cdGxpbmtOYW1lOiBzdHJpbmcgfCBudWxsO1xuXHRkaXNwbGF5VGV4dDogc3RyaW5nO1xuXHRoYXNQcm9zZTogYm9vbGVhbjtcblx0aW5kZW50TGV2ZWw6IG51bWJlcjsgLy8gMCBmb3IgY2hhcHRlciwgMSBmb3Igc2NlbmUsIDIgZm9yIGJlYXRcblx0b3JpZ2luYWxPcmRlcjogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnNlZENoYXB0ZXJMaXN0IHtcblx0aXRlbXM6IFBhcnNlZENoYXB0ZXJMaXN0SXRlbVtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnNlZEJlYXRMaXN0SXRlbSB7XG5cdGxpbmtOYW1lOiBzdHJpbmcgfCBudWxsO1xuXHRkaXNwbGF5VGV4dDogc3RyaW5nO1xuXHRoYXNQcm9zZTogYm9vbGVhbjtcblx0b3JpZ2luYWxPcmRlcjogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnNlZEJlYXRMaXN0IHtcblx0aXRlbXM6IFBhcnNlZEJlYXRMaXN0SXRlbVtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbnRlbnRCbG9ja0NvbXBhcmlzb24ge1xuXHRwYXJhZ3JhcGg6IFBhcnNlZFBhcmFncmFwaDtcblx0bG9jYWxDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayB8IG51bGw7IC8vIEZyb20gLm1kIGZpbGVcblx0cmVtb3RlQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2sgfCBudWxsOyAvLyBGcm9tIEFQSVxuXHRzdGF0dXM6IFwibmV3XCIgfCBcInVuY2hhbmdlZFwiIHwgXCJsb2NhbF9tb2RpZmllZFwiIHwgXCJyZW1vdGVfbW9kaWZpZWRcIiB8IFwiY29uZmxpY3RcIjtcbn1cblxuLyoqXG4gKiBQYXJzZSB0aGUgUHJvc2Ugc2VjdGlvbiBmcm9tIGEgY2hhcHRlciBtYXJrZG93biBjb250ZW50XG4gKiBFeHRyYWN0cyBoaWVyYXJjaGljYWwgc3RydWN0dXJlOiBzY2VuZXMgKCMjKSwgYmVhdHMgKCMjIyksIGFuZCBjb250ZW50IGJsb2Nrc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VIaWVyYXJjaGljYWxQcm9zZShjaGFwdGVyQ29udGVudDogc3RyaW5nKTogSGllcmFyY2hpY2FsUHJvc2Uge1xuXHRjb25zdCBzZWN0aW9uczogUGFyc2VkU2VjdGlvbltdID0gW107XG5cblx0Ly8gRXh0cmFjdCBjb250ZW50IGFmdGVyIGZyb250bWF0dGVyXG5cdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBjaGFwdGVyQ29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuXHRjb25zdCBjb250ZW50U3RhcnQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXS5sZW5ndGggOiAwO1xuXHRjb25zdCBib2R5Q29udGVudCA9IGNoYXB0ZXJDb250ZW50LnN1YnN0cmluZyhjb250ZW50U3RhcnQpLnRyaW0oKTtcblxuXHQvLyBGaW5kIHRoZSBcIiMjIENoYXB0ZXIgTjoge3RpdGxlfVwiIHNlY3Rpb25cblx0Ly8gQ2FwdHVyZSBldmVyeXRoaW5nIHVudGlsIHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50IHNpbmNlIFNjZW5lIGFuZCBCZWF0IGFyZSBwYXJ0IG9mIHRoZSBjaGFwdGVyIHNlY3Rpb25cblx0Ly8gQWNjZXB0IHdpdGggb3Igd2l0aG91dCBibGFuayBsaW5lIGFmdGVyIHRoZSBjaGFwdGVyIGhlYWRlclxuXHQvLyBVc2Ugbm9uLWdyZWVkeSBtYXRjaCB0byBzdG9wIGF0IG5leHQgIyMgQ2hhcHRlciBpZiBpdCBleGlzdHMgKHRvIGF2b2lkIGNhcHR1cmluZyBkdXBsaWNhdGUgc2VjdGlvbnMpXG5cdGNvbnN0IGNoYXB0ZXJTZWN0aW9uTWF0Y2ggPSBib2R5Q29udGVudC5tYXRjaCgvIyNcXHMrQ2hhcHRlclxccytcXGQrOlxccytbXlxcbl0rXFxzKlxcbisoW1xcc1xcU10qPykoPz1cXG4jI1xccytDaGFwdGVyXFxzK1xcZCs6fCQpLyk7XG5cdGlmICghY2hhcHRlclNlY3Rpb25NYXRjaCkge1xuXHRcdC8vIFRyeSB3aXRob3V0IHJlcXVpcmluZyBuZXdsaW5lIChjb250ZW50IG9uIHNhbWUgbGluZSBhcyBjaGFwdGVyIGhlYWRlcilcblx0XHRjb25zdCBjaGFwdGVyU2VjdGlvbk1hdGNoU2FtZUxpbmUgPSBib2R5Q29udGVudC5tYXRjaCgvIyNcXHMrQ2hhcHRlclxccytcXGQrOlxccytbXlxcbl0rXFxzKyhbXlxcbl0rKS8pO1xuXHRcdGlmIChjaGFwdGVyU2VjdGlvbk1hdGNoU2FtZUxpbmUpIHtcblx0XHRcdGNvbnN0IHByb3NlQ29udGVudCA9IGNoYXB0ZXJTZWN0aW9uTWF0Y2hTYW1lTGluZVsxXS50cmltKCk7XG5cdFx0XHQvLyBQcm9jZXNzIHNpbmdsZSBsaW5lIGNvbnRlbnRcblx0XHRcdGlmIChwcm9zZUNvbnRlbnQubGVuZ3RoID4gMCAmJiAhcHJvc2VDb250ZW50LnN0YXJ0c1dpdGgoJyMnKSkge1xuXHRcdFx0XHRjb25zdCBwYXJhZ3JhcGg6IFBhcnNlZFBhcmFncmFwaCA9IHtcblx0XHRcdFx0XHRjb250ZW50OiBwcm9zZUNvbnRlbnQsXG5cdFx0XHRcdFx0bGlua05hbWU6IG51bGwsXG5cdFx0XHRcdFx0b3JpZ2luYWxPcmRlcjogMCxcblx0XHRcdFx0fTtcblx0XHRcdFx0c2VjdGlvbnMucHVzaCh7XG5cdFx0XHRcdFx0dHlwZTogXCJwcm9zZVwiLFxuXHRcdFx0XHRcdHByb3NlOiBwYXJhZ3JhcGgsXG5cdFx0XHRcdFx0b3JpZ2luYWxPcmRlcjogMCxcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4geyBzZWN0aW9ucyB9O1xuXHRcdH1cblx0XHRyZXR1cm4geyBzZWN0aW9uczogW10gfTtcblx0fVxuXG5cdFx0Y29uc3QgcHJvc2VDb250ZW50ID0gY2hhcHRlclNlY3Rpb25NYXRjaFsxXS50cmltKCk7XG5cdGNvbnN0IGxpbmVzID0gcHJvc2VDb250ZW50LnNwbGl0KC9cXG4vKTtcblxuXHRsZXQgY3VycmVudFNjZW5lOiBQYXJzZWRTY2VuZSB8IG51bGwgPSBudWxsO1xuXHRsZXQgY3VycmVudEJlYXQ6IFBhcnNlZEJlYXQgfCBudWxsID0gbnVsbDtcblx0bGV0IG9yZGVyID0gMDtcblxuXHRmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y29uc3QgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTtcblxuXHRcdC8vIEVtcHR5IGxpbmUgLSBza2lwXG5cdFx0aWYgKCFsaW5lKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBmb3Igc2NlbmUgaGVhZGVyIEZJUlNUOiAjIyBTY2VuZTogW1tsaW5rfHRleHRdXSBvciAjIyBTY2VuZTogdGV4dFxuXHRcdGNvbnN0IHNjZW5lTWF0Y2ggPSBsaW5lLm1hdGNoKC9eIyNcXHMrU2NlbmU6XFxzKiguKykkLyk7XG5cdFx0aWYgKHNjZW5lTWF0Y2gpIHtcblx0XHRcdGNvbnN0IHNjZW5lVGV4dCA9IHNjZW5lTWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0Y29uc3QgcGFyc2VkU2NlbmUgPSBwYXJzZVNjZW5lSGVhZGVyKHNjZW5lVGV4dCk7XG5cdFx0XHRwYXJzZWRTY2VuZS5vcmlnaW5hbE9yZGVyID0gb3JkZXIrKztcblx0XHRcdGN1cnJlbnRTY2VuZSA9IHBhcnNlZFNjZW5lO1xuXHRcdFx0Y3VycmVudEJlYXQgPSBudWxsOyAvLyBSZXNldCBiZWF0IHdoZW4gbmV3IHNjZW5lIHN0YXJ0c1xuXHRcdFx0c2VjdGlvbnMucHVzaCh7XG5cdFx0XHRcdHR5cGU6IFwic2NlbmVcIixcblx0XHRcdFx0c2NlbmU6IHBhcnNlZFNjZW5lLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBwYXJzZWRTY2VuZS5vcmlnaW5hbE9yZGVyLFxuXHRcdFx0fSk7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBmb3IgYmVhdCBoZWFkZXI6ICMjIyBCZWF0OiBbW2xpbmt8dGV4dF1dIG9yICMjIyBCZWF0OiB0ZXh0XG5cdFx0Y29uc3QgYmVhdE1hdGNoID0gbGluZS5tYXRjaCgvXiMjI1xccytCZWF0OlxccyooLispJC8pO1xuXHRcdGlmIChiZWF0TWF0Y2gpIHtcblx0XHRcdGNvbnN0IGJlYXRUZXh0ID0gYmVhdE1hdGNoWzFdLnRyaW0oKTtcblx0XHRcdGNvbnN0IHBhcnNlZEJlYXQgPSBwYXJzZUJlYXRIZWFkZXIoYmVhdFRleHQpO1xuXHRcdFx0cGFyc2VkQmVhdC5vcmlnaW5hbE9yZGVyID0gb3JkZXIrKztcblx0XHRcdGN1cnJlbnRCZWF0ID0gcGFyc2VkQmVhdDtcblx0XHRcdHNlY3Rpb25zLnB1c2goe1xuXHRcdFx0XHR0eXBlOiBcImJlYXRcIixcblx0XHRcdFx0YmVhdDogcGFyc2VkQmVhdCxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogcGFyc2VkQmVhdC5vcmlnaW5hbE9yZGVyLFxuXHRcdFx0fSk7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBTa2lwIG90aGVyIG1hcmtkb3duIGhlYWRlcnMgKGUuZy4sICMgVGl0bGUsICMjIENhcFx1MDBFRHR1bG8sIGV0Yy4pXG5cdFx0Ly8gQnV0IGRvbid0IHNraXAgU2NlbmUgYW5kIEJlYXQgaGVhZGVycyB3aGljaCBhcmUgcGFydCBvZiB0aGUgY2hhcHRlciBjb250ZW50XG5cdFx0aWYgKGxpbmUuc3RhcnRzV2l0aCgnIycpICYmICFsaW5lLm1hdGNoKC9eIyNcXHMrU2NlbmU6LykgJiYgIWxpbmUubWF0Y2goL14jIyNcXHMrQmVhdDovKSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIGNvbnRlbnQgYmxvY2s6IFtbbGlua3xjb250ZW50XV0gb3IgcGxhaW4gdGV4dFxuXHRcdC8vIE1hdGNoIGNhbiBoYXZlIG9wdGlvbmFsIHdoaXRlc3BhY2UgYXJvdW5kIHRoZSBsaW5rXG5cdFx0Y29uc3QgcHJvc2VNYXRjaCA9IGxpbmUubWF0Y2goL15cXHMqXFxbXFxbKFteXFx8XSspXFx8KFteXFxdXSspXFxdXFxdXFxzKiQvKTtcblx0XHRpZiAocHJvc2VNYXRjaCkge1xuXHRcdFx0Y29uc3QgbGlua05hbWUgPSBwcm9zZU1hdGNoWzFdLnRyaW0oKTtcblx0XHRcdGNvbnN0IGNvbnRlbnQgPSBwcm9zZU1hdGNoWzJdLnRyaW0oKTtcblx0XHRcdGNvbnN0IHBhcmFncmFwaDogUGFyc2VkUGFyYWdyYXBoID0ge1xuXHRcdFx0XHRjb250ZW50LFxuXHRcdFx0XHRsaW5rTmFtZSxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogb3JkZXIrKyxcblx0XHRcdH07XG5cdFx0XHRzZWN0aW9ucy5wdXNoKHtcblx0XHRcdFx0dHlwZTogXCJwcm9zZVwiLFxuXHRcdFx0XHRwcm9zZTogcGFyYWdyYXBoLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBwYXJhZ3JhcGgub3JpZ2luYWxPcmRlcixcblx0XHRcdH0pO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gUGxhaW4gdGV4dCBwYXJhZ3JhcGggKG5ldyBjb250ZW50IGJsb2NrIHdpdGhvdXQgbGluaylcblx0XHQvLyBPbmx5IGlmIGl0J3Mgbm90IGEgbWFya2Rvd24gaGVhZGVyIGFuZCBub3QgZW1wdHlcblx0XHRpZiAobGluZS5sZW5ndGggPiAwICYmICFsaW5lLnN0YXJ0c1dpdGgoJyMnKSkge1xuXHRcdFx0Y29uc3QgcGFyYWdyYXBoOiBQYXJzZWRQYXJhZ3JhcGggPSB7XG5cdFx0XHRcdGNvbnRlbnQ6IGxpbmUsXG5cdFx0XHRcdGxpbmtOYW1lOiBudWxsLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBvcmRlcisrLFxuXHRcdFx0fTtcblx0XHRcdHNlY3Rpb25zLnB1c2goe1xuXHRcdFx0XHR0eXBlOiBcInByb3NlXCIsXG5cdFx0XHRcdHByb3NlOiBwYXJhZ3JhcGgsXG5cdFx0XHRcdG9yaWdpbmFsT3JkZXI6IHBhcmFncmFwaC5vcmlnaW5hbE9yZGVyLFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHsgc2VjdGlvbnMgfTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHNjZW5lIGhlYWRlcjogIyMgW1tsaW5rfGdvYWwgLSB0aW1lUmVmXV0gb3IgIyMgZ29hbCAtIHRpbWVSZWYgb3IgIyMgZ29hbFxuICovXG5mdW5jdGlvbiBwYXJzZVNjZW5lSGVhZGVyKHRleHQ6IHN0cmluZyk6IFBhcnNlZFNjZW5lIHtcblx0Ly8gQ2hlY2sgaWYgaXQncyBhIGxpbmsgZm9ybWF0OiBbW2xpbmt8dGV4dF1dXG5cdGNvbnN0IGxpbmtNYXRjaCA9IHRleHQubWF0Y2goL15cXFtcXFsoW15cXHxdKylcXHwoW15cXF1dKylcXF1cXF0kLyk7XG5cdGlmIChsaW5rTWF0Y2gpIHtcblx0XHRjb25zdCBsaW5rTmFtZSA9IGxpbmtNYXRjaFsxXS50cmltKCk7XG5cdFx0Y29uc3QgZGlzcGxheVRleHQgPSBsaW5rTWF0Y2hbMl0udHJpbSgpO1xuXHRcdGNvbnN0IHsgZ29hbCwgdGltZVJlZiB9ID0gcGFyc2VTY2VuZVRleHQoZGlzcGxheVRleHQpO1xuXHRcdHJldHVybiB7XG5cdFx0XHRsaW5rTmFtZSxcblx0XHRcdGdvYWwsXG5cdFx0XHR0aW1lUmVmLFxuXHRcdFx0b3JpZ2luYWxPcmRlcjogMCwgLy8gV2lsbCBiZSBzZXQgYnkgY2FsbGVyXG5cdFx0fTtcblx0fVxuXG5cdC8vIENoZWNrIGlmIGl0J3MganVzdCBhIGxpbms6IFtbbGlua11dXG5cdGNvbnN0IHNpbXBsZUxpbmtNYXRjaCA9IHRleHQubWF0Y2goL15cXFtcXFsoW15cXF1dKylcXF1cXF0kLyk7XG5cdGlmIChzaW1wbGVMaW5rTWF0Y2gpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bGlua05hbWU6IHNpbXBsZUxpbmtNYXRjaFsxXS50cmltKCksXG5cdFx0XHRnb2FsOiBcIlwiLFxuXHRcdFx0dGltZVJlZjogXCJcIixcblx0XHRcdG9yaWdpbmFsT3JkZXI6IDAsXG5cdFx0fTtcblx0fVxuXG5cdC8vIFBsYWluIHRleHQgLSBwYXJzZSBnb2FsIGFuZCB0aW1lUmVmXG5cdGNvbnN0IHsgZ29hbCwgdGltZVJlZiB9ID0gcGFyc2VTY2VuZVRleHQodGV4dCk7XG5cdHJldHVybiB7XG5cdFx0bGlua05hbWU6IG51bGwsXG5cdFx0Z29hbCxcblx0XHR0aW1lUmVmLFxuXHRcdG9yaWdpbmFsT3JkZXI6IDAsXG5cdH07XG59XG5cbi8qKlxuICogUGFyc2Ugc2NlbmUgdGV4dCB0byBleHRyYWN0IGdvYWwgYW5kIHRpbWVSZWZcbiAqIEZvcm1hdDogXCJnb2FsIC0gdGltZVJlZlwiIG9yIGp1c3QgXCJnb2FsXCJcbiAqL1xuZnVuY3Rpb24gcGFyc2VTY2VuZVRleHQodGV4dDogc3RyaW5nKTogeyBnb2FsOiBzdHJpbmc7IHRpbWVSZWY6IHN0cmluZyB9IHtcblx0Y29uc3QgcGFydHMgPSB0ZXh0LnNwbGl0KC9cXHMqLVxccyovKTtcblx0aWYgKHBhcnRzLmxlbmd0aCA+PSAyKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGdvYWw6IHBhcnRzWzBdLnRyaW0oKSxcblx0XHRcdHRpbWVSZWY6IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLSBcIikudHJpbSgpLCAvLyBKb2luIGluIGNhc2UgdGhlcmUgYXJlIG11bHRpcGxlIFwiLVwiXG5cdFx0fTtcblx0fVxuXHRyZXR1cm4ge1xuXHRcdGdvYWw6IHRleHQudHJpbSgpLFxuXHRcdHRpbWVSZWY6IFwiXCIsXG5cdH07XG59XG5cbi8qKlxuICogUGFyc2UgYSBiZWF0IGhlYWRlcjogIyMjIFtbbGlua3xpbnRlbnQgLT4gb3V0Y29tZV1dIG9yICMjIyBpbnRlbnQgLT4gb3V0Y29tZSBvciAjIyMgaW50ZW50XG4gKi9cbmZ1bmN0aW9uIHBhcnNlQmVhdEhlYWRlcih0ZXh0OiBzdHJpbmcpOiBQYXJzZWRCZWF0IHtcblx0Ly8gQ2hlY2sgaWYgaXQncyBhIGxpbmsgZm9ybWF0OiBbW2xpbmt8dGV4dF1dXG5cdGNvbnN0IGxpbmtNYXRjaCA9IHRleHQubWF0Y2goL15cXFtcXFsoW15cXHxdKylcXHwoW15cXF1dKylcXF1cXF0kLyk7XG5cdGlmIChsaW5rTWF0Y2gpIHtcblx0XHRjb25zdCBsaW5rTmFtZSA9IGxpbmtNYXRjaFsxXS50cmltKCk7XG5cdFx0Y29uc3QgZGlzcGxheVRleHQgPSBsaW5rTWF0Y2hbMl0udHJpbSgpO1xuXHRcdGNvbnN0IHsgaW50ZW50LCBvdXRjb21lIH0gPSBwYXJzZUJlYXRUZXh0KGRpc3BsYXlUZXh0KTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bGlua05hbWUsXG5cdFx0XHRpbnRlbnQsXG5cdFx0XHRvdXRjb21lLFxuXHRcdFx0b3JpZ2luYWxPcmRlcjogMCwgLy8gV2lsbCBiZSBzZXQgYnkgY2FsbGVyXG5cdFx0fTtcblx0fVxuXG5cdC8vIENoZWNrIGlmIGl0J3MganVzdCBhIGxpbms6IFtbbGlua11dXG5cdGNvbnN0IHNpbXBsZUxpbmtNYXRjaCA9IHRleHQubWF0Y2goL15cXFtcXFsoW15cXF1dKylcXF1cXF0kLyk7XG5cdGlmIChzaW1wbGVMaW5rTWF0Y2gpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bGlua05hbWU6IHNpbXBsZUxpbmtNYXRjaFsxXS50cmltKCksXG5cdFx0XHRpbnRlbnQ6IFwiXCIsXG5cdFx0XHRvdXRjb21lOiBcIlwiLFxuXHRcdFx0b3JpZ2luYWxPcmRlcjogMCxcblx0XHR9O1xuXHR9XG5cblx0Ly8gUGxhaW4gdGV4dCAtIHBhcnNlIGludGVudCBhbmQgb3V0Y29tZVxuXHRjb25zdCB7IGludGVudCwgb3V0Y29tZSB9ID0gcGFyc2VCZWF0VGV4dCh0ZXh0KTtcblx0cmV0dXJuIHtcblx0XHRsaW5rTmFtZTogbnVsbCxcblx0XHRpbnRlbnQsXG5cdFx0b3V0Y29tZSxcblx0XHRvcmlnaW5hbE9yZGVyOiAwLFxuXHR9O1xufVxuXG4vKipcbiAqIFBhcnNlIGJlYXQgdGV4dCB0byBleHRyYWN0IGludGVudCBhbmQgb3V0Y29tZVxuICogRm9ybWF0OiBcImludGVudCAtPiBvdXRjb21lXCIgb3IganVzdCBcImludGVudFwiXG4gKi9cbmZ1bmN0aW9uIHBhcnNlQmVhdFRleHQodGV4dDogc3RyaW5nKTogeyBpbnRlbnQ6IHN0cmluZzsgb3V0Y29tZTogc3RyaW5nIH0ge1xuXHRjb25zdCBwYXJ0cyA9IHRleHQuc3BsaXQoL1xccyotPlxccyovKTtcblx0aWYgKHBhcnRzLmxlbmd0aCA+PSAyKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGludGVudDogcGFydHNbMF0udHJpbSgpLFxuXHRcdFx0b3V0Y29tZTogcGFydHMuc2xpY2UoMSkuam9pbihcIiAtPiBcIikudHJpbSgpLCAvLyBKb2luIGluIGNhc2UgdGhlcmUgYXJlIG11bHRpcGxlIFwiLT5cIlxuXHRcdH07XG5cdH1cblx0cmV0dXJuIHtcblx0XHRpbnRlbnQ6IHRleHQudHJpbSgpLFxuXHRcdG91dGNvbWU6IFwiXCIsXG5cdH07XG59XG5cbi8qKlxuICogTGVnYWN5IGZ1bmN0aW9uIC0ga2VwdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICogUGFyc2UgdGhlIFByb3NlIHNlY3Rpb24gZnJvbSBhIGNoYXB0ZXIgbWFya2Rvd24gY29udGVudFxuICogRXh0cmFjdHMgcGFyYWdyYXBocyBhbmQgaWRlbnRpZmllcyB3aGljaCBvbmVzIGhhdmUgbGlua3MgdG8gY29udGVudCBibG9ja3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ2hhcHRlclByb3NlKGNoYXB0ZXJDb250ZW50OiBzdHJpbmcpOiBQYXJzZWRQYXJhZ3JhcGhbXSB7XG5cdGNvbnN0IGhpZXJhcmNoaWNhbCA9IHBhcnNlSGllcmFyY2hpY2FsUHJvc2UoY2hhcHRlckNvbnRlbnQpO1xuXHRjb25zdCBwYXJhZ3JhcGhzOiBQYXJzZWRQYXJhZ3JhcGhbXSA9IFtdO1xuXG5cdGZvciAoY29uc3Qgc2VjdGlvbiBvZiBoaWVyYXJjaGljYWwuc2VjdGlvbnMpIHtcblx0XHRpZiAoc2VjdGlvbi50eXBlID09PSBcInByb3NlXCIgJiYgc2VjdGlvbi5wcm9zZSkge1xuXHRcdFx0cGFyYWdyYXBocy5wdXNoKHNlY3Rpb24ucHJvc2UpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBwYXJhZ3JhcGhzO1xufVxuXG4vKipcbiAqIENvbXBhcmUgbG9jYWwgYW5kIHJlbW90ZSBjb250ZW50IGJsb2NrcyB0byBkZXRlcm1pbmUgc3RhdHVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlQ29udGVudEJsb2Nrcyhcblx0cGFyYWdyYXBoOiBQYXJzZWRQYXJhZ3JhcGgsXG5cdGxvY2FsQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2sgfCBudWxsLFxuXHRyZW1vdGVDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayB8IG51bGxcbik6IENvbnRlbnRCbG9ja0NvbXBhcmlzb25bXCJzdGF0dXNcIl0ge1xuXHRjb25zdCBwYXJhZ3JhcGhDb250ZW50ID0gcGFyYWdyYXBoLmNvbnRlbnQudHJpbSgpO1xuXG5cdC8vIFBhcmFncmFwaCB3aXRob3V0IGxpbmsgLSBjaGVjayBpZiByZW1vdGUgZXhpc3RzIHdpdGggc2FtZSBjb250ZW50XG5cdGlmICghcGFyYWdyYXBoLmxpbmtOYW1lKSB7XG5cdFx0aWYgKHJlbW90ZUNvbnRlbnRCbG9jayAmJiByZW1vdGVDb250ZW50QmxvY2suY29udGVudC50cmltKCkgPT09IHBhcmFncmFwaENvbnRlbnQpIHtcblx0XHRcdC8vIFJlbW90ZSBleGlzdHMgd2l0aCBzYW1lIGNvbnRlbnQgLSB0cmVhdCBhcyB1bmNoYW5nZWQgaWYgbG9jYWwgbWF0Y2hlcywgb3RoZXJ3aXNlIG5lZWQgdG8gY3JlYXRlIGxvY2FsIGZpbGVcblx0XHRcdGlmIChsb2NhbENvbnRlbnRCbG9jayAmJiBsb2NhbENvbnRlbnRCbG9jay5pZCA9PT0gcmVtb3RlQ29udGVudEJsb2NrLmlkKSB7XG5cdFx0XHRcdHJldHVybiBcInVuY2hhbmdlZFwiO1xuXHRcdFx0fVxuXHRcdFx0Ly8gUmVtb3RlIGV4aXN0cyBidXQgbm8gbG9jYWwgZmlsZSAtIG5lZWQgdG8gY3JlYXRlIGxvY2FsIGZpbGUgKHRyZWF0IGFzIHVuY2hhbmdlZCBmb3IgY29udGVudCwgYnV0IG5lZWQgZmlsZSBjcmVhdGlvbilcblx0XHRcdHJldHVybiBcInVuY2hhbmdlZFwiO1xuXHRcdH1cblx0XHQvLyBObyByZW1vdGUgbWF0Y2ggLSB0aGlzIGlzIGEgbmV3IGNvbnRlbnQgYmxvY2tcblx0XHRyZXR1cm4gXCJuZXdcIjtcblx0fVxuXG5cdC8vIE5vIGxvY2FsIGZpbGUgZm91bmQgKHNob3VsZG4ndCBoYXBwZW4gaWYgbGluayBleGlzdHMsIGJ1dCBoYW5kbGUgZ3JhY2VmdWxseSlcblx0aWYgKCFsb2NhbENvbnRlbnRCbG9jaykge1xuXHRcdC8vIElmIHJlbW90ZSBleGlzdHMgd2l0aCBzYW1lIGNvbnRlbnQsIHRyZWF0IGFzIHJlbW90ZV9tb2RpZmllZFxuXHRcdGlmIChyZW1vdGVDb250ZW50QmxvY2sgJiYgcmVtb3RlQ29udGVudEJsb2NrLmNvbnRlbnQudHJpbSgpID09PSBwYXJhZ3JhcGhDb250ZW50KSB7XG5cdFx0XHRyZXR1cm4gXCJyZW1vdGVfbW9kaWZpZWRcIjtcblx0XHR9XG5cdFx0cmV0dXJuIFwibmV3XCI7XG5cdH1cblxuXHQvLyBObyByZW1vdGUgY29udGVudCBibG9jayBmb3VuZCAoZGVsZXRlZCBvbiBzZXJ2ZXI/KVxuXHRpZiAoIXJlbW90ZUNvbnRlbnRCbG9jaykge1xuXHRcdHJldHVybiBcImxvY2FsX21vZGlmaWVkXCI7XG5cdH1cblxuXHRjb25zdCBsb2NhbENvbnRlbnQgPSBsb2NhbENvbnRlbnRCbG9jay5jb250ZW50LnRyaW0oKTtcblx0Y29uc3QgcmVtb3RlQ29udGVudCA9IHJlbW90ZUNvbnRlbnRCbG9jay5jb250ZW50LnRyaW0oKTtcblxuXHQvLyBCb3RoIGxvY2FsIGFuZCByZW1vdGUgbWF0Y2ggcGFyYWdyYXBoXG5cdGlmIChsb2NhbENvbnRlbnQgPT09IHBhcmFncmFwaENvbnRlbnQgJiYgcmVtb3RlQ29udGVudCA9PT0gcGFyYWdyYXBoQ29udGVudCkge1xuXHRcdHJldHVybiBcInVuY2hhbmdlZFwiO1xuXHR9XG5cblx0Ly8gT25seSBwYXJhZ3JhcGggY2hhbmdlZCAobG9jYWwgZWRpdClcblx0aWYgKHBhcmFncmFwaENvbnRlbnQgIT09IGxvY2FsQ29udGVudCAmJiBwYXJhZ3JhcGhDb250ZW50ICE9PSByZW1vdGVDb250ZW50ICYmIGxvY2FsQ29udGVudCA9PT0gcmVtb3RlQ29udGVudCkge1xuXHRcdHJldHVybiBcImxvY2FsX21vZGlmaWVkXCI7XG5cdH1cblxuXHQvLyBPbmx5IHJlbW90ZSBjaGFuZ2VkIChzZXJ2ZXIgZWRpdClcblx0aWYgKGxvY2FsQ29udGVudCA9PT0gcGFyYWdyYXBoQ29udGVudCAmJiByZW1vdGVDb250ZW50ICE9PSBwYXJhZ3JhcGhDb250ZW50KSB7XG5cdFx0cmV0dXJuIFwicmVtb3RlX21vZGlmaWVkXCI7XG5cdH1cblxuXHQvLyBCb3RoIGNoYW5nZWQgKGNvbmZsaWN0KVxuXHRpZiAocGFyYWdyYXBoQ29udGVudCAhPT0gbG9jYWxDb250ZW50ICYmIHBhcmFncmFwaENvbnRlbnQgIT09IHJlbW90ZUNvbnRlbnQgJiYgbG9jYWxDb250ZW50ICE9PSByZW1vdGVDb250ZW50KSB7XG5cdFx0cmV0dXJuIFwiY29uZmxpY3RcIjtcblx0fVxuXG5cdC8vIFBhcmFncmFwaCBtYXRjaGVzIHJlbW90ZSBidXQgbm90IGxvY2FsIChsb2NhbCBmaWxlIG91dGRhdGVkKVxuXHRpZiAocGFyYWdyYXBoQ29udGVudCA9PT0gcmVtb3RlQ29udGVudCAmJiBsb2NhbENvbnRlbnQgIT09IHJlbW90ZUNvbnRlbnQpIHtcblx0XHRyZXR1cm4gXCJyZW1vdGVfbW9kaWZpZWRcIjtcblx0fVxuXG5cdC8vIERlZmF1bHQgdG8gY29uZmxpY3QgaWYgdW5jbGVhclxuXHRyZXR1cm4gXCJjb25mbGljdFwiO1xufVxuXG4vKipcbiAqIFBhcnNlIHRoZSBcIiMjIFNjZW5lcyAmIEJlYXRzXCIgbGlzdCBmcm9tIGNoYXB0ZXIgY29udGVudFxuICogRm9ybWF0OlxuICogIyMgU2NlbmVzICYgQmVhdHNcbiAqIFxuICogKyBbW2xpbmt8U2NlbmUgTjogdGV4dF1dXG4gKiAgIC0gW1tsaW5rfEJlYXQgTjogdGV4dF1dXG4gKiAgICsgW1tsaW5rfEJlYXQgTjogdGV4dF1dXG4gKiAtIFtbbGlua3xTY2VuZSBOOiB0ZXh0XV1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU2NlbmVCZWF0TGlzdChjaGFwdGVyQ29udGVudDogc3RyaW5nKTogUGFyc2VkU2NlbmVCZWF0TGlzdCB7XG5cdGNvbnN0IGl0ZW1zOiBQYXJzZWRTY2VuZUJlYXRMaXN0SXRlbVtdID0gW107XG5cblx0Ly8gRXh0cmFjdCBjb250ZW50IGFmdGVyIGZyb250bWF0dGVyXG5cdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBjaGFwdGVyQ29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuXHRjb25zdCBjb250ZW50U3RhcnQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXS5sZW5ndGggOiAwO1xuXHRjb25zdCBib2R5Q29udGVudCA9IGNoYXB0ZXJDb250ZW50LnN1YnN0cmluZyhjb250ZW50U3RhcnQpLnRyaW0oKTtcblxuXHQvLyBGaW5kIHRoZSBcIiMjIFNjZW5lcyAmIEJlYXRzXCIgc2VjdGlvblxuXHRjb25zdCBsaXN0U2VjdGlvbk1hdGNoID0gYm9keUNvbnRlbnQubWF0Y2goLyMjXFxzK1NjZW5lc1xccysmXFxzK0JlYXRzXFxzKlxcbisoW1xcc1xcU10qPykoPz1cXG4jI3wkKS8pO1xuXHRpZiAoIWxpc3RTZWN0aW9uTWF0Y2gpIHtcblx0XHRyZXR1cm4geyBpdGVtczogW10gfTtcblx0fVxuXG5cdGNvbnN0IGxpc3RDb250ZW50ID0gbGlzdFNlY3Rpb25NYXRjaFsxXS50cmltKCk7XG5cdGNvbnN0IGxpbmVzID0gbGlzdENvbnRlbnQuc3BsaXQoL1xcbi8pO1xuXG5cdGxldCBvcmRlciA9IDA7XG5cdGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuXHRcdGNvbnN0IHRyaW1tZWRMaW5lID0gbGluZS50cmltKCk7XG5cdFx0aWYgKCF0cmltbWVkTGluZSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgaWYgaXQncyBhIHNjZW5lIG9yIGJlYXQgaXRlbVxuXHRcdC8vIEZvcm1hdDogWysvLV0gW1tsaW5rfHRleHRdXSBvciBbKy8tXSB0ZXh0XG5cdFx0Y29uc3QgaXRlbU1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL14oWystXSlcXHMrKC4rKSQvKTtcblx0XHRpZiAoIWl0ZW1NYXRjaCkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgaGFzUHJvc2UgPSBpdGVtTWF0Y2hbMV0gPT09IFwiK1wiO1xuXHRcdGNvbnN0IGl0ZW1UZXh0ID0gaXRlbU1hdGNoWzJdLnRyaW0oKTtcblx0XHQvLyBDb3VudCB0YWJzIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGxpbmUgKG1vcmUgcmVsaWFibGUgdGhhbiBzcGFjZXMpXG5cdFx0Y29uc3QgdGFiTWF0Y2ggPSBsaW5lLm1hdGNoKC9eKFxcdCopLyk7XG5cdFx0Y29uc3QgaW5kZW50TGV2ZWwgPSB0YWJNYXRjaCA/IHRhYk1hdGNoWzFdLmxlbmd0aCA6IDA7XG5cdFx0Y29uc3QgaXNCZWF0ID0gaW5kZW50TGV2ZWwgPiAwO1xuXG5cdFx0Ly8gUGFyc2UgbGluayBpZiBwcmVzZW50XG5cdFx0Y29uc3QgbGlua01hdGNoID0gaXRlbVRleHQubWF0Y2goL15cXFtcXFsoW15cXHxdKylcXHwoW15cXF1dKylcXF1cXF0kLyk7XG5cdFx0bGV0IGxpbmtOYW1lOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgZGlzcGxheVRleHQ6IHN0cmluZztcblxuXHRcdGlmIChsaW5rTWF0Y2gpIHtcblx0XHRcdGxpbmtOYW1lID0gbGlua01hdGNoWzFdLnRyaW0oKTtcblx0XHRcdGRpc3BsYXlUZXh0ID0gbGlua01hdGNoWzJdLnRyaW0oKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGlzcGxheVRleHQgPSBpdGVtVGV4dDtcblx0XHR9XG5cblx0XHRpdGVtcy5wdXNoKHtcblx0XHRcdHR5cGU6IGlzQmVhdCA/IFwiYmVhdFwiIDogXCJzY2VuZVwiLFxuXHRcdFx0bGlua05hbWUsXG5cdFx0XHRkaXNwbGF5VGV4dCxcblx0XHRcdGhhc1Byb3NlLFxuXHRcdFx0aW5kZW50TGV2ZWw6IGlzQmVhdCA/IDEgOiAwLFxuXHRcdFx0b3JpZ2luYWxPcmRlcjogb3JkZXIrKyxcblx0XHR9KTtcblx0fVxuXG5cdHJldHVybiB7IGl0ZW1zIH07XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIFwiIyMgQ2hhcHRlcnMsIFNjZW5lcyAmIEJlYXRzXCIgbGlzdCBmcm9tIHN0b3J5IGNvbnRlbnRcbiAqIEZvcm1hdDpcbiAqICMjIENoYXB0ZXJzLCBTY2VuZXMgJiBCZWF0c1xuICogXG4gKiAtIFtbbGlua3xDaGFwdGVyIE46IHRpdGxlXV1cbiAqICAgLSBbW2xpbmt8U2NlbmUgTjogZ29hbCAtIHRpbWVSZWZdXVxuICogICAgIC0gW1tsaW5rfEJlYXQgTjogaW50ZW50IC0+IG91dGNvbWVdXVxuICogICAgIC0gW1tsaW5rfEJlYXQgTjogaW50ZW50XV1cbiAqICAgLSBbW2xpbmt8U2NlbmUgTjogZ29hbF1dXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNoYXB0ZXJMaXN0KHN0b3J5Q29udGVudDogc3RyaW5nKTogUGFyc2VkQ2hhcHRlckxpc3Qge1xuXHRjb25zdCBpdGVtczogUGFyc2VkQ2hhcHRlckxpc3RJdGVtW10gPSBbXTtcblxuXHQvLyBFeHRyYWN0IGNvbnRlbnQgYWZ0ZXIgZnJvbnRtYXR0ZXJcblx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IHN0b3J5Q29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuXHRjb25zdCBjb250ZW50U3RhcnQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXS5sZW5ndGggOiAwO1xuXHRjb25zdCBib2R5Q29udGVudCA9IHN0b3J5Q29udGVudC5zdWJzdHJpbmcoY29udGVudFN0YXJ0KS50cmltKCk7XG5cblx0Ly8gRmluZCB0aGUgXCIjIyBDaGFwdGVycywgU2NlbmVzICYgQmVhdHNcIiBzZWN0aW9uIChvciBcIiMjIENoYXB0ZXJzXCIgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpXG5cdGNvbnN0IGxpc3RTZWN0aW9uTWF0Y2ggPSBib2R5Q29udGVudC5tYXRjaCgvIyNcXHMrQ2hhcHRlcnMoPzosXFxzKlNjZW5lc1xccyomXFxzKkJlYXRzKT9cXHMqXFxuKyhbXFxzXFxTXSo/KSg/PVxcbiMjfCQpLyk7XG5cdGlmICghbGlzdFNlY3Rpb25NYXRjaCkge1xuXHRcdHJldHVybiB7IGl0ZW1zOiBbXSB9O1xuXHR9XG5cblx0Y29uc3QgbGlzdENvbnRlbnQgPSBsaXN0U2VjdGlvbk1hdGNoWzFdLnRyaW0oKTtcblx0Y29uc3QgbGluZXMgPSBsaXN0Q29udGVudC5zcGxpdCgvXFxuLyk7XG5cblx0bGV0IG9yZGVyID0gMDtcblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG5cdFx0Y29uc3QgdHJpbW1lZExpbmUgPSBsaW5lLnRyaW0oKTtcblx0XHRpZiAoIXRyaW1tZWRMaW5lKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBpZiBpdCdzIGEgY2hhcHRlciwgc2NlbmUgb3IgYmVhdCBpdGVtXG5cdFx0Ly8gRm9ybWF0OiBbKy8tXSBbW2xpbmt8dGV4dF1dIG9yIFsrLy1dIHRleHRcblx0XHRjb25zdCBpdGVtTWF0Y2ggPSB0cmltbWVkTGluZS5tYXRjaCgvXihbKy1dKVxccysoLispJC8pO1xuXHRcdGlmICghaXRlbU1hdGNoKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRjb25zdCBoYXNQcm9zZSA9IGl0ZW1NYXRjaFsxXSA9PT0gXCIrXCI7XG5cdFx0Y29uc3QgaXRlbVRleHQgPSBpdGVtTWF0Y2hbMl0udHJpbSgpO1xuXHRcdC8vIENvdW50IHRhYnMgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgbGluZSAobW9yZSByZWxpYWJsZSB0aGFuIHNwYWNlcylcblx0XHRjb25zdCB0YWJNYXRjaCA9IGxpbmUubWF0Y2goL14oXFx0KikvKTtcblx0XHRjb25zdCBpbmRlbnRMZXZlbCA9IHRhYk1hdGNoID8gdGFiTWF0Y2hbMV0ubGVuZ3RoIDogMDtcblx0XHRcblx0XHQvLyBEZXRlcm1pbmUgdHlwZSBiYXNlZCBvbiBpbmRlbnQgbGV2ZWwgKHRhYnMpXG5cdFx0Ly8gMCB0YWJzID0gY2hhcHRlciwgMSB0YWIgPSBzY2VuZSwgMiB0YWJzID0gYmVhdFxuXHRcdGxldCB0eXBlOiBcImNoYXB0ZXJcIiB8IFwic2NlbmVcIiB8IFwiYmVhdFwiO1xuXHRcdGlmIChpbmRlbnRMZXZlbCA9PT0gMCkge1xuXHRcdFx0dHlwZSA9IFwiY2hhcHRlclwiO1xuXHRcdH0gZWxzZSBpZiAoaW5kZW50TGV2ZWwgPT09IDEpIHtcblx0XHRcdHR5cGUgPSBcInNjZW5lXCI7XG5cdFx0fSBlbHNlIGlmIChpbmRlbnRMZXZlbCA9PT0gMikge1xuXHRcdFx0dHlwZSA9IFwiYmVhdFwiO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBTa2lwIGl0ZW1zIHdpdGggdW5leHBlY3RlZCBpbmRlbnQgbGV2ZWxcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIFBhcnNlIGxpbmsgaWYgcHJlc2VudFxuXHRcdGNvbnN0IGxpbmtNYXRjaCA9IGl0ZW1UZXh0Lm1hdGNoKC9eXFxbXFxbKFteXFx8XSspXFx8KFteXFxdXSspXFxdXFxdJC8pO1xuXHRcdGxldCBsaW5rTmFtZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IGRpc3BsYXlUZXh0OiBzdHJpbmc7XG5cblx0XHRpZiAobGlua01hdGNoKSB7XG5cdFx0XHRsaW5rTmFtZSA9IGxpbmtNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRkaXNwbGF5VGV4dCA9IGxpbmtNYXRjaFsyXS50cmltKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRpc3BsYXlUZXh0ID0gaXRlbVRleHQ7XG5cdFx0fVxuXG5cdFx0aXRlbXMucHVzaCh7XG5cdFx0XHR0eXBlLFxuXHRcdFx0bGlua05hbWUsXG5cdFx0XHRkaXNwbGF5VGV4dCxcblx0XHRcdGhhc1Byb3NlLFxuXHRcdFx0aW5kZW50TGV2ZWw6IGluZGVudExldmVsIC8gMiwgLy8gTm9ybWFsaXplIHRvIDAsIDEsIDJcblx0XHRcdG9yaWdpbmFsT3JkZXI6IG9yZGVyKyssXG5cdFx0fSk7XG5cdH1cblxuXHRyZXR1cm4geyBpdGVtcyB9O1xufVxuXG4vKipcbiAqIFBhcnNlIHRoZSBcIiMjIEJlYXRzXCIgbGlzdCBmcm9tIHNjZW5lIGNvbnRlbnRcbiAqIEZvcm1hdDpcbiAqICMjIEJlYXRzXG4gKiBcbiAqIC0gW1tsaW5rfEJlYXQgTjogaW50ZW50IC0+IG91dGNvbWVdXVxuICogKyBbW2xpbmt8QmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZV1dXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUJlYXRMaXN0KHNjZW5lQ29udGVudDogc3RyaW5nKTogUGFyc2VkQmVhdExpc3Qge1xuXHRjb25zdCBpdGVtczogUGFyc2VkQmVhdExpc3RJdGVtW10gPSBbXTtcblxuXHQvLyBFeHRyYWN0IGNvbnRlbnQgYWZ0ZXIgZnJvbnRtYXR0ZXJcblx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IHNjZW5lQ29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuXHRjb25zdCBjb250ZW50U3RhcnQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXS5sZW5ndGggOiAwO1xuXHRjb25zdCBib2R5Q29udGVudCA9IHNjZW5lQ29udGVudC5zdWJzdHJpbmcoY29udGVudFN0YXJ0KS50cmltKCk7XG5cblx0Ly8gRmluZCB0aGUgXCIjIyBCZWF0c1wiIHNlY3Rpb25cblx0Y29uc3QgbGlzdFNlY3Rpb25NYXRjaCA9IGJvZHlDb250ZW50Lm1hdGNoKC8jI1xccytCZWF0c1xccypcXG4rKFtcXHNcXFNdKj8pKD89XFxuIyN8JCkvKTtcblx0aWYgKCFsaXN0U2VjdGlvbk1hdGNoKSB7XG5cdFx0cmV0dXJuIHsgaXRlbXM6IFtdIH07XG5cdH1cblxuXHRjb25zdCBsaXN0Q29udGVudCA9IGxpc3RTZWN0aW9uTWF0Y2hbMV0udHJpbSgpO1xuXHRjb25zdCBsaW5lcyA9IGxpc3RDb250ZW50LnNwbGl0KC9cXG4vKTtcblxuXHRsZXQgb3JkZXIgPSAwO1xuXHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcblx0XHRjb25zdCB0cmltbWVkTGluZSA9IGxpbmUudHJpbSgpO1xuXHRcdGlmICghdHJpbW1lZExpbmUpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIFNraXAgdGhlIGluZm8gY2FsbG91dCBibG9ja1xuXHRcdGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKFwiPlwiKSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgaWYgaXQncyBhIGJlYXQgaXRlbVxuXHRcdC8vIEZvcm1hdDogWysvLV0gW1tsaW5rfHRleHRdXSBvciBbKy8tXSB0ZXh0XG5cdFx0Y29uc3QgaXRlbU1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL14oWystXSlcXHMrKC4rKSQvKTtcblx0XHRpZiAoIWl0ZW1NYXRjaCkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgaGFzUHJvc2UgPSBpdGVtTWF0Y2hbMV0gPT09IFwiK1wiO1xuXHRcdGNvbnN0IGl0ZW1UZXh0ID0gaXRlbU1hdGNoWzJdLnRyaW0oKTtcblxuXHRcdC8vIFBhcnNlIGxpbmsgaWYgcHJlc2VudFxuXHRcdGNvbnN0IGxpbmtNYXRjaCA9IGl0ZW1UZXh0Lm1hdGNoKC9eXFxbXFxbKFteXFx8XSspXFx8KFteXFxdXSspXFxdXFxdJC8pO1xuXHRcdGxldCBsaW5rTmFtZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IGRpc3BsYXlUZXh0OiBzdHJpbmc7XG5cblx0XHRpZiAobGlua01hdGNoKSB7XG5cdFx0XHRsaW5rTmFtZSA9IGxpbmtNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRkaXNwbGF5VGV4dCA9IGxpbmtNYXRjaFsyXS50cmltKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRpc3BsYXlUZXh0ID0gaXRlbVRleHQ7XG5cdFx0fVxuXG5cdFx0aXRlbXMucHVzaCh7XG5cdFx0XHRsaW5rTmFtZSxcblx0XHRcdGRpc3BsYXlUZXh0LFxuXHRcdFx0aGFzUHJvc2UsXG5cdFx0XHRvcmlnaW5hbE9yZGVyOiBvcmRlcisrLFxuXHRcdH0pO1xuXHR9XG5cblx0cmV0dXJuIHsgaXRlbXMgfTtcbn1cblxuLyoqXG4gKiBQYXJzZSB0aGUgXCIjIyBPcnBoYW4gU2NlbmVzXCIgbGlzdCBmcm9tIHN0b3J5IGNvbnRlbnRcbiAqIEZvcm1hdDpcbiAqICMjIE9ycGhhbiBTY2VuZXNcbiAqIFxuICogLSBbW2xpbmt8U2NlbmUgTjogZ29hbCAtIHRpbWVSZWZdXVxuICogKyBbW2xpbmt8U2NlbmUgTjogZ29hbCAtIHRpbWVSZWZdXVxuICogICAtIFtbbGlua3xCZWF0IE46IGludGVudCAtPiBvdXRjb21lXV1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlT3JwaGFuU2NlbmVzTGlzdChzdG9yeUNvbnRlbnQ6IHN0cmluZyk6IFBhcnNlZFNjZW5lQmVhdExpc3Qge1xuXHRjb25zdCBpdGVtczogUGFyc2VkU2NlbmVCZWF0TGlzdEl0ZW1bXSA9IFtdO1xuXG5cdC8vIEV4dHJhY3QgY29udGVudCBhZnRlciBmcm9udG1hdHRlclxuXHRjb25zdCBmcm9udG1hdHRlck1hdGNoID0gc3RvcnlDb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XG5cdGNvbnN0IGNvbnRlbnRTdGFydCA9IGZyb250bWF0dGVyTWF0Y2ggPyBmcm9udG1hdHRlck1hdGNoWzBdLmxlbmd0aCA6IDA7XG5cdGNvbnN0IGJvZHlDb250ZW50ID0gc3RvcnlDb250ZW50LnN1YnN0cmluZyhjb250ZW50U3RhcnQpLnRyaW0oKTtcblxuXHQvLyBGaW5kIHRoZSBcIiMjIE9ycGhhbiBTY2VuZXNcIiBzZWN0aW9uXG5cdGNvbnN0IGxpc3RTZWN0aW9uTWF0Y2ggPSBib2R5Q29udGVudC5tYXRjaCgvIyNcXHMrT3JwaGFuXFxzK1NjZW5lc1xccypcXG4rKFtcXHNcXFNdKj8pKD89XFxuIyN8JCkvKTtcblx0aWYgKCFsaXN0U2VjdGlvbk1hdGNoKSB7XG5cdFx0cmV0dXJuIHsgaXRlbXM6IFtdIH07XG5cdH1cblxuXHRjb25zdCBsaXN0Q29udGVudCA9IGxpc3RTZWN0aW9uTWF0Y2hbMV0udHJpbSgpO1xuXHRjb25zdCBsaW5lcyA9IGxpc3RDb250ZW50LnNwbGl0KC9cXG4vKTtcblxuXHRsZXQgb3JkZXIgPSAwO1xuXHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcblx0XHRjb25zdCB0cmltbWVkTGluZSA9IGxpbmUudHJpbSgpO1xuXHRcdGlmICghdHJpbW1lZExpbmUpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIFNraXAgdGhlIGluZm8gY2FsbG91dCBibG9ja1xuXHRcdGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKFwiPlwiKSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgaWYgaXQncyBhIHNjZW5lIG9yIGJlYXQgaXRlbVxuXHRcdC8vIEZvcm1hdDogWysvLV0gW1tsaW5rfHRleHRdXSBvciBbKy8tXSB0ZXh0XG5cdFx0Y29uc3QgaXRlbU1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL14oWystXSlcXHMrKC4rKSQvKTtcblx0XHRpZiAoIWl0ZW1NYXRjaCkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgaGFzUHJvc2UgPSBpdGVtTWF0Y2hbMV0gPT09IFwiK1wiO1xuXHRcdGNvbnN0IGl0ZW1UZXh0ID0gaXRlbU1hdGNoWzJdLnRyaW0oKTtcblx0XHQvLyBDb3VudCB0YWJzIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGxpbmUgKG1vcmUgcmVsaWFibGUgdGhhbiBzcGFjZXMpXG5cdFx0Y29uc3QgdGFiTWF0Y2ggPSBsaW5lLm1hdGNoKC9eKFxcdCopLyk7XG5cdFx0Y29uc3QgaW5kZW50TGV2ZWwgPSB0YWJNYXRjaCA/IHRhYk1hdGNoWzFdLmxlbmd0aCA6IDA7XG5cdFx0Y29uc3QgaXNCZWF0ID0gaW5kZW50TGV2ZWwgPiAwO1xuXG5cdFx0Ly8gUGFyc2UgbGluayBpZiBwcmVzZW50XG5cdFx0Y29uc3QgbGlua01hdGNoID0gaXRlbVRleHQubWF0Y2goL15cXFtcXFsoW15cXHxdKylcXHwoW15cXF1dKylcXF1cXF0kLyk7XG5cdFx0bGV0IGxpbmtOYW1lOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgZGlzcGxheVRleHQ6IHN0cmluZztcblxuXHRcdGlmIChsaW5rTWF0Y2gpIHtcblx0XHRcdGxpbmtOYW1lID0gbGlua01hdGNoWzFdLnRyaW0oKTtcblx0XHRcdGRpc3BsYXlUZXh0ID0gbGlua01hdGNoWzJdLnRyaW0oKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGlzcGxheVRleHQgPSBpdGVtVGV4dDtcblx0XHR9XG5cblx0XHRpdGVtcy5wdXNoKHtcblx0XHRcdHR5cGU6IGlzQmVhdCA/IFwiYmVhdFwiIDogXCJzY2VuZVwiLFxuXHRcdFx0bGlua05hbWUsXG5cdFx0XHRkaXNwbGF5VGV4dCxcblx0XHRcdGhhc1Byb3NlLFxuXHRcdFx0aW5kZW50TGV2ZWw6IGlzQmVhdCA/IDEgOiAwLFxuXHRcdFx0b3JpZ2luYWxPcmRlcjogb3JkZXIrKyxcblx0XHR9KTtcblx0fVxuXG5cdHJldHVybiB7IGl0ZW1zIH07XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIFwiIyMgT3JwaGFuIEJlYXRzXCIgbGlzdCBmcm9tIHN0b3J5IGNvbnRlbnRcbiAqIEZvcm1hdDpcbiAqICMjIE9ycGhhbiBCZWF0c1xuICogXG4gKiAtIFtbbGlua3xCZWF0IE46IGludGVudCAtPiBvdXRjb21lXV1cbiAqICsgW1tsaW5rfEJlYXQgTjogaW50ZW50IC0+IG91dGNvbWVdXVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VPcnBoYW5CZWF0c0xpc3Qoc3RvcnlDb250ZW50OiBzdHJpbmcpOiBQYXJzZWRCZWF0TGlzdCB7XG5cdGNvbnN0IGl0ZW1zOiBQYXJzZWRCZWF0TGlzdEl0ZW1bXSA9IFtdO1xuXG5cdC8vIEV4dHJhY3QgY29udGVudCBhZnRlciBmcm9udG1hdHRlclxuXHRjb25zdCBmcm9udG1hdHRlck1hdGNoID0gc3RvcnlDb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XG5cdGNvbnN0IGNvbnRlbnRTdGFydCA9IGZyb250bWF0dGVyTWF0Y2ggPyBmcm9udG1hdHRlck1hdGNoWzBdLmxlbmd0aCA6IDA7XG5cdGNvbnN0IGJvZHlDb250ZW50ID0gc3RvcnlDb250ZW50LnN1YnN0cmluZyhjb250ZW50U3RhcnQpLnRyaW0oKTtcblxuXHQvLyBGaW5kIHRoZSBcIiMjIE9ycGhhbiBCZWF0c1wiIHNlY3Rpb25cblx0Y29uc3QgbGlzdFNlY3Rpb25NYXRjaCA9IGJvZHlDb250ZW50Lm1hdGNoKC8jI1xccytPcnBoYW5cXHMrQmVhdHNcXHMqXFxuKyhbXFxzXFxTXSo/KSg/PVxcbiMjfCQpLyk7XG5cdGlmICghbGlzdFNlY3Rpb25NYXRjaCkge1xuXHRcdHJldHVybiB7IGl0ZW1zOiBbXSB9O1xuXHR9XG5cblx0Y29uc3QgbGlzdENvbnRlbnQgPSBsaXN0U2VjdGlvbk1hdGNoWzFdLnRyaW0oKTtcblx0Y29uc3QgbGluZXMgPSBsaXN0Q29udGVudC5zcGxpdCgvXFxuLyk7XG5cblx0bGV0IG9yZGVyID0gMDtcblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG5cdFx0Y29uc3QgdHJpbW1lZExpbmUgPSBsaW5lLnRyaW0oKTtcblx0XHRpZiAoIXRyaW1tZWRMaW5lKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBTa2lwIHRoZSBpbmZvIGNhbGxvdXQgYmxvY2tcblx0XHRpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aChcIj5cIikpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGlmIGl0J3MgYSBiZWF0IGl0ZW1cblx0XHQvLyBGb3JtYXQ6IFsrLy1dIFtbbGlua3x0ZXh0XV0gb3IgWysvLV0gdGV4dFxuXHRcdGNvbnN0IGl0ZW1NYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eKFsrLV0pXFxzKyguKykkLyk7XG5cdFx0aWYgKCFpdGVtTWF0Y2gpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IGhhc1Byb3NlID0gaXRlbU1hdGNoWzFdID09PSBcIitcIjtcblx0XHRjb25zdCBpdGVtVGV4dCA9IGl0ZW1NYXRjaFsyXS50cmltKCk7XG5cblx0XHQvLyBQYXJzZSBsaW5rIGlmIHByZXNlbnRcblx0XHRjb25zdCBsaW5rTWF0Y2ggPSBpdGVtVGV4dC5tYXRjaCgvXlxcW1xcWyhbXlxcfF0rKVxcfChbXlxcXV0rKVxcXVxcXSQvKTtcblx0XHRsZXQgbGlua05hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBkaXNwbGF5VGV4dDogc3RyaW5nO1xuXG5cdFx0aWYgKGxpbmtNYXRjaCkge1xuXHRcdFx0bGlua05hbWUgPSBsaW5rTWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0ZGlzcGxheVRleHQgPSBsaW5rTWF0Y2hbMl0udHJpbSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkaXNwbGF5VGV4dCA9IGl0ZW1UZXh0O1xuXHRcdH1cblxuXHRcdGl0ZW1zLnB1c2goe1xuXHRcdFx0bGlua05hbWUsXG5cdFx0XHRkaXNwbGF5VGV4dCxcblx0XHRcdGhhc1Byb3NlLFxuXHRcdFx0b3JpZ2luYWxPcmRlcjogb3JkZXIrKyxcblx0XHR9KTtcblx0fVxuXG5cdHJldHVybiB7IGl0ZW1zIH07XG59XG5cbi8qKlxuICogUGFyc2UgY29udGVudCBibG9ja3MgZnJvbSBzdG9yeSBjb250ZW50IHVzaW5nIGhpZXJhcmNoaWNhbCBoZWFkZXJzXG4gKiBGb3JtYXQ6XG4gKiAjIFN0b3J5OiB0aXRsZVxuICogcHJvc2UgYXQgc3RvcnkgbGV2ZWxcbiAqIFxuICogIyMgQ2hhcHRlcjogdGl0bGVcbiAqIHByb3NlIGF0IGNoYXB0ZXIgbGV2ZWwgKG5vIHNjZW5lKVxuICogXG4gKiAjIyMgU2NlbmU6IHRpdGxlXG4gKiBwcm9zZSBhdCBzY2VuZSBsZXZlbFxuICogXG4gKiAjIyMjIEJlYXQ6IHRpdGxlXG4gKiBwcm9zZSBhdCBiZWF0IGxldmVsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVN0b3J5UHJvc2Uoc3RvcnlDb250ZW50OiBzdHJpbmcpOiBIaWVyYXJjaGljYWxQcm9zZSB7XG5cdGNvbnN0IHNlY3Rpb25zOiBQYXJzZWRTZWN0aW9uW10gPSBbXTtcblxuXHQvLyBFeHRyYWN0IGNvbnRlbnQgYWZ0ZXIgZnJvbnRtYXR0ZXJcblx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IHN0b3J5Q29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuXHRjb25zdCBjb250ZW50U3RhcnQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXS5sZW5ndGggOiAwO1xuXHRjb25zdCBib2R5Q29udGVudCA9IHN0b3J5Q29udGVudC5zdWJzdHJpbmcoY29udGVudFN0YXJ0KS50cmltKCk7XG5cblx0Ly8gRmluZCB0aGUgaGllcmFyY2hpY2FsIHByb3NlIHNlY3Rpb24gLSBzdGFydHMgd2l0aCBcIiMgU3Rvcnk6XCIgb3IgXCIjIyBDaGFwdGVyIE46XCIgb3IgXCIjIyBDaGFwdGVyOlwiXG5cdC8vIFRoaXMgaXMgQUZURVIgdGhlIGxpc3Qgc2VjdGlvbnMgKCMjIENoYXB0ZXJzLCBTY2VuZXMgJiBCZWF0cywgIyMgT3JwaGFuIFNjZW5lcywgZXRjLilcblx0Y29uc3Qgc3RvcnlIZWFkZXJNYXRjaCA9IGJvZHlDb250ZW50Lm1hdGNoKC9eKCNcXHMrU3Rvcnk6XFxzKi4rKSQvbSk7XG5cdGNvbnN0IGNoYXB0ZXJIZWFkZXJNYXRjaCA9IGJvZHlDb250ZW50Lm1hdGNoKC9eKCMjXFxzK0NoYXB0ZXJcXHMqXFxkKjpcXHMqLispJC9tKTtcblx0XG5cdGxldCBwcm9zZVN0YXJ0SW5kZXggPSAtMTtcblx0aWYgKHN0b3J5SGVhZGVyTWF0Y2gpIHtcblx0XHRwcm9zZVN0YXJ0SW5kZXggPSBib2R5Q29udGVudC5pbmRleE9mKHN0b3J5SGVhZGVyTWF0Y2hbMF0pO1xuXHR9IGVsc2UgaWYgKGNoYXB0ZXJIZWFkZXJNYXRjaCkge1xuXHRcdHByb3NlU3RhcnRJbmRleCA9IGJvZHlDb250ZW50LmluZGV4T2YoY2hhcHRlckhlYWRlck1hdGNoWzBdKTtcblx0fVxuXHRcblx0aWYgKHByb3NlU3RhcnRJbmRleCA9PT0gLTEpIHtcblx0XHRyZXR1cm4geyBzZWN0aW9uczogW10gfTtcblx0fVxuXHRcblx0Y29uc3QgcHJvc2VDb250ZW50ID0gYm9keUNvbnRlbnQuc3Vic3RyaW5nKHByb3NlU3RhcnRJbmRleCk7XG5cdGNvbnN0IGxpbmVzID0gcHJvc2VDb250ZW50LnNwbGl0KC9cXG4vKTtcblxuXHRsZXQgb3JkZXIgPSAwO1xuXHRsZXQgY3VycmVudENoYXB0ZXI6IHsgbGlua05hbWU6IHN0cmluZyB8IG51bGw7IHRpdGxlOiBzdHJpbmcgfSB8IG51bGwgPSBudWxsO1xuXHRsZXQgY3VycmVudFNjZW5lOiBQYXJzZWRTY2VuZSB8IG51bGwgPSBudWxsO1xuXHRsZXQgY3VycmVudEJlYXQ6IFBhcnNlZEJlYXQgfCBudWxsID0gbnVsbDtcblxuXHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcblx0XHRjb25zdCB0cmltbWVkTGluZSA9IGxpbmUudHJpbSgpO1xuXG5cdFx0Ly8gU2tpcCBlbXB0eSBsaW5lc1xuXHRcdGlmICghdHJpbW1lZExpbmUpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIFNraXAgaW5mbyBjYWxsb3V0c1xuXHRcdGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKFwiPlwiKSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIFN0b3J5IGhlYWRlcjogIyBTdG9yeTogW1tsaW5rfHRpdGxlXV0gb3IgIyBTdG9yeTogdGl0bGVcblx0XHRjb25zdCBzdG9yeU1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL14jXFxzK1N0b3J5OlxccyooLispJC9pKTtcblx0XHRpZiAoc3RvcnlNYXRjaCkge1xuXHRcdFx0Ly8gU3RvcnkgaGVhZGVyIC0ganVzdCBza2lwLCB3ZSdyZSBhbHJlYWR5IGluIHN0b3J5IGNvbnRleHRcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBDaGFwdGVyIGhlYWRlcjogIyMgQ2hhcHRlciBOOiBbW2xpbmt8dGl0bGVdXSBvciAjIyBDaGFwdGVyOiB0aXRsZVxuXHRcdGNvbnN0IGNoYXB0ZXJNYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eIyNcXHMrQ2hhcHRlclxccypcXGQqOlxccyooLispJC9pKTtcblx0XHRpZiAoY2hhcHRlck1hdGNoKSB7XG5cdFx0XHRjb25zdCBjaGFwdGVyVGV4dCA9IGNoYXB0ZXJNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRjb25zdCBsaW5rTWF0Y2ggPSBjaGFwdGVyVGV4dC5tYXRjaCgvXlxcW1xcWyhbXlxcfF0rKVxcfChbXlxcXV0rKVxcXVxcXSQvKTtcblx0XHRcdGlmIChsaW5rTWF0Y2gpIHtcblx0XHRcdFx0Y3VycmVudENoYXB0ZXIgPSB7XG5cdFx0XHRcdFx0bGlua05hbWU6IGxpbmtNYXRjaFsxXS50cmltKCksXG5cdFx0XHRcdFx0dGl0bGU6IGxpbmtNYXRjaFsyXS50cmltKCksXG5cdFx0XHRcdH07XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjdXJyZW50Q2hhcHRlciA9IHtcblx0XHRcdFx0XHRsaW5rTmFtZTogbnVsbCxcblx0XHRcdFx0XHR0aXRsZTogY2hhcHRlclRleHQsXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRjdXJyZW50U2NlbmUgPSBudWxsO1xuXHRcdFx0Y3VycmVudEJlYXQgPSBudWxsO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIFNjZW5lIGhlYWRlcjogIyMjIFNjZW5lOiBbW2xpbmt8Z29hbCAtIHRpbWVSZWZdXSBvciAjIyMgU2NlbmU6IGdvYWxcblx0XHRjb25zdCBzY2VuZU1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL14jIyNcXHMrU2NlbmU6XFxzKiguKykkL2kpO1xuXHRcdGlmIChzY2VuZU1hdGNoKSB7XG5cdFx0XHRjb25zdCBzY2VuZVRleHQgPSBzY2VuZU1hdGNoWzFdLnRyaW0oKTtcblx0XHRcdGN1cnJlbnRTY2VuZSA9IHBhcnNlU2NlbmVIZWFkZXJUZXh0KHNjZW5lVGV4dCk7XG5cdFx0XHRjdXJyZW50U2NlbmUub3JpZ2luYWxPcmRlciA9IG9yZGVyKys7XG5cdFx0XHRzZWN0aW9ucy5wdXNoKHtcblx0XHRcdFx0dHlwZTogXCJzY2VuZVwiLFxuXHRcdFx0XHRzY2VuZTogY3VycmVudFNjZW5lLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBjdXJyZW50U2NlbmUub3JpZ2luYWxPcmRlcixcblx0XHRcdH0pO1xuXHRcdFx0Y3VycmVudEJlYXQgPSBudWxsO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIEJlYXQgaGVhZGVyOiAjIyMjIEJlYXQ6IFtbbGlua3xpbnRlbnQgLT4gb3V0Y29tZV1dIG9yICMjIyMgQmVhdDogaW50ZW50XG5cdFx0Y29uc3QgYmVhdE1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL14jIyMjXFxzK0JlYXQ6XFxzKiguKykkL2kpO1xuXHRcdGlmIChiZWF0TWF0Y2gpIHtcblx0XHRcdGNvbnN0IGJlYXRUZXh0ID0gYmVhdE1hdGNoWzFdLnRyaW0oKTtcblx0XHRcdGN1cnJlbnRCZWF0ID0gcGFyc2VCZWF0SGVhZGVyVGV4dChiZWF0VGV4dCk7XG5cdFx0XHRjdXJyZW50QmVhdC5vcmlnaW5hbE9yZGVyID0gb3JkZXIrKztcblx0XHRcdHNlY3Rpb25zLnB1c2goe1xuXHRcdFx0XHR0eXBlOiBcImJlYXRcIixcblx0XHRcdFx0YmVhdDogY3VycmVudEJlYXQsXG5cdFx0XHRcdG9yaWdpbmFsT3JkZXI6IGN1cnJlbnRCZWF0Lm9yaWdpbmFsT3JkZXIsXG5cdFx0XHR9KTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIFNraXAgb3RoZXIgaGVhZGVycyB0aGF0IGRvbid0IG1hdGNoIG91ciBwYXR0ZXJuXG5cdFx0aWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoXCIjXCIpKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBTa2lwIGxpc3QgaXRlbXMgKHRoZXNlIGFyZSBjaGFwdGVyL3NjZW5lL2JlYXQgbGlzdHMpXG5cdFx0aWYgKHRyaW1tZWRMaW5lLm1hdGNoKC9eWystXVxccysvKSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIGNvbnRlbnQgYmxvY2s6IFtbbGlua3xjb250ZW50XV0gb3IgcGxhaW4gdGV4dFxuXHRcdGNvbnN0IHByb3NlTWF0Y2ggPSB0cmltbWVkTGluZS5tYXRjaCgvXlxccypcXFtcXFsoW15cXHxdKylcXHwoW15cXF1dKylcXF1cXF1cXHMqJC8pO1xuXHRcdGlmIChwcm9zZU1hdGNoKSB7XG5cdFx0XHRjb25zdCBsaW5rTmFtZSA9IHByb3NlTWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0Y29uc3QgY29udGVudCA9IHByb3NlTWF0Y2hbMl0udHJpbSgpO1xuXHRcdFx0Y29uc3QgcGFyYWdyYXBoOiBQYXJzZWRQYXJhZ3JhcGggPSB7XG5cdFx0XHRcdGNvbnRlbnQsXG5cdFx0XHRcdGxpbmtOYW1lLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBvcmRlcisrLFxuXHRcdFx0fTtcblx0XHRcdHNlY3Rpb25zLnB1c2goe1xuXHRcdFx0XHR0eXBlOiBcInByb3NlXCIsXG5cdFx0XHRcdHByb3NlOiBwYXJhZ3JhcGgsXG5cdFx0XHRcdG9yaWdpbmFsT3JkZXI6IHBhcmFncmFwaC5vcmlnaW5hbE9yZGVyLFxuXHRcdFx0fSk7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBQbGFpbiB0ZXh0IHBhcmFncmFwaCAobmV3IGNvbnRlbnQgYmxvY2sgd2l0aG91dCBsaW5rKVxuXHRcdGlmICh0cmltbWVkTGluZS5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCBwYXJhZ3JhcGg6IFBhcnNlZFBhcmFncmFwaCA9IHtcblx0XHRcdFx0Y29udGVudDogdHJpbW1lZExpbmUsXG5cdFx0XHRcdGxpbmtOYW1lOiBudWxsLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBvcmRlcisrLFxuXHRcdFx0fTtcblx0XHRcdHNlY3Rpb25zLnB1c2goe1xuXHRcdFx0XHR0eXBlOiBcInByb3NlXCIsXG5cdFx0XHRcdHByb3NlOiBwYXJhZ3JhcGgsXG5cdFx0XHRcdG9yaWdpbmFsT3JkZXI6IHBhcmFncmFwaC5vcmlnaW5hbE9yZGVyLFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHsgc2VjdGlvbnMgfTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gcGFyc2Ugc2NlbmUgaGVhZGVyIHRleHRcbiAqL1xuZnVuY3Rpb24gcGFyc2VTY2VuZUhlYWRlclRleHQodGV4dDogc3RyaW5nKTogUGFyc2VkU2NlbmUge1xuXHRjb25zdCBsaW5rTWF0Y2ggPSB0ZXh0Lm1hdGNoKC9eXFxbXFxbKFteXFx8XSspXFx8KFteXFxdXSspXFxdXFxdJC8pO1xuXHRpZiAobGlua01hdGNoKSB7XG5cdFx0Y29uc3QgbGlua05hbWUgPSBsaW5rTWF0Y2hbMV0udHJpbSgpO1xuXHRcdGNvbnN0IGRpc3BsYXlUZXh0ID0gbGlua01hdGNoWzJdLnRyaW0oKTtcblx0XHRjb25zdCBwYXJ0cyA9IGRpc3BsYXlUZXh0LnNwbGl0KC9cXHMqLVxccyovKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bGlua05hbWUsXG5cdFx0XHRnb2FsOiBwYXJ0c1swXS50cmltKCksXG5cdFx0XHR0aW1lUmVmOiBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbihcIiAtIFwiKS50cmltKCkgOiBcIlwiLFxuXHRcdFx0b3JpZ2luYWxPcmRlcjogMCxcblx0XHR9O1xuXHR9XG5cblx0Y29uc3Qgc2ltcGxlTGlua01hdGNoID0gdGV4dC5tYXRjaCgvXlxcW1xcWyhbXlxcXV0rKVxcXVxcXSQvKTtcblx0aWYgKHNpbXBsZUxpbmtNYXRjaCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRsaW5rTmFtZTogc2ltcGxlTGlua01hdGNoWzFdLnRyaW0oKSxcblx0XHRcdGdvYWw6IFwiXCIsXG5cdFx0XHR0aW1lUmVmOiBcIlwiLFxuXHRcdFx0b3JpZ2luYWxPcmRlcjogMCxcblx0XHR9O1xuXHR9XG5cblx0Y29uc3QgcGFydHMgPSB0ZXh0LnNwbGl0KC9cXHMqLVxccyovKTtcblx0cmV0dXJuIHtcblx0XHRsaW5rTmFtZTogbnVsbCxcblx0XHRnb2FsOiBwYXJ0c1swXS50cmltKCksXG5cdFx0dGltZVJlZjogcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLSBcIikudHJpbSgpIDogXCJcIixcblx0XHRvcmlnaW5hbE9yZGVyOiAwLFxuXHR9O1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBwYXJzZSBiZWF0IGhlYWRlciB0ZXh0XG4gKi9cbmZ1bmN0aW9uIHBhcnNlQmVhdEhlYWRlclRleHQodGV4dDogc3RyaW5nKTogUGFyc2VkQmVhdCB7XG5cdGNvbnN0IGxpbmtNYXRjaCA9IHRleHQubWF0Y2goL15cXFtcXFsoW15cXHxdKylcXHwoW15cXF1dKylcXF1cXF0kLyk7XG5cdGlmIChsaW5rTWF0Y2gpIHtcblx0XHRjb25zdCBsaW5rTmFtZSA9IGxpbmtNYXRjaFsxXS50cmltKCk7XG5cdFx0Y29uc3QgZGlzcGxheVRleHQgPSBsaW5rTWF0Y2hbMl0udHJpbSgpO1xuXHRcdGNvbnN0IHBhcnRzID0gZGlzcGxheVRleHQuc3BsaXQoL1xccyotPlxccyovKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bGlua05hbWUsXG5cdFx0XHRpbnRlbnQ6IHBhcnRzWzBdLnRyaW0oKSxcblx0XHRcdG91dGNvbWU6IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0+IFwiKS50cmltKCkgOiBcIlwiLFxuXHRcdFx0b3JpZ2luYWxPcmRlcjogMCxcblx0XHR9O1xuXHR9XG5cblx0Y29uc3Qgc2ltcGxlTGlua01hdGNoID0gdGV4dC5tYXRjaCgvXlxcW1xcWyhbXlxcXV0rKVxcXVxcXSQvKTtcblx0aWYgKHNpbXBsZUxpbmtNYXRjaCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRsaW5rTmFtZTogc2ltcGxlTGlua01hdGNoWzFdLnRyaW0oKSxcblx0XHRcdGludGVudDogXCJcIixcblx0XHRcdG91dGNvbWU6IFwiXCIsXG5cdFx0XHRvcmlnaW5hbE9yZGVyOiAwLFxuXHRcdH07XG5cdH1cblxuXHRjb25zdCBwYXJ0cyA9IHRleHQuc3BsaXQoL1xccyotPlxccyovKTtcblx0cmV0dXJuIHtcblx0XHRsaW5rTmFtZTogbnVsbCxcblx0XHRpbnRlbnQ6IHBhcnRzWzBdLnRyaW0oKSxcblx0XHRvdXRjb21lOiBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbihcIiAtPiBcIikudHJpbSgpIDogXCJcIixcblx0XHRvcmlnaW5hbE9yZGVyOiAwLFxuXHR9O1xufVxuXG4vKipcbiAqIFBhcnNlIGNvbnRlbnQgYmxvY2tzIGZyb20gc2NlbmUgY29udGVudCB1c2luZyBoaWVyYXJjaGljYWwgaGVhZGVyc1xuICogRm9ybWF0IChubyBjaGFwdGVycyBpbiBzY2VuZXMpOlxuICogXG4gKiAjIyBCZWF0cyAobGlzdCAtIHNraXBwZWQpXG4gKiAtIFtbYmVhdC0xfEJlYXQgMTogaW50ZW50XV1cbiAqIFxuICogIyMjIFNjZW5lOiB0aXRsZSAob3IganVzdCBzdGFydCB3aXRoIHByb3NlKVxuICogcHJvc2UgYXQgc2NlbmUgbGV2ZWxcbiAqIFxuICogIyMjIyBCZWF0OiB0aXRsZSAob3IgIyMjIEJlYXQ6KVxuICogcHJvc2UgYXQgYmVhdCBsZXZlbFxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTY2VuZVByb3NlKHNjZW5lQ29udGVudDogc3RyaW5nKTogSGllcmFyY2hpY2FsUHJvc2Uge1xuXHRjb25zdCBzZWN0aW9uczogUGFyc2VkU2VjdGlvbltdID0gW107XG5cblx0Ly8gRXh0cmFjdCBjb250ZW50IGFmdGVyIGZyb250bWF0dGVyXG5cdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBzY2VuZUNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcblx0Y29uc3QgY29udGVudFN0YXJ0ID0gZnJvbnRtYXR0ZXJNYXRjaCA/IGZyb250bWF0dGVyTWF0Y2hbMF0ubGVuZ3RoIDogMDtcblx0Y29uc3QgYm9keUNvbnRlbnQgPSBzY2VuZUNvbnRlbnQuc3Vic3RyaW5nKGNvbnRlbnRTdGFydCkudHJpbSgpO1xuXG5cdC8vIEZpbmQgdGhlIGhpZXJhcmNoaWNhbCBwcm9zZSBzZWN0aW9uXG5cdC8vIEl0IHN0YXJ0cyB3aXRoIFwiIyMjIFNjZW5lOlwiIG9yIFwiIyMjIyBCZWF0OlwiIG9yIFwiIyMjIEJlYXQ6XCIgb3IganVzdCBwcm9zZSB0ZXh0IGFmdGVyICMjIEJlYXRzIGxpc3Rcblx0Y29uc3Qgc2NlbmVIZWFkZXJNYXRjaCA9IGJvZHlDb250ZW50Lm1hdGNoKC9eKCMjI1xccytTY2VuZTpcXHMqLispJC9tKTtcblx0Y29uc3QgYmVhdEhlYWRlck1hdGNoID0gYm9keUNvbnRlbnQubWF0Y2goL14oI3szLDR9XFxzK0JlYXQ6XFxzKi4rKSQvbSk7XG5cdFxuXHRsZXQgcHJvc2VTdGFydEluZGV4ID0gLTE7XG5cdFxuXHRpZiAoc2NlbmVIZWFkZXJNYXRjaCkge1xuXHRcdHByb3NlU3RhcnRJbmRleCA9IGJvZHlDb250ZW50LmluZGV4T2Yoc2NlbmVIZWFkZXJNYXRjaFswXSk7XG5cdH0gZWxzZSBpZiAoYmVhdEhlYWRlck1hdGNoKSB7XG5cdFx0cHJvc2VTdGFydEluZGV4ID0gYm9keUNvbnRlbnQuaW5kZXhPZihiZWF0SGVhZGVyTWF0Y2hbMF0pO1xuXHR9IGVsc2Uge1xuXHRcdC8vIE5vIGV4cGxpY2l0IGhlYWRlcnMgLSBsb29rIGZvciBwcm9zZSBhZnRlciAjIyBCZWF0cyBsaXN0XG5cdFx0Y29uc3QgYmVhdHNMaXN0RW5kID0gYm9keUNvbnRlbnQubWF0Y2goLyMjXFxzK0JlYXRzXFxzKlxcbitbXFxzXFxTXSo/KD89XFxuIyMjfFxcbiMjIyN8XFxuW14jXFwtXFwrPlxcc118JCkvKTtcblx0XHRpZiAoYmVhdHNMaXN0RW5kKSB7XG5cdFx0XHRwcm9zZVN0YXJ0SW5kZXggPSBib2R5Q29udGVudC5pbmRleE9mKGJlYXRzTGlzdEVuZFswXSkgKyBiZWF0c0xpc3RFbmRbMF0ubGVuZ3RoO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBObyAjIyBCZWF0cyBzZWN0aW9uLCBzdGFydCBmcm9tIGJlZ2lubmluZyAoc2tpcCBhbnkgIyMgaGVhZGVycyB0aGF0IGFyZSBsaXN0cylcblx0XHRcdGNvbnN0IGZpcnN0Tm9uTGlzdENvbnRlbnQgPSBib2R5Q29udGVudC5tYXRjaCgvKD86XnxcXG4pKFteI1xcLVxcKz5cXHNcXG5dLispLyk7XG5cdFx0XHRpZiAoZmlyc3ROb25MaXN0Q29udGVudCkge1xuXHRcdFx0XHRwcm9zZVN0YXJ0SW5kZXggPSBib2R5Q29udGVudC5pbmRleE9mKGZpcnN0Tm9uTGlzdENvbnRlbnRbMV0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRcblx0aWYgKHByb3NlU3RhcnRJbmRleCA9PT0gLTEpIHtcblx0XHRyZXR1cm4geyBzZWN0aW9uczogW10gfTtcblx0fVxuXHRcblx0Y29uc3QgcHJvc2VDb250ZW50ID0gYm9keUNvbnRlbnQuc3Vic3RyaW5nKHByb3NlU3RhcnRJbmRleCk7XG5cdGNvbnN0IGxpbmVzID0gcHJvc2VDb250ZW50LnNwbGl0KC9cXG4vKTtcblxuXHRsZXQgb3JkZXIgPSAwO1xuXHRsZXQgY3VycmVudEJlYXQ6IFBhcnNlZEJlYXQgfCBudWxsID0gbnVsbDtcblxuXHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcblx0XHRjb25zdCB0cmltbWVkTGluZSA9IGxpbmUudHJpbSgpO1xuXG5cdFx0Ly8gU2tpcCBlbXB0eSBsaW5lc1xuXHRcdGlmICghdHJpbW1lZExpbmUpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIFNraXAgaW5mbyBjYWxsb3V0c1xuXHRcdGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKFwiPlwiKSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIFNjZW5lIGhlYWRlcjogIyMjIFNjZW5lOiBbW2xpbmt8Z29hbF1dIG9yICMjIyBTY2VuZTogZ29hbFxuXHRcdGNvbnN0IHNjZW5lTWF0Y2ggPSB0cmltbWVkTGluZS5tYXRjaCgvXiMjI1xccytTY2VuZTpcXHMqKC4rKSQvaSk7XG5cdFx0aWYgKHNjZW5lTWF0Y2gpIHtcblx0XHRcdGNvbnN0IHNjZW5lVGV4dCA9IHNjZW5lTWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0Y29uc3QgcGFyc2VkU2NlbmUgPSBwYXJzZVNjZW5lSGVhZGVyVGV4dChzY2VuZVRleHQpO1xuXHRcdFx0cGFyc2VkU2NlbmUub3JpZ2luYWxPcmRlciA9IG9yZGVyKys7XG5cdFx0XHRzZWN0aW9ucy5wdXNoKHtcblx0XHRcdFx0dHlwZTogXCJzY2VuZVwiLFxuXHRcdFx0XHRzY2VuZTogcGFyc2VkU2NlbmUsXG5cdFx0XHRcdG9yaWdpbmFsT3JkZXI6IHBhcnNlZFNjZW5lLm9yaWdpbmFsT3JkZXIsXG5cdFx0XHR9KTtcblx0XHRcdGN1cnJlbnRCZWF0ID0gbnVsbDtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBCZWF0IGhlYWRlcjogIyMjIEJlYXQ6IG9yICMjIyMgQmVhdDpcblx0XHRjb25zdCBiZWF0TWF0Y2ggPSB0cmltbWVkTGluZS5tYXRjaCgvXiN7Myw0fVxccytCZWF0OlxccyooLispJC9pKTtcblx0XHRpZiAoYmVhdE1hdGNoKSB7XG5cdFx0XHRjb25zdCBiZWF0VGV4dCA9IGJlYXRNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRjdXJyZW50QmVhdCA9IHBhcnNlQmVhdEhlYWRlclRleHQoYmVhdFRleHQpO1xuXHRcdFx0Y3VycmVudEJlYXQub3JpZ2luYWxPcmRlciA9IG9yZGVyKys7XG5cdFx0XHRzZWN0aW9ucy5wdXNoKHtcblx0XHRcdFx0dHlwZTogXCJiZWF0XCIsXG5cdFx0XHRcdGJlYXQ6IGN1cnJlbnRCZWF0LFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBjdXJyZW50QmVhdC5vcmlnaW5hbE9yZGVyLFxuXHRcdFx0fSk7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBTa2lwIG90aGVyIGhlYWRlcnMgKGxpa2UgIyMgQmVhdHMgbGlzdCBoZWFkZXIpXG5cdFx0aWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoXCIjXCIpKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBTa2lwIGxpc3QgaXRlbXMgKHRoZXNlIGFyZSBiZWF0IGxpc3RzKVxuXHRcdGlmICh0cmltbWVkTGluZS5tYXRjaCgvXlsrLV1cXHMrLykpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBjb250ZW50IGJsb2NrOiBbW2xpbmt8Y29udGVudF1dIG9yIHBsYWluIHRleHRcblx0XHRjb25zdCBwcm9zZU1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL15cXHMqXFxbXFxbKFteXFx8XSspXFx8KFteXFxdXSspXFxdXFxdXFxzKiQvKTtcblx0XHRpZiAocHJvc2VNYXRjaCkge1xuXHRcdFx0Y29uc3QgbGlua05hbWUgPSBwcm9zZU1hdGNoWzFdLnRyaW0oKTtcblx0XHRcdGNvbnN0IGNvbnRlbnQgPSBwcm9zZU1hdGNoWzJdLnRyaW0oKTtcblx0XHRcdGNvbnN0IHBhcmFncmFwaDogUGFyc2VkUGFyYWdyYXBoID0ge1xuXHRcdFx0XHRjb250ZW50LFxuXHRcdFx0XHRsaW5rTmFtZSxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogb3JkZXIrKyxcblx0XHRcdH07XG5cdFx0XHRzZWN0aW9ucy5wdXNoKHtcblx0XHRcdFx0dHlwZTogXCJwcm9zZVwiLFxuXHRcdFx0XHRwcm9zZTogcGFyYWdyYXBoLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBwYXJhZ3JhcGgub3JpZ2luYWxPcmRlcixcblx0XHRcdH0pO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gUGxhaW4gdGV4dCBwYXJhZ3JhcGggKG5ldyBjb250ZW50IGJsb2NrIHdpdGhvdXQgbGluaylcblx0XHRpZiAodHJpbW1lZExpbmUubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29uc3QgcGFyYWdyYXBoOiBQYXJzZWRQYXJhZ3JhcGggPSB7XG5cdFx0XHRcdGNvbnRlbnQ6IHRyaW1tZWRMaW5lLFxuXHRcdFx0XHRsaW5rTmFtZTogbnVsbCxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogb3JkZXIrKyxcblx0XHRcdH07XG5cdFx0XHRzZWN0aW9ucy5wdXNoKHtcblx0XHRcdFx0dHlwZTogXCJwcm9zZVwiLFxuXHRcdFx0XHRwcm9zZTogcGFyYWdyYXBoLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBwYXJhZ3JhcGgub3JpZ2luYWxPcmRlcixcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB7IHNlY3Rpb25zIH07XG59XG5cbi8qKlxuICogUGFyc2UgY29udGVudCBibG9ja3MgZnJvbSBiZWF0IGNvbnRlbnQgdXNpbmcgaGllcmFyY2hpY2FsIGhlYWRlcnNcbiAqIEZvcm1hdDpcbiAqIFxuICogIyMgQmVhdDogW1tsaW5rfGludGVudCAtPiBvdXRjb21lXV1cbiAqIHByb3NlIGF0IGJlYXQgbGV2ZWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQmVhdFByb3NlKGJlYXRDb250ZW50OiBzdHJpbmcpOiBIaWVyYXJjaGljYWxQcm9zZSB7XG5cdGNvbnN0IHNlY3Rpb25zOiBQYXJzZWRTZWN0aW9uW10gPSBbXTtcblxuXHQvLyBFeHRyYWN0IGNvbnRlbnQgYWZ0ZXIgZnJvbnRtYXR0ZXJcblx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IGJlYXRDb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XG5cdGNvbnN0IGNvbnRlbnRTdGFydCA9IGZyb250bWF0dGVyTWF0Y2ggPyBmcm9udG1hdHRlck1hdGNoWzBdLmxlbmd0aCA6IDA7XG5cdGNvbnN0IGJvZHlDb250ZW50ID0gYmVhdENvbnRlbnQuc3Vic3RyaW5nKGNvbnRlbnRTdGFydCkudHJpbSgpO1xuXG5cdC8vIEZpbmQgdGhlIGhpZXJhcmNoaWNhbCBwcm9zZSBzZWN0aW9uIC0gc3RhcnRzIHdpdGggXCIjIyBCZWF0OlwiXG5cdGNvbnN0IGJlYXRIZWFkZXJNYXRjaCA9IGJvZHlDb250ZW50Lm1hdGNoKC9eKCMjXFxzK0JlYXQ6XFxzKi4rKSQvbSk7XG5cdFxuXHRsZXQgcHJvc2VTdGFydEluZGV4ID0gLTE7XG5cdGlmIChiZWF0SGVhZGVyTWF0Y2gpIHtcblx0XHRwcm9zZVN0YXJ0SW5kZXggPSBib2R5Q29udGVudC5pbmRleE9mKGJlYXRIZWFkZXJNYXRjaFswXSk7XG5cdH1cblx0XG5cdGlmIChwcm9zZVN0YXJ0SW5kZXggPT09IC0xKSB7XG5cdFx0cmV0dXJuIHsgc2VjdGlvbnM6IFtdIH07XG5cdH1cblx0XG5cdGNvbnN0IHByb3NlQ29udGVudCA9IGJvZHlDb250ZW50LnN1YnN0cmluZyhwcm9zZVN0YXJ0SW5kZXgpO1xuXHRjb25zdCBsaW5lcyA9IHByb3NlQ29udGVudC5zcGxpdCgvXFxuLyk7XG5cblx0bGV0IG9yZGVyID0gMDtcblxuXHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcblx0XHRjb25zdCB0cmltbWVkTGluZSA9IGxpbmUudHJpbSgpO1xuXG5cdFx0Ly8gU2tpcCBlbXB0eSBsaW5lc1xuXHRcdGlmICghdHJpbW1lZExpbmUpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIFNraXAgaW5mbyBjYWxsb3V0c1xuXHRcdGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKFwiPlwiKSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIEJlYXQgaGVhZGVyOiAjIyBCZWF0OiBbW2xpbmt8dGV4dF1dIG9yICMjIEJlYXQ6IHRleHRcblx0XHRjb25zdCBiZWF0TWF0Y2ggPSB0cmltbWVkTGluZS5tYXRjaCgvXiMjXFxzK0JlYXQ6XFxzKiguKykkL2kpO1xuXHRcdGlmIChiZWF0TWF0Y2gpIHtcblx0XHRcdC8vIEJlYXQgaGVhZGVyIC0ganVzdCBza2lwLCB3ZSdyZSBhbHJlYWR5IGluIGJlYXQgY29udGV4dFxuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gU2tpcCBvdGhlciBoZWFkZXJzXG5cdFx0aWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoXCIjXCIpKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBTa2lwIGxpc3QgaXRlbXNcblx0XHRpZiAodHJpbW1lZExpbmUubWF0Y2goL15bKy1dXFxzKy8pKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBmb3IgY29udGVudCBibG9jazogW1tsaW5rfGNvbnRlbnRdXSBvciBwbGFpbiB0ZXh0XG5cdFx0Y29uc3QgcHJvc2VNYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eXFxzKlxcW1xcWyhbXlxcfF0rKVxcfChbXlxcXV0rKVxcXVxcXVxccyokLyk7XG5cdFx0aWYgKHByb3NlTWF0Y2gpIHtcblx0XHRcdGNvbnN0IGxpbmtOYW1lID0gcHJvc2VNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRjb25zdCBjb250ZW50ID0gcHJvc2VNYXRjaFsyXS50cmltKCk7XG5cdFx0XHRjb25zdCBwYXJhZ3JhcGg6IFBhcnNlZFBhcmFncmFwaCA9IHtcblx0XHRcdFx0Y29udGVudCxcblx0XHRcdFx0bGlua05hbWUsXG5cdFx0XHRcdG9yaWdpbmFsT3JkZXI6IG9yZGVyKyssXG5cdFx0XHR9O1xuXHRcdFx0c2VjdGlvbnMucHVzaCh7XG5cdFx0XHRcdHR5cGU6IFwicHJvc2VcIixcblx0XHRcdFx0cHJvc2U6IHBhcmFncmFwaCxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogcGFyYWdyYXBoLm9yaWdpbmFsT3JkZXIsXG5cdFx0XHR9KTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIFBsYWluIHRleHQgcGFyYWdyYXBoIChuZXcgY29udGVudCBibG9jayB3aXRob3V0IGxpbmspXG5cdFx0aWYgKHRyaW1tZWRMaW5lLmxlbmd0aCA+IDApIHtcblx0XHRcdGNvbnN0IHBhcmFncmFwaDogUGFyc2VkUGFyYWdyYXBoID0ge1xuXHRcdFx0XHRjb250ZW50OiB0cmltbWVkTGluZSxcblx0XHRcdFx0bGlua05hbWU6IG51bGwsXG5cdFx0XHRcdG9yaWdpbmFsT3JkZXI6IG9yZGVyKyssXG5cdFx0XHR9O1xuXHRcdFx0c2VjdGlvbnMucHVzaCh7XG5cdFx0XHRcdHR5cGU6IFwicHJvc2VcIixcblx0XHRcdFx0cHJvc2U6IHBhcmFncmFwaCxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogcGFyYWdyYXBoLm9yaWdpbmFsT3JkZXIsXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4geyBzZWN0aW9ucyB9O1xufVxuXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQ29udGVudEJsb2NrIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5cbmV4cG9ydCB0eXBlIENvbmZsaWN0UmVzb2x1dGlvbiA9IFwibG9jYWxcIiB8IFwicmVtb3RlXCIgfCBcIm1hbnVhbFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbmZsaWN0UmVzb2x1dGlvblJlc3VsdCB7XG5cdHJlc29sdXRpb246IENvbmZsaWN0UmVzb2x1dGlvbjtcblx0bWVyZ2VkQ29udGVudD86IHN0cmluZzsgLy8gT25seSBpZiByZXNvbHV0aW9uIGlzIFwibWFudWFsXCJcbn1cblxuZXhwb3J0IGNsYXNzIENvbmZsaWN0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGxvY2FsQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2s7XG5cdHJlbW90ZUNvbnRlbnRCbG9jazogQ29udGVudEJsb2NrO1xuXHRyZXNvbHV0aW9uOiBDb25mbGljdFJlc29sdXRpb25SZXN1bHQgfCBudWxsID0gbnVsbDtcblx0b25SZXNvbHZlOiAocmVzdWx0OiBDb25mbGljdFJlc29sdXRpb25SZXN1bHQpID0+IFByb21pc2U8dm9pZD47XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0YXBwOiBBcHAsXG5cdFx0bG9jYWxDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayxcblx0XHRyZW1vdGVDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayxcblx0XHRvblJlc29sdmU6IChyZXN1bHQ6IENvbmZsaWN0UmVzb2x1dGlvblJlc3VsdCkgPT4gUHJvbWlzZTx2b2lkPlxuXHQpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMubG9jYWxDb250ZW50QmxvY2sgPSBsb2NhbENvbnRlbnRCbG9jaztcblx0XHR0aGlzLnJlbW90ZUNvbnRlbnRCbG9jayA9IHJlbW90ZUNvbnRlbnRCbG9jaztcblx0XHR0aGlzLm9uUmVzb2x2ZSA9IG9uUmVzb2x2ZTtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHtcblx0XHRcdHRleHQ6IFwiQ29udGVudCBCbG9jayBDb25mbGljdFwiLFxuXHRcdH0pO1xuXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7XG5cdFx0XHR0ZXh0OiBcIlRoaXMgY29udGVudCBibG9jayBoYXMgYmVlbiBtb2RpZmllZCBib3RoIGxvY2FsbHkgYW5kIHJlbW90ZWx5LiBDaG9vc2UgaG93IHRvIHJlc29sdmUgdGhlIGNvbmZsaWN0OlwiLFxuXHRcdH0pO1xuXG5cdFx0Ly8gU2hvdyBkaWZmXG5cdFx0Y29uc3QgZGlmZkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoXCJjb25mbGljdC1kaWZmLWNvbnRhaW5lclwiKTtcblx0XHRcblx0XHQvLyBMb2NhbCB2ZXJzaW9uXG5cdFx0Y29uc3QgbG9jYWxEaXYgPSBkaWZmQ29udGFpbmVyLmNyZWF0ZURpdihcImNvbmZsaWN0LWxvY2FsXCIpO1xuXHRcdGxvY2FsRGl2LmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIkxvY2FsIFZlcnNpb25cIiB9KTtcblx0XHRjb25zdCBsb2NhbENvbnRlbnQgPSBsb2NhbERpdi5jcmVhdGVFbChcInByZVwiLCB7XG5cdFx0XHR0ZXh0OiB0aGlzLmxvY2FsQ29udGVudEJsb2NrLmNvbnRlbnQsXG5cdFx0XHRjbHM6IFwiY29uZmxpY3QtY29udGVudFwiLFxuXHRcdH0pO1xuXHRcdGxvY2FsQ29udGVudC5zdHlsZS53aGl0ZVNwYWNlID0gXCJwcmUtd3JhcFwiO1xuXHRcdGxvY2FsQ29udGVudC5zdHlsZS5tYXhIZWlnaHQgPSBcIjIwMHB4XCI7XG5cdFx0bG9jYWxDb250ZW50LnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XG5cdFx0bG9jYWxDb250ZW50LnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKVwiO1xuXHRcdGxvY2FsQ29udGVudC5zdHlsZS5wYWRkaW5nID0gXCIxMHB4XCI7XG5cdFx0bG9jYWxDb250ZW50LnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNHB4XCI7XG5cblx0XHQvLyBSZW1vdGUgdmVyc2lvblxuXHRcdGNvbnN0IHJlbW90ZURpdiA9IGRpZmZDb250YWluZXIuY3JlYXRlRGl2KFwiY29uZmxpY3QtcmVtb3RlXCIpO1xuXHRcdHJlbW90ZURpdi5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJSZW1vdGUgVmVyc2lvblwiIH0pO1xuXHRcdGNvbnN0IHJlbW90ZUNvbnRlbnQgPSByZW1vdGVEaXYuY3JlYXRlRWwoXCJwcmVcIiwge1xuXHRcdFx0dGV4dDogdGhpcy5yZW1vdGVDb250ZW50QmxvY2suY29udGVudCxcblx0XHRcdGNsczogXCJjb25mbGljdC1jb250ZW50XCIsXG5cdFx0fSk7XG5cdFx0cmVtb3RlQ29udGVudC5zdHlsZS53aGl0ZVNwYWNlID0gXCJwcmUtd3JhcFwiO1xuXHRcdHJlbW90ZUNvbnRlbnQuc3R5bGUubWF4SGVpZ2h0ID0gXCIyMDBweFwiO1xuXHRcdHJlbW90ZUNvbnRlbnQuc3R5bGUub3ZlcmZsb3cgPSBcImF1dG9cIjtcblx0XHRyZW1vdGVDb250ZW50LnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKVwiO1xuXHRcdHJlbW90ZUNvbnRlbnQuc3R5bGUucGFkZGluZyA9IFwiMTBweFwiO1xuXHRcdHJlbW90ZUNvbnRlbnQuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI0cHhcIjtcblxuXHRcdC8vIE1hbnVhbCBtZXJnZSBvcHRpb25cblx0XHRjb25zdCBtYW51YWxEaXYgPSBjb250ZW50RWwuY3JlYXRlRGl2KFwiY29uZmxpY3QtbWFudWFsXCIpO1xuXHRcdG1hbnVhbERpdi5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJNYW51YWwgTWVyZ2UgKE9wdGlvbmFsKVwiIH0pO1xuXHRcdGNvbnN0IG1hbnVhbFRleHRhcmVhID0gbWFudWFsRGl2LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwge1xuXHRcdFx0dGV4dDogdGhpcy5sb2NhbENvbnRlbnRCbG9jay5jb250ZW50LFxuXHRcdFx0Y2xzOiBcImNvbmZsaWN0LW1hbnVhbC1pbnB1dFwiLFxuXHRcdH0pO1xuXHRcdG1hbnVhbFRleHRhcmVhLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG5cdFx0bWFudWFsVGV4dGFyZWEuc3R5bGUubWluSGVpZ2h0ID0gXCIxNTBweFwiO1xuXHRcdG1hbnVhbFRleHRhcmVhLnN0eWxlLnBhZGRpbmcgPSBcIjEwcHhcIjtcblx0XHRtYW51YWxUZXh0YXJlYS5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcilcIjtcblx0XHRtYW51YWxUZXh0YXJlYS5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjRweFwiO1xuXHRcdG1hbnVhbFRleHRhcmVhLnN0eWxlLmZvbnRGYW1pbHkgPSBcInZhcigtLWZvbnQtbW9ub3NwYWNlKVwiO1xuXG5cdFx0Ly8gUmVzb2x1dGlvbiBidXR0b25zXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdihcImNvbmZsaWN0LWJ1dHRvbnNcIik7XG5cdFx0YnV0dG9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9IFwiMjBweFwiO1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG5cdFx0YnV0dG9uQ29udGFpbmVyLnN0eWxlLmdhcCA9IFwiMTBweFwiO1xuXG5cdFx0Ly8gVXNlIExvY2FsIGJ1dHRvblxuXHRcdGNvbnN0IHVzZUxvY2FsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiVXNlIExvY2FsXCIsXG5cdFx0XHRjbHM6IFwibW9kLWN0YVwiLFxuXHRcdH0pO1xuXHRcdHVzZUxvY2FsQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHR0aGlzLnJlc29sdXRpb24gPSB7IHJlc29sdXRpb246IFwibG9jYWxcIiB9O1xuXHRcdFx0YXdhaXQgdGhpcy5vblJlc29sdmUodGhpcy5yZXNvbHV0aW9uKTtcblx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHR9O1xuXG5cdFx0Ly8gVXNlIFJlbW90ZSBidXR0b25cblx0XHRjb25zdCB1c2VSZW1vdGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJVc2UgUmVtb3RlXCIsXG5cdFx0fSk7XG5cdFx0dXNlUmVtb3RlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHR0aGlzLnJlc29sdXRpb24gPSB7IHJlc29sdXRpb246IFwicmVtb3RlXCIgfTtcblx0XHRcdGF3YWl0IHRoaXMub25SZXNvbHZlKHRoaXMucmVzb2x1dGlvbik7XG5cdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0fTtcblxuXHRcdC8vIFVzZSBNYW51YWwgYnV0dG9uXG5cdFx0Y29uc3QgdXNlTWFudWFsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiVXNlIE1hbnVhbCBNZXJnZVwiLFxuXHRcdFx0Y2xzOiBcIm1vZC1wcmltYXJ5XCIsXG5cdFx0fSk7XG5cdFx0dXNlTWFudWFsQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHR0aGlzLnJlc29sdXRpb24gPSB7XG5cdFx0XHRcdHJlc29sdXRpb246IFwibWFudWFsXCIsXG5cdFx0XHRcdG1lcmdlZENvbnRlbnQ6IG1hbnVhbFRleHRhcmVhLnZhbHVlLFxuXHRcdFx0fTtcblx0XHRcdGF3YWl0IHRoaXMub25SZXNvbHZlKHRoaXMucmVzb2x1dGlvbik7XG5cdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0fTtcblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuXG4iLCAiaW1wb3J0IHR5cGUgU3RvcnlFbmdpbmVQbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcbmltcG9ydCB7IEV2ZW50UmVmLCBUQWJzdHJhY3RGaWxlLCBURmlsZSwgVEZvbGRlciB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgU3luY0VudGl0eVRhcmdldCB9IGZyb20gXCIuL2VudGl0eVN5bmNUeXBlc1wiO1xuXG50eXBlIFN5bmNSZWFzb24gPSBcImJsdXJcIiB8IFwiaWRsZVwiO1xuXG5jb25zdCBJRExFX0RFTEFZX01TID0gNjBfMDAwO1xuXG5leHBvcnQgY2xhc3MgQXV0b1N5bmNNYW5hZ2VyIHtcblx0cHJpdmF0ZSBsZWFmQ2hhbmdlUmVmPzogRXZlbnRSZWY7XG5cdHByaXZhdGUgZWRpdG9yQ2hhbmdlUmVmPzogRXZlbnRSZWY7XG5cdHByaXZhdGUgaWRsZVRpbWVvdXRJZDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgYWN0aXZlRmlsZTogVEZpbGUgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBsYXN0RWRpdFRzID0gMDtcblx0cHJpdmF0ZSBkaXJ0eUZpbGVzID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cdHByaXZhdGUgcGVuZGluZ1N5bmNzID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cblx0Y29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW46IFN0b3J5RW5naW5lUGx1Z2luKSB7XG5cdFx0dGhpcy5hY3RpdmVGaWxlID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cdFx0dGhpcy5sYXN0RWRpdFRzID0gRGF0ZS5ub3coKTtcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnRzKCk7XG5cdFx0dGhpcy5yZXNldElkbGVUaW1lcigpO1xuXHR9XG5cblx0ZGlzcG9zZSgpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5sZWFmQ2hhbmdlUmVmKSB7XG5cdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9mZnJlZih0aGlzLmxlYWZDaGFuZ2VSZWYpO1xuXHRcdFx0dGhpcy5sZWFmQ2hhbmdlUmVmID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAodGhpcy5lZGl0b3JDaGFuZ2VSZWYpIHtcblx0XHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub2ZmcmVmKHRoaXMuZWRpdG9yQ2hhbmdlUmVmKTtcblx0XHRcdHRoaXMuZWRpdG9yQ2hhbmdlUmVmID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAodGhpcy5pZGxlVGltZW91dElkICE9PSBudWxsKSB7XG5cdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuaWRsZVRpbWVvdXRJZCk7XG5cdFx0XHR0aGlzLmlkbGVUaW1lb3V0SWQgPSBudWxsO1xuXHRcdH1cblx0XHR0aGlzLmRpcnR5RmlsZXMuY2xlYXIoKTtcblx0XHR0aGlzLnBlbmRpbmdTeW5jcy5jbGVhcigpO1xuXHR9XG5cblx0cHJpdmF0ZSByZWdpc3RlckV2ZW50cygpOiB2b2lkIHtcblx0XHR0aGlzLmxlYWZDaGFuZ2VSZWYgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFxuXHRcdFx0XCJhY3RpdmUtbGVhZi1jaGFuZ2VcIixcblx0XHRcdHRoaXMuaGFuZGxlQWN0aXZlTGVhZkNoYW5nZVxuXHRcdCk7XG5cdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLmxlYWZDaGFuZ2VSZWYpO1xuXG5cdFx0dGhpcy5lZGl0b3JDaGFuZ2VSZWYgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFwiZWRpdG9yLWNoYW5nZVwiLCAoKSA9PiB7XG5cdFx0XHRjb25zdCBmaWxlID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cdFx0XHRpZiAoIWZpbGUpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmFjdGl2ZUZpbGUgPSBmaWxlO1xuXHRcdFx0dGhpcy5sYXN0RWRpdFRzID0gRGF0ZS5ub3coKTtcblx0XHRcdHRoaXMuZGlydHlGaWxlcy5hZGQoZmlsZS5wYXRoKTtcblx0XHRcdHRoaXMucmVzZXRJZGxlVGltZXIoKTtcblx0XHR9KTtcblx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KHRoaXMuZWRpdG9yQ2hhbmdlUmVmKTtcblx0fVxuXG5cdHByaXZhdGUgaGFuZGxlQWN0aXZlTGVhZkNoYW5nZSA9IChsZWFmOiB1bmtub3duKTogdm9pZCA9PiB7XG5cdFx0Y29uc3QgcHJldmlvdXNGaWxlID0gdGhpcy5hY3RpdmVGaWxlO1xuXHRcdGNvbnN0IG5ld0ZpbGUgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblxuXHRcdGlmIChcblx0XHRcdHByZXZpb3VzRmlsZSAmJlxuXHRcdFx0KCFuZXdGaWxlIHx8IHByZXZpb3VzRmlsZS5wYXRoICE9PSBuZXdGaWxlLnBhdGgpICYmXG5cdFx0XHR0aGlzLmRpcnR5RmlsZXMuaGFzKHByZXZpb3VzRmlsZS5wYXRoKVxuXHRcdCkge1xuXHRcdFx0dm9pZCB0aGlzLnRyaWdnZXJTeW5jRm9yRmlsZShwcmV2aW91c0ZpbGUsIFwiYmx1clwiKTtcblx0XHR9XG5cblx0XHR0aGlzLmFjdGl2ZUZpbGUgPSBuZXdGaWxlO1xuXHRcdHRoaXMubGFzdEVkaXRUcyA9IERhdGUubm93KCk7XG5cdFx0dGhpcy5yZXNldElkbGVUaW1lcigpO1xuXHR9O1xuXG5cdHByaXZhdGUgcmVzZXRJZGxlVGltZXIoKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuaWRsZVRpbWVvdXRJZCAhPT0gbnVsbCkge1xuXHRcdFx0d2luZG93LmNsZWFyVGltZW91dCh0aGlzLmlkbGVUaW1lb3V0SWQpO1xuXHRcdH1cblxuXHRcdGlmICghdGhpcy5hY3RpdmVGaWxlKSB7XG5cdFx0XHR0aGlzLmlkbGVUaW1lb3V0SWQgPSBudWxsO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuaWRsZVRpbWVvdXRJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFjdGl2ZUZpbGU7XG5cdFx0XHRpZiAoIWZpbGUpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBpZGxlRHVyYXRpb24gPSBEYXRlLm5vdygpIC0gdGhpcy5sYXN0RWRpdFRzO1xuXHRcdFx0aWYgKGlkbGVEdXJhdGlvbiA+PSBJRExFX0RFTEFZX01TICYmIHRoaXMuZGlydHlGaWxlcy5oYXMoZmlsZS5wYXRoKSkge1xuXHRcdFx0XHR2b2lkIHRoaXMudHJpZ2dlclN5bmNGb3JGaWxlKGZpbGUsIFwiaWRsZVwiKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMucmVzZXRJZGxlVGltZXIoKTtcblx0XHRcdH1cblx0XHR9LCBJRExFX0RFTEFZX01TKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgdHJpZ2dlclN5bmNGb3JGaWxlKGZpbGU6IFRGaWxlLCByZWFzb246IFN5bmNSZWFzb24pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBwYXRoID0gZmlsZS5wYXRoO1xuXG5cdFx0aWYgKHRoaXMucGVuZGluZ1N5bmNzLmhhcyhwYXRoKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMucGVuZGluZ1N5bmNzLmFkZChwYXRoKTtcblxuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCB0YXJnZXQgPSBhd2FpdCB0aGlzLnJlc29sdmVUYXJnZXQoZmlsZSk7XG5cdFx0XHRpZiAoIXRhcmdldCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0YXJnZXQucHVzaFdob2xlU3RvcnkpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc3luY1NlcnZpY2UucHVzaFN0b3J5KHRhcmdldC5mb2xkZXJQYXRoKTtcblx0XHRcdH0gZWxzZSBpZiAodGFyZ2V0LnN5bmNUYXJnZXQpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc3luY1NlcnZpY2UucHVzaFN0b3J5KHRhcmdldC5mb2xkZXJQYXRoLCB0YXJnZXQuc3luY1RhcmdldCk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuZGlydHlGaWxlcy5kZWxldGUocGF0aCk7XG5cdFx0XHRpZiAocmVhc29uID09PSBcImlkbGVcIikge1xuXHRcdFx0XHR0aGlzLmxhc3RFZGl0VHMgPSBEYXRlLm5vdygpO1xuXHRcdFx0XHR0aGlzLnJlc2V0SWRsZVRpbWVyKCk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGBBdXRvIHB1c2ggZmFpbGVkIGZvciAke2ZpbGUucGF0aH1gLCBlcnIpO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHR0aGlzLnBlbmRpbmdTeW5jcy5kZWxldGUocGF0aCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyByZXNvbHZlVGFyZ2V0KGZpbGU6IFRGaWxlKTogUHJvbWlzZTx7XG5cdFx0Zm9sZGVyUGF0aDogc3RyaW5nO1xuXHRcdHB1c2hXaG9sZVN0b3J5OiBib29sZWFuO1xuXHRcdHN5bmNUYXJnZXQ/OiBTeW5jRW50aXR5VGFyZ2V0O1xuXHR9IHwgbnVsbD4ge1xuXHRcdGNvbnN0IGZvbGRlclBhdGggPSB0aGlzLmZpbmRTdG9yeUZvbGRlclBhdGgoZmlsZSk7XG5cdFx0aWYgKCFmb2xkZXJQYXRoKSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHRpZiAoZmlsZS5uYW1lID09PSBcInN0b3J5Lm1kXCIpIHtcblx0XHRcdHJldHVybiB7IGZvbGRlclBhdGgsIHB1c2hXaG9sZVN0b3J5OiB0cnVlIH07XG5cdFx0fVxuXG5cdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXHRcdGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5wbHVnaW4uZmlsZU1hbmFnZXIucGFyc2VGcm9udG1hdHRlcihjb250ZW50KTtcblxuXHRcdGNvbnN0IGVudGl0eUlkID0gZnJvbnRtYXR0ZXI/LmlkO1xuXHRcdGlmICghZW50aXR5SWQpIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdGNvbnN0IHNjZW5lSWQgPSBmcm9udG1hdHRlci5zY2VuZV9pZDtcblx0XHRjb25zdCBjaGFwdGVySWQgPSBmcm9udG1hdHRlci5jaGFwdGVyX2lkO1xuXHRcdGNvbnN0IGlzQ29udGVudEZpbGUgPSBmaWxlLnBhdGguaW5jbHVkZXMoXCIvMDMtY29udGVudHMvXCIpO1xuXHRcdGNvbnN0IGlzQ2hhcHRlckZpbGUgPSBmaWxlLnBhdGguaW5jbHVkZXMoXCIvMDAtY2hhcHRlcnMvXCIpO1xuXHRcdGNvbnN0IGlzU2NlbmVGaWxlID0gZmlsZS5wYXRoLmluY2x1ZGVzKFwiLzAxLXNjZW5lcy9cIik7XG5cblx0XHRpZiAoZnJvbnRtYXR0ZXIuc3RvcnlfaWQgJiYgZnJvbnRtYXR0ZXIubnVtYmVyICYmIGlzQ2hhcHRlckZpbGUpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGZvbGRlclBhdGgsXG5cdFx0XHRcdHB1c2hXaG9sZVN0b3J5OiBmYWxzZSxcblx0XHRcdFx0c3luY1RhcmdldDogeyB0eXBlOiBcImNoYXB0ZXJcIiwgaWQ6IGVudGl0eUlkIH0sXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdGlmIChmcm9udG1hdHRlci5zdG9yeV9pZCAmJiAoaXNTY2VuZUZpbGUgfHwgY2hhcHRlcklkKSkge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Zm9sZGVyUGF0aCxcblx0XHRcdFx0cHVzaFdob2xlU3Rvcnk6IGZhbHNlLFxuXHRcdFx0XHRzeW5jVGFyZ2V0OiB7IHR5cGU6IFwic2NlbmVcIiwgaWQ6IGVudGl0eUlkIH0sXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdGlmIChzY2VuZUlkKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRmb2xkZXJQYXRoLFxuXHRcdFx0XHRwdXNoV2hvbGVTdG9yeTogZmFsc2UsXG5cdFx0XHRcdHN5bmNUYXJnZXQ6IHsgdHlwZTogXCJzY2VuZVwiLCBpZDogc2NlbmVJZCB9LFxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRpZiAoaXNDb250ZW50RmlsZSkge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Zm9sZGVyUGF0aCxcblx0XHRcdFx0cHVzaFdob2xlU3Rvcnk6IGZhbHNlLFxuXHRcdFx0XHRzeW5jVGFyZ2V0OiB7IHR5cGU6IFwiY29udGVudFwiLCBpZDogZW50aXR5SWQgfSxcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHRwcml2YXRlIGZpbmRTdG9yeUZvbGRlclBhdGgoZmlsZTogVEZpbGUpOiBzdHJpbmcgfCBudWxsIHtcblx0XHRsZXQgY3VycmVudDogVEZvbGRlciB8IG51bGwgPSBmaWxlLnBhcmVudDtcblxuXHRcdHdoaWxlIChjdXJyZW50KSB7XG5cdFx0XHRjb25zdCBzdG9yeUZpbGVQYXRoID0gYCR7Y3VycmVudC5wYXRofS9zdG9yeS5tZGA7XG5cdFx0XHRjb25zdCBtYXliZVN0b3J5RmlsZSA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoc3RvcnlGaWxlUGF0aCk7XG5cdFx0XHRpZiAobWF5YmVTdG9yeUZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0XHRyZXR1cm4gY3VycmVudC5wYXRoO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBwYXJlbnQgPSBjdXJyZW50LnBhcmVudDtcblx0XHRcdGlmIChwYXJlbnQgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG5cdFx0XHRcdGN1cnJlbnQgPSBwYXJlbnQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjdXJyZW50ID0gbnVsbDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuXG4iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIE5vdGljZSwgTW9kYWwsIHNldEljb24gfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBTdG9yeUVuZ2luZVBsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xuaW1wb3J0IHsgU3RvcnksIENoYXB0ZXIsIFNjZW5lLCBCZWF0LCBDb250ZW50QmxvY2ssIENvbnRlbnRBbmNob3IsIFdvcmxkLCBSUEdTeXN0ZW0sIENoYXJhY3RlciwgTG9jYXRpb24sIEFydGlmYWN0LCBXb3JsZEV2ZW50LCBUcmFpdCwgQXJjaGV0eXBlLCBGYWN0aW9uLCBMb3JlLCBUaW1lQ29uZmlnLCBDaGFyYWN0ZXJUcmFpdCwgQ2hhcmFjdGVyUmVsYXRpb25zaGlwLCBFdmVudENoYXJhY3RlciwgU2NlbmVSZWZlcmVuY2UgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IENoYXB0ZXJNb2RhbCB9IGZyb20gXCIuL21vZGFscy9DaGFwdGVyTW9kYWxcIjtcbmltcG9ydCB7IFNjZW5lTW9kYWwgfSBmcm9tIFwiLi9tb2RhbHMvU2NlbmVNb2RhbFwiO1xuaW1wb3J0IHsgQmVhdE1vZGFsIH0gZnJvbSBcIi4vbW9kYWxzL0JlYXRNb2RhbFwiO1xuaW1wb3J0IHsgQ29udGVudEJsb2NrTW9kYWwgfSBmcm9tIFwiLi9tb2RhbHMvQ29udGVudEJsb2NrTW9kYWxcIjtcbmltcG9ydCB7IENyZWF0ZVdvcmxkTW9kYWwgfSBmcm9tIFwiLi9DcmVhdGVXb3JsZE1vZGFsXCI7XG5pbXBvcnQgeyBXb3JsZERldGFpbHNNb2RhbCB9IGZyb20gXCIuL1dvcmxkRGV0YWlsc01vZGFsXCI7XG5pbXBvcnQgeyBUaW1lbGluZU1vZGFsIH0gZnJvbSBcIi4vVGltZWxpbmVNb2RhbFwiO1xuaW1wb3J0IHsgQ2hhcmFjdGVyRGV0YWlsc1ZpZXcgfSBmcm9tIFwiLi9DaGFyYWN0ZXJEZXRhaWxzVmlld1wiO1xuXG5leHBvcnQgY29uc3QgU1RPUllfTElTVF9WSUVXX1RZUEUgPSBcInN0b3J5LWVuZ2luZS1saXN0LXZpZXdcIjtcblxuXG5cblxuZXhwb3J0IGNsYXNzIFN0b3J5TGlzdFZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG5cdHBsdWdpbjogU3RvcnlFbmdpbmVQbHVnaW47XG5cdHN0b3JpZXM6IFN0b3J5W10gPSBbXTtcblx0d29ybGRzOiBXb3JsZFtdID0gW107XG5cdHJwZ1N5c3RlbXM6IFJQR1N5c3RlbVtdID0gW107XG5cdGxvYWRpbmc6IGJvb2xlYW4gPSB0cnVlO1xuXHRlcnJvcjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cdGNvbnRlbnRFbCE6IEhUTUxFbGVtZW50O1xuXHRoZWFkZXJFbCE6IEhUTUxFbGVtZW50O1xuXHRjdXJyZW50U3Rvcnk6IFN0b3J5IHwgbnVsbCA9IG51bGw7XG5cdGN1cnJlbnRXb3JsZDogV29ybGQgfCBudWxsID0gbnVsbDtcblx0dmlld01vZGU6IFwibGlzdFwiIHwgXCJkZXRhaWxzXCIgfCBcIndvcmxkLWRldGFpbHNcIiB8IFwiY2hhcmFjdGVyLWRldGFpbHNcIiA9IFwibGlzdFwiO1xuXHRjdXJyZW50VGFiOiBcImNoYXB0ZXJzXCIgfCBcInNjZW5lc1wiIHwgXCJiZWF0c1wiIHwgXCJjb250ZW50c1wiIHwgXCJjaGFyYWN0ZXJzXCIgPSBcImNoYXB0ZXJzXCI7XG5cdHN0b3J5Q2hhcmFjdGVyczogQ2hhcmFjdGVyW10gPSBbXTtcblx0d29ybGRUYWI6IFwiY2hhcmFjdGVyc1wiIHwgXCJ0cmFpdHNcIiB8IFwiYXJjaGV0eXBlc1wiIHwgXCJldmVudHNcIiB8IFwibG9yZVwiIHwgXCJsb2NhdGlvbnNcIiB8IFwiZmFjdGlvbnNcIiB8IFwiYXJ0aWZhY3RzXCIgPSBcImNoYXJhY3RlcnNcIjtcblx0bGlzdFRhYjogXCJzdG9yaWVzXCIgfCBcIndvcmxkc1wiIHwgXCJycGctc3lzdGVtc1wiID0gXCJzdG9yaWVzXCI7XG5cdGV4cGFuZGVkV29ybGRJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cdC8vIENoYXJhY3RlciBEZXRhaWxzIFZpZXdcblx0Y2hhcmFjdGVyRGV0YWlsc1ZpZXc6IENoYXJhY3RlckRldGFpbHNWaWV3IHwgbnVsbCA9IG51bGw7XG5cdGNoYXB0ZXJzOiBDaGFwdGVyW10gPSBbXTtcblx0c2NlbmVzOiBTY2VuZVtdID0gW107XG5cdGJlYXRzOiBCZWF0W10gPSBbXTtcblx0Y29udGVudEJsb2NrczogQ29udGVudEJsb2NrW10gPSBbXTtcblx0Y29udGVudEJsb2NrUmVmczogQ29udGVudEFuY2hvcltdID0gW107XG5cdGxvYWRpbmdIaWVyYXJjaHk6IGJvb2xlYW4gPSBmYWxzZTtcblx0Ly8gV29ybGQgZW50aXRpZXNcblx0Y2hhcmFjdGVyczogQ2hhcmFjdGVyW10gPSBbXTtcblx0bG9jYXRpb25zOiBMb2NhdGlvbltdID0gW107XG5cdGFydGlmYWN0czogQXJ0aWZhY3RbXSA9IFtdO1xuXHRldmVudHM6IFdvcmxkRXZlbnRbXSA9IFtdO1xuXHR0cmFpdHM6IFRyYWl0W10gPSBbXTtcblx0YXJjaGV0eXBlczogQXJjaGV0eXBlW10gPSBbXTtcblx0ZmFjdGlvbnM6IEZhY3Rpb25bXSA9IFtdO1xuXHRsb3JlczogTG9yZVtdID0gW107XG5cdGxvYWRpbmdXb3JsZERhdGE6IGJvb2xlYW4gPSBmYWxzZTtcblxuXHRjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IFN0b3J5RW5naW5lUGx1Z2luKSB7XG5cdFx0c3VwZXIobGVhZik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiBTVE9SWV9MSVNUX1ZJRVdfVFlQRTtcblx0fVxuXG5cdFx0Z2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcblx0XHRpZiAodGhpcy52aWV3TW9kZSA9PT0gXCJkZXRhaWxzXCIgJiYgdGhpcy5jdXJyZW50U3RvcnkpIHtcblx0XHRcdHJldHVybiB0aGlzLmN1cnJlbnRTdG9yeS50aXRsZTtcblx0XHR9XG5cdFx0aWYgKHRoaXMudmlld01vZGUgPT09IFwid29ybGQtZGV0YWlsc1wiICYmIHRoaXMuY3VycmVudFdvcmxkKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5jdXJyZW50V29ybGQubmFtZTtcblx0XHR9XG5cdFx0aWYgKHRoaXMudmlld01vZGUgPT09IFwiY2hhcmFjdGVyLWRldGFpbHNcIiAmJiB0aGlzLmNoYXJhY3RlckRldGFpbHNWaWV3KSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5jaGFyYWN0ZXJEZXRhaWxzVmlld1tcImNoYXJhY3RlclwiXS5uYW1lO1xuXHRcdH1cblx0XHRyZXR1cm4gXCJTdG9yaWVzXCI7XG5cdH1cblxuXHRnZXRJY29uKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIFwiYm9vay1vcGVuXCI7XG5cdH1cblxuXHRhc3luYyBvbk9wZW4oKSB7XG5cdFx0Y29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudDtcblx0XHRjb250YWluZXIuZW1wdHkoKTtcblx0XHRjb250YWluZXIuYWRkQ2xhc3MoXCJzdG9yeS1lbmdpbmUtdmlldy1jb250YWluZXJcIik7XG5cdFx0XG5cdFx0YXdhaXQgdGhpcy5yZW5kZXIoY29udGFpbmVyKTtcblx0XHRhd2FpdCB0aGlzLmxvYWRTdG9yaWVzKCk7XG5cdH1cblxuXHRhc3luYyBvbkNsb3NlKCkge1xuXHRcdC8vIENsZWFudXAgaWYgbmVlZGVkXG5cdH1cblxuXHRhc3luYyByZW5kZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xuXG5cdFx0Ly8gSGVhZGVyIC0gd2lsbCBiZSB1cGRhdGVkIGJhc2VkIG9uIHZpZXcgbW9kZVxuXHRcdHRoaXMuaGVhZGVyRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS12aWV3LWhlYWRlclwiIH0pO1xuXHRcdFxuXHRcdC8vIENvbnRlbnQgYXJlYVxuXHRcdHRoaXMuY29udGVudEVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdmlldy1jb250ZW50XCIgfSk7XG5cblx0XHQvLyBSZW5kZXIgYmFzZWQgb24gY3VycmVudCBtb2RlXG5cdFx0aWYgKHRoaXMudmlld01vZGUgPT09IFwiZGV0YWlsc1wiICYmIHRoaXMuY3VycmVudFN0b3J5KSB7XG5cdFx0XHR0aGlzLnJlbmRlckRldGFpbHMoKTtcblx0XHR9IGVsc2UgaWYgKHRoaXMudmlld01vZGUgPT09IFwid29ybGQtZGV0YWlsc1wiICYmIHRoaXMuY3VycmVudFdvcmxkKSB7XG5cdFx0XHR0aGlzLnJlbmRlcldvcmxkRGV0YWlscygpO1xuXHRcdH0gZWxzZSBpZiAodGhpcy52aWV3TW9kZSA9PT0gXCJjaGFyYWN0ZXItZGV0YWlsc1wiICYmIHRoaXMuY2hhcmFjdGVyRGV0YWlsc1ZpZXcpIHtcblx0XHRcdHRoaXMuY2hhcmFjdGVyRGV0YWlsc1ZpZXcucmVuZGVyKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucmVuZGVyTGlzdEhlYWRlcigpO1xuXHRcdFx0dGhpcy5yZW5kZXJMaXN0Q29udGVudCgpO1xuXHRcdH1cblx0fVxuXG5cdHJlbmRlckxpc3RIZWFkZXIoKSB7XG5cdFx0aWYgKCF0aGlzLmhlYWRlckVsKSByZXR1cm47XG5cblx0XHR0aGlzLmhlYWRlckVsLmVtcHR5KCk7XG5cdFx0dGhpcy5oZWFkZXJFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJTdG9yaWVzXCIgfSk7XG5cblx0XHQvLyBUYWJzIGZvciBsaXN0IHZpZXdcblx0XHRjb25zdCB0YWJzQ29udGFpbmVyID0gdGhpcy5oZWFkZXJFbC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXRhYnNcIiB9KTtcblx0XHRcblx0XHRjb25zdCBzdG9yaWVzVGFiID0gdGFic0NvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIlN0b3JpZXNcIixcblx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS10YWIgJHt0aGlzLmxpc3RUYWIgPT09IFwic3Rvcmllc1wiID8gXCJpcy1hY3RpdmVcIiA6IFwiXCJ9YCxcblx0XHR9KTtcblx0XHRzdG9yaWVzVGFiLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLmxpc3RUYWIgPSBcInN0b3JpZXNcIjtcblx0XHRcdHRoaXMucmVuZGVyTGlzdEhlYWRlcigpO1xuXHRcdFx0dGhpcy5yZW5kZXJMaXN0Q29udGVudCgpO1xuXHRcdH07XG5cblx0XHRjb25zdCB3b3JsZHNUYWIgPSB0YWJzQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiV29ybGRzXCIsXG5cdFx0XHRjbHM6IGBzdG9yeS1lbmdpbmUtdGFiICR7dGhpcy5saXN0VGFiID09PSBcIndvcmxkc1wiID8gXCJpcy1hY3RpdmVcIiA6IFwiXCJ9YCxcblx0XHR9KTtcblx0XHR3b3JsZHNUYWIub25jbGljayA9ICgpID0+IHtcblx0XHRcdHRoaXMubGlzdFRhYiA9IFwid29ybGRzXCI7XG5cdFx0XHR0aGlzLnJlbmRlckxpc3RIZWFkZXIoKTtcblx0XHRcdHRoaXMucmVuZGVyTGlzdENvbnRlbnQoKTtcblx0XHR9O1xuXG5cdFx0Y29uc3QgcnBnU3lzdGVtc1RhYiA9IHRhYnNDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJSUEcgU3lzdGVtc1wiLFxuXHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLXRhYiAke3RoaXMubGlzdFRhYiA9PT0gXCJycGctc3lzdGVtc1wiID8gXCJpcy1hY3RpdmVcIiA6IFwiXCJ9YCxcblx0XHR9KTtcblx0XHRycGdTeXN0ZW1zVGFiLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLmxpc3RUYWIgPSBcInJwZy1zeXN0ZW1zXCI7XG5cdFx0XHR0aGlzLnJlbmRlckxpc3RIZWFkZXIoKTtcblx0XHRcdHRoaXMucmVuZGVyTGlzdENvbnRlbnQoKTtcblx0XHR9O1xuXG5cdFx0Ly8gU2V0dGluZ3MgYnV0dG9uIChnZWFyIGljb24pIGluIGhlYWRlclxuXHRcdGNvbnN0IHNldHRpbmdzQnV0dG9uID0gdGFic0NvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXNldHRpbmdzLWJ0biBzdG9yeS1lbmdpbmUtdGFiXCIsXG5cdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIk9wZW4gU2V0dGluZ3NcIiB9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihzZXR0aW5nc0J1dHRvbiwgXCJnZWFyXCIpO1xuXHRcdHNldHRpbmdzQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLnBsdWdpbi5vcGVuU2V0dGluZ3MoKTtcblx0XHR9O1xuXHR9XG5cblx0cmVuZGVyTGlzdENvbnRlbnQoKSB7XG5cdFx0aWYgKCF0aGlzLmNvbnRlbnRFbCkgcmV0dXJuO1xuXG5cdFx0Ly8gRW5zdXJlIGxpc3QgbGF5b3V0IChzdGFja2VkKSBmb3IgbGlzdCB2aWV3IHNjcmVlbnNcblx0XHR0aGlzLmNvbnRlbnRFbC5hZGRDbGFzcyhcInN0b3J5LWVuZ2luZS1saXN0LWxheW91dFwiKTtcblx0XHR0aGlzLmNvbnRlbnRFbC5yZW1vdmVDbGFzcyhcInN0b3J5LWVuZ2luZS1zaWRlYmFyLWxheW91dFwiKTtcblxuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cblx0XHRpZiAodGhpcy5sb2FkaW5nKSB7XG5cdFx0XHR0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIkxvYWRpbmcuLi5cIiB9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5lcnJvcikge1xuXHRcdFx0dGhpcy5jb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHtcblx0XHRcdFx0dGV4dDogYEVycm9yOiAke3RoaXMuZXJyb3J9YCxcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lcnJvclwiLFxuXHRcdFx0fSk7XG5cdFx0XHQvLyBTdGlsbCBzaG93IGFjdGlvbnMgYmFyIGV2ZW4gb24gZXJyb3Jcblx0XHRcdHRoaXMucmVuZGVyQWN0aW9uc0JhcigpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHN3aXRjaCAodGhpcy5saXN0VGFiKSB7XG5cdFx0XHRjYXNlIFwic3Rvcmllc1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlclN0b3JpZXNUYWIoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwid29ybGRzXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRzVGFiKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcInJwZy1zeXN0ZW1zXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyUlBHU3lzdGVtc1RhYigpO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHQvLyBBY3Rpb25zIGJhciBiZWxvdyBsaXN0XG5cdFx0dGhpcy5yZW5kZXJBY3Rpb25zQmFyKCk7XG5cdH1cblxuXHRyZW5kZXJBY3Rpb25zQmFyKCkge1xuXHRcdGlmICghdGhpcy5jb250ZW50RWwpIHJldHVybjtcblxuXHRcdGNvbnN0IGFjdGlvbnNCYXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWFjdGlvbnMtYmFyXCIgfSk7XG5cdFx0XG5cdFx0Y29uc3QgcmVmcmVzaEJ1dHRvbiA9IGFjdGlvbnNCYXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJSZWZyZXNoXCIsXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXJlZnJlc2gtYnRuXCIsXG5cdFx0fSk7XG5cdFx0cmVmcmVzaEJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0YXdhaXQgdGhpcy5sb2FkU3RvcmllcygpO1xuXHRcdH07XG5cblx0XHRjb25zdCBzeW5jQWxsQnV0dG9uID0gYWN0aW9uc0Jhci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIlN5bmMgQWxsXCIsXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXN5bmMtYWxsLWJ0blwiLFxuXHRcdH0pO1xuXHRcdHN5bmNBbGxCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MudGVuYW50SWQpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBjb25maWd1cmUgVGVuYW50IElEIGluIHNldHRpbmdzXCIsIDUwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJTeW5jaW5nIGFsbCBzdG9yaWVzLi4uXCIpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zeW5jU2VydmljZS5wdWxsQWxsU3RvcmllcygpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRTdG9yaWVzKCk7IC8vIFJlZnJlc2ggdGhlIGxpc3QgYWZ0ZXIgc3luY1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9XG5cdFx0XHRcdFx0ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIHN5bmMgc3Rvcmllc1wiO1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIENyZWF0ZSBidXR0b24gYmFzZWQgb24gYWN0aXZlIHRhYlxuXHRcdGxldCBjcmVhdGVCdXR0b25UZXh0ID0gXCJDcmVhdGUgU3RvcnlcIjtcblx0XHRsZXQgY3JlYXRlQnV0dG9uQWN0aW9uID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5wbHVnaW4uY3JlYXRlU3RvcnlDb21tYW5kKCk7XG5cdFx0fTtcblxuXHRcdGlmICh0aGlzLmxpc3RUYWIgPT09IFwid29ybGRzXCIpIHtcblx0XHRcdGNyZWF0ZUJ1dHRvblRleHQgPSBcIkNyZWF0ZSBXb3JsZFwiO1xuXHRcdFx0Y3JlYXRlQnV0dG9uQWN0aW9uID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRuZXcgQ3JlYXRlV29ybGRNb2RhbCh0aGlzLmFwcCwgYXN5bmMgKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgZ2VucmU6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBDcmVhdGluZyB3b3JsZCBcIiR7bmFtZX1cIi4uLmApO1xuXHRcdFx0XHRcdFx0Y29uc3QgbmV3V29ybGQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlV29ybGQobmFtZSwgZGVzY3JpcHRpb24sIGdlbnJlKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYFdvcmxkIFwiJHtuYW1lfVwiIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5YCk7XG5cdFx0XHRcdFx0XHQvLyBSZWZyZXNoIHdvcmxkcyBsaXN0XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRTdG9yaWVzKCk7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gY3JlYXRlIHdvcmxkXCI7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KS5vcGVuKCk7XG5cdFx0XHR9O1xuXHRcdH0gZWxzZSBpZiAodGhpcy5saXN0VGFiID09PSBcInJwZy1zeXN0ZW1zXCIpIHtcblx0XHRcdGNyZWF0ZUJ1dHRvblRleHQgPSBcIkNyZWF0ZSBSUEcgU3lzdGVtXCI7XG5cdFx0XHRjcmVhdGVCdXR0b25BY3Rpb24gPSAoKSA9PiB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJDcmVhdGUgUlBHIFN5c3RlbSAtIENvbWluZyBzb29uXCIsIDMwMDApO1xuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRjb25zdCBjcmVhdGVCdXR0b24gPSBhY3Rpb25zQmFyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IGNyZWF0ZUJ1dHRvblRleHQsXG5cdFx0XHRjbHM6IFwibW9kLWN0YSBzdG9yeS1lbmdpbmUtY3JlYXRlLWJ0blwiLFxuXHRcdH0pO1xuXHRcdGNyZWF0ZUJ1dHRvbi5vbmNsaWNrID0gY3JlYXRlQnV0dG9uQWN0aW9uO1xuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJFbXB0eUNhcmQoXG5cdFx0Y29udGFpbmVyOiBIVE1MRWxlbWVudCxcblx0XHRvcHRpb25zOiB7XG5cdFx0XHRpY29uOiBzdHJpbmc7XG5cdFx0XHR0aXRsZTogc3RyaW5nO1xuXHRcdFx0ZGVzY3JpcHRpb24/OiBzdHJpbmc7XG5cdFx0XHRhY3Rpb25UZXh0Pzogc3RyaW5nO1xuXHRcdFx0b25BY3Rpb24/OiAoKSA9PiB2b2lkO1xuXHRcdH1cblx0KSB7XG5cdFx0Y29uc3QgY2FyZCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWVtcHR5LWNhcmRcIiB9KTtcblx0XHRjb25zdCBpY29uV3JhcHBlciA9IGNhcmQuY3JlYXRlU3Bhbih7IGNsczogXCJzdG9yeS1lbmdpbmUtZW1wdHktaWNvblwiIH0pO1xuXHRcdHNldEljb24oaWNvbldyYXBwZXIsIG9wdGlvbnMuaWNvbik7XG5cblx0XHRjb25zdCBjb3B5ID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWVtcHR5LWNvcHlcIiB9KTtcblx0XHRjb3B5LmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBvcHRpb25zLnRpdGxlIH0pO1xuXHRcdGlmIChvcHRpb25zLmRlc2NyaXB0aW9uKSB7XG5cdFx0XHRjb3B5LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IG9wdGlvbnMuZGVzY3JpcHRpb24gfSk7XG5cdFx0fVxuXG5cdFx0aWYgKG9wdGlvbnMuYWN0aW9uVGV4dCAmJiBvcHRpb25zLm9uQWN0aW9uKSB7XG5cdFx0XHRjb25zdCBhY3Rpb25zID0gY29weS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWVtcHR5LWFjdGlvbnNcIiB9KTtcblx0XHRcdGNvbnN0IGFjdGlvbkJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHR0ZXh0OiBvcHRpb25zLmFjdGlvblRleHQsXG5cdFx0XHRcdGNsczogXCJtb2QtY3RhIHN0b3J5LWVuZ2luZS1lbXB0eS1hY3Rpb25cIixcblx0XHRcdH0pO1xuXHRcdFx0YWN0aW9uQnRuLm9uY2xpY2sgPSBvcHRpb25zLm9uQWN0aW9uO1xuXHRcdH1cblxuXHRcdHJldHVybiBjYXJkO1xuXHR9XG5cblx0cmVuZGVyRGV0YWlsc0hlYWRlcigpIHtcblx0XHRpZiAoIXRoaXMuaGVhZGVyRWwgfHwgIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cblx0XHRcdHRoaXMuaGVhZGVyRWwuZW1wdHkoKTtcblxuXHRcdFx0Y29uc3QgaGVhZGVyQ2FyZCA9IHRoaXMuaGVhZGVyRWwuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zdG9yeS1kZXRhaWxzLWhlYWRlclwiIH0pO1xuXHRcdFx0Y29uc3QgaGVhZGVyQ29udGVudCA9IGhlYWRlckNhcmQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zdG9yeS1oZWFkZXItY29udGVudFwiIH0pO1xuXG5cdFx0XHRjb25zdCB0b3BSb3cgPSBoZWFkZXJDb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtc3RvcnktaGVhZGVyLXRvcFwiIH0pO1xuXHRcdFx0Y29uc3QgYmFja0J1dHRvbiA9IHRvcFJvdy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdHRleHQ6IFwiXHUyMTkwIEJhY2tcIixcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1iYWNrLWJ0blwiLFxuXHRcdFx0fSk7XG5cdFx0XHRiYWNrQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuc2hvd0xpc3QoKTtcblx0XHRcdH07XG5cblx0XHRcdGNvbnN0IGhlYWRlckFjdGlvbnMgPSB0b3BSb3cuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1oZWFkZXItYWN0aW9uc1wiIH0pO1xuXHRcdFx0aWYgKHRoaXMuY3VycmVudFN0b3J5LndvcmxkX2lkKSB7XG5cdFx0XHRcdGNvbnN0IHdvcmxkID0gdGhpcy53b3JsZHMuZmluZCh3ID0+IHcuaWQgPT09IHRoaXMuY3VycmVudFN0b3J5IS53b3JsZF9pZCk7XG5cdFx0XHRcdGlmICh3b3JsZCkge1xuXHRcdFx0XHRcdGNvbnN0IHdvcmxkQnV0dG9uID0gaGVhZGVyQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLWJ0blwiLFxuXHRcdFx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogYEdvIHRvIFdvcmxkOiAke3dvcmxkLm5hbWV9YCB9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0c2V0SWNvbih3b3JsZEJ1dHRvbiwgXCJnbG9iZVwiKTtcblx0XHRcdFx0XHR3b3JsZEJ1dHRvbi5jcmVhdGVTcGFuKHsgdGV4dDogXCJXb3JsZFwiIH0pO1xuXHRcdFx0XHRcdHdvcmxkQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnNob3dXb3JsZERldGFpbHMod29ybGQpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgY29udGV4dEJ1dHRvbiA9IGhlYWRlckFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWNvbnRleHQtYnRuXCIsXG5cdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiU3RvcnkgQWN0aW9uc1wiIH1cblx0XHRcdH0pO1xuXHRcdFx0c2V0SWNvbihjb250ZXh0QnV0dG9uLCBcIm1vcmUtdmVydGljYWxcIik7XG5cblx0XHRcdGNvbnN0IGRyb3Bkb3duTWVudSA9IGhlYWRlckFjdGlvbnMuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1kcm9wZG93bi1tZW51XCIgfSk7XG5cdFx0XHRkcm9wZG93bk1lbnUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG5cdFx0XHRjb25zdCBlZGl0T3B0aW9uID0gZHJvcGRvd25NZW51LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1kcm9wZG93bi1pdGVtXCIsXG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24oZWRpdE9wdGlvbiwgXCJwZW5jaWxcIik7XG5cdFx0XHRlZGl0T3B0aW9uLmNyZWF0ZVNwYW4oeyB0ZXh0OiBcIkVkaXQgU3RvcnkgTmFtZVwiIH0pO1xuXHRcdFx0ZWRpdE9wdGlvbi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRkcm9wZG93bk1lbnUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdFx0XHR0aGlzLnNob3dFZGl0U3RvcnlOYW1lTW9kYWwoKTtcblx0XHRcdH07XG5cblx0XHRcdGNvbnN0IGNsb25lT3B0aW9uID0gZHJvcGRvd25NZW51LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1kcm9wZG93bi1pdGVtXCIsXG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24oY2xvbmVPcHRpb24sIFwiY29weVwiKTtcblx0XHRcdGNsb25lT3B0aW9uLmNyZWF0ZVNwYW4oeyB0ZXh0OiBcIkNsb25lIFN0b3J5XCIgfSk7XG5cdFx0XHRjbG9uZU9wdGlvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRkcm9wZG93bk1lbnUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmNsb25lU3RvcnkoKTtcblx0XHRcdH07XG5cblx0XHRcdGNvbnN0IHB1bGxPcHRpb24gPSBkcm9wZG93bk1lbnUuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWRyb3Bkb3duLWl0ZW1cIixcblx0XHRcdH0pO1xuXHRcdFx0c2V0SWNvbihwdWxsT3B0aW9uLCBcImRvd25sb2FkXCIpO1xuXHRcdFx0cHVsbE9wdGlvbi5jcmVhdGVTcGFuKHsgdGV4dDogXCJQdWxsIGZyb20gU2VydmljZVwiIH0pO1xuXHRcdFx0cHVsbE9wdGlvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRkcm9wZG93bk1lbnUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdFx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShgUHVsbGluZyBzdG9yeSBcIiR7dGhpcy5jdXJyZW50U3RvcnkudGl0bGV9XCIuLi5gKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zeW5jU2VydmljZS5wdWxsU3RvcnkodGhpcy5jdXJyZW50U3RvcnkuaWQpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYFN0b3J5IHB1bGxlZCBzdWNjZXNzZnVsbHkhYCk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBwdWxsIHN0b3J5XCI7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHRjb25zdCBwdXNoT3B0aW9uID0gZHJvcGRvd25NZW51LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1kcm9wZG93bi1pdGVtXCIsXG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24ocHVzaE9wdGlvbiwgXCJ1cGxvYWRcIik7XG5cdFx0XHRwdXNoT3B0aW9uLmNyZWF0ZVNwYW4oeyB0ZXh0OiBcIlB1c2ggdG8gU2VydmljZVwiIH0pO1xuXHRcdFx0cHVzaE9wdGlvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRkcm9wZG93bk1lbnUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdFx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29uc3QgZm9sZGVyUGF0aCA9IHRoaXMucGx1Z2luLmZpbGVNYW5hZ2VyLmdldFN0b3J5Rm9sZGVyUGF0aCh0aGlzLmN1cnJlbnRTdG9yeS50aXRsZSk7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShgUHVzaGluZyBzdG9yeSBcIiR7dGhpcy5jdXJyZW50U3RvcnkudGl0bGV9XCIuLi5gKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zeW5jU2VydmljZS5wdXNoU3RvcnkoZm9sZGVyUGF0aCk7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShgU3RvcnkgcHVzaGVkIHN1Y2Nlc3NmdWxseSFgKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIHB1c2ggc3RvcnlcIjtcblx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdGNvbnRleHRCdXR0b24ub25jbGljayA9IChlKSA9PiB7XG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdGNvbnN0IGlzVmlzaWJsZSA9IGRyb3Bkb3duTWVudS5zdHlsZS5kaXNwbGF5ICE9PSBcIm5vbmVcIjtcblx0XHRcdFx0ZHJvcGRvd25NZW51LnN0eWxlLmRpc3BsYXkgPSBpc1Zpc2libGUgPyBcIm5vbmVcIiA6IFwiYmxvY2tcIjtcblx0XHRcdH07XG5cblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cdFx0XHRcdGRyb3Bkb3duTWVudS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHR9LCB7IG9uY2U6IHRydWUgfSk7XG5cblx0XHRcdGNvbnN0IHRpdGxlU2VjdGlvbiA9IGhlYWRlckNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zdG9yeS10aXRsZS1zZWN0aW9uXCIgfSk7XG5cdFx0XHR0aXRsZVNlY3Rpb24uY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IHRoaXMuY3VycmVudFN0b3J5LnRpdGxlLCBjbHM6IFwic3RvcnktZW5naW5lLXN0b3J5LW5hbWVcIiB9KTtcblxuXHRcdFx0Y29uc3QgbWV0YVJvdyA9IHRpdGxlU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXN0b3J5LW1ldGEtcm93XCIgfSk7XG5cdFx0XHRjb25zdCBzdGF0dXNQaWxsID0gbWV0YVJvdy5jcmVhdGVTcGFuKHtcblx0XHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLXN0YXR1cy1waWxsIHN0b3J5LWVuZ2luZS1zdGF0dXMtJHt0aGlzLmN1cnJlbnRTdG9yeS5zdGF0dXMudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICctJyl9YFxuXHRcdFx0fSk7XG5cdFx0XHRzdGF0dXNQaWxsLnRleHRDb250ZW50ID0gdGhpcy5jdXJyZW50U3Rvcnkuc3RhdHVzO1xuXG5cdFx0XHRjb25zdCB2ZXJzaW9uQmFkZ2UgPSBtZXRhUm93LmNyZWF0ZVNwYW4oeyBjbHM6IFwic3RvcnktZW5naW5lLXBpbGwgc3RvcnktZW5naW5lLXBpbGwtc3Ryb25nXCIgfSk7XG5cdFx0XHR2ZXJzaW9uQmFkZ2UudGV4dENvbnRlbnQgPSBgdiR7dGhpcy5jdXJyZW50U3RvcnkudmVyc2lvbl9udW1iZXJ9YDtcblxuXHRcdFx0Y29uc3QgdXVpZENvbnRhaW5lciA9IG1ldGFSb3cuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zdG9yeS11dWlkXCIgfSk7XG5cdFx0XHR1dWlkQ29udGFpbmVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHt0aGlzLmN1cnJlbnRTdG9yeS5pZC5zdWJzdHJpbmcoMCwgMTApfS4uLmAgfSk7XG5cdFx0XHRjb25zdCBjb3B5VXVpZEJ1dHRvbiA9IHV1aWRDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWNvcHktdXVpZC1idG5cIixcblx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJDb3B5IFVVSURcIiB9XG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24oY29weVV1aWRCdXR0b24sIFwiY29weVwiKTtcblx0XHRcdGNvcHlVdWlkQnV0dG9uLm9uY2xpY2sgPSAoZSkgPT4ge1xuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHR0aGlzLmNvcHlTdG9yeUlkKCk7XG5cdFx0XHR9O1xuXHR9XG5cblx0cmVuZGVyU3Rvcmllc1RhYigpIHtcblx0XHRcdGlmICh0aGlzLnN0b3JpZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdHRoaXMucmVuZGVyRW1wdHlDYXJkKHRoaXMuY29udGVudEVsLCB7XG5cdFx0XHRcdFx0aWNvbjogXCJib29rXCIsXG5cdFx0XHRcdFx0dGl0bGU6IFwiTm8gc3RvcmllcyB5ZXRcIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJDcmVhdGUgeW91ciBmaXJzdCBzdG9yeSB0byBnZXQgc3RhcnRlZC5cIixcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3Qgc3Rvcmllc0dyaWQgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXN0b3J5LWdyaWRcIiB9KTtcblxuXHRcdFx0Zm9yIChjb25zdCBzdG9yeSBvZiB0aGlzLnN0b3JpZXMpIHtcblx0XHRcdFx0Y29uc3QgY2FyZCA9IHN0b3JpZXNHcmlkLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtc3RvcnktY2FyZFwiIH0pO1xuXHRcdFx0XHRjYXJkLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5zaG93U3RvcnlEZXRhaWxzKHN0b3J5KTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRjb25zdCBoZWFkZXIgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtc3RvcnktY2FyZC1oZWFkZXJcIiB9KTtcblx0XHRcdFx0aGVhZGVyLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBzdG9yeS50aXRsZSwgY2xzOiBcInN0b3J5LWVuZ2luZS1zdG9yeS1jYXJkLW5hbWVcIiB9KTtcblxuXHRcdFx0XHRjb25zdCBiYWRnZXMgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zdG9yeS1jYXJkLWJhZGdlc1wiIH0pO1xuXHRcdFx0XHRiYWRnZXMuY3JlYXRlU3Bhbih7XG5cdFx0XHRcdFx0dGV4dDogYHYke3N0b3J5LnZlcnNpb25fbnVtYmVyfWAsXG5cdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1waWxsIHN0b3J5LWVuZ2luZS1waWxsLXN0cm9uZ1wiXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRiYWRnZXMuY3JlYXRlU3Bhbih7XG5cdFx0XHRcdFx0dGV4dDogc3Rvcnkuc3RhdHVzLFxuXHRcdFx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS1zdGF0dXMtcGlsbCBzdG9yeS1lbmdpbmUtc3RhdHVzLSR7c3Rvcnkuc3RhdHVzLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzKy9nLCAnLScpfWBcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Y29uc3QgYm9keSA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zdG9yeS1jYXJkLWJvZHlcIiB9KTtcblx0XHRcdFx0Y29uc3QgbWV0YVJvdyA9IGJvZHkuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zdG9yeS1tZXRhXCIgfSk7XG5cdFx0XHRcdGlmIChzdG9yeS53b3JsZF9pZCkge1xuXHRcdFx0XHRcdGNvbnN0IHdvcmxkID0gdGhpcy53b3JsZHMuZmluZCh3ID0+IHcuaWQgPT09IHN0b3J5LndvcmxkX2lkKTtcblx0XHRcdFx0XHRpZiAod29ybGQpIHtcblx0XHRcdFx0XHRcdG1ldGFSb3cuY3JlYXRlU3Bhbih7IHRleHQ6IHdvcmxkLm5hbWUsIGNsczogXCJzdG9yeS1lbmdpbmUtcGlsbFwiIH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRtZXRhUm93LmNyZWF0ZVNwYW4oeyB0ZXh0OiBcIk5vIHdvcmxkIGxpbmtlZFwiLCBjbHM6IFwic3RvcnktZW5naW5lLXBpbGxcIiB9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNhcmQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zdG9yeS1ob3Zlci1oaW50XCIsIHRleHQ6IFwiQ2xpY2sgdG8gb3BlbiBkZXRhaWxzXCIgfSk7XG5cdFx0XHR9XG5cdH1cblxuXHRyZW5kZXJXb3JsZHNUYWIoKSB7XG5cdFx0Ly8gR3JvdXAgc3RvcmllcyBieSB3b3JsZCBmb3IgY2hpcHMgYW5kIGNvdW50ZXJzXG5cdFx0Y29uc3Qgc3Rvcmllc0J5V29ybGQgPSBuZXcgTWFwPHN0cmluZyB8IG51bGwsIFN0b3J5W10+KCk7XG5cdFx0Zm9yIChjb25zdCBzdG9yeSBvZiB0aGlzLnN0b3JpZXMpIHtcblx0XHRcdGNvbnN0IHdvcmxkSWQgPSBzdG9yeS53b3JsZF9pZCB8fCBudWxsO1xuXHRcdFx0aWYgKCFzdG9yaWVzQnlXb3JsZC5oYXMod29ybGRJZCkpIHtcblx0XHRcdFx0c3Rvcmllc0J5V29ybGQuc2V0KHdvcmxkSWQsIFtdKTtcblx0XHRcdH1cblx0XHRcdHN0b3JpZXNCeVdvcmxkLmdldCh3b3JsZElkKSEucHVzaChzdG9yeSk7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3Rvcmllc1dpdGhvdXRXb3JsZCA9IHN0b3JpZXNCeVdvcmxkLmdldChudWxsKSB8fCBbXTtcblx0XHRjb25zdCBoYXNXb3JsZHMgPSB0aGlzLndvcmxkcy5sZW5ndGggPiAwO1xuXHRcdGNvbnN0IGhhc1VuYXNzaWduZWRTdG9yaWVzID0gc3Rvcmllc1dpdGhvdXRXb3JsZC5sZW5ndGggPiAwO1xuXG5cdFx0aWYgKCFoYXNXb3JsZHMgJiYgIWhhc1VuYXNzaWduZWRTdG9yaWVzKSB7XG5cdFx0XHR0aGlzLnJlbmRlckVtcHR5Q2FyZCh0aGlzLmNvbnRlbnRFbCwge1xuXHRcdFx0XHRpY29uOiBcImdsb2JlXCIsXG5cdFx0XHRcdHRpdGxlOiBcIk5vIHdvcmxkcyB5ZXRcIixcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQ3JlYXRlIGEgd29ybGQgdG8gc3RhcnQgb3JnYW5pemluZyB5b3VyIHN0b3JpZXMuXCIsXG5cdFx0XHRcdGFjdGlvblRleHQ6IFwiQ3JlYXRlIFdvcmxkXCIsXG5cdFx0XHRcdG9uQWN0aW9uOiAoKSA9PiB7XG5cdFx0XHRcdFx0bmV3IENyZWF0ZVdvcmxkTW9kYWwodGhpcy5hcHAsIGFzeW5jIChuYW1lOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcsIGdlbnJlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYENyZWF0aW5nIHdvcmxkIFwiJHtuYW1lfVwiLi4uYCk7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVXb3JsZChuYW1lLCBkZXNjcmlwdGlvbiwgZ2VucmUpO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRTdG9yaWVzKCk7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYFdvcmxkIFwiJHtuYW1lfVwiIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5YCk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIGNyZWF0ZSB3b3JsZFwiO1xuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSkub3BlbigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCB3b3JsZHNHcmlkID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZHMtZ3JpZFwiIH0pO1xuXG5cdFx0Zm9yIChjb25zdCB3b3JsZCBvZiB0aGlzLndvcmxkcykge1xuXHRcdFx0Y29uc3Qgd29ybGRTdG9yaWVzID0gc3Rvcmllc0J5V29ybGQuZ2V0KHdvcmxkLmlkKSB8fCBbXTtcblx0XHRcdGNvbnN0IGNhcmQgPSB3b3JsZHNHcmlkLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtY2FyZFwiIH0pO1xuXHRcdFx0Y2FyZC5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnNob3dXb3JsZERldGFpbHMod29ybGQpO1xuXHRcdFx0fTtcblxuXHRcdFx0Y29uc3QgY2FyZEhlYWRlciA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC1jYXJkLWhlYWRlclwiIH0pO1xuXHRcdFx0Y29uc3QgY2FyZFRpdGxlID0gY2FyZEhlYWRlci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLWNhcmQtdGl0bGVcIiB9KTtcblx0XHRcdGNhcmRUaXRsZS5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogd29ybGQubmFtZSwgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC1jYXJkLW5hbWVcIiB9KTtcblxuXHRcdFx0Y29uc3QgYmFkZ2VSb3cgPSBjYXJkSGVhZGVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtY2FyZC1tZXRhXCIgfSk7XG5cdFx0XHRpZiAod29ybGQuZ2VucmUpIHtcblx0XHRcdFx0YmFkZ2VSb3cuY3JlYXRlU3Bhbih7IHRleHQ6IHdvcmxkLmdlbnJlLCBjbHM6IFwic3RvcnktZW5naW5lLXBpbGxcIiB9KTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IHN0b3J5Q291bnQgPSB3b3JsZFN0b3JpZXMubGVuZ3RoO1xuXHRcdFx0YmFkZ2VSb3cuY3JlYXRlU3Bhbih7XG5cdFx0XHRcdHRleHQ6IHN0b3J5Q291bnQgPT09IDEgPyBcIjEgc3RvcnlcIiA6IGAke3N0b3J5Q291bnR9IHN0b3JpZXNgLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXBpbGwgc3RvcnktZW5naW5lLXBpbGwtc3Ryb25nXCJcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCBjYXJkQm9keSA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC1jYXJkLWJvZHlcIiB9KTtcblx0XHRcdGlmICh3b3JsZC5kZXNjcmlwdGlvbikge1xuXHRcdFx0XHRjYXJkQm9keS5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0XHRcdHRleHQ6IHdvcmxkLmRlc2NyaXB0aW9uLFxuXHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtY2FyZC1kZXNjcmlwdGlvblwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAod29ybGRTdG9yaWVzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0Y29uc3Qgc3RvcnlDaGlwcyA9IGNhcmRCb2R5LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtc3RvcnktY2hpcHNcIiB9KTtcblx0XHRcdFx0Y29uc3QgbWF4Q2hpcHMgPSAzO1xuXHRcdFx0XHR3b3JsZFN0b3JpZXMuc2xpY2UoMCwgbWF4Q2hpcHMpLmZvckVhY2goKHN0b3J5KSA9PiB7XG5cdFx0XHRcdFx0c3RvcnlDaGlwcy5jcmVhdGVTcGFuKHsgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC1zdG9yeS1jaGlwXCIsIHRleHQ6IHN0b3J5LnRpdGxlIH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKHdvcmxkU3Rvcmllcy5sZW5ndGggPiBtYXhDaGlwcykge1xuXHRcdFx0XHRcdHN0b3J5Q2hpcHMuY3JlYXRlU3Bhbih7XG5cdFx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLXN0b3J5LWNoaXAgc3RvcnktZW5naW5lLXdvcmxkLXN0b3J5LWNoaXAtbXV0ZWRcIixcblx0XHRcdFx0XHRcdHRleHQ6IGArJHt3b3JsZFN0b3JpZXMubGVuZ3RoIC0gbWF4Q2hpcHN9IG1vcmVgXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNhcmRCb2R5LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtZW1wdHktbGFiZWxcIiwgdGV4dDogXCJObyBzdG9yaWVzIHlldFwiIH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRjYXJkLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtY2FyZC1oaW50XCIsIHRleHQ6IFwiQ2xpY2sgdG8gb3BlbiBkZXRhaWxzXCIgfSk7XG5cdFx0fVxuXG5cdFx0aWYgKHN0b3JpZXNXaXRob3V0V29ybGQubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29uc3QgdW5hc3NpZ25lZENhcmQgPSB3b3JsZHNHcmlkLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtY2FyZCBzdG9yeS1lbmdpbmUtd29ybGQtY2FyZC1tdXRlZFwiIH0pO1xuXHRcdFx0dW5hc3NpZ25lZENhcmQuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiVW5hc3NpZ25lZCBTdG9yaWVzXCIsIGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtY2FyZC1uYW1lXCIgfSk7XG5cdFx0XHR1bmFzc2lnbmVkQ2FyZC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIlN0b3JpZXMgdGhhdCBhcmUgbm90IGxpbmtlZCB0byBhbnkgd29ybGQuXCIsIGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtY2FyZC1kZXNjcmlwdGlvblwiIH0pO1xuXHRcdFx0Y29uc3Qgc3RvcnlDaGlwcyA9IHVuYXNzaWduZWRDYXJkLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtc3RvcnktY2hpcHNcIiB9KTtcblx0XHRcdGNvbnN0IG1heENoaXBzID0gNDtcblx0XHRcdHN0b3JpZXNXaXRob3V0V29ybGQuc2xpY2UoMCwgbWF4Q2hpcHMpLmZvckVhY2goKHN0b3J5KSA9PiB7XG5cdFx0XHRcdHN0b3J5Q2hpcHMuY3JlYXRlU3Bhbih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtc3RvcnktY2hpcFwiLCB0ZXh0OiBzdG9yeS50aXRsZSB9KTtcblx0XHRcdH0pO1xuXHRcdFx0aWYgKHN0b3JpZXNXaXRob3V0V29ybGQubGVuZ3RoID4gbWF4Q2hpcHMpIHtcblx0XHRcdFx0c3RvcnlDaGlwcy5jcmVhdGVTcGFuKHtcblx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLXN0b3J5LWNoaXAgc3RvcnktZW5naW5lLXdvcmxkLXN0b3J5LWNoaXAtbXV0ZWRcIixcblx0XHRcdFx0XHR0ZXh0OiBgKyR7c3Rvcmllc1dpdGhvdXRXb3JsZC5sZW5ndGggLSBtYXhDaGlwc30gbW9yZWBcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyUlBHU3lzdGVtc1RhYigpIHtcblx0XHRpZiAodGhpcy5ycGdTeXN0ZW1zLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGUgPT09IFwibG9jYWxcIikge1xuXHRcdFx0XHR0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIlJQRyBzeXN0ZW1zIGFyZSBub3QgYXZhaWxhYmxlIGluIGxvY2FsIG1vZGUuXCIgfSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIFJQRyBzeXN0ZW1zIGZvdW5kLlwiIH0pO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IHJwZ1N5c3RlbXNMaXN0ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1saXN0XCIgfSk7XG5cblx0XHRmb3IgKGNvbnN0IHJwZ1N5c3RlbSBvZiB0aGlzLnJwZ1N5c3RlbXMpIHtcblx0XHRcdGNvbnN0IHJwZ1N5c3RlbUl0ZW0gPSBycGdTeXN0ZW1zTGlzdC5jcmVhdGVEaXYoe1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIixcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCB0aXRsZSA9IHJwZ1N5c3RlbUl0ZW0uY3JlYXRlRGl2KHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiLFxuXHRcdFx0XHR0ZXh0OiBycGdTeXN0ZW0ubmFtZSxcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCBtZXRhID0gcnBnU3lzdGVtSXRlbS5jcmVhdGVEaXYoe1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIixcblx0XHRcdH0pO1xuXHRcdFx0aWYgKHJwZ1N5c3RlbS5kZXNjcmlwdGlvbikge1xuXHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7XG5cdFx0XHRcdFx0dGV4dDogcnBnU3lzdGVtLmRlc2NyaXB0aW9uLFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdGlmIChycGdTeXN0ZW0uaXNfYnVpbHRpbikge1xuXHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7XG5cdFx0XHRcdFx0dGV4dDogXCJCdWlsdC1pblwiLFxuXHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtYmFkZ2VcIixcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyU3RvcnlJdGVtKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHN0b3J5OiBTdG9yeSkge1xuXHRcdGNvbnN0IHN0b3J5SXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtXCIsXG5cdFx0fSk7XG5cblx0XHRjb25zdCB0aXRsZSA9IHN0b3J5SXRlbS5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiLFxuXHRcdFx0dGV4dDogc3RvcnkudGl0bGUsXG5cdFx0fSk7XG5cblx0XHRjb25zdCBtZXRhID0gc3RvcnlJdGVtLmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIixcblx0XHR9KTtcblx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7XG5cdFx0XHR0ZXh0OiBgVmVyc2lvbiAke3N0b3J5LnZlcnNpb25fbnVtYmVyfWAsXG5cdFx0fSk7XG5cdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwge1xuXHRcdFx0dGV4dDogYFN0YXR1czogJHtzdG9yeS5zdGF0dXN9YCxcblx0XHR9KTtcblx0XHQvLyBTaG93IHdvcmxkIGlmIGNvbm5lY3RlZFxuXHRcdGlmIChzdG9yeS53b3JsZF9pZCkge1xuXHRcdFx0Y29uc3Qgd29ybGQgPSB0aGlzLndvcmxkcy5maW5kKHcgPT4gdy5pZCA9PT0gc3Rvcnkud29ybGRfaWQpO1xuXHRcdFx0aWYgKHdvcmxkKSB7XG5cdFx0XHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHtcblx0XHRcdFx0XHR0ZXh0OiBgV29ybGQ6ICR7d29ybGQubmFtZX1gLFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRzdG9yeUl0ZW0ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IHRoaXMuc2hvd1N0b3J5RGV0YWlscyhzdG9yeSk7XG5cdFx0fTtcblx0fVxuXG5cdGFzeW5jIGxvYWRTdG9yaWVzKCkge1xuXHRcdHRoaXMubG9hZGluZyA9IHRydWU7XG5cdFx0dGhpcy5lcnJvciA9IG51bGw7XG5cdFx0dHJ5IHtcblx0XHRcdC8vIE9ubHkgdmFsaWRhdGUgdGVuYW50IElEIGluIHJlbW90ZSBtb2RlXG5cdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZSA9PT0gXCJyZW1vdGVcIiAmJiAhdGhpcy5wbHVnaW4uc2V0dGluZ3MudGVuYW50SWQpIHtcblx0XHRcdFx0dGhpcy5lcnJvciA9IFwiVGVuYW50IElEIG5vdCBjb25maWd1cmVkXCI7XG5cdFx0XHRcdHRoaXMubG9hZGluZyA9IGZhbHNlO1xuXHRcdFx0XHR0aGlzLnJlbmRlckxpc3RDb250ZW50KCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTG9hZCB3b3JsZHMgZmlyc3QgdG8gZ3JvdXAgc3Rvcmllc1xuXHRcdFx0dGhpcy53b3JsZHMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0V29ybGRzKCk7XG5cdFx0XHQvLyBMb2FkIHN0b3JpZXNcblx0XHRcdHRoaXMuc3RvcmllcyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5saXN0U3RvcmllcygpO1xuXHRcdFx0Ly8gTG9hZCBSUEcgc3lzdGVtcyAob3B0aW9uYWwgLSBtYXkgbm90IGJlIGF2YWlsYWJsZSBpbiBsb2NhbCBtb2RlKVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dGhpcy5ycGdTeXN0ZW1zID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldFJQR1N5c3RlbXMoKTtcblx0XHRcdH0gY2F0Y2ggKHJwZ0Vycikge1xuXHRcdFx0XHQvLyBSUEcgc3lzdGVtcyBub3QgYXZhaWxhYmxlIChlLmcuLCBpbiBsb2NhbC9vZmZsaW5lIG1vZGUpIC0gbm90IGEgZmF0YWwgZXJyb3Jcblx0XHRcdFx0Y29uc29sZS53YXJuKFwiUlBHIHN5c3RlbXMgbm90IGF2YWlsYWJsZTpcIiwgcnBnRXJyKTtcblx0XHRcdFx0dGhpcy5ycGdTeXN0ZW1zID0gW107XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHR0aGlzLmVycm9yID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIGxvYWQgc3Rvcmllc1wiO1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIGxvYWRpbmcgc3RvcmllczpcIiwgZXJyKTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0dGhpcy5sb2FkaW5nID0gZmFsc2U7XG5cdFx0XHR0aGlzLnJlbmRlckxpc3RDb250ZW50KCk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gTWV0aG9kIHRvIHJlZnJlc2ggdGhlIHZpZXdcblx0YXN5bmMgcmVmcmVzaCgpIHtcblx0XHRhd2FpdCB0aGlzLmxvYWRTdG9yaWVzKCk7XG5cdH1cblxuXHRhc3luYyBzaG93U3RvcnlEZXRhaWxzKHN0b3J5OiBTdG9yeSkge1xuXHRcdHRoaXMuY3VycmVudFN0b3J5ID0gc3Rvcnk7XG5cdFx0dGhpcy52aWV3TW9kZSA9IFwiZGV0YWlsc1wiO1xuXHRcdHRoaXMuY3VycmVudFRhYiA9IFwiY2hhcHRlcnNcIjtcblx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHR0aGlzLnJlbmRlckRldGFpbHMoKTtcblx0fVxuXG5cdGFzeW5jIGxvYWRIaWVyYXJjaHkoKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXG5cdFx0dGhpcy5sb2FkaW5nSGllcmFyY2h5ID0gdHJ1ZTtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy5jaGFwdGVycyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRDaGFwdGVycyh0aGlzLmN1cnJlbnRTdG9yeS5pZCk7XG5cdFx0XHR0aGlzLnNjZW5lcyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRTY2VuZXNCeVN0b3J5KHRoaXMuY3VycmVudFN0b3J5LmlkKTtcblx0XHRcdHRoaXMuYmVhdHMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0QmVhdHNCeVN0b3J5KHRoaXMuY3VycmVudFN0b3J5LmlkKTtcblx0XHRcdFxuXHRcdFx0Ly8gTG9hZCBjb250ZW50IGJsb2NrcyBhbmQgcmVmZXJlbmNlc1xuXHRcdFx0Y29uc3QgY29udGVudEJsb2Nrc01hcCA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2s+KCk7XG5cdFx0XHR0aGlzLmNvbnRlbnRCbG9ja1JlZnMgPSBbXTtcblx0XHRcdFxuXHRcdFx0Ly8gR2V0IGNvbnRlbnQgYmxvY2tzIGJ5IGNoYXB0ZXJcblx0XHRcdGZvciAoY29uc3QgY2hhcHRlciBvZiB0aGlzLmNoYXB0ZXJzKSB7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJCbG9ja3MgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2NrcyhjaGFwdGVyLmlkKTtcblx0XHRcdFx0Zm9yIChjb25zdCBibG9jayBvZiBjaGFwdGVyQmxvY2tzKSB7XG5cdFx0XHRcdFx0Y29udGVudEJsb2Nrc01hcC5zZXQoYmxvY2suaWQsIGJsb2NrKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBHZXQgY29udGVudCBibG9ja3MgYnkgc2NlbmVcblx0XHRcdGZvciAoY29uc3Qgc2NlbmUgb2YgdGhpcy5zY2VuZXMpIHtcblx0XHRcdFx0Y29uc3Qgc2NlbmVCbG9ja3MgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrc0J5U2NlbmUoc2NlbmUuaWQpO1xuXHRcdFx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIHNjZW5lQmxvY2tzKSB7XG5cdFx0XHRcdFx0Y29udGVudEJsb2Nrc01hcC5zZXQoYmxvY2suaWQsIGJsb2NrKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBHZXQgY29udGVudCBibG9ja3MgYnkgYmVhdFxuXHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIHRoaXMuYmVhdHMpIHtcblx0XHRcdFx0Y29uc3QgYmVhdEJsb2NrcyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzQnlCZWF0KGJlYXQuaWQpO1xuXHRcdFx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIGJlYXRCbG9ja3MpIHtcblx0XHRcdFx0XHRjb250ZW50QmxvY2tzTWFwLnNldChibG9jay5pZCwgYmxvY2spO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIENvbnZlcnQgbWFwIHRvIGFycmF5XG5cdFx0XHR0aGlzLmNvbnRlbnRCbG9ja3MgPSBBcnJheS5mcm9tKGNvbnRlbnRCbG9ja3NNYXAudmFsdWVzKCkpO1xuXHRcdFx0XG5cdFx0XHQvLyBMb2FkIHJlZmVyZW5jZXMgZm9yIGFsbCBjb250ZW50IGJsb2Nrc1xuXHRcdFx0Zm9yIChjb25zdCBibG9jayBvZiB0aGlzLmNvbnRlbnRCbG9ja3MpIHtcblx0XHRcdFx0Y29uc3QgcmVmcyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRDb250ZW50QW5jaG9ycyhibG9jay5pZCk7XG5cdFx0XHRcdHRoaXMuY29udGVudEJsb2NrUmVmcy5wdXNoKC4uLnJlZnMpO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIGxvYWQgaGllcmFyY2h5XCI7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdHRoaXMubG9hZGluZ0hpZXJhcmNoeSA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdHNob3dMaXN0KCkge1xuXHRcdHRoaXMuY3VycmVudFN0b3J5ID0gbnVsbDtcblx0XHR0aGlzLnZpZXdNb2RlID0gXCJsaXN0XCI7XG5cdFx0dGhpcy5yZW5kZXJMaXN0SGVhZGVyKCk7XG5cdFx0dGhpcy5yZW5kZXJMaXN0Q29udGVudCgpO1xuXHR9XG5cblx0cmVuZGVyRGV0YWlscygpIHtcblx0XHRpZiAoIXRoaXMuY29udGVudEVsIHx8ICF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXG5cdFx0Ly8gU3dpdGNoIHRvIHNpZGViYXIgbGF5b3V0IGZvciBzdG9yeSBkZXRhaWwgdmlld1xuXHRcdHRoaXMuY29udGVudEVsLnJlbW92ZUNsYXNzKFwic3RvcnktZW5naW5lLWxpc3QtbGF5b3V0XCIpO1xuXHRcdHRoaXMuY29udGVudEVsLmFkZENsYXNzKFwic3RvcnktZW5naW5lLXNpZGViYXItbGF5b3V0XCIpO1xuXG5cdFx0dGhpcy5yZW5kZXJEZXRhaWxzSGVhZGVyKCk7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblxuXHRcdC8vIFRhYnMgc2VjdGlvblxuXHRcdHRoaXMucmVuZGVyVGFicygpO1xuXHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHR9XG5cblx0cmVuZGVyVGFicygpIHtcblx0XHRpZiAoIXRoaXMuY29udGVudEVsKSByZXR1cm47XG5cblx0XHQvLyBSZW1vdmUgZXhpc3RpbmcgdGFiIGNvbnRhaW5lcnMgKGxlZ2FjeSBob3Jpem9udGFsICsgc2lkZWJhcilcblx0XHRjb25zdCBleGlzdGluZ1RhYnMgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKFwiLnN0b3J5LWVuZ2luZS10YWJzXCIpO1xuXHRcdGlmIChleGlzdGluZ1RhYnMpIHtcblx0XHRcdGV4aXN0aW5nVGFicy5yZW1vdmUoKTtcblx0XHR9XG5cdFx0Y29uc3QgZXhpc3RpbmdTaWRlYmFyID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcihcIi5zdG9yeS1lbmdpbmUtc3Rvcnktc2lkZWJhclwiKTtcblx0XHRpZiAoZXhpc3RpbmdTaWRlYmFyKSB7XG5cdFx0XHRleGlzdGluZ1NpZGViYXIucmVtb3ZlKCk7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc2lkZWJhclBvc2l0aW9uID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2lkZWJhclBvc2l0aW9uIHx8IFwibGVmdFwiO1xuXHRcdGNvbnN0IHRhYnNDb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLXdvcmxkLXNpZGViYXIgc3RvcnktZW5naW5lLXdvcmxkLXNpZGViYXItJHtzaWRlYmFyUG9zaXRpb259IHN0b3J5LWVuZ2luZS1zdG9yeS1zaWRlYmFyYFxuXHRcdH0pO1xuXG5cdFx0dHlwZSBUYWJLZXkgPSBcImNoYXB0ZXJzXCIgfCBcInNjZW5lc1wiIHwgXCJiZWF0c1wiIHwgXCJjb250ZW50c1wiIHwgXCJjaGFyYWN0ZXJzXCI7XG5cdFx0Y29uc3QgdGFiczogeyBrZXk6IFRhYktleTsgbGFiZWw6IHN0cmluZzsgaWNvbjogc3RyaW5nIH1bXSA9IFtcblx0XHRcdHsga2V5OiBcImNoYXB0ZXJzXCIsIGxhYmVsOiBcIkNoYXB0ZXJzXCIsIGljb246IFwiYm9vay1vcGVuXCIgfSxcblx0XHRcdHsga2V5OiBcInNjZW5lc1wiLCBsYWJlbDogXCJTY2VuZXNcIiwgaWNvbjogXCJmaWxtXCIgfSxcblx0XHRcdHsga2V5OiBcImJlYXRzXCIsIGxhYmVsOiBcIkJlYXRzXCIsIGljb246IFwiYWN0aXZpdHlcIiB9LFxuXHRcdFx0eyBrZXk6IFwiY29udGVudHNcIiwgbGFiZWw6IFwiQ29udGVudHNcIiwgaWNvbjogXCJmaWxlLXRleHRcIiB9LFxuXHRcdFx0eyBrZXk6IFwiY2hhcmFjdGVyc1wiLCBsYWJlbDogXCJDaGFyYWN0ZXJzXCIsIGljb246IFwidXNlcnNcIiB9LFxuXHRcdF07XG5cblx0XHRmb3IgKGNvbnN0IHRhYiBvZiB0YWJzKSB7XG5cdFx0XHRjb25zdCB0YWJCdXR0b24gPSB0YWJzQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLXNpZGViYXItdGFiICR7dGhpcy5jdXJyZW50VGFiID09PSB0YWIua2V5ID8gXCJpcy1hY3RpdmVcIiA6IFwiXCJ9YCxcblx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogdGFiLmxhYmVsIH0sXG5cdFx0XHR9KTtcblxuXHRcdFx0c2V0SWNvbih0YWJCdXR0b24sIHRhYi5pY29uKTtcblxuXHRcdFx0dGFiQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuY3VycmVudFRhYiA9IHRhYi5rZXk7XG5cdFx0XHRcdHRoaXMucmVuZGVyVGFicygpO1xuXHRcdFx0XHRpZiAodGFiLmtleSA9PT0gXCJjaGFyYWN0ZXJzXCIpIHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRTdG9yeUNoYXJhY3RlcnMoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyVGFiQ29udGVudCgpIHtcblx0XHRpZiAoIXRoaXMuY29udGVudEVsKSByZXR1cm47XG5cblx0XHQvLyBSZW1vdmUgZXhpc3RpbmcgdGFiIGNvbnRlbnRcblx0XHRjb25zdCBleGlzdGluZ0NvbnRlbnQgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKFwiLnN0b3J5LWVuZ2luZS1zdG9yeS10YWItY29udGVudFwiKTtcblx0XHRpZiAoZXhpc3RpbmdDb250ZW50KSB7XG5cdFx0XHRleGlzdGluZ0NvbnRlbnQucmVtb3ZlKCk7XG5cdFx0fVxuXHRcdGNvbnN0IGxlZ2FjeUNvbnRlbnQgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKFwiLnN0b3J5LWVuZ2luZS10YWItY29udGVudFwiKTtcblx0XHRpZiAobGVnYWN5Q29udGVudCkge1xuXHRcdFx0bGVnYWN5Q29udGVudC5yZW1vdmUoKTtcblx0XHR9XG5cblx0XHRjb25zdCBzaWRlYmFyUG9zaXRpb24gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaWRlYmFyUG9zaXRpb24gfHwgXCJsZWZ0XCI7XG5cdFx0Y29uc3QgdGFiQ29udGVudCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IGBzdG9yeS1lbmdpbmUtc3RvcnktdGFiLWNvbnRlbnQgc3RvcnktZW5naW5lLWNvbnRlbnQtc2lkZWJhci0ke3NpZGViYXJQb3NpdGlvbn1gXG5cdFx0fSk7XG5cblx0XHRpZiAodGhpcy5sb2FkaW5nSGllcmFyY2h5KSB7XG5cdFx0XHR0YWJDb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTG9hZGluZy4uLlwiIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHN3aXRjaCAodGhpcy5jdXJyZW50VGFiKSB7XG5cdFx0XHRjYXNlIFwiY2hhcHRlcnNcIjpcblx0XHRcdFx0dGhpcy5yZW5kZXJDaGFwdGVyc1RhYih0YWJDb250ZW50KTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwic2NlbmVzXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyU2NlbmVzVGFiKHRhYkNvbnRlbnQpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJiZWF0c1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlckJlYXRzVGFiKHRhYkNvbnRlbnQpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJjb250ZW50c1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlckNvbnRlbnRzVGFiKHRhYkNvbnRlbnQpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJjaGFyYWN0ZXJzXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyU3RvcnlDaGFyYWN0ZXJzVGFiKHRhYkNvbnRlbnQpO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHR0aGlzLnJlbmRlclN0b3J5QWN0aW9uc0Jhcih0YWJDb250ZW50KTtcblx0fVxuXG5cdHJlbmRlclN0b3J5QWN0aW9uc0Jhcihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0Y29uc3QgYWN0aW9uc0JhciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWFjdGlvbnMtYmFyXCIgfSk7XG5cblx0XHRsZXQgY3JlYXRlQnV0dG9uVGV4dCA9IFwiQ3JlYXRlIENoYXB0ZXJcIjtcblx0XHRsZXQgY3JlYXRlQnV0dG9uQWN0aW9uID0gKCkgPT4ge1xuXHRcdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXHRcdFx0bmV3IENoYXB0ZXJNb2RhbCh0aGlzLmFwcCwgYXN5bmMgKGNoYXB0ZXIpID0+IHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlQ2hhcHRlcih0aGlzLmN1cnJlbnRTdG9yeSEuaWQsIGNoYXB0ZXIpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJDaGFwdGVyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHRcdH1cblx0XHRcdH0sIHRoaXMuY2hhcHRlcnMpLm9wZW4oKTtcblx0XHR9O1xuXG5cdFx0c3dpdGNoICh0aGlzLmN1cnJlbnRUYWIpIHtcblx0XHRcdGNhc2UgXCJzY2VuZXNcIjpcblx0XHRcdFx0Y3JlYXRlQnV0dG9uVGV4dCA9IFwiQ3JlYXRlIFNjZW5lXCI7XG5cdFx0XHRcdGNyZWF0ZUJ1dHRvbkFjdGlvbiA9ICgpID0+IHtcblx0XHRcdFx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cdFx0XHRcdFx0bmV3IFNjZW5lTW9kYWwodGhpcy5hcHAsIHRoaXMuY3VycmVudFN0b3J5LmlkLCB0aGlzLmNoYXB0ZXJzLCBhc3luYyAoc2NlbmUpID0+IHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdHNjZW5lLmNoYXB0ZXJfaWQgPSBudWxsO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlU2NlbmUoc2NlbmUpO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJTY2VuZSBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgdGhpcy5zY2VuZXMsIHVuZGVmaW5lZCwgbnVsbCkub3BlbigpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJiZWF0c1wiOlxuXHRcdFx0XHRjcmVhdGVCdXR0b25UZXh0ID0gdGhpcy5zY2VuZXMubGVuZ3RoID4gMCA/IFwiQ3JlYXRlIEJlYXRcIiA6IFwiR28gdG8gU2NlbmVzXCI7XG5cdFx0XHRcdGNyZWF0ZUJ1dHRvbkFjdGlvbiA9ICgpID0+IHtcblx0XHRcdFx0XHRpZiAodGhpcy5zY2VuZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmN1cnJlbnRUYWIgPSBcInNjZW5lc1wiO1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJzKCk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lID0gdGhpcy5zY2VuZXMuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSlbMF07XG5cdFx0XHRcdFx0bmV3IEJlYXRNb2RhbCh0aGlzLmFwcCwgdGhpcy5jdXJyZW50U3RvcnkuaWQsIHRoaXMuc2NlbmVzLCBhc3luYyAoYmVhdCkgPT4ge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0YmVhdC5zY2VuZV9pZCA9IHNjZW5lLmlkO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlQmVhdChiZWF0KTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQmVhdCBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgdGhpcy5iZWF0cywgdW5kZWZpbmVkLCB0aGlzLmNoYXB0ZXJzLCBzY2VuZS5pZCkub3BlbigpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJjb250ZW50c1wiOlxuXHRcdFx0XHRjcmVhdGVCdXR0b25UZXh0ID0gdGhpcy5jaGFwdGVycy5sZW5ndGggPiAwID8gXCJBZGQgQ29udGVudFwiIDogXCJHbyB0byBDaGFwdGVyc1wiO1xuXHRcdFx0XHRjcmVhdGVCdXR0b25BY3Rpb24gPSAoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuY2hhcHRlcnMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmN1cnJlbnRUYWIgPSBcImNoYXB0ZXJzXCI7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlclRhYnMoKTtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCBjaGFwdGVyID0gdGhpcy5jaGFwdGVycy5zb3J0KChhLCBiKSA9PiBhLm51bWJlciAtIGIubnVtYmVyKVswXTtcblx0XHRcdFx0XHR0aGlzLmNyZWF0ZUNvbnRlbnRGb3JFbnRpdHkoXCJjaGFwdGVyXCIsIGNoYXB0ZXIuaWQsIGNoYXB0ZXIuaWQpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJjaGFyYWN0ZXJzXCI6XG5cdFx0XHRcdGNyZWF0ZUJ1dHRvblRleHQgPSBcIkNyZWF0ZSBDaGFyYWN0ZXJcIjtcblx0XHRcdFx0Y3JlYXRlQnV0dG9uQWN0aW9uID0gKCkgPT4ge1xuXHRcdFx0XHRcdGlmICghdGhpcy5jdXJyZW50U3Rvcnk/LndvcmxkX2lkKSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiVGhpcyBzdG9yeSBpcyBub3QgbGlua2VkIHRvIGEgd29ybGRcIiwgMzAwMCk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRoaXMuc2hvd0NyZWF0ZUNoYXJhY3Rlck1vZGFsRm9yU3RvcnkoKTtcblx0XHRcdFx0fTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY3JlYXRlQnV0dG9uID0gYWN0aW9uc0Jhci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBjcmVhdGVCdXR0b25UZXh0LFxuXHRcdFx0Y2xzOiBcIm1vZC1jdGEgc3RvcnktZW5naW5lLWNyZWF0ZS1idG5cIixcblx0XHR9KTtcblx0XHRjcmVhdGVCdXR0b24ub25jbGljayA9IGNyZWF0ZUJ1dHRvbkFjdGlvbjtcblx0fVxuXG5cdHJlbmRlckNoYXB0ZXJzVGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRjb250YWluZXIuZW1wdHkoKTtcblxuXHRcdGlmICh0aGlzLmNoYXB0ZXJzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dGhpcy5yZW5kZXJFbXB0eUNhcmQoY29udGFpbmVyLCB7XG5cdFx0XHRcdGljb246IFwiYm9vay1vcGVuXCIsXG5cdFx0XHRcdHRpdGxlOiBcIk5vIGNoYXB0ZXJzIHlldFwiLFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJDcmVhdGUgdGhlIGZpcnN0IGNoYXB0ZXIgdG8gc3RhcnQgb3JnYW5pemluZyB0aGlzIHN0b3J5LlwiLFxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblx0XG5cdFx0Zm9yIChjb25zdCBjaGFwdGVyIG9mIHRoaXMuY2hhcHRlcnMuc29ydCgoYSwgYikgPT4gYS5udW1iZXIgLSBiLm51bWJlcikpIHtcblx0XHRcdGNvbnN0IGl0ZW0gPSBsaXN0LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbVwiIH0pO1xuXHRcdFx0aXRlbS5jcmVhdGVEaXYoe1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXRpdGxlXCIsXG5cdFx0XHRcdHRleHQ6IGBDaGFwdGVyICR7Y2hhcHRlci5udW1iZXJ9OiAke2NoYXB0ZXIudGl0bGV9YCxcblx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgbWV0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIgfSk7XG5cdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGBTdGF0dXM6ICR7Y2hhcHRlci5zdGF0dXN9YCB9KTtcblx0XHRcblx0XHRcdC8vIEhvdmVyIGFjdGlvbnNcblx0XHRcdGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbS1hY3Rpb25zXCIgfSk7XG5cdFx0XHRjb25zdCBlZGl0QnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJFZGl0IGNoYXB0ZXJcIiB9XG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24oZWRpdEJ0biwgXCJwZW5jaWxcIik7XG5cdFx0XHRlZGl0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdG5ldyBDaGFwdGVyTW9kYWwodGhpcy5hcHAsIGFzeW5jICh1cGRhdGVkQ2hhcHRlcikgPT4ge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlQ2hhcHRlcihjaGFwdGVyLmlkLCB1cGRhdGVkQ2hhcHRlcik7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkNoYXB0ZXIgdXBkYXRlZCBzdWNjZXNzZnVsbHlcIik7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCB0aGlzLmNoYXB0ZXJzLCBjaGFwdGVyKS5vcGVuKCk7XG5cdFx0XHR9O1xuXHRcdFx0Ly8gVXAvRG93biBidXR0b25zXG5cdFx0XHRpZiAoY2hhcHRlci5udW1iZXIgPiAxKSB7XG5cdFx0XHRcdGNvbnN0IHVwQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiTW92ZSBjaGFwdGVyIHVwXCIgfVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0c2V0SWNvbih1cEJ0biwgXCJhcnJvdy11cFwiKTtcblx0XHRcdFx0dXBCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLm1vdmVDaGFwdGVyVXAoY2hhcHRlcik7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRpZiAoY2hhcHRlci5udW1iZXIgPCB0aGlzLmNoYXB0ZXJzLmxlbmd0aCkge1xuXHRcdFx0XHRjb25zdCBkb3duQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiTW92ZSBjaGFwdGVyIGRvd25cIiB9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRzZXRJY29uKGRvd25CdG4sIFwiYXJyb3ctZG93blwiKTtcblx0XHRcdFx0ZG93bkJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMubW92ZUNoYXB0ZXJEb3duKGNoYXB0ZXIpO1xuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0Ly8gQWRkIENvbnRlbnQgYnV0dG9uIChvbmx5IGluIENvbnRlbnRzIHRhYilcblx0XHRcdGlmICh0aGlzLmN1cnJlbnRUYWIgPT09IFwiY29udGVudHNcIikge1xuXHRcdFx0XHRjb25zdCBhZGRDb250ZW50QnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiQWRkIGNvbnRlbnRcIiB9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRzZXRJY29uKGFkZENvbnRlbnRCdG4sIFwicGx1c1wiKTtcblx0XHRcdFx0YWRkQ29udGVudEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuY3JlYXRlQ29udGVudEZvckVudGl0eShcImNoYXB0ZXJcIiwgY2hhcHRlci5pZCwgY2hhcHRlci5pZCk7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBkZWxldGVCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkRlbGV0ZSBjaGFwdGVyXCIgfVxuXHRcdFx0fSk7XG5cdFx0XHRzZXRJY29uKGRlbGV0ZUJ0biwgXCJ0cmFzaFwiKTtcblx0XHRcdGRlbGV0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRpZiAoY29uZmlybShcIkRlbGV0ZSB0aGlzIGNoYXB0ZXI/XCIpKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5kZWxldGVDaGFwdGVyKGNoYXB0ZXIuaWQpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJDaGFwdGVyIGRlbGV0ZWRcIik7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gQWN0aW9ucyBoYW5kbGVkIGJ5IHN0b3J5IGFjdGlvbnMgYmFyXG5cdH1cblxuXHRyZW5kZXJTY2VuZXNUYWIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xuXG5cdFx0aWYgKHRoaXMuc2NlbmVzLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmNoYXB0ZXJzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dGhpcy5yZW5kZXJFbXB0eUNhcmQoY29udGFpbmVyLCB7XG5cdFx0XHRcdGljb246IFwiZmlsbVwiLFxuXHRcdFx0XHR0aXRsZTogXCJObyBzY2VuZXMgeWV0XCIsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkFkZCBhIGNoYXB0ZXIgYW5kIGl0cyBmaXJzdCBzY2VuZSB0byBzdGFydCBzdHJ1Y3R1cmluZyB0aGUgc3RvcnkuXCIsXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBHcm91cCBzY2VuZXMgYnkgY2hhcHRlclxuXHRcdGNvbnN0IHNjZW5lc0J5Q2hhcHRlciA9IG5ldyBNYXA8c3RyaW5nIHwgbnVsbCwgU2NlbmVbXT4oKTtcblx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIHRoaXMuc2NlbmVzKSB7XG5cdFx0XHRjb25zdCBjaGFwdGVySWQgPSBzY2VuZS5jaGFwdGVyX2lkIHx8IG51bGw7XG5cdFx0XHRpZiAoIXNjZW5lc0J5Q2hhcHRlci5oYXMoY2hhcHRlcklkKSkge1xuXHRcdFx0XHRzY2VuZXNCeUNoYXB0ZXIuc2V0KGNoYXB0ZXJJZCwgW10pO1xuXHRcdFx0fVxuXHRcdFx0c2NlbmVzQnlDaGFwdGVyLmdldChjaGFwdGVySWQpIS5wdXNoKHNjZW5lKTtcblx0XHR9XG5cblx0XHRjb25zdCBsaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbGlzdFwiIH0pO1xuXG5cdFx0Ly8gUmVuZGVyIHNjZW5lcyBncm91cGVkIGJ5IGNoYXB0ZXJcblx0XHRmb3IgKGNvbnN0IGNoYXB0ZXIgb2YgdGhpcy5jaGFwdGVycy5zb3J0KChhLCBiKSA9PiBhLm51bWJlciAtIGIubnVtYmVyKSkge1xuXHRcdFx0Y29uc3QgY2hhcHRlclNjZW5lcyA9IHNjZW5lc0J5Q2hhcHRlci5nZXQoY2hhcHRlci5pZCkgfHwgW107XG5cdFx0XHRjb25zdCBncm91cCA9IGxpc3QuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cFwiIH0pO1xuXHRcdFx0Y29uc3QgZ3JvdXBIZWFkZXIgPSBncm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwLWhlYWRlclwiIH0pO1xuXHRcdFx0Z3JvdXBIZWFkZXIuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IGBDaGFwdGVyICR7Y2hhcHRlci5udW1iZXJ9OiAke2NoYXB0ZXIudGl0bGV9YCB9KTtcblx0XHRcdGNvbnN0IGFkZEJ1dHRvbiA9IGdyb3VwSGVhZGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1hZGQtYnRuXCIsXG5cdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiQWRkIHNjZW5lXCIgfVxuXHRcdFx0fSk7XG5cdFx0XHRzZXRJY29uKGFkZEJ1dHRvbiwgXCJwbHVzXCIpO1xuXHRcdFx0YWRkQnV0dG9uLmNyZWF0ZVNwYW4oeyB0ZXh0OiBcIkFkZCBzY2VuZVwiIH0pO1xuXHRcdFx0YWRkQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdGlmICghdGhpcy5jdXJyZW50U3RvcnkpIHJldHVybjtcblx0XHRcdFx0bmV3IFNjZW5lTW9kYWwodGhpcy5hcHAsIHRoaXMuY3VycmVudFN0b3J5LmlkLCB0aGlzLmNoYXB0ZXJzLCBhc3luYyAoc2NlbmUpID0+IHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0c2NlbmUuY2hhcHRlcl9pZCA9IGNoYXB0ZXIuaWQ7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlU2NlbmUoc2NlbmUpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJTY2VuZSBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcblx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdHRocm93IGVycjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIHRoaXMuc2NlbmVzLCB1bmRlZmluZWQsIGNoYXB0ZXIuaWQpLm9wZW4oKTtcblx0XHRcdH07XG5cblx0XHRcdGNvbnN0IGdyb3VwSXRlbXMgPSBncm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwLWl0ZW1zXCIgfSk7XG5cdFx0XHRpZiAoY2hhcHRlclNjZW5lcy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0Z3JvdXBJdGVtcy5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIHNjZW5lcyBpbiB0aGlzIGNoYXB0ZXIuXCIgfSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIGNoYXB0ZXJTY2VuZXMuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSkpIHtcblx0XHRcdFx0XHR0aGlzLnJlbmRlclNjZW5lSXRlbShncm91cEl0ZW1zLCBzY2VuZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIFNjZW5lIGJ1dHRvbiBtb3ZlZCB0byBoZWFkZXJcblx0XHR9XG5cblx0XHQvLyBSZW5kZXIgb3JwaGFuIHNjZW5lcyAobm8gY2hhcHRlcilcblx0XHRjb25zdCBvcnBoYW5TY2VuZXMgPSBzY2VuZXNCeUNoYXB0ZXIuZ2V0KG51bGwpIHx8IFtdO1xuXHRcdGlmIChvcnBoYW5TY2VuZXMubGVuZ3RoID4gMCB8fCBzY2VuZXNCeUNoYXB0ZXIuc2l6ZSA9PT0gMCkge1xuXHRcdFx0Y29uc3QgZ3JvdXAgPSBsaXN0LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXBcIiB9KTtcblx0XHRcdGNvbnN0IGdyb3VwSGVhZGVyID0gZ3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1oZWFkZXJcIiB9KTtcblx0XHRcdGdyb3VwSGVhZGVyLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIldpdGhvdXQgQ2hhcHRlclwiIH0pO1xuXHRcdFx0Y29uc3QgYWRkQnV0dG9uID0gZ3JvdXBIZWFkZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWFkZC1idG5cIixcblx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJBZGQgc2NlbmVcIiB9XG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24oYWRkQnV0dG9uLCBcInBsdXNcIik7XG5cdFx0XHRhZGRCdXR0b24uY3JlYXRlU3Bhbih7IHRleHQ6IFwiQWRkIHNjZW5lXCIgfSk7XG5cdFx0XHRhZGRCdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXHRcdFx0XHRuZXcgU2NlbmVNb2RhbCh0aGlzLmFwcCwgdGhpcy5jdXJyZW50U3RvcnkuaWQsIHRoaXMuY2hhcHRlcnMsIGFzeW5jIChzY2VuZSkgPT4ge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRzY2VuZS5jaGFwdGVyX2lkID0gbnVsbDtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVTY2VuZShzY2VuZSk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIlNjZW5lIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0dGhyb3cgZXJyO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSwgdGhpcy5zY2VuZXMsIHVuZGVmaW5lZCwgbnVsbCkub3BlbigpO1xuXHRcdFx0fTtcblxuXHRcdFx0Y29uc3QgZ3JvdXBJdGVtcyA9IGdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtaXRlbXNcIiB9KTtcblx0XHRcdGZvciAoY29uc3Qgc2NlbmUgb2Ygb3JwaGFuU2NlbmVzLnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pKSB7XG5cdFx0XHRcdHRoaXMucmVuZGVyU2NlbmVJdGVtKGdyb3VwSXRlbXMsIHNjZW5lKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIFNjZW5lIGJ1dHRvbiBtb3ZlZCB0byBoZWFkZXJcblx0XHR9XG5cdH1cblxuXHRyZW5kZXJTY2VuZUl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgc2NlbmU6IFNjZW5lKSB7XG5cdFx0Y29uc3QgaXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIiB9KTtcblx0XHRpdGVtLmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXRpdGxlXCIsXG5cdFx0XHR0ZXh0OiBgU2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lLmdvYWwgfHwgXCJVbnRpdGxlZFwifWAsXG5cdFx0fSk7XG5cdFx0Y29uc3QgbWV0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIgfSk7XG5cdFx0aWYgKHNjZW5lLnRpbWVfcmVmKSB7XG5cdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGBUaW1lOiAke3NjZW5lLnRpbWVfcmVmfWAgfSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgYWN0aW9ucyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtLWFjdGlvbnNcIiB9KTtcblx0XHRjb25zdCBlZGl0QnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkVkaXQgc2NlbmVcIiB9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihlZGl0QnRuLCBcInBlbmNpbFwiKTtcblx0XHRlZGl0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cdFx0XHRuZXcgU2NlbmVNb2RhbCh0aGlzLmFwcCwgdGhpcy5jdXJyZW50U3RvcnkuaWQsIHRoaXMuY2hhcHRlcnMsIGFzeW5jICh1cGRhdGVkU2NlbmUpID0+IHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlU2NlbmUoc2NlbmUuaWQsIHVwZGF0ZWRTY2VuZSk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShcIlNjZW5lIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHRcdH1cblx0XHRcdH0sIHRoaXMuc2NlbmVzLCBzY2VuZSkub3BlbigpO1xuXHRcdH07XG5cdFx0Ly8gVXAvRG93biBidXR0b25zXG5cdFx0Y29uc3Qgc2libGluZ1NjZW5lcyA9IHRoaXMuc2NlbmVzLmZpbHRlcihzID0+IHMuY2hhcHRlcl9pZCA9PT0gc2NlbmUuY2hhcHRlcl9pZClcblx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKTtcblx0XHRjb25zdCBtaW5PcmRlck51bSA9IHNpYmxpbmdTY2VuZXMubGVuZ3RoID4gMCA/IE1hdGgubWluKC4uLnNpYmxpbmdTY2VuZXMubWFwKHMgPT4gcy5vcmRlcl9udW0pKSA6IHNjZW5lLm9yZGVyX251bTtcblx0XHRjb25zdCBtYXhPcmRlck51bSA9IHNpYmxpbmdTY2VuZXMubGVuZ3RoID4gMCA/IE1hdGgubWF4KC4uLnNpYmxpbmdTY2VuZXMubWFwKHMgPT4gcy5vcmRlcl9udW0pKSA6IHNjZW5lLm9yZGVyX251bTtcblx0XHRpZiAoc2NlbmUub3JkZXJfbnVtID4gbWluT3JkZXJOdW0pIHtcblx0XHRcdGNvbnN0IHVwQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJNb3ZlIHNjZW5lIHVwXCIgfVxuXHRcdFx0fSk7XG5cdFx0XHRzZXRJY29uKHVwQnRuLCBcImFycm93LXVwXCIpO1xuXHRcdFx0dXBCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0dGhpcy5tb3ZlU2NlbmVVcChzY2VuZSk7XG5cdFx0XHR9O1xuXHRcdH1cblx0XHRpZiAoc2NlbmUub3JkZXJfbnVtIDwgbWF4T3JkZXJOdW0pIHtcblx0XHRcdGNvbnN0IGRvd25CdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIk1vdmUgc2NlbmUgZG93blwiIH1cblx0XHRcdH0pO1xuXHRcdFx0c2V0SWNvbihkb3duQnRuLCBcImFycm93LWRvd25cIik7XG5cdFx0XHRkb3duQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMubW92ZVNjZW5lRG93bihzY2VuZSk7XG5cdFx0XHR9O1xuXHRcdH1cblx0XHRjb25zdCByZWxpbmtCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiUmVsaW5rIHNjZW5lXCIgfVxuXHRcdH0pO1xuXHRcdHNldEljb24ocmVsaW5rQnRuLCBcImxpbmstMlwiKTtcblx0XHRyZWxpbmtCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IHRoaXMuc2hvd01vdmVTY2VuZU1vZGFsKHNjZW5lKTtcblx0XHR9O1xuXHRcdC8vIEFkZCBDb250ZW50IGJ1dHRvbiAob25seSBpbiBDb250ZW50cyB0YWIpXG5cdFx0aWYgKHRoaXMuY3VycmVudFRhYiA9PT0gXCJjb250ZW50c1wiKSB7XG5cdFx0XHRjb25zdCBjaGFwdGVySWQgPSBzY2VuZS5jaGFwdGVyX2lkIHx8ICh0aGlzLmNoYXB0ZXJzLmxlbmd0aCA+IDAgPyB0aGlzLmNoYXB0ZXJzWzBdLmlkIDogXCJcIik7XG5cdFx0XHRpZiAoY2hhcHRlcklkKSB7XG5cdFx0XHRcdGNvbnN0IGFkZENvbnRlbnRCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJBZGQgY29udGVudFwiIH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHNldEljb24oYWRkQ29udGVudEJ0biwgXCJwbHVzXCIpO1xuXHRcdFx0XHRhZGRDb250ZW50QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5jcmVhdGVDb250ZW50Rm9yRW50aXR5KFwic2NlbmVcIiwgc2NlbmUuaWQsIGNoYXB0ZXJJZCk7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGRlbGV0ZUJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJEZWxldGUgc2NlbmVcIiB9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihkZWxldGVCdG4sIFwidHJhc2hcIik7XG5cdFx0ZGVsZXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoY29uZmlybShcIkRlbGV0ZSB0aGlzIHNjZW5lP1wiKSkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5kZWxldGVTY2VuZShzY2VuZS5pZCk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShcIlNjZW5lIGRlbGV0ZWRcIik7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdHJlbmRlckJlYXRzVGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRjb250YWluZXIuZW1wdHkoKTtcblxuXHRcdGlmICh0aGlzLmJlYXRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dGhpcy5yZW5kZXJFbXB0eUNhcmQoY29udGFpbmVyLCB7XG5cdFx0XHRcdGljb246IFwiYWN0aXZpdHlcIixcblx0XHRcdFx0dGl0bGU6IFwiTm8gYmVhdHMgeWV0XCIsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiB0aGlzLnNjZW5lcy5sZW5ndGggPT09IDBcblx0XHRcdFx0XHQ/IFwiQ3JlYXRlIGEgc2NlbmUgZmlyc3QsIHRoZW4gYWRkIGJlYXRzIHRvIG91dGxpbmUgdGhlIGZsb3cuXCJcblx0XHRcdFx0XHQ6IFwiQWRkIGJlYXRzIGluc2lkZSBzY2VuZXMgdG8gYnVpbGQgdGhlIG5hcnJhdGl2ZSByaHl0aG0uXCIsXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBHcm91cCBiZWF0cyBieSBzY2VuZVxuXHRcdGNvbnN0IGJlYXRzQnlTY2VuZSA9IG5ldyBNYXA8c3RyaW5nLCBCZWF0W10+KCk7XG5cdFx0Zm9yIChjb25zdCBiZWF0IG9mIHRoaXMuYmVhdHMpIHtcblx0XHRcdGlmICghYmVhdHNCeVNjZW5lLmhhcyhiZWF0LnNjZW5lX2lkKSkge1xuXHRcdFx0XHRiZWF0c0J5U2NlbmUuc2V0KGJlYXQuc2NlbmVfaWQsIFtdKTtcblx0XHRcdH1cblx0XHRcdGJlYXRzQnlTY2VuZS5nZXQoYmVhdC5zY2VuZV9pZCkhLnB1c2goYmVhdCk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblxuXHRcdC8vIFJlbmRlciBiZWF0cyBncm91cGVkIGJ5IGNoYXB0ZXIgKHdpdGggc2NlbmVzIGFzIHN1Yi1ncm91cHMpXG5cdFx0Zm9yIChjb25zdCBjaGFwdGVyIG9mIHRoaXMuY2hhcHRlcnMuc29ydCgoYSwgYikgPT4gYS5udW1iZXIgLSBiLm51bWJlcikpIHtcblx0XHRcdGNvbnN0IGNoYXB0ZXJTY2VuZXMgPSB0aGlzLnNjZW5lcy5maWx0ZXIocyA9PiBzLmNoYXB0ZXJfaWQgPT09IGNoYXB0ZXIuaWQpXG5cdFx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKTtcblx0XHRcdFxuXHRcdFx0Ly8gT25seSBjcmVhdGUgY2hhcHRlciBncm91cCBpZiBpdCBoYXMgc2NlbmVzIHdpdGggYmVhdHMgb3IgZW1wdHkgc2NlbmVzXG5cdFx0XHRpZiAoY2hhcHRlclNjZW5lcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJHcm91cCA9IGxpc3QuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1jaGFwdGVyLWdyb3VwXCIgfSk7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJIZWFkZXIgPSBjaGFwdGVyR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1jaGFwdGVyLWdyb3VwLWhlYWRlclwiIH0pO1xuXHRcdFx0XHRjaGFwdGVySGVhZGVyLmNyZWF0ZUVsKFwiaDJcIiwgeyBcblx0XHRcdFx0XHR0ZXh0OiBgQ2hhcHRlciAke2NoYXB0ZXIubnVtYmVyfTogJHtjaGFwdGVyLnRpdGxlfWAgXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJDb250ZW50ID0gY2hhcHRlckdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtY2hhcHRlci1ncm91cC1jb250ZW50XCIgfSk7XG5cblx0XHRcdFx0Ly8gUmVuZGVyIHNjZW5lcyBhcyBzdWItZ3JvdXBzIHdpdGhpbiB0aGUgY2hhcHRlclxuXHRcdFx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIGNoYXB0ZXJTY2VuZXMpIHtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUJlYXRzID0gYmVhdHNCeVNjZW5lLmdldChzY2VuZS5pZCkgfHwgW107XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVHcm91cCA9IGNoYXB0ZXJDb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXBcIiB9KTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUhlYWRlciA9IHNjZW5lR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1oZWFkZXJcIiB9KTtcblx0XHRcdFx0XHRzY2VuZUhlYWRlci5jcmVhdGVFbChcImgzXCIsIHsgXG5cdFx0XHRcdFx0XHR0ZXh0OiBgU2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lLmdvYWwgfHwgXCJVbnRpdGxlZFwifWAgXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y29uc3QgYWRkQnV0dG9uID0gc2NlbmVIZWFkZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1hZGQtYnRuXCIsXG5cdFx0XHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkFkZCBiZWF0XCIgfVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHNldEljb24oYWRkQnV0dG9uLCBcInBsdXNcIik7XG5cdFx0XHRcdFx0YWRkQnV0dG9uLmNyZWF0ZVNwYW4oeyB0ZXh0OiBcIkFkZCBCZWF0XCIgfSk7XG5cdFx0XHRcdFx0YWRkQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cdFx0XHRcdFx0XHRuZXcgQmVhdE1vZGFsKHRoaXMuYXBwLCB0aGlzLmN1cnJlbnRTdG9yeS5pZCwgdGhpcy5zY2VuZXMsIGFzeW5jIChiZWF0KSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0YmVhdC5zY2VuZV9pZCA9IHNjZW5lLmlkO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVCZWF0KGJlYXQpO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJCZWF0IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuXHRcdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0sIHRoaXMuYmVhdHMsIHVuZGVmaW5lZCwgdGhpcy5jaGFwdGVycywgc2NlbmUuaWQpLm9wZW4oKTtcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVJdGVtcyA9IHNjZW5lR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1pdGVtc1wiIH0pO1xuXHRcdFx0XHRcdGlmIChzY2VuZUJlYXRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0c2NlbmVJdGVtcy5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIGJlYXRzIGluIHRoaXMgc2NlbmUuXCIgfSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBzY2VuZUJlYXRzLnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQmVhdEl0ZW0oc2NlbmVJdGVtcywgYmVhdCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gQWRkIEJlYXQgYnV0dG9uIG1vdmVkIHRvIGhlYWRlclxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUmVuZGVyIG9ycGhhbiBiZWF0cyAobm8gc2NlbmUgb3Igc2NlbmUgd2l0aG91dCBjaGFwdGVyKVxuXHRcdGNvbnN0IG9ycGhhbkJlYXRzID0gdGhpcy5iZWF0cy5maWx0ZXIoYiA9PiB7XG5cdFx0XHRjb25zdCBzY2VuZSA9IHRoaXMuc2NlbmVzLmZpbmQocyA9PiBzLmlkID09PSBiLnNjZW5lX2lkKTtcblx0XHRcdHJldHVybiAhc2NlbmUgfHwgIXNjZW5lLmNoYXB0ZXJfaWQ7XG5cdFx0fSk7XG5cdFx0XG5cdFx0Ly8gU2hvdyBcIldpdGhvdXQgQ2hhcHRlclwiIHNlY3Rpb24gaWYgbm8gY2hhcHRlcnMgZXhpc3QgT1IgaWYgdGhlcmUgYXJlIG9ycGhhbiBiZWF0cy9zY2VuZXNcblx0XHRpZiAodGhpcy5jaGFwdGVycy5sZW5ndGggPT09IDAgfHwgb3JwaGFuQmVhdHMubGVuZ3RoID4gMCB8fCB0aGlzLnNjZW5lcy5zb21lKHMgPT4gIXMuY2hhcHRlcl9pZCkpIHtcblx0XHRcdGNvbnN0IG9ycGhhbkdyb3VwID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWNoYXB0ZXItZ3JvdXBcIiB9KTtcblx0XHRcdGNvbnN0IG9ycGhhbkhlYWRlciA9IG9ycGhhbkdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtY2hhcHRlci1ncm91cC1oZWFkZXJcIiB9KTtcblx0XHRcdG9ycGhhbkhlYWRlci5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJXaXRob3V0IENoYXB0ZXJcIiB9KTtcblxuXHRcdFx0Y29uc3Qgb3JwaGFuQ29udGVudCA9IG9ycGhhbkdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtY2hhcHRlci1ncm91cC1jb250ZW50XCIgfSk7XG5cblx0XHRcdC8vIEdyb3VwIG9ycGhhbiBiZWF0cyBieSBzY2VuZVxuXHRcdFx0Y29uc3Qgb3JwaGFuU2NlbmVzID0gdGhpcy5zY2VuZXMuZmlsdGVyKHMgPT4gIXMuY2hhcHRlcl9pZClcblx0XHRcdFx0LnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pO1xuXG5cdFx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIG9ycGhhblNjZW5lcykge1xuXHRcdFx0XHRjb25zdCBzY2VuZUJlYXRzID0gYmVhdHNCeVNjZW5lLmdldChzY2VuZS5pZCkgfHwgW107XG5cdFx0XHRcdGNvbnN0IHNjZW5lR3JvdXAgPSBvcnBoYW5Db250ZW50LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXBcIiB9KTtcblx0XHRcdFx0Y29uc3Qgc2NlbmVIZWFkZXIgPSBzY2VuZUdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtaGVhZGVyXCIgfSk7XG5cdFx0XHRcdHNjZW5lSGVhZGVyLmNyZWF0ZUVsKFwiaDNcIiwgeyBcblx0XHRcdFx0XHR0ZXh0OiBgU2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lLmdvYWwgfHwgXCJVbnRpdGxlZFwifWAgXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRjb25zdCBhZGRCdXR0b24gPSBzY2VuZUhlYWRlci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1hZGQtYnRuXCIsXG5cdFx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJBZGQgYmVhdFwiIH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHNldEljb24oYWRkQnV0dG9uLCBcInBsdXNcIik7XG5cdFx0XHRcdGFkZEJ1dHRvbi5jcmVhdGVTcGFuKHsgdGV4dDogXCJBZGQgQmVhdFwiIH0pO1xuXHRcdFx0XHRhZGRCdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cdFx0XHRcdFx0bmV3IEJlYXRNb2RhbCh0aGlzLmFwcCwgdGhpcy5jdXJyZW50U3RvcnkuaWQsIHRoaXMuc2NlbmVzLCBhc3luYyAoYmVhdCkgPT4ge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0YmVhdC5zY2VuZV9pZCA9IHNjZW5lLmlkO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlQmVhdChiZWF0KTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQmVhdCBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgdGhpcy5iZWF0cywgdW5kZWZpbmVkLCB0aGlzLmNoYXB0ZXJzLCBzY2VuZS5pZCkub3BlbigpO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdGNvbnN0IHNjZW5lSXRlbXMgPSBzY2VuZUdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtaXRlbXNcIiB9KTtcblx0XHRcdFx0aWYgKHNjZW5lQmVhdHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0c2NlbmVJdGVtcy5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIGJlYXRzIGluIHRoaXMgc2NlbmUuXCIgfSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIHNjZW5lQmVhdHMuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSkpIHtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQmVhdEl0ZW0oc2NlbmVJdGVtcywgYmVhdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQWRkIEJlYXQgYnV0dG9uIG1vdmVkIHRvIGhlYWRlclxuXHRcdFx0fVxuXG5cdFx0XHQvLyBCZWF0cyB3aXRob3V0IHZhbGlkIHNjZW5lXG5cdFx0XHRjb25zdCBiZWF0c1dpdGhvdXRTY2VuZSA9IG9ycGhhbkJlYXRzLmZpbHRlcihiID0+IHtcblx0XHRcdFx0Y29uc3Qgc2NlbmUgPSB0aGlzLnNjZW5lcy5maW5kKHMgPT4gcy5pZCA9PT0gYi5zY2VuZV9pZCk7XG5cdFx0XHRcdHJldHVybiAhc2NlbmU7XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0Ly8gU2hvdyBcIldpdGhvdXQgU2NlbmVcIiBzZWN0aW9uIGlmIHRoZXJlIGFyZSBiZWF0cyB3aXRob3V0IHNjZW5lIE9SIGlmIHRoZXJlIGFyZSBubyBzY2VuZXMgYnV0IHRoZXJlIGFyZSBiZWF0c1xuXHRcdFx0aWYgKGJlYXRzV2l0aG91dFNjZW5lLmxlbmd0aCA+IDAgfHwgKG9ycGhhblNjZW5lcy5sZW5ndGggPT09IDAgJiYgdGhpcy5iZWF0cy5sZW5ndGggPiAwICYmIHRoaXMuc2NlbmVzLmxlbmd0aCA9PT0gMCkpIHtcblx0XHRcdFx0Y29uc3Qgc2NlbmVHcm91cCA9IG9ycGhhbkNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cFwiIH0pO1xuXHRcdFx0XHRjb25zdCBzY2VuZUhlYWRlciA9IHNjZW5lR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1oZWFkZXJcIiB9KTtcblx0XHRcdFx0c2NlbmVIZWFkZXIuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiV2l0aG91dCBTY2VuZVwiIH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc3Qgc2NlbmVJdGVtcyA9IHNjZW5lR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1pdGVtc1wiIH0pO1xuXHRcdFx0XHRpZiAoYmVhdHNXaXRob3V0U2NlbmUubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0c1dpdGhvdXRTY2VuZS5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKSkge1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJCZWF0SXRlbShzY2VuZUl0ZW1zLCBiZWF0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2NlbmVJdGVtcy5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIGJlYXRzIHdpdGhvdXQgc2NlbmUuXCIgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZW5kZXJCZWF0SXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCBiZWF0OiBCZWF0KSB7XG5cdFx0Y29uc3QgaXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIiB9KTtcblx0XHRpdGVtLmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXRpdGxlXCIsXG5cdFx0XHR0ZXh0OiBgQmVhdCAke2JlYXQub3JkZXJfbnVtfTogJHtiZWF0LnR5cGV9YCxcblx0XHR9KTtcblx0XHRjb25zdCBtZXRhID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRpZiAoYmVhdC5pbnRlbnQpIHtcblx0XHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogYEludGVudDogJHtiZWF0LmludGVudH1gIH0pO1xuXHRcdH1cblx0XHRpZiAoYmVhdC5vdXRjb21lKSB7XG5cdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGBPdXRjb21lOiAke2JlYXQub3V0Y29tZX1gIH0pO1xuXHRcdH1cblxuXHRcdGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbS1hY3Rpb25zXCIgfSk7XG5cdFx0Y29uc3QgZWRpdEJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJFZGl0IGJlYXRcIiB9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihlZGl0QnRuLCBcInBlbmNpbFwiKTtcblx0XHRlZGl0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cdFx0XHRuZXcgQmVhdE1vZGFsKHRoaXMuYXBwLCB0aGlzLmN1cnJlbnRTdG9yeS5pZCwgdGhpcy5zY2VuZXMsIGFzeW5jICh1cGRhdGVkQmVhdCkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVCZWF0KGJlYXQuaWQsIHVwZGF0ZWRCZWF0KTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQmVhdCB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0dGhyb3cgZXJyO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCB0aGlzLmJlYXRzLCBiZWF0LCB0aGlzLmNoYXB0ZXJzKS5vcGVuKCk7XG5cdFx0fTtcblx0XHQvLyBVcC9Eb3duIGJ1dHRvbnNcblx0XHRjb25zdCBzaWJsaW5nQmVhdHMgPSB0aGlzLmJlYXRzLmZpbHRlcihiID0+IGIuc2NlbmVfaWQgPT09IGJlYXQuc2NlbmVfaWQpXG5cdFx0XHQuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSk7XG5cdFx0Y29uc3QgbWluT3JkZXJOdW0gPSBzaWJsaW5nQmVhdHMubGVuZ3RoID4gMCA/IE1hdGgubWluKC4uLnNpYmxpbmdCZWF0cy5tYXAoYiA9PiBiLm9yZGVyX251bSkpIDogYmVhdC5vcmRlcl9udW07XG5cdFx0Y29uc3QgbWF4T3JkZXJOdW0gPSBzaWJsaW5nQmVhdHMubGVuZ3RoID4gMCA/IE1hdGgubWF4KC4uLnNpYmxpbmdCZWF0cy5tYXAoYiA9PiBiLm9yZGVyX251bSkpIDogYmVhdC5vcmRlcl9udW07XG5cdFx0aWYgKGJlYXQub3JkZXJfbnVtID4gbWluT3JkZXJOdW0pIHtcblx0XHRcdGNvbnN0IHVwQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJNb3ZlIGJlYXQgdXBcIiB9XG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24odXBCdG4sIFwiYXJyb3ctdXBcIik7XG5cdFx0XHR1cEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLm1vdmVCZWF0VXAoYmVhdCk7XG5cdFx0XHR9O1xuXHRcdH1cblx0XHRpZiAoYmVhdC5vcmRlcl9udW0gPCBtYXhPcmRlck51bSkge1xuXHRcdFx0Y29uc3QgZG93bkJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiTW92ZSBiZWF0IGRvd25cIiB9XG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24oZG93bkJ0biwgXCJhcnJvdy1kb3duXCIpO1xuXHRcdFx0ZG93bkJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLm1vdmVCZWF0RG93bihiZWF0KTtcblx0XHRcdH07XG5cdFx0fVxuXHRcdGNvbnN0IHJlbGlua0J0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJSZWxpbmsgYmVhdFwiIH1cblx0XHR9KTtcblx0XHRzZXRJY29uKHJlbGlua0J0biwgXCJsaW5rLTJcIik7XG5cdFx0cmVsaW5rQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRhd2FpdCB0aGlzLnNob3dNb3ZlQmVhdE1vZGFsKGJlYXQpO1xuXHRcdH07XG5cdFx0Ly8gQWRkIENvbnRlbnQgYnV0dG9uIChvbmx5IGluIENvbnRlbnRzIHRhYilcblx0XHRpZiAodGhpcy5jdXJyZW50VGFiID09PSBcImNvbnRlbnRzXCIpIHtcblx0XHRcdGNvbnN0IHNjZW5lID0gdGhpcy5zY2VuZXMuZmluZChzID0+IHMuaWQgPT09IGJlYXQuc2NlbmVfaWQpO1xuXHRcdFx0Y29uc3QgY2hhcHRlcklkID0gc2NlbmU/LmNoYXB0ZXJfaWQgfHwgKHRoaXMuY2hhcHRlcnMubGVuZ3RoID4gMCA/IHRoaXMuY2hhcHRlcnNbMF0uaWQgOiBcIlwiKTtcblx0XHRcdGlmIChjaGFwdGVySWQpIHtcblx0XHRcdFx0Y29uc3QgYWRkQ29udGVudEJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkFkZCBjb250ZW50XCIgfVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0c2V0SWNvbihhZGRDb250ZW50QnRuLCBcInBsdXNcIik7XG5cdFx0XHRcdGFkZENvbnRlbnRCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLmNyZWF0ZUNvbnRlbnRGb3JFbnRpdHkoXCJiZWF0XCIsIGJlYXQuaWQsIGNoYXB0ZXJJZCk7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGRlbGV0ZUJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJEZWxldGUgYmVhdFwiIH1cblx0XHR9KTtcblx0XHRzZXRJY29uKGRlbGV0ZUJ0biwgXCJ0cmFzaFwiKTtcblx0XHRkZWxldGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmIChjb25maXJtKFwiRGVsZXRlIHRoaXMgYmVhdD9cIikpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZGVsZXRlQmVhdChiZWF0LmlkKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQmVhdCBkZWxldGVkXCIpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHRzaG93RWRpdFN0b3J5TmFtZU1vZGFsKCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50U3RvcnkpIHJldHVybjtcblx0XHRcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiRWRpdCBTdG9yeSBOYW1lXCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IHRpdGxlID0gdGhpcy5jdXJyZW50U3RvcnkudGl0bGU7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlN0b3J5IE5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IHRpdGxlSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCB2YWx1ZTogdGl0bGUgfSk7XG5cdFx0dGl0bGVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyB0aXRsZSA9IHRpdGxlSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghdGl0bGUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJTdG9yeSBuYW1lIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCB1cGRhdGVkU3RvcnkgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlU3RvcnkodGhpcy5jdXJyZW50U3RvcnkhLmlkLCB0aXRsZS50cmltKCkpO1xuXHRcdFx0XHR0aGlzLmN1cnJlbnRTdG9yeSA9IHVwZGF0ZWRTdG9yeTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkU3RvcmllcygpO1xuXHRcdFx0XHR0aGlzLnJlbmRlckRldGFpbHNIZWFkZXIoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIlN0b3J5IG5hbWUgdXBkYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0dGl0bGVJbnB1dC5mb2N1cygpO1xuXHRcdHRpdGxlSW5wdXQuc2VsZWN0KCk7XG5cdH1cblxuXHRhc3luYyBjbG9uZVN0b3J5KCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50U3RvcnkpIHJldHVybjtcblxuXHRcdGNvbnN0IGNsb25lQnV0dG9uID0gdGhpcy5oZWFkZXJFbD8ucXVlcnlTZWxlY3RvcihcIi5zdG9yeS1lbmdpbmUtY2xvbmUtYnRuXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuXHRcdGlmIChjbG9uZUJ1dHRvbikge1xuXHRcdFx0Y2xvbmVCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0Y2xvbmVCdXR0b24uc2V0VGV4dChcIkNsb25pbmcuLi5cIik7XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MudGVuYW50SWQpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVGVuYW50IElEIG5vdCBjb25maWd1cmVkXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBjbG9uZWRTdG9yeSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jbG9uZVN0b3J5KFxuXHRcdFx0XHR0aGlzLmN1cnJlbnRTdG9yeS5pZFxuXHRcdFx0KTtcblx0XHRcdFxuXHRcdFx0bmV3IE5vdGljZShgU3RvcnkgXCIke2Nsb25lZFN0b3J5LnRpdGxlfVwiIGNsb25lZCBzdWNjZXNzZnVsbHkhYCk7XG5cdFx0XHRcblx0XHRcdC8vIFJlZnJlc2ggdGhlIGxpc3QgYW5kIHNob3cgdGhlIGNsb25lZCBzdG9yeVxuXHRcdFx0YXdhaXQgdGhpcy5sb2FkU3RvcmllcygpO1xuXHRcdFx0YXdhaXQgdGhpcy5zaG93U3RvcnlEZXRhaWxzKGNsb25lZFN0b3J5KTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkNsb25lIGZhaWxlZFwiO1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0aWYgKGNsb25lQnV0dG9uKSB7XG5cdFx0XHRcdGNsb25lQnV0dG9uLnNldFRleHQoXCJDbG9uZSBTdG9yeVwiKTtcblx0XHRcdFx0Y2xvbmVCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRzaG93RWRpdFdvcmxkTW9kYWwoKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXHRcdFxuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJFZGl0IFdvcmxkXCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSB0aGlzLmN1cnJlbnRXb3JsZC5uYW1lO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IHRoaXMuY3VycmVudFdvcmxkLmRlc2NyaXB0aW9uO1xuXHRcdGxldCBnZW5yZSA9IHRoaXMuY3VycmVudFdvcmxkLmdlbnJlO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJXb3JsZCBOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCB2YWx1ZTogbmFtZSB9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiR2VucmUgKlwiIH0pO1xuXHRcdGNvbnN0IGdlbnJlSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCB2YWx1ZTogZ2VucmUgfSk7XG5cdFx0Z2VucmVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBnZW5yZSA9IGdlbnJlSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGRlc2NJbnB1dC52YWx1ZSA9IGRlc2NyaXB0aW9uO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTYXZlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiV29ybGQgbmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFnZW5yZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIkdlbnJlIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCB1cGRhdGVkV29ybGQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlV29ybGQoXG5cdFx0XHRcdFx0dGhpcy5jdXJyZW50V29ybGQhLmlkLFxuXHRcdFx0XHRcdG5hbWUudHJpbSgpLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uLnRyaW0oKSxcblx0XHRcdFx0XHRnZW5yZS50cmltKClcblx0XHRcdFx0KTtcblx0XHRcdFx0dGhpcy5jdXJyZW50V29ybGQgPSB1cGRhdGVkV29ybGQ7XG5cdFx0XHRcdC8vIFJlZnJlc2ggd29ybGQgbGlzdCB0byB1cGRhdGUgaXQgZXZlcnl3aGVyZVxuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRTdG9yaWVzKCk7XG5cdFx0XHRcdC8vIFJlLXJlbmRlciB0aGUgd29ybGQgZGV0YWlscyB2aWV3XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGREZXRhaWxzKCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJXb3JsZCB1cGRhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0XHRuYW1lSW5wdXQuZm9jdXMoKTtcblx0XHRuYW1lSW5wdXQuc2VsZWN0KCk7XG5cdH1cblxuXHRjb3B5U3RvcnlJZCgpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cblx0XHRuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0aGlzLmN1cnJlbnRTdG9yeS5pZCkudGhlbigoKSA9PiB7XG5cdFx0XHRuZXcgTm90aWNlKFwiVVVJRCBjb3BpZWQgdG8gY2xpcGJvYXJkXCIpO1xuXHRcdH0pLmNhdGNoKCgpID0+IHtcblx0XHRcdC8vIEZhbGxiYWNrIGZvciBvbGRlciBicm93c2Vyc1xuXHRcdFx0Y29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XG5cdFx0XHR0ZXh0YXJlYS52YWx1ZSA9IHRoaXMuY3VycmVudFN0b3J5IS5pZDtcblx0XHRcdHRleHRhcmVhLnN0eWxlLnBvc2l0aW9uID0gXCJmaXhlZFwiO1xuXHRcdFx0dGV4dGFyZWEuc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuXHRcdFx0dGV4dGFyZWEuc3R5bGUubGVmdCA9IFwiLTk5OTlweFwiO1xuXHRcdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0YXJlYSk7XG5cdFx0XHR0ZXh0YXJlYS5zZWxlY3QoKTtcblx0XHRcdFxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0ZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJjb3B5XCIpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiVVVJRCBjb3BpZWQgdG8gY2xpcGJvYXJkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJGYWlsZWQgdG8gY29weSBVVUlEXCIsIDMwMDApO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRleHRhcmVhKTtcblx0XHR9KTtcblx0fVxuXG5cdGFzeW5jIG1vdmVDaGFwdGVyVXAoY2hhcHRlcjogQ2hhcHRlcikge1xuXHRcdGNvbnN0IHNvcnRlZENoYXB0ZXJzID0gWy4uLnRoaXMuY2hhcHRlcnNdLnNvcnQoKGEsIGIpID0+IGEubnVtYmVyIC0gYi5udW1iZXIpO1xuXHRcdGNvbnN0IGN1cnJlbnRJbmRleCA9IHNvcnRlZENoYXB0ZXJzLmZpbmRJbmRleChjID0+IGMuaWQgPT09IGNoYXB0ZXIuaWQpO1xuXHRcdGlmIChjdXJyZW50SW5kZXggPD0gMCkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgcHJldmlvdXNDaGFwdGVyID0gc29ydGVkQ2hhcHRlcnNbY3VycmVudEluZGV4IC0gMV07XG5cdFx0Y29uc3QgdGVtcE51bWJlciA9IGNoYXB0ZXIubnVtYmVyO1xuXHRcdFxuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlQ2hhcHRlcihjaGFwdGVyLmlkLCB7IG51bWJlcjogcHJldmlvdXNDaGFwdGVyLm51bWJlciB9KTtcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVDaGFwdGVyKHByZXZpb3VzQ2hhcHRlci5pZCwgeyBudW1iZXI6IHRlbXBOdW1iZXIgfSk7XG5cdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0bmV3IE5vdGljZShcIkNoYXB0ZXIgbW92ZWQgdXBcIik7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBtb3ZlQ2hhcHRlckRvd24oY2hhcHRlcjogQ2hhcHRlcikge1xuXHRcdGNvbnN0IHNvcnRlZENoYXB0ZXJzID0gWy4uLnRoaXMuY2hhcHRlcnNdLnNvcnQoKGEsIGIpID0+IGEubnVtYmVyIC0gYi5udW1iZXIpO1xuXHRcdGNvbnN0IGN1cnJlbnRJbmRleCA9IHNvcnRlZENoYXB0ZXJzLmZpbmRJbmRleChjID0+IGMuaWQgPT09IGNoYXB0ZXIuaWQpO1xuXHRcdGlmIChjdXJyZW50SW5kZXggPCAwIHx8IGN1cnJlbnRJbmRleCA+PSBzb3J0ZWRDaGFwdGVycy5sZW5ndGggLSAxKSByZXR1cm47XG5cblx0XHRjb25zdCBuZXh0Q2hhcHRlciA9IHNvcnRlZENoYXB0ZXJzW2N1cnJlbnRJbmRleCArIDFdO1xuXHRcdGNvbnN0IHRlbXBOdW1iZXIgPSBjaGFwdGVyLm51bWJlcjtcblx0XHRcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUNoYXB0ZXIoY2hhcHRlci5pZCwgeyBudW1iZXI6IG5leHRDaGFwdGVyLm51bWJlciB9KTtcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVDaGFwdGVyKG5leHRDaGFwdGVyLmlkLCB7IG51bWJlcjogdGVtcE51bWJlciB9KTtcblx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRuZXcgTm90aWNlKFwiQ2hhcHRlciBtb3ZlZCBkb3duXCIpO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgbW92ZVNjZW5lVXAoc2NlbmU6IFNjZW5lKSB7XG5cdFx0Y29uc3Qgc2libGluZ1NjZW5lcyA9IHRoaXMuc2NlbmVzLmZpbHRlcihzID0+IHMuY2hhcHRlcl9pZCA9PT0gc2NlbmUuY2hhcHRlcl9pZClcblx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKTtcblx0XHRjb25zdCBjdXJyZW50SW5kZXggPSBzaWJsaW5nU2NlbmVzLmZpbmRJbmRleChzID0+IHMuaWQgPT09IHNjZW5lLmlkKTtcblx0XHRpZiAoY3VycmVudEluZGV4IDw9IDApIHJldHVybjtcblxuXHRcdGNvbnN0IHByZXZpb3VzU2NlbmUgPSBzaWJsaW5nU2NlbmVzW2N1cnJlbnRJbmRleCAtIDFdO1xuXHRcdGNvbnN0IHRlbXBPcmRlck51bSA9IHNjZW5lLm9yZGVyX251bTtcblx0XHRcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZVNjZW5lKHNjZW5lLmlkLCB7IG9yZGVyX251bTogcHJldmlvdXNTY2VuZS5vcmRlcl9udW0gfSk7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlU2NlbmUocHJldmlvdXNTY2VuZS5pZCwgeyBvcmRlcl9udW06IHRlbXBPcmRlck51bSB9KTtcblx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRuZXcgTm90aWNlKFwiU2NlbmUgbW92ZWQgdXBcIik7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBtb3ZlU2NlbmVEb3duKHNjZW5lOiBTY2VuZSkge1xuXHRcdGNvbnN0IHNpYmxpbmdTY2VuZXMgPSB0aGlzLnNjZW5lcy5maWx0ZXIocyA9PiBzLmNoYXB0ZXJfaWQgPT09IHNjZW5lLmNoYXB0ZXJfaWQpXG5cdFx0XHQuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSk7XG5cdFx0Y29uc3QgY3VycmVudEluZGV4ID0gc2libGluZ1NjZW5lcy5maW5kSW5kZXgocyA9PiBzLmlkID09PSBzY2VuZS5pZCk7XG5cdFx0aWYgKGN1cnJlbnRJbmRleCA8IDAgfHwgY3VycmVudEluZGV4ID49IHNpYmxpbmdTY2VuZXMubGVuZ3RoIC0gMSkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgbmV4dFNjZW5lID0gc2libGluZ1NjZW5lc1tjdXJyZW50SW5kZXggKyAxXTtcblx0XHRjb25zdCB0ZW1wT3JkZXJOdW0gPSBzY2VuZS5vcmRlcl9udW07XG5cdFx0XG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVTY2VuZShzY2VuZS5pZCwgeyBvcmRlcl9udW06IG5leHRTY2VuZS5vcmRlcl9udW0gfSk7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlU2NlbmUobmV4dFNjZW5lLmlkLCB7IG9yZGVyX251bTogdGVtcE9yZGVyTnVtIH0pO1xuXHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdG5ldyBOb3RpY2UoXCJTY2VuZSBtb3ZlZCBkb3duXCIpO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgbW92ZUJlYXRVcChiZWF0OiBCZWF0KSB7XG5cdFx0Y29uc3Qgc2libGluZ0JlYXRzID0gdGhpcy5iZWF0cy5maWx0ZXIoYiA9PiBiLnNjZW5lX2lkID09PSBiZWF0LnNjZW5lX2lkKVxuXHRcdFx0LnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pO1xuXHRcdGNvbnN0IGN1cnJlbnRJbmRleCA9IHNpYmxpbmdCZWF0cy5maW5kSW5kZXgoYiA9PiBiLmlkID09PSBiZWF0LmlkKTtcblx0XHRpZiAoY3VycmVudEluZGV4IDw9IDApIHJldHVybjtcblxuXHRcdGNvbnN0IHByZXZpb3VzQmVhdCA9IHNpYmxpbmdCZWF0c1tjdXJyZW50SW5kZXggLSAxXTtcblx0XHRjb25zdCB0ZW1wT3JkZXJOdW0gPSBiZWF0Lm9yZGVyX251bTtcblx0XHRcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUJlYXQoYmVhdC5pZCwgeyBvcmRlcl9udW06IHByZXZpb3VzQmVhdC5vcmRlcl9udW0gfSk7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlQmVhdChwcmV2aW91c0JlYXQuaWQsIHsgb3JkZXJfbnVtOiB0ZW1wT3JkZXJOdW0gfSk7XG5cdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0bmV3IE5vdGljZShcIkJlYXQgbW92ZWQgdXBcIik7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBtb3ZlQmVhdERvd24oYmVhdDogQmVhdCkge1xuXHRcdGNvbnN0IHNpYmxpbmdCZWF0cyA9IHRoaXMuYmVhdHMuZmlsdGVyKGIgPT4gYi5zY2VuZV9pZCA9PT0gYmVhdC5zY2VuZV9pZClcblx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKTtcblx0XHRjb25zdCBjdXJyZW50SW5kZXggPSBzaWJsaW5nQmVhdHMuZmluZEluZGV4KGIgPT4gYi5pZCA9PT0gYmVhdC5pZCk7XG5cdFx0aWYgKGN1cnJlbnRJbmRleCA8IDAgfHwgY3VycmVudEluZGV4ID49IHNpYmxpbmdCZWF0cy5sZW5ndGggLSAxKSByZXR1cm47XG5cblx0XHRjb25zdCBuZXh0QmVhdCA9IHNpYmxpbmdCZWF0c1tjdXJyZW50SW5kZXggKyAxXTtcblx0XHRjb25zdCB0ZW1wT3JkZXJOdW0gPSBiZWF0Lm9yZGVyX251bTtcblx0XHRcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUJlYXQoYmVhdC5pZCwgeyBvcmRlcl9udW06IG5leHRCZWF0Lm9yZGVyX251bSB9KTtcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVCZWF0KG5leHRCZWF0LmlkLCB7IG9yZGVyX251bTogdGVtcE9yZGVyTnVtIH0pO1xuXHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdG5ldyBOb3RpY2UoXCJCZWF0IG1vdmVkIGRvd25cIik7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBzaG93TW92ZVNjZW5lTW9kYWwoc2NlbmU6IFNjZW5lKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIk1vdmUgU2NlbmVcIik7XG5cblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogYE1vdmUgc2NlbmUgXCIke3NjZW5lLmdvYWwgfHwgYFNjZW5lICR7c2NlbmUub3JkZXJfbnVtfWB9XCIgdG86YCB9KTtcblxuXHRcdGNvbnN0IHNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLW1vdmUtc2VsZWN0XCIgfSk7XG5cdFx0Y29uc3Qgbm9DaGFwdGVyT3B0aW9uID0gc2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogXCJObyBDaGFwdGVyXCIsIHZhbHVlOiBcIlwiIH0pO1xuXHRcdFxuXHRcdGZvciAoY29uc3QgY2hhcHRlciBvZiB0aGlzLmNoYXB0ZXJzLnNvcnQoKGEsIGIpID0+IGEubnVtYmVyIC0gYi5udW1iZXIpKSB7XG5cdFx0XHRjb25zdCBvcHRpb24gPSBzZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwge1xuXHRcdFx0XHR0ZXh0OiBgQ2hhcHRlciAke2NoYXB0ZXIubnVtYmVyfTogJHtjaGFwdGVyLnRpdGxlfWAsXG5cdFx0XHRcdHZhbHVlOiBjaGFwdGVyLmlkLFxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoc2NlbmUuY2hhcHRlcl9pZCA9PT0gY2hhcHRlci5pZCkge1xuXHRcdFx0XHRvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICghc2NlbmUuY2hhcHRlcl9pZCkge1xuXHRcdFx0bm9DaGFwdGVyT3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3QgbW92ZUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIk1vdmVcIixcblx0XHRcdGNsczogXCJtb2QtY3RhXCIsXG5cdFx0fSk7XG5cdFx0bW92ZUJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0Y29uc3Qgc2VsZWN0ZWRDaGFwdGVySWQgPSBzZWxlY3QudmFsdWUgfHwgbnVsbDtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5tb3ZlU2NlbmUoc2NlbmUuaWQsIHNlbGVjdGVkQ2hhcHRlcklkKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiU2NlbmUgbW92ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBtb3ZlIHNjZW5lXCI7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yTWVzc2FnZX1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KTtcblx0XHRjYW5jZWxCdXR0b24ub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRhc3luYyBzaG93TW92ZUJlYXRNb2RhbChiZWF0OiBCZWF0KSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIk1vdmUgQmVhdFwiKTtcblxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBgTW92ZSBiZWF0IFwiJHtiZWF0LnR5cGV9XCIgdG86YCB9KTtcblxuXHRcdGNvbnN0IHNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLW1vdmUtc2VsZWN0XCIgfSk7XG5cdFx0XG5cdFx0Ly8gR3JvdXAgc2NlbmVzIGJ5IGNoYXB0ZXIgZm9yIGJldHRlciBVWFxuXHRcdGZvciAoY29uc3QgY2hhcHRlciBvZiB0aGlzLmNoYXB0ZXJzLnNvcnQoKGEsIGIpID0+IGEubnVtYmVyIC0gYi5udW1iZXIpKSB7XG5cdFx0XHRjb25zdCBjaGFwdGVyU2NlbmVzID0gdGhpcy5zY2VuZXNcblx0XHRcdFx0LmZpbHRlcihzID0+IHMuY2hhcHRlcl9pZCA9PT0gY2hhcHRlci5pZClcblx0XHRcdFx0LnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pO1xuXHRcdFx0XG5cdFx0XHRpZiAoY2hhcHRlclNjZW5lcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IG9wdGdyb3VwID0gc2VsZWN0LmNyZWF0ZUVsKFwib3B0Z3JvdXBcIik7XG5cdFx0XHRcdG9wdGdyb3VwLmxhYmVsID0gYENoYXB0ZXIgJHtjaGFwdGVyLm51bWJlcn06ICR7Y2hhcHRlci50aXRsZX1gO1xuXHRcdFx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIGNoYXB0ZXJTY2VuZXMpIHtcblx0XHRcdFx0XHRjb25zdCBvcHRpb24gPSBvcHRncm91cC5jcmVhdGVFbChcIm9wdGlvblwiLCB7XG5cdFx0XHRcdFx0XHR0ZXh0OiBgU2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lLmdvYWwgfHwgXCJVbnRpdGxlZFwifWAsXG5cdFx0XHRcdFx0XHR2YWx1ZTogc2NlbmUuaWQsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0aWYgKGJlYXQuc2NlbmVfaWQgPT09IHNjZW5lLmlkKSB7XG5cdFx0XHRcdFx0XHRvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEFkZCBvcnBoYW4gc2NlbmVzXG5cdFx0Y29uc3Qgb3JwaGFuU2NlbmVzID0gdGhpcy5zY2VuZXMuZmlsdGVyKHMgPT4gIXMuY2hhcHRlcl9pZCk7XG5cdFx0aWYgKG9ycGhhblNjZW5lcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCBvcHRncm91cCA9IHNlbGVjdC5jcmVhdGVFbChcIm9wdGdyb3VwXCIpO1xuXHRcdFx0b3B0Z3JvdXAubGFiZWwgPSBcIk5vIENoYXB0ZXJcIjtcblx0XHRcdGZvciAoY29uc3Qgc2NlbmUgb2Ygb3JwaGFuU2NlbmVzLnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pKSB7XG5cdFx0XHRcdGNvbnN0IG9wdGlvbiA9IG9wdGdyb3VwLmNyZWF0ZUVsKFwib3B0aW9uXCIsIHtcblx0XHRcdFx0XHR0ZXh0OiBgU2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lLmdvYWwgfHwgXCJVbnRpdGxlZFwifWAsXG5cdFx0XHRcdFx0dmFsdWU6IHNjZW5lLmlkLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKGJlYXQuc2NlbmVfaWQgPT09IHNjZW5lLmlkKSB7XG5cdFx0XHRcdFx0b3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBtb3ZlQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiTW92ZVwiLFxuXHRcdFx0Y2xzOiBcIm1vZC1jdGFcIixcblx0XHR9KTtcblx0XHRtb3ZlQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRjb25zdCBzZWxlY3RlZFNjZW5lSWQgPSBzZWxlY3QudmFsdWU7XG5cdFx0XHRpZiAoIXNlbGVjdGVkU2NlbmVJZCkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiUGxlYXNlIHNlbGVjdCBhIHNjZW5lXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQubW92ZUJlYXQoYmVhdC5pZCwgc2VsZWN0ZWRTY2VuZUlkKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQmVhdCBtb3ZlZCBzdWNjZXNzZnVsbHlcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIG1vdmUgYmVhdFwiO1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSk7XG5cdFx0Y2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0cmVuZGVyQ29udGVudHNUYWIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xuXG5cdFx0aWYgKHRoaXMuY29udGVudEJsb2Nrcy5sZW5ndGggPT09IDApIHtcblx0XHRcdHRoaXMucmVuZGVyRW1wdHlDYXJkKGNvbnRhaW5lciwge1xuXHRcdFx0XHRpY29uOiBcImZpbGUtdGV4dFwiLFxuXHRcdFx0XHR0aXRsZTogXCJObyBjb250ZW50IHlldFwiLFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJBZGQgY29udGVudCB0byBjaGFwdGVycywgc2NlbmVzIG9yIGJlYXRzIHRvIHNlZSBpdCBvcmdhbml6ZWQgaGVyZS5cIixcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEdyb3VwIGNvbnRlbnQgYmxvY2tzIGJ5IHRoZWlyIHJlZmVyZW5jZXMgKGNoYXB0ZXIsIHNjZW5lLCBiZWF0KVxuXHRcdGNvbnN0IGNvbnRlbnRzQnlDaGFwdGVyID0gbmV3IE1hcDxzdHJpbmcsIENvbnRlbnRCbG9ja1tdPigpO1xuXHRcdGNvbnN0IGNvbnRlbnRzQnlTY2VuZSA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2tbXT4oKTtcblx0XHRjb25zdCBjb250ZW50c0J5QmVhdCA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2tbXT4oKTtcblx0XHRjb25zdCBvcnBoYW5Db250ZW50czogQ29udGVudEJsb2NrW10gPSBbXTtcblxuXHRcdC8vIE9yZ2FuaXplIGNvbnRlbnQgYmxvY2tzIGJ5IHRoZWlyIHJlZmVyZW5jZXNcblx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIHRoaXMuY29udGVudEJsb2Nrcykge1xuXHRcdFx0Y29uc3QgcmVmcyA9IHRoaXMuY29udGVudEJsb2NrUmVmcy5maWx0ZXIociA9PiByLmNvbnRlbnRfYmxvY2tfaWQgPT09IGJsb2NrLmlkKTtcblx0XHRcdFxuXHRcdFx0aWYgKHJlZnMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdC8vIENvbnRlbnQgYmxvY2sgd2l0aG91dCByZWZlcmVuY2VzIChvcnBoYW4pXG5cdFx0XHRcdG9ycGhhbkNvbnRlbnRzLnB1c2goYmxvY2spO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2hlY2sgZWFjaCByZWZlcmVuY2UgdG8gY2F0ZWdvcml6ZVxuXHRcdFx0Zm9yIChjb25zdCByZWYgb2YgcmVmcykge1xuXHRcdFx0XHRpZiAocmVmLmVudGl0eV90eXBlID09PSBcImNoYXB0ZXJcIikge1xuXHRcdFx0XHRcdGlmICghY29udGVudHNCeUNoYXB0ZXIuaGFzKHJlZi5lbnRpdHlfaWQpKSB7XG5cdFx0XHRcdFx0XHRjb250ZW50c0J5Q2hhcHRlci5zZXQocmVmLmVudGl0eV9pZCwgW10pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb250ZW50c0J5Q2hhcHRlci5nZXQocmVmLmVudGl0eV9pZCkhLnB1c2goYmxvY2spO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHJlZi5lbnRpdHlfdHlwZSA9PT0gXCJzY2VuZVwiKSB7XG5cdFx0XHRcdFx0aWYgKCFjb250ZW50c0J5U2NlbmUuaGFzKHJlZi5lbnRpdHlfaWQpKSB7XG5cdFx0XHRcdFx0XHRjb250ZW50c0J5U2NlbmUuc2V0KHJlZi5lbnRpdHlfaWQsIFtdKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29udGVudHNCeVNjZW5lLmdldChyZWYuZW50aXR5X2lkKSEucHVzaChibG9jayk7XG5cdFx0XHRcdH0gZWxzZSBpZiAocmVmLmVudGl0eV90eXBlID09PSBcImJlYXRcIikge1xuXHRcdFx0XHRcdGlmICghY29udGVudHNCeUJlYXQuaGFzKHJlZi5lbnRpdHlfaWQpKSB7XG5cdFx0XHRcdFx0XHRjb250ZW50c0J5QmVhdC5zZXQocmVmLmVudGl0eV9pZCwgW10pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb250ZW50c0J5QmVhdC5nZXQocmVmLmVudGl0eV9pZCkhLnB1c2goYmxvY2spO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblxuXHRcdC8vIFJlbmRlciBjb250ZW50cyBncm91cGVkIGJ5IGNoYXB0ZXIgKHdpdGggc2NlbmVzIGFuZCBiZWF0cyBhcyBzdWItZ3JvdXBzKVxuXHRcdGZvciAoY29uc3QgY2hhcHRlciBvZiB0aGlzLmNoYXB0ZXJzLnNvcnQoKGEsIGIpID0+IGEubnVtYmVyIC0gYi5udW1iZXIpKSB7XG5cdFx0XHRjb25zdCBjaGFwdGVyQ29udGVudHMgPSBjb250ZW50c0J5Q2hhcHRlci5nZXQoY2hhcHRlci5pZCkgfHwgW107XG5cdFx0XHRjb25zdCBjaGFwdGVyU2NlbmVzID0gdGhpcy5zY2VuZXMuZmlsdGVyKHMgPT4gcy5jaGFwdGVyX2lkID09PSBjaGFwdGVyLmlkKVxuXHRcdFx0XHQuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSk7XG5cblx0XHRcdC8vIEFsd2F5cyBjcmVhdGUgY2hhcHRlciBncm91cCB0byBhbGxvdyBhZGRpbmcgY29udGVudFxuXHRcdFx0aWYgKGNoYXB0ZXJDb250ZW50cy5sZW5ndGggPiAwIHx8IGNoYXB0ZXJTY2VuZXMubGVuZ3RoID4gMCB8fCBjaGFwdGVyU2NlbmVzLnNvbWUocyA9PiB7XG5cdFx0XHRcdGNvbnN0IHNjZW5lQ29udGVudHMgPSBjb250ZW50c0J5U2NlbmUuZ2V0KHMuaWQpIHx8IFtdO1xuXHRcdFx0XHRjb25zdCBzY2VuZUJlYXRzID0gdGhpcy5iZWF0cy5maWx0ZXIoYiA9PiBiLnNjZW5lX2lkID09PSBzLmlkKTtcblx0XHRcdFx0Y29uc3QgYmVhdENvbnRlbnRzID0gc2NlbmVCZWF0cy5mbGF0TWFwKGIgPT4gY29udGVudHNCeUJlYXQuZ2V0KGIuaWQpIHx8IFtdKTtcblx0XHRcdFx0cmV0dXJuIHNjZW5lQ29udGVudHMubGVuZ3RoID4gMCB8fCBiZWF0Q29udGVudHMubGVuZ3RoID4gMDtcblx0XHRcdH0pKSB7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJHcm91cCA9IGxpc3QuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1jaGFwdGVyLWdyb3VwXCIgfSk7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJIZWFkZXIgPSBjaGFwdGVyR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1jaGFwdGVyLWdyb3VwLWhlYWRlciBzdG9yeS1lbmdpbmUtaG92ZXJhYmxlLWhlYWRlclwiIH0pO1xuXHRcdFx0XHRjaGFwdGVySGVhZGVyLmNyZWF0ZUVsKFwiaDJcIiwgeyBcblx0XHRcdFx0XHR0ZXh0OiBgQ2hhcHRlciAke2NoYXB0ZXIubnVtYmVyfTogJHtjaGFwdGVyLnRpdGxlfWAgXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQWRkIENvbnRlbnQgYnV0dG9ucyBvbiBob3ZlclxuXHRcdFx0XHRjb25zdCBjaGFwdGVySGVhZGVyQWN0aW9ucyA9IGNoYXB0ZXJIZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ob3Zlci1oZWFkZXItYWN0aW9uc1wiIH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gVGV4dCBidXR0b25cblx0XHRcdFx0Y29uc3QgdGV4dEJ0biA9IGNoYXB0ZXJIZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgXG5cdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1hZGQtY29udGVudC1idG4gc3RvcnktZW5naW5lLWFkZC10ZXh0LWJ0blwiLFxuXHRcdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiQWRkIHRleHQgY29udGVudFwiIH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHNldEljb24odGV4dEJ0biwgXCJmaWxlLXRleHRcIik7XG5cdFx0XHRcdHRleHRCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLmNyZWF0ZUNvbnRlbnRGb3JFbnRpdHkoXCJjaGFwdGVyXCIsIGNoYXB0ZXIuaWQsIGNoYXB0ZXIuaWQsIFwidGV4dFwiKTtcblx0XHRcdFx0fTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIEltYWdlIGJ1dHRvblxuXHRcdFx0XHRjb25zdCBpbWFnZUJ0biA9IGNoYXB0ZXJIZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgXG5cdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1hZGQtY29udGVudC1idG4gc3RvcnktZW5naW5lLWFkZC1pbWFnZS1idG5cIixcblx0XHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkFkZCBpbWFnZSBjb250ZW50XCIgfVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0c2V0SWNvbihpbWFnZUJ0biwgXCJpbWFnZVwiKTtcblx0XHRcdFx0aW1hZ2VCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLmNyZWF0ZUNvbnRlbnRGb3JFbnRpdHkoXCJjaGFwdGVyXCIsIGNoYXB0ZXIuaWQsIGNoYXB0ZXIuaWQsIFwiaW1hZ2VcIik7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Y29uc3QgY2hhcHRlckNvbnRlbnQgPSBjaGFwdGVyR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1jaGFwdGVyLWdyb3VwLWNvbnRlbnRcIiB9KTtcblxuXHRcdFx0XHQvLyBSZW5kZXIgY2hhcHRlci1sZXZlbCBjb250ZW50cyAoYWx3YXlzIHNob3cgZ3JvdXAgdG8gYWxsb3cgYWRkaW5nIGNvbnRlbnQpXG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJDb250ZW50c0dyb3VwID0gY2hhcHRlckNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cFwiIH0pO1xuXHRcdFx0XHRjb25zdCBjaGFwdGVyQ29udGVudHNIZWFkZXIgPSBjaGFwdGVyQ29udGVudHNHcm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwLWhlYWRlclwiIH0pO1xuXHRcdFx0XHRjaGFwdGVyQ29udGVudHNIZWFkZXIuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiQ2hhcHRlciBDb250ZW50c1wiIH0pO1xuXG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJDb250ZW50c0l0ZW1zID0gY2hhcHRlckNvbnRlbnRzR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1pdGVtc1wiIH0pO1xuXHRcdFx0XHRpZiAoY2hhcHRlckNvbnRlbnRzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIGNoYXB0ZXJDb250ZW50cykge1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50SXRlbShjaGFwdGVyQ29udGVudHNJdGVtcywgYmxvY2ssIFwiY2hhcHRlclwiLCBjaGFwdGVyLmlkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y2hhcHRlckNvbnRlbnRzSXRlbXMuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBjb250ZW50IGluIHRoaXMgY2hhcHRlci5cIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1lbXB0eS1jb250ZW50XCIgfSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBSZW5kZXIgc2NlbmVzIGFzIHN1Yi1ncm91cHMgd2l0aGluIHRoZSBjaGFwdGVyXG5cdFx0XHRcdGZvciAoY29uc3Qgc2NlbmUgb2YgY2hhcHRlclNjZW5lcykge1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lQ29udGVudHMgPSBjb250ZW50c0J5U2NlbmUuZ2V0KHNjZW5lLmlkKSB8fCBbXTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUJlYXRzID0gdGhpcy5iZWF0cy5maWx0ZXIoYiA9PiBiLnNjZW5lX2lkID09PSBzY2VuZS5pZClcblx0XHRcdFx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKTtcblx0XHRcdFx0XHRjb25zdCBiZWF0Q29udGVudHMgPSBzY2VuZUJlYXRzLmZsYXRNYXAoYiA9PiBjb250ZW50c0J5QmVhdC5nZXQoYi5pZCkgfHwgW10pO1xuXG5cdFx0XHRcdFx0Ly8gQWx3YXlzIHJlbmRlciBzY2VuZSBncm91cCB0byBhbGxvdyBhZGRpbmcgY29udGVudFxuXHRcdFx0XHRcdGNvbnN0IHNjZW5lR3JvdXAgPSBjaGFwdGVyQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwXCIgfSk7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVIZWFkZXIgPSBzY2VuZUdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtaGVhZGVyIHN0b3J5LWVuZ2luZS1ob3ZlcmFibGUtaGVhZGVyXCIgfSk7XG5cdFx0XHRcdFx0c2NlbmVIZWFkZXIuY3JlYXRlRWwoXCJoM1wiLCB7IFxuXHRcdFx0XHRcdFx0dGV4dDogYFNjZW5lICR7c2NlbmUub3JkZXJfbnVtfTogJHtzY2VuZS5nb2FsIHx8IFwiVW50aXRsZWRcIn1gIFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIEFkZCBDb250ZW50IGJ1dHRvbnMgb24gaG92ZXJcblx0XHRcdFx0XHRjb25zdCBzY2VuZUhlYWRlckFjdGlvbnMgPSBzY2VuZUhlYWRlci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWhvdmVyLWhlYWRlci1hY3Rpb25zXCIgfSk7XG5cdFx0XHRcdFx0Y29uc3QgY2hhcHRlcklkID0gc2NlbmUuY2hhcHRlcl9pZCB8fCAodGhpcy5jaGFwdGVycy5sZW5ndGggPiAwID8gdGhpcy5jaGFwdGVyc1swXS5pZCA6IFwiXCIpO1xuXHRcdFx0XHRcdGlmIChjaGFwdGVySWQpIHtcblx0XHRcdFx0XHRcdC8vIFRleHQgYnV0dG9uXG5cdFx0XHRcdFx0XHRjb25zdCB0ZXh0QnRuID0gc2NlbmVIZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgXG5cdFx0XHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtYWRkLWNvbnRlbnQtYnRuIHN0b3J5LWVuZ2luZS1hZGQtdGV4dC1idG5cIixcblx0XHRcdFx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJBZGQgdGV4dCBjb250ZW50XCIgfVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRzZXRJY29uKHRleHRCdG4sIFwiZmlsZS10ZXh0XCIpO1xuXHRcdFx0XHRcdFx0dGV4dEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmNyZWF0ZUNvbnRlbnRGb3JFbnRpdHkoXCJzY2VuZVwiLCBzY2VuZS5pZCwgY2hhcHRlcklkLCBcInRleHRcIik7XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvLyBJbWFnZSBidXR0b25cblx0XHRcdFx0XHRcdGNvbnN0IGltYWdlQnRuID0gc2NlbmVIZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgXG5cdFx0XHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtYWRkLWNvbnRlbnQtYnRuIHN0b3J5LWVuZ2luZS1hZGQtaW1hZ2UtYnRuXCIsXG5cdFx0XHRcdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiQWRkIGltYWdlIGNvbnRlbnRcIiB9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdHNldEljb24oaW1hZ2VCdG4sIFwiaW1hZ2VcIik7XG5cdFx0XHRcdFx0XHRpbWFnZUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmNyZWF0ZUNvbnRlbnRGb3JFbnRpdHkoXCJzY2VuZVwiLCBzY2VuZS5pZCwgY2hhcHRlcklkLCBcImltYWdlXCIpO1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjb25zdCBzY2VuZUl0ZW1zID0gc2NlbmVHcm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwLWl0ZW1zXCIgfSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gU2NlbmUtbGV2ZWwgY29udGVudHNcblx0XHRcdFx0XHRpZiAoc2NlbmVDb250ZW50cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIHNjZW5lQ29udGVudHMpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50SXRlbShzY2VuZUl0ZW1zLCBibG9jaywgXCJzY2VuZVwiLCBzY2VuZS5pZCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNjZW5lSXRlbXMuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBjb250ZW50IGluIHRoaXMgc2NlbmUuXCIsIGNsczogXCJzdG9yeS1lbmdpbmUtZW1wdHktY29udGVudFwiIH0pO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIEJlYXQtbGV2ZWwgY29udGVudHNcblx0XHRcdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2Ygc2NlbmVCZWF0cykge1xuXHRcdFx0XHRcdFx0Y29uc3QgYmVhdENvbnRlbnRzID0gY29udGVudHNCeUJlYXQuZ2V0KGJlYXQuaWQpIHx8IFtdO1xuXHRcdFx0XHRcdFx0Y29uc3QgYmVhdFN1Ykdyb3VwID0gc2NlbmVJdGVtcy5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWJlYXQtc3ViZ3JvdXBcIiB9KTtcblx0XHRcdFx0XHRcdGNvbnN0IGJlYXRTdWJHcm91cFRpdGxlID0gYmVhdFN1Ykdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtYmVhdC1zdWJncm91cC10aXRsZS1jb250YWluZXIgc3RvcnktZW5naW5lLWhvdmVyYWJsZS1oZWFkZXJcIiB9KTtcblx0XHRcdFx0XHRcdGJlYXRTdWJHcm91cFRpdGxlLmNyZWF0ZUVsKFwiaDRcIiwge1xuXHRcdFx0XHRcdFx0XHR0ZXh0OiBgQmVhdCAke2JlYXQub3JkZXJfbnVtfTogJHtiZWF0LnR5cGV9YCxcblx0XHRcdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1iZWF0LXN1Ymdyb3VwLXRpdGxlXCIsXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRcdC8vIEFkZCBDb250ZW50IGJ1dHRvbnMgb24gaG92ZXJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBiZWF0SGVhZGVyQWN0aW9ucyA9IGJlYXRTdWJHcm91cFRpdGxlLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaG92ZXItaGVhZGVyLWFjdGlvbnNcIiB9KTtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBiZWF0Q2hhcHRlcklkID0gc2NlbmUuY2hhcHRlcl9pZCB8fCAodGhpcy5jaGFwdGVycy5sZW5ndGggPiAwID8gdGhpcy5jaGFwdGVyc1swXS5pZCA6IFwiXCIpO1xuXHRcdFx0XHRcdFx0XHRcdGlmIChiZWF0Q2hhcHRlcklkKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBUZXh0IGJ1dHRvblxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgdGV4dEJ0biA9IGJlYXRIZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtYWRkLWNvbnRlbnQtYnRuIHN0b3J5LWVuZ2luZS1hZGQtdGV4dC1idG5cIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJBZGQgdGV4dCBjb250ZW50XCIgfVxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRJY29uKHRleHRCdG4sIFwiZmlsZS10ZXh0XCIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGV4dEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmNyZWF0ZUNvbnRlbnRGb3JFbnRpdHkoXCJiZWF0XCIsIGJlYXQuaWQsIGJlYXRDaGFwdGVySWQsIFwidGV4dFwiKTtcblx0XHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEltYWdlIGJ1dHRvblxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgaW1hZ2VCdG4gPSBiZWF0SGVhZGVyQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWFkZC1jb250ZW50LWJ0biBzdG9yeS1lbmdpbmUtYWRkLWltYWdlLWJ0blwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkFkZCBpbWFnZSBjb250ZW50XCIgfVxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRzZXRJY29uKGltYWdlQnRuLCBcImltYWdlXCIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0aW1hZ2VCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5jcmVhdGVDb250ZW50Rm9yRW50aXR5KFwiYmVhdFwiLCBiZWF0LmlkLCBiZWF0Q2hhcHRlcklkLCBcImltYWdlXCIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGlmIChiZWF0Q29udGVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIGJlYXRDb250ZW50cykge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudEl0ZW0oYmVhdFN1Ykdyb3VwLCBibG9jaywgXCJiZWF0XCIsIGJlYXQuaWQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRiZWF0U3ViR3JvdXAuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBjb250ZW50IGluIHRoaXMgYmVhdC5cIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1lbXB0eS1iZWF0LWNvbnRlbnRcIiB9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW5kZXIgb3JwaGFuIGNvbnRlbnRzIChubyBjaGFwdGVyL3NjZW5lL2JlYXQpXG5cdFx0Ly8gU2hvdyBcIldpdGhvdXQgQ2hhcHRlclwiIHNlY3Rpb24gaWYgbm8gY2hhcHRlcnMgZXhpc3QgT1IgaWYgdGhlcmUgYXJlIG9ycGhhbiBjb250ZW50cy9zY2VuZXNcblx0XHRpZiAodGhpcy5jaGFwdGVycy5sZW5ndGggPT09IDAgfHwgb3JwaGFuQ29udGVudHMubGVuZ3RoID4gMCB8fCB0aGlzLnNjZW5lcy5zb21lKHMgPT4gIXMuY2hhcHRlcl9pZCkpIHtcblx0XHRcdGNvbnN0IG9ycGhhbkdyb3VwID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWNoYXB0ZXItZ3JvdXBcIiB9KTtcblx0XHRcdGNvbnN0IG9ycGhhbkhlYWRlciA9IG9ycGhhbkdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtY2hhcHRlci1ncm91cC1oZWFkZXJcIiB9KTtcblx0XHRcdG9ycGhhbkhlYWRlci5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJXaXRob3V0IENoYXB0ZXJcIiB9KTtcblxuXHRcdFx0Y29uc3Qgb3JwaGFuQ29udGVudCA9IG9ycGhhbkdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtY2hhcHRlci1ncm91cC1jb250ZW50XCIgfSk7XG5cblx0XHRcdC8vIE9ycGhhbiBzY2VuZXNcblx0XHRcdGNvbnN0IG9ycGhhblNjZW5lcyA9IHRoaXMuc2NlbmVzLmZpbHRlcihzID0+ICFzLmNoYXB0ZXJfaWQpXG5cdFx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKTtcblxuXHRcdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBvcnBoYW5TY2VuZXMpIHtcblx0XHRcdFx0Y29uc3Qgc2NlbmVDb250ZW50cyA9IGNvbnRlbnRzQnlTY2VuZS5nZXQoc2NlbmUuaWQpIHx8IFtdO1xuXHRcdFx0XHRjb25zdCBzY2VuZUJlYXRzID0gdGhpcy5iZWF0cy5maWx0ZXIoYiA9PiBiLnNjZW5lX2lkID09PSBzY2VuZS5pZClcblx0XHRcdFx0XHQuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSk7XG5cdFx0XHRcdGNvbnN0IGJlYXRDb250ZW50cyA9IHNjZW5lQmVhdHMuZmxhdE1hcChiID0+IGNvbnRlbnRzQnlCZWF0LmdldChiLmlkKSB8fCBbXSk7XG5cblx0XHRcdFx0Ly8gQWx3YXlzIHJlbmRlciBzY2VuZSBncm91cCB0byBhbGxvdyBhZGRpbmcgY29udGVudFxuXHRcdFx0XHRjb25zdCBzY2VuZUdyb3VwID0gb3JwaGFuQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwXCIgfSk7XG5cdFx0XHRcdGNvbnN0IHNjZW5lSGVhZGVyID0gc2NlbmVHcm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwLWhlYWRlciBzdG9yeS1lbmdpbmUtaG92ZXJhYmxlLWhlYWRlclwiIH0pO1xuXHRcdFx0XHRzY2VuZUhlYWRlci5jcmVhdGVFbChcImgzXCIsIHsgXG5cdFx0XHRcdFx0dGV4dDogYFNjZW5lICR7c2NlbmUub3JkZXJfbnVtfTogJHtzY2VuZS5nb2FsIHx8IFwiVW50aXRsZWRcIn1gIFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIEFkZCBDb250ZW50IGJ1dHRvbnMgb24gaG92ZXJcblx0XHRcdFx0Y29uc3Qgc2NlbmVIZWFkZXJBY3Rpb25zID0gc2NlbmVIZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ob3Zlci1oZWFkZXItYWN0aW9uc1wiIH0pO1xuXHRcdFx0XHRjb25zdCBjaGFwdGVySWQgPSB0aGlzLmNoYXB0ZXJzLmxlbmd0aCA+IDAgPyB0aGlzLmNoYXB0ZXJzWzBdLmlkIDogXCJcIjtcblx0XHRcdFx0aWYgKGNoYXB0ZXJJZCkge1xuXHRcdFx0XHRcdGNvbnN0IGFkZENvbnRlbnRCdG4gPSBzY2VuZUhlYWRlckFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyBcblx0XHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtYWRkLWNvbnRlbnQtYnRuXCIsXG5cdFx0XHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkFkZCBjb250ZW50XCIgfVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHNldEljb24oYWRkQ29udGVudEJ0biwgXCJwbHVzXCIpO1xuXHRcdFx0XHRcdGFkZENvbnRlbnRCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuY3JlYXRlQ29udGVudEZvckVudGl0eShcInNjZW5lXCIsIHNjZW5lLmlkLCBjaGFwdGVySWQpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBzY2VuZUl0ZW1zID0gc2NlbmVHcm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwLWl0ZW1zXCIgfSk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoc2NlbmVDb250ZW50cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBibG9jayBvZiBzY2VuZUNvbnRlbnRzKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlckNvbnRlbnRJdGVtKHNjZW5lSXRlbXMsIGJsb2NrLCBcInNjZW5lXCIsIHNjZW5lLmlkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2NlbmVJdGVtcy5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIGNvbnRlbnQgaW4gdGhpcyBzY2VuZS5cIiB9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBzY2VuZUJlYXRzKSB7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdENvbnRlbnRzID0gY29udGVudHNCeUJlYXQuZ2V0KGJlYXQuaWQpIHx8IFtdO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRTdWJHcm91cCA9IHNjZW5lSXRlbXMuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1iZWF0LXN1Ymdyb3VwXCIgfSk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdFN1Ykdyb3VwVGl0bGUgPSBiZWF0U3ViR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1iZWF0LXN1Ymdyb3VwLXRpdGxlLWNvbnRhaW5lciBzdG9yeS1lbmdpbmUtaG92ZXJhYmxlLWhlYWRlclwiIH0pO1xuXHRcdFx0XHRcdGJlYXRTdWJHcm91cFRpdGxlLmNyZWF0ZUVsKFwiaDRcIiwge1xuXHRcdFx0XHRcdFx0dGV4dDogYEJlYXQgJHtiZWF0Lm9yZGVyX251bX06ICR7YmVhdC50eXBlfWAsXG5cdFx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWJlYXQtc3ViZ3JvdXAtdGl0bGVcIixcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHQvLyBBZGQgQ29udGVudCBidXR0b24gb24gaG92ZXJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBiZWF0SGVhZGVyQWN0aW9ucyA9IGJlYXRTdWJHcm91cFRpdGxlLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaG92ZXItaGVhZGVyLWFjdGlvbnNcIiB9KTtcblx0XHRcdFx0XHRjb25zdCBiZWF0Q2hhcHRlcklkID0gdGhpcy5jaGFwdGVycy5sZW5ndGggPiAwID8gdGhpcy5jaGFwdGVyc1swXS5pZCA6IFwiXCI7XG5cdFx0XHRcdFx0aWYgKGJlYXRDaGFwdGVySWQpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGFkZENvbnRlbnRCdG4gPSBiZWF0SGVhZGVyQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IFxuXHRcdFx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWFkZC1jb250ZW50LWJ0blwiLFxuXHRcdFx0XHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkFkZCBjb250ZW50XCIgfVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRzZXRJY29uKGFkZENvbnRlbnRCdG4sIFwicGx1c1wiKTtcblx0XHRcdFx0XHRcdGFkZENvbnRlbnRCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5jcmVhdGVDb250ZW50Rm9yRW50aXR5KFwiYmVhdFwiLCBiZWF0LmlkLCBiZWF0Q2hhcHRlcklkKTtcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChiZWF0Q29udGVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBibG9jayBvZiBiZWF0Q29udGVudHMpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50SXRlbShiZWF0U3ViR3JvdXAsIGJsb2NrLCBcImJlYXRcIiwgYmVhdC5pZCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGJlYXRTdWJHcm91cC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIGNvbnRlbnQgaW4gdGhpcyBiZWF0LlwiLCBjbHM6IFwic3RvcnktZW5naW5lLWVtcHR5LWJlYXQtY29udGVudFwiIH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBPcnBoYW4gY29udGVudHMgKG5vIHJlZmVyZW5jZXMpXG5cdFx0XHRpZiAob3JwaGFuQ29udGVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRjb25zdCBvcnBoYW5Db250ZW50c0dyb3VwID0gb3JwaGFuQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwXCIgfSk7XG5cdFx0XHRcdGNvbnN0IG9ycGhhbkNvbnRlbnRzSGVhZGVyID0gb3JwaGFuQ29udGVudHNHcm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwLWhlYWRlclwiIH0pO1xuXHRcdFx0XHRvcnBoYW5Db250ZW50c0hlYWRlci5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJXaXRob3V0IFJlZmVyZW5jZVwiIH0pO1xuXG5cdFx0XHRcdGNvbnN0IG9ycGhhbkNvbnRlbnRzSXRlbXMgPSBvcnBoYW5Db250ZW50c0dyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtaXRlbXNcIiB9KTtcblx0XHRcdFx0Zm9yIChjb25zdCBibG9jayBvZiBvcnBoYW5Db250ZW50cykge1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudEl0ZW0ob3JwaGFuQ29udGVudHNJdGVtcywgYmxvY2ssIG51bGwsIG51bGwpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgbG9hZFN0b3J5Q2hhcmFjdGVycygpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5IHx8ICF0aGlzLmN1cnJlbnRTdG9yeS53b3JsZF9pZCkge1xuXHRcdFx0dGhpcy5zdG9yeUNoYXJhY3RlcnMgPSBbXTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0dGhpcy5zdG9yeUNoYXJhY3RlcnMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q2hhcmFjdGVycyh0aGlzLmN1cnJlbnRTdG9yeS53b3JsZF9pZCk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgbG9hZGluZyBzdG9yeSBjaGFyYWN0ZXJzOlwiLCBlcnIpO1xuXHRcdFx0dGhpcy5zdG9yeUNoYXJhY3RlcnMgPSBbXTtcblx0XHRcdG5ldyBOb3RpY2UoYEVycm9yIGxvYWRpbmcgY2hhcmFjdGVyczogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHR9XG5cdH1cblxuXHRyZW5kZXJTdG9yeUNoYXJhY3RlcnNUYWIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xuXG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeT8ud29ybGRfaWQpIHtcblx0XHRcdHRoaXMucmVuZGVyRW1wdHlDYXJkKGNvbnRhaW5lciwge1xuXHRcdFx0XHRpY29uOiBcImdsb2JlXCIsXG5cdFx0XHRcdHRpdGxlOiBcIk5vIHdvcmxkIGxpbmtlZFwiLFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJMaW5rIHRoaXMgc3RvcnkgdG8gYSB3b3JsZCB0byB2aWV3IGl0cyBjaGFyYWN0ZXJzLlwiLFxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuc3RvcnlDaGFyYWN0ZXJzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dGhpcy5yZW5kZXJFbXB0eUNhcmQoY29udGFpbmVyLCB7XG5cdFx0XHRcdGljb246IFwidXNlclwiLFxuXHRcdFx0XHR0aXRsZTogXCJObyBjaGFyYWN0ZXJzIGluIHRoaXMgd29ybGRcIixcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQ3JlYXRlIHRoZSBmaXJzdCBjaGFyYWN0ZXIgbGlua2VkIHRvIHRoaXMgc3RvcnkncyB3b3JsZC5cIixcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBsaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbGlzdFwiIH0pO1xuXHRcdFx0Zm9yIChjb25zdCBjaGFyYWN0ZXIgb2YgdGhpcy5zdG9yeUNoYXJhY3RlcnMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdFx0Y29uc3QgaXRlbSA9IGxpc3QuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtXCIgfSk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zdCB0aXRsZURpdiA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiLCB0ZXh0OiBjaGFyYWN0ZXIubmFtZSB9KTtcblx0XHRcdFx0dGl0bGVEaXYuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG5cdFx0XHRcdHRpdGxlRGl2Lm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5zaG93Q2hhcmFjdGVyRGV0YWlscyhjaGFyYWN0ZXIpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc3QgbWV0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIgfSk7XG5cdFx0XHRcdGlmIChjaGFyYWN0ZXIuZGVzY3JpcHRpb24pIHtcblx0XHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IFxuXHRcdFx0XHRcdFx0dGV4dDogY2hhcmFjdGVyLmRlc2NyaXB0aW9uLnN1YnN0cmluZygwLCA4MCkgKyAoY2hhcmFjdGVyLmRlc2NyaXB0aW9uLmxlbmd0aCA+IDgwID8gXCIuLi5cIiA6IFwiXCIpIFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgYWN0aW9ucyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtLWFjdGlvbnNcIiB9KTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIFZpZXcgZGV0YWlscyBidXR0b25cblx0XHRcdFx0Y29uc3Qgdmlld0J0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIlZpZXcgY2hhcmFjdGVyXCIgfVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0c2V0SWNvbih2aWV3QnRuLCBcImV5ZVwiKTtcblx0XHRcdFx0dmlld0J0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuc2hvd0NoYXJhY3RlckRldGFpbHMoY2hhcmFjdGVyKTtcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBBY3Rpb25zIGhhbmRsZWQgYnkgc3RvcnkgYWN0aW9ucyBiYXJcblx0fVxuXG5cdHNob3dDcmVhdGVDaGFyYWN0ZXJNb2RhbEZvclN0b3J5KCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50U3Rvcnk/LndvcmxkX2lkKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiVGhpcyBzdG9yeSBpcyBub3QgbGlua2VkIHRvIGEgd29ybGRcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJDcmVhdGUgQ2hhcmFjdGVyXCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSBcIlwiO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IFwiXCI7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IG5hbWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIgfSk7XG5cdFx0bmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBjcmVhdGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNyZWF0ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdGNyZWF0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUNoYXJhY3Rlcih0aGlzLmN1cnJlbnRTdG9yeSEud29ybGRfaWQhLCB7IFxuXHRcdFx0XHRcdG5hbWU6IG5hbWUudHJpbSgpLCBcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRTdG9yeUNoYXJhY3RlcnMoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJDaGFyYWN0ZXIgY3JlYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0bmFtZUlucHV0LmZvY3VzKCk7XG5cdH1cblxuXHRyZW5kZXJDb250ZW50SXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCBjb250ZW50QmxvY2s6IENvbnRlbnRCbG9jaywgZW50aXR5VHlwZTogc3RyaW5nIHwgbnVsbCwgZW50aXR5SWQ6IHN0cmluZyB8IG51bGwpIHtcblx0XHRjb25zdCBpdGVtID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbSBzdG9yeS1lbmdpbmUtY29udGVudC1pdGVtXCIgfSk7XG5cdFx0XG5cdFx0Ly8gSWNvbiBhbmQgcHJldmlldyBjb250YWluZXJcblx0XHRjb25zdCBpdGVtQ29udGVudCA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1jb250ZW50LWl0ZW0tY29udGVudFwiIH0pO1xuXHRcdFxuXHRcdC8vIFR5cGUgaWNvblxuXHRcdGNvbnN0IGljb25Db250YWluZXIgPSBpdGVtQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWNvbnRlbnQtaWNvblwiIH0pO1xuXHRcdGNvbnN0IGljb25NYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG5cdFx0XHR0ZXh0OiBcImZpbGUtdGV4dFwiLFxuXHRcdFx0aW1hZ2U6IFwiaW1hZ2VcIixcblx0XHRcdHZpZGVvOiBcInZpZGVvXCIsXG5cdFx0XHRhdWRpbzogXCJtdXNpY1wiLFxuXHRcdFx0ZW1iZWQ6IFwiY29kZVwiLFxuXHRcdFx0bGluazogXCJleHRlcm5hbC1saW5rXCIsXG5cdFx0fTtcblx0XHRjb25zdCBpY29uTmFtZSA9IGljb25NYXBbY29udGVudEJsb2NrLnR5cGVdIHx8IFwiZmlsZVwiO1xuXHRcdHNldEljb24oaWNvbkNvbnRhaW5lciwgaWNvbk5hbWUpO1xuXG5cdFx0Ly8gUHJldmlld1xuXHRcdGNvbnN0IHByZXZpZXcgPSBpdGVtQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWNvbnRlbnQtcHJldmlld1wiIH0pO1xuXHRcdGlmIChjb250ZW50QmxvY2sudHlwZSA9PT0gXCJ0ZXh0XCIpIHtcblx0XHRcdGNvbnN0IHRleHRQcmV2aWV3ID0gY29udGVudEJsb2NrLmNvbnRlbnQgfHwgXCJcIjtcblx0XHRcdGNvbnN0IHRydW5jYXRlZCA9IHRleHRQcmV2aWV3Lmxlbmd0aCA+IDEwMCA/IHRleHRQcmV2aWV3LnN1YnN0cmluZygwLCAxMDApICsgXCIuLi5cIiA6IHRleHRQcmV2aWV3O1xuXHRcdFx0cHJldmlldy5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiB0cnVuY2F0ZWQgfSk7XG5cdFx0fSBlbHNlIGlmIChjb250ZW50QmxvY2sudHlwZSA9PT0gXCJpbWFnZVwiKSB7XG5cdFx0XHRjb25zdCBpbWdDb250YWluZXIgPSBwcmV2aWV3LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaW1hZ2UtY29udGFpbmVyXCIgfSk7XG5cdFx0XHRjb25zdCBpbWcgPSBpbWdDb250YWluZXIuY3JlYXRlRWwoXCJpbWdcIiwge1xuXHRcdFx0XHRhdHRyOiB7IHNyYzogY29udGVudEJsb2NrLmNvbnRlbnQgfHwgXCJcIiwgYWx0OiBjb250ZW50QmxvY2subWV0YWRhdGE/LmFsdF90ZXh0IHx8IFwiXCIgfSxcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1jb250ZW50LXRodW1ibmFpbFwiLFxuXHRcdFx0fSk7XG5cdFx0XHRpbWcuc3R5bGUubWF4V2lkdGggPSBcIjEwMHB4XCI7XG5cdFx0XHRpbWcuc3R5bGUubWF4SGVpZ2h0ID0gXCI2MHB4XCI7XG5cdFx0XHRpbWcuc3R5bGUub2JqZWN0Rml0ID0gXCJjb3ZlclwiO1xuXHRcdFx0aW1nLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNHB4XCI7XG5cdFx0XHRcblx0XHRcdC8vIFNob3cgYXR0cmlidXRpb24gaWYgYXZhaWxhYmxlXG5cdFx0XHRpZiAoY29udGVudEJsb2NrLm1ldGFkYXRhPy5hdHRyaWJ1dGlvbikge1xuXHRcdFx0XHRjb25zdCBhdHRyaWJ1dGlvbiA9IGltZ0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXVuc3BsYXNoLWF0dHJpYnV0aW9uXCIgfSk7XG5cdFx0XHRcdGF0dHJpYnV0aW9uLmNyZWF0ZUVsKFwic3BhblwiLCB7IFxuXHRcdFx0XHRcdHRleHQ6IGNvbnRlbnRCbG9jay5tZXRhZGF0YS5hdHRyaWJ1dGlvbixcblx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWF0dHJpYnV0aW9uLXRleHRcIlxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0cHJldmlldy5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBjb250ZW50QmxvY2suY29udGVudCB8fCBcIlwiIH0pO1xuXHRcdH1cblxuXHRcdC8vIE1ldGEgaW5mbyAocmVtb3ZlZCB0eXBlIGRpc3BsYXkgYXMgaWNvbiBhbHJlYWR5IHNob3dzIGl0KVxuXG5cdFx0Ly8gQWN0aW9uc1xuXHRcdGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbS1hY3Rpb25zXCIgfSk7XG5cdFx0XG5cdFx0Y29uc3QgZWRpdEJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJFZGl0IGNvbnRlbnRcIiB9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihlZGl0QnRuLCBcInBlbmNpbFwiKTtcblx0XHRlZGl0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRuZXcgQ29udGVudEJsb2NrTW9kYWwodGhpcy5hcHAsIGFzeW5jICh1cGRhdGVkQ29udGVudEJsb2NrKSA9PiB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUNvbnRlbnRCbG9jayhjb250ZW50QmxvY2suaWQsIHVwZGF0ZWRDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJDb250ZW50IGJsb2NrIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHRcdH1cblx0XHRcdH0sIGNvbnRlbnRCbG9jaywgdGhpcy5wbHVnaW4pLm9wZW4oKTtcblx0XHR9O1xuXG5cdFx0Y29uc3QgbW92ZUJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJNb3ZlIGNvbnRlbnRcIiB9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihtb3ZlQnRuLCBcIm1vdmVcIik7XG5cdFx0bW92ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0YXdhaXQgdGhpcy5zaG93TW92ZUNvbnRlbnRNb2RhbChjb250ZW50QmxvY2ssIGVudGl0eVR5cGUsIGVudGl0eUlkLCBcIm1vdmVcIik7XG5cdFx0fTtcblxuXHRcdGNvbnN0IGxpbmtCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiTGluayBjb250ZW50XCIgfVxuXHRcdH0pO1xuXHRcdHNldEljb24obGlua0J0biwgXCJsaW5rLTJcIik7XG5cdFx0bGlua0J0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0YXdhaXQgdGhpcy5zaG93TW92ZUNvbnRlbnRNb2RhbChjb250ZW50QmxvY2ssIGVudGl0eVR5cGUsIGVudGl0eUlkLCBcImxpbmtcIik7XG5cdFx0fTtcblxuXHRcdGNvbnN0IGRlbGV0ZUJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJEZWxldGUgY29udGVudFwiIH1cblx0XHR9KTtcblx0XHRzZXRJY29uKGRlbGV0ZUJ0biwgXCJ0cmFzaFwiKTtcblx0XHRkZWxldGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmIChjb25maXJtKFwiRGVsZXRlIHRoaXMgY29udGVudCBibG9jaz9cIikpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZGVsZXRlQ29udGVudEJsb2NrKGNvbnRlbnRCbG9jay5pZCk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShcIkNvbnRlbnQgYmxvY2sgZGVsZXRlZFwiKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0YXN5bmMgc2hvd01vdmVDb250ZW50TW9kYWwoY29udGVudEJsb2NrOiBDb250ZW50QmxvY2ssIGN1cnJlbnRFbnRpdHlUeXBlOiBzdHJpbmcgfCBudWxsLCBjdXJyZW50RW50aXR5SWQ6IHN0cmluZyB8IG51bGwsIG1vZGU6IFwibW92ZVwiIHwgXCJsaW5rXCIpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KG1vZGUgPT09IFwibW92ZVwiID8gXCJNb3ZlIENvbnRlbnQgQmxvY2tcIiA6IFwiTGluayBDb250ZW50IEJsb2NrXCIpO1xuXG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IFxuXHRcdFx0dGV4dDogbW9kZSA9PT0gXCJtb3ZlXCIgXG5cdFx0XHRcdD8gYE1vdmUgY29udGVudCBibG9jayB0bzpgIFxuXHRcdFx0XHQ6IGBMaW5rIGNvbnRlbnQgYmxvY2sgdG8gKHdpbGwgYXBwZWFyIGluIGJvdGggcGxhY2VzKTpgIFxuXHRcdH0pO1xuXG5cdFx0Y29uc3Qgc2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtbW92ZS1zZWxlY3RcIiB9KTtcblx0XHRcblx0XHQvLyBBZGQgXCJObyBSZWZlcmVuY2VcIiBvcHRpb25cblx0XHRjb25zdCBub1JlZk9wdGlvbiA9IHNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IFwiTm8gUmVmZXJlbmNlXCIsIHZhbHVlOiBcIlwiIH0pO1xuXHRcdFxuXHRcdC8vIEdyb3VwIGJ5IGNoYXB0ZXJzXG5cdFx0Zm9yIChjb25zdCBjaGFwdGVyIG9mIHRoaXMuY2hhcHRlcnMuc29ydCgoYSwgYikgPT4gYS5udW1iZXIgLSBiLm51bWJlcikpIHtcblx0XHRcdGNvbnN0IG9wdGlvbiA9IHNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7XG5cdFx0XHRcdHRleHQ6IGBDaGFwdGVyICR7Y2hhcHRlci5udW1iZXJ9OiAke2NoYXB0ZXIudGl0bGV9YCxcblx0XHRcdFx0dmFsdWU6IGBjaGFwdGVyOiR7Y2hhcHRlci5pZH1gLFxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoY3VycmVudEVudGl0eVR5cGUgPT09IFwiY2hhcHRlclwiICYmIGN1cnJlbnRFbnRpdHlJZCA9PT0gY2hhcHRlci5pZCkge1xuXHRcdFx0XHRvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEdyb3VwIHNjZW5lcyBieSBjaGFwdGVyXG5cdFx0Zm9yIChjb25zdCBjaGFwdGVyIG9mIHRoaXMuY2hhcHRlcnMuc29ydCgoYSwgYikgPT4gYS5udW1iZXIgLSBiLm51bWJlcikpIHtcblx0XHRcdGNvbnN0IGNoYXB0ZXJTY2VuZXMgPSB0aGlzLnNjZW5lc1xuXHRcdFx0XHQuZmlsdGVyKHMgPT4gcy5jaGFwdGVyX2lkID09PSBjaGFwdGVyLmlkKVxuXHRcdFx0XHQuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSk7XG5cdFx0XHRcblx0XHRcdGlmIChjaGFwdGVyU2NlbmVzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0Y29uc3Qgb3B0Z3JvdXAgPSBzZWxlY3QuY3JlYXRlRWwoXCJvcHRncm91cFwiKTtcblx0XHRcdFx0b3B0Z3JvdXAubGFiZWwgPSBgQ2hhcHRlciAke2NoYXB0ZXIubnVtYmVyfTogJHtjaGFwdGVyLnRpdGxlfSAtIFNjZW5lc2A7XG5cdFx0XHRcdGZvciAoY29uc3Qgc2NlbmUgb2YgY2hhcHRlclNjZW5lcykge1xuXHRcdFx0XHRcdGNvbnN0IG9wdGlvbiA9IG9wdGdyb3VwLmNyZWF0ZUVsKFwib3B0aW9uXCIsIHtcblx0XHRcdFx0XHRcdHRleHQ6IGBTY2VuZSAke3NjZW5lLm9yZGVyX251bX06ICR7c2NlbmUuZ29hbCB8fCBcIlVudGl0bGVkXCJ9YCxcblx0XHRcdFx0XHRcdHZhbHVlOiBgc2NlbmU6JHtzY2VuZS5pZH1gLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmIChjdXJyZW50RW50aXR5VHlwZSA9PT0gXCJzY2VuZVwiICYmIGN1cnJlbnRFbnRpdHlJZCA9PT0gc2NlbmUuaWQpIHtcblx0XHRcdFx0XHRcdG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIG9ycGhhbiBzY2VuZXNcblx0XHRjb25zdCBvcnBoYW5TY2VuZXMgPSB0aGlzLnNjZW5lcy5maWx0ZXIocyA9PiAhcy5jaGFwdGVyX2lkKTtcblx0XHRpZiAob3JwaGFuU2NlbmVzLmxlbmd0aCA+IDApIHtcblx0XHRcdGNvbnN0IG9wdGdyb3VwID0gc2VsZWN0LmNyZWF0ZUVsKFwib3B0Z3JvdXBcIik7XG5cdFx0XHRvcHRncm91cC5sYWJlbCA9IFwiTm8gQ2hhcHRlciAtIFNjZW5lc1wiO1xuXHRcdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBvcnBoYW5TY2VuZXMuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSkpIHtcblx0XHRcdFx0Y29uc3Qgb3B0aW9uID0gb3B0Z3JvdXAuY3JlYXRlRWwoXCJvcHRpb25cIiwge1xuXHRcdFx0XHRcdHRleHQ6IGBTY2VuZSAke3NjZW5lLm9yZGVyX251bX06ICR7c2NlbmUuZ29hbCB8fCBcIlVudGl0bGVkXCJ9YCxcblx0XHRcdFx0XHR2YWx1ZTogYHNjZW5lOiR7c2NlbmUuaWR9YCxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmIChjdXJyZW50RW50aXR5VHlwZSA9PT0gXCJzY2VuZVwiICYmIGN1cnJlbnRFbnRpdHlJZCA9PT0gc2NlbmUuaWQpIHtcblx0XHRcdFx0XHRvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gR3JvdXAgYmVhdHMgYnkgc2NlbmVcblx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIHRoaXMuc2NlbmVzLnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pKSB7XG5cdFx0XHRjb25zdCBzY2VuZUJlYXRzID0gdGhpcy5iZWF0c1xuXHRcdFx0XHQuZmlsdGVyKGIgPT4gYi5zY2VuZV9pZCA9PT0gc2NlbmUuaWQpXG5cdFx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKTtcblx0XHRcdFxuXHRcdFx0aWYgKHNjZW5lQmVhdHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRjb25zdCBjaGFwdGVyID0gdGhpcy5jaGFwdGVycy5maW5kKGMgPT4gYy5pZCA9PT0gc2NlbmUuY2hhcHRlcl9pZCk7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJMYWJlbCA9IGNoYXB0ZXIgPyBgQ2hhcHRlciAke2NoYXB0ZXIubnVtYmVyfWAgOiBcIk5vIENoYXB0ZXJcIjtcblx0XHRcdFx0Y29uc3Qgb3B0Z3JvdXAgPSBzZWxlY3QuY3JlYXRlRWwoXCJvcHRncm91cFwiKTtcblx0XHRcdFx0b3B0Z3JvdXAubGFiZWwgPSBgJHtjaGFwdGVyTGFiZWx9ID4gU2NlbmUgJHtzY2VuZS5vcmRlcl9udW19IC0gQmVhdHNgO1xuXHRcdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2Ygc2NlbmVCZWF0cykge1xuXHRcdFx0XHRcdGNvbnN0IG9wdGlvbiA9IG9wdGdyb3VwLmNyZWF0ZUVsKFwib3B0aW9uXCIsIHtcblx0XHRcdFx0XHRcdHRleHQ6IGBCZWF0ICR7YmVhdC5vcmRlcl9udW19OiAke2JlYXQudHlwZX1gLFxuXHRcdFx0XHRcdFx0dmFsdWU6IGBiZWF0OiR7YmVhdC5pZH1gLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmIChjdXJyZW50RW50aXR5VHlwZSA9PT0gXCJiZWF0XCIgJiYgY3VycmVudEVudGl0eUlkID09PSBiZWF0LmlkKSB7XG5cdFx0XHRcdFx0XHRvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICghY3VycmVudEVudGl0eVR5cGUpIHtcblx0XHRcdG5vUmVmT3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3QgYWN0aW9uQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IG1vZGUgPT09IFwibW92ZVwiID8gXCJNb3ZlXCIgOiBcIkxpbmtcIixcblx0XHRcdGNsczogXCJtb2QtY3RhXCIsXG5cdFx0fSk7XG5cdFx0YWN0aW9uQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRjb25zdCBzZWxlY3RlZFZhbHVlID0gc2VsZWN0LnZhbHVlO1xuXHRcdFx0XG5cdFx0XHR0cnkge1xuXHRcdFx0XHQvLyBGaW5kIGN1cnJlbnQgcmVmZXJlbmNlIHRvIGRlbGV0ZSAoaWYgbW92ZSBtb2RlKVxuXHRcdFx0XHRpZiAobW9kZSA9PT0gXCJtb3ZlXCIgJiYgY3VycmVudEVudGl0eVR5cGUgJiYgY3VycmVudEVudGl0eUlkKSB7XG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFJlZiA9IHRoaXMuY29udGVudEJsb2NrUmVmcy5maW5kKFxuXHRcdFx0XHRcdFx0ciA9PiByLmNvbnRlbnRfYmxvY2tfaWQgPT09IGNvbnRlbnRCbG9jay5pZCAmJiBcblx0XHRcdFx0XHRcdHIuZW50aXR5X3R5cGUgPT09IGN1cnJlbnRFbnRpdHlUeXBlICYmIFxuXHRcdFx0XHRcdFx0ci5lbnRpdHlfaWQgPT09IGN1cnJlbnRFbnRpdHlJZFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0aWYgKGN1cnJlbnRSZWYpIHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5kZWxldGVDb250ZW50QW5jaG9yKGN1cnJlbnRSZWYuaWQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIENyZWF0ZSBuZXcgcmVmZXJlbmNlXG5cdFx0XHRcdGlmIChzZWxlY3RlZFZhbHVlKSB7XG5cdFx0XHRcdFx0Y29uc3QgW2VudGl0eVR5cGUsIGVudGl0eUlkXSA9IHNlbGVjdGVkVmFsdWUuc3BsaXQoXCI6XCIpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QW5jaG9yKGNvbnRlbnRCbG9jay5pZCwgZW50aXR5VHlwZSwgZW50aXR5SWQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKG1vZGUgPT09IFwibW92ZVwiID8gXCJDb250ZW50IGJsb2NrIG1vdmVkIHN1Y2Nlc3NmdWxseVwiIDogXCJDb250ZW50IGJsb2NrIGxpbmtlZCBzdWNjZXNzZnVsbHlcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IGBGYWlsZWQgdG8gJHttb2RlfSBjb250ZW50IGJsb2NrYDtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pO1xuXHRcdGNhbmNlbEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdGFzeW5jIGNyZWF0ZUNvbnRlbnRGb3JFbnRpdHkoZW50aXR5VHlwZTogXCJjaGFwdGVyXCIgfCBcInNjZW5lXCIgfCBcImJlYXRcIiwgZW50aXR5SWQ6IHN0cmluZywgY2hhcHRlcklkOiBzdHJpbmcsIGNvbnRlbnRUeXBlOiBcInRleHRcIiB8IFwiaW1hZ2VcIiA9IFwidGV4dFwiKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXHRcdFxuXHRcdGlmICghY2hhcHRlcklkKSB7XG5cdFx0XHRpZiAodGhpcy5jaGFwdGVycy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk5vIGNoYXB0ZXIgYXZhaWxhYmxlLiBQbGVhc2UgY3JlYXRlIGEgY2hhcHRlciBmaXJzdC5cIiwgNTAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGNoYXB0ZXJJZCA9IHRoaXMuY2hhcHRlcnNbMF0uaWQ7XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsY3VsYXRlIG5leHQgb3JkZXJfbnVtIGZvciB0aGlzIGNoYXB0ZXJcblx0XHRjb25zdCBjaGFwdGVyQmxvY2tzID0gdGhpcy5jb250ZW50QmxvY2tzLmZpbHRlcihjYiA9PiB7XG5cdFx0XHRjb25zdCByZWZzID0gdGhpcy5jb250ZW50QmxvY2tSZWZzLmZpbHRlcihyID0+IHIuY29udGVudF9ibG9ja19pZCA9PT0gY2IuaWQgJiYgci5lbnRpdHlfdHlwZSA9PT0gXCJjaGFwdGVyXCIgJiYgci5lbnRpdHlfaWQgPT09IGNoYXB0ZXJJZCk7XG5cdFx0XHRyZXR1cm4gcmVmcy5sZW5ndGggPiAwIHx8IGNiLmNoYXB0ZXJfaWQgPT09IGNoYXB0ZXJJZDtcblx0XHR9KTtcblx0XHRjb25zdCBtYXhPcmRlck51bSA9IGNoYXB0ZXJCbG9ja3MubGVuZ3RoID4gMCBcblx0XHRcdD8gTWF0aC5tYXgoLi4uY2hhcHRlckJsb2Nrcy5tYXAoY2IgPT4gY2Iub3JkZXJfbnVtIHx8IDApKVxuXHRcdFx0OiAwO1xuXHRcdGNvbnN0IG5leHRPcmRlck51bSA9IG1heE9yZGVyTnVtICsgMTtcblxuXHRcdC8vIENyZWF0ZSBpbml0aWFsIGNvbnRlbnQgYmxvY2sgd2l0aCB0aGUgc3BlY2lmaWVkIHR5cGVcblx0XHRjb25zdCBpbml0aWFsQ29udGVudEJsb2NrOiBQYXJ0aWFsPENvbnRlbnRCbG9jaz4gPSB7XG5cdFx0XHR0eXBlOiBjb250ZW50VHlwZSxcblx0XHRcdGtpbmQ6IFwiZmluYWxcIixcblx0XHRcdGNvbnRlbnQ6IFwiXCIsXG5cdFx0XHRtZXRhZGF0YToge30sXG5cdFx0fTtcblxuXHRcdG5ldyBDb250ZW50QmxvY2tNb2RhbCh0aGlzLmFwcCwgYXN5bmMgKGNvbnRlbnRCbG9jaykgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29udGVudEJsb2NrLm9yZGVyX251bSA9IG5leHRPcmRlck51bTtcblx0XHRcdFx0Y29uc3QgY3JlYXRlZCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QmxvY2soY2hhcHRlcklkLCBjb250ZW50QmxvY2spO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihjcmVhdGVkLmlkLCBlbnRpdHlUeXBlLCBlbnRpdHlJZCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkNvbnRlbnQgYmxvY2sgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0dGhyb3cgZXJyO1xuXHRcdFx0fVxuXHRcdH0sIGluaXRpYWxDb250ZW50QmxvY2sgYXMgQ29udGVudEJsb2NrLCB0aGlzLnBsdWdpbikub3BlbigpO1xuXHR9XG5cblx0Ly8gPT09PT09PT09PT09PT09PT09PT0gV29ybGQgVmlldyBNZXRob2RzID09PT09PT09PT09PT09PT09PT09XG5cblx0YXN5bmMgc2hvd1dvcmxkRGV0YWlscyh3b3JsZDogV29ybGQpIHtcblx0XHR0aGlzLmN1cnJlbnRXb3JsZCA9IHdvcmxkO1xuXHRcdHRoaXMudmlld01vZGUgPSBcIndvcmxkLWRldGFpbHNcIjtcblx0XHR0aGlzLndvcmxkVGFiID0gXCJjaGFyYWN0ZXJzXCI7XG5cdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0dGhpcy5yZW5kZXJXb3JsZERldGFpbHMoKTtcblx0fVxuXG5cdGFzeW5jIGxvYWRXb3JsZERhdGEoKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXG5cdFx0dGhpcy5sb2FkaW5nV29ybGREYXRhID0gdHJ1ZTtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy5jaGFyYWN0ZXJzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldENoYXJhY3RlcnModGhpcy5jdXJyZW50V29ybGQuaWQpO1xuXHRcdFx0dGhpcy5sb2NhdGlvbnMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0TG9jYXRpb25zKHRoaXMuY3VycmVudFdvcmxkLmlkKTtcblx0XHRcdHRoaXMuYXJ0aWZhY3RzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldEFydGlmYWN0cyh0aGlzLmN1cnJlbnRXb3JsZC5pZCk7XG5cdFx0XHR0aGlzLmV2ZW50cyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRFdmVudHModGhpcy5jdXJyZW50V29ybGQuaWQpO1xuXHRcdFx0Ly8gVHJhaXRzIGFyZSBnbG9iYWwsIG5vdCBwZXItd29ybGRcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHRoaXMudHJhaXRzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldFRyYWl0cygpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybihcIlRyYWl0cyBub3QgYXZhaWxhYmxlOlwiLCBlcnIpO1xuXHRcdFx0XHR0aGlzLnRyYWl0cyA9IFtdO1xuXHRcdFx0fVxuXHRcdFx0Ly8gQXJjaGV0eXBlcyBhcmUgZ2xvYmFsIHBlciB0ZW5hbnRcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHRoaXMuYXJjaGV0eXBlcyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRBcmNoZXR5cGVzKCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKFwiQXJjaGV0eXBlcyBub3QgYXZhaWxhYmxlOlwiLCBlcnIpO1xuXHRcdFx0XHR0aGlzLmFyY2hldHlwZXMgPSBbXTtcblx0XHRcdH1cblx0XHRcdC8vIEZhY3Rpb25zIGFuZCBMb3JlIGFyZSBwZXItd29ybGRcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHRoaXMuZmFjdGlvbnMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0RmFjdGlvbnModGhpcy5jdXJyZW50V29ybGQuaWQpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybihcIkZhY3Rpb25zIG5vdCBhdmFpbGFibGU6XCIsIGVycik7XG5cdFx0XHRcdHRoaXMuZmFjdGlvbnMgPSBbXTtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdHRoaXMubG9yZXMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0TG9yZXModGhpcy5jdXJyZW50V29ybGQuaWQpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybihcIkxvcmVzIG5vdCBhdmFpbGFibGU6XCIsIGVycik7XG5cdFx0XHRcdHRoaXMubG9yZXMgPSBbXTtcblx0XHRcdH1cblx0XHRcdC8vIFJlbG9hZCB3b3JsZCB0byBnZXQgdGltZV9jb25maWdcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHRoaXMuY3VycmVudFdvcmxkID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldFdvcmxkKHRoaXMuY3VycmVudFdvcmxkLmlkKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gcmVsb2FkIHdvcmxkOlwiLCBlcnIpO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIGxvYWQgd29ybGQgZGF0YVwiO1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHR0aGlzLmxvYWRpbmdXb3JsZERhdGEgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHRyZW5kZXJXb3JsZERldGFpbHMoKSB7XG5cdFx0aWYgKCF0aGlzLmNvbnRlbnRFbCB8fCAhdGhpcy5jdXJyZW50V29ybGQpIHJldHVybjtcblxuXHRcdC8vIFN3aXRjaCB0byBzaWRlYmFyIGxheW91dCBmb3Igd29ybGQgZGV0YWlsIHZpZXdcblx0XHR0aGlzLmNvbnRlbnRFbC5yZW1vdmVDbGFzcyhcInN0b3J5LWVuZ2luZS1saXN0LWxheW91dFwiKTtcblx0XHR0aGlzLmNvbnRlbnRFbC5hZGRDbGFzcyhcInN0b3J5LWVuZ2luZS1zaWRlYmFyLWxheW91dFwiKTtcblxuXHRcdHRoaXMucmVuZGVyV29ybGREZXRhaWxzSGVhZGVyKCk7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblxuXHRcdC8vIFRhYnMgc2VjdGlvblxuXHRcdHRoaXMucmVuZGVyV29ybGRUYWJzKCk7XG5cdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0fVxuXG5cdHJlbmRlcldvcmxkRGV0YWlsc0hlYWRlcigpIHtcblx0XHRpZiAoIXRoaXMuaGVhZGVyRWwgfHwgIXRoaXMuY3VycmVudFdvcmxkKSByZXR1cm47XG5cblx0XHR0aGlzLmhlYWRlckVsLmVtcHR5KCk7XG5cdFx0XG5cdFx0Ly8gTWFpbiBoZWFkZXIgY29udGFpbmVyXG5cdFx0Y29uc3QgaGVhZGVyQ29udGFpbmVyID0gdGhpcy5oZWFkZXJFbC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLWRldGFpbHMtaGVhZGVyXCIgfSk7XG5cdFx0Y29uc3QgaGVhZGVyQ29udGVudCA9IGhlYWRlckNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLWhlYWRlci1jb250ZW50XCIgfSk7XG5cdFx0XG5cdFx0Ly8gVG9wIHJvdzogQmFjayBidXR0b24gKyBBY3Rpb25zXG5cdFx0Y29uc3QgdG9wUm93ID0gaGVhZGVyQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLWhlYWRlci10b3BcIiB9KTtcblx0XHRcblx0XHRjb25zdCBiYWNrQnV0dG9uID0gdG9wUm93LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiXHUyMTkwIEJhY2tcIixcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtYmFjay1idG5cIixcblx0XHR9KTtcblx0XHRiYWNrQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLmN1cnJlbnRXb3JsZCA9IG51bGw7XG5cdFx0XHR0aGlzLnZpZXdNb2RlID0gXCJsaXN0XCI7XG5cdFx0XHR0aGlzLmxpc3RUYWIgPSBcIndvcmxkc1wiO1xuXHRcdFx0dGhpcy5yZW5kZXJMaXN0SGVhZGVyKCk7XG5cdFx0XHR0aGlzLnJlbmRlckxpc3RDb250ZW50KCk7XG5cdFx0fTtcblxuXHRcdC8vIEhlYWRlciBhY3Rpb25zIChjb250ZXh0IG1lbnUpXG5cdFx0Y29uc3QgaGVhZGVyQWN0aW9ucyA9IHRvcFJvdy5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWhlYWRlci1hY3Rpb25zXCIgfSk7XG5cdFx0XG5cdFx0Y29uc3QgY29udGV4dEJ1dHRvbiA9IGhlYWRlckFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1jb250ZXh0LWJ0blwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJXb3JsZCBBY3Rpb25zXCIgfVxuXHRcdH0pO1xuXHRcdHNldEljb24oY29udGV4dEJ1dHRvbiwgXCJtb3JlLXZlcnRpY2FsXCIpO1xuXHRcdFxuXHRcdC8vIENyZWF0ZSBkcm9wZG93biBtZW51XG5cdFx0Y29uc3QgZHJvcGRvd25NZW51ID0gaGVhZGVyQWN0aW9ucy5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWRyb3Bkb3duLW1lbnVcIiB9KTtcblx0XHRkcm9wZG93bk1lbnUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdFxuXHRcdC8vIEVkaXQgb3B0aW9uXG5cdFx0Y29uc3QgZWRpdE9wdGlvbiA9IGRyb3Bkb3duTWVudS5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWRyb3Bkb3duLWl0ZW1cIixcblx0XHR9KTtcblx0XHRzZXRJY29uKGVkaXRPcHRpb24sIFwicGVuY2lsXCIpO1xuXHRcdGVkaXRPcHRpb24uY3JlYXRlU3Bhbih7IHRleHQ6IFwiRWRpdCBXb3JsZFwiIH0pO1xuXHRcdGVkaXRPcHRpb24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdGRyb3Bkb3duTWVudS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHR0aGlzLnNob3dFZGl0V29ybGRNb2RhbCgpO1xuXHRcdH07XG5cdFx0XG5cdFx0Ly8gVG9nZ2xlIGRyb3Bkb3duXG5cdFx0Y29udGV4dEJ1dHRvbi5vbmNsaWNrID0gKGUpID0+IHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRjb25zdCBpc1Zpc2libGUgPSBkcm9wZG93bk1lbnUuc3R5bGUuZGlzcGxheSAhPT0gXCJub25lXCI7XG5cdFx0XHRkcm9wZG93bk1lbnUuc3R5bGUuZGlzcGxheSA9IGlzVmlzaWJsZSA/IFwibm9uZVwiIDogXCJibG9ja1wiO1xuXHRcdH07XG5cdFx0XG5cdFx0Ly8gQ2xvc2UgZHJvcGRvd24gd2hlbiBjbGlja2luZyBvdXRzaWRlXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcblx0XHRcdGRyb3Bkb3duTWVudS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0fSwgeyBvbmNlOiB0cnVlIH0pO1xuXG5cdFx0Ly8gVGl0bGUgc2VjdGlvbiB3aXRoIG5hbWUgYW5kIGRlc2NyaXB0aW9uXG5cdFx0Y29uc3QgdGl0bGVTZWN0aW9uID0gaGVhZGVyQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLXRpdGxlLXNlY3Rpb25cIiB9KTtcblx0XHRcblx0XHQvLyBXb3JsZCBuYW1lXG5cdFx0dGl0bGVTZWN0aW9uLmNyZWF0ZUVsKFwiaDFcIiwgeyBcblx0XHRcdHRleHQ6IHRoaXMuY3VycmVudFdvcmxkLm5hbWUsXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLW5hbWVcIlxuXHRcdH0pO1xuXG5cdFx0Ly8gRGVzY3JpcHRpb25cblx0XHRpZiAodGhpcy5jdXJyZW50V29ybGQuZGVzY3JpcHRpb24pIHtcblx0XHRcdHRpdGxlU2VjdGlvbi5jcmVhdGVFbChcInBcIiwgeyBcblx0XHRcdFx0dGV4dDogdGhpcy5jdXJyZW50V29ybGQuZGVzY3JpcHRpb24sXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtZGVzY1wiXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvLyBNZXRhIHJvdyB3aXRoIGdlbnJlIGFuZCBVVUlEXG5cdFx0Y29uc3QgbWV0YVJvdyA9IHRpdGxlU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLW1ldGEtcm93XCIgfSk7XG5cdFx0XG5cdFx0Ly8gR2VucmUgYmFkZ2Vcblx0XHRpZiAodGhpcy5jdXJyZW50V29ybGQuZ2VucmUpIHtcblx0XHRcdGNvbnN0IGdlbnJlQmFkZ2UgPSBtZXRhUm93LmNyZWF0ZVNwYW4oeyBcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1iYWRnZSBzdG9yeS1lbmdpbmUtZ2VucmUtYmFkZ2VcIlxuXHRcdFx0fSk7XG5cdFx0XHRzZXRJY29uKGdlbnJlQmFkZ2UsIFwidGFnXCIpO1xuXHRcdFx0Z2VucmVCYWRnZS5jcmVhdGVTcGFuKHsgdGV4dDogdGhpcy5jdXJyZW50V29ybGQuZ2VucmUgfSk7XG5cdFx0fVxuXG5cdFx0Ly8gVVVJRCBkaXNwbGF5IHdpdGggY29weVxuXHRcdGNvbnN0IHV1aWRDb250YWluZXIgPSBtZXRhUm93LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtdXVpZFwiIH0pO1xuXHRcdGNvbnN0IHV1aWRUZXh0ID0gdXVpZENvbnRhaW5lci5jcmVhdGVTcGFuKHsgdGV4dDogdGhpcy5jdXJyZW50V29ybGQuaWQuc3Vic3RyaW5nKDAsIDgpICsgXCIuLi5cIiB9KTtcblx0XHRcblx0XHRjb25zdCBjb3B5VXVpZEJ1dHRvbiA9IHV1aWRDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1jb3B5LXV1aWQtYnRuXCIsXG5cdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkNvcHkgVVVJRFwiIH1cblx0XHR9KTtcblx0XHRzZXRJY29uKGNvcHlVdWlkQnV0dG9uLCBcImNvcHlcIik7XG5cdFx0Y29weVV1aWRCdXR0b24ub25jbGljayA9IChlKSA9PiB7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0aWYgKCF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXHRcdFx0bmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGhpcy5jdXJyZW50V29ybGQuaWQpLnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiVVVJRCBjb3BpZWQgdG8gY2xpcGJvYXJkXCIpO1xuXHRcdFx0fSkuY2F0Y2goKCkgPT4ge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiRmFpbGVkIHRvIGNvcHkgVVVJRFwiLCAzMDAwKTtcblx0XHRcdH0pO1xuXHRcdH07XG5cdH1cblxuXHRyZW5kZXJXb3JsZFRhYnMoKSB7XG5cdFx0aWYgKCF0aGlzLmNvbnRlbnRFbCkgcmV0dXJuO1xuXG5cdFx0Ly8gUmVtb3ZlIGV4aXN0aW5nIHNpZGViYXIgaWYgYW55XG5cdFx0Y29uc3QgZXhpc3RpbmdTaWRlYmFyID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcihcIi5zdG9yeS1lbmdpbmUtd29ybGQtc2lkZWJhclwiKTtcblx0XHRpZiAoZXhpc3RpbmdTaWRlYmFyKSB7XG5cdFx0XHRleGlzdGluZ1NpZGViYXIucmVtb3ZlKCk7XG5cdFx0fVxuXG5cdFx0Ly8gQ3JlYXRlIHZlcnRpY2FsIHNpZGViYXIgY29udGFpbmVyXG5cdFx0Y29uc3Qgc2lkZWJhclBvc2l0aW9uID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2lkZWJhclBvc2l0aW9uIHx8IFwibGVmdFwiO1xuXHRcdGNvbnN0IHNpZGViYXJDb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBcblx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS13b3JsZC1zaWRlYmFyIHN0b3J5LWVuZ2luZS13b3JsZC1zaWRlYmFyLSR7c2lkZWJhclBvc2l0aW9ufWAgXG5cdFx0fSk7XG5cblx0XHQvLyBBbGwgdGFicyB3aXRoIGljb25zXG5cdFx0Y29uc3QgYWxsVGFiczogeyBcblx0XHRcdGtleTogXCJjaGFyYWN0ZXJzXCIgfCBcInRyYWl0c1wiIHwgXCJhcmNoZXR5cGVzXCIgfCBcImV2ZW50c1wiIHwgXCJsb3JlXCIgfCBcImxvY2F0aW9uc1wiIHwgXCJmYWN0aW9uc1wiIHwgXCJhcnRpZmFjdHNcIjsgXG5cdFx0XHRsYWJlbDogc3RyaW5nO1xuXHRcdFx0aWNvbjogc3RyaW5nO1xuXHRcdH1bXSA9IFtcblx0XHRcdHsga2V5OiBcImNoYXJhY3RlcnNcIiwgbGFiZWw6IFwiQ2hhcmFjdGVyc1wiLCBpY29uOiBcInVzZXJcIiB9LFxuXHRcdFx0eyBrZXk6IFwibG9jYXRpb25zXCIsIGxhYmVsOiBcIkxvY2F0aW9uc1wiLCBpY29uOiBcIm1hcC1waW5cIiB9LFxuXHRcdFx0eyBrZXk6IFwiZmFjdGlvbnNcIiwgbGFiZWw6IFwiRmFjdGlvbnNcIiwgaWNvbjogXCJ1c2Vyc1wiIH0sXG5cdFx0XHR7IGtleTogXCJhcnRpZmFjdHNcIiwgbGFiZWw6IFwiQXJ0aWZhY3RzXCIsIGljb246IFwiZ2VtXCIgfSxcblx0XHRcdHsga2V5OiBcInRyYWl0c1wiLCBsYWJlbDogXCJUcmFpdHNcIiwgaWNvbjogXCJzdGFyXCIgfSxcblx0XHRcdHsga2V5OiBcImFyY2hldHlwZXNcIiwgbGFiZWw6IFwiQXJjaGV0eXBlc1wiLCBpY29uOiBcInNoYXBlc1wiIH0sXG5cdFx0XHR7IGtleTogXCJldmVudHNcIiwgbGFiZWw6IFwiRXZlbnRzXCIsIGljb246IFwiY2FsZW5kYXJcIiB9LFxuXHRcdFx0eyBrZXk6IFwibG9yZVwiLCBsYWJlbDogXCJMb3JlXCIsIGljb246IFwiYm9vay1vcGVuXCIgfSxcblx0XHRdO1xuXG5cdFx0Zm9yIChjb25zdCB0YWIgb2YgYWxsVGFicykge1xuXHRcdFx0Y29uc3QgdGFiQnV0dG9uID0gc2lkZWJhckNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS1zaWRlYmFyLXRhYiAke3RoaXMud29ybGRUYWIgPT09IHRhYi5rZXkgPyBcImlzLWFjdGl2ZVwiIDogXCJcIn1gLFxuXHRcdFx0XHRhdHRyOiB7XG5cdFx0XHRcdFx0XCJhcmlhLWxhYmVsXCI6IHRhYi5sYWJlbCxcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdC8vIEFkZCBpY29uXG5cdFx0XHRzZXRJY29uKHRhYkJ1dHRvbiwgdGFiLmljb24pO1xuXHRcdFx0XG5cdFx0XHR0YWJCdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0dGhpcy53b3JsZFRhYiA9IHRhYi5rZXk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJzKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdHJlbmRlcldvcmxkVGFiQ29udGVudCgpIHtcblx0XHRpZiAoIXRoaXMuY29udGVudEVsKSByZXR1cm47XG5cblx0XHQvLyBSZW1vdmUgZXhpc3RpbmcgY29udGVudFxuXHRcdGNvbnN0IGV4aXN0aW5nQ29udGVudCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoXCIuc3RvcnktZW5naW5lLXdvcmxkLXRhYi1jb250ZW50XCIpO1xuXHRcdGlmIChleGlzdGluZ0NvbnRlbnQpIHtcblx0XHRcdGV4aXN0aW5nQ29udGVudC5yZW1vdmUoKTtcblx0XHR9XG5cblx0XHQvLyBHZXQgc2lkZWJhciBwb3NpdGlvbiBmb3IgcHJvcGVyIGNvbnRlbnQgcGxhY2VtZW50XG5cdFx0Y29uc3Qgc2lkZWJhclBvc2l0aW9uID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2lkZWJhclBvc2l0aW9uIHx8IFwibGVmdFwiO1xuXHRcdGNvbnN0IGNvbnRlbnRDb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBcblx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS13b3JsZC10YWItY29udGVudCBzdG9yeS1lbmdpbmUtY29udGVudC1zaWRlYmFyLSR7c2lkZWJhclBvc2l0aW9ufWAgXG5cdFx0fSk7XG5cblx0XHRpZiAodGhpcy5sb2FkaW5nV29ybGREYXRhKSB7XG5cdFx0XHQvLyBNb2Rlcm4gc2tlbGV0b24gbG9hZGluZ1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcblx0XHRcdFx0Y29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXNrZWxldG9uIHN0b3J5LWVuZ2luZS1za2VsZXRvbi1jYXJkXCIgfSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0c3dpdGNoICh0aGlzLndvcmxkVGFiKSB7XG5cdFx0XHRjYXNlIFwiY2hhcmFjdGVyc1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlckNoYXJhY3RlcnNUYWIoY29udGVudENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcInRyYWl0c1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlclRyYWl0c1RhYihjb250ZW50Q29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiYXJjaGV0eXBlc1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlckFyY2hldHlwZXNUYWIoY29udGVudENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImV2ZW50c1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlckV2ZW50c1RhYihjb250ZW50Q29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwibG9yZVwiOlxuXHRcdFx0XHR0aGlzLnJlbmRlckxvcmVUYWIoY29udGVudENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImxvY2F0aW9uc1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlckxvY2F0aW9uc1RhYihjb250ZW50Q29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiZmFjdGlvbnNcIjpcblx0XHRcdFx0dGhpcy5yZW5kZXJGYWN0aW9uc1RhYihjb250ZW50Q29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiYXJ0aWZhY3RzXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyQXJ0aWZhY3RzVGFiKGNvbnRlbnRDb250YWluZXIpO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHQvLyBBY3Rpb25zIGJhclxuXHRcdHRoaXMucmVuZGVyV29ybGRBY3Rpb25zQmFyKGNvbnRlbnRDb250YWluZXIpO1xuXHR9XG5cblx0cmVuZGVyV29ybGRBY3Rpb25zQmFyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRjb25zdCBhY3Rpb25zQmFyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtYWN0aW9ucy1iYXJcIiB9KTtcblx0XHRcblx0XHRsZXQgY3JlYXRlQnV0dG9uVGV4dCA9IFwiQ3JlYXRlIENoYXJhY3RlclwiO1xuXHRcdGxldCBjcmVhdGVCdXR0b25BY3Rpb24gPSAoKSA9PiB7XG5cdFx0XHR0aGlzLnNob3dDcmVhdGVDaGFyYWN0ZXJNb2RhbCgpO1xuXHRcdH07XG5cblx0XHRzd2l0Y2ggKHRoaXMud29ybGRUYWIpIHtcblx0XHRcdGNhc2UgXCJ0cmFpdHNcIjpcblx0XHRcdFx0Y3JlYXRlQnV0dG9uVGV4dCA9IFwiQ3JlYXRlIFRyYWl0XCI7XG5cdFx0XHRcdGNyZWF0ZUJ1dHRvbkFjdGlvbiA9ICgpID0+IHRoaXMuc2hvd0NyZWF0ZVRyYWl0TW9kYWwoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiYXJjaGV0eXBlc1wiOlxuXHRcdFx0XHRjcmVhdGVCdXR0b25UZXh0ID0gXCJDcmVhdGUgQXJjaGV0eXBlXCI7XG5cdFx0XHRcdGNyZWF0ZUJ1dHRvbkFjdGlvbiA9ICgpID0+IHRoaXMuc2hvd0NyZWF0ZUFyY2hldHlwZU1vZGFsKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImV2ZW50c1wiOlxuXHRcdFx0XHRjcmVhdGVCdXR0b25UZXh0ID0gXCJDcmVhdGUgRXZlbnRcIjtcblx0XHRcdFx0Y3JlYXRlQnV0dG9uQWN0aW9uID0gKCkgPT4gdGhpcy5zaG93Q3JlYXRlRXZlbnRNb2RhbCgpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJsb3JlXCI6XG5cdFx0XHRcdGNyZWF0ZUJ1dHRvblRleHQgPSBcIkNyZWF0ZSBMb3JlXCI7XG5cdFx0XHRcdGNyZWF0ZUJ1dHRvbkFjdGlvbiA9ICgpID0+IHRoaXMuc2hvd0NyZWF0ZUxvcmVNb2RhbCgpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJsb2NhdGlvbnNcIjpcblx0XHRcdFx0Y3JlYXRlQnV0dG9uVGV4dCA9IFwiQ3JlYXRlIExvY2F0aW9uXCI7XG5cdFx0XHRcdGNyZWF0ZUJ1dHRvbkFjdGlvbiA9ICgpID0+IHRoaXMuc2hvd0NyZWF0ZUxvY2F0aW9uTW9kYWwoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiZmFjdGlvbnNcIjpcblx0XHRcdFx0Y3JlYXRlQnV0dG9uVGV4dCA9IFwiQ3JlYXRlIEZhY3Rpb25cIjtcblx0XHRcdFx0Y3JlYXRlQnV0dG9uQWN0aW9uID0gKCkgPT4gdGhpcy5zaG93Q3JlYXRlRmFjdGlvbk1vZGFsKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImFydGlmYWN0c1wiOlxuXHRcdFx0XHRjcmVhdGVCdXR0b25UZXh0ID0gXCJDcmVhdGUgQXJ0aWZhY3RcIjtcblx0XHRcdFx0Y3JlYXRlQnV0dG9uQWN0aW9uID0gKCkgPT4gdGhpcy5zaG93Q3JlYXRlQXJ0aWZhY3RNb2RhbCgpO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHRjb25zdCBjcmVhdGVCdXR0b24gPSBhY3Rpb25zQmFyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IGNyZWF0ZUJ1dHRvblRleHQsXG5cdFx0XHRjbHM6IFwibW9kLWN0YSBzdG9yeS1lbmdpbmUtY3JlYXRlLWJ0blwiLFxuXHRcdH0pO1xuXHRcdGNyZWF0ZUJ1dHRvbi5vbmNsaWNrID0gY3JlYXRlQnV0dG9uQWN0aW9uO1xuXHR9XG5cblx0cmVuZGVyQ2hhcmFjdGVyc1RhYihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0aWYgKHRoaXMuY2hhcmFjdGVycy5sZW5ndGggPT09IDApIHtcblx0XHRcdHRoaXMucmVuZGVyRW1wdHlDYXJkKGNvbnRhaW5lciwge1xuXHRcdFx0XHRpY29uOiBcInVzZXJcIixcblx0XHRcdFx0dGl0bGU6IFwiTm8gY2hhcmFjdGVycyBmb3VuZFwiLFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJDcmVhdGUgeW91ciBmaXJzdCBjaGFyYWN0ZXIgdG8gc3RhcnQgYnVpbGRpbmcgdGhpcyB3b3JsZC5cIixcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIE1vZGVybiBjYXJkLWJhc2VkIGxheW91dFxuXHRcdGZvciAoY29uc3QgY2hhcmFjdGVyIG9mIHRoaXMuY2hhcmFjdGVycykge1xuXHRcdFx0Y29uc3QgY2FyZCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1jYXJkXCIgfSk7XG5cdFx0XHRjYXJkLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuXHRcdFx0XG5cdFx0XHQvLyBNYWtlIGVudGlyZSBjYXJkIGNsaWNrYWJsZVxuXHRcdFx0Y2FyZC5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnNob3dDaGFyYWN0ZXJEZXRhaWxzKGNoYXJhY3Rlcik7XG5cdFx0XHR9O1xuXHRcdFx0XG5cdFx0XHQvLyBDYXJkIGhlYWRlciB3aXRoIHRpdGxlIGFuZCBhY3Rpb25zXG5cdFx0XHRjb25zdCBjYXJkSGVhZGVyID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1jYXJkLWhlYWRlclwiIH0pO1xuXHRcdFx0XG5cdFx0XHRjb25zdCBjYXJkVGl0bGUgPSBjYXJkSGVhZGVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWNhcmQtdGl0bGVcIiB9KTtcblx0XHRcdGNvbnN0IG5hbWVFbCA9IGNhcmRUaXRsZS5jcmVhdGVFbChcImgzXCIsIHsgXG5cdFx0XHRcdHRleHQ6IGNoYXJhY3Rlci5uYW1lLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1uYW1lXCJcblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHRpZiAoY2hhcmFjdGVyLmFyY2hldHlwZV9pZCkge1xuXHRcdFx0XHRjb25zdCBhcmNoZXR5cGUgPSB0aGlzLmFyY2hldHlwZXMuZmluZChhID0+IGEuaWQgPT09IGNoYXJhY3Rlci5hcmNoZXR5cGVfaWQpO1xuXHRcdFx0XHRpZiAoYXJjaGV0eXBlKSB7XG5cdFx0XHRcdFx0Y2FyZFRpdGxlLmNyZWF0ZUVsKFwicFwiLCB7IFxuXHRcdFx0XHRcdFx0dGV4dDogYXJjaGV0eXBlLm5hbWUsXG5cdFx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1zdWJ0aXRsZVwiXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gQ2FyZCBhY3Rpb25zIChob3ZlciB2aXNpYmxlKVxuXHRcdFx0Y29uc3QgY2FyZEFjdGlvbnMgPSBjYXJkSGVhZGVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWNhcmQtYWN0aW9uc1wiIH0pO1xuXHRcdFx0XG5cdFx0XHRjb25zdCByZWxhdGlvbnNoaXBCdG4gPSBjYXJkQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJBZGQgUmVsYXRpb25zaGlwXCIgfVxuXHRcdFx0fSk7XG5cdFx0XHRzZXRJY29uKHJlbGF0aW9uc2hpcEJ0biwgXCJ1c2Vyc1wiKTtcblx0XHRcdHJlbGF0aW9uc2hpcEJ0bi5vbmNsaWNrID0gKGUpID0+IHtcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0dGhpcy5zaG93QWRkQ2hhcmFjdGVyUmVsYXRpb25zaGlwTW9kYWwoY2hhcmFjdGVyKTtcblx0XHRcdH07XG5cdFx0XHRcblx0XHRcdGNvbnN0IGVkaXRCdG4gPSBjYXJkQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJFZGl0XCIgfVxuXHRcdFx0fSk7XG5cdFx0XHRzZXRJY29uKGVkaXRCdG4sIFwicGVuY2lsXCIpO1xuXHRcdFx0ZWRpdEJ0bi5vbmNsaWNrID0gKGUpID0+IHtcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0dGhpcy5zaG93RWRpdENoYXJhY3Rlck1vZGFsKGNoYXJhY3Rlcik7XG5cdFx0XHR9O1xuXHRcdFx0XG5cdFx0XHRjb25zdCBkZWxldGVCdG4gPSBjYXJkQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJEZWxldGVcIiB9XG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24oZGVsZXRlQnRuLCBcInRyYXNoXCIpO1xuXHRcdFx0ZGVsZXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoZSkgPT4ge1xuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRpZiAoY29uZmlybShgRGVsZXRlIGNoYXJhY3RlciBcIiR7Y2hhcmFjdGVyLm5hbWV9XCI/YCkpIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmRlbGV0ZUNoYXJhY3RlcihjaGFyYWN0ZXIuaWQpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkNoYXJhY3RlciBkZWxldGVkXCIpO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0XG5cdFx0XHQvLyBDYXJkIGNvbnRlbnRcblx0XHRcdGNvbnN0IGNhcmRDb250ZW50ID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1jYXJkLWNvbnRlbnRcIiB9KTtcblx0XHRcdFxuXHRcdFx0aWYgKGNoYXJhY3Rlci5kZXNjcmlwdGlvbikge1xuXHRcdFx0XHRjYXJkQ29udGVudC5jcmVhdGVFbChcInBcIiwgeyBcblx0XHRcdFx0XHR0ZXh0OiBjaGFyYWN0ZXIuZGVzY3JpcHRpb24sXG5cdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktZGVzY3JpcHRpb25cIlxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZW5kZXJMb2NhdGlvbnNUYWIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGlmICh0aGlzLmxvY2F0aW9ucy5sZW5ndGggPT09IDApIHtcblx0XHRcdHRoaXMucmVuZGVyRW1wdHlDYXJkKGNvbnRhaW5lciwge1xuXHRcdFx0XHRpY29uOiBcIm1hcC1waW5cIixcblx0XHRcdFx0dGl0bGU6IFwiTm8gbG9jYXRpb25zIGZvdW5kXCIsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkNyZWF0ZSB5b3VyIGZpcnN0IGxvY2F0aW9uIVwiLFxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gR3JvdXAgYnkgaGllcmFyY2h5IGxldmVsXG5cdFx0Y29uc3Qgcm9vdExvY2F0aW9ucyA9IHRoaXMubG9jYXRpb25zLmZpbHRlcihsID0+ICFsLnBhcmVudF9pZCk7XG5cdFx0Y29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblx0XHRcblx0XHRmb3IgKGNvbnN0IGxvY2F0aW9uIG9mIHJvb3RMb2NhdGlvbnMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdHRoaXMucmVuZGVyTG9jYXRpb25JdGVtKGxpc3QsIGxvY2F0aW9uLCAwKTtcblx0XHR9XG5cdH1cblxuXHRyZW5kZXJMb2NhdGlvbkl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgbG9jYXRpb246IExvY2F0aW9uLCBsZXZlbDogbnVtYmVyKSB7XG5cdFx0Y29uc3QgaXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIiB9KTtcblx0XHRpdGVtLnN0eWxlLm1hcmdpbkxlZnQgPSBgJHtsZXZlbCAqIDF9cmVtYDtcblx0XHRcblx0XHRjb25zdCB0aXRsZVJvdyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiIH0pO1xuXHRcdHRpdGxlUm93LnRleHRDb250ZW50ID0gbG9jYXRpb24ubmFtZTtcblx0XHRpZiAobG9jYXRpb24udHlwZSkge1xuXHRcdFx0Y29uc3QgdHlwZUJhZGdlID0gdGl0bGVSb3cuY3JlYXRlU3Bhbih7IGNsczogXCJzdG9yeS1lbmdpbmUtYmFkZ2VcIiB9KTtcblx0XHRcdHR5cGVCYWRnZS50ZXh0Q29udGVudCA9IGxvY2F0aW9uLnR5cGU7XG5cdFx0fVxuXHRcdFxuXHRcdGNvbnN0IG1ldGEgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbWV0YVwiIH0pO1xuXHRcdGlmIChsb2NhdGlvbi5kZXNjcmlwdGlvbikge1xuXHRcdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBsb2NhdGlvbi5kZXNjcmlwdGlvbi5zdWJzdHJpbmcoMCwgNTApICsgKGxvY2F0aW9uLmRlc2NyaXB0aW9uLmxlbmd0aCA+IDUwID8gXCIuLi5cIiA6IFwiXCIpIH0pO1xuXHRcdH1cblxuXHRcdGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbS1hY3Rpb25zXCIgfSk7XG5cdFx0Y29uc3QgZWRpdEJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJFZGl0IGxvY2F0aW9uXCIsIHRpdGxlOiBcIkVkaXQgbG9jYXRpb25cIiB9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihlZGl0QnRuLCBcInBlbmNpbFwiKTtcblx0XHRlZGl0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLnNob3dFZGl0TG9jYXRpb25Nb2RhbChsb2NhdGlvbik7XG5cdFx0fTtcblxuXHRcdGNvbnN0IGRlbGV0ZUJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJEZWxldGUgbG9jYXRpb25cIiwgdGl0bGU6IFwiRGVsZXRlIGxvY2F0aW9uXCIgfVxuXHRcdH0pO1xuXHRcdHNldEljb24oZGVsZXRlQnRuLCBcInRyYXNoXCIpO1xuXHRcdGRlbGV0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKGNvbmZpcm0oYERlbGV0ZSBsb2NhdGlvbiBcIiR7bG9jYXRpb24ubmFtZX1cIj9gKSkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5kZWxldGVMb2NhdGlvbihsb2NhdGlvbi5pZCk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiTG9jYXRpb24gZGVsZXRlZFwiKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gUmVuZGVyIGNoaWxkcmVuXG5cdFx0Y29uc3QgY2hpbGRyZW4gPSB0aGlzLmxvY2F0aW9ucy5maWx0ZXIobCA9PiBsLnBhcmVudF9pZCA9PT0gbG9jYXRpb24uaWQpO1xuXHRcdGZvciAoY29uc3QgY2hpbGQgb2YgY2hpbGRyZW4uc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdHRoaXMucmVuZGVyTG9jYXRpb25JdGVtKGNvbnRhaW5lciwgY2hpbGQsIGxldmVsICsgMSk7XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyQXJ0aWZhY3RzVGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRpZiAodGhpcy5hcnRpZmFjdHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHR0aGlzLnJlbmRlckVtcHR5Q2FyZChjb250YWluZXIsIHtcblx0XHRcdFx0aWNvbjogXCJnZW1cIixcblx0XHRcdFx0dGl0bGU6IFwiTm8gYXJ0aWZhY3RzIGZvdW5kXCIsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkNyZWF0ZSB5b3VyIGZpcnN0IGFydGlmYWN0IVwiLFxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblx0XHRmb3IgKGNvbnN0IGFydGlmYWN0IG9mIHRoaXMuYXJ0aWZhY3RzKSB7XG5cdFx0XHRjb25zdCBpdGVtID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIiB9KTtcblx0XHRcdFxuXHRcdFx0Y29uc3QgdGl0bGVSb3cgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIiB9KTtcblx0XHRcdHRpdGxlUm93LnRleHRDb250ZW50ID0gYXJ0aWZhY3QubmFtZTtcblx0XHRcdGlmIChhcnRpZmFjdC5yYXJpdHkpIHtcblx0XHRcdFx0Y29uc3QgcmFyaXR5QmFkZ2UgPSB0aXRsZVJvdy5jcmVhdGVTcGFuKHsgY2xzOiBgc3RvcnktZW5naW5lLWJhZGdlIHN0b3J5LWVuZ2luZS1yYXJpdHktJHthcnRpZmFjdC5yYXJpdHkudG9Mb3dlckNhc2UoKX1gIH0pO1xuXHRcdFx0XHRyYXJpdHlCYWRnZS50ZXh0Q29udGVudCA9IGFydGlmYWN0LnJhcml0eTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Y29uc3QgbWV0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIgfSk7XG5cdFx0XHRpZiAoYXJ0aWZhY3QuZGVzY3JpcHRpb24pIHtcblx0XHRcdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBhcnRpZmFjdC5kZXNjcmlwdGlvbi5zdWJzdHJpbmcoMCwgNTApICsgKGFydGlmYWN0LmRlc2NyaXB0aW9uLmxlbmd0aCA+IDUwID8gXCIuLi5cIiA6IFwiXCIpIH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0tYWN0aW9uc1wiIH0pO1xuXHRcdFx0Y29uc3QgYXJ0aWZhY3RFZGl0QnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJFZGl0IGFydGlmYWN0XCIsIHRpdGxlOiBcIkVkaXQgYXJ0aWZhY3RcIiB9XG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24oYXJ0aWZhY3RFZGl0QnRuLCBcInBlbmNpbFwiKTtcblx0XHRcdGFydGlmYWN0RWRpdEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnNob3dFZGl0QXJ0aWZhY3RNb2RhbChhcnRpZmFjdCk7XG5cdFx0XHR9O1xuXG5cdFx0XHRjb25zdCBhcnRpZmFjdERlbGV0ZUJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiRGVsZXRlIGFydGlmYWN0XCIsIHRpdGxlOiBcIkRlbGV0ZSBhcnRpZmFjdFwiIH1cblx0XHRcdH0pO1xuXHRcdFx0c2V0SWNvbihhcnRpZmFjdERlbGV0ZUJ0biwgXCJ0cmFzaFwiKTtcblx0XHRcdGFydGlmYWN0RGVsZXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGlmIChjb25maXJtKGBEZWxldGUgYXJ0aWZhY3QgXCIke2FydGlmYWN0Lm5hbWV9XCI/YCkpIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmRlbGV0ZUFydGlmYWN0KGFydGlmYWN0LmlkKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJBcnRpZmFjdCBkZWxldGVkXCIpO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdHJlbmRlckV2ZW50c1RhYihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0Ly8gPT09IFNFQ0FPIDE6IFRJTUUgQ09ORklHID09PVxuXHRcdGNvbnN0IHRpbWVDb25maWdTZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGltZS1jb25maWctc2VjdGlvblwiIH0pO1xuXHRcdFxuXHRcdGlmICh0aGlzLmN1cnJlbnRXb3JsZD8udGltZV9jb25maWcpIHtcblx0XHRcdC8vIE1vc3RyYXIgY29uZmlndXJhY2FvIGF0dWFsXG5cdFx0XHR0aGlzLnJlbmRlclRpbWVDb25maWdEaXNwbGF5KHRpbWVDb25maWdTZWN0aW9uLCB0aGlzLmN1cnJlbnRXb3JsZC50aW1lX2NvbmZpZyk7XG5cdFx0XHRcblx0XHRcdC8vIEJvdGFvIEVkaXRcblx0XHRcdGNvbnN0IGVkaXRCdG4gPSB0aW1lQ29uZmlnU2VjdGlvbi5jcmVhdGVFbChcImJ1dHRvblwiLCB7IFxuXHRcdFx0XHR0ZXh0OiBcIkVkaXQgVGltZSBDb25maWdcIixcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1idG4tc2Vjb25kYXJ5XCJcblx0XHRcdH0pO1xuXHRcdFx0ZWRpdEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zaG93VGltZUNvbmZpZ01vZGFsKHRoaXMuY3VycmVudFdvcmxkIS50aW1lX2NvbmZpZyEpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBNb3N0cmFyIGJvdGFvIHBhcmEgYWRpY2lvbmFyXG5cdFx0XHRjb25zdCBhZGRCdG4gPSB0aW1lQ29uZmlnU2VjdGlvbi5jcmVhdGVFbChcImJ1dHRvblwiLCB7IFxuXHRcdFx0XHR0ZXh0OiBcIkFkZCBUaW1lIENvbmZpZ3VyYXRpb25cIixcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1idG4tcHJpbWFyeVwiXG5cdFx0XHR9KTtcblx0XHRcdGFkZEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zaG93VGltZUNvbmZpZ01vZGFsKG51bGwpO1xuXHRcdH1cblx0XHRcblx0XHQvLyA9PT0gU0VDQU8gMjogQk9UQU8gVkVSIFRJTUVMSU5FID09PVxuXHRcdGNvbnN0IHRpbWVsaW5lU2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXRpbWVsaW5lLXNlY3Rpb25cIiB9KTtcblx0XHRjb25zdCB0aW1lbGluZUJ0biA9IHRpbWVsaW5lU2VjdGlvbi5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIlZpZXcgVGltZWxpbmVcIixcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtYnRuLXNlY29uZGFyeVwiXG5cdFx0fSk7XG5cdFx0dGltZWxpbmVCdG4ub25jbGljayA9ICgpID0+IHRoaXMuc2hvd1RpbWVsaW5lTW9kYWwoKTtcblx0XHRcblx0XHQvLyA9PT0gU0VDQU8gMzogRVBPQ0ggRVZFTlQgKFllYXIgWmVybykgPT09XG5cdFx0Y29uc3QgZXBvY2hTZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZXBvY2gtc2VjdGlvblwiIH0pO1xuXHRcdGVwb2NoU2VjdGlvbi5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJcdTIzRjAgRXBvY2ggRXZlbnQgKFllYXIgWmVybylcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWN0aW9uLXRpdGxlXCIgfSk7XG5cdFx0XG5cdFx0Y29uc3QgZXBvY2hFdmVudCA9IHRoaXMuZXZlbnRzLmZpbmQoZSA9PiBlLmlzX2Vwb2NoICYmIGUudGltZWxpbmVfcG9zaXRpb24gPT09IDApO1xuXHRcdFxuXHRcdGlmIChlcG9jaEV2ZW50KSB7XG5cdFx0XHQvLyBFcG9jaCBldmVudCBleGlzdHMgLSBzaG93IGl0IHdpdGggZWRpdCBvcHRpb25cblx0XHRcdGNvbnN0IGVwb2NoSXRlbSA9IGVwb2NoU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0gc3RvcnktZW5naW5lLWVwb2NoLWl0ZW1cIiB9KTtcblx0XHRcdFxuXHRcdFx0Y29uc3QgZXBvY2hUaXRsZSA9IGVwb2NoSXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXRpdGxlXCIgfSk7XG5cdFx0XHRlcG9jaFRpdGxlLmNyZWF0ZVNwYW4oeyB0ZXh0OiBlcG9jaEV2ZW50Lm5hbWUgfSk7XG5cdFx0XHRlcG9jaFRpdGxlLmNyZWF0ZVNwYW4oeyBjbHM6IFwic3RvcnktZW5naW5lLWJhZGdlIHN0b3J5LWVuZ2luZS1iYWRnZS1lcG9jaFwiLCB0ZXh0OiBcIkVQT0NIXCIgfSk7XG5cdFx0XHRcblx0XHRcdGNvbnN0IGVwb2NoTWV0YSA9IGVwb2NoSXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRcdGVwb2NoTWV0YS5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBcIlBvc2l0aW9uOiAwIChZZWFyIFplcm8pXCIgfSk7XG5cdFx0XHRpZiAoZXBvY2hFdmVudC5kZXNjcmlwdGlvbikge1xuXHRcdFx0XHRlcG9jaE1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogZXBvY2hFdmVudC5kZXNjcmlwdGlvbi5zdWJzdHJpbmcoMCwgODApICsgKGVwb2NoRXZlbnQuZGVzY3JpcHRpb24ubGVuZ3RoID4gODAgPyBcIi4uLlwiIDogXCJcIikgfSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGNvbnN0IGVwb2NoQWN0aW9ucyA9IGVwb2NoSXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0tYWN0aW9uc1wiIH0pO1xuXHRcdFx0Y29uc3QgZXBvY2hFZGl0QnRuID0gZXBvY2hBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkVkaXQgZXBvY2ggZXZlbnRcIiwgdGl0bGU6IFwiRWRpdCBlcG9jaCBldmVudFwiIH1cblx0XHRcdH0pO1xuXHRcdFx0c2V0SWNvbihlcG9jaEVkaXRCdG4sIFwicGVuY2lsXCIpO1xuXHRcdFx0ZXBvY2hFZGl0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuc2hvd0VkaXRFdmVudE1vZGFsKGVwb2NoRXZlbnQpO1xuXHRcdFx0fTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gTm8gZXBvY2ggZXZlbnQgLSBzaG93IGNyZWF0ZSBidXR0b25cblx0XHRcdGNvbnN0IGNyZWF0ZUVwb2NoQnRuID0gZXBvY2hTZWN0aW9uLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgXG5cdFx0XHRcdHRleHQ6IFwiXHVEODNDXHVERjFGIENyZWF0ZSBFcG9jaCBFdmVudCAoWWVhciBaZXJvKVwiLFxuXHRcdFx0XHRjbHM6IFwibW9kLWN0YSBzdG9yeS1lbmdpbmUtY3JlYXRlLWVwb2NoLWJ0blwiXG5cdFx0XHR9KTtcblx0XHRcdGNyZWF0ZUVwb2NoQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNob3dDcmVhdGVFcG9jaEV2ZW50TW9kYWwoKTtcblx0XHRcdFxuXHRcdFx0ZXBvY2hTZWN0aW9uLmNyZWF0ZUVsKFwicFwiLCB7IFxuXHRcdFx0XHR0ZXh0OiBcIlRoZSBFcG9jaCBFdmVudCBtYXJrcyBZZWFyIFplcm8gLSBhbGwgb3RoZXIgZXZlbnRzIGFyZSBkYXRlZCByZWxhdGl2ZSB0byB0aGlzIHBvaW50LlwiLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWhpbnRcIlxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdFxuXHRcdC8vID09PSBTRUNBTyA0OiBMSVNUQSBERSBFVkVOVE9TID09PVxuXHRcdGNvbnN0IGV2ZW50c1NlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ldmVudHMtbGlzdC1zZWN0aW9uXCIgfSk7XG5cdFx0ZXZlbnRzU2VjdGlvbi5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJcdUQ4M0RcdURDREMgRXZlbnRzXCIsIGNsczogXCJzdG9yeS1lbmdpbmUtc2VjdGlvbi10aXRsZVwiIH0pO1xuXHRcdFxuXHRcdC8vIEZpbHRlciBvdXQgdGhlIGVwb2NoIGV2ZW50IGZyb20gdGhlIGxpc3Rcblx0XHRjb25zdCByZWd1bGFyRXZlbnRzID0gdGhpcy5ldmVudHMuZmlsdGVyKGUgPT4gIShlLmlzX2Vwb2NoICYmIGUudGltZWxpbmVfcG9zaXRpb24gPT09IDApKTtcblx0XHRcblx0XHRpZiAocmVndWxhckV2ZW50cy5sZW5ndGggPT09IDApIHtcblx0XHRcdHRoaXMucmVuZGVyRW1wdHlDYXJkKGV2ZW50c1NlY3Rpb24sIHtcblx0XHRcdFx0aWNvbjogXCJjYWxlbmRhclwiLFxuXHRcdFx0XHR0aXRsZTogXCJObyBldmVudHMgeWV0XCIsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkNyZWF0ZSB5b3VyIGZpcnN0IGV2ZW50IVwiLFxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGV2ZW50c1NlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1saXN0XCIgfSk7XG5cdFx0XG5cdFx0Ly8gU29ydCBieSB0aW1lbGluZV9wb3NpdGlvbiAoZXZlbnRzIGNsb3NlciB0byBlcG9jaCBmaXJzdCksIHRoZW4gYnkgaW1wb3J0YW5jZVxuXHRcdGNvbnN0IHNvcnRlZEV2ZW50cyA9IHJlZ3VsYXJFdmVudHMuc29ydCgoYSwgYikgPT4ge1xuXHRcdFx0Y29uc3QgcG9zQSA9IGEudGltZWxpbmVfcG9zaXRpb24gPz8gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XG5cdFx0XHRjb25zdCBwb3NCID0gYi50aW1lbGluZV9wb3NpdGlvbiA/PyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcblx0XHRcdGlmIChwb3NBICE9PSBwb3NCKSByZXR1cm4gcG9zQSAtIHBvc0I7XG5cdFx0XHRyZXR1cm4gYi5pbXBvcnRhbmNlIC0gYS5pbXBvcnRhbmNlO1xuXHRcdH0pO1xuXHRcdFxuXHRcdGZvciAoY29uc3QgZXZlbnQgb2Ygc29ydGVkRXZlbnRzKSB7XG5cdFx0XHRjb25zdCBpdGVtID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIiB9KTtcblx0XHRcdFxuXHRcdFx0Ly8gVGl0bGUgcm93IHdpdGggbmFtZSBhbmQgYmFkZ2VzXG5cdFx0XHRjb25zdCB0aXRsZVJvdyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiIH0pO1xuXHRcdFx0dGl0bGVSb3cuY3JlYXRlU3Bhbih7IHRleHQ6IGV2ZW50Lm5hbWUgfSk7XG5cdFx0XHRcblx0XHRcdC8vIEltcG9ydGFuY2UgYmFkZ2Vcblx0XHRcdGNvbnN0IGltcG9ydGFuY2VCYWRnZSA9IHRpdGxlUm93LmNyZWF0ZVNwYW4oeyBjbHM6IFwic3RvcnktZW5naW5lLWJhZGdlXCIgfSk7XG5cdFx0XHRpbXBvcnRhbmNlQmFkZ2UudGV4dENvbnRlbnQgPSBgXHUyNjA1JHtldmVudC5pbXBvcnRhbmNlfWA7XG5cdFx0XHRcblx0XHRcdC8vIFR5cGUgYmFkZ2Vcblx0XHRcdGlmIChldmVudC50eXBlKSB7XG5cdFx0XHRcdHRpdGxlUm93LmNyZWF0ZVNwYW4oeyBjbHM6IFwic3RvcnktZW5naW5lLWJhZGdlXCIsIHRleHQ6IGV2ZW50LnR5cGUgfSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIEVwb2NoIGJhZGdlIGlmIGlzX2Vwb2NoIChidXQgbm90IHllYXIgemVybylcblx0XHRcdGlmIChldmVudC5pc19lcG9jaCkge1xuXHRcdFx0XHR0aXRsZVJvdy5jcmVhdGVTcGFuKHsgY2xzOiBcInN0b3J5LWVuZ2luZS1iYWRnZSBzdG9yeS1lbmdpbmUtYmFkZ2UtZXBvY2hcIiwgdGV4dDogXCJFUE9DSFwiIH0pO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBNZXRhIGluZm8gLSBjbGVhcmVyIHN0cnVjdHVyZVxuXHRcdFx0Y29uc3QgbWV0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIgfSk7XG5cdFx0XHRcblx0XHRcdC8vIFRpbWVsaW5lIFBvc2l0aW9uIChEYXRlIHNpbmNlIFllYXIgWmVybylcblx0XHRcdGlmIChldmVudC50aW1lbGluZV9wb3NpdGlvbiAhPT0gdW5kZWZpbmVkICYmIGV2ZW50LnRpbWVsaW5lX3Bvc2l0aW9uICE9PSBudWxsKSB7XG5cdFx0XHRcdGNvbnN0IHBvc1RleHQgPSBldmVudC50aW1lbGluZV9wb3NpdGlvbiA+PSAwIFxuXHRcdFx0XHRcdD8gYFllYXIgJHtldmVudC50aW1lbGluZV9wb3NpdGlvbn1gIFxuXHRcdFx0XHRcdDogYCR7TWF0aC5hYnMoZXZlbnQudGltZWxpbmVfcG9zaXRpb24pfSB5ZWFycyBiZWZvcmUgWWVhciBaZXJvYDtcblx0XHRcdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBgXHVEODNEXHVEQ0M1ICR7cG9zVGV4dH1gLCBjbHM6IFwic3RvcnktZW5naW5lLWV2ZW50LXBvc2l0aW9uXCIgfSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIFBhcmVudCBFdmVudCByZWxhdGlvbnNoaXBcblx0XHRcdGlmIChldmVudC5wYXJlbnRfaWQpIHtcblx0XHRcdFx0Y29uc3QgcGFyZW50RXZlbnQgPSB0aGlzLmV2ZW50cy5maW5kKGUgPT4gZS5pZCA9PT0gZXZlbnQucGFyZW50X2lkKTtcblx0XHRcdFx0aWYgKHBhcmVudEV2ZW50KSB7XG5cdFx0XHRcdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBgXHUyMUIzIFJlbGF0ZWQgdG86ICR7cGFyZW50RXZlbnQubmFtZX1gLCBjbHM6IFwic3RvcnktZW5naW5lLWV2ZW50LXBhcmVudFwiIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIERlc2NyaXB0aW9uIHByZXZpZXdcblx0XHRcdGlmIChldmVudC5kZXNjcmlwdGlvbikge1xuXHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IFxuXHRcdFx0XHRcdHRleHQ6IGV2ZW50LmRlc2NyaXB0aW9uLnN1YnN0cmluZygwLCA2MCkgKyAoZXZlbnQuZGVzY3JpcHRpb24ubGVuZ3RoID4gNjAgPyBcIi4uLlwiIDogXCJcIiksXG5cdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1ldmVudC1kZXNjcmlwdGlvblwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBY3Rpb25zXG5cdFx0XHRjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0tYWN0aW9uc1wiIH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBMaW5rIHRvIEVudGl0eVxuXHRcdFx0Y29uc3QgbGlua0J0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiTGluayB0byBlbnRpdHlcIiwgdGl0bGU6IFwiTGluayB0byBlbnRpdHlcIiB9XG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24obGlua0J0biwgXCJsaW5rXCIpO1xuXHRcdFx0bGlua0J0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zaG93TGlua0V2ZW50VG9FbnRpdHlNb2RhbChldmVudCk7XG5cdFx0XHRcblx0XHRcdC8vIFNldCBQYXJlbnQgRXZlbnRcblx0XHRcdGNvbnN0IGV2ZW50TGlua0J0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiU2V0IHBhcmVudCBldmVudFwiLCB0aXRsZTogXCJTZXQgcGFyZW50IGV2ZW50XCIgfVxuXHRcdFx0fSk7XG5cdFx0XHRzZXRJY29uKGV2ZW50TGlua0J0biwgXCJnaXQtYnJhbmNoXCIpO1xuXHRcdFx0ZXZlbnRMaW5rQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNob3dTZXRFdmVudFBhcmVudE1vZGFsKGV2ZW50KTtcblx0XHRcdFxuXHRcdFx0Y29uc3QgZXZlbnRFZGl0QnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJFZGl0IGV2ZW50XCIsIHRpdGxlOiBcIkVkaXQgZXZlbnRcIiB9XG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24oZXZlbnRFZGl0QnRuLCBcInBlbmNpbFwiKTtcblx0XHRcdGV2ZW50RWRpdEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnNob3dFZGl0RXZlbnRNb2RhbChldmVudCk7XG5cdFx0XHR9O1xuXHRcdFx0XG5cdFx0XHRjb25zdCBldmVudERlbGV0ZUJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiRGVsZXRlIGV2ZW50XCIsIHRpdGxlOiBcIkRlbGV0ZSBldmVudFwiIH1cblx0XHRcdH0pO1xuXHRcdFx0c2V0SWNvbihldmVudERlbGV0ZUJ0biwgXCJ0cmFzaFwiKTtcblx0XHRcdGV2ZW50RGVsZXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGlmIChjb25maXJtKGBEZWxldGUgZXZlbnQgXCIke2V2ZW50Lm5hbWV9XCI/YCkpIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmRlbGV0ZUV2ZW50KGV2ZW50LmlkKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJFdmVudCBkZWxldGVkXCIpO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdHNob3dDcmVhdGVFcG9jaEV2ZW50TW9kYWwoKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJDcmVhdGUgRXBvY2ggRXZlbnQgKFllYXIgWmVybylcIik7XG5cdFx0XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgbmFtZSA9IFwiXCI7XG5cdFx0bGV0IGRlc2NyaXB0aW9uID0gXCJcIjtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgXG5cdFx0XHR0ZXh0OiBcIlRoZSBFcG9jaCBFdmVudCBkZWZpbmVzIFllYXIgWmVybyBpbiB5b3VyIHdvcmxkJ3MgdGltZWxpbmUuIEFsbCBvdGhlciBldmVudHMgd2lsbCBiZSBkYXRlZCByZWxhdGl2ZSB0byB0aGlzIG1vbWVudC5cIixcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtbW9kYWwtaGludFwiXG5cdFx0fSk7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkV2ZW50IE5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IG5hbWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IFxuXHRcdFx0dHlwZTogXCJ0ZXh0XCIsIFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLFxuXHRcdFx0cGxhY2Vob2xkZXI6IFwiZS5nLiwgVGhlIEdyZWF0IENhdGFjbHlzbSwgVGhlIEZvdW5kaW5nLCBZZWFyIG9mIHRoZSBEcmFnb25cIlxuXHRcdH0pO1xuXHRcdG5hbWVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBuYW1lID0gbmFtZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiLFxuXHRcdFx0cGxhY2Vob2xkZXI6IFwiRGVzY3JpYmUgd2hhdCBoYXBwZW5lZCBhdCB0aGlzIHBpdm90YWwgbW9tZW50Li4uXCJcblx0XHR9KTtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3QgY3JlYXRlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDcmVhdGUgRXBvY2hcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRjcmVhdGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghbmFtZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk5hbWUgaXMgcmVxdWlyZWRcIik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVFdmVudCh0aGlzLmN1cnJlbnRXb3JsZCEuaWQsIHtcblx0XHRcdFx0XHRuYW1lOiBuYW1lLnRyaW0oKSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpIHx8IHVuZGVmaW5lZCxcblx0XHRcdFx0XHR0aW1lbGluZV9wb3NpdGlvbjogMCxcblx0XHRcdFx0XHRpc19lcG9jaDogdHJ1ZSxcblx0XHRcdFx0XHRpbXBvcnRhbmNlOiAxMCwgLy8gTWF4IGltcG9ydGFuY2UgZm9yIGVwb2NoXG5cdFx0XHRcdFx0dHlwZTogXCJFcG9jaFwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkVwb2NoIGV2ZW50IGNyZWF0ZWQhXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0XG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KTtcblx0XHRjYW5jZWxCdG4ub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRyZW5kZXJUcmFpdHNUYWIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGlmICh0aGlzLnRyYWl0cy5sZW5ndGggPT09IDApIHtcblx0XHRcdHRoaXMucmVuZGVyRW1wdHlDYXJkKGNvbnRhaW5lciwge1xuXHRcdFx0XHRpY29uOiBcInN0YXJcIixcblx0XHRcdFx0dGl0bGU6IFwiTm8gdHJhaXRzIGZvdW5kXCIsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkNyZWF0ZSB5b3VyIGZpcnN0IHRyYWl0IVwiLFxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gR3JvdXAgYnkgY2F0ZWdvcnlcblx0XHRjb25zdCB0cmFpdHNCeUNhdGVnb3J5ID0gbmV3IE1hcDxzdHJpbmcsIFRyYWl0W10+KCk7XG5cdFx0Zm9yIChjb25zdCB0cmFpdCBvZiB0aGlzLnRyYWl0cykge1xuXHRcdFx0Y29uc3QgY2F0ZWdvcnkgPSB0cmFpdC5jYXRlZ29yeSB8fCBcIlVuY2F0ZWdvcml6ZWRcIjtcblx0XHRcdGlmICghdHJhaXRzQnlDYXRlZ29yeS5oYXMoY2F0ZWdvcnkpKSB7XG5cdFx0XHRcdHRyYWl0c0J5Q2F0ZWdvcnkuc2V0KGNhdGVnb3J5LCBbXSk7XG5cdFx0XHR9XG5cdFx0XHR0cmFpdHNCeUNhdGVnb3J5LmdldChjYXRlZ29yeSkhLnB1c2godHJhaXQpO1xuXHRcdH1cblxuXHRcdGNvbnN0IGxpc3QgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1saXN0XCIgfSk7XG5cdFx0Zm9yIChjb25zdCBbY2F0ZWdvcnksIGNhdGVnb3J5VHJhaXRzXSBvZiB0cmFpdHNCeUNhdGVnb3J5LmVudHJpZXMoKSkge1xuXHRcdFx0Y29uc3QgZ3JvdXAgPSBsaXN0LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXBcIiB9KTtcblx0XHRcdGNvbnN0IGdyb3VwSGVhZGVyID0gZ3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1oZWFkZXJcIiB9KTtcblx0XHRcdGdyb3VwSGVhZGVyLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBjYXRlZ29yeSB9KTtcblxuXHRcdFx0Y29uc3QgZ3JvdXBJdGVtcyA9IGdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtaXRlbXNcIiB9KTtcblx0XHRcdGZvciAoY29uc3QgdHJhaXQgb2YgY2F0ZWdvcnlUcmFpdHMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdFx0Y29uc3QgaXRlbSA9IGdyb3VwSXRlbXMuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtXCIgfSk7XG5cdFx0XHRcdGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiLCB0ZXh0OiB0cmFpdC5uYW1lIH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29uc3QgbWV0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIgfSk7XG5cdFx0XHRcdGlmICh0cmFpdC5kZXNjcmlwdGlvbikge1xuXHRcdFx0XHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogdHJhaXQuZGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDUwKSArICh0cmFpdC5kZXNjcmlwdGlvbi5sZW5ndGggPiA1MCA/IFwiLi4uXCIgOiBcIlwiKSB9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbS1hY3Rpb25zXCIgfSk7XG5cdFx0XHRcdGNvbnN0IHRyYWl0RWRpdEJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkVkaXQgdHJhaXRcIiwgdGl0bGU6IFwiRWRpdCB0cmFpdFwiIH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHNldEljb24odHJhaXRFZGl0QnRuLCBcInBlbmNpbFwiKTtcblx0XHRcdFx0dHJhaXRFZGl0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5zaG93RWRpdFRyYWl0TW9kYWwodHJhaXQpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRjb25zdCB0cmFpdERlbGV0ZUJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkRlbGV0ZSB0cmFpdFwiLCB0aXRsZTogXCJEZWxldGUgdHJhaXRcIiB9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRzZXRJY29uKHRyYWl0RGVsZXRlQnRuLCBcInRyYXNoXCIpO1xuXHRcdFx0XHR0cmFpdERlbGV0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdGlmIChjb25maXJtKGBEZWxldGUgdHJhaXQgXCIke3RyYWl0Lm5hbWV9XCI/YCkpIHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5kZWxldGVUcmFpdCh0cmFpdC5pZCk7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiVHJhaXQgZGVsZXRlZFwiKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyQXJjaGV0eXBlc1RhYihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0aWYgKHRoaXMuYXJjaGV0eXBlcy5sZW5ndGggPT09IDApIHtcblx0XHRcdHRoaXMucmVuZGVyRW1wdHlDYXJkKGNvbnRhaW5lciwge1xuXHRcdFx0XHRpY29uOiBcInNoYXBlc1wiLFxuXHRcdFx0XHR0aXRsZTogXCJObyBhcmNoZXR5cGVzIGZvdW5kXCIsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkNyZWF0ZSB5b3VyIGZpcnN0IGFyY2hldHlwZSFcIixcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGxpc3QgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1saXN0XCIgfSk7XG5cdFx0Zm9yIChjb25zdCBhcmNoZXR5cGUgb2YgdGhpcy5hcmNoZXR5cGVzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRjb25zdCBpdGVtID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIiB9KTtcblx0XHRcdGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiLCB0ZXh0OiBhcmNoZXR5cGUubmFtZSB9KTtcblx0XHRcdFxuXHRcdFx0Y29uc3QgbWV0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIgfSk7XG5cdFx0XHRpZiAoYXJjaGV0eXBlLmRlc2NyaXB0aW9uKSB7XG5cdFx0XHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogYXJjaGV0eXBlLmRlc2NyaXB0aW9uLnN1YnN0cmluZygwLCA1MCkgKyAoYXJjaGV0eXBlLmRlc2NyaXB0aW9uLmxlbmd0aCA+IDUwID8gXCIuLi5cIiA6IFwiXCIpIH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0tYWN0aW9uc1wiIH0pO1xuXHRcdFx0Y29uc3Qgdmlld1RyYWl0c0J0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiVmlldyB0cmFpdHNcIiwgdGl0bGU6IFwiVmlldyB0cmFpdHNcIiB9XG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24odmlld1RyYWl0c0J0biwgXCJsaXN0XCIpO1xuXHRcdFx0dmlld1RyYWl0c0J0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGNvbnN0IHRyYWl0cyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRBcmNoZXR5cGVUcmFpdHMoYXJjaGV0eXBlLmlkKTtcblx0XHRcdFx0XHR0aGlzLnNob3dBcmNoZXR5cGVUcmFpdHNNb2RhbChhcmNoZXR5cGUsIHRyYWl0cyk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0Y29uc3QgYXJjaGV0eXBlRWRpdEJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiRWRpdCBhcmNoZXR5cGVcIiwgdGl0bGU6IFwiRWRpdCBhcmNoZXR5cGVcIiB9XG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24oYXJjaGV0eXBlRWRpdEJ0biwgXCJwZW5jaWxcIik7XG5cdFx0XHRhcmNoZXR5cGVFZGl0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuc2hvd0VkaXRBcmNoZXR5cGVNb2RhbChhcmNoZXR5cGUpO1xuXHRcdFx0fTtcblx0XHRcdGNvbnN0IGFyY2hldHlwZURlbGV0ZUJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiRGVsZXRlIGFyY2hldHlwZVwiLCB0aXRsZTogXCJEZWxldGUgYXJjaGV0eXBlXCIgfVxuXHRcdFx0fSk7XG5cdFx0XHRzZXRJY29uKGFyY2hldHlwZURlbGV0ZUJ0biwgXCJ0cmFzaFwiKTtcblx0XHRcdGFyY2hldHlwZURlbGV0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRpZiAoY29uZmlybShgRGVsZXRlIGFyY2hldHlwZSBcIiR7YXJjaGV0eXBlLm5hbWV9XCI/YCkpIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmRlbGV0ZUFyY2hldHlwZShhcmNoZXR5cGUuaWQpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkFyY2hldHlwZSBkZWxldGVkXCIpO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdHJlbmRlckxvcmVUYWIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGlmICh0aGlzLmxvcmVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dGhpcy5yZW5kZXJFbXB0eUNhcmQoY29udGFpbmVyLCB7XG5cdFx0XHRcdGljb246IFwiYm9vay1vcGVuXCIsXG5cdFx0XHRcdHRpdGxlOiBcIk5vIGxvcmUgZm91bmRcIixcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQ3JlYXRlIHlvdXIgZmlyc3QgbG9yZSFcIixcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEdyb3VwIGJ5IGhpZXJhcmNoeSBsZXZlbFxuXHRcdGNvbnN0IHJvb3RMb3JlcyA9IHRoaXMubG9yZXMuZmlsdGVyKGwgPT4gIWwucGFyZW50X2lkKTtcblx0XHRjb25zdCBsaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbGlzdFwiIH0pO1xuXHRcdFxuXHRcdGZvciAoY29uc3QgbG9yZSBvZiByb290TG9yZXMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdHRoaXMucmVuZGVyTG9yZUl0ZW0obGlzdCwgbG9yZSwgMCk7XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyTG9yZUl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgbG9yZTogTG9yZSwgbGV2ZWw6IG51bWJlcikge1xuXHRcdGNvbnN0IGl0ZW0gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtXCIgfSk7XG5cdFx0aXRlbS5zdHlsZS5tYXJnaW5MZWZ0ID0gYCR7bGV2ZWwgKiAxfXJlbWA7XG5cdFx0XG5cdFx0Y29uc3QgdGl0bGVSb3cgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIiB9KTtcblx0XHR0aXRsZVJvdy50ZXh0Q29udGVudCA9IGxvcmUubmFtZTtcblx0XHRpZiAobG9yZS5jYXRlZ29yeSkge1xuXHRcdFx0Y29uc3QgY2F0ZWdvcnlCYWRnZSA9IHRpdGxlUm93LmNyZWF0ZVNwYW4oeyBjbHM6IFwic3RvcnktZW5naW5lLWJhZGdlXCIgfSk7XG5cdFx0XHRjYXRlZ29yeUJhZGdlLnRleHRDb250ZW50ID0gbG9yZS5jYXRlZ29yeTtcblx0XHR9XG5cdFx0XG5cdFx0Y29uc3QgbWV0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIgfSk7XG5cdFx0aWYgKGxvcmUuZGVzY3JpcHRpb24pIHtcblx0XHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogbG9yZS5kZXNjcmlwdGlvbi5zdWJzdHJpbmcoMCwgNTApICsgKGxvcmUuZGVzY3JpcHRpb24ubGVuZ3RoID4gNTAgPyBcIi4uLlwiIDogXCJcIikgfSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgYWN0aW9ucyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtLWFjdGlvbnNcIiB9KTtcblx0XHQvLyBMaW5rIHRvIEVudGl0eVxuXHRcdGNvbnN0IGxpbmtCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiTGluayB0byBlbnRpdHlcIiwgdGl0bGU6IFwiTGluayB0byBlbnRpdHlcIiB9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihsaW5rQnRuLCBcImxpbmtcIik7XG5cdFx0bGlua0J0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zaG93QWRkTG9yZVJlZmVyZW5jZU1vZGFsKGxvcmUpO1xuXHRcdC8vIENyZWF0ZSBTdWItTG9yZVxuXHRcdGNvbnN0IHN1YkJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJDcmVhdGUgc3ViLWxvcmVcIiwgdGl0bGU6IFwiQ3JlYXRlIHN1Yi1sb3JlXCIgfVxuXHRcdH0pO1xuXHRcdHNldEljb24oc3ViQnRuLCBcImZvbGRlci1wbHVzXCIpO1xuXHRcdHN1YkJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zaG93Q3JlYXRlTG9yZU1vZGFsKGxvcmUuaWQpO1xuXHRcdGNvbnN0IGxvcmVFZGl0QnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkVkaXQgbG9yZVwiLCB0aXRsZTogXCJFZGl0IGxvcmVcIiB9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihsb3JlRWRpdEJ0biwgXCJwZW5jaWxcIik7XG5cdFx0bG9yZUVkaXRCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdHRoaXMuc2hvd0VkaXRMb3JlTW9kYWwobG9yZSk7XG5cdFx0fTtcblx0XHRjb25zdCBsb3JlRGVsZXRlQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkRlbGV0ZSBsb3JlXCIsIHRpdGxlOiBcIkRlbGV0ZSBsb3JlXCIgfVxuXHRcdH0pO1xuXHRcdHNldEljb24obG9yZURlbGV0ZUJ0biwgXCJ0cmFzaFwiKTtcblx0XHRsb3JlRGVsZXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoY29uZmlybShgRGVsZXRlIGxvcmUgXCIke2xvcmUubmFtZX1cIj9gKSkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5kZWxldGVMb3JlKGxvcmUuaWQpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShcIkxvcmUgZGVsZXRlZFwiKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gUmVuZGVyIGNoaWxkcmVuXG5cdFx0Y29uc3QgY2hpbGRyZW4gPSB0aGlzLmxvcmVzLmZpbHRlcihsID0+IGwucGFyZW50X2lkID09PSBsb3JlLmlkKTtcblx0XHRmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxkcmVuLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHR0aGlzLnJlbmRlckxvcmVJdGVtKGNvbnRhaW5lciwgY2hpbGQsIGxldmVsICsgMSk7XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyRmFjdGlvbnNUYWIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGlmICh0aGlzLmZhY3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dGhpcy5yZW5kZXJFbXB0eUNhcmQoY29udGFpbmVyLCB7XG5cdFx0XHRcdGljb246IFwidXNlcnNcIixcblx0XHRcdFx0dGl0bGU6IFwiTm8gZmFjdGlvbnMgZm91bmRcIixcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQ3JlYXRlIHlvdXIgZmlyc3QgZmFjdGlvbiFcIixcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEdyb3VwIGJ5IGhpZXJhcmNoeSBsZXZlbFxuXHRcdGNvbnN0IHJvb3RGYWN0aW9ucyA9IHRoaXMuZmFjdGlvbnMuZmlsdGVyKGYgPT4gIWYucGFyZW50X2lkKTtcblx0XHRjb25zdCBsaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbGlzdFwiIH0pO1xuXHRcdFxuXHRcdGZvciAoY29uc3QgZmFjdGlvbiBvZiByb290RmFjdGlvbnMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdHRoaXMucmVuZGVyRmFjdGlvbkl0ZW0obGlzdCwgZmFjdGlvbiwgMCk7XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyRmFjdGlvbkl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZmFjdGlvbjogRmFjdGlvbiwgbGV2ZWw6IG51bWJlcikge1xuXHRcdGNvbnN0IGl0ZW0gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtXCIgfSk7XG5cdFx0aXRlbS5zdHlsZS5tYXJnaW5MZWZ0ID0gYCR7bGV2ZWwgKiAxfXJlbWA7XG5cdFx0XG5cdFx0Y29uc3QgdGl0bGVSb3cgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIiB9KTtcblx0XHR0aXRsZVJvdy50ZXh0Q29udGVudCA9IGZhY3Rpb24ubmFtZTtcblx0XHRpZiAoZmFjdGlvbi50eXBlKSB7XG5cdFx0XHRjb25zdCB0eXBlQmFkZ2UgPSB0aXRsZVJvdy5jcmVhdGVTcGFuKHsgY2xzOiBcInN0b3J5LWVuZ2luZS1iYWRnZVwiIH0pO1xuXHRcdFx0dHlwZUJhZGdlLnRleHRDb250ZW50ID0gZmFjdGlvbi50eXBlO1xuXHRcdH1cblx0XHRcblx0XHRjb25zdCBtZXRhID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRpZiAoZmFjdGlvbi5kZXNjcmlwdGlvbikge1xuXHRcdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBmYWN0aW9uLmRlc2NyaXB0aW9uLnN1YnN0cmluZygwLCA1MCkgKyAoZmFjdGlvbi5kZXNjcmlwdGlvbi5sZW5ndGggPiA1MCA/IFwiLi4uXCIgOiBcIlwiKSB9KTtcblx0XHR9XG5cblx0XHRjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0tYWN0aW9uc1wiIH0pO1xuXHRcdC8vIExpbmsgdG8gRW50aXR5XG5cdFx0Y29uc3QgbGlua0J0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJMaW5rIHRvIGVudGl0eVwiLCB0aXRsZTogXCJMaW5rIHRvIGVudGl0eVwiIH1cblx0XHR9KTtcblx0XHRzZXRJY29uKGxpbmtCdG4sIFwibGlua1wiKTtcblx0XHRsaW5rQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNob3dBZGRGYWN0aW9uUmVmZXJlbmNlTW9kYWwoZmFjdGlvbik7XG5cdFx0Ly8gQ3JlYXRlIFN1Yi1GYWN0aW9uXG5cdFx0Y29uc3Qgc3ViQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkNyZWF0ZSBzdWItZmFjdGlvblwiLCB0aXRsZTogXCJDcmVhdGUgc3ViLWZhY3Rpb25cIiB9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihzdWJCdG4sIFwiZm9sZGVyLXBsdXNcIik7XG5cdFx0c3ViQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNob3dDcmVhdGVGYWN0aW9uTW9kYWwoZmFjdGlvbi5pZCk7XG5cdFx0Y29uc3QgZmFjdGlvblZpZXdCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWFjdGlvbi1idG5cIixcblx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiVmlldyBmYWN0aW9uIGRldGFpbHNcIiwgdGl0bGU6IFwiVmlldyBmYWN0aW9uIGRldGFpbHNcIiB9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihmYWN0aW9uVmlld0J0biwgXCJleWVcIik7XG5cdFx0ZmFjdGlvblZpZXdCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdHRoaXMuc2hvd0ZhY3Rpb25EZXRhaWxzTW9kYWwoZmFjdGlvbik7XG5cdFx0fTtcblx0XHRjb25zdCBmYWN0aW9uRWRpdEJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJFZGl0IGZhY3Rpb25cIiwgdGl0bGU6IFwiRWRpdCBmYWN0aW9uXCIgfVxuXHRcdH0pO1xuXHRcdHNldEljb24oZmFjdGlvbkVkaXRCdG4sIFwicGVuY2lsXCIpO1xuXHRcdGZhY3Rpb25FZGl0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLnNob3dFZGl0RmFjdGlvbk1vZGFsKGZhY3Rpb24pO1xuXHRcdH07XG5cdFx0Y29uc3QgZmFjdGlvbkRlbGV0ZUJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktYWN0aW9uLWJ0blwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJEZWxldGUgZmFjdGlvblwiLCB0aXRsZTogXCJEZWxldGUgZmFjdGlvblwiIH1cblx0XHR9KTtcblx0XHRzZXRJY29uKGZhY3Rpb25EZWxldGVCdG4sIFwidHJhc2hcIik7XG5cdFx0ZmFjdGlvbkRlbGV0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKGNvbmZpcm0oYERlbGV0ZSBmYWN0aW9uIFwiJHtmYWN0aW9uLm5hbWV9XCI/YCkpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZGVsZXRlRmFjdGlvbihmYWN0aW9uLmlkKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJGYWN0aW9uIGRlbGV0ZWRcIik7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIFJlbmRlciBjaGlsZHJlblxuXHRcdGNvbnN0IGNoaWxkcmVuID0gdGhpcy5mYWN0aW9ucy5maWx0ZXIoZiA9PiBmLnBhcmVudF9pZCA9PT0gZmFjdGlvbi5pZCk7XG5cdFx0Zm9yIChjb25zdCBjaGlsZCBvZiBjaGlsZHJlbi5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0dGhpcy5yZW5kZXJGYWN0aW9uSXRlbShjb250YWluZXIsIGNoaWxkLCBsZXZlbCArIDEpO1xuXHRcdH1cblx0fVxuXG5cdC8vIE1vZGFsIG1ldGhvZHMgZm9yIFdvcmxkIGVudGl0aWVzXG5cdHNob3dDcmVhdGVDaGFyYWN0ZXJNb2RhbCgpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFdvcmxkKSByZXR1cm47XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkNyZWF0ZSBDaGFyYWN0ZXJcIik7XG5cdFx0XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgbmFtZSA9IFwiXCI7XG5cdFx0bGV0IGRlc2NyaXB0aW9uID0gXCJcIjtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTmFtZSAqXCIgfSk7XG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiB9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0ZGVzY0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IGNyZWF0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ3JlYXRlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0Y3JlYXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIW5hbWUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJOYW1lIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlQ2hhcmFjdGVyKHRoaXMuY3VycmVudFdvcmxkIS5pZCwgeyBuYW1lOiBuYW1lLnRyaW0oKSwgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSB9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJDaGFyYWN0ZXIgY3JlYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0bmFtZUlucHV0LmZvY3VzKCk7XG5cdH1cblxuXHRzaG93RWRpdENoYXJhY3Rlck1vZGFsKGNoYXJhY3RlcjogQ2hhcmFjdGVyKSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkVkaXQgQ2hhcmFjdGVyXCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSBjaGFyYWN0ZXIubmFtZTtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSBjaGFyYWN0ZXIuZGVzY3JpcHRpb247XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IG5hbWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsIHZhbHVlOiBuYW1lIH0pO1xuXHRcdG5hbWVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBuYW1lID0gbmFtZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRkZXNjSW5wdXQudmFsdWUgPSBkZXNjcmlwdGlvbjtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghbmFtZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk5hbWUgaXMgcmVxdWlyZWRcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlQ2hhcmFjdGVyKGNoYXJhY3Rlci5pZCwgeyBuYW1lOiBuYW1lLnRyaW0oKSwgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSB9KTtcblx0XHRcdFx0Ly8gVXBkYXRlIGNoYXJhY3RlciBkZXRhaWxzIHZpZXcgaWYgd2UncmUgaW4gY2hhcmFjdGVyIGRldGFpbHMgdmlld1xuXHRcdFx0XHRpZiAodGhpcy52aWV3TW9kZSA9PT0gXCJjaGFyYWN0ZXItZGV0YWlsc1wiICYmIHRoaXMuY2hhcmFjdGVyRGV0YWlsc1ZpZXcgJiYgdGhpcy5jaGFyYWN0ZXJEZXRhaWxzVmlld1tcImNoYXJhY3RlclwiXS5pZCA9PT0gY2hhcmFjdGVyLmlkKSB7XG5cdFx0XHRcdFx0dGhpcy5jaGFyYWN0ZXJEZXRhaWxzVmlldy51cGRhdGVDaGFyYWN0ZXIodXBkYXRlZCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQ2hhcmFjdGVyIHVwZGF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0c2hvd0NyZWF0ZUxvY2F0aW9uTW9kYWwoKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJDcmVhdGUgTG9jYXRpb25cIik7XG5cdFx0XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgbmFtZSA9IFwiXCI7XG5cdFx0bGV0IHR5cGUgPSBcIlwiO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IFwiXCI7XG5cdFx0bGV0IHBhcmVudElkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTmFtZSAqXCIgfSk7XG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiB9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiVHlwZVwiIH0pO1xuXHRcdGNvbnN0IHR5cGVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsIHBsYWNlaG9sZGVyOiBcImUuZy4sIENpdHksIEZvcmVzdCwgQnVpbGRpbmdcIiB9KTtcblx0XHR0eXBlSW5wdXQub25pbnB1dCA9ICgpID0+IHsgdHlwZSA9IHR5cGVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiUGFyZW50IExvY2F0aW9uXCIgfSk7XG5cdFx0Y29uc3QgcGFyZW50U2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0cGFyZW50U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiXCIsIHRleHQ6IFwiTm9uZSAoUm9vdCBMb2NhdGlvbilcIiB9KTtcblx0XHRmb3IgKGNvbnN0IGxvYyBvZiB0aGlzLmxvY2F0aW9ucy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0cGFyZW50U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IGxvYy5pZCwgdGV4dDogbG9jLm5hbWUgfSk7XG5cdFx0fVxuXHRcdHBhcmVudFNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHsgcGFyZW50SWQgPSBwYXJlbnRTZWxlY3QudmFsdWUgfHwgbnVsbDsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0ZGVzY0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IGNyZWF0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ3JlYXRlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0Y3JlYXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIW5hbWUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJOYW1lIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlTG9jYXRpb24odGhpcy5jdXJyZW50V29ybGQhLmlkLCB7IFxuXHRcdFx0XHRcdG5hbWU6IG5hbWUudHJpbSgpLCBcblx0XHRcdFx0XHR0eXBlOiB0eXBlLnRyaW0oKSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpLFxuXHRcdFx0XHRcdHBhcmVudF9pZDogcGFyZW50SWRcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTG9jYXRpb24gY3JlYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0bmFtZUlucHV0LmZvY3VzKCk7XG5cdH1cblxuXHRzaG93RWRpdExvY2F0aW9uTW9kYWwobG9jYXRpb246IExvY2F0aW9uKSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkVkaXQgTG9jYXRpb25cIik7XG5cdFx0XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgbmFtZSA9IGxvY2F0aW9uLm5hbWU7XG5cdFx0bGV0IHR5cGUgPSBsb2NhdGlvbi50eXBlO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IGxvY2F0aW9uLmRlc2NyaXB0aW9uO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCB2YWx1ZTogbmFtZSB9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiVHlwZVwiIH0pO1xuXHRcdGNvbnN0IHR5cGVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsIHZhbHVlOiB0eXBlIH0pO1xuXHRcdHR5cGVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyB0eXBlID0gdHlwZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRkZXNjSW5wdXQudmFsdWUgPSBkZXNjcmlwdGlvbjtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghbmFtZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk5hbWUgaXMgcmVxdWlyZWRcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVMb2NhdGlvbihsb2NhdGlvbi5pZCwgeyBuYW1lOiBuYW1lLnRyaW0oKSwgdHlwZTogdHlwZS50cmltKCksIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKCkgfSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTG9jYXRpb24gdXBkYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRzaG93Q3JlYXRlQXJ0aWZhY3RNb2RhbCgpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFdvcmxkKSByZXR1cm47XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkNyZWF0ZSBBcnRpZmFjdFwiKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBuYW1lID0gXCJcIjtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSBcIlwiO1xuXHRcdGxldCByYXJpdHkgPSBcIlwiO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiIH0pO1xuXHRcdG5hbWVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBuYW1lID0gbmFtZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJSYXJpdHlcIiB9KTtcblx0XHRjb25zdCByYXJpdHlTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHRyYXJpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJcIiwgdGV4dDogXCJTZWxlY3QgUmFyaXR5XCIgfSk7XG5cdFx0W1wiQ29tbW9uXCIsIFwiVW5jb21tb25cIiwgXCJSYXJlXCIsIFwiRXBpY1wiLCBcIkxlZ2VuZGFyeVwiLCBcIlVuaXF1ZVwiXS5mb3JFYWNoKHIgPT4ge1xuXHRcdFx0cmFyaXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IHIudG9Mb3dlckNhc2UoKSwgdGV4dDogciB9KTtcblx0XHR9KTtcblx0XHRyYXJpdHlTZWxlY3Qub25jaGFuZ2UgPSAoKSA9PiB7IHJhcml0eSA9IHJhcml0eVNlbGVjdC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0ZGVzY0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IGNyZWF0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ3JlYXRlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0Y3JlYXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIW5hbWUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJOYW1lIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlQXJ0aWZhY3QodGhpcy5jdXJyZW50V29ybGQhLmlkLCB7IFxuXHRcdFx0XHRcdG5hbWU6IG5hbWUudHJpbSgpLCBcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpLFxuXHRcdFx0XHRcdHJhcml0eTogcmFyaXR5XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkFydGlmYWN0IGNyZWF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHRcdG5hbWVJbnB1dC5mb2N1cygpO1xuXHR9XG5cblx0c2hvd0VkaXRBcnRpZmFjdE1vZGFsKGFydGlmYWN0OiBBcnRpZmFjdCkge1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJFZGl0IEFydGlmYWN0XCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSBhcnRpZmFjdC5uYW1lO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IGFydGlmYWN0LmRlc2NyaXB0aW9uO1xuXHRcdGxldCByYXJpdHkgPSBhcnRpZmFjdC5yYXJpdHk7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IG5hbWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsIHZhbHVlOiBuYW1lIH0pO1xuXHRcdG5hbWVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBuYW1lID0gbmFtZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJSYXJpdHlcIiB9KTtcblx0XHRjb25zdCByYXJpdHlTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHRyYXJpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJcIiwgdGV4dDogXCJTZWxlY3QgUmFyaXR5XCIgfSk7XG5cdFx0W1wiQ29tbW9uXCIsIFwiVW5jb21tb25cIiwgXCJSYXJlXCIsIFwiRXBpY1wiLCBcIkxlZ2VuZGFyeVwiLCBcIlVuaXF1ZVwiXS5mb3JFYWNoKHIgPT4ge1xuXHRcdFx0Y29uc3Qgb3B0ID0gcmFyaXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IHIudG9Mb3dlckNhc2UoKSwgdGV4dDogciB9KTtcblx0XHRcdGlmIChyYXJpdHkudG9Mb3dlckNhc2UoKSA9PT0gci50b0xvd2VyQ2FzZSgpKSBvcHQuc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdH0pO1xuXHRcdHJhcml0eVNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHsgcmFyaXR5ID0gcmFyaXR5U2VsZWN0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRkZXNjSW5wdXQudmFsdWUgPSBkZXNjcmlwdGlvbjtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghbmFtZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk5hbWUgaXMgcmVxdWlyZWRcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVBcnRpZmFjdChhcnRpZmFjdC5pZCwgeyBuYW1lOiBuYW1lLnRyaW0oKSwgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSwgcmFyaXR5OiByYXJpdHkgfSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQXJ0aWZhY3QgdXBkYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRzaG93Q3JlYXRlRXZlbnRNb2RhbCgpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFdvcmxkKSByZXR1cm47XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkNyZWF0ZSBFdmVudFwiKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBuYW1lID0gXCJcIjtcblx0XHRsZXQgdHlwZSA9IFwiXCI7XG5cdFx0bGV0IGRlc2NyaXB0aW9uID0gXCJcIjtcblx0XHRsZXQgaW1wb3J0YW5jZSA9IDU7XG5cdFx0bGV0IHRpbWVsaW5lUG9zaXRpb246IG51bWJlciB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuXHRcdC8vID09PSBCQVNJQyBJTkZPID09PVxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiQmFzaWMgSW5mb1wiLCBjbHM6IFwic3RvcnktZW5naW5lLW1vZGFsLXNlY3Rpb25cIiB9KTtcblx0XHRcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkV2ZW50IE5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IG5hbWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IFxuXHRcdFx0dHlwZTogXCJ0ZXh0XCIsIFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLFxuXHRcdFx0cGxhY2Vob2xkZXI6IFwiZS5nLiwgVGhlIEJhdHRsZSBvZiBDcmltc29uIEZpZWxkc1wiXG5cdFx0fSk7XG5cdFx0bmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkV2ZW50IFR5cGVcIiB9KTtcblx0XHRjb25zdCB0eXBlU2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcIlwiLCB0ZXh0OiBcIlNlbGVjdCB0eXBlLi4uXCIgfSk7XG5cdFx0W1wiQmF0dGxlXCIsIFwiVHJlYXR5XCIsIFwiRGlzY292ZXJ5XCIsIFwiQmlydGhcIiwgXCJEZWF0aFwiLCBcIkNvcm9uYXRpb25cIiwgXCJEaXNhc3RlclwiLCBcIk1pZ3JhdGlvblwiLCBcIkZvdW5kaW5nXCIsIFwiT3RoZXJcIl0uZm9yRWFjaCh0ID0+IHtcblx0XHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogdCwgdGV4dDogdCB9KTtcblx0XHR9KTtcblx0XHR0eXBlU2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4geyB0eXBlID0gdHlwZVNlbGVjdC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIixcblx0XHRcdHBsYWNlaG9sZGVyOiBcIldoYXQgaGFwcGVuZWQgZHVyaW5nIHRoaXMgZXZlbnQ/XCJcblx0XHR9KTtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHQvLyA9PT0gVElNRUxJTkUgPT09XG5cdFx0Y29udGVudC5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJcdUQ4M0RcdURDQzUgVGltZWxpbmUgUG9zaXRpb25cIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1tb2RhbC1zZWN0aW9uXCIgfSk7XG5cdFx0XG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJZZWFyIChyZWxhdGl2ZSB0byBFcG9jaC9ZZWFyIFplcm8pXCIgfSk7XG5cdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyBcblx0XHRcdHRleHQ6IFwiVXNlIHBvc2l0aXZlIG51bWJlcnMgZm9yIHllYXJzIGFmdGVyIFllYXIgWmVybywgbmVnYXRpdmUgZm9yIHllYXJzIGJlZm9yZS5cIixcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaGludFwiXG5cdFx0fSk7XG5cdFx0Y29uc3QgdGltZWxpbmVQb3NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IFxuXHRcdFx0dHlwZTogXCJudW1iZXJcIiwgXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsIFxuXHRcdFx0cGxhY2Vob2xkZXI6IFwiZS5nLiwgMTAwIChZZWFyIDEwMCkgb3IgLTUwICg1MCB5ZWFycyBiZWZvcmUgWWVhciBaZXJvKVwiXG5cdFx0fSk7XG5cdFx0dGltZWxpbmVQb3NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBcblx0XHRcdGNvbnN0IHZhbCA9IHRpbWVsaW5lUG9zSW5wdXQudmFsdWU7XG5cdFx0XHR0aW1lbGluZVBvc2l0aW9uID0gdmFsID8gcGFyc2VJbnQodmFsKSA6IHVuZGVmaW5lZDtcblx0XHR9O1xuXG5cdFx0Ly8gPT09IElNUE9SVEFOQ0UgPT09XG5cdFx0Y29udGVudC5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJcdTJCNTAgSW1wb3J0YW5jZVwiLCBjbHM6IFwic3RvcnktZW5naW5lLW1vZGFsLXNlY3Rpb25cIiB9KTtcblx0XHRcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkltcG9ydGFuY2UgTGV2ZWwgKDEtMTApXCIgfSk7XG5cdFx0Y29uc3QgaW1wb3J0YW5jZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgXG5cdFx0XHR0eXBlOiBcInJhbmdlXCIsIFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1yYW5nZVwiLFxuXHRcdFx0dmFsdWU6IFwiNVwiLCBcblx0XHRcdGF0dHI6IHsgbWluOiBcIjFcIiwgbWF4OiBcIjEwXCIgfSBcblx0XHR9KTtcblx0XHRjb25zdCBpbXBvcnRhbmNlVmFsdWUgPSBjb250ZW50LmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IFwiIDVcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1yYW5nZS12YWx1ZVwiIH0pO1xuXHRcdGltcG9ydGFuY2VJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBcblx0XHRcdGltcG9ydGFuY2UgPSBwYXJzZUludChpbXBvcnRhbmNlSW5wdXQudmFsdWUpIHx8IDU7XG5cdFx0XHRpbXBvcnRhbmNlVmFsdWUudGV4dENvbnRlbnQgPSBgICR7aW1wb3J0YW5jZX1gO1xuXHRcdH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3QgY3JlYXRlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDcmVhdGUgRXZlbnRcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRjcmVhdGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghbmFtZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk5hbWUgaXMgcmVxdWlyZWRcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVFdmVudCh0aGlzLmN1cnJlbnRXb3JsZCEuaWQsIHsgXG5cdFx0XHRcdFx0bmFtZTogbmFtZS50cmltKCksIFxuXHRcdFx0XHRcdHR5cGU6IHR5cGUudHJpbSgpIHx8IHVuZGVmaW5lZCxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpIHx8IHVuZGVmaW5lZCxcblx0XHRcdFx0XHRpbXBvcnRhbmNlOiBNYXRoLm1heCgxLCBNYXRoLm1pbigxMCwgaW1wb3J0YW5jZSkpLFxuXHRcdFx0XHRcdHRpbWVsaW5lX3Bvc2l0aW9uOiB0aW1lbGluZVBvc2l0aW9uXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkV2ZW50IGNyZWF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHRcdG5hbWVJbnB1dC5mb2N1cygpO1xuXHR9XG5cblx0c2hvd0VkaXRFdmVudE1vZGFsKGV2ZW50OiBXb3JsZEV2ZW50KSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkVkaXQgRXZlbnRcIik7XG5cdFx0XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgbmFtZSA9IGV2ZW50Lm5hbWU7XG5cdFx0bGV0IHR5cGUgPSBldmVudC50eXBlIHx8IFwiXCI7XG5cdFx0bGV0IGRlc2NyaXB0aW9uID0gZXZlbnQuZGVzY3JpcHRpb24gfHwgXCJcIjtcblx0XHRsZXQgaW1wb3J0YW5jZSA9IGV2ZW50LmltcG9ydGFuY2U7XG5cdFx0bGV0IHRpbWVsaW5lUG9zaXRpb246IG51bWJlciB8IHVuZGVmaW5lZCA9IGV2ZW50LnRpbWVsaW5lX3Bvc2l0aW9uID8/IHVuZGVmaW5lZDtcblxuXHRcdC8vID09PSBCQVNJQyBJTkZPID09PVxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiQmFzaWMgSW5mb1wiLCBjbHM6IFwic3RvcnktZW5naW5lLW1vZGFsLXNlY3Rpb25cIiB9KTtcblx0XHRcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkV2ZW50IE5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IG5hbWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsIHZhbHVlOiBuYW1lIH0pO1xuXHRcdG5hbWVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBuYW1lID0gbmFtZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJFdmVudCBUeXBlXCIgfSk7XG5cdFx0Y29uc3QgdHlwZVNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJcIiwgdGV4dDogXCJTZWxlY3QgdHlwZS4uLlwiIH0pO1xuXHRcdFtcIkJhdHRsZVwiLCBcIlRyZWF0eVwiLCBcIkRpc2NvdmVyeVwiLCBcIkJpcnRoXCIsIFwiRGVhdGhcIiwgXCJDb3JvbmF0aW9uXCIsIFwiRGlzYXN0ZXJcIiwgXCJNaWdyYXRpb25cIiwgXCJGb3VuZGluZ1wiLCBcIkVwb2NoXCIsIFwiT3RoZXJcIl0uZm9yRWFjaCh0ID0+IHtcblx0XHRcdGNvbnN0IG9wdCA9IHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogdCwgdGV4dDogdCB9KTtcblx0XHRcdGlmICh0eXBlLnRvTG93ZXJDYXNlKCkgPT09IHQudG9Mb3dlckNhc2UoKSkgb3B0LnNlbGVjdGVkID0gdHJ1ZTtcblx0XHR9KTtcblx0XHR0eXBlU2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4geyB0eXBlID0gdHlwZVNlbGVjdC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0ZGVzY0lucHV0LnZhbHVlID0gZGVzY3JpcHRpb247XG5cdFx0ZGVzY0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Ly8gPT09IFRJTUVMSU5FID09PVxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiXHVEODNEXHVEQ0M1IFRpbWVsaW5lIFBvc2l0aW9uXCIsIGNsczogXCJzdG9yeS1lbmdpbmUtbW9kYWwtc2VjdGlvblwiIH0pO1xuXHRcdFxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiWWVhciAocmVsYXRpdmUgdG8gRXBvY2gvWWVhciBaZXJvKVwiIH0pO1xuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgXG5cdFx0XHR0ZXh0OiBcIlVzZSBwb3NpdGl2ZSBudW1iZXJzIGZvciB5ZWFycyBhZnRlciBZZWFyIFplcm8sIG5lZ2F0aXZlIGZvciB5ZWFycyBiZWZvcmUuXCIsXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWhpbnRcIlxuXHRcdH0pO1xuXHRcdGNvbnN0IHRpbWVsaW5lUG9zSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyBcblx0XHRcdHR5cGU6IFwibnVtYmVyXCIsIFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCBcblx0XHRcdHZhbHVlOiB0aW1lbGluZVBvc2l0aW9uPy50b1N0cmluZygpID8/IFwiXCJcblx0XHR9KTtcblx0XHR0aW1lbGluZVBvc0lucHV0LnBsYWNlaG9sZGVyID0gXCJlLmcuLCAxMDAgb3IgLTUwXCI7XG5cdFx0dGltZWxpbmVQb3NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBcblx0XHRcdGNvbnN0IHZhbCA9IHRpbWVsaW5lUG9zSW5wdXQudmFsdWU7XG5cdFx0XHR0aW1lbGluZVBvc2l0aW9uID0gdmFsID8gcGFyc2VJbnQodmFsKSA6IHVuZGVmaW5lZDtcblx0XHR9O1xuXG5cdFx0Ly8gPT09IElNUE9SVEFOQ0UgPT09XG5cdFx0Y29udGVudC5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJcdTJCNTAgSW1wb3J0YW5jZVwiLCBjbHM6IFwic3RvcnktZW5naW5lLW1vZGFsLXNlY3Rpb25cIiB9KTtcblx0XHRcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkltcG9ydGFuY2UgTGV2ZWwgKDEtMTApXCIgfSk7XG5cdFx0Y29uc3QgaW1wb3J0YW5jZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgXG5cdFx0XHR0eXBlOiBcInJhbmdlXCIsIFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1yYW5nZVwiLFxuXHRcdFx0dmFsdWU6IGltcG9ydGFuY2UudG9TdHJpbmcoKSwgXG5cdFx0XHRhdHRyOiB7IG1pbjogXCIxXCIsIG1heDogXCIxMFwiIH0gXG5cdFx0fSk7XG5cdFx0Y29uc3QgaW1wb3J0YW5jZVZhbHVlID0gY29udGVudC5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBgICR7aW1wb3J0YW5jZX1gLCBjbHM6IFwic3RvcnktZW5naW5lLXJhbmdlLXZhbHVlXCIgfSk7XG5cdFx0aW1wb3J0YW5jZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IFxuXHRcdFx0aW1wb3J0YW5jZSA9IHBhcnNlSW50KGltcG9ydGFuY2VJbnB1dC52YWx1ZSkgfHwgNTtcblx0XHRcdGltcG9ydGFuY2VWYWx1ZS50ZXh0Q29udGVudCA9IGAgJHtpbXBvcnRhbmNlfWA7XG5cdFx0fTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTYXZlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUV2ZW50KGV2ZW50LmlkLCB7IFxuXHRcdFx0XHRcdG5hbWU6IG5hbWUudHJpbSgpLCBcblx0XHRcdFx0XHR0eXBlOiB0eXBlLnRyaW0oKSB8fCB1bmRlZmluZWQsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSB8fCB1bmRlZmluZWQsXG5cdFx0XHRcdFx0aW1wb3J0YW5jZTogTWF0aC5tYXgoMSwgTWF0aC5taW4oMTAsIGltcG9ydGFuY2UpKSxcblx0XHRcdFx0XHR0aW1lbGluZV9wb3NpdGlvbjogdGltZWxpbmVQb3NpdGlvblxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJFdmVudCB1cGRhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHNob3dDcmVhdGVUcmFpdE1vZGFsKCkge1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJDcmVhdGUgVHJhaXRcIik7XG5cdFx0XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgbmFtZSA9IFwiXCI7XG5cdFx0bGV0IGNhdGVnb3J5ID0gXCJcIjtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSBcIlwiO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiIH0pO1xuXHRcdG5hbWVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBuYW1lID0gbmFtZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJDYXRlZ29yeVwiIH0pO1xuXHRcdGNvbnN0IGNhdGVnb3J5SW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCBwbGFjZWhvbGRlcjogXCJlLmcuLCBQZXJzb25hbGl0eSwgUGh5c2ljYWwsIEJhY2tncm91bmRcIiB9KTtcblx0XHRjYXRlZ29yeUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGNhdGVnb3J5ID0gY2F0ZWdvcnlJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0ZGVzY0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IGNyZWF0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ3JlYXRlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0Y3JlYXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIW5hbWUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJOYW1lIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlVHJhaXQoeyBcblx0XHRcdFx0XHRuYW1lOiBuYW1lLnRyaW0oKSwgXG5cdFx0XHRcdFx0Y2F0ZWdvcnk6IGNhdGVnb3J5LnRyaW0oKSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIlRyYWl0IGNyZWF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHRcdG5hbWVJbnB1dC5mb2N1cygpO1xuXHR9XG5cblx0c2hvd0VkaXRUcmFpdE1vZGFsKHRyYWl0OiBUcmFpdCkge1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJFZGl0IFRyYWl0XCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSB0cmFpdC5uYW1lO1xuXHRcdGxldCBjYXRlZ29yeSA9IHRyYWl0LmNhdGVnb3J5O1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IHRyYWl0LmRlc2NyaXB0aW9uO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCB2YWx1ZTogbmFtZSB9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiQ2F0ZWdvcnlcIiB9KTtcblx0XHRjb25zdCBjYXRlZ29yeUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgdmFsdWU6IGNhdGVnb3J5IH0pO1xuXHRcdGNhdGVnb3J5SW5wdXQub25pbnB1dCA9ICgpID0+IHsgY2F0ZWdvcnkgPSBjYXRlZ29yeUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRkZXNjSW5wdXQudmFsdWUgPSBkZXNjcmlwdGlvbjtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghbmFtZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk5hbWUgaXMgcmVxdWlyZWRcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVUcmFpdCh0cmFpdC5pZCwgeyBuYW1lOiBuYW1lLnRyaW0oKSwgY2F0ZWdvcnk6IGNhdGVnb3J5LnRyaW0oKSwgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSB9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJUcmFpdCB1cGRhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHJlbmRlclRpbWVDb25maWdEaXNwbGF5KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGNvbmZpZzogVGltZUNvbmZpZykge1xuXHRcdGNvbnRhaW5lci5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJUaW1lIENvbmZpZ3VyYXRpb25cIiB9KTtcblx0XHRcblx0XHRjb25zdCBncmlkID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGltZS1jb25maWctZ3JpZFwiIH0pO1xuXHRcdFxuXHRcdC8vIE1vc3RyYXIgY2FtcG9zXG5cdFx0Z3JpZC5jcmVhdGVEaXYoKS5zZXRUZXh0KGBCYXNlIFVuaXQ6ICR7Y29uZmlnLmJhc2VfdW5pdH1gKTtcblx0XHRncmlkLmNyZWF0ZURpdigpLnNldFRleHQoYEhvdXJzL0RheTogJHtjb25maWcuaG91cnNfcGVyX2RheX1gKTtcblx0XHRncmlkLmNyZWF0ZURpdigpLnNldFRleHQoYERheXMvV2VlazogJHtjb25maWcuZGF5c19wZXJfd2Vla31gKTtcblx0XHRncmlkLmNyZWF0ZURpdigpLnNldFRleHQoYERheXMvWWVhcjogJHtjb25maWcuZGF5c19wZXJfeWVhcn1gKTtcblx0XHRncmlkLmNyZWF0ZURpdigpLnNldFRleHQoYE1vbnRocy9ZZWFyOiAke2NvbmZpZy5tb250aHNfcGVyX3llYXJ9YCk7XG5cdFx0XG5cdFx0aWYgKGNvbmZpZy5lcmFfbmFtZSkge1xuXHRcdFx0Z3JpZC5jcmVhdGVEaXYoKS5zZXRUZXh0KGBFcmE6ICR7Y29uZmlnLmVyYV9uYW1lfWApO1xuXHRcdH1cblx0XHRpZiAoY29uZmlnLm1vbnRoX25hbWVzPy5sZW5ndGgpIHtcblx0XHRcdGdyaWQuY3JlYXRlRGl2KCkuc2V0VGV4dChgTW9udGhzOiAke2NvbmZpZy5tb250aF9uYW1lcy5qb2luKFwiLCBcIil9YCk7XG5cdFx0fVxuXHRcdGlmIChjb25maWcueWVhcl96ZXJvICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdGdyaWQuY3JlYXRlRGl2KCkuc2V0VGV4dChgWWVhciBaZXJvOiAke2NvbmZpZy55ZWFyX3plcm99YCk7XG5cdFx0fVxuXHR9XG5cblx0c2hvd1RpbWVDb25maWdNb2RhbChleGlzdGluZ0NvbmZpZzogVGltZUNvbmZpZyB8IG51bGwpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFdvcmxkKSByZXR1cm47XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChleGlzdGluZ0NvbmZpZyA/IFwiRWRpdCBUaW1lIENvbmZpZ3VyYXRpb25cIiA6IFwiQ3JlYXRlIFRpbWUgQ29uZmlndXJhdGlvblwiKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBiYXNlVW5pdCA9IGV4aXN0aW5nQ29uZmlnPy5iYXNlX3VuaXQgfHwgXCJ5ZWFyXCI7XG5cdFx0bGV0IGhvdXJzUGVyRGF5ID0gZXhpc3RpbmdDb25maWc/LmhvdXJzX3Blcl9kYXkgfHwgMjQ7XG5cdFx0bGV0IGRheXNQZXJXZWVrID0gZXhpc3RpbmdDb25maWc/LmRheXNfcGVyX3dlZWsgfHwgNztcblx0XHRsZXQgZGF5c1BlclllYXIgPSBleGlzdGluZ0NvbmZpZz8uZGF5c19wZXJfeWVhciB8fCAzNjU7XG5cdFx0bGV0IG1vbnRoc1BlclllYXIgPSBleGlzdGluZ0NvbmZpZz8ubW9udGhzX3Blcl95ZWFyIHx8IDEyO1xuXHRcdGxldCBlcmFOYW1lID0gZXhpc3RpbmdDb25maWc/LmVyYV9uYW1lIHx8IFwiXCI7XG5cdFx0bGV0IHllYXJaZXJvID0gZXhpc3RpbmdDb25maWc/LnllYXJfemVybz8udG9TdHJpbmcoKSB8fCBcIlwiO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJCYXNlIFVuaXQgKlwiIH0pO1xuXHRcdGNvbnN0IGJhc2VVbml0U2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0W1wieWVhclwiLCBcImRheVwiLCBcImhvdXJcIiwgXCJjdXN0b21cIl0uZm9yRWFjaCh1bml0ID0+IHtcblx0XHRcdGNvbnN0IG9wdCA9IGJhc2VVbml0U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IHVuaXQsIHRleHQ6IHVuaXQgfSk7XG5cdFx0XHRpZiAoYmFzZVVuaXQgPT09IHVuaXQpIG9wdC5zZWxlY3RlZCA9IHRydWU7XG5cdFx0fSk7XG5cdFx0YmFzZVVuaXRTZWxlY3Qub25jaGFuZ2UgPSAoKSA9PiB7IGJhc2VVbml0ID0gYmFzZVVuaXRTZWxlY3QudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkhvdXJzIHBlciBEYXlcIiB9KTtcblx0XHRjb25zdCBob3Vyc1BlckRheUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgXG5cdFx0XHR0eXBlOiBcIm51bWJlclwiLCBcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIixcblx0XHRcdHZhbHVlOiBob3Vyc1BlckRheS50b1N0cmluZygpXG5cdFx0fSk7XG5cdFx0aG91cnNQZXJEYXlJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBob3Vyc1BlckRheSA9IHBhcnNlRmxvYXQoaG91cnNQZXJEYXlJbnB1dC52YWx1ZSkgfHwgMjQ7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRheXMgcGVyIFdlZWtcIiB9KTtcblx0XHRjb25zdCBkYXlzUGVyV2Vla0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgXG5cdFx0XHR0eXBlOiBcIm51bWJlclwiLCBcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIixcblx0XHRcdHZhbHVlOiBkYXlzUGVyV2Vlay50b1N0cmluZygpXG5cdFx0fSk7XG5cdFx0ZGF5c1BlcldlZWtJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkYXlzUGVyV2VlayA9IHBhcnNlSW50KGRheXNQZXJXZWVrSW5wdXQudmFsdWUpIHx8IDc7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRheXMgcGVyIFllYXJcIiB9KTtcblx0XHRjb25zdCBkYXlzUGVyWWVhcklucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgXG5cdFx0XHR0eXBlOiBcIm51bWJlclwiLCBcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIixcblx0XHRcdHZhbHVlOiBkYXlzUGVyWWVhci50b1N0cmluZygpXG5cdFx0fSk7XG5cdFx0ZGF5c1BlclllYXJJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkYXlzUGVyWWVhciA9IHBhcnNlSW50KGRheXNQZXJZZWFySW5wdXQudmFsdWUpIHx8IDM2NTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTW9udGhzIHBlciBZZWFyXCIgfSk7XG5cdFx0Y29uc3QgbW9udGhzUGVyWWVhcklucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgXG5cdFx0XHR0eXBlOiBcIm51bWJlclwiLCBcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIixcblx0XHRcdHZhbHVlOiBtb250aHNQZXJZZWFyLnRvU3RyaW5nKClcblx0XHR9KTtcblx0XHRtb250aHNQZXJZZWFySW5wdXQub25pbnB1dCA9ICgpID0+IHsgbW9udGhzUGVyWWVhciA9IHBhcnNlSW50KG1vbnRoc1BlclllYXJJbnB1dC52YWx1ZSkgfHwgMTI7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkVyYSBOYW1lIChvcHRpb25hbClcIiB9KTtcblx0XHRjb25zdCBlcmFOYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyBcblx0XHRcdHR5cGU6IFwidGV4dFwiLCBcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIixcblx0XHRcdHZhbHVlOiBlcmFOYW1lXG5cdFx0fSk7XG5cdFx0ZXJhTmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGVyYU5hbWUgPSBlcmFOYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlllYXIgWmVybyAob3B0aW9uYWwpXCIgfSk7XG5cdFx0Y29uc3QgeWVhclplcm9JbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IFxuXHRcdFx0dHlwZTogXCJudW1iZXJcIiwgXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsXG5cdFx0XHR2YWx1ZTogeWVhclplcm9cblx0XHR9KTtcblx0XHR5ZWFyWmVyb0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IHllYXJaZXJvID0geWVhclplcm9JbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTYXZlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgdGltZUNvbmZpZzogVGltZUNvbmZpZyA9IHtcblx0XHRcdFx0XHRiYXNlX3VuaXQ6IGJhc2VVbml0LFxuXHRcdFx0XHRcdGhvdXJzX3Blcl9kYXk6IGhvdXJzUGVyRGF5LFxuXHRcdFx0XHRcdGRheXNfcGVyX3dlZWs6IGRheXNQZXJXZWVrLFxuXHRcdFx0XHRcdGRheXNfcGVyX3llYXI6IGRheXNQZXJZZWFyLFxuXHRcdFx0XHRcdG1vbnRoc19wZXJfeWVhcjogbW9udGhzUGVyWWVhcixcblx0XHRcdFx0XHRlcmFfbmFtZTogZXJhTmFtZS50cmltKCkgfHwgdW5kZWZpbmVkLFxuXHRcdFx0XHRcdHllYXJfemVybzogeWVhclplcm8gPyBwYXJzZUludCh5ZWFyWmVybykgOiB1bmRlZmluZWQsXG5cdFx0XHRcdH07XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVXb3JsZFRpbWVDb25maWcodGhpcy5jdXJyZW50V29ybGQhLmlkLCB0aW1lQ29uZmlnKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJUaW1lIGNvbmZpZ3VyYXRpb24gc2F2ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0YXN5bmMgc2hvd1RpbWVsaW5lTW9kYWwoKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBldmVudHMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0VGltZWxpbmUodGhpcy5jdXJyZW50V29ybGQuaWQpO1xuXHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgVGltZWxpbmVNb2RhbCh0aGlzLmFwcCwgZXZlbnRzLCB0aGlzLmN1cnJlbnRXb3JsZC50aW1lX2NvbmZpZyB8fCBudWxsKTtcblx0XHRcdG1vZGFsLm9wZW4oKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBsb2FkIHRpbWVsaW5lXCJ9YCwgNTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUGxhY2Vob2xkZXIgbWV0aG9kcyBmb3IgbW9kYWxzIHRoYXQgd2lsbCBiZSBpbXBsZW1lbnRlZCBsYXRlclxuXHRzaG93QXJjaGV0eXBlVHJhaXRzTW9kYWwoYXJjaGV0eXBlOiBBcmNoZXR5cGUsIHRyYWl0czogYW55W10pIHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KGBUcmFpdHMgZm9yICR7YXJjaGV0eXBlLm5hbWV9YCk7XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRpZiAodHJhaXRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIHRyYWl0cyBhc3NpZ25lZCB0byB0aGlzIGFyY2hldHlwZS5cIiB9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc3QgbGlzdCA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1saXN0XCIgfSk7XG5cdFx0XHRmb3IgKGNvbnN0IHRyYWl0IG9mIHRyYWl0cykge1xuXHRcdFx0XHRjb25zdCBpdGVtID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIiB9KTtcblx0XHRcdFx0aXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXRpdGxlXCIsIHRleHQ6IHRyYWl0LnRyYWl0X25hbWUgfHwgXCJVbmtub3duXCIgfSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHNob3dDcmVhdGVBcmNoZXR5cGVNb2RhbCgpIHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiQ3JlYXRlIEFyY2hldHlwZVwiKTtcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBuYW1lID0gXCJcIjtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSBcIlwiO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiIH0pO1xuXHRcdG5hbWVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBuYW1lID0gbmFtZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3QgY3JlYXRlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDcmVhdGVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRjcmVhdGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghbmFtZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk5hbWUgaXMgcmVxdWlyZWRcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVBcmNoZXR5cGUoeyBuYW1lOiBuYW1lLnRyaW0oKSwgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSB9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJBcmNoZXR5cGUgY3JlYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cdFx0bW9kYWwub3BlbigpO1xuXHRcdG5hbWVJbnB1dC5mb2N1cygpO1xuXHR9XG5cblx0c2hvd0VkaXRBcmNoZXR5cGVNb2RhbChhcmNoZXR5cGU6IEFyY2hldHlwZSkge1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJFZGl0IEFyY2hldHlwZVwiKTtcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBuYW1lID0gYXJjaGV0eXBlLm5hbWU7XG5cdFx0bGV0IGRlc2NyaXB0aW9uID0gYXJjaGV0eXBlLmRlc2NyaXB0aW9uO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCB2YWx1ZTogbmFtZSB9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0ZGVzY0lucHV0LnZhbHVlID0gZGVzY3JpcHRpb247XG5cdFx0ZGVzY0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlNhdmVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIW5hbWUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJOYW1lIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlQXJjaGV0eXBlKGFyY2hldHlwZS5pZCwgeyBuYW1lOiBuYW1lLnRyaW0oKSwgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSB9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJBcmNoZXR5cGUgdXBkYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0c2hvd0xvcmVEZXRhaWxzTW9kYWwobG9yZTogTG9yZSkge1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQobG9yZS5uYW1lKTtcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IGxvcmUuZGVzY3JpcHRpb24gfHwgXCJObyBkZXNjcmlwdGlvblwiIH0pO1xuXHRcdGlmIChsb3JlLnJ1bGVzKSB7XG5cdFx0XHRjb250ZW50LmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIlJ1bGVzXCIgfSk7XG5cdFx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IGxvcmUucnVsZXMgfSk7XG5cdFx0fVxuXHRcdGlmIChsb3JlLmxpbWl0YXRpb25zKSB7XG5cdFx0XHRjb250ZW50LmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIkxpbWl0YXRpb25zXCIgfSk7XG5cdFx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IGxvcmUubGltaXRhdGlvbnMgfSk7XG5cdFx0fVxuXHRcdGlmIChsb3JlLnJlcXVpcmVtZW50cykge1xuXHRcdFx0Y29udGVudC5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJSZXF1aXJlbWVudHNcIiB9KTtcblx0XHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogbG9yZS5yZXF1aXJlbWVudHMgfSk7XG5cdFx0fVxuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHNob3dDcmVhdGVMb3JlTW9kYWwocGFyZW50SWQ/OiBzdHJpbmcgfCBudWxsKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJDcmVhdGUgTG9yZVwiKTtcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBuYW1lID0gXCJcIjtcblx0XHRsZXQgY2F0ZWdvcnkgPSBcIlwiO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IFwiXCI7XG5cdFx0bGV0IHJ1bGVzID0gXCJcIjtcblx0XHRsZXQgbGltaXRhdGlvbnMgPSBcIlwiO1xuXHRcdGxldCByZXF1aXJlbWVudHMgPSBcIlwiO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiIH0pO1xuXHRcdG5hbWVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBuYW1lID0gbmFtZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJDYXRlZ29yeVwiIH0pO1xuXHRcdGNvbnN0IGNhdGVnb3J5SW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiIH0pO1xuXHRcdGNhdGVnb3J5SW5wdXQub25pbnB1dCA9ICgpID0+IHsgY2F0ZWdvcnkgPSBjYXRlZ29yeUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlJ1bGVzXCIgfSk7XG5cdFx0Y29uc3QgcnVsZXNJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRydWxlc0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IHJ1bGVzID0gcnVsZXNJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTGltaXRhdGlvbnNcIiB9KTtcblx0XHRjb25zdCBsaW1pdGF0aW9uc0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGxpbWl0YXRpb25zSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbGltaXRhdGlvbnMgPSBsaW1pdGF0aW9uc0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJSZXF1aXJlbWVudHNcIiB9KTtcblx0XHRjb25zdCByZXF1aXJlbWVudHNJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRyZXF1aXJlbWVudHNJbnB1dC5vbmlucHV0ID0gKCkgPT4geyByZXF1aXJlbWVudHMgPSByZXF1aXJlbWVudHNJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBjcmVhdGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNyZWF0ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdGNyZWF0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUxvcmUodGhpcy5jdXJyZW50V29ybGQhLmlkLCB7XG5cdFx0XHRcdFx0bmFtZTogbmFtZS50cmltKCksXG5cdFx0XHRcdFx0Y2F0ZWdvcnk6IGNhdGVnb3J5LnRyaW0oKSB8fCB1bmRlZmluZWQsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSxcblx0XHRcdFx0XHRydWxlczogcnVsZXMudHJpbSgpLFxuXHRcdFx0XHRcdGxpbWl0YXRpb25zOiBsaW1pdGF0aW9ucy50cmltKCksXG5cdFx0XHRcdFx0cmVxdWlyZW1lbnRzOiByZXF1aXJlbWVudHMudHJpbSgpLFxuXHRcdFx0XHRcdHBhcmVudF9pZDogcGFyZW50SWQgfHwgdW5kZWZpbmVkLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJMb3JlIGNyZWF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXHRcdG1vZGFsLm9wZW4oKTtcblx0XHRuYW1lSW5wdXQuZm9jdXMoKTtcblx0fVxuXG5cdHNob3dFZGl0TG9yZU1vZGFsKGxvcmU6IExvcmUpIHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiRWRpdCBMb3JlXCIpO1xuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSBsb3JlLm5hbWU7XG5cdFx0bGV0IGNhdGVnb3J5ID0gbG9yZS5jYXRlZ29yeSB8fCBcIlwiO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IGxvcmUuZGVzY3JpcHRpb247XG5cdFx0bGV0IHJ1bGVzID0gbG9yZS5ydWxlcztcblx0XHRsZXQgbGltaXRhdGlvbnMgPSBsb3JlLmxpbWl0YXRpb25zO1xuXHRcdGxldCByZXF1aXJlbWVudHMgPSBsb3JlLnJlcXVpcmVtZW50cztcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTmFtZSAqXCIgfSk7XG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgdmFsdWU6IG5hbWUgfSk7XG5cdFx0bmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkNhdGVnb3J5XCIgfSk7XG5cdFx0Y29uc3QgY2F0ZWdvcnlJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsIHZhbHVlOiBjYXRlZ29yeSB9KTtcblx0XHRjYXRlZ29yeUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGNhdGVnb3J5ID0gY2F0ZWdvcnlJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0ZGVzY0lucHV0LnZhbHVlID0gZGVzY3JpcHRpb247XG5cdFx0ZGVzY0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJSdWxlc1wiIH0pO1xuXHRcdGNvbnN0IHJ1bGVzSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0cnVsZXNJbnB1dC52YWx1ZSA9IHJ1bGVzO1xuXHRcdHJ1bGVzSW5wdXQub25pbnB1dCA9ICgpID0+IHsgcnVsZXMgPSBydWxlc0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJMaW1pdGF0aW9uc1wiIH0pO1xuXHRcdGNvbnN0IGxpbWl0YXRpb25zSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0bGltaXRhdGlvbnNJbnB1dC52YWx1ZSA9IGxpbWl0YXRpb25zO1xuXHRcdGxpbWl0YXRpb25zSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbGltaXRhdGlvbnMgPSBsaW1pdGF0aW9uc0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJSZXF1aXJlbWVudHNcIiB9KTtcblx0XHRjb25zdCByZXF1aXJlbWVudHNJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRyZXF1aXJlbWVudHNJbnB1dC52YWx1ZSA9IHJlcXVpcmVtZW50cztcblx0XHRyZXF1aXJlbWVudHNJbnB1dC5vbmlucHV0ID0gKCkgPT4geyByZXF1aXJlbWVudHMgPSByZXF1aXJlbWVudHNJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTYXZlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUxvcmUobG9yZS5pZCwge1xuXHRcdFx0XHRcdG5hbWU6IG5hbWUudHJpbSgpLFxuXHRcdFx0XHRcdGNhdGVnb3J5OiBjYXRlZ29yeS50cmltKCkgfHwgdW5kZWZpbmVkLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKCksXG5cdFx0XHRcdFx0cnVsZXM6IHJ1bGVzLnRyaW0oKSxcblx0XHRcdFx0XHRsaW1pdGF0aW9uczogbGltaXRhdGlvbnMudHJpbSgpLFxuXHRcdFx0XHRcdHJlcXVpcmVtZW50czogcmVxdWlyZW1lbnRzLnRyaW0oKSxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTG9yZSB1cGRhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRzaG93RmFjdGlvbkRldGFpbHNNb2RhbChmYWN0aW9uOiBGYWN0aW9uKSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChmYWN0aW9uLm5hbWUpO1xuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0Y29udGVudC5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogZmFjdGlvbi5kZXNjcmlwdGlvbiB8fCBcIk5vIGRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0aWYgKGZhY3Rpb24uYmVsaWVmcykge1xuXHRcdFx0Y29udGVudC5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJCZWxpZWZzXCIgfSk7XG5cdFx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IGZhY3Rpb24uYmVsaWVmcyB9KTtcblx0XHR9XG5cdFx0aWYgKGZhY3Rpb24uc3RydWN0dXJlKSB7XG5cdFx0XHRjb250ZW50LmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIlN0cnVjdHVyZVwiIH0pO1xuXHRcdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBmYWN0aW9uLnN0cnVjdHVyZSB9KTtcblx0XHR9XG5cdFx0aWYgKGZhY3Rpb24uc3ltYm9scykge1xuXHRcdFx0Y29udGVudC5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJTeW1ib2xzXCIgfSk7XG5cdFx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IGZhY3Rpb24uc3ltYm9scyB9KTtcblx0XHR9XG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0c2hvd0NyZWF0ZUZhY3Rpb25Nb2RhbChwYXJlbnRJZD86IHN0cmluZyB8IG51bGwpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFdvcmxkKSByZXR1cm47XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkNyZWF0ZSBGYWN0aW9uXCIpO1xuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSBcIlwiO1xuXHRcdGxldCB0eXBlID0gXCJcIjtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSBcIlwiO1xuXHRcdGxldCBiZWxpZWZzID0gXCJcIjtcblx0XHRsZXQgc3RydWN0dXJlID0gXCJcIjtcblx0XHRsZXQgc3ltYm9scyA9IFwiXCI7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IG5hbWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIgfSk7XG5cdFx0bmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlR5cGVcIiB9KTtcblx0XHRjb25zdCB0eXBlSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiIH0pO1xuXHRcdHR5cGVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyB0eXBlID0gdHlwZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkJlbGllZnNcIiB9KTtcblx0XHRjb25zdCBiZWxpZWZzSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0YmVsaWVmc0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGJlbGllZnMgPSBiZWxpZWZzSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlN0cnVjdHVyZVwiIH0pO1xuXHRcdGNvbnN0IHN0cnVjdHVyZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdHN0cnVjdHVyZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IHN0cnVjdHVyZSA9IHN0cnVjdHVyZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJTeW1ib2xzXCIgfSk7XG5cdFx0Y29uc3Qgc3ltYm9sc0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdHN5bWJvbHNJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBzeW1ib2xzID0gc3ltYm9sc0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IGNyZWF0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ3JlYXRlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0Y3JlYXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIW5hbWUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJOYW1lIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlRmFjdGlvbih0aGlzLmN1cnJlbnRXb3JsZCEuaWQsIHtcblx0XHRcdFx0XHRuYW1lOiBuYW1lLnRyaW0oKSxcblx0XHRcdFx0XHR0eXBlOiB0eXBlLnRyaW0oKSB8fCB1bmRlZmluZWQsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSxcblx0XHRcdFx0XHRiZWxpZWZzOiBiZWxpZWZzLnRyaW0oKSxcblx0XHRcdFx0XHRzdHJ1Y3R1cmU6IHN0cnVjdHVyZS50cmltKCksXG5cdFx0XHRcdFx0c3ltYm9sczogc3ltYm9scy50cmltKCksXG5cdFx0XHRcdFx0cGFyZW50X2lkOiBwYXJlbnRJZCB8fCB1bmRlZmluZWQsXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkZhY3Rpb24gY3JlYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cdFx0bW9kYWwub3BlbigpO1xuXHRcdG5hbWVJbnB1dC5mb2N1cygpO1xuXHR9XG5cblx0c2hvd0VkaXRGYWN0aW9uTW9kYWwoZmFjdGlvbjogRmFjdGlvbikge1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJFZGl0IEZhY3Rpb25cIik7XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgbmFtZSA9IGZhY3Rpb24ubmFtZTtcblx0XHRsZXQgdHlwZSA9IGZhY3Rpb24udHlwZSB8fCBcIlwiO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IGZhY3Rpb24uZGVzY3JpcHRpb247XG5cdFx0bGV0IGJlbGllZnMgPSBmYWN0aW9uLmJlbGllZnM7XG5cdFx0bGV0IHN0cnVjdHVyZSA9IGZhY3Rpb24uc3RydWN0dXJlO1xuXHRcdGxldCBzeW1ib2xzID0gZmFjdGlvbi5zeW1ib2xzO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCB2YWx1ZTogbmFtZSB9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiVHlwZVwiIH0pO1xuXHRcdGNvbnN0IHR5cGVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsIHZhbHVlOiB0eXBlIH0pO1xuXHRcdHR5cGVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyB0eXBlID0gdHlwZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRkZXNjSW5wdXQudmFsdWUgPSBkZXNjcmlwdGlvbjtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkJlbGllZnNcIiB9KTtcblx0XHRjb25zdCBiZWxpZWZzSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0YmVsaWVmc0lucHV0LnZhbHVlID0gYmVsaWVmcztcblx0XHRiZWxpZWZzSW5wdXQub25pbnB1dCA9ICgpID0+IHsgYmVsaWVmcyA9IGJlbGllZnNJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiU3RydWN0dXJlXCIgfSk7XG5cdFx0Y29uc3Qgc3RydWN0dXJlSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0c3RydWN0dXJlSW5wdXQudmFsdWUgPSBzdHJ1Y3R1cmU7XG5cdFx0c3RydWN0dXJlSW5wdXQub25pbnB1dCA9ICgpID0+IHsgc3RydWN0dXJlID0gc3RydWN0dXJlSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlN5bWJvbHNcIiB9KTtcblx0XHRjb25zdCBzeW1ib2xzSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0c3ltYm9sc0lucHV0LnZhbHVlID0gc3ltYm9scztcblx0XHRzeW1ib2xzSW5wdXQub25pbnB1dCA9ICgpID0+IHsgc3ltYm9scyA9IHN5bWJvbHNJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTYXZlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUZhY3Rpb24oZmFjdGlvbi5pZCwge1xuXHRcdFx0XHRcdG5hbWU6IG5hbWUudHJpbSgpLFxuXHRcdFx0XHRcdHR5cGU6IHR5cGUudHJpbSgpIHx8IHVuZGVmaW5lZCxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpLFxuXHRcdFx0XHRcdGJlbGllZnM6IGJlbGllZnMudHJpbSgpLFxuXHRcdFx0XHRcdHN0cnVjdHVyZTogc3RydWN0dXJlLnRyaW0oKSxcblx0XHRcdFx0XHRzeW1ib2xzOiBzeW1ib2xzLnRyaW0oKSxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiRmFjdGlvbiB1cGRhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHQvLyA9PT09PT09PT09PT09PT09PT09PSBSZWxhdGlvbnNoaXAgTW9kYWxzID09PT09PT09PT09PT09PT09PT09XG5cblx0c2hvd0FkZENoYXJhY3RlclJlbGF0aW9uc2hpcE1vZGFsKGNoYXJhY3RlcjogQ2hhcmFjdGVyKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJBZGQgQ2hhcmFjdGVyIFJlbGF0aW9uc2hpcFwiKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBvdGhlckNoYXJhY3RlcklkID0gXCJcIjtcblx0XHRsZXQgcmVsYXRpb25zaGlwVHlwZSA9IFwiYWxseVwiO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IFwiXCI7XG5cdFx0bGV0IGJpZGlyZWN0aW9uYWwgPSB0cnVlO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJPdGhlciBDaGFyYWN0ZXIgKlwiIH0pO1xuXHRcdGNvbnN0IGNoYXJhY3RlclNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdGNoYXJhY3RlclNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcIlwiLCB0ZXh0OiBcIlNlbGVjdCBhIGNoYXJhY3Rlci4uLlwiIH0pO1xuXHRcdGZvciAoY29uc3QgY2hhciBvZiB0aGlzLmNoYXJhY3RlcnMuZmlsdGVyKGMgPT4gYy5pZCAhPT0gY2hhcmFjdGVyLmlkKS5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0Y2hhcmFjdGVyU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IGNoYXIuaWQsIHRleHQ6IGNoYXIubmFtZSB9KTtcblx0XHR9XG5cdFx0Y2hhcmFjdGVyU2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4geyBvdGhlckNoYXJhY3RlcklkID0gY2hhcmFjdGVyU2VsZWN0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJSZWxhdGlvbnNoaXAgVHlwZSAqXCIgfSk7XG5cdFx0Y29uc3QgdHlwZVNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdGNvbnN0IHJlbGF0aW9uc2hpcFR5cGVzID0gW1wiYWxseVwiLCBcImVuZW15XCIsIFwiZmFtaWx5XCIsIFwibG92ZXJcIiwgXCJyaXZhbFwiLCBcIm1lbnRvclwiLCBcInN0dWRlbnRcIl07XG5cdFx0Zm9yIChjb25zdCB0eXBlIG9mIHJlbGF0aW9uc2hpcFR5cGVzKSB7XG5cdFx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IHR5cGUsIHRleHQ6IHR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0eXBlLnNsaWNlKDEpIH0pO1xuXHRcdH1cblx0XHR0eXBlU2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4geyByZWxhdGlvbnNoaXBUeXBlID0gdHlwZVNlbGVjdC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0ZGVzY0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJCaWRpcmVjdGlvbmFsXCIgfSk7XG5cdFx0Y29uc3QgYmlkaXJlY3Rpb25hbENoZWNrYm94ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJjaGVja2JveFwiIH0pO1xuXHRcdGJpZGlyZWN0aW9uYWxDaGVja2JveC5jaGVja2VkID0gdHJ1ZTtcblx0XHRiaWRpcmVjdGlvbmFsQ2hlY2tib3gub25jaGFuZ2UgPSAoKSA9PiB7IGJpZGlyZWN0aW9uYWwgPSBiaWRpcmVjdGlvbmFsQ2hlY2tib3guY2hlY2tlZDsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBjcmVhdGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNyZWF0ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdGNyZWF0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFvdGhlckNoYXJhY3RlcklkKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJQbGVhc2Ugc2VsZWN0IGEgY2hhcmFjdGVyXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlQ2hhcmFjdGVyUmVsYXRpb25zaGlwKGNoYXJhY3Rlci5pZCwge1xuXHRcdFx0XHRcdGNoYXJhY3RlcjJfaWQ6IG90aGVyQ2hhcmFjdGVySWQsXG5cdFx0XHRcdFx0cmVsYXRpb25zaGlwX3R5cGU6IHJlbGF0aW9uc2hpcFR5cGUsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSxcblx0XHRcdFx0XHRiaWRpcmVjdGlvbmFsOiBiaWRpcmVjdGlvbmFsLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJSZWxhdGlvbnNoaXAgY3JlYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0c2hvd0xpbmtFdmVudFRvRW50aXR5TW9kYWwoZXZlbnQ6IFdvcmxkRXZlbnQpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFdvcmxkKSByZXR1cm47XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChgTGluayBFdmVudDogJHtldmVudC5uYW1lfWApO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IGVudGl0eVR5cGU6IFwiY2hhcmFjdGVyXCIgfCBcImxvY2F0aW9uXCIgfCBcImFydGlmYWN0XCIgfCBcImZhY3Rpb25cIiB8IFwibG9yZVwiID0gXCJjaGFyYWN0ZXJcIjtcblx0XHRsZXQgZW50aXR5SWQgPSBcIlwiO1xuXHRcdGxldCByZWxhdGlvbnNoaXBUeXBlID0gXCJcIjtcblx0XHRsZXQgbm90ZXMgPSBcIlwiO1xuXG5cdFx0Ly8gRW50aXR5IFR5cGUgU2VsZWN0aW9uXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJFbnRpdHkgVHlwZSAqXCIgfSk7XG5cdFx0Y29uc3QgdHlwZVNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJjaGFyYWN0ZXJcIiwgdGV4dDogXCJcdUQ4M0RcdURDNjQgQ2hhcmFjdGVyXCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcImxvY2F0aW9uXCIsIHRleHQ6IFwiXHVEODNEXHVEQ0NEIExvY2F0aW9uXCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcImZhY3Rpb25cIiwgdGV4dDogXCJcdUQ4M0NcdURGRjQgRmFjdGlvblwiIH0pO1xuXHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJhcnRpZmFjdFwiLCB0ZXh0OiBcIlx1MjY5NFx1RkUwRiBBcnRpZmFjdFwiIH0pO1xuXHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJsb3JlXCIsIHRleHQ6IFwiXHVEODNEXHVEQ0RDIExvcmVcIiB9KTtcblx0XHRcblx0XHQvLyBFbnRpdHkgU2VsZWN0aW9uIChkeW5hbWljIGJhc2VkIG9uIHR5cGUpXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJFbnRpdHkgKlwiIH0pO1xuXHRcdGNvbnN0IGVudGl0eVNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdFxuXHRcdGNvbnN0IHBvcHVsYXRlRW50aXR5U2VsZWN0ID0gKCkgPT4ge1xuXHRcdFx0ZW50aXR5U2VsZWN0LmVtcHR5KCk7XG5cdFx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJcIiwgdGV4dDogYFNlbGVjdCBhICR7ZW50aXR5VHlwZX0uLi5gIH0pO1xuXHRcdFx0ZW50aXR5SWQgPSBcIlwiO1xuXHRcdFx0XG5cdFx0XHRpZiAoZW50aXR5VHlwZSA9PT0gXCJjaGFyYWN0ZXJcIikge1xuXHRcdFx0XHRmb3IgKGNvbnN0IGNoYXIgb2YgdGhpcy5jaGFyYWN0ZXJzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRcdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IGNoYXIuaWQsIHRleHQ6IGNoYXIubmFtZSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChlbnRpdHlUeXBlID09PSBcImxvY2F0aW9uXCIpIHtcblx0XHRcdFx0Zm9yIChjb25zdCBsb2Mgb2YgdGhpcy5sb2NhdGlvbnMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdFx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogbG9jLmlkLCB0ZXh0OiBsb2MubmFtZSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChlbnRpdHlUeXBlID09PSBcImZhY3Rpb25cIikge1xuXHRcdFx0XHRmb3IgKGNvbnN0IGZhY3Rpb24gb2YgdGhpcy5mYWN0aW9ucy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0XHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBmYWN0aW9uLmlkLCB0ZXh0OiBmYWN0aW9uLm5hbWUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoZW50aXR5VHlwZSA9PT0gXCJhcnRpZmFjdFwiKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgYXJ0IG9mIHRoaXMuYXJ0aWZhY3RzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRcdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IGFydC5pZCwgdGV4dDogYXJ0Lm5hbWUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoZW50aXR5VHlwZSA9PT0gXCJsb3JlXCIpIHtcblx0XHRcdFx0Zm9yIChjb25zdCBsb3JlIG9mIHRoaXMubG9yZXMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdFx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogbG9yZS5pZCwgdGV4dDogbG9yZS5uYW1lIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRcblx0XHQvLyBJbml0aWFsaXplIHdpdGggY2hhcmFjdGVyc1xuXHRcdHBvcHVsYXRlRW50aXR5U2VsZWN0KCk7XG5cdFx0XG5cdFx0dHlwZVNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHsgXG5cdFx0XHRlbnRpdHlUeXBlID0gdHlwZVNlbGVjdC52YWx1ZSBhcyB0eXBlb2YgZW50aXR5VHlwZTtcblx0XHRcdHBvcHVsYXRlRW50aXR5U2VsZWN0KCk7XG5cdFx0fTtcblx0XHRlbnRpdHlTZWxlY3Qub25jaGFuZ2UgPSAoKSA9PiB7IGVudGl0eUlkID0gZW50aXR5U2VsZWN0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJSZWxhdGlvbnNoaXAgVHlwZVwiIH0pO1xuXHRcdGNvbnN0IHJlbFR5cGVTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHRyZWxUeXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiXCIsIHRleHQ6IFwiU2VsZWN0IHJlbGF0aW9uc2hpcC4uLlwiIH0pO1xuXHRcdFtcImludm9sdmVkXCIsIFwiY2F1c2VkXCIsIFwiYWZmZWN0ZWRcIiwgXCJ3aXRuZXNzZWRcIiwgXCJjcmVhdGVkXCIsIFwiZGVzdHJveWVkXCIsIFwicGFydGljaXBhdGVkXCIsIFwibGVkXCIsIFwib3Bwb3NlZFwiXS5mb3JFYWNoKHJlbCA9PiB7XG5cdFx0XHRyZWxUeXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IHJlbCwgdGV4dDogcmVsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcmVsLnNsaWNlKDEpIH0pO1xuXHRcdH0pO1xuXHRcdHJlbFR5cGVTZWxlY3Qub25jaGFuZ2UgPSAoKSA9PiB7IHJlbGF0aW9uc2hpcFR5cGUgPSByZWxUeXBlU2VsZWN0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJOb3Rlc1wiIH0pO1xuXHRcdGNvbnN0IG5vdGVzSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIixcblx0XHRcdHBsYWNlaG9sZGVyOiBcIkFkZGl0aW9uYWwgZGV0YWlscyBhYm91dCB0aGlzIHJlbGF0aW9uc2hpcC4uLlwiXG5cdFx0fSk7XG5cdFx0bm90ZXNJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBub3RlcyA9IG5vdGVzSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3QgY3JlYXRlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJMaW5rIEVudGl0eVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdGNyZWF0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFlbnRpdHlJZCkge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBQbGVhc2Ugc2VsZWN0IGEgJHtlbnRpdHlUeXBlfWAsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuYWRkRXZlbnRSZWZlcmVuY2UoZXZlbnQuaWQsIGVudGl0eVR5cGUsIGVudGl0eUlkLCByZWxhdGlvbnNoaXBUeXBlLnRyaW0oKSB8fCB1bmRlZmluZWQsIG5vdGVzLnRyaW0oKSB8fCB1bmRlZmluZWQpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkVudGl0eSBsaW5rZWQgdG8gZXZlbnRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHNob3dTZXRFdmVudFBhcmVudE1vZGFsKGV2ZW50OiBXb3JsZEV2ZW50KSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJTZXQgUGFyZW50IEV2ZW50IChDYXVzZSlcIik7XG5cdFx0XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgcGFyZW50SWQ6IHN0cmluZyB8IG51bGwgPSBldmVudC5wYXJlbnRfaWQgfHwgbnVsbDtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgXG5cdFx0XHR0ZXh0OiBcIkxpbmsgdGhpcyBldmVudCB0byBpdHMgY2F1c2Ugb3IgcGFyZW50IGV2ZW50IGluIHRoZSB0aW1lbGluZSBoaWVyYXJjaHkuXCIsXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWhpbnRcIlxuXHRcdH0pO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJQYXJlbnQgRXZlbnQgKENhdXNlKVwiIH0pO1xuXHRcdGNvbnN0IHBhcmVudFNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdHBhcmVudFNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcIlwiLCB0ZXh0OiBcIk5vbmUgKFJvb3QgRXZlbnQpXCIgfSk7XG5cdFx0XG5cdFx0Ly8gU29ydCBieSB0aW1lbGluZSBwb3NpdGlvbiwgdGhlbiBieSBuYW1lXG5cdFx0Y29uc3Qgc29ydGVkRXZlbnRzID0gdGhpcy5ldmVudHNcblx0XHRcdC5maWx0ZXIoZSA9PiBlLmlkICE9PSBldmVudC5pZClcblx0XHRcdC5zb3J0KChhLCBiKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHBvc0EgPSBhLnRpbWVsaW5lX3Bvc2l0aW9uID8/IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xuXHRcdFx0XHRjb25zdCBwb3NCID0gYi50aW1lbGluZV9wb3NpdGlvbiA/PyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcblx0XHRcdFx0aWYgKHBvc0EgIT09IHBvc0IpIHJldHVybiBwb3NBIC0gcG9zQjtcblx0XHRcdFx0cmV0dXJuIGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSk7XG5cdFx0XHR9KTtcblx0XHRcblx0XHRmb3IgKGNvbnN0IGV2dCBvZiBzb3J0ZWRFdmVudHMpIHtcblx0XHRcdGNvbnN0IHBvc0xhYmVsID0gZXZ0LnRpbWVsaW5lX3Bvc2l0aW9uICE9PSB1bmRlZmluZWQgPyBgIChZZWFyICR7ZXZ0LnRpbWVsaW5lX3Bvc2l0aW9ufSlgIDogXCJcIjtcblx0XHRcdGNvbnN0IG9wdCA9IHBhcmVudFNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBldnQuaWQsIHRleHQ6IGAke2V2dC5uYW1lfSR7cG9zTGFiZWx9YCB9KTtcblx0XHRcdGlmIChldmVudC5wYXJlbnRfaWQgPT09IGV2dC5pZCkge1xuXHRcdFx0XHRvcHQuc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRwYXJlbnRTZWxlY3Qub25jaGFuZ2UgPSAoKSA9PiB7IHBhcmVudElkID0gcGFyZW50U2VsZWN0LnZhbHVlIHx8IG51bGw7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5tb3ZlRXZlbnQoZXZlbnQuaWQsIHBhcmVudElkKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJFdmVudCBwYXJlbnQgdXBkYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0c2hvd0FkZEZhY3Rpb25SZWZlcmVuY2VNb2RhbChmYWN0aW9uOiBGYWN0aW9uKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJMaW5rIEZhY3Rpb24gdG8gRW50aXR5XCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IGVudGl0eVR5cGUgPSBcImNoYXJhY3RlclwiO1xuXHRcdGxldCBlbnRpdHlJZCA9IFwiXCI7XG5cdFx0bGV0IHJvbGUgPSBcIlwiO1xuXHRcdGxldCBub3RlcyA9IFwiXCI7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkVudGl0eSBUeXBlICpcIiB9KTtcblx0XHRjb25zdCB0eXBlU2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcImNoYXJhY3RlclwiLCB0ZXh0OiBcIkNoYXJhY3RlclwiIH0pO1xuXHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJsb2NhdGlvblwiLCB0ZXh0OiBcIkxvY2F0aW9uXCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcImFydGlmYWN0XCIsIHRleHQ6IFwiQXJ0aWZhY3RcIiB9KTtcblx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiZXZlbnRcIiwgdGV4dDogXCJFdmVudFwiIH0pO1xuXHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJmYWN0aW9uXCIsIHRleHQ6IFwiRmFjdGlvblwiIH0pO1xuXHRcdHR5cGVTZWxlY3Qub25jaGFuZ2UgPSAoKSA9PiB7XG5cdFx0XHRlbnRpdHlUeXBlID0gdHlwZVNlbGVjdC52YWx1ZTtcblx0XHRcdC8vIFVwZGF0ZSBlbnRpdHkgc2VsZWN0IG9wdGlvbnNcblx0XHRcdGVudGl0eVNlbGVjdC5lbXB0eSgpO1xuXHRcdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiXCIsIHRleHQ6IGBTZWxlY3QgYSAke2VudGl0eVR5cGV9Li4uYCB9KTtcblx0XHRcdGxvYWRFbnRpdGllc0ZvclR5cGUoZW50aXR5VHlwZSk7XG5cdFx0fTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRW50aXR5ICpcIiB9KTtcblx0XHRjb25zdCBlbnRpdHlTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJcIiwgdGV4dDogXCJTZWxlY3QgYW4gZW50aXR5Li4uXCIgfSk7XG5cdFx0XG5cdFx0Y29uc3QgbG9hZEVudGl0aWVzRm9yVHlwZSA9ICh0eXBlOiBzdHJpbmcpID0+IHtcblx0XHRcdGlmICh0eXBlID09PSBcImNoYXJhY3RlclwiKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgY2hhciBvZiB0aGlzLmNoYXJhY3RlcnMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdFx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogY2hhci5pZCwgdGV4dDogY2hhci5uYW1lIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwibG9jYXRpb25cIikge1xuXHRcdFx0XHRmb3IgKGNvbnN0IGxvYyBvZiB0aGlzLmxvY2F0aW9ucy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0XHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBsb2MuaWQsIHRleHQ6IGxvYy5uYW1lIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwiYXJ0aWZhY3RcIikge1xuXHRcdFx0XHRmb3IgKGNvbnN0IGFydCBvZiB0aGlzLmFydGlmYWN0cy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0XHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBhcnQuaWQsIHRleHQ6IGFydC5uYW1lIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwiZXZlbnRcIikge1xuXHRcdFx0XHRmb3IgKGNvbnN0IGV2dCBvZiB0aGlzLmV2ZW50cy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0XHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBldnQuaWQsIHRleHQ6IGV2dC5uYW1lIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwiZmFjdGlvblwiKSB7XG5cdFx0XHRcdC8vIEZpbHRlciBvdXQgdGhlIGN1cnJlbnQgZmFjdGlvbiB0byBhdm9pZCBzZWxmLXJlZmVyZW5jZVxuXHRcdFx0XHRmb3IgKGNvbnN0IGZhYyBvZiB0aGlzLmZhY3Rpb25zLmZpbHRlcihmID0+IGYuaWQgIT09IGZhY3Rpb24uaWQpLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRcdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IGZhYy5pZCwgdGV4dDogZmFjLm5hbWUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHRcdGxvYWRFbnRpdGllc0ZvclR5cGUoZW50aXR5VHlwZSk7XG5cdFx0ZW50aXR5U2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4geyBlbnRpdHlJZCA9IGVudGl0eVNlbGVjdC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiUm9sZVwiIH0pO1xuXHRcdGNvbnN0IHJvbGVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsIHBsYWNlaG9sZGVyOiBcImUuZy4sIGxlYWRlciwgbWVtYmVyLCBhbGx5LCByaXZhbFwiIH0pO1xuXHRcdHJvbGVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyByb2xlID0gcm9sZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJOb3Rlc1wiIH0pO1xuXHRcdGNvbnN0IG5vdGVzSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0bm90ZXNJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBub3RlcyA9IG5vdGVzSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3QgY3JlYXRlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDcmVhdGVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRjcmVhdGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghZW50aXR5SWQpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBzZWxlY3QgYW4gZW50aXR5XCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuYWRkRmFjdGlvblJlZmVyZW5jZShmYWN0aW9uLmlkLCBlbnRpdHlUeXBlLCBlbnRpdHlJZCwgcm9sZS50cmltKCkgfHwgdW5kZWZpbmVkLCBub3Rlcy50cmltKCkgfHwgdW5kZWZpbmVkKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJSZWZlcmVuY2UgY3JlYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0c2hvd0FkZExvcmVSZWZlcmVuY2VNb2RhbChsb3JlOiBMb3JlKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJMaW5rIExvcmUgdG8gRW50aXR5XCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IGVudGl0eVR5cGUgPSBcImNoYXJhY3RlclwiO1xuXHRcdGxldCBlbnRpdHlJZCA9IFwiXCI7XG5cdFx0bGV0IHJlbGF0aW9uc2hpcFR5cGUgPSBcIlwiO1xuXHRcdGxldCBub3RlcyA9IFwiXCI7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkVudGl0eSBUeXBlICpcIiB9KTtcblx0XHRjb25zdCB0eXBlU2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcImNoYXJhY3RlclwiLCB0ZXh0OiBcIkNoYXJhY3RlclwiIH0pO1xuXHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJsb2NhdGlvblwiLCB0ZXh0OiBcIkxvY2F0aW9uXCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcImFydGlmYWN0XCIsIHRleHQ6IFwiQXJ0aWZhY3RcIiB9KTtcblx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiZXZlbnRcIiwgdGV4dDogXCJFdmVudFwiIH0pO1xuXHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJmYWN0aW9uXCIsIHRleHQ6IFwiRmFjdGlvblwiIH0pO1xuXHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJsb3JlXCIsIHRleHQ6IFwiTG9yZVwiIH0pO1xuXHRcdHR5cGVTZWxlY3Qub25jaGFuZ2UgPSAoKSA9PiB7XG5cdFx0XHRlbnRpdHlUeXBlID0gdHlwZVNlbGVjdC52YWx1ZTtcblx0XHRcdC8vIFVwZGF0ZSBlbnRpdHkgc2VsZWN0IG9wdGlvbnNcblx0XHRcdGVudGl0eVNlbGVjdC5lbXB0eSgpO1xuXHRcdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiXCIsIHRleHQ6IGBTZWxlY3QgYSAke2VudGl0eVR5cGV9Li4uYCB9KTtcblx0XHRcdGxvYWRFbnRpdGllc0ZvclR5cGUoZW50aXR5VHlwZSk7XG5cdFx0fTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRW50aXR5ICpcIiB9KTtcblx0XHRjb25zdCBlbnRpdHlTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJcIiwgdGV4dDogXCJTZWxlY3QgYW4gZW50aXR5Li4uXCIgfSk7XG5cdFx0XG5cdFx0Y29uc3QgbG9hZEVudGl0aWVzRm9yVHlwZSA9ICh0eXBlOiBzdHJpbmcpID0+IHtcblx0XHRcdGlmICh0eXBlID09PSBcImNoYXJhY3RlclwiKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgY2hhciBvZiB0aGlzLmNoYXJhY3RlcnMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdFx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogY2hhci5pZCwgdGV4dDogY2hhci5uYW1lIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwibG9jYXRpb25cIikge1xuXHRcdFx0XHRmb3IgKGNvbnN0IGxvYyBvZiB0aGlzLmxvY2F0aW9ucy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0XHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBsb2MuaWQsIHRleHQ6IGxvYy5uYW1lIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwiYXJ0aWZhY3RcIikge1xuXHRcdFx0XHRmb3IgKGNvbnN0IGFydCBvZiB0aGlzLmFydGlmYWN0cy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0XHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBhcnQuaWQsIHRleHQ6IGFydC5uYW1lIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwiZXZlbnRcIikge1xuXHRcdFx0XHRmb3IgKGNvbnN0IGV2dCBvZiB0aGlzLmV2ZW50cy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0XHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBldnQuaWQsIHRleHQ6IGV2dC5uYW1lIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwiZmFjdGlvblwiKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgZmFjIG9mIHRoaXMuZmFjdGlvbnMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdFx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogZmFjLmlkLCB0ZXh0OiBmYWMubmFtZSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImxvcmVcIikge1xuXHRcdFx0XHQvLyBGaWx0ZXIgb3V0IHRoZSBjdXJyZW50IGxvcmUgdG8gYXZvaWQgc2VsZi1yZWZlcmVuY2Vcblx0XHRcdFx0Zm9yIChjb25zdCBsIG9mIHRoaXMubG9yZXMuZmlsdGVyKGwgPT4gbC5pZCAhPT0gbG9yZS5pZCkuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdFx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogbC5pZCwgdGV4dDogbC5uYW1lIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRsb2FkRW50aXRpZXNGb3JUeXBlKGVudGl0eVR5cGUpO1xuXHRcdGVudGl0eVNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHsgZW50aXR5SWQgPSBlbnRpdHlTZWxlY3QudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlJlbGF0aW9uc2hpcCBUeXBlXCIgfSk7XG5cdFx0Y29uc3QgcmVsVHlwZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgcGxhY2Vob2xkZXI6IFwiZS5nLiwgcHJhY3RpdGlvbmVyLCBvcmlnaW4sIGZvcmJpZGRlblwiIH0pO1xuXHRcdHJlbFR5cGVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyByZWxhdGlvbnNoaXBUeXBlID0gcmVsVHlwZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJOb3Rlc1wiIH0pO1xuXHRcdGNvbnN0IG5vdGVzSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0bm90ZXNJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBub3RlcyA9IG5vdGVzSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3QgY3JlYXRlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDcmVhdGVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRjcmVhdGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghZW50aXR5SWQpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBzZWxlY3QgYW4gZW50aXR5XCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuYWRkTG9yZVJlZmVyZW5jZShsb3JlLmlkLCBlbnRpdHlUeXBlLCBlbnRpdHlJZCwgcmVsYXRpb25zaGlwVHlwZS50cmltKCkgfHwgdW5kZWZpbmVkLCBub3Rlcy50cmltKCkgfHwgdW5kZWZpbmVkKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJSZWZlcmVuY2UgY3JlYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0Ly8gPT09PT09PT09PT09PT09PT09PT0gQ2hhcmFjdGVyIERldGFpbHMgVmlldyBNZXRob2RzID09PT09PT09PT09PT09PT09PT09XG5cblx0YXN5bmMgc2hvd0NoYXJhY3RlckRldGFpbHMoY2hhcmFjdGVyOiBDaGFyYWN0ZXIpIHtcblx0XHR0aGlzLnZpZXdNb2RlID0gXCJjaGFyYWN0ZXItZGV0YWlsc1wiO1xuXHRcdFxuXHRcdC8vIEdldCB3b3JsZCBpZiBhdmFpbGFibGVcblx0XHRjb25zdCB3b3JsZCA9IGNoYXJhY3Rlci53b3JsZF9pZCA/IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRXb3JsZChjaGFyYWN0ZXIud29ybGRfaWQpLmNhdGNoKCgpID0+IG51bGwpIDogbnVsbDtcblx0XHRcblx0XHQvLyBHZXQgY2hhcmFjdGVycyBmb3IgcmVsYXRpb25zaGlwcyAoZnJvbSB3b3JsZCBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBlbXB0eSlcblx0XHRjb25zdCBjaGFyYWN0ZXJzID0gd29ybGQgPyBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q2hhcmFjdGVycyh3b3JsZC5pZCkuY2F0Y2goKCkgPT4gW10pIDogW107XG5cdFx0XG5cdFx0Ly8gRW5zdXJlIHRyYWl0cyBhbmQgYXJjaGV0eXBlcyBhcmUgbG9hZGVkICh0aGV5J3JlIGdsb2JhbCBwZXIgdGVuYW50KVxuXHRcdGxldCB0cmFpdHMgPSB0aGlzLnRyYWl0cztcblx0XHRsZXQgYXJjaGV0eXBlcyA9IHRoaXMuYXJjaGV0eXBlcztcblx0XHRsZXQgZXZlbnRzID0gd29ybGQgPyB0aGlzLmV2ZW50cyA6IFtdO1xuXHRcdFxuXHRcdC8vIElmIHRyYWl0cyBvciBhcmNoZXR5cGVzIGFyZSBlbXB0eSwgbG9hZCB0aGVtXG5cdFx0aWYgKCF0cmFpdHMgfHwgdHJhaXRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dHJhaXRzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldFRyYWl0cygpO1xuXHRcdFx0XHR0aGlzLnRyYWl0cyA9IHRyYWl0cztcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gbG9hZCB0cmFpdHM6XCIsIGVycik7XG5cdFx0XHRcdHRyYWl0cyA9IFtdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHRpZiAoIWFyY2hldHlwZXMgfHwgYXJjaGV0eXBlcy5sZW5ndGggPT09IDApIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGFyY2hldHlwZXMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0QXJjaGV0eXBlcygpO1xuXHRcdFx0XHR0aGlzLmFyY2hldHlwZXMgPSBhcmNoZXR5cGVzO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBsb2FkIGFyY2hldHlwZXM6XCIsIGVycik7XG5cdFx0XHRcdGFyY2hldHlwZXMgPSBbXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0Ly8gSWYgd29ybGQgaXMgYXZhaWxhYmxlIGJ1dCBldmVudHMgYXJlIGVtcHR5LCBsb2FkIHRoZW1cblx0XHRpZiAod29ybGQgJiYgKCFldmVudHMgfHwgZXZlbnRzLmxlbmd0aCA9PT0gMCkpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGV2ZW50cyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRFdmVudHMod29ybGQuaWQpO1xuXHRcdFx0XHR0aGlzLmV2ZW50cyA9IGV2ZW50cztcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gbG9hZCBldmVudHM6XCIsIGVycik7XG5cdFx0XHRcdGV2ZW50cyA9IFtdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHQvLyBDcmVhdGUgQ2hhcmFjdGVyRGV0YWlsc1ZpZXcgaW5zdGFuY2Vcblx0XHR0aGlzLmNoYXJhY3RlckRldGFpbHNWaWV3ID0gbmV3IENoYXJhY3RlckRldGFpbHNWaWV3KFxuXHRcdFx0dGhpcy5wbHVnaW4sXG5cdFx0XHRjaGFyYWN0ZXIsXG5cdFx0XHR0aGlzLmhlYWRlckVsLFxuXHRcdFx0dGhpcy5jb250ZW50RWwsXG5cdFx0XHQoKSA9PiB7XG5cdFx0XHRcdC8vIG9uQmFjayBjYWxsYmFja1xuXHRcdFx0XHR0aGlzLmNoYXJhY3RlckRldGFpbHNWaWV3ID0gbnVsbDtcblx0XHRcdFx0aWYgKHRoaXMuY3VycmVudFdvcmxkKSB7XG5cdFx0XHRcdFx0dGhpcy52aWV3TW9kZSA9IFwid29ybGQtZGV0YWlsc1wiO1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyV29ybGREZXRhaWxzKCk7XG5cdFx0XHRcdH0gZWxzZSBpZiAodGhpcy5jdXJyZW50U3RvcnkpIHtcblx0XHRcdFx0XHR0aGlzLnZpZXdNb2RlID0gXCJkZXRhaWxzXCI7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJEZXRhaWxzKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy52aWV3TW9kZSA9IFwibGlzdFwiO1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyTGlzdEhlYWRlcigpO1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyTGlzdENvbnRlbnQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdChjaGFyYWN0ZXIpID0+IHtcblx0XHRcdFx0Ly8gb25FZGl0Q2hhcmFjdGVyIGNhbGxiYWNrXG5cdFx0XHRcdHRoaXMuc2hvd0VkaXRDaGFyYWN0ZXJNb2RhbChjaGFyYWN0ZXIpO1xuXHRcdFx0fSxcblx0XHRcdHdvcmxkLFxuXHRcdFx0Y2hhcmFjdGVycyxcblx0XHRcdGFyY2hldHlwZXMsXG5cdFx0XHR0cmFpdHMsXG5cdFx0XHRldmVudHNcblx0XHQpO1xuXHRcdFxuXHRcdGF3YWl0IHRoaXMuY2hhcmFjdGVyRGV0YWlsc1ZpZXcucmVuZGVyKCk7XG5cdH1cblxufVxuXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBDaGFwdGVyIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5cbmV4cG9ydCBjbGFzcyBDaGFwdGVyTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGNoYXB0ZXI6IFBhcnRpYWw8Q2hhcHRlcj4gPSB7XG5cdFx0dGl0bGU6IFwiXCIsXG5cdFx0c3RhdHVzOiBcImRyYWZ0XCIsXG5cdH07XG5cdGlzRWRpdDogYm9vbGVhbiA9IGZhbHNlO1xuXHRleGlzdGluZ0NoYXB0ZXJzOiBDaGFwdGVyW10gPSBbXTtcblx0b25TdWJtaXQ6IChjaGFwdGVyOiBQYXJ0aWFsPENoYXB0ZXI+KSA9PiBQcm9taXNlPHZvaWQ+O1xuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdGFwcDogQXBwLFxuXHRcdG9uU3VibWl0OiAoY2hhcHRlcjogUGFydGlhbDxDaGFwdGVyPikgPT4gUHJvbWlzZTx2b2lkPixcblx0XHRleGlzdGluZ0NoYXB0ZXJzOiBDaGFwdGVyW10gPSBbXSxcblx0XHRjaGFwdGVyPzogQ2hhcHRlclxuXHQpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcblx0XHR0aGlzLmV4aXN0aW5nQ2hhcHRlcnMgPSBleGlzdGluZ0NoYXB0ZXJzO1xuXHRcdGlmIChjaGFwdGVyKSB7XG5cdFx0XHR0aGlzLmlzRWRpdCA9IHRydWU7XG5cdFx0XHR0aGlzLmNoYXB0ZXIgPSB7XG5cdFx0XHRcdG51bWJlcjogY2hhcHRlci5udW1iZXIsXG5cdFx0XHRcdHRpdGxlOiBjaGFwdGVyLnRpdGxlLFxuXHRcdFx0XHRzdGF0dXM6IGNoYXB0ZXIuc3RhdHVzLFxuXHRcdFx0fTtcblx0XHR9XG5cdH1cblxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7XG5cdFx0XHR0ZXh0OiB0aGlzLmlzRWRpdCA/IFwiRWRpdCBDaGFwdGVyXCIgOiBcIkNyZWF0ZSBDaGFwdGVyXCIsXG5cdFx0fSk7XG5cblx0XHRpZiAodGhpcy5pc0VkaXQpIHtcblx0XHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdFx0LnNldE5hbWUoXCJDaGFwdGVyIE51bWJlclwiKVxuXHRcdFx0XHQuc2V0RGVzYyhcIlRoZSBjaGFwdGVyIG51bWJlclwiKVxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCIxXCIpXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5jaGFwdGVyLm51bWJlcj8udG9TdHJpbmcoKSB8fCBcIjFcIilcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRpZiAoIWlzTmFOKG51bSkgJiYgbnVtID4gMCkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuY2hhcHRlci5udW1iZXIgPSBudW07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJUaXRsZVwiKVxuXHRcdFx0LnNldERlc2MoXCJDaGFwdGVyIHRpdGxlXCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIkNoYXB0ZXIgVGl0bGVcIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5jaGFwdGVyLnRpdGxlIHx8IFwiXCIpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5jaGFwdGVyLnRpdGxlID0gdmFsdWU7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcblx0XHRcdFx0XHRcdGlmIChlLmtleSA9PT0gXCJFbnRlclwiKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuc3VibWl0KCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZShcIlN0YXR1c1wiKVxuXHRcdFx0LnNldERlc2MoXCJDaGFwdGVyIHN0YXR1c1wiKVxuXHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT5cblx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHQuYWRkT3B0aW9uKFwiZHJhZnRcIiwgXCJEcmFmdFwiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJpbl9wcm9ncmVzc1wiLCBcIkluIFByb2dyZXNzXCIpXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihcImNvbXBsZXRlZFwiLCBcIkNvbXBsZXRlZFwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLmNoYXB0ZXIuc3RhdHVzIHx8IFwiZHJhZnRcIilcblx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmNoYXB0ZXIuc3RhdHVzID0gdmFsdWU7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblxuXHRcdGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiB0aGlzLmlzRWRpdCA/IFwiVXBkYXRlXCIgOiBcIkNyZWF0ZVwiLFxuXHRcdFx0Y2xzOiBcIm1vZC1jdGFcIixcblx0XHR9KTtcblx0XHRzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuc3VibWl0KCkpO1xuXG5cdFx0Y29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiQ2FuY2VsXCIsXG5cdFx0fSk7XG5cdFx0Y2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuXG5cdFx0Y29uc3QgdGl0bGVJbnB1dCA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbcGxhY2Vob2xkZXI9J0NoYXB0ZXIgVGl0bGUnXVwiKSBhcyBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbDtcblx0XHRpZiAodGl0bGVJbnB1dCkge1xuXHRcdFx0dGl0bGVJbnB1dC5mb2N1cygpO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIHN1Ym1pdCgpIHtcblx0XHRpZiAoIXRoaXMuY2hhcHRlci50aXRsZT8udHJpbSgpKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiUGxlYXNlIGVudGVyIGEgY2hhcHRlciB0aXRsZVwiLCAzMDAwKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBBdXRvLWNhbGN1bGF0ZSBjaGFwdGVyIG51bWJlciBpZiBjcmVhdGluZ1xuXHRcdGlmICghdGhpcy5pc0VkaXQpIHtcblx0XHRcdGNvbnN0IG1heE51bWJlciA9IHRoaXMuZXhpc3RpbmdDaGFwdGVycy5sZW5ndGggPiAwXG5cdFx0XHRcdD8gTWF0aC5tYXgoLi4udGhpcy5leGlzdGluZ0NoYXB0ZXJzLm1hcChjID0+IGMubnVtYmVyKSlcblx0XHRcdFx0OiAwO1xuXHRcdFx0dGhpcy5jaGFwdGVyLm51bWJlciA9IG1heE51bWJlciArIDE7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICghdGhpcy5jaGFwdGVyLm51bWJlciB8fCB0aGlzLmNoYXB0ZXIubnVtYmVyIDwgMSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQ2hhcHRlciBudW1iZXIgbXVzdCBiZSBncmVhdGVyIHRoYW4gMFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCB0aGlzLm9uU3VibWl0KHRoaXMuY2hhcHRlcik7XG5cdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gc2F2ZSBjaGFwdGVyXCI7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBTY2VuZSwgQ2hhcHRlciB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuXG5leHBvcnQgY2xhc3MgU2NlbmVNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0c2NlbmU6IFBhcnRpYWw8U2NlbmU+ID0ge1xuXHRcdHRpbWVfcmVmOiBcIlwiLFxuXHRcdGdvYWw6IFwiXCIsXG5cdH07XG5cdGlzRWRpdDogYm9vbGVhbiA9IGZhbHNlO1xuXHRjaGFwdGVyczogQ2hhcHRlcltdID0gW107XG5cdGV4aXN0aW5nU2NlbmVzOiBTY2VuZVtdID0gW107XG5cdHN0b3J5SWQ6IHN0cmluZztcblx0ZGVmYXVsdENoYXB0ZXJJZD86IHN0cmluZyB8IG51bGw7XG5cdG9uU3VibWl0OiAoc2NlbmU6IFBhcnRpYWw8U2NlbmU+KSA9PiBQcm9taXNlPHZvaWQ+O1xuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdGFwcDogQXBwLFxuXHRcdHN0b3J5SWQ6IHN0cmluZyxcblx0XHRjaGFwdGVyczogQ2hhcHRlcltdLFxuXHRcdG9uU3VibWl0OiAoc2NlbmU6IFBhcnRpYWw8U2NlbmU+KSA9PiBQcm9taXNlPHZvaWQ+LFxuXHRcdGV4aXN0aW5nU2NlbmVzOiBTY2VuZVtdID0gW10sXG5cdFx0c2NlbmU/OiBTY2VuZSxcblx0XHRkZWZhdWx0Q2hhcHRlcklkPzogc3RyaW5nIHwgbnVsbFxuXHQpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMuc3RvcnlJZCA9IHN0b3J5SWQ7XG5cdFx0dGhpcy5jaGFwdGVycyA9IGNoYXB0ZXJzO1xuXHRcdHRoaXMuZXhpc3RpbmdTY2VuZXMgPSBleGlzdGluZ1NjZW5lcztcblx0XHR0aGlzLmRlZmF1bHRDaGFwdGVySWQgPSBkZWZhdWx0Q2hhcHRlcklkO1xuXHRcdHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcblx0XHRpZiAoc2NlbmUpIHtcblx0XHRcdHRoaXMuaXNFZGl0ID0gdHJ1ZTtcblx0XHRcdHRoaXMuc2NlbmUgPSB7XG5cdFx0XHRcdHN0b3J5X2lkOiBzY2VuZS5zdG9yeV9pZCxcblx0XHRcdFx0Y2hhcHRlcl9pZDogc2NlbmUuY2hhcHRlcl9pZCB8fCBudWxsLFxuXHRcdFx0XHRvcmRlcl9udW06IHNjZW5lLm9yZGVyX251bSxcblx0XHRcdFx0dGltZV9yZWY6IHNjZW5lLnRpbWVfcmVmLFxuXHRcdFx0XHRnb2FsOiBzY2VuZS5nb2FsLFxuXHRcdFx0XHRwb3ZfY2hhcmFjdGVyX2lkOiBzY2VuZS5wb3ZfY2hhcmFjdGVyX2lkLFxuXHRcdFx0XHRsb2NhdGlvbl9pZDogc2NlbmUubG9jYXRpb25faWQsXG5cdFx0XHR9O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnNjZW5lLnN0b3J5X2lkID0gc3RvcnlJZDtcblx0XHRcdC8vIFByZS1zZWxlY3QgY2hhcHRlciBpZiBwcm92aWRlZFxuXHRcdFx0aWYgKGRlZmF1bHRDaGFwdGVySWQgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHR0aGlzLnNjZW5lLmNoYXB0ZXJfaWQgPSBkZWZhdWx0Q2hhcHRlcklkO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHtcblx0XHRcdHRleHQ6IHRoaXMuaXNFZGl0ID8gXCJFZGl0IFNjZW5lXCIgOiBcIkNyZWF0ZSBTY2VuZVwiLFxuXHRcdH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJDaGFwdGVyXCIpXG5cdFx0XHQuc2V0RGVzYyhcIlNlbGVjdCB0aGUgY2hhcHRlciBmb3IgdGhpcyBzY2VuZSAob3B0aW9uYWwpXCIpXG5cdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG5cdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbihcIlwiLCBcIk5vIENoYXB0ZXJcIik7XG5cdFx0XHRcdGZvciAoY29uc3QgY2hhcHRlciBvZiB0aGlzLmNoYXB0ZXJzLnNvcnQoKGEsIGIpID0+IGEubnVtYmVyIC0gYi5udW1iZXIpKSB7XG5cdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKFxuXHRcdFx0XHRcdFx0Y2hhcHRlci5pZCxcblx0XHRcdFx0XHRcdGBDaGFwdGVyICR7Y2hhcHRlci5udW1iZXJ9OiAke2NoYXB0ZXIudGl0bGV9YFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZHJvcGRvd24uc2V0VmFsdWUodGhpcy5zY2VuZS5jaGFwdGVyX2lkIHx8IFwiXCIpO1xuXHRcdFx0XHRkcm9wZG93bi5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnNjZW5lLmNoYXB0ZXJfaWQgPSB2YWx1ZSB8fCBudWxsO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0aWYgKHRoaXMuaXNFZGl0KSB7XG5cdFx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHRcdC5zZXROYW1lKFwiT3JkZXIgTnVtYmVyXCIpXG5cdFx0XHRcdC5zZXREZXNjKFwiU2NlbmUgb3JkZXIgd2l0aGluIGNoYXB0ZXJcIilcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiMVwiKVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuc2NlbmUub3JkZXJfbnVtPy50b1N0cmluZygpIHx8IFwiMVwiKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGlmICghaXNOYU4obnVtKSAmJiBudW0gPiAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5zY2VuZS5vcmRlcl9udW0gPSBudW07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJHb2FsXCIpXG5cdFx0XHQuc2V0RGVzYyhcIlNjZW5lIGdvYWwgb3IgZGVzY3JpcHRpb25cIilcblx0XHRcdC5hZGRUZXh0QXJlYSgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIldoYXQgaGFwcGVucyBpbiB0aGlzIHNjZW5lP1wiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnNjZW5lLmdvYWwgfHwgXCJcIilcblx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnNjZW5lLmdvYWwgPSB2YWx1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5zZXROYW1lKFwiVGltZSBSZWZlcmVuY2VcIilcblx0XHRcdC5zZXREZXNjKFwiV2hlbiBkb2VzIHRoaXMgc2NlbmUgdGFrZSBwbGFjZT9cIilcblx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiTW9ybmluZywgRXZlbmluZywgZXRjLlwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnNjZW5lLnRpbWVfcmVmIHx8IFwiXCIpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5zY2VuZS50aW1lX3JlZiA9IHZhbHVlO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cblx0XHRjb25zdCBzdWJtaXRCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogdGhpcy5pc0VkaXQgPyBcIlVwZGF0ZVwiIDogXCJDcmVhdGVcIixcblx0XHRcdGNsczogXCJtb2QtY3RhXCIsXG5cdFx0fSk7XG5cdFx0c3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnN1Ym1pdCgpKTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIkNhbmNlbFwiLFxuXHRcdH0pO1xuXHRcdGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblxuXHRcdGNvbnN0IGdvYWxJbnB1dCA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKFwidGV4dGFyZWFcIikgYXMgSFRNTFRleHRBcmVhRWxlbWVudCB8IG51bGw7XG5cdFx0aWYgKGdvYWxJbnB1dCkge1xuXHRcdFx0Z29hbElucHV0LmZvY3VzKCk7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgc3VibWl0KCkge1xuXHRcdC8vIEF1dG8tY2FsY3VsYXRlIG9yZGVyX251bSBpZiBjcmVhdGluZ1xuXHRcdGlmICghdGhpcy5pc0VkaXQpIHtcblx0XHRcdGNvbnN0IGNoYXB0ZXJJZCA9IHRoaXMuc2NlbmUuY2hhcHRlcl9pZCB8fCBudWxsO1xuXHRcdFx0Y29uc3Qgc2NlbmVzSW5DaGFwdGVyID0gdGhpcy5leGlzdGluZ1NjZW5lcy5maWx0ZXIocyA9PiBcblx0XHRcdFx0KHMuY2hhcHRlcl9pZCB8fCBudWxsKSA9PT0gY2hhcHRlcklkXG5cdFx0XHQpO1xuXHRcdFx0Y29uc3QgbWF4T3JkZXJOdW0gPSBzY2VuZXNJbkNoYXB0ZXIubGVuZ3RoID4gMFxuXHRcdFx0XHQ/IE1hdGgubWF4KC4uLnNjZW5lc0luQ2hhcHRlci5tYXAocyA9PiBzLm9yZGVyX251bSkpXG5cdFx0XHRcdDogMDtcblx0XHRcdHRoaXMuc2NlbmUub3JkZXJfbnVtID0gbWF4T3JkZXJOdW0gKyAxO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAoIXRoaXMuc2NlbmUub3JkZXJfbnVtIHx8IHRoaXMuc2NlbmUub3JkZXJfbnVtIDwgMSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiT3JkZXIgbnVtYmVyIG11c3QgYmUgZ3JlYXRlciB0aGFuIDBcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5vblN1Ym1pdCh0aGlzLnNjZW5lKTtcblx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBzYXZlIHNjZW5lXCI7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBCZWF0LCBTY2VuZSwgQ2hhcHRlciB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuXG5leHBvcnQgY2xhc3MgQmVhdE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRiZWF0OiBQYXJ0aWFsPEJlYXQ+ID0ge1xuXHRcdHR5cGU6IFwic2V0dXBcIixcblx0XHRpbnRlbnQ6IFwiXCIsXG5cdFx0b3V0Y29tZTogXCJcIixcblx0fTtcblx0aXNFZGl0OiBib29sZWFuID0gZmFsc2U7XG5cdHNjZW5lczogU2NlbmVbXSA9IFtdO1xuXHRjaGFwdGVyczogQ2hhcHRlcltdID0gW107XG5cdGV4aXN0aW5nQmVhdHM6IEJlYXRbXSA9IFtdO1xuXHRzdG9yeUlkOiBzdHJpbmc7XG5cdGRlZmF1bHRTY2VuZUlkPzogc3RyaW5nO1xuXHRvblN1Ym1pdDogKGJlYXQ6IFBhcnRpYWw8QmVhdD4pID0+IFByb21pc2U8dm9pZD47XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0YXBwOiBBcHAsXG5cdFx0c3RvcnlJZDogc3RyaW5nLFxuXHRcdHNjZW5lczogU2NlbmVbXSxcblx0XHRvblN1Ym1pdDogKGJlYXQ6IFBhcnRpYWw8QmVhdD4pID0+IFByb21pc2U8dm9pZD4sXG5cdFx0ZXhpc3RpbmdCZWF0czogQmVhdFtdID0gW10sXG5cdFx0YmVhdD86IEJlYXQsXG5cdFx0Y2hhcHRlcnM6IENoYXB0ZXJbXSA9IFtdLFxuXHRcdGRlZmF1bHRTY2VuZUlkPzogc3RyaW5nXG5cdCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5zdG9yeUlkID0gc3RvcnlJZDtcblx0XHR0aGlzLnNjZW5lcyA9IHNjZW5lcztcblx0XHR0aGlzLmNoYXB0ZXJzID0gY2hhcHRlcnM7XG5cdFx0dGhpcy5leGlzdGluZ0JlYXRzID0gZXhpc3RpbmdCZWF0cztcblx0XHR0aGlzLmRlZmF1bHRTY2VuZUlkID0gZGVmYXVsdFNjZW5lSWQ7XG5cdFx0dGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuXHRcdGlmIChiZWF0KSB7XG5cdFx0XHR0aGlzLmlzRWRpdCA9IHRydWU7XG5cdFx0XHR0aGlzLmJlYXQgPSB7XG5cdFx0XHRcdHNjZW5lX2lkOiBiZWF0LnNjZW5lX2lkLFxuXHRcdFx0XHRvcmRlcl9udW06IGJlYXQub3JkZXJfbnVtLFxuXHRcdFx0XHR0eXBlOiBiZWF0LnR5cGUsXG5cdFx0XHRcdGludGVudDogYmVhdC5pbnRlbnQsXG5cdFx0XHRcdG91dGNvbWU6IGJlYXQub3V0Y29tZSxcblx0XHRcdH07XG5cdFx0fSBlbHNlIGlmIChkZWZhdWx0U2NlbmVJZCkge1xuXHRcdFx0dGhpcy5iZWF0LnNjZW5lX2lkID0gZGVmYXVsdFNjZW5lSWQ7XG5cdFx0fVxuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwge1xuXHRcdFx0dGV4dDogdGhpcy5pc0VkaXQgPyBcIkVkaXQgQmVhdFwiIDogXCJDcmVhdGUgQmVhdFwiLFxuXHRcdH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJTY2VuZVwiKVxuXHRcdFx0LnNldERlc2MoXCJTZWxlY3QgdGhlIHNjZW5lIGZvciB0aGlzIGJlYXRcIilcblx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcblx0XHRcdFx0Ly8gR3JvdXAgc2NlbmVzIGJ5IGNoYXB0ZXIgZm9yIGJldHRlciBVWFxuXHRcdFx0XHRjb25zdCBzY2VuZXNCeUNoYXB0ZXIgPSBuZXcgTWFwPHN0cmluZyB8IG51bGwsIFNjZW5lW10+KCk7XG5cdFx0XHRcdGZvciAoY29uc3Qgc2NlbmUgb2YgdGhpcy5zY2VuZXMpIHtcblx0XHRcdFx0XHRjb25zdCBjaGFwdGVySWQgPSBzY2VuZS5jaGFwdGVyX2lkIHx8IG51bGw7XG5cdFx0XHRcdFx0aWYgKCFzY2VuZXNCeUNoYXB0ZXIuaGFzKGNoYXB0ZXJJZCkpIHtcblx0XHRcdFx0XHRcdHNjZW5lc0J5Q2hhcHRlci5zZXQoY2hhcHRlcklkLCBbXSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHNjZW5lc0J5Q2hhcHRlci5nZXQoY2hhcHRlcklkKSEucHVzaChzY2VuZSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBIZWxwZXIgdG8gZ2V0IGNoYXB0ZXIgbGFiZWxcblx0XHRcdFx0Y29uc3QgZ2V0Q2hhcHRlckxhYmVsID0gKGNoYXB0ZXJJZDogc3RyaW5nIHwgbnVsbCk6IHN0cmluZyA9PiB7XG5cdFx0XHRcdFx0aWYgKCFjaGFwdGVySWQpIHJldHVybiBcIk5vIENoYXB0ZXJcIjtcblx0XHRcdFx0XHRjb25zdCBjaGFwdGVyID0gdGhpcy5jaGFwdGVycy5maW5kKGMgPT4gYy5pZCA9PT0gY2hhcHRlcklkKTtcblx0XHRcdFx0XHRyZXR1cm4gY2hhcHRlciA/IGBDaGFwdGVyICR7Y2hhcHRlci5udW1iZXJ9OiAke2NoYXB0ZXIudGl0bGV9YCA6IFwiTm8gQ2hhcHRlclwiO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8vIEFkZCBzY2VuZXMgZ3JvdXBlZFxuXHRcdFx0XHRmb3IgKGNvbnN0IFtjaGFwdGVySWQsIGNoYXB0ZXJTY2VuZXNdIG9mIHNjZW5lc0J5Q2hhcHRlci5lbnRyaWVzKCkpIHtcblx0XHRcdFx0XHRjb25zdCBsYWJlbCA9IGdldENoYXB0ZXJMYWJlbChjaGFwdGVySWQpO1xuXHRcdFx0XHRcdGZvciAoY29uc3Qgc2NlbmUgb2YgY2hhcHRlclNjZW5lcy5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKSkge1xuXHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKFxuXHRcdFx0XHRcdFx0XHRzY2VuZS5pZCxcblx0XHRcdFx0XHRcdFx0YCR7bGFiZWx9ID4gU2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lLmdvYWwgfHwgXCJVbnRpdGxlZFwifWBcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZHJvcGRvd24uc2V0VmFsdWUodGhpcy5iZWF0LnNjZW5lX2lkIHx8IFwiXCIpO1xuXHRcdFx0XHRkcm9wZG93bi5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLmJlYXQuc2NlbmVfaWQgPSB2YWx1ZTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdGlmICh0aGlzLmlzRWRpdCkge1xuXHRcdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0XHQuc2V0TmFtZShcIk9yZGVyIE51bWJlclwiKVxuXHRcdFx0XHQuc2V0RGVzYyhcIkJlYXQgb3JkZXIgd2l0aGluIHNjZW5lXCIpXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIjFcIilcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLmJlYXQub3JkZXJfbnVtPy50b1N0cmluZygpIHx8IFwiMVwiKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBudW0gPSBwYXJzZUludCh2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGlmICghaXNOYU4obnVtKSAmJiBudW0gPiAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5iZWF0Lm9yZGVyX251bSA9IG51bTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblx0XHR9XG5cblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZShcIlR5cGVcIilcblx0XHRcdC5zZXREZXNjKFwiQmVhdCB0eXBlXCIpXG5cdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxuXHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJzZXR1cFwiLCBcIlNldHVwXCIpXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihcInR1cm5cIiwgXCJUdXJuXCIpXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihcInJldmVhbFwiLCBcIlJldmVhbFwiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJjb25mbGljdFwiLCBcIkNvbmZsaWN0XCIpXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihcImNsaW1heFwiLCBcIkNsaW1heFwiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJyZXNvbHV0aW9uXCIsIFwiUmVzb2x1dGlvblwiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJob29rXCIsIFwiSG9va1wiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJ0cmFuc2l0aW9uXCIsIFwiVHJhbnNpdGlvblwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLmJlYXQudHlwZSB8fCBcInNldHVwXCIpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5iZWF0LnR5cGUgPSB2YWx1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5zZXROYW1lKFwiSW50ZW50XCIpXG5cdFx0XHQuc2V0RGVzYyhcIldoYXQgaXMgdGhlIGludGVudCBvZiB0aGlzIGJlYXQ/XCIpXG5cdFx0XHQuYWRkVGV4dEFyZWEoKHRleHQpID0+XG5cdFx0XHRcdHRleHRcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJXaGF0IGRvZXMgdGhlIGNoYXJhY3RlciB3YW50P1wiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLmJlYXQuaW50ZW50IHx8IFwiXCIpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5iZWF0LmludGVudCA9IHZhbHVlO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJPdXRjb21lXCIpXG5cdFx0XHQuc2V0RGVzYyhcIldoYXQgaXMgdGhlIG91dGNvbWUgb2YgdGhpcyBiZWF0P1wiKVxuXHRcdFx0LmFkZFRleHRBcmVhKCh0ZXh0KSA9PlxuXHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiV2hhdCBoYXBwZW5zIGFzIGEgcmVzdWx0P1wiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLmJlYXQub3V0Y29tZSB8fCBcIlwiKVxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuYmVhdC5vdXRjb21lID0gdmFsdWU7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblxuXHRcdGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiB0aGlzLmlzRWRpdCA/IFwiVXBkYXRlXCIgOiBcIkNyZWF0ZVwiLFxuXHRcdFx0Y2xzOiBcIm1vZC1jdGFcIixcblx0XHR9KTtcblx0XHRzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuc3VibWl0KCkpO1xuXG5cdFx0Y29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiQ2FuY2VsXCIsXG5cdFx0fSk7XG5cdFx0Y2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuXG5cdFx0Y29uc3QgaW50ZW50SW5wdXQgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcihcInRleHRhcmVhXCIpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQgfCBudWxsO1xuXHRcdGlmIChpbnRlbnRJbnB1dCkge1xuXHRcdFx0aW50ZW50SW5wdXQuZm9jdXMoKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBzdWJtaXQoKSB7XG5cdFx0aWYgKCF0aGlzLmJlYXQuc2NlbmVfaWQpIHtcblx0XHRcdG5ldyBOb3RpY2UoXCJQbGVhc2Ugc2VsZWN0IGEgc2NlbmVcIiwgMzAwMCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCF0aGlzLmJlYXQudHlwZSkge1xuXHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBzZWxlY3QgYSBiZWF0IHR5cGVcIiwgMzAwMCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gQXV0by1jYWxjdWxhdGUgb3JkZXJfbnVtIGlmIGNyZWF0aW5nXG5cdFx0aWYgKCF0aGlzLmlzRWRpdCkge1xuXHRcdFx0Y29uc3QgYmVhdHNJblNjZW5lID0gdGhpcy5leGlzdGluZ0JlYXRzLmZpbHRlcihiID0+IGIuc2NlbmVfaWQgPT09IHRoaXMuYmVhdC5zY2VuZV9pZCk7XG5cdFx0XHRjb25zdCBtYXhPcmRlck51bSA9IGJlYXRzSW5TY2VuZS5sZW5ndGggPiAwXG5cdFx0XHRcdD8gTWF0aC5tYXgoLi4uYmVhdHNJblNjZW5lLm1hcChiID0+IGIub3JkZXJfbnVtKSlcblx0XHRcdFx0OiAwO1xuXHRcdFx0dGhpcy5iZWF0Lm9yZGVyX251bSA9IG1heE9yZGVyTnVtICsgMTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKCF0aGlzLmJlYXQub3JkZXJfbnVtIHx8IHRoaXMuYmVhdC5vcmRlcl9udW0gPCAxKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJPcmRlciBudW1iZXIgbXVzdCBiZSBncmVhdGVyIHRoYW4gMFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCB0aGlzLm9uU3VibWl0KHRoaXMuYmVhdCk7XG5cdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gc2F2ZSBiZWF0XCI7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBDb250ZW50QmxvY2sgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IFVuc3BsYXNoQ2xpZW50LCBVbnNwbGFzaFBob3RvIH0gZnJvbSBcIi4uLy4uL2FwaS91bnNwbGFzaFwiO1xuaW1wb3J0IFN0b3J5RW5naW5lUGx1Z2luIGZyb20gXCIuLi8uLi9tYWluXCI7XG5cbmV4cG9ydCBjbGFzcyBDb250ZW50QmxvY2tNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0Y29udGVudEJsb2NrOiBQYXJ0aWFsPENvbnRlbnRCbG9jaz4gPSB7XG5cdFx0dHlwZTogXCJ0ZXh0XCIsXG5cdFx0a2luZDogXCJmaW5hbFwiLFxuXHRcdGNvbnRlbnQ6IFwiXCIsXG5cdFx0bWV0YWRhdGE6IHt9LFxuXHR9O1xuXHRpc0VkaXQ6IGJvb2xlYW4gPSBmYWxzZTtcblx0b25TdWJtaXQ6IChjb250ZW50QmxvY2s6IFBhcnRpYWw8Q29udGVudEJsb2NrPikgPT4gUHJvbWlzZTx2b2lkPjtcblx0dW5zcGxhc2hDbGllbnQ6IFVuc3BsYXNoQ2xpZW50O1xuXHR1bnNwbGFzaFJlc3VsdHM6IFVuc3BsYXNoUGhvdG9bXSA9IFtdO1xuXHR1bnNwbGFzaFNlYXJjaFF1ZXJ5OiBzdHJpbmcgPSBcIlwiO1xuXHR1bnNwbGFzaFNlYXJjaGluZzogYm9vbGVhbiA9IGZhbHNlO1xuXHRzZWxlY3RlZEltYWdlVXJsOiBzdHJpbmcgPSBcIlwiO1xuXHRwbHVnaW46IFN0b3J5RW5naW5lUGx1Z2luO1xuXHRjdXJyZW50SW1hZ2VTb3VyY2VUYWI6IFwidW5zcGxhc2hcIiB8IFwiaW50ZXJuZXQgbGlua1wiIHwgXCJsb2NhbFwiID0gXCJpbnRlcm5ldCBsaW5rXCI7XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0YXBwOiBBcHAsXG5cdFx0b25TdWJtaXQ6IChjb250ZW50QmxvY2s6IFBhcnRpYWw8Q29udGVudEJsb2NrPikgPT4gUHJvbWlzZTx2b2lkPixcblx0XHRjb250ZW50QmxvY2s/OiBDb250ZW50QmxvY2ssXG5cdFx0cGx1Z2luPzogU3RvcnlFbmdpbmVQbHVnaW5cblx0KSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW4gYXMgU3RvcnlFbmdpbmVQbHVnaW47XG5cdFx0Y29uc3QgdW5zcGxhc2hBY2Nlc3NLZXkgPSB0aGlzLnBsdWdpbj8uc2V0dGluZ3M/LnVuc3BsYXNoQWNjZXNzS2V5IHx8IFwiXCI7XG5cdFx0Y29uc3QgdW5zcGxhc2hTZWNyZXRLZXkgPSB0aGlzLnBsdWdpbj8uc2V0dGluZ3M/LnVuc3BsYXNoU2VjcmV0S2V5IHx8IFwiXCI7XG5cdFx0dGhpcy51bnNwbGFzaENsaWVudCA9IG5ldyBVbnNwbGFzaENsaWVudCh1bnNwbGFzaEFjY2Vzc0tleSwgdW5zcGxhc2hTZWNyZXRLZXkpO1xuXHRcdGlmIChjb250ZW50QmxvY2spIHtcblx0XHRcdHRoaXMuaXNFZGl0ID0gdHJ1ZTtcblx0XHRcdHRoaXMuY29udGVudEJsb2NrID0ge1xuXHRcdFx0XHR0eXBlOiBjb250ZW50QmxvY2sudHlwZSxcblx0XHRcdFx0a2luZDogY29udGVudEJsb2NrLmtpbmQgfHwgXCJmaW5hbFwiLFxuXHRcdFx0XHRjb250ZW50OiBjb250ZW50QmxvY2suY29udGVudCxcblx0XHRcdFx0bWV0YWRhdGE6IGNvbnRlbnRCbG9jay5tZXRhZGF0YSB8fCB7fSxcblx0XHRcdH07XG5cdFx0XHRpZiAoY29udGVudEJsb2NrLnR5cGUgPT09IFwiaW1hZ2VcIiAmJiBjb250ZW50QmxvY2suY29udGVudCkge1xuXHRcdFx0XHR0aGlzLnNlbGVjdGVkSW1hZ2VVcmwgPSBjb250ZW50QmxvY2suY29udGVudDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7XG5cdFx0XHR0ZXh0OiB0aGlzLmlzRWRpdCA/IFwiRWRpdCBDb250ZW50IEJsb2NrXCIgOiBcIkNyZWF0ZSBDb250ZW50IEJsb2NrXCIsXG5cdFx0fSk7XG5cblx0XHQvLyBPbmx5IHNob3cgdHlwZSBzZWxlY3RvciBpZiBlZGl0aW5nIGFuZCB0eXBlIGlzIG5vdCBhbHJlYWR5IHNldFxuXHRcdGlmICh0aGlzLmlzRWRpdCAmJiAhdGhpcy5jb250ZW50QmxvY2sudHlwZSkge1xuXHRcdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0XHQuc2V0TmFtZShcIlR5cGVcIilcblx0XHRcdFx0LnNldERlc2MoXCJTZWxlY3QgdGhlIGNvbnRlbnQgdHlwZVwiKVxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxuXHRcdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKFwidGV4dFwiLCBcIlRleHRcIilcblx0XHRcdFx0XHRcdC5hZGRPcHRpb24oXCJpbWFnZVwiLCBcIkltYWdlXCIpXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5jb250ZW50QmxvY2sudHlwZSB8fCBcInRleHRcIilcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2sudHlwZSA9IHZhbHVlIGFzIENvbnRlbnRCbG9ja1tcInR5cGVcIl07XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudEZpZWxkcygpO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBSZW5kZXIgY29udGVudCBmaWVsZHMgYmFzZWQgb24gdHlwZVxuXHRcdHRoaXMucmVuZGVyQ29udGVudEZpZWxkcygpO1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cblx0XHRjb25zdCBzdWJtaXRCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogdGhpcy5pc0VkaXQgPyBcIlVwZGF0ZVwiIDogXCJDcmVhdGVcIixcblx0XHRcdGNsczogXCJtb2QtY3RhXCIsXG5cdFx0fSk7XG5cdFx0c3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnN1Ym1pdCgpKTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIkNhbmNlbFwiLFxuXHRcdH0pO1xuXHRcdGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblx0fVxuXG5cdHJlbmRlckNvbnRlbnRGaWVsZHMoKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0XG5cdFx0Ly8gUmVtb3ZlIGV4aXN0aW5nIGNvbnRlbnQgZmllbGRzXG5cdFx0Y29uc3QgZXhpc3RpbmdGaWVsZHMgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvckFsbChcIi5jb250ZW50LWJsb2NrLWZpZWxkXCIpO1xuXHRcdGV4aXN0aW5nRmllbGRzLmZvckVhY2goKGVsKSA9PiBlbC5yZW1vdmUoKSk7XG5cblx0XHRpZiAodGhpcy5jb250ZW50QmxvY2sudHlwZSA9PT0gXCJ0ZXh0XCIpIHtcblx0XHRcdGNvbnN0IHRleHRGaWVsZCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwiY29udGVudC1ibG9jay1maWVsZFwiIH0pO1xuXHRcdFx0bmV3IFNldHRpbmcodGV4dEZpZWxkKVxuXHRcdFx0XHQuc2V0TmFtZShcIkNvbnRlbnRcIilcblx0XHRcdFx0LnNldERlc2MoXCJFbnRlciB0aGUgdGV4dCBjb250ZW50XCIpXG5cdFx0XHRcdC5hZGRUZXh0QXJlYSgodGV4dCkgPT5cblx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJFbnRlciB0ZXh0Li4uXCIpXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5jb250ZW50QmxvY2suY29udGVudCB8fCBcIlwiKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5jb250ZW50ID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSB3b3JkIGNvdW50IGluIG1ldGFkYXRhXG5cdFx0XHRcdFx0XHRcdGlmICghdGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSA9IHt9O1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhLndvcmRfY291bnQgPSB2YWx1ZS50cmltKCkuc3BsaXQoL1xccysvKS5maWx0ZXIodyA9PiB3Lmxlbmd0aCA+IDApLmxlbmd0aDtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdCk7XG5cdFx0fSBlbHNlIGlmICh0aGlzLmNvbnRlbnRCbG9jay50eXBlID09PSBcImltYWdlXCIpIHtcblx0XHRcdGNvbnN0IGltYWdlRmllbGQgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcImNvbnRlbnQtYmxvY2stZmllbGRcIiB9KTtcblx0XHRcdFxuXHRcdFx0Ly8gRGV0ZXJtaW5lIGN1cnJlbnQgc291cmNlIHRhYiBmcm9tIG1ldGFkYXRhIG9yIGRlZmF1bHRcblx0XHRcdGNvbnN0IHNvdXJjZVZhbHVlID0gdGhpcy5jb250ZW50QmxvY2subWV0YWRhdGE/LnNvdXJjZSB8fCBcImludGVybmV0IGxpbmtcIjtcblx0XHRcdHRoaXMuY3VycmVudEltYWdlU291cmNlVGFiID0gc291cmNlVmFsdWUgYXMgXCJ1bnNwbGFzaFwiIHwgXCJpbnRlcm5ldCBsaW5rXCIgfCBcImxvY2FsXCI7XG5cblx0XHRcdC8vIFNvdXJjZSB0YWJzXG5cdFx0XHRjb25zdCB0YWJzQ29udGFpbmVyID0gaW1hZ2VGaWVsZC5jcmVhdGVEaXYoeyBjbHM6IFwiY29udGVudC1ibG9jay1zb3VyY2UtdGFic1wiIH0pO1xuXHRcdFx0Y29uc3QgdW5zcGxhc2hUYWIgPSB0YWJzQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0dGV4dDogXCJVbnNwbGFzaFwiLFxuXHRcdFx0XHRjbHM6IGBjb250ZW50LWJsb2NrLXNvdXJjZS10YWIgJHt0aGlzLmN1cnJlbnRJbWFnZVNvdXJjZVRhYiA9PT0gXCJ1bnNwbGFzaFwiID8gXCJpcy1hY3RpdmVcIiA6IFwiXCJ9YCxcblx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgaW50ZXJuZXRUYWIgPSB0YWJzQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0dGV4dDogXCJJbnRlcm5ldCBMaW5rXCIsXG5cdFx0XHRcdGNsczogYGNvbnRlbnQtYmxvY2stc291cmNlLXRhYiAke3RoaXMuY3VycmVudEltYWdlU291cmNlVGFiID09PSBcImludGVybmV0IGxpbmtcIiA/IFwiaXMtYWN0aXZlXCIgOiBcIlwifWAsXG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IGxvY2FsVGFiID0gdGFic0NvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdHRleHQ6IFwiTG9jYWwgVXBsb2FkXCIsXG5cdFx0XHRcdGNsczogYGNvbnRlbnQtYmxvY2stc291cmNlLXRhYiAke3RoaXMuY3VycmVudEltYWdlU291cmNlVGFiID09PSBcImxvY2FsXCIgPyBcImlzLWFjdGl2ZVwiIDogXCJcIn1gLFxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIFRhYiBjb250ZW50IGNvbnRhaW5lclxuXHRcdFx0Y29uc3QgdGFiQ29udGVudCA9IGltYWdlRmllbGQuY3JlYXRlRGl2KHsgY2xzOiBcImNvbnRlbnQtYmxvY2stc291cmNlLXRhYi1jb250ZW50XCIgfSk7XG5cblx0XHRcdC8vIFRhYiBjbGljayBoYW5kbGVyc1xuXHRcdFx0dW5zcGxhc2hUYWIub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0dGhpcy5jdXJyZW50SW1hZ2VTb3VyY2VUYWIgPSBcInVuc3BsYXNoXCI7XG5cdFx0XHRcdGlmICghdGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEpIHtcblx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSA9IHt9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhLnNvdXJjZSA9IFwidW5zcGxhc2hcIjtcblx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50RmllbGRzKCk7XG5cdFx0XHR9O1xuXG5cdFx0XHRpbnRlcm5ldFRhYi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmN1cnJlbnRJbWFnZVNvdXJjZVRhYiA9IFwiaW50ZXJuZXQgbGlua1wiO1xuXHRcdFx0XHRpZiAoIXRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhKSB7XG5cdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEgPSB7fTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YS5zb3VyY2UgPSBcImludGVybmV0IGxpbmtcIjtcblx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50RmllbGRzKCk7XG5cdFx0XHR9O1xuXG5cdFx0XHRsb2NhbFRhYi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmN1cnJlbnRJbWFnZVNvdXJjZVRhYiA9IFwibG9jYWxcIjtcblx0XHRcdFx0aWYgKCF0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSkge1xuXHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhID0ge307XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEuc291cmNlID0gXCJsb2NhbFwiO1xuXHRcdFx0XHR0aGlzLnJlbmRlckNvbnRlbnRGaWVsZHMoKTtcblx0XHRcdH07XG5cblx0XHRcdC8vIFJlbmRlciBjb250ZW50IGJhc2VkIG9uIHNlbGVjdGVkIHRhYlxuXHRcdFx0aWYgKHRoaXMuY3VycmVudEltYWdlU291cmNlVGFiID09PSBcInVuc3BsYXNoXCIpIHtcblx0XHRcdFx0Ly8gVW5zcGxhc2ggdGFiIGNvbnRlbnRcblx0XHRcdFx0Y29uc3QgdW5zcGxhc2hBY2Nlc3NLZXkgPSB0aGlzLnBsdWdpbj8uc2V0dGluZ3M/LnVuc3BsYXNoQWNjZXNzS2V5IHx8IFwiXCI7XG5cdFx0XHRcdGlmICh1bnNwbGFzaEFjY2Vzc0tleSAmJiB1bnNwbGFzaEFjY2Vzc0tleSAhPT0gXCJZT1VSX1VOU1BMQVNIX0FDQ0VTU19LRVlcIikge1xuXHRcdFx0XHRcdGNvbnN0IHVuc3BsYXNoU2V0dGluZyA9IG5ldyBTZXR0aW5nKHRhYkNvbnRlbnQpO1xuXHRcdFx0XHRcdHVuc3BsYXNoU2V0dGluZy5zZXROYW1lKFwiU2VhcmNoIFVuc3BsYXNoXCIpO1xuXHRcdFx0XHRcdHVuc3BsYXNoU2V0dGluZy5zZXREZXNjKFwiU2VhcmNoIGZvciBmcmVlIGltYWdlc1wiKTtcblx0XHRcdFx0XHR1bnNwbGFzaFNldHRpbmcuYWRkQnV0dG9uKChidXR0b24pID0+IHtcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KFwiU2VhcmNoXCIpO1xuXHRcdFx0XHRcdFx0YnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnNob3dVbnNwbGFzaFNlYXJjaCgpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc3QgdW5zcGxhc2hTZXR0aW5nID0gbmV3IFNldHRpbmcodGFiQ29udGVudCk7XG5cdFx0XHRcdFx0dW5zcGxhc2hTZXR0aW5nLnNldE5hbWUoXCJTZWFyY2ggVW5zcGxhc2hcIik7XG5cdFx0XHRcdFx0dW5zcGxhc2hTZXR0aW5nLnNldERlc2MoXCJDb25maWd1cmUgVW5zcGxhc2ggQWNjZXNzIEtleSBhbmQgU2VjcmV0IEtleSBpbiBwbHVnaW4gc2V0dGluZ3MgdG8gZW5hYmxlIGltYWdlIHNlYXJjaFwiKTtcblx0XHRcdFx0XHR1bnNwbGFzaFNldHRpbmcuYWRkQnV0dG9uKChidXR0b24pID0+IHtcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KFwiU2VhcmNoXCIpO1xuXHRcdFx0XHRcdFx0YnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gU2hvdyBpbWFnZSBVUkwgaWYgYWxyZWFkeSBzZWxlY3RlZFxuXHRcdFx0XHRpZiAodGhpcy5zZWxlY3RlZEltYWdlVXJsKSB7XG5cdFx0XHRcdFx0bmV3IFNldHRpbmcodGFiQ29udGVudClcblx0XHRcdFx0XHRcdC5zZXROYW1lKFwiU2VsZWN0ZWQgSW1hZ2UgVVJMXCIpXG5cdFx0XHRcdFx0XHQuc2V0RGVzYyhcIkltYWdlIFVSTCBmcm9tIFVuc3BsYXNoXCIpXG5cdFx0XHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnNlbGVjdGVkSW1hZ2VVcmwpXG5cdFx0XHRcdFx0XHRcdFx0LnNldERpc2FibGVkKHRydWUpXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHRoaXMuY3VycmVudEltYWdlU291cmNlVGFiID09PSBcImludGVybmV0IGxpbmtcIikge1xuXHRcdFx0XHQvLyBJbnRlcm5ldCBMaW5rIHRhYiBjb250ZW50XG5cdFx0XHRcdG5ldyBTZXR0aW5nKHRhYkNvbnRlbnQpXG5cdFx0XHRcdFx0LnNldE5hbWUoXCJJbWFnZSBVUkxcIilcblx0XHRcdFx0XHQuc2V0RGVzYyhcIkVudGVyIGltYWdlIFVSTFwiKVxuXHRcdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJodHRwczovL2V4YW1wbGUuY29tL2ltYWdlLmpwZ1wiKVxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5zZWxlY3RlZEltYWdlVXJsKVxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5zZWxlY3RlZEltYWdlVXJsID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2suY29udGVudCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdGlmICghdGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhID0ge307XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhLnNvdXJjZSA9IFwiaW50ZXJuZXQgbGlua1wiO1xuXHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdCk7XG5cdFx0XHR9IGVsc2UgaWYgKHRoaXMuY3VycmVudEltYWdlU291cmNlVGFiID09PSBcImxvY2FsXCIpIHtcblx0XHRcdFx0Ly8gTG9jYWwgVXBsb2FkIHRhYiBjb250ZW50XG5cdFx0XHRcdG5ldyBTZXR0aW5nKHRhYkNvbnRlbnQpXG5cdFx0XHRcdFx0LnNldE5hbWUoXCJVcGxvYWQgZnJvbSBDb21wdXRlclwiKVxuXHRcdFx0XHRcdC5zZXREZXNjKFwiVXBsb2FkIGltYWdlIGZyb20geW91ciBjb21wdXRlciAoY29taW5nIHNvb24pXCIpXG5cdFx0XHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XG5cdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChcIkNob29zZSBGaWxlXCIpO1xuXHRcdFx0XHRcdFx0YnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb21tb24gZmllbGRzIChzaG93biBmb3IgYWxsIHRhYnMpXG5cdFx0XHQvLyBBbHQgdGV4dFxuXHRcdFx0Y29uc3QgYWx0VGV4dFZhbHVlID0gdGhpcy5jb250ZW50QmxvY2subWV0YWRhdGE/LmFsdF90ZXh0IHx8IFwiXCI7XG5cdFx0XHRjb25zdCBhbHRUZXh0U2V0dGluZyA9IG5ldyBTZXR0aW5nKGltYWdlRmllbGQpO1xuXHRcdFx0YWx0VGV4dFNldHRpbmcuc2V0TmFtZShcIkFsdCBUZXh0XCIpO1xuXHRcdFx0YWx0VGV4dFNldHRpbmcuc2V0RGVzYyhcIkFsdCB0ZXh0IGZvciBhY2Nlc3NpYmlsaXR5XCIpO1xuXHRcdFx0YWx0VGV4dFNldHRpbmcuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIkRlc2NyaWJlIHRoZSBpbWFnZSBmb3IgYWNjZXNzaWJpbGl0eVwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZShhbHRUZXh0VmFsdWUpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKCF0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSA9IHt9O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEuYWx0X3RleHQgPSB2YWx1ZSB8fCB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRcdC8vIEF1dGhvciBOYW1lXG5cdFx0XHRjb25zdCBhdXRob3JOYW1lVmFsdWUgPSB0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YT8uYXV0aG9yX25hbWUgfHwgXCJcIjtcblx0XHRcdG5ldyBTZXR0aW5nKGltYWdlRmllbGQpXG5cdFx0XHRcdC5zZXROYW1lKFwiQXV0aG9yIE5hbWVcIilcblx0XHRcdFx0LnNldERlc2MoXCJOYW1lIG9mIHRoZSBpbWFnZSBhdXRob3IvcGhvdG9ncmFwaGVyXCIpXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIkF1dGhvciBuYW1lXCIpXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoYXV0aG9yTmFtZVZhbHVlKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpZiAoIXRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEgPSB7fTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YS5hdXRob3JfbmFtZSA9IHZhbHVlIHx8IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdCk7XG5cblx0XHRcdC8vIEF0dHJpYnV0aW9uXG5cdFx0XHRjb25zdCBhdHRyaWJ1dGlvblZhbHVlID0gdGhpcy5jb250ZW50QmxvY2subWV0YWRhdGE/LmF0dHJpYnV0aW9uIHx8IFwiXCI7XG5cdFx0XHRuZXcgU2V0dGluZyhpbWFnZUZpZWxkKVxuXHRcdFx0XHQuc2V0TmFtZShcIkF0dHJpYnV0aW9uXCIpXG5cdFx0XHRcdC5zZXREZXNjKFwiQXR0cmlidXRpb24gdGV4dCAoZS5nLiwgJ1Bob3RvIGJ5IEpvaG4gRG9lIG9uIFVuc3BsYXNoJylcIilcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiUGhvdG8gYnkgQXV0aG9yIE5hbWUgb24gU291cmNlXCIpXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoYXR0cmlidXRpb25WYWx1ZSlcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKCF0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhID0ge307XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEuYXR0cmlidXRpb24gPSB2YWx1ZSB8fCB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXG5cdFx0XHQvLyBBdHRyaWJ1dGlvbiBVUkxcblx0XHRcdGNvbnN0IGF0dHJpYnV0aW9uVXJsVmFsdWUgPSB0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YT8uYXR0cmlidXRpb25fdXJsIHx8IFwiXCI7XG5cdFx0XHRuZXcgU2V0dGluZyhpbWFnZUZpZWxkKVxuXHRcdFx0XHQuc2V0TmFtZShcIkF0dHJpYnV0aW9uIFVSTFwiKVxuXHRcdFx0XHQuc2V0RGVzYyhcIkxpbmsgdG8gdGhlIG9yaWdpbmFsIGltYWdlIG9yIGF1dGhvciBwYWdlXCIpXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcImh0dHBzOi8vZXhhbXBsZS5jb20vcGhvdG9cIilcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShhdHRyaWJ1dGlvblVybFZhbHVlKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpZiAoIXRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEgPSB7fTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YS5hdHRyaWJ1dGlvbl91cmwgPSB2YWx1ZSB8fCB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdH1cblx0fVxuXG5cdHNob3dVbnNwbGFzaFNlYXJjaCgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRcblx0XHQvLyBDcmVhdGUgc2VhcmNoIG1vZGFsXG5cdFx0Y29uc3Qgc2VhcmNoTW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdHNlYXJjaE1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIlNlYXJjaCBVbnNwbGFzaFwiKTtcblxuXHRcdGNvbnN0IHNlYXJjaENvbnRlbnQgPSBzZWFyY2hNb2RhbC5jb250ZW50RWw7XG5cdFx0XG5cdFx0Ly8gU2VhcmNoIGlucHV0XG5cdFx0Y29uc3Qgc2VhcmNoSW5wdXQgPSBzZWFyY2hDb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuXHRcdFx0dHlwZTogXCJ0ZXh0XCIsXG5cdFx0XHRwbGFjZWhvbGRlcjogXCJTZWFyY2ggZm9yIGltYWdlcy4uLlwiLFxuXHRcdFx0Y2xzOiBcInVuc3BsYXNoLXNlYXJjaC1pbnB1dFwiLFxuXHRcdH0pO1xuXHRcdHNlYXJjaElucHV0LnZhbHVlID0gdGhpcy51bnNwbGFzaFNlYXJjaFF1ZXJ5O1xuXHRcdHNlYXJjaElucHV0LnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG5cdFx0c2VhcmNoSW5wdXQuc3R5bGUucGFkZGluZyA9IFwiMC41cmVtXCI7XG5cdFx0c2VhcmNoSW5wdXQuc3R5bGUubWFyZ2luQm90dG9tID0gXCIxcmVtXCI7XG5cblx0XHQvLyBTZWFyY2ggYnV0dG9uXG5cdFx0Y29uc3Qgc2VhcmNoQnV0dG9uID0gc2VhcmNoQ29udGVudC5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIlNlYXJjaFwiLFxuXHRcdFx0Y2xzOiBcIm1vZC1jdGFcIixcblx0XHR9KTtcblx0XHRzZWFyY2hCdXR0b24uc3R5bGUubWFyZ2luQm90dG9tID0gXCIxcmVtXCI7XG5cblx0XHQvLyBSZXN1bHRzIGNvbnRhaW5lclxuXHRcdGNvbnN0IHJlc3VsdHNDb250YWluZXIgPSBzZWFyY2hDb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJ1bnNwbGFzaC1yZXN1bHRzLWdyaWRcIiB9KTtcblxuXHRcdGNvbnN0IHBlcmZvcm1TZWFyY2ggPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRjb25zdCBxdWVyeSA9IHNlYXJjaElucHV0LnZhbHVlLnRyaW0oKTtcblx0XHRcdGlmICghcXVlcnkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBlbnRlciBhIHNlYXJjaCBxdWVyeVwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLnVuc3BsYXNoU2VhcmNoaW5nID0gdHJ1ZTtcblx0XHRcdHNlYXJjaEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG5cdFx0XHRzZWFyY2hCdXR0b24uc2V0VGV4dChcIlNlYXJjaGluZy4uLlwiKTtcblx0XHRcdHJlc3VsdHNDb250YWluZXIuZW1wdHkoKTtcblx0XHRcdHJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJTZWFyY2hpbmcuLi5cIiB9KTtcblxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnVuc3BsYXNoQ2xpZW50LnNlYXJjaEltYWdlcyhxdWVyeSwgMSwgMjApO1xuXHRcdFx0XHR0aGlzLnVuc3BsYXNoUmVzdWx0cyA9IHJlc3BvbnNlLnJlc3VsdHM7XG5cblx0XHRcdFx0cmVzdWx0c0NvbnRhaW5lci5lbXB0eSgpO1xuXHRcdFx0XHRpZiAodGhpcy51bnNwbGFzaFJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0cmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIHJlc3VsdHMgZm91bmQuXCIgfSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBwaG90byBvZiB0aGlzLnVuc3BsYXNoUmVzdWx0cykge1xuXHRcdFx0XHRcdFx0Y29uc3QgcGhvdG9JdGVtID0gcmVzdWx0c0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwidW5zcGxhc2gtcGhvdG8taXRlbVwiIH0pO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRjb25zdCBpbWcgPSBwaG90b0l0ZW0uY3JlYXRlRWwoXCJpbWdcIiwge1xuXHRcdFx0XHRcdFx0XHRhdHRyOiB7XG5cdFx0XHRcdFx0XHRcdFx0c3JjOiB0aGlzLnVuc3BsYXNoQ2xpZW50LmdldEltYWdlVXJsKHBob3RvLCBcInRodW1iXCIpLFxuXHRcdFx0XHRcdFx0XHRcdGFsdDogcGhvdG8uYWx0X2Rlc2NyaXB0aW9uIHx8IHBob3RvLmRlc2NyaXB0aW9uIHx8IFwiVW5zcGxhc2ggcGhvdG9cIixcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0aW1nLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG5cdFx0XHRcdFx0XHRpbWcuc3R5bGUuaGVpZ2h0ID0gXCIxNTBweFwiO1xuXHRcdFx0XHRcdFx0aW1nLnN0eWxlLm9iamVjdEZpdCA9IFwiY292ZXJcIjtcblx0XHRcdFx0XHRcdGltZy5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjRweFwiO1xuXHRcdFx0XHRcdFx0aW1nLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuXG5cdFx0XHRcdFx0XHRjb25zdCBwaG90b0luZm8gPSBwaG90b0l0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInVuc3BsYXNoLXBob3RvLWluZm9cIiB9KTtcblx0XHRcdFx0XHRcdHBob3RvSW5mby5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0XHRcdFx0XHR0ZXh0OiBwaG90by5hbHRfZGVzY3JpcHRpb24gfHwgcGhvdG8uZGVzY3JpcHRpb24gfHwgXCJVbnRpdGxlZFwiLFxuXHRcdFx0XHRcdFx0XHRjbHM6IFwidW5zcGxhc2gtcGhvdG8tdGl0bGVcIixcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0cGhvdG9JbmZvLmNyZWF0ZUVsKFwicFwiLCB7XG5cdFx0XHRcdFx0XHRcdHRleHQ6IHRoaXMudW5zcGxhc2hDbGllbnQuZ2V0QXR0cmlidXRpb25UZXh0KHBob3RvKSxcblx0XHRcdFx0XHRcdFx0Y2xzOiBcInVuc3BsYXNoLXBob3RvLWF0dHJpYnV0aW9uXCIsXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0cGhvdG9JdGVtLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGltYWdlVXJsID0gdGhpcy51bnNwbGFzaENsaWVudC5nZXRJbWFnZVVybChwaG90bywgXCJyZWd1bGFyXCIpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkSW1hZ2VVcmwgPSBpbWFnZVVybDtcblx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2suY29udGVudCA9IGltYWdlVXJsO1xuXHRcdFx0XHRcdFx0XHRpZiAoIXRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEgPSB7fTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRjb25zdCBhbHRUZXh0ID0gcGhvdG8uYWx0X2Rlc2NyaXB0aW9uIHx8IHBob3RvLmRlc2NyaXB0aW9uIHx8IFwiXCI7XG5cdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhLmFsdF90ZXh0ID0gYWx0VGV4dDtcblx0XHRcdFx0XHRcdFx0Ly8gQWRkIGF0dHJpYnV0aW9uIGFzIHJlcXVpcmVkIGJ5IFVuc3BsYXNoXG5cdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhLmF0dHJpYnV0aW9uID0gdGhpcy51bnNwbGFzaENsaWVudC5nZXRBdHRyaWJ1dGlvblRleHQocGhvdG8pO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YS5hdHRyaWJ1dGlvbl91cmwgPSB0aGlzLnVuc3BsYXNoQ2xpZW50LmdldEF0dHJpYnV0aW9uVXJsKHBob3RvKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEuYXV0aG9yX25hbWUgPSBwaG90by51c2VyLm5hbWU7XG5cdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhLnNvdXJjZSA9IFwidW5zcGxhc2hcIjtcblx0XHRcdFx0XHRcdFx0c2VhcmNoTW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50RmllbGRzKCk7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJJbWFnZSBzZWxlY3RlZFwiKTtcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIHNlYXJjaCBVbnNwbGFzaFwiO1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHRcdHJlc3VsdHNDb250YWluZXIuZW1wdHkoKTtcblx0XHRcdFx0cmVzdWx0c0NvbnRhaW5lci5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0XHRcdHRleHQ6IGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCxcblx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVycm9yXCIsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0dGhpcy51bnNwbGFzaFNlYXJjaGluZyA9IGZhbHNlO1xuXHRcdFx0XHRzZWFyY2hCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdFx0c2VhcmNoQnV0dG9uLnNldFRleHQoXCJTZWFyY2hcIik7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHNlYXJjaEJ1dHRvbi5vbmNsaWNrID0gcGVyZm9ybVNlYXJjaDtcblx0XHRzZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgKGUpID0+IHtcblx0XHRcdGlmIChlLmtleSA9PT0gXCJFbnRlclwiKSB7XG5cdFx0XHRcdHBlcmZvcm1TZWFyY2goKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIExvYWQgaW5pdGlhbCByZXN1bHRzIGlmIHF1ZXJ5IGV4aXN0c1xuXHRcdGlmICh0aGlzLnVuc3BsYXNoU2VhcmNoUXVlcnkpIHtcblx0XHRcdHBlcmZvcm1TZWFyY2goKTtcblx0XHR9XG5cblx0XHRzZWFyY2hNb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRhc3luYyBzdWJtaXQoKSB7XG5cdFx0Ly8gVHlwZSBzaG91bGQgYWx3YXlzIGJlIHNldCAoZWl0aGVyIGZyb20gZWRpdCBvciBmcm9tIGJ1dHRvbiBjbGljaylcblx0XHRpZiAoIXRoaXMuY29udGVudEJsb2NrLnR5cGUpIHtcblx0XHRcdHRoaXMuY29udGVudEJsb2NrLnR5cGUgPSBcInRleHRcIjsgLy8gRGVmYXVsdCBmYWxsYmFja1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLmNvbnRlbnRCbG9jay50eXBlID09PSBcInRleHRcIiAmJiAhdGhpcy5jb250ZW50QmxvY2suY29udGVudD8udHJpbSgpKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiUGxlYXNlIGVudGVyIHRleHQgY29udGVudFwiLCAzMDAwKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5jb250ZW50QmxvY2sudHlwZSA9PT0gXCJpbWFnZVwiICYmICF0aGlzLmNvbnRlbnRCbG9jay5jb250ZW50Py50cmltKCkpIHtcblx0XHRcdG5ldyBOb3RpY2UoXCJQbGVhc2UgZW50ZXIgYW4gaW1hZ2UgVVJMIG9yIHNlbGVjdCBhbiBpbWFnZVwiLCAzMDAwKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5vblN1Ym1pdCh0aGlzLmNvbnRlbnRCbG9jayk7XG5cdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gc2F2ZSBjb250ZW50IGJsb2NrXCI7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG4iLCAiZXhwb3J0IGludGVyZmFjZSBVbnNwbGFzaFBob3RvIHtcblx0aWQ6IHN0cmluZztcblx0d2lkdGg6IG51bWJlcjtcblx0aGVpZ2h0OiBudW1iZXI7XG5cdHVybHM6IHtcblx0XHRyYXc6IHN0cmluZztcblx0XHRmdWxsOiBzdHJpbmc7XG5cdFx0cmVndWxhcjogc3RyaW5nO1xuXHRcdHNtYWxsOiBzdHJpbmc7XG5cdFx0dGh1bWI6IHN0cmluZztcblx0fTtcblx0YWx0X2Rlc2NyaXB0aW9uOiBzdHJpbmcgfCBudWxsO1xuXHRkZXNjcmlwdGlvbjogc3RyaW5nIHwgbnVsbDtcblx0dXNlcjoge1xuXHRcdG5hbWU6IHN0cmluZztcblx0XHR1c2VybmFtZTogc3RyaW5nO1xuXHR9O1xuXHRsaW5rczoge1xuXHRcdGh0bWw6IHN0cmluZztcblx0fTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVbnNwbGFzaFNlYXJjaFJlc3BvbnNlIHtcblx0dG90YWw6IG51bWJlcjtcblx0dG90YWxfcGFnZXM6IG51bWJlcjtcblx0cmVzdWx0czogVW5zcGxhc2hQaG90b1tdO1xufVxuXG5leHBvcnQgY2xhc3MgVW5zcGxhc2hDbGllbnQge1xuXHRwcml2YXRlIHJlYWRvbmx5IGFjY2Vzc0tleTogc3RyaW5nO1xuXHRwcml2YXRlIHJlYWRvbmx5IHNlY3JldEtleTogc3RyaW5nO1xuXHRwcml2YXRlIHJlYWRvbmx5IGFwaVVybCA9IFwiaHR0cHM6Ly9hcGkudW5zcGxhc2guY29tXCI7XG5cblx0Y29uc3RydWN0b3IoYWNjZXNzS2V5Pzogc3RyaW5nLCBzZWNyZXRLZXk/OiBzdHJpbmcpIHtcblx0XHQvLyBVbnNwbGFzaCByZXF1aXJlcyBhbiBhY2Nlc3Mga2V5IChBcHBsaWNhdGlvbiBJRCkgZm9yIEFQSSBhY2Nlc3Ncblx0XHQvLyBTZWNyZXQgS2V5IGlzIG9wdGlvbmFsIGJ1dCBtYXkgYmUgbmVlZGVkIGZvciBzb21lIG9wZXJhdGlvbnNcblx0XHQvLyBZb3UgY2FuIGdldCBib3RoIGtleXMgZnJvbSBodHRwczovL3Vuc3BsYXNoLmNvbS9kZXZlbG9wZXJzXG5cdFx0dGhpcy5hY2Nlc3NLZXkgPSBhY2Nlc3NLZXkgfHwgXCJZT1VSX1VOU1BMQVNIX0FDQ0VTU19LRVlcIjtcblx0XHR0aGlzLnNlY3JldEtleSA9IHNlY3JldEtleSB8fCBcIlwiO1xuXHR9XG5cblx0YXN5bmMgc2VhcmNoSW1hZ2VzKHF1ZXJ5OiBzdHJpbmcsIHBhZ2U6IG51bWJlciA9IDEsIHBlclBhZ2U6IG51bWJlciA9IDIwKTogUHJvbWlzZTxVbnNwbGFzaFNlYXJjaFJlc3BvbnNlPiB7XG5cdFx0Y29uc3QgdXJsID0gYCR7dGhpcy5hcGlVcmx9L3NlYXJjaC9waG90b3M/cXVlcnk9JHtlbmNvZGVVUklDb21wb25lbnQocXVlcnkpfSZwYWdlPSR7cGFnZX0mcGVyX3BhZ2U9JHtwZXJQYWdlfWA7XG5cdFx0XG5cdFx0Y29uc3QgaGVhZGVyczogSGVhZGVyc0luaXQgPSB7XG5cdFx0XHRcIkFjY2VwdC1WZXJzaW9uXCI6IFwidjFcIixcblx0XHR9O1xuXG5cdFx0Ly8gVW5zcGxhc2ggQVBJIHJlcXVpcmVzIEF1dGhvcml6YXRpb24gaGVhZGVyIHdpdGggYWNjZXNzIGtleVxuXHRcdGlmICghdGhpcy5hY2Nlc3NLZXkgfHwgdGhpcy5hY2Nlc3NLZXkgPT09IFwiWU9VUl9VTlNQTEFTSF9BQ0NFU1NfS0VZXCIpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlVuc3BsYXNoIGFjY2VzcyBrZXkgaXMgcmVxdWlyZWQuIFBsZWFzZSBjb25maWd1cmUgaXQgaW4gcGx1Z2luIHNldHRpbmdzLlwiKTtcblx0XHR9XG5cblx0XHRoZWFkZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IGBDbGllbnQtSUQgJHt0aGlzLmFjY2Vzc0tleX1gO1xuXG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHsgaGVhZGVycyB9KTtcblxuXHRcdGlmICghcmVzcG9uc2Uub2spIHtcblx0XHRcdGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcblx0XHRcdHRocm93IG5ldyBFcnJvcihgVW5zcGxhc2ggQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fS4gJHtlcnJvclRleHR9YCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3BvbnNlLmpzb24oKSBhcyBQcm9taXNlPFVuc3BsYXNoU2VhcmNoUmVzcG9uc2U+O1xuXHR9XG5cblx0Z2V0SW1hZ2VVcmwocGhvdG86IFVuc3BsYXNoUGhvdG8sIHNpemU6IFwicmF3XCIgfCBcImZ1bGxcIiB8IFwicmVndWxhclwiIHwgXCJzbWFsbFwiIHwgXCJ0aHVtYlwiID0gXCJyZWd1bGFyXCIpOiBzdHJpbmcge1xuXHRcdHJldHVybiBwaG90by51cmxzW3NpemVdO1xuXHR9XG5cblx0Z2V0QXR0cmlidXRpb25VcmwocGhvdG86IFVuc3BsYXNoUGhvdG8pOiBzdHJpbmcge1xuXHRcdHJldHVybiBwaG90by5saW5rcy5odG1sO1xuXHR9XG5cblx0Z2V0QXR0cmlidXRpb25UZXh0KHBob3RvOiBVbnNwbGFzaFBob3RvKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gYFBob3RvIGJ5ICR7cGhvdG8udXNlci5uYW1lfSBvbiBVbnNwbGFzaGA7XG5cdH1cbn1cblxuIiwgImltcG9ydCB7IE1vZGFsLCBBcHAsIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuLy8gQHRzLWlnbm9yZSAtIGQzIHR5cGVzIG1heSBub3QgcmVzb2x2ZSBjb3JyZWN0bHkgaW4gYWxsIGVudmlyb25tZW50c1xuaW1wb3J0ICogYXMgZDMgZnJvbSBcImQzXCI7XG5pbXBvcnQgeyBXb3JsZEV2ZW50LCBUaW1lQ29uZmlnIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5cbmludGVyZmFjZSBUaW1lbGluZUV2ZW50IGV4dGVuZHMgV29ybGRFdmVudCB7XG5cdHRpbWVsaW5lX3Bvc2l0aW9uOiBudW1iZXI7XG5cdHBhcmVudF9pZDogc3RyaW5nIHwgbnVsbDtcblx0aXNfZXBvY2g6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBUaW1lbGluZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRldmVudHM6IFdvcmxkRXZlbnRbXTtcblx0dGltZUNvbmZpZzogVGltZUNvbmZpZyB8IG51bGw7XG5cdFxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZXZlbnRzOiBXb3JsZEV2ZW50W10sIHRpbWVDb25maWc6IFRpbWVDb25maWcgfCBudWxsKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLmV2ZW50cyA9IGV2ZW50cztcblx0XHR0aGlzLnRpbWVDb25maWcgPSB0aW1lQ29uZmlnO1xuXHR9XG5cdFxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdFx0Y29udGVudEVsLmFkZENsYXNzKFwic3RvcnktZW5naW5lLXRpbWVsaW5lLW1vZGFsXCIpO1xuXHRcdFxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJXb3JsZCBUaW1lbGluZVwiIH0pO1xuXHRcdFxuXHRcdC8vIENvbnRhaW5lciBwYXJhIG8gZ3JhZmljbyBEM1xuXHRcdGNvbnN0IGNoYXJ0Q29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGltZWxpbmUtY2hhcnRcIiB9KTtcblx0XHRcblx0XHR0aGlzLnJlbmRlclRpbWVsaW5lKGNoYXJ0Q29udGFpbmVyKTtcblx0fVxuXHRcblx0cmVuZGVyVGltZWxpbmUoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGlmICh0aGlzLmV2ZW50cy5sZW5ndGggPT09IDApIHtcblx0XHRcdGNvbnRhaW5lci5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIGV2ZW50cyB3aXRoIHRpbWVsaW5lIGRhdGEgZm91bmQuXCIgfSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRGltZW5zb2VzXG5cdFx0Y29uc3Qgd2lkdGggPSA4MDA7XG5cdFx0Y29uc3QgaGVpZ2h0ID0gNDAwO1xuXHRcdGNvbnN0IG1hcmdpbiA9IHsgdG9wOiAyMCwgcmlnaHQ6IDMwLCBib3R0b206IDUwLCBsZWZ0OiA2MCB9O1xuXHRcdFxuXHRcdC8vIENyaWFyIFNWR1xuXHRcdGNvbnN0IHN2ZyA9IGQzLnNlbGVjdChjb250YWluZXIpXG5cdFx0XHQuYXBwZW5kKFwic3ZnXCIpXG5cdFx0XHQuYXR0cihcIndpZHRoXCIsIHdpZHRoKVxuXHRcdFx0LmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KTtcblx0XHRcblx0XHQvLyBGaWx0cmFyIGV2ZW50b3MgY29tIHRpbWVsaW5lX3Bvc2l0aW9uXG5cdFx0Y29uc3QgZXZlbnRzV2l0aFBvc2l0aW9uOiBUaW1lbGluZUV2ZW50W10gPSB0aGlzLmV2ZW50cy5tYXAoKGUsIGkpID0+ICh7XG5cdFx0XHQuLi5lLFxuXHRcdFx0dGltZWxpbmVfcG9zaXRpb246IGUudGltZWxpbmVfcG9zaXRpb24gPz8gaSAqIDEwLFxuXHRcdFx0cGFyZW50X2lkOiBlLnBhcmVudF9pZCA/PyBudWxsLFxuXHRcdFx0aXNfZXBvY2g6IGUuaXNfZXBvY2ggPz8gZmFsc2UsXG5cdFx0fSkpO1xuXG5cdFx0Ly8gRXNjYWxhIFggKHRpbWVsaW5lX3Bvc2l0aW9uIGVtIGFub3MpXG5cdFx0Y29uc3QgeEV4dGVudCA9IGQzLmV4dGVudChldmVudHNXaXRoUG9zaXRpb24sIChkOiBUaW1lbGluZUV2ZW50KSA9PiBkLnRpbWVsaW5lX3Bvc2l0aW9uKSBhcyBbbnVtYmVyLCBudW1iZXJdO1xuXHRcdGNvbnN0IHhTY2FsZSA9IGQzLnNjYWxlTGluZWFyKClcblx0XHRcdC5kb21haW4oW3hFeHRlbnRbMF0gLSAxLCB4RXh0ZW50WzFdICsgMV0pXG5cdFx0XHQucmFuZ2UoW21hcmdpbi5sZWZ0LCB3aWR0aCAtIG1hcmdpbi5yaWdodF0pO1xuXHRcdFxuXHRcdC8vIEVzY2FsYSBZIChpbXBvcnRhbmNlIDEtMTApXG5cdFx0Y29uc3QgeVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxuXHRcdFx0LmRvbWFpbihbMCwgMTBdKVxuXHRcdFx0LnJhbmdlKFtoZWlnaHQgLSBtYXJnaW4uYm90dG9tLCBtYXJnaW4udG9wXSk7XG5cdFx0XG5cdFx0Ly8gRXNjYWxhIGRlIGNvciBwb3IgdGlwbyBkZSBldmVudG9cblx0XHRjb25zdCBjb2xvclNjYWxlID0gZDMuc2NhbGVPcmRpbmFsKGQzLnNjaGVtZUNhdGVnb3J5MTApO1xuXHRcdFxuXHRcdC8vIEVpeG8gWFxuXHRcdHN2Zy5hcHBlbmQoXCJnXCIpXG5cdFx0XHQuYXR0cihcInRyYW5zZm9ybVwiLCBgdHJhbnNsYXRlKDAsJHtoZWlnaHQgLSBtYXJnaW4uYm90dG9tfSlgKVxuXHRcdFx0LmNhbGwoZDMuYXhpc0JvdHRvbSh4U2NhbGUpLnRpY2tGb3JtYXQoKGQ6IGQzLk51bWJlclZhbHVlKSA9PiBgWWVhciAke2R9YCkpO1xuXHRcdFxuXHRcdC8vIEVpeG8gWVxuXHRcdHN2Zy5hcHBlbmQoXCJnXCIpXG5cdFx0XHQuYXR0cihcInRyYW5zZm9ybVwiLCBgdHJhbnNsYXRlKCR7bWFyZ2luLmxlZnR9LDApYClcblx0XHRcdC5jYWxsKGQzLmF4aXNMZWZ0KHlTY2FsZSkudGlja0Zvcm1hdCgoZDogZDMuTnVtYmVyVmFsdWUpID0+IGBJbXAgJHtkfWApKTtcblx0XHRcblx0XHQvLyBDb25lY3RhciBldmVudG9zIHBhaS1maWxobyBjb20gbGluaGFzIChzZSBob3V2ZXIgcGFyZW50X2lkKVxuXHRcdGNvbnN0IGV2ZW50c1dpdGhQYXJlbnQgPSBldmVudHNXaXRoUG9zaXRpb24uZmlsdGVyKGUgPT4gZS5wYXJlbnRfaWQpO1xuXHRcdHN2Zy5zZWxlY3RBbGwoXCJsaW5lLnBhcmVudC1saW5rXCIpXG5cdFx0XHQuZGF0YShldmVudHNXaXRoUGFyZW50KVxuXHRcdFx0LmpvaW4oXCJsaW5lXCIpXG5cdFx0XHQuYXR0cihcImNsYXNzXCIsIFwicGFyZW50LWxpbmtcIilcblx0XHRcdC5hdHRyKFwieDFcIiwgKGQ6IFRpbWVsaW5lRXZlbnQpID0+IHtcblx0XHRcdFx0Y29uc3QgcGFyZW50ID0gZXZlbnRzV2l0aFBvc2l0aW9uLmZpbmQoZSA9PiBlLmlkID09PSBkLnBhcmVudF9pZCk7XG5cdFx0XHRcdHJldHVybiBwYXJlbnQgPyB4U2NhbGUocGFyZW50LnRpbWVsaW5lX3Bvc2l0aW9uKSA6IDA7XG5cdFx0XHR9KVxuXHRcdFx0LmF0dHIoXCJ5MVwiLCAoZDogVGltZWxpbmVFdmVudCkgPT4ge1xuXHRcdFx0XHRjb25zdCBwYXJlbnQgPSBldmVudHNXaXRoUG9zaXRpb24uZmluZChlID0+IGUuaWQgPT09IGQucGFyZW50X2lkKTtcblx0XHRcdFx0cmV0dXJuIHBhcmVudCA/IHlTY2FsZShwYXJlbnQuaW1wb3J0YW5jZSkgOiAwO1xuXHRcdFx0fSlcblx0XHRcdC5hdHRyKFwieDJcIiwgKGQ6IFRpbWVsaW5lRXZlbnQpID0+IHhTY2FsZShkLnRpbWVsaW5lX3Bvc2l0aW9uKSlcblx0XHRcdC5hdHRyKFwieTJcIiwgKGQ6IFRpbWVsaW5lRXZlbnQpID0+IHlTY2FsZShkLmltcG9ydGFuY2UpKVxuXHRcdFx0LmF0dHIoXCJzdHJva2VcIiwgXCIjOTk5XCIpXG5cdFx0XHQuYXR0cihcInN0cm9rZS1kYXNoYXJyYXlcIiwgXCI0LDJcIilcblx0XHRcdC5hdHRyKFwic3Ryb2tlLXdpZHRoXCIsIDEpO1xuXHRcdFxuXHRcdC8vIFBsb3RhciBldmVudG9zIGNvbW8gY2lyY3Vsb3Ncblx0XHRzdmcuc2VsZWN0QWxsKFwiY2lyY2xlXCIpXG5cdFx0XHQuZGF0YShldmVudHNXaXRoUG9zaXRpb24pXG5cdFx0XHQuam9pbihcImNpcmNsZVwiKVxuXHRcdFx0LmF0dHIoXCJjeFwiLCAoZDogVGltZWxpbmVFdmVudCkgPT4geFNjYWxlKGQudGltZWxpbmVfcG9zaXRpb24pKVxuXHRcdFx0LmF0dHIoXCJjeVwiLCAoZDogVGltZWxpbmVFdmVudCkgPT4geVNjYWxlKGQuaW1wb3J0YW5jZSkpXG5cdFx0XHQuYXR0cihcInJcIiwgKGQ6IFRpbWVsaW5lRXZlbnQpID0+IGQuaXNfZXBvY2ggPyAxMCA6IDYpXG5cdFx0XHQuYXR0cihcImZpbGxcIiwgKGQ6IFRpbWVsaW5lRXZlbnQpID0+IGNvbG9yU2NhbGUoZC50eXBlIHx8IFwiZGVmYXVsdFwiKSlcblx0XHRcdC5hdHRyKFwic3Ryb2tlXCIsIChkOiBUaW1lbGluZUV2ZW50KSA9PiBkLmlzX2Vwb2NoID8gXCJnb2xkXCIgOiBcIm5vbmVcIilcblx0XHRcdC5hdHRyKFwic3Ryb2tlLXdpZHRoXCIsIDMpXG5cdFx0XHQuc3R5bGUoXCJjdXJzb3JcIiwgXCJwb2ludGVyXCIpXG5cdFx0XHQub24oXCJjbGlja1wiLCAoX2V2ZW50OiBNb3VzZUV2ZW50LCBkOiBUaW1lbGluZUV2ZW50KSA9PiB0aGlzLnNob3dFdmVudERldGFpbHMoZCkpXG5cdFx0XHQuYXBwZW5kKFwidGl0bGVcIilcblx0XHRcdC50ZXh0KChkOiBUaW1lbGluZUV2ZW50KSA9PiBgJHtkLm5hbWV9IChZZWFyICR7ZC50aW1lbGluZV9wb3NpdGlvbn0pYCk7XG5cdFx0XG5cdFx0Ly8gTGFiZWxzIHBhcmEgZXZlbnRvcyBpbXBvcnRhbnRlcyAoaW1wb3J0YW5jZSA+PSA4KVxuXHRcdHN2Zy5zZWxlY3RBbGwoXCJ0ZXh0LmV2ZW50LWxhYmVsXCIpXG5cdFx0XHQuZGF0YShldmVudHNXaXRoUG9zaXRpb24uZmlsdGVyKGUgPT4gZS5pbXBvcnRhbmNlID49IDgpKVxuXHRcdFx0LmpvaW4oXCJ0ZXh0XCIpXG5cdFx0XHQuYXR0cihcImNsYXNzXCIsIFwiZXZlbnQtbGFiZWxcIilcblx0XHRcdC5hdHRyKFwieFwiLCAoZDogVGltZWxpbmVFdmVudCkgPT4geFNjYWxlKGQudGltZWxpbmVfcG9zaXRpb24pKVxuXHRcdFx0LmF0dHIoXCJ5XCIsIChkOiBUaW1lbGluZUV2ZW50KSA9PiB5U2NhbGUoZC5pbXBvcnRhbmNlKSAtIDEyKVxuXHRcdFx0LmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxuXHRcdFx0LmF0dHIoXCJmb250LXNpemVcIiwgXCIxMHB4XCIpXG5cdFx0XHQudGV4dCgoZDogVGltZWxpbmVFdmVudCkgPT4gZC5uYW1lLnN1YnN0cmluZygwLCAxNSkgKyAoZC5uYW1lLmxlbmd0aCA+IDE1ID8gXCIuLi5cIiA6IFwiXCIpKTtcblx0fVxuXHRcblx0c2hvd0V2ZW50RGV0YWlscyhldmVudDogV29ybGRFdmVudCkge1xuXHRcdC8vIE1vc3RyYXIgZGV0YWxoZXMgZG8gZXZlbnRvIGVtIHVtIHBvcHVwIG91IHJlZGlyZWNpb25hclxuXHRcdG5ldyBOb3RpY2UoYEV2ZW50OiAke2V2ZW50Lm5hbWV9XFxuWWVhcjogJHtldmVudC50aW1lbGluZV9wb3NpdGlvbiA/PyBcIk4vQVwifVxcbkltcG9ydGFuY2U6ICR7ZXZlbnQuaW1wb3J0YW5jZX1gKTtcblx0fVxuXHRcblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYXNjZW5kaW5nKGEsIGIpIHtcbiAgcmV0dXJuIGEgPT0gbnVsbCB8fCBiID09IG51bGwgPyBOYU4gOiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogYSA+PSBiID8gMCA6IE5hTjtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZXNjZW5kaW5nKGEsIGIpIHtcbiAgcmV0dXJuIGEgPT0gbnVsbCB8fCBiID09IG51bGwgPyBOYU5cbiAgICA6IGIgPCBhID8gLTFcbiAgICA6IGIgPiBhID8gMVxuICAgIDogYiA+PSBhID8gMFxuICAgIDogTmFOO1xufVxuIiwgImltcG9ydCBhc2NlbmRpbmcgZnJvbSBcIi4vYXNjZW5kaW5nLmpzXCI7XG5pbXBvcnQgZGVzY2VuZGluZyBmcm9tIFwiLi9kZXNjZW5kaW5nLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGJpc2VjdG9yKGYpIHtcbiAgbGV0IGNvbXBhcmUxLCBjb21wYXJlMiwgZGVsdGE7XG5cbiAgLy8gSWYgYW4gYWNjZXNzb3IgaXMgc3BlY2lmaWVkLCBwcm9tb3RlIGl0IHRvIGEgY29tcGFyYXRvci4gSW4gdGhpcyBjYXNlIHdlXG4gIC8vIGNhbiB0ZXN0IHdoZXRoZXIgdGhlIHNlYXJjaCB2YWx1ZSBpcyAoc2VsZi0pIGNvbXBhcmFibGUuIFdlIGNhblx1MjAxOXQgZG8gdGhpc1xuICAvLyBmb3IgYSBjb21wYXJhdG9yIChleGNlcHQgZm9yIHNwZWNpZmljLCBrbm93biBjb21wYXJhdG9ycykgYmVjYXVzZSB3ZSBjYW5cdTIwMTl0XG4gIC8vIHRlbGwgaWYgdGhlIGNvbXBhcmF0b3IgaXMgc3ltbWV0cmljLCBhbmQgYW4gYXN5bW1ldHJpYyBjb21wYXJhdG9yIGNhblx1MjAxOXQgYmVcbiAgLy8gdXNlZCB0byB0ZXN0IHdoZXRoZXIgYSBzaW5nbGUgdmFsdWUgaXMgY29tcGFyYWJsZS5cbiAgaWYgKGYubGVuZ3RoICE9PSAyKSB7XG4gICAgY29tcGFyZTEgPSBhc2NlbmRpbmc7XG4gICAgY29tcGFyZTIgPSAoZCwgeCkgPT4gYXNjZW5kaW5nKGYoZCksIHgpO1xuICAgIGRlbHRhID0gKGQsIHgpID0+IGYoZCkgLSB4O1xuICB9IGVsc2Uge1xuICAgIGNvbXBhcmUxID0gZiA9PT0gYXNjZW5kaW5nIHx8IGYgPT09IGRlc2NlbmRpbmcgPyBmIDogemVybztcbiAgICBjb21wYXJlMiA9IGY7XG4gICAgZGVsdGEgPSBmO1xuICB9XG5cbiAgZnVuY3Rpb24gbGVmdChhLCB4LCBsbyA9IDAsIGhpID0gYS5sZW5ndGgpIHtcbiAgICBpZiAobG8gPCBoaSkge1xuICAgICAgaWYgKGNvbXBhcmUxKHgsIHgpICE9PSAwKSByZXR1cm4gaGk7XG4gICAgICBkbyB7XG4gICAgICAgIGNvbnN0IG1pZCA9IChsbyArIGhpKSA+Pj4gMTtcbiAgICAgICAgaWYgKGNvbXBhcmUyKGFbbWlkXSwgeCkgPCAwKSBsbyA9IG1pZCArIDE7XG4gICAgICAgIGVsc2UgaGkgPSBtaWQ7XG4gICAgICB9IHdoaWxlIChsbyA8IGhpKTtcbiAgICB9XG4gICAgcmV0dXJuIGxvO1xuICB9XG5cbiAgZnVuY3Rpb24gcmlnaHQoYSwgeCwgbG8gPSAwLCBoaSA9IGEubGVuZ3RoKSB7XG4gICAgaWYgKGxvIDwgaGkpIHtcbiAgICAgIGlmIChjb21wYXJlMSh4LCB4KSAhPT0gMCkgcmV0dXJuIGhpO1xuICAgICAgZG8ge1xuICAgICAgICBjb25zdCBtaWQgPSAobG8gKyBoaSkgPj4+IDE7XG4gICAgICAgIGlmIChjb21wYXJlMihhW21pZF0sIHgpIDw9IDApIGxvID0gbWlkICsgMTtcbiAgICAgICAgZWxzZSBoaSA9IG1pZDtcbiAgICAgIH0gd2hpbGUgKGxvIDwgaGkpO1xuICAgIH1cbiAgICByZXR1cm4gbG87XG4gIH1cblxuICBmdW5jdGlvbiBjZW50ZXIoYSwgeCwgbG8gPSAwLCBoaSA9IGEubGVuZ3RoKSB7XG4gICAgY29uc3QgaSA9IGxlZnQoYSwgeCwgbG8sIGhpIC0gMSk7XG4gICAgcmV0dXJuIGkgPiBsbyAmJiBkZWx0YShhW2kgLSAxXSwgeCkgPiAtZGVsdGEoYVtpXSwgeCkgPyBpIC0gMSA6IGk7XG4gIH1cblxuICByZXR1cm4ge2xlZnQsIGNlbnRlciwgcmlnaHR9O1xufVxuXG5mdW5jdGlvbiB6ZXJvKCkge1xuICByZXR1cm4gMDtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBudW1iZXIoeCkge1xuICByZXR1cm4geCA9PT0gbnVsbCA/IE5hTiA6ICt4O1xufVxuXG5leHBvcnQgZnVuY3Rpb24qIG51bWJlcnModmFsdWVzLCB2YWx1ZW9mKSB7XG4gIGlmICh2YWx1ZW9mID09PSB1bmRlZmluZWQpIHtcbiAgICBmb3IgKGxldCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsICYmICh2YWx1ZSA9ICt2YWx1ZSkgPj0gdmFsdWUpIHtcbiAgICAgICAgeWllbGQgdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxldCBpbmRleCA9IC0xO1xuICAgIGZvciAobGV0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKCh2YWx1ZSA9IHZhbHVlb2YodmFsdWUsICsraW5kZXgsIHZhbHVlcykpICE9IG51bGwgJiYgKHZhbHVlID0gK3ZhbHVlKSA+PSB2YWx1ZSkge1xuICAgICAgICB5aWVsZCB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgYXNjZW5kaW5nIGZyb20gXCIuL2FzY2VuZGluZy5qc1wiO1xuaW1wb3J0IGJpc2VjdG9yIGZyb20gXCIuL2Jpc2VjdG9yLmpzXCI7XG5pbXBvcnQgbnVtYmVyIGZyb20gXCIuL251bWJlci5qc1wiO1xuXG5jb25zdCBhc2NlbmRpbmdCaXNlY3QgPSBiaXNlY3Rvcihhc2NlbmRpbmcpO1xuZXhwb3J0IGNvbnN0IGJpc2VjdFJpZ2h0ID0gYXNjZW5kaW5nQmlzZWN0LnJpZ2h0O1xuZXhwb3J0IGNvbnN0IGJpc2VjdExlZnQgPSBhc2NlbmRpbmdCaXNlY3QubGVmdDtcbmV4cG9ydCBjb25zdCBiaXNlY3RDZW50ZXIgPSBiaXNlY3RvcihudW1iZXIpLmNlbnRlcjtcbmV4cG9ydCBkZWZhdWx0IGJpc2VjdFJpZ2h0O1xuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGV4dGVudCh2YWx1ZXMsIHZhbHVlb2YpIHtcbiAgbGV0IG1pbjtcbiAgbGV0IG1heDtcbiAgaWYgKHZhbHVlb2YgPT09IHVuZGVmaW5lZCkge1xuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICBpZiAobWluID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAodmFsdWUgPj0gdmFsdWUpIG1pbiA9IG1heCA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChtaW4gPiB2YWx1ZSkgbWluID0gdmFsdWU7XG4gICAgICAgICAgaWYgKG1heCA8IHZhbHVlKSBtYXggPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsZXQgaW5kZXggPSAtMTtcbiAgICBmb3IgKGxldCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICgodmFsdWUgPSB2YWx1ZW9mKHZhbHVlLCArK2luZGV4LCB2YWx1ZXMpKSAhPSBudWxsKSB7XG4gICAgICAgIGlmIChtaW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmICh2YWx1ZSA+PSB2YWx1ZSkgbWluID0gbWF4ID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKG1pbiA+IHZhbHVlKSBtaW4gPSB2YWx1ZTtcbiAgICAgICAgICBpZiAobWF4IDwgdmFsdWUpIG1heCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBbbWluLCBtYXhdO1xufVxuIiwgImV4cG9ydCBjbGFzcyBJbnRlcm5NYXAgZXh0ZW5kcyBNYXAge1xuICBjb25zdHJ1Y3RvcihlbnRyaWVzLCBrZXkgPSBrZXlvZikge1xuICAgIHN1cGVyKCk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge19pbnRlcm46IHt2YWx1ZTogbmV3IE1hcCgpfSwgX2tleToge3ZhbHVlOiBrZXl9fSk7XG4gICAgaWYgKGVudHJpZXMgIT0gbnVsbCkgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgZW50cmllcykgdGhpcy5zZXQoa2V5LCB2YWx1ZSk7XG4gIH1cbiAgZ2V0KGtleSkge1xuICAgIHJldHVybiBzdXBlci5nZXQoaW50ZXJuX2dldCh0aGlzLCBrZXkpKTtcbiAgfVxuICBoYXMoa2V5KSB7XG4gICAgcmV0dXJuIHN1cGVyLmhhcyhpbnRlcm5fZ2V0KHRoaXMsIGtleSkpO1xuICB9XG4gIHNldChrZXksIHZhbHVlKSB7XG4gICAgcmV0dXJuIHN1cGVyLnNldChpbnRlcm5fc2V0KHRoaXMsIGtleSksIHZhbHVlKTtcbiAgfVxuICBkZWxldGUoa2V5KSB7XG4gICAgcmV0dXJuIHN1cGVyLmRlbGV0ZShpbnRlcm5fZGVsZXRlKHRoaXMsIGtleSkpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBJbnRlcm5TZXQgZXh0ZW5kcyBTZXQge1xuICBjb25zdHJ1Y3Rvcih2YWx1ZXMsIGtleSA9IGtleW9mKSB7XG4gICAgc3VwZXIoKTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7X2ludGVybjoge3ZhbHVlOiBuZXcgTWFwKCl9LCBfa2V5OiB7dmFsdWU6IGtleX19KTtcbiAgICBpZiAodmFsdWVzICE9IG51bGwpIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB0aGlzLmFkZCh2YWx1ZSk7XG4gIH1cbiAgaGFzKHZhbHVlKSB7XG4gICAgcmV0dXJuIHN1cGVyLmhhcyhpbnRlcm5fZ2V0KHRoaXMsIHZhbHVlKSk7XG4gIH1cbiAgYWRkKHZhbHVlKSB7XG4gICAgcmV0dXJuIHN1cGVyLmFkZChpbnRlcm5fc2V0KHRoaXMsIHZhbHVlKSk7XG4gIH1cbiAgZGVsZXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHN1cGVyLmRlbGV0ZShpbnRlcm5fZGVsZXRlKHRoaXMsIHZhbHVlKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW50ZXJuX2dldCh7X2ludGVybiwgX2tleX0sIHZhbHVlKSB7XG4gIGNvbnN0IGtleSA9IF9rZXkodmFsdWUpO1xuICByZXR1cm4gX2ludGVybi5oYXMoa2V5KSA/IF9pbnRlcm4uZ2V0KGtleSkgOiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gaW50ZXJuX3NldCh7X2ludGVybiwgX2tleX0sIHZhbHVlKSB7XG4gIGNvbnN0IGtleSA9IF9rZXkodmFsdWUpO1xuICBpZiAoX2ludGVybi5oYXMoa2V5KSkgcmV0dXJuIF9pbnRlcm4uZ2V0KGtleSk7XG4gIF9pbnRlcm4uc2V0KGtleSwgdmFsdWUpO1xuICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGludGVybl9kZWxldGUoe19pbnRlcm4sIF9rZXl9LCB2YWx1ZSkge1xuICBjb25zdCBrZXkgPSBfa2V5KHZhbHVlKTtcbiAgaWYgKF9pbnRlcm4uaGFzKGtleSkpIHtcbiAgICB2YWx1ZSA9IF9pbnRlcm4uZ2V0KGtleSk7XG4gICAgX2ludGVybi5kZWxldGUoa2V5KTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGtleW9mKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcbn1cbiIsICJjb25zdCBlMTAgPSBNYXRoLnNxcnQoNTApLFxuICAgIGU1ID0gTWF0aC5zcXJ0KDEwKSxcbiAgICBlMiA9IE1hdGguc3FydCgyKTtcblxuZnVuY3Rpb24gdGlja1NwZWMoc3RhcnQsIHN0b3AsIGNvdW50KSB7XG4gIGNvbnN0IHN0ZXAgPSAoc3RvcCAtIHN0YXJ0KSAvIE1hdGgubWF4KDAsIGNvdW50KSxcbiAgICAgIHBvd2VyID0gTWF0aC5mbG9vcihNYXRoLmxvZzEwKHN0ZXApKSxcbiAgICAgIGVycm9yID0gc3RlcCAvIE1hdGgucG93KDEwLCBwb3dlciksXG4gICAgICBmYWN0b3IgPSBlcnJvciA+PSBlMTAgPyAxMCA6IGVycm9yID49IGU1ID8gNSA6IGVycm9yID49IGUyID8gMiA6IDE7XG4gIGxldCBpMSwgaTIsIGluYztcbiAgaWYgKHBvd2VyIDwgMCkge1xuICAgIGluYyA9IE1hdGgucG93KDEwLCAtcG93ZXIpIC8gZmFjdG9yO1xuICAgIGkxID0gTWF0aC5yb3VuZChzdGFydCAqIGluYyk7XG4gICAgaTIgPSBNYXRoLnJvdW5kKHN0b3AgKiBpbmMpO1xuICAgIGlmIChpMSAvIGluYyA8IHN0YXJ0KSArK2kxO1xuICAgIGlmIChpMiAvIGluYyA+IHN0b3ApIC0taTI7XG4gICAgaW5jID0gLWluYztcbiAgfSBlbHNlIHtcbiAgICBpbmMgPSBNYXRoLnBvdygxMCwgcG93ZXIpICogZmFjdG9yO1xuICAgIGkxID0gTWF0aC5yb3VuZChzdGFydCAvIGluYyk7XG4gICAgaTIgPSBNYXRoLnJvdW5kKHN0b3AgLyBpbmMpO1xuICAgIGlmIChpMSAqIGluYyA8IHN0YXJ0KSArK2kxO1xuICAgIGlmIChpMiAqIGluYyA+IHN0b3ApIC0taTI7XG4gIH1cbiAgaWYgKGkyIDwgaTEgJiYgMC41IDw9IGNvdW50ICYmIGNvdW50IDwgMikgcmV0dXJuIHRpY2tTcGVjKHN0YXJ0LCBzdG9wLCBjb3VudCAqIDIpO1xuICByZXR1cm4gW2kxLCBpMiwgaW5jXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdGlja3Moc3RhcnQsIHN0b3AsIGNvdW50KSB7XG4gIHN0b3AgPSArc3RvcCwgc3RhcnQgPSArc3RhcnQsIGNvdW50ID0gK2NvdW50O1xuICBpZiAoIShjb3VudCA+IDApKSByZXR1cm4gW107XG4gIGlmIChzdGFydCA9PT0gc3RvcCkgcmV0dXJuIFtzdGFydF07XG4gIGNvbnN0IHJldmVyc2UgPSBzdG9wIDwgc3RhcnQsIFtpMSwgaTIsIGluY10gPSByZXZlcnNlID8gdGlja1NwZWMoc3RvcCwgc3RhcnQsIGNvdW50KSA6IHRpY2tTcGVjKHN0YXJ0LCBzdG9wLCBjb3VudCk7XG4gIGlmICghKGkyID49IGkxKSkgcmV0dXJuIFtdO1xuICBjb25zdCBuID0gaTIgLSBpMSArIDEsIHRpY2tzID0gbmV3IEFycmF5KG4pO1xuICBpZiAocmV2ZXJzZSkge1xuICAgIGlmIChpbmMgPCAwKSBmb3IgKGxldCBpID0gMDsgaSA8IG47ICsraSkgdGlja3NbaV0gPSAoaTIgLSBpKSAvIC1pbmM7XG4gICAgZWxzZSBmb3IgKGxldCBpID0gMDsgaSA8IG47ICsraSkgdGlja3NbaV0gPSAoaTIgLSBpKSAqIGluYztcbiAgfSBlbHNlIHtcbiAgICBpZiAoaW5jIDwgMCkgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyArK2kpIHRpY2tzW2ldID0gKGkxICsgaSkgLyAtaW5jO1xuICAgIGVsc2UgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyArK2kpIHRpY2tzW2ldID0gKGkxICsgaSkgKiBpbmM7XG4gIH1cbiAgcmV0dXJuIHRpY2tzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGlja0luY3JlbWVudChzdGFydCwgc3RvcCwgY291bnQpIHtcbiAgc3RvcCA9ICtzdG9wLCBzdGFydCA9ICtzdGFydCwgY291bnQgPSArY291bnQ7XG4gIHJldHVybiB0aWNrU3BlYyhzdGFydCwgc3RvcCwgY291bnQpWzJdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGlja1N0ZXAoc3RhcnQsIHN0b3AsIGNvdW50KSB7XG4gIHN0b3AgPSArc3RvcCwgc3RhcnQgPSArc3RhcnQsIGNvdW50ID0gK2NvdW50O1xuICBjb25zdCByZXZlcnNlID0gc3RvcCA8IHN0YXJ0LCBpbmMgPSByZXZlcnNlID8gdGlja0luY3JlbWVudChzdG9wLCBzdGFydCwgY291bnQpIDogdGlja0luY3JlbWVudChzdGFydCwgc3RvcCwgY291bnQpO1xuICByZXR1cm4gKHJldmVyc2UgPyAtMSA6IDEpICogKGluYyA8IDAgPyAxIC8gLWluYyA6IGluYyk7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oeCkge1xuICByZXR1cm4geDtcbn1cbiIsICJpbXBvcnQgaWRlbnRpdHkgZnJvbSBcIi4vaWRlbnRpdHkuanNcIjtcblxudmFyIHRvcCA9IDEsXG4gICAgcmlnaHQgPSAyLFxuICAgIGJvdHRvbSA9IDMsXG4gICAgbGVmdCA9IDQsXG4gICAgZXBzaWxvbiA9IDFlLTY7XG5cbmZ1bmN0aW9uIHRyYW5zbGF0ZVgoeCkge1xuICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyB4ICsgXCIsMClcIjtcbn1cblxuZnVuY3Rpb24gdHJhbnNsYXRlWSh5KSB7XG4gIHJldHVybiBcInRyYW5zbGF0ZSgwLFwiICsgeSArIFwiKVwiO1xufVxuXG5mdW5jdGlvbiBudW1iZXIoc2NhbGUpIHtcbiAgcmV0dXJuIGQgPT4gK3NjYWxlKGQpO1xufVxuXG5mdW5jdGlvbiBjZW50ZXIoc2NhbGUsIG9mZnNldCkge1xuICBvZmZzZXQgPSBNYXRoLm1heCgwLCBzY2FsZS5iYW5kd2lkdGgoKSAtIG9mZnNldCAqIDIpIC8gMjtcbiAgaWYgKHNjYWxlLnJvdW5kKCkpIG9mZnNldCA9IE1hdGgucm91bmQob2Zmc2V0KTtcbiAgcmV0dXJuIGQgPT4gK3NjYWxlKGQpICsgb2Zmc2V0O1xufVxuXG5mdW5jdGlvbiBlbnRlcmluZygpIHtcbiAgcmV0dXJuICF0aGlzLl9fYXhpcztcbn1cblxuZnVuY3Rpb24gYXhpcyhvcmllbnQsIHNjYWxlKSB7XG4gIHZhciB0aWNrQXJndW1lbnRzID0gW10sXG4gICAgICB0aWNrVmFsdWVzID0gbnVsbCxcbiAgICAgIHRpY2tGb3JtYXQgPSBudWxsLFxuICAgICAgdGlja1NpemVJbm5lciA9IDYsXG4gICAgICB0aWNrU2l6ZU91dGVyID0gNixcbiAgICAgIHRpY2tQYWRkaW5nID0gMyxcbiAgICAgIG9mZnNldCA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmRldmljZVBpeGVsUmF0aW8gPiAxID8gMCA6IDAuNSxcbiAgICAgIGsgPSBvcmllbnQgPT09IHRvcCB8fCBvcmllbnQgPT09IGxlZnQgPyAtMSA6IDEsXG4gICAgICB4ID0gb3JpZW50ID09PSBsZWZ0IHx8IG9yaWVudCA9PT0gcmlnaHQgPyBcInhcIiA6IFwieVwiLFxuICAgICAgdHJhbnNmb3JtID0gb3JpZW50ID09PSB0b3AgfHwgb3JpZW50ID09PSBib3R0b20gPyB0cmFuc2xhdGVYIDogdHJhbnNsYXRlWTtcblxuICBmdW5jdGlvbiBheGlzKGNvbnRleHQpIHtcbiAgICB2YXIgdmFsdWVzID0gdGlja1ZhbHVlcyA9PSBudWxsID8gKHNjYWxlLnRpY2tzID8gc2NhbGUudGlja3MuYXBwbHkoc2NhbGUsIHRpY2tBcmd1bWVudHMpIDogc2NhbGUuZG9tYWluKCkpIDogdGlja1ZhbHVlcyxcbiAgICAgICAgZm9ybWF0ID0gdGlja0Zvcm1hdCA9PSBudWxsID8gKHNjYWxlLnRpY2tGb3JtYXQgPyBzY2FsZS50aWNrRm9ybWF0LmFwcGx5KHNjYWxlLCB0aWNrQXJndW1lbnRzKSA6IGlkZW50aXR5KSA6IHRpY2tGb3JtYXQsXG4gICAgICAgIHNwYWNpbmcgPSBNYXRoLm1heCh0aWNrU2l6ZUlubmVyLCAwKSArIHRpY2tQYWRkaW5nLFxuICAgICAgICByYW5nZSA9IHNjYWxlLnJhbmdlKCksXG4gICAgICAgIHJhbmdlMCA9ICtyYW5nZVswXSArIG9mZnNldCxcbiAgICAgICAgcmFuZ2UxID0gK3JhbmdlW3JhbmdlLmxlbmd0aCAtIDFdICsgb2Zmc2V0LFxuICAgICAgICBwb3NpdGlvbiA9IChzY2FsZS5iYW5kd2lkdGggPyBjZW50ZXIgOiBudW1iZXIpKHNjYWxlLmNvcHkoKSwgb2Zmc2V0KSxcbiAgICAgICAgc2VsZWN0aW9uID0gY29udGV4dC5zZWxlY3Rpb24gPyBjb250ZXh0LnNlbGVjdGlvbigpIDogY29udGV4dCxcbiAgICAgICAgcGF0aCA9IHNlbGVjdGlvbi5zZWxlY3RBbGwoXCIuZG9tYWluXCIpLmRhdGEoW251bGxdKSxcbiAgICAgICAgdGljayA9IHNlbGVjdGlvbi5zZWxlY3RBbGwoXCIudGlja1wiKS5kYXRhKHZhbHVlcywgc2NhbGUpLm9yZGVyKCksXG4gICAgICAgIHRpY2tFeGl0ID0gdGljay5leGl0KCksXG4gICAgICAgIHRpY2tFbnRlciA9IHRpY2suZW50ZXIoKS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInRpY2tcIiksXG4gICAgICAgIGxpbmUgPSB0aWNrLnNlbGVjdChcImxpbmVcIiksXG4gICAgICAgIHRleHQgPSB0aWNrLnNlbGVjdChcInRleHRcIik7XG5cbiAgICBwYXRoID0gcGF0aC5tZXJnZShwYXRoLmVudGVyKCkuaW5zZXJ0KFwicGF0aFwiLCBcIi50aWNrXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJkb21haW5cIilcbiAgICAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCJjdXJyZW50Q29sb3JcIikpO1xuXG4gICAgdGljayA9IHRpY2subWVyZ2UodGlja0VudGVyKTtcblxuICAgIGxpbmUgPSBsaW5lLm1lcmdlKHRpY2tFbnRlci5hcHBlbmQoXCJsaW5lXCIpXG4gICAgICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwiY3VycmVudENvbG9yXCIpXG4gICAgICAgIC5hdHRyKHggKyBcIjJcIiwgayAqIHRpY2tTaXplSW5uZXIpKTtcblxuICAgIHRleHQgPSB0ZXh0Lm1lcmdlKHRpY2tFbnRlci5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgIC5hdHRyKFwiZmlsbFwiLCBcImN1cnJlbnRDb2xvclwiKVxuICAgICAgICAuYXR0cih4LCBrICogc3BhY2luZylcbiAgICAgICAgLmF0dHIoXCJkeVwiLCBvcmllbnQgPT09IHRvcCA/IFwiMGVtXCIgOiBvcmllbnQgPT09IGJvdHRvbSA/IFwiMC43MWVtXCIgOiBcIjAuMzJlbVwiKSk7XG5cbiAgICBpZiAoY29udGV4dCAhPT0gc2VsZWN0aW9uKSB7XG4gICAgICBwYXRoID0gcGF0aC50cmFuc2l0aW9uKGNvbnRleHQpO1xuICAgICAgdGljayA9IHRpY2sudHJhbnNpdGlvbihjb250ZXh0KTtcbiAgICAgIGxpbmUgPSBsaW5lLnRyYW5zaXRpb24oY29udGV4dCk7XG4gICAgICB0ZXh0ID0gdGV4dC50cmFuc2l0aW9uKGNvbnRleHQpO1xuXG4gICAgICB0aWNrRXhpdCA9IHRpY2tFeGl0LnRyYW5zaXRpb24oY29udGV4dClcbiAgICAgICAgICAuYXR0cihcIm9wYWNpdHlcIiwgZXBzaWxvbilcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBpc0Zpbml0ZShkID0gcG9zaXRpb24oZCkpID8gdHJhbnNmb3JtKGQgKyBvZmZzZXQpIDogdGhpcy5nZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIik7IH0pO1xuXG4gICAgICB0aWNrRW50ZXJcbiAgICAgICAgICAuYXR0cihcIm9wYWNpdHlcIiwgZXBzaWxvbilcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHZhciBwID0gdGhpcy5wYXJlbnROb2RlLl9fYXhpczsgcmV0dXJuIHRyYW5zZm9ybSgocCAmJiBpc0Zpbml0ZShwID0gcChkKSkgPyBwIDogcG9zaXRpb24oZCkpICsgb2Zmc2V0KTsgfSk7XG4gICAgfVxuXG4gICAgdGlja0V4aXQucmVtb3ZlKCk7XG5cbiAgICBwYXRoXG4gICAgICAgIC5hdHRyKFwiZFwiLCBvcmllbnQgPT09IGxlZnQgfHwgb3JpZW50ID09PSByaWdodFxuICAgICAgICAgICAgPyAodGlja1NpemVPdXRlciA/IFwiTVwiICsgayAqIHRpY2tTaXplT3V0ZXIgKyBcIixcIiArIHJhbmdlMCArIFwiSFwiICsgb2Zmc2V0ICsgXCJWXCIgKyByYW5nZTEgKyBcIkhcIiArIGsgKiB0aWNrU2l6ZU91dGVyIDogXCJNXCIgKyBvZmZzZXQgKyBcIixcIiArIHJhbmdlMCArIFwiVlwiICsgcmFuZ2UxKVxuICAgICAgICAgICAgOiAodGlja1NpemVPdXRlciA/IFwiTVwiICsgcmFuZ2UwICsgXCIsXCIgKyBrICogdGlja1NpemVPdXRlciArIFwiVlwiICsgb2Zmc2V0ICsgXCJIXCIgKyByYW5nZTEgKyBcIlZcIiArIGsgKiB0aWNrU2l6ZU91dGVyIDogXCJNXCIgKyByYW5nZTAgKyBcIixcIiArIG9mZnNldCArIFwiSFwiICsgcmFuZ2UxKSk7XG5cbiAgICB0aWNrXG4gICAgICAgIC5hdHRyKFwib3BhY2l0eVwiLCAxKVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiB0cmFuc2Zvcm0ocG9zaXRpb24oZCkgKyBvZmZzZXQpOyB9KTtcblxuICAgIGxpbmVcbiAgICAgICAgLmF0dHIoeCArIFwiMlwiLCBrICogdGlja1NpemVJbm5lcik7XG5cbiAgICB0ZXh0XG4gICAgICAgIC5hdHRyKHgsIGsgKiBzcGFjaW5nKVxuICAgICAgICAudGV4dChmb3JtYXQpO1xuXG4gICAgc2VsZWN0aW9uLmZpbHRlcihlbnRlcmluZylcbiAgICAgICAgLmF0dHIoXCJmaWxsXCIsIFwibm9uZVwiKVxuICAgICAgICAuYXR0cihcImZvbnQtc2l6ZVwiLCAxMClcbiAgICAgICAgLmF0dHIoXCJmb250LWZhbWlseVwiLCBcInNhbnMtc2VyaWZcIilcbiAgICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBvcmllbnQgPT09IHJpZ2h0ID8gXCJzdGFydFwiIDogb3JpZW50ID09PSBsZWZ0ID8gXCJlbmRcIiA6IFwibWlkZGxlXCIpO1xuXG4gICAgc2VsZWN0aW9uXG4gICAgICAgIC5lYWNoKGZ1bmN0aW9uKCkgeyB0aGlzLl9fYXhpcyA9IHBvc2l0aW9uOyB9KTtcbiAgfVxuXG4gIGF4aXMuc2NhbGUgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoc2NhbGUgPSBfLCBheGlzKSA6IHNjYWxlO1xuICB9O1xuXG4gIGF4aXMudGlja3MgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGlja0FyZ3VtZW50cyA9IEFycmF5LmZyb20oYXJndW1lbnRzKSwgYXhpcztcbiAgfTtcblxuICBheGlzLnRpY2tBcmd1bWVudHMgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAodGlja0FyZ3VtZW50cyA9IF8gPT0gbnVsbCA/IFtdIDogQXJyYXkuZnJvbShfKSwgYXhpcykgOiB0aWNrQXJndW1lbnRzLnNsaWNlKCk7XG4gIH07XG5cbiAgYXhpcy50aWNrVmFsdWVzID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHRpY2tWYWx1ZXMgPSBfID09IG51bGwgPyBudWxsIDogQXJyYXkuZnJvbShfKSwgYXhpcykgOiB0aWNrVmFsdWVzICYmIHRpY2tWYWx1ZXMuc2xpY2UoKTtcbiAgfTtcblxuICBheGlzLnRpY2tGb3JtYXQgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAodGlja0Zvcm1hdCA9IF8sIGF4aXMpIDogdGlja0Zvcm1hdDtcbiAgfTtcblxuICBheGlzLnRpY2tTaXplID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHRpY2tTaXplSW5uZXIgPSB0aWNrU2l6ZU91dGVyID0gK18sIGF4aXMpIDogdGlja1NpemVJbm5lcjtcbiAgfTtcblxuICBheGlzLnRpY2tTaXplSW5uZXIgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAodGlja1NpemVJbm5lciA9ICtfLCBheGlzKSA6IHRpY2tTaXplSW5uZXI7XG4gIH07XG5cbiAgYXhpcy50aWNrU2l6ZU91dGVyID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHRpY2tTaXplT3V0ZXIgPSArXywgYXhpcykgOiB0aWNrU2l6ZU91dGVyO1xuICB9O1xuXG4gIGF4aXMudGlja1BhZGRpbmcgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAodGlja1BhZGRpbmcgPSArXywgYXhpcykgOiB0aWNrUGFkZGluZztcbiAgfTtcblxuICBheGlzLm9mZnNldCA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChvZmZzZXQgPSArXywgYXhpcykgOiBvZmZzZXQ7XG4gIH07XG5cbiAgcmV0dXJuIGF4aXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBheGlzVG9wKHNjYWxlKSB7XG4gIHJldHVybiBheGlzKHRvcCwgc2NhbGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXhpc1JpZ2h0KHNjYWxlKSB7XG4gIHJldHVybiBheGlzKHJpZ2h0LCBzY2FsZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBheGlzQm90dG9tKHNjYWxlKSB7XG4gIHJldHVybiBheGlzKGJvdHRvbSwgc2NhbGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXhpc0xlZnQoc2NhbGUpIHtcbiAgcmV0dXJuIGF4aXMobGVmdCwgc2NhbGUpO1xufVxuIiwgInZhciBub29wID0ge3ZhbHVlOiAoKSA9PiB7fX07XG5cbmZ1bmN0aW9uIGRpc3BhdGNoKCkge1xuICBmb3IgKHZhciBpID0gMCwgbiA9IGFyZ3VtZW50cy5sZW5ndGgsIF8gPSB7fSwgdDsgaSA8IG47ICsraSkge1xuICAgIGlmICghKHQgPSBhcmd1bWVudHNbaV0gKyBcIlwiKSB8fCAodCBpbiBfKSB8fCAvW1xccy5dLy50ZXN0KHQpKSB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIHR5cGU6IFwiICsgdCk7XG4gICAgX1t0XSA9IFtdO1xuICB9XG4gIHJldHVybiBuZXcgRGlzcGF0Y2goXyk7XG59XG5cbmZ1bmN0aW9uIERpc3BhdGNoKF8pIHtcbiAgdGhpcy5fID0gXztcbn1cblxuZnVuY3Rpb24gcGFyc2VUeXBlbmFtZXModHlwZW5hbWVzLCB0eXBlcykge1xuICByZXR1cm4gdHlwZW5hbWVzLnRyaW0oKS5zcGxpdCgvXnxcXHMrLykubWFwKGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgbmFtZSA9IFwiXCIsIGkgPSB0LmluZGV4T2YoXCIuXCIpO1xuICAgIGlmIChpID49IDApIG5hbWUgPSB0LnNsaWNlKGkgKyAxKSwgdCA9IHQuc2xpY2UoMCwgaSk7XG4gICAgaWYgKHQgJiYgIXR5cGVzLmhhc093blByb3BlcnR5KHQpKSB0aHJvdyBuZXcgRXJyb3IoXCJ1bmtub3duIHR5cGU6IFwiICsgdCk7XG4gICAgcmV0dXJuIHt0eXBlOiB0LCBuYW1lOiBuYW1lfTtcbiAgfSk7XG59XG5cbkRpc3BhdGNoLnByb3RvdHlwZSA9IGRpc3BhdGNoLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IERpc3BhdGNoLFxuICBvbjogZnVuY3Rpb24odHlwZW5hbWUsIGNhbGxiYWNrKSB7XG4gICAgdmFyIF8gPSB0aGlzLl8sXG4gICAgICAgIFQgPSBwYXJzZVR5cGVuYW1lcyh0eXBlbmFtZSArIFwiXCIsIF8pLFxuICAgICAgICB0LFxuICAgICAgICBpID0gLTEsXG4gICAgICAgIG4gPSBULmxlbmd0aDtcblxuICAgIC8vIElmIG5vIGNhbGxiYWNrIHdhcyBzcGVjaWZpZWQsIHJldHVybiB0aGUgY2FsbGJhY2sgb2YgdGhlIGdpdmVuIHR5cGUgYW5kIG5hbWUuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgICB3aGlsZSAoKytpIDwgbikgaWYgKCh0ID0gKHR5cGVuYW1lID0gVFtpXSkudHlwZSkgJiYgKHQgPSBnZXQoX1t0XSwgdHlwZW5hbWUubmFtZSkpKSByZXR1cm4gdDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiBhIHR5cGUgd2FzIHNwZWNpZmllZCwgc2V0IHRoZSBjYWxsYmFjayBmb3IgdGhlIGdpdmVuIHR5cGUgYW5kIG5hbWUuXG4gICAgLy8gT3RoZXJ3aXNlLCBpZiBhIG51bGwgY2FsbGJhY2sgd2FzIHNwZWNpZmllZCwgcmVtb3ZlIGNhbGxiYWNrcyBvZiB0aGUgZ2l2ZW4gbmFtZS5cbiAgICBpZiAoY2FsbGJhY2sgIT0gbnVsbCAmJiB0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBjYWxsYmFjazogXCIgKyBjYWxsYmFjayk7XG4gICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgIGlmICh0ID0gKHR5cGVuYW1lID0gVFtpXSkudHlwZSkgX1t0XSA9IHNldChfW3RdLCB0eXBlbmFtZS5uYW1lLCBjYWxsYmFjayk7XG4gICAgICBlbHNlIGlmIChjYWxsYmFjayA9PSBudWxsKSBmb3IgKHQgaW4gXykgX1t0XSA9IHNldChfW3RdLCB0eXBlbmFtZS5uYW1lLCBudWxsKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcbiAgY29weTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvcHkgPSB7fSwgXyA9IHRoaXMuXztcbiAgICBmb3IgKHZhciB0IGluIF8pIGNvcHlbdF0gPSBfW3RdLnNsaWNlKCk7XG4gICAgcmV0dXJuIG5ldyBEaXNwYXRjaChjb3B5KTtcbiAgfSxcbiAgY2FsbDogZnVuY3Rpb24odHlwZSwgdGhhdCkge1xuICAgIGlmICgobiA9IGFyZ3VtZW50cy5sZW5ndGggLSAyKSA+IDApIGZvciAodmFyIGFyZ3MgPSBuZXcgQXJyYXkobiksIGkgPSAwLCBuLCB0OyBpIDwgbjsgKytpKSBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAyXTtcbiAgICBpZiAoIXRoaXMuXy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkgdGhyb3cgbmV3IEVycm9yKFwidW5rbm93biB0eXBlOiBcIiArIHR5cGUpO1xuICAgIGZvciAodCA9IHRoaXMuX1t0eXBlXSwgaSA9IDAsIG4gPSB0Lmxlbmd0aDsgaSA8IG47ICsraSkgdFtpXS52YWx1ZS5hcHBseSh0aGF0LCBhcmdzKTtcbiAgfSxcbiAgYXBwbHk6IGZ1bmN0aW9uKHR5cGUsIHRoYXQsIGFyZ3MpIHtcbiAgICBpZiAoIXRoaXMuXy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkgdGhyb3cgbmV3IEVycm9yKFwidW5rbm93biB0eXBlOiBcIiArIHR5cGUpO1xuICAgIGZvciAodmFyIHQgPSB0aGlzLl9bdHlwZV0sIGkgPSAwLCBuID0gdC5sZW5ndGg7IGkgPCBuOyArK2kpIHRbaV0udmFsdWUuYXBwbHkodGhhdCwgYXJncyk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGdldCh0eXBlLCBuYW1lKSB7XG4gIGZvciAodmFyIGkgPSAwLCBuID0gdHlwZS5sZW5ndGgsIGM7IGkgPCBuOyArK2kpIHtcbiAgICBpZiAoKGMgPSB0eXBlW2ldKS5uYW1lID09PSBuYW1lKSB7XG4gICAgICByZXR1cm4gYy52YWx1ZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0KHR5cGUsIG5hbWUsIGNhbGxiYWNrKSB7XG4gIGZvciAodmFyIGkgPSAwLCBuID0gdHlwZS5sZW5ndGg7IGkgPCBuOyArK2kpIHtcbiAgICBpZiAodHlwZVtpXS5uYW1lID09PSBuYW1lKSB7XG4gICAgICB0eXBlW2ldID0gbm9vcCwgdHlwZSA9IHR5cGUuc2xpY2UoMCwgaSkuY29uY2F0KHR5cGUuc2xpY2UoaSArIDEpKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBpZiAoY2FsbGJhY2sgIT0gbnVsbCkgdHlwZS5wdXNoKHtuYW1lOiBuYW1lLCB2YWx1ZTogY2FsbGJhY2t9KTtcbiAgcmV0dXJuIHR5cGU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGRpc3BhdGNoO1xuIiwgImV4cG9ydCB2YXIgeGh0bWwgPSBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIjtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBzdmc6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcbiAgeGh0bWw6IHhodG1sLFxuICB4bGluazogXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIsXG4gIHhtbDogXCJodHRwOi8vd3d3LnczLm9yZy9YTUwvMTk5OC9uYW1lc3BhY2VcIixcbiAgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC94bWxucy9cIlxufTtcbiIsICJpbXBvcnQgbmFtZXNwYWNlcyBmcm9tIFwiLi9uYW1lc3BhY2VzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUpIHtcbiAgdmFyIHByZWZpeCA9IG5hbWUgKz0gXCJcIiwgaSA9IHByZWZpeC5pbmRleE9mKFwiOlwiKTtcbiAgaWYgKGkgPj0gMCAmJiAocHJlZml4ID0gbmFtZS5zbGljZSgwLCBpKSkgIT09IFwieG1sbnNcIikgbmFtZSA9IG5hbWUuc2xpY2UoaSArIDEpO1xuICByZXR1cm4gbmFtZXNwYWNlcy5oYXNPd25Qcm9wZXJ0eShwcmVmaXgpID8ge3NwYWNlOiBuYW1lc3BhY2VzW3ByZWZpeF0sIGxvY2FsOiBuYW1lfSA6IG5hbWU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG59XG4iLCAiaW1wb3J0IG5hbWVzcGFjZSBmcm9tIFwiLi9uYW1lc3BhY2UuanNcIjtcbmltcG9ydCB7eGh0bWx9IGZyb20gXCIuL25hbWVzcGFjZXMuanNcIjtcblxuZnVuY3Rpb24gY3JlYXRvckluaGVyaXQobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRvY3VtZW50ID0gdGhpcy5vd25lckRvY3VtZW50LFxuICAgICAgICB1cmkgPSB0aGlzLm5hbWVzcGFjZVVSSTtcbiAgICByZXR1cm4gdXJpID09PSB4aHRtbCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubmFtZXNwYWNlVVJJID09PSB4aHRtbFxuICAgICAgICA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSlcbiAgICAgICAgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlModXJpLCBuYW1lKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRvckZpeGVkKGZ1bGxuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lKSB7XG4gIHZhciBmdWxsbmFtZSA9IG5hbWVzcGFjZShuYW1lKTtcbiAgcmV0dXJuIChmdWxsbmFtZS5sb2NhbFxuICAgICAgPyBjcmVhdG9yRml4ZWRcbiAgICAgIDogY3JlYXRvckluaGVyaXQpKGZ1bGxuYW1lKTtcbn1cbiIsICJmdW5jdGlvbiBub25lKCkge31cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgcmV0dXJuIHNlbGVjdG9yID09IG51bGwgPyBub25lIDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIH07XG59XG4iLCAiaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgc2VsZWN0b3IgZnJvbSBcIi4uL3NlbGVjdG9yLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdCkge1xuICBpZiAodHlwZW9mIHNlbGVjdCAhPT0gXCJmdW5jdGlvblwiKSBzZWxlY3QgPSBzZWxlY3RvcihzZWxlY3QpO1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHN1Ymdyb3VwcyA9IG5ldyBBcnJheShtKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc3ViZ3JvdXAgPSBzdWJncm91cHNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIHN1Ym5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgKHN1Ym5vZGUgPSBzZWxlY3QuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCkpKSB7XG4gICAgICAgIGlmIChcIl9fZGF0YV9fXCIgaW4gbm9kZSkgc3Vibm9kZS5fX2RhdGFfXyA9IG5vZGUuX19kYXRhX187XG4gICAgICAgIHN1Ymdyb3VwW2ldID0gc3Vibm9kZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFNlbGVjdGlvbihzdWJncm91cHMsIHRoaXMuX3BhcmVudHMpO1xufVxuIiwgIi8vIEdpdmVuIHNvbWV0aGluZyBhcnJheSBsaWtlIChvciBudWxsKSwgcmV0dXJucyBzb21ldGhpbmcgdGhhdCBpcyBzdHJpY3RseSBhblxuLy8gYXJyYXkuIFRoaXMgaXMgdXNlZCB0byBlbnN1cmUgdGhhdCBhcnJheS1saWtlIG9iamVjdHMgcGFzc2VkIHRvIGQzLnNlbGVjdEFsbFxuLy8gb3Igc2VsZWN0aW9uLnNlbGVjdEFsbCBhcmUgY29udmVydGVkIGludG8gcHJvcGVyIGFycmF5cyB3aGVuIGNyZWF0aW5nIGFcbi8vIHNlbGVjdGlvbjsgd2UgZG9uXHUyMDE5dCBldmVyIHdhbnQgdG8gY3JlYXRlIGEgc2VsZWN0aW9uIGJhY2tlZCBieSBhIGxpdmVcbi8vIEhUTUxDb2xsZWN0aW9uIG9yIE5vZGVMaXN0LiBIb3dldmVyLCBub3RlIHRoYXQgc2VsZWN0aW9uLnNlbGVjdEFsbCB3aWxsIHVzZSBhXG4vLyBzdGF0aWMgTm9kZUxpc3QgYXMgYSBncm91cCwgc2luY2UgaXQgc2FmZWx5IGRlcml2ZWQgZnJvbSBxdWVyeVNlbGVjdG9yQWxsLlxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYXJyYXkoeCkge1xuICByZXR1cm4geCA9PSBudWxsID8gW10gOiBBcnJheS5pc0FycmF5KHgpID8geCA6IEFycmF5LmZyb20oeCk7XG59XG4iLCAiZnVuY3Rpb24gZW1wdHkoKSB7XG4gIHJldHVybiBbXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgcmV0dXJuIHNlbGVjdG9yID09IG51bGwgPyBlbXB0eSA6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICB9O1xufVxuIiwgImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuaW1wb3J0IGFycmF5IGZyb20gXCIuLi9hcnJheS5qc1wiO1xuaW1wb3J0IHNlbGVjdG9yQWxsIGZyb20gXCIuLi9zZWxlY3RvckFsbC5qc1wiO1xuXG5mdW5jdGlvbiBhcnJheUFsbChzZWxlY3QpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBhcnJheShzZWxlY3QuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdCkge1xuICBpZiAodHlwZW9mIHNlbGVjdCA9PT0gXCJmdW5jdGlvblwiKSBzZWxlY3QgPSBhcnJheUFsbChzZWxlY3QpO1xuICBlbHNlIHNlbGVjdCA9IHNlbGVjdG9yQWxsKHNlbGVjdCk7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gW10sIHBhcmVudHMgPSBbXSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgc3ViZ3JvdXBzLnB1c2goc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKTtcbiAgICAgICAgcGFyZW50cy5wdXNoKG5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHN1Ymdyb3VwcywgcGFyZW50cyk7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1hdGNoZXMoc2VsZWN0b3IpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hpbGRNYXRjaGVyKHNlbGVjdG9yKSB7XG4gIHJldHVybiBmdW5jdGlvbihub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUubWF0Y2hlcyhzZWxlY3Rvcik7XG4gIH07XG59XG5cbiIsICJpbXBvcnQge2NoaWxkTWF0Y2hlcn0gZnJvbSBcIi4uL21hdGNoZXIuanNcIjtcblxudmFyIGZpbmQgPSBBcnJheS5wcm90b3R5cGUuZmluZDtcblxuZnVuY3Rpb24gY2hpbGRGaW5kKG1hdGNoKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZmluZC5jYWxsKHRoaXMuY2hpbGRyZW4sIG1hdGNoKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2hpbGRGaXJzdCgpIHtcbiAgcmV0dXJuIHRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG1hdGNoKSB7XG4gIHJldHVybiB0aGlzLnNlbGVjdChtYXRjaCA9PSBudWxsID8gY2hpbGRGaXJzdFxuICAgICAgOiBjaGlsZEZpbmQodHlwZW9mIG1hdGNoID09PSBcImZ1bmN0aW9uXCIgPyBtYXRjaCA6IGNoaWxkTWF0Y2hlcihtYXRjaCkpKTtcbn1cbiIsICJpbXBvcnQge2NoaWxkTWF0Y2hlcn0gZnJvbSBcIi4uL21hdGNoZXIuanNcIjtcblxudmFyIGZpbHRlciA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXI7XG5cbmZ1bmN0aW9uIGNoaWxkcmVuKCkge1xuICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmNoaWxkcmVuKTtcbn1cblxuZnVuY3Rpb24gY2hpbGRyZW5GaWx0ZXIobWF0Y2gpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmaWx0ZXIuY2FsbCh0aGlzLmNoaWxkcmVuLCBtYXRjaCk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG1hdGNoKSB7XG4gIHJldHVybiB0aGlzLnNlbGVjdEFsbChtYXRjaCA9PSBudWxsID8gY2hpbGRyZW5cbiAgICAgIDogY2hpbGRyZW5GaWx0ZXIodHlwZW9mIG1hdGNoID09PSBcImZ1bmN0aW9uXCIgPyBtYXRjaCA6IGNoaWxkTWF0Y2hlcihtYXRjaCkpKTtcbn1cbiIsICJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCBtYXRjaGVyIGZyb20gXCIuLi9tYXRjaGVyLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG1hdGNoKSB7XG4gIGlmICh0eXBlb2YgbWF0Y2ggIT09IFwiZnVuY3Rpb25cIikgbWF0Y2ggPSBtYXRjaGVyKG1hdGNoKTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHN1Ymdyb3VwID0gc3ViZ3JvdXBzW2pdID0gW10sIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgbWF0Y2guY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCkpIHtcbiAgICAgICAgc3ViZ3JvdXAucHVzaChub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFNlbGVjdGlvbihzdWJncm91cHMsIHRoaXMuX3BhcmVudHMpO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHVwZGF0ZSkge1xuICByZXR1cm4gbmV3IEFycmF5KHVwZGF0ZS5sZW5ndGgpO1xufVxuIiwgImltcG9ydCBzcGFyc2UgZnJvbSBcIi4vc3BhcnNlLmpzXCI7XG5pbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKHRoaXMuX2VudGVyIHx8IHRoaXMuX2dyb3Vwcy5tYXAoc3BhcnNlKSwgdGhpcy5fcGFyZW50cyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBFbnRlck5vZGUocGFyZW50LCBkYXR1bSkge1xuICB0aGlzLm93bmVyRG9jdW1lbnQgPSBwYXJlbnQub3duZXJEb2N1bWVudDtcbiAgdGhpcy5uYW1lc3BhY2VVUkkgPSBwYXJlbnQubmFtZXNwYWNlVVJJO1xuICB0aGlzLl9uZXh0ID0gbnVsbDtcbiAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xuICB0aGlzLl9fZGF0YV9fID0gZGF0dW07XG59XG5cbkVudGVyTm9kZS5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBFbnRlck5vZGUsXG4gIGFwcGVuZENoaWxkOiBmdW5jdGlvbihjaGlsZCkgeyByZXR1cm4gdGhpcy5fcGFyZW50Lmluc2VydEJlZm9yZShjaGlsZCwgdGhpcy5fbmV4dCk7IH0sXG4gIGluc2VydEJlZm9yZTogZnVuY3Rpb24oY2hpbGQsIG5leHQpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIG5leHQpOyB9LFxuICBxdWVyeVNlbGVjdG9yOiBmdW5jdGlvbihzZWxlY3RvcikgeyByZXR1cm4gdGhpcy5fcGFyZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpOyB9LFxuICBxdWVyeVNlbGVjdG9yQWxsOiBmdW5jdGlvbihzZWxlY3RvcikgeyByZXR1cm4gdGhpcy5fcGFyZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpOyB9XG59O1xuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB4O1xuICB9O1xufVxuIiwgImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuaW1wb3J0IHtFbnRlck5vZGV9IGZyb20gXCIuL2VudGVyLmpzXCI7XG5pbXBvcnQgY29uc3RhbnQgZnJvbSBcIi4uL2NvbnN0YW50LmpzXCI7XG5cbmZ1bmN0aW9uIGJpbmRJbmRleChwYXJlbnQsIGdyb3VwLCBlbnRlciwgdXBkYXRlLCBleGl0LCBkYXRhKSB7XG4gIHZhciBpID0gMCxcbiAgICAgIG5vZGUsXG4gICAgICBncm91cExlbmd0aCA9IGdyb3VwLmxlbmd0aCxcbiAgICAgIGRhdGFMZW5ndGggPSBkYXRhLmxlbmd0aDtcblxuICAvLyBQdXQgYW55IG5vbi1udWxsIG5vZGVzIHRoYXQgZml0IGludG8gdXBkYXRlLlxuICAvLyBQdXQgYW55IG51bGwgbm9kZXMgaW50byBlbnRlci5cbiAgLy8gUHV0IGFueSByZW1haW5pbmcgZGF0YSBpbnRvIGVudGVyLlxuICBmb3IgKDsgaSA8IGRhdGFMZW5ndGg7ICsraSkge1xuICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgIG5vZGUuX19kYXRhX18gPSBkYXRhW2ldO1xuICAgICAgdXBkYXRlW2ldID0gbm9kZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW50ZXJbaV0gPSBuZXcgRW50ZXJOb2RlKHBhcmVudCwgZGF0YVtpXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gUHV0IGFueSBub24tbnVsbCBub2RlcyB0aGF0IGRvblx1MjAxOXQgZml0IGludG8gZXhpdC5cbiAgZm9yICg7IGkgPCBncm91cExlbmd0aDsgKytpKSB7XG4gICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgZXhpdFtpXSA9IG5vZGU7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGJpbmRLZXkocGFyZW50LCBncm91cCwgZW50ZXIsIHVwZGF0ZSwgZXhpdCwgZGF0YSwga2V5KSB7XG4gIHZhciBpLFxuICAgICAgbm9kZSxcbiAgICAgIG5vZGVCeUtleVZhbHVlID0gbmV3IE1hcCxcbiAgICAgIGdyb3VwTGVuZ3RoID0gZ3JvdXAubGVuZ3RoLFxuICAgICAgZGF0YUxlbmd0aCA9IGRhdGEubGVuZ3RoLFxuICAgICAga2V5VmFsdWVzID0gbmV3IEFycmF5KGdyb3VwTGVuZ3RoKSxcbiAgICAgIGtleVZhbHVlO1xuXG4gIC8vIENvbXB1dGUgdGhlIGtleSBmb3IgZWFjaCBub2RlLlxuICAvLyBJZiBtdWx0aXBsZSBub2RlcyBoYXZlIHRoZSBzYW1lIGtleSwgdGhlIGR1cGxpY2F0ZXMgYXJlIGFkZGVkIHRvIGV4aXQuXG4gIGZvciAoaSA9IDA7IGkgPCBncm91cExlbmd0aDsgKytpKSB7XG4gICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAga2V5VmFsdWVzW2ldID0ga2V5VmFsdWUgPSBrZXkuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCkgKyBcIlwiO1xuICAgICAgaWYgKG5vZGVCeUtleVZhbHVlLmhhcyhrZXlWYWx1ZSkpIHtcbiAgICAgICAgZXhpdFtpXSA9IG5vZGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlQnlLZXlWYWx1ZS5zZXQoa2V5VmFsdWUsIG5vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIENvbXB1dGUgdGhlIGtleSBmb3IgZWFjaCBkYXR1bS5cbiAgLy8gSWYgdGhlcmUgYSBub2RlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGtleSwgam9pbiBhbmQgYWRkIGl0IHRvIHVwZGF0ZS5cbiAgLy8gSWYgdGhlcmUgaXMgbm90IChvciB0aGUga2V5IGlzIGEgZHVwbGljYXRlKSwgYWRkIGl0IHRvIGVudGVyLlxuICBmb3IgKGkgPSAwOyBpIDwgZGF0YUxlbmd0aDsgKytpKSB7XG4gICAga2V5VmFsdWUgPSBrZXkuY2FsbChwYXJlbnQsIGRhdGFbaV0sIGksIGRhdGEpICsgXCJcIjtcbiAgICBpZiAobm9kZSA9IG5vZGVCeUtleVZhbHVlLmdldChrZXlWYWx1ZSkpIHtcbiAgICAgIHVwZGF0ZVtpXSA9IG5vZGU7XG4gICAgICBub2RlLl9fZGF0YV9fID0gZGF0YVtpXTtcbiAgICAgIG5vZGVCeUtleVZhbHVlLmRlbGV0ZShrZXlWYWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVudGVyW2ldID0gbmV3IEVudGVyTm9kZShwYXJlbnQsIGRhdGFbaV0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIEFkZCBhbnkgcmVtYWluaW5nIG5vZGVzIHRoYXQgd2VyZSBub3QgYm91bmQgdG8gZGF0YSB0byBleGl0LlxuICBmb3IgKGkgPSAwOyBpIDwgZ3JvdXBMZW5ndGg7ICsraSkge1xuICAgIGlmICgobm9kZSA9IGdyb3VwW2ldKSAmJiAobm9kZUJ5S2V5VmFsdWUuZ2V0KGtleVZhbHVlc1tpXSkgPT09IG5vZGUpKSB7XG4gICAgICBleGl0W2ldID0gbm9kZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZGF0dW0obm9kZSkge1xuICByZXR1cm4gbm9kZS5fX2RhdGFfXztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBBcnJheS5mcm9tKHRoaXMsIGRhdHVtKTtcblxuICB2YXIgYmluZCA9IGtleSA/IGJpbmRLZXkgOiBiaW5kSW5kZXgsXG4gICAgICBwYXJlbnRzID0gdGhpcy5fcGFyZW50cyxcbiAgICAgIGdyb3VwcyA9IHRoaXMuX2dyb3VwcztcblxuICBpZiAodHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHZhbHVlID0gY29uc3RhbnQodmFsdWUpO1xuXG4gIGZvciAodmFyIG0gPSBncm91cHMubGVuZ3RoLCB1cGRhdGUgPSBuZXcgQXJyYXkobSksIGVudGVyID0gbmV3IEFycmF5KG0pLCBleGl0ID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIHZhciBwYXJlbnQgPSBwYXJlbnRzW2pdLFxuICAgICAgICBncm91cCA9IGdyb3Vwc1tqXSxcbiAgICAgICAgZ3JvdXBMZW5ndGggPSBncm91cC5sZW5ndGgsXG4gICAgICAgIGRhdGEgPSBhcnJheWxpa2UodmFsdWUuY2FsbChwYXJlbnQsIHBhcmVudCAmJiBwYXJlbnQuX19kYXRhX18sIGosIHBhcmVudHMpKSxcbiAgICAgICAgZGF0YUxlbmd0aCA9IGRhdGEubGVuZ3RoLFxuICAgICAgICBlbnRlckdyb3VwID0gZW50ZXJbal0gPSBuZXcgQXJyYXkoZGF0YUxlbmd0aCksXG4gICAgICAgIHVwZGF0ZUdyb3VwID0gdXBkYXRlW2pdID0gbmV3IEFycmF5KGRhdGFMZW5ndGgpLFxuICAgICAgICBleGl0R3JvdXAgPSBleGl0W2pdID0gbmV3IEFycmF5KGdyb3VwTGVuZ3RoKTtcblxuICAgIGJpbmQocGFyZW50LCBncm91cCwgZW50ZXJHcm91cCwgdXBkYXRlR3JvdXAsIGV4aXRHcm91cCwgZGF0YSwga2V5KTtcblxuICAgIC8vIE5vdyBjb25uZWN0IHRoZSBlbnRlciBub2RlcyB0byB0aGVpciBmb2xsb3dpbmcgdXBkYXRlIG5vZGUsIHN1Y2ggdGhhdFxuICAgIC8vIGFwcGVuZENoaWxkIGNhbiBpbnNlcnQgdGhlIG1hdGVyaWFsaXplZCBlbnRlciBub2RlIGJlZm9yZSB0aGlzIG5vZGUsXG4gICAgLy8gcmF0aGVyIHRoYW4gYXQgdGhlIGVuZCBvZiB0aGUgcGFyZW50IG5vZGUuXG4gICAgZm9yICh2YXIgaTAgPSAwLCBpMSA9IDAsIHByZXZpb3VzLCBuZXh0OyBpMCA8IGRhdGFMZW5ndGg7ICsraTApIHtcbiAgICAgIGlmIChwcmV2aW91cyA9IGVudGVyR3JvdXBbaTBdKSB7XG4gICAgICAgIGlmIChpMCA+PSBpMSkgaTEgPSBpMCArIDE7XG4gICAgICAgIHdoaWxlICghKG5leHQgPSB1cGRhdGVHcm91cFtpMV0pICYmICsraTEgPCBkYXRhTGVuZ3RoKTtcbiAgICAgICAgcHJldmlvdXMuX25leHQgPSBuZXh0IHx8IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlID0gbmV3IFNlbGVjdGlvbih1cGRhdGUsIHBhcmVudHMpO1xuICB1cGRhdGUuX2VudGVyID0gZW50ZXI7XG4gIHVwZGF0ZS5fZXhpdCA9IGV4aXQ7XG4gIHJldHVybiB1cGRhdGU7XG59XG5cbi8vIEdpdmVuIHNvbWUgZGF0YSwgdGhpcyByZXR1cm5zIGFuIGFycmF5LWxpa2UgdmlldyBvZiBpdDogYW4gb2JqZWN0IHRoYXRcbi8vIGV4cG9zZXMgYSBsZW5ndGggcHJvcGVydHkgYW5kIGFsbG93cyBudW1lcmljIGluZGV4aW5nLiBOb3RlIHRoYXQgdW5saWtlXG4vLyBzZWxlY3RBbGwsIHRoaXMgaXNuXHUyMDE5dCB3b3JyaWVkIGFib3V0IFx1MjAxQ2xpdmVcdTIwMUQgY29sbGVjdGlvbnMgYmVjYXVzZSB0aGUgcmVzdWx0aW5nXG4vLyBhcnJheSB3aWxsIG9ubHkgYmUgdXNlZCBicmllZmx5IHdoaWxlIGRhdGEgaXMgYmVpbmcgYm91bmQuIChJdCBpcyBwb3NzaWJsZSB0b1xuLy8gY2F1c2UgdGhlIGRhdGEgdG8gY2hhbmdlIHdoaWxlIGl0ZXJhdGluZyBieSB1c2luZyBhIGtleSBmdW5jdGlvbiwgYnV0IHBsZWFzZVxuLy8gZG9uXHUyMDE5dDsgd2VcdTIwMTlkIHJhdGhlciBhdm9pZCBhIGdyYXR1aXRvdXMgY29weS4pXG5mdW5jdGlvbiBhcnJheWxpa2UoZGF0YSkge1xuICByZXR1cm4gdHlwZW9mIGRhdGEgPT09IFwib2JqZWN0XCIgJiYgXCJsZW5ndGhcIiBpbiBkYXRhXG4gICAgPyBkYXRhIC8vIEFycmF5LCBUeXBlZEFycmF5LCBOb2RlTGlzdCwgYXJyYXktbGlrZVxuICAgIDogQXJyYXkuZnJvbShkYXRhKTsgLy8gTWFwLCBTZXQsIGl0ZXJhYmxlLCBzdHJpbmcsIG9yIGFueXRoaW5nIGVsc2Vcbn1cbiIsICJpbXBvcnQgc3BhcnNlIGZyb20gXCIuL3NwYXJzZS5qc1wiO1xuaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFNlbGVjdGlvbih0aGlzLl9leGl0IHx8IHRoaXMuX2dyb3Vwcy5tYXAoc3BhcnNlKSwgdGhpcy5fcGFyZW50cyk7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24ob25lbnRlciwgb251cGRhdGUsIG9uZXhpdCkge1xuICB2YXIgZW50ZXIgPSB0aGlzLmVudGVyKCksIHVwZGF0ZSA9IHRoaXMsIGV4aXQgPSB0aGlzLmV4aXQoKTtcbiAgaWYgKHR5cGVvZiBvbmVudGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBlbnRlciA9IG9uZW50ZXIoZW50ZXIpO1xuICAgIGlmIChlbnRlcikgZW50ZXIgPSBlbnRlci5zZWxlY3Rpb24oKTtcbiAgfSBlbHNlIHtcbiAgICBlbnRlciA9IGVudGVyLmFwcGVuZChvbmVudGVyICsgXCJcIik7XG4gIH1cbiAgaWYgKG9udXBkYXRlICE9IG51bGwpIHtcbiAgICB1cGRhdGUgPSBvbnVwZGF0ZSh1cGRhdGUpO1xuICAgIGlmICh1cGRhdGUpIHVwZGF0ZSA9IHVwZGF0ZS5zZWxlY3Rpb24oKTtcbiAgfVxuICBpZiAob25leGl0ID09IG51bGwpIGV4aXQucmVtb3ZlKCk7IGVsc2Ugb25leGl0KGV4aXQpO1xuICByZXR1cm4gZW50ZXIgJiYgdXBkYXRlID8gZW50ZXIubWVyZ2UodXBkYXRlKS5vcmRlcigpIDogdXBkYXRlO1xufVxuIiwgImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihjb250ZXh0KSB7XG4gIHZhciBzZWxlY3Rpb24gPSBjb250ZXh0LnNlbGVjdGlvbiA/IGNvbnRleHQuc2VsZWN0aW9uKCkgOiBjb250ZXh0O1xuXG4gIGZvciAodmFyIGdyb3VwczAgPSB0aGlzLl9ncm91cHMsIGdyb3VwczEgPSBzZWxlY3Rpb24uX2dyb3VwcywgbTAgPSBncm91cHMwLmxlbmd0aCwgbTEgPSBncm91cHMxLmxlbmd0aCwgbSA9IE1hdGgubWluKG0wLCBtMSksIG1lcmdlcyA9IG5ldyBBcnJheShtMCksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAwID0gZ3JvdXBzMFtqXSwgZ3JvdXAxID0gZ3JvdXBzMVtqXSwgbiA9IGdyb3VwMC5sZW5ndGgsIG1lcmdlID0gbWVyZ2VzW2pdID0gbmV3IEFycmF5KG4pLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cDBbaV0gfHwgZ3JvdXAxW2ldKSB7XG4gICAgICAgIG1lcmdlW2ldID0gbm9kZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmb3IgKDsgaiA8IG0wOyArK2opIHtcbiAgICBtZXJnZXNbal0gPSBncm91cHMwW2pdO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24obWVyZ2VzLCB0aGlzLl9wYXJlbnRzKTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIGogPSAtMSwgbSA9IGdyb3Vwcy5sZW5ndGg7ICsraiA8IG07KSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIGkgPSBncm91cC5sZW5ndGggLSAxLCBuZXh0ID0gZ3JvdXBbaV0sIG5vZGU7IC0taSA+PSAwOykge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBpZiAobmV4dCAmJiBub2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG5leHQpIF4gNCkgbmV4dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBuZXh0KTtcbiAgICAgICAgbmV4dCA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG4iLCAiaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNvbXBhcmUpIHtcbiAgaWYgKCFjb21wYXJlKSBjb21wYXJlID0gYXNjZW5kaW5nO1xuXG4gIGZ1bmN0aW9uIGNvbXBhcmVOb2RlKGEsIGIpIHtcbiAgICByZXR1cm4gYSAmJiBiID8gY29tcGFyZShhLl9fZGF0YV9fLCBiLl9fZGF0YV9fKSA6ICFhIC0gIWI7XG4gIH1cblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzb3J0Z3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBzb3J0Z3JvdXAgPSBzb3J0Z3JvdXBzW2pdID0gbmV3IEFycmF5KG4pLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBzb3J0Z3JvdXBbaV0gPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgICBzb3J0Z3JvdXAuc29ydChjb21wYXJlTm9kZSk7XG4gIH1cblxuICByZXR1cm4gbmV3IFNlbGVjdGlvbihzb3J0Z3JvdXBzLCB0aGlzLl9wYXJlbnRzKS5vcmRlcigpO1xufVxuXG5mdW5jdGlvbiBhc2NlbmRpbmcoYSwgYikge1xuICByZXR1cm4gYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IGEgPj0gYiA/IDAgOiBOYU47XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50c1swXTtcbiAgYXJndW1lbnRzWzBdID0gdGhpcztcbiAgY2FsbGJhY2suYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgcmV0dXJuIHRoaXM7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiBBcnJheS5mcm9tKHRoaXMpO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgaiA9IDAsIG0gPSBncm91cHMubGVuZ3RoOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoOyBpIDwgbjsgKytpKSB7XG4gICAgICB2YXIgbm9kZSA9IGdyb3VwW2ldO1xuICAgICAgaWYgKG5vZGUpIHJldHVybiBub2RlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICBsZXQgc2l6ZSA9IDA7XG4gIGZvciAoY29uc3Qgbm9kZSBvZiB0aGlzKSArK3NpemU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgcmV0dXJuIHNpemU7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiAhdGhpcy5ub2RlKCk7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oY2FsbGJhY2spIHtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIGogPSAwLCBtID0gZ3JvdXBzLmxlbmd0aDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gMCwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZTsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkgY2FsbGJhY2suY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59XG4iLCAiaW1wb3J0IG5hbWVzcGFjZSBmcm9tIFwiLi4vbmFtZXNwYWNlLmpzXCI7XG5cbmZ1bmN0aW9uIGF0dHJSZW1vdmUobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJSZW1vdmVOUyhmdWxsbmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyQ29uc3RhbnQobmFtZSwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckNvbnN0YW50TlMoZnVsbG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCwgdmFsdWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyRnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAodiA9PSBudWxsKSB0aGlzLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICBlbHNlIHRoaXMuc2V0QXR0cmlidXRlKG5hbWUsIHYpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyRnVuY3Rpb25OUyhmdWxsbmFtZSwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAodiA9PSBudWxsKSB0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7XG4gICAgZWxzZSB0aGlzLnNldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCwgdik7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHZhciBmdWxsbmFtZSA9IG5hbWVzcGFjZShuYW1lKTtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICB2YXIgbm9kZSA9IHRoaXMubm9kZSgpO1xuICAgIHJldHVybiBmdWxsbmFtZS5sb2NhbFxuICAgICAgICA/IG5vZGUuZ2V0QXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKVxuICAgICAgICA6IG5vZGUuZ2V0QXR0cmlidXRlKGZ1bGxuYW1lKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzLmVhY2goKHZhbHVlID09IG51bGxcbiAgICAgID8gKGZ1bGxuYW1lLmxvY2FsID8gYXR0clJlbW92ZU5TIDogYXR0clJlbW92ZSkgOiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gKGZ1bGxuYW1lLmxvY2FsID8gYXR0ckZ1bmN0aW9uTlMgOiBhdHRyRnVuY3Rpb24pXG4gICAgICA6IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJDb25zdGFudE5TIDogYXR0ckNvbnN0YW50KSkpKGZ1bGxuYW1lLCB2YWx1ZSkpO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5vZGUpIHtcbiAgcmV0dXJuIChub2RlLm93bmVyRG9jdW1lbnQgJiYgbm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KSAvLyBub2RlIGlzIGEgTm9kZVxuICAgICAgfHwgKG5vZGUuZG9jdW1lbnQgJiYgbm9kZSkgLy8gbm9kZSBpcyBhIFdpbmRvd1xuICAgICAgfHwgbm9kZS5kZWZhdWx0VmlldzsgLy8gbm9kZSBpcyBhIERvY3VtZW50XG59XG4iLCAiaW1wb3J0IGRlZmF1bHRWaWV3IGZyb20gXCIuLi93aW5kb3cuanNcIjtcblxuZnVuY3Rpb24gc3R5bGVSZW1vdmUobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVDb25zdGFudChuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUsIHByaW9yaXR5KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVGdW5jdGlvbihuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAodiA9PSBudWxsKSB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICAgIGVsc2UgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB2LCBwcmlvcml0eSk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDFcbiAgICAgID8gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsXG4gICAgICAgICAgICA/IHN0eWxlUmVtb3ZlIDogdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgID8gc3R5bGVGdW5jdGlvblxuICAgICAgICAgICAgOiBzdHlsZUNvbnN0YW50KShuYW1lLCB2YWx1ZSwgcHJpb3JpdHkgPT0gbnVsbCA/IFwiXCIgOiBwcmlvcml0eSkpXG4gICAgICA6IHN0eWxlVmFsdWUodGhpcy5ub2RlKCksIG5hbWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3R5bGVWYWx1ZShub2RlLCBuYW1lKSB7XG4gIHJldHVybiBub2RlLnN0eWxlLmdldFByb3BlcnR5VmFsdWUobmFtZSlcbiAgICAgIHx8IGRlZmF1bHRWaWV3KG5vZGUpLmdldENvbXB1dGVkU3R5bGUobm9kZSwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKTtcbn1cbiIsICJmdW5jdGlvbiBwcm9wZXJ0eVJlbW92ZShuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBkZWxldGUgdGhpc1tuYW1lXTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcHJvcGVydHlDb25zdGFudChuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpc1tuYW1lXSA9IHZhbHVlO1xuICB9O1xufVxuXG5mdW5jdGlvbiBwcm9wZXJ0eUZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHYgPT0gbnVsbCkgZGVsZXRlIHRoaXNbbmFtZV07XG4gICAgZWxzZSB0aGlzW25hbWVdID0gdjtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAxXG4gICAgICA/IHRoaXMuZWFjaCgodmFsdWUgPT0gbnVsbFxuICAgICAgICAgID8gcHJvcGVydHlSZW1vdmUgOiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgID8gcHJvcGVydHlGdW5jdGlvblxuICAgICAgICAgIDogcHJvcGVydHlDb25zdGFudCkobmFtZSwgdmFsdWUpKVxuICAgICAgOiB0aGlzLm5vZGUoKVtuYW1lXTtcbn1cbiIsICJmdW5jdGlvbiBjbGFzc0FycmF5KHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnRyaW0oKS5zcGxpdCgvXnxcXHMrLyk7XG59XG5cbmZ1bmN0aW9uIGNsYXNzTGlzdChub2RlKSB7XG4gIHJldHVybiBub2RlLmNsYXNzTGlzdCB8fCBuZXcgQ2xhc3NMaXN0KG5vZGUpO1xufVxuXG5mdW5jdGlvbiBDbGFzc0xpc3Qobm9kZSkge1xuICB0aGlzLl9ub2RlID0gbm9kZTtcbiAgdGhpcy5fbmFtZXMgPSBjbGFzc0FycmF5KG5vZGUuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIik7XG59XG5cbkNsYXNzTGlzdC5wcm90b3R5cGUgPSB7XG4gIGFkZDogZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBpID0gdGhpcy5fbmFtZXMuaW5kZXhPZihuYW1lKTtcbiAgICBpZiAoaSA8IDApIHtcbiAgICAgIHRoaXMuX25hbWVzLnB1c2gobmFtZSk7XG4gICAgICB0aGlzLl9ub2RlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIHRoaXMuX25hbWVzLmpvaW4oXCIgXCIpKTtcbiAgICB9XG4gIH0sXG4gIHJlbW92ZTogZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBpID0gdGhpcy5fbmFtZXMuaW5kZXhPZihuYW1lKTtcbiAgICBpZiAoaSA+PSAwKSB7XG4gICAgICB0aGlzLl9uYW1lcy5zcGxpY2UoaSwgMSk7XG4gICAgICB0aGlzLl9ub2RlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIHRoaXMuX25hbWVzLmpvaW4oXCIgXCIpKTtcbiAgICB9XG4gIH0sXG4gIGNvbnRhaW5zOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuX25hbWVzLmluZGV4T2YobmFtZSkgPj0gMDtcbiAgfVxufTtcblxuZnVuY3Rpb24gY2xhc3NlZEFkZChub2RlLCBuYW1lcykge1xuICB2YXIgbGlzdCA9IGNsYXNzTGlzdChub2RlKSwgaSA9IC0xLCBuID0gbmFtZXMubGVuZ3RoO1xuICB3aGlsZSAoKytpIDwgbikgbGlzdC5hZGQobmFtZXNbaV0pO1xufVxuXG5mdW5jdGlvbiBjbGFzc2VkUmVtb3ZlKG5vZGUsIG5hbWVzKSB7XG4gIHZhciBsaXN0ID0gY2xhc3NMaXN0KG5vZGUpLCBpID0gLTEsIG4gPSBuYW1lcy5sZW5ndGg7XG4gIHdoaWxlICgrK2kgPCBuKSBsaXN0LnJlbW92ZShuYW1lc1tpXSk7XG59XG5cbmZ1bmN0aW9uIGNsYXNzZWRUcnVlKG5hbWVzKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBjbGFzc2VkQWRkKHRoaXMsIG5hbWVzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2xhc3NlZEZhbHNlKG5hbWVzKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBjbGFzc2VkUmVtb3ZlKHRoaXMsIG5hbWVzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2xhc3NlZEZ1bmN0aW9uKG5hbWVzLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgKHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgPyBjbGFzc2VkQWRkIDogY2xhc3NlZFJlbW92ZSkodGhpcywgbmFtZXMpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIgbmFtZXMgPSBjbGFzc0FycmF5KG5hbWUgKyBcIlwiKTtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICB2YXIgbGlzdCA9IGNsYXNzTGlzdCh0aGlzLm5vZGUoKSksIGkgPSAtMSwgbiA9IG5hbWVzLmxlbmd0aDtcbiAgICB3aGlsZSAoKytpIDwgbikgaWYgKCFsaXN0LmNvbnRhaW5zKG5hbWVzW2ldKSkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gY2xhc3NlZEZ1bmN0aW9uIDogdmFsdWVcbiAgICAgID8gY2xhc3NlZFRydWVcbiAgICAgIDogY2xhc3NlZEZhbHNlKShuYW1lcywgdmFsdWUpKTtcbn1cbiIsICJmdW5jdGlvbiB0ZXh0UmVtb3ZlKCkge1xuICB0aGlzLnRleHRDb250ZW50ID0gXCJcIjtcbn1cblxuZnVuY3Rpb24gdGV4dENvbnN0YW50KHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnRleHRDb250ZW50ID0gdmFsdWU7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHRleHRGdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHRoaXMudGV4dENvbnRlbnQgPSB2ID09IG51bGwgPyBcIlwiIDogdjtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgID8gdGhpcy5lYWNoKHZhbHVlID09IG51bGxcbiAgICAgICAgICA/IHRleHRSZW1vdmUgOiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IHRleHRGdW5jdGlvblxuICAgICAgICAgIDogdGV4dENvbnN0YW50KSh2YWx1ZSkpXG4gICAgICA6IHRoaXMubm9kZSgpLnRleHRDb250ZW50O1xufVxuIiwgImZ1bmN0aW9uIGh0bWxSZW1vdmUoKSB7XG4gIHRoaXMuaW5uZXJIVE1MID0gXCJcIjtcbn1cblxuZnVuY3Rpb24gaHRtbENvbnN0YW50KHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmlubmVySFRNTCA9IHZhbHVlO1xuICB9O1xufVxuXG5mdW5jdGlvbiBodG1sRnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB0aGlzLmlubmVySFRNTCA9IHYgPT0gbnVsbCA/IFwiXCIgOiB2O1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLmVhY2godmFsdWUgPT0gbnVsbFxuICAgICAgICAgID8gaHRtbFJlbW92ZSA6ICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgID8gaHRtbEZ1bmN0aW9uXG4gICAgICAgICAgOiBodG1sQ29uc3RhbnQpKHZhbHVlKSlcbiAgICAgIDogdGhpcy5ub2RlKCkuaW5uZXJIVE1MO1xufVxuIiwgImZ1bmN0aW9uIHJhaXNlKCkge1xuICBpZiAodGhpcy5uZXh0U2libGluZykgdGhpcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaChyYWlzZSk7XG59XG4iLCAiZnVuY3Rpb24gbG93ZXIoKSB7XG4gIGlmICh0aGlzLnByZXZpb3VzU2libGluZykgdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLCB0aGlzLnBhcmVudE5vZGUuZmlyc3RDaGlsZCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5lYWNoKGxvd2VyKTtcbn1cbiIsICJpbXBvcnQgY3JlYXRvciBmcm9tIFwiLi4vY3JlYXRvci5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lKSB7XG4gIHZhciBjcmVhdGUgPSB0eXBlb2YgbmFtZSA9PT0gXCJmdW5jdGlvblwiID8gbmFtZSA6IGNyZWF0b3IobmFtZSk7XG4gIHJldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBlbmRDaGlsZChjcmVhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH0pO1xufVxuIiwgImltcG9ydCBjcmVhdG9yIGZyb20gXCIuLi9jcmVhdG9yLmpzXCI7XG5pbXBvcnQgc2VsZWN0b3IgZnJvbSBcIi4uL3NlbGVjdG9yLmpzXCI7XG5cbmZ1bmN0aW9uIGNvbnN0YW50TnVsbCgpIHtcbiAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIGJlZm9yZSkge1xuICB2YXIgY3JlYXRlID0gdHlwZW9mIG5hbWUgPT09IFwiZnVuY3Rpb25cIiA/IG5hbWUgOiBjcmVhdG9yKG5hbWUpLFxuICAgICAgc2VsZWN0ID0gYmVmb3JlID09IG51bGwgPyBjb25zdGFudE51bGwgOiB0eXBlb2YgYmVmb3JlID09PSBcImZ1bmN0aW9uXCIgPyBiZWZvcmUgOiBzZWxlY3RvcihiZWZvcmUpO1xuICByZXR1cm4gdGhpcy5zZWxlY3QoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zZXJ0QmVmb3JlKGNyZWF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCBzZWxlY3QuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCBudWxsKTtcbiAgfSk7XG59XG4iLCAiZnVuY3Rpb24gcmVtb3ZlKCkge1xuICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xuICBpZiAocGFyZW50KSBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5lYWNoKHJlbW92ZSk7XG59XG4iLCAiZnVuY3Rpb24gc2VsZWN0aW9uX2Nsb25lU2hhbGxvdygpIHtcbiAgdmFyIGNsb25lID0gdGhpcy5jbG9uZU5vZGUoZmFsc2UpLCBwYXJlbnQgPSB0aGlzLnBhcmVudE5vZGU7XG4gIHJldHVybiBwYXJlbnQgPyBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNsb25lLCB0aGlzLm5leHRTaWJsaW5nKSA6IGNsb25lO1xufVxuXG5mdW5jdGlvbiBzZWxlY3Rpb25fY2xvbmVEZWVwKCkge1xuICB2YXIgY2xvbmUgPSB0aGlzLmNsb25lTm9kZSh0cnVlKSwgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xuICByZXR1cm4gcGFyZW50ID8gcGFyZW50Lmluc2VydEJlZm9yZShjbG9uZSwgdGhpcy5uZXh0U2libGluZykgOiBjbG9uZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oZGVlcCkge1xuICByZXR1cm4gdGhpcy5zZWxlY3QoZGVlcCA/IHNlbGVjdGlvbl9jbG9uZURlZXAgOiBzZWxlY3Rpb25fY2xvbmVTaGFsbG93KTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLnByb3BlcnR5KFwiX19kYXRhX19cIiwgdmFsdWUpXG4gICAgICA6IHRoaXMubm9kZSgpLl9fZGF0YV9fO1xufVxuIiwgImZ1bmN0aW9uIGNvbnRleHRMaXN0ZW5lcihsaXN0ZW5lcikge1xuICByZXR1cm4gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBsaXN0ZW5lci5jYWxsKHRoaXMsIGV2ZW50LCB0aGlzLl9fZGF0YV9fKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2VUeXBlbmFtZXModHlwZW5hbWVzKSB7XG4gIHJldHVybiB0eXBlbmFtZXMudHJpbSgpLnNwbGl0KC9efFxccysvKS5tYXAoZnVuY3Rpb24odCkge1xuICAgIHZhciBuYW1lID0gXCJcIiwgaSA9IHQuaW5kZXhPZihcIi5cIik7XG4gICAgaWYgKGkgPj0gMCkgbmFtZSA9IHQuc2xpY2UoaSArIDEpLCB0ID0gdC5zbGljZSgwLCBpKTtcbiAgICByZXR1cm4ge3R5cGU6IHQsIG5hbWU6IG5hbWV9O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gb25SZW1vdmUodHlwZW5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBvbiA9IHRoaXMuX19vbjtcbiAgICBpZiAoIW9uKSByZXR1cm47XG4gICAgZm9yICh2YXIgaiA9IDAsIGkgPSAtMSwgbSA9IG9uLmxlbmd0aCwgbzsgaiA8IG07ICsraikge1xuICAgICAgaWYgKG8gPSBvbltqXSwgKCF0eXBlbmFtZS50eXBlIHx8IG8udHlwZSA9PT0gdHlwZW5hbWUudHlwZSkgJiYgby5uYW1lID09PSB0eXBlbmFtZS5uYW1lKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihvLnR5cGUsIG8ubGlzdGVuZXIsIG8ub3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvblsrK2ldID0gbztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCsraSkgb24ubGVuZ3RoID0gaTtcbiAgICBlbHNlIGRlbGV0ZSB0aGlzLl9fb247XG4gIH07XG59XG5cbmZ1bmN0aW9uIG9uQWRkKHR5cGVuYW1lLCB2YWx1ZSwgb3B0aW9ucykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG9uID0gdGhpcy5fX29uLCBvLCBsaXN0ZW5lciA9IGNvbnRleHRMaXN0ZW5lcih2YWx1ZSk7XG4gICAgaWYgKG9uKSBmb3IgKHZhciBqID0gMCwgbSA9IG9uLmxlbmd0aDsgaiA8IG07ICsraikge1xuICAgICAgaWYgKChvID0gb25bal0pLnR5cGUgPT09IHR5cGVuYW1lLnR5cGUgJiYgby5uYW1lID09PSB0eXBlbmFtZS5uYW1lKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihvLnR5cGUsIG8ubGlzdGVuZXIsIG8ub3B0aW9ucyk7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihvLnR5cGUsIG8ubGlzdGVuZXIgPSBsaXN0ZW5lciwgby5vcHRpb25zID0gb3B0aW9ucyk7XG4gICAgICAgIG8udmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodHlwZW5hbWUudHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xuICAgIG8gPSB7dHlwZTogdHlwZW5hbWUudHlwZSwgbmFtZTogdHlwZW5hbWUubmFtZSwgdmFsdWU6IHZhbHVlLCBsaXN0ZW5lcjogbGlzdGVuZXIsIG9wdGlvbnM6IG9wdGlvbnN9O1xuICAgIGlmICghb24pIHRoaXMuX19vbiA9IFtvXTtcbiAgICBlbHNlIG9uLnB1c2gobyk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHR5cGVuYW1lLCB2YWx1ZSwgb3B0aW9ucykge1xuICB2YXIgdHlwZW5hbWVzID0gcGFyc2VUeXBlbmFtZXModHlwZW5hbWUgKyBcIlwiKSwgaSwgbiA9IHR5cGVuYW1lcy5sZW5ndGgsIHQ7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgdmFyIG9uID0gdGhpcy5ub2RlKCkuX19vbjtcbiAgICBpZiAob24pIGZvciAodmFyIGogPSAwLCBtID0gb24ubGVuZ3RoLCBvOyBqIDwgbTsgKytqKSB7XG4gICAgICBmb3IgKGkgPSAwLCBvID0gb25bal07IGkgPCBuOyArK2kpIHtcbiAgICAgICAgaWYgKCh0ID0gdHlwZW5hbWVzW2ldKS50eXBlID09PSBvLnR5cGUgJiYgdC5uYW1lID09PSBvLm5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gby52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBvbiA9IHZhbHVlID8gb25BZGQgOiBvblJlbW92ZTtcbiAgZm9yIChpID0gMDsgaSA8IG47ICsraSkgdGhpcy5lYWNoKG9uKHR5cGVuYW1lc1tpXSwgdmFsdWUsIG9wdGlvbnMpKTtcbiAgcmV0dXJuIHRoaXM7XG59XG4iLCAiaW1wb3J0IGRlZmF1bHRWaWV3IGZyb20gXCIuLi93aW5kb3cuanNcIjtcblxuZnVuY3Rpb24gZGlzcGF0Y2hFdmVudChub2RlLCB0eXBlLCBwYXJhbXMpIHtcbiAgdmFyIHdpbmRvdyA9IGRlZmF1bHRWaWV3KG5vZGUpLFxuICAgICAgZXZlbnQgPSB3aW5kb3cuQ3VzdG9tRXZlbnQ7XG5cbiAgaWYgKHR5cGVvZiBldmVudCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZXZlbnQgPSBuZXcgZXZlbnQodHlwZSwgcGFyYW1zKTtcbiAgfSBlbHNlIHtcbiAgICBldmVudCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpO1xuICAgIGlmIChwYXJhbXMpIGV2ZW50LmluaXRFdmVudCh0eXBlLCBwYXJhbXMuYnViYmxlcywgcGFyYW1zLmNhbmNlbGFibGUpLCBldmVudC5kZXRhaWwgPSBwYXJhbXMuZGV0YWlsO1xuICAgIGVsc2UgZXZlbnQuaW5pdEV2ZW50KHR5cGUsIGZhbHNlLCBmYWxzZSk7XG4gIH1cblxuICBub2RlLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xufVxuXG5mdW5jdGlvbiBkaXNwYXRjaENvbnN0YW50KHR5cGUsIHBhcmFtcykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoRXZlbnQodGhpcywgdHlwZSwgcGFyYW1zKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2hGdW5jdGlvbih0eXBlLCBwYXJhbXMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkaXNwYXRjaEV2ZW50KHRoaXMsIHR5cGUsIHBhcmFtcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odHlwZSwgcGFyYW1zKSB7XG4gIHJldHVybiB0aGlzLmVhY2goKHR5cGVvZiBwYXJhbXMgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyBkaXNwYXRjaEZ1bmN0aW9uXG4gICAgICA6IGRpc3BhdGNoQ29uc3RhbnQpKHR5cGUsIHBhcmFtcykpO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKigpIHtcbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gMCwgbSA9IGdyb3Vwcy5sZW5ndGg7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgaSA9IDAsIG4gPSBncm91cC5sZW5ndGgsIG5vZGU7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHlpZWxkIG5vZGU7XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHNlbGVjdGlvbl9zZWxlY3QgZnJvbSBcIi4vc2VsZWN0LmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3NlbGVjdEFsbCBmcm9tIFwiLi9zZWxlY3RBbGwuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fc2VsZWN0Q2hpbGQgZnJvbSBcIi4vc2VsZWN0Q2hpbGQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fc2VsZWN0Q2hpbGRyZW4gZnJvbSBcIi4vc2VsZWN0Q2hpbGRyZW4uanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fZmlsdGVyIGZyb20gXCIuL2ZpbHRlci5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9kYXRhIGZyb20gXCIuL2RhdGEuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fZW50ZXIgZnJvbSBcIi4vZW50ZXIuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fZXhpdCBmcm9tIFwiLi9leGl0LmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2pvaW4gZnJvbSBcIi4vam9pbi5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9tZXJnZSBmcm9tIFwiLi9tZXJnZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9vcmRlciBmcm9tIFwiLi9vcmRlci5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9zb3J0IGZyb20gXCIuL3NvcnQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fY2FsbCBmcm9tIFwiLi9jYWxsLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX25vZGVzIGZyb20gXCIuL25vZGVzLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX25vZGUgZnJvbSBcIi4vbm9kZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9zaXplIGZyb20gXCIuL3NpemUuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fZW1wdHkgZnJvbSBcIi4vZW1wdHkuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fZWFjaCBmcm9tIFwiLi9lYWNoLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2F0dHIgZnJvbSBcIi4vYXR0ci5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9zdHlsZSBmcm9tIFwiLi9zdHlsZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9wcm9wZXJ0eSBmcm9tIFwiLi9wcm9wZXJ0eS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9jbGFzc2VkIGZyb20gXCIuL2NsYXNzZWQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fdGV4dCBmcm9tIFwiLi90ZXh0LmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2h0bWwgZnJvbSBcIi4vaHRtbC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9yYWlzZSBmcm9tIFwiLi9yYWlzZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9sb3dlciBmcm9tIFwiLi9sb3dlci5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9hcHBlbmQgZnJvbSBcIi4vYXBwZW5kLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2luc2VydCBmcm9tIFwiLi9pbnNlcnQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fcmVtb3ZlIGZyb20gXCIuL3JlbW92ZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9jbG9uZSBmcm9tIFwiLi9jbG9uZS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9kYXR1bSBmcm9tIFwiLi9kYXR1bS5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9vbiBmcm9tIFwiLi9vbi5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9kaXNwYXRjaCBmcm9tIFwiLi9kaXNwYXRjaC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9pdGVyYXRvciBmcm9tIFwiLi9pdGVyYXRvci5qc1wiO1xuXG5leHBvcnQgdmFyIHJvb3QgPSBbbnVsbF07XG5cbmV4cG9ydCBmdW5jdGlvbiBTZWxlY3Rpb24oZ3JvdXBzLCBwYXJlbnRzKSB7XG4gIHRoaXMuX2dyb3VwcyA9IGdyb3VwcztcbiAgdGhpcy5fcGFyZW50cyA9IHBhcmVudHM7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oW1tkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRdXSwgcm9vdCk7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdGlvbl9zZWxlY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzO1xufVxuXG5TZWxlY3Rpb24ucHJvdG90eXBlID0gc2VsZWN0aW9uLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IFNlbGVjdGlvbixcbiAgc2VsZWN0OiBzZWxlY3Rpb25fc2VsZWN0LFxuICBzZWxlY3RBbGw6IHNlbGVjdGlvbl9zZWxlY3RBbGwsXG4gIHNlbGVjdENoaWxkOiBzZWxlY3Rpb25fc2VsZWN0Q2hpbGQsXG4gIHNlbGVjdENoaWxkcmVuOiBzZWxlY3Rpb25fc2VsZWN0Q2hpbGRyZW4sXG4gIGZpbHRlcjogc2VsZWN0aW9uX2ZpbHRlcixcbiAgZGF0YTogc2VsZWN0aW9uX2RhdGEsXG4gIGVudGVyOiBzZWxlY3Rpb25fZW50ZXIsXG4gIGV4aXQ6IHNlbGVjdGlvbl9leGl0LFxuICBqb2luOiBzZWxlY3Rpb25fam9pbixcbiAgbWVyZ2U6IHNlbGVjdGlvbl9tZXJnZSxcbiAgc2VsZWN0aW9uOiBzZWxlY3Rpb25fc2VsZWN0aW9uLFxuICBvcmRlcjogc2VsZWN0aW9uX29yZGVyLFxuICBzb3J0OiBzZWxlY3Rpb25fc29ydCxcbiAgY2FsbDogc2VsZWN0aW9uX2NhbGwsXG4gIG5vZGVzOiBzZWxlY3Rpb25fbm9kZXMsXG4gIG5vZGU6IHNlbGVjdGlvbl9ub2RlLFxuICBzaXplOiBzZWxlY3Rpb25fc2l6ZSxcbiAgZW1wdHk6IHNlbGVjdGlvbl9lbXB0eSxcbiAgZWFjaDogc2VsZWN0aW9uX2VhY2gsXG4gIGF0dHI6IHNlbGVjdGlvbl9hdHRyLFxuICBzdHlsZTogc2VsZWN0aW9uX3N0eWxlLFxuICBwcm9wZXJ0eTogc2VsZWN0aW9uX3Byb3BlcnR5LFxuICBjbGFzc2VkOiBzZWxlY3Rpb25fY2xhc3NlZCxcbiAgdGV4dDogc2VsZWN0aW9uX3RleHQsXG4gIGh0bWw6IHNlbGVjdGlvbl9odG1sLFxuICByYWlzZTogc2VsZWN0aW9uX3JhaXNlLFxuICBsb3dlcjogc2VsZWN0aW9uX2xvd2VyLFxuICBhcHBlbmQ6IHNlbGVjdGlvbl9hcHBlbmQsXG4gIGluc2VydDogc2VsZWN0aW9uX2luc2VydCxcbiAgcmVtb3ZlOiBzZWxlY3Rpb25fcmVtb3ZlLFxuICBjbG9uZTogc2VsZWN0aW9uX2Nsb25lLFxuICBkYXR1bTogc2VsZWN0aW9uX2RhdHVtLFxuICBvbjogc2VsZWN0aW9uX29uLFxuICBkaXNwYXRjaDogc2VsZWN0aW9uX2Rpc3BhdGNoLFxuICBbU3ltYm9sLml0ZXJhdG9yXTogc2VsZWN0aW9uX2l0ZXJhdG9yXG59O1xuXG5leHBvcnQgZGVmYXVsdCBzZWxlY3Rpb247XG4iLCAiaW1wb3J0IHtTZWxlY3Rpb24sIHJvb3R9IGZyb20gXCIuL3NlbGVjdGlvbi9pbmRleC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3Rvcikge1xuICByZXR1cm4gdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiXG4gICAgICA/IG5ldyBTZWxlY3Rpb24oW1tkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKV1dLCBbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50XSlcbiAgICAgIDogbmV3IFNlbGVjdGlvbihbW3NlbGVjdG9yXV0sIHJvb3QpO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNvbnN0cnVjdG9yLCBmYWN0b3J5LCBwcm90b3R5cGUpIHtcbiAgY29uc3RydWN0b3IucHJvdG90eXBlID0gZmFjdG9yeS5wcm90b3R5cGUgPSBwcm90b3R5cGU7XG4gIHByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGNvbnN0cnVjdG9yO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKHBhcmVudCwgZGVmaW5pdGlvbikge1xuICB2YXIgcHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShwYXJlbnQucHJvdG90eXBlKTtcbiAgZm9yICh2YXIga2V5IGluIGRlZmluaXRpb24pIHByb3RvdHlwZVtrZXldID0gZGVmaW5pdGlvbltrZXldO1xuICByZXR1cm4gcHJvdG90eXBlO1xufVxuIiwgImltcG9ydCBkZWZpbmUsIHtleHRlbmR9IGZyb20gXCIuL2RlZmluZS5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gQ29sb3IoKSB7fVxuXG5leHBvcnQgdmFyIGRhcmtlciA9IDAuNztcbmV4cG9ydCB2YXIgYnJpZ2h0ZXIgPSAxIC8gZGFya2VyO1xuXG52YXIgcmVJID0gXCJcXFxccyooWystXT9cXFxcZCspXFxcXHMqXCIsXG4gICAgcmVOID0gXCJcXFxccyooWystXT8oPzpcXFxcZCpcXFxcLik/XFxcXGQrKD86W2VFXVsrLV0/XFxcXGQrKT8pXFxcXHMqXCIsXG4gICAgcmVQID0gXCJcXFxccyooWystXT8oPzpcXFxcZCpcXFxcLik/XFxcXGQrKD86W2VFXVsrLV0/XFxcXGQrKT8pJVxcXFxzKlwiLFxuICAgIHJlSGV4ID0gL14jKFswLTlhLWZdezMsOH0pJC8sXG4gICAgcmVSZ2JJbnRlZ2VyID0gbmV3IFJlZ0V4cChgXnJnYlxcXFwoJHtyZUl9LCR7cmVJfSwke3JlSX1cXFxcKSRgKSxcbiAgICByZVJnYlBlcmNlbnQgPSBuZXcgUmVnRXhwKGBecmdiXFxcXCgke3JlUH0sJHtyZVB9LCR7cmVQfVxcXFwpJGApLFxuICAgIHJlUmdiYUludGVnZXIgPSBuZXcgUmVnRXhwKGBecmdiYVxcXFwoJHtyZUl9LCR7cmVJfSwke3JlSX0sJHtyZU59XFxcXCkkYCksXG4gICAgcmVSZ2JhUGVyY2VudCA9IG5ldyBSZWdFeHAoYF5yZ2JhXFxcXCgke3JlUH0sJHtyZVB9LCR7cmVQfSwke3JlTn1cXFxcKSRgKSxcbiAgICByZUhzbFBlcmNlbnQgPSBuZXcgUmVnRXhwKGBeaHNsXFxcXCgke3JlTn0sJHtyZVB9LCR7cmVQfVxcXFwpJGApLFxuICAgIHJlSHNsYVBlcmNlbnQgPSBuZXcgUmVnRXhwKGBeaHNsYVxcXFwoJHtyZU59LCR7cmVQfSwke3JlUH0sJHtyZU59XFxcXCkkYCk7XG5cbnZhciBuYW1lZCA9IHtcbiAgYWxpY2VibHVlOiAweGYwZjhmZixcbiAgYW50aXF1ZXdoaXRlOiAweGZhZWJkNyxcbiAgYXF1YTogMHgwMGZmZmYsXG4gIGFxdWFtYXJpbmU6IDB4N2ZmZmQ0LFxuICBhenVyZTogMHhmMGZmZmYsXG4gIGJlaWdlOiAweGY1ZjVkYyxcbiAgYmlzcXVlOiAweGZmZTRjNCxcbiAgYmxhY2s6IDB4MDAwMDAwLFxuICBibGFuY2hlZGFsbW9uZDogMHhmZmViY2QsXG4gIGJsdWU6IDB4MDAwMGZmLFxuICBibHVldmlvbGV0OiAweDhhMmJlMixcbiAgYnJvd246IDB4YTUyYTJhLFxuICBidXJseXdvb2Q6IDB4ZGViODg3LFxuICBjYWRldGJsdWU6IDB4NWY5ZWEwLFxuICBjaGFydHJldXNlOiAweDdmZmYwMCxcbiAgY2hvY29sYXRlOiAweGQyNjkxZSxcbiAgY29yYWw6IDB4ZmY3ZjUwLFxuICBjb3JuZmxvd2VyYmx1ZTogMHg2NDk1ZWQsXG4gIGNvcm5zaWxrOiAweGZmZjhkYyxcbiAgY3JpbXNvbjogMHhkYzE0M2MsXG4gIGN5YW46IDB4MDBmZmZmLFxuICBkYXJrYmx1ZTogMHgwMDAwOGIsXG4gIGRhcmtjeWFuOiAweDAwOGI4YixcbiAgZGFya2dvbGRlbnJvZDogMHhiODg2MGIsXG4gIGRhcmtncmF5OiAweGE5YTlhOSxcbiAgZGFya2dyZWVuOiAweDAwNjQwMCxcbiAgZGFya2dyZXk6IDB4YTlhOWE5LFxuICBkYXJra2hha2k6IDB4YmRiNzZiLFxuICBkYXJrbWFnZW50YTogMHg4YjAwOGIsXG4gIGRhcmtvbGl2ZWdyZWVuOiAweDU1NmIyZixcbiAgZGFya29yYW5nZTogMHhmZjhjMDAsXG4gIGRhcmtvcmNoaWQ6IDB4OTkzMmNjLFxuICBkYXJrcmVkOiAweDhiMDAwMCxcbiAgZGFya3NhbG1vbjogMHhlOTk2N2EsXG4gIGRhcmtzZWFncmVlbjogMHg4ZmJjOGYsXG4gIGRhcmtzbGF0ZWJsdWU6IDB4NDgzZDhiLFxuICBkYXJrc2xhdGVncmF5OiAweDJmNGY0ZixcbiAgZGFya3NsYXRlZ3JleTogMHgyZjRmNGYsXG4gIGRhcmt0dXJxdW9pc2U6IDB4MDBjZWQxLFxuICBkYXJrdmlvbGV0OiAweDk0MDBkMyxcbiAgZGVlcHBpbms6IDB4ZmYxNDkzLFxuICBkZWVwc2t5Ymx1ZTogMHgwMGJmZmYsXG4gIGRpbWdyYXk6IDB4Njk2OTY5LFxuICBkaW1ncmV5OiAweDY5Njk2OSxcbiAgZG9kZ2VyYmx1ZTogMHgxZTkwZmYsXG4gIGZpcmVicmljazogMHhiMjIyMjIsXG4gIGZsb3JhbHdoaXRlOiAweGZmZmFmMCxcbiAgZm9yZXN0Z3JlZW46IDB4MjI4YjIyLFxuICBmdWNoc2lhOiAweGZmMDBmZixcbiAgZ2FpbnNib3JvOiAweGRjZGNkYyxcbiAgZ2hvc3R3aGl0ZTogMHhmOGY4ZmYsXG4gIGdvbGQ6IDB4ZmZkNzAwLFxuICBnb2xkZW5yb2Q6IDB4ZGFhNTIwLFxuICBncmF5OiAweDgwODA4MCxcbiAgZ3JlZW46IDB4MDA4MDAwLFxuICBncmVlbnllbGxvdzogMHhhZGZmMmYsXG4gIGdyZXk6IDB4ODA4MDgwLFxuICBob25leWRldzogMHhmMGZmZjAsXG4gIGhvdHBpbms6IDB4ZmY2OWI0LFxuICBpbmRpYW5yZWQ6IDB4Y2Q1YzVjLFxuICBpbmRpZ286IDB4NGIwMDgyLFxuICBpdm9yeTogMHhmZmZmZjAsXG4gIGtoYWtpOiAweGYwZTY4YyxcbiAgbGF2ZW5kZXI6IDB4ZTZlNmZhLFxuICBsYXZlbmRlcmJsdXNoOiAweGZmZjBmNSxcbiAgbGF3bmdyZWVuOiAweDdjZmMwMCxcbiAgbGVtb25jaGlmZm9uOiAweGZmZmFjZCxcbiAgbGlnaHRibHVlOiAweGFkZDhlNixcbiAgbGlnaHRjb3JhbDogMHhmMDgwODAsXG4gIGxpZ2h0Y3lhbjogMHhlMGZmZmYsXG4gIGxpZ2h0Z29sZGVucm9keWVsbG93OiAweGZhZmFkMixcbiAgbGlnaHRncmF5OiAweGQzZDNkMyxcbiAgbGlnaHRncmVlbjogMHg5MGVlOTAsXG4gIGxpZ2h0Z3JleTogMHhkM2QzZDMsXG4gIGxpZ2h0cGluazogMHhmZmI2YzEsXG4gIGxpZ2h0c2FsbW9uOiAweGZmYTA3YSxcbiAgbGlnaHRzZWFncmVlbjogMHgyMGIyYWEsXG4gIGxpZ2h0c2t5Ymx1ZTogMHg4N2NlZmEsXG4gIGxpZ2h0c2xhdGVncmF5OiAweDc3ODg5OSxcbiAgbGlnaHRzbGF0ZWdyZXk6IDB4Nzc4ODk5LFxuICBsaWdodHN0ZWVsYmx1ZTogMHhiMGM0ZGUsXG4gIGxpZ2h0eWVsbG93OiAweGZmZmZlMCxcbiAgbGltZTogMHgwMGZmMDAsXG4gIGxpbWVncmVlbjogMHgzMmNkMzIsXG4gIGxpbmVuOiAweGZhZjBlNixcbiAgbWFnZW50YTogMHhmZjAwZmYsXG4gIG1hcm9vbjogMHg4MDAwMDAsXG4gIG1lZGl1bWFxdWFtYXJpbmU6IDB4NjZjZGFhLFxuICBtZWRpdW1ibHVlOiAweDAwMDBjZCxcbiAgbWVkaXVtb3JjaGlkOiAweGJhNTVkMyxcbiAgbWVkaXVtcHVycGxlOiAweDkzNzBkYixcbiAgbWVkaXVtc2VhZ3JlZW46IDB4M2NiMzcxLFxuICBtZWRpdW1zbGF0ZWJsdWU6IDB4N2I2OGVlLFxuICBtZWRpdW1zcHJpbmdncmVlbjogMHgwMGZhOWEsXG4gIG1lZGl1bXR1cnF1b2lzZTogMHg0OGQxY2MsXG4gIG1lZGl1bXZpb2xldHJlZDogMHhjNzE1ODUsXG4gIG1pZG5pZ2h0Ymx1ZTogMHgxOTE5NzAsXG4gIG1pbnRjcmVhbTogMHhmNWZmZmEsXG4gIG1pc3R5cm9zZTogMHhmZmU0ZTEsXG4gIG1vY2Nhc2luOiAweGZmZTRiNSxcbiAgbmF2YWpvd2hpdGU6IDB4ZmZkZWFkLFxuICBuYXZ5OiAweDAwMDA4MCxcbiAgb2xkbGFjZTogMHhmZGY1ZTYsXG4gIG9saXZlOiAweDgwODAwMCxcbiAgb2xpdmVkcmFiOiAweDZiOGUyMyxcbiAgb3JhbmdlOiAweGZmYTUwMCxcbiAgb3JhbmdlcmVkOiAweGZmNDUwMCxcbiAgb3JjaGlkOiAweGRhNzBkNixcbiAgcGFsZWdvbGRlbnJvZDogMHhlZWU4YWEsXG4gIHBhbGVncmVlbjogMHg5OGZiOTgsXG4gIHBhbGV0dXJxdW9pc2U6IDB4YWZlZWVlLFxuICBwYWxldmlvbGV0cmVkOiAweGRiNzA5MyxcbiAgcGFwYXlhd2hpcDogMHhmZmVmZDUsXG4gIHBlYWNocHVmZjogMHhmZmRhYjksXG4gIHBlcnU6IDB4Y2Q4NTNmLFxuICBwaW5rOiAweGZmYzBjYixcbiAgcGx1bTogMHhkZGEwZGQsXG4gIHBvd2RlcmJsdWU6IDB4YjBlMGU2LFxuICBwdXJwbGU6IDB4ODAwMDgwLFxuICByZWJlY2NhcHVycGxlOiAweDY2MzM5OSxcbiAgcmVkOiAweGZmMDAwMCxcbiAgcm9zeWJyb3duOiAweGJjOGY4ZixcbiAgcm95YWxibHVlOiAweDQxNjllMSxcbiAgc2FkZGxlYnJvd246IDB4OGI0NTEzLFxuICBzYWxtb246IDB4ZmE4MDcyLFxuICBzYW5keWJyb3duOiAweGY0YTQ2MCxcbiAgc2VhZ3JlZW46IDB4MmU4YjU3LFxuICBzZWFzaGVsbDogMHhmZmY1ZWUsXG4gIHNpZW5uYTogMHhhMDUyMmQsXG4gIHNpbHZlcjogMHhjMGMwYzAsXG4gIHNreWJsdWU6IDB4ODdjZWViLFxuICBzbGF0ZWJsdWU6IDB4NmE1YWNkLFxuICBzbGF0ZWdyYXk6IDB4NzA4MDkwLFxuICBzbGF0ZWdyZXk6IDB4NzA4MDkwLFxuICBzbm93OiAweGZmZmFmYSxcbiAgc3ByaW5nZ3JlZW46IDB4MDBmZjdmLFxuICBzdGVlbGJsdWU6IDB4NDY4MmI0LFxuICB0YW46IDB4ZDJiNDhjLFxuICB0ZWFsOiAweDAwODA4MCxcbiAgdGhpc3RsZTogMHhkOGJmZDgsXG4gIHRvbWF0bzogMHhmZjYzNDcsXG4gIHR1cnF1b2lzZTogMHg0MGUwZDAsXG4gIHZpb2xldDogMHhlZTgyZWUsXG4gIHdoZWF0OiAweGY1ZGViMyxcbiAgd2hpdGU6IDB4ZmZmZmZmLFxuICB3aGl0ZXNtb2tlOiAweGY1ZjVmNSxcbiAgeWVsbG93OiAweGZmZmYwMCxcbiAgeWVsbG93Z3JlZW46IDB4OWFjZDMyXG59O1xuXG5kZWZpbmUoQ29sb3IsIGNvbG9yLCB7XG4gIGNvcHkoY2hhbm5lbHMpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgdGhpcy5jb25zdHJ1Y3RvciwgdGhpcywgY2hhbm5lbHMpO1xuICB9LFxuICBkaXNwbGF5YWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5yZ2IoKS5kaXNwbGF5YWJsZSgpO1xuICB9LFxuICBoZXg6IGNvbG9yX2Zvcm1hdEhleCwgLy8gRGVwcmVjYXRlZCEgVXNlIGNvbG9yLmZvcm1hdEhleC5cbiAgZm9ybWF0SGV4OiBjb2xvcl9mb3JtYXRIZXgsXG4gIGZvcm1hdEhleDg6IGNvbG9yX2Zvcm1hdEhleDgsXG4gIGZvcm1hdEhzbDogY29sb3JfZm9ybWF0SHNsLFxuICBmb3JtYXRSZ2I6IGNvbG9yX2Zvcm1hdFJnYixcbiAgdG9TdHJpbmc6IGNvbG9yX2Zvcm1hdFJnYlxufSk7XG5cbmZ1bmN0aW9uIGNvbG9yX2Zvcm1hdEhleCgpIHtcbiAgcmV0dXJuIHRoaXMucmdiKCkuZm9ybWF0SGV4KCk7XG59XG5cbmZ1bmN0aW9uIGNvbG9yX2Zvcm1hdEhleDgoKSB7XG4gIHJldHVybiB0aGlzLnJnYigpLmZvcm1hdEhleDgoKTtcbn1cblxuZnVuY3Rpb24gY29sb3JfZm9ybWF0SHNsKCkge1xuICByZXR1cm4gaHNsQ29udmVydCh0aGlzKS5mb3JtYXRIc2woKTtcbn1cblxuZnVuY3Rpb24gY29sb3JfZm9ybWF0UmdiKCkge1xuICByZXR1cm4gdGhpcy5yZ2IoKS5mb3JtYXRSZ2IoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29sb3IoZm9ybWF0KSB7XG4gIHZhciBtLCBsO1xuICBmb3JtYXQgPSAoZm9ybWF0ICsgXCJcIikudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiAobSA9IHJlSGV4LmV4ZWMoZm9ybWF0KSkgPyAobCA9IG1bMV0ubGVuZ3RoLCBtID0gcGFyc2VJbnQobVsxXSwgMTYpLCBsID09PSA2ID8gcmdibihtKSAvLyAjZmYwMDAwXG4gICAgICA6IGwgPT09IDMgPyBuZXcgUmdiKChtID4+IDggJiAweGYpIHwgKG0gPj4gNCAmIDB4ZjApLCAobSA+PiA0ICYgMHhmKSB8IChtICYgMHhmMCksICgobSAmIDB4ZikgPDwgNCkgfCAobSAmIDB4ZiksIDEpIC8vICNmMDBcbiAgICAgIDogbCA9PT0gOCA/IHJnYmEobSA+PiAyNCAmIDB4ZmYsIG0gPj4gMTYgJiAweGZmLCBtID4+IDggJiAweGZmLCAobSAmIDB4ZmYpIC8gMHhmZikgLy8gI2ZmMDAwMDAwXG4gICAgICA6IGwgPT09IDQgPyByZ2JhKChtID4+IDEyICYgMHhmKSB8IChtID4+IDggJiAweGYwKSwgKG0gPj4gOCAmIDB4ZikgfCAobSA+PiA0ICYgMHhmMCksIChtID4+IDQgJiAweGYpIHwgKG0gJiAweGYwKSwgKCgobSAmIDB4ZikgPDwgNCkgfCAobSAmIDB4ZikpIC8gMHhmZikgLy8gI2YwMDBcbiAgICAgIDogbnVsbCkgLy8gaW52YWxpZCBoZXhcbiAgICAgIDogKG0gPSByZVJnYkludGVnZXIuZXhlYyhmb3JtYXQpKSA/IG5ldyBSZ2IobVsxXSwgbVsyXSwgbVszXSwgMSkgLy8gcmdiKDI1NSwgMCwgMClcbiAgICAgIDogKG0gPSByZVJnYlBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IG5ldyBSZ2IobVsxXSAqIDI1NSAvIDEwMCwgbVsyXSAqIDI1NSAvIDEwMCwgbVszXSAqIDI1NSAvIDEwMCwgMSkgLy8gcmdiKDEwMCUsIDAlLCAwJSlcbiAgICAgIDogKG0gPSByZVJnYmFJbnRlZ2VyLmV4ZWMoZm9ybWF0KSkgPyByZ2JhKG1bMV0sIG1bMl0sIG1bM10sIG1bNF0pIC8vIHJnYmEoMjU1LCAwLCAwLCAxKVxuICAgICAgOiAobSA9IHJlUmdiYVBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IHJnYmEobVsxXSAqIDI1NSAvIDEwMCwgbVsyXSAqIDI1NSAvIDEwMCwgbVszXSAqIDI1NSAvIDEwMCwgbVs0XSkgLy8gcmdiKDEwMCUsIDAlLCAwJSwgMSlcbiAgICAgIDogKG0gPSByZUhzbFBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IGhzbGEobVsxXSwgbVsyXSAvIDEwMCwgbVszXSAvIDEwMCwgMSkgLy8gaHNsKDEyMCwgNTAlLCA1MCUpXG4gICAgICA6IChtID0gcmVIc2xhUGVyY2VudC5leGVjKGZvcm1hdCkpID8gaHNsYShtWzFdLCBtWzJdIC8gMTAwLCBtWzNdIC8gMTAwLCBtWzRdKSAvLyBoc2xhKDEyMCwgNTAlLCA1MCUsIDEpXG4gICAgICA6IG5hbWVkLmhhc093blByb3BlcnR5KGZvcm1hdCkgPyByZ2JuKG5hbWVkW2Zvcm1hdF0pIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gICAgICA6IGZvcm1hdCA9PT0gXCJ0cmFuc3BhcmVudFwiID8gbmV3IFJnYihOYU4sIE5hTiwgTmFOLCAwKVxuICAgICAgOiBudWxsO1xufVxuXG5mdW5jdGlvbiByZ2JuKG4pIHtcbiAgcmV0dXJuIG5ldyBSZ2IobiA+PiAxNiAmIDB4ZmYsIG4gPj4gOCAmIDB4ZmYsIG4gJiAweGZmLCAxKTtcbn1cblxuZnVuY3Rpb24gcmdiYShyLCBnLCBiLCBhKSB7XG4gIGlmIChhIDw9IDApIHIgPSBnID0gYiA9IE5hTjtcbiAgcmV0dXJuIG5ldyBSZ2IociwgZywgYiwgYSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZ2JDb252ZXJ0KG8pIHtcbiAgaWYgKCEobyBpbnN0YW5jZW9mIENvbG9yKSkgbyA9IGNvbG9yKG8pO1xuICBpZiAoIW8pIHJldHVybiBuZXcgUmdiO1xuICBvID0gby5yZ2IoKTtcbiAgcmV0dXJuIG5ldyBSZ2Ioby5yLCBvLmcsIG8uYiwgby5vcGFjaXR5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJnYihyLCBnLCBiLCBvcGFjaXR5KSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gcmdiQ29udmVydChyKSA6IG5ldyBSZ2IociwgZywgYiwgb3BhY2l0eSA9PSBudWxsID8gMSA6IG9wYWNpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gUmdiKHIsIGcsIGIsIG9wYWNpdHkpIHtcbiAgdGhpcy5yID0gK3I7XG4gIHRoaXMuZyA9ICtnO1xuICB0aGlzLmIgPSArYjtcbiAgdGhpcy5vcGFjaXR5ID0gK29wYWNpdHk7XG59XG5cbmRlZmluZShSZ2IsIHJnYiwgZXh0ZW5kKENvbG9yLCB7XG4gIGJyaWdodGVyKGspIHtcbiAgICBrID0gayA9PSBudWxsID8gYnJpZ2h0ZXIgOiBNYXRoLnBvdyhicmlnaHRlciwgayk7XG4gICAgcmV0dXJuIG5ldyBSZ2IodGhpcy5yICogaywgdGhpcy5nICogaywgdGhpcy5iICogaywgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgZGFya2VyKGspIHtcbiAgICBrID0gayA9PSBudWxsID8gZGFya2VyIDogTWF0aC5wb3coZGFya2VyLCBrKTtcbiAgICByZXR1cm4gbmV3IFJnYih0aGlzLnIgKiBrLCB0aGlzLmcgKiBrLCB0aGlzLmIgKiBrLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICByZ2IoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG4gIGNsYW1wKCkge1xuICAgIHJldHVybiBuZXcgUmdiKGNsYW1waSh0aGlzLnIpLCBjbGFtcGkodGhpcy5nKSwgY2xhbXBpKHRoaXMuYiksIGNsYW1wYSh0aGlzLm9wYWNpdHkpKTtcbiAgfSxcbiAgZGlzcGxheWFibGUoKSB7XG4gICAgcmV0dXJuICgtMC41IDw9IHRoaXMuciAmJiB0aGlzLnIgPCAyNTUuNSlcbiAgICAgICAgJiYgKC0wLjUgPD0gdGhpcy5nICYmIHRoaXMuZyA8IDI1NS41KVxuICAgICAgICAmJiAoLTAuNSA8PSB0aGlzLmIgJiYgdGhpcy5iIDwgMjU1LjUpXG4gICAgICAgICYmICgwIDw9IHRoaXMub3BhY2l0eSAmJiB0aGlzLm9wYWNpdHkgPD0gMSk7XG4gIH0sXG4gIGhleDogcmdiX2Zvcm1hdEhleCwgLy8gRGVwcmVjYXRlZCEgVXNlIGNvbG9yLmZvcm1hdEhleC5cbiAgZm9ybWF0SGV4OiByZ2JfZm9ybWF0SGV4LFxuICBmb3JtYXRIZXg4OiByZ2JfZm9ybWF0SGV4OCxcbiAgZm9ybWF0UmdiOiByZ2JfZm9ybWF0UmdiLFxuICB0b1N0cmluZzogcmdiX2Zvcm1hdFJnYlxufSkpO1xuXG5mdW5jdGlvbiByZ2JfZm9ybWF0SGV4KCkge1xuICByZXR1cm4gYCMke2hleCh0aGlzLnIpfSR7aGV4KHRoaXMuZyl9JHtoZXgodGhpcy5iKX1gO1xufVxuXG5mdW5jdGlvbiByZ2JfZm9ybWF0SGV4OCgpIHtcbiAgcmV0dXJuIGAjJHtoZXgodGhpcy5yKX0ke2hleCh0aGlzLmcpfSR7aGV4KHRoaXMuYil9JHtoZXgoKGlzTmFOKHRoaXMub3BhY2l0eSkgPyAxIDogdGhpcy5vcGFjaXR5KSAqIDI1NSl9YDtcbn1cblxuZnVuY3Rpb24gcmdiX2Zvcm1hdFJnYigpIHtcbiAgY29uc3QgYSA9IGNsYW1wYSh0aGlzLm9wYWNpdHkpO1xuICByZXR1cm4gYCR7YSA9PT0gMSA/IFwicmdiKFwiIDogXCJyZ2JhKFwifSR7Y2xhbXBpKHRoaXMucil9LCAke2NsYW1waSh0aGlzLmcpfSwgJHtjbGFtcGkodGhpcy5iKX0ke2EgPT09IDEgPyBcIilcIiA6IGAsICR7YX0pYH1gO1xufVxuXG5mdW5jdGlvbiBjbGFtcGEob3BhY2l0eSkge1xuICByZXR1cm4gaXNOYU4ob3BhY2l0eSkgPyAxIDogTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgb3BhY2l0eSkpO1xufVxuXG5mdW5jdGlvbiBjbGFtcGkodmFsdWUpIHtcbiAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgTWF0aC5yb3VuZCh2YWx1ZSkgfHwgMCkpO1xufVxuXG5mdW5jdGlvbiBoZXgodmFsdWUpIHtcbiAgdmFsdWUgPSBjbGFtcGkodmFsdWUpO1xuICByZXR1cm4gKHZhbHVlIDwgMTYgPyBcIjBcIiA6IFwiXCIpICsgdmFsdWUudG9TdHJpbmcoMTYpO1xufVxuXG5mdW5jdGlvbiBoc2xhKGgsIHMsIGwsIGEpIHtcbiAgaWYgKGEgPD0gMCkgaCA9IHMgPSBsID0gTmFOO1xuICBlbHNlIGlmIChsIDw9IDAgfHwgbCA+PSAxKSBoID0gcyA9IE5hTjtcbiAgZWxzZSBpZiAocyA8PSAwKSBoID0gTmFOO1xuICByZXR1cm4gbmV3IEhzbChoLCBzLCBsLCBhKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhzbENvbnZlcnQobykge1xuICBpZiAobyBpbnN0YW5jZW9mIEhzbCkgcmV0dXJuIG5ldyBIc2woby5oLCBvLnMsIG8ubCwgby5vcGFjaXR5KTtcbiAgaWYgKCEobyBpbnN0YW5jZW9mIENvbG9yKSkgbyA9IGNvbG9yKG8pO1xuICBpZiAoIW8pIHJldHVybiBuZXcgSHNsO1xuICBpZiAobyBpbnN0YW5jZW9mIEhzbCkgcmV0dXJuIG87XG4gIG8gPSBvLnJnYigpO1xuICB2YXIgciA9IG8uciAvIDI1NSxcbiAgICAgIGcgPSBvLmcgLyAyNTUsXG4gICAgICBiID0gby5iIC8gMjU1LFxuICAgICAgbWluID0gTWF0aC5taW4ociwgZywgYiksXG4gICAgICBtYXggPSBNYXRoLm1heChyLCBnLCBiKSxcbiAgICAgIGggPSBOYU4sXG4gICAgICBzID0gbWF4IC0gbWluLFxuICAgICAgbCA9IChtYXggKyBtaW4pIC8gMjtcbiAgaWYgKHMpIHtcbiAgICBpZiAociA9PT0gbWF4KSBoID0gKGcgLSBiKSAvIHMgKyAoZyA8IGIpICogNjtcbiAgICBlbHNlIGlmIChnID09PSBtYXgpIGggPSAoYiAtIHIpIC8gcyArIDI7XG4gICAgZWxzZSBoID0gKHIgLSBnKSAvIHMgKyA0O1xuICAgIHMgLz0gbCA8IDAuNSA/IG1heCArIG1pbiA6IDIgLSBtYXggLSBtaW47XG4gICAgaCAqPSA2MDtcbiAgfSBlbHNlIHtcbiAgICBzID0gbCA+IDAgJiYgbCA8IDEgPyAwIDogaDtcbiAgfVxuICByZXR1cm4gbmV3IEhzbChoLCBzLCBsLCBvLm9wYWNpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaHNsKGgsIHMsIGwsIG9wYWNpdHkpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyBoc2xDb252ZXJ0KGgpIDogbmV3IEhzbChoLCBzLCBsLCBvcGFjaXR5ID09IG51bGwgPyAxIDogb3BhY2l0eSk7XG59XG5cbmZ1bmN0aW9uIEhzbChoLCBzLCBsLCBvcGFjaXR5KSB7XG4gIHRoaXMuaCA9ICtoO1xuICB0aGlzLnMgPSArcztcbiAgdGhpcy5sID0gK2w7XG4gIHRoaXMub3BhY2l0eSA9ICtvcGFjaXR5O1xufVxuXG5kZWZpbmUoSHNsLCBoc2wsIGV4dGVuZChDb2xvciwge1xuICBicmlnaHRlcihrKSB7XG4gICAgayA9IGsgPT0gbnVsbCA/IGJyaWdodGVyIDogTWF0aC5wb3coYnJpZ2h0ZXIsIGspO1xuICAgIHJldHVybiBuZXcgSHNsKHRoaXMuaCwgdGhpcy5zLCB0aGlzLmwgKiBrLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICBkYXJrZXIoaykge1xuICAgIGsgPSBrID09IG51bGwgPyBkYXJrZXIgOiBNYXRoLnBvdyhkYXJrZXIsIGspO1xuICAgIHJldHVybiBuZXcgSHNsKHRoaXMuaCwgdGhpcy5zLCB0aGlzLmwgKiBrLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICByZ2IoKSB7XG4gICAgdmFyIGggPSB0aGlzLmggJSAzNjAgKyAodGhpcy5oIDwgMCkgKiAzNjAsXG4gICAgICAgIHMgPSBpc05hTihoKSB8fCBpc05hTih0aGlzLnMpID8gMCA6IHRoaXMucyxcbiAgICAgICAgbCA9IHRoaXMubCxcbiAgICAgICAgbTIgPSBsICsgKGwgPCAwLjUgPyBsIDogMSAtIGwpICogcyxcbiAgICAgICAgbTEgPSAyICogbCAtIG0yO1xuICAgIHJldHVybiBuZXcgUmdiKFxuICAgICAgaHNsMnJnYihoID49IDI0MCA/IGggLSAyNDAgOiBoICsgMTIwLCBtMSwgbTIpLFxuICAgICAgaHNsMnJnYihoLCBtMSwgbTIpLFxuICAgICAgaHNsMnJnYihoIDwgMTIwID8gaCArIDI0MCA6IGggLSAxMjAsIG0xLCBtMiksXG4gICAgICB0aGlzLm9wYWNpdHlcbiAgICApO1xuICB9LFxuICBjbGFtcCgpIHtcbiAgICByZXR1cm4gbmV3IEhzbChjbGFtcGgodGhpcy5oKSwgY2xhbXB0KHRoaXMucyksIGNsYW1wdCh0aGlzLmwpLCBjbGFtcGEodGhpcy5vcGFjaXR5KSk7XG4gIH0sXG4gIGRpc3BsYXlhYmxlKCkge1xuICAgIHJldHVybiAoMCA8PSB0aGlzLnMgJiYgdGhpcy5zIDw9IDEgfHwgaXNOYU4odGhpcy5zKSlcbiAgICAgICAgJiYgKDAgPD0gdGhpcy5sICYmIHRoaXMubCA8PSAxKVxuICAgICAgICAmJiAoMCA8PSB0aGlzLm9wYWNpdHkgJiYgdGhpcy5vcGFjaXR5IDw9IDEpO1xuICB9LFxuICBmb3JtYXRIc2woKSB7XG4gICAgY29uc3QgYSA9IGNsYW1wYSh0aGlzLm9wYWNpdHkpO1xuICAgIHJldHVybiBgJHthID09PSAxID8gXCJoc2woXCIgOiBcImhzbGEoXCJ9JHtjbGFtcGgodGhpcy5oKX0sICR7Y2xhbXB0KHRoaXMucykgKiAxMDB9JSwgJHtjbGFtcHQodGhpcy5sKSAqIDEwMH0lJHthID09PSAxID8gXCIpXCIgOiBgLCAke2F9KWB9YDtcbiAgfVxufSkpO1xuXG5mdW5jdGlvbiBjbGFtcGgodmFsdWUpIHtcbiAgdmFsdWUgPSAodmFsdWUgfHwgMCkgJSAzNjA7XG4gIHJldHVybiB2YWx1ZSA8IDAgPyB2YWx1ZSArIDM2MCA6IHZhbHVlO1xufVxuXG5mdW5jdGlvbiBjbGFtcHQodmFsdWUpIHtcbiAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHZhbHVlIHx8IDApKTtcbn1cblxuLyogRnJvbSBGdkQgMTMuMzcsIENTUyBDb2xvciBNb2R1bGUgTGV2ZWwgMyAqL1xuZnVuY3Rpb24gaHNsMnJnYihoLCBtMSwgbTIpIHtcbiAgcmV0dXJuIChoIDwgNjAgPyBtMSArIChtMiAtIG0xKSAqIGggLyA2MFxuICAgICAgOiBoIDwgMTgwID8gbTJcbiAgICAgIDogaCA8IDI0MCA/IG0xICsgKG0yIC0gbTEpICogKDI0MCAtIGgpIC8gNjBcbiAgICAgIDogbTEpICogMjU1O1xufVxuIiwgImV4cG9ydCBmdW5jdGlvbiBiYXNpcyh0MSwgdjAsIHYxLCB2MiwgdjMpIHtcbiAgdmFyIHQyID0gdDEgKiB0MSwgdDMgPSB0MiAqIHQxO1xuICByZXR1cm4gKCgxIC0gMyAqIHQxICsgMyAqIHQyIC0gdDMpICogdjBcbiAgICAgICsgKDQgLSA2ICogdDIgKyAzICogdDMpICogdjFcbiAgICAgICsgKDEgKyAzICogdDEgKyAzICogdDIgLSAzICogdDMpICogdjJcbiAgICAgICsgdDMgKiB2MykgLyA2O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZXMpIHtcbiAgdmFyIG4gPSB2YWx1ZXMubGVuZ3RoIC0gMTtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgaSA9IHQgPD0gMCA/ICh0ID0gMCkgOiB0ID49IDEgPyAodCA9IDEsIG4gLSAxKSA6IE1hdGguZmxvb3IodCAqIG4pLFxuICAgICAgICB2MSA9IHZhbHVlc1tpXSxcbiAgICAgICAgdjIgPSB2YWx1ZXNbaSArIDFdLFxuICAgICAgICB2MCA9IGkgPiAwID8gdmFsdWVzW2kgLSAxXSA6IDIgKiB2MSAtIHYyLFxuICAgICAgICB2MyA9IGkgPCBuIC0gMSA/IHZhbHVlc1tpICsgMl0gOiAyICogdjIgLSB2MTtcbiAgICByZXR1cm4gYmFzaXMoKHQgLSBpIC8gbikgKiBuLCB2MCwgdjEsIHYyLCB2Myk7XG4gIH07XG59XG4iLCAiaW1wb3J0IHtiYXNpc30gZnJvbSBcIi4vYmFzaXMuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWVzKSB7XG4gIHZhciBuID0gdmFsdWVzLmxlbmd0aDtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgaSA9IE1hdGguZmxvb3IoKCh0ICU9IDEpIDwgMCA/ICsrdCA6IHQpICogbiksXG4gICAgICAgIHYwID0gdmFsdWVzWyhpICsgbiAtIDEpICUgbl0sXG4gICAgICAgIHYxID0gdmFsdWVzW2kgJSBuXSxcbiAgICAgICAgdjIgPSB2YWx1ZXNbKGkgKyAxKSAlIG5dLFxuICAgICAgICB2MyA9IHZhbHVlc1soaSArIDIpICUgbl07XG4gICAgcmV0dXJuIGJhc2lzKCh0IC0gaSAvIG4pICogbiwgdjAsIHYxLCB2MiwgdjMpO1xuICB9O1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IHggPT4gKCkgPT4geDtcbiIsICJpbXBvcnQgY29uc3RhbnQgZnJvbSBcIi4vY29uc3RhbnQuanNcIjtcblxuZnVuY3Rpb24gbGluZWFyKGEsIGQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gYSArIHQgKiBkO1xuICB9O1xufVxuXG5mdW5jdGlvbiBleHBvbmVudGlhbChhLCBiLCB5KSB7XG4gIHJldHVybiBhID0gTWF0aC5wb3coYSwgeSksIGIgPSBNYXRoLnBvdyhiLCB5KSAtIGEsIHkgPSAxIC8geSwgZnVuY3Rpb24odCkge1xuICAgIHJldHVybiBNYXRoLnBvdyhhICsgdCAqIGIsIHkpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaHVlKGEsIGIpIHtcbiAgdmFyIGQgPSBiIC0gYTtcbiAgcmV0dXJuIGQgPyBsaW5lYXIoYSwgZCA+IDE4MCB8fCBkIDwgLTE4MCA/IGQgLSAzNjAgKiBNYXRoLnJvdW5kKGQgLyAzNjApIDogZCkgOiBjb25zdGFudChpc05hTihhKSA/IGIgOiBhKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdhbW1hKHkpIHtcbiAgcmV0dXJuICh5ID0gK3kpID09PSAxID8gbm9nYW1tYSA6IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gYiAtIGEgPyBleHBvbmVudGlhbChhLCBiLCB5KSA6IGNvbnN0YW50KGlzTmFOKGEpID8gYiA6IGEpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBub2dhbW1hKGEsIGIpIHtcbiAgdmFyIGQgPSBiIC0gYTtcbiAgcmV0dXJuIGQgPyBsaW5lYXIoYSwgZCkgOiBjb25zdGFudChpc05hTihhKSA/IGIgOiBhKTtcbn1cbiIsICJpbXBvcnQge3JnYiBhcyBjb2xvclJnYn0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQgYmFzaXMgZnJvbSBcIi4vYmFzaXMuanNcIjtcbmltcG9ydCBiYXNpc0Nsb3NlZCBmcm9tIFwiLi9iYXNpc0Nsb3NlZC5qc1wiO1xuaW1wb3J0IG5vZ2FtbWEsIHtnYW1tYX0gZnJvbSBcIi4vY29sb3IuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uIHJnYkdhbW1hKHkpIHtcbiAgdmFyIGNvbG9yID0gZ2FtbWEoeSk7XG5cbiAgZnVuY3Rpb24gcmdiKHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgciA9IGNvbG9yKChzdGFydCA9IGNvbG9yUmdiKHN0YXJ0KSkuciwgKGVuZCA9IGNvbG9yUmdiKGVuZCkpLnIpLFxuICAgICAgICBnID0gY29sb3Ioc3RhcnQuZywgZW5kLmcpLFxuICAgICAgICBiID0gY29sb3Ioc3RhcnQuYiwgZW5kLmIpLFxuICAgICAgICBvcGFjaXR5ID0gbm9nYW1tYShzdGFydC5vcGFjaXR5LCBlbmQub3BhY2l0eSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIHN0YXJ0LnIgPSByKHQpO1xuICAgICAgc3RhcnQuZyA9IGcodCk7XG4gICAgICBzdGFydC5iID0gYih0KTtcbiAgICAgIHN0YXJ0Lm9wYWNpdHkgPSBvcGFjaXR5KHQpO1xuICAgICAgcmV0dXJuIHN0YXJ0ICsgXCJcIjtcbiAgICB9O1xuICB9XG5cbiAgcmdiLmdhbW1hID0gcmdiR2FtbWE7XG5cbiAgcmV0dXJuIHJnYjtcbn0pKDEpO1xuXG5mdW5jdGlvbiByZ2JTcGxpbmUoc3BsaW5lKSB7XG4gIHJldHVybiBmdW5jdGlvbihjb2xvcnMpIHtcbiAgICB2YXIgbiA9IGNvbG9ycy5sZW5ndGgsXG4gICAgICAgIHIgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIGcgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIGIgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIGksIGNvbG9yO1xuICAgIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGNvbG9yID0gY29sb3JSZ2IoY29sb3JzW2ldKTtcbiAgICAgIHJbaV0gPSBjb2xvci5yIHx8IDA7XG4gICAgICBnW2ldID0gY29sb3IuZyB8fCAwO1xuICAgICAgYltpXSA9IGNvbG9yLmIgfHwgMDtcbiAgICB9XG4gICAgciA9IHNwbGluZShyKTtcbiAgICBnID0gc3BsaW5lKGcpO1xuICAgIGIgPSBzcGxpbmUoYik7XG4gICAgY29sb3Iub3BhY2l0eSA9IDE7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIGNvbG9yLnIgPSByKHQpO1xuICAgICAgY29sb3IuZyA9IGcodCk7XG4gICAgICBjb2xvci5iID0gYih0KTtcbiAgICAgIHJldHVybiBjb2xvciArIFwiXCI7XG4gICAgfTtcbiAgfTtcbn1cblxuZXhwb3J0IHZhciByZ2JCYXNpcyA9IHJnYlNwbGluZShiYXNpcyk7XG5leHBvcnQgdmFyIHJnYkJhc2lzQ2xvc2VkID0gcmdiU3BsaW5lKGJhc2lzQ2xvc2VkKTtcbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihhLCBiKSB7XG4gIGlmICghYikgYiA9IFtdO1xuICB2YXIgbiA9IGEgPyBNYXRoLm1pbihiLmxlbmd0aCwgYS5sZW5ndGgpIDogMCxcbiAgICAgIGMgPSBiLnNsaWNlKCksXG4gICAgICBpO1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIGNbaV0gPSBhW2ldICogKDEgLSB0KSArIGJbaV0gKiB0O1xuICAgIHJldHVybiBjO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOdW1iZXJBcnJheSh4KSB7XG4gIHJldHVybiBBcnJheUJ1ZmZlci5pc1ZpZXcoeCkgJiYgISh4IGluc3RhbmNlb2YgRGF0YVZpZXcpO1xufVxuIiwgImltcG9ydCB2YWx1ZSBmcm9tIFwiLi92YWx1ZS5qc1wiO1xuaW1wb3J0IG51bWJlckFycmF5LCB7aXNOdW1iZXJBcnJheX0gZnJvbSBcIi4vbnVtYmVyQXJyYXkuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICByZXR1cm4gKGlzTnVtYmVyQXJyYXkoYikgPyBudW1iZXJBcnJheSA6IGdlbmVyaWNBcnJheSkoYSwgYik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmljQXJyYXkoYSwgYikge1xuICB2YXIgbmIgPSBiID8gYi5sZW5ndGggOiAwLFxuICAgICAgbmEgPSBhID8gTWF0aC5taW4obmIsIGEubGVuZ3RoKSA6IDAsXG4gICAgICB4ID0gbmV3IEFycmF5KG5hKSxcbiAgICAgIGMgPSBuZXcgQXJyYXkobmIpLFxuICAgICAgaTtcblxuICBmb3IgKGkgPSAwOyBpIDwgbmE7ICsraSkgeFtpXSA9IHZhbHVlKGFbaV0sIGJbaV0pO1xuICBmb3IgKDsgaSA8IG5iOyArK2kpIGNbaV0gPSBiW2ldO1xuXG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgZm9yIChpID0gMDsgaSA8IG5hOyArK2kpIGNbaV0gPSB4W2ldKHQpO1xuICAgIHJldHVybiBjO1xuICB9O1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgdmFyIGQgPSBuZXcgRGF0ZTtcbiAgcmV0dXJuIGEgPSArYSwgYiA9ICtiLCBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIGQuc2V0VGltZShhICogKDEgLSB0KSArIGIgKiB0KSwgZDtcbiAgfTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihhLCBiKSB7XG4gIHJldHVybiBhID0gK2EsIGIgPSArYiwgZnVuY3Rpb24odCkge1xuICAgIHJldHVybiBhICogKDEgLSB0KSArIGIgKiB0O1xuICB9O1xufVxuIiwgImltcG9ydCB2YWx1ZSBmcm9tIFwiLi92YWx1ZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihhLCBiKSB7XG4gIHZhciBpID0ge30sXG4gICAgICBjID0ge30sXG4gICAgICBrO1xuXG4gIGlmIChhID09PSBudWxsIHx8IHR5cGVvZiBhICE9PSBcIm9iamVjdFwiKSBhID0ge307XG4gIGlmIChiID09PSBudWxsIHx8IHR5cGVvZiBiICE9PSBcIm9iamVjdFwiKSBiID0ge307XG5cbiAgZm9yIChrIGluIGIpIHtcbiAgICBpZiAoayBpbiBhKSB7XG4gICAgICBpW2tdID0gdmFsdWUoYVtrXSwgYltrXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNba10gPSBiW2tdO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgZm9yIChrIGluIGkpIGNba10gPSBpW2tdKHQpO1xuICAgIHJldHVybiBjO1xuICB9O1xufVxuIiwgImltcG9ydCBudW1iZXIgZnJvbSBcIi4vbnVtYmVyLmpzXCI7XG5cbnZhciByZUEgPSAvWy0rXT8oPzpcXGQrXFwuP1xcZCp8XFwuP1xcZCspKD86W2VFXVstK10/XFxkKyk/L2csXG4gICAgcmVCID0gbmV3IFJlZ0V4cChyZUEuc291cmNlLCBcImdcIik7XG5cbmZ1bmN0aW9uIHplcm8oYikge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGI7XG4gIH07XG59XG5cbmZ1bmN0aW9uIG9uZShiKSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIGIodCkgKyBcIlwiO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihhLCBiKSB7XG4gIHZhciBiaSA9IHJlQS5sYXN0SW5kZXggPSByZUIubGFzdEluZGV4ID0gMCwgLy8gc2NhbiBpbmRleCBmb3IgbmV4dCBudW1iZXIgaW4gYlxuICAgICAgYW0sIC8vIGN1cnJlbnQgbWF0Y2ggaW4gYVxuICAgICAgYm0sIC8vIGN1cnJlbnQgbWF0Y2ggaW4gYlxuICAgICAgYnMsIC8vIHN0cmluZyBwcmVjZWRpbmcgY3VycmVudCBudW1iZXIgaW4gYiwgaWYgYW55XG4gICAgICBpID0gLTEsIC8vIGluZGV4IGluIHNcbiAgICAgIHMgPSBbXSwgLy8gc3RyaW5nIGNvbnN0YW50cyBhbmQgcGxhY2Vob2xkZXJzXG4gICAgICBxID0gW107IC8vIG51bWJlciBpbnRlcnBvbGF0b3JzXG5cbiAgLy8gQ29lcmNlIGlucHV0cyB0byBzdHJpbmdzLlxuICBhID0gYSArIFwiXCIsIGIgPSBiICsgXCJcIjtcblxuICAvLyBJbnRlcnBvbGF0ZSBwYWlycyBvZiBudW1iZXJzIGluIGEgJiBiLlxuICB3aGlsZSAoKGFtID0gcmVBLmV4ZWMoYSkpXG4gICAgICAmJiAoYm0gPSByZUIuZXhlYyhiKSkpIHtcbiAgICBpZiAoKGJzID0gYm0uaW5kZXgpID4gYmkpIHsgLy8gYSBzdHJpbmcgcHJlY2VkZXMgdGhlIG5leHQgbnVtYmVyIGluIGJcbiAgICAgIGJzID0gYi5zbGljZShiaSwgYnMpO1xuICAgICAgaWYgKHNbaV0pIHNbaV0gKz0gYnM7IC8vIGNvYWxlc2NlIHdpdGggcHJldmlvdXMgc3RyaW5nXG4gICAgICBlbHNlIHNbKytpXSA9IGJzO1xuICAgIH1cbiAgICBpZiAoKGFtID0gYW1bMF0pID09PSAoYm0gPSBibVswXSkpIHsgLy8gbnVtYmVycyBpbiBhICYgYiBtYXRjaFxuICAgICAgaWYgKHNbaV0pIHNbaV0gKz0gYm07IC8vIGNvYWxlc2NlIHdpdGggcHJldmlvdXMgc3RyaW5nXG4gICAgICBlbHNlIHNbKytpXSA9IGJtO1xuICAgIH0gZWxzZSB7IC8vIGludGVycG9sYXRlIG5vbi1tYXRjaGluZyBudW1iZXJzXG4gICAgICBzWysraV0gPSBudWxsO1xuICAgICAgcS5wdXNoKHtpOiBpLCB4OiBudW1iZXIoYW0sIGJtKX0pO1xuICAgIH1cbiAgICBiaSA9IHJlQi5sYXN0SW5kZXg7XG4gIH1cblxuICAvLyBBZGQgcmVtYWlucyBvZiBiLlxuICBpZiAoYmkgPCBiLmxlbmd0aCkge1xuICAgIGJzID0gYi5zbGljZShiaSk7XG4gICAgaWYgKHNbaV0pIHNbaV0gKz0gYnM7IC8vIGNvYWxlc2NlIHdpdGggcHJldmlvdXMgc3RyaW5nXG4gICAgZWxzZSBzWysraV0gPSBicztcbiAgfVxuXG4gIC8vIFNwZWNpYWwgb3B0aW1pemF0aW9uIGZvciBvbmx5IGEgc2luZ2xlIG1hdGNoLlxuICAvLyBPdGhlcndpc2UsIGludGVycG9sYXRlIGVhY2ggb2YgdGhlIG51bWJlcnMgYW5kIHJlam9pbiB0aGUgc3RyaW5nLlxuICByZXR1cm4gcy5sZW5ndGggPCAyID8gKHFbMF1cbiAgICAgID8gb25lKHFbMF0ueClcbiAgICAgIDogemVybyhiKSlcbiAgICAgIDogKGIgPSBxLmxlbmd0aCwgZnVuY3Rpb24odCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBvOyBpIDwgYjsgKytpKSBzWyhvID0gcVtpXSkuaV0gPSBvLngodCk7XG4gICAgICAgICAgcmV0dXJuIHMuam9pbihcIlwiKTtcbiAgICAgICAgfSk7XG59XG4iLCAiaW1wb3J0IHtjb2xvcn0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQgcmdiIGZyb20gXCIuL3JnYi5qc1wiO1xuaW1wb3J0IHtnZW5lcmljQXJyYXl9IGZyb20gXCIuL2FycmF5LmpzXCI7XG5pbXBvcnQgZGF0ZSBmcm9tIFwiLi9kYXRlLmpzXCI7XG5pbXBvcnQgbnVtYmVyIGZyb20gXCIuL251bWJlci5qc1wiO1xuaW1wb3J0IG9iamVjdCBmcm9tIFwiLi9vYmplY3QuanNcIjtcbmltcG9ydCBzdHJpbmcgZnJvbSBcIi4vc3RyaW5nLmpzXCI7XG5pbXBvcnQgY29uc3RhbnQgZnJvbSBcIi4vY29uc3RhbnQuanNcIjtcbmltcG9ydCBudW1iZXJBcnJheSwge2lzTnVtYmVyQXJyYXl9IGZyb20gXCIuL251bWJlckFycmF5LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgdmFyIHQgPSB0eXBlb2YgYiwgYztcbiAgcmV0dXJuIGIgPT0gbnVsbCB8fCB0ID09PSBcImJvb2xlYW5cIiA/IGNvbnN0YW50KGIpXG4gICAgICA6ICh0ID09PSBcIm51bWJlclwiID8gbnVtYmVyXG4gICAgICA6IHQgPT09IFwic3RyaW5nXCIgPyAoKGMgPSBjb2xvcihiKSkgPyAoYiA9IGMsIHJnYikgOiBzdHJpbmcpXG4gICAgICA6IGIgaW5zdGFuY2VvZiBjb2xvciA/IHJnYlxuICAgICAgOiBiIGluc3RhbmNlb2YgRGF0ZSA/IGRhdGVcbiAgICAgIDogaXNOdW1iZXJBcnJheShiKSA/IG51bWJlckFycmF5XG4gICAgICA6IEFycmF5LmlzQXJyYXkoYikgPyBnZW5lcmljQXJyYXlcbiAgICAgIDogdHlwZW9mIGIudmFsdWVPZiAhPT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBiLnRvU3RyaW5nICE9PSBcImZ1bmN0aW9uXCIgfHwgaXNOYU4oYikgPyBvYmplY3RcbiAgICAgIDogbnVtYmVyKShhLCBiKTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihhLCBiKSB7XG4gIHJldHVybiBhID0gK2EsIGIgPSArYiwgZnVuY3Rpb24odCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKGEgKiAoMSAtIHQpICsgYiAqIHQpO1xuICB9O1xufVxuIiwgInZhciBkZWdyZWVzID0gMTgwIC8gTWF0aC5QSTtcblxuZXhwb3J0IHZhciBpZGVudGl0eSA9IHtcbiAgdHJhbnNsYXRlWDogMCxcbiAgdHJhbnNsYXRlWTogMCxcbiAgcm90YXRlOiAwLFxuICBza2V3WDogMCxcbiAgc2NhbGVYOiAxLFxuICBzY2FsZVk6IDFcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgdmFyIHNjYWxlWCwgc2NhbGVZLCBza2V3WDtcbiAgaWYgKHNjYWxlWCA9IE1hdGguc3FydChhICogYSArIGIgKiBiKSkgYSAvPSBzY2FsZVgsIGIgLz0gc2NhbGVYO1xuICBpZiAoc2tld1ggPSBhICogYyArIGIgKiBkKSBjIC09IGEgKiBza2V3WCwgZCAtPSBiICogc2tld1g7XG4gIGlmIChzY2FsZVkgPSBNYXRoLnNxcnQoYyAqIGMgKyBkICogZCkpIGMgLz0gc2NhbGVZLCBkIC89IHNjYWxlWSwgc2tld1ggLz0gc2NhbGVZO1xuICBpZiAoYSAqIGQgPCBiICogYykgYSA9IC1hLCBiID0gLWIsIHNrZXdYID0gLXNrZXdYLCBzY2FsZVggPSAtc2NhbGVYO1xuICByZXR1cm4ge1xuICAgIHRyYW5zbGF0ZVg6IGUsXG4gICAgdHJhbnNsYXRlWTogZixcbiAgICByb3RhdGU6IE1hdGguYXRhbjIoYiwgYSkgKiBkZWdyZWVzLFxuICAgIHNrZXdYOiBNYXRoLmF0YW4oc2tld1gpICogZGVncmVlcyxcbiAgICBzY2FsZVg6IHNjYWxlWCxcbiAgICBzY2FsZVk6IHNjYWxlWVxuICB9O1xufVxuIiwgImltcG9ydCBkZWNvbXBvc2UsIHtpZGVudGl0eX0gZnJvbSBcIi4vZGVjb21wb3NlLmpzXCI7XG5cbnZhciBzdmdOb2RlO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ3NzKHZhbHVlKSB7XG4gIGNvbnN0IG0gPSBuZXcgKHR5cGVvZiBET01NYXRyaXggPT09IFwiZnVuY3Rpb25cIiA/IERPTU1hdHJpeCA6IFdlYktpdENTU01hdHJpeCkodmFsdWUgKyBcIlwiKTtcbiAgcmV0dXJuIG0uaXNJZGVudGl0eSA/IGlkZW50aXR5IDogZGVjb21wb3NlKG0uYSwgbS5iLCBtLmMsIG0uZCwgbS5lLCBtLmYpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTdmcodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiBpZGVudGl0eTtcbiAgaWYgKCFzdmdOb2RlKSBzdmdOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJnXCIpO1xuICBzdmdOb2RlLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLCB2YWx1ZSk7XG4gIGlmICghKHZhbHVlID0gc3ZnTm9kZS50cmFuc2Zvcm0uYmFzZVZhbC5jb25zb2xpZGF0ZSgpKSkgcmV0dXJuIGlkZW50aXR5O1xuICB2YWx1ZSA9IHZhbHVlLm1hdHJpeDtcbiAgcmV0dXJuIGRlY29tcG9zZSh2YWx1ZS5hLCB2YWx1ZS5iLCB2YWx1ZS5jLCB2YWx1ZS5kLCB2YWx1ZS5lLCB2YWx1ZS5mKTtcbn1cbiIsICJpbXBvcnQgbnVtYmVyIGZyb20gXCIuLi9udW1iZXIuanNcIjtcbmltcG9ydCB7cGFyc2VDc3MsIHBhcnNlU3ZnfSBmcm9tIFwiLi9wYXJzZS5qc1wiO1xuXG5mdW5jdGlvbiBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZSwgcHhDb21tYSwgcHhQYXJlbiwgZGVnUGFyZW4pIHtcblxuICBmdW5jdGlvbiBwb3Aocykge1xuICAgIHJldHVybiBzLmxlbmd0aCA/IHMucG9wKCkgKyBcIiBcIiA6IFwiXCI7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFuc2xhdGUoeGEsIHlhLCB4YiwgeWIsIHMsIHEpIHtcbiAgICBpZiAoeGEgIT09IHhiIHx8IHlhICE9PSB5Yikge1xuICAgICAgdmFyIGkgPSBzLnB1c2goXCJ0cmFuc2xhdGUoXCIsIG51bGwsIHB4Q29tbWEsIG51bGwsIHB4UGFyZW4pO1xuICAgICAgcS5wdXNoKHtpOiBpIC0gNCwgeDogbnVtYmVyKHhhLCB4Yil9LCB7aTogaSAtIDIsIHg6IG51bWJlcih5YSwgeWIpfSk7XG4gICAgfSBlbHNlIGlmICh4YiB8fCB5Yikge1xuICAgICAgcy5wdXNoKFwidHJhbnNsYXRlKFwiICsgeGIgKyBweENvbW1hICsgeWIgKyBweFBhcmVuKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByb3RhdGUoYSwgYiwgcywgcSkge1xuICAgIGlmIChhICE9PSBiKSB7XG4gICAgICBpZiAoYSAtIGIgPiAxODApIGIgKz0gMzYwOyBlbHNlIGlmIChiIC0gYSA+IDE4MCkgYSArPSAzNjA7IC8vIHNob3J0ZXN0IHBhdGhcbiAgICAgIHEucHVzaCh7aTogcy5wdXNoKHBvcChzKSArIFwicm90YXRlKFwiLCBudWxsLCBkZWdQYXJlbikgLSAyLCB4OiBudW1iZXIoYSwgYil9KTtcbiAgICB9IGVsc2UgaWYgKGIpIHtcbiAgICAgIHMucHVzaChwb3AocykgKyBcInJvdGF0ZShcIiArIGIgKyBkZWdQYXJlbik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2tld1goYSwgYiwgcywgcSkge1xuICAgIGlmIChhICE9PSBiKSB7XG4gICAgICBxLnB1c2goe2k6IHMucHVzaChwb3AocykgKyBcInNrZXdYKFwiLCBudWxsLCBkZWdQYXJlbikgLSAyLCB4OiBudW1iZXIoYSwgYil9KTtcbiAgICB9IGVsc2UgaWYgKGIpIHtcbiAgICAgIHMucHVzaChwb3AocykgKyBcInNrZXdYKFwiICsgYiArIGRlZ1BhcmVuKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzY2FsZSh4YSwgeWEsIHhiLCB5YiwgcywgcSkge1xuICAgIGlmICh4YSAhPT0geGIgfHwgeWEgIT09IHliKSB7XG4gICAgICB2YXIgaSA9IHMucHVzaChwb3AocykgKyBcInNjYWxlKFwiLCBudWxsLCBcIixcIiwgbnVsbCwgXCIpXCIpO1xuICAgICAgcS5wdXNoKHtpOiBpIC0gNCwgeDogbnVtYmVyKHhhLCB4Yil9LCB7aTogaSAtIDIsIHg6IG51bWJlcih5YSwgeWIpfSk7XG4gICAgfSBlbHNlIGlmICh4YiAhPT0gMSB8fCB5YiAhPT0gMSkge1xuICAgICAgcy5wdXNoKHBvcChzKSArIFwic2NhbGUoXCIgKyB4YiArIFwiLFwiICsgeWIgKyBcIilcIik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICB2YXIgcyA9IFtdLCAvLyBzdHJpbmcgY29uc3RhbnRzIGFuZCBwbGFjZWhvbGRlcnNcbiAgICAgICAgcSA9IFtdOyAvLyBudW1iZXIgaW50ZXJwb2xhdG9yc1xuICAgIGEgPSBwYXJzZShhKSwgYiA9IHBhcnNlKGIpO1xuICAgIHRyYW5zbGF0ZShhLnRyYW5zbGF0ZVgsIGEudHJhbnNsYXRlWSwgYi50cmFuc2xhdGVYLCBiLnRyYW5zbGF0ZVksIHMsIHEpO1xuICAgIHJvdGF0ZShhLnJvdGF0ZSwgYi5yb3RhdGUsIHMsIHEpO1xuICAgIHNrZXdYKGEuc2tld1gsIGIuc2tld1gsIHMsIHEpO1xuICAgIHNjYWxlKGEuc2NhbGVYLCBhLnNjYWxlWSwgYi5zY2FsZVgsIGIuc2NhbGVZLCBzLCBxKTtcbiAgICBhID0gYiA9IG51bGw7IC8vIGdjXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIHZhciBpID0gLTEsIG4gPSBxLmxlbmd0aCwgbztcbiAgICAgIHdoaWxlICgrK2kgPCBuKSBzWyhvID0gcVtpXSkuaV0gPSBvLngodCk7XG4gICAgICByZXR1cm4gcy5qb2luKFwiXCIpO1xuICAgIH07XG4gIH07XG59XG5cbmV4cG9ydCB2YXIgaW50ZXJwb2xhdGVUcmFuc2Zvcm1Dc3MgPSBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZUNzcywgXCJweCwgXCIsIFwicHgpXCIsIFwiZGVnKVwiKTtcbmV4cG9ydCB2YXIgaW50ZXJwb2xhdGVUcmFuc2Zvcm1TdmcgPSBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZVN2ZywgXCIsIFwiLCBcIilcIiwgXCIpXCIpO1xuIiwgInZhciBmcmFtZSA9IDAsIC8vIGlzIGFuIGFuaW1hdGlvbiBmcmFtZSBwZW5kaW5nP1xuICAgIHRpbWVvdXQgPSAwLCAvLyBpcyBhIHRpbWVvdXQgcGVuZGluZz9cbiAgICBpbnRlcnZhbCA9IDAsIC8vIGFyZSBhbnkgdGltZXJzIGFjdGl2ZT9cbiAgICBwb2tlRGVsYXkgPSAxMDAwLCAvLyBob3cgZnJlcXVlbnRseSB3ZSBjaGVjayBmb3IgY2xvY2sgc2tld1xuICAgIHRhc2tIZWFkLFxuICAgIHRhc2tUYWlsLFxuICAgIGNsb2NrTGFzdCA9IDAsXG4gICAgY2xvY2tOb3cgPSAwLFxuICAgIGNsb2NrU2tldyA9IDAsXG4gICAgY2xvY2sgPSB0eXBlb2YgcGVyZm9ybWFuY2UgPT09IFwib2JqZWN0XCIgJiYgcGVyZm9ybWFuY2Uubm93ID8gcGVyZm9ybWFuY2UgOiBEYXRlLFxuICAgIHNldEZyYW1lID0gdHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIiAmJiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID8gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKHdpbmRvdykgOiBmdW5jdGlvbihmKSB7IHNldFRpbWVvdXQoZiwgMTcpOyB9O1xuXG5leHBvcnQgZnVuY3Rpb24gbm93KCkge1xuICByZXR1cm4gY2xvY2tOb3cgfHwgKHNldEZyYW1lKGNsZWFyTm93KSwgY2xvY2tOb3cgPSBjbG9jay5ub3coKSArIGNsb2NrU2tldyk7XG59XG5cbmZ1bmN0aW9uIGNsZWFyTm93KCkge1xuICBjbG9ja05vdyA9IDA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBUaW1lcigpIHtcbiAgdGhpcy5fY2FsbCA9XG4gIHRoaXMuX3RpbWUgPVxuICB0aGlzLl9uZXh0ID0gbnVsbDtcbn1cblxuVGltZXIucHJvdG90eXBlID0gdGltZXIucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogVGltZXIsXG4gIHJlc3RhcnQ6IGZ1bmN0aW9uKGNhbGxiYWNrLCBkZWxheSwgdGltZSkge1xuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcImNhbGxiYWNrIGlzIG5vdCBhIGZ1bmN0aW9uXCIpO1xuICAgIHRpbWUgPSAodGltZSA9PSBudWxsID8gbm93KCkgOiArdGltZSkgKyAoZGVsYXkgPT0gbnVsbCA/IDAgOiArZGVsYXkpO1xuICAgIGlmICghdGhpcy5fbmV4dCAmJiB0YXNrVGFpbCAhPT0gdGhpcykge1xuICAgICAgaWYgKHRhc2tUYWlsKSB0YXNrVGFpbC5fbmV4dCA9IHRoaXM7XG4gICAgICBlbHNlIHRhc2tIZWFkID0gdGhpcztcbiAgICAgIHRhc2tUYWlsID0gdGhpcztcbiAgICB9XG4gICAgdGhpcy5fY2FsbCA9IGNhbGxiYWNrO1xuICAgIHRoaXMuX3RpbWUgPSB0aW1lO1xuICAgIHNsZWVwKCk7XG4gIH0sXG4gIHN0b3A6IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9jYWxsKSB7XG4gICAgICB0aGlzLl9jYWxsID0gbnVsbDtcbiAgICAgIHRoaXMuX3RpbWUgPSBJbmZpbml0eTtcbiAgICAgIHNsZWVwKCk7XG4gICAgfVxuICB9XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gdGltZXIoY2FsbGJhY2ssIGRlbGF5LCB0aW1lKSB7XG4gIHZhciB0ID0gbmV3IFRpbWVyO1xuICB0LnJlc3RhcnQoY2FsbGJhY2ssIGRlbGF5LCB0aW1lKTtcbiAgcmV0dXJuIHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aW1lckZsdXNoKCkge1xuICBub3coKTsgLy8gR2V0IHRoZSBjdXJyZW50IHRpbWUsIGlmIG5vdCBhbHJlYWR5IHNldC5cbiAgKytmcmFtZTsgLy8gUHJldGVuZCB3ZVx1MjAxOXZlIHNldCBhbiBhbGFybSwgaWYgd2UgaGF2ZW5cdTIwMTl0IGFscmVhZHkuXG4gIHZhciB0ID0gdGFza0hlYWQsIGU7XG4gIHdoaWxlICh0KSB7XG4gICAgaWYgKChlID0gY2xvY2tOb3cgLSB0Ll90aW1lKSA+PSAwKSB0Ll9jYWxsLmNhbGwodW5kZWZpbmVkLCBlKTtcbiAgICB0ID0gdC5fbmV4dDtcbiAgfVxuICAtLWZyYW1lO1xufVxuXG5mdW5jdGlvbiB3YWtlKCkge1xuICBjbG9ja05vdyA9IChjbG9ja0xhc3QgPSBjbG9jay5ub3coKSkgKyBjbG9ja1NrZXc7XG4gIGZyYW1lID0gdGltZW91dCA9IDA7XG4gIHRyeSB7XG4gICAgdGltZXJGbHVzaCgpO1xuICB9IGZpbmFsbHkge1xuICAgIGZyYW1lID0gMDtcbiAgICBuYXAoKTtcbiAgICBjbG9ja05vdyA9IDA7XG4gIH1cbn1cblxuZnVuY3Rpb24gcG9rZSgpIHtcbiAgdmFyIG5vdyA9IGNsb2NrLm5vdygpLCBkZWxheSA9IG5vdyAtIGNsb2NrTGFzdDtcbiAgaWYgKGRlbGF5ID4gcG9rZURlbGF5KSBjbG9ja1NrZXcgLT0gZGVsYXksIGNsb2NrTGFzdCA9IG5vdztcbn1cblxuZnVuY3Rpb24gbmFwKCkge1xuICB2YXIgdDAsIHQxID0gdGFza0hlYWQsIHQyLCB0aW1lID0gSW5maW5pdHk7XG4gIHdoaWxlICh0MSkge1xuICAgIGlmICh0MS5fY2FsbCkge1xuICAgICAgaWYgKHRpbWUgPiB0MS5fdGltZSkgdGltZSA9IHQxLl90aW1lO1xuICAgICAgdDAgPSB0MSwgdDEgPSB0MS5fbmV4dDtcbiAgICB9IGVsc2Uge1xuICAgICAgdDIgPSB0MS5fbmV4dCwgdDEuX25leHQgPSBudWxsO1xuICAgICAgdDEgPSB0MCA/IHQwLl9uZXh0ID0gdDIgOiB0YXNrSGVhZCA9IHQyO1xuICAgIH1cbiAgfVxuICB0YXNrVGFpbCA9IHQwO1xuICBzbGVlcCh0aW1lKTtcbn1cblxuZnVuY3Rpb24gc2xlZXAodGltZSkge1xuICBpZiAoZnJhbWUpIHJldHVybjsgLy8gU29vbmVzdCBhbGFybSBhbHJlYWR5IHNldCwgb3Igd2lsbCBiZS5cbiAgaWYgKHRpbWVvdXQpIHRpbWVvdXQgPSBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gIHZhciBkZWxheSA9IHRpbWUgLSBjbG9ja05vdzsgLy8gU3RyaWN0bHkgbGVzcyB0aGFuIGlmIHdlIHJlY29tcHV0ZWQgY2xvY2tOb3cuXG4gIGlmIChkZWxheSA+IDI0KSB7XG4gICAgaWYgKHRpbWUgPCBJbmZpbml0eSkgdGltZW91dCA9IHNldFRpbWVvdXQod2FrZSwgdGltZSAtIGNsb2NrLm5vdygpIC0gY2xvY2tTa2V3KTtcbiAgICBpZiAoaW50ZXJ2YWwpIGludGVydmFsID0gY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFpbnRlcnZhbCkgY2xvY2tMYXN0ID0gY2xvY2subm93KCksIGludGVydmFsID0gc2V0SW50ZXJ2YWwocG9rZSwgcG9rZURlbGF5KTtcbiAgICBmcmFtZSA9IDEsIHNldEZyYW1lKHdha2UpO1xuICB9XG59XG4iLCAiaW1wb3J0IHtUaW1lcn0gZnJvbSBcIi4vdGltZXIuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oY2FsbGJhY2ssIGRlbGF5LCB0aW1lKSB7XG4gIHZhciB0ID0gbmV3IFRpbWVyO1xuICBkZWxheSA9IGRlbGF5ID09IG51bGwgPyAwIDogK2RlbGF5O1xuICB0LnJlc3RhcnQoZWxhcHNlZCA9PiB7XG4gICAgdC5zdG9wKCk7XG4gICAgY2FsbGJhY2soZWxhcHNlZCArIGRlbGF5KTtcbiAgfSwgZGVsYXksIHRpbWUpO1xuICByZXR1cm4gdDtcbn1cbiIsICJpbXBvcnQge2Rpc3BhdGNofSBmcm9tIFwiZDMtZGlzcGF0Y2hcIjtcbmltcG9ydCB7dGltZXIsIHRpbWVvdXR9IGZyb20gXCJkMy10aW1lclwiO1xuXG52YXIgZW1wdHlPbiA9IGRpc3BhdGNoKFwic3RhcnRcIiwgXCJlbmRcIiwgXCJjYW5jZWxcIiwgXCJpbnRlcnJ1cHRcIik7XG52YXIgZW1wdHlUd2VlbiA9IFtdO1xuXG5leHBvcnQgdmFyIENSRUFURUQgPSAwO1xuZXhwb3J0IHZhciBTQ0hFRFVMRUQgPSAxO1xuZXhwb3J0IHZhciBTVEFSVElORyA9IDI7XG5leHBvcnQgdmFyIFNUQVJURUQgPSAzO1xuZXhwb3J0IHZhciBSVU5OSU5HID0gNDtcbmV4cG9ydCB2YXIgRU5ESU5HID0gNTtcbmV4cG9ydCB2YXIgRU5ERUQgPSA2O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihub2RlLCBuYW1lLCBpZCwgaW5kZXgsIGdyb3VwLCB0aW1pbmcpIHtcbiAgdmFyIHNjaGVkdWxlcyA9IG5vZGUuX190cmFuc2l0aW9uO1xuICBpZiAoIXNjaGVkdWxlcykgbm9kZS5fX3RyYW5zaXRpb24gPSB7fTtcbiAgZWxzZSBpZiAoaWQgaW4gc2NoZWR1bGVzKSByZXR1cm47XG4gIGNyZWF0ZShub2RlLCBpZCwge1xuICAgIG5hbWU6IG5hbWUsXG4gICAgaW5kZXg6IGluZGV4LCAvLyBGb3IgY29udGV4dCBkdXJpbmcgY2FsbGJhY2suXG4gICAgZ3JvdXA6IGdyb3VwLCAvLyBGb3IgY29udGV4dCBkdXJpbmcgY2FsbGJhY2suXG4gICAgb246IGVtcHR5T24sXG4gICAgdHdlZW46IGVtcHR5VHdlZW4sXG4gICAgdGltZTogdGltaW5nLnRpbWUsXG4gICAgZGVsYXk6IHRpbWluZy5kZWxheSxcbiAgICBkdXJhdGlvbjogdGltaW5nLmR1cmF0aW9uLFxuICAgIGVhc2U6IHRpbWluZy5lYXNlLFxuICAgIHRpbWVyOiBudWxsLFxuICAgIHN0YXRlOiBDUkVBVEVEXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdChub2RlLCBpZCkge1xuICB2YXIgc2NoZWR1bGUgPSBnZXQobm9kZSwgaWQpO1xuICBpZiAoc2NoZWR1bGUuc3RhdGUgPiBDUkVBVEVEKSB0aHJvdyBuZXcgRXJyb3IoXCJ0b28gbGF0ZTsgYWxyZWFkeSBzY2hlZHVsZWRcIik7XG4gIHJldHVybiBzY2hlZHVsZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldChub2RlLCBpZCkge1xuICB2YXIgc2NoZWR1bGUgPSBnZXQobm9kZSwgaWQpO1xuICBpZiAoc2NoZWR1bGUuc3RhdGUgPiBTVEFSVEVEKSB0aHJvdyBuZXcgRXJyb3IoXCJ0b28gbGF0ZTsgYWxyZWFkeSBydW5uaW5nXCIpO1xuICByZXR1cm4gc2NoZWR1bGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXQobm9kZSwgaWQpIHtcbiAgdmFyIHNjaGVkdWxlID0gbm9kZS5fX3RyYW5zaXRpb247XG4gIGlmICghc2NoZWR1bGUgfHwgIShzY2hlZHVsZSA9IHNjaGVkdWxlW2lkXSkpIHRocm93IG5ldyBFcnJvcihcInRyYW5zaXRpb24gbm90IGZvdW5kXCIpO1xuICByZXR1cm4gc2NoZWR1bGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZShub2RlLCBpZCwgc2VsZikge1xuICB2YXIgc2NoZWR1bGVzID0gbm9kZS5fX3RyYW5zaXRpb24sXG4gICAgICB0d2VlbjtcblxuICAvLyBJbml0aWFsaXplIHRoZSBzZWxmIHRpbWVyIHdoZW4gdGhlIHRyYW5zaXRpb24gaXMgY3JlYXRlZC5cbiAgLy8gTm90ZSB0aGUgYWN0dWFsIGRlbGF5IGlzIG5vdCBrbm93biB1bnRpbCB0aGUgZmlyc3QgY2FsbGJhY2shXG4gIHNjaGVkdWxlc1tpZF0gPSBzZWxmO1xuICBzZWxmLnRpbWVyID0gdGltZXIoc2NoZWR1bGUsIDAsIHNlbGYudGltZSk7XG5cbiAgZnVuY3Rpb24gc2NoZWR1bGUoZWxhcHNlZCkge1xuICAgIHNlbGYuc3RhdGUgPSBTQ0hFRFVMRUQ7XG4gICAgc2VsZi50aW1lci5yZXN0YXJ0KHN0YXJ0LCBzZWxmLmRlbGF5LCBzZWxmLnRpbWUpO1xuXG4gICAgLy8gSWYgdGhlIGVsYXBzZWQgZGVsYXkgaXMgbGVzcyB0aGFuIG91ciBmaXJzdCBzbGVlcCwgc3RhcnQgaW1tZWRpYXRlbHkuXG4gICAgaWYgKHNlbGYuZGVsYXkgPD0gZWxhcHNlZCkgc3RhcnQoZWxhcHNlZCAtIHNlbGYuZGVsYXkpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnQoZWxhcHNlZCkge1xuICAgIHZhciBpLCBqLCBuLCBvO1xuXG4gICAgLy8gSWYgdGhlIHN0YXRlIGlzIG5vdCBTQ0hFRFVMRUQsIHRoZW4gd2UgcHJldmlvdXNseSBlcnJvcmVkIG9uIHN0YXJ0LlxuICAgIGlmIChzZWxmLnN0YXRlICE9PSBTQ0hFRFVMRUQpIHJldHVybiBzdG9wKCk7XG5cbiAgICBmb3IgKGkgaW4gc2NoZWR1bGVzKSB7XG4gICAgICBvID0gc2NoZWR1bGVzW2ldO1xuICAgICAgaWYgKG8ubmFtZSAhPT0gc2VsZi5uYW1lKSBjb250aW51ZTtcblxuICAgICAgLy8gV2hpbGUgdGhpcyBlbGVtZW50IGFscmVhZHkgaGFzIGEgc3RhcnRpbmcgdHJhbnNpdGlvbiBkdXJpbmcgdGhpcyBmcmFtZSxcbiAgICAgIC8vIGRlZmVyIHN0YXJ0aW5nIGFuIGludGVycnVwdGluZyB0cmFuc2l0aW9uIHVudGlsIHRoYXQgdHJhbnNpdGlvbiBoYXMgYVxuICAgICAgLy8gY2hhbmNlIHRvIHRpY2sgKGFuZCBwb3NzaWJseSBlbmQpOyBzZWUgZDMvZDMtdHJhbnNpdGlvbiM1NCFcbiAgICAgIGlmIChvLnN0YXRlID09PSBTVEFSVEVEKSByZXR1cm4gdGltZW91dChzdGFydCk7XG5cbiAgICAgIC8vIEludGVycnVwdCB0aGUgYWN0aXZlIHRyYW5zaXRpb24sIGlmIGFueS5cbiAgICAgIGlmIChvLnN0YXRlID09PSBSVU5OSU5HKSB7XG4gICAgICAgIG8uc3RhdGUgPSBFTkRFRDtcbiAgICAgICAgby50aW1lci5zdG9wKCk7XG4gICAgICAgIG8ub24uY2FsbChcImludGVycnVwdFwiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBvLmluZGV4LCBvLmdyb3VwKTtcbiAgICAgICAgZGVsZXRlIHNjaGVkdWxlc1tpXTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2FuY2VsIGFueSBwcmUtZW1wdGVkIHRyYW5zaXRpb25zLlxuICAgICAgZWxzZSBpZiAoK2kgPCBpZCkge1xuICAgICAgICBvLnN0YXRlID0gRU5ERUQ7XG4gICAgICAgIG8udGltZXIuc3RvcCgpO1xuICAgICAgICBvLm9uLmNhbGwoXCJjYW5jZWxcIiwgbm9kZSwgbm9kZS5fX2RhdGFfXywgby5pbmRleCwgby5ncm91cCk7XG4gICAgICAgIGRlbGV0ZSBzY2hlZHVsZXNbaV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGVmZXIgdGhlIGZpcnN0IHRpY2sgdG8gZW5kIG9mIHRoZSBjdXJyZW50IGZyYW1lOyBzZWUgZDMvZDMjMTU3Ni5cbiAgICAvLyBOb3RlIHRoZSB0cmFuc2l0aW9uIG1heSBiZSBjYW5jZWxlZCBhZnRlciBzdGFydCBhbmQgYmVmb3JlIHRoZSBmaXJzdCB0aWNrIVxuICAgIC8vIE5vdGUgdGhpcyBtdXN0IGJlIHNjaGVkdWxlZCBiZWZvcmUgdGhlIHN0YXJ0IGV2ZW50OyBzZWUgZDMvZDMtdHJhbnNpdGlvbiMxNiFcbiAgICAvLyBBc3N1bWluZyB0aGlzIGlzIHN1Y2Nlc3NmdWwsIHN1YnNlcXVlbnQgY2FsbGJhY2tzIGdvIHN0cmFpZ2h0IHRvIHRpY2suXG4gICAgdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGlmIChzZWxmLnN0YXRlID09PSBTVEFSVEVEKSB7XG4gICAgICAgIHNlbGYuc3RhdGUgPSBSVU5OSU5HO1xuICAgICAgICBzZWxmLnRpbWVyLnJlc3RhcnQodGljaywgc2VsZi5kZWxheSwgc2VsZi50aW1lKTtcbiAgICAgICAgdGljayhlbGFwc2VkKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIERpc3BhdGNoIHRoZSBzdGFydCBldmVudC5cbiAgICAvLyBOb3RlIHRoaXMgbXVzdCBiZSBkb25lIGJlZm9yZSB0aGUgdHdlZW4gYXJlIGluaXRpYWxpemVkLlxuICAgIHNlbGYuc3RhdGUgPSBTVEFSVElORztcbiAgICBzZWxmLm9uLmNhbGwoXCJzdGFydFwiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBzZWxmLmluZGV4LCBzZWxmLmdyb3VwKTtcbiAgICBpZiAoc2VsZi5zdGF0ZSAhPT0gU1RBUlRJTkcpIHJldHVybjsgLy8gaW50ZXJydXB0ZWRcbiAgICBzZWxmLnN0YXRlID0gU1RBUlRFRDtcblxuICAgIC8vIEluaXRpYWxpemUgdGhlIHR3ZWVuLCBkZWxldGluZyBudWxsIHR3ZWVuLlxuICAgIHR3ZWVuID0gbmV3IEFycmF5KG4gPSBzZWxmLnR3ZWVuLmxlbmd0aCk7XG4gICAgZm9yIChpID0gMCwgaiA9IC0xOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobyA9IHNlbGYudHdlZW5baV0udmFsdWUuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBzZWxmLmluZGV4LCBzZWxmLmdyb3VwKSkge1xuICAgICAgICB0d2VlblsrK2pdID0gbztcbiAgICAgIH1cbiAgICB9XG4gICAgdHdlZW4ubGVuZ3RoID0gaiArIDE7XG4gIH1cblxuICBmdW5jdGlvbiB0aWNrKGVsYXBzZWQpIHtcbiAgICB2YXIgdCA9IGVsYXBzZWQgPCBzZWxmLmR1cmF0aW9uID8gc2VsZi5lYXNlLmNhbGwobnVsbCwgZWxhcHNlZCAvIHNlbGYuZHVyYXRpb24pIDogKHNlbGYudGltZXIucmVzdGFydChzdG9wKSwgc2VsZi5zdGF0ZSA9IEVORElORywgMSksXG4gICAgICAgIGkgPSAtMSxcbiAgICAgICAgbiA9IHR3ZWVuLmxlbmd0aDtcblxuICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICB0d2VlbltpXS5jYWxsKG5vZGUsIHQpO1xuICAgIH1cblxuICAgIC8vIERpc3BhdGNoIHRoZSBlbmQgZXZlbnQuXG4gICAgaWYgKHNlbGYuc3RhdGUgPT09IEVORElORykge1xuICAgICAgc2VsZi5vbi5jYWxsKFwiZW5kXCIsIG5vZGUsIG5vZGUuX19kYXRhX18sIHNlbGYuaW5kZXgsIHNlbGYuZ3JvdXApO1xuICAgICAgc3RvcCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgc2VsZi5zdGF0ZSA9IEVOREVEO1xuICAgIHNlbGYudGltZXIuc3RvcCgpO1xuICAgIGRlbGV0ZSBzY2hlZHVsZXNbaWRdO1xuICAgIGZvciAodmFyIGkgaW4gc2NoZWR1bGVzKSByZXR1cm47IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICBkZWxldGUgbm9kZS5fX3RyYW5zaXRpb247XG4gIH1cbn1cbiIsICJpbXBvcnQge1NUQVJUSU5HLCBFTkRJTkcsIEVOREVEfSBmcm9tIFwiLi90cmFuc2l0aW9uL3NjaGVkdWxlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5vZGUsIG5hbWUpIHtcbiAgdmFyIHNjaGVkdWxlcyA9IG5vZGUuX190cmFuc2l0aW9uLFxuICAgICAgc2NoZWR1bGUsXG4gICAgICBhY3RpdmUsXG4gICAgICBlbXB0eSA9IHRydWUsXG4gICAgICBpO1xuXG4gIGlmICghc2NoZWR1bGVzKSByZXR1cm47XG5cbiAgbmFtZSA9IG5hbWUgPT0gbnVsbCA/IG51bGwgOiBuYW1lICsgXCJcIjtcblxuICBmb3IgKGkgaW4gc2NoZWR1bGVzKSB7XG4gICAgaWYgKChzY2hlZHVsZSA9IHNjaGVkdWxlc1tpXSkubmFtZSAhPT0gbmFtZSkgeyBlbXB0eSA9IGZhbHNlOyBjb250aW51ZTsgfVxuICAgIGFjdGl2ZSA9IHNjaGVkdWxlLnN0YXRlID4gU1RBUlRJTkcgJiYgc2NoZWR1bGUuc3RhdGUgPCBFTkRJTkc7XG4gICAgc2NoZWR1bGUuc3RhdGUgPSBFTkRFRDtcbiAgICBzY2hlZHVsZS50aW1lci5zdG9wKCk7XG4gICAgc2NoZWR1bGUub24uY2FsbChhY3RpdmUgPyBcImludGVycnVwdFwiIDogXCJjYW5jZWxcIiwgbm9kZSwgbm9kZS5fX2RhdGFfXywgc2NoZWR1bGUuaW5kZXgsIHNjaGVkdWxlLmdyb3VwKTtcbiAgICBkZWxldGUgc2NoZWR1bGVzW2ldO1xuICB9XG5cbiAgaWYgKGVtcHR5KSBkZWxldGUgbm9kZS5fX3RyYW5zaXRpb247XG59XG4iLCAiaW1wb3J0IGludGVycnVwdCBmcm9tIFwiLi4vaW50ZXJydXB0LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICBpbnRlcnJ1cHQodGhpcywgbmFtZSk7XG4gIH0pO1xufVxuIiwgImltcG9ydCB7Z2V0LCBzZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmZ1bmN0aW9uIHR3ZWVuUmVtb3ZlKGlkLCBuYW1lKSB7XG4gIHZhciB0d2VlbjAsIHR3ZWVuMTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzY2hlZHVsZSA9IHNldCh0aGlzLCBpZCksXG4gICAgICAgIHR3ZWVuID0gc2NoZWR1bGUudHdlZW47XG5cbiAgICAvLyBJZiB0aGlzIG5vZGUgc2hhcmVkIHR3ZWVuIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsXG4gICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIHR3ZWVuIGFuZCB3ZVx1MjAxOXJlIGRvbmUhXG4gICAgLy8gT3RoZXJ3aXNlLCBjb3B5LW9uLXdyaXRlLlxuICAgIGlmICh0d2VlbiAhPT0gdHdlZW4wKSB7XG4gICAgICB0d2VlbjEgPSB0d2VlbjAgPSB0d2VlbjtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBuID0gdHdlZW4xLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgICAgICBpZiAodHdlZW4xW2ldLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgICB0d2VlbjEgPSB0d2VlbjEuc2xpY2UoKTtcbiAgICAgICAgICB0d2VlbjEuc3BsaWNlKGksIDEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2NoZWR1bGUudHdlZW4gPSB0d2VlbjE7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHR3ZWVuRnVuY3Rpb24oaWQsIG5hbWUsIHZhbHVlKSB7XG4gIHZhciB0d2VlbjAsIHR3ZWVuMTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3I7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2NoZWR1bGUgPSBzZXQodGhpcywgaWQpLFxuICAgICAgICB0d2VlbiA9IHNjaGVkdWxlLnR3ZWVuO1xuXG4gICAgLy8gSWYgdGhpcyBub2RlIHNoYXJlZCB0d2VlbiB3aXRoIHRoZSBwcmV2aW91cyBub2RlLFxuICAgIC8vIGp1c3QgYXNzaWduIHRoZSB1cGRhdGVkIHNoYXJlZCB0d2VlbiBhbmQgd2VcdTIwMTlyZSBkb25lIVxuICAgIC8vIE90aGVyd2lzZSwgY29weS1vbi13cml0ZS5cbiAgICBpZiAodHdlZW4gIT09IHR3ZWVuMCkge1xuICAgICAgdHdlZW4xID0gKHR3ZWVuMCA9IHR3ZWVuKS5zbGljZSgpO1xuICAgICAgZm9yICh2YXIgdCA9IHtuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWV9LCBpID0gMCwgbiA9IHR3ZWVuMS5sZW5ndGg7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgaWYgKHR3ZWVuMVtpXS5uYW1lID09PSBuYW1lKSB7XG4gICAgICAgICAgdHdlZW4xW2ldID0gdDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGkgPT09IG4pIHR3ZWVuMS5wdXNoKHQpO1xuICAgIH1cblxuICAgIHNjaGVkdWxlLnR3ZWVuID0gdHdlZW4xO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIgaWQgPSB0aGlzLl9pZDtcblxuICBuYW1lICs9IFwiXCI7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgdmFyIHR3ZWVuID0gZ2V0KHRoaXMubm9kZSgpLCBpZCkudHdlZW47XG4gICAgZm9yICh2YXIgaSA9IDAsIG4gPSB0d2Vlbi5sZW5ndGgsIHQ7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmICgodCA9IHR3ZWVuW2ldKS5uYW1lID09PSBuYW1lKSB7XG4gICAgICAgIHJldHVybiB0LnZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiB0aGlzLmVhY2goKHZhbHVlID09IG51bGwgPyB0d2VlblJlbW92ZSA6IHR3ZWVuRnVuY3Rpb24pKGlkLCBuYW1lLCB2YWx1ZSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdHdlZW5WYWx1ZSh0cmFuc2l0aW9uLCBuYW1lLCB2YWx1ZSkge1xuICB2YXIgaWQgPSB0cmFuc2l0aW9uLl9pZDtcblxuICB0cmFuc2l0aW9uLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNjaGVkdWxlID0gc2V0KHRoaXMsIGlkKTtcbiAgICAoc2NoZWR1bGUudmFsdWUgfHwgKHNjaGVkdWxlLnZhbHVlID0ge30pKVtuYW1lXSA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH0pO1xuXG4gIHJldHVybiBmdW5jdGlvbihub2RlKSB7XG4gICAgcmV0dXJuIGdldChub2RlLCBpZCkudmFsdWVbbmFtZV07XG4gIH07XG59XG4iLCAiaW1wb3J0IHtjb2xvcn0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQge2ludGVycG9sYXRlTnVtYmVyLCBpbnRlcnBvbGF0ZVJnYiwgaW50ZXJwb2xhdGVTdHJpbmd9IGZyb20gXCJkMy1pbnRlcnBvbGF0ZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihhLCBiKSB7XG4gIHZhciBjO1xuICByZXR1cm4gKHR5cGVvZiBiID09PSBcIm51bWJlclwiID8gaW50ZXJwb2xhdGVOdW1iZXJcbiAgICAgIDogYiBpbnN0YW5jZW9mIGNvbG9yID8gaW50ZXJwb2xhdGVSZ2JcbiAgICAgIDogKGMgPSBjb2xvcihiKSkgPyAoYiA9IGMsIGludGVycG9sYXRlUmdiKVxuICAgICAgOiBpbnRlcnBvbGF0ZVN0cmluZykoYSwgYik7XG59XG4iLCAiaW1wb3J0IHtpbnRlcnBvbGF0ZVRyYW5zZm9ybVN2ZyBhcyBpbnRlcnBvbGF0ZVRyYW5zZm9ybX0gZnJvbSBcImQzLWludGVycG9sYXRlXCI7XG5pbXBvcnQge25hbWVzcGFjZX0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuaW1wb3J0IHt0d2VlblZhbHVlfSBmcm9tIFwiLi90d2Vlbi5qc1wiO1xuaW1wb3J0IGludGVycG9sYXRlIGZyb20gXCIuL2ludGVycG9sYXRlLmpzXCI7XG5cbmZ1bmN0aW9uIGF0dHJSZW1vdmUobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJSZW1vdmVOUyhmdWxsbmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyQ29uc3RhbnQobmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlMSkge1xuICB2YXIgc3RyaW5nMDAsXG4gICAgICBzdHJpbmcxID0gdmFsdWUxICsgXCJcIixcbiAgICAgIGludGVycG9sYXRlMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHJpbmcwID0gdGhpcy5nZXRBdHRyaWJ1dGUobmFtZSk7XG4gICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsXG4gICAgICAgIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgPyBpbnRlcnBvbGF0ZTBcbiAgICAgICAgOiBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJDb25zdGFudE5TKGZ1bGxuYW1lLCBpbnRlcnBvbGF0ZSwgdmFsdWUxKSB7XG4gIHZhciBzdHJpbmcwMCxcbiAgICAgIHN0cmluZzEgPSB2YWx1ZTEgKyBcIlwiLFxuICAgICAgaW50ZXJwb2xhdGUwO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0cmluZzAgPSB0aGlzLmdldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7XG4gICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsXG4gICAgICAgIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgPyBpbnRlcnBvbGF0ZTBcbiAgICAgICAgOiBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJGdW5jdGlvbihuYW1lLCBpbnRlcnBvbGF0ZSwgdmFsdWUpIHtcbiAgdmFyIHN0cmluZzAwLFxuICAgICAgc3RyaW5nMTAsXG4gICAgICBpbnRlcnBvbGF0ZTA7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RyaW5nMCwgdmFsdWUxID0gdmFsdWUodGhpcyksIHN0cmluZzE7XG4gICAgaWYgKHZhbHVlMSA9PSBudWxsKSByZXR1cm4gdm9pZCB0aGlzLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICBzdHJpbmcwID0gdGhpcy5nZXRBdHRyaWJ1dGUobmFtZSk7XG4gICAgc3RyaW5nMSA9IHZhbHVlMSArIFwiXCI7XG4gICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsXG4gICAgICAgIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgJiYgc3RyaW5nMSA9PT0gc3RyaW5nMTAgPyBpbnRlcnBvbGF0ZTBcbiAgICAgICAgOiAoc3RyaW5nMTAgPSBzdHJpbmcxLCBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSkpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyRnVuY3Rpb25OUyhmdWxsbmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlKSB7XG4gIHZhciBzdHJpbmcwMCxcbiAgICAgIHN0cmluZzEwLFxuICAgICAgaW50ZXJwb2xhdGUwO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0cmluZzAsIHZhbHVlMSA9IHZhbHVlKHRoaXMpLCBzdHJpbmcxO1xuICAgIGlmICh2YWx1ZTEgPT0gbnVsbCkgcmV0dXJuIHZvaWQgdGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICAgIHN0cmluZzAgPSB0aGlzLmdldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbCk7XG4gICAgc3RyaW5nMSA9IHZhbHVlMSArIFwiXCI7XG4gICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsXG4gICAgICAgIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgJiYgc3RyaW5nMSA9PT0gc3RyaW5nMTAgPyBpbnRlcnBvbGF0ZTBcbiAgICAgICAgOiAoc3RyaW5nMTAgPSBzdHJpbmcxLCBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSkpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIgZnVsbG5hbWUgPSBuYW1lc3BhY2UobmFtZSksIGkgPSBmdWxsbmFtZSA9PT0gXCJ0cmFuc2Zvcm1cIiA/IGludGVycG9sYXRlVHJhbnNmb3JtIDogaW50ZXJwb2xhdGU7XG4gIHJldHVybiB0aGlzLmF0dHJUd2VlbihuYW1lLCB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyAoZnVsbG5hbWUubG9jYWwgPyBhdHRyRnVuY3Rpb25OUyA6IGF0dHJGdW5jdGlvbikoZnVsbG5hbWUsIGksIHR3ZWVuVmFsdWUodGhpcywgXCJhdHRyLlwiICsgbmFtZSwgdmFsdWUpKVxuICAgICAgOiB2YWx1ZSA9PSBudWxsID8gKGZ1bGxuYW1lLmxvY2FsID8gYXR0clJlbW92ZU5TIDogYXR0clJlbW92ZSkoZnVsbG5hbWUpXG4gICAgICA6IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJDb25zdGFudE5TIDogYXR0ckNvbnN0YW50KShmdWxsbmFtZSwgaSwgdmFsdWUpKTtcbn1cbiIsICJpbXBvcnQge25hbWVzcGFjZX0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuXG5mdW5jdGlvbiBhdHRySW50ZXJwb2xhdGUobmFtZSwgaSkge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKG5hbWUsIGkuY2FsbCh0aGlzLCB0KSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJJbnRlcnBvbGF0ZU5TKGZ1bGxuYW1lLCBpKSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwsIGkuY2FsbCh0aGlzLCB0KSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJUd2Vlbk5TKGZ1bGxuYW1lLCB2YWx1ZSkge1xuICB2YXIgdDAsIGkwO1xuICBmdW5jdGlvbiB0d2VlbigpIHtcbiAgICB2YXIgaSA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKGkgIT09IGkwKSB0MCA9IChpMCA9IGkpICYmIGF0dHJJbnRlcnBvbGF0ZU5TKGZ1bGxuYW1lLCBpKTtcbiAgICByZXR1cm4gdDA7XG4gIH1cbiAgdHdlZW4uX3ZhbHVlID0gdmFsdWU7XG4gIHJldHVybiB0d2Vlbjtcbn1cblxuZnVuY3Rpb24gYXR0clR3ZWVuKG5hbWUsIHZhbHVlKSB7XG4gIHZhciB0MCwgaTA7XG4gIGZ1bmN0aW9uIHR3ZWVuKCkge1xuICAgIHZhciBpID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoaSAhPT0gaTApIHQwID0gKGkwID0gaSkgJiYgYXR0ckludGVycG9sYXRlKG5hbWUsIGkpO1xuICAgIHJldHVybiB0MDtcbiAgfVxuICB0d2Vlbi5fdmFsdWUgPSB2YWx1ZTtcbiAgcmV0dXJuIHR3ZWVuO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIga2V5ID0gXCJhdHRyLlwiICsgbmFtZTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSByZXR1cm4gKGtleSA9IHRoaXMudHdlZW4oa2V5KSkgJiYga2V5Ll92YWx1ZTtcbiAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgbnVsbCk7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yO1xuICB2YXIgZnVsbG5hbWUgPSBuYW1lc3BhY2UobmFtZSk7XG4gIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgKGZ1bGxuYW1lLmxvY2FsID8gYXR0clR3ZWVuTlMgOiBhdHRyVHdlZW4pKGZ1bGxuYW1lLCB2YWx1ZSkpO1xufVxuIiwgImltcG9ydCB7Z2V0LCBpbml0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5mdW5jdGlvbiBkZWxheUZ1bmN0aW9uKGlkLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgaW5pdCh0aGlzLCBpZCkuZGVsYXkgPSArdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZGVsYXlDb25zdGFudChpZCwgdmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID0gK3ZhbHVlLCBmdW5jdGlvbigpIHtcbiAgICBpbml0KHRoaXMsIGlkKS5kZWxheSA9IHZhbHVlO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICB2YXIgaWQgPSB0aGlzLl9pZDtcblxuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLmVhY2goKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgPyBkZWxheUZ1bmN0aW9uXG4gICAgICAgICAgOiBkZWxheUNvbnN0YW50KShpZCwgdmFsdWUpKVxuICAgICAgOiBnZXQodGhpcy5ub2RlKCksIGlkKS5kZWxheTtcbn1cbiIsICJpbXBvcnQge2dldCwgc2V0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5mdW5jdGlvbiBkdXJhdGlvbkZ1bmN0aW9uKGlkLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgc2V0KHRoaXMsIGlkKS5kdXJhdGlvbiA9ICt2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBkdXJhdGlvbkNvbnN0YW50KGlkLCB2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPSArdmFsdWUsIGZ1bmN0aW9uKCkge1xuICAgIHNldCh0aGlzLCBpZCkuZHVyYXRpb24gPSB2YWx1ZTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgdmFyIGlkID0gdGhpcy5faWQ7XG5cbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgID8gdGhpcy5lYWNoKCh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgID8gZHVyYXRpb25GdW5jdGlvblxuICAgICAgICAgIDogZHVyYXRpb25Db25zdGFudCkoaWQsIHZhbHVlKSlcbiAgICAgIDogZ2V0KHRoaXMubm9kZSgpLCBpZCkuZHVyYXRpb247XG59XG4iLCAiaW1wb3J0IHtnZXQsIHNldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZnVuY3Rpb24gZWFzZUNvbnN0YW50KGlkLCB2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcjtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHNldCh0aGlzLCBpZCkuZWFzZSA9IHZhbHVlO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICB2YXIgaWQgPSB0aGlzLl9pZDtcblxuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLmVhY2goZWFzZUNvbnN0YW50KGlkLCB2YWx1ZSkpXG4gICAgICA6IGdldCh0aGlzLm5vZGUoKSwgaWQpLmVhc2U7XG59XG4iLCAiaW1wb3J0IHtzZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmZ1bmN0aW9uIGVhc2VWYXJ5aW5nKGlkLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICh0eXBlb2YgdiAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3I7XG4gICAgc2V0KHRoaXMsIGlkKS5lYXNlID0gdjtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3I7XG4gIHJldHVybiB0aGlzLmVhY2goZWFzZVZhcnlpbmcodGhpcy5faWQsIHZhbHVlKSk7XG59XG4iLCAiaW1wb3J0IHttYXRjaGVyfSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQge1RyYW5zaXRpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG1hdGNoKSB7XG4gIGlmICh0eXBlb2YgbWF0Y2ggIT09IFwiZnVuY3Rpb25cIikgbWF0Y2ggPSBtYXRjaGVyKG1hdGNoKTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHN1Ymdyb3VwID0gc3ViZ3JvdXBzW2pdID0gW10sIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgbWF0Y2guY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCkpIHtcbiAgICAgICAgc3ViZ3JvdXAucHVzaChub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFRyYW5zaXRpb24oc3ViZ3JvdXBzLCB0aGlzLl9wYXJlbnRzLCB0aGlzLl9uYW1lLCB0aGlzLl9pZCk7XG59XG4iLCAiaW1wb3J0IHtUcmFuc2l0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih0cmFuc2l0aW9uKSB7XG4gIGlmICh0cmFuc2l0aW9uLl9pZCAhPT0gdGhpcy5faWQpIHRocm93IG5ldyBFcnJvcjtcblxuICBmb3IgKHZhciBncm91cHMwID0gdGhpcy5fZ3JvdXBzLCBncm91cHMxID0gdHJhbnNpdGlvbi5fZ3JvdXBzLCBtMCA9IGdyb3VwczAubGVuZ3RoLCBtMSA9IGdyb3VwczEubGVuZ3RoLCBtID0gTWF0aC5taW4obTAsIG0xKSwgbWVyZ2VzID0gbmV3IEFycmF5KG0wKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cDAgPSBncm91cHMwW2pdLCBncm91cDEgPSBncm91cHMxW2pdLCBuID0gZ3JvdXAwLmxlbmd0aCwgbWVyZ2UgPSBtZXJnZXNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwMFtpXSB8fCBncm91cDFbaV0pIHtcbiAgICAgICAgbWVyZ2VbaV0gPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBqIDwgbTA7ICsraikge1xuICAgIG1lcmdlc1tqXSA9IGdyb3VwczBbal07XG4gIH1cblxuICByZXR1cm4gbmV3IFRyYW5zaXRpb24obWVyZ2VzLCB0aGlzLl9wYXJlbnRzLCB0aGlzLl9uYW1lLCB0aGlzLl9pZCk7XG59XG4iLCAiaW1wb3J0IHtnZXQsIHNldCwgaW5pdH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZnVuY3Rpb24gc3RhcnQobmFtZSkge1xuICByZXR1cm4gKG5hbWUgKyBcIlwiKS50cmltKCkuc3BsaXQoL158XFxzKy8pLmV2ZXJ5KGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgaSA9IHQuaW5kZXhPZihcIi5cIik7XG4gICAgaWYgKGkgPj0gMCkgdCA9IHQuc2xpY2UoMCwgaSk7XG4gICAgcmV0dXJuICF0IHx8IHQgPT09IFwic3RhcnRcIjtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG9uRnVuY3Rpb24oaWQsIG5hbWUsIGxpc3RlbmVyKSB7XG4gIHZhciBvbjAsIG9uMSwgc2l0ID0gc3RhcnQobmFtZSkgPyBpbml0IDogc2V0O1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNjaGVkdWxlID0gc2l0KHRoaXMsIGlkKSxcbiAgICAgICAgb24gPSBzY2hlZHVsZS5vbjtcblxuICAgIC8vIElmIHRoaXMgbm9kZSBzaGFyZWQgYSBkaXNwYXRjaCB3aXRoIHRoZSBwcmV2aW91cyBub2RlLFxuICAgIC8vIGp1c3QgYXNzaWduIHRoZSB1cGRhdGVkIHNoYXJlZCBkaXNwYXRjaCBhbmQgd2VcdTIwMTlyZSBkb25lIVxuICAgIC8vIE90aGVyd2lzZSwgY29weS1vbi13cml0ZS5cbiAgICBpZiAob24gIT09IG9uMCkgKG9uMSA9IChvbjAgPSBvbikuY29weSgpKS5vbihuYW1lLCBsaXN0ZW5lcik7XG5cbiAgICBzY2hlZHVsZS5vbiA9IG9uMTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgbGlzdGVuZXIpIHtcbiAgdmFyIGlkID0gdGhpcy5faWQ7XG5cbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPCAyXG4gICAgICA/IGdldCh0aGlzLm5vZGUoKSwgaWQpLm9uLm9uKG5hbWUpXG4gICAgICA6IHRoaXMuZWFjaChvbkZ1bmN0aW9uKGlkLCBuYW1lLCBsaXN0ZW5lcikpO1xufVxuIiwgImZ1bmN0aW9uIHJlbW92ZUZ1bmN0aW9uKGlkKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xuICAgIGZvciAodmFyIGkgaW4gdGhpcy5fX3RyYW5zaXRpb24pIGlmICgraSAhPT0gaWQpIHJldHVybjtcbiAgICBpZiAocGFyZW50KSBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcyk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5vbihcImVuZC5yZW1vdmVcIiwgcmVtb3ZlRnVuY3Rpb24odGhpcy5faWQpKTtcbn1cbiIsICJpbXBvcnQge3NlbGVjdG9yfSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQge1RyYW5zaXRpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgc2NoZWR1bGUsIHtnZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdCkge1xuICB2YXIgbmFtZSA9IHRoaXMuX25hbWUsXG4gICAgICBpZCA9IHRoaXMuX2lkO1xuXG4gIGlmICh0eXBlb2Ygc2VsZWN0ICE9PSBcImZ1bmN0aW9uXCIpIHNlbGVjdCA9IHNlbGVjdG9yKHNlbGVjdCk7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBzdWJncm91cCA9IHN1Ymdyb3Vwc1tqXSA9IG5ldyBBcnJheShuKSwgbm9kZSwgc3Vibm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmICgobm9kZSA9IGdyb3VwW2ldKSAmJiAoc3Vibm9kZSA9IHNlbGVjdC5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKSkpIHtcbiAgICAgICAgaWYgKFwiX19kYXRhX19cIiBpbiBub2RlKSBzdWJub2RlLl9fZGF0YV9fID0gbm9kZS5fX2RhdGFfXztcbiAgICAgICAgc3ViZ3JvdXBbaV0gPSBzdWJub2RlO1xuICAgICAgICBzY2hlZHVsZShzdWJncm91cFtpXSwgbmFtZSwgaWQsIGksIHN1Ymdyb3VwLCBnZXQobm9kZSwgaWQpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFRyYW5zaXRpb24oc3ViZ3JvdXBzLCB0aGlzLl9wYXJlbnRzLCBuYW1lLCBpZCk7XG59XG4iLCAiaW1wb3J0IHtzZWxlY3RvckFsbH0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuaW1wb3J0IHtUcmFuc2l0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuaW1wb3J0IHNjaGVkdWxlLCB7Z2V0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3QpIHtcbiAgdmFyIG5hbWUgPSB0aGlzLl9uYW1lLFxuICAgICAgaWQgPSB0aGlzLl9pZDtcblxuICBpZiAodHlwZW9mIHNlbGVjdCAhPT0gXCJmdW5jdGlvblwiKSBzZWxlY3QgPSBzZWxlY3RvckFsbChzZWxlY3QpO1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHN1Ymdyb3VwcyA9IFtdLCBwYXJlbnRzID0gW10sIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIGZvciAodmFyIGNoaWxkcmVuID0gc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApLCBjaGlsZCwgaW5oZXJpdCA9IGdldChub2RlLCBpZCksIGsgPSAwLCBsID0gY2hpbGRyZW4ubGVuZ3RoOyBrIDwgbDsgKytrKSB7XG4gICAgICAgICAgaWYgKGNoaWxkID0gY2hpbGRyZW5ba10pIHtcbiAgICAgICAgICAgIHNjaGVkdWxlKGNoaWxkLCBuYW1lLCBpZCwgaywgY2hpbGRyZW4sIGluaGVyaXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdWJncm91cHMucHVzaChjaGlsZHJlbik7XG4gICAgICAgIHBhcmVudHMucHVzaChub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFRyYW5zaXRpb24oc3ViZ3JvdXBzLCBwYXJlbnRzLCBuYW1lLCBpZCk7XG59XG4iLCAiaW1wb3J0IHtzZWxlY3Rpb259IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcblxudmFyIFNlbGVjdGlvbiA9IHNlbGVjdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3I7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFNlbGVjdGlvbih0aGlzLl9ncm91cHMsIHRoaXMuX3BhcmVudHMpO1xufVxuIiwgImltcG9ydCB7aW50ZXJwb2xhdGVUcmFuc2Zvcm1Dc3MgYXMgaW50ZXJwb2xhdGVUcmFuc2Zvcm19IGZyb20gXCJkMy1pbnRlcnBvbGF0ZVwiO1xuaW1wb3J0IHtzdHlsZX0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuaW1wb3J0IHtzZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5pbXBvcnQge3R3ZWVuVmFsdWV9IGZyb20gXCIuL3R3ZWVuLmpzXCI7XG5pbXBvcnQgaW50ZXJwb2xhdGUgZnJvbSBcIi4vaW50ZXJwb2xhdGUuanNcIjtcblxuZnVuY3Rpb24gc3R5bGVOdWxsKG5hbWUsIGludGVycG9sYXRlKSB7XG4gIHZhciBzdHJpbmcwMCxcbiAgICAgIHN0cmluZzEwLFxuICAgICAgaW50ZXJwb2xhdGUwO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0cmluZzAgPSBzdHlsZSh0aGlzLCBuYW1lKSxcbiAgICAgICAgc3RyaW5nMSA9ICh0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpLCBzdHlsZSh0aGlzLCBuYW1lKSk7XG4gICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsXG4gICAgICAgIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgJiYgc3RyaW5nMSA9PT0gc3RyaW5nMTAgPyBpbnRlcnBvbGF0ZTBcbiAgICAgICAgOiBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHN0cmluZzEwID0gc3RyaW5nMSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0eWxlUmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0eWxlQ29uc3RhbnQobmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlMSkge1xuICB2YXIgc3RyaW5nMDAsXG4gICAgICBzdHJpbmcxID0gdmFsdWUxICsgXCJcIixcbiAgICAgIGludGVycG9sYXRlMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHJpbmcwID0gc3R5bGUodGhpcywgbmFtZSk7XG4gICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsXG4gICAgICAgIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgPyBpbnRlcnBvbGF0ZTBcbiAgICAgICAgOiBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0eWxlRnVuY3Rpb24obmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlKSB7XG4gIHZhciBzdHJpbmcwMCxcbiAgICAgIHN0cmluZzEwLFxuICAgICAgaW50ZXJwb2xhdGUwO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0cmluZzAgPSBzdHlsZSh0aGlzLCBuYW1lKSxcbiAgICAgICAgdmFsdWUxID0gdmFsdWUodGhpcyksXG4gICAgICAgIHN0cmluZzEgPSB2YWx1ZTEgKyBcIlwiO1xuICAgIGlmICh2YWx1ZTEgPT0gbnVsbCkgc3RyaW5nMSA9IHZhbHVlMSA9ICh0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpLCBzdHlsZSh0aGlzLCBuYW1lKSk7XG4gICAgcmV0dXJuIHN0cmluZzAgPT09IHN0cmluZzEgPyBudWxsXG4gICAgICAgIDogc3RyaW5nMCA9PT0gc3RyaW5nMDAgJiYgc3RyaW5nMSA9PT0gc3RyaW5nMTAgPyBpbnRlcnBvbGF0ZTBcbiAgICAgICAgOiAoc3RyaW5nMTAgPSBzdHJpbmcxLCBpbnRlcnBvbGF0ZTAgPSBpbnRlcnBvbGF0ZShzdHJpbmcwMCA9IHN0cmluZzAsIHZhbHVlMSkpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzdHlsZU1heWJlUmVtb3ZlKGlkLCBuYW1lKSB7XG4gIHZhciBvbjAsIG9uMSwgbGlzdGVuZXIwLCBrZXkgPSBcInN0eWxlLlwiICsgbmFtZSwgZXZlbnQgPSBcImVuZC5cIiArIGtleSwgcmVtb3ZlO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNjaGVkdWxlID0gc2V0KHRoaXMsIGlkKSxcbiAgICAgICAgb24gPSBzY2hlZHVsZS5vbixcbiAgICAgICAgbGlzdGVuZXIgPSBzY2hlZHVsZS52YWx1ZVtrZXldID09IG51bGwgPyByZW1vdmUgfHwgKHJlbW92ZSA9IHN0eWxlUmVtb3ZlKG5hbWUpKSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIElmIHRoaXMgbm9kZSBzaGFyZWQgYSBkaXNwYXRjaCB3aXRoIHRoZSBwcmV2aW91cyBub2RlLFxuICAgIC8vIGp1c3QgYXNzaWduIHRoZSB1cGRhdGVkIHNoYXJlZCBkaXNwYXRjaCBhbmQgd2VcdTIwMTlyZSBkb25lIVxuICAgIC8vIE90aGVyd2lzZSwgY29weS1vbi13cml0ZS5cbiAgICBpZiAob24gIT09IG9uMCB8fCBsaXN0ZW5lcjAgIT09IGxpc3RlbmVyKSAob24xID0gKG9uMCA9IG9uKS5jb3B5KCkpLm9uKGV2ZW50LCBsaXN0ZW5lcjAgPSBsaXN0ZW5lcik7XG5cbiAgICBzY2hlZHVsZS5vbiA9IG9uMTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7XG4gIHZhciBpID0gKG5hbWUgKz0gXCJcIikgPT09IFwidHJhbnNmb3JtXCIgPyBpbnRlcnBvbGF0ZVRyYW5zZm9ybSA6IGludGVycG9sYXRlO1xuICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/IHRoaXNcbiAgICAgIC5zdHlsZVR3ZWVuKG5hbWUsIHN0eWxlTnVsbChuYW1lLCBpKSlcbiAgICAgIC5vbihcImVuZC5zdHlsZS5cIiArIG5hbWUsIHN0eWxlUmVtb3ZlKG5hbWUpKVxuICAgIDogdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgPyB0aGlzXG4gICAgICAuc3R5bGVUd2VlbihuYW1lLCBzdHlsZUZ1bmN0aW9uKG5hbWUsIGksIHR3ZWVuVmFsdWUodGhpcywgXCJzdHlsZS5cIiArIG5hbWUsIHZhbHVlKSkpXG4gICAgICAuZWFjaChzdHlsZU1heWJlUmVtb3ZlKHRoaXMuX2lkLCBuYW1lKSlcbiAgICA6IHRoaXNcbiAgICAgIC5zdHlsZVR3ZWVuKG5hbWUsIHN0eWxlQ29uc3RhbnQobmFtZSwgaSwgdmFsdWUpLCBwcmlvcml0eSlcbiAgICAgIC5vbihcImVuZC5zdHlsZS5cIiArIG5hbWUsIG51bGwpO1xufVxuIiwgImZ1bmN0aW9uIHN0eWxlSW50ZXJwb2xhdGUobmFtZSwgaSwgcHJpb3JpdHkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICB0aGlzLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIGkuY2FsbCh0aGlzLCB0KSwgcHJpb3JpdHkpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzdHlsZVR3ZWVuKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICB2YXIgdCwgaTA7XG4gIGZ1bmN0aW9uIHR3ZWVuKCkge1xuICAgIHZhciBpID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoaSAhPT0gaTApIHQgPSAoaTAgPSBpKSAmJiBzdHlsZUludGVycG9sYXRlKG5hbWUsIGksIHByaW9yaXR5KTtcbiAgICByZXR1cm4gdDtcbiAgfVxuICB0d2Vlbi5fdmFsdWUgPSB2YWx1ZTtcbiAgcmV0dXJuIHR3ZWVuO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgdmFyIGtleSA9IFwic3R5bGUuXCIgKyAobmFtZSArPSBcIlwiKTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSByZXR1cm4gKGtleSA9IHRoaXMudHdlZW4oa2V5KSkgJiYga2V5Ll92YWx1ZTtcbiAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgbnVsbCk7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yO1xuICByZXR1cm4gdGhpcy50d2VlbihrZXksIHN0eWxlVHdlZW4obmFtZSwgdmFsdWUsIHByaW9yaXR5ID09IG51bGwgPyBcIlwiIDogcHJpb3JpdHkpKTtcbn1cbiIsICJpbXBvcnQge3R3ZWVuVmFsdWV9IGZyb20gXCIuL3R3ZWVuLmpzXCI7XG5cbmZ1bmN0aW9uIHRleHRDb25zdGFudCh2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy50ZXh0Q29udGVudCA9IHZhbHVlO1xuICB9O1xufVxuXG5mdW5jdGlvbiB0ZXh0RnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2YWx1ZTEgPSB2YWx1ZSh0aGlzKTtcbiAgICB0aGlzLnRleHRDb250ZW50ID0gdmFsdWUxID09IG51bGwgPyBcIlwiIDogdmFsdWUxO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gdGhpcy50d2VlbihcInRleHRcIiwgdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gdGV4dEZ1bmN0aW9uKHR3ZWVuVmFsdWUodGhpcywgXCJ0ZXh0XCIsIHZhbHVlKSlcbiAgICAgIDogdGV4dENvbnN0YW50KHZhbHVlID09IG51bGwgPyBcIlwiIDogdmFsdWUgKyBcIlwiKSk7XG59XG4iLCAiZnVuY3Rpb24gdGV4dEludGVycG9sYXRlKGkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICB0aGlzLnRleHRDb250ZW50ID0gaS5jYWxsKHRoaXMsIHQpO1xuICB9O1xufVxuXG5mdW5jdGlvbiB0ZXh0VHdlZW4odmFsdWUpIHtcbiAgdmFyIHQwLCBpMDtcbiAgZnVuY3Rpb24gdHdlZW4oKSB7XG4gICAgdmFyIGkgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChpICE9PSBpMCkgdDAgPSAoaTAgPSBpKSAmJiB0ZXh0SW50ZXJwb2xhdGUoaSk7XG4gICAgcmV0dXJuIHQwO1xuICB9XG4gIHR3ZWVuLl92YWx1ZSA9IHZhbHVlO1xuICByZXR1cm4gdHdlZW47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHZhciBrZXkgPSBcInRleHRcIjtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSByZXR1cm4gKGtleSA9IHRoaXMudHdlZW4oa2V5KSkgJiYga2V5Ll92YWx1ZTtcbiAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiB0aGlzLnR3ZWVuKGtleSwgbnVsbCk7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yO1xuICByZXR1cm4gdGhpcy50d2VlbihrZXksIHRleHRUd2Vlbih2YWx1ZSkpO1xufVxuIiwgImltcG9ydCB7VHJhbnNpdGlvbiwgbmV3SWR9IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgc2NoZWR1bGUsIHtnZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICB2YXIgbmFtZSA9IHRoaXMuX25hbWUsXG4gICAgICBpZDAgPSB0aGlzLl9pZCxcbiAgICAgIGlkMSA9IG5ld0lkKCk7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgdmFyIGluaGVyaXQgPSBnZXQobm9kZSwgaWQwKTtcbiAgICAgICAgc2NoZWR1bGUobm9kZSwgbmFtZSwgaWQxLCBpLCBncm91cCwge1xuICAgICAgICAgIHRpbWU6IGluaGVyaXQudGltZSArIGluaGVyaXQuZGVsYXkgKyBpbmhlcml0LmR1cmF0aW9uLFxuICAgICAgICAgIGRlbGF5OiAwLFxuICAgICAgICAgIGR1cmF0aW9uOiBpbmhlcml0LmR1cmF0aW9uLFxuICAgICAgICAgIGVhc2U6IGluaGVyaXQuZWFzZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFRyYW5zaXRpb24oZ3JvdXBzLCB0aGlzLl9wYXJlbnRzLCBuYW1lLCBpZDEpO1xufVxuIiwgImltcG9ydCB7c2V0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgdmFyIG9uMCwgb24xLCB0aGF0ID0gdGhpcywgaWQgPSB0aGF0Ll9pZCwgc2l6ZSA9IHRoYXQuc2l6ZSgpO1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIGNhbmNlbCA9IHt2YWx1ZTogcmVqZWN0fSxcbiAgICAgICAgZW5kID0ge3ZhbHVlOiBmdW5jdGlvbigpIHsgaWYgKC0tc2l6ZSA9PT0gMCkgcmVzb2x2ZSgpOyB9fTtcblxuICAgIHRoYXQuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzY2hlZHVsZSA9IHNldCh0aGlzLCBpZCksXG4gICAgICAgICAgb24gPSBzY2hlZHVsZS5vbjtcblxuICAgICAgLy8gSWYgdGhpcyBub2RlIHNoYXJlZCBhIGRpc3BhdGNoIHdpdGggdGhlIHByZXZpb3VzIG5vZGUsXG4gICAgICAvLyBqdXN0IGFzc2lnbiB0aGUgdXBkYXRlZCBzaGFyZWQgZGlzcGF0Y2ggYW5kIHdlXHUyMDE5cmUgZG9uZSFcbiAgICAgIC8vIE90aGVyd2lzZSwgY29weS1vbi13cml0ZS5cbiAgICAgIGlmIChvbiAhPT0gb24wKSB7XG4gICAgICAgIG9uMSA9IChvbjAgPSBvbikuY29weSgpO1xuICAgICAgICBvbjEuXy5jYW5jZWwucHVzaChjYW5jZWwpO1xuICAgICAgICBvbjEuXy5pbnRlcnJ1cHQucHVzaChjYW5jZWwpO1xuICAgICAgICBvbjEuXy5lbmQucHVzaChlbmQpO1xuICAgICAgfVxuXG4gICAgICBzY2hlZHVsZS5vbiA9IG9uMTtcbiAgICB9KTtcblxuICAgIC8vIFRoZSBzZWxlY3Rpb24gd2FzIGVtcHR5LCByZXNvbHZlIGVuZCBpbW1lZGlhdGVseVxuICAgIGlmIChzaXplID09PSAwKSByZXNvbHZlKCk7XG4gIH0pO1xufVxuIiwgImltcG9ydCB7c2VsZWN0aW9ufSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9hdHRyIGZyb20gXCIuL2F0dHIuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX2F0dHJUd2VlbiBmcm9tIFwiLi9hdHRyVHdlZW4uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX2RlbGF5IGZyb20gXCIuL2RlbGF5LmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9kdXJhdGlvbiBmcm9tIFwiLi9kdXJhdGlvbi5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fZWFzZSBmcm9tIFwiLi9lYXNlLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9lYXNlVmFyeWluZyBmcm9tIFwiLi9lYXNlVmFyeWluZy5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fZmlsdGVyIGZyb20gXCIuL2ZpbHRlci5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fbWVyZ2UgZnJvbSBcIi4vbWVyZ2UuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX29uIGZyb20gXCIuL29uLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9yZW1vdmUgZnJvbSBcIi4vcmVtb3ZlLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9zZWxlY3QgZnJvbSBcIi4vc2VsZWN0LmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9zZWxlY3RBbGwgZnJvbSBcIi4vc2VsZWN0QWxsLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9zZWxlY3Rpb24gZnJvbSBcIi4vc2VsZWN0aW9uLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9zdHlsZSBmcm9tIFwiLi9zdHlsZS5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fc3R5bGVUd2VlbiBmcm9tIFwiLi9zdHlsZVR3ZWVuLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl90ZXh0IGZyb20gXCIuL3RleHQuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3RleHRUd2VlbiBmcm9tIFwiLi90ZXh0VHdlZW4uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3RyYW5zaXRpb24gZnJvbSBcIi4vdHJhbnNpdGlvbi5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fdHdlZW4gZnJvbSBcIi4vdHdlZW4uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX2VuZCBmcm9tIFwiLi9lbmQuanNcIjtcblxudmFyIGlkID0gMDtcblxuZXhwb3J0IGZ1bmN0aW9uIFRyYW5zaXRpb24oZ3JvdXBzLCBwYXJlbnRzLCBuYW1lLCBpZCkge1xuICB0aGlzLl9ncm91cHMgPSBncm91cHM7XG4gIHRoaXMuX3BhcmVudHMgPSBwYXJlbnRzO1xuICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgdGhpcy5faWQgPSBpZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdHJhbnNpdGlvbihuYW1lKSB7XG4gIHJldHVybiBzZWxlY3Rpb24oKS50cmFuc2l0aW9uKG5hbWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbmV3SWQoKSB7XG4gIHJldHVybiArK2lkO1xufVxuXG52YXIgc2VsZWN0aW9uX3Byb3RvdHlwZSA9IHNlbGVjdGlvbi5wcm90b3R5cGU7XG5cblRyYW5zaXRpb24ucHJvdG90eXBlID0gdHJhbnNpdGlvbi5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBUcmFuc2l0aW9uLFxuICBzZWxlY3Q6IHRyYW5zaXRpb25fc2VsZWN0LFxuICBzZWxlY3RBbGw6IHRyYW5zaXRpb25fc2VsZWN0QWxsLFxuICBzZWxlY3RDaGlsZDogc2VsZWN0aW9uX3Byb3RvdHlwZS5zZWxlY3RDaGlsZCxcbiAgc2VsZWN0Q2hpbGRyZW46IHNlbGVjdGlvbl9wcm90b3R5cGUuc2VsZWN0Q2hpbGRyZW4sXG4gIGZpbHRlcjogdHJhbnNpdGlvbl9maWx0ZXIsXG4gIG1lcmdlOiB0cmFuc2l0aW9uX21lcmdlLFxuICBzZWxlY3Rpb246IHRyYW5zaXRpb25fc2VsZWN0aW9uLFxuICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uX3RyYW5zaXRpb24sXG4gIGNhbGw6IHNlbGVjdGlvbl9wcm90b3R5cGUuY2FsbCxcbiAgbm9kZXM6IHNlbGVjdGlvbl9wcm90b3R5cGUubm9kZXMsXG4gIG5vZGU6IHNlbGVjdGlvbl9wcm90b3R5cGUubm9kZSxcbiAgc2l6ZTogc2VsZWN0aW9uX3Byb3RvdHlwZS5zaXplLFxuICBlbXB0eTogc2VsZWN0aW9uX3Byb3RvdHlwZS5lbXB0eSxcbiAgZWFjaDogc2VsZWN0aW9uX3Byb3RvdHlwZS5lYWNoLFxuICBvbjogdHJhbnNpdGlvbl9vbixcbiAgYXR0cjogdHJhbnNpdGlvbl9hdHRyLFxuICBhdHRyVHdlZW46IHRyYW5zaXRpb25fYXR0clR3ZWVuLFxuICBzdHlsZTogdHJhbnNpdGlvbl9zdHlsZSxcbiAgc3R5bGVUd2VlbjogdHJhbnNpdGlvbl9zdHlsZVR3ZWVuLFxuICB0ZXh0OiB0cmFuc2l0aW9uX3RleHQsXG4gIHRleHRUd2VlbjogdHJhbnNpdGlvbl90ZXh0VHdlZW4sXG4gIHJlbW92ZTogdHJhbnNpdGlvbl9yZW1vdmUsXG4gIHR3ZWVuOiB0cmFuc2l0aW9uX3R3ZWVuLFxuICBkZWxheTogdHJhbnNpdGlvbl9kZWxheSxcbiAgZHVyYXRpb246IHRyYW5zaXRpb25fZHVyYXRpb24sXG4gIGVhc2U6IHRyYW5zaXRpb25fZWFzZSxcbiAgZWFzZVZhcnlpbmc6IHRyYW5zaXRpb25fZWFzZVZhcnlpbmcsXG4gIGVuZDogdHJhbnNpdGlvbl9lbmQsXG4gIFtTeW1ib2wuaXRlcmF0b3JdOiBzZWxlY3Rpb25fcHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl1cbn07XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGN1YmljSW4odCkge1xuICByZXR1cm4gdCAqIHQgKiB0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3ViaWNPdXQodCkge1xuICByZXR1cm4gLS10ICogdCAqIHQgKyAxO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3ViaWNJbk91dCh0KSB7XG4gIHJldHVybiAoKHQgKj0gMikgPD0gMSA/IHQgKiB0ICogdCA6ICh0IC09IDIpICogdCAqIHQgKyAyKSAvIDI7XG59XG4iLCAiaW1wb3J0IHtUcmFuc2l0aW9uLCBuZXdJZH0gZnJvbSBcIi4uL3RyYW5zaXRpb24vaW5kZXguanNcIjtcbmltcG9ydCBzY2hlZHVsZSBmcm9tIFwiLi4vdHJhbnNpdGlvbi9zY2hlZHVsZS5qc1wiO1xuaW1wb3J0IHtlYXNlQ3ViaWNJbk91dH0gZnJvbSBcImQzLWVhc2VcIjtcbmltcG9ydCB7bm93fSBmcm9tIFwiZDMtdGltZXJcIjtcblxudmFyIGRlZmF1bHRUaW1pbmcgPSB7XG4gIHRpbWU6IG51bGwsIC8vIFNldCBvbiB1c2UuXG4gIGRlbGF5OiAwLFxuICBkdXJhdGlvbjogMjUwLFxuICBlYXNlOiBlYXNlQ3ViaWNJbk91dFxufTtcblxuZnVuY3Rpb24gaW5oZXJpdChub2RlLCBpZCkge1xuICB2YXIgdGltaW5nO1xuICB3aGlsZSAoISh0aW1pbmcgPSBub2RlLl9fdHJhbnNpdGlvbikgfHwgISh0aW1pbmcgPSB0aW1pbmdbaWRdKSkge1xuICAgIGlmICghKG5vZGUgPSBub2RlLnBhcmVudE5vZGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHRyYW5zaXRpb24gJHtpZH0gbm90IGZvdW5kYCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB0aW1pbmc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUpIHtcbiAgdmFyIGlkLFxuICAgICAgdGltaW5nO1xuXG4gIGlmIChuYW1lIGluc3RhbmNlb2YgVHJhbnNpdGlvbikge1xuICAgIGlkID0gbmFtZS5faWQsIG5hbWUgPSBuYW1lLl9uYW1lO1xuICB9IGVsc2Uge1xuICAgIGlkID0gbmV3SWQoKSwgKHRpbWluZyA9IGRlZmF1bHRUaW1pbmcpLnRpbWUgPSBub3coKSwgbmFtZSA9IG5hbWUgPT0gbnVsbCA/IG51bGwgOiBuYW1lICsgXCJcIjtcbiAgfVxuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHNjaGVkdWxlKG5vZGUsIG5hbWUsIGlkLCBpLCBncm91cCwgdGltaW5nIHx8IGluaGVyaXQobm9kZSwgaWQpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFRyYW5zaXRpb24oZ3JvdXBzLCB0aGlzLl9wYXJlbnRzLCBuYW1lLCBpZCk7XG59XG4iLCAiaW1wb3J0IHtzZWxlY3Rpb259IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcbmltcG9ydCBzZWxlY3Rpb25faW50ZXJydXB0IGZyb20gXCIuL2ludGVycnVwdC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl90cmFuc2l0aW9uIGZyb20gXCIuL3RyYW5zaXRpb24uanNcIjtcblxuc2VsZWN0aW9uLnByb3RvdHlwZS5pbnRlcnJ1cHQgPSBzZWxlY3Rpb25faW50ZXJydXB0O1xuc2VsZWN0aW9uLnByb3RvdHlwZS50cmFuc2l0aW9uID0gc2VsZWN0aW9uX3RyYW5zaXRpb247XG4iLCAiaW1wb3J0IHtkaXNwYXRjaH0gZnJvbSBcImQzLWRpc3BhdGNoXCI7XG5pbXBvcnQge2RyYWdEaXNhYmxlLCBkcmFnRW5hYmxlfSBmcm9tIFwiZDMtZHJhZ1wiO1xuaW1wb3J0IHtpbnRlcnBvbGF0ZX0gZnJvbSBcImQzLWludGVycG9sYXRlXCI7XG5pbXBvcnQge3BvaW50ZXIsIHNlbGVjdH0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuaW1wb3J0IHtpbnRlcnJ1cHR9IGZyb20gXCJkMy10cmFuc2l0aW9uXCI7XG5pbXBvcnQgY29uc3RhbnQgZnJvbSBcIi4vY29uc3RhbnQuanNcIjtcbmltcG9ydCBCcnVzaEV2ZW50IGZyb20gXCIuL2V2ZW50LmpzXCI7XG5pbXBvcnQgbm9ldmVudCwge25vcHJvcGFnYXRpb259IGZyb20gXCIuL25vZXZlbnQuanNcIjtcblxudmFyIE1PREVfRFJBRyA9IHtuYW1lOiBcImRyYWdcIn0sXG4gICAgTU9ERV9TUEFDRSA9IHtuYW1lOiBcInNwYWNlXCJ9LFxuICAgIE1PREVfSEFORExFID0ge25hbWU6IFwiaGFuZGxlXCJ9LFxuICAgIE1PREVfQ0VOVEVSID0ge25hbWU6IFwiY2VudGVyXCJ9O1xuXG5jb25zdCB7YWJzLCBtYXgsIG1pbn0gPSBNYXRoO1xuXG5mdW5jdGlvbiBudW1iZXIxKGUpIHtcbiAgcmV0dXJuIFsrZVswXSwgK2VbMV1dO1xufVxuXG5mdW5jdGlvbiBudW1iZXIyKGUpIHtcbiAgcmV0dXJuIFtudW1iZXIxKGVbMF0pLCBudW1iZXIxKGVbMV0pXTtcbn1cblxudmFyIFggPSB7XG4gIG5hbWU6IFwieFwiLFxuICBoYW5kbGVzOiBbXCJ3XCIsIFwiZVwiXS5tYXAodHlwZSksXG4gIGlucHV0OiBmdW5jdGlvbih4LCBlKSB7IHJldHVybiB4ID09IG51bGwgPyBudWxsIDogW1sreFswXSwgZVswXVsxXV0sIFsreFsxXSwgZVsxXVsxXV1dOyB9LFxuICBvdXRwdXQ6IGZ1bmN0aW9uKHh5KSB7IHJldHVybiB4eSAmJiBbeHlbMF1bMF0sIHh5WzFdWzBdXTsgfVxufTtcblxudmFyIFkgPSB7XG4gIG5hbWU6IFwieVwiLFxuICBoYW5kbGVzOiBbXCJuXCIsIFwic1wiXS5tYXAodHlwZSksXG4gIGlucHV0OiBmdW5jdGlvbih5LCBlKSB7IHJldHVybiB5ID09IG51bGwgPyBudWxsIDogW1tlWzBdWzBdLCAreVswXV0sIFtlWzFdWzBdLCAreVsxXV1dOyB9LFxuICBvdXRwdXQ6IGZ1bmN0aW9uKHh5KSB7IHJldHVybiB4eSAmJiBbeHlbMF1bMV0sIHh5WzFdWzFdXTsgfVxufTtcblxudmFyIFhZID0ge1xuICBuYW1lOiBcInh5XCIsXG4gIGhhbmRsZXM6IFtcIm5cIiwgXCJ3XCIsIFwiZVwiLCBcInNcIiwgXCJud1wiLCBcIm5lXCIsIFwic3dcIiwgXCJzZVwiXS5tYXAodHlwZSksXG4gIGlucHV0OiBmdW5jdGlvbih4eSkgeyByZXR1cm4geHkgPT0gbnVsbCA/IG51bGwgOiBudW1iZXIyKHh5KTsgfSxcbiAgb3V0cHV0OiBmdW5jdGlvbih4eSkgeyByZXR1cm4geHk7IH1cbn07XG5cbnZhciBjdXJzb3JzID0ge1xuICBvdmVybGF5OiBcImNyb3NzaGFpclwiLFxuICBzZWxlY3Rpb246IFwibW92ZVwiLFxuICBuOiBcIm5zLXJlc2l6ZVwiLFxuICBlOiBcImV3LXJlc2l6ZVwiLFxuICBzOiBcIm5zLXJlc2l6ZVwiLFxuICB3OiBcImV3LXJlc2l6ZVwiLFxuICBudzogXCJud3NlLXJlc2l6ZVwiLFxuICBuZTogXCJuZXN3LXJlc2l6ZVwiLFxuICBzZTogXCJud3NlLXJlc2l6ZVwiLFxuICBzdzogXCJuZXN3LXJlc2l6ZVwiXG59O1xuXG52YXIgZmxpcFggPSB7XG4gIGU6IFwid1wiLFxuICB3OiBcImVcIixcbiAgbnc6IFwibmVcIixcbiAgbmU6IFwibndcIixcbiAgc2U6IFwic3dcIixcbiAgc3c6IFwic2VcIlxufTtcblxudmFyIGZsaXBZID0ge1xuICBuOiBcInNcIixcbiAgczogXCJuXCIsXG4gIG53OiBcInN3XCIsXG4gIG5lOiBcInNlXCIsXG4gIHNlOiBcIm5lXCIsXG4gIHN3OiBcIm53XCJcbn07XG5cbnZhciBzaWduc1ggPSB7XG4gIG92ZXJsYXk6ICsxLFxuICBzZWxlY3Rpb246ICsxLFxuICBuOiBudWxsLFxuICBlOiArMSxcbiAgczogbnVsbCxcbiAgdzogLTEsXG4gIG53OiAtMSxcbiAgbmU6ICsxLFxuICBzZTogKzEsXG4gIHN3OiAtMVxufTtcblxudmFyIHNpZ25zWSA9IHtcbiAgb3ZlcmxheTogKzEsXG4gIHNlbGVjdGlvbjogKzEsXG4gIG46IC0xLFxuICBlOiBudWxsLFxuICBzOiArMSxcbiAgdzogbnVsbCxcbiAgbnc6IC0xLFxuICBuZTogLTEsXG4gIHNlOiArMSxcbiAgc3c6ICsxXG59O1xuXG5mdW5jdGlvbiB0eXBlKHQpIHtcbiAgcmV0dXJuIHt0eXBlOiB0fTtcbn1cblxuLy8gSWdub3JlIHJpZ2h0LWNsaWNrLCBzaW5jZSB0aGF0IHNob3VsZCBvcGVuIHRoZSBjb250ZXh0IG1lbnUuXG5mdW5jdGlvbiBkZWZhdWx0RmlsdGVyKGV2ZW50KSB7XG4gIHJldHVybiAhZXZlbnQuY3RybEtleSAmJiAhZXZlbnQuYnV0dG9uO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0RXh0ZW50KCkge1xuICB2YXIgc3ZnID0gdGhpcy5vd25lclNWR0VsZW1lbnQgfHwgdGhpcztcbiAgaWYgKHN2Zy5oYXNBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIpKSB7XG4gICAgc3ZnID0gc3ZnLnZpZXdCb3guYmFzZVZhbDtcbiAgICByZXR1cm4gW1tzdmcueCwgc3ZnLnldLCBbc3ZnLnggKyBzdmcud2lkdGgsIHN2Zy55ICsgc3ZnLmhlaWdodF1dO1xuICB9XG4gIHJldHVybiBbWzAsIDBdLCBbc3ZnLndpZHRoLmJhc2VWYWwudmFsdWUsIHN2Zy5oZWlnaHQuYmFzZVZhbC52YWx1ZV1dO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0VG91Y2hhYmxlKCkge1xuICByZXR1cm4gbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzIHx8IChcIm9udG91Y2hzdGFydFwiIGluIHRoaXMpO1xufVxuXG4vLyBMaWtlIGQzLmxvY2FsLCBidXQgd2l0aCB0aGUgbmFtZSBcdTIwMUNfX2JydXNoXHUyMDFEIHJhdGhlciB0aGFuIGF1dG8tZ2VuZXJhdGVkLlxuZnVuY3Rpb24gbG9jYWwobm9kZSkge1xuICB3aGlsZSAoIW5vZGUuX19icnVzaCkgaWYgKCEobm9kZSA9IG5vZGUucGFyZW50Tm9kZSkpIHJldHVybjtcbiAgcmV0dXJuIG5vZGUuX19icnVzaDtcbn1cblxuZnVuY3Rpb24gZW1wdHkoZXh0ZW50KSB7XG4gIHJldHVybiBleHRlbnRbMF1bMF0gPT09IGV4dGVudFsxXVswXVxuICAgICAgfHwgZXh0ZW50WzBdWzFdID09PSBleHRlbnRbMV1bMV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBicnVzaFNlbGVjdGlvbihub2RlKSB7XG4gIHZhciBzdGF0ZSA9IG5vZGUuX19icnVzaDtcbiAgcmV0dXJuIHN0YXRlID8gc3RhdGUuZGltLm91dHB1dChzdGF0ZS5zZWxlY3Rpb24pIDogbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJydXNoWCgpIHtcbiAgcmV0dXJuIGJydXNoKFgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYnJ1c2hZKCkge1xuICByZXR1cm4gYnJ1c2goWSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gYnJ1c2goWFkpO1xufVxuXG5mdW5jdGlvbiBicnVzaChkaW0pIHtcbiAgdmFyIGV4dGVudCA9IGRlZmF1bHRFeHRlbnQsXG4gICAgICBmaWx0ZXIgPSBkZWZhdWx0RmlsdGVyLFxuICAgICAgdG91Y2hhYmxlID0gZGVmYXVsdFRvdWNoYWJsZSxcbiAgICAgIGtleXMgPSB0cnVlLFxuICAgICAgbGlzdGVuZXJzID0gZGlzcGF0Y2goXCJzdGFydFwiLCBcImJydXNoXCIsIFwiZW5kXCIpLFxuICAgICAgaGFuZGxlU2l6ZSA9IDYsXG4gICAgICB0b3VjaGVuZGluZztcblxuICBmdW5jdGlvbiBicnVzaChncm91cCkge1xuICAgIHZhciBvdmVybGF5ID0gZ3JvdXBcbiAgICAgICAgLnByb3BlcnR5KFwiX19icnVzaFwiLCBpbml0aWFsaXplKVxuICAgICAgLnNlbGVjdEFsbChcIi5vdmVybGF5XCIpXG4gICAgICAuZGF0YShbdHlwZShcIm92ZXJsYXlcIildKTtcblxuICAgIG92ZXJsYXkuZW50ZXIoKS5hcHBlbmQoXCJyZWN0XCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJvdmVybGF5XCIpXG4gICAgICAgIC5hdHRyKFwicG9pbnRlci1ldmVudHNcIiwgXCJhbGxcIilcbiAgICAgICAgLmF0dHIoXCJjdXJzb3JcIiwgY3Vyc29ycy5vdmVybGF5KVxuICAgICAgLm1lcmdlKG92ZXJsYXkpXG4gICAgICAgIC5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBleHRlbnQgPSBsb2NhbCh0aGlzKS5leHRlbnQ7XG4gICAgICAgICAgc2VsZWN0KHRoaXMpXG4gICAgICAgICAgICAgIC5hdHRyKFwieFwiLCBleHRlbnRbMF1bMF0pXG4gICAgICAgICAgICAgIC5hdHRyKFwieVwiLCBleHRlbnRbMF1bMV0pXG4gICAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgZXh0ZW50WzFdWzBdIC0gZXh0ZW50WzBdWzBdKVxuICAgICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBleHRlbnRbMV1bMV0gLSBleHRlbnRbMF1bMV0pO1xuICAgICAgICB9KTtcblxuICAgIGdyb3VwLnNlbGVjdEFsbChcIi5zZWxlY3Rpb25cIilcbiAgICAgIC5kYXRhKFt0eXBlKFwic2VsZWN0aW9uXCIpXSlcbiAgICAgIC5lbnRlcigpLmFwcGVuZChcInJlY3RcIilcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInNlbGVjdGlvblwiKVxuICAgICAgICAuYXR0cihcImN1cnNvclwiLCBjdXJzb3JzLnNlbGVjdGlvbilcbiAgICAgICAgLmF0dHIoXCJmaWxsXCIsIFwiIzc3N1wiKVxuICAgICAgICAuYXR0cihcImZpbGwtb3BhY2l0eVwiLCAwLjMpXG4gICAgICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwiI2ZmZlwiKVxuICAgICAgICAuYXR0cihcInNoYXBlLXJlbmRlcmluZ1wiLCBcImNyaXNwRWRnZXNcIik7XG5cbiAgICB2YXIgaGFuZGxlID0gZ3JvdXAuc2VsZWN0QWxsKFwiLmhhbmRsZVwiKVxuICAgICAgLmRhdGEoZGltLmhhbmRsZXMsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudHlwZTsgfSk7XG5cbiAgICBoYW5kbGUuZXhpdCgpLnJlbW92ZSgpO1xuXG4gICAgaGFuZGxlLmVudGVyKCkuYXBwZW5kKFwicmVjdFwiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwiaGFuZGxlIGhhbmRsZS0tXCIgKyBkLnR5cGU7IH0pXG4gICAgICAgIC5hdHRyKFwiY3Vyc29yXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGN1cnNvcnNbZC50eXBlXTsgfSk7XG5cbiAgICBncm91cFxuICAgICAgICAuZWFjaChyZWRyYXcpXG4gICAgICAgIC5hdHRyKFwiZmlsbFwiLCBcIm5vbmVcIilcbiAgICAgICAgLmF0dHIoXCJwb2ludGVyLWV2ZW50c1wiLCBcImFsbFwiKVxuICAgICAgICAub24oXCJtb3VzZWRvd24uYnJ1c2hcIiwgc3RhcnRlZClcbiAgICAgIC5maWx0ZXIodG91Y2hhYmxlKVxuICAgICAgICAub24oXCJ0b3VjaHN0YXJ0LmJydXNoXCIsIHN0YXJ0ZWQpXG4gICAgICAgIC5vbihcInRvdWNobW92ZS5icnVzaFwiLCB0b3VjaG1vdmVkKVxuICAgICAgICAub24oXCJ0b3VjaGVuZC5icnVzaCB0b3VjaGNhbmNlbC5icnVzaFwiLCB0b3VjaGVuZGVkKVxuICAgICAgICAuc3R5bGUoXCJ0b3VjaC1hY3Rpb25cIiwgXCJub25lXCIpXG4gICAgICAgIC5zdHlsZShcIi13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvclwiLCBcInJnYmEoMCwwLDAsMClcIik7XG4gIH1cblxuICBicnVzaC5tb3ZlID0gZnVuY3Rpb24oZ3JvdXAsIHNlbGVjdGlvbiwgZXZlbnQpIHtcbiAgICBpZiAoZ3JvdXAudHdlZW4pIHtcbiAgICAgIGdyb3VwXG4gICAgICAgICAgLm9uKFwic3RhcnQuYnJ1c2hcIiwgZnVuY3Rpb24oZXZlbnQpIHsgZW1pdHRlcih0aGlzLCBhcmd1bWVudHMpLmJlZm9yZXN0YXJ0KCkuc3RhcnQoZXZlbnQpOyB9KVxuICAgICAgICAgIC5vbihcImludGVycnVwdC5icnVzaCBlbmQuYnJ1c2hcIiwgZnVuY3Rpb24oZXZlbnQpIHsgZW1pdHRlcih0aGlzLCBhcmd1bWVudHMpLmVuZChldmVudCk7IH0pXG4gICAgICAgICAgLnR3ZWVuKFwiYnJ1c2hcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgICAgICAgICAgc3RhdGUgPSB0aGF0Ll9fYnJ1c2gsXG4gICAgICAgICAgICAgICAgZW1pdCA9IGVtaXR0ZXIodGhhdCwgYXJndW1lbnRzKSxcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb24wID0gc3RhdGUuc2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbjEgPSBkaW0uaW5wdXQodHlwZW9mIHNlbGVjdGlvbiA9PT0gXCJmdW5jdGlvblwiID8gc2VsZWN0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgOiBzZWxlY3Rpb24sIHN0YXRlLmV4dGVudCksXG4gICAgICAgICAgICAgICAgaSA9IGludGVycG9sYXRlKHNlbGVjdGlvbjAsIHNlbGVjdGlvbjEpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiB0d2Vlbih0KSB7XG4gICAgICAgICAgICAgIHN0YXRlLnNlbGVjdGlvbiA9IHQgPT09IDEgJiYgc2VsZWN0aW9uMSA9PT0gbnVsbCA/IG51bGwgOiBpKHQpO1xuICAgICAgICAgICAgICByZWRyYXcuY2FsbCh0aGF0KTtcbiAgICAgICAgICAgICAgZW1pdC5icnVzaCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0aW9uMCAhPT0gbnVsbCAmJiBzZWxlY3Rpb24xICE9PSBudWxsID8gdHdlZW4gOiB0d2VlbigxKTtcbiAgICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ3JvdXBcbiAgICAgICAgICAuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcyxcbiAgICAgICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgIHN0YXRlID0gdGhhdC5fX2JydXNoLFxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbjEgPSBkaW0uaW5wdXQodHlwZW9mIHNlbGVjdGlvbiA9PT0gXCJmdW5jdGlvblwiID8gc2VsZWN0aW9uLmFwcGx5KHRoYXQsIGFyZ3MpIDogc2VsZWN0aW9uLCBzdGF0ZS5leHRlbnQpLFxuICAgICAgICAgICAgICAgIGVtaXQgPSBlbWl0dGVyKHRoYXQsIGFyZ3MpLmJlZm9yZXN0YXJ0KCk7XG5cbiAgICAgICAgICAgIGludGVycnVwdCh0aGF0KTtcbiAgICAgICAgICAgIHN0YXRlLnNlbGVjdGlvbiA9IHNlbGVjdGlvbjEgPT09IG51bGwgPyBudWxsIDogc2VsZWN0aW9uMTtcbiAgICAgICAgICAgIHJlZHJhdy5jYWxsKHRoYXQpO1xuICAgICAgICAgICAgZW1pdC5zdGFydChldmVudCkuYnJ1c2goZXZlbnQpLmVuZChldmVudCk7XG4gICAgICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIGJydXNoLmNsZWFyID0gZnVuY3Rpb24oZ3JvdXAsIGV2ZW50KSB7XG4gICAgYnJ1c2gubW92ZShncm91cCwgbnVsbCwgZXZlbnQpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHJlZHJhdygpIHtcbiAgICB2YXIgZ3JvdXAgPSBzZWxlY3QodGhpcyksXG4gICAgICAgIHNlbGVjdGlvbiA9IGxvY2FsKHRoaXMpLnNlbGVjdGlvbjtcblxuICAgIGlmIChzZWxlY3Rpb24pIHtcbiAgICAgIGdyb3VwLnNlbGVjdEFsbChcIi5zZWxlY3Rpb25cIilcbiAgICAgICAgICAuc3R5bGUoXCJkaXNwbGF5XCIsIG51bGwpXG4gICAgICAgICAgLmF0dHIoXCJ4XCIsIHNlbGVjdGlvblswXVswXSlcbiAgICAgICAgICAuYXR0cihcInlcIiwgc2VsZWN0aW9uWzBdWzFdKVxuICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgc2VsZWN0aW9uWzFdWzBdIC0gc2VsZWN0aW9uWzBdWzBdKVxuICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIHNlbGVjdGlvblsxXVsxXSAtIHNlbGVjdGlvblswXVsxXSk7XG5cbiAgICAgIGdyb3VwLnNlbGVjdEFsbChcIi5oYW5kbGVcIilcbiAgICAgICAgICAuc3R5bGUoXCJkaXNwbGF5XCIsIG51bGwpXG4gICAgICAgICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudHlwZVtkLnR5cGUubGVuZ3RoIC0gMV0gPT09IFwiZVwiID8gc2VsZWN0aW9uWzFdWzBdIC0gaGFuZGxlU2l6ZSAvIDIgOiBzZWxlY3Rpb25bMF1bMF0gLSBoYW5kbGVTaXplIC8gMjsgfSlcbiAgICAgICAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC50eXBlWzBdID09PSBcInNcIiA/IHNlbGVjdGlvblsxXVsxXSAtIGhhbmRsZVNpemUgLyAyIDogc2VsZWN0aW9uWzBdWzFdIC0gaGFuZGxlU2l6ZSAvIDI7IH0pXG4gICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnR5cGUgPT09IFwiblwiIHx8IGQudHlwZSA9PT0gXCJzXCIgPyBzZWxlY3Rpb25bMV1bMF0gLSBzZWxlY3Rpb25bMF1bMF0gKyBoYW5kbGVTaXplIDogaGFuZGxlU2l6ZTsgfSlcbiAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnR5cGUgPT09IFwiZVwiIHx8IGQudHlwZSA9PT0gXCJ3XCIgPyBzZWxlY3Rpb25bMV1bMV0gLSBzZWxlY3Rpb25bMF1bMV0gKyBoYW5kbGVTaXplIDogaGFuZGxlU2l6ZTsgfSk7XG4gICAgfVxuXG4gICAgZWxzZSB7XG4gICAgICBncm91cC5zZWxlY3RBbGwoXCIuc2VsZWN0aW9uLC5oYW5kbGVcIilcbiAgICAgICAgICAuc3R5bGUoXCJkaXNwbGF5XCIsIFwibm9uZVwiKVxuICAgICAgICAgIC5hdHRyKFwieFwiLCBudWxsKVxuICAgICAgICAgIC5hdHRyKFwieVwiLCBudWxsKVxuICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgbnVsbClcbiAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBudWxsKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBlbWl0dGVyKHRoYXQsIGFyZ3MsIGNsZWFuKSB7XG4gICAgdmFyIGVtaXQgPSB0aGF0Ll9fYnJ1c2guZW1pdHRlcjtcbiAgICByZXR1cm4gZW1pdCAmJiAoIWNsZWFuIHx8ICFlbWl0LmNsZWFuKSA/IGVtaXQgOiBuZXcgRW1pdHRlcih0aGF0LCBhcmdzLCBjbGVhbik7XG4gIH1cblxuICBmdW5jdGlvbiBFbWl0dGVyKHRoYXQsIGFyZ3MsIGNsZWFuKSB7XG4gICAgdGhpcy50aGF0ID0gdGhhdDtcbiAgICB0aGlzLmFyZ3MgPSBhcmdzO1xuICAgIHRoaXMuc3RhdGUgPSB0aGF0Ll9fYnJ1c2g7XG4gICAgdGhpcy5hY3RpdmUgPSAwO1xuICAgIHRoaXMuY2xlYW4gPSBjbGVhbjtcbiAgfVxuXG4gIEVtaXR0ZXIucHJvdG90eXBlID0ge1xuICAgIGJlZm9yZXN0YXJ0OiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICgrK3RoaXMuYWN0aXZlID09PSAxKSB0aGlzLnN0YXRlLmVtaXR0ZXIgPSB0aGlzLCB0aGlzLnN0YXJ0aW5nID0gdHJ1ZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgc3RhcnQ6IGZ1bmN0aW9uKGV2ZW50LCBtb2RlKSB7XG4gICAgICBpZiAodGhpcy5zdGFydGluZykgdGhpcy5zdGFydGluZyA9IGZhbHNlLCB0aGlzLmVtaXQoXCJzdGFydFwiLCBldmVudCwgbW9kZSk7XG4gICAgICBlbHNlIHRoaXMuZW1pdChcImJydXNoXCIsIGV2ZW50KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgYnJ1c2g6IGZ1bmN0aW9uKGV2ZW50LCBtb2RlKSB7XG4gICAgICB0aGlzLmVtaXQoXCJicnVzaFwiLCBldmVudCwgbW9kZSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIGVuZDogZnVuY3Rpb24oZXZlbnQsIG1vZGUpIHtcbiAgICAgIGlmICgtLXRoaXMuYWN0aXZlID09PSAwKSBkZWxldGUgdGhpcy5zdGF0ZS5lbWl0dGVyLCB0aGlzLmVtaXQoXCJlbmRcIiwgZXZlbnQsIG1vZGUpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBlbWl0OiBmdW5jdGlvbih0eXBlLCBldmVudCwgbW9kZSkge1xuICAgICAgdmFyIGQgPSBzZWxlY3QodGhpcy50aGF0KS5kYXR1bSgpO1xuICAgICAgbGlzdGVuZXJzLmNhbGwoXG4gICAgICAgIHR5cGUsXG4gICAgICAgIHRoaXMudGhhdCxcbiAgICAgICAgbmV3IEJydXNoRXZlbnQodHlwZSwge1xuICAgICAgICAgIHNvdXJjZUV2ZW50OiBldmVudCxcbiAgICAgICAgICB0YXJnZXQ6IGJydXNoLFxuICAgICAgICAgIHNlbGVjdGlvbjogZGltLm91dHB1dCh0aGlzLnN0YXRlLnNlbGVjdGlvbiksXG4gICAgICAgICAgbW9kZSxcbiAgICAgICAgICBkaXNwYXRjaDogbGlzdGVuZXJzXG4gICAgICAgIH0pLFxuICAgICAgICBkXG4gICAgICApO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBzdGFydGVkKGV2ZW50KSB7XG4gICAgaWYgKHRvdWNoZW5kaW5nICYmICFldmVudC50b3VjaGVzKSByZXR1cm47XG4gICAgaWYgKCFmaWx0ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSkgcmV0dXJuO1xuXG4gICAgdmFyIHRoYXQgPSB0aGlzLFxuICAgICAgICB0eXBlID0gZXZlbnQudGFyZ2V0Ll9fZGF0YV9fLnR5cGUsXG4gICAgICAgIG1vZGUgPSAoa2V5cyAmJiBldmVudC5tZXRhS2V5ID8gdHlwZSA9IFwib3ZlcmxheVwiIDogdHlwZSkgPT09IFwic2VsZWN0aW9uXCIgPyBNT0RFX0RSQUcgOiAoa2V5cyAmJiBldmVudC5hbHRLZXkgPyBNT0RFX0NFTlRFUiA6IE1PREVfSEFORExFKSxcbiAgICAgICAgc2lnblggPSBkaW0gPT09IFkgPyBudWxsIDogc2lnbnNYW3R5cGVdLFxuICAgICAgICBzaWduWSA9IGRpbSA9PT0gWCA/IG51bGwgOiBzaWduc1lbdHlwZV0sXG4gICAgICAgIHN0YXRlID0gbG9jYWwodGhhdCksXG4gICAgICAgIGV4dGVudCA9IHN0YXRlLmV4dGVudCxcbiAgICAgICAgc2VsZWN0aW9uID0gc3RhdGUuc2VsZWN0aW9uLFxuICAgICAgICBXID0gZXh0ZW50WzBdWzBdLCB3MCwgdzEsXG4gICAgICAgIE4gPSBleHRlbnRbMF1bMV0sIG4wLCBuMSxcbiAgICAgICAgRSA9IGV4dGVudFsxXVswXSwgZTAsIGUxLFxuICAgICAgICBTID0gZXh0ZW50WzFdWzFdLCBzMCwgczEsXG4gICAgICAgIGR4ID0gMCxcbiAgICAgICAgZHkgPSAwLFxuICAgICAgICBtb3ZpbmcsXG4gICAgICAgIHNoaWZ0aW5nID0gc2lnblggJiYgc2lnblkgJiYga2V5cyAmJiBldmVudC5zaGlmdEtleSxcbiAgICAgICAgbG9ja1gsXG4gICAgICAgIGxvY2tZLFxuICAgICAgICBwb2ludHMgPSBBcnJheS5mcm9tKGV2ZW50LnRvdWNoZXMgfHwgW2V2ZW50XSwgdCA9PiB7XG4gICAgICAgICAgY29uc3QgaSA9IHQuaWRlbnRpZmllcjtcbiAgICAgICAgICB0ID0gcG9pbnRlcih0LCB0aGF0KTtcbiAgICAgICAgICB0LnBvaW50MCA9IHQuc2xpY2UoKTtcbiAgICAgICAgICB0LmlkZW50aWZpZXIgPSBpO1xuICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9KTtcblxuICAgIGludGVycnVwdCh0aGF0KTtcbiAgICB2YXIgZW1pdCA9IGVtaXR0ZXIodGhhdCwgYXJndW1lbnRzLCB0cnVlKS5iZWZvcmVzdGFydCgpO1xuXG4gICAgaWYgKHR5cGUgPT09IFwib3ZlcmxheVwiKSB7XG4gICAgICBpZiAoc2VsZWN0aW9uKSBtb3ZpbmcgPSB0cnVlO1xuICAgICAgY29uc3QgcHRzID0gW3BvaW50c1swXSwgcG9pbnRzWzFdIHx8IHBvaW50c1swXV07XG4gICAgICBzdGF0ZS5zZWxlY3Rpb24gPSBzZWxlY3Rpb24gPSBbW1xuICAgICAgICAgIHcwID0gZGltID09PSBZID8gVyA6IG1pbihwdHNbMF1bMF0sIHB0c1sxXVswXSksXG4gICAgICAgICAgbjAgPSBkaW0gPT09IFggPyBOIDogbWluKHB0c1swXVsxXSwgcHRzWzFdWzFdKVxuICAgICAgICBdLCBbXG4gICAgICAgICAgZTAgPSBkaW0gPT09IFkgPyBFIDogbWF4KHB0c1swXVswXSwgcHRzWzFdWzBdKSxcbiAgICAgICAgICBzMCA9IGRpbSA9PT0gWCA/IFMgOiBtYXgocHRzWzBdWzFdLCBwdHNbMV1bMV0pXG4gICAgICAgIF1dO1xuICAgICAgaWYgKHBvaW50cy5sZW5ndGggPiAxKSBtb3ZlKGV2ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdzAgPSBzZWxlY3Rpb25bMF1bMF07XG4gICAgICBuMCA9IHNlbGVjdGlvblswXVsxXTtcbiAgICAgIGUwID0gc2VsZWN0aW9uWzFdWzBdO1xuICAgICAgczAgPSBzZWxlY3Rpb25bMV1bMV07XG4gICAgfVxuXG4gICAgdzEgPSB3MDtcbiAgICBuMSA9IG4wO1xuICAgIGUxID0gZTA7XG4gICAgczEgPSBzMDtcblxuICAgIHZhciBncm91cCA9IHNlbGVjdCh0aGF0KVxuICAgICAgICAuYXR0cihcInBvaW50ZXItZXZlbnRzXCIsIFwibm9uZVwiKTtcblxuICAgIHZhciBvdmVybGF5ID0gZ3JvdXAuc2VsZWN0QWxsKFwiLm92ZXJsYXlcIilcbiAgICAgICAgLmF0dHIoXCJjdXJzb3JcIiwgY3Vyc29yc1t0eXBlXSk7XG5cbiAgICBpZiAoZXZlbnQudG91Y2hlcykge1xuICAgICAgZW1pdC5tb3ZlZCA9IG1vdmVkO1xuICAgICAgZW1pdC5lbmRlZCA9IGVuZGVkO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdmlldyA9IHNlbGVjdChldmVudC52aWV3KVxuICAgICAgICAgIC5vbihcIm1vdXNlbW92ZS5icnVzaFwiLCBtb3ZlZCwgdHJ1ZSlcbiAgICAgICAgICAub24oXCJtb3VzZXVwLmJydXNoXCIsIGVuZGVkLCB0cnVlKTtcbiAgICAgIGlmIChrZXlzKSB2aWV3XG4gICAgICAgICAgLm9uKFwia2V5ZG93bi5icnVzaFwiLCBrZXlkb3duZWQsIHRydWUpXG4gICAgICAgICAgLm9uKFwia2V5dXAuYnJ1c2hcIiwga2V5dXBwZWQsIHRydWUpXG5cbiAgICAgIGRyYWdEaXNhYmxlKGV2ZW50LnZpZXcpO1xuICAgIH1cblxuICAgIHJlZHJhdy5jYWxsKHRoYXQpO1xuICAgIGVtaXQuc3RhcnQoZXZlbnQsIG1vZGUubmFtZSk7XG5cbiAgICBmdW5jdGlvbiBtb3ZlZChldmVudCkge1xuICAgICAgZm9yIChjb25zdCBwIG9mIGV2ZW50LmNoYW5nZWRUb3VjaGVzIHx8IFtldmVudF0pIHtcbiAgICAgICAgZm9yIChjb25zdCBkIG9mIHBvaW50cylcbiAgICAgICAgICBpZiAoZC5pZGVudGlmaWVyID09PSBwLmlkZW50aWZpZXIpIGQuY3VyID0gcG9pbnRlcihwLCB0aGF0KTtcbiAgICAgIH1cbiAgICAgIGlmIChzaGlmdGluZyAmJiAhbG9ja1ggJiYgIWxvY2tZICYmIHBvaW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgY29uc3QgcG9pbnQgPSBwb2ludHNbMF07XG4gICAgICAgIGlmIChhYnMocG9pbnQuY3VyWzBdIC0gcG9pbnRbMF0pID4gYWJzKHBvaW50LmN1clsxXSAtIHBvaW50WzFdKSlcbiAgICAgICAgICBsb2NrWSA9IHRydWU7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBsb2NrWCA9IHRydWU7XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IHBvaW50IG9mIHBvaW50cylcbiAgICAgICAgaWYgKHBvaW50LmN1cikgcG9pbnRbMF0gPSBwb2ludC5jdXJbMF0sIHBvaW50WzFdID0gcG9pbnQuY3VyWzFdO1xuICAgICAgbW92aW5nID0gdHJ1ZTtcbiAgICAgIG5vZXZlbnQoZXZlbnQpO1xuICAgICAgbW92ZShldmVudCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW92ZShldmVudCkge1xuICAgICAgY29uc3QgcG9pbnQgPSBwb2ludHNbMF0sIHBvaW50MCA9IHBvaW50LnBvaW50MDtcbiAgICAgIHZhciB0O1xuXG4gICAgICBkeCA9IHBvaW50WzBdIC0gcG9pbnQwWzBdO1xuICAgICAgZHkgPSBwb2ludFsxXSAtIHBvaW50MFsxXTtcblxuICAgICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICAgIGNhc2UgTU9ERV9TUEFDRTpcbiAgICAgICAgY2FzZSBNT0RFX0RSQUc6IHtcbiAgICAgICAgICBpZiAoc2lnblgpIGR4ID0gbWF4KFcgLSB3MCwgbWluKEUgLSBlMCwgZHgpKSwgdzEgPSB3MCArIGR4LCBlMSA9IGUwICsgZHg7XG4gICAgICAgICAgaWYgKHNpZ25ZKSBkeSA9IG1heChOIC0gbjAsIG1pbihTIC0gczAsIGR5KSksIG4xID0gbjAgKyBkeSwgczEgPSBzMCArIGR5O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgTU9ERV9IQU5ETEU6IHtcbiAgICAgICAgICBpZiAocG9pbnRzWzFdKSB7XG4gICAgICAgICAgICBpZiAoc2lnblgpIHcxID0gbWF4KFcsIG1pbihFLCBwb2ludHNbMF1bMF0pKSwgZTEgPSBtYXgoVywgbWluKEUsIHBvaW50c1sxXVswXSkpLCBzaWduWCA9IDE7XG4gICAgICAgICAgICBpZiAoc2lnblkpIG4xID0gbWF4KE4sIG1pbihTLCBwb2ludHNbMF1bMV0pKSwgczEgPSBtYXgoTiwgbWluKFMsIHBvaW50c1sxXVsxXSkpLCBzaWduWSA9IDE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChzaWduWCA8IDApIGR4ID0gbWF4KFcgLSB3MCwgbWluKEUgLSB3MCwgZHgpKSwgdzEgPSB3MCArIGR4LCBlMSA9IGUwO1xuICAgICAgICAgICAgZWxzZSBpZiAoc2lnblggPiAwKSBkeCA9IG1heChXIC0gZTAsIG1pbihFIC0gZTAsIGR4KSksIHcxID0gdzAsIGUxID0gZTAgKyBkeDtcbiAgICAgICAgICAgIGlmIChzaWduWSA8IDApIGR5ID0gbWF4KE4gLSBuMCwgbWluKFMgLSBuMCwgZHkpKSwgbjEgPSBuMCArIGR5LCBzMSA9IHMwO1xuICAgICAgICAgICAgZWxzZSBpZiAoc2lnblkgPiAwKSBkeSA9IG1heChOIC0gczAsIG1pbihTIC0gczAsIGR5KSksIG4xID0gbjAsIHMxID0gczAgKyBkeTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBNT0RFX0NFTlRFUjoge1xuICAgICAgICAgIGlmIChzaWduWCkgdzEgPSBtYXgoVywgbWluKEUsIHcwIC0gZHggKiBzaWduWCkpLCBlMSA9IG1heChXLCBtaW4oRSwgZTAgKyBkeCAqIHNpZ25YKSk7XG4gICAgICAgICAgaWYgKHNpZ25ZKSBuMSA9IG1heChOLCBtaW4oUywgbjAgLSBkeSAqIHNpZ25ZKSksIHMxID0gbWF4KE4sIG1pbihTLCBzMCArIGR5ICogc2lnblkpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZTEgPCB3MSkge1xuICAgICAgICBzaWduWCAqPSAtMTtcbiAgICAgICAgdCA9IHcwLCB3MCA9IGUwLCBlMCA9IHQ7XG4gICAgICAgIHQgPSB3MSwgdzEgPSBlMSwgZTEgPSB0O1xuICAgICAgICBpZiAodHlwZSBpbiBmbGlwWCkgb3ZlcmxheS5hdHRyKFwiY3Vyc29yXCIsIGN1cnNvcnNbdHlwZSA9IGZsaXBYW3R5cGVdXSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzMSA8IG4xKSB7XG4gICAgICAgIHNpZ25ZICo9IC0xO1xuICAgICAgICB0ID0gbjAsIG4wID0gczAsIHMwID0gdDtcbiAgICAgICAgdCA9IG4xLCBuMSA9IHMxLCBzMSA9IHQ7XG4gICAgICAgIGlmICh0eXBlIGluIGZsaXBZKSBvdmVybGF5LmF0dHIoXCJjdXJzb3JcIiwgY3Vyc29yc1t0eXBlID0gZmxpcFlbdHlwZV1dKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXRlLnNlbGVjdGlvbikgc2VsZWN0aW9uID0gc3RhdGUuc2VsZWN0aW9uOyAvLyBNYXkgYmUgc2V0IGJ5IGJydXNoLm1vdmUhXG4gICAgICBpZiAobG9ja1gpIHcxID0gc2VsZWN0aW9uWzBdWzBdLCBlMSA9IHNlbGVjdGlvblsxXVswXTtcbiAgICAgIGlmIChsb2NrWSkgbjEgPSBzZWxlY3Rpb25bMF1bMV0sIHMxID0gc2VsZWN0aW9uWzFdWzFdO1xuXG4gICAgICBpZiAoc2VsZWN0aW9uWzBdWzBdICE9PSB3MVxuICAgICAgICAgIHx8IHNlbGVjdGlvblswXVsxXSAhPT0gbjFcbiAgICAgICAgICB8fCBzZWxlY3Rpb25bMV1bMF0gIT09IGUxXG4gICAgICAgICAgfHwgc2VsZWN0aW9uWzFdWzFdICE9PSBzMSkge1xuICAgICAgICBzdGF0ZS5zZWxlY3Rpb24gPSBbW3cxLCBuMV0sIFtlMSwgczFdXTtcbiAgICAgICAgcmVkcmF3LmNhbGwodGhhdCk7XG4gICAgICAgIGVtaXQuYnJ1c2goZXZlbnQsIG1vZGUubmFtZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZW5kZWQoZXZlbnQpIHtcbiAgICAgIG5vcHJvcGFnYXRpb24oZXZlbnQpO1xuICAgICAgaWYgKGV2ZW50LnRvdWNoZXMpIHtcbiAgICAgICAgaWYgKGV2ZW50LnRvdWNoZXMubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIGlmICh0b3VjaGVuZGluZykgY2xlYXJUaW1lb3V0KHRvdWNoZW5kaW5nKTtcbiAgICAgICAgdG91Y2hlbmRpbmcgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyB0b3VjaGVuZGluZyA9IG51bGw7IH0sIDUwMCk7IC8vIEdob3N0IGNsaWNrcyBhcmUgZGVsYXllZCFcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRyYWdFbmFibGUoZXZlbnQudmlldywgbW92aW5nKTtcbiAgICAgICAgdmlldy5vbihcImtleWRvd24uYnJ1c2gga2V5dXAuYnJ1c2ggbW91c2Vtb3ZlLmJydXNoIG1vdXNldXAuYnJ1c2hcIiwgbnVsbCk7XG4gICAgICB9XG4gICAgICBncm91cC5hdHRyKFwicG9pbnRlci1ldmVudHNcIiwgXCJhbGxcIik7XG4gICAgICBvdmVybGF5LmF0dHIoXCJjdXJzb3JcIiwgY3Vyc29ycy5vdmVybGF5KTtcbiAgICAgIGlmIChzdGF0ZS5zZWxlY3Rpb24pIHNlbGVjdGlvbiA9IHN0YXRlLnNlbGVjdGlvbjsgLy8gTWF5IGJlIHNldCBieSBicnVzaC5tb3ZlIChvbiBzdGFydCkhXG4gICAgICBpZiAoZW1wdHkoc2VsZWN0aW9uKSkgc3RhdGUuc2VsZWN0aW9uID0gbnVsbCwgcmVkcmF3LmNhbGwodGhhdCk7XG4gICAgICBlbWl0LmVuZChldmVudCwgbW9kZS5uYW1lKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBrZXlkb3duZWQoZXZlbnQpIHtcbiAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xuICAgICAgICBjYXNlIDE2OiB7IC8vIFNISUZUXG4gICAgICAgICAgc2hpZnRpbmcgPSBzaWduWCAmJiBzaWduWTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDE4OiB7IC8vIEFMVFxuICAgICAgICAgIGlmIChtb2RlID09PSBNT0RFX0hBTkRMRSkge1xuICAgICAgICAgICAgaWYgKHNpZ25YKSBlMCA9IGUxIC0gZHggKiBzaWduWCwgdzAgPSB3MSArIGR4ICogc2lnblg7XG4gICAgICAgICAgICBpZiAoc2lnblkpIHMwID0gczEgLSBkeSAqIHNpZ25ZLCBuMCA9IG4xICsgZHkgKiBzaWduWTtcbiAgICAgICAgICAgIG1vZGUgPSBNT0RFX0NFTlRFUjtcbiAgICAgICAgICAgIG1vdmUoZXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDMyOiB7IC8vIFNQQUNFOyB0YWtlcyBwcmlvcml0eSBvdmVyIEFMVFxuICAgICAgICAgIGlmIChtb2RlID09PSBNT0RFX0hBTkRMRSB8fCBtb2RlID09PSBNT0RFX0NFTlRFUikge1xuICAgICAgICAgICAgaWYgKHNpZ25YIDwgMCkgZTAgPSBlMSAtIGR4OyBlbHNlIGlmIChzaWduWCA+IDApIHcwID0gdzEgLSBkeDtcbiAgICAgICAgICAgIGlmIChzaWduWSA8IDApIHMwID0gczEgLSBkeTsgZWxzZSBpZiAoc2lnblkgPiAwKSBuMCA9IG4xIC0gZHk7XG4gICAgICAgICAgICBtb2RlID0gTU9ERV9TUEFDRTtcbiAgICAgICAgICAgIG92ZXJsYXkuYXR0cihcImN1cnNvclwiLCBjdXJzb3JzLnNlbGVjdGlvbik7XG4gICAgICAgICAgICBtb3ZlKGV2ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDogcmV0dXJuO1xuICAgICAgfVxuICAgICAgbm9ldmVudChldmVudCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24ga2V5dXBwZWQoZXZlbnQpIHtcbiAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xuICAgICAgICBjYXNlIDE2OiB7IC8vIFNISUZUXG4gICAgICAgICAgaWYgKHNoaWZ0aW5nKSB7XG4gICAgICAgICAgICBsb2NrWCA9IGxvY2tZID0gc2hpZnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIG1vdmUoZXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDE4OiB7IC8vIEFMVFxuICAgICAgICAgIGlmIChtb2RlID09PSBNT0RFX0NFTlRFUikge1xuICAgICAgICAgICAgaWYgKHNpZ25YIDwgMCkgZTAgPSBlMTsgZWxzZSBpZiAoc2lnblggPiAwKSB3MCA9IHcxO1xuICAgICAgICAgICAgaWYgKHNpZ25ZIDwgMCkgczAgPSBzMTsgZWxzZSBpZiAoc2lnblkgPiAwKSBuMCA9IG4xO1xuICAgICAgICAgICAgbW9kZSA9IE1PREVfSEFORExFO1xuICAgICAgICAgICAgbW92ZShldmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgMzI6IHsgLy8gU1BBQ0VcbiAgICAgICAgICBpZiAobW9kZSA9PT0gTU9ERV9TUEFDRSkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmFsdEtleSkge1xuICAgICAgICAgICAgICBpZiAoc2lnblgpIGUwID0gZTEgLSBkeCAqIHNpZ25YLCB3MCA9IHcxICsgZHggKiBzaWduWDtcbiAgICAgICAgICAgICAgaWYgKHNpZ25ZKSBzMCA9IHMxIC0gZHkgKiBzaWduWSwgbjAgPSBuMSArIGR5ICogc2lnblk7XG4gICAgICAgICAgICAgIG1vZGUgPSBNT0RFX0NFTlRFUjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmIChzaWduWCA8IDApIGUwID0gZTE7IGVsc2UgaWYgKHNpZ25YID4gMCkgdzAgPSB3MTtcbiAgICAgICAgICAgICAgaWYgKHNpZ25ZIDwgMCkgczAgPSBzMTsgZWxzZSBpZiAoc2lnblkgPiAwKSBuMCA9IG4xO1xuICAgICAgICAgICAgICBtb2RlID0gTU9ERV9IQU5ETEU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdmVybGF5LmF0dHIoXCJjdXJzb3JcIiwgY3Vyc29yc1t0eXBlXSk7XG4gICAgICAgICAgICBtb3ZlKGV2ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDogcmV0dXJuO1xuICAgICAgfVxuICAgICAgbm9ldmVudChldmVudCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdG91Y2htb3ZlZChldmVudCkge1xuICAgIGVtaXR0ZXIodGhpcywgYXJndW1lbnRzKS5tb3ZlZChldmVudCk7XG4gIH1cblxuICBmdW5jdGlvbiB0b3VjaGVuZGVkKGV2ZW50KSB7XG4gICAgZW1pdHRlcih0aGlzLCBhcmd1bWVudHMpLmVuZGVkKGV2ZW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG4gICAgdmFyIHN0YXRlID0gdGhpcy5fX2JydXNoIHx8IHtzZWxlY3Rpb246IG51bGx9O1xuICAgIHN0YXRlLmV4dGVudCA9IG51bWJlcjIoZXh0ZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgIHN0YXRlLmRpbSA9IGRpbTtcbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cblxuICBicnVzaC5leHRlbnQgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoZXh0ZW50ID0gdHlwZW9mIF8gPT09IFwiZnVuY3Rpb25cIiA/IF8gOiBjb25zdGFudChudW1iZXIyKF8pKSwgYnJ1c2gpIDogZXh0ZW50O1xuICB9O1xuXG4gIGJydXNoLmZpbHRlciA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChmaWx0ZXIgPSB0eXBlb2YgXyA9PT0gXCJmdW5jdGlvblwiID8gXyA6IGNvbnN0YW50KCEhXyksIGJydXNoKSA6IGZpbHRlcjtcbiAgfTtcblxuICBicnVzaC50b3VjaGFibGUgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAodG91Y2hhYmxlID0gdHlwZW9mIF8gPT09IFwiZnVuY3Rpb25cIiA/IF8gOiBjb25zdGFudCghIV8pLCBicnVzaCkgOiB0b3VjaGFibGU7XG4gIH07XG5cbiAgYnJ1c2guaGFuZGxlU2l6ZSA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChoYW5kbGVTaXplID0gK18sIGJydXNoKSA6IGhhbmRsZVNpemU7XG4gIH07XG5cbiAgYnJ1c2gua2V5TW9kaWZpZXJzID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKGtleXMgPSAhIV8sIGJydXNoKSA6IGtleXM7XG4gIH07XG5cbiAgYnJ1c2gub24gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdmFsdWUgPSBsaXN0ZW5lcnMub24uYXBwbHkobGlzdGVuZXJzLCBhcmd1bWVudHMpO1xuICAgIHJldHVybiB2YWx1ZSA9PT0gbGlzdGVuZXJzID8gYnJ1c2ggOiB2YWx1ZTtcbiAgfTtcblxuICByZXR1cm4gYnJ1c2g7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oeCkge1xuICByZXR1cm4gTWF0aC5hYnMoeCA9IE1hdGgucm91bmQoeCkpID49IDFlMjFcbiAgICAgID8geC50b0xvY2FsZVN0cmluZyhcImVuXCIpLnJlcGxhY2UoLywvZywgXCJcIilcbiAgICAgIDogeC50b1N0cmluZygxMCk7XG59XG5cbi8vIENvbXB1dGVzIHRoZSBkZWNpbWFsIGNvZWZmaWNpZW50IGFuZCBleHBvbmVudCBvZiB0aGUgc3BlY2lmaWVkIG51bWJlciB4IHdpdGhcbi8vIHNpZ25pZmljYW50IGRpZ2l0cyBwLCB3aGVyZSB4IGlzIHBvc2l0aXZlIGFuZCBwIGlzIGluIFsxLCAyMV0gb3IgdW5kZWZpbmVkLlxuLy8gRm9yIGV4YW1wbGUsIGZvcm1hdERlY2ltYWxQYXJ0cygxLjIzKSByZXR1cm5zIFtcIjEyM1wiLCAwXS5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREZWNpbWFsUGFydHMoeCwgcCkge1xuICBpZiAoKGkgPSAoeCA9IHAgPyB4LnRvRXhwb25lbnRpYWwocCAtIDEpIDogeC50b0V4cG9uZW50aWFsKCkpLmluZGV4T2YoXCJlXCIpKSA8IDApIHJldHVybiBudWxsOyAvLyBOYU4sIFx1MDBCMUluZmluaXR5XG4gIHZhciBpLCBjb2VmZmljaWVudCA9IHguc2xpY2UoMCwgaSk7XG5cbiAgLy8gVGhlIHN0cmluZyByZXR1cm5lZCBieSB0b0V4cG9uZW50aWFsIGVpdGhlciBoYXMgdGhlIGZvcm0gXFxkXFwuXFxkK2VbLStdXFxkK1xuICAvLyAoZS5nLiwgMS4yZSszKSBvciB0aGUgZm9ybSBcXGRlWy0rXVxcZCsgKGUuZy4sIDFlKzMpLlxuICByZXR1cm4gW1xuICAgIGNvZWZmaWNpZW50Lmxlbmd0aCA+IDEgPyBjb2VmZmljaWVudFswXSArIGNvZWZmaWNpZW50LnNsaWNlKDIpIDogY29lZmZpY2llbnQsXG4gICAgK3guc2xpY2UoaSArIDEpXG4gIF07XG59XG4iLCAiaW1wb3J0IHtmb3JtYXREZWNpbWFsUGFydHN9IGZyb20gXCIuL2Zvcm1hdERlY2ltYWwuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oeCkge1xuICByZXR1cm4geCA9IGZvcm1hdERlY2ltYWxQYXJ0cyhNYXRoLmFicyh4KSksIHggPyB4WzFdIDogTmFOO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGdyb3VwaW5nLCB0aG91c2FuZHMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCB3aWR0aCkge1xuICAgIHZhciBpID0gdmFsdWUubGVuZ3RoLFxuICAgICAgICB0ID0gW10sXG4gICAgICAgIGogPSAwLFxuICAgICAgICBnID0gZ3JvdXBpbmdbMF0sXG4gICAgICAgIGxlbmd0aCA9IDA7XG5cbiAgICB3aGlsZSAoaSA+IDAgJiYgZyA+IDApIHtcbiAgICAgIGlmIChsZW5ndGggKyBnICsgMSA+IHdpZHRoKSBnID0gTWF0aC5tYXgoMSwgd2lkdGggLSBsZW5ndGgpO1xuICAgICAgdC5wdXNoKHZhbHVlLnN1YnN0cmluZyhpIC09IGcsIGkgKyBnKSk7XG4gICAgICBpZiAoKGxlbmd0aCArPSBnICsgMSkgPiB3aWR0aCkgYnJlYWs7XG4gICAgICBnID0gZ3JvdXBpbmdbaiA9IChqICsgMSkgJSBncm91cGluZy5sZW5ndGhdO1xuICAgIH1cblxuICAgIHJldHVybiB0LnJldmVyc2UoKS5qb2luKHRob3VzYW5kcyk7XG4gIH07XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obnVtZXJhbHMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoL1swLTldL2csIGZ1bmN0aW9uKGkpIHtcbiAgICAgIHJldHVybiBudW1lcmFsc1sraV07XG4gICAgfSk7XG4gIH07XG59XG4iLCAiLy8gW1tmaWxsXWFsaWduXVtzaWduXVtzeW1ib2xdWzBdW3dpZHRoXVssXVsucHJlY2lzaW9uXVt+XVt0eXBlXVxudmFyIHJlID0gL14oPzooLik/KFs8Pj1eXSkpPyhbK1xcLSggXSk/KFskI10pPygwKT8oXFxkKyk/KCwpPyhcXC5cXGQrKT8ofik/KFthLXolXSk/JC9pO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBmb3JtYXRTcGVjaWZpZXIoc3BlY2lmaWVyKSB7XG4gIGlmICghKG1hdGNoID0gcmUuZXhlYyhzcGVjaWZpZXIpKSkgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBmb3JtYXQ6IFwiICsgc3BlY2lmaWVyKTtcbiAgdmFyIG1hdGNoO1xuICByZXR1cm4gbmV3IEZvcm1hdFNwZWNpZmllcih7XG4gICAgZmlsbDogbWF0Y2hbMV0sXG4gICAgYWxpZ246IG1hdGNoWzJdLFxuICAgIHNpZ246IG1hdGNoWzNdLFxuICAgIHN5bWJvbDogbWF0Y2hbNF0sXG4gICAgemVybzogbWF0Y2hbNV0sXG4gICAgd2lkdGg6IG1hdGNoWzZdLFxuICAgIGNvbW1hOiBtYXRjaFs3XSxcbiAgICBwcmVjaXNpb246IG1hdGNoWzhdICYmIG1hdGNoWzhdLnNsaWNlKDEpLFxuICAgIHRyaW06IG1hdGNoWzldLFxuICAgIHR5cGU6IG1hdGNoWzEwXVxuICB9KTtcbn1cblxuZm9ybWF0U3BlY2lmaWVyLnByb3RvdHlwZSA9IEZvcm1hdFNwZWNpZmllci5wcm90b3R5cGU7IC8vIGluc3RhbmNlb2ZcblxuZXhwb3J0IGZ1bmN0aW9uIEZvcm1hdFNwZWNpZmllcihzcGVjaWZpZXIpIHtcbiAgdGhpcy5maWxsID0gc3BlY2lmaWVyLmZpbGwgPT09IHVuZGVmaW5lZCA/IFwiIFwiIDogc3BlY2lmaWVyLmZpbGwgKyBcIlwiO1xuICB0aGlzLmFsaWduID0gc3BlY2lmaWVyLmFsaWduID09PSB1bmRlZmluZWQgPyBcIj5cIiA6IHNwZWNpZmllci5hbGlnbiArIFwiXCI7XG4gIHRoaXMuc2lnbiA9IHNwZWNpZmllci5zaWduID09PSB1bmRlZmluZWQgPyBcIi1cIiA6IHNwZWNpZmllci5zaWduICsgXCJcIjtcbiAgdGhpcy5zeW1ib2wgPSBzcGVjaWZpZXIuc3ltYm9sID09PSB1bmRlZmluZWQgPyBcIlwiIDogc3BlY2lmaWVyLnN5bWJvbCArIFwiXCI7XG4gIHRoaXMuemVybyA9ICEhc3BlY2lmaWVyLnplcm87XG4gIHRoaXMud2lkdGggPSBzcGVjaWZpZXIud2lkdGggPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6ICtzcGVjaWZpZXIud2lkdGg7XG4gIHRoaXMuY29tbWEgPSAhIXNwZWNpZmllci5jb21tYTtcbiAgdGhpcy5wcmVjaXNpb24gPSBzcGVjaWZpZXIucHJlY2lzaW9uID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiArc3BlY2lmaWVyLnByZWNpc2lvbjtcbiAgdGhpcy50cmltID0gISFzcGVjaWZpZXIudHJpbTtcbiAgdGhpcy50eXBlID0gc3BlY2lmaWVyLnR5cGUgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBzcGVjaWZpZXIudHlwZSArIFwiXCI7XG59XG5cbkZvcm1hdFNwZWNpZmllci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZmlsbFxuICAgICAgKyB0aGlzLmFsaWduXG4gICAgICArIHRoaXMuc2lnblxuICAgICAgKyB0aGlzLnN5bWJvbFxuICAgICAgKyAodGhpcy56ZXJvID8gXCIwXCIgOiBcIlwiKVxuICAgICAgKyAodGhpcy53aWR0aCA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IE1hdGgubWF4KDEsIHRoaXMud2lkdGggfCAwKSlcbiAgICAgICsgKHRoaXMuY29tbWEgPyBcIixcIiA6IFwiXCIpXG4gICAgICArICh0aGlzLnByZWNpc2lvbiA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IFwiLlwiICsgTWF0aC5tYXgoMCwgdGhpcy5wcmVjaXNpb24gfCAwKSlcbiAgICAgICsgKHRoaXMudHJpbSA/IFwiflwiIDogXCJcIilcbiAgICAgICsgdGhpcy50eXBlO1xufTtcbiIsICIvLyBUcmltcyBpbnNpZ25pZmljYW50IHplcm9zLCBlLmcuLCByZXBsYWNlcyAxLjIwMDBrIHdpdGggMS4yay5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHMpIHtcbiAgb3V0OiBmb3IgKHZhciBuID0gcy5sZW5ndGgsIGkgPSAxLCBpMCA9IC0xLCBpMTsgaSA8IG47ICsraSkge1xuICAgIHN3aXRjaCAoc1tpXSkge1xuICAgICAgY2FzZSBcIi5cIjogaTAgPSBpMSA9IGk7IGJyZWFrO1xuICAgICAgY2FzZSBcIjBcIjogaWYgKGkwID09PSAwKSBpMCA9IGk7IGkxID0gaTsgYnJlYWs7XG4gICAgICBkZWZhdWx0OiBpZiAoIStzW2ldKSBicmVhayBvdXQ7IGlmIChpMCA+IDApIGkwID0gMDsgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBpMCA+IDAgPyBzLnNsaWNlKDAsIGkwKSArIHMuc2xpY2UoaTEgKyAxKSA6IHM7XG59XG4iLCAiaW1wb3J0IHtmb3JtYXREZWNpbWFsUGFydHN9IGZyb20gXCIuL2Zvcm1hdERlY2ltYWwuanNcIjtcblxuZXhwb3J0IHZhciBwcmVmaXhFeHBvbmVudDtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oeCwgcCkge1xuICB2YXIgZCA9IGZvcm1hdERlY2ltYWxQYXJ0cyh4LCBwKTtcbiAgaWYgKCFkKSByZXR1cm4geCArIFwiXCI7XG4gIHZhciBjb2VmZmljaWVudCA9IGRbMF0sXG4gICAgICBleHBvbmVudCA9IGRbMV0sXG4gICAgICBpID0gZXhwb25lbnQgLSAocHJlZml4RXhwb25lbnQgPSBNYXRoLm1heCgtOCwgTWF0aC5taW4oOCwgTWF0aC5mbG9vcihleHBvbmVudCAvIDMpKSkgKiAzKSArIDEsXG4gICAgICBuID0gY29lZmZpY2llbnQubGVuZ3RoO1xuICByZXR1cm4gaSA9PT0gbiA/IGNvZWZmaWNpZW50XG4gICAgICA6IGkgPiBuID8gY29lZmZpY2llbnQgKyBuZXcgQXJyYXkoaSAtIG4gKyAxKS5qb2luKFwiMFwiKVxuICAgICAgOiBpID4gMCA/IGNvZWZmaWNpZW50LnNsaWNlKDAsIGkpICsgXCIuXCIgKyBjb2VmZmljaWVudC5zbGljZShpKVxuICAgICAgOiBcIjAuXCIgKyBuZXcgQXJyYXkoMSAtIGkpLmpvaW4oXCIwXCIpICsgZm9ybWF0RGVjaW1hbFBhcnRzKHgsIE1hdGgubWF4KDAsIHAgKyBpIC0gMSkpWzBdOyAvLyBsZXNzIHRoYW4gMXkhXG59XG4iLCAiaW1wb3J0IHtmb3JtYXREZWNpbWFsUGFydHN9IGZyb20gXCIuL2Zvcm1hdERlY2ltYWwuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oeCwgcCkge1xuICB2YXIgZCA9IGZvcm1hdERlY2ltYWxQYXJ0cyh4LCBwKTtcbiAgaWYgKCFkKSByZXR1cm4geCArIFwiXCI7XG4gIHZhciBjb2VmZmljaWVudCA9IGRbMF0sXG4gICAgICBleHBvbmVudCA9IGRbMV07XG4gIHJldHVybiBleHBvbmVudCA8IDAgPyBcIjAuXCIgKyBuZXcgQXJyYXkoLWV4cG9uZW50KS5qb2luKFwiMFwiKSArIGNvZWZmaWNpZW50XG4gICAgICA6IGNvZWZmaWNpZW50Lmxlbmd0aCA+IGV4cG9uZW50ICsgMSA/IGNvZWZmaWNpZW50LnNsaWNlKDAsIGV4cG9uZW50ICsgMSkgKyBcIi5cIiArIGNvZWZmaWNpZW50LnNsaWNlKGV4cG9uZW50ICsgMSlcbiAgICAgIDogY29lZmZpY2llbnQgKyBuZXcgQXJyYXkoZXhwb25lbnQgLSBjb2VmZmljaWVudC5sZW5ndGggKyAyKS5qb2luKFwiMFwiKTtcbn1cbiIsICJpbXBvcnQgZm9ybWF0RGVjaW1hbCBmcm9tIFwiLi9mb3JtYXREZWNpbWFsLmpzXCI7XG5pbXBvcnQgZm9ybWF0UHJlZml4QXV0byBmcm9tIFwiLi9mb3JtYXRQcmVmaXhBdXRvLmpzXCI7XG5pbXBvcnQgZm9ybWF0Um91bmRlZCBmcm9tIFwiLi9mb3JtYXRSb3VuZGVkLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgXCIlXCI6ICh4LCBwKSA9PiAoeCAqIDEwMCkudG9GaXhlZChwKSxcbiAgXCJiXCI6ICh4KSA9PiBNYXRoLnJvdW5kKHgpLnRvU3RyaW5nKDIpLFxuICBcImNcIjogKHgpID0+IHggKyBcIlwiLFxuICBcImRcIjogZm9ybWF0RGVjaW1hbCxcbiAgXCJlXCI6ICh4LCBwKSA9PiB4LnRvRXhwb25lbnRpYWwocCksXG4gIFwiZlwiOiAoeCwgcCkgPT4geC50b0ZpeGVkKHApLFxuICBcImdcIjogKHgsIHApID0+IHgudG9QcmVjaXNpb24ocCksXG4gIFwib1wiOiAoeCkgPT4gTWF0aC5yb3VuZCh4KS50b1N0cmluZyg4KSxcbiAgXCJwXCI6ICh4LCBwKSA9PiBmb3JtYXRSb3VuZGVkKHggKiAxMDAsIHApLFxuICBcInJcIjogZm9ybWF0Um91bmRlZCxcbiAgXCJzXCI6IGZvcm1hdFByZWZpeEF1dG8sXG4gIFwiWFwiOiAoeCkgPT4gTWF0aC5yb3VuZCh4KS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKSxcbiAgXCJ4XCI6ICh4KSA9PiBNYXRoLnJvdW5kKHgpLnRvU3RyaW5nKDE2KVxufTtcbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbih4KSB7XG4gIHJldHVybiB4O1xufVxuIiwgImltcG9ydCBleHBvbmVudCBmcm9tIFwiLi9leHBvbmVudC5qc1wiO1xuaW1wb3J0IGZvcm1hdEdyb3VwIGZyb20gXCIuL2Zvcm1hdEdyb3VwLmpzXCI7XG5pbXBvcnQgZm9ybWF0TnVtZXJhbHMgZnJvbSBcIi4vZm9ybWF0TnVtZXJhbHMuanNcIjtcbmltcG9ydCBmb3JtYXRTcGVjaWZpZXIgZnJvbSBcIi4vZm9ybWF0U3BlY2lmaWVyLmpzXCI7XG5pbXBvcnQgZm9ybWF0VHJpbSBmcm9tIFwiLi9mb3JtYXRUcmltLmpzXCI7XG5pbXBvcnQgZm9ybWF0VHlwZXMgZnJvbSBcIi4vZm9ybWF0VHlwZXMuanNcIjtcbmltcG9ydCB7cHJlZml4RXhwb25lbnR9IGZyb20gXCIuL2Zvcm1hdFByZWZpeEF1dG8uanNcIjtcbmltcG9ydCBpZGVudGl0eSBmcm9tIFwiLi9pZGVudGl0eS5qc1wiO1xuXG52YXIgbWFwID0gQXJyYXkucHJvdG90eXBlLm1hcCxcbiAgICBwcmVmaXhlcyA9IFtcInlcIixcInpcIixcImFcIixcImZcIixcInBcIixcIm5cIixcIlx1MDBCNVwiLFwibVwiLFwiXCIsXCJrXCIsXCJNXCIsXCJHXCIsXCJUXCIsXCJQXCIsXCJFXCIsXCJaXCIsXCJZXCJdO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihsb2NhbGUpIHtcbiAgdmFyIGdyb3VwID0gbG9jYWxlLmdyb3VwaW5nID09PSB1bmRlZmluZWQgfHwgbG9jYWxlLnRob3VzYW5kcyA9PT0gdW5kZWZpbmVkID8gaWRlbnRpdHkgOiBmb3JtYXRHcm91cChtYXAuY2FsbChsb2NhbGUuZ3JvdXBpbmcsIE51bWJlciksIGxvY2FsZS50aG91c2FuZHMgKyBcIlwiKSxcbiAgICAgIGN1cnJlbmN5UHJlZml4ID0gbG9jYWxlLmN1cnJlbmN5ID09PSB1bmRlZmluZWQgPyBcIlwiIDogbG9jYWxlLmN1cnJlbmN5WzBdICsgXCJcIixcbiAgICAgIGN1cnJlbmN5U3VmZml4ID0gbG9jYWxlLmN1cnJlbmN5ID09PSB1bmRlZmluZWQgPyBcIlwiIDogbG9jYWxlLmN1cnJlbmN5WzFdICsgXCJcIixcbiAgICAgIGRlY2ltYWwgPSBsb2NhbGUuZGVjaW1hbCA9PT0gdW5kZWZpbmVkID8gXCIuXCIgOiBsb2NhbGUuZGVjaW1hbCArIFwiXCIsXG4gICAgICBudW1lcmFscyA9IGxvY2FsZS5udW1lcmFscyA9PT0gdW5kZWZpbmVkID8gaWRlbnRpdHkgOiBmb3JtYXROdW1lcmFscyhtYXAuY2FsbChsb2NhbGUubnVtZXJhbHMsIFN0cmluZykpLFxuICAgICAgcGVyY2VudCA9IGxvY2FsZS5wZXJjZW50ID09PSB1bmRlZmluZWQgPyBcIiVcIiA6IGxvY2FsZS5wZXJjZW50ICsgXCJcIixcbiAgICAgIG1pbnVzID0gbG9jYWxlLm1pbnVzID09PSB1bmRlZmluZWQgPyBcIlx1MjIxMlwiIDogbG9jYWxlLm1pbnVzICsgXCJcIixcbiAgICAgIG5hbiA9IGxvY2FsZS5uYW4gPT09IHVuZGVmaW5lZCA/IFwiTmFOXCIgOiBsb2NhbGUubmFuICsgXCJcIjtcblxuICBmdW5jdGlvbiBuZXdGb3JtYXQoc3BlY2lmaWVyKSB7XG4gICAgc3BlY2lmaWVyID0gZm9ybWF0U3BlY2lmaWVyKHNwZWNpZmllcik7XG5cbiAgICB2YXIgZmlsbCA9IHNwZWNpZmllci5maWxsLFxuICAgICAgICBhbGlnbiA9IHNwZWNpZmllci5hbGlnbixcbiAgICAgICAgc2lnbiA9IHNwZWNpZmllci5zaWduLFxuICAgICAgICBzeW1ib2wgPSBzcGVjaWZpZXIuc3ltYm9sLFxuICAgICAgICB6ZXJvID0gc3BlY2lmaWVyLnplcm8sXG4gICAgICAgIHdpZHRoID0gc3BlY2lmaWVyLndpZHRoLFxuICAgICAgICBjb21tYSA9IHNwZWNpZmllci5jb21tYSxcbiAgICAgICAgcHJlY2lzaW9uID0gc3BlY2lmaWVyLnByZWNpc2lvbixcbiAgICAgICAgdHJpbSA9IHNwZWNpZmllci50cmltLFxuICAgICAgICB0eXBlID0gc3BlY2lmaWVyLnR5cGU7XG5cbiAgICAvLyBUaGUgXCJuXCIgdHlwZSBpcyBhbiBhbGlhcyBmb3IgXCIsZ1wiLlxuICAgIGlmICh0eXBlID09PSBcIm5cIikgY29tbWEgPSB0cnVlLCB0eXBlID0gXCJnXCI7XG5cbiAgICAvLyBUaGUgXCJcIiB0eXBlLCBhbmQgYW55IGludmFsaWQgdHlwZSwgaXMgYW4gYWxpYXMgZm9yIFwiLjEyfmdcIi5cbiAgICBlbHNlIGlmICghZm9ybWF0VHlwZXNbdHlwZV0pIHByZWNpc2lvbiA9PT0gdW5kZWZpbmVkICYmIChwcmVjaXNpb24gPSAxMiksIHRyaW0gPSB0cnVlLCB0eXBlID0gXCJnXCI7XG5cbiAgICAvLyBJZiB6ZXJvIGZpbGwgaXMgc3BlY2lmaWVkLCBwYWRkaW5nIGdvZXMgYWZ0ZXIgc2lnbiBhbmQgYmVmb3JlIGRpZ2l0cy5cbiAgICBpZiAoemVybyB8fCAoZmlsbCA9PT0gXCIwXCIgJiYgYWxpZ24gPT09IFwiPVwiKSkgemVybyA9IHRydWUsIGZpbGwgPSBcIjBcIiwgYWxpZ24gPSBcIj1cIjtcblxuICAgIC8vIENvbXB1dGUgdGhlIHByZWZpeCBhbmQgc3VmZml4LlxuICAgIC8vIEZvciBTSS1wcmVmaXgsIHRoZSBzdWZmaXggaXMgbGF6aWx5IGNvbXB1dGVkLlxuICAgIHZhciBwcmVmaXggPSBzeW1ib2wgPT09IFwiJFwiID8gY3VycmVuY3lQcmVmaXggOiBzeW1ib2wgPT09IFwiI1wiICYmIC9bYm94WF0vLnRlc3QodHlwZSkgPyBcIjBcIiArIHR5cGUudG9Mb3dlckNhc2UoKSA6IFwiXCIsXG4gICAgICAgIHN1ZmZpeCA9IHN5bWJvbCA9PT0gXCIkXCIgPyBjdXJyZW5jeVN1ZmZpeCA6IC9bJXBdLy50ZXN0KHR5cGUpID8gcGVyY2VudCA6IFwiXCI7XG5cbiAgICAvLyBXaGF0IGZvcm1hdCBmdW5jdGlvbiBzaG91bGQgd2UgdXNlP1xuICAgIC8vIElzIHRoaXMgYW4gaW50ZWdlciB0eXBlP1xuICAgIC8vIENhbiB0aGlzIHR5cGUgZ2VuZXJhdGUgZXhwb25lbnRpYWwgbm90YXRpb24/XG4gICAgdmFyIGZvcm1hdFR5cGUgPSBmb3JtYXRUeXBlc1t0eXBlXSxcbiAgICAgICAgbWF5YmVTdWZmaXggPSAvW2RlZmdwcnMlXS8udGVzdCh0eXBlKTtcblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdCBwcmVjaXNpb24gaWYgbm90IHNwZWNpZmllZCxcbiAgICAvLyBvciBjbGFtcCB0aGUgc3BlY2lmaWVkIHByZWNpc2lvbiB0byB0aGUgc3VwcG9ydGVkIHJhbmdlLlxuICAgIC8vIEZvciBzaWduaWZpY2FudCBwcmVjaXNpb24sIGl0IG11c3QgYmUgaW4gWzEsIDIxXS5cbiAgICAvLyBGb3IgZml4ZWQgcHJlY2lzaW9uLCBpdCBtdXN0IGJlIGluIFswLCAyMF0uXG4gICAgcHJlY2lzaW9uID0gcHJlY2lzaW9uID09PSB1bmRlZmluZWQgPyA2XG4gICAgICAgIDogL1tncHJzXS8udGVzdCh0eXBlKSA/IE1hdGgubWF4KDEsIE1hdGgubWluKDIxLCBwcmVjaXNpb24pKVxuICAgICAgICA6IE1hdGgubWF4KDAsIE1hdGgubWluKDIwLCBwcmVjaXNpb24pKTtcblxuICAgIGZ1bmN0aW9uIGZvcm1hdCh2YWx1ZSkge1xuICAgICAgdmFyIHZhbHVlUHJlZml4ID0gcHJlZml4LFxuICAgICAgICAgIHZhbHVlU3VmZml4ID0gc3VmZml4LFxuICAgICAgICAgIGksIG4sIGM7XG5cbiAgICAgIGlmICh0eXBlID09PSBcImNcIikge1xuICAgICAgICB2YWx1ZVN1ZmZpeCA9IGZvcm1hdFR5cGUodmFsdWUpICsgdmFsdWVTdWZmaXg7XG4gICAgICAgIHZhbHVlID0gXCJcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlID0gK3ZhbHVlO1xuXG4gICAgICAgIC8vIERldGVybWluZSB0aGUgc2lnbi4gLTAgaXMgbm90IGxlc3MgdGhhbiAwLCBidXQgMSAvIC0wIGlzIVxuICAgICAgICB2YXIgdmFsdWVOZWdhdGl2ZSA9IHZhbHVlIDwgMCB8fCAxIC8gdmFsdWUgPCAwO1xuXG4gICAgICAgIC8vIFBlcmZvcm0gdGhlIGluaXRpYWwgZm9ybWF0dGluZy5cbiAgICAgICAgdmFsdWUgPSBpc05hTih2YWx1ZSkgPyBuYW4gOiBmb3JtYXRUeXBlKE1hdGguYWJzKHZhbHVlKSwgcHJlY2lzaW9uKTtcblxuICAgICAgICAvLyBUcmltIGluc2lnbmlmaWNhbnQgemVyb3MuXG4gICAgICAgIGlmICh0cmltKSB2YWx1ZSA9IGZvcm1hdFRyaW0odmFsdWUpO1xuXG4gICAgICAgIC8vIElmIGEgbmVnYXRpdmUgdmFsdWUgcm91bmRzIHRvIHplcm8gYWZ0ZXIgZm9ybWF0dGluZywgYW5kIG5vIGV4cGxpY2l0IHBvc2l0aXZlIHNpZ24gaXMgcmVxdWVzdGVkLCBoaWRlIHRoZSBzaWduLlxuICAgICAgICBpZiAodmFsdWVOZWdhdGl2ZSAmJiArdmFsdWUgPT09IDAgJiYgc2lnbiAhPT0gXCIrXCIpIHZhbHVlTmVnYXRpdmUgPSBmYWxzZTtcblxuICAgICAgICAvLyBDb21wdXRlIHRoZSBwcmVmaXggYW5kIHN1ZmZpeC5cbiAgICAgICAgdmFsdWVQcmVmaXggPSAodmFsdWVOZWdhdGl2ZSA/IChzaWduID09PSBcIihcIiA/IHNpZ24gOiBtaW51cykgOiBzaWduID09PSBcIi1cIiB8fCBzaWduID09PSBcIihcIiA/IFwiXCIgOiBzaWduKSArIHZhbHVlUHJlZml4O1xuICAgICAgICB2YWx1ZVN1ZmZpeCA9ICh0eXBlID09PSBcInNcIiA/IHByZWZpeGVzWzggKyBwcmVmaXhFeHBvbmVudCAvIDNdIDogXCJcIikgKyB2YWx1ZVN1ZmZpeCArICh2YWx1ZU5lZ2F0aXZlICYmIHNpZ24gPT09IFwiKFwiID8gXCIpXCIgOiBcIlwiKTtcblxuICAgICAgICAvLyBCcmVhayB0aGUgZm9ybWF0dGVkIHZhbHVlIGludG8gdGhlIGludGVnZXIgXHUyMDFDdmFsdWVcdTIwMUQgcGFydCB0aGF0IGNhbiBiZVxuICAgICAgICAvLyBncm91cGVkLCBhbmQgZnJhY3Rpb25hbCBvciBleHBvbmVudGlhbCBcdTIwMUNzdWZmaXhcdTIwMUQgcGFydCB0aGF0IGlzIG5vdC5cbiAgICAgICAgaWYgKG1heWJlU3VmZml4KSB7XG4gICAgICAgICAgaSA9IC0xLCBuID0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICAgICAgICBpZiAoYyA9IHZhbHVlLmNoYXJDb2RlQXQoaSksIDQ4ID4gYyB8fCBjID4gNTcpIHtcbiAgICAgICAgICAgICAgdmFsdWVTdWZmaXggPSAoYyA9PT0gNDYgPyBkZWNpbWFsICsgdmFsdWUuc2xpY2UoaSArIDEpIDogdmFsdWUuc2xpY2UoaSkpICsgdmFsdWVTdWZmaXg7XG4gICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMCwgaSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgZmlsbCBjaGFyYWN0ZXIgaXMgbm90IFwiMFwiLCBncm91cGluZyBpcyBhcHBsaWVkIGJlZm9yZSBwYWRkaW5nLlxuICAgICAgaWYgKGNvbW1hICYmICF6ZXJvKSB2YWx1ZSA9IGdyb3VwKHZhbHVlLCBJbmZpbml0eSk7XG5cbiAgICAgIC8vIENvbXB1dGUgdGhlIHBhZGRpbmcuXG4gICAgICB2YXIgbGVuZ3RoID0gdmFsdWVQcmVmaXgubGVuZ3RoICsgdmFsdWUubGVuZ3RoICsgdmFsdWVTdWZmaXgubGVuZ3RoLFxuICAgICAgICAgIHBhZGRpbmcgPSBsZW5ndGggPCB3aWR0aCA/IG5ldyBBcnJheSh3aWR0aCAtIGxlbmd0aCArIDEpLmpvaW4oZmlsbCkgOiBcIlwiO1xuXG4gICAgICAvLyBJZiB0aGUgZmlsbCBjaGFyYWN0ZXIgaXMgXCIwXCIsIGdyb3VwaW5nIGlzIGFwcGxpZWQgYWZ0ZXIgcGFkZGluZy5cbiAgICAgIGlmIChjb21tYSAmJiB6ZXJvKSB2YWx1ZSA9IGdyb3VwKHBhZGRpbmcgKyB2YWx1ZSwgcGFkZGluZy5sZW5ndGggPyB3aWR0aCAtIHZhbHVlU3VmZml4Lmxlbmd0aCA6IEluZmluaXR5KSwgcGFkZGluZyA9IFwiXCI7XG5cbiAgICAgIC8vIFJlY29uc3RydWN0IHRoZSBmaW5hbCBvdXRwdXQgYmFzZWQgb24gdGhlIGRlc2lyZWQgYWxpZ25tZW50LlxuICAgICAgc3dpdGNoIChhbGlnbikge1xuICAgICAgICBjYXNlIFwiPFwiOiB2YWx1ZSA9IHZhbHVlUHJlZml4ICsgdmFsdWUgKyB2YWx1ZVN1ZmZpeCArIHBhZGRpbmc7IGJyZWFrO1xuICAgICAgICBjYXNlIFwiPVwiOiB2YWx1ZSA9IHZhbHVlUHJlZml4ICsgcGFkZGluZyArIHZhbHVlICsgdmFsdWVTdWZmaXg7IGJyZWFrO1xuICAgICAgICBjYXNlIFwiXlwiOiB2YWx1ZSA9IHBhZGRpbmcuc2xpY2UoMCwgbGVuZ3RoID0gcGFkZGluZy5sZW5ndGggPj4gMSkgKyB2YWx1ZVByZWZpeCArIHZhbHVlICsgdmFsdWVTdWZmaXggKyBwYWRkaW5nLnNsaWNlKGxlbmd0aCk7IGJyZWFrO1xuICAgICAgICBkZWZhdWx0OiB2YWx1ZSA9IHBhZGRpbmcgKyB2YWx1ZVByZWZpeCArIHZhbHVlICsgdmFsdWVTdWZmaXg7IGJyZWFrO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVtZXJhbHModmFsdWUpO1xuICAgIH1cblxuICAgIGZvcm1hdC50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHNwZWNpZmllciArIFwiXCI7XG4gICAgfTtcblxuICAgIHJldHVybiBmb3JtYXQ7XG4gIH1cblxuICBmdW5jdGlvbiBmb3JtYXRQcmVmaXgoc3BlY2lmaWVyLCB2YWx1ZSkge1xuICAgIHZhciBmID0gbmV3Rm9ybWF0KChzcGVjaWZpZXIgPSBmb3JtYXRTcGVjaWZpZXIoc3BlY2lmaWVyKSwgc3BlY2lmaWVyLnR5cGUgPSBcImZcIiwgc3BlY2lmaWVyKSksXG4gICAgICAgIGUgPSBNYXRoLm1heCgtOCwgTWF0aC5taW4oOCwgTWF0aC5mbG9vcihleHBvbmVudCh2YWx1ZSkgLyAzKSkpICogMyxcbiAgICAgICAgayA9IE1hdGgucG93KDEwLCAtZSksXG4gICAgICAgIHByZWZpeCA9IHByZWZpeGVzWzggKyBlIC8gM107XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gZihrICogdmFsdWUpICsgcHJlZml4O1xuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGZvcm1hdDogbmV3Rm9ybWF0LFxuICAgIGZvcm1hdFByZWZpeDogZm9ybWF0UHJlZml4XG4gIH07XG59XG4iLCAiaW1wb3J0IGZvcm1hdExvY2FsZSBmcm9tIFwiLi9sb2NhbGUuanNcIjtcblxudmFyIGxvY2FsZTtcbmV4cG9ydCB2YXIgZm9ybWF0O1xuZXhwb3J0IHZhciBmb3JtYXRQcmVmaXg7XG5cbmRlZmF1bHRMb2NhbGUoe1xuICB0aG91c2FuZHM6IFwiLFwiLFxuICBncm91cGluZzogWzNdLFxuICBjdXJyZW5jeTogW1wiJFwiLCBcIlwiXVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRlZmF1bHRMb2NhbGUoZGVmaW5pdGlvbikge1xuICBsb2NhbGUgPSBmb3JtYXRMb2NhbGUoZGVmaW5pdGlvbik7XG4gIGZvcm1hdCA9IGxvY2FsZS5mb3JtYXQ7XG4gIGZvcm1hdFByZWZpeCA9IGxvY2FsZS5mb3JtYXRQcmVmaXg7XG4gIHJldHVybiBsb2NhbGU7XG59XG4iLCAiaW1wb3J0IGV4cG9uZW50IGZyb20gXCIuL2V4cG9uZW50LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHN0ZXApIHtcbiAgcmV0dXJuIE1hdGgubWF4KDAsIC1leHBvbmVudChNYXRoLmFicyhzdGVwKSkpO1xufVxuIiwgImltcG9ydCBleHBvbmVudCBmcm9tIFwiLi9leHBvbmVudC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzdGVwLCB2YWx1ZSkge1xuICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5tYXgoLTgsIE1hdGgubWluKDgsIE1hdGguZmxvb3IoZXhwb25lbnQodmFsdWUpIC8gMykpKSAqIDMgLSBleHBvbmVudChNYXRoLmFicyhzdGVwKSkpO1xufVxuIiwgImltcG9ydCBleHBvbmVudCBmcm9tIFwiLi9leHBvbmVudC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzdGVwLCBtYXgpIHtcbiAgc3RlcCA9IE1hdGguYWJzKHN0ZXApLCBtYXggPSBNYXRoLmFicyhtYXgpIC0gc3RlcDtcbiAgcmV0dXJuIE1hdGgubWF4KDAsIGV4cG9uZW50KG1heCkgLSBleHBvbmVudChzdGVwKSkgKyAxO1xufVxuIiwgImV4cG9ydCBmdW5jdGlvbiBpbml0UmFuZ2UoZG9tYWluLCByYW5nZSkge1xuICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICBjYXNlIDA6IGJyZWFrO1xuICAgIGNhc2UgMTogdGhpcy5yYW5nZShkb21haW4pOyBicmVhaztcbiAgICBkZWZhdWx0OiB0aGlzLnJhbmdlKHJhbmdlKS5kb21haW4oZG9tYWluKTsgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0SW50ZXJwb2xhdG9yKGRvbWFpbiwgaW50ZXJwb2xhdG9yKSB7XG4gIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgIGNhc2UgMDogYnJlYWs7XG4gICAgY2FzZSAxOiB7XG4gICAgICBpZiAodHlwZW9mIGRvbWFpbiA9PT0gXCJmdW5jdGlvblwiKSB0aGlzLmludGVycG9sYXRvcihkb21haW4pO1xuICAgICAgZWxzZSB0aGlzLnJhbmdlKGRvbWFpbik7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgdGhpcy5kb21haW4oZG9tYWluKTtcbiAgICAgIGlmICh0eXBlb2YgaW50ZXJwb2xhdG9yID09PSBcImZ1bmN0aW9uXCIpIHRoaXMuaW50ZXJwb2xhdG9yKGludGVycG9sYXRvcik7XG4gICAgICBlbHNlIHRoaXMucmFuZ2UoaW50ZXJwb2xhdG9yKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGhpcztcbn1cbiIsICJpbXBvcnQge0ludGVybk1hcH0gZnJvbSBcImQzLWFycmF5XCI7XG5pbXBvcnQge2luaXRSYW5nZX0gZnJvbSBcIi4vaW5pdC5qc1wiO1xuXG5leHBvcnQgY29uc3QgaW1wbGljaXQgPSBTeW1ib2woXCJpbXBsaWNpdFwiKTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gb3JkaW5hbCgpIHtcbiAgdmFyIGluZGV4ID0gbmV3IEludGVybk1hcCgpLFxuICAgICAgZG9tYWluID0gW10sXG4gICAgICByYW5nZSA9IFtdLFxuICAgICAgdW5rbm93biA9IGltcGxpY2l0O1xuXG4gIGZ1bmN0aW9uIHNjYWxlKGQpIHtcbiAgICBsZXQgaSA9IGluZGV4LmdldChkKTtcbiAgICBpZiAoaSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAodW5rbm93biAhPT0gaW1wbGljaXQpIHJldHVybiB1bmtub3duO1xuICAgICAgaW5kZXguc2V0KGQsIGkgPSBkb21haW4ucHVzaChkKSAtIDEpO1xuICAgIH1cbiAgICByZXR1cm4gcmFuZ2VbaSAlIHJhbmdlLmxlbmd0aF07XG4gIH1cblxuICBzY2FsZS5kb21haW4gPSBmdW5jdGlvbihfKSB7XG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gZG9tYWluLnNsaWNlKCk7XG4gICAgZG9tYWluID0gW10sIGluZGV4ID0gbmV3IEludGVybk1hcCgpO1xuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgXykge1xuICAgICAgaWYgKGluZGV4Lmhhcyh2YWx1ZSkpIGNvbnRpbnVlO1xuICAgICAgaW5kZXguc2V0KHZhbHVlLCBkb21haW4ucHVzaCh2YWx1ZSkgLSAxKTtcbiAgICB9XG4gICAgcmV0dXJuIHNjYWxlO1xuICB9O1xuXG4gIHNjYWxlLnJhbmdlID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHJhbmdlID0gQXJyYXkuZnJvbShfKSwgc2NhbGUpIDogcmFuZ2Uuc2xpY2UoKTtcbiAgfTtcblxuICBzY2FsZS51bmtub3duID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHVua25vd24gPSBfLCBzY2FsZSkgOiB1bmtub3duO1xuICB9O1xuXG4gIHNjYWxlLmNvcHkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gb3JkaW5hbChkb21haW4sIHJhbmdlKS51bmtub3duKHVua25vd24pO1xuICB9O1xuXG4gIGluaXRSYW5nZS5hcHBseShzY2FsZSwgYXJndW1lbnRzKTtcblxuICByZXR1cm4gc2NhbGU7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29uc3RhbnRzKHgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB4O1xuICB9O1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG51bWJlcih4KSB7XG4gIHJldHVybiAreDtcbn1cbiIsICJpbXBvcnQge2Jpc2VjdH0gZnJvbSBcImQzLWFycmF5XCI7XG5pbXBvcnQge2ludGVycG9sYXRlIGFzIGludGVycG9sYXRlVmFsdWUsIGludGVycG9sYXRlTnVtYmVyLCBpbnRlcnBvbGF0ZVJvdW5kfSBmcm9tIFwiZDMtaW50ZXJwb2xhdGVcIjtcbmltcG9ydCBjb25zdGFudCBmcm9tIFwiLi9jb25zdGFudC5qc1wiO1xuaW1wb3J0IG51bWJlciBmcm9tIFwiLi9udW1iZXIuanNcIjtcblxudmFyIHVuaXQgPSBbMCwgMV07XG5cbmV4cG9ydCBmdW5jdGlvbiBpZGVudGl0eSh4KSB7XG4gIHJldHVybiB4O1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemUoYSwgYikge1xuICByZXR1cm4gKGIgLT0gKGEgPSArYSkpXG4gICAgICA/IGZ1bmN0aW9uKHgpIHsgcmV0dXJuICh4IC0gYSkgLyBiOyB9XG4gICAgICA6IGNvbnN0YW50KGlzTmFOKGIpID8gTmFOIDogMC41KTtcbn1cblxuZnVuY3Rpb24gY2xhbXBlcihhLCBiKSB7XG4gIHZhciB0O1xuICBpZiAoYSA+IGIpIHQgPSBhLCBhID0gYiwgYiA9IHQ7XG4gIHJldHVybiBmdW5jdGlvbih4KSB7IHJldHVybiBNYXRoLm1heChhLCBNYXRoLm1pbihiLCB4KSk7IH07XG59XG5cbi8vIG5vcm1hbGl6ZShhLCBiKSh4KSB0YWtlcyBhIGRvbWFpbiB2YWx1ZSB4IGluIFthLGJdIGFuZCByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHBhcmFtZXRlciB0IGluIFswLDFdLlxuLy8gaW50ZXJwb2xhdGUoYSwgYikodCkgdGFrZXMgYSBwYXJhbWV0ZXIgdCBpbiBbMCwxXSBhbmQgcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyByYW5nZSB2YWx1ZSB4IGluIFthLGJdLlxuZnVuY3Rpb24gYmltYXAoZG9tYWluLCByYW5nZSwgaW50ZXJwb2xhdGUpIHtcbiAgdmFyIGQwID0gZG9tYWluWzBdLCBkMSA9IGRvbWFpblsxXSwgcjAgPSByYW5nZVswXSwgcjEgPSByYW5nZVsxXTtcbiAgaWYgKGQxIDwgZDApIGQwID0gbm9ybWFsaXplKGQxLCBkMCksIHIwID0gaW50ZXJwb2xhdGUocjEsIHIwKTtcbiAgZWxzZSBkMCA9IG5vcm1hbGl6ZShkMCwgZDEpLCByMCA9IGludGVycG9sYXRlKHIwLCByMSk7XG4gIHJldHVybiBmdW5jdGlvbih4KSB7IHJldHVybiByMChkMCh4KSk7IH07XG59XG5cbmZ1bmN0aW9uIHBvbHltYXAoZG9tYWluLCByYW5nZSwgaW50ZXJwb2xhdGUpIHtcbiAgdmFyIGogPSBNYXRoLm1pbihkb21haW4ubGVuZ3RoLCByYW5nZS5sZW5ndGgpIC0gMSxcbiAgICAgIGQgPSBuZXcgQXJyYXkoaiksXG4gICAgICByID0gbmV3IEFycmF5KGopLFxuICAgICAgaSA9IC0xO1xuXG4gIC8vIFJldmVyc2UgZGVzY2VuZGluZyBkb21haW5zLlxuICBpZiAoZG9tYWluW2pdIDwgZG9tYWluWzBdKSB7XG4gICAgZG9tYWluID0gZG9tYWluLnNsaWNlKCkucmV2ZXJzZSgpO1xuICAgIHJhbmdlID0gcmFuZ2Uuc2xpY2UoKS5yZXZlcnNlKCk7XG4gIH1cblxuICB3aGlsZSAoKytpIDwgaikge1xuICAgIGRbaV0gPSBub3JtYWxpemUoZG9tYWluW2ldLCBkb21haW5baSArIDFdKTtcbiAgICByW2ldID0gaW50ZXJwb2xhdGUocmFuZ2VbaV0sIHJhbmdlW2kgKyAxXSk7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24oeCkge1xuICAgIHZhciBpID0gYmlzZWN0KGRvbWFpbiwgeCwgMSwgaikgLSAxO1xuICAgIHJldHVybiByW2ldKGRbaV0oeCkpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29weShzb3VyY2UsIHRhcmdldCkge1xuICByZXR1cm4gdGFyZ2V0XG4gICAgICAuZG9tYWluKHNvdXJjZS5kb21haW4oKSlcbiAgICAgIC5yYW5nZShzb3VyY2UucmFuZ2UoKSlcbiAgICAgIC5pbnRlcnBvbGF0ZShzb3VyY2UuaW50ZXJwb2xhdGUoKSlcbiAgICAgIC5jbGFtcChzb3VyY2UuY2xhbXAoKSlcbiAgICAgIC51bmtub3duKHNvdXJjZS51bmtub3duKCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtZXIoKSB7XG4gIHZhciBkb21haW4gPSB1bml0LFxuICAgICAgcmFuZ2UgPSB1bml0LFxuICAgICAgaW50ZXJwb2xhdGUgPSBpbnRlcnBvbGF0ZVZhbHVlLFxuICAgICAgdHJhbnNmb3JtLFxuICAgICAgdW50cmFuc2Zvcm0sXG4gICAgICB1bmtub3duLFxuICAgICAgY2xhbXAgPSBpZGVudGl0eSxcbiAgICAgIHBpZWNld2lzZSxcbiAgICAgIG91dHB1dCxcbiAgICAgIGlucHV0O1xuXG4gIGZ1bmN0aW9uIHJlc2NhbGUoKSB7XG4gICAgdmFyIG4gPSBNYXRoLm1pbihkb21haW4ubGVuZ3RoLCByYW5nZS5sZW5ndGgpO1xuICAgIGlmIChjbGFtcCAhPT0gaWRlbnRpdHkpIGNsYW1wID0gY2xhbXBlcihkb21haW5bMF0sIGRvbWFpbltuIC0gMV0pO1xuICAgIHBpZWNld2lzZSA9IG4gPiAyID8gcG9seW1hcCA6IGJpbWFwO1xuICAgIG91dHB1dCA9IGlucHV0ID0gbnVsbDtcbiAgICByZXR1cm4gc2NhbGU7XG4gIH1cblxuICBmdW5jdGlvbiBzY2FsZSh4KSB7XG4gICAgcmV0dXJuIHggPT0gbnVsbCB8fCBpc05hTih4ID0gK3gpID8gdW5rbm93biA6IChvdXRwdXQgfHwgKG91dHB1dCA9IHBpZWNld2lzZShkb21haW4ubWFwKHRyYW5zZm9ybSksIHJhbmdlLCBpbnRlcnBvbGF0ZSkpKSh0cmFuc2Zvcm0oY2xhbXAoeCkpKTtcbiAgfVxuXG4gIHNjYWxlLmludmVydCA9IGZ1bmN0aW9uKHkpIHtcbiAgICByZXR1cm4gY2xhbXAodW50cmFuc2Zvcm0oKGlucHV0IHx8IChpbnB1dCA9IHBpZWNld2lzZShyYW5nZSwgZG9tYWluLm1hcCh0cmFuc2Zvcm0pLCBpbnRlcnBvbGF0ZU51bWJlcikpKSh5KSkpO1xuICB9O1xuXG4gIHNjYWxlLmRvbWFpbiA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChkb21haW4gPSBBcnJheS5mcm9tKF8sIG51bWJlciksIHJlc2NhbGUoKSkgOiBkb21haW4uc2xpY2UoKTtcbiAgfTtcblxuICBzY2FsZS5yYW5nZSA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChyYW5nZSA9IEFycmF5LmZyb20oXyksIHJlc2NhbGUoKSkgOiByYW5nZS5zbGljZSgpO1xuICB9O1xuXG4gIHNjYWxlLnJhbmdlUm91bmQgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIHJhbmdlID0gQXJyYXkuZnJvbShfKSwgaW50ZXJwb2xhdGUgPSBpbnRlcnBvbGF0ZVJvdW5kLCByZXNjYWxlKCk7XG4gIH07XG5cbiAgc2NhbGUuY2xhbXAgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoY2xhbXAgPSBfID8gdHJ1ZSA6IGlkZW50aXR5LCByZXNjYWxlKCkpIDogY2xhbXAgIT09IGlkZW50aXR5O1xuICB9O1xuXG4gIHNjYWxlLmludGVycG9sYXRlID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKGludGVycG9sYXRlID0gXywgcmVzY2FsZSgpKSA6IGludGVycG9sYXRlO1xuICB9O1xuXG4gIHNjYWxlLnVua25vd24gPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAodW5rbm93biA9IF8sIHNjYWxlKSA6IHVua25vd247XG4gIH07XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKHQsIHUpIHtcbiAgICB0cmFuc2Zvcm0gPSB0LCB1bnRyYW5zZm9ybSA9IHU7XG4gICAgcmV0dXJuIHJlc2NhbGUoKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29udGludW91cygpIHtcbiAgcmV0dXJuIHRyYW5zZm9ybWVyKCkoaWRlbnRpdHksIGlkZW50aXR5KTtcbn1cbiIsICJpbXBvcnQge3RpY2tTdGVwfSBmcm9tIFwiZDMtYXJyYXlcIjtcbmltcG9ydCB7Zm9ybWF0LCBmb3JtYXRQcmVmaXgsIGZvcm1hdFNwZWNpZmllciwgcHJlY2lzaW9uRml4ZWQsIHByZWNpc2lvblByZWZpeCwgcHJlY2lzaW9uUm91bmR9IGZyb20gXCJkMy1mb3JtYXRcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdGlja0Zvcm1hdChzdGFydCwgc3RvcCwgY291bnQsIHNwZWNpZmllcikge1xuICB2YXIgc3RlcCA9IHRpY2tTdGVwKHN0YXJ0LCBzdG9wLCBjb3VudCksXG4gICAgICBwcmVjaXNpb247XG4gIHNwZWNpZmllciA9IGZvcm1hdFNwZWNpZmllcihzcGVjaWZpZXIgPT0gbnVsbCA/IFwiLGZcIiA6IHNwZWNpZmllcik7XG4gIHN3aXRjaCAoc3BlY2lmaWVyLnR5cGUpIHtcbiAgICBjYXNlIFwic1wiOiB7XG4gICAgICB2YXIgdmFsdWUgPSBNYXRoLm1heChNYXRoLmFicyhzdGFydCksIE1hdGguYWJzKHN0b3ApKTtcbiAgICAgIGlmIChzcGVjaWZpZXIucHJlY2lzaW9uID09IG51bGwgJiYgIWlzTmFOKHByZWNpc2lvbiA9IHByZWNpc2lvblByZWZpeChzdGVwLCB2YWx1ZSkpKSBzcGVjaWZpZXIucHJlY2lzaW9uID0gcHJlY2lzaW9uO1xuICAgICAgcmV0dXJuIGZvcm1hdFByZWZpeChzcGVjaWZpZXIsIHZhbHVlKTtcbiAgICB9XG4gICAgY2FzZSBcIlwiOlxuICAgIGNhc2UgXCJlXCI6XG4gICAgY2FzZSBcImdcIjpcbiAgICBjYXNlIFwicFwiOlxuICAgIGNhc2UgXCJyXCI6IHtcbiAgICAgIGlmIChzcGVjaWZpZXIucHJlY2lzaW9uID09IG51bGwgJiYgIWlzTmFOKHByZWNpc2lvbiA9IHByZWNpc2lvblJvdW5kKHN0ZXAsIE1hdGgubWF4KE1hdGguYWJzKHN0YXJ0KSwgTWF0aC5hYnMoc3RvcCkpKSkpIHNwZWNpZmllci5wcmVjaXNpb24gPSBwcmVjaXNpb24gLSAoc3BlY2lmaWVyLnR5cGUgPT09IFwiZVwiKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIFwiZlwiOlxuICAgIGNhc2UgXCIlXCI6IHtcbiAgICAgIGlmIChzcGVjaWZpZXIucHJlY2lzaW9uID09IG51bGwgJiYgIWlzTmFOKHByZWNpc2lvbiA9IHByZWNpc2lvbkZpeGVkKHN0ZXApKSkgc3BlY2lmaWVyLnByZWNpc2lvbiA9IHByZWNpc2lvbiAtIChzcGVjaWZpZXIudHlwZSA9PT0gXCIlXCIpICogMjtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZm9ybWF0KHNwZWNpZmllcik7XG59XG4iLCAiaW1wb3J0IHt0aWNrcywgdGlja0luY3JlbWVudH0gZnJvbSBcImQzLWFycmF5XCI7XG5pbXBvcnQgY29udGludW91cywge2NvcHl9IGZyb20gXCIuL2NvbnRpbnVvdXMuanNcIjtcbmltcG9ydCB7aW5pdFJhbmdlfSBmcm9tIFwiLi9pbml0LmpzXCI7XG5pbXBvcnQgdGlja0Zvcm1hdCBmcm9tIFwiLi90aWNrRm9ybWF0LmpzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJpc2goc2NhbGUpIHtcbiAgdmFyIGRvbWFpbiA9IHNjYWxlLmRvbWFpbjtcblxuICBzY2FsZS50aWNrcyA9IGZ1bmN0aW9uKGNvdW50KSB7XG4gICAgdmFyIGQgPSBkb21haW4oKTtcbiAgICByZXR1cm4gdGlja3MoZFswXSwgZFtkLmxlbmd0aCAtIDFdLCBjb3VudCA9PSBudWxsID8gMTAgOiBjb3VudCk7XG4gIH07XG5cbiAgc2NhbGUudGlja0Zvcm1hdCA9IGZ1bmN0aW9uKGNvdW50LCBzcGVjaWZpZXIpIHtcbiAgICB2YXIgZCA9IGRvbWFpbigpO1xuICAgIHJldHVybiB0aWNrRm9ybWF0KGRbMF0sIGRbZC5sZW5ndGggLSAxXSwgY291bnQgPT0gbnVsbCA/IDEwIDogY291bnQsIHNwZWNpZmllcik7XG4gIH07XG5cbiAgc2NhbGUubmljZSA9IGZ1bmN0aW9uKGNvdW50KSB7XG4gICAgaWYgKGNvdW50ID09IG51bGwpIGNvdW50ID0gMTA7XG5cbiAgICB2YXIgZCA9IGRvbWFpbigpO1xuICAgIHZhciBpMCA9IDA7XG4gICAgdmFyIGkxID0gZC5sZW5ndGggLSAxO1xuICAgIHZhciBzdGFydCA9IGRbaTBdO1xuICAgIHZhciBzdG9wID0gZFtpMV07XG4gICAgdmFyIHByZXN0ZXA7XG4gICAgdmFyIHN0ZXA7XG4gICAgdmFyIG1heEl0ZXIgPSAxMDtcblxuICAgIGlmIChzdG9wIDwgc3RhcnQpIHtcbiAgICAgIHN0ZXAgPSBzdGFydCwgc3RhcnQgPSBzdG9wLCBzdG9wID0gc3RlcDtcbiAgICAgIHN0ZXAgPSBpMCwgaTAgPSBpMSwgaTEgPSBzdGVwO1xuICAgIH1cbiAgICBcbiAgICB3aGlsZSAobWF4SXRlci0tID4gMCkge1xuICAgICAgc3RlcCA9IHRpY2tJbmNyZW1lbnQoc3RhcnQsIHN0b3AsIGNvdW50KTtcbiAgICAgIGlmIChzdGVwID09PSBwcmVzdGVwKSB7XG4gICAgICAgIGRbaTBdID0gc3RhcnRcbiAgICAgICAgZFtpMV0gPSBzdG9wXG4gICAgICAgIHJldHVybiBkb21haW4oZCk7XG4gICAgICB9IGVsc2UgaWYgKHN0ZXAgPiAwKSB7XG4gICAgICAgIHN0YXJ0ID0gTWF0aC5mbG9vcihzdGFydCAvIHN0ZXApICogc3RlcDtcbiAgICAgICAgc3RvcCA9IE1hdGguY2VpbChzdG9wIC8gc3RlcCkgKiBzdGVwO1xuICAgICAgfSBlbHNlIGlmIChzdGVwIDwgMCkge1xuICAgICAgICBzdGFydCA9IE1hdGguY2VpbChzdGFydCAqIHN0ZXApIC8gc3RlcDtcbiAgICAgICAgc3RvcCA9IE1hdGguZmxvb3Ioc3RvcCAqIHN0ZXApIC8gc3RlcDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcHJlc3RlcCA9IHN0ZXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNjYWxlO1xuICB9O1xuXG4gIHJldHVybiBzY2FsZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbGluZWFyKCkge1xuICB2YXIgc2NhbGUgPSBjb250aW51b3VzKCk7XG5cbiAgc2NhbGUuY29weSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBjb3B5KHNjYWxlLCBsaW5lYXIoKSk7XG4gIH07XG5cbiAgaW5pdFJhbmdlLmFwcGx5KHNjYWxlLCBhcmd1bWVudHMpO1xuXG4gIHJldHVybiBsaW5lYXJpc2goc2NhbGUpO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNwZWNpZmllcikge1xuICB2YXIgbiA9IHNwZWNpZmllci5sZW5ndGggLyA2IHwgMCwgY29sb3JzID0gbmV3IEFycmF5KG4pLCBpID0gMDtcbiAgd2hpbGUgKGkgPCBuKSBjb2xvcnNbaV0gPSBcIiNcIiArIHNwZWNpZmllci5zbGljZShpICogNiwgKytpICogNik7XG4gIHJldHVybiBjb2xvcnM7XG59XG4iLCAiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbG9ycyhcIjFmNzdiNGZmN2YwZTJjYTAyY2Q2MjcyODk0NjdiZDhjNTY0YmUzNzdjMjdmN2Y3ZmJjYmQyMjE3YmVjZlwiKTtcbiIsICJleHBvcnQgZnVuY3Rpb24gVHJhbnNmb3JtKGssIHgsIHkpIHtcbiAgdGhpcy5rID0gaztcbiAgdGhpcy54ID0geDtcbiAgdGhpcy55ID0geTtcbn1cblxuVHJhbnNmb3JtLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IFRyYW5zZm9ybSxcbiAgc2NhbGU6IGZ1bmN0aW9uKGspIHtcbiAgICByZXR1cm4gayA9PT0gMSA/IHRoaXMgOiBuZXcgVHJhbnNmb3JtKHRoaXMuayAqIGssIHRoaXMueCwgdGhpcy55KTtcbiAgfSxcbiAgdHJhbnNsYXRlOiBmdW5jdGlvbih4LCB5KSB7XG4gICAgcmV0dXJuIHggPT09IDAgJiB5ID09PSAwID8gdGhpcyA6IG5ldyBUcmFuc2Zvcm0odGhpcy5rLCB0aGlzLnggKyB0aGlzLmsgKiB4LCB0aGlzLnkgKyB0aGlzLmsgKiB5KTtcbiAgfSxcbiAgYXBwbHk6IGZ1bmN0aW9uKHBvaW50KSB7XG4gICAgcmV0dXJuIFtwb2ludFswXSAqIHRoaXMuayArIHRoaXMueCwgcG9pbnRbMV0gKiB0aGlzLmsgKyB0aGlzLnldO1xuICB9LFxuICBhcHBseVg6IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4geCAqIHRoaXMuayArIHRoaXMueDtcbiAgfSxcbiAgYXBwbHlZOiBmdW5jdGlvbih5KSB7XG4gICAgcmV0dXJuIHkgKiB0aGlzLmsgKyB0aGlzLnk7XG4gIH0sXG4gIGludmVydDogZnVuY3Rpb24obG9jYXRpb24pIHtcbiAgICByZXR1cm4gWyhsb2NhdGlvblswXSAtIHRoaXMueCkgLyB0aGlzLmssIChsb2NhdGlvblsxXSAtIHRoaXMueSkgLyB0aGlzLmtdO1xuICB9LFxuICBpbnZlcnRYOiBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuICh4IC0gdGhpcy54KSAvIHRoaXMuaztcbiAgfSxcbiAgaW52ZXJ0WTogZnVuY3Rpb24oeSkge1xuICAgIHJldHVybiAoeSAtIHRoaXMueSkgLyB0aGlzLms7XG4gIH0sXG4gIHJlc2NhbGVYOiBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHguY29weSgpLmRvbWFpbih4LnJhbmdlKCkubWFwKHRoaXMuaW52ZXJ0WCwgdGhpcykubWFwKHguaW52ZXJ0LCB4KSk7XG4gIH0sXG4gIHJlc2NhbGVZOiBmdW5jdGlvbih5KSB7XG4gICAgcmV0dXJuIHkuY29weSgpLmRvbWFpbih5LnJhbmdlKCkubWFwKHRoaXMuaW52ZXJ0WSwgdGhpcykubWFwKHkuaW52ZXJ0LCB5KSk7XG4gIH0sXG4gIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyB0aGlzLnggKyBcIixcIiArIHRoaXMueSArIFwiKSBzY2FsZShcIiArIHRoaXMuayArIFwiKVwiO1xuICB9XG59O1xuXG5leHBvcnQgdmFyIGlkZW50aXR5ID0gbmV3IFRyYW5zZm9ybSgxLCAwLCAwKTtcblxudHJhbnNmb3JtLnByb3RvdHlwZSA9IFRyYW5zZm9ybS5wcm90b3R5cGU7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRyYW5zZm9ybShub2RlKSB7XG4gIHdoaWxlICghbm9kZS5fX3pvb20pIGlmICghKG5vZGUgPSBub2RlLnBhcmVudE5vZGUpKSByZXR1cm4gaWRlbnRpdHk7XG4gIHJldHVybiBub2RlLl9fem9vbTtcbn1cbiIsICJpbXBvcnQgeyBOb3RpY2UsIE1vZGFsLCBzZXRJY29uIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgU3RvcnlFbmdpbmVQbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcbmltcG9ydCB7XG5cdENoYXJhY3Rlcixcblx0Q2hhcmFjdGVyVHJhaXQsXG5cdENoYXJhY3RlclJlbGF0aW9uc2hpcCxcblx0V29ybGRFdmVudCxcblx0U2NlbmUsXG5cdFN0b3J5LFxuXHRBcmNoZXR5cGUsXG5cdFRyYWl0LFxuXHRXb3JsZCxcbn0gZnJvbSBcIi4uL3R5cGVzXCI7XG5cbmV4cG9ydCBjbGFzcyBDaGFyYWN0ZXJEZXRhaWxzVmlldyB7XG5cdHByaXZhdGUgcGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbjtcblx0Y2hhcmFjdGVyOiBDaGFyYWN0ZXI7IC8vIE1hZGUgcHVibGljIGZvciBhY2Nlc3MgZnJvbSBTdG9yeUxpc3RWaWV3XG5cdHByaXZhdGUgd29ybGQ6IFdvcmxkIHwgbnVsbDtcblx0cHJpdmF0ZSBjaGFyYWN0ZXJzOiBDaGFyYWN0ZXJbXTtcblx0cHJpdmF0ZSBhcmNoZXR5cGVzOiBBcmNoZXR5cGVbXTtcblx0cHJpdmF0ZSB0cmFpdHM6IFRyYWl0W107XG5cdHByaXZhdGUgZXZlbnRzOiBXb3JsZEV2ZW50W107XG5cdHByaXZhdGUgaGVhZGVyRWw6IEhUTUxFbGVtZW50O1xuXHRwcml2YXRlIGNvbnRlbnRFbDogSFRNTEVsZW1lbnQ7XG5cdHByaXZhdGUgb25CYWNrOiAoKSA9PiB2b2lkO1xuXHRwcml2YXRlIG9uRWRpdENoYXJhY3RlcjogKGNoYXJhY3RlcjogQ2hhcmFjdGVyKSA9PiB2b2lkO1xuXG5cdC8vIFN0YXRlXG5cdHByaXZhdGUgY2hhcmFjdGVyVGFiOiBcIm92ZXJ2aWV3XCIgfCBcInRyYWl0c1wiIHwgXCJldmVudHNcIiB8IFwic2NlbmVzXCIgfCBcInJlbGF0aW9uc2hpcHNcIiA9IFwib3ZlcnZpZXdcIjtcblx0cHJpdmF0ZSBjaGFyYWN0ZXJUcmFpdHM6IENoYXJhY3RlclRyYWl0W10gPSBbXTtcblx0cHJpdmF0ZSBjaGFyYWN0ZXJFdmVudHM6IHsgZXZlbnQ6IFdvcmxkRXZlbnQ7IHJvbGU/OiBzdHJpbmcgfVtdID0gW107XG5cdHByaXZhdGUgY2hhcmFjdGVyU2NlbmVzOiB7IHNjZW5lOiBTY2VuZTsgc3Rvcnk6IFN0b3J5OyB0eXBlOiBcInBvdlwiIHwgXCJjb2FkanV2YW50ZVwiIH1bXSA9IFtdO1xuXHRwcml2YXRlIGNoYXJhY3RlclJlbGF0aW9uc2hpcHM6IENoYXJhY3RlclJlbGF0aW9uc2hpcFtdID0gW107XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbixcblx0XHRjaGFyYWN0ZXI6IENoYXJhY3Rlcixcblx0XHRoZWFkZXJFbDogSFRNTEVsZW1lbnQsXG5cdFx0Y29udGVudEVsOiBIVE1MRWxlbWVudCxcblx0XHRvbkJhY2s6ICgpID0+IHZvaWQsXG5cdFx0b25FZGl0Q2hhcmFjdGVyOiAoY2hhcmFjdGVyOiBDaGFyYWN0ZXIpID0+IHZvaWQsXG5cdFx0d29ybGQ6IFdvcmxkIHwgbnVsbCA9IG51bGwsXG5cdFx0Y2hhcmFjdGVyczogQ2hhcmFjdGVyW10gPSBbXSxcblx0XHRhcmNoZXR5cGVzOiBBcmNoZXR5cGVbXSA9IFtdLFxuXHRcdHRyYWl0czogVHJhaXRbXSA9IFtdLFxuXHRcdGV2ZW50czogV29ybGRFdmVudFtdID0gW11cblx0KSB7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdFx0dGhpcy5jaGFyYWN0ZXIgPSBjaGFyYWN0ZXI7XG5cdFx0dGhpcy53b3JsZCA9IHdvcmxkO1xuXHRcdHRoaXMuY2hhcmFjdGVycyA9IGNoYXJhY3RlcnM7XG5cdFx0dGhpcy5hcmNoZXR5cGVzID0gYXJjaGV0eXBlcztcblx0XHR0aGlzLnRyYWl0cyA9IHRyYWl0cztcblx0XHR0aGlzLmV2ZW50cyA9IGV2ZW50cztcblx0XHR0aGlzLmhlYWRlckVsID0gaGVhZGVyRWw7XG5cdFx0dGhpcy5jb250ZW50RWwgPSBjb250ZW50RWw7XG5cdFx0dGhpcy5vbkJhY2sgPSBvbkJhY2s7XG5cdFx0dGhpcy5vbkVkaXRDaGFyYWN0ZXIgPSBvbkVkaXRDaGFyYWN0ZXI7XG5cdH1cblxuXHRhc3luYyByZW5kZXIoKSB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkQ2hhcmFjdGVyRGF0YSgpO1xuXHRcdHRoaXMucmVuZGVySGVhZGVyKCk7XG5cdFx0dGhpcy5yZW5kZXJDb250ZW50KCk7XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckNvbnRlbnQoKSB7XG5cdFx0Ly8gQ2xlYXIgY29udGVudCBjb21wbGV0ZWx5XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHRcblx0XHRjb25zdCBzaWRlYmFyUG9zaXRpb24gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaWRlYmFyUG9zaXRpb24gfHwgXCJsZWZ0XCI7XG5cblx0XHQvLyBDcmVhdGUgbWFpbiBjb250YWluZXIgZm9yIHRhYnMgYW5kIGNvbnRlbnRcblx0XHRjb25zdCBtYWluQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcImNoYXJhY3Rlci1kZXRhaWxzLWNvbnRhaW5lclwiIH0pO1xuXHRcdFxuXHRcdC8vIFNpZGViYXIgdGFic1xuXHRcdGNvbnN0IHRhYnNDb250YWluZXIgPSBtYWluQ29udGFpbmVyLmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IGBzdG9yeS1lbmdpbmUtd29ybGQtc2lkZWJhciBzdG9yeS1lbmdpbmUtd29ybGQtc2lkZWJhci0ke3NpZGViYXJQb3NpdGlvbn0gY2hhcmFjdGVyLWRldGFpbHMtc2lkZWJhcmBcblx0XHR9KTtcblx0XHRcblx0XHQvLyBDb250ZW50IGNvbnRhaW5lclxuXHRcdGNvbnN0IGNvbnRlbnRDb250YWluZXIgPSBtYWluQ29udGFpbmVyLmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IGBjaGFyYWN0ZXItZGV0YWlscy1jb250ZW50IHN0b3J5LWVuZ2luZS13b3JsZC10YWItY29udGVudCBzdG9yeS1lbmdpbmUtY29udGVudC1zaWRlYmFyLSR7c2lkZWJhclBvc2l0aW9ufWBcblx0XHR9KTtcblx0XHRcblx0XHQvLyBSZW5kZXIgdGFic1xuXHRcdHRoaXMucmVuZGVyVGFicyh0YWJzQ29udGFpbmVyKTtcblx0XHRcblx0XHQvLyBSZW5kZXIgdGFiIGNvbnRlbnRcblx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoY29udGVudENvbnRhaW5lcik7XG5cdH1cblxuXHRhc3luYyBsb2FkQ2hhcmFjdGVyRGF0YSgpIHtcblx0XHR0cnkge1xuXHRcdFx0Ly8gTG9hZCBjaGFyYWN0ZXIgdHJhaXRzXG5cdFx0XHR0aGlzLmNoYXJhY3RlclRyYWl0cyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRDaGFyYWN0ZXJUcmFpdHModGhpcy5jaGFyYWN0ZXIuaWQpO1xuXG5cdFx0XHQvLyBMb2FkIGNoYXJhY3RlciBldmVudHNcblx0XHRcdGNvbnN0IGV2ZW50Q2hhcmFjdGVycyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRDaGFyYWN0ZXJFdmVudHModGhpcy5jaGFyYWN0ZXIuaWQpO1xuXHRcdFx0dGhpcy5jaGFyYWN0ZXJFdmVudHMgPSBhd2FpdCBQcm9taXNlLmFsbChcblx0XHRcdFx0ZXZlbnRDaGFyYWN0ZXJzLm1hcChhc3luYyAoZWMpID0+IHtcblx0XHRcdFx0XHRjb25zdCBldmVudCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRFdmVudChlYy5ldmVudF9pZCk7XG5cdFx0XHRcdFx0cmV0dXJuIHsgZXZlbnQsIHJvbGU6IGVjLnJvbGUgfHwgdW5kZWZpbmVkIH07XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0XHQvLyBMb2FkIGNoYXJhY3RlciByZWxhdGlvbnNoaXBzXG5cdFx0XHR0aGlzLmNoYXJhY3RlclJlbGF0aW9uc2hpcHMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q2hhcmFjdGVyUmVsYXRpb25zaGlwcyh0aGlzLmNoYXJhY3Rlci5pZCk7XG5cblx0XHRcdC8vIExvYWQgY2hhcmFjdGVyIHNjZW5lcyAod29ya2Fyb3VuZClcblx0XHRcdHRoaXMuY2hhcmFjdGVyU2NlbmVzID0gW107XG5cdFx0XHRpZiAodGhpcy53b3JsZCkge1xuXHRcdFx0XHQvLyBHZXQgYWxsIHN0b3JpZXMgZm9yIHRoaXMgd29ybGRcblx0XHRcdFx0Y29uc3QgYWxsU3RvcmllcyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5saXN0U3RvcmllcygpO1xuXHRcdFx0XHRjb25zdCB3b3JsZFN0b3JpZXMgPSBhbGxTdG9yaWVzLmZpbHRlcigocykgPT4gcy53b3JsZF9pZCA9PT0gdGhpcy53b3JsZCEuaWQpO1xuXG5cdFx0XHRcdGZvciAoY29uc3Qgc3Rvcnkgb2Ygd29ybGRTdG9yaWVzKSB7XG5cdFx0XHRcdFx0Ly8gR2V0IGFsbCBzY2VuZXMgZm9yIHRoaXMgc3Rvcnlcblx0XHRcdFx0XHRjb25zdCBzY2VuZXMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0U2NlbmVzQnlTdG9yeShzdG9yeS5pZCk7XG5cblx0XHRcdFx0XHQvLyBGaWx0ZXIgUE9WIHNjZW5lc1xuXHRcdFx0XHRcdGNvbnN0IHBvdlNjZW5lcyA9IHNjZW5lcy5maWx0ZXIoKHMpID0+IHMucG92X2NoYXJhY3Rlcl9pZCA9PT0gdGhpcy5jaGFyYWN0ZXIuaWQpO1xuXHRcdFx0XHRcdGZvciAoY29uc3Qgc2NlbmUgb2YgcG92U2NlbmVzKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmNoYXJhY3RlclNjZW5lcy5wdXNoKHsgc2NlbmUsIHN0b3J5LCB0eXBlOiBcInBvdlwiIH0pO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIEZpbHRlciBjb2FkanV2YW50ZSBzY2VuZXMgKHZpYSBTY2VuZVJlZmVyZW5jZXMpXG5cdFx0XHRcdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBzY2VuZXMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHJlZnMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0U2NlbmVSZWZlcmVuY2VzKHNjZW5lLmlkKTtcblx0XHRcdFx0XHRcdGNvbnN0IGNoYXJSZWYgPSByZWZzLmZpbmQoXG5cdFx0XHRcdFx0XHRcdChyKSA9PiByLmVudGl0eV90eXBlID09PSBcImNoYXJhY3RlclwiICYmIHIuZW50aXR5X2lkID09PSB0aGlzLmNoYXJhY3Rlci5pZFxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdGlmIChjaGFyUmVmKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuY2hhcmFjdGVyU2NlbmVzLnB1c2goeyBzY2VuZSwgc3RvcnksIHR5cGU6IFwiY29hZGp1dmFudGVcIiB9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBsb2FkIGNoYXJhY3RlciBkYXRhXCI7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVySGVhZGVyKCkge1xuXHRcdGlmICghdGhpcy5oZWFkZXJFbCkgcmV0dXJuO1xuXG5cdFx0dGhpcy5oZWFkZXJFbC5lbXB0eSgpO1xuXG5cdFx0Y29uc3QgaGVhZGVyQ29udGFpbmVyID0gdGhpcy5oZWFkZXJFbC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLWRldGFpbHMtaGVhZGVyXCIgfSk7XG5cdFx0Y29uc3QgaGVhZGVyQ29udGVudCA9IGhlYWRlckNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLWhlYWRlci1jb250ZW50XCIgfSk7XG5cblx0XHRjb25zdCB0b3BSb3cgPSBoZWFkZXJDb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtaGVhZGVyLXRvcFwiIH0pO1xuXHRcdGNvbnN0IGJhY2tCdXR0b24gPSB0b3BSb3cuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJcdTIxOTAgQmFja1wiLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1iYWNrLWJ0blwiLFxuXHRcdH0pO1xuXHRcdGJhY2tCdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdHRoaXMub25CYWNrKCk7XG5cdFx0fTtcblxuXHRcdGNvbnN0IGhlYWRlckFjdGlvbnMgPSB0b3BSb3cuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1oZWFkZXItYWN0aW9uc1wiIH0pO1xuXHRcdGNvbnN0IGNvbnRleHRCdXR0b24gPSBoZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtY29udGV4dC1idG5cIixcblx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiQ2hhcmFjdGVyIEFjdGlvbnNcIiB9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihjb250ZXh0QnV0dG9uLCBcIm1vcmUtdmVydGljYWxcIik7XG5cblx0XHRjb25zdCBkcm9wZG93bk1lbnUgPSBoZWFkZXJBY3Rpb25zLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZHJvcGRvd24tbWVudVwiIH0pO1xuXHRcdGRyb3Bkb3duTWVudS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cblx0XHRjb25zdCBlZGl0T3B0aW9uID0gZHJvcGRvd25NZW51LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZHJvcGRvd24taXRlbVwiLFxuXHRcdH0pO1xuXHRcdHNldEljb24oZWRpdE9wdGlvbiwgXCJwZW5jaWxcIik7XG5cdFx0ZWRpdE9wdGlvbi5jcmVhdGVTcGFuKHsgdGV4dDogXCJFZGl0IENoYXJhY3RlclwiIH0pO1xuXHRcdGVkaXRPcHRpb24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdGRyb3Bkb3duTWVudS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHR0aGlzLm9uRWRpdENoYXJhY3Rlcih0aGlzLmNoYXJhY3Rlcik7XG5cdFx0fTtcblxuXHRcdGNvbnRleHRCdXR0b24ub25jbGljayA9IChlKSA9PiB7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0Y29uc3QgaXNWaXNpYmxlID0gZHJvcGRvd25NZW51LnN0eWxlLmRpc3BsYXkgIT09IFwibm9uZVwiO1xuXHRcdFx0ZHJvcGRvd25NZW51LnN0eWxlLmRpc3BsYXkgPSBpc1Zpc2libGUgPyBcIm5vbmVcIiA6IFwiYmxvY2tcIjtcblx0XHR9O1xuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cdFx0XHRkcm9wZG93bk1lbnUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdH0sIHsgb25jZTogdHJ1ZSB9KTtcblxuXHRcdGNvbnN0IHRpdGxlU2VjdGlvbiA9IGhlYWRlckNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC10aXRsZS1zZWN0aW9uXCIgfSk7XG5cdFx0dGl0bGVTZWN0aW9uLmNyZWF0ZUVsKFwiaDFcIiwge1xuXHRcdFx0dGV4dDogdGhpcy5jaGFyYWN0ZXIubmFtZSxcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtbmFtZVwiXG5cdFx0fSk7XG5cblx0XHRjb25zdCBtZXRhUm93ID0gdGl0bGVTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtbWV0YS1yb3dcIiB9KTtcblx0XHRpZiAodGhpcy5jaGFyYWN0ZXIuYXJjaGV0eXBlX2lkKSB7XG5cdFx0XHRjb25zdCBhcmNoZXR5cGUgPSB0aGlzLmFyY2hldHlwZXMuZmluZCgoYSkgPT4gYS5pZCA9PT0gdGhpcy5jaGFyYWN0ZXIuYXJjaGV0eXBlX2lkKTtcblx0XHRcdGlmIChhcmNoZXR5cGUpIHtcblx0XHRcdFx0Y29uc3QgYXJjaGV0eXBlQmFkZ2UgPSBtZXRhUm93LmNyZWF0ZVNwYW4oeyBjbHM6IFwic3RvcnktZW5naW5lLWJhZGdlIHN0b3J5LWVuZ2luZS1nZW5yZS1iYWRnZVwiIH0pO1xuXHRcdFx0XHRzZXRJY29uKGFyY2hldHlwZUJhZGdlLCBcInRhZ1wiKTtcblx0XHRcdFx0YXJjaGV0eXBlQmFkZ2UuY3JlYXRlU3Bhbih7IHRleHQ6IGFyY2hldHlwZS5uYW1lIH0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IHV1aWRDb250YWluZXIgPSBtZXRhUm93LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtdXVpZFwiIH0pO1xuXHRcdHV1aWRDb250YWluZXIuY3JlYXRlU3Bhbih7IHRleHQ6IHRoaXMuY2hhcmFjdGVyLmlkLnN1YnN0cmluZygwLCA4KSArIFwiLi4uXCIgfSk7XG5cdFx0Y29uc3QgY29weUlkQnRuID0gdXVpZENvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWNvcHktdXVpZC1idG5cIixcblx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiQ29weSBVVUlEXCIgfVxuXHRcdH0pO1xuXHRcdHNldEljb24oY29weUlkQnRuLCBcImNvcHlcIik7XG5cdFx0Y29weUlkQnRuLm9uY2xpY2sgPSAoZSkgPT4ge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRoaXMuY2hhcmFjdGVyLmlkKTtcblx0XHRcdG5ldyBOb3RpY2UoXCJVVUlEIGNvcGllZCB0byBjbGlwYm9hcmRcIik7XG5cdFx0fTtcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyVGFicyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0dHlwZSBUYWJLZXkgPSBcIm92ZXJ2aWV3XCIgfCBcInRyYWl0c1wiIHwgXCJldmVudHNcIiB8IFwic2NlbmVzXCIgfCBcInJlbGF0aW9uc2hpcHNcIjtcblx0XHRjb25zdCB0YWJzOiB7IGtleTogVGFiS2V5OyBsYWJlbDogc3RyaW5nOyBpY29uOiBzdHJpbmcgfVtdID0gW1xuXHRcdFx0eyBrZXk6IFwib3ZlcnZpZXdcIiwgbGFiZWw6IFwiT3ZlcnZpZXdcIiwgaWNvbjogXCJib29rLW9wZW5cIiB9LFxuXHRcdFx0eyBrZXk6IFwidHJhaXRzXCIsIGxhYmVsOiBcIlRyYWl0c1wiLCBpY29uOiBcInRhZ1wiIH0sXG5cdFx0XHR7IGtleTogXCJldmVudHNcIiwgbGFiZWw6IFwiRXZlbnRzXCIsIGljb246IFwiY2FsZW5kYXJcIiB9LFxuXHRcdFx0eyBrZXk6IFwic2NlbmVzXCIsIGxhYmVsOiBcIlNjZW5lc1wiLCBpY29uOiBcImZpbG1cIiB9LFxuXHRcdFx0eyBrZXk6IFwicmVsYXRpb25zaGlwc1wiLCBsYWJlbDogXCJSZWxhdGlvbnNoaXBzXCIsIGljb246IFwidXNlcnNcIiB9LFxuXHRcdF07XG5cblx0XHR0YWJzLmZvckVhY2godGFiID0+IHtcblx0XHRcdGNvbnN0IGlzQWN0aXZlID0gdGhpcy5jaGFyYWN0ZXJUYWIgPT09IHRhYi5rZXk7XG5cdFx0XHRjb25zdCB0YWJCdXR0b24gPSBjb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRjbHM6IGBzdG9yeS1lbmdpbmUtc2lkZWJhci10YWIgJHtpc0FjdGl2ZSA/IFwiaXMtYWN0aXZlXCIgOiBcIlwifWAsXG5cdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IHRhYi5sYWJlbCB9LFxuXHRcdFx0fSk7XG5cdFx0XHRzZXRJY29uKHRhYkJ1dHRvbiwgdGFiLmljb24pO1xuXHRcdFx0XG5cdFx0XHR0YWJCdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMuY2hhcmFjdGVyVGFiICE9PSB0YWIua2V5KSB7XG5cdFx0XHRcdFx0dGhpcy5jaGFyYWN0ZXJUYWIgPSB0YWIua2V5O1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJUYWJDb250ZW50KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRjb25zdCBjb250ZW50Q29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJjaGFyYWN0ZXItZGV0YWlscy1jb250ZW50LWlubmVyXCIgfSk7XG5cblx0XHRzd2l0Y2ggKHRoaXMuY2hhcmFjdGVyVGFiKSB7XG5cdFx0XHRjYXNlIFwib3ZlcnZpZXdcIjpcblx0XHRcdFx0dGhpcy5yZW5kZXJPdmVydmlld1RhYihjb250ZW50Q29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwidHJhaXRzXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyVHJhaXRzVGFiKGNvbnRlbnRDb250YWluZXIpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJldmVudHNcIjpcblx0XHRcdFx0dGhpcy5yZW5kZXJFdmVudHNUYWIoY29udGVudENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcInNjZW5lc1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlclNjZW5lc1RhYihjb250ZW50Q29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwicmVsYXRpb25zaGlwc1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlclJlbGF0aW9uc2hpcHNUYWIoY29udGVudENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXG5cdHJlbmRlck92ZXJ2aWV3VGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHQvLyBEZXNjcmlwdGlvbiAoZWRpdGFibGUgdGV4dGFyZWEpXG5cdFx0Y29uc3QgZGVzY1NlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWN0aW9uXCIgfSk7XG5cdFx0ZGVzY1NlY3Rpb24uY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjVGV4dGFyZWEgPSBkZXNjU2VjdGlvbi5jcmVhdGVFbChcInRleHRhcmVhXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIixcblx0XHRcdGF0dHI6IHsgcm93czogXCI1XCIgfSxcblx0XHR9KTtcblx0XHRkZXNjVGV4dGFyZWEudmFsdWUgPSB0aGlzLmNoYXJhY3Rlci5kZXNjcmlwdGlvbiB8fCBcIlwiO1xuXHRcdGRlc2NUZXh0YXJlYS5wbGFjZWhvbGRlciA9IFwiRW50ZXIgY2hhcmFjdGVyIGRlc2NyaXB0aW9uLi4uXCI7XG5cblx0XHRjb25zdCBkZXNjQWN0aW9ucyA9IGRlc2NTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtYWN0aW9uc1wiIH0pO1xuXHRcdGNvbnN0IHNhdmVEZXNjQnRuID0gZGVzY0FjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlNhdmUgRGVzY3JpcHRpb25cIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlRGVzY0J0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgdXBkYXRlZCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVDaGFyYWN0ZXIodGhpcy5jaGFyYWN0ZXIuaWQsIHtcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY1RleHRhcmVhLnZhbHVlLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0dGhpcy5jaGFyYWN0ZXIgPSB1cGRhdGVkO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiRGVzY3JpcHRpb24gc2F2ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIEFyY2hldHlwZSBkcm9wZG93blxuXHRcdGNvbnN0IGFyY2hldHlwZVNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWN0aW9uXCIgfSk7XG5cdFx0YXJjaGV0eXBlU2VjdGlvbi5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJBcmNoZXR5cGVcIiB9KTtcblx0XHRjb25zdCBhcmNoZXR5cGVTZWxlY3QgPSBhcmNoZXR5cGVTZWN0aW9uLmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblxuXHRcdC8vIEFkZCBcIk5vbmVcIiBvcHRpb25cblx0XHRjb25zdCBub25lT3B0aW9uID0gYXJjaGV0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogXCJOb25lXCIsIHZhbHVlOiBcIlwiIH0pO1xuXHRcdGlmICghdGhpcy5jaGFyYWN0ZXIuYXJjaGV0eXBlX2lkKSB7XG5cdFx0XHRub25lT3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBBZGQgYXJjaGV0eXBlIG9wdGlvbnNcblx0XHRmb3IgKGNvbnN0IGFyY2hldHlwZSBvZiB0aGlzLmFyY2hldHlwZXMpIHtcblx0XHRcdGNvbnN0IG9wdGlvbiA9IGFyY2hldHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7XG5cdFx0XHRcdHRleHQ6IGFyY2hldHlwZS5uYW1lLFxuXHRcdFx0XHR2YWx1ZTogYXJjaGV0eXBlLmlkLFxuXHRcdFx0fSk7XG5cdFx0XHRpZiAodGhpcy5jaGFyYWN0ZXIuYXJjaGV0eXBlX2lkID09PSBhcmNoZXR5cGUuaWQpIHtcblx0XHRcdFx0b3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRjb25zdCBhcmNoZXR5cGVBY3Rpb25zID0gYXJjaGV0eXBlU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWFjdGlvbnNcIiB9KTtcblx0XHRjb25zdCBzYXZlQXJjaGV0eXBlQnRuID0gYXJjaGV0eXBlQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZSBBcmNoZXR5cGVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlQXJjaGV0eXBlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCBhcmNoZXR5cGVJZCA9IGFyY2hldHlwZVNlbGVjdC52YWx1ZSB8fCBudWxsO1xuXHRcdFx0XHRjb25zdCB1cGRhdGVkID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUNoYXJhY3Rlcih0aGlzLmNoYXJhY3Rlci5pZCwge1xuXHRcdFx0XHRcdGFyY2hldHlwZV9pZDogYXJjaGV0eXBlSWQsXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHR0aGlzLmNoYXJhY3RlciA9IHVwZGF0ZWQ7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZENoYXJhY3RlckRhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJIZWFkZXIoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50KCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJBcmNoZXR5cGUgc2F2ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdHJlbmRlclRyYWl0c1RhYihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0Y29uc3QgYWN0aW9uc0JhciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWFjdGlvbnMtYmFyXCIgfSk7XG5cdFx0Y29uc3QgYWRkQnRuID0gYWN0aW9uc0Jhci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQWRkIFRyYWl0XCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0YWRkQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLnNob3dBZGRUcmFpdE1vZGFsKCk7XG5cdFx0fTtcblxuXHRcdGlmICh0aGlzLmNoYXJhY3RlclRyYWl0cy5sZW5ndGggPT09IDApIHtcblx0XHRcdGNvbnRhaW5lci5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIHRyYWl0cyBhc3NpZ25lZC4gQWRkIGEgdHJhaXQgdG8gZ2V0IHN0YXJ0ZWQhXCIgfSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblx0XHRmb3IgKGNvbnN0IGNoYXJUcmFpdCBvZiB0aGlzLmNoYXJhY3RlclRyYWl0cykge1xuXHRcdFx0Y29uc3QgaXRlbSA9IGxpc3QuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtXCIgfSk7XG5cblx0XHRcdGNvbnN0IHRpdGxlUm93ID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXRpdGxlXCIgfSk7XG5cdFx0XHR0aXRsZVJvdy5jcmVhdGVFbChcInN0cm9uZ1wiLCB7IHRleHQ6IGNoYXJUcmFpdC50cmFpdF9uYW1lIH0pO1xuXHRcdFx0Y29uc3QgY2F0ZWdvcnlQaWxsID0gdGl0bGVSb3cuY3JlYXRlU3Bhbih7IGNsczogXCJzdG9yeS1lbmdpbmUtYmFkZ2VcIiB9KTtcblx0XHRcdGNhdGVnb3J5UGlsbC50ZXh0Q29udGVudCA9IGNoYXJUcmFpdC50cmFpdF9jYXRlZ29yeTtcblxuXHRcdFx0Y29uc3QgbWV0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIgfSk7XG5cdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGBWYWx1ZTogJHtjaGFyVHJhaXQudmFsdWUgfHwgXCJOL0FcIn1gIH0pO1xuXHRcdFx0aWYgKGNoYXJUcmFpdC5ub3Rlcykge1xuXHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGAgfCBOb3RlczogJHtjaGFyVHJhaXQubm90ZXN9YCB9KTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgYWN0aW9ucyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtLWFjdGlvbnNcIiB9KTtcblx0XHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkVkaXRcIiB9KS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnNob3dFZGl0VHJhaXRNb2RhbChjaGFyVHJhaXQpO1xuXHRcdFx0fTtcblx0XHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkRlbGV0ZVwiIH0pLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGlmIChjb25maXJtKGBSZW1vdmUgdHJhaXQgXCIke2NoYXJUcmFpdC50cmFpdF9uYW1lfVwiP2ApKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5yZW1vdmVDaGFyYWN0ZXJUcmFpdCh0aGlzLmNoYXJhY3Rlci5pZCwgY2hhclRyYWl0LnRyYWl0X2lkKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZENoYXJhY3RlckRhdGEoKTtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIlRyYWl0IHJlbW92ZWRcIik7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyRXZlbnRzVGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRjb25zdCBhY3Rpb25zQmFyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtYWN0aW9ucy1iYXJcIiB9KTtcblx0XHRjb25zdCBhZGRCdG4gPSBhY3Rpb25zQmFyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJBZGQgRXZlbnRcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRhZGRCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdHRoaXMuc2hvd0FkZEV2ZW50TW9kYWwoKTtcblx0XHR9O1xuXG5cdFx0aWYgKHRoaXMuY2hhcmFjdGVyRXZlbnRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Y29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gZXZlbnRzIGFzc2lnbmVkLiBBZGQgYW4gZXZlbnQgdG8gZ2V0IHN0YXJ0ZWQhXCIgfSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblx0XHRmb3IgKGNvbnN0IHsgZXZlbnQsIHJvbGUgfSBvZiB0aGlzLmNoYXJhY3RlckV2ZW50cykge1xuXHRcdFx0Y29uc3QgaXRlbSA9IGxpc3QuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtXCIgfSk7XG5cdFx0XHRpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIiwgdGV4dDogZXZlbnQubmFtZSB9KTtcblxuXHRcdFx0Y29uc3QgbWV0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIgfSk7XG5cdFx0XHRpZiAocm9sZSkge1xuXHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGBSb2xlOiAke3JvbGV9YCB9KTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgYWN0aW9ucyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtLWFjdGlvbnNcIiB9KTtcblx0XHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkVkaXQgUm9sZVwiIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuc2hvd0VkaXRFdmVudFJvbGVNb2RhbChldmVudCwgcm9sZSk7XG5cdFx0XHR9O1xuXHRcdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiUmVtb3ZlXCIgfSkub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0aWYgKGNvbmZpcm0oYFJlbW92ZSBjaGFyYWN0ZXIgZnJvbSBldmVudCBcIiR7ZXZlbnQubmFtZX1cIj9gKSkge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQucmVtb3ZlRXZlbnRDaGFyYWN0ZXIoZXZlbnQuaWQsIHRoaXMuY2hhcmFjdGVyLmlkKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZENoYXJhY3RlckRhdGEoKTtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkNoYXJhY3RlciByZW1vdmVkIGZyb20gZXZlbnRcIik7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyU2NlbmVzVGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRpZiAodGhpcy5jaGFyYWN0ZXJTY2VuZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBzY2VuZXMgZm91bmQgZm9yIHRoaXMgY2hhcmFjdGVyLlwiIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGxpc3QgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1saXN0XCIgfSk7XG5cdFx0Zm9yIChjb25zdCB7IHNjZW5lLCBzdG9yeSwgdHlwZSB9IG9mIHRoaXMuY2hhcmFjdGVyU2NlbmVzKSB7XG5cdFx0XHRjb25zdCBpdGVtID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIiB9KTtcblxuXHRcdFx0Y29uc3QgdGl0bGVSb3cgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIiB9KTtcblx0XHRcdHRpdGxlUm93LmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IHNjZW5lLmdvYWwgfHwgXCJObyBnb2FsXCIgfSk7XG5cblx0XHRcdGNvbnN0IHR5cGVQaWxsID0gdGl0bGVSb3cuY3JlYXRlU3Bhbih7XG5cdFx0XHRcdGNsczpcblx0XHRcdFx0XHR0eXBlID09PSBcInBvdlwiXG5cdFx0XHRcdFx0XHQ/IFwic3RvcnktZW5naW5lLWJhZGdlIHN0b3J5LWVuZ2luZS1iYWRnZS1ncmVlblwiXG5cdFx0XHRcdFx0XHQ6IFwic3RvcnktZW5naW5lLWJhZGdlIHN0b3J5LWVuZ2luZS1iYWRnZS1ibHVlXCIsXG5cdFx0XHR9KTtcblx0XHRcdHR5cGVQaWxsLnRleHRDb250ZW50ID0gdHlwZSA9PT0gXCJwb3ZcIiA/IFwiUE9WXCIgOiBcIkNvYWRqdXZhbnRlXCI7XG5cblx0XHRcdGNvbnN0IG1ldGEgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbWV0YVwiIH0pO1xuXHRcdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBgU3Rvcnk6ICR7c3RvcnkudGl0bGV9YCB9KTtcblx0XHR9XG5cdH1cblxuXHRyZW5kZXJSZWxhdGlvbnNoaXBzVGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRjb25zdCBhY3Rpb25zQmFyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtYWN0aW9ucy1iYXJcIiB9KTtcblx0XHRjb25zdCBhZGRCdG4gPSBhY3Rpb25zQmFyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJBZGQgUmVsYXRpb25zaGlwXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0YWRkQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLnNob3dBZGRSZWxhdGlvbnNoaXBNb2RhbCgpO1xuXHRcdH07XG5cblx0XHRpZiAodGhpcy5jaGFyYWN0ZXJSZWxhdGlvbnNoaXBzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Y29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gcmVsYXRpb25zaGlwcyBkZWZpbmVkLiBBZGQgYSByZWxhdGlvbnNoaXAgdG8gZ2V0IHN0YXJ0ZWQhXCIgfSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblx0XHRmb3IgKGNvbnN0IHJlbCBvZiB0aGlzLmNoYXJhY3RlclJlbGF0aW9uc2hpcHMpIHtcblx0XHRcdC8vIERldGVybWluZSB0aGUgb3RoZXIgY2hhcmFjdGVyXG5cdFx0XHRjb25zdCBvdGhlckNoYXJJZCA9XG5cdFx0XHRcdHJlbC5jaGFyYWN0ZXIxX2lkID09PSB0aGlzLmNoYXJhY3Rlci5pZCA/IHJlbC5jaGFyYWN0ZXIyX2lkIDogcmVsLmNoYXJhY3RlcjFfaWQ7XG5cdFx0XHRjb25zdCBvdGhlckNoYXIgPSB0aGlzLmNoYXJhY3RlcnMuZmluZCgoYykgPT4gYy5pZCA9PT0gb3RoZXJDaGFySWQpO1xuXHRcdFx0Y29uc3Qgb3RoZXJDaGFyTmFtZSA9IG90aGVyQ2hhciA/IG90aGVyQ2hhci5uYW1lIDogXCJVbmtub3duXCI7XG5cblx0XHRcdGNvbnN0IGl0ZW0gPSBsaXN0LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbVwiIH0pO1xuXG5cdFx0XHRjb25zdCB0aXRsZVJvdyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiIH0pO1xuXHRcdFx0dGl0bGVSb3cuY3JlYXRlRWwoXCJzdHJvbmdcIiwgeyB0ZXh0OiBvdGhlckNoYXJOYW1lIH0pO1xuXG5cdFx0XHRjb25zdCB0eXBlUGlsbCA9IHRpdGxlUm93LmNyZWF0ZVNwYW4oeyBjbHM6IFwic3RvcnktZW5naW5lLWJhZGdlXCIgfSk7XG5cdFx0XHR0eXBlUGlsbC50ZXh0Q29udGVudCA9IHJlbC5yZWxhdGlvbnNoaXBfdHlwZTtcblxuXHRcdFx0Y29uc3QgZGlyZWN0aW9uSWNvbiA9IHRpdGxlUm93LmNyZWF0ZVNwYW4oeyBjbHM6IFwic3RvcnktZW5naW5lLWRpcmVjdGlvblwiIH0pO1xuXHRcdFx0ZGlyZWN0aW9uSWNvbi50ZXh0Q29udGVudCA9IHJlbC5iaWRpcmVjdGlvbmFsID8gXCJcdTIxOTRcIiA6IFwiXHUyMTkyXCI7XG5cblx0XHRcdGNvbnN0IG1ldGEgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbWV0YVwiIH0pO1xuXHRcdFx0aWYgKHJlbC5kZXNjcmlwdGlvbikge1xuXHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IHJlbC5kZXNjcmlwdGlvbiB9KTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgYWN0aW9ucyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtLWFjdGlvbnNcIiB9KTtcblx0XHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkVkaXRcIiB9KS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnNob3dFZGl0UmVsYXRpb25zaGlwTW9kYWwocmVsKTtcblx0XHRcdH07XG5cdFx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJEZWxldGVcIiB9KS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRpZiAoY29uZmlybShgRGVsZXRlIHJlbGF0aW9uc2hpcCB3aXRoIFwiJHtvdGhlckNoYXJOYW1lfVwiP2ApKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5kZWxldGVDaGFyYWN0ZXJSZWxhdGlvbnNoaXAocmVsLmlkKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZENoYXJhY3RlckRhdGEoKTtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIlJlbGF0aW9uc2hpcCBkZWxldGVkXCIpO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdC8vIE1vZGFsIG1ldGhvZHNcblx0c2hvd0FkZFRyYWl0TW9kYWwoKSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5wbHVnaW4uYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnRleHRDb250ZW50ID0gXCJBZGQgVHJhaXRcIjtcblxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIlNlbGVjdCBhIHRyYWl0IHRvIGFkZDpcIiB9KTtcblxuXHRcdGNvbnN0IHRyYWl0U2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0Y29uc3QgYXZhaWxhYmxlVHJhaXRzID0gdGhpcy50cmFpdHMuZmlsdGVyKFxuXHRcdFx0KHQpID0+ICF0aGlzLmNoYXJhY3RlclRyYWl0cy5zb21lKChjdCkgPT4gY3QudHJhaXRfaWQgPT09IHQuaWQpXG5cdFx0KTtcblxuXHRcdGlmIChhdmFpbGFibGVUcmFpdHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gYXZhaWxhYmxlIHRyYWl0cy4gQ3JlYXRlIGEgdHJhaXQgZmlyc3QhXCIgfSk7XG5cdFx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0XHRjb25zdCBjbG9zZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2xvc2VcIiB9KTtcblx0XHRcdGNsb3NlQnRuLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGZvciAoY29uc3QgdHJhaXQgb2YgYXZhaWxhYmxlVHJhaXRzKSB7XG5cdFx0XHR0cmFpdFNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IGAke3RyYWl0Lm5hbWV9ICgke3RyYWl0LmNhdGVnb3J5fSlgLCB2YWx1ZTogdHJhaXQuaWQgfSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgdmFsdWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsXG5cdFx0XHRhdHRyOiB7IHR5cGU6IFwidGV4dFwiLCBwbGFjZWhvbGRlcjogXCJWYWx1ZSAob3B0aW9uYWwpXCIgfSxcblx0XHR9KTtcblxuXHRcdGNvbnN0IG5vdGVzSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiLFxuXHRcdFx0YXR0cjogeyByb3dzOiBcIjNcIiwgcGxhY2Vob2xkZXI6IFwiTm90ZXMgKG9wdGlvbmFsKVwiIH0sXG5cdFx0fSk7XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQWRkXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmFkZENoYXJhY3RlclRyYWl0KFxuXHRcdFx0XHRcdHRoaXMuY2hhcmFjdGVyLmlkLFxuXHRcdFx0XHRcdHRyYWl0U2VsZWN0LnZhbHVlLFxuXHRcdFx0XHRcdHZhbHVlSW5wdXQudmFsdWUgfHwgdW5kZWZpbmVkLFxuXHRcdFx0XHRcdG5vdGVzSW5wdXQudmFsdWUgfHwgdW5kZWZpbmVkXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZENoYXJhY3RlckRhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJUcmFpdCBhZGRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KTtcblx0XHRjYW5jZWxCdG4ub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRzaG93RWRpdFRyYWl0TW9kYWwoY2hhclRyYWl0OiBDaGFyYWN0ZXJUcmFpdCkge1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMucGx1Z2luLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC50ZXh0Q29udGVudCA9IFwiRWRpdCBUcmFpdFwiO1xuXG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IGBFZGl0aW5nOiAke2NoYXJUcmFpdC50cmFpdF9uYW1lfWAgfSk7XG5cblx0XHRjb25zdCB2YWx1ZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIixcblx0XHRcdGF0dHI6IHsgdHlwZTogXCJ0ZXh0XCIsIHBsYWNlaG9sZGVyOiBcIlZhbHVlXCIgfSxcblx0XHR9KTtcblx0XHR2YWx1ZUlucHV0LnZhbHVlID0gY2hhclRyYWl0LnZhbHVlIHx8IFwiXCI7XG5cblx0XHRjb25zdCBub3Rlc0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIixcblx0XHRcdGF0dHI6IHsgcm93czogXCIzXCIsIHBsYWNlaG9sZGVyOiBcIk5vdGVzXCIgfSxcblx0XHR9KTtcblx0XHRub3Rlc0lucHV0LnZhbHVlID0gY2hhclRyYWl0Lm5vdGVzIHx8IFwiXCI7XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVDaGFyYWN0ZXJUcmFpdChcblx0XHRcdFx0XHR0aGlzLmNoYXJhY3Rlci5pZCxcblx0XHRcdFx0XHRjaGFyVHJhaXQudHJhaXRfaWQsXG5cdFx0XHRcdFx0dmFsdWVJbnB1dC52YWx1ZSB8fCB1bmRlZmluZWQsXG5cdFx0XHRcdFx0bm90ZXNJbnB1dC52YWx1ZSB8fCB1bmRlZmluZWRcblx0XHRcdFx0KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkQ2hhcmFjdGVyRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlckNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIlRyYWl0IHVwZGF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSk7XG5cdFx0Y2FuY2VsQnRuLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0c2hvd0FkZEV2ZW50TW9kYWwoKSB7XG5cdFx0aWYgKCF0aGlzLndvcmxkKSByZXR1cm47XG5cblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLnBsdWdpbi5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwudGV4dENvbnRlbnQgPSBcIkFkZCBFdmVudFwiO1xuXG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiU2VsZWN0IGFuIGV2ZW50OlwiIH0pO1xuXG5cdFx0Y29uc3QgZXZlbnRTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHRjb25zdCBhdmFpbGFibGVFdmVudHMgPSB0aGlzLmV2ZW50cy5maWx0ZXIoXG5cdFx0XHQoZSkgPT4gIXRoaXMuY2hhcmFjdGVyRXZlbnRzLnNvbWUoKGNlKSA9PiBjZS5ldmVudC5pZCA9PT0gZS5pZClcblx0XHQpO1xuXG5cdFx0aWYgKGF2YWlsYWJsZUV2ZW50cy5sZW5ndGggPT09IDApIHtcblx0XHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBhdmFpbGFibGUgZXZlbnRzLiBDcmVhdGUgYW4gZXZlbnQgZmlyc3QhXCIgfSk7XG5cdFx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0XHRjb25zdCBjbG9zZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2xvc2VcIiB9KTtcblx0XHRcdGNsb3NlQnRuLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGZvciAoY29uc3QgZXZlbnQgb2YgYXZhaWxhYmxlRXZlbnRzKSB7XG5cdFx0XHRldmVudFNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IGV2ZW50Lm5hbWUsIHZhbHVlOiBldmVudC5pZCB9KTtcblx0XHR9XG5cblx0XHRjb25zdCByb2xlSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLFxuXHRcdFx0YXR0cjogeyB0eXBlOiBcInRleHRcIiwgcGxhY2Vob2xkZXI6IFwiUm9sZSAob3B0aW9uYWwpXCIgfSxcblx0XHR9KTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJBZGRcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuYWRkRXZlbnRDaGFyYWN0ZXIoXG5cdFx0XHRcdFx0ZXZlbnRTZWxlY3QudmFsdWUsXG5cdFx0XHRcdFx0dGhpcy5jaGFyYWN0ZXIuaWQsXG5cdFx0XHRcdFx0cm9sZUlucHV0LnZhbHVlIHx8IHVuZGVmaW5lZFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRDaGFyYWN0ZXJEYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQ2hhcmFjdGVyIGFkZGVkIHRvIGV2ZW50XCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pO1xuXHRcdGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHNob3dFZGl0RXZlbnRSb2xlTW9kYWwoZXZlbnQ6IFdvcmxkRXZlbnQsIGN1cnJlbnRSb2xlPzogc3RyaW5nKSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5wbHVnaW4uYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnRleHRDb250ZW50ID0gXCJFZGl0IFJvbGVcIjtcblxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBgRXZlbnQ6ICR7ZXZlbnQubmFtZX1gIH0pO1xuXG5cdFx0Y29uc3Qgcm9sZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIixcblx0XHRcdGF0dHI6IHsgdHlwZTogXCJ0ZXh0XCIsIHBsYWNlaG9sZGVyOiBcIlJvbGVcIiB9LFxuXHRcdFx0dmFsdWU6IGN1cnJlbnRSb2xlIHx8IFwiXCIsXG5cdFx0fSk7XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5yZW1vdmVFdmVudENoYXJhY3RlcihldmVudC5pZCwgdGhpcy5jaGFyYWN0ZXIuaWQpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuYWRkRXZlbnRDaGFyYWN0ZXIoXG5cdFx0XHRcdFx0ZXZlbnQuaWQsXG5cdFx0XHRcdFx0dGhpcy5jaGFyYWN0ZXIuaWQsXG5cdFx0XHRcdFx0cm9sZUlucHV0LnZhbHVlIHx8IHVuZGVmaW5lZFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRDaGFyYWN0ZXJEYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiUm9sZSB1cGRhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pO1xuXHRcdGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHNob3dBZGRSZWxhdGlvbnNoaXBNb2RhbCgpIHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLnBsdWdpbi5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwudGV4dENvbnRlbnQgPSBcIkFkZCBSZWxhdGlvbnNoaXBcIjtcblxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIlNlbGVjdCBhbm90aGVyIGNoYXJhY3RlcjpcIiB9KTtcblxuXHRcdGNvbnN0IGNoYXJhY3RlclNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdGNvbnN0IGF2YWlsYWJsZUNoYXJhY3RlcnMgPSB0aGlzLmNoYXJhY3RlcnMuZmlsdGVyKChjKSA9PiBjLmlkICE9PSB0aGlzLmNoYXJhY3Rlci5pZCk7XG5cblx0XHRpZiAoYXZhaWxhYmxlQ2hhcmFjdGVycy5sZW5ndGggPT09IDApIHtcblx0XHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBvdGhlciBjaGFyYWN0ZXJzIGF2YWlsYWJsZS5cIiB9KTtcblx0XHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRcdGNvbnN0IGNsb3NlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDbG9zZVwiIH0pO1xuXHRcdFx0Y2xvc2VCdG4ub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Zm9yIChjb25zdCBjaGFyIG9mIGF2YWlsYWJsZUNoYXJhY3RlcnMpIHtcblx0XHRcdGNoYXJhY3RlclNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IGNoYXIubmFtZSwgdmFsdWU6IGNoYXIuaWQgfSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgcmVsYXRpb25zaGlwVHlwZVNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdHJlbGF0aW9uc2hpcFR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB0ZXh0OiBcIkFsbHlcIiwgdmFsdWU6IFwiYWxseVwiIH0pO1xuXHRcdHJlbGF0aW9uc2hpcFR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB0ZXh0OiBcIkVuZW15XCIsIHZhbHVlOiBcImVuZW15XCIgfSk7XG5cdFx0cmVsYXRpb25zaGlwVHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IFwiRmFtaWx5XCIsIHZhbHVlOiBcImZhbWlseVwiIH0pO1xuXHRcdHJlbGF0aW9uc2hpcFR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB0ZXh0OiBcIkxvdmVyXCIsIHZhbHVlOiBcImxvdmVyXCIgfSk7XG5cdFx0cmVsYXRpb25zaGlwVHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IFwiUml2YWxcIiwgdmFsdWU6IFwicml2YWxcIiB9KTtcblx0XHRyZWxhdGlvbnNoaXBUeXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogXCJNZW50b3JcIiwgdmFsdWU6IFwibWVudG9yXCIgfSk7XG5cdFx0cmVsYXRpb25zaGlwVHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IFwiU3R1ZGVudFwiLCB2YWx1ZTogXCJzdHVkZW50XCIgfSk7XG5cblx0XHRjb25zdCBkZXNjcmlwdGlvbklucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIixcblx0XHRcdGF0dHI6IHsgcm93czogXCIzXCIsIHBsYWNlaG9sZGVyOiBcIkRlc2NyaXB0aW9uIChvcHRpb25hbClcIiB9LFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgYmlkaXJlY3Rpb25hbENoZWNrYm94ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHtcblx0XHRcdGF0dHI6IHsgdHlwZTogXCJjaGVja2JveFwiIH0sXG5cdFx0fSk7XG5cdFx0YmlkaXJlY3Rpb25hbENoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xuXHRcdGNvbnN0IGJpZGlyZWN0aW9uYWxMYWJlbCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiKTtcblx0XHRiaWRpcmVjdGlvbmFsTGFiZWwuYXBwZW5kQ2hpbGQoYmlkaXJlY3Rpb25hbENoZWNrYm94KTtcblx0XHRiaWRpcmVjdGlvbmFsTGFiZWwuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCIgQmlkaXJlY3Rpb25hbFwiKSk7XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQWRkXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUNoYXJhY3RlclJlbGF0aW9uc2hpcCh0aGlzLmNoYXJhY3Rlci5pZCwge1xuXHRcdFx0XHRcdGNoYXJhY3RlcjFfaWQ6IHRoaXMuY2hhcmFjdGVyLmlkLFxuXHRcdFx0XHRcdGNoYXJhY3RlcjJfaWQ6IGNoYXJhY3RlclNlbGVjdC52YWx1ZSxcblx0XHRcdFx0XHRyZWxhdGlvbnNoaXBfdHlwZTogcmVsYXRpb25zaGlwVHlwZVNlbGVjdC52YWx1ZSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb25JbnB1dC52YWx1ZSB8fCBcIlwiLFxuXHRcdFx0XHRcdGJpZGlyZWN0aW9uYWw6IGJpZGlyZWN0aW9uYWxDaGVja2JveC5jaGVja2VkLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkQ2hhcmFjdGVyRGF0YSgpO1xuXHRcdFx0dGhpcy5yZW5kZXJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJSZWxhdGlvbnNoaXAgYWRkZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSk7XG5cdFx0Y2FuY2VsQnRuLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0c2hvd0VkaXRSZWxhdGlvbnNoaXBNb2RhbChyZWw6IENoYXJhY3RlclJlbGF0aW9uc2hpcCkge1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMucGx1Z2luLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC50ZXh0Q29udGVudCA9IFwiRWRpdCBSZWxhdGlvbnNoaXBcIjtcblxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cblx0XHRjb25zdCByZWxhdGlvbnNoaXBUeXBlU2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0cmVsYXRpb25zaGlwVHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IFwiQWxseVwiLCB2YWx1ZTogXCJhbGx5XCIgfSk7XG5cdFx0cmVsYXRpb25zaGlwVHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IFwiRW5lbXlcIiwgdmFsdWU6IFwiZW5lbXlcIiB9KTtcblx0XHRyZWxhdGlvbnNoaXBUeXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogXCJGYW1pbHlcIiwgdmFsdWU6IFwiZmFtaWx5XCIgfSk7XG5cdFx0cmVsYXRpb25zaGlwVHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IFwiTG92ZXJcIiwgdmFsdWU6IFwibG92ZXJcIiB9KTtcblx0XHRyZWxhdGlvbnNoaXBUeXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogXCJSaXZhbFwiLCB2YWx1ZTogXCJyaXZhbFwiIH0pO1xuXHRcdHJlbGF0aW9uc2hpcFR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB0ZXh0OiBcIk1lbnRvclwiLCB2YWx1ZTogXCJtZW50b3JcIiB9KTtcblx0XHRyZWxhdGlvbnNoaXBUeXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogXCJTdHVkZW50XCIsIHZhbHVlOiBcInN0dWRlbnRcIiB9KTtcblx0XHRyZWxhdGlvbnNoaXBUeXBlU2VsZWN0LnZhbHVlID0gcmVsLnJlbGF0aW9uc2hpcF90eXBlO1xuXG5cdFx0Y29uc3QgZGVzY3JpcHRpb25JbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIsXG5cdFx0XHRhdHRyOiB7IHJvd3M6IFwiM1wiLCBwbGFjZWhvbGRlcjogXCJEZXNjcmlwdGlvblwiIH0sXG5cdFx0XHR0ZXh0OiByZWwuZGVzY3JpcHRpb24gfHwgXCJcIixcblx0XHR9KTtcblxuXHRcdGNvbnN0IGJpZGlyZWN0aW9uYWxDaGVja2JveCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG5cdFx0XHRhdHRyOiB7IHR5cGU6IFwiY2hlY2tib3hcIiB9LFxuXHRcdH0pO1xuXHRcdGJpZGlyZWN0aW9uYWxDaGVja2JveC5jaGVja2VkID0gcmVsLmJpZGlyZWN0aW9uYWw7XG5cdFx0Y29uc3QgYmlkaXJlY3Rpb25hbExhYmVsID0gY29udGVudC5jcmVhdGVFbChcImxhYmVsXCIpO1xuXHRcdGJpZGlyZWN0aW9uYWxMYWJlbC5hcHBlbmRDaGlsZChiaWRpcmVjdGlvbmFsQ2hlY2tib3gpO1xuXHRcdGJpZGlyZWN0aW9uYWxMYWJlbC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIiBCaWRpcmVjdGlvbmFsXCIpKTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTYXZlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUNoYXJhY3RlclJlbGF0aW9uc2hpcChyZWwuaWQsIHtcblx0XHRcdFx0XHRyZWxhdGlvbnNoaXBfdHlwZTogcmVsYXRpb25zaGlwVHlwZVNlbGVjdC52YWx1ZSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb25JbnB1dC52YWx1ZSB8fCBcIlwiLFxuXHRcdFx0XHRcdGJpZGlyZWN0aW9uYWw6IGJpZGlyZWN0aW9uYWxDaGVja2JveC5jaGVja2VkLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkQ2hhcmFjdGVyRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlckNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIlJlbGF0aW9uc2hpcCB1cGRhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pO1xuXHRcdGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdC8vIE1ldGhvZCB0byB1cGRhdGUgY2hhcmFjdGVyIGFmdGVyIGVkaXRcblx0dXBkYXRlQ2hhcmFjdGVyKGNoYXJhY3RlcjogQ2hhcmFjdGVyKSB7XG5cdFx0dGhpcy5jaGFyYWN0ZXIgPSBjaGFyYWN0ZXI7XG5cdFx0dGhpcy5yZW5kZXJIZWFkZXIoKTtcblx0XHR0aGlzLnJlbmRlckNvbnRlbnQoKTtcblx0fVxufVxuXG4iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIE5vdGljZSwgV29ya3NwYWNlTGVhZiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IFN0b3J5RW5naW5lUGx1Z2luIGZyb20gXCIuLi9tYWluXCI7XG5pbXBvcnQge1xuXHRFeHRyYWN0RW50aXR5LFxuXHRFeHRyYWN0RW50aXR5TWF0Y2gsXG5cdEV4dHJhY3RFbnRpdHlSZXN1bHQsXG5cdEV4dHJhY3RSZWxhdGlvbixcblx0RXh0cmFjdFJlbGF0aW9uTm9kZSxcbn0gZnJvbSBcIi4uL3R5cGVzXCI7XG5cbmV4cG9ydCBjb25zdCBTVE9SWV9FTkdJTkVfRVhUUkFDVF9WSUVXX1RZUEUgPSBcInN0b3J5LWVuZ2luZS1leHRyYWN0LXZpZXdcIjtcblxuZXhwb3J0IGNsYXNzIFN0b3J5RW5naW5lRXh0cmFjdFZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG5cdHBsdWdpbjogU3RvcnlFbmdpbmVQbHVnaW47XG5cdHByaXZhdGUgcmVzdWx0OiBFeHRyYWN0RW50aXR5UmVzdWx0IHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgY29udGVudFJvb3QhOiBIVE1MRWxlbWVudDtcblx0cHJpdmF0ZSBsb2dzID0gW10gYXMgU3RvcnlFbmdpbmVQbHVnaW5bXCJleHRyYWN0TG9nc1wiXTtcblx0cHJpdmF0ZSBzdGF0dXM6IFN0b3J5RW5naW5lUGx1Z2luW1wiZXh0cmFjdFN0YXR1c1wiXSA9IFwiaWRsZVwiO1xuXHRwcml2YXRlIGFjdGl2ZVRhYjogXCJlbnRpdGllc1wiIHwgXCJyZWxhdGlvbnNcIiB8IFwicHJvZ3Jlc3NcIiA9IFwicHJvZ3Jlc3NcIjtcblx0cHJpdmF0ZSBleHBhbmRlZExvZ3MgPSBuZXcgU2V0PHN0cmluZz4oKTtcblx0cHJpdmF0ZSBleHBhbmRlZFJlbGF0aW9uSW5kZXg6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIHBlbmRpbmdSZWxhdGlvblNjcm9sbEluZGV4OiBudW1iZXIgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBwZW5kaW5nVGFiU2Nyb2xsID0gZmFsc2U7XG5cdHByaXZhdGUgZW50aXR5U2VhcmNoID0gXCJcIjtcblx0cHJpdmF0ZSBlbnRpdHlGaWx0ZXJUeXBlID0gXCJhbGxcIjtcblx0cHJpdmF0ZSBlbnRpdHlTb3J0ID0gXCJuYW1lXCI7XG5cdHByaXZhdGUgcmVsYXRpb25TZWFyY2ggPSBcIlwiO1xuXHRwcml2YXRlIHJlbGF0aW9uRmlsdGVyVHlwZSA9IFwiYWxsXCI7XG5cdHByaXZhdGUgcmVsYXRpb25Tb3J0ID0gXCJ0eXBlXCI7XG5cblx0Y29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbikge1xuXHRcdHN1cGVyKGxlYWYpO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHRcdHRoaXMubG9ncyA9IHBsdWdpbi5leHRyYWN0TG9ncztcblx0XHR0aGlzLnN0YXR1cyA9IHBsdWdpbi5leHRyYWN0U3RhdHVzO1xuXHR9XG5cblx0Z2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gU1RPUllfRU5HSU5FX0VYVFJBQ1RfVklFV19UWVBFO1xuXHR9XG5cblx0Z2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gXCJFeHRyYWN0XCI7XG5cdH1cblxuXHRnZXRJY29uKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIFwic2VhcmNoXCI7XG5cdH1cblxuXHRhc3luYyBvbk9wZW4oKSB7XG5cdFx0Y29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudDtcblx0XHRjb250YWluZXIuZW1wdHkoKTtcblx0XHRjb250YWluZXIuYWRkQ2xhc3MoXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1jb250YWluZXJcIik7XG5cdFx0dGhpcy5jb250ZW50Um9vdCA9IGNvbnRhaW5lcjtcblx0XHR0aGlzLnNldFJlc3VsdCh0aGlzLnBsdWdpbi5leHRyYWN0UmVzdWx0KTtcblx0XHR0aGlzLnNldExvZ3ModGhpcy5wbHVnaW4uZXh0cmFjdExvZ3MsIHRoaXMucGx1Z2luLmV4dHJhY3RTdGF0dXMpO1xuXHR9XG5cblx0c2V0UmVzdWx0KHJlc3VsdDogRXh0cmFjdEVudGl0eVJlc3VsdCB8IG51bGwpIHtcblx0XHR0aGlzLnJlc3VsdCA9IHJlc3VsdDtcblx0XHR0aGlzLnJlbmRlcigpO1xuXHR9XG5cblx0c2V0TG9ncyhsb2dzOiB0eXBlb2YgdGhpcy5sb2dzLCBzdGF0dXM6IHR5cGVvZiB0aGlzLnN0YXR1cykge1xuXHRcdHRoaXMubG9ncyA9IGxvZ3M7XG5cdFx0dGhpcy5zdGF0dXMgPSBzdGF0dXM7XG5cdFx0dGhpcy5yZW5kZXIoKTtcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyKCkge1xuXHRcdGlmICghdGhpcy5jb250ZW50Um9vdCkgcmV0dXJuO1xuXHRcdHRoaXMuY29udGVudFJvb3QuZW1wdHkoKTtcblxuXHRcdGNvbnN0IGhlYWRlciA9IHRoaXMuY29udGVudFJvb3QuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1oZWFkZXJcIixcblx0XHR9KTtcblx0XHRoZWFkZXIuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiRXh0cmFjdFwiIH0pO1xuXG5cdFx0Y29uc3QgaGVhZGVyQWN0aW9ucyA9IGhlYWRlci5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWhlYWRlci1hY3Rpb25zXCIsXG5cdFx0fSk7XG5cdFx0Y29uc3QgYmFja0J1dHRvbiA9IGhlYWRlckFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJCYWNrIHRvIFN0b3JpZXNcIixcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1iYWNrXCIsXG5cdFx0fSk7XG5cdFx0YmFja0J1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5wbHVnaW4uYWN0aXZhdGVWaWV3KCk7XG5cdFx0fTtcblx0XHRpZiAodGhpcy5zdGF0dXMgPT09IFwicnVubmluZ1wiKSB7XG5cdFx0XHRjb25zdCBjYW5jZWxCdXR0b24gPSBoZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0dGV4dDogXCJDYW5jZWxcIixcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWNhbmNlbFwiLFxuXHRcdFx0fSk7XG5cdFx0XHRjYW5jZWxCdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uY2FuY2VsRXh0cmFjdFN0cmVhbSgpO1xuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRpZiAoIXRoaXMucmVzdWx0KSB7XG5cdFx0XHR0aGlzLnJlbmRlckxvZ3MoKTtcblx0XHRcdHRoaXMuY29udGVudFJvb3QuY3JlYXRlRWwoXCJwXCIsIHtcblx0XHRcdFx0dGV4dDogXCJObyBleHRyYWN0aW9uIHJlc3VsdHMgeWV0LlwiLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtZW1wdHlcIixcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IHF1ZXJ5QmxvY2sgPSB0aGlzLmNvbnRlbnRSb290LmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtcXVlcnlcIixcblx0XHR9KTtcblx0XHRxdWVyeUJsb2NrLmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdHRleHQ6IFwiVGV4dFwiLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWxhYmVsXCIsXG5cdFx0fSk7XG5cdFx0cXVlcnlCbG9jay5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHR0ZXh0OiB0aGlzLnJlc3VsdC50ZXh0LFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LXF1ZXJ5LXRleHRcIixcblx0XHR9KTtcblxuXHRcdGNvbnN0IGhlYWRlck1ldGEgPSB0aGlzLmNvbnRlbnRSb290LmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtbWV0YVwiLFxuXHRcdH0pO1xuXHRcdGhlYWRlck1ldGEuY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0dGV4dDogYFN0YXR1czogJHt0aGlzLnN0YXR1c31gLFxuXHRcdH0pO1xuXHRcdGlmICh0aGlzLnJlc3VsdCkge1xuXHRcdFx0Y29uc3QgZm91bmRDb3VudCA9IHRoaXMucmVzdWx0LmVudGl0aWVzLmZpbHRlcigoZW50aXR5KSA9PiBlbnRpdHkuZm91bmQpXG5cdFx0XHRcdC5sZW5ndGg7XG5cdFx0XHRoZWFkZXJNZXRhLmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdFx0dGV4dDogYEVudGl0aWVzIGZvdW5kOiAke2ZvdW5kQ291bnR9LyR7dGhpcy5yZXN1bHQuZW50aXRpZXMubGVuZ3RofWAsXG5cdFx0XHR9KTtcblx0XHRcdGhlYWRlck1ldGEuY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0XHR0ZXh0OiBgUmVsYXRpb25zIGZvdW5kOiAke3RoaXMucmVzdWx0LnJlbGF0aW9ucy5sZW5ndGh9YCxcblx0XHRcdH0pO1xuXHRcdFx0aGVhZGVyTWV0YS5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHRcdHRleHQ6IGBUZXh0IGxlbmd0aDogJHt0aGlzLnJlc3VsdC50ZXh0Lmxlbmd0aH1gLFxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgdGFicyA9IHRoaXMuY29udGVudFJvb3QuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC10YWJzXCIsXG5cdFx0fSk7XG5cblx0XHRjb25zdCBoYXNFbnRpdGllcyA9IHRoaXMucmVzdWx0LmVudGl0aWVzLmxlbmd0aCA+IDA7XG5cdFx0Y29uc3QgaGFzUmVsYXRpb25zID0gdGhpcy5yZXN1bHQucmVsYXRpb25zLmxlbmd0aCA+IDA7XG5cdFx0Y29uc3QgaW5jbHVkZVJlbGF0aW9ucyA9IHRoaXMucmVzdWx0LmluY2x1ZGVfcmVsYXRpb25zICE9PSBmYWxzZTtcblx0XHRjb25zdCBlbnRpdGllc0Rpc2FibGVkID0gIWhhc0VudGl0aWVzICYmIHRoaXMuc3RhdHVzID09PSBcImlkbGVcIjtcblx0XHRjb25zdCByZWxhdGlvbnNEaXNhYmxlZCA9ICghaGFzUmVsYXRpb25zICYmIHRoaXMuc3RhdHVzID09PSBcImlkbGVcIilcblx0XHRcdHx8ICFpbmNsdWRlUmVsYXRpb25zO1xuXG5cdFx0Y29uc3QgcHJvZ3Jlc3NUYWIgPSB0YWJzLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiUHJvZ3Jlc3NcIixcblx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS1leHRyYWN0LXRhYiAke1xuXHRcdFx0XHR0aGlzLmFjdGl2ZVRhYiA9PT0gXCJwcm9ncmVzc1wiID8gXCJpcy1hY3RpdmVcIiA6IFwiXCJcblx0XHRcdH1gLFxuXHRcdH0pO1xuXHRcdHByb2dyZXNzVGFiLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLnNldEFjdGl2ZVRhYihcInByb2dyZXNzXCIpO1xuXHRcdH07XG5cblx0XHRjb25zdCBlbnRpdGllc1RhYiA9IHRhYnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJFbnRpdGllc1wiLFxuXHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLWV4dHJhY3QtdGFiICR7XG5cdFx0XHRcdHRoaXMuYWN0aXZlVGFiID09PSBcImVudGl0aWVzXCIgPyBcImlzLWFjdGl2ZVwiIDogXCJcIlxuXHRcdFx0fWAsXG5cdFx0fSk7XG5cdFx0aWYgKGVudGl0aWVzRGlzYWJsZWQpIHtcblx0XHRcdGVudGl0aWVzVGFiLmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdGVudGl0aWVzVGFiLmFkZENsYXNzKFwiaXMtZGlzYWJsZWRcIik7XG5cdFx0fVxuXHRcdGVudGl0aWVzVGFiLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRpZiAoZW50aXRpZXNEaXNhYmxlZCkgcmV0dXJuO1xuXHRcdFx0dGhpcy5zZXRBY3RpdmVUYWIoXCJlbnRpdGllc1wiKTtcblx0XHR9O1xuXG5cdFx0Y29uc3QgcmVsYXRpb25zVGFiID0gdGFicy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIlJlbGF0aW9uc1wiLFxuXHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLWV4dHJhY3QtdGFiICR7XG5cdFx0XHRcdHRoaXMuYWN0aXZlVGFiID09PSBcInJlbGF0aW9uc1wiID8gXCJpcy1hY3RpdmVcIiA6IFwiXCJcblx0XHRcdH1gLFxuXHRcdH0pO1xuXHRcdGlmIChyZWxhdGlvbnNEaXNhYmxlZCkge1xuXHRcdFx0cmVsYXRpb25zVGFiLmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdHJlbGF0aW9uc1RhYi5hZGRDbGFzcyhcImlzLWRpc2FibGVkXCIpO1xuXHRcdH1cblx0XHRyZWxhdGlvbnNUYWIub25jbGljayA9ICgpID0+IHtcblx0XHRcdGlmIChyZWxhdGlvbnNEaXNhYmxlZCkgcmV0dXJuO1xuXHRcdFx0dGhpcy5zZXRBY3RpdmVUYWIoXCJyZWxhdGlvbnNcIik7XG5cdFx0fTtcblxuXHRcdGNvbnN0IHBhbmVscyA9IHRoaXMuY29udGVudFJvb3QuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1wYW5lbHNcIixcblx0XHR9KTtcblxuXHRcdGNvbnN0IGVudGl0aWVzUGFuZWwgPSBwYW5lbHMuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS1leHRyYWN0LXBhbmVsICR7XG5cdFx0XHRcdHRoaXMuYWN0aXZlVGFiID09PSBcImVudGl0aWVzXCIgPyBcImlzLWFjdGl2ZVwiIDogXCJcIlxuXHRcdFx0fWAsXG5cdFx0fSk7XG5cblx0XHRjb25zdCByZWxhdGlvbnNQYW5lbCA9IHBhbmVscy5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLWV4dHJhY3QtcGFuZWwgJHtcblx0XHRcdFx0dGhpcy5hY3RpdmVUYWIgPT09IFwicmVsYXRpb25zXCIgPyBcImlzLWFjdGl2ZVwiIDogXCJcIlxuXHRcdFx0fWAsXG5cdFx0fSk7XG5cblx0XHRjb25zdCBwcm9ncmVzc1BhbmVsID0gcGFuZWxzLmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IGBzdG9yeS1lbmdpbmUtZXh0cmFjdC1wYW5lbCAke1xuXHRcdFx0XHR0aGlzLmFjdGl2ZVRhYiA9PT0gXCJwcm9ncmVzc1wiID8gXCJpcy1hY3RpdmVcIiA6IFwiXCJcblx0XHRcdH1gLFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgYWN0aW9ucyA9IHRoaXMuY29udGVudFJvb3QuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1hY3Rpb25zXCIsXG5cdFx0fSk7XG5cdFx0Y29uc3QgY2xlYXJCdXR0b24gPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiQ2xlYXIgUmVzdWx0c1wiLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWNsZWFyXCIsXG5cdFx0fSk7XG5cdFx0Y2xlYXJCdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdHRoaXMucGx1Z2luLmV4dHJhY3RSZXN1bHQgPSBudWxsO1xuXHRcdFx0dGhpcy5zZXRSZXN1bHQobnVsbCk7XG5cdFx0XHR0aGlzLnBsdWdpbi51cGRhdGVFeHRyYWN0Vmlld3MoKTtcblx0XHR9O1xuXG5cdFx0dGhpcy5yZW5kZXJMb2dzKHByb2dyZXNzUGFuZWwpO1xuXG5cdFx0aWYgKGhhc0VudGl0aWVzKSB7XG5cdFx0XHR0aGlzLnJlbmRlckVudGl0eUNvbnRyb2xzKGVudGl0aWVzUGFuZWwpO1xuXHRcdFx0Y29uc3QgbGlzdCA9IGVudGl0aWVzUGFuZWwuY3JlYXRlRGl2KHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWxpc3RcIixcblx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgZmlsdGVyZWRFbnRpdGllcyA9IHRoaXMuZmlsdGVyQW5kU29ydEVudGl0aWVzKHRoaXMucmVzdWx0LmVudGl0aWVzKTtcblx0XHRcdGZpbHRlcmVkRW50aXRpZXMuZm9yRWFjaCgoZW50aXR5LCBpbmRleCkgPT4ge1xuXHRcdFx0XHR0aGlzLnJlbmRlckVudGl0eShsaXN0LCBlbnRpdHksIGluZGV4KTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBlbXB0eVRleHQgPSB0aGlzLnN0YXR1cyA9PT0gXCJydW5uaW5nXCJcblx0XHRcdFx0PyBcIkV4dHJhY3RpbmcgZW50aXRpZXMuLi5cIlxuXHRcdFx0XHQ6IFwiTm8gZW50aXRpZXMgcmV0dXJuZWQgZnJvbSBleHRyYWN0aW9uLlwiO1xuXHRcdFx0ZW50aXRpZXNQYW5lbC5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0XHR0ZXh0OiBlbXB0eVRleHQsXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1lbXB0eVwiLFxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKGhhc1JlbGF0aW9ucykge1xuXHRcdFx0dGhpcy5yZW5kZXJSZWxhdGlvbkNvbnRyb2xzKHJlbGF0aW9uc1BhbmVsKTtcblx0XHRcdGNvbnN0IGxpc3QgPSByZWxhdGlvbnNQYW5lbC5jcmVhdGVEaXYoe1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtbGlzdFwiLFxuXHRcdFx0fSk7XG5cdFx0XHRjb25zdCBmaWx0ZXJlZFJlbGF0aW9ucyA9IHRoaXMuZmlsdGVyQW5kU29ydFJlbGF0aW9ucyh0aGlzLnJlc3VsdC5yZWxhdGlvbnMpO1xuXHRcdFx0ZmlsdGVyZWRSZWxhdGlvbnMuZm9yRWFjaCgocmVsYXRpb24sIGluZGV4KSA9PiB7XG5cdFx0XHRcdHRoaXMucmVuZGVyUmVsYXRpb24obGlzdCwgcmVsYXRpb24sIGluZGV4KTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRsZXQgZW1wdHlUZXh0ID0gXCJObyByZWxhdGlvbnMgcmV0dXJuZWQgZnJvbSBleHRyYWN0aW9uLlwiO1xuXHRcdFx0aWYgKCFpbmNsdWRlUmVsYXRpb25zKSB7XG5cdFx0XHRcdGVtcHR5VGV4dCA9IFwiUmVsYXRpb25zIG5vdCByZXF1ZXN0ZWQuXCI7XG5cdFx0XHR9IGVsc2UgaWYgKCFoYXNFbnRpdGllcykge1xuXHRcdFx0XHRlbXB0eVRleHQgPSBcIldhaXRpbmcgZm9yIGVudGl0eSBleHRyYWN0aW9uLlwiO1xuXHRcdFx0fSBlbHNlIGlmICh0aGlzLnN0YXR1cyA9PT0gXCJydW5uaW5nXCIpIHtcblx0XHRcdFx0ZW1wdHlUZXh0ID0gXCJFeHRyYWN0aW5nIHJlbGF0aW9ucy4uLlwiO1xuXHRcdFx0fVxuXHRcdFx0cmVsYXRpb25zUGFuZWwuY3JlYXRlRWwoXCJwXCIsIHtcblx0XHRcdFx0dGV4dDogZW1wdHlUZXh0LFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtZW1wdHlcIixcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHRoaXMuYXBwbHlQZW5kaW5nU2Nyb2xsKCk7XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckxvZ3MoY29udGFpbmVyPzogSFRNTEVsZW1lbnQpIHtcblx0XHRjb25zdCByb290ID0gY29udGFpbmVyID8/IHRoaXMuY29udGVudFJvb3Q7XG5cdFx0Y29uc3QgbG9nQmxvY2sgPSByb290LmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtbG9nc1wiLFxuXHRcdH0pO1xuXHRcdGxvZ0Jsb2NrLmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdHRleHQ6IFwiUHJvZ3Jlc3NcIixcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1sYWJlbFwiLFxuXHRcdH0pO1xuXG5cdFx0aWYgKCF0aGlzLmxvZ3MubGVuZ3RoKSB7XG5cdFx0XHRsb2dCbG9jay5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0XHR0ZXh0OiBcIk5vIGV2ZW50cyB5ZXQuXCIsXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1lbXB0eVwiLFxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGxvZ0Jsb2NrLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1sb2ctbGlzdFwiIH0pO1xuXHRcdGNvbnN0IGxhc3RJbmRleCA9IHRoaXMubG9ncy5sZW5ndGggLSAxO1xuXHRcdHRoaXMubG9ncy5mb3JFYWNoKChlbnRyeSwgaW5kZXgpID0+IHtcblx0XHRcdGNvbnN0IGV2ZW50TGFiZWwgPSBlbnRyeS5waGFzZVxuXHRcdFx0XHQ/IGAke2VudHJ5LnBoYXNlfSBcdTAwQjcgJHtlbnRyeS5ldmVudFR5cGV9YFxuXHRcdFx0XHQ6IGVudHJ5LmV2ZW50VHlwZTtcblx0XHRcdGNvbnN0IGl0ZW0gPSBsaXN0LmNyZWF0ZURpdih7XG5cdFx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS1leHRyYWN0LWxvZy1pdGVtICR7XG5cdFx0XHRcdFx0aW5kZXggPT09IGxhc3RJbmRleCA/IFwiaXMtbGF0ZXN0XCIgOiBcIlwiXG5cdFx0XHRcdH1gLFxuXHRcdFx0fSk7XG5cdFx0XHRjb25zdCBoZWFkZXIgPSBpdGVtLmNyZWF0ZURpdih7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1sb2ctaGVhZGVyXCIsXG5cdFx0XHR9KTtcblx0XHRcdGhlYWRlci5jcmVhdGVTcGFuKHtcblx0XHRcdFx0dGV4dDogYCR7ZW50cnkudGltZXN0YW1wfSB8ICR7ZXZlbnRMYWJlbH1gLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtbG9nLXRpdGxlXCIsXG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgbGFiZWwgPSBpdGVtLmNyZWF0ZURpdih7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1sb2ctbGFiZWxcIixcblx0XHRcdH0pO1xuXHRcdFx0bGFiZWwuY3JlYXRlU3Bhbih7IHRleHQ6IGVudHJ5Lm1lc3NhZ2UgfSk7XG5cdFx0XHRjb25zdCB0b2dnbGUgPSBsYWJlbC5jcmVhdGVTcGFuKHtcblx0XHRcdFx0dGV4dDogaW5kZXggPT09IGxhc3RJbmRleFxuXHRcdFx0XHRcdD8gXCIuLi5cIlxuXHRcdFx0XHRcdDogdGhpcy5leHBhbmRlZExvZ3MuaGFzKGVudHJ5LmlkKVxuXHRcdFx0XHRcdFx0PyBcIlx1MjIxMlwiXG5cdFx0XHRcdFx0XHQ6IFwiK1wiLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtbG9nLXRvZ2dsZVwiLFxuXHRcdFx0fSk7XG5cdFx0XHRsYWJlbC5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRpZiAodGhpcy5leHBhbmRlZExvZ3MuaGFzKGVudHJ5LmlkKSkge1xuXHRcdFx0XHRcdHRoaXMuZXhwYW5kZWRMb2dzLmRlbGV0ZShlbnRyeS5pZCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5leHBhbmRlZExvZ3MuYWRkKGVudHJ5LmlkKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLnJlbmRlcigpO1xuXHRcdFx0fTtcblx0XHRcdGlmIChpbmRleCA9PT0gbGFzdEluZGV4KSB7XG5cdFx0XHRcdHRvZ2dsZS5hZGRDbGFzcyhcImlzLXR5cGluZ1wiKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHRoaXMuZXhwYW5kZWRMb2dzLmhhcyhlbnRyeS5pZCkgJiYgZW50cnkuZGF0YSkge1xuXHRcdFx0XHRpdGVtLmNyZWF0ZUVsKFwicHJlXCIsIHtcblx0XHRcdFx0XHR0ZXh0OiBKU09OLnN0cmluZ2lmeShlbnRyeS5kYXRhLCBudWxsLCAyKSxcblx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtbG9nLWRhdGFcIixcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0bGlzdC5zY3JvbGxUb3AgPSBsaXN0LnNjcm9sbEhlaWdodDtcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyRW50aXR5KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGVudGl0eTogRXh0cmFjdEVudGl0eSwgaW5kZXg6IG51bWJlcikge1xuXHRcdHRoaXMucmVuZGVyRW50aXR5Q2FyZChjb250YWluZXIsIGVudGl0eSwgaW5kZXgpO1xuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJFbnRpdHlDYXJkKFxuXHRcdGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG5cdFx0ZW50aXR5OiBFeHRyYWN0RW50aXR5LFxuXHRcdGluZGV4OiBudW1iZXIsXG5cdFx0b25DcmVhdGVkPzogKGNyZWF0ZWRJZDogc3RyaW5nKSA9PiB2b2lkXG5cdCkge1xuXHRcdGNvbnN0IGl0ZW0gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWl0ZW1cIiB9KTtcblx0XHRpdGVtLmRhdGFzZXQucmVsYXRpb25JbmRleCA9IFN0cmluZyhpbmRleCk7XG5cdFx0Y29uc3QgaGVhZGVyID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtaXRlbS1oZWFkZXJcIiB9KTtcblx0XHRoZWFkZXIuY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0dGV4dDogYCMke2luZGV4ICsgMX1gLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LXJhbmtcIixcblx0XHR9KTtcblx0XHRjb25zdCBzdGF0dXNUZXh0ID0gZW50aXR5LmNyZWF0ZWRcblx0XHRcdD8gXCJDcmVhdGVkXCJcblx0XHRcdDogZW50aXR5LmZvdW5kXG5cdFx0XHRcdD8gXCJGb3VuZFwiXG5cdFx0XHRcdDogXCJOZXdcIjtcblx0XHRjb25zdCBzdGF0dXNDbGFzcyA9IGVudGl0eS5jcmVhdGVkXG5cdFx0XHQ/IFwiaXMtY3JlYXRlZFwiXG5cdFx0XHQ6IGVudGl0eS5mb3VuZFxuXHRcdFx0XHQ/IFwiaXMtZm91bmRcIlxuXHRcdFx0XHQ6IFwiaXMtbmV3XCI7XG5cdFx0aGVhZGVyLmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdHRleHQ6IHN0YXR1c1RleHQsXG5cdFx0XHRjbHM6IGBzdG9yeS1lbmdpbmUtZXh0cmFjdC1zdGF0dXMgJHtzdGF0dXNDbGFzc31gLFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgdGl0bGUgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1pdGVtLXRpdGxlXCIgfSk7XG5cdFx0dGl0bGUuY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0dGV4dDogZW50aXR5Lm5hbWUsXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtZW50aXR5LW5hbWVcIixcblx0XHR9KTtcblx0XHR0aXRsZS5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHR0ZXh0OiBlbnRpdHkudHlwZSxcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1lbnRpdHktdHlwZVwiLFxuXHRcdH0pO1xuXG5cdFx0aWYgKGVudGl0eS5zdW1tYXJ5KSB7XG5cdFx0XHRpdGVtLmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdFx0dGV4dDogZW50aXR5LnN1bW1hcnksXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1jb250ZW50XCIsXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoZW50aXR5Lm1hdGNoKSB7XG5cdFx0XHRpdGVtLmFwcGVuZENoaWxkKHRoaXMucmVuZGVyTWF0Y2goXCJNYXRjaFwiLCBlbnRpdHkubWF0Y2gpKTtcblx0XHR9XG5cblx0XHRpZiAoZW50aXR5LmNhbmRpZGF0ZXMgJiYgZW50aXR5LmNhbmRpZGF0ZXMubGVuZ3RoKSB7XG5cdFx0XHRjb25zdCBsaXN0ID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtY2FuZGlkYXRlc1wiIH0pO1xuXHRcdFx0bGlzdC5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHRcdHRleHQ6IFwiQ2FuZGlkYXRlc1wiLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtbGFiZWxcIixcblx0XHRcdH0pO1xuXHRcdFx0ZW50aXR5LmNhbmRpZGF0ZXMuZm9yRWFjaCgoY2FuZGlkYXRlKSA9PiB7XG5cdFx0XHRcdGxpc3QuYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJNYXRjaChcIlwiLCBjYW5kaWRhdGUpKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmICghZW50aXR5LmNyZWF0ZWQpIHtcblx0XHRcdGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1hY3Rpb25zXCIgfSk7XG5cdFx0XHRjb25zdCBhY3Rpb25CdXR0b24gPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0dGV4dDogZW50aXR5LmZvdW5kID8gXCJVcGRhdGUgRW50aXR5XCIgOiBcIkNyZWF0ZSBFbnRpdHlcIixcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWFjdGlvblwiLFxuXHRcdFx0fSk7XG5cdFx0XHRhY3Rpb25CdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0YWN0aW9uQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRpZiAoZW50aXR5LmZvdW5kKSB7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnVwZGF0ZUVudGl0eShlbnRpdHkpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb25zdCBjcmVhdGVkSWQgPSBhd2FpdCB0aGlzLmNyZWF0ZUVudGl0eShlbnRpdHkpO1xuXHRcdFx0XHRcdFx0aWYgKGNyZWF0ZWRJZCAmJiBvbkNyZWF0ZWQpIHtcblx0XHRcdFx0XHRcdFx0b25DcmVhdGVkKGNyZWF0ZWRJZCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRcdGFjdGlvbkJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyTWF0Y2gobGFiZWw6IHN0cmluZywgbWF0Y2g6IEV4dHJhY3RFbnRpdHlNYXRjaCk6IEhUTUxFbGVtZW50IHtcblx0XHRjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHR3cmFwcGVyLmNsYXNzTmFtZSA9IFwic3RvcnktZW5naW5lLWV4dHJhY3QtbWF0Y2hcIjtcblx0XHRjb25zdCBwYXJ0cyA9IFtdO1xuXHRcdGlmIChsYWJlbCkge1xuXHRcdFx0cGFydHMucHVzaChsYWJlbCk7XG5cdFx0fVxuXHRcdHBhcnRzLnB1c2goYCR7bWF0Y2guc291cmNlX3R5cGV9OiR7bWF0Y2guc291cmNlX2lkfWApO1xuXHRcdGlmIChtYXRjaC5lbnRpdHlfbmFtZSkge1xuXHRcdFx0cGFydHMucHVzaChtYXRjaC5lbnRpdHlfbmFtZSk7XG5cdFx0fVxuXHRcdHBhcnRzLnB1c2goYHNpbSAke21hdGNoLnNpbWlsYXJpdHkudG9GaXhlZCgzKX1gKTtcblx0XHRpZiAobWF0Y2gucmVhc29uKSB7XG5cdFx0XHRwYXJ0cy5wdXNoKG1hdGNoLnJlYXNvbik7XG5cdFx0fVxuXHRcdHdyYXBwZXIudGV4dENvbnRlbnQgPSBwYXJ0cy5qb2luKFwiIFx1MDBCNyBcIik7XG5cdFx0cmV0dXJuIHdyYXBwZXI7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGNyZWF0ZUVudGl0eShlbnRpdHk6IEV4dHJhY3RFbnRpdHkpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdGlmICghdGhpcy5yZXN1bHQ/LndvcmxkX2lkKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiV29ybGQgSUQgbWlzc2luZy4gU2VsZWN0IGEgc3Rvcnkgb3Igd29ybGQgZmlyc3QuXCIsIDQwMDApO1xuXHRcdFx0cmV0dXJuIFwiXCI7XG5cdFx0fVxuXG5cdFx0Y29uc3QgZGVzY3JpcHRpb24gPSBlbnRpdHkuc3VtbWFyeT8udHJpbSgpIHx8IGVudGl0eS5uYW1lO1xuXHRcdGxldCBjcmVhdGVkSWQgPSBcIlwiO1xuXG5cdFx0c3dpdGNoIChlbnRpdHkudHlwZSkge1xuXHRcdFx0Y2FzZSBcImNoYXJhY3RlclwiOiB7XG5cdFx0XHRcdGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlQ2hhcmFjdGVyKFxuXHRcdFx0XHRcdHRoaXMucmVzdWx0LndvcmxkX2lkLFxuXHRcdFx0XHRcdHsgbmFtZTogZW50aXR5Lm5hbWUsIGRlc2NyaXB0aW9uIH1cblx0XHRcdFx0KTtcblx0XHRcdFx0Y3JlYXRlZElkID0gY3JlYXRlZC5pZDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRjYXNlIFwibG9jYXRpb25cIjoge1xuXHRcdFx0XHRjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUxvY2F0aW9uKFxuXHRcdFx0XHRcdHRoaXMucmVzdWx0LndvcmxkX2lkLFxuXHRcdFx0XHRcdHsgbmFtZTogZW50aXR5Lm5hbWUsIGRlc2NyaXB0aW9uIH1cblx0XHRcdFx0KTtcblx0XHRcdFx0Y3JlYXRlZElkID0gY3JlYXRlZC5pZDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRjYXNlIFwiYXJ0ZWZhY3RcIjoge1xuXHRcdFx0XHRjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUFydGlmYWN0KFxuXHRcdFx0XHRcdHRoaXMucmVzdWx0LndvcmxkX2lkLFxuXHRcdFx0XHRcdHsgbmFtZTogZW50aXR5Lm5hbWUsIGRlc2NyaXB0aW9uIH1cblx0XHRcdFx0KTtcblx0XHRcdFx0Y3JlYXRlZElkID0gY3JlYXRlZC5pZDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRjYXNlIFwiZmFjdGlvblwiOiB7XG5cdFx0XHRcdGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlRmFjdGlvbihcblx0XHRcdFx0XHR0aGlzLnJlc3VsdC53b3JsZF9pZCxcblx0XHRcdFx0XHR7IG5hbWU6IGVudGl0eS5uYW1lLCBkZXNjcmlwdGlvbiB9XG5cdFx0XHRcdCk7XG5cdFx0XHRcdGNyZWF0ZWRJZCA9IGNyZWF0ZWQuaWQ7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0Y2FzZSBcImV2ZW50XCI6IHtcblx0XHRcdFx0Y29uc3QgY3JlYXRlZCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVFdmVudChcblx0XHRcdFx0XHR0aGlzLnJlc3VsdC53b3JsZF9pZCxcblx0XHRcdFx0XHR7IG5hbWU6IGVudGl0eS5uYW1lLCBkZXNjcmlwdGlvbiB9XG5cdFx0XHRcdCk7XG5cdFx0XHRcdGNyZWF0ZWRJZCA9IGNyZWF0ZWQuaWQ7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0bmV3IE5vdGljZShgVW5zdXBwb3J0ZWQgdHlwZTogJHtlbnRpdHkudHlwZX1gLCA0MDAwKTtcblx0XHRcdFx0cmV0dXJuIFwiXCI7XG5cdFx0fVxuXG5cdFx0ZW50aXR5LmZvdW5kID0gZmFsc2U7XG5cdFx0ZW50aXR5LmNyZWF0ZWQgPSB0cnVlO1xuXHRcdGVudGl0eS5tYXRjaCA9IHtcblx0XHRcdHNvdXJjZV90eXBlOiBlbnRpdHkudHlwZSxcblx0XHRcdHNvdXJjZV9pZDogY3JlYXRlZElkLFxuXHRcdFx0ZW50aXR5X25hbWU6IGVudGl0eS5uYW1lLFxuXHRcdFx0c2ltaWxhcml0eTogMSxcblx0XHRcdHJlYXNvbjogXCJDcmVhdGVkIGZyb20gZXh0cmFjdFwiLFxuXHRcdH07XG5cdFx0dGhpcy5yZW5kZXIoKTtcblx0XHRuZXcgTm90aWNlKGBDcmVhdGVkICR7ZW50aXR5LnR5cGV9OiAke2VudGl0eS5uYW1lfWAsIDMwMDApO1xuXHRcdHJldHVybiBjcmVhdGVkSWQ7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHVwZGF0ZUVudGl0eShlbnRpdHk6IEV4dHJhY3RFbnRpdHkpIHtcblx0XHRpZiAoIWVudGl0eS5tYXRjaD8uc291cmNlX2lkKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiTm8gbWF0Y2ggYXZhaWxhYmxlIHRvIHVwZGF0ZS5cIiwgNDAwMCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgZGVzY3JpcHRpb24gPSBlbnRpdHkuc3VtbWFyeSA/PyBcIlwiO1xuXHRcdHN3aXRjaCAoZW50aXR5LnR5cGUpIHtcblx0XHRcdGNhc2UgXCJjaGFyYWN0ZXJcIjpcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUNoYXJhY3RlcihlbnRpdHkubWF0Y2guc291cmNlX2lkLCB7XG5cdFx0XHRcdFx0bmFtZTogZW50aXR5Lm5hbWUsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb24sXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJsb2NhdGlvblwiOlxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlTG9jYXRpb24oZW50aXR5Lm1hdGNoLnNvdXJjZV9pZCwge1xuXHRcdFx0XHRcdG5hbWU6IGVudGl0eS5uYW1lLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiYXJ0ZWZhY3RcIjpcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUFydGlmYWN0KGVudGl0eS5tYXRjaC5zb3VyY2VfaWQsIHtcblx0XHRcdFx0XHRuYW1lOiBlbnRpdHkubmFtZSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbixcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImZhY3Rpb25cIjpcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUZhY3Rpb24oZW50aXR5Lm1hdGNoLnNvdXJjZV9pZCwge1xuXHRcdFx0XHRcdG5hbWU6IGVudGl0eS5uYW1lLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiZXZlbnRcIjpcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUV2ZW50KGVudGl0eS5tYXRjaC5zb3VyY2VfaWQsIHtcblx0XHRcdFx0XHRuYW1lOiBlbnRpdHkubmFtZSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbixcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0bmV3IE5vdGljZShgVW5zdXBwb3J0ZWQgdHlwZTogJHtlbnRpdHkudHlwZX1gLCA0MDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdG5ldyBOb3RpY2UoYFVwZGF0ZWQgJHtlbnRpdHkudHlwZX06ICR7ZW50aXR5Lm5hbWV9YCwgMzAwMCk7XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlclJlbGF0aW9uKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHJlbGF0aW9uOiBFeHRyYWN0UmVsYXRpb24sIGluZGV4OiBudW1iZXIpIHtcblx0XHRjb25zdCBpdGVtID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1pdGVtXCIgfSk7XG5cdFx0Y29uc3QgaGVhZGVyID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtaXRlbS1oZWFkZXJcIiB9KTtcblx0XHRoZWFkZXIuY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0dGV4dDogYCMke2luZGV4ICsgMX1gLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LXJhbmtcIixcblx0XHR9KTtcblx0XHRjb25zdCBzdGF0dXNUZXh0ID0gcmVsYXRpb24uc3RhdHVzID09PSBcInBlbmRpbmdfZW50aXRpZXNcIlxuXHRcdFx0PyBcIlBlbmRpbmdcIlxuXHRcdFx0OiByZWxhdGlvbi5zdGF0dXM7XG5cdFx0Y29uc3Qgc3RhdHVzQ2xhc3MgPSByZWxhdGlvbi5zdGF0dXMgPT09IFwicGVuZGluZ19lbnRpdGllc1wiXG5cdFx0XHQ/IFwiaXMtbmV3XCJcblx0XHRcdDogXCJpcy1mb3VuZFwiO1xuXHRcdGNvbnN0IHJlbGF0aW9uVHlwZSA9IHJlbGF0aW9uLnJlbGF0aW9uX3R5cGUgfHwgXCJyZWxhdGlvblwiO1xuXHRcdGNvbnN0IHR5cGVMYWJlbCA9IGAke3JlbGF0aW9uVHlwZX0gfCAke3JlbGF0aW9uLnNvdXJjZS50eXBlfSAtPiAke3JlbGF0aW9uLnRhcmdldC50eXBlfWA7XG5cdFx0Y29uc3QgdHlwZUxpbmUgPSBoZWFkZXIuY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0dGV4dDogdHlwZUxhYmVsLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWVudGl0eS10eXBlXCIsXG5cdFx0fSk7XG5cdFx0dHlwZUxpbmUuYWRkQ2xhc3MoXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1yZWxhdGlvbi10eXBlc1wiKTtcblx0XHRoZWFkZXIuY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0dGV4dDogc3RhdHVzVGV4dCxcblx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS1leHRyYWN0LXN0YXR1cyAke3N0YXR1c0NsYXNzfWAsXG5cdFx0fSk7XG5cblx0XHRjb25zdCB0aXRsZSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWl0ZW0tdGl0bGVcIiB9KTtcblx0XHRjb25zdCBzb3VyY2VMYWJlbCA9IHJlbGF0aW9uLnNvdXJjZS5uYW1lIHx8IHJlbGF0aW9uLnNvdXJjZS5yZWY7XG5cdFx0Y29uc3QgdGFyZ2V0TGFiZWwgPSByZWxhdGlvbi50YXJnZXQubmFtZSB8fCByZWxhdGlvbi50YXJnZXQucmVmO1xuXHRcdHRpdGxlLmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdHRleHQ6IGAke3NvdXJjZUxhYmVsfSBcdTIxOTIgJHt0YXJnZXRMYWJlbH1gLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWVudGl0eS10eXBlXCIsXG5cdFx0fSk7XG5cblx0XHRpZiAocmVsYXRpb24uc3VtbWFyeSkge1xuXHRcdFx0aXRlbS5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHRcdHRleHQ6IHJlbGF0aW9uLnN1bW1hcnksXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1jb250ZW50XCIsXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRjb25zdCBoYXNQZW5kaW5nID0gdGhpcy5oYXNUZW1wTm9kZShyZWxhdGlvbi5zb3VyY2UpXG5cdFx0XHR8fCB0aGlzLmhhc1RlbXBOb2RlKHJlbGF0aW9uLnRhcmdldCk7XG5cdFx0Y29uc3QgcmVsYXRpb25DcmVhdGVkID0gcmVsYXRpb24uc3RhdHVzID09PSBcImNyZWF0ZWRcIjtcblxuXHRcdGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1hY3Rpb25zXCIgfSk7XG5cdFx0Y29uc3QgY3JlYXRlUmVsYXRpb25CdXR0b24gPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IHJlbGF0aW9uQ3JlYXRlZCA/IFwiUmVsYXRpb24gQ3JlYXRlZFwiIDogXCJDcmVhdGUgUmVsYXRpb25cIixcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1hY3Rpb25cIixcblx0XHR9KTtcblx0XHRpZiAocmVsYXRpb25DcmVhdGVkKSB7XG5cdFx0XHRjcmVhdGVSZWxhdGlvbkJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG5cdFx0XHRjcmVhdGVSZWxhdGlvbkJ1dHRvbi5hZGRDbGFzcyhcImlzLWRpc2FibGVkXCIpO1xuXHRcdFx0Y3JlYXRlUmVsYXRpb25CdXR0b24udGl0bGUgPSBcIlJlbGF0aW9uIGFscmVhZHkgY3JlYXRlZC5cIjtcblx0XHR9IGVsc2UgaWYgKGhhc1BlbmRpbmcpIHtcblx0XHRcdGNyZWF0ZVJlbGF0aW9uQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdGNyZWF0ZVJlbGF0aW9uQnV0dG9uLmFkZENsYXNzKFwiaXMtZGlzYWJsZWRcIik7XG5cdFx0XHRjcmVhdGVSZWxhdGlvbkJ1dHRvbi50aXRsZSA9IFwiQ3JlYXRlIHBlbmRpbmcgZW50aXRpZXMgZmlyc3QuXCI7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNyZWF0ZVJlbGF0aW9uQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNyZWF0ZVJlbGF0aW9uQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZVJlbGF0aW9uKHJlbGF0aW9uKTtcblx0XHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0XHRjcmVhdGVSZWxhdGlvbkJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0XHRpZiAoaGFzUGVuZGluZykge1xuXHRcdFx0Y29uc3QgY3JlYXRlQnV0dG9uID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdHRleHQ6IFwiQ3JlYXRlIFBlbmRpbmdcIixcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWFjdGlvblwiLFxuXHRcdFx0fSk7XG5cdFx0XHRjcmVhdGVCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0Y3JlYXRlQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmNyZWF0ZVBlbmRpbmdFbnRpdGllcyhyZWxhdGlvbik7XG5cdFx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdFx0Y3JlYXRlQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Y29uc3QgYWNjb3JkaW9uQnV0dG9uID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIlNlZSBFbnRpdGllc1wiLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWFjdGlvblwiLFxuXHRcdH0pO1xuXHRcdGFjY29yZGlvbkJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0Y29uc3Qgc2hvdWxkRXhwYW5kID0gdGhpcy5leHBhbmRlZFJlbGF0aW9uSW5kZXggIT09IGluZGV4O1xuXHRcdFx0dGhpcy5leHBhbmRlZFJlbGF0aW9uSW5kZXggPSBzaG91bGRFeHBhbmQgPyBpbmRleCA6IG51bGw7XG5cdFx0XHR0aGlzLnBlbmRpbmdSZWxhdGlvblNjcm9sbEluZGV4ID0gc2hvdWxkRXhwYW5kID8gaW5kZXggOiBudWxsO1xuXHRcdFx0dGhpcy5yZW5kZXIoKTtcblx0XHR9O1xuXG5cdFx0aWYgKHRoaXMuZXhwYW5kZWRSZWxhdGlvbkluZGV4ID09PSBpbmRleCkge1xuXHRcdFx0Y29uc3QgZW50aXRpZXNXcmFwID0gaXRlbS5jcmVhdGVEaXYoe1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtcmVsYXRpb25zLWVudGl0aWVzXCIsXG5cdFx0XHR9KTtcblx0XHRcdGVudGl0aWVzV3JhcC5kYXRhc2V0LnJlbGF0aW9uSW5kZXggPSBTdHJpbmcoaW5kZXgpO1xuXHRcdFx0Y29uc3QgZW50aXRpZXMgPSBbXG5cdFx0XHRcdHRoaXMucmVzb2x2ZVJlbGF0aW9uRW50aXR5KHJlbGF0aW9uLnNvdXJjZSksXG5cdFx0XHRcdHRoaXMucmVzb2x2ZVJlbGF0aW9uRW50aXR5KHJlbGF0aW9uLnRhcmdldCksXG5cdFx0XHRdO1xuXHRcdFx0ZW50aXRpZXMuZm9yRWFjaCgoZW50aXR5LCBlbnRpdHlJbmRleCkgPT4ge1xuXHRcdFx0XHR0aGlzLnJlbmRlckVudGl0eUNhcmQoZW50aXRpZXNXcmFwLCBlbnRpdHksIGVudGl0eUluZGV4LCAoY3JlYXRlZElkKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5hcHBseUNyZWF0ZWRJZFRvUmVsYXRpb24ocmVsYXRpb24sIGVudGl0eSwgY3JlYXRlZElkKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckVudGl0eUNvbnRyb2xzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRpZiAoIXRoaXMucmVzdWx0KSByZXR1cm47XG5cdFx0Y29uc3QgY29udHJvbHMgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWNvbnRyb2xzXCIgfSk7XG5cblx0XHRjb25zdCBzZWFyY2ggPSBjb250cm9scy5jcmVhdGVFbChcImlucHV0XCIsIHtcblx0XHRcdHR5cGU6IFwic2VhcmNoXCIsXG5cdFx0XHRwbGFjZWhvbGRlcjogXCJTZWFyY2ggZW50aXRpZXNcIixcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1zZWFyY2hcIixcblx0XHR9KTtcblx0XHRzZWFyY2gudmFsdWUgPSB0aGlzLmVudGl0eVNlYXJjaDtcblx0XHRzZWFyY2gub25pbnB1dCA9ICgpID0+IHtcblx0XHRcdHRoaXMuZW50aXR5U2VhcmNoID0gc2VhcmNoLnZhbHVlLnRyaW0oKTtcblx0XHRcdHRoaXMucmVuZGVyKCk7XG5cdFx0fTtcblxuXHRcdGNvbnN0IHR5cGVTZWxlY3QgPSBjb250cm9scy5jcmVhdGVFbChcInNlbGVjdFwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3Qtc2VsZWN0XCIsXG5cdFx0fSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcImFsbFwiLCB0ZXh0OiBcIkFsbCB0eXBlc1wiIH0pO1xuXHRcdHRoaXMuZ2V0RW50aXR5VHlwZXModGhpcy5yZXN1bHQuZW50aXRpZXMpLmZvckVhY2goKHR5cGUpID0+IHtcblx0XHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogdHlwZSwgdGV4dDogdHlwZSB9KTtcblx0XHR9KTtcblx0XHR0eXBlU2VsZWN0LnZhbHVlID0gdGhpcy5lbnRpdHlGaWx0ZXJUeXBlO1xuXHRcdHR5cGVTZWxlY3Qub25jaGFuZ2UgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLmVudGl0eUZpbHRlclR5cGUgPSB0eXBlU2VsZWN0LnZhbHVlO1xuXHRcdFx0dGhpcy5yZW5kZXIoKTtcblx0XHR9O1xuXG5cdFx0Y29uc3Qgc29ydFNlbGVjdCA9IGNvbnRyb2xzLmNyZWF0ZUVsKFwic2VsZWN0XCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1zZWxlY3RcIixcblx0XHR9KTtcblx0XHRzb3J0U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwibmFtZVwiLCB0ZXh0OiBcIlNvcnQ6IE5hbWVcIiB9KTtcblx0XHRzb3J0U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwidHlwZVwiLCB0ZXh0OiBcIlNvcnQ6IFR5cGVcIiB9KTtcblx0XHRzb3J0U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwic3RhdHVzXCIsIHRleHQ6IFwiU29ydDogU3RhdHVzXCIgfSk7XG5cdFx0c29ydFNlbGVjdC52YWx1ZSA9IHRoaXMuZW50aXR5U29ydDtcblx0XHRzb3J0U2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5lbnRpdHlTb3J0ID0gc29ydFNlbGVjdC52YWx1ZTtcblx0XHRcdHRoaXMucmVuZGVyKCk7XG5cdFx0fTtcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyUmVsYXRpb25Db250cm9scyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0aWYgKCF0aGlzLnJlc3VsdCkgcmV0dXJuO1xuXHRcdGNvbnN0IGNvbnRyb2xzID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1jb250cm9sc1wiIH0pO1xuXG5cdFx0Y29uc3Qgc2VhcmNoID0gY29udHJvbHMuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG5cdFx0XHR0eXBlOiBcInNlYXJjaFwiLFxuXHRcdFx0cGxhY2Vob2xkZXI6IFwiU2VhcmNoIHJlbGF0aW9uc1wiLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LXNlYXJjaFwiLFxuXHRcdH0pO1xuXHRcdHNlYXJjaC52YWx1ZSA9IHRoaXMucmVsYXRpb25TZWFyY2g7XG5cdFx0c2VhcmNoLm9uaW5wdXQgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLnJlbGF0aW9uU2VhcmNoID0gc2VhcmNoLnZhbHVlLnRyaW0oKTtcblx0XHRcdHRoaXMucmVuZGVyKCk7XG5cdFx0fTtcblxuXHRcdGNvbnN0IHR5cGVTZWxlY3QgPSBjb250cm9scy5jcmVhdGVFbChcInNlbGVjdFwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3Qtc2VsZWN0XCIsXG5cdFx0fSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcImFsbFwiLCB0ZXh0OiBcIkFsbCB0eXBlc1wiIH0pO1xuXHRcdHRoaXMuZ2V0UmVsYXRpb25UeXBlcyh0aGlzLnJlc3VsdC5yZWxhdGlvbnMpLmZvckVhY2goKHR5cGUpID0+IHtcblx0XHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogdHlwZSwgdGV4dDogdHlwZSB9KTtcblx0XHR9KTtcblx0XHR0eXBlU2VsZWN0LnZhbHVlID0gdGhpcy5yZWxhdGlvbkZpbHRlclR5cGU7XG5cdFx0dHlwZVNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHtcblx0XHRcdHRoaXMucmVsYXRpb25GaWx0ZXJUeXBlID0gdHlwZVNlbGVjdC52YWx1ZTtcblx0XHRcdHRoaXMucmVuZGVyKCk7XG5cdFx0fTtcblxuXHRcdGNvbnN0IHNvcnRTZWxlY3QgPSBjb250cm9scy5jcmVhdGVFbChcInNlbGVjdFwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3Qtc2VsZWN0XCIsXG5cdFx0fSk7XG5cdFx0c29ydFNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcInR5cGVcIiwgdGV4dDogXCJTb3J0OiBUeXBlXCIgfSk7XG5cdFx0c29ydFNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcInN0YXR1c1wiLCB0ZXh0OiBcIlNvcnQ6IFN0YXR1c1wiIH0pO1xuXHRcdHNvcnRTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJzb3VyY2VcIiwgdGV4dDogXCJTb3J0OiBTb3VyY2VcIiB9KTtcblx0XHRzb3J0U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwidGFyZ2V0XCIsIHRleHQ6IFwiU29ydDogVGFyZ2V0XCIgfSk7XG5cdFx0c29ydFNlbGVjdC52YWx1ZSA9IHRoaXMucmVsYXRpb25Tb3J0O1xuXHRcdHNvcnRTZWxlY3Qub25jaGFuZ2UgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLnJlbGF0aW9uU29ydCA9IHNvcnRTZWxlY3QudmFsdWU7XG5cdFx0XHR0aGlzLnJlbmRlcigpO1xuXHRcdH07XG5cdH1cblxuXHRwcml2YXRlIGdldEVudGl0eVR5cGVzKGVudGl0aWVzOiBFeHRyYWN0RW50aXR5W10pOiBzdHJpbmdbXSB7XG5cdFx0Y29uc3Qgc2V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cdFx0ZW50aXRpZXMuZm9yRWFjaCgoZW50aXR5KSA9PiB7XG5cdFx0XHRpZiAoZW50aXR5LnR5cGUpIHtcblx0XHRcdFx0c2V0LmFkZChlbnRpdHkudHlwZSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIEFycmF5LmZyb20oc2V0KS5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpO1xuXHR9XG5cblx0cHJpdmF0ZSBnZXRSZWxhdGlvblR5cGVzKHJlbGF0aW9uczogRXh0cmFjdFJlbGF0aW9uW10pOiBzdHJpbmdbXSB7XG5cdFx0Y29uc3Qgc2V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cdFx0cmVsYXRpb25zLmZvckVhY2goKHJlbGF0aW9uKSA9PiB7XG5cdFx0XHRpZiAocmVsYXRpb24ucmVsYXRpb25fdHlwZSkge1xuXHRcdFx0XHRzZXQuYWRkKHJlbGF0aW9uLnJlbGF0aW9uX3R5cGUpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJldHVybiBBcnJheS5mcm9tKHNldCkuc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIpKTtcblx0fVxuXG5cdHByaXZhdGUgZmlsdGVyQW5kU29ydEVudGl0aWVzKGVudGl0aWVzOiBFeHRyYWN0RW50aXR5W10pOiBFeHRyYWN0RW50aXR5W10ge1xuXHRcdGNvbnN0IHNlYXJjaCA9IHRoaXMuZW50aXR5U2VhcmNoLnRvTG93ZXJDYXNlKCk7XG5cdFx0bGV0IGZpbHRlcmVkID0gZW50aXRpZXMuZmlsdGVyKChlbnRpdHkpID0+IHtcblx0XHRcdGlmICh0aGlzLmVudGl0eUZpbHRlclR5cGUgIT09IFwiYWxsXCIgJiYgZW50aXR5LnR5cGUgIT09IHRoaXMuZW50aXR5RmlsdGVyVHlwZSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXNlYXJjaCkgcmV0dXJuIHRydWU7XG5cdFx0XHRyZXR1cm4gKFxuXHRcdFx0XHRlbnRpdHkubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaClcblx0XHRcdFx0fHwgZW50aXR5LnR5cGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2gpXG5cdFx0XHRcdHx8IChlbnRpdHkuc3VtbWFyeSA/PyBcIlwiKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaClcblx0XHRcdCk7XG5cdFx0fSk7XG5cblx0XHRjb25zdCBzdGF0dXNSYW5rID0gKGVudGl0eTogRXh0cmFjdEVudGl0eSkgPT4ge1xuXHRcdFx0aWYgKGVudGl0eS5jcmVhdGVkKSByZXR1cm4gMDtcblx0XHRcdGlmIChlbnRpdHkuZm91bmQpIHJldHVybiAxO1xuXHRcdFx0cmV0dXJuIDI7XG5cdFx0fTtcblxuXHRcdGZpbHRlcmVkID0gWy4uLmZpbHRlcmVkXS5zb3J0KChhLCBiKSA9PiB7XG5cdFx0XHRzd2l0Y2ggKHRoaXMuZW50aXR5U29ydCkge1xuXHRcdFx0XHRjYXNlIFwidHlwZVwiOlxuXHRcdFx0XHRcdHJldHVybiBhLnR5cGUubG9jYWxlQ29tcGFyZShiLnR5cGUpIHx8IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSk7XG5cdFx0XHRcdGNhc2UgXCJzdGF0dXNcIjpcblx0XHRcdFx0XHRyZXR1cm4gc3RhdHVzUmFuayhhKSAtIHN0YXR1c1JhbmsoYikgfHwgYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKTtcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRyZXR1cm4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiBmaWx0ZXJlZDtcblx0fVxuXG5cdHByaXZhdGUgZmlsdGVyQW5kU29ydFJlbGF0aW9ucyhyZWxhdGlvbnM6IEV4dHJhY3RSZWxhdGlvbltdKTogRXh0cmFjdFJlbGF0aW9uW10ge1xuXHRcdGNvbnN0IHNlYXJjaCA9IHRoaXMucmVsYXRpb25TZWFyY2gudG9Mb3dlckNhc2UoKTtcblx0XHRsZXQgZmlsdGVyZWQgPSByZWxhdGlvbnMuZmlsdGVyKChyZWxhdGlvbikgPT4ge1xuXHRcdFx0aWYgKHRoaXMucmVsYXRpb25GaWx0ZXJUeXBlICE9PSBcImFsbFwiICYmIHJlbGF0aW9uLnJlbGF0aW9uX3R5cGUgIT09IHRoaXMucmVsYXRpb25GaWx0ZXJUeXBlKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdGlmICghc2VhcmNoKSByZXR1cm4gdHJ1ZTtcblx0XHRcdGNvbnN0IHNvdXJjZUxhYmVsID0gKHJlbGF0aW9uLnNvdXJjZS5uYW1lID8/IHJlbGF0aW9uLnNvdXJjZS5yZWYgPz8gXCJcIikudG9Mb3dlckNhc2UoKTtcblx0XHRcdGNvbnN0IHRhcmdldExhYmVsID0gKHJlbGF0aW9uLnRhcmdldC5uYW1lID8/IHJlbGF0aW9uLnRhcmdldC5yZWYgPz8gXCJcIikudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiAoXG5cdFx0XHRcdHJlbGF0aW9uLnJlbGF0aW9uX3R5cGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2gpXG5cdFx0XHRcdHx8IHNvdXJjZUxhYmVsLmluY2x1ZGVzKHNlYXJjaClcblx0XHRcdFx0fHwgdGFyZ2V0TGFiZWwuaW5jbHVkZXMoc2VhcmNoKVxuXHRcdFx0XHR8fCByZWxhdGlvbi5zb3VyY2UudHlwZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaClcblx0XHRcdFx0fHwgcmVsYXRpb24udGFyZ2V0LnR5cGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2gpXG5cdFx0XHRcdHx8IChyZWxhdGlvbi5zdW1tYXJ5ID8/IFwiXCIpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoKVxuXHRcdFx0KTtcblx0XHR9KTtcblxuXHRcdGNvbnN0IHN0YXR1c1JhbmsgPSAocmVsYXRpb246IEV4dHJhY3RSZWxhdGlvbikgPT4ge1xuXHRcdFx0aWYgKHJlbGF0aW9uLnN0YXR1cyA9PT0gXCJjcmVhdGVkXCIpIHJldHVybiAwO1xuXHRcdFx0aWYgKHJlbGF0aW9uLnN0YXR1cyA9PT0gXCJyZWFkeVwiKSByZXR1cm4gMTtcblx0XHRcdGlmIChyZWxhdGlvbi5zdGF0dXMgPT09IFwicGVuZGluZ19lbnRpdGllc1wiKSByZXR1cm4gMjtcblx0XHRcdHJldHVybiAzO1xuXHRcdH07XG5cblx0XHRmaWx0ZXJlZCA9IFsuLi5maWx0ZXJlZF0uc29ydCgoYSwgYikgPT4ge1xuXHRcdFx0c3dpdGNoICh0aGlzLnJlbGF0aW9uU29ydCkge1xuXHRcdFx0XHRjYXNlIFwic3RhdHVzXCI6XG5cdFx0XHRcdFx0cmV0dXJuIHN0YXR1c1JhbmsoYSkgLSBzdGF0dXNSYW5rKGIpIHx8IGEucmVsYXRpb25fdHlwZS5sb2NhbGVDb21wYXJlKGIucmVsYXRpb25fdHlwZSk7XG5cdFx0XHRcdGNhc2UgXCJzb3VyY2VcIjoge1xuXHRcdFx0XHRcdGNvbnN0IGFTb3VyY2UgPSBhLnNvdXJjZS5uYW1lIHx8IGEuc291cmNlLnJlZjtcblx0XHRcdFx0XHRjb25zdCBiU291cmNlID0gYi5zb3VyY2UubmFtZSB8fCBiLnNvdXJjZS5yZWY7XG5cdFx0XHRcdFx0cmV0dXJuIGFTb3VyY2UubG9jYWxlQ29tcGFyZShiU291cmNlKSB8fCBhLnJlbGF0aW9uX3R5cGUubG9jYWxlQ29tcGFyZShiLnJlbGF0aW9uX3R5cGUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNhc2UgXCJ0YXJnZXRcIjoge1xuXHRcdFx0XHRcdGNvbnN0IGFUYXJnZXQgPSBhLnRhcmdldC5uYW1lIHx8IGEudGFyZ2V0LnJlZjtcblx0XHRcdFx0XHRjb25zdCBiVGFyZ2V0ID0gYi50YXJnZXQubmFtZSB8fCBiLnRhcmdldC5yZWY7XG5cdFx0XHRcdFx0cmV0dXJuIGFUYXJnZXQubG9jYWxlQ29tcGFyZShiVGFyZ2V0KSB8fCBhLnJlbGF0aW9uX3R5cGUubG9jYWxlQ29tcGFyZShiLnJlbGF0aW9uX3R5cGUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0cmV0dXJuIGEucmVsYXRpb25fdHlwZS5sb2NhbGVDb21wYXJlKGIucmVsYXRpb25fdHlwZSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gZmlsdGVyZWQ7XG5cdH1cblxuXHRwcml2YXRlIHJlc29sdmVSZWxhdGlvbkVudGl0eShub2RlOiBFeHRyYWN0UmVsYXRpb25Ob2RlKTogRXh0cmFjdEVudGl0eSB7XG5cdFx0aWYgKCF0aGlzLnJlc3VsdCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuYnVpbGRSZWxhdGlvbkVudGl0eShub2RlKTtcblx0XHR9XG5cblx0XHRjb25zdCBleGlzdGluZyA9IHRoaXMucmVzdWx0LmVudGl0aWVzLmZpbmQoKGVudGl0eSkgPT4ge1xuXHRcdFx0aWYgKG5vZGUuaWQgJiYgZW50aXR5Lm1hdGNoPy5zb3VyY2VfaWQgPT09IG5vZGUuaWQpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZW50aXR5LnR5cGUgPT09IG5vZGUudHlwZSAmJiBlbnRpdHkubmFtZSA9PT0gbm9kZS5uYW1lO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGV4aXN0aW5nID8/IHRoaXMuYnVpbGRSZWxhdGlvbkVudGl0eShub2RlKTtcblx0fVxuXG5cdHByaXZhdGUgYnVpbGRSZWxhdGlvbkVudGl0eShub2RlOiBFeHRyYWN0UmVsYXRpb25Ob2RlKTogRXh0cmFjdEVudGl0eSB7XG5cdFx0Y29uc3QgaGFzSWQgPSAhIShub2RlLmlkICYmIG5vZGUuaWQudHJpbSgpKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0dHlwZTogbm9kZS50eXBlLFxuXHRcdFx0bmFtZTogbm9kZS5uYW1lIHx8IG5vZGUucmVmLFxuXHRcdFx0Zm91bmQ6IGhhc0lkLFxuXHRcdFx0bWF0Y2g6IGhhc0lkXG5cdFx0XHRcdD8ge1xuXHRcdFx0XHRcdHNvdXJjZV90eXBlOiBub2RlLnR5cGUsXG5cdFx0XHRcdFx0c291cmNlX2lkOiBub2RlLmlkIGFzIHN0cmluZyxcblx0XHRcdFx0XHRlbnRpdHlfbmFtZTogbm9kZS5uYW1lLFxuXHRcdFx0XHRcdHNpbWlsYXJpdHk6IDEsXG5cdFx0XHRcdFx0cmVhc29uOiBcIlJlbGF0aW9uIG1hdGNoXCIsXG5cdFx0XHRcdH1cblx0XHRcdFx0OiB1bmRlZmluZWQsXG5cdFx0fTtcblx0fVxuXG5cdHByaXZhdGUgaGFzVGVtcE5vZGUobm9kZTogRXh0cmFjdFJlbGF0aW9uTm9kZSk6IGJvb2xlYW4ge1xuXHRcdGlmICghbm9kZS5pZCB8fCAhbm9kZS5pZC50cmltKCkpIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRpZiAobm9kZS5pZC5zdGFydHNXaXRoKFwidGVtcFwiKSkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBub2RlLnJlZi5zdGFydHNXaXRoKFwiZmluZGluZzpcIik7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGNyZWF0ZVBlbmRpbmdFbnRpdGllcyhyZWxhdGlvbjogRXh0cmFjdFJlbGF0aW9uKSB7XG5cdFx0Y29uc3Qgbm9kZXMgPSBbcmVsYXRpb24uc291cmNlLCByZWxhdGlvbi50YXJnZXRdO1xuXHRcdGZvciAoY29uc3Qgbm9kZSBvZiBub2Rlcykge1xuXHRcdFx0aWYgKCF0aGlzLmhhc1RlbXBOb2RlKG5vZGUpKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgZW50aXR5ID0gdGhpcy5idWlsZFJlbGF0aW9uRW50aXR5KG5vZGUpO1xuXHRcdFx0Y29uc3QgY3JlYXRlZElkID0gYXdhaXQgdGhpcy5jcmVhdGVFbnRpdHkoZW50aXR5KTtcblx0XHRcdGlmIChjcmVhdGVkSWQpIHtcblx0XHRcdFx0dGhpcy5hcHBseUNyZWF0ZWRJZFRvUmVsYXRpb24ocmVsYXRpb24sIGVudGl0eSwgY3JlYXRlZElkKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0dGhpcy5yZW5kZXIoKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgY3JlYXRlUmVsYXRpb24ocmVsYXRpb246IEV4dHJhY3RSZWxhdGlvbikge1xuXHRcdGlmICghdGhpcy5yZXN1bHQ/LndvcmxkX2lkKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiV29ybGQgSUQgbWlzc2luZy4gU2VsZWN0IGEgc3Rvcnkgb3Igd29ybGQgZmlyc3QuXCIsIDQwMDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAoIXJlbGF0aW9uLnNvdXJjZS5pZCB8fCAhcmVsYXRpb24udGFyZ2V0LmlkKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiQ3JlYXRlIHRoZSByZWxhdGVkIGVudGl0aWVzIGJlZm9yZSBjcmVhdGluZyB0aGUgcmVsYXRpb24uXCIsIDQwMDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlRW50aXR5UmVsYXRpb24oe1xuXHRcdFx0d29ybGRfaWQ6IHRoaXMucmVzdWx0LndvcmxkX2lkLFxuXHRcdFx0c291cmNlX3R5cGU6IHJlbGF0aW9uLnNvdXJjZS50eXBlLFxuXHRcdFx0c291cmNlX2lkOiByZWxhdGlvbi5zb3VyY2UuaWQsXG5cdFx0XHR0YXJnZXRfdHlwZTogcmVsYXRpb24udGFyZ2V0LnR5cGUsXG5cdFx0XHR0YXJnZXRfaWQ6IHJlbGF0aW9uLnRhcmdldC5pZCxcblx0XHRcdHJlbGF0aW9uX3R5cGU6IHJlbGF0aW9uLnJlbGF0aW9uX3R5cGUsXG5cdFx0XHRzdW1tYXJ5OiByZWxhdGlvbi5zdW1tYXJ5LFxuXHRcdFx0Y3JlYXRlX21pcnJvcjogcmVsYXRpb24uY3JlYXRlX21pcnJvciA/PyBmYWxzZSxcblx0XHR9KTtcblxuXHRcdHJlbGF0aW9uLnN0YXR1cyA9IFwiY3JlYXRlZFwiO1xuXHRcdHJlbGF0aW9uLmNyZWF0ZWRfaWQgPSBjcmVhdGVkLmlkO1xuXHRcdHRoaXMucmVuZGVyKCk7XG5cdFx0bmV3IE5vdGljZShgUmVsYXRpb24gY3JlYXRlZDogJHtyZWxhdGlvbi5yZWxhdGlvbl90eXBlfWAsIDMwMDApO1xuXHR9XG5cblx0cHJpdmF0ZSBhcHBseUNyZWF0ZWRJZFRvUmVsYXRpb24oXG5cdFx0cmVsYXRpb246IEV4dHJhY3RSZWxhdGlvbixcblx0XHRlbnRpdHk6IEV4dHJhY3RFbnRpdHksXG5cdFx0Y3JlYXRlZElkOiBzdHJpbmdcblx0KSB7XG5cdFx0Y29uc3QgdXBkYXRlTm9kZSA9IChub2RlOiBFeHRyYWN0UmVsYXRpb25Ob2RlKSA9PiB7XG5cdFx0XHRpZiAobm9kZS50eXBlICE9PSBlbnRpdHkudHlwZSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0aWYgKGVudGl0eS5uYW1lICYmIG5vZGUubmFtZSAmJiBub2RlLm5hbWUgIT09IGVudGl0eS5uYW1lKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRub2RlLmlkID0gY3JlYXRlZElkO1xuXHRcdFx0bm9kZS5uYW1lID0gZW50aXR5Lm5hbWU7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9O1xuXHRcdGlmICghdXBkYXRlTm9kZShyZWxhdGlvbi5zb3VyY2UpKSB7XG5cdFx0XHR1cGRhdGVOb2RlKHJlbGF0aW9uLnRhcmdldCk7XG5cdFx0fVxuXHRcdGlmICghdGhpcy5oYXNUZW1wTm9kZShyZWxhdGlvbi5zb3VyY2UpICYmICF0aGlzLmhhc1RlbXBOb2RlKHJlbGF0aW9uLnRhcmdldCkpIHtcblx0XHRcdHJlbGF0aW9uLnN0YXR1cyA9IFwicmVhZHlcIjtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHNldEFjdGl2ZVRhYih0YWI6IFwicHJvZ3Jlc3NcIiB8IFwiZW50aXRpZXNcIiB8IFwicmVsYXRpb25zXCIpIHtcblx0XHR0aGlzLmFjdGl2ZVRhYiA9IHRhYjtcblx0XHR0aGlzLnBlbmRpbmdUYWJTY3JvbGwgPSB0cnVlO1xuXHRcdHRoaXMucmVuZGVyKCk7XG5cdH1cblxuXHRwcml2YXRlIGFwcGx5UGVuZGluZ1Njcm9sbCgpIHtcblx0XHRpZiAoIXRoaXMucGVuZGluZ1RhYlNjcm9sbCAmJiB0aGlzLnBlbmRpbmdSZWxhdGlvblNjcm9sbEluZGV4ID09PSBudWxsKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRpZiAodGhpcy5wZW5kaW5nVGFiU2Nyb2xsKSB7XG5cdFx0XHRcdGNvbnN0IHBhbmVsID0gdGhpcy5jb250ZW50Um9vdC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0XHRcdFwiLnN0b3J5LWVuZ2luZS1leHRyYWN0LXBhbmVsLmlzLWFjdGl2ZVwiXG5cdFx0XHRcdCkgYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xuXHRcdFx0XHRpZiAocGFuZWwpIHtcblx0XHRcdFx0XHRwYW5lbC5zY3JvbGxUb3AgPSAwO1xuXHRcdFx0XHRcdHBhbmVsLnNjcm9sbEludG9WaWV3KHsgYmxvY2s6IFwic3RhcnRcIiB9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLnBlbmRpbmdUYWJTY3JvbGwgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHRoaXMucGVuZGluZ1JlbGF0aW9uU2Nyb2xsSW5kZXggIT09IG51bGwpIHtcblx0XHRcdFx0Y29uc3Qgc2VsZWN0b3IgPSBgLnN0b3J5LWVuZ2luZS1leHRyYWN0LXJlbGF0aW9ucy1lbnRpdGllc1tkYXRhLXJlbGF0aW9uLWluZGV4PVwiJHt0aGlzLnBlbmRpbmdSZWxhdGlvblNjcm9sbEluZGV4fVwiXWA7XG5cdFx0XHRcdGNvbnN0IGVudGl0eUJsb2NrID0gdGhpcy5jb250ZW50Um9vdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSBhcyBIVE1MRWxlbWVudCB8IG51bGw7XG5cdFx0XHRcdGlmIChlbnRpdHlCbG9jaykge1xuXHRcdFx0XHRcdGVudGl0eUJsb2NrLnNjcm9sbEludG9WaWV3KHsgYmxvY2s6IFwic3RhcnRcIiB9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLnBlbmRpbmdSZWxhdGlvblNjcm9sbEluZGV4ID0gbnVsbDtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxvQkFBK0I7OztBQ0kvQixJQUFNLG9CQUFOLE1BQXdCO0FBQUEsRUFBeEI7QUFDQyxTQUFRLGNBQWMsb0JBQUksSUFBZ0I7QUFBQTtBQUFBLEVBRTFDLFVBQVUsWUFBb0M7QUFDN0MsU0FBSyxZQUFZLElBQUksVUFBVTtBQUMvQixXQUFPLE1BQU07QUFDWixXQUFLLFlBQVksT0FBTyxVQUFVO0FBQUEsSUFDbkM7QUFBQSxFQUNEO0FBQUEsRUFFQSxN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RztBQUNsQixTQUFPLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxHQUFHLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUN0QztBQUVBLElBQUksSUFBSTtBQUFBLEVBQ04sTUFBTTtBQUFBLEVBQ04sU0FBUyxDQUFDLEtBQUssR0FBRyxFQUFFLElBQUksSUFBSTtBQUFBLEVBQzVCLE9BQU8sU0FBUyxHQUFHLEdBQUc7QUFBRSxXQUFPLEtBQUssT0FBTyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUFBLEVBQUc7QUFBQSxFQUN4RixRQUFRLFNBQVMsSUFBSTtBQUFFLFdBQU8sTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7QUFBQSxFQUFHO0FBQzVEO0FBRUEsSUFBSSxJQUFJO0FBQUEsRUFDTixNQUFNO0FBQUEsRUFDTixTQUFTLENBQUMsS0FBSyxHQUFHLEVBQUUsSUFBSSxJQUFJO0FBQUEsRUFDNUIsT0FBTyxTQUFTLEdBQUcsR0FBRztBQUFFLFdBQU8sS0FBSyxPQUFPLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQUEsRUFBRztBQUFBLEVBQ3hGLFFBQVEsU0FBUyxJQUFJO0FBQUUsV0FBTyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUFBLEVBQUc7QUFDNUQ7QUFFQSxJQUFJLEtBQUs7QUFBQSxFQUNQLE1BQU07QUFBQSxFQUNOLFNBQVMsQ0FBQyxLQUFLLEtBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxNQUFNLElBQUks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VUFDaEQ7QUFBQSxRQUNEO0FBQUEsTUFDRDtBQUVBLFdBQUsseUJBQXlCO0FBQzlCLFVBQUksS0FBSyxrQkFBa0IsV0FBVztBQUNyQyxhQUFLLGdCQUFnQjtBQUFBLE1BQ3RCO0FBQUEsSUFDRCxTQUFTLEtBQUs7QUFDYixVQUFJLGVBQWUsZ0JBQWdCLElBQUksU0FBUyxjQUFjO0FBQzdEO0FBQUEsTUFDRDtBQUNBLFlBQU0sZUFDTCxlQUFlLFFBQVEsSUFBSSxVQUFVO0FBQ3RDLFdBQUssZ0JBQWdCO0FBQ3JCLFdBQUssaUJBQWlCO0FBQUEsUUFDckIsTUFBTTtBQUFBLFFBQ04sU0FBUztBQUFBLE1BQ1YsQ0FBQztBQUNELFVBQUkseUJBQU8sVUFBVSxZQUFZLElBQUksR0FBSTtBQUN6QyxXQUFLLG1CQUFtQjtBQUFBLElBQ3pCO0FBQUEsRUFDRDtBQUFBLEVBRUEsZUFBZTtBQUNkLFVBQU0sVUFBVyxLQUFLLElBQVk7QUFDbEMsUUFBSSxTQUFTO0FBQ1osY0FBUSxLQUFLO0FBQ2IsaUJBQVcsTUFBTTtBQUNoQixnQkFBUSxZQUFZLEtBQUssU0FBUyxFQUFFO0FBQUEsTUFDckMsR0FBRyxHQUFHO0FBQUEsSUFDUDtBQUFBLEVBQ0Q7QUFDRDsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImlkIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAidGl0bGUiLCAic2VsZWN0aW9uIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgInR5cGUiLCAiaW1wb3J0X29ic2lkaWFuIiwgInR5cGUiLCAiaW1wb3J0X29ic2lkaWFuIiwgInByb3NlQ29udGVudCIsICJnb2FsIiwgInRpbWVSZWYiLCAiaW50ZW50IiwgIm91dGNvbWUiLCAidHlwZSIsICJwYXJ0cyIsICJpbXBvcnRfb2JzaWRpYW4iLCAic2NlbmVzRm9sZGVyUGF0aCIsICJiZWF0c0ZvbGRlclBhdGgiLCAiaWQiLCAibWFwIiwgImFsbFNjZW5lcyIsICJyb290IiwgInVwZGF0ZWRDb250ZW50IiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJsZWZ0IiwgInJpZ2h0IiwgImNlbnRlciIsICJtaW4iLCAibWF4IiwgImtleSIsICJzdGFydCIsICJ0aWNrcyIsICJudW1iZXIiLCAidGlja0Zvcm1hdCIsICJ0cmFuc2Zvcm0iLCAiYXhpcyIsICJmb3JtYXQiLCAic2VsZWN0aW9uIiwgImNvcHkiLCAidHlwZSIsICJkb2N1bWVudCIsICJkYXR1bSIsICJzZWxlY3Rpb24iLCAiYXNjZW5kaW5nIiwgImNyZWF0ZSIsICJjcmVhdGUiLCAicGFyc2VUeXBlbmFtZXMiLCAidHlwZSIsICJ3aW5kb3ciLCAiZGlzcGF0Y2hfZGVmYXVsdCIsICJkaXNwYXRjaF9kZWZhdWx0IiwgInNlbGVjdF9kZWZhdWx0IiwgImZvcm1hdCIsICJtaW4iLCAibWF4IiwgImNvbnN0YW50X2RlZmF1bHQiLCAiY29uc3RhbnRfZGVmYXVsdCIsICJjb2xvciIsICJyZ2IiLCAic3RhcnQiLCAiemVybyIsICJpIiwgImNvbnN0YW50X2RlZmF1bHQiLCAibm93IiwgImlkIiwgImdldCIsICJzZXQiLCAic3RhcnQiLCAiZW1wdHkiLCAiaW50ZXJydXB0X2RlZmF1bHQiLCAiaWQiLCAic2V0IiwgImdldCIsICJ0cmFuc2l0aW9uIiwgImF0dHJSZW1vdmUiLCAiYXR0clJlbW92ZU5TIiwgImF0dHJDb25zdGFudCIsICJhdHRyQ29uc3RhbnROUyIsICJhdHRyRnVuY3Rpb24iLCAiYXR0ckZ1bmN0aW9uTlMiLCAiYXR0cl9kZWZhdWx0IiwgImlkIiwgImdldCIsICJpZCIsICJzZXQiLCAiZ2V0IiwgImlkIiwgInNldCIsICJnZXQiLCAiaWQiLCAic2V0IiwgImZpbHRlcl9kZWZhdWx0IiwgIm1lcmdlX2RlZmF1bHQiLCAidHJhbnNpdGlvbiIsICJpZCIsICJzZXQiLCAib25fZGVmYXVsdCIsICJnZXQiLCAiaWQiLCAicmVtb3ZlX2RlZmF1bHQiLCAic2VsZWN0X2RlZmF1bHQiLCAiaWQiLCAiZ2V0IiwgInNlbGVjdEFsbF9kZWZhdWx0IiwgImlkIiwgImNoaWxkcmVuIiwgImluaGVyaXQiLCAiZ2V0IiwgIlNlbGVjdGlvbiIsICJzZWxlY3Rpb25fZGVmYXVsdCIsICJzdHlsZVJlbW92ZSIsICJzdHlsZUNvbnN0YW50IiwgInN0eWxlRnVuY3Rpb24iLCAiaWQiLCAicmVtb3ZlIiwgInNldCIsICJzdHlsZV9kZWZhdWx0IiwgInRleHRDb25zdGFudCIsICJ0ZXh0RnVuY3Rpb24iLCAidGV4dF9kZWZhdWx0IiwgImluaGVyaXQiLCAiZ2V0IiwgImlkIiwgInNldCIsICJpZCIsICJzZWxlY3RfZGVmYXVsdCIsICJzZWxlY3RBbGxfZGVmYXVsdCIsICJmaWx0ZXJfZGVmYXVsdCIsICJtZXJnZV9kZWZhdWx0IiwgInNlbGVjdGlvbl9kZWZhdWx0IiwgIm9uX2RlZmF1bHQiLCAiYXR0cl9kZWZhdWx0IiwgInN0eWxlX2RlZmF1bHQiLCAidGV4dF9kZWZhdWx0IiwgInJlbW92ZV9kZWZhdWx0IiwgImlkIiwgInRyYW5zaXRpb25fZGVmYXVsdCIsICJpbnRlcnJ1cHRfZGVmYXVsdCIsICJ0cmFuc2l0aW9uX2RlZmF1bHQiLCAibnVtYmVyMiIsICJpZGVudGl0eV9kZWZhdWx0IiwgImxvY2FsZSIsICJpZGVudGl0eV9kZWZhdWx0IiwgInplcm8iLCAidHlwZSIsICJmb3JtYXQiLCAiZm9ybWF0UHJlZml4IiwgInZhbHVlIiwgIm1heCIsICJudW1iZXIiLCAiaWRlbnRpdHkiLCAiaSIsICJ0cmFuc2Zvcm0iLCAibnVtYmVyIiwgInN0YXJ0IiwgInN0YXJ0IiwgImxpbmVhciIsICJpZGVudGl0eSIsICJzZWxlY3RfZGVmYXVsdCIsICJsaW5lYXIiLCAiaW1wb3J0X29ic2lkaWFuIiwgInR5cGUiLCAiYnV0dG9uQ29udGFpbmVyIiwgImNvcHkiLCAidGV4dEJ0biIsICJpbWFnZUJ0biIsICJiZWF0Q29udGVudHMiLCAiY2hpbGRyZW4iLCAiX2EiLCAidHlwZSIsICJ1bml0IiwgImwiLCAiY2hhcmFjdGVyIiwgImltcG9ydF9vYnNpZGlhbiIsICJyb290IiwgInR5cGUiLCAic2V0IiwgInNlbGVjdGlvbiJdCn0K
