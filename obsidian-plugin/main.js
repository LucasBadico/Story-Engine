/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => StoryEnginePlugin
});
module.exports = __toCommonJS(main_exports);
<<<<<<< HEAD
var import_obsidian19 = require("obsidian");
=======
var import_obsidian18 = require("obsidian");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)

// src/sync/apiUpdateNotifier.ts
var ApiUpdateNotifier = class {
  constructor() {
    this.subscribers = /* @__PURE__ */ new Set();
  }
  subscribe(subscriber) {
    this.subscribers.add(subscriber);
    return () => {
      this.subscribers.delete(subscriber);
    };
  }
  async notify(payload) {
    for (const subscriber of this.subscribers) {
      try {
        await subscriber(payload);
      } catch (err) {
        console.error("Auto sync subscriber failed", err);
      }
    }
  }
};
var apiUpdateNotifier = new ApiUpdateNotifier();

// src/api/client.ts
var StoryEngineClient = class {
  constructor(apiUrl, apiKey, tenantId = "") {
    this.apiUrl = apiUrl;
    this.apiKey = apiKey;
    this.tenantId = tenantId;
    this.mode = "remote";
    this.autoSyncOnApiUpdates = true;
  }
  setTenantId(tenantId) {
    this.tenantId = tenantId.trim();
  }
  setMode(mode) {
    this.mode = mode;
  }
  setAutoSyncOnApiUpdates(enabled) {
    this.autoSyncOnApiUpdates = enabled;
  }
  async request(method, endpoint, body, tenantIdOverride) {
    const url = `${this.apiUrl}${endpoint}`;
    const headers = new Headers();
    headers.set("Content-Type", "application/json");
    if (this.apiKey) {
      headers.set("Authorization", `Bearer ${this.apiKey}`);
    }
    const effectiveTenantId = tenantIdOverride != null ? tenantIdOverride : this.tenantId;
    if (effectiveTenantId) {
      const trimmedTenantId = effectiveTenantId.trim();
      if (trimmedTenantId) {
        headers.set("X-Tenant-ID", trimmedTenantId);
      }
    }
    const options = {
      method,
      headers
    };
    if (body) {
      options.body = JSON.stringify(body);
    }
    const response = await fetch(url, options);
    if (!response.ok) {
      let error;
      try {
        error = await response.json();
      } catch (e) {
        error = {
          error: "unknown_error",
          message: `HTTP ${response.status}: ${response.statusText}`,
          code: "HTTP_ERROR"
        };
      }
      const errorMessage = error.message || error.error || `HTTP ${response.status}: ${response.statusText}`;
      throw new Error(errorMessage);
    }
    return response.json();
  }
  async listStories() {
    if (this.mode === "remote" && (!this.tenantId || !this.tenantId.trim())) {
      throw new Error("Tenant ID is required");
    }
    const response = await this.request(
      "GET",
      "/api/v1/stories"
    );
    return response.stories || [];
  }
  async getStory(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/stories/${id2}`
    );
    return response.story;
  }
  async createStory(title, worldId) {
    if (this.mode === "remote" && (!this.tenantId || !this.tenantId.trim())) {
      throw new Error("Tenant ID is required");
    }
    const body = { title: title.trim() };
    if (worldId) {
      body.world_id = worldId;
    }
    const response = await this.request(
      "POST",
      "/api/v1/stories",
      body
    );
    return response.story;
  }
  async cloneStory(id2) {
    if (!this.tenantId || !this.tenantId.trim()) {
      throw new Error("Tenant ID is required");
    }
    const response = await this.request(
      "POST",
      `/api/v1/stories/${id2}/clone`,
      {}
    );
    return response.story;
  }
  async getTenant(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/tenants/${id2}`
    );
    return response.tenant;
  }
  async testConnection() {
    try {
      await this.request("GET", "/health");
      return true;
    } catch (e) {
      return false;
    }
  }
  async updateStory(id2, title, status) {
    const body = { title: title.trim() };
    if (status) {
      body.status = status;
    }
    const response = await this.request(
      "PUT",
      `/api/v1/stories/${id2}`,
      body
    );
    return response.story;
  }
  async getStoryWithHierarchy(id2) {
    const story = await this.getStory(id2);
    const chapters = await this.getChapters(id2);
    const chaptersWithContent = await Promise.all(
      chapters.map(async (chapter) => {
        const scenes = await this.getScenes(chapter.id);
        const scenesWithBeats = await Promise.all(
          scenes.map(async (scene) => {
            const beats = await this.getBeats(scene.id);
            return { scene, beats };
          })
        );
        return { chapter, scenes: scenesWithBeats };
      })
    );
    return {
      story,
      chapters: chaptersWithContent
    };
  }
  async createChapter(storyId, chapter) {
    const response = await this.request(
      "POST",
      "/api/v1/chapters",
      {
        story_id: storyId,
        number: chapter.number,
        title: chapter.title,
        status: chapter.status
      }
    );
    void this.publishChapterUpdate(response.chapter.id);
    return response.chapter;
  }
  async updateChapter(id2, chapter) {
    const response = await this.request(
      "PUT",
      `/api/v1/chapters/${id2}`,
      chapter
    );
    void this.publishChapterUpdate(response.chapter.id);
    return response.chapter;
  }
  async getChapters(storyId) {
    const response = await this.request(
      "GET",
      `/api/v1/stories/${storyId}/chapters`
    );
    return response.chapters || [];
  }
  async getChapter(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/chapters/${id2}`
    );
    return response.chapter;
  }
  async deleteChapter(id2) {
    await this.request("DELETE", `/api/v1/chapters/${id2}`);
  }
  async createScene(scene) {
    const response = await this.request(
      "POST",
      "/api/v1/scenes",
      scene
    );
    void this.publishSceneTree(response.scene.id);
    return response.scene;
  }
  async updateScene(id2, scene) {
    const response = await this.request(
      "PUT",
      `/api/v1/scenes/${id2}`,
      scene
    );
    void this.publishSceneTree(response.scene.id);
    return response.scene;
  }
  async getScenes(chapterId) {
    const response = await this.request(
      "GET",
      `/api/v1/chapters/${chapterId}/scenes`
    );
    return response.scenes || [];
  }
  async getScene(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/scenes/${id2}`
    );
    return response.scene;
  }
  async deleteScene(id2) {
    await this.request("DELETE", `/api/v1/scenes/${id2}`);
  }
  async createBeat(beat) {
    if (!beat.scene_id) {
      throw new Error("scene_id is required to create a beat");
    }
    const payload = { ...beat };
    if (!payload.order_num || payload.order_num <= 0) {
      const existingBeats = await this.getBeats(beat.scene_id);
      const nextOrder = existingBeats.length > 0 ? Math.max(...existingBeats.map((b) => b.order_num || 0)) + 1 : 1;
      payload.order_num = nextOrder;
    }
    const response = await this.request(
      "POST",
      "/api/v1/beats",
      payload
    );
    void this.publishSceneTree(response.beat.scene_id);
    return response.beat;
  }
  async updateBeat(id2, beat) {
    const response = await this.request(
      "PUT",
      `/api/v1/beats/${id2}`,
      beat
    );
    void this.publishSceneTree(response.beat.scene_id);
    return response.beat;
  }
  async getBeats(sceneId) {
    const response = await this.request(
      "GET",
      `/api/v1/scenes/${sceneId}/beats`
    );
    return response.beats || [];
  }
  async getBeat(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/beats/${id2}`
    );
    return response.beat;
  }
  async deleteBeat(id2) {
    await this.request("DELETE", `/api/v1/beats/${id2}`);
  }
  // Get all versions of a story (for version history)
  async getStoryVersions(rootStoryId) {
    const response = await this.request(
      "GET",
      `/api/v1/stories/${rootStoryId}/versions`
    );
    return response.stories || [];
  }
  async getScenesByStory(storyId) {
    const response = await this.request(
      "GET",
      `/api/v1/stories/${storyId}/scenes`
    );
    return response.scenes || [];
  }
  async moveScene(sceneId, chapterId) {
    const body = {};
    if (chapterId !== null) {
      body.chapter_id = chapterId;
    } else {
      body.chapter_id = null;
    }
    const response = await this.request(
      "PUT",
      `/api/v1/scenes/${sceneId}/move`,
      body
    );
    void this.publishSceneTree(response.scene.id);
    return response.scene;
  }
  async getBeatsByStory(storyId) {
    const response = await this.request(
      "GET",
      `/api/v1/stories/${storyId}/beats`
    );
    return response.beats || [];
  }
  async moveBeat(beatId, sceneId) {
    const response = await this.request(
      "PUT",
      `/api/v1/beats/${beatId}/move`,
      { scene_id: sceneId }
    );
    void this.publishSceneTree(response.beat.scene_id);
    return response.beat;
  }
  async getContentBlocks(chapterId) {
    const response = await this.request(
      "GET",
      `/api/v1/chapters/${chapterId}/content-blocks`
    );
    return response.content_blocks || [];
  }
  async getContentBlock(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/content-blocks/${id2}`
    );
    return response.content_block;
  }
  async createContentBlock(chapterId, contentBlock) {
    const response = await this.request(
      "POST",
      `/api/v1/chapters/${chapterId}/content-blocks`,
      contentBlock
    );
    void this.publishContentBlockUpdate(response.content_block.id);
    return response.content_block;
  }
  async updateContentBlock(id2, contentBlock) {
    const response = await this.request(
      "PUT",
      `/api/v1/content-blocks/${id2}`,
      contentBlock
    );
    void this.publishContentBlockUpdate(response.content_block.id);
    return response.content_block;
  }
  async deleteContentBlock(id2) {
    await this.request("DELETE", `/api/v1/content-blocks/${id2}`);
  }
  async getContentAnchors(contentBlockId) {
    const response = await this.request(
      "GET",
      `/api/v1/content-blocks/${contentBlockId}/anchors`
    );
    return response.anchors || [];
  }
  async getContentBlocksByScene(sceneId) {
    const response = await this.request(
      "GET",
      `/api/v1/scenes/${sceneId}/content-blocks`
    );
    return response.content_blocks || [];
  }
  async getContentBlocksByBeat(beatId) {
    const response = await this.request(
      "GET",
      `/api/v1/beats/${beatId}/content-blocks`
    );
    return response.content_blocks || [];
  }
  async createContentAnchor(contentBlockId, entityType, entityId) {
    const response = await this.request(
      "POST",
      `/api/v1/content-blocks/${contentBlockId}/anchors`,
      {
        entity_type: entityType,
        entity_id: entityId
      }
    );
    return response.anchor;
  }
  async deleteContentAnchor(id2) {
    await this.request("DELETE", `/api/v1/content-anchors/${id2}`);
  }
  async getWorlds() {
    const response = await this.request(
      "GET",
      "/api/v1/worlds"
    );
    return response.worlds || [];
  }
  async getWorld(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${id2}`
    );
    return response.world;
  }
  async createWorld(name, description, genre) {
    const response = await this.request(
      "POST",
      "/api/v1/worlds",
      {
        name: name.trim(),
        description: description.trim(),
        genre: genre.trim()
      }
    );
    return response.world;
  }
  async updateWorld(id2, name, description, genre) {
    const response = await this.request(
      "PUT",
      `/api/v1/worlds/${id2}`,
      {
        name: name.trim(),
        description: description.trim(),
        genre: genre.trim()
      }
    );
    return response.world;
  }
  async getRPGSystems() {
    const response = await this.request(
      "GET",
      "/api/v1/rpg-systems"
    );
    return response.rpg_systems || [];
  }
  async getRPGSystem(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/rpg-systems/${id2}`
    );
    return response.rpg_system;
  }
  // Character methods
  async getCharacters(worldId) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${worldId}/characters`
    );
    return response.characters || [];
  }
  async getCharacter(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/characters/${id2}`
    );
    return response.character;
  }
  async createCharacter(worldId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/worlds/${worldId}/characters`,
      data
    );
    return response.character;
  }
  async updateCharacter(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/characters/${id2}`,
      data
    );
    return response.character;
  }
  async deleteCharacter(id2) {
    await this.request("DELETE", `/api/v1/characters/${id2}`);
  }
  // Location methods
  async getLocations(worldId) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${worldId}/locations`
    );
    return response.locations || [];
  }
  async getLocation(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/locations/${id2}`
    );
    return response.location;
  }
  async createLocation(worldId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/worlds/${worldId}/locations`,
      data
    );
    return response.location;
  }
  async updateLocation(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/locations/${id2}`,
      data
    );
    return response.location;
  }
  async deleteLocation(id2) {
    await this.request("DELETE", `/api/v1/locations/${id2}`);
  }
  // Artifact methods
  async getArtifacts(worldId) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${worldId}/artifacts`
    );
    return response.artifacts || [];
  }
  async getArtifact(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/artifacts/${id2}`
    );
    return response.artifact;
  }
  async createArtifact(worldId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/worlds/${worldId}/artifacts`,
      data
    );
    return response.artifact;
  }
  async updateArtifact(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/artifacts/${id2}`,
      data
    );
    return response.artifact;
  }
  async deleteArtifact(id2) {
    await this.request("DELETE", `/api/v1/artifacts/${id2}`);
  }
  // Event methods
  async getEvents(worldId) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${worldId}/events`
    );
    return response.events || [];
  }
  async getEvent(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/events/${id2}`
    );
    return response.event;
  }
  async createEvent(worldId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/worlds/${worldId}/events`,
      data
    );
    return response.event;
  }
  async updateEvent(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/events/${id2}`,
      data
    );
    return response.event;
  }
  async deleteEvent(id2) {
    await this.request("DELETE", `/api/v1/events/${id2}`);
  }
  async moveEvent(id2, parentId) {
    const response = await this.request(
      "PUT",
      `/api/v1/events/${id2}/move`,
      { parent_id: parentId }
    );
    return response.event;
  }
  // Trait methods
  async getTraits() {
    const response = await this.request(
      "GET",
      "/api/v1/traits"
    );
    return response.traits || [];
  }
  async getTrait(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/traits/${id2}`
    );
    return response.trait;
  }
  async createTrait(data) {
    const response = await this.request(
      "POST",
      "/api/v1/traits",
      data
    );
    return response.trait;
  }
  async updateTrait(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/traits/${id2}`,
      data
    );
    return response.trait;
  }
  async deleteTrait(id2) {
    await this.request("DELETE", `/api/v1/traits/${id2}`);
  }
  // Archetype methods
  async getArchetypes() {
    const response = await this.request(
      "GET",
      "/api/v1/archetypes"
    );
    return response.archetypes || [];
  }
  async getArchetype(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/archetypes/${id2}`
    );
    return response.archetype;
  }
  async createArchetype(data) {
    const response = await this.request(
      "POST",
      "/api/v1/archetypes",
      data
    );
    return response.archetype;
  }
  async updateArchetype(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/archetypes/${id2}`,
      data
    );
    return response.archetype;
  }
  async deleteArchetype(id2) {
    await this.request("DELETE", `/api/v1/archetypes/${id2}`);
  }
  async getArchetypeTraits(archetypeId) {
    const response = await this.request(
      "GET",
      `/api/v1/archetypes/${archetypeId}/traits`
    );
    return response.archetype_traits || [];
  }
  async addArchetypeTrait(archetypeId, traitId, defaultValue) {
    await this.request(
      "POST",
      `/api/v1/archetypes/${archetypeId}/traits`,
      {
        trait_id: traitId,
        default_value: defaultValue
      }
    );
  }
  async removeArchetypeTrait(archetypeId, traitId) {
    await this.request(
      "DELETE",
      `/api/v1/archetypes/${archetypeId}/traits/${traitId}`
    );
  }
  // Faction methods
  async getFactions(worldId) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${worldId}/factions`
    );
    return response.factions || [];
  }
  async getFaction(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/factions/${id2}`
    );
    return response.faction;
  }
  async createFaction(worldId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/worlds/${worldId}/factions`,
      data
    );
    return response.faction;
  }
  async updateFaction(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/factions/${id2}`,
      data
    );
    return response.faction;
  }
  async deleteFaction(id2) {
    await this.request("DELETE", `/api/v1/factions/${id2}`);
  }
  async getFactionChildren(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/factions/${id2}/children`
    );
    return response.factions || [];
  }
  async getFactionReferences(factionId) {
    const response = await this.request(
      "GET",
      `/api/v1/factions/${factionId}/references`
    );
    return response.references || [];
  }
  async addFactionReference(factionId, entityType, entityId, role, notes) {
    const response = await this.request(
      "POST",
      `/api/v1/factions/${factionId}/references`,
      {
        entity_type: entityType,
        entity_id: entityId,
        role,
        notes
      }
    );
    return response.reference;
  }
  async updateFactionReference(id2, role, notes) {
    const response = await this.request(
      "PUT",
      `/api/v1/faction-references/${id2}`,
      {
        role,
        notes
      }
    );
    return response.reference;
  }
  async removeFactionReference(factionId, entityType, entityId) {
    await this.request(
      "DELETE",
      `/api/v1/factions/${factionId}/references/${entityType}/${entityId}`
    );
  }
  // Lore methods
  async getLores(worldId) {
    const response = await this.request(
      "GET",
      `/api/v1/worlds/${worldId}/lores`
    );
    return response.lores || [];
  }
  async getLore(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/lores/${id2}`
    );
    return response.lore;
  }
  async createLore(worldId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/worlds/${worldId}/lores`,
      data
    );
    return response.lore;
  }
  async updateLore(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/lores/${id2}`,
      data
    );
    return response.lore;
  }
  async deleteLore(id2) {
    await this.request("DELETE", `/api/v1/lores/${id2}`);
  }
  async getLoreChildren(id2) {
    const response = await this.request(
      "GET",
      `/api/v1/lores/${id2}/children`
    );
    return response.lores || [];
  }
  async getLoreReferences(loreId) {
    const response = await this.request(
      "GET",
      `/api/v1/lores/${loreId}/references`
    );
    return response.references || [];
  }
  async addLoreReference(loreId, entityType, entityId, relationshipType, notes) {
    const response = await this.request(
      "POST",
      `/api/v1/lores/${loreId}/references`,
      {
        entity_type: entityType,
        entity_id: entityId,
        relationship_type: relationshipType,
        notes
      }
    );
    return response.reference;
  }
  async updateLoreReference(id2, relationshipType, notes) {
    const response = await this.request(
      "PUT",
      `/api/v1/lore-references/${id2}`,
      {
        relationship_type: relationshipType,
        notes
      }
    );
    return response.reference;
  }
  async removeLoreReference(loreId, entityType, entityId) {
    await this.request(
      "DELETE",
      `/api/v1/lores/${loreId}/references/${entityType}/${entityId}`
    );
  }
  // Character Traits methods
  async getCharacterTraits(characterId) {
    const response = await this.request(
      "GET",
      `/api/v1/characters/${characterId}/traits`
    );
    return response.character_traits || [];
  }
  async addCharacterTrait(characterId, traitId, value, notes) {
    const response = await this.request(
      "POST",
      `/api/v1/characters/${characterId}/traits`,
      {
        trait_id: traitId,
        value,
        notes
      }
    );
    return response.character_trait;
  }
  async updateCharacterTrait(characterId, traitId, value, notes) {
    const response = await this.request(
      "PUT",
      `/api/v1/characters/${characterId}/traits/${traitId}`,
      {
        value,
        notes
      }
    );
    return response.character_trait;
  }
  async removeCharacterTrait(characterId, traitId) {
    await this.request(
      "DELETE",
      `/api/v1/characters/${characterId}/traits/${traitId}`
    );
  }
  // Character Events methods
  async getCharacterEvents(characterId) {
    const response = await this.request(
      "GET",
      `/api/v1/characters/${characterId}/events`
    );
    return response.event_characters || [];
  }
  // Character Relationships methods
  async getCharacterRelationships(characterId) {
    const response = await this.request(
      "GET",
      `/api/v1/characters/${characterId}/relationships`
    );
    return response.relationships || [];
  }
  async createCharacterRelationship(characterId, data) {
    const response = await this.request(
      "POST",
      `/api/v1/characters/${characterId}/relationships`,
      data
    );
    return response.relationship;
  }
  async updateCharacterRelationship(id2, data) {
    const response = await this.request(
      "PUT",
      `/api/v1/character-relationships/${id2}`,
      data
    );
    return response.relationship;
  }
  async deleteCharacterRelationship(id2) {
    await this.request("DELETE", `/api/v1/character-relationships/${id2}`);
  }
  async createEntityRelation(input) {
    var _a;
    const response = await this.request(
      "POST",
      "/api/v1/relations",
      {
        world_id: input.world_id,
        source_type: input.source_type,
        source_id: input.source_id,
        target_type: input.target_type,
        target_id: input.target_id,
        relation_type: input.relation_type,
        summary: input.summary,
        create_mirror: (_a = input.create_mirror) != null ? _a : false
      }
    );
    return response.relation;
  }
  // Event Characters/References methods
  async getEventCharacters(eventId) {
    const response = await this.request(
      "GET",
      `/api/v1/events/${eventId}/characters`
    );
    return response.event_characters || [];
  }
  async addEventCharacter(eventId, characterId, role) {
    const response = await this.request(
      "POST",
      `/api/v1/events/${eventId}/characters`,
      {
        character_id: characterId,
        role
      }
    );
    return response.event_character;
  }
  async removeEventCharacter(eventId, characterId) {
    await this.request(
      "DELETE",
      `/api/v1/events/${eventId}/characters/${characterId}`
    );
  }
  async getEventReferences(eventId) {
    const response = await this.request(
      "GET",
      `/api/v1/events/${eventId}/references`
    );
    return response.references || [];
  }
  async addEventReference(eventId, entityType, entityId, relationshipType, notes) {
    const response = await this.request(
      "POST",
      `/api/v1/events/${eventId}/references`,
      {
        entity_type: entityType,
        entity_id: entityId,
        relationship_type: relationshipType,
        notes
      }
    );
    return response.reference;
  }
  async updateEventReference(id2, relationshipType, notes) {
    const response = await this.request(
      "PUT",
      `/api/v1/event-references/${id2}`,
      {
        relationship_type: relationshipType,
        notes
      }
    );
    return response.reference;
  }
  async removeEventReference(eventId, entityType, entityId) {
    await this.request(
      "DELETE",
      `/api/v1/events/${eventId}/references/${entityType}/${entityId}`
    );
  }
  // Scene References methods
  async getSceneReferences(sceneId) {
    const response = await this.request(
      "GET",
      `/api/v1/scenes/${sceneId}/references`
    );
    return response.references || [];
  }
  async addSceneReference(sceneId, entityType, entityId) {
    const response = await this.request(
      "POST",
      `/api/v1/scenes/${sceneId}/references`,
      {
        entity_type: entityType,
        entity_id: entityId
      }
    );
    return response.reference;
  }
  async removeSceneReference(sceneId, entityType, entityId) {
    await this.request(
      "DELETE",
      `/api/v1/scenes/${sceneId}/references/${entityType}/${entityId}`
    );
  }
  // Timeline methods
  async getTimeline(worldId, fromPos, toPos) {
    const queryParams = new URLSearchParams();
    if (fromPos !== void 0) {
      queryParams.append("from_pos", fromPos.toString());
    }
    if (toPos !== void 0) {
      queryParams.append("to_pos", toPos.toString());
    }
    const queryString = queryParams.toString();
    const endpoint = `/api/v1/worlds/${worldId}/timeline${queryString ? `?${queryString}` : ""}`;
    const response = await this.request(
      "GET",
      endpoint
    );
    return response.events || [];
  }
  // World TimeConfig methods
  async updateWorldTimeConfig(worldId, timeConfig) {
    const response = await this.request(
      "PUT",
      `/api/v1/worlds/${worldId}/time-config`,
      timeConfig
    );
    return response.world;
  }
  isAutoSyncEnabled() {
    return this.autoSyncOnApiUpdates;
  }
  async publishChapterUpdate(chapterId) {
    if (!this.isAutoSyncEnabled()) {
      return;
    }
    try {
      const chapter = await this.getChapter(chapterId);
      const story = await this.getStory(chapter.story_id);
      const scenes = await this.getScenes(chapterId);
      const scenesWithBeats = await Promise.all(
        scenes.map(async (scene) => {
          const beats = await this.getBeats(scene.id);
          return { scene, beats };
        })
      );
      const contentBlocks = await this.getContentBlocks(chapterId);
      const contentBlockRefs = [];
      for (const block of contentBlocks) {
        const refs = await this.getContentAnchors(block.id);
        contentBlockRefs.push(...refs);
      }
      await this.notifyEntityUpdate({
        type: "chapter",
        story,
        chapter,
        scenes: scenesWithBeats,
        contentBlocks,
        contentBlockRefs
      });
    } catch (err) {
      console.error("Failed to auto-sync chapter update", err);
    }
  }
  async publishSceneTree(sceneId) {
    if (!this.isAutoSyncEnabled()) {
      return;
    }
    try {
      const scene = await this.getScene(sceneId);
      if (scene.chapter_id) {
        await this.publishChapterUpdate(scene.chapter_id);
        return;
      }
      const story = await this.getStory(scene.story_id);
      const beats = await this.getBeats(scene.id);
      const sceneContentBlocks = await this.getContentBlocksByScene(scene.id);
      const beatContentBlocks = {};
      for (const beat of beats) {
        beatContentBlocks[beat.id] = await this.getContentBlocksByBeat(beat.id);
      }
      await this.notifyEntityUpdate({
        type: "scene",
        story,
        scene,
        beats,
        sceneContentBlocks,
        beatContentBlocks
      });
    } catch (err) {
      console.error("Failed to auto-sync scene update", err);
    }
  }
  async publishContentBlockUpdate(contentBlockId) {
    if (!this.isAutoSyncEnabled()) {
      return;
    }
    try {
      const contentBlock = await this.getContentBlock(contentBlockId);
      let story = null;
      if (contentBlock.chapter_id) {
        const chapter = await this.getChapter(contentBlock.chapter_id);
        story = await this.getStory(chapter.story_id);
      } else {
        const anchors = await this.getContentAnchors(contentBlock.id);
        const sceneAnchor = anchors.find((anchor) => anchor.entity_type === "scene");
        if (sceneAnchor) {
          const scene = await this.getScene(sceneAnchor.entity_id);
          story = await this.getStory(scene.story_id);
        }
      }
      if (!story) {
        console.warn("Unable to resolve story for content block auto-sync", contentBlockId);
        return;
      }
      await this.notifyEntityUpdate({
        type: "content",
        story,
        contentBlock
      });
    } catch (err) {
      console.error("Failed to auto-sync content block update", err);
    }
  }
  async notifyEntityUpdate(payload) {
    await apiUpdateNotifier.notify(payload);
  }
};

// src/settings.ts
var import_obsidian = require("obsidian");
var StoryEngineSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Story Engine Settings" });
    let tenantIdSetting = null;
    let videoLinkSetting = null;
    let conflictResolutionSetting = null;
    const modeSetting = new import_obsidian.Setting(containerEl).setName("Connection Mode").setDesc("Choose between local (offline) or remote (cloud) mode").addDropdown(
      (dropdown) => dropdown.addOption("local", "Local").addOption("remote", "Remote").setValue(this.plugin.settings.mode || "local").onChange(async (value) => {
        this.plugin.settings.mode = value;
        if (value === "local") {
          this.plugin.settings.conflictResolution = "local";
          if (conflictResolutionSetting) {
            conflictResolutionSetting.settingEl.style.display = "none";
          }
        } else {
          if (conflictResolutionSetting) {
            conflictResolutionSetting.settingEl.style.display = "";
          }
        }
        if (tenantIdSetting) {
          tenantIdSetting.settingEl.style.display = value === "remote" ? "" : "none";
        }
        if (videoLinkSetting) {
          videoLinkSetting.settingEl.style.display = value === "local" ? "" : "none";
        }
        if (this.plugin.apiClient) {
          this.plugin.apiClient.setMode(value);
        }
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("API URL").setDesc("The base URL of the Story Engine API").addText(
      (text) => text.setPlaceholder("http://localhost:8080").setValue(this.plugin.settings.apiUrl).onChange(async (value) => {
        this.plugin.settings.apiUrl = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("LLM Gateway URL").setDesc("The base URL of the LLM Gateway service").addText(
      (text) => text.setPlaceholder("http://localhost:8081").setValue(this.plugin.settings.llmGatewayUrl).onChange(async (value) => {
        this.plugin.settings.llmGatewayUrl = value.trim();
        await this.plugin.saveSettings();
      })
    );
    tenantIdSetting = new import_obsidian.Setting(containerEl).setName("Tenant ID").setDesc("Your workspace tenant ID (UUID format) - Required in remote mode").addText(
      (text) => text.setPlaceholder("00000000-0000-0000-0000-000000000000").setValue(this.plugin.settings.tenantId || "").onChange(async (value) => {
        this.plugin.settings.tenantId = value.trim();
        if (this.plugin.apiClient) {
          this.plugin.apiClient.setTenantId(value.trim());
        }
        await this.plugin.saveSettings();
      })
    );
    if (this.plugin.settings.mode === "local") {
      tenantIdSetting.settingEl.style.display = "none";
    }
    const videoUrl = this.plugin.settings.localModeVideoUrl || "https://example.com/setup-video";
    videoLinkSetting = new import_obsidian.Setting(containerEl).setName("Setup Guide").setDesc(`\u{1F4F9} Learn how to setup local mode: ${videoUrl}`).addButton((button) => {
      button.setButtonText("Open Video").onClick(() => {
        window.open(videoUrl, "_blank");
      });
    });
    if (this.plugin.settings.mode === "remote") {
      videoLinkSetting.settingEl.style.display = "none";
    }
    new import_obsidian.Setting(containerEl).setName("API Key").setDesc("API key for authentication (optional for MVP)").addText((text) => {
      text.setPlaceholder("Enter API key").setValue(this.plugin.settings.apiKey).inputEl.type = "password";
      text.onChange(async (value) => {
        this.plugin.settings.apiKey = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Sync Folder Path").setDesc("Folder path where synced stories will be stored").addText(
      (text) => text.setPlaceholder("Stories").setValue(this.plugin.settings.syncFolderPath || "Stories").onChange(async (value) => {
        this.plugin.settings.syncFolderPath = value.trim() || "Stories";
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Auto Version Snapshots").setDesc("Automatically create version snapshots when syncing").addToggle(
      (toggle) => {
        var _a;
        return toggle.setValue((_a = this.plugin.settings.autoVersionSnapshots) != null ? _a : true).onChange(async (value) => {
          this.plugin.settings.autoVersionSnapshots = value;
          await this.plugin.saveSettings();
        });
      }
    );
    new import_obsidian.Setting(containerEl).setName("Auto Sync on API Updates").setDesc("Apply API update payloads directly to local files when available").addToggle(
      (toggle) => {
        var _a;
        return toggle.setValue((_a = this.plugin.settings.autoSyncOnApiUpdates) != null ? _a : true).onChange(async (value) => {
          this.plugin.settings.autoSyncOnApiUpdates = value;
          await this.plugin.saveSettings();
        });
      }
    );
    new import_obsidian.Setting(containerEl).setName("Auto Push on Blur/Idle").setDesc("When you leave a chapter/scene/beat or stay idle for 1 min, push changes upstream automatically").addToggle(
      (toggle) => {
        var _a;
        return toggle.setValue((_a = this.plugin.settings.autoPushOnFileBlur) != null ? _a : true).onChange(async (value) => {
          this.plugin.settings.autoPushOnFileBlur = value;
          await this.plugin.saveSettings();
        });
      }
    );
    conflictResolutionSetting = new import_obsidian.Setting(containerEl).setName("Conflict Resolution").setDesc("How to resolve conflicts when both local and service have changes").addDropdown(
      (dropdown) => dropdown.addOption("service", "Service Wins").addOption("local", "Local Wins").addOption("manual", "Manual (Newer Wins)").setValue(this.plugin.settings.conflictResolution || "service").onChange(async (value) => {
        this.plugin.settings.conflictResolution = value;
        await this.plugin.saveSettings();
      })
    );
    if (this.plugin.settings.mode === "local") {
      conflictResolutionSetting.settingEl.style.display = "none";
    }
    new import_obsidian.Setting(containerEl).setName("Show Help Box in MD Files").setDesc("Enable/disable info/help boxes in markdown files").addToggle(
      (toggle) => {
        var _a;
        return toggle.setValue((_a = this.plugin.settings.showHelpBox) != null ? _a : true).onChange(async (value) => {
          this.plugin.settings.showHelpBox = value;
          await this.plugin.saveSettings();
        });
      }
    );
    new import_obsidian.Setting(containerEl).setName("World Sidebar Position").setDesc("Choose whether the world sidebar appears on the left or right side").addDropdown(
      (dropdown) => dropdown.addOption("left", "Left").addOption("right", "Right").setValue(this.plugin.settings.sidebarPosition || "left").onChange(async (value) => {
        this.plugin.settings.sidebarPosition = value;
        await this.plugin.saveSettings();
        this.app.workspace.trigger("layout-change");
      })
    );
    new import_obsidian.Setting(containerEl).setName("Unsplash Access Key").setDesc("Application ID / Access Key for Unsplash API (get one at https://unsplash.com/developers)").addText((text) => {
      text.setPlaceholder("Enter Unsplash access key").setValue(this.plugin.settings.unsplashAccessKey || "").inputEl.type = "password";
      text.onChange(async (value) => {
        this.plugin.settings.unsplashAccessKey = value.trim();
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Unsplash Secret Key").setDesc("Secret Key for Unsplash API (optional, needed for some operations)").addText((text) => {
      text.setPlaceholder("Enter Unsplash secret key").setValue(this.plugin.settings.unsplashSecretKey || "").inputEl.type = "password";
      text.onChange(async (value) => {
        this.plugin.settings.unsplashSecretKey = value.trim();
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Test Connection").setDesc("Test connection to the Story Engine API").addButton(
      (button) => button.setButtonText("Test").onClick(async () => {
        button.setButtonText("Testing...");
        button.setDisabled(true);
        try {
          const result = await this.plugin.apiClient.testConnection();
          if (result) {
            button.setButtonText("Success!");
            setTimeout(() => {
              button.setButtonText("Test");
              button.setDisabled(false);
            }, 2e3);
          } else {
            button.setButtonText("Failed");
            setTimeout(() => {
              button.setButtonText("Test");
              button.setDisabled(false);
            }, 2e3);
          }
        } catch (err) {
          button.setButtonText("Error");
          setTimeout(() => {
            button.setButtonText("Test");
            button.setDisabled(false);
          }, 2e3);
        }
      })
    );
  }
};

// src/commands.ts
var import_obsidian3 = require("obsidian");

// src/views/StorySyncModal.ts
var import_obsidian2 = require("obsidian");
var StorySyncModal = class extends import_obsidian2.Modal {
  constructor(plugin, mode) {
    super(plugin.app);
    this.stories = [];
    this.loading = true;
    this.error = null;
    this.plugin = plugin;
    this.mode = mode;
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    const title = this.mode === "pull" ? "Sync Story from Service" : "Push Story to Service";
    contentEl.createEl("h2", { text: title });
    await this.loadStories();
    if (this.loading) {
      contentEl.createEl("p", { text: "Loading stories..." });
      return;
    }
    if (this.error) {
      contentEl.createEl("p", {
        text: `Error: ${this.error}`,
        cls: "story-engine-error"
      });
      return;
    }
    if (this.stories.length === 0) {
      contentEl.createEl("p", { text: "No stories found." });
      return;
    }
    const storiesList = contentEl.createEl("div", { cls: "story-engine-list" });
    for (const story of this.stories) {
      const storyItem = storiesList.createEl("div", {
        cls: "story-engine-item"
      });
      const title2 = storyItem.createEl("div", {
        cls: "story-engine-title",
        text: story.title
      });
      const meta = storyItem.createEl("div", {
        cls: "story-engine-meta"
      });
      meta.createEl("span", {
        text: `Version ${story.version_number}`
      });
      meta.createEl("span", {
        text: `Status: ${story.status}`
      });
      storyItem.onclick = async () => {
        this.close();
        try {
          if (this.mode === "pull") {
            await this.plugin.syncService.pullStory(story.id);
          } else {
            const folderPath = this.plugin.fileManager.getStoryFolderPath(
              story.title
            );
            await this.plugin.syncService.pushStory(folderPath);
          }
        } catch (err) {
          const errorMessage = err instanceof Error ? err.message : "Failed to sync story";
          new import_obsidian2.Notice(`Error: ${errorMessage}`, 5e3);
        }
      };
    }
  }
  async loadStories() {
    this.loading = true;
    this.error = null;
    try {
      if (!this.plugin.settings.tenantId) {
        this.error = "Tenant ID not configured";
        this.loading = false;
        return;
      }
      this.stories = await this.plugin.apiClient.listStories();
    } catch (err) {
      this.error = err instanceof Error ? err.message : "Unknown error";
    } finally {
      this.loading = false;
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/commands.ts
function registerCommands(plugin) {
  plugin.addCommand({
    id: "list-stories",
    name: "List Stories",
    callback: () => {
      plugin.activateView();
    }
  });
  plugin.addCommand({
    id: "create-story",
    name: "Create Story",
    callback: () => {
      plugin.createStoryCommand();
    }
  });
  plugin.addCommand({
    id: "sync-story-from-service",
    name: "Sync Story from Service",
    callback: () => {
      new StorySyncModal(plugin, "pull").open();
    }
  });
  plugin.addCommand({
    id: "push-story-to-service",
    name: "Push Story to Service",
    callback: () => {
      new StorySyncModal(plugin, "push").open();
    }
  });
  plugin.addCommand({
    id: "sync-all-stories",
    name: "Sync All Stories",
    callback: async () => {
      if (plugin.settings.mode === "remote" && !plugin.settings.tenantId) {
        new import_obsidian3.Notice("Please configure Tenant ID in settings", 5e3);
        return;
      }
      try {
        new import_obsidian3.Notice("Syncing all stories...");
        await plugin.syncService.pullAllStories();
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to sync stories";
        new import_obsidian3.Notice(`Error: ${errorMessage}`, 5e3);
      }
    }
  });
  plugin.addCommand({
    id: "extract-entities-from-selection",
    name: "Extract Entities and Relations from Selection",
    editorCallback: (editor) => {
      const selection2 = editor.getSelection();
      if (!selection2.trim()) {
        new import_obsidian3.Notice("Select text to extract entities and relations", 3e3);
        return;
      }
      plugin.extractSelectionCommand(selection2, true);
    }
  });
  plugin.addCommand({
    id: "extract-entities-only-from-selection",
    name: "Extract Entities Only from Selection",
    editorCallback: (editor) => {
      const selection2 = editor.getSelection();
      if (!selection2.trim()) {
        new import_obsidian3.Notice("Select text to extract entities", 3e3);
        return;
      }
      plugin.extractSelectionCommand(selection2, false);
    }
  });
}

// src/views/CreateStoryModal.ts
var import_obsidian5 = require("obsidian");

// src/views/CreateWorldModal.ts
var import_obsidian4 = require("obsidian");
var CreateWorldModal = class extends import_obsidian4.Modal {
  constructor(app, onSubmit) {
    super(app);
    this.name = "";
    this.description = "";
    this.genre = "";
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Create New World" });
    new import_obsidian4.Setting(contentEl).setName("World Name").setDesc("Enter the name for your new world").addText(
      (text) => text.setPlaceholder("My New World").setValue(this.name).onChange((value) => {
        this.name = value;
      }).inputEl.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          const descriptionInput = contentEl.querySelector("textarea");
          if (descriptionInput) {
            descriptionInput.focus();
          }
        }
      })
    );
    new import_obsidian4.Setting(contentEl).setName("Description").setDesc("Enter a description for your world").addTextArea(
      (text) => text.setPlaceholder("A brief description of your world...").setValue(this.description).onChange((value) => {
        this.description = value;
      })
    );
    new import_obsidian4.Setting(contentEl).setName("Genre").setDesc("Enter the genre of your world").addText(
      (text) => text.setPlaceholder("Fantasy, Sci-Fi, Contemporary, etc.").setValue(this.genre).onChange((value) => {
        this.genre = value;
      }).inputEl.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          this.submit();
        }
      })
    );
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const createButton = buttonContainer.createEl("button", {
      text: "Create",
      cls: "mod-cta"
    });
    createButton.addEventListener("click", () => this.submit());
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.addEventListener("click", () => this.close());
    const nameInput = contentEl.querySelector("input");
    if (nameInput) {
      nameInput.focus();
    }
  }
  submit() {
    const trimmedName = this.name.trim();
    const trimmedDescription = this.description.trim();
    const trimmedGenre = this.genre.trim();
    if (!trimmedName) {
      new import_obsidian4.Notice("Please enter a world name", 3e3);
      return;
    }
    if (!trimmedGenre) {
      new import_obsidian4.Notice("Please enter a genre", 3e3);
      return;
    }
    this.close();
    this.onSubmit(trimmedName, trimmedDescription, trimmedGenre);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/CreateStoryModal.ts
var CreateStoryModal = class extends import_obsidian5.Modal {
  constructor(app, plugin, onSubmit) {
    super(app);
    this.title = "";
    this.selectedWorldId = "";
    this.shouldSync = true;
    this.worlds = [];
    this.plugin = plugin;
    this.onSubmit = onSubmit;
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Create New Story" });
    try {
      this.worlds = await this.plugin.apiClient.getWorlds();
    } catch (err) {
      console.error("Failed to load worlds:", err);
      this.worlds = [];
    }
    new import_obsidian5.Setting(contentEl).setName("Story Title").setDesc("Enter the title for your new story").addText(
      (text) => text.setPlaceholder("My New Story").setValue(this.title).onChange((value) => {
        this.title = value;
      }).inputEl.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          this.submit();
        }
      })
    );
    const worldOptions = {
      "": "No World"
    };
    for (const world of this.worlds) {
      worldOptions[world.id] = world.name;
    }
    worldOptions["__create_new__"] = "Create new world...";
    new import_obsidian5.Setting(contentEl).setName("World").setDesc("Select a world for this story (optional)").addDropdown((dropdown) => {
      for (const [value, label] of Object.entries(worldOptions)) {
        dropdown.addOption(value, label);
      }
      dropdown.setValue(this.selectedWorldId || "");
      dropdown.onChange(async (value) => {
        if (value === "__create_new__") {
          new CreateWorldModal(this.app, async (name, description, genre) => {
            try {
              const newWorld = await this.plugin.apiClient.createWorld(name, description, genre);
              this.worlds.push(newWorld);
              this.onClose();
              this.onOpen();
              this.selectedWorldId = newWorld.id;
            } catch (err) {
              const errorMessage = err instanceof Error ? err.message : "Failed to create world";
              new import_obsidian5.Notice(`Error: ${errorMessage}`, 5e3);
            }
          }).open();
        } else {
          this.selectedWorldId = value;
        }
      });
    });
    new import_obsidian5.Setting(contentEl).setName("Sync to Obsidian").setDesc("Automatically sync the story files to your vault after creation").addToggle(
      (toggle) => toggle.setValue(this.shouldSync).onChange((value) => {
        this.shouldSync = value;
      })
    );
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const createButton = buttonContainer.createEl("button", {
      text: "Create",
      cls: "mod-cta"
    });
    createButton.addEventListener("click", () => this.submit());
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.addEventListener("click", () => this.close());
    const titleInput = contentEl.querySelector("input");
    if (titleInput) {
      titleInput.focus();
    }
  }
  submit() {
    const trimmedTitle = this.title.trim();
    if (!trimmedTitle) {
      new import_obsidian5.Notice("Please enter a story title", 3e3);
      return;
    }
    this.close();
    const worldId = this.selectedWorldId && this.selectedWorldId !== "__create_new__" ? this.selectedWorldId : void 0;
    this.onSubmit(trimmedTitle, worldId, this.shouldSync);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/ExtractConfigModal.ts
var import_obsidian6 = require("obsidian");
var ENTITY_TYPE_OPTIONS = [
  { value: "character", label: "Character" },
  { value: "location", label: "Location" },
  { value: "artefact", label: "Artefact" },
  { value: "faction", label: "Faction" },
  { value: "event", label: "Event" }
];
var ExtractConfigModal = class _ExtractConfigModal extends import_obsidian6.Modal {
  constructor(app, defaultTypes, defaultIncludeRelations) {
    super(app);
    this.resolve = null;
    this.selectedTypes = /* @__PURE__ */ new Set();
    this.includeRelations = true;
    defaultTypes.forEach((type2) => this.selectedTypes.add(type2));
    this.includeRelations = defaultIncludeRelations;
  }
  static open(app, defaultTypes, defaultIncludeRelations) {
    return new Promise((resolve) => {
      const modal = new _ExtractConfigModal(
        app,
        defaultTypes,
        defaultIncludeRelations
      );
      modal.resolve = resolve;
      modal.open();
    });
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h3", { text: "Extract Configuration" });
    contentEl.createEl("p", {
      text: "Choose which entity types to extract and whether to include relations."
    });
    const typeBlock = contentEl.createDiv({ cls: "story-engine-extract-config" });
    typeBlock.createEl("div", {
      text: "Entity types",
      cls: "story-engine-extract-label"
    });
    ENTITY_TYPE_OPTIONS.forEach((option) => {
      const row = typeBlock.createDiv({
        cls: "story-engine-extract-config-row"
      });
      const checkbox = row.createEl("input", {
        type: "checkbox"
      });
      checkbox.checked = this.selectedTypes.has(option.value);
      checkbox.onchange = () => {
        if (checkbox.checked) {
          this.selectedTypes.add(option.value);
        } else {
          this.selectedTypes.delete(option.value);
        }
      };
      row.createEl("span", { text: option.label });
    });
    const relationRow = contentEl.createDiv({
      cls: "story-engine-extract-config-row"
    });
    const relationsCheckbox = relationRow.createEl("input", {
      type: "checkbox"
    });
    relationsCheckbox.checked = this.includeRelations;
    relationsCheckbox.onchange = () => {
      this.includeRelations = relationsCheckbox.checked;
    };
    relationRow.createEl("span", { text: "Include relations" });
    const buttonContainer = contentEl.createDiv({
      cls: "modal-button-container"
    });
    const submitButton = buttonContainer.createEl("button", {
      text: "Start Extraction",
      cls: "mod-cta"
    });
    submitButton.onclick = () => this.submit();
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.onclick = () => this.cancel();
  }
  submit() {
    const types = Array.from(this.selectedTypes);
    if (types.length === 0) {
      new import_obsidian6.Notice("Select at least one entity type.", 3e3);
      return;
    }
    if (this.resolve) {
      this.resolve({
        entityTypes: types,
        includeRelations: this.includeRelations
      });
    }
    this.close();
  }
  cancel() {
    if (this.resolve) {
      this.resolve(null);
    }
    this.close();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/sync/fileManager.ts
var import_obsidian7 = require("obsidian");
var FileManager = class {
  constructor(vault, baseFolder) {
    this.vault = vault;
    this.baseFolder = baseFolder;
  }
  // Expose vault for sync operations
  getVault() {
    return this.vault;
  }
  // Get the folder path for a specific story
  getStoryFolderPath(storyTitle) {
    const sanitized = this.sanitizeFolderName(storyTitle);
    return `${this.baseFolder}/${sanitized}`;
  }
  // Sanitize folder/file names
  sanitizeFolderName(name) {
    return name.replace(/[<>:"/\\|?*]/g, "-").replace(/\s+/g, " ").trim();
  }
  // Generate frontmatter with Obsidian tags
  generateFrontmatter(baseFields, extraFields, options) {
    const fields = { ...baseFields };
    if (extraFields) {
      Object.assign(fields, extraFields);
    }
    const tags = [];
    if (options) {
      tags.push(`story-engine/${options.entityType}`);
      if (options.storyName) {
        const sanitizedStoryName = this.sanitizeFolderName(options.storyName).toLowerCase().replace(/\s+/g, "-");
        tags.push(`story/${sanitizedStoryName}`);
      }
      if (options.date) {
        const date = typeof options.date === "string" ? new Date(options.date) : options.date;
        if (!isNaN(date.getTime())) {
          const year = date.getFullYear();
          const month = String(date.getMonth() + 1).padStart(2, "0");
          const day = String(date.getDate()).padStart(2, "0");
          tags.push(`date/${year}/${month}/${day}`);
        }
      }
    }
    const lines = ["---"];
    for (const [key, value] of Object.entries(fields)) {
      if (value === null || value === void 0) {
        lines.push(`${key}: null`);
      } else if (typeof value === "string") {
        const escaped = value.replace(/"/g, '\\"');
        if (value.includes(":") || value.includes("\n") || value.includes('"')) {
          lines.push(`${key}: "${escaped}"`);
        } else {
          lines.push(`${key}: ${escaped}`);
        }
      } else {
        lines.push(`${key}: ${value}`);
      }
    }
    if (tags.length > 0) {
      lines.push(`tags:`);
      for (const tag of tags) {
        lines.push(`  - ${tag}`);
      }
    }
    lines.push("---", "");
    return lines.join("\n");
  }
  // Ensure folder exists
  async ensureFolderExists(path) {
    const folder = this.vault.getAbstractFileByPath(path);
    if (!folder) {
      await this.vault.createFolder(path);
    }
  }
  // Write story metadata (story.md)
  async writeStoryMetadata(story, folderPath, chapters, orphanScenes, orphanBeats, chapterContentData) {
    var _a, _b;
    await this.ensureFolderExists(folderPath);
    const baseFields = {
      id: story.id,
      title: story.title,
      status: story.status,
      version: story.version_number,
      root_story_id: story.root_story_id,
      previous_version_id: story.previous_story_id,
      created_at: story.created_at,
      updated_at: story.updated_at
    };
    const frontmatter = this.generateFrontmatter(baseFields, void 0, {
      entityType: "story",
      storyName: story.title,
      date: story.created_at
    });
    let content = `${frontmatter}
# ${story.title}

Version: ${story.version_number}
Status: ${story.status}

`;
    const temporaryChapterTitles = ["Story Prose", "Scene-Level Prose", "Beat-Level Prose"];
    const filteredChapters = (chapters == null ? void 0 : chapters.filter(
      (c) => !temporaryChapterTitles.includes(c.chapter.title) && c.chapter.number < 9e3
    )) || [];
    if (filteredChapters.length > 0) {
      content += `## Chapters, Scenes & Beats

`;
      content += `> [!info] How to use this list
`;
      content += `> - **Create new item**: Add a line with \`-\` followed by the text
`;
      content += `>   - **Chapter**: No indentation (level 0)
`;
      content += `>   - **Scene**: Use 1 tab indentation (inside a chapter)
`;
      content += `>   - **Beat**: Use 2 tabs indentation (inside a scene)
`;
      content += `> - **Reorder**: Move items up/down to change order
`;
      content += `> - **Links**: Use \`[[link-name|text]]\` to create links to existing files
`;
      content += `> - **Format**:
`;
      content += `>   - **Chapter**:
`;
      content += `>     - Complete: \`Chapter N: title\`
`;
      content += `>     - Simplified: \`title\`
`;
      content += `>   - **Scene**:
`;
      content += `>     - Complete: \`Scene N: goal - timeRef\`
`;
      content += `>     - Simplified:
`;
      content += `>       - \`goal - timeRef\`
`;
      content += `>       - \`goal\`
`;
      content += `>   - **Beat**:
`;
      content += `>     - Complete: \`Beat N: intent -> outcome\`
`;
      content += `>     - Simplified:
`;
      content += `>       - \`intent -> outcome\`
`;
      content += `>       - \`intent\`
`;
      content += `> - **Markers**: \`-\` indicates no associated prose, \`+\` indicates associated prose

`;
      for (const chapterWithContent of filteredChapters) {
        const chapter = chapterWithContent.chapter;
        const chapterFileName = `Chapter-${chapter.number}.md`;
        const chapterLinkName = chapterFileName.replace(/\.md$/, "");
        content += `- [[${chapterLinkName}|Chapter ${chapter.number}: ${chapter.title}]]
`;
        for (const { scene, beats } of chapterWithContent.scenes) {
          const sceneFileName = this.generateSceneFileName(scene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
          content += `	- [[${sceneLinkName}|Scene ${scene.order_num}: ${sceneDisplayText}]]
`;
          for (const beat of beats) {
            const beatFileName = this.generateBeatFileName(beat);
            const beatLinkName = beatFileName.replace(/\.md$/, "");
            const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
            content += `		- [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
          }
        }
      }
      content += `
`;
    }
    if (orphanScenes && orphanScenes.length > 0) {
      content += `## Orphan Scenes

`;
      content += `> [!info] Scenes without a chapter
`;
      content += `> These scenes are not associated with any chapter. You can:
`;
      content += `> - **Reorder**: Move items up/down to change order
`;
      content += `> - **Links**: Use \`[[link-name|text]]\` to create links to existing files
`;
      content += `> - **Format**:
`;
      content += `>   - Complete: \`Scene N: goal - timeRef\`
`;
      content += `>   - Simplified:
`;
      content += `>     - \`goal - timeRef\`
`;
      content += `>     - \`goal\`
`;
      content += `> - **Markers**: \`-\` indicates no associated prose, \`+\` indicates associated prose

`;
      for (const { scene, beats } of orphanScenes) {
        const sceneFileName = this.generateSceneFileName(scene);
        const sceneLinkName = sceneFileName.replace(/\.md$/, "");
        const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
        content += `- [[${sceneLinkName}|Scene ${scene.order_num}: ${sceneDisplayText}]]
`;
        for (const beat of beats) {
          const beatFileName = this.generateBeatFileName(beat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
          content += `	- [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
        }
      }
      content += `
`;
    }
    if (orphanBeats && orphanBeats.length > 0) {
      content += `## Orphan Beats

`;
      content += `> [!info] Beats without a scene
`;
      content += `> These beats are not associated with any scene. You can:
`;
      content += `> - **Reorder**: Move items up/down to change order
`;
      content += `> - **Links**: Use \`[[link-name|text]]\` to create links to existing files
`;
      content += `> - **Format**:
`;
      content += `>   - Complete: \`Beat N: intent -> outcome\`
`;
      content += `>   - Simplified:
`;
      content += `>     - \`intent -> outcome\`
`;
      content += `>     - \`intent\`
`;
      content += `> - **Markers**: \`-\` indicates no associated prose, \`+\` indicates associated prose

`;
      for (const beat of orphanBeats) {
        const beatFileName = this.generateBeatFileName(beat);
        const beatLinkName = beatFileName.replace(/\.md$/, "");
        const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
        content += `- [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
      }
      content += `
`;
    }
    content += `# Story: ${story.title}

`;
    if (filteredChapters.length > 0) {
      for (const chapterWithContent of filteredChapters) {
        const chapter = chapterWithContent.chapter;
        const chapterFileName = `Chapter-${chapter.number}.md`;
        const chapterLinkName = chapterFileName.replace(/\.md$/, "");
        content += `## Chapter ${chapter.number}: [[${chapterLinkName}|${chapter.title}]]

`;
        const contentData = chapterContentData == null ? void 0 : chapterContentData.get(chapter.id);
        let organization = null;
        if (contentData) {
          organization = this.organizeContentBlocks(
            contentData.contentBlocks,
            contentData.contentBlockRefs,
            chapterWithContent.scenes
          );
          for (const contentBlock of organization.chapterOnly) {
            const fileName = this.generateContentBlockFileName(contentBlock);
            const linkName = fileName.replace(/\.md$/, "");
            content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
          }
        }
        for (const { scene, beats } of chapterWithContent.scenes) {
          const sceneFileName = this.generateSceneFileName(scene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
          content += `### Scene: [[${sceneLinkName}|${sceneDisplayText}]]

`;
          if (organization) {
            const sceneContentBlocks = ((_a = organization.byScene.get(scene.id)) == null ? void 0 : _a.contentBlocks) || [];
            for (const contentBlock of sceneContentBlocks) {
              const fileName = this.generateContentBlockFileName(contentBlock);
              const linkName = fileName.replace(/\.md$/, "");
              content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
            }
          }
          for (const beat of beats) {
            const beatFileName = this.generateBeatFileName(beat);
            const beatLinkName = beatFileName.replace(/\.md$/, "");
            const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
            content += `#### Beat: [[${beatLinkName}|${beatDisplayText}]]

`;
            if (organization) {
              const beatContentBlocks = ((_b = organization.byBeat.get(beat.id)) == null ? void 0 : _b.contentBlocks) || [];
              for (const contentBlock of beatContentBlocks) {
                const fileName = this.generateContentBlockFileName(contentBlock);
                const linkName = fileName.replace(/\.md$/, "");
                content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
              }
            }
          }
        }
      }
    }
    if (orphanScenes && orphanScenes.length > 0) {
      for (const { scene, beats } of orphanScenes) {
        const sceneFileName = this.generateSceneFileName(scene);
        const sceneLinkName = sceneFileName.replace(/\.md$/, "");
        const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
        content += `### Scene: [[${sceneLinkName}|${sceneDisplayText}]]

`;
        for (const beat of beats) {
          const beatFileName = this.generateBeatFileName(beat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
          content += `#### Beat: [[${beatLinkName}|${beatDisplayText}]]

`;
        }
      }
    }
    const filePath = `${folderPath}/story.md`;
    const file = this.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian7.TFile) {
      await this.vault.modify(file, content);
    } else {
      await this.vault.create(filePath, content);
    }
  }
  // Write chapter file
  async writeChapterFile(chapterWithContent, filePath, storyName, contentBlocks, contentBlockRefs, orphanScenes) {
    var _a, _b, _c, _d;
    const { chapter, scenes } = chapterWithContent;
    const baseFields = {
      id: chapter.id,
      story_id: chapter.story_id,
      number: chapter.number,
      title: chapter.title,
      status: chapter.status,
      created_at: chapter.created_at,
      updated_at: chapter.updated_at
    };
    const frontmatter = this.generateFrontmatter(baseFields, void 0, {
      entityType: "chapter",
      storyName,
      date: chapter.created_at
    });
    let content = `${frontmatter}
# ${chapter.title}

`;
    const organization = this.organizeContentBlocks(
      contentBlocks || [],
      contentBlockRefs || [],
      scenes
    );
    content += `## Scenes & Beats

`;
    content += `> [!info] How to use this list
`;
    content += `> - **Create new item**: Add a line with \`-\` followed by the text
`;
    content += `>   - **Scene**: No indentation (level 0)
`;
    content += `>   - **Beat**: Use 1 tab indentation (inside a scene)
`;
    content += `> - **Reorder**: Move items up/down to change order
`;
    content += `> - **Links**: Use \`[[link-name|text]]\` to create links to existing files
`;
    content += `> - **Format**:
`;
    content += `>   - **Scene**:
`;
    content += `>     - Complete: \`Scene N: goal - timeRef\`
`;
    content += `>     - Simplified:
`;
    content += `>       - \`goal - timeRef\`
`;
    content += `>       - \`goal\`
`;
    content += `>   - **Beat**:
`;
    content += `>     - Complete: \`Beat N: intent -> outcome\`
`;
    content += `>     - Simplified:
`;
    content += `>       - \`intent -> outcome\`
`;
    content += `>       - \`intent\`
`;
    content += `> - **Markers**: \`-\` indicates no associated prose, \`+\` indicates associated prose
`;
    content += `> - **Orphan scenes** (without chapter) are shown below for easy association

`;
    for (const { scene, beats } of scenes) {
      const sceneFileName = this.generateSceneFileName(scene);
      const sceneLinkName = sceneFileName.replace(/\.md$/, "");
      const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
      const sceneContentBlocks = ((_a = organization.byScene.get(scene.id)) == null ? void 0 : _a.contentBlocks) || [];
      const hasSceneContent = sceneContentBlocks.length > 0;
      const sceneMarker = hasSceneContent ? "+" : "-";
      content += `${sceneMarker} [[${sceneLinkName}|Scene ${scene.order_num}: ${sceneDisplayText}]]
`;
      for (const beat of beats) {
        const beatFileName = this.generateBeatFileName(beat);
        const beatLinkName = beatFileName.replace(/\.md$/, "");
        const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
        const beatContentBlocks = ((_b = organization.byBeat.get(beat.id)) == null ? void 0 : _b.contentBlocks) || [];
        const hasBeatContent = beatContentBlocks.length > 0;
        const beatMarker = hasBeatContent ? "+" : "-";
        content += `	${beatMarker} [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
      }
    }
    if (orphanScenes && orphanScenes.length > 0) {
      content += `
`;
      content += `> [!info] Orphan Scenes (not yet associated with this chapter)
`;
      content += `> You can associate these scenes with this chapter by moving them here.

`;
      for (const { scene, beats } of orphanScenes) {
        const sceneFileName = this.generateSceneFileName(scene);
        const sceneLinkName = sceneFileName.replace(/\.md$/, "");
        const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
        content += `- [[${sceneLinkName}|Scene ${scene.order_num}: ${sceneDisplayText}]]
`;
        for (const beat of beats) {
          const beatFileName = this.generateBeatFileName(beat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
          content += `	- [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
        }
      }
    }
    content += `
`;
    content += `## Chapter ${chapter.number}: ${chapter.title}

`;
    for (const contentBlock of organization.chapterOnly) {
      const fileName = this.generateContentBlockFileName(contentBlock);
      const linkName = fileName.replace(/\.md$/, "");
      content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
    }
    for (const { scene, beats } of scenes) {
      const sceneFileName = this.generateSceneFileName(scene);
      const sceneLinkName = sceneFileName.replace(/\.md$/, "");
      const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
      content += `## Scene: [[${sceneLinkName}|${sceneDisplayText}]]

`;
      const sceneContentBlocks = ((_c = organization.byScene.get(scene.id)) == null ? void 0 : _c.contentBlocks) || [];
      for (const contentBlock of sceneContentBlocks) {
        const fileName = this.generateContentBlockFileName(contentBlock);
        const linkName = fileName.replace(/\.md$/, "");
        content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
      }
      for (const beat of beats) {
        const beatFileName = this.generateBeatFileName(beat);
        const beatLinkName = beatFileName.replace(/\.md$/, "");
        const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
        content += `### Beat: [[${beatLinkName}|${beatDisplayText}]]

`;
        const beatContentBlocks = ((_d = organization.byBeat.get(beat.id)) == null ? void 0 : _d.contentBlocks) || [];
        for (const contentBlock of beatContentBlocks) {
          const fileName = this.generateContentBlockFileName(contentBlock);
          const linkName = fileName.replace(/\.md$/, "");
          content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
        }
      }
    }
    const file = this.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian7.TFile) {
      await this.vault.modify(file, content);
    } else {
      await this.vault.create(filePath, content);
    }
  }
  // Read story metadata
  async readStoryMetadata(folderPath) {
    const filePath = `${folderPath}/story.md`;
    const file = this.vault.getAbstractFileByPath(filePath);
    if (!(file instanceof import_obsidian7.TFile)) {
      throw new Error(`Story metadata file not found: ${filePath}`);
    }
    const content = await this.vault.read(file);
    const frontmatter = this.parseFrontmatter(content);
    return {
      frontmatter: {
        id: frontmatter.id,
        title: frontmatter.title,
        status: frontmatter.status,
        version: parseInt(frontmatter.version),
        root_story_id: frontmatter.root_story_id,
        previous_version_id: frontmatter.previous_version_id || null,
        created_at: frontmatter.created_at,
        updated_at: frontmatter.updated_at
      },
      content: content.split("---").slice(2).join("---").trim()
    };
  }
  // Parse YAML frontmatter
  parseFrontmatter(content) {
    const match = content.match(/^---\n([\s\S]*?)\n---/);
    if (!match) {
      return {};
    }
    const frontmatterText = match[1];
    const result = {};
    for (const line of frontmatterText.split("\n")) {
      const colonIndex = line.indexOf(":");
      if (colonIndex > 0) {
        const key = line.slice(0, colonIndex).trim();
        const value = line.slice(colonIndex + 1).trim().replace(/^["']|["']$/g, "");
        result[key] = value;
      }
    }
    return result;
  }
  // Copy story folder to versions folder
  async createVersionSnapshot(storyFolderPath, versionNumber) {
    const versionsPath = `${storyFolderPath}/versions`;
    await this.ensureFolderExists(versionsPath);
    const versionFolderPath = `${versionsPath}/v${versionNumber}`;
    const existingVersion = this.vault.getAbstractFileByPath(versionFolderPath);
    if (existingVersion) {
      console.log(`Version v${versionNumber} already exists, skipping snapshot`);
      return;
    }
    await this.ensureFolderExists(versionFolderPath);
    const storyFolder = this.vault.getAbstractFileByPath(storyFolderPath);
    if (!(storyFolder instanceof import_obsidian7.TFolder)) {
      throw new Error(`Story folder not found: ${storyFolderPath}`);
    }
    await this.copyFolderContents(storyFolder, versionFolderPath, "versions");
    console.log(`Created version snapshot: v${versionNumber}`);
  }
  // Recursively copy folder contents
  async copyFolderContents(sourceFolder, destPath, excludeFolderName) {
    for (const child of sourceFolder.children) {
      if (child instanceof import_obsidian7.TFile) {
        const relativePath = child.path.replace(sourceFolder.path + "/", "");
        const destFilePath = `${destPath}/${relativePath}`;
        const content = await this.vault.read(child);
        await this.vault.create(destFilePath, content);
      } else if (child instanceof import_obsidian7.TFolder) {
        if (excludeFolderName && child.name === excludeFolderName) {
          continue;
        }
        const relativePath = child.path.replace(sourceFolder.path + "/", "");
        const destFolderPath = `${destPath}/${relativePath}`;
        await this.ensureFolderExists(destFolderPath);
        await this.copyFolderContents(child, destFolderPath, excludeFolderName);
      }
    }
  }
  // Write scene file
  async writeSceneFile(sceneWithBeats, filePath, storyName, contentBlocks, orphanBeats) {
    var _a;
    const { scene, beats } = sceneWithBeats;
    const baseFields = {
      id: scene.id,
      story_id: scene.story_id,
      chapter_id: (_a = scene.chapter_id) != null ? _a : null,
      order_num: scene.order_num,
      time_ref: scene.time_ref || "",
      goal: scene.goal || "",
      created_at: scene.created_at,
      updated_at: scene.updated_at
    };
    const extraFields = {};
    if (scene.pov_character_id) {
      extraFields.pov_character_id = scene.pov_character_id;
    }
    if (scene.location_id) {
      extraFields.location_id = scene.location_id;
    }
    const frontmatter = this.generateFrontmatter(baseFields, extraFields, {
      entityType: "scene",
      storyName,
      date: scene.created_at
    });
    let content = `${frontmatter}
# Scene ${scene.order_num}

`;
    if (scene.goal) {
      content += `**Goal:** ${scene.goal}

`;
    }
    if (scene.time_ref) {
      content += `**Time:** ${scene.time_ref}

`;
    }
    if (beats.length > 0) {
      content += `## Beats

`;
      content += `> [!info] How to use this list
`;
      content += `> - **Create new item**: Add a line with \`-\` followed by the text
`;
      content += `>   - **Beat**: No indentation (level 0)
`;
      content += `> - **Reorder**: Move items up/down to change order
`;
      content += `> - **Links**: Use \`[[link-name|text]]\` to create links to existing files
`;
      content += `> - **Format**:
`;
      content += `>   - **Beat**:
`;
      content += `>     - Complete: \`Beat N: intent -> outcome\`
`;
      content += `>     - Simplified:
`;
      content += `>       - \`intent -> outcome\`
`;
      content += `>       - \`intent\`
`;
      content += `> - **Markers**: \`-\` indicates no associated prose, \`+\` indicates associated prose
`;
      content += `> - **Orphan beats** (without scene) are shown below for easy association

`;
      const beatsWithProse = /* @__PURE__ */ new Set();
      if (contentBlocks) {
        for (const contentBlock of contentBlocks) {
        }
      }
      for (const beat of beats.sort((a, b) => a.order_num - b.order_num)) {
        const beatFileName = this.generateBeatFileName(beat);
        const beatLinkName = beatFileName.replace(/\.md$/, "");
        const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
        const hasBeatProse = beatsWithProse.has(beat.id);
        const beatMarker = hasBeatProse ? "+" : "-";
        content += `${beatMarker} [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
      }
      if (orphanBeats && orphanBeats.length > 0) {
        content += `
`;
        content += `> [!info] Orphan Beats (not yet associated with this scene)
`;
        content += `> You can associate these beats with this scene by moving them here.

`;
        for (const beat of orphanBeats) {
          const beatFileName = this.generateBeatFileName(beat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
          content += `- [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]
`;
        }
      }
      content += `
`;
    }
    const sceneFileName = this.generateSceneFileName(scene);
    const sceneLinkName = sceneFileName.replace(/\.md$/, "");
    const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
    content += `## Scene: [[${sceneLinkName}|${sceneDisplayText}]]

`;
    if (contentBlocks && contentBlocks.length > 0) {
      const sortedContentBlocks = [...contentBlocks].sort((a, b) => (a.order_num || 0) - (b.order_num || 0));
      for (const contentBlock of sortedContentBlocks) {
        const fileName = this.generateContentBlockFileName(contentBlock);
        const linkName = fileName.replace(/\.md$/, "");
        content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
      }
    }
    for (const beat of beats.sort((a, b) => a.order_num - b.order_num)) {
      const beatFileName = this.generateBeatFileName(beat);
      const beatLinkName = beatFileName.replace(/\.md$/, "");
      const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
      content += `### Beat: [[${beatLinkName}|${beatDisplayText}]]

`;
    }
    const file = this.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian7.TFile) {
      await this.vault.modify(file, content);
    } else {
      await this.vault.create(filePath, content);
    }
  }
  // Write beat file
  async writeBeatFile(beat, filePath, storyName, contentBlocks) {
    const baseFields = {
      id: beat.id,
      scene_id: beat.scene_id,
      order_num: beat.order_num,
      type: beat.type,
      intent: beat.intent || "",
      outcome: beat.outcome || "",
      created_at: beat.created_at,
      updated_at: beat.updated_at
    };
    const frontmatter = this.generateFrontmatter(baseFields, void 0, {
      entityType: "beat",
      storyName,
      date: beat.created_at
    });
    let content = `${frontmatter}
# Beat ${beat.order_num} - ${beat.type}

`;
    if (beat.intent) {
      content += `**Intent:** ${beat.intent}

`;
    }
    if (beat.outcome) {
      content += `**Outcome:** ${beat.outcome}

`;
    }
    const beatFileName = this.generateBeatFileName(beat);
    const beatLinkName = beatFileName.replace(/\.md$/, "");
    const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
    content += `## Beat: [[${beatLinkName}|${beatDisplayText}]]

`;
    if (contentBlocks && contentBlocks.length > 0) {
      const sortedContentBlocks = [...contentBlocks].sort((a, b) => (a.order_num || 0) - (b.order_num || 0));
      for (const contentBlock of sortedContentBlocks) {
        const fileName = this.generateContentBlockFileName(contentBlock);
        const linkName = fileName.replace(/\.md$/, "");
        content += `[[${linkName}|${contentBlock.content.substring(0, 50)}...]]

`;
      }
    }
    const file = this.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian7.TFile) {
      await this.vault.modify(file, content);
    } else {
      await this.vault.create(filePath, content);
    }
  }
  // List all chapter files in a story folder
  async listChapterFiles(storyFolderPath) {
    const chaptersPath = `${storyFolderPath}/00-chapters`;
    const folder = this.vault.getAbstractFileByPath(chaptersPath);
    if (!(folder instanceof import_obsidian7.TFolder)) {
      return [];
    }
    const chapterFiles = [];
    for (const child of folder.children) {
      if (child instanceof import_obsidian7.TFile && child.extension === "md") {
        chapterFiles.push(child.path);
      }
    }
    return chapterFiles.sort();
  }
  // List all scene files in a chapter folder
  async listSceneFiles(chapterFolderPath) {
    const scenesPath = `${chapterFolderPath}/01-scenes`;
    const folder = this.vault.getAbstractFileByPath(scenesPath);
    if (!(folder instanceof import_obsidian7.TFolder)) {
      return [];
    }
    const sceneFiles = [];
    for (const child of folder.children) {
      if (child instanceof import_obsidian7.TFile && child.extension === "md") {
        sceneFiles.push(child.path);
      }
    }
    return sceneFiles.sort();
  }
  // List all scene files in a story folder
  async listStorySceneFiles(storyFolderPath) {
    const scenesPath = `${storyFolderPath}/01-scenes`;
    const folder = this.vault.getAbstractFileByPath(scenesPath);
    if (!(folder instanceof import_obsidian7.TFolder)) {
      return [];
    }
    const sceneFiles = [];
    for (const child of folder.children) {
      if (child instanceof import_obsidian7.TFile && child.extension === "md") {
        sceneFiles.push(child.path);
      }
    }
    return sceneFiles.sort();
  }
  // List all beat files in a story folder
  async listStoryBeatFiles(storyFolderPath) {
    const beatsPath = `${storyFolderPath}/02-beats`;
    const folder = this.vault.getAbstractFileByPath(beatsPath);
    if (!(folder instanceof import_obsidian7.TFolder)) {
      return [];
    }
    const beatFiles = [];
    for (const child of folder.children) {
      if (child instanceof import_obsidian7.TFile && child.extension === "md") {
        beatFiles.push(child.path);
      }
    }
    return beatFiles.sort();
  }
  // List all beat files in a scene folder
  async listBeatFiles(sceneFolderPath) {
    const beatsPath = `${sceneFolderPath}/02-beats`;
    const folder = this.vault.getAbstractFileByPath(beatsPath);
    if (!(folder instanceof import_obsidian7.TFolder)) {
      return [];
    }
    const beatFiles = [];
    for (const child of folder.children) {
      if (child instanceof import_obsidian7.TFile && child.extension === "md") {
        beatFiles.push(child.path);
      }
    }
    return beatFiles.sort();
  }
  // Get the subfolder name for a content block type
  getContentTypeFolder(type2) {
    const typeFolders = {
      text: "00-texts",
      image: "01-images",
      video: "02-videos",
      audio: "03-audios",
      embed: "04-embeds",
      link: "05-links"
    };
    return typeFolders[type2] || "99-other";
  }
  // Get the full folder path for content blocks of a specific type
  getContentBlockFolderPath(storyFolderPath, type2) {
    const typeFolder = this.getContentTypeFolder(type2);
    return `${storyFolderPath}/03-contents/${typeFolder}`;
  }
  // Generate filename for content block based on date and content preview
  generateContentBlockFileName(contentBlock) {
    const date = new Date(contentBlock.created_at);
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    const hours = String(date.getHours()).padStart(2, "0");
    const minutes = String(date.getMinutes()).padStart(2, "0");
    const dateStr = `${year}-${month}-${day}T${hours}-${minutes}`;
    let textPart;
    const type2 = contentBlock.type || "text";
    if (type2 === "text") {
      textPart = contentBlock.content.substring(0, 30).trim().replace(/[<>:"/\\|?*\n\r\t]/g, "-").replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "").toLowerCase() || "content";
    } else if (type2 === "image" || type2 === "video" || type2 === "audio") {
      const meta = contentBlock.metadata || {};
      textPart = (meta.alt_text || meta.caption || meta.title || type2).substring(0, 30).trim().replace(/[<>:"/\\|?*\n\r\t]/g, "-").replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "").toLowerCase();
    } else if (type2 === "embed") {
      const meta = contentBlock.metadata || {};
      textPart = (meta.provider || meta.title || "embed").substring(0, 30).trim().replace(/[<>:"/\\|?*\n\r\t]/g, "-").replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "").toLowerCase();
    } else if (type2 === "link") {
      const meta = contentBlock.metadata || {};
      textPart = (meta.title || meta.site_name || "link").substring(0, 30).trim().replace(/[<>:"/\\|?*\n\r\t]/g, "-").replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "").toLowerCase();
    } else {
      textPart = "content";
    }
    return `${dateStr}_${textPart}.md`;
  }
  // Organize content blocks by their associations (chapter, scene, beat)
  organizeContentBlocks(contentBlocks, contentBlockRefs, scenes) {
    const organization = {
      chapterOnly: [],
      byScene: /* @__PURE__ */ new Map(),
      byBeat: /* @__PURE__ */ new Map()
    };
    const contentBlockRefsByContentBlock = /* @__PURE__ */ new Map();
    for (const ref of contentBlockRefs) {
      if (!contentBlockRefsByContentBlock.has(ref.content_block_id)) {
        contentBlockRefsByContentBlock.set(ref.content_block_id, []);
      }
      contentBlockRefsByContentBlock.get(ref.content_block_id).push(ref);
    }
    const sceneMap = /* @__PURE__ */ new Map();
    const beatMap = /* @__PURE__ */ new Map();
    for (const { scene, beats } of scenes) {
      sceneMap.set(scene.id, scene);
      for (const beat of beats) {
        beatMap.set(beat.id, beat);
      }
    }
    const sortedContentBlocks = [...contentBlocks].sort((a, b) => (a.order_num || 0) - (b.order_num || 0));
    for (const contentBlock of sortedContentBlocks) {
      const refs = contentBlockRefsByContentBlock.get(contentBlock.id) || [];
      const sceneRef = refs.find((r) => r.entity_type === "scene");
      const beatRef = refs.find((r) => r.entity_type === "beat");
      if (beatRef && beatMap.has(beatRef.entity_id)) {
        const beat = beatMap.get(beatRef.entity_id);
        if (!organization.byBeat.has(beat.id)) {
          organization.byBeat.set(beat.id, { beat, contentBlocks: [] });
        }
        organization.byBeat.get(beat.id).contentBlocks.push(contentBlock);
      } else if (sceneRef && sceneMap.has(sceneRef.entity_id)) {
        const scene = sceneMap.get(sceneRef.entity_id);
        if (!organization.byScene.has(scene.id)) {
          organization.byScene.set(scene.id, { scene, contentBlocks: [] });
        }
        organization.byScene.get(scene.id).contentBlocks.push(contentBlock);
      } else {
        organization.chapterOnly.push(contentBlock);
      }
    }
    return organization;
  }
  // Generate filename for scene based on date and goal
  generateSceneFileName(scene) {
    const date = new Date(scene.created_at);
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    const hours = String(date.getHours()).padStart(2, "0");
    const minutes = String(date.getMinutes()).padStart(2, "0");
    const dateStr = `${year}-${month}-${day}T${hours}-${minutes}`;
    const goalSanitized = (scene.goal || "scene").trim().replace(/[<>:"/\\|?*\n\r\t]/g, "-").replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "").toLowerCase();
    return `${dateStr}_${goalSanitized}.md`;
  }
  // Generate filename for beat based on date and intent
  generateBeatFileName(beat) {
    const date = new Date(beat.created_at);
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    const hours = String(date.getHours()).padStart(2, "0");
    const minutes = String(date.getMinutes()).padStart(2, "0");
    const dateStr = `${year}-${month}-${day}T${hours}-${minutes}`;
    const intentSanitized = (beat.intent || "beat").trim().replace(/[<>:"/\\|?*\n\r\t]/g, "-").replace(/\s+/g, "-").replace(/-+/g, "-").replace(/^-|-$/g, "").toLowerCase();
    return `${dateStr}_${intentSanitized}.md`;
  }
  // Write content block file
  async writeContentBlockFile(contentBlock, filePath, storyName) {
    const type2 = contentBlock.type || "text";
    const baseFields = {
      id: contentBlock.id,
      chapter_id: contentBlock.chapter_id || null,
      order_num: contentBlock.order_num || 0,
      type: type2,
      kind: contentBlock.kind,
      created_at: contentBlock.created_at,
      updated_at: contentBlock.updated_at
    };
    const meta = contentBlock.metadata || {};
    if (type2 === "text" && meta.word_count) {
      baseFields.word_count = meta.word_count;
    } else if (type2 === "image") {
      if (contentBlock.content && contentBlock.content.startsWith("http")) {
        baseFields.original_url = contentBlock.content;
      }
      if (meta.alt_text)
        baseFields.alt_text = meta.alt_text;
      if (meta.caption)
        baseFields.caption = meta.caption;
      if (meta.width)
        baseFields.width = meta.width;
      if (meta.height)
        baseFields.height = meta.height;
      if (meta.mime_type)
        baseFields.mime_type = meta.mime_type;
      if (meta.source)
        baseFields.source = meta.source;
      if (meta.author_name)
        baseFields.author_name = meta.author_name;
      if (meta.attribution)
        baseFields.attribution = meta.attribution;
      if (meta.attribution_url)
        baseFields.attribution_url = meta.attribution_url;
    } else if (type2 === "video" || type2 === "audio") {
      if (meta.provider)
        baseFields.provider = meta.provider;
      if (meta.video_id)
        baseFields.video_id = meta.video_id;
      if (meta.duration)
        baseFields.duration = meta.duration;
      if (meta.thumbnail_url)
        baseFields.thumbnail_url = meta.thumbnail_url;
    } else if (type2 === "embed") {
      if (meta.provider)
        baseFields.provider = meta.provider;
      if (meta.html)
        baseFields.embed_html = meta.html;
    } else if (type2 === "link") {
      if (meta.title)
        baseFields.link_title = meta.title;
      if (meta.description)
        baseFields.link_description = meta.description;
      if (meta.image_url)
        baseFields.link_image = meta.image_url;
      if (meta.site_name)
        baseFields.site_name = meta.site_name;
    }
    const frontmatter = this.generateFrontmatter(baseFields, void 0, {
      entityType: "content-block",
      storyName,
      date: contentBlock.created_at
    });
    let fileContent;
    if (type2 === "text") {
      fileContent = `${frontmatter}${contentBlock.content}`;
    } else if (type2 === "image") {
      let localImagePath = contentBlock.content || "";
      if (contentBlock.content && !contentBlock.content.startsWith("http")) {
        localImagePath = contentBlock.content;
      } else if (contentBlock.content) {
        try {
          localImagePath = await this.downloadImage(contentBlock.content, filePath, contentBlock.id);
        } catch (err) {
          console.error("Failed to download image:", err);
          localImagePath = contentBlock.content;
        }
      }
      const altText = meta.alt_text || "";
      fileContent = `${frontmatter}![${altText}](${localImagePath})`;
      if (meta.caption) {
        fileContent += `

*${meta.caption}*`;
      }
    } else if (type2 === "video") {
      fileContent = `${frontmatter}[Video](${contentBlock.content})`;
      if (meta.thumbnail_url) {
        fileContent += `

![Thumbnail](${meta.thumbnail_url})`;
      }
    } else if (type2 === "audio") {
      fileContent = `${frontmatter}[Audio](${contentBlock.content})`;
    } else if (type2 === "embed") {
      fileContent = `${frontmatter}${meta.html || contentBlock.content}`;
    } else if (type2 === "link") {
      const title = meta.title || contentBlock.content;
      fileContent = `${frontmatter}[${title}](${contentBlock.content})`;
      if (meta.description) {
        fileContent += `

${meta.description}`;
      }
    } else {
      fileContent = `${frontmatter}${contentBlock.content}`;
    }
    const file = this.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian7.TFile) {
      await this.vault.modify(file, fileContent);
    } else {
      await this.vault.create(filePath, fileContent);
    }
  }
  // Download image from URL and save locally (same folder as content block .md)
  async downloadImage(imageUrl, contentBlockFilePath, contentBlockId) {
    try {
      const response = await fetch(imageUrl);
      if (!response.ok) {
        throw new Error(`Failed to fetch image: ${response.statusText}`);
      }
      const blob = await response.blob();
      const arrayBuffer = await blob.arrayBuffer();
      let extension = "jpg";
      const contentType = response.headers.get("content-type");
      if (contentType) {
        if (contentType.includes("png"))
          extension = "png";
        else if (contentType.includes("gif"))
          extension = "gif";
        else if (contentType.includes("webp"))
          extension = "webp";
        else if (contentType.includes("svg"))
          extension = "svg";
      } else {
        const urlMatch = imageUrl.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i);
        if (urlMatch) {
          extension = urlMatch[1].toLowerCase();
        }
      }
      const contentBlockDir = contentBlockFilePath.substring(0, contentBlockFilePath.lastIndexOf("/"));
      const imageFileName = `${contentBlockId}.${extension}`;
      const imagePath = `${contentBlockDir}/${imageFileName}`;
      const existingFile = this.vault.getAbstractFileByPath(imagePath);
      if (existingFile instanceof import_obsidian7.TFile) {
        await this.vault.modifyBinary(existingFile, arrayBuffer);
      } else {
        await this.vault.createBinary(imagePath, arrayBuffer);
      }
      return imageFileName;
    } catch (err) {
      console.error("Error downloading image:", err);
      throw err;
    }
  }
  // Read content block from file
  async readContentBlockFromFile(filePath) {
    const file = this.vault.getAbstractFileByPath(filePath);
    if (!(file instanceof import_obsidian7.TFile)) {
      return null;
    }
    try {
      const fileContent = await this.vault.read(file);
      const frontmatter = this.parseFrontmatter(fileContent);
      const contentMatch = fileContent.match(/^---\n[\s\S]*?\n---\n([\s\S]*)$/);
      let blockContent = contentMatch ? contentMatch[1].trim() : "";
      if (!frontmatter.id) {
        return null;
      }
      const type2 = frontmatter.type || "text";
      const metadata = {};
      if (type2 === "image") {
        const imgMatch = blockContent.match(/!\[[^\]]*\]\(([^)]+)\)/);
        if (imgMatch) {
          blockContent = imgMatch[1];
          if (!blockContent.startsWith("http") && frontmatter.original_url) {
            blockContent = frontmatter.original_url;
          }
        }
      } else if (type2 === "video" || type2 === "audio" || type2 === "link") {
        const linkMatch = blockContent.match(/\[[^\]]*\]\(([^)]+)\)/);
        if (linkMatch) {
          blockContent = linkMatch[1];
        }
      }
      if (frontmatter.word_count)
        metadata.word_count = parseInt(frontmatter.word_count, 10);
      if (frontmatter.alt_text)
        metadata.alt_text = frontmatter.alt_text;
      if (frontmatter.caption)
        metadata.caption = frontmatter.caption;
      if (frontmatter.width)
        metadata.width = parseInt(frontmatter.width, 10);
      if (frontmatter.height)
        metadata.height = parseInt(frontmatter.height, 10);
      if (frontmatter.mime_type)
        metadata.mime_type = frontmatter.mime_type;
      if (frontmatter.source)
        metadata.source = frontmatter.source;
      if (frontmatter.author_name)
        metadata.author_name = frontmatter.author_name;
      if (frontmatter.attribution)
        metadata.attribution = frontmatter.attribution;
      if (frontmatter.attribution_url)
        metadata.attribution_url = frontmatter.attribution_url;
      if (frontmatter.provider)
        metadata.provider = frontmatter.provider;
      if (frontmatter.video_id)
        metadata.video_id = frontmatter.video_id;
      if (frontmatter.duration)
        metadata.duration = parseInt(frontmatter.duration, 10);
      if (frontmatter.thumbnail_url)
        metadata.thumbnail_url = frontmatter.thumbnail_url;
      if (frontmatter.embed_html)
        metadata.html = frontmatter.embed_html;
      if (frontmatter.link_title)
        metadata.title = frontmatter.link_title;
      if (frontmatter.link_description)
        metadata.description = frontmatter.link_description;
      if (frontmatter.link_image)
        metadata.image_url = frontmatter.link_image;
      if (frontmatter.site_name)
        metadata.site_name = frontmatter.site_name;
      return {
        id: frontmatter.id,
        chapter_id: frontmatter.chapter_id || null,
        order_num: parseInt(frontmatter.order_num || "0", 10),
        type: type2,
        kind: frontmatter.kind || "final",
        content: blockContent,
        metadata,
        created_at: frontmatter.created_at || "",
        updated_at: frontmatter.updated_at || ""
      };
    } catch (err) {
      console.error(`Failed to read content block from ${filePath}:`, err);
      return null;
    }
  }
  // List all content block files in a story folder (across all type subfolders)
  async listContentBlockFiles(storyFolderPath) {
    const contentsPath = `${storyFolderPath}/03-contents`;
    const folder = this.vault.getAbstractFileByPath(contentsPath);
    if (!(folder instanceof import_obsidian7.TFolder)) {
      return [];
    }
    const contentFiles = [];
    for (const child of folder.children) {
      if (child instanceof import_obsidian7.TFolder) {
        for (const file of child.children) {
          if (file instanceof import_obsidian7.TFile && file.extension === "md") {
            contentFiles.push(file.path);
          }
        }
      }
    }
    return contentFiles.sort();
  }
};

// src/sync/syncService.ts
var import_obsidian9 = require("obsidian");

// src/sync/contentBlockParser.ts
function parseHierarchicalProse(chapterContent) {
  const sections = [];
  const frontmatterMatch = chapterContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = chapterContent.substring(contentStart).trim();
  const chapterSectionMatch = bodyContent.match(/##\s+Chapter\s+\d+:\s+[^\n]+\s*\n+([\s\S]*?)(?=\n##\s+Chapter\s+\d+:|$)/);
  if (!chapterSectionMatch) {
    const chapterSectionMatchSameLine = bodyContent.match(/##\s+Chapter\s+\d+:\s+[^\n]+\s+([^\n]+)/);
    if (chapterSectionMatchSameLine) {
      const proseContent2 = chapterSectionMatchSameLine[1].trim();
      if (proseContent2.length > 0 && !proseContent2.startsWith("#")) {
        const paragraph = {
          content: proseContent2,
          linkName: null,
          originalOrder: 0
        };
        sections.push({
          type: "prose",
          prose: paragraph,
          originalOrder: 0
        });
      }
      return { sections };
    }
    return { sections: [] };
  }
  const proseContent = chapterSectionMatch[1].trim();
  const lines = proseContent.split(/\n/);
  let currentScene = null;
  let currentBeat = null;
  let order = 0;
  for (let i = 0; i < lines.length; i++) {
    const line = lines[i].trim();
    if (!line) {
      continue;
    }
    const sceneMatch = line.match(/^##\s+Scene:\s*(.+)$/);
    if (sceneMatch) {
      const sceneText = sceneMatch[1].trim();
      const parsedScene = parseSceneHeader(sceneText);
      parsedScene.originalOrder = order++;
      currentScene = parsedScene;
      currentBeat = null;
      sections.push({
        type: "scene",
        scene: parsedScene,
        originalOrder: parsedScene.originalOrder
      });
      continue;
    }
    const beatMatch = line.match(/^###\s+Beat:\s*(.+)$/);
    if (beatMatch) {
      const beatText = beatMatch[1].trim();
      const parsedBeat = parseBeatHeader(beatText);
      parsedBeat.originalOrder = order++;
      currentBeat = parsedBeat;
      sections.push({
        type: "beat",
        beat: parsedBeat,
        originalOrder: parsedBeat.originalOrder
      });
      continue;
    }
    if (line.startsWith("#") && !line.match(/^##\s+Scene:/) && !line.match(/^###\s+Beat:/)) {
      continue;
    }
    const proseMatch = line.match(/^\s*\[\[([^\|]+)\|([^\]]+)\]\]\s*$/);
    if (proseMatch) {
      const linkName = proseMatch[1].trim();
      const content = proseMatch[2].trim();
      const paragraph = {
        content,
        linkName,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
      continue;
    }
    if (line.length > 0 && !line.startsWith("#")) {
      const paragraph = {
        content: line,
        linkName: null,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
    }
  }
  return { sections };
}
function parseSceneHeader(text) {
  const linkMatch = text.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
  if (linkMatch) {
    const linkName = linkMatch[1].trim();
    const displayText = linkMatch[2].trim();
    const { goal: goal2, timeRef: timeRef2 } = parseSceneText(displayText);
    return {
      linkName,
      goal: goal2,
      timeRef: timeRef2,
      originalOrder: 0
      // Will be set by caller
    };
  }
  const simpleLinkMatch = text.match(/^\[\[([^\]]+)\]\]$/);
  if (simpleLinkMatch) {
    return {
      linkName: simpleLinkMatch[1].trim(),
      goal: "",
      timeRef: "",
      originalOrder: 0
    };
  }
  const { goal, timeRef } = parseSceneText(text);
  return {
    linkName: null,
    goal,
    timeRef,
    originalOrder: 0
  };
}
function parseSceneText(text) {
  const parts = text.split(/\s*-\s*/);
  if (parts.length >= 2) {
    return {
      goal: parts[0].trim(),
      timeRef: parts.slice(1).join(" - ").trim()
      // Join in case there are multiple "-"
    };
  }
  return {
    goal: text.trim(),
    timeRef: ""
  };
}
function parseBeatHeader(text) {
  const linkMatch = text.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
  if (linkMatch) {
    const linkName = linkMatch[1].trim();
    const displayText = linkMatch[2].trim();
    const { intent: intent2, outcome: outcome2 } = parseBeatText(displayText);
    return {
      linkName,
      intent: intent2,
      outcome: outcome2,
      originalOrder: 0
      // Will be set by caller
    };
  }
  const simpleLinkMatch = text.match(/^\[\[([^\]]+)\]\]$/);
  if (simpleLinkMatch) {
    return {
      linkName: simpleLinkMatch[1].trim(),
      intent: "",
      outcome: "",
      originalOrder: 0
    };
  }
  const { intent, outcome } = parseBeatText(text);
  return {
    linkName: null,
    intent,
    outcome,
    originalOrder: 0
  };
}
function parseBeatText(text) {
  const parts = text.split(/\s*->\s*/);
  if (parts.length >= 2) {
    return {
      intent: parts[0].trim(),
      outcome: parts.slice(1).join(" -> ").trim()
      // Join in case there are multiple "->"
    };
  }
  return {
    intent: text.trim(),
    outcome: ""
  };
}
function compareContentBlocks(paragraph, localContentBlock, remoteContentBlock) {
  const paragraphContent = paragraph.content.trim();
  if (!paragraph.linkName) {
    if (remoteContentBlock && remoteContentBlock.content.trim() === paragraphContent) {
      if (localContentBlock && localContentBlock.id === remoteContentBlock.id) {
        return "unchanged";
      }
      return "unchanged";
    }
    return "new";
  }
  if (!localContentBlock) {
    if (remoteContentBlock && remoteContentBlock.content.trim() === paragraphContent) {
      return "remote_modified";
    }
    return "new";
  }
  if (!remoteContentBlock) {
    return "local_modified";
  }
  const localContent = localContentBlock.content.trim();
  const remoteContent = remoteContentBlock.content.trim();
  if (localContent === paragraphContent && remoteContent === paragraphContent) {
    return "unchanged";
  }
  if (paragraphContent !== localContent && paragraphContent !== remoteContent && localContent === remoteContent) {
    return "local_modified";
  }
  if (localContent === paragraphContent && remoteContent !== paragraphContent) {
    return "remote_modified";
  }
  if (paragraphContent !== localContent && paragraphContent !== remoteContent && localContent !== remoteContent) {
    return "conflict";
  }
  if (paragraphContent === remoteContent && localContent !== remoteContent) {
    return "remote_modified";
  }
  return "conflict";
}
function parseSceneBeatList(chapterContent) {
  const items = [];
  const frontmatterMatch = chapterContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = chapterContent.substring(contentStart).trim();
  const listSectionMatch = bodyContent.match(/##\s+Scenes\s+&\s+Beats\s*\n+([\s\S]*?)(?=\n##|$)/);
  if (!listSectionMatch) {
    return { items: [] };
  }
  const listContent = listSectionMatch[1].trim();
  const lines = listContent.split(/\n/);
  let order = 0;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    const itemMatch = trimmedLine.match(/^([+-])\s+(.+)$/);
    if (!itemMatch) {
      continue;
    }
    const hasProse = itemMatch[1] === "+";
    const itemText = itemMatch[2].trim();
    const tabMatch = line.match(/^(\t*)/);
    const indentLevel = tabMatch ? tabMatch[1].length : 0;
    const isBeat = indentLevel > 0;
    const linkMatch = itemText.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
    let linkName = null;
    let displayText;
    if (linkMatch) {
      linkName = linkMatch[1].trim();
      displayText = linkMatch[2].trim();
    } else {
      displayText = itemText;
    }
    items.push({
      type: isBeat ? "beat" : "scene",
      linkName,
      displayText,
      hasProse,
      indentLevel: isBeat ? 1 : 0,
      originalOrder: order++
    });
  }
  return { items };
}
function parseChapterList(storyContent) {
  const items = [];
  const frontmatterMatch = storyContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = storyContent.substring(contentStart).trim();
  const listSectionMatch = bodyContent.match(/##\s+Chapters(?:,\s*Scenes\s*&\s*Beats)?\s*\n+([\s\S]*?)(?=\n##|$)/);
  if (!listSectionMatch) {
    return { items: [] };
  }
  const listContent = listSectionMatch[1].trim();
  const lines = listContent.split(/\n/);
  let order = 0;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    const itemMatch = trimmedLine.match(/^([+-])\s+(.+)$/);
    if (!itemMatch) {
      continue;
    }
    const hasProse = itemMatch[1] === "+";
    const itemText = itemMatch[2].trim();
    const tabMatch = line.match(/^(\t*)/);
    const indentLevel = tabMatch ? tabMatch[1].length : 0;
    let type2;
    if (indentLevel === 0) {
      type2 = "chapter";
    } else if (indentLevel === 1) {
      type2 = "scene";
    } else if (indentLevel === 2) {
      type2 = "beat";
    } else {
      continue;
    }
    const linkMatch = itemText.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
    let linkName = null;
    let displayText;
    if (linkMatch) {
      linkName = linkMatch[1].trim();
      displayText = linkMatch[2].trim();
    } else {
      displayText = itemText;
    }
    items.push({
      type: type2,
      linkName,
      displayText,
      hasProse,
      indentLevel: indentLevel / 2,
      // Normalize to 0, 1, 2
      originalOrder: order++
    });
  }
  return { items };
}
function parseBeatList(sceneContent) {
  const items = [];
  const frontmatterMatch = sceneContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = sceneContent.substring(contentStart).trim();
  const listSectionMatch = bodyContent.match(/##\s+Beats\s*\n+([\s\S]*?)(?=\n##|$)/);
  if (!listSectionMatch) {
    return { items: [] };
  }
  const listContent = listSectionMatch[1].trim();
  const lines = listContent.split(/\n/);
  let order = 0;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    if (trimmedLine.startsWith(">")) {
      continue;
    }
    const itemMatch = trimmedLine.match(/^([+-])\s+(.+)$/);
    if (!itemMatch) {
      continue;
    }
    const hasProse = itemMatch[1] === "+";
    const itemText = itemMatch[2].trim();
    const linkMatch = itemText.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
    let linkName = null;
    let displayText;
    if (linkMatch) {
      linkName = linkMatch[1].trim();
      displayText = linkMatch[2].trim();
    } else {
      displayText = itemText;
    }
    items.push({
      linkName,
      displayText,
      hasProse,
      originalOrder: order++
    });
  }
  return { items };
}
function parseOrphanScenesList(storyContent) {
  const items = [];
  const frontmatterMatch = storyContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = storyContent.substring(contentStart).trim();
  const listSectionMatch = bodyContent.match(/##\s+Orphan\s+Scenes\s*\n+([\s\S]*?)(?=\n##|$)/);
  if (!listSectionMatch) {
    return { items: [] };
  }
  const listContent = listSectionMatch[1].trim();
  const lines = listContent.split(/\n/);
  let order = 0;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    if (trimmedLine.startsWith(">")) {
      continue;
    }
    const itemMatch = trimmedLine.match(/^([+-])\s+(.+)$/);
    if (!itemMatch) {
      continue;
    }
    const hasProse = itemMatch[1] === "+";
    const itemText = itemMatch[2].trim();
    const tabMatch = line.match(/^(\t*)/);
    const indentLevel = tabMatch ? tabMatch[1].length : 0;
    const isBeat = indentLevel > 0;
    const linkMatch = itemText.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
    let linkName = null;
    let displayText;
    if (linkMatch) {
      linkName = linkMatch[1].trim();
      displayText = linkMatch[2].trim();
    } else {
      displayText = itemText;
    }
    items.push({
      type: isBeat ? "beat" : "scene",
      linkName,
      displayText,
      hasProse,
      indentLevel: isBeat ? 1 : 0,
      originalOrder: order++
    });
  }
  return { items };
}
function parseOrphanBeatsList(storyContent) {
  const items = [];
  const frontmatterMatch = storyContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = storyContent.substring(contentStart).trim();
  const listSectionMatch = bodyContent.match(/##\s+Orphan\s+Beats\s*\n+([\s\S]*?)(?=\n##|$)/);
  if (!listSectionMatch) {
    return { items: [] };
  }
  const listContent = listSectionMatch[1].trim();
  const lines = listContent.split(/\n/);
  let order = 0;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    if (trimmedLine.startsWith(">")) {
      continue;
    }
    const itemMatch = trimmedLine.match(/^([+-])\s+(.+)$/);
    if (!itemMatch) {
      continue;
    }
    const hasProse = itemMatch[1] === "+";
    const itemText = itemMatch[2].trim();
    const linkMatch = itemText.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
    let linkName = null;
    let displayText;
    if (linkMatch) {
      linkName = linkMatch[1].trim();
      displayText = linkMatch[2].trim();
    } else {
      displayText = itemText;
    }
    items.push({
      linkName,
      displayText,
      hasProse,
      originalOrder: order++
    });
  }
  return { items };
}
function parseStoryProse(storyContent) {
  const sections = [];
  const frontmatterMatch = storyContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = storyContent.substring(contentStart).trim();
  const storyHeaderMatch = bodyContent.match(/^(#\s+Story:\s*.+)$/m);
  const chapterHeaderMatch = bodyContent.match(/^(##\s+Chapter\s*\d*:\s*.+)$/m);
  let proseStartIndex = -1;
  if (storyHeaderMatch) {
    proseStartIndex = bodyContent.indexOf(storyHeaderMatch[0]);
  } else if (chapterHeaderMatch) {
    proseStartIndex = bodyContent.indexOf(chapterHeaderMatch[0]);
  }
  if (proseStartIndex === -1) {
    return { sections: [] };
  }
  const proseContent = bodyContent.substring(proseStartIndex);
  const lines = proseContent.split(/\n/);
  let order = 0;
  let currentChapter = null;
  let currentScene = null;
  let currentBeat = null;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    if (trimmedLine.startsWith(">")) {
      continue;
    }
    const storyMatch = trimmedLine.match(/^#\s+Story:\s*(.+)$/i);
    if (storyMatch) {
      continue;
    }
    const chapterMatch = trimmedLine.match(/^##\s+Chapter\s*\d*:\s*(.+)$/i);
    if (chapterMatch) {
      const chapterText = chapterMatch[1].trim();
      const linkMatch = chapterText.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
      if (linkMatch) {
        currentChapter = {
          linkName: linkMatch[1].trim(),
          title: linkMatch[2].trim()
        };
      } else {
        currentChapter = {
          linkName: null,
          title: chapterText
        };
      }
      currentScene = null;
      currentBeat = null;
      continue;
    }
    const sceneMatch = trimmedLine.match(/^###\s+Scene:\s*(.+)$/i);
    if (sceneMatch) {
      const sceneText = sceneMatch[1].trim();
      currentScene = parseSceneHeaderText(sceneText);
      currentScene.originalOrder = order++;
      sections.push({
        type: "scene",
        scene: currentScene,
        originalOrder: currentScene.originalOrder
      });
      currentBeat = null;
      continue;
    }
    const beatMatch = trimmedLine.match(/^####\s+Beat:\s*(.+)$/i);
    if (beatMatch) {
      const beatText = beatMatch[1].trim();
      currentBeat = parseBeatHeaderText(beatText);
      currentBeat.originalOrder = order++;
      sections.push({
        type: "beat",
        beat: currentBeat,
        originalOrder: currentBeat.originalOrder
      });
      continue;
    }
    if (trimmedLine.startsWith("#")) {
      continue;
    }
    if (trimmedLine.match(/^[+-]\s+/)) {
      continue;
    }
    const proseMatch = trimmedLine.match(/^\s*\[\[([^\|]+)\|([^\]]+)\]\]\s*$/);
    if (proseMatch) {
      const linkName = proseMatch[1].trim();
      const content = proseMatch[2].trim();
      const paragraph = {
        content,
        linkName,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
      continue;
    }
    if (trimmedLine.length > 0) {
      const paragraph = {
        content: trimmedLine,
        linkName: null,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
    }
  }
  return { sections };
}
function parseSceneHeaderText(text) {
  const linkMatch = text.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
  if (linkMatch) {
    const linkName = linkMatch[1].trim();
    const displayText = linkMatch[2].trim();
    const parts2 = displayText.split(/\s*-\s*/);
    return {
      linkName,
      goal: parts2[0].trim(),
      timeRef: parts2.length > 1 ? parts2.slice(1).join(" - ").trim() : "",
      originalOrder: 0
    };
  }
  const simpleLinkMatch = text.match(/^\[\[([^\]]+)\]\]$/);
  if (simpleLinkMatch) {
    return {
      linkName: simpleLinkMatch[1].trim(),
      goal: "",
      timeRef: "",
      originalOrder: 0
    };
  }
  const parts = text.split(/\s*-\s*/);
  return {
    linkName: null,
    goal: parts[0].trim(),
    timeRef: parts.length > 1 ? parts.slice(1).join(" - ").trim() : "",
    originalOrder: 0
  };
}
function parseBeatHeaderText(text) {
  const linkMatch = text.match(/^\[\[([^\|]+)\|([^\]]+)\]\]$/);
  if (linkMatch) {
    const linkName = linkMatch[1].trim();
    const displayText = linkMatch[2].trim();
    const parts2 = displayText.split(/\s*->\s*/);
    return {
      linkName,
      intent: parts2[0].trim(),
      outcome: parts2.length > 1 ? parts2.slice(1).join(" -> ").trim() : "",
      originalOrder: 0
    };
  }
  const simpleLinkMatch = text.match(/^\[\[([^\]]+)\]\]$/);
  if (simpleLinkMatch) {
    return {
      linkName: simpleLinkMatch[1].trim(),
      intent: "",
      outcome: "",
      originalOrder: 0
    };
  }
  const parts = text.split(/\s*->\s*/);
  return {
    linkName: null,
    intent: parts[0].trim(),
    outcome: parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "",
    originalOrder: 0
  };
}
function parseSceneProse(sceneContent) {
  const sections = [];
  const frontmatterMatch = sceneContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = sceneContent.substring(contentStart).trim();
  const sceneHeaderMatch = bodyContent.match(/^(###\s+Scene:\s*.+)$/m);
  const beatHeaderMatch = bodyContent.match(/^(#{3,4}\s+Beat:\s*.+)$/m);
  let proseStartIndex = -1;
  if (sceneHeaderMatch) {
    proseStartIndex = bodyContent.indexOf(sceneHeaderMatch[0]);
  } else if (beatHeaderMatch) {
    proseStartIndex = bodyContent.indexOf(beatHeaderMatch[0]);
  } else {
    const beatsListEnd = bodyContent.match(/##\s+Beats\s*\n+[\s\S]*?(?=\n###|\n####|\n[^#\-\+>\s]|$)/);
    if (beatsListEnd) {
      proseStartIndex = bodyContent.indexOf(beatsListEnd[0]) + beatsListEnd[0].length;
    } else {
      const firstNonListContent = bodyContent.match(/(?:^|\n)([^#\-\+>\s\n].+)/);
      if (firstNonListContent) {
        proseStartIndex = bodyContent.indexOf(firstNonListContent[1]);
      }
    }
  }
  if (proseStartIndex === -1) {
    return { sections: [] };
  }
  const proseContent = bodyContent.substring(proseStartIndex);
  const lines = proseContent.split(/\n/);
  let order = 0;
  let currentBeat = null;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    if (trimmedLine.startsWith(">")) {
      continue;
    }
    const sceneMatch = trimmedLine.match(/^###\s+Scene:\s*(.+)$/i);
    if (sceneMatch) {
      const sceneText = sceneMatch[1].trim();
      const parsedScene = parseSceneHeaderText(sceneText);
      parsedScene.originalOrder = order++;
      sections.push({
        type: "scene",
        scene: parsedScene,
        originalOrder: parsedScene.originalOrder
      });
      currentBeat = null;
      continue;
    }
    const beatMatch = trimmedLine.match(/^#{3,4}\s+Beat:\s*(.+)$/i);
    if (beatMatch) {
      const beatText = beatMatch[1].trim();
      currentBeat = parseBeatHeaderText(beatText);
      currentBeat.originalOrder = order++;
      sections.push({
        type: "beat",
        beat: currentBeat,
        originalOrder: currentBeat.originalOrder
      });
      continue;
    }
    if (trimmedLine.startsWith("#")) {
      continue;
    }
    if (trimmedLine.match(/^[+-]\s+/)) {
      continue;
    }
    const proseMatch = trimmedLine.match(/^\s*\[\[([^\|]+)\|([^\]]+)\]\]\s*$/);
    if (proseMatch) {
      const linkName = proseMatch[1].trim();
      const content = proseMatch[2].trim();
      const paragraph = {
        content,
        linkName,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
      continue;
    }
    if (trimmedLine.length > 0) {
      const paragraph = {
        content: trimmedLine,
        linkName: null,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
    }
  }
  return { sections };
}
function parseBeatProse(beatContent) {
  const sections = [];
  const frontmatterMatch = beatContent.match(/^---\n([\s\S]*?)\n---/);
  const contentStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
  const bodyContent = beatContent.substring(contentStart).trim();
  const beatHeaderMatch = bodyContent.match(/^(##\s+Beat:\s*.+)$/m);
  let proseStartIndex = -1;
  if (beatHeaderMatch) {
    proseStartIndex = bodyContent.indexOf(beatHeaderMatch[0]);
  }
  if (proseStartIndex === -1) {
    return { sections: [] };
  }
  const proseContent = bodyContent.substring(proseStartIndex);
  const lines = proseContent.split(/\n/);
  let order = 0;
  for (const line of lines) {
    const trimmedLine = line.trim();
    if (!trimmedLine) {
      continue;
    }
    if (trimmedLine.startsWith(">")) {
      continue;
    }
    const beatMatch = trimmedLine.match(/^##\s+Beat:\s*(.+)$/i);
    if (beatMatch) {
      continue;
    }
    if (trimmedLine.startsWith("#")) {
      continue;
    }
    if (trimmedLine.match(/^[+-]\s+/)) {
      continue;
    }
    const proseMatch = trimmedLine.match(/^\s*\[\[([^\|]+)\|([^\]]+)\]\]\s*$/);
    if (proseMatch) {
      const linkName = proseMatch[1].trim();
      const content = proseMatch[2].trim();
      const paragraph = {
        content,
        linkName,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
      continue;
    }
    if (trimmedLine.length > 0) {
      const paragraph = {
        content: trimmedLine,
        linkName: null,
        originalOrder: order++
      };
      sections.push({
        type: "prose",
        prose: paragraph,
        originalOrder: paragraph.originalOrder
      });
    }
  }
  return { sections };
}

// src/views/modals/ConflictModal.ts
var import_obsidian8 = require("obsidian");
var ConflictModal = class extends import_obsidian8.Modal {
  constructor(app, localContentBlock, remoteContentBlock, onResolve) {
    super(app);
    this.resolution = null;
    this.localContentBlock = localContentBlock;
    this.remoteContentBlock = remoteContentBlock;
    this.onResolve = onResolve;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", {
      text: "Content Block Conflict"
    });
    contentEl.createEl("p", {
      text: "This content block has been modified both locally and remotely. Choose how to resolve the conflict:"
    });
    const diffContainer = contentEl.createDiv("conflict-diff-container");
    const localDiv = diffContainer.createDiv("conflict-local");
    localDiv.createEl("h3", { text: "Local Version" });
    const localContent = localDiv.createEl("pre", {
      text: this.localContentBlock.content,
      cls: "conflict-content"
    });
    localContent.style.whiteSpace = "pre-wrap";
    localContent.style.maxHeight = "200px";
    localContent.style.overflow = "auto";
    localContent.style.border = "1px solid var(--background-modifier-border)";
    localContent.style.padding = "10px";
    localContent.style.borderRadius = "4px";
    const remoteDiv = diffContainer.createDiv("conflict-remote");
    remoteDiv.createEl("h3", { text: "Remote Version" });
    const remoteContent = remoteDiv.createEl("pre", {
      text: this.remoteContentBlock.content,
      cls: "conflict-content"
    });
    remoteContent.style.whiteSpace = "pre-wrap";
    remoteContent.style.maxHeight = "200px";
    remoteContent.style.overflow = "auto";
    remoteContent.style.border = "1px solid var(--background-modifier-border)";
    remoteContent.style.padding = "10px";
    remoteContent.style.borderRadius = "4px";
    const manualDiv = contentEl.createDiv("conflict-manual");
    manualDiv.createEl("h3", { text: "Manual Merge (Optional)" });
    const manualTextarea = manualDiv.createEl("textarea", {
      text: this.localContentBlock.content,
      cls: "conflict-manual-input"
    });
    manualTextarea.style.width = "100%";
    manualTextarea.style.minHeight = "150px";
    manualTextarea.style.padding = "10px";
    manualTextarea.style.border = "1px solid var(--background-modifier-border)";
    manualTextarea.style.borderRadius = "4px";
    manualTextarea.style.fontFamily = "var(--font-monospace)";
    const buttonContainer = contentEl.createDiv("conflict-buttons");
    buttonContainer.style.marginTop = "20px";
    buttonContainer.style.display = "flex";
    buttonContainer.style.gap = "10px";
    const useLocalBtn = buttonContainer.createEl("button", {
      text: "Use Local",
      cls: "mod-cta"
    });
    useLocalBtn.onclick = async () => {
      this.resolution = { resolution: "local" };
      await this.onResolve(this.resolution);
      this.close();
    };
    const useRemoteBtn = buttonContainer.createEl("button", {
      text: "Use Remote"
    });
    useRemoteBtn.onclick = async () => {
      this.resolution = { resolution: "remote" };
      await this.onResolve(this.resolution);
      this.close();
    };
    const useManualBtn = buttonContainer.createEl("button", {
      text: "Use Manual Merge",
      cls: "mod-primary"
    });
    useManualBtn.onclick = async () => {
      this.resolution = {
        resolution: "manual",
        mergedContent: manualTextarea.value
      };
      await this.onResolve(this.resolution);
      this.close();
    };
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/sync/syncService.ts
var SyncService = class {
  constructor(apiClient, fileManager, settings, app) {
    this.apiClient = apiClient;
    this.fileManager = fileManager;
    this.settings = settings;
    this.app = app;
    if (this.settings.autoSyncOnApiUpdates) {
      this.unsubscribeFromNotifier = apiUpdateNotifier.subscribe(async (payload) => {
        try {
          await this.applyEntityData(payload);
        } catch (err) {
          console.error("Failed to auto-sync entity data", err);
        }
      });
    }
  }
  dispose() {
    if (this.unsubscribeFromNotifier) {
      this.unsubscribeFromNotifier();
      this.unsubscribeFromNotifier = void 0;
    }
  }
  // Pull story from service to Obsidian (Service  Obsidian)
  async pullStory(storyId, target) {
    try {
      if (target) {
        await this.pullSingleEntity(storyId, target);
        return;
      }
      const storyData = await this.apiClient.getStoryWithHierarchy(storyId);
      const folderPath = this.fileManager.getStoryFolderPath(
        storyData.story.title
      );
      const existingMetadata = await this.fileManager.readStoryMetadata(folderPath).catch(() => null);
      const allScenes = await this.apiClient.getScenesByStory(storyId);
      const orphanScenes = [];
      for (const scene of allScenes) {
        if (!scene.chapter_id) {
          const beats = await this.apiClient.getBeats(scene.id);
          orphanScenes.push({ scene, beats });
        }
      }
      orphanScenes.sort((a, b) => a.scene.order_num - b.scene.order_num);
      const allBeats = await this.apiClient.getBeatsByStory(storyId);
      const orphanBeats = [];
      const sceneIdSet = new Set(allScenes.map((s) => s.id));
      for (const beat of allBeats) {
        if (!beat.scene_id || !sceneIdSet.has(beat.scene_id)) {
          orphanBeats.push(beat);
        }
      }
      orphanBeats.sort((a, b) => a.order_num - b.order_num);
      const chapterContentData = /* @__PURE__ */ new Map();
      for (const chapterWithContent of storyData.chapters) {
        const contentBlocks = await this.apiClient.getContentBlocks(chapterWithContent.chapter.id);
        const contentBlockRefs = [];
        for (const contentBlock of contentBlocks) {
          const refs = await this.apiClient.getContentAnchors(contentBlock.id);
          contentBlockRefs.push(...refs);
        }
        chapterContentData.set(chapterWithContent.chapter.id, { contentBlocks, contentBlockRefs });
      }
      await this.fileManager.writeStoryMetadata(
        storyData.story,
        folderPath,
        storyData.chapters,
        orphanScenes,
        orphanBeats,
        chapterContentData
      );
      const contentsFolderPath = `${folderPath}/03-contents`;
      await this.fileManager.ensureFolderExists(contentsFolderPath);
      for (const typeFolder of ["00-texts", "01-images", "02-videos", "03-audios", "04-embeds", "05-links"]) {
        await this.fileManager.ensureFolderExists(`${contentsFolderPath}/${typeFolder}`);
      }
      const chaptersFolderPath = `${folderPath}/00-chapters`;
      await this.fileManager.ensureFolderExists(chaptersFolderPath);
      for (const chapterWithContent of storyData.chapters) {
        const contentData = chapterContentData.get(chapterWithContent.chapter.id);
        const contentBlocks = (contentData == null ? void 0 : contentData.contentBlocks) || [];
        const contentBlockRefs = (contentData == null ? void 0 : contentData.contentBlockRefs) || [];
        for (const contentBlock of contentBlocks) {
          const contentBlockFileName = this.fileManager.generateContentBlockFileName(contentBlock);
          const typeFolderPath = this.fileManager.getContentBlockFolderPath(folderPath, contentBlock.type || "text");
          await this.fileManager.ensureFolderExists(typeFolderPath);
          const contentBlockFilePath = `${typeFolderPath}/${contentBlockFileName}`;
          await this.fileManager.writeContentBlockFile(
            contentBlock,
            contentBlockFilePath,
            storyData.story.title
          );
        }
        const chapterFileName = `Chapter-${chapterWithContent.chapter.number}.md`;
        const chapterFilePath = `${chaptersFolderPath}/${chapterFileName}`;
        await this.fileManager.writeChapterFile(
          chapterWithContent,
          chapterFilePath,
          storyData.story.title,
          contentBlocks,
          contentBlockRefs,
          orphanScenes
          // Include orphan scenes for easy association
        );
        const scenesFolderPath2 = `${folderPath}/01-scenes`;
        await this.fileManager.ensureFolderExists(scenesFolderPath2);
        for (const { scene, beats } of chapterWithContent.scenes) {
          const sceneContentBlocks = await this.apiClient.getContentBlocksByScene(scene.id);
          const sceneFileName = this.fileManager.generateSceneFileName(scene);
          const sceneFilePath = `${scenesFolderPath2}/${sceneFileName}`;
          await this.fileManager.writeSceneFile(
            { scene, beats },
            sceneFilePath,
            storyData.story.title,
            sceneContentBlocks,
            orphanBeats
            // Include orphan beats for easy association
          );
          const beatsFolderPath2 = `${folderPath}/02-beats`;
          await this.fileManager.ensureFolderExists(beatsFolderPath2);
          for (const beat of beats) {
            const beatContentBlocks = await this.apiClient.getContentBlocksByBeat(beat.id);
            const beatFileName = this.fileManager.generateBeatFileName(beat);
            const beatFilePath = `${beatsFolderPath2}/${beatFileName}`;
            await this.fileManager.writeBeatFile(beat, beatFilePath, storyData.story.title, beatContentBlocks);
          }
        }
      }
      const scenesFolderPath = `${folderPath}/01-scenes`;
      await this.fileManager.ensureFolderExists(scenesFolderPath);
      for (const { scene, beats } of orphanScenes) {
        const sceneContentBlocks = await this.apiClient.getContentBlocksByScene(scene.id);
        const sceneFileName = this.fileManager.generateSceneFileName(scene);
        const sceneFilePath = `${scenesFolderPath}/${sceneFileName}`;
        await this.fileManager.writeSceneFile(
          { scene, beats },
          sceneFilePath,
          storyData.story.title,
          sceneContentBlocks,
          orphanBeats
          // Include orphan beats for easy association
        );
        const beatsFolderPath2 = `${folderPath}/02-beats`;
        await this.fileManager.ensureFolderExists(beatsFolderPath2);
        for (const beat of beats) {
          const beatContentBlocks = await this.apiClient.getContentBlocksByBeat(beat.id);
          const beatFileName = this.fileManager.generateBeatFileName(beat);
          const beatFilePath = `${beatsFolderPath2}/${beatFileName}`;
          await this.fileManager.writeBeatFile(beat, beatFilePath, storyData.story.title, beatContentBlocks);
        }
      }
      const beatsFolderPath = `${folderPath}/02-beats`;
      await this.fileManager.ensureFolderExists(beatsFolderPath);
      for (const beat of orphanBeats) {
        const beatContentBlocks = await this.apiClient.getContentBlocksByBeat(beat.id);
        const beatFileName = this.fileManager.generateBeatFileName(beat);
        const beatFilePath = `${beatsFolderPath}/${beatFileName}`;
        await this.fileManager.writeBeatFile(beat, beatFilePath, storyData.story.title, beatContentBlocks);
      }
      if (existingMetadata && existingMetadata.frontmatter.version !== void 0 && existingMetadata.frontmatter.version !== storyData.story.version_number) {
        await this.fileManager.createVersionSnapshot(
          folderPath,
          existingMetadata.frontmatter.version
        );
      }
      await this.syncVersionHistory(storyData.story.root_story_id, folderPath);
      new import_obsidian9.Notice(`Story "${storyData.story.title}" synced successfully`);
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to sync story";
      new import_obsidian9.Notice(`Error syncing story: ${errorMessage}`, 5e3);
      throw err;
    }
  }
  // Sync all previous versions of a story
  async syncVersionHistory(rootStoryId, storyFolderPath) {
    try {
      const allStories = await this.apiClient.listStories();
      const versions = allStories.filter((s) => s.root_story_id === rootStoryId);
      versions.sort((a, b) => a.version_number - b.version_number);
      const versionsPath = `${storyFolderPath}/versions`;
      await this.fileManager.ensureFolderExists(versionsPath);
      for (const versionStory of versions) {
        const currentVersion = versions[versions.length - 1].version_number;
        if (versionStory.version_number === currentVersion) {
          continue;
        }
        const versionFolderPath = `${versionsPath}/v${versionStory.version_number}`;
        const existingVersionFolder = this.fileManager.getVault().getAbstractFileByPath(
          versionFolderPath
        );
        if (existingVersionFolder) {
          console.log(`Version v${versionStory.version_number} already exists, skipping`);
          continue;
        }
        const versionData = await this.apiClient.getStoryWithHierarchy(
          versionStory.id
        );
        await this.fileManager.ensureFolderExists(versionFolderPath);
        await this.fileManager.writeStoryMetadata(
          versionData.story,
          versionFolderPath
        );
        const versionContentsFolderPath = `${versionFolderPath}/03-contents`;
        await this.fileManager.ensureFolderExists(versionContentsFolderPath);
        for (const typeFolder of ["00-texts", "01-images", "02-videos", "03-audios", "04-embeds", "05-links"]) {
          await this.fileManager.ensureFolderExists(`${versionContentsFolderPath}/${typeFolder}`);
        }
        const versionChaptersPath = `${versionFolderPath}/00-chapters`;
        await this.fileManager.ensureFolderExists(versionChaptersPath);
        for (const chapterWithContent of versionData.chapters) {
          const contentBlocks = await this.apiClient.getContentBlocks(chapterWithContent.chapter.id);
          const contentBlockRefs = [];
          for (const contentBlock of contentBlocks) {
            const refs = await this.apiClient.getContentAnchors(contentBlock.id);
            contentBlockRefs.push(...refs);
          }
          for (const contentBlock of contentBlocks) {
            const contentBlockFileName = this.fileManager.generateContentBlockFileName(contentBlock);
            const typeFolderPath = this.fileManager.getContentBlockFolderPath(versionFolderPath, contentBlock.type || "text");
            await this.fileManager.ensureFolderExists(typeFolderPath);
            const contentBlockFilePath = `${typeFolderPath}/${contentBlockFileName}`;
            await this.fileManager.writeContentBlockFile(
              contentBlock,
              contentBlockFilePath,
              versionData.story.title
            );
          }
          const chapterFileName = `Chapter-${chapterWithContent.chapter.number}.md`;
          const chapterFilePath = `${versionChaptersPath}/${chapterFileName}`;
          await this.fileManager.writeChapterFile(
            chapterWithContent,
            chapterFilePath,
            versionData.story.title,
            contentBlocks,
            contentBlockRefs
          );
          const versionScenesPath = `${versionFolderPath}/01-scenes`;
          await this.fileManager.ensureFolderExists(versionScenesPath);
          for (const { scene, beats } of chapterWithContent.scenes) {
            const sceneContentBlocks = await this.apiClient.getContentBlocksByScene(scene.id);
            const sceneFileName = this.fileManager.generateSceneFileName(scene);
            const sceneFilePath = `${versionScenesPath}/${sceneFileName}`;
            await this.fileManager.writeSceneFile(
              { scene, beats },
              sceneFilePath,
              versionData.story.title,
              sceneContentBlocks
            );
            const versionBeatsPath = `${versionFolderPath}/02-beats`;
            await this.fileManager.ensureFolderExists(versionBeatsPath);
            for (const beat of beats) {
              const beatContentBlocks = await this.apiClient.getContentBlocksByBeat(beat.id);
              const beatFileName = this.fileManager.generateBeatFileName(beat);
              const beatFilePath = `${versionBeatsPath}/${beatFileName}`;
              await this.fileManager.writeBeatFile(beat, beatFilePath, versionData.story.title, beatContentBlocks);
            }
          }
        }
        console.log(`Synced version v${versionStory.version_number}`);
      }
    } catch (err) {
      console.error("Error syncing version history:", err);
    }
  }
  // Pull all stories
  async pullAllStories() {
    if (this.settings.mode === "remote" && !this.settings.tenantId) {
      throw new Error("Tenant ID is required");
    }
    try {
      await this.apiClient.getWorlds();
    } catch (err) {
      console.error("Failed to load worlds:", err);
    }
    const stories = await this.apiClient.listStories();
    for (const story of stories) {
      try {
        await this.pullStory(story.id);
      } catch (err) {
        console.error(`Failed to sync story ${story.id}:`, err);
      }
    }
    new import_obsidian9.Notice(`Synced ${stories.length} stories`);
  }
  // Apply entity data received from API without fetching
  async applyEntityData(payload) {
    switch (payload.type) {
      case "chapter": {
        await this.writeChapterBundle({
          story: payload.story,
          chapter: payload.chapter,
          scenes: payload.scenes,
          contentBlocks: payload.contentBlocks,
          contentBlockRefs: payload.contentBlockRefs
        });
        new import_obsidian9.Notice(`Chapter "${payload.chapter.title}" synced successfully`);
        break;
      }
      case "scene": {
        const beatContentBlockMap = /* @__PURE__ */ new Map();
        if (payload.beatContentBlocks) {
          for (const [beatId, blocks] of Object.entries(payload.beatContentBlocks)) {
            beatContentBlockMap.set(beatId, blocks);
          }
        }
        const folderPath = this.fileManager.getStoryFolderPath(payload.story.title);
        await this.ensureStoryFolders(folderPath);
        await this.writeSceneBundle({
          storyTitle: payload.story.title,
          folderPath,
          scene: payload.scene,
          beats: payload.beats,
          sceneContentBlocks: payload.sceneContentBlocks,
          beatContentBlockMap,
          skipRemoteContentFetch: true
        });
        if (payload.sceneContentBlocks) {
          for (const contentBlock of payload.sceneContentBlocks) {
            await this.writeContentBlockToFolder(folderPath, payload.story.title, contentBlock);
          }
        }
        for (const blocks of beatContentBlockMap.values()) {
          for (const contentBlock of blocks) {
            await this.writeContentBlockToFolder(folderPath, payload.story.title, contentBlock);
          }
        }
        new import_obsidian9.Notice(`Scene "${payload.scene.goal}" synced successfully`);
        break;
      }
      case "content": {
        const folderPath = this.fileManager.getStoryFolderPath(payload.story.title);
        await this.ensureContentFolders(folderPath);
        await this.writeContentBlockToFolder(
          folderPath,
          payload.story.title,
          payload.contentBlock
        );
        new import_obsidian9.Notice("Content block synced successfully");
        break;
      }
    }
  }
  // Push story from Obsidian to service (Obsidian  Service)
  async pushStory(folderPath, target) {
    try {
      const { frontmatter: storyFrontmatter } = await this.fileManager.readStoryMetadata(folderPath);
      if (!storyFrontmatter.id) {
        throw new Error("Story metadata missing ID");
      }
      const storyId = storyFrontmatter.id;
      if (target) {
        await this.pushSingleEntity(folderPath, target, storyId, storyFrontmatter.title);
        return;
      }
      const storyFilePath = `${folderPath}/story.md`;
      const storyFile = this.fileManager.getVault().getAbstractFileByPath(storyFilePath);
      if (storyFile instanceof import_obsidian9.TFile) {
        const storyContent = await this.fileManager.getVault().read(storyFile);
        const chapterList = parseChapterList(storyContent);
        if (chapterList.items.length > 0) {
          await this.processChapterList(chapterList, storyId);
        }
        const orphanScenesList = parseOrphanScenesList(storyContent);
        if (orphanScenesList.items.length > 0) {
          await this.processOrphanScenesList(orphanScenesList, storyId);
        }
        const orphanBeatsList = parseOrphanBeatsList(storyContent);
        if (orphanBeatsList.items.length > 0) {
          await this.processOrphanBeatsList(orphanBeatsList, storyId);
        }
        const storyProse = parseStoryProse(storyContent);
        if (storyProse.sections.length > 0) {
          await this.pushStoryContentBlocks(storyFilePath, folderPath, storyId);
        }
      }
      await this.apiClient.updateStory(
        storyId,
        storyFrontmatter.title,
        storyFrontmatter.status
      );
      const chapterFiles = await this.fileManager.listChapterFiles(folderPath);
      for (const chapterFilePath of chapterFiles) {
        console.log(`Would update chapter: ${chapterFilePath}`);
      }
      for (const chapterFilePath of chapterFiles) {
        await this.pushChapterContentBlocks(chapterFilePath, folderPath);
      }
      const sceneFiles = await this.fileManager.listStorySceneFiles(folderPath);
      for (const sceneFilePath of sceneFiles) {
        await this.pushSceneBeats(sceneFilePath, storyId);
        await this.pushSceneContentBlocks(sceneFilePath, folderPath);
      }
      const beatFiles = await this.fileManager.listStoryBeatFiles(folderPath);
      for (const beatFilePath of beatFiles) {
        await this.pushBeatContentBlocks(beatFilePath, folderPath);
      }
      new import_obsidian9.Notice(`Story "${storyFrontmatter.title}" pushed successfully`);
      try {
        new import_obsidian9.Notice(`Syncing story "${storyFrontmatter.title}" from service...`);
        await this.pullStory(storyId);
        new import_obsidian9.Notice(`Story "${storyFrontmatter.title}" synced successfully`);
      } catch (pullErr) {
        const pullErrorMessage = pullErr instanceof Error ? pullErr.message : "Failed to sync story after push";
        new import_obsidian9.Notice(`Warning: ${pullErrorMessage}`, 5e3);
      }
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to push story";
      new import_obsidian9.Notice(`Error pushing story: ${errorMessage}`, 5e3);
      throw err;
    }
  }
  // Push prose blocks from a chapter file (hierarchical structure)
  async pushChapterContentBlocks(chapterFilePath, storyFolderPath) {
    const file = this.fileManager.getVault().getAbstractFileByPath(chapterFilePath);
    if (!(file instanceof import_obsidian9.TFile)) {
      throw new Error(`Chapter file not found: ${chapterFilePath}`);
    }
    const chapterContent = await this.fileManager.getVault().read(file);
    const frontmatter = this.fileManager.parseFrontmatter(chapterContent);
    if (!frontmatter.id || !frontmatter.story_id) {
      throw new Error("Chapter metadata missing ID or story_id");
    }
    const chapterId = frontmatter.id;
    const storyId = frontmatter.story_id;
    const contentsFolderPath = `${storyFolderPath}/03-contents`;
    const sceneBeatList = parseSceneBeatList(chapterContent);
    await this.processSceneBeatList(sceneBeatList, chapterId, storyId);
    const remoteContentBlocks = await this.apiClient.getContentBlocks(chapterId);
    const remoteContentBlocksMap = /* @__PURE__ */ new Map();
    for (const pb of remoteContentBlocks) {
      remoteContentBlocksMap.set(pb.id, pb);
    }
    const existingScenes = await this.apiClient.getScenes(chapterId);
    const sceneMap = /* @__PURE__ */ new Map();
    const sceneIdMap = /* @__PURE__ */ new Map();
    for (const scene of existingScenes) {
      const fileName = this.fileManager.generateSceneFileName(scene);
      const linkName = fileName.replace(/\.md$/, "");
      sceneMap.set(linkName, scene);
      sceneIdMap.set(scene.id, scene);
    }
    const beatMap = /* @__PURE__ */ new Map();
    const beatIdMap = /* @__PURE__ */ new Map();
    for (const scene of existingScenes) {
      const beats = await this.apiClient.getBeats(scene.id);
      for (const beat of beats) {
        const fileName = this.fileManager.generateBeatFileName(beat);
        const linkName = fileName.replace(/\.md$/, "");
        beatMap.set(linkName, beat);
        beatIdMap.set(beat.id, beat);
      }
    }
    const hierarchical = parseHierarchicalProse(chapterContent);
    const updatedSections = [];
    let currentScene = null;
    let currentBeat = null;
    let proseOrderNum = 1;
    let sceneOrderNum = existingScenes.length > 0 ? Math.max(...existingScenes.map((s) => s.order_num)) + 1 : 1;
    for (const section of hierarchical.sections) {
      if (section.type === "scene" && section.scene) {
        const { scene: parsedScene } = section;
        if (parsedScene.linkName) {
          currentScene = sceneMap.get(parsedScene.linkName) || null;
          if (!currentScene) {
            currentScene = sceneIdMap.get(parsedScene.linkName) || null;
          }
          if (currentScene) {
            if (parsedScene.goal !== currentScene.goal || parsedScene.timeRef !== currentScene.time_ref) {
              currentScene = await this.apiClient.updateScene(currentScene.id, {
                goal: parsedScene.goal,
                time_ref: parsedScene.timeRef
              });
            }
          }
        } else {
          currentScene = await this.apiClient.createScene({
            story_id: storyId,
            chapter_id: chapterId,
            order_num: sceneOrderNum++,
            goal: parsedScene.goal,
            time_ref: parsedScene.timeRef
          });
          const sceneFileName = this.fileManager.generateSceneFileName(currentScene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          sceneMap.set(sceneLinkName, currentScene);
          sceneIdMap.set(currentScene.id, currentScene);
        }
        if (currentScene) {
          const sceneFileName = this.fileManager.generateSceneFileName(currentScene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          const sceneDisplayText = currentScene.time_ref ? `${currentScene.goal} - ${currentScene.time_ref}` : currentScene.goal;
          updatedSections.push(`## Scene: [[${sceneLinkName}|${sceneDisplayText}]]`);
        }
        currentBeat = null;
      } else if (section.type === "beat" && section.beat) {
        const { beat: parsedBeat } = section;
        if (!currentScene) {
          throw new Error("Beat found without a parent scene");
        }
        if (parsedBeat.linkName) {
          currentBeat = beatMap.get(parsedBeat.linkName) || null;
          if (!currentBeat) {
            currentBeat = beatIdMap.get(parsedBeat.linkName) || null;
          }
          if (currentBeat) {
            if (parsedBeat.intent !== currentBeat.intent || parsedBeat.outcome !== currentBeat.outcome) {
              currentBeat = await this.apiClient.updateBeat(currentBeat.id, {
                intent: parsedBeat.intent,
                outcome: parsedBeat.outcome
              });
            }
          }
        } else {
          const existingBeats = await this.apiClient.getBeats(currentScene.id);
          const beatOrderNum = existingBeats.length > 0 ? Math.max(...existingBeats.map((b) => b.order_num)) + 1 : 1;
          currentBeat = await this.apiClient.createBeat({
            scene_id: currentScene.id,
            order_num: beatOrderNum,
            type: "setup",
            // Default type
            intent: parsedBeat.intent,
            outcome: parsedBeat.outcome
          });
          const beatFileName = this.fileManager.generateBeatFileName(currentBeat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          beatMap.set(beatLinkName, currentBeat);
          beatIdMap.set(currentBeat.id, currentBeat);
        }
        if (currentBeat) {
          const beatFileName = this.fileManager.generateBeatFileName(currentBeat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          const beatDisplayText = currentBeat.outcome ? `${currentBeat.intent} -> ${currentBeat.outcome}` : currentBeat.intent;
          updatedSections.push(`### Beat: [[${beatLinkName}|${beatDisplayText}]]`);
        }
      } else if (section.type === "prose" && section.prose) {
        const { prose: paragraph } = section;
        let localContentBlock = null;
        let remoteContentBlock = null;
        if (paragraph.linkName) {
          const contentBlockFilePath = await this.findContentBlockFileByLinkName(contentsFolderPath, paragraph.linkName);
          if (contentBlockFilePath) {
            localContentBlock = await this.fileManager.readContentBlockFromFile(contentBlockFilePath);
          }
          if (!localContentBlock) {
            localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          }
          if (localContentBlock) {
            remoteContentBlock = remoteContentBlocksMap.get(localContentBlock.id) || null;
          } else {
            const normalizedContent = paragraph.content.trim();
            for (const [id2, remotePB] of remoteContentBlocksMap.entries()) {
              if (remotePB.content.trim() === normalizedContent) {
                remoteContentBlock = remotePB;
                break;
              }
            }
          }
        } else {
          localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          const normalizedContent = paragraph.content.trim();
          for (const [id2, remotePB] of remoteContentBlocksMap.entries()) {
            if (remotePB.content.trim() === normalizedContent) {
              remoteContentBlock = remotePB;
              if (!localContentBlock) {
                localContentBlock = await this.findContentBlockById(contentsFolderPath, remotePB.id);
              }
              break;
            }
          }
        }
        const status = compareContentBlocks(paragraph, localContentBlock, remoteContentBlock);
        let finalContentBlock;
        switch (status) {
          case "new": {
            finalContentBlock = await this.apiClient.createContentBlock(chapterId, {
              order_num: proseOrderNum++,
              kind: "final",
              content: paragraph.content
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            if (currentScene) {
              await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", currentScene.id);
            }
            if (currentBeat) {
              await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
            }
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            break;
          }
          case "unchanged": {
            if (!localContentBlock && remoteContentBlock) {
              finalContentBlock = remoteContentBlock;
              const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
              await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            } else if (localContentBlock) {
              if (localContentBlock.order_num !== proseOrderNum) {
                finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
                  order_num: proseOrderNum++
                });
                const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
                await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
              } else {
                finalContentBlock = localContentBlock;
                proseOrderNum++;
              }
            } else {
              finalContentBlock = remoteContentBlock;
              proseOrderNum++;
            }
            if (finalContentBlock) {
              const existingRefs = await this.apiClient.getContentAnchors(finalContentBlock.id);
              const hasSceneRef = existingRefs.some((r) => r.entity_type === "scene" && r.entity_id === (currentScene == null ? void 0 : currentScene.id));
              const hasBeatRef = existingRefs.some((r) => r.entity_type === "beat" && r.entity_id === (currentBeat == null ? void 0 : currentBeat.id));
              if (currentScene && !hasSceneRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", currentScene.id);
              }
              if (currentBeat && !hasBeatRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
              }
            }
            if (paragraph.linkName) {
              updatedSections.push(`[[${paragraph.linkName}|${paragraph.content}]]`);
            } else {
              const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
              updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            }
            break;
          }
          case "local_modified": {
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: paragraph.content,
              order_num: proseOrderNum++
            });
            const filePathLocalMod = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePathLocalMod, void 0);
            if (finalContentBlock) {
              const existingRefs = await this.apiClient.getContentAnchors(finalContentBlock.id);
              const hasSceneRef = existingRefs.some((r) => r.entity_type === "scene" && r.entity_id === (currentScene == null ? void 0 : currentScene.id));
              const hasBeatRef = existingRefs.some((r) => r.entity_type === "beat" && r.entity_id === (currentBeat == null ? void 0 : currentBeat.id));
              if (currentScene && !hasSceneRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", currentScene.id);
              }
              if (currentBeat && !hasBeatRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
              }
            }
            const linkNameLocalMod = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkNameLocalMod}|${paragraph.content}]]`);
            break;
          }
          case "remote_modified": {
            finalContentBlock = remoteContentBlock;
            const filePathRemoteMod = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePathRemoteMod, void 0);
            if (finalContentBlock) {
              const existingRefs = await this.apiClient.getContentAnchors(finalContentBlock.id);
              const hasSceneRef = existingRefs.some((r) => r.entity_type === "scene" && r.entity_id === (currentScene == null ? void 0 : currentScene.id));
              const hasBeatRef = existingRefs.some((r) => r.entity_type === "beat" && r.entity_id === (currentBeat == null ? void 0 : currentBeat.id));
              if (currentScene && !hasSceneRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", currentScene.id);
              }
              if (currentBeat && !hasBeatRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
              }
            }
            const linkNameRemoteMod = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkNameRemoteMod}|${finalContentBlock.content}]]`);
            new import_obsidian9.Notice(`Prose block updated from remote: ${linkNameRemoteMod}`, 3e3);
            proseOrderNum++;
            break;
          }
          case "conflict": {
            const resolution = await this.resolveConflict(localContentBlock, remoteContentBlock);
            let resolvedContent;
            if (resolution.resolution === "local") {
              resolvedContent = paragraph.content;
            } else if (resolution.resolution === "remote") {
              resolvedContent = remoteContentBlock.content;
            } else {
              resolvedContent = resolution.mergedContent || paragraph.content;
            }
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: resolvedContent,
              order_num: proseOrderNum++
            });
            const filePathConflict = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePathConflict, void 0);
            if (finalContentBlock) {
              const existingRefs = await this.apiClient.getContentAnchors(finalContentBlock.id);
              const hasSceneRef = existingRefs.some((r) => r.entity_type === "scene" && r.entity_id === (currentScene == null ? void 0 : currentScene.id));
              const hasBeatRef = existingRefs.some((r) => r.entity_type === "beat" && r.entity_id === (currentBeat == null ? void 0 : currentBeat.id));
              if (currentScene && !hasSceneRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", currentScene.id);
              }
              if (currentBeat && !hasBeatRef) {
                await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
              }
            }
            const linkNameConflict = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkNameConflict}|${resolvedContent}]]`);
            break;
          }
        }
      }
    }
    await this.updateChapterFile(chapterContent, updatedSections, file, frontmatter, existingScenes, beatMap, remoteContentBlocks, chapterId);
  }
  // Update chapter file with both scene/beat list and chapter content
  async updateChapterFile(originalContent, updatedSections, file, frontmatter, scenes, beatMap, contentBlocks, chapterId) {
    const allContentAnchors = [];
    for (const contentBlock of contentBlocks) {
      const refs = await this.apiClient.getContentAnchors(contentBlock.id);
      allContentAnchors.push(...refs);
    }
    const proseRefsByScene = /* @__PURE__ */ new Map();
    const proseRefsByBeat = /* @__PURE__ */ new Map();
    for (const ref of allContentAnchors) {
      if (ref.entity_type === "scene") {
        if (!proseRefsByScene.has(ref.entity_id)) {
          proseRefsByScene.set(ref.entity_id, []);
        }
        proseRefsByScene.get(ref.entity_id).push(ref);
      } else if (ref.entity_type === "beat") {
        if (!proseRefsByBeat.has(ref.entity_id)) {
          proseRefsByBeat.set(ref.entity_id, []);
        }
        proseRefsByBeat.get(ref.entity_id).push(ref);
      }
    }
    const sceneBeatListItems = [];
    for (const scene of scenes.sort((a, b) => a.order_num - b.order_num)) {
      const sceneFileName = this.fileManager.generateSceneFileName(scene);
      const sceneLinkName = sceneFileName.replace(/\.md$/, "");
      const sceneDisplayText = scene.time_ref ? `${scene.goal} - ${scene.time_ref}` : scene.goal;
      const sceneProseRefs = proseRefsByScene.get(scene.id) || [];
      const sceneContentBlockIds = new Set(sceneProseRefs.map((r) => r.content_block_id));
      const hasSceneProse = Array.from(sceneContentBlockIds).some((contentBlockId) => {
        const blockRefs = allContentAnchors.filter((r) => r.content_block_id === contentBlockId);
        return !blockRefs.some((r) => r.entity_type === "beat");
      });
      const sceneMarker = hasSceneProse ? "+" : "-";
      sceneBeatListItems.push(`${sceneMarker} [[${sceneLinkName}|Scene ${scene.order_num}: ${sceneDisplayText}]]`);
      const sceneBeats = [];
      for (const [linkName, beat] of beatMap.entries()) {
        if (beat.scene_id === scene.id) {
          sceneBeats.push(beat);
        }
      }
      for (const beat of sceneBeats.sort((a, b) => a.order_num - b.order_num)) {
        const beatFileName = this.fileManager.generateBeatFileName(beat);
        const beatLinkName = beatFileName.replace(/\.md$/, "");
        const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
        const beatProseRefs = proseRefsByBeat.get(beat.id) || [];
        const hasBeatProse = beatProseRefs.length > 0;
        const beatMarker = hasBeatProse ? "+" : "-";
        sceneBeatListItems.push(`	${beatMarker} [[${beatLinkName}|Beat ${beat.order_num}: ${beatDisplayText}]]`);
      }
    }
    const frontmatterMatch = originalContent.match(/^---\n([\s\S]*?)\n---/);
    const frontmatterText = frontmatterMatch ? frontmatterMatch[0] : "";
    const bodyStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
    const bodyContent = originalContent.substring(bodyStart).trim();
    const chapterNumber = frontmatter.number || "1";
    const chapterTitle = frontmatter.title || "Untitled";
    const listSectionMatch = bodyContent.match(/([\s\S]*?##\s+Scenes\s+&\s+Beats\s*\n+)([\s\S]*?)(?=\n##|$)/);
    const updatedListSection = `## Scenes & Beats

${sceneBeatListItems.join("\n")}

`;
    let updatedBody;
    if (listSectionMatch) {
      const beforeList = listSectionMatch[1];
      const afterList = bodyContent.substring(listSectionMatch.index + listSectionMatch[0].length);
      updatedBody = `${beforeList}${updatedListSection}${afterList}`;
    } else {
      const titleMatch = bodyContent.match(/(#\s+[^\n]+\n+)([\s\S]*)/);
      if (titleMatch) {
        updatedBody = `${titleMatch[1]}${updatedListSection}${titleMatch[2]}`;
      } else {
        updatedBody = `${updatedListSection}${bodyContent}`;
      }
    }
    const chapterHeaderPattern = `##\\s+Chapter\\s+${chapterNumber}:\\s+[^\\n]+`;
    const chapterSectionMatch = updatedBody.match(new RegExp(`([\\s\\S]*?${chapterHeaderPattern}\\s*\\n+)([\\s\\S]*?)(?=\\n##\\s+Chapter\\s+\\d+:|$)`, "i"));
    if (!chapterSectionMatch) {
      const newChapterSection = `

## Chapter ${chapterNumber}: ${chapterTitle}

${updatedSections.join("\n\n")}

`;
      updatedBody = `${updatedBody}${newChapterSection}`;
    } else {
      const beforeChapter = chapterSectionMatch[1];
      const afterChapter = updatedBody.substring(chapterSectionMatch.index + chapterSectionMatch[0].length);
      const newChapterContent = updatedSections.join("\n\n");
      updatedBody = `${beforeChapter}${newChapterContent}

${afterChapter}`;
    }
    const updatedContent = `${frontmatterText}
${updatedBody}`;
    await this.fileManager.getVault().modify(file, updatedContent);
  }
  // Process the "## Chapters, Scenes & Beats" list and update order
  async processChapterList(list, storyId) {
    const existingChapters = await this.apiClient.getChapters(storyId);
    const chapterMap = /* @__PURE__ */ new Map();
    const chapterIdMap = /* @__PURE__ */ new Map();
    for (const chapter of existingChapters) {
      const fileName = `Chapter-${chapter.number}.md`;
      const linkName = fileName.replace(/\.md$/, "");
      chapterMap.set(linkName, chapter);
      chapterIdMap.set(chapter.id, chapter);
    }
    let currentChapter = null;
    let currentScene = null;
    let chapterOrderNum = 1;
    const sceneOrderNums = /* @__PURE__ */ new Map();
    const beatOrderNums = /* @__PURE__ */ new Map();
    for (const item of list.items) {
      if (item.type === "chapter") {
        let title;
        let chapterNumber = null;
        const chapterMatch = item.displayText.match(/Chapter\s+(\d+):\s*(.+)/);
        if (chapterMatch) {
          chapterNumber = parseInt(chapterMatch[1], 10);
          title = chapterMatch[2].trim();
        } else {
          title = item.displayText.trim();
        }
        currentScene = null;
        sceneOrderNums.set("current", 1);
        if (item.linkName) {
          currentChapter = chapterMap.get(item.linkName) || null;
          if (!currentChapter) {
            currentChapter = chapterIdMap.get(item.linkName) || null;
          }
          if (currentChapter) {
            const needsOrderUpdate = currentChapter.number !== chapterOrderNum;
            const needsTitleUpdate = title !== currentChapter.title;
            if (needsOrderUpdate || needsTitleUpdate) {
              currentChapter = await this.apiClient.updateChapter(currentChapter.id, {
                number: chapterOrderNum,
                title: needsTitleUpdate ? title : void 0
              });
              const fileName = `Chapter-${currentChapter.number}.md`;
              const linkName = fileName.replace(/\.md$/, "");
              chapterMap.set(linkName, currentChapter);
              chapterIdMap.set(currentChapter.id, currentChapter);
            }
          }
        } else {
          if (title) {
            currentChapter = await this.apiClient.createChapter(storyId, {
              number: chapterOrderNum,
              title,
              status: "draft"
            });
            const fileName = `Chapter-${currentChapter.number}.md`;
            const linkName = fileName.replace(/\.md$/, "");
            chapterMap.set(linkName, currentChapter);
            chapterIdMap.set(currentChapter.id, currentChapter);
          }
        }
        if (currentChapter) {
          sceneOrderNums.set(currentChapter.id, 1);
        }
        chapterOrderNum++;
      } else if (item.type === "scene" && currentChapter) {
        let goal;
        let timeRef = "";
        const sceneMatch = item.displayText.match(/Scene\s+\d+:\s*(.+)/);
        if (sceneMatch) {
          const sceneText = sceneMatch[1].trim();
          const parts = sceneText.split(/\s*-\s*/);
          goal = parts[0].trim();
          timeRef = parts.length > 1 ? parts.slice(1).join(" - ").trim() : "";
        } else {
          const parts = item.displayText.split(/\s*-\s*/);
          goal = parts[0].trim();
          timeRef = parts.length > 1 ? parts.slice(1).join(" - ").trim() : "";
        }
        const currentSceneOrderNum = sceneOrderNums.get(currentChapter.id) || 1;
        currentScene = null;
        if (item.linkName) {
          const existingScenes = await this.apiClient.getScenes(currentChapter.id);
          const sceneMap = /* @__PURE__ */ new Map();
          const sceneIdMap = /* @__PURE__ */ new Map();
          for (const scene of existingScenes) {
            const fileName = this.fileManager.generateSceneFileName(scene);
            const linkName = fileName.replace(/\.md$/, "");
            sceneMap.set(linkName, scene);
            sceneIdMap.set(scene.id, scene);
          }
          currentScene = sceneMap.get(item.linkName) || null;
          if (!currentScene) {
            currentScene = sceneIdMap.get(item.linkName) || null;
          }
          if (currentScene) {
            const needsOrderUpdate = currentScene.order_num !== currentSceneOrderNum;
            const needsContentUpdate = goal !== currentScene.goal || timeRef !== currentScene.time_ref;
            const needsChapterUpdate = currentScene.chapter_id !== currentChapter.id;
            if (needsOrderUpdate || needsContentUpdate || needsChapterUpdate) {
              currentScene = await this.apiClient.updateScene(currentScene.id, {
                goal,
                time_ref: timeRef,
                order_num: currentSceneOrderNum,
                chapter_id: currentChapter.id
              });
            }
            const existingBeats = await this.apiClient.getBeats(currentScene.id);
            if (existingBeats.length === 0) {
              beatOrderNums.set(currentScene.id, 1);
            } else {
              const maxOrderNum = Math.max(...existingBeats.map((b) => b.order_num));
              beatOrderNums.set(currentScene.id, maxOrderNum + 1);
            }
          }
        } else {
          currentScene = await this.apiClient.createScene({
            story_id: storyId,
            chapter_id: currentChapter.id,
            order_num: currentSceneOrderNum,
            goal,
            time_ref: timeRef
          });
          beatOrderNums.set(currentScene.id, 1);
        }
        sceneOrderNums.set(currentChapter.id, currentSceneOrderNum + 1);
      } else if (item.type === "beat" && currentScene) {
        let intent;
        let outcome = "";
        const beatMatch = item.displayText.match(/Beat\s+\d+:\s*(.+)/);
        if (beatMatch) {
          const beatText = beatMatch[1].trim();
          const parts = beatText.split(/\s*->\s*/);
          intent = parts[0].trim();
          outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
        } else {
          const parts = item.displayText.split(/\s*->\s*/);
          intent = parts[0].trim();
          outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
        }
        const currentBeatOrderNum = beatOrderNums.get(currentScene.id) || 1;
        if (item.linkName) {
          const existingBeats = await this.apiClient.getBeats(currentScene.id);
          const beatMap = /* @__PURE__ */ new Map();
          const beatIdMap = /* @__PURE__ */ new Map();
          for (const beat of existingBeats) {
            const fileName = this.fileManager.generateBeatFileName(beat);
            const linkName = fileName.replace(/\.md$/, "");
            beatMap.set(linkName, beat);
            beatIdMap.set(beat.id, beat);
          }
          let currentBeat = beatMap.get(item.linkName) || null;
          if (!currentBeat) {
            currentBeat = beatIdMap.get(item.linkName) || null;
          }
          if (currentBeat) {
            const needsOrderUpdate = currentBeat.order_num !== currentBeatOrderNum;
            const needsContentUpdate = intent !== currentBeat.intent || outcome !== currentBeat.outcome;
            const needsSceneUpdate = currentBeat.scene_id !== currentScene.id;
            if (needsOrderUpdate || needsContentUpdate || needsSceneUpdate) {
              currentBeat = await this.apiClient.updateBeat(currentBeat.id, {
                intent,
                outcome,
                order_num: currentBeatOrderNum,
                scene_id: currentScene.id
              });
            }
          }
        } else {
          await this.apiClient.createBeat({
            scene_id: currentScene.id,
            order_num: currentBeatOrderNum,
            type: "setup",
            // Default type
            intent,
            outcome
          });
        }
        beatOrderNums.set(currentScene.id, currentBeatOrderNum + 1);
      }
    }
  }
  // Process the "## Beats" list from a scene file and update beat order
  async pushSceneBeats(sceneFilePath, storyId) {
    const file = this.fileManager.getVault().getAbstractFileByPath(sceneFilePath);
    if (!(file instanceof import_obsidian9.TFile)) {
      return;
    }
    const sceneContent = await this.fileManager.getVault().read(file);
    const frontmatter = this.fileManager.parseFrontmatter(sceneContent);
    if (!frontmatter.id) {
      return;
    }
    const sceneId = frontmatter.id;
    const beatList = parseBeatList(sceneContent);
    if (beatList.items.length === 0) {
      return;
    }
    const existingBeats = await this.apiClient.getBeats(sceneId);
    const beatMap = /* @__PURE__ */ new Map();
    const beatIdMap = /* @__PURE__ */ new Map();
    for (const beat of existingBeats) {
      const fileName = this.fileManager.generateBeatFileName(beat);
      const linkName = fileName.replace(/\.md$/, "");
      beatMap.set(linkName, beat);
      beatIdMap.set(beat.id, beat);
    }
    let beatOrderNum = 1;
    for (const item of beatList.items) {
      let intent;
      let outcome = "";
      const beatMatch = item.displayText.match(/Beat\s+\d+:\s*(.+)/);
      if (beatMatch) {
        const beatText = beatMatch[1].trim();
        const parts = beatText.split(/\s*->\s*/);
        intent = parts[0].trim();
        outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
      } else {
        const parts = item.displayText.split(/\s*->\s*/);
        intent = parts[0].trim();
        outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
      }
      if (item.linkName) {
        let currentBeat = beatMap.get(item.linkName) || null;
        if (!currentBeat) {
          currentBeat = beatIdMap.get(item.linkName) || null;
        }
        if (currentBeat) {
          const needsOrderUpdate = currentBeat.order_num !== beatOrderNum;
          const needsContentUpdate = intent !== currentBeat.intent || outcome !== currentBeat.outcome;
          if (needsOrderUpdate || needsContentUpdate) {
            currentBeat = await this.apiClient.updateBeat(currentBeat.id, {
              intent,
              outcome,
              order_num: beatOrderNum
            });
          }
        }
      } else {
        await this.apiClient.createBeat({
          scene_id: sceneId,
          order_num: beatOrderNum,
          type: "setup",
          // Default type
          intent,
          outcome
        });
      }
      beatOrderNum++;
    }
  }
  // Push prose blocks from a story file with hierarchical structure
  // Format: # Story: title, ## Chapter: title, ### Scene: title, #### Beat: title
  async pushStoryContentBlocks(storyFilePath, storyFolderPath, storyId) {
    const file = this.fileManager.getVault().getAbstractFileByPath(storyFilePath);
    if (!(file instanceof import_obsidian9.TFile)) {
      throw new Error(`Story file not found: ${storyFilePath}`);
    }
    const storyContent = await this.fileManager.getVault().read(file);
    const contentsFolderPath = `${storyFolderPath}/03-contents`;
    const storyProse = parseStoryProse(storyContent);
    if (storyProse.sections.length === 0) {
      return;
    }
    const existingChapters = await this.apiClient.getChapters(storyId);
    const chapterByTitle = /* @__PURE__ */ new Map();
    for (const ch of existingChapters) {
      chapterByTitle.set(ch.title.toLowerCase(), ch);
    }
    let currentChapter = null;
    let currentScene = null;
    let currentBeat = null;
    let proseOrderNum = 1;
    const sceneMap = /* @__PURE__ */ new Map();
    const beatMap = /* @__PURE__ */ new Map();
    const remoteContentBlocksCache = /* @__PURE__ */ new Map();
    const getRemoteContentBlocksMap = async (chapterId) => {
      if (!remoteContentBlocksCache.has(chapterId)) {
        const blocks = await this.apiClient.getContentBlocks(chapterId);
        const map2 = /* @__PURE__ */ new Map();
        for (const pb of blocks) {
          map2.set(pb.id, pb);
        }
        remoteContentBlocksCache.set(chapterId, map2);
      }
      return remoteContentBlocksCache.get(chapterId);
    };
    for (const section of storyProse.sections) {
      if (section.type === "scene" && section.scene) {
        const { scene: parsedScene } = section;
        if (!currentChapter) {
          currentChapter = chapterByTitle.get("story prose") || null;
          if (!currentChapter) {
            currentChapter = await this.apiClient.createChapter(storyId, {
              number: 9999,
              title: "Story Prose",
              status: "draft"
            });
            chapterByTitle.set("story prose", currentChapter);
          }
        }
        if (parsedScene.linkName) {
          currentScene = sceneMap.get(parsedScene.linkName) || null;
        }
        if (!currentScene && parsedScene.goal) {
          const allScenes = await this.apiClient.getScenes(currentChapter.id);
          currentScene = allScenes.find((s) => s.goal === parsedScene.goal) || null;
        }
        if (!currentScene) {
          const existingScenes = await this.apiClient.getScenes(currentChapter.id);
          const sceneOrderNum = existingScenes.length > 0 ? Math.max(...existingScenes.map((s) => s.order_num)) + 1 : 1;
          currentScene = await this.apiClient.createScene({
            story_id: storyId,
            chapter_id: currentChapter.id,
            order_num: sceneOrderNum,
            goal: parsedScene.goal,
            time_ref: parsedScene.timeRef
          });
        }
        if (currentScene) {
          const sceneFileName = this.fileManager.generateSceneFileName(currentScene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          sceneMap.set(sceneLinkName, currentScene);
        }
        currentBeat = null;
        proseOrderNum = 1;
      } else if (section.type === "beat" && section.beat) {
        const { beat: parsedBeat } = section;
        if (!currentScene) {
          continue;
        }
        if (parsedBeat.linkName) {
          currentBeat = beatMap.get(parsedBeat.linkName) || null;
        }
        if (!currentBeat && parsedBeat.intent) {
          const allBeats = await this.apiClient.getBeats(currentScene.id);
          currentBeat = allBeats.find((b) => b.intent === parsedBeat.intent) || null;
        }
        if (!currentBeat) {
          const existingBeats = await this.apiClient.getBeats(currentScene.id);
          const beatOrderNum = existingBeats.length > 0 ? Math.max(...existingBeats.map((b) => b.order_num)) + 1 : 1;
          currentBeat = await this.apiClient.createBeat({
            scene_id: currentScene.id,
            order_num: beatOrderNum,
            type: "setup",
            intent: parsedBeat.intent,
            outcome: parsedBeat.outcome
          });
        }
        if (currentBeat) {
          const beatFileName = this.fileManager.generateBeatFileName(currentBeat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          beatMap.set(beatLinkName, currentBeat);
        }
      } else if (section.type === "prose" && section.prose) {
        const { prose: paragraph } = section;
        if (!currentChapter) {
          currentChapter = chapterByTitle.get("story prose") || null;
          if (!currentChapter) {
            currentChapter = await this.apiClient.createChapter(storyId, {
              number: 9999,
              title: "Story Prose",
              status: "draft"
            });
            chapterByTitle.set("story prose", currentChapter);
          }
        }
        const remoteContentBlocksMap = await getRemoteContentBlocksMap(currentChapter.id);
        let localContentBlock = null;
        let remoteContentBlock = null;
        if (paragraph.linkName) {
          const contentBlockFilePath = await this.findContentBlockFileByLinkName(contentsFolderPath, paragraph.linkName);
          if (contentBlockFilePath) {
            localContentBlock = await this.fileManager.readContentBlockFromFile(contentBlockFilePath);
          }
          if (!localContentBlock) {
            localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          }
          if (localContentBlock) {
            remoteContentBlock = remoteContentBlocksMap.get(localContentBlock.id) || null;
          } else {
            const normalizedContent = paragraph.content.trim();
            for (const [, remotePB] of remoteContentBlocksMap.entries()) {
              if (remotePB.content.trim() === normalizedContent) {
                remoteContentBlock = remotePB;
                break;
              }
            }
          }
        } else {
          localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          const normalizedContent = paragraph.content.trim();
          for (const [, remotePB] of remoteContentBlocksMap.entries()) {
            if (remotePB.content.trim() === normalizedContent) {
              remoteContentBlock = remotePB;
              if (!localContentBlock) {
                localContentBlock = await this.findContentBlockById(contentsFolderPath, remotePB.id);
              }
              break;
            }
          }
        }
        const status = compareContentBlocks(paragraph, localContentBlock, remoteContentBlock);
        let finalContentBlock;
        switch (status) {
          case "new": {
            finalContentBlock = await this.apiClient.createContentBlock(currentChapter.id, {
              order_num: proseOrderNum++,
              kind: "final",
              content: paragraph.content
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            if (currentScene) {
              await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", currentScene.id);
            }
            if (currentBeat) {
              await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
            }
            break;
          }
          case "unchanged": {
            if (!localContentBlock && remoteContentBlock) {
              finalContentBlock = remoteContentBlock;
              const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
              await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            } else if (localContentBlock) {
              finalContentBlock = localContentBlock;
              proseOrderNum++;
            } else {
              finalContentBlock = remoteContentBlock;
              proseOrderNum++;
            }
            break;
          }
          case "local_modified": {
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: paragraph.content,
              order_num: proseOrderNum++
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            break;
          }
          case "remote_modified": {
            finalContentBlock = remoteContentBlock;
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            proseOrderNum++;
            break;
          }
          case "conflict": {
            const resolution = await this.resolveConflict(localContentBlock, remoteContentBlock);
            let resolvedContent = resolution.resolution === "local" ? paragraph.content : resolution.resolution === "remote" ? remoteContentBlock.content : resolution.mergedContent || paragraph.content;
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: resolvedContent,
              order_num: proseOrderNum++
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            break;
          }
        }
      }
    }
  }
  // Push prose blocks from a scene file (scene-level prose, not inside chapters)
  async pushSceneContentBlocks(sceneFilePath, storyFolderPath) {
    const file = this.fileManager.getVault().getAbstractFileByPath(sceneFilePath);
    if (!(file instanceof import_obsidian9.TFile)) {
      return;
    }
    const sceneContent = await this.fileManager.getVault().read(file);
    const frontmatter = this.fileManager.parseFrontmatter(sceneContent);
    if (!frontmatter.id || !frontmatter.story_id) {
      return;
    }
    const sceneId = frontmatter.id;
    const storyId = frontmatter.story_id;
    const contentsFolderPath = `${storyFolderPath}/03-contents`;
    const sceneProse = parseSceneProse(sceneContent);
    if (sceneProse.sections.length === 0) {
      return;
    }
    const chapters = await this.apiClient.getChapters(storyId);
    let tempChapter = chapters.find((c) => c.title === "Scene-Level Prose");
    if (!tempChapter) {
      tempChapter = await this.apiClient.createChapter(storyId, {
        number: 9998,
        // High number to keep it at the end
        title: "Scene-Level Prose",
        status: "draft"
      });
    }
    const remoteContentBlocks = await this.apiClient.getContentBlocks(tempChapter.id);
    const remoteContentBlocksMap = /* @__PURE__ */ new Map();
    for (const pb of remoteContentBlocks) {
      remoteContentBlocksMap.set(pb.id, pb);
    }
    const existingBeats = await this.apiClient.getBeats(sceneId);
    const beatMap = /* @__PURE__ */ new Map();
    const beatIdMap = /* @__PURE__ */ new Map();
    for (const beat of existingBeats) {
      const fileName = this.fileManager.generateBeatFileName(beat);
      const linkName = fileName.replace(/\.md$/, "");
      beatMap.set(linkName, beat);
      beatIdMap.set(beat.id, beat);
    }
    let proseOrderNum = 1;
    let currentBeat = null;
    const updatedSections = [];
    for (const section of sceneProse.sections) {
      if (section.type === "beat" && section.beat) {
        const { beat: parsedBeat } = section;
        if (parsedBeat.linkName) {
          currentBeat = beatMap.get(parsedBeat.linkName) || null;
          if (!currentBeat) {
            currentBeat = beatIdMap.get(parsedBeat.linkName) || null;
          }
        }
        if (currentBeat) {
          const beatFileName = this.fileManager.generateBeatFileName(currentBeat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          const beatDisplayText = currentBeat.outcome ? `${currentBeat.intent} -> ${currentBeat.outcome}` : currentBeat.intent;
          updatedSections.push(`### Beat: [[${beatLinkName}|${beatDisplayText}]]`);
        }
      } else if (section.type === "prose" && section.prose) {
        const { prose: paragraph } = section;
        let localContentBlock = null;
        let remoteContentBlock = null;
        if (paragraph.linkName) {
          const contentBlockFilePath = await this.findContentBlockFileByLinkName(contentsFolderPath, paragraph.linkName);
          if (contentBlockFilePath) {
            localContentBlock = await this.fileManager.readContentBlockFromFile(contentBlockFilePath);
          }
          if (!localContentBlock) {
            localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          }
          if (localContentBlock) {
            remoteContentBlock = remoteContentBlocksMap.get(localContentBlock.id) || null;
          } else {
            const normalizedContent = paragraph.content.trim();
            for (const [id2, remotePB] of remoteContentBlocksMap.entries()) {
              if (remotePB.content.trim() === normalizedContent) {
                remoteContentBlock = remotePB;
                break;
              }
            }
          }
        } else {
          localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          const normalizedContent = paragraph.content.trim();
          for (const [id2, remotePB] of remoteContentBlocksMap.entries()) {
            if (remotePB.content.trim() === normalizedContent) {
              remoteContentBlock = remotePB;
              if (!localContentBlock) {
                localContentBlock = await this.findContentBlockById(contentsFolderPath, remotePB.id);
              }
              break;
            }
          }
        }
        const status = compareContentBlocks(paragraph, localContentBlock, remoteContentBlock);
        let finalContentBlock;
        switch (status) {
          case "new": {
            finalContentBlock = await this.apiClient.createContentBlock(tempChapter.id, {
              order_num: proseOrderNum++,
              kind: "final",
              content: paragraph.content
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", sceneId);
            if (currentBeat) {
              await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", currentBeat.id);
            }
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            break;
          }
          case "unchanged": {
            if (!localContentBlock && remoteContentBlock) {
              finalContentBlock = remoteContentBlock;
              const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
              await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            } else if (localContentBlock) {
              if (localContentBlock.order_num !== proseOrderNum) {
                finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
                  order_num: proseOrderNum++
                });
                const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
                await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
              } else {
                finalContentBlock = localContentBlock;
                proseOrderNum++;
              }
            } else {
              finalContentBlock = remoteContentBlock;
              proseOrderNum++;
            }
            if (paragraph.linkName) {
              updatedSections.push(`[[${paragraph.linkName}|${paragraph.content}]]`);
            } else {
              const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
              updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            }
            break;
          }
          case "local_modified": {
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: paragraph.content,
              order_num: proseOrderNum++
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            break;
          }
          case "remote_modified": {
            finalContentBlock = remoteContentBlock;
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${finalContentBlock.content}]]`);
            new import_obsidian9.Notice(`Scene prose block updated from remote: ${linkName}`, 3e3);
            proseOrderNum++;
            break;
          }
          case "conflict": {
            const resolution = await this.resolveConflict(localContentBlock, remoteContentBlock);
            let resolvedContent;
            if (resolution.resolution === "local") {
              resolvedContent = paragraph.content;
            } else if (resolution.resolution === "remote") {
              resolvedContent = remoteContentBlock.content;
            } else {
              resolvedContent = resolution.mergedContent || paragraph.content;
            }
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: resolvedContent,
              order_num: proseOrderNum++
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${resolvedContent}]]`);
            break;
          }
        }
      }
    }
    if (updatedSections.length > 0) {
      const frontmatterMatch = sceneContent.match(/^---\n([\s\S]*?)\n---/);
      const frontmatterEnd = frontmatterMatch ? frontmatterMatch[0].length : 0;
      const afterFrontmatter = sceneContent.substring(frontmatterEnd).trim();
      const beatsSectionMatch = afterFrontmatter.match(/\n##\s+Beats\s*\n/);
      const insertionPoint = beatsSectionMatch ? frontmatterEnd + afterFrontmatter.indexOf(beatsSectionMatch[0]) : sceneContent.length;
      const beforeProse = sceneContent.substring(0, insertionPoint).trimEnd();
      const afterProse = sceneContent.substring(insertionPoint);
      const updatedContent = `${beforeProse}

${updatedSections.join("\n\n")}
${afterProse}`;
      await this.fileManager.getVault().modify(file, updatedContent);
    }
  }
  // Push prose blocks from a beat file
  async pushBeatContentBlocks(beatFilePath, storyFolderPath) {
    const file = this.fileManager.getVault().getAbstractFileByPath(beatFilePath);
    if (!(file instanceof import_obsidian9.TFile)) {
      return;
    }
    const beatContent = await this.fileManager.getVault().read(file);
    const frontmatter = this.fileManager.parseFrontmatter(beatContent);
    if (!frontmatter.id || !frontmatter.scene_id) {
      return;
    }
    const beatId = frontmatter.id;
    const sceneId = frontmatter.scene_id;
    const contentsFolderPath = `${storyFolderPath}/03-contents`;
    const beatProse = parseBeatProse(beatContent);
    if (beatProse.sections.length === 0) {
      return;
    }
    const scene = await this.apiClient.getScene(sceneId);
    if (!scene) {
      return;
    }
    const storyId = scene.story_id;
    const chapters = await this.apiClient.getChapters(storyId);
    let tempChapter = chapters.find((c) => c.title === "Beat-Level Prose");
    if (!tempChapter) {
      tempChapter = await this.apiClient.createChapter(storyId, {
        number: 9997,
        // High number to keep it at the end
        title: "Beat-Level Prose",
        status: "draft"
      });
    }
    const remoteContentBlocks = await this.apiClient.getContentBlocks(tempChapter.id);
    const remoteContentBlocksMap = /* @__PURE__ */ new Map();
    for (const pb of remoteContentBlocks) {
      remoteContentBlocksMap.set(pb.id, pb);
    }
    let proseOrderNum = 1;
    const updatedSections = [];
    const beat = await this.apiClient.getBeat(beatId);
    if (beat) {
      const beatFileName = this.fileManager.generateBeatFileName(beat);
      const beatLinkName = beatFileName.replace(/\.md$/, "");
      const beatDisplayText = beat.outcome ? `${beat.intent} -> ${beat.outcome}` : beat.intent;
      updatedSections.push(`## Beat: [[${beatLinkName}|${beatDisplayText}]]`);
    }
    for (const section of beatProse.sections) {
      if (section.type === "prose" && section.prose) {
        const { prose: paragraph } = section;
        let localContentBlock = null;
        let remoteContentBlock = null;
        if (paragraph.linkName) {
          const contentBlockFilePath = await this.findContentBlockFileByLinkName(contentsFolderPath, paragraph.linkName);
          if (contentBlockFilePath) {
            localContentBlock = await this.fileManager.readContentBlockFromFile(contentBlockFilePath);
          }
          if (!localContentBlock) {
            localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          }
          if (localContentBlock) {
            remoteContentBlock = remoteContentBlocksMap.get(localContentBlock.id) || null;
          } else {
            const normalizedContent = paragraph.content.trim();
            for (const [, remotePB] of remoteContentBlocksMap.entries()) {
              if (remotePB.content.trim() === normalizedContent) {
                remoteContentBlock = remotePB;
                break;
              }
            }
          }
        } else {
          localContentBlock = await this.findContentBlockByContent(contentsFolderPath, paragraph.content);
          const normalizedContent = paragraph.content.trim();
          for (const [, remotePB] of remoteContentBlocksMap.entries()) {
            if (remotePB.content.trim() === normalizedContent) {
              remoteContentBlock = remotePB;
              if (!localContentBlock) {
                localContentBlock = await this.findContentBlockById(contentsFolderPath, remotePB.id);
              }
              break;
            }
          }
        }
        const status = compareContentBlocks(paragraph, localContentBlock, remoteContentBlock);
        let finalContentBlock;
        switch (status) {
          case "new": {
            finalContentBlock = await this.apiClient.createContentBlock(tempChapter.id, {
              order_num: proseOrderNum++,
              kind: "final",
              content: paragraph.content
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            await this.apiClient.createContentAnchor(finalContentBlock.id, "scene", sceneId);
            await this.apiClient.createContentAnchor(finalContentBlock.id, "beat", beatId);
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            break;
          }
          case "unchanged": {
            if (!localContentBlock && remoteContentBlock) {
              finalContentBlock = remoteContentBlock;
              const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
              await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
              const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
              updatedSections.push(`[[${linkName}|${remoteContentBlock.content}]]`);
            } else if (localContentBlock) {
              finalContentBlock = localContentBlock;
              const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
              updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
              proseOrderNum++;
            } else {
              proseOrderNum++;
              continue;
            }
            break;
          }
          case "local_modified": {
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: paragraph.content,
              order_num: proseOrderNum++
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${paragraph.content}]]`);
            break;
          }
          case "remote_modified": {
            finalContentBlock = remoteContentBlock;
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            proseOrderNum++;
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${remoteContentBlock.content}]]`);
            break;
          }
          case "conflict": {
            const resolution = await this.resolveConflict(localContentBlock, remoteContentBlock);
            let resolvedContent;
            if (resolution.resolution === "local") {
              resolvedContent = paragraph.content;
            } else if (resolution.resolution === "remote") {
              resolvedContent = remoteContentBlock.content;
            } else {
              resolvedContent = resolution.mergedContent || paragraph.content;
            }
            finalContentBlock = await this.apiClient.updateContentBlock(localContentBlock.id, {
              content: resolvedContent,
              order_num: proseOrderNum++
            });
            const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, finalContentBlock);
            await this.fileManager.writeContentBlockFile(finalContentBlock, filePath, void 0);
            const linkName = this.fileManager.generateContentBlockFileName(finalContentBlock).replace(/\.md$/, "");
            updatedSections.push(`[[${linkName}|${resolvedContent}]]`);
            break;
          }
        }
      }
    }
    if (updatedSections.length > 1) {
      const frontmatterMatch = beatContent.match(/^---\n([\s\S]*?)\n---/);
      const frontmatterEnd = frontmatterMatch ? frontmatterMatch[0].length : 0;
      const afterFrontmatter = beatContent.substring(frontmatterEnd).trim();
      const beatSectionMatch = afterFrontmatter.match(/##\s+Beat:\s*.+[\s\S]*/);
      if (beatSectionMatch) {
        const beforeBeatSection = beatContent.substring(0, frontmatterEnd + afterFrontmatter.indexOf(beatSectionMatch[0]));
        const updatedContent = `${beforeBeatSection.trimEnd()}

${updatedSections.join("\n\n")}
`;
        await this.fileManager.getVault().modify(file, updatedContent);
      } else {
        const updatedContent = `${beatContent.trimEnd()}

${updatedSections.join("\n\n")}
`;
        await this.fileManager.getVault().modify(file, updatedContent);
      }
    }
  }
  // Process the "## Orphan Scenes" list and update orphan scenes order
  async processOrphanScenesList(list, storyId) {
    const allScenes = await this.apiClient.getScenesByStory(storyId);
    const sceneMap = /* @__PURE__ */ new Map();
    const sceneIdMap = /* @__PURE__ */ new Map();
    const orphanScenes = allScenes.filter((s) => !s.chapter_id);
    for (const scene of orphanScenes) {
      const fileName = this.fileManager.generateSceneFileName(scene);
      const linkName = fileName.replace(/\.md$/, "");
      sceneMap.set(linkName, scene);
      sceneIdMap.set(scene.id, scene);
    }
    const beatMap = /* @__PURE__ */ new Map();
    const beatIdMap = /* @__PURE__ */ new Map();
    for (const scene of orphanScenes) {
      const beats = await this.apiClient.getBeats(scene.id);
      for (const beat of beats) {
        const fileName = this.fileManager.generateBeatFileName(beat);
        const linkName = fileName.replace(/\.md$/, "");
        beatMap.set(linkName, beat);
        beatIdMap.set(beat.id, beat);
      }
    }
    let currentScene = null;
    let sceneOrderNum = 1;
    const beatOrderNums = /* @__PURE__ */ new Map();
    for (const item of list.items) {
      if (item.type === "scene") {
        let goal;
        let timeRef = "";
        const sceneMatch = item.displayText.match(/Scene\s+\d+:\s*(.+)/);
        if (sceneMatch) {
          const sceneText = sceneMatch[1].trim();
          const parts = sceneText.split(/\s*-\s*/);
          goal = parts[0].trim();
          timeRef = parts.length > 1 ? parts.slice(1).join(" - ").trim() : "";
        } else {
          const parts = item.displayText.split(/\s*-\s*/);
          goal = parts[0].trim();
          timeRef = parts.length > 1 ? parts.slice(1).join(" - ").trim() : "";
        }
        if (item.linkName) {
          currentScene = sceneMap.get(item.linkName) || null;
          if (!currentScene) {
            currentScene = sceneIdMap.get(item.linkName) || null;
          }
          if (currentScene) {
            const needsOrderUpdate = currentScene.order_num !== sceneOrderNum;
            const needsContentUpdate = goal !== currentScene.goal || timeRef !== currentScene.time_ref;
            if (needsOrderUpdate || needsContentUpdate) {
              currentScene = await this.apiClient.updateScene(currentScene.id, {
                goal,
                time_ref: timeRef,
                order_num: sceneOrderNum
              });
            }
            const existingBeats = await this.apiClient.getBeats(currentScene.id);
            if (existingBeats.length === 0) {
              beatOrderNums.set(currentScene.id, 1);
            } else {
              const maxOrderNum = Math.max(...existingBeats.map((b) => b.order_num));
              beatOrderNums.set(currentScene.id, maxOrderNum + 1);
            }
          }
        } else {
          currentScene = await this.apiClient.createScene({
            story_id: storyId,
            chapter_id: null,
            // Orphan scene
            order_num: sceneOrderNum,
            goal,
            time_ref: timeRef
          });
          const sceneFileName = this.fileManager.generateSceneFileName(currentScene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          sceneMap.set(sceneLinkName, currentScene);
          sceneIdMap.set(currentScene.id, currentScene);
          beatOrderNums.set(currentScene.id, 1);
        }
        sceneOrderNum++;
      } else if (item.type === "beat" && currentScene) {
        let intent;
        let outcome = "";
        const beatMatch = item.displayText.match(/Beat\s+\d+:\s*(.+)/);
        if (beatMatch) {
          const beatText = beatMatch[1].trim();
          const parts = beatText.split(/\s*->\s*/);
          intent = parts[0].trim();
          outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
        } else {
          const parts = item.displayText.split(/\s*->\s*/);
          intent = parts[0].trim();
          outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
        }
        const currentBeatOrderNum = beatOrderNums.get(currentScene.id) || 1;
        if (item.linkName) {
          let currentBeat = beatMap.get(item.linkName) || null;
          if (!currentBeat) {
            currentBeat = beatIdMap.get(item.linkName) || null;
          }
          if (currentBeat) {
            const needsOrderUpdate = currentBeat.order_num !== currentBeatOrderNum;
            const needsContentUpdate = intent !== currentBeat.intent || outcome !== currentBeat.outcome;
            const needsSceneUpdate = currentBeat.scene_id !== currentScene.id;
            if (needsOrderUpdate || needsContentUpdate || needsSceneUpdate) {
              currentBeat = await this.apiClient.updateBeat(currentBeat.id, {
                intent,
                outcome,
                order_num: currentBeatOrderNum,
                scene_id: currentScene.id
              });
            }
          }
        } else {
          await this.apiClient.createBeat({
            scene_id: currentScene.id,
            order_num: currentBeatOrderNum,
            type: "setup",
            // Default type
            intent,
            outcome
          });
        }
        beatOrderNums.set(currentScene.id, currentBeatOrderNum + 1);
      }
    }
  }
  // Process the "## Orphan Beats" list and update orphan beats order
  async processOrphanBeatsList(list, storyId) {
    const allBeats = await this.apiClient.getBeatsByStory(storyId);
    const allScenes = await this.apiClient.getScenesByStory(storyId);
    const sceneIdSet = new Set(allScenes.map((s) => s.id));
    const orphanBeats = allBeats.filter((b) => !b.scene_id || !sceneIdSet.has(b.scene_id));
    const beatMap = /* @__PURE__ */ new Map();
    const beatIdMap = /* @__PURE__ */ new Map();
    for (const beat of orphanBeats) {
      const fileName = this.fileManager.generateBeatFileName(beat);
      const linkName = fileName.replace(/\.md$/, "");
      beatMap.set(linkName, beat);
      beatIdMap.set(beat.id, beat);
    }
    let beatOrderNum = 1;
    for (const item of list.items) {
      let intent;
      let outcome = "";
      const beatMatch = item.displayText.match(/Beat\s+\d+:\s*(.+)/);
      if (beatMatch) {
        const beatText = beatMatch[1].trim();
        const parts = beatText.split(/\s*->\s*/);
        intent = parts[0].trim();
        outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
      } else {
        const parts = item.displayText.split(/\s*->\s*/);
        intent = parts[0].trim();
        outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
      }
      if (item.linkName) {
        let currentBeat = beatMap.get(item.linkName) || null;
        if (!currentBeat) {
          currentBeat = beatIdMap.get(item.linkName) || null;
        }
        if (currentBeat) {
          const needsOrderUpdate = currentBeat.order_num !== beatOrderNum;
          const needsContentUpdate = intent !== currentBeat.intent || outcome !== currentBeat.outcome;
          if (needsOrderUpdate || needsContentUpdate) {
            currentBeat = await this.apiClient.updateBeat(currentBeat.id, {
              intent,
              outcome,
              order_num: beatOrderNum
              // Keep scene_id as null or invalid (orphan) - don't update it
            });
          }
        }
      } else {
        const allScenes2 = await this.apiClient.getScenesByStory(storyId);
        let orphanBeatScene = allScenes2.find((s) => !s.chapter_id && s.goal.startsWith("Orphan Beats Container"));
        if (!orphanBeatScene) {
          orphanBeatScene = await this.apiClient.createScene({
            story_id: storyId,
            chapter_id: null,
            order_num: 9999,
            // High number to keep it at the end
            goal: "Orphan Beats Container",
            time_ref: ""
          });
        }
        await this.apiClient.createBeat({
          scene_id: orphanBeatScene.id,
          order_num: beatOrderNum,
          type: "setup",
          // Default type
          intent,
          outcome
        });
      }
      beatOrderNum++;
    }
  }
  // Process the "## Scenes & Beats" list and create/update/delete scenes and beats
  async processSceneBeatList(list, chapterId, storyId) {
    const existingScenes = await this.apiClient.getScenes(chapterId);
    const sceneMap = /* @__PURE__ */ new Map();
    const sceneIdMap = /* @__PURE__ */ new Map();
    for (const scene of existingScenes) {
      const fileName = this.fileManager.generateSceneFileName(scene);
      const linkName = fileName.replace(/\.md$/, "");
      sceneMap.set(linkName, scene);
      sceneIdMap.set(scene.id, scene);
    }
    const beatMap = /* @__PURE__ */ new Map();
    const beatIdMap = /* @__PURE__ */ new Map();
    for (const scene of existingScenes) {
      const beats = await this.apiClient.getBeats(scene.id);
      for (const beat of beats) {
        const fileName = this.fileManager.generateBeatFileName(beat);
        const linkName = fileName.replace(/\.md$/, "");
        beatMap.set(linkName, beat);
        beatIdMap.set(beat.id, beat);
      }
    }
    let currentScene = null;
    let sceneOrderNum = 1;
    const beatOrderNums = /* @__PURE__ */ new Map();
    for (const item of list.items) {
      if (item.type === "scene") {
        currentScene = null;
        let goal;
        let timeRef = "";
        const sceneMatch = item.displayText.match(/Scene\s+\d+:\s*(.+)/);
        if (sceneMatch) {
          const sceneText = sceneMatch[1].trim();
          const parts = sceneText.split(/\s*-\s*/);
          goal = parts[0].trim();
          timeRef = parts.length > 1 ? parts.slice(1).join(" - ").trim() : "";
        } else {
          const parts = item.displayText.split(/\s*-\s*/);
          goal = parts[0].trim();
          timeRef = parts.length > 1 ? parts.slice(1).join(" - ").trim() : "";
        }
        currentScene = null;
        if (item.linkName) {
          currentScene = sceneMap.get(item.linkName) || null;
          if (!currentScene) {
            currentScene = sceneIdMap.get(item.linkName) || null;
          }
          if (currentScene) {
            const needsOrderUpdate = currentScene.order_num !== sceneOrderNum;
            const needsContentUpdate = goal !== currentScene.goal || timeRef !== currentScene.time_ref;
            if (needsOrderUpdate || needsContentUpdate) {
              currentScene = await this.apiClient.updateScene(currentScene.id, {
                goal,
                time_ref: timeRef,
                order_num: sceneOrderNum
              });
            }
            const existingBeats = await this.apiClient.getBeats(currentScene.id);
            if (existingBeats.length === 0) {
              beatOrderNums.set(currentScene.id, 1);
            } else {
              const maxOrderNum = Math.max(...existingBeats.map((b) => b.order_num));
              beatOrderNums.set(currentScene.id, maxOrderNum + 1);
            }
          }
        } else {
          currentScene = await this.apiClient.createScene({
            story_id: storyId,
            chapter_id: chapterId,
            order_num: sceneOrderNum,
            goal,
            time_ref: timeRef
          });
          const sceneFileName = this.fileManager.generateSceneFileName(currentScene);
          const sceneLinkName = sceneFileName.replace(/\.md$/, "");
          sceneMap.set(sceneLinkName, currentScene);
          sceneIdMap.set(currentScene.id, currentScene);
          beatOrderNums.set(currentScene.id, 1);
        }
        sceneOrderNum++;
      } else if (item.type === "beat" && currentScene) {
        let intent;
        let outcome = "";
        const beatMatch = item.displayText.match(/Beat\s+\d+:\s*(.+)/);
        if (beatMatch) {
          const beatText = beatMatch[1].trim();
          const parts = beatText.split(/\s*->\s*/);
          intent = parts[0].trim();
          outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
        } else {
          const parts = item.displayText.split(/\s*->\s*/);
          intent = parts[0].trim();
          outcome = parts.length > 1 ? parts.slice(1).join(" -> ").trim() : "";
        }
        const currentBeatOrderNum = beatOrderNums.get(currentScene.id) || 1;
        if (item.linkName) {
          let currentBeat = beatMap.get(item.linkName) || null;
          if (!currentBeat) {
            currentBeat = beatIdMap.get(item.linkName) || null;
          }
          if (currentBeat) {
            const needsOrderUpdate = currentBeat.order_num !== currentBeatOrderNum;
            const needsContentUpdate = intent !== currentBeat.intent || outcome !== currentBeat.outcome;
            const needsSceneUpdate = currentBeat.scene_id !== currentScene.id;
            if (needsOrderUpdate || needsContentUpdate || needsSceneUpdate) {
              currentBeat = await this.apiClient.updateBeat(currentBeat.id, {
                intent,
                outcome,
                order_num: currentBeatOrderNum,
                scene_id: currentScene.id
              });
              if (needsSceneUpdate) {
                const beatFileName = this.fileManager.generateBeatFileName(currentBeat);
                const beatLinkName = beatFileName.replace(/\.md$/, "");
                beatMap.set(beatLinkName, currentBeat);
                beatIdMap.set(currentBeat.id, currentBeat);
              }
            }
          }
        } else {
          const newBeat = await this.apiClient.createBeat({
            scene_id: currentScene.id,
            order_num: currentBeatOrderNum,
            type: "setup",
            // Default type
            intent,
            outcome
          });
          const beatFileName = this.fileManager.generateBeatFileName(newBeat);
          const beatLinkName = beatFileName.replace(/\.md$/, "");
          beatMap.set(beatLinkName, newBeat);
          beatIdMap.set(newBeat.id, newBeat);
        }
        beatOrderNums.set(currentScene.id, currentBeatOrderNum + 1);
      }
    }
  }
  // Find content block file by link name (searches recursively in all type subfolders)
  async findContentBlockFileByLinkName(contentsRoot, linkName) {
    const root2 = this.fileManager.getVault().getAbstractFileByPath(contentsRoot);
    if (!(root2 instanceof import_obsidian9.TFolder))
      return null;
    const target = `${linkName}.md`;
    const stack = [root2];
    while (stack.length) {
      const folder = stack.pop();
      for (const child of folder.children) {
        if (child instanceof import_obsidian9.TFolder) {
          stack.push(child);
        } else if (child instanceof import_obsidian9.TFile && child.name === target) {
          return child.path;
        }
      }
    }
    return null;
  }
  // Find prose block by content when file name doesn't match (searches recursively in all type subfolders)
  async findContentBlockByContent(contentsFolderPath, content) {
    try {
      const folder = this.fileManager.getVault().getAbstractFileByPath(contentsFolderPath);
      if (!(folder instanceof import_obsidian9.TFolder)) {
        return null;
      }
      const normalizedContent = content.trim();
      const stack = [folder];
      while (stack.length) {
        const currentFolder = stack.pop();
        for (const child of currentFolder.children) {
          if (child instanceof import_obsidian9.TFolder) {
            stack.push(child);
          } else if (child instanceof import_obsidian9.TFile && child.extension === "md") {
            const contentBlock = await this.fileManager.readContentBlockFromFile(child.path);
            if (contentBlock && contentBlock.content.trim() === normalizedContent) {
              return contentBlock;
            }
          }
        }
      }
    } catch (err) {
      console.error("Error searching for prose block by content:", err);
    }
    return null;
  }
  // Find prose block by ID when we have remote ID but need local file (searches recursively in all type subfolders)
  async findContentBlockById(contentsFolderPath, id2) {
    try {
      const folder = this.fileManager.getVault().getAbstractFileByPath(contentsFolderPath);
      if (!(folder instanceof import_obsidian9.TFolder)) {
        return null;
      }
      const stack = [folder];
      while (stack.length) {
        const currentFolder = stack.pop();
        for (const child of currentFolder.children) {
          if (child instanceof import_obsidian9.TFolder) {
            stack.push(child);
          } else if (child instanceof import_obsidian9.TFile && child.extension === "md") {
            const contentBlock = await this.fileManager.readContentBlockFromFile(child.path);
            if (contentBlock && contentBlock.id === id2) {
              return contentBlock;
            }
          }
        }
      }
    } catch (err) {
      console.error("Error searching for prose block by ID:", err);
    }
    return null;
  }
  // Get the correct file path for a content block (always uses type subfolders)
  getContentBlockFilePath(storyFolderPath, contentBlock) {
    const fileName = this.fileManager.generateContentBlockFileName(contentBlock);
    const typeFolderPath = this.fileManager.getContentBlockFolderPath(storyFolderPath, contentBlock.type || "text");
    return `${typeFolderPath}/${fileName}`;
  }
  // Get content block file path from contents folder path (03-contents)
  async getContentBlockFilePathFromContents(contentsFolderPath, contentBlock) {
    const typeFolder = this.fileManager.getContentTypeFolder(contentBlock.type || "text");
    const typeFolderPath = `${contentsFolderPath}/${typeFolder}`;
    await this.fileManager.ensureFolderExists(typeFolderPath);
    const fileName = this.fileManager.generateContentBlockFileName(contentBlock);
    return `${typeFolderPath}/${fileName}`;
  }
  // Resolve conflict using modal or auto-resolve based on mode
  async resolveConflict(localContentBlock, remoteContentBlock) {
    if (this.settings.mode === "local") {
      return { resolution: "local" };
    }
    return new Promise((resolve) => {
      const modal = new ConflictModal(
        this.app,
        localContentBlock,
        remoteContentBlock,
        async (result) => {
          resolve(result);
        }
      );
      modal.open();
    });
  }
  // Update the Chapter section in chapter file (hierarchical structure)
  async updateChapterProseSectionHierarchical(originalContent, updatedSections, file, frontmatter) {
    const frontmatterMatch = originalContent.match(/^---\n([\s\S]*?)\n---/);
    const frontmatterText = frontmatterMatch ? frontmatterMatch[0] : "";
    const bodyStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
    const bodyContent = originalContent.substring(bodyStart).trim();
    const chapterNumber = frontmatter.number || "1";
    const chapterTitle = frontmatter.title || "Untitled";
    const chapterHeaderPattern = `##\\s+Chapter\\s+${chapterNumber}:\\s+[^\\n]+`;
    const chapterSectionMatch = bodyContent.match(new RegExp(`([\\s\\S]*?${chapterHeaderPattern}\\s*\\n+)([\\s\\S]*?)(?=\\n##\\s+Chapter\\s+\\d+:|$)`, "i"));
    if (!chapterSectionMatch) {
      const newChapterSection = `

## Chapter ${chapterNumber}: ${chapterTitle}

${updatedSections.join("\n\n")}

`;
      const updatedContent2 = `${frontmatterText}
${bodyContent}${newChapterSection}`;
      await this.fileManager.getVault().modify(file, updatedContent2);
      return;
    }
    const beforeChapter = chapterSectionMatch[1];
    const afterChapter = bodyContent.substring(chapterSectionMatch.index + chapterSectionMatch[0].length);
    const newChapterContent = updatedSections.join("\n\n");
    const updatedBody = `${beforeChapter}${newChapterContent}

${afterChapter}`;
    const updatedContent = `${frontmatterText}
${updatedBody}`;
    await this.fileManager.getVault().modify(file, updatedContent);
  }
  // Update the Prose section in chapter file
  async updateChapterProseSection(originalContent, updatedParagraphs, file) {
    const frontmatterMatch = originalContent.match(/^---\n([\s\S]*?)\n---/);
    const frontmatter = frontmatterMatch ? frontmatterMatch[0] : "";
    const bodyStart = frontmatterMatch ? frontmatterMatch[0].length : 0;
    const bodyContent = originalContent.substring(bodyStart).trim();
    const proseSectionMatch = bodyContent.match(/([\s\S]*?##\s+Prose\s*\n\n)([\s\S]*?)(?=\n##|\n*$)/);
    if (!proseSectionMatch) {
      const newProseSection = `

## Prose

${updatedParagraphs.join("\n\n")}

`;
      const updatedContent2 = `${frontmatter}
${bodyContent}${newProseSection}`;
      await this.fileManager.getVault().modify(file, updatedContent2);
      return;
    }
    const beforeProse = proseSectionMatch[1];
    const newProseContent = updatedParagraphs.join("\n\n");
    const afterProse = bodyContent.substring(proseSectionMatch.index + proseSectionMatch[0].length);
    const updatedBody = `${beforeProse}${newProseContent}

${afterProse}`;
    const updatedContent = `${frontmatter}
${updatedBody}`;
    await this.fileManager.getVault().modify(file, updatedContent);
  }
  async writeChapterBundle(data) {
    const folderPath = this.fileManager.getStoryFolderPath(data.story.title);
    await this.ensureStoryFolders(folderPath);
    for (const contentBlock of data.contentBlocks) {
      await this.writeContentBlockToFolder(folderPath, data.story.title, contentBlock);
    }
    const chaptersFolderPath = `${folderPath}/00-chapters`;
    const chapterFileName = `Chapter-${data.chapter.number}.md`;
    const chapterFilePath = `${chaptersFolderPath}/${chapterFileName}`;
    await this.fileManager.writeChapterFile(
      { chapter: data.chapter, scenes: data.scenes },
      chapterFilePath,
      data.story.title,
      data.contentBlocks,
      data.contentBlockRefs,
      []
    );
    const { byScene, byBeat } = this.buildContentBlockAssociationMaps(
      data.contentBlocks,
      data.contentBlockRefs
    );
    await this.syncScenesToFilesystem(
      data.scenes,
      folderPath,
      data.story.title,
      byScene,
      byBeat
    );
  }
  async writeSceneBundle(data) {
    var _a, _b;
    await this.fileManager.ensureFolderExists(`${data.folderPath}/01-scenes`);
    await this.fileManager.ensureFolderExists(`${data.folderPath}/02-beats`);
    const sceneContentBlocks = (_a = data.sceneContentBlocks) != null ? _a : data.skipRemoteContentFetch ? [] : await this.apiClient.getContentBlocksByScene(data.scene.id);
    const sceneFileName = this.fileManager.generateSceneFileName(data.scene);
    const sceneFilePath = `${data.folderPath}/01-scenes/${sceneFileName}`;
    await this.fileManager.writeSceneFile(
      { scene: data.scene, beats: data.beats },
      sceneFilePath,
      data.storyTitle,
      sceneContentBlocks,
      []
    );
    for (const beat of data.beats) {
      const provided = (_b = data.beatContentBlockMap) == null ? void 0 : _b.get(beat.id);
      const beatContentBlocks = provided != null ? provided : data.skipRemoteContentFetch ? [] : await this.apiClient.getContentBlocksByBeat(beat.id);
      const beatFileName = this.fileManager.generateBeatFileName(beat);
      const beatFilePath = `${data.folderPath}/02-beats/${beatFileName}`;
      await this.fileManager.writeBeatFile(
        beat,
        beatFilePath,
        data.storyTitle,
        beatContentBlocks
      );
    }
  }
  buildContentBlockAssociationMaps(contentBlocks, contentBlockRefs) {
    const byScene = /* @__PURE__ */ new Map();
    const byBeat = /* @__PURE__ */ new Map();
    const blockById = new Map(contentBlocks.map((block) => [block.id, block]));
    for (const ref of contentBlockRefs) {
      const block = blockById.get(ref.content_block_id);
      if (!block) {
        continue;
      }
      if (ref.entity_type === "scene") {
        if (!byScene.has(ref.entity_id)) {
          byScene.set(ref.entity_id, []);
        }
        byScene.get(ref.entity_id).push(block);
      } else if (ref.entity_type === "beat") {
        if (!byBeat.has(ref.entity_id)) {
          byBeat.set(ref.entity_id, []);
        }
        byBeat.get(ref.entity_id).push(block);
      }
    }
    return { byScene, byBeat };
  }
  async pullSingleEntity(storyId, target) {
    switch (target.type) {
      case "chapter":
        await this.pullChapterEntity(storyId, target.id);
        break;
      case "scene":
        await this.pullSceneEntity(storyId, target.id);
        break;
      case "content":
        await this.pullContentBlockEntity(storyId, target.id);
        break;
      default:
        throw new Error(`Unsupported entity type: ${target.type}`);
    }
  }
  async pullChapterEntity(storyId, chapterId) {
    const story = await this.apiClient.getStory(storyId);
    const chapter = await this.apiClient.getChapter(chapterId);
    if (chapter.story_id !== storyId) {
      throw new Error("Chapter does not belong to the selected story");
    }
    const scenes = await this.apiClient.getScenes(chapterId);
    const scenesWithBeats = await Promise.all(
      scenes.map(async (scene) => {
        const beats = await this.apiClient.getBeats(scene.id);
        return { scene, beats };
      })
    );
    const contentBlocks = await this.apiClient.getContentBlocks(chapterId);
    const contentBlockRefs = [];
    for (const contentBlock of contentBlocks) {
      const refs = await this.apiClient.getContentAnchors(contentBlock.id);
      contentBlockRefs.push(...refs);
    }
    await this.writeChapterBundle({
      story,
      chapter,
      scenes: scenesWithBeats,
      contentBlocks,
      contentBlockRefs
    });
    new import_obsidian9.Notice(`Chapter "${chapter.title}" synced successfully`);
  }
  async pullSceneEntity(storyId, sceneId) {
    const scene = await this.apiClient.getScene(sceneId);
    if (scene.story_id !== storyId) {
      throw new Error("Scene does not belong to the selected story");
    }
    const story = await this.apiClient.getStory(storyId);
    const folderPath = this.fileManager.getStoryFolderPath(story.title);
    await this.ensureStoryFolders(folderPath);
    const beats = await this.apiClient.getBeats(scene.id);
    const sceneContentBlocks = await this.apiClient.getContentBlocksByScene(scene.id);
    const beatContentBlockMap = /* @__PURE__ */ new Map();
    for (const beat of beats) {
      const beatContentBlocks = await this.apiClient.getContentBlocksByBeat(beat.id);
      beatContentBlockMap.set(beat.id, beatContentBlocks);
    }
    await this.writeSceneBundle({
      storyTitle: story.title,
      folderPath,
      scene,
      beats,
      sceneContentBlocks,
      beatContentBlockMap
    });
    await this.syncSceneContentBlocks(scene, beats, folderPath, story.title);
    new import_obsidian9.Notice(`Scene "${scene.goal}" synced successfully`);
  }
  async pullContentBlockEntity(storyId, contentBlockId) {
    const story = await this.apiClient.getStory(storyId);
    const contentBlock = await this.apiClient.getContentBlock(contentBlockId);
    if (contentBlock.chapter_id) {
      const chapter = await this.apiClient.getChapter(contentBlock.chapter_id);
      if (chapter.story_id !== storyId) {
        throw new Error("Content block does not belong to the selected story");
      }
    }
    const folderPath = this.fileManager.getStoryFolderPath(story.title);
    await this.ensureContentFolders(folderPath);
    await this.writeContentBlockToFolder(folderPath, story.title, contentBlock);
    new import_obsidian9.Notice("Content block synced successfully");
  }
  async pushSingleEntity(folderPath, target, storyId, storyTitle) {
    let entityLabel;
    switch (target.type) {
      case "chapter":
        entityLabel = await this.pushChapterEntity(folderPath, target.id);
        break;
      case "scene":
        entityLabel = await this.pushSceneEntity(folderPath, storyId, target.id);
        break;
      case "content":
        entityLabel = await this.pushContentBlockEntity(folderPath, target.id, storyTitle);
        break;
      default:
        throw new Error(`Unsupported entity type: ${target.type}`);
    }
    new import_obsidian9.Notice(`${entityLabel} pushed successfully`);
    try {
      await this.pullSingleEntity(storyId, target);
    } catch (pullErr) {
      const pullErrorMessage = pullErr instanceof Error ? pullErr.message : "Failed to sync entity after push";
      new import_obsidian9.Notice(`Warning: ${pullErrorMessage}`, 5e3);
    }
  }
  async pushChapterEntity(folderPath, chapterId) {
    var _a, _b;
    const chapterFile = await this.findChapterFileById(folderPath, chapterId);
    if (!chapterFile) {
      throw new Error("Chapter file not found locally");
    }
    await this.pushChapterContentBlocks(chapterFile.path, folderPath);
    const label = ((_a = chapterFile.frontmatter) == null ? void 0 : _a.title) || (((_b = chapterFile.frontmatter) == null ? void 0 : _b.number) ? `Chapter ${chapterFile.frontmatter.number}` : "Chapter");
    return label;
  }
  async pushSceneEntity(folderPath, storyId, sceneId) {
    var _a;
    const sceneFile = await this.findSceneFileById(folderPath, sceneId);
    if (!sceneFile) {
      throw new Error("Scene file not found locally");
    }
    await this.pushSceneBeats(sceneFile.path, storyId);
    await this.pushSceneContentBlocks(sceneFile.path, folderPath);
    const label = ((_a = sceneFile.frontmatter) == null ? void 0 : _a.goal) ? `Scene: ${sceneFile.frontmatter.goal}` : "Scene";
    return label;
  }
  async pushContentBlockEntity(folderPath, contentBlockId, storyTitle) {
    var _a;
    const contentsFolderPath = `${folderPath}/03-contents`;
    await this.fileManager.ensureFolderExists(contentsFolderPath);
    const localContentBlock = await this.findContentBlockById(contentsFolderPath, contentBlockId);
    if (!localContentBlock) {
      throw new Error("Content block file not found locally");
    }
    const updatedBlock = await this.apiClient.updateContentBlock(contentBlockId, {
      content: localContentBlock.content,
      metadata: localContentBlock.metadata,
      type: localContentBlock.type,
      kind: localContentBlock.kind,
      order_num: (_a = localContentBlock.order_num) != null ? _a : void 0
    });
    const filePath = await this.getContentBlockFilePathFromContents(contentsFolderPath, updatedBlock);
    await this.fileManager.writeContentBlockFile(updatedBlock, filePath, storyTitle);
    return "Content block";
  }
  async ensureStoryFolders(folderPath) {
    await this.fileManager.ensureFolderExists(folderPath);
    await this.ensureContentFolders(folderPath);
    await this.fileManager.ensureFolderExists(`${folderPath}/00-chapters`);
    await this.fileManager.ensureFolderExists(`${folderPath}/01-scenes`);
    await this.fileManager.ensureFolderExists(`${folderPath}/02-beats`);
  }
  async ensureContentFolders(folderPath) {
    const contentsFolderPath = `${folderPath}/03-contents`;
    await this.fileManager.ensureFolderExists(contentsFolderPath);
    for (const typeFolder of ["00-texts", "01-images", "02-videos", "03-audios", "04-embeds", "05-links"]) {
      await this.fileManager.ensureFolderExists(`${contentsFolderPath}/${typeFolder}`);
    }
  }
  async writeContentBlockToFolder(storyFolderPath, storyTitle, contentBlock) {
    const typeFolderPath = this.fileManager.getContentBlockFolderPath(
      storyFolderPath,
      contentBlock.type || "text"
    );
    await this.fileManager.ensureFolderExists(typeFolderPath);
    const contentBlockFileName = this.fileManager.generateContentBlockFileName(contentBlock);
    const contentBlockFilePath = `${typeFolderPath}/${contentBlockFileName}`;
    await this.fileManager.writeContentBlockFile(contentBlock, contentBlockFilePath, storyTitle);
  }
  async syncScenesToFilesystem(scenesWithBeats, folderPath, storyTitle, contentBlocksByScene, contentBlocksByBeat) {
    const skipRemoteFetch = Boolean(contentBlocksByScene || contentBlocksByBeat);
    for (const { scene, beats } of scenesWithBeats) {
      await this.writeSceneBundle({
        storyTitle,
        folderPath,
        scene,
        beats,
        sceneContentBlocks: contentBlocksByScene == null ? void 0 : contentBlocksByScene.get(scene.id),
        beatContentBlockMap: contentBlocksByBeat,
        skipRemoteContentFetch: skipRemoteFetch
      });
    }
  }
  async syncSceneContentBlocks(scene, beats, folderPath, storyTitle) {
    if (!scene.chapter_id) {
      return;
    }
    const contentBlocks = await this.apiClient.getContentBlocks(scene.chapter_id);
    for (const contentBlock of contentBlocks) {
      const refs = await this.apiClient.getContentAnchors(contentBlock.id);
      const hasSceneRef = refs.some(
        (ref) => ref.entity_type === "scene" && ref.entity_id === scene.id
      );
      const beatIds = beats.map((beat) => beat.id);
      const hasBeatRef = refs.some(
        (ref) => ref.entity_type === "beat" && beatIds.includes(ref.entity_id)
      );
      if (hasSceneRef || hasBeatRef) {
        await this.writeContentBlockToFolder(folderPath, storyTitle, contentBlock);
      }
    }
  }
  async findChapterFileById(folderPath, chapterId) {
    const chapterFiles = await this.fileManager.listChapterFiles(folderPath);
    for (const chapterFilePath of chapterFiles) {
      const file = this.fileManager.getVault().getAbstractFileByPath(chapterFilePath);
      if (!(file instanceof import_obsidian9.TFile)) {
        continue;
      }
      const content = await this.fileManager.getVault().read(file);
      const frontmatter = this.fileManager.parseFrontmatter(content);
      if (frontmatter.id === chapterId) {
        return { path: chapterFilePath, frontmatter };
      }
    }
    return null;
  }
  async findSceneFileById(folderPath, sceneId) {
    const sceneFiles = await this.fileManager.listStorySceneFiles(folderPath);
    for (const sceneFilePath of sceneFiles) {
      const file = this.fileManager.getVault().getAbstractFileByPath(sceneFilePath);
      if (!(file instanceof import_obsidian9.TFile)) {
        continue;
      }
      const content = await this.fileManager.getVault().read(file);
      const frontmatter = this.fileManager.parseFrontmatter(content);
      if (frontmatter.id === sceneId) {
        return { path: sceneFilePath, frontmatter };
      }
    }
    return null;
  }
};

// src/sync/autoSyncManager.ts
<<<<<<< HEAD
var import_obsidian10 = require("obsidian");
=======
var import_obsidian9 = require("obsidian");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
var IDLE_DELAY_MS = 6e4;
var AutoSyncManager = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.idleTimeoutId = null;
    this.activeFile = null;
    this.lastEditTs = 0;
    this.dirtyFiles = /* @__PURE__ */ new Set();
    this.pendingSyncs = /* @__PURE__ */ new Set();
    this.handleActiveLeafChange = (leaf) => {
      const previousFile = this.activeFile;
      const newFile = this.plugin.app.workspace.getActiveFile();
      if (previousFile && (!newFile || previousFile.path !== newFile.path) && this.dirtyFiles.has(previousFile.path)) {
        void this.triggerSyncForFile(previousFile, "blur");
      }
      this.activeFile = newFile;
      this.lastEditTs = Date.now();
      this.resetIdleTimer();
    };
    this.activeFile = this.plugin.app.workspace.getActiveFile();
    this.lastEditTs = Date.now();
    this.registerEvents();
    this.resetIdleTimer();
  }
  dispose() {
    if (this.leafChangeRef) {
      this.plugin.app.workspace.offref(this.leafChangeRef);
      this.leafChangeRef = void 0;
    }
    if (this.editorChangeRef) {
      this.plugin.app.workspace.offref(this.editorChangeRef);
      this.editorChangeRef = void 0;
    }
    if (this.idleTimeoutId !== null) {
      window.clearTimeout(this.idleTimeoutId);
      this.idleTimeoutId = null;
    }
    this.dirtyFiles.clear();
    this.pendingSyncs.clear();
  }
  registerEvents() {
    this.leafChangeRef = this.plugin.app.workspace.on(
      "active-leaf-change",
      this.handleActiveLeafChange
    );
    this.plugin.registerEvent(this.leafChangeRef);
    this.editorChangeRef = this.plugin.app.workspace.on("editor-change", () => {
      const file = this.plugin.app.workspace.getActiveFile();
      if (!file) {
        return;
      }
      this.activeFile = file;
      this.lastEditTs = Date.now();
      this.dirtyFiles.add(file.path);
      this.resetIdleTimer();
    });
    this.plugin.registerEvent(this.editorChangeRef);
  }
  resetIdleTimer() {
    if (this.idleTimeoutId !== null) {
      window.clearTimeout(this.idleTimeoutId);
    }
    if (!this.activeFile) {
      this.idleTimeoutId = null;
      return;
    }
    this.idleTimeoutId = window.setTimeout(() => {
      const file = this.activeFile;
      if (!file) {
        return;
      }
      const idleDuration = Date.now() - this.lastEditTs;
      if (idleDuration >= IDLE_DELAY_MS && this.dirtyFiles.has(file.path)) {
        void this.triggerSyncForFile(file, "idle");
      } else {
        this.resetIdleTimer();
      }
    }, IDLE_DELAY_MS);
  }
  async triggerSyncForFile(file, reason) {
    const path = file.path;
    if (this.pendingSyncs.has(path)) {
      return;
    }
    this.pendingSyncs.add(path);
    try {
      const target = await this.resolveTarget(file);
      if (!target) {
        return;
      }
      if (target.pushWholeStory) {
        await this.plugin.syncService.pushStory(target.folderPath);
      } else if (target.syncTarget) {
        await this.plugin.syncService.pushStory(target.folderPath, target.syncTarget);
      }
      this.dirtyFiles.delete(path);
      if (reason === "idle") {
        this.lastEditTs = Date.now();
        this.resetIdleTimer();
      }
    } catch (err) {
      console.error(`Auto push failed for ${file.path}`, err);
    } finally {
      this.pendingSyncs.delete(path);
    }
  }
  async resolveTarget(file) {
    const folderPath = this.findStoryFolderPath(file);
    if (!folderPath) {
      return null;
    }
    if (file.name === "story.md") {
      return { folderPath, pushWholeStory: true };
    }
    const content = await this.plugin.app.vault.read(file);
    const frontmatter = this.plugin.fileManager.parseFrontmatter(content);
    const entityId = frontmatter == null ? void 0 : frontmatter.id;
    if (!entityId) {
      return null;
    }
    const sceneId = frontmatter.scene_id;
    const chapterId = frontmatter.chapter_id;
    const isContentFile = file.path.includes("/03-contents/");
    const isChapterFile = file.path.includes("/00-chapters/");
    const isSceneFile = file.path.includes("/01-scenes/");
    if (frontmatter.story_id && frontmatter.number && isChapterFile) {
      return {
        folderPath,
        pushWholeStory: false,
        syncTarget: { type: "chapter", id: entityId }
      };
    }
    if (frontmatter.story_id && (isSceneFile || chapterId)) {
      return {
        folderPath,
        pushWholeStory: false,
        syncTarget: { type: "scene", id: entityId }
      };
    }
    if (sceneId) {
      return {
        folderPath,
        pushWholeStory: false,
        syncTarget: { type: "scene", id: sceneId }
      };
    }
    if (isContentFile) {
      return {
        folderPath,
        pushWholeStory: false,
        syncTarget: { type: "content", id: entityId }
      };
    }
    return null;
  }
  findStoryFolderPath(file) {
    let current = file.parent;
    while (current) {
      const storyFilePath = `${current.path}/story.md`;
      const maybeStoryFile = this.plugin.app.vault.getAbstractFileByPath(storyFilePath);
<<<<<<< HEAD
      if (maybeStoryFile instanceof import_obsidian10.TFile) {
        return current.path;
      }
      const parent = current.parent;
      if (parent instanceof import_obsidian10.TFolder) {
=======
      if (maybeStoryFile instanceof import_obsidian9.TFile) {
        return current.path;
      }
      const parent = current.parent;
      if (parent instanceof import_obsidian9.TFolder) {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        current = parent;
      } else {
        current = null;
      }
    }
    return null;
  }
};

// src/views/StoryListView.ts
<<<<<<< HEAD
var import_obsidian17 = require("obsidian");

// src/views/modals/ChapterModal.ts
var import_obsidian11 = require("obsidian");
var ChapterModal = class extends import_obsidian11.Modal {
=======
var import_obsidian16 = require("obsidian");

// src/views/modals/ChapterModal.ts
var import_obsidian10 = require("obsidian");
var ChapterModal = class extends import_obsidian10.Modal {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  constructor(app, onSubmit, existingChapters = [], chapter) {
    super(app);
    this.chapter = {
      title: "",
      status: "draft"
    };
    this.isEdit = false;
    this.existingChapters = [];
    this.onSubmit = onSubmit;
    this.existingChapters = existingChapters;
    if (chapter) {
      this.isEdit = true;
      this.chapter = {
        number: chapter.number,
        title: chapter.title,
        status: chapter.status
      };
    }
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", {
      text: this.isEdit ? "Edit Chapter" : "Create Chapter"
    });
    if (this.isEdit) {
<<<<<<< HEAD
      new import_obsidian11.Setting(contentEl).setName("Chapter Number").setDesc("The chapter number").addText(
=======
      new import_obsidian10.Setting(contentEl).setName("Chapter Number").setDesc("The chapter number").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        (text) => {
          var _a;
          return text.setPlaceholder("1").setValue(((_a = this.chapter.number) == null ? void 0 : _a.toString()) || "1").onChange((value) => {
            const num = parseInt(value);
            if (!isNaN(num) && num > 0) {
              this.chapter.number = num;
            }
          });
        }
      );
    }
<<<<<<< HEAD
    new import_obsidian11.Setting(contentEl).setName("Title").setDesc("Chapter title").addText(
=======
    new import_obsidian10.Setting(contentEl).setName("Title").setDesc("Chapter title").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      (text) => text.setPlaceholder("Chapter Title").setValue(this.chapter.title || "").onChange((value) => {
        this.chapter.title = value;
      }).inputEl.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          this.submit();
        }
      })
    );
<<<<<<< HEAD
    new import_obsidian11.Setting(contentEl).setName("Status").setDesc("Chapter status").addDropdown(
=======
    new import_obsidian10.Setting(contentEl).setName("Status").setDesc("Chapter status").addDropdown(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      (dropdown) => dropdown.addOption("draft", "Draft").addOption("in_progress", "In Progress").addOption("completed", "Completed").setValue(this.chapter.status || "draft").onChange((value) => {
        this.chapter.status = value;
      })
    );
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const submitButton = buttonContainer.createEl("button", {
      text: this.isEdit ? "Update" : "Create",
      cls: "mod-cta"
    });
    submitButton.addEventListener("click", () => this.submit());
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.addEventListener("click", () => this.close());
    const titleInput = contentEl.querySelector("input[placeholder='Chapter Title']");
    if (titleInput) {
      titleInput.focus();
    }
  }
  async submit() {
    var _a;
    if (!((_a = this.chapter.title) == null ? void 0 : _a.trim())) {
<<<<<<< HEAD
      new import_obsidian11.Notice("Please enter a chapter title", 3e3);
=======
      new import_obsidian10.Notice("Please enter a chapter title", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      return;
    }
    if (!this.isEdit) {
      const maxNumber = this.existingChapters.length > 0 ? Math.max(...this.existingChapters.map((c) => c.number)) : 0;
      this.chapter.number = maxNumber + 1;
    } else {
      if (!this.chapter.number || this.chapter.number < 1) {
<<<<<<< HEAD
        new import_obsidian11.Notice("Chapter number must be greater than 0", 3e3);
=======
        new import_obsidian10.Notice("Chapter number must be greater than 0", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
    }
    try {
      await this.onSubmit(this.chapter);
      this.close();
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to save chapter";
<<<<<<< HEAD
      new import_obsidian11.Notice(`Error: ${errorMessage}`, 5e3);
=======
      new import_obsidian10.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/modals/SceneModal.ts
<<<<<<< HEAD
var import_obsidian12 = require("obsidian");
var SceneModal = class extends import_obsidian12.Modal {
=======
var import_obsidian11 = require("obsidian");
var SceneModal = class extends import_obsidian11.Modal {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  constructor(app, storyId, chapters, onSubmit, existingScenes = [], scene, defaultChapterId) {
    super(app);
    this.scene = {
      time_ref: "",
      goal: ""
    };
    this.isEdit = false;
    this.chapters = [];
    this.existingScenes = [];
    this.storyId = storyId;
    this.chapters = chapters;
    this.existingScenes = existingScenes;
    this.defaultChapterId = defaultChapterId;
    this.onSubmit = onSubmit;
    if (scene) {
      this.isEdit = true;
      this.scene = {
        story_id: scene.story_id,
        chapter_id: scene.chapter_id || null,
        order_num: scene.order_num,
        time_ref: scene.time_ref,
        goal: scene.goal,
        pov_character_id: scene.pov_character_id,
        location_id: scene.location_id
      };
    } else {
      this.scene.story_id = storyId;
      if (defaultChapterId !== void 0) {
        this.scene.chapter_id = defaultChapterId;
      }
    }
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", {
      text: this.isEdit ? "Edit Scene" : "Create Scene"
    });
<<<<<<< HEAD
    new import_obsidian12.Setting(contentEl).setName("Chapter").setDesc("Select the chapter for this scene (optional)").addDropdown((dropdown) => {
=======
    new import_obsidian11.Setting(contentEl).setName("Chapter").setDesc("Select the chapter for this scene (optional)").addDropdown((dropdown) => {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      dropdown.addOption("", "No Chapter");
      for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
        dropdown.addOption(
          chapter.id,
          `Chapter ${chapter.number}: ${chapter.title}`
        );
      }
      dropdown.setValue(this.scene.chapter_id || "");
      dropdown.onChange((value) => {
        this.scene.chapter_id = value || null;
      });
    });
    if (this.isEdit) {
<<<<<<< HEAD
      new import_obsidian12.Setting(contentEl).setName("Order Number").setDesc("Scene order within chapter").addText(
=======
      new import_obsidian11.Setting(contentEl).setName("Order Number").setDesc("Scene order within chapter").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        (text) => {
          var _a;
          return text.setPlaceholder("1").setValue(((_a = this.scene.order_num) == null ? void 0 : _a.toString()) || "1").onChange((value) => {
            const num = parseInt(value);
            if (!isNaN(num) && num > 0) {
              this.scene.order_num = num;
            }
          });
        }
      );
    }
<<<<<<< HEAD
    new import_obsidian12.Setting(contentEl).setName("Goal").setDesc("Scene goal or description").addTextArea(
=======
    new import_obsidian11.Setting(contentEl).setName("Goal").setDesc("Scene goal or description").addTextArea(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      (text) => text.setPlaceholder("What happens in this scene?").setValue(this.scene.goal || "").onChange((value) => {
        this.scene.goal = value;
      })
    );
<<<<<<< HEAD
    new import_obsidian12.Setting(contentEl).setName("Time Reference").setDesc("When does this scene take place?").addText(
=======
    new import_obsidian11.Setting(contentEl).setName("Time Reference").setDesc("When does this scene take place?").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      (text) => text.setPlaceholder("Morning, Evening, etc.").setValue(this.scene.time_ref || "").onChange((value) => {
        this.scene.time_ref = value;
      })
    );
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const submitButton = buttonContainer.createEl("button", {
      text: this.isEdit ? "Update" : "Create",
      cls: "mod-cta"
    });
    submitButton.addEventListener("click", () => this.submit());
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.addEventListener("click", () => this.close());
    const goalInput = contentEl.querySelector("textarea");
    if (goalInput) {
      goalInput.focus();
    }
  }
  async submit() {
    if (!this.isEdit) {
      const chapterId = this.scene.chapter_id || null;
      const scenesInChapter = this.existingScenes.filter(
        (s) => (s.chapter_id || null) === chapterId
      );
      const maxOrderNum = scenesInChapter.length > 0 ? Math.max(...scenesInChapter.map((s) => s.order_num)) : 0;
      this.scene.order_num = maxOrderNum + 1;
    } else {
      if (!this.scene.order_num || this.scene.order_num < 1) {
<<<<<<< HEAD
        new import_obsidian12.Notice("Order number must be greater than 0", 3e3);
=======
        new import_obsidian11.Notice("Order number must be greater than 0", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
    }
    try {
      await this.onSubmit(this.scene);
      this.close();
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to save scene";
<<<<<<< HEAD
      new import_obsidian12.Notice(`Error: ${errorMessage}`, 5e3);
=======
      new import_obsidian11.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/modals/BeatModal.ts
<<<<<<< HEAD
var import_obsidian13 = require("obsidian");
var BeatModal = class extends import_obsidian13.Modal {
=======
var import_obsidian12 = require("obsidian");
var BeatModal = class extends import_obsidian12.Modal {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  constructor(app, storyId, scenes, onSubmit, existingBeats = [], beat, chapters = [], defaultSceneId) {
    super(app);
    this.beat = {
      type: "setup",
      intent: "",
      outcome: ""
    };
    this.isEdit = false;
    this.scenes = [];
    this.chapters = [];
    this.existingBeats = [];
    this.storyId = storyId;
    this.scenes = scenes;
    this.chapters = chapters;
    this.existingBeats = existingBeats;
    this.defaultSceneId = defaultSceneId;
    this.onSubmit = onSubmit;
    if (beat) {
      this.isEdit = true;
      this.beat = {
        scene_id: beat.scene_id,
        order_num: beat.order_num,
        type: beat.type,
        intent: beat.intent,
        outcome: beat.outcome
      };
    } else if (defaultSceneId) {
      this.beat.scene_id = defaultSceneId;
    }
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", {
      text: this.isEdit ? "Edit Beat" : "Create Beat"
    });
<<<<<<< HEAD
    new import_obsidian13.Setting(contentEl).setName("Scene").setDesc("Select the scene for this beat").addDropdown((dropdown) => {
=======
    new import_obsidian12.Setting(contentEl).setName("Scene").setDesc("Select the scene for this beat").addDropdown((dropdown) => {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      const scenesByChapter = /* @__PURE__ */ new Map();
      for (const scene of this.scenes) {
        const chapterId = scene.chapter_id || null;
        if (!scenesByChapter.has(chapterId)) {
          scenesByChapter.set(chapterId, []);
        }
        scenesByChapter.get(chapterId).push(scene);
      }
      const getChapterLabel = (chapterId) => {
        if (!chapterId)
          return "No Chapter";
        const chapter = this.chapters.find((c) => c.id === chapterId);
        return chapter ? `Chapter ${chapter.number}: ${chapter.title}` : "No Chapter";
      };
      for (const [chapterId, chapterScenes] of scenesByChapter.entries()) {
        const label = getChapterLabel(chapterId);
        for (const scene of chapterScenes.sort((a, b) => a.order_num - b.order_num)) {
          dropdown.addOption(
            scene.id,
            `${label} > Scene ${scene.order_num}: ${scene.goal || "Untitled"}`
          );
        }
      }
      dropdown.setValue(this.beat.scene_id || "");
      dropdown.onChange((value) => {
        this.beat.scene_id = value;
      });
    });
    if (this.isEdit) {
<<<<<<< HEAD
      new import_obsidian13.Setting(contentEl).setName("Order Number").setDesc("Beat order within scene").addText(
=======
      new import_obsidian12.Setting(contentEl).setName("Order Number").setDesc("Beat order within scene").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        (text) => {
          var _a;
          return text.setPlaceholder("1").setValue(((_a = this.beat.order_num) == null ? void 0 : _a.toString()) || "1").onChange((value) => {
            const num = parseInt(value);
            if (!isNaN(num) && num > 0) {
              this.beat.order_num = num;
            }
          });
        }
      );
    }
<<<<<<< HEAD
    new import_obsidian13.Setting(contentEl).setName("Type").setDesc("Beat type").addDropdown(
=======
    new import_obsidian12.Setting(contentEl).setName("Type").setDesc("Beat type").addDropdown(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      (dropdown) => dropdown.addOption("setup", "Setup").addOption("turn", "Turn").addOption("reveal", "Reveal").addOption("conflict", "Conflict").addOption("climax", "Climax").addOption("resolution", "Resolution").addOption("hook", "Hook").addOption("transition", "Transition").setValue(this.beat.type || "setup").onChange((value) => {
        this.beat.type = value;
      })
    );
<<<<<<< HEAD
    new import_obsidian13.Setting(contentEl).setName("Intent").setDesc("What is the intent of this beat?").addTextArea(
=======
    new import_obsidian12.Setting(contentEl).setName("Intent").setDesc("What is the intent of this beat?").addTextArea(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      (text) => text.setPlaceholder("What does the character want?").setValue(this.beat.intent || "").onChange((value) => {
        this.beat.intent = value;
      })
    );
<<<<<<< HEAD
    new import_obsidian13.Setting(contentEl).setName("Outcome").setDesc("What is the outcome of this beat?").addTextArea(
=======
    new import_obsidian12.Setting(contentEl).setName("Outcome").setDesc("What is the outcome of this beat?").addTextArea(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      (text) => text.setPlaceholder("What happens as a result?").setValue(this.beat.outcome || "").onChange((value) => {
        this.beat.outcome = value;
      })
    );
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const submitButton = buttonContainer.createEl("button", {
      text: this.isEdit ? "Update" : "Create",
      cls: "mod-cta"
    });
    submitButton.addEventListener("click", () => this.submit());
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.addEventListener("click", () => this.close());
    const intentInput = contentEl.querySelector("textarea");
    if (intentInput) {
      intentInput.focus();
    }
  }
  async submit() {
    if (!this.beat.scene_id) {
<<<<<<< HEAD
      new import_obsidian13.Notice("Please select a scene", 3e3);
      return;
    }
    if (!this.beat.type) {
      new import_obsidian13.Notice("Please select a beat type", 3e3);
=======
      new import_obsidian12.Notice("Please select a scene", 3e3);
      return;
    }
    if (!this.beat.type) {
      new import_obsidian12.Notice("Please select a beat type", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      return;
    }
    if (!this.isEdit) {
      const beatsInScene = this.existingBeats.filter((b) => b.scene_id === this.beat.scene_id);
      const maxOrderNum = beatsInScene.length > 0 ? Math.max(...beatsInScene.map((b) => b.order_num)) : 0;
      this.beat.order_num = maxOrderNum + 1;
    } else {
      if (!this.beat.order_num || this.beat.order_num < 1) {
<<<<<<< HEAD
        new import_obsidian13.Notice("Order number must be greater than 0", 3e3);
=======
        new import_obsidian12.Notice("Order number must be greater than 0", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
    }
    try {
      await this.onSubmit(this.beat);
      this.close();
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to save beat";
<<<<<<< HEAD
      new import_obsidian13.Notice(`Error: ${errorMessage}`, 5e3);
=======
      new import_obsidian12.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/modals/ContentBlockModal.ts
<<<<<<< HEAD
var import_obsidian14 = require("obsidian");
=======
var import_obsidian13 = require("obsidian");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)

// src/api/unsplash.ts
var UnsplashClient = class {
  constructor(accessKey, secretKey) {
    this.apiUrl = "https://api.unsplash.com";
    this.accessKey = accessKey || "YOUR_UNSPLASH_ACCESS_KEY";
    this.secretKey = secretKey || "";
  }
  async searchImages(query, page = 1, perPage = 20) {
    const url = `${this.apiUrl}/search/photos?query=${encodeURIComponent(query)}&page=${page}&per_page=${perPage}`;
    const headers = {
      "Accept-Version": "v1"
    };
    if (!this.accessKey || this.accessKey === "YOUR_UNSPLASH_ACCESS_KEY") {
      throw new Error("Unsplash access key is required. Please configure it in plugin settings.");
    }
    headers["Authorization"] = `Client-ID ${this.accessKey}`;
    const response = await fetch(url, { headers });
    if (!response.ok) {
      const errorText = await response.text();
      throw new Error(`Unsplash API error: ${response.status} ${response.statusText}. ${errorText}`);
    }
    return response.json();
  }
  getImageUrl(photo, size = "regular") {
    return photo.urls[size];
  }
  getAttributionUrl(photo) {
    return photo.links.html;
  }
  getAttributionText(photo) {
    return `Photo by ${photo.user.name} on Unsplash`;
  }
};

// src/views/modals/ContentBlockModal.ts
<<<<<<< HEAD
var ContentBlockModal = class extends import_obsidian14.Modal {
=======
var ContentBlockModal = class extends import_obsidian13.Modal {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  constructor(app, onSubmit, contentBlock, plugin) {
    var _a, _b, _c, _d;
    super(app);
    this.contentBlock = {
      type: "text",
      kind: "final",
      content: "",
      metadata: {}
    };
    this.isEdit = false;
    this.unsplashResults = [];
    this.unsplashSearchQuery = "";
    this.unsplashSearching = false;
    this.selectedImageUrl = "";
    this.currentImageSourceTab = "internet link";
    this.onSubmit = onSubmit;
    this.plugin = plugin;
    const unsplashAccessKey = ((_b = (_a = this.plugin) == null ? void 0 : _a.settings) == null ? void 0 : _b.unsplashAccessKey) || "";
    const unsplashSecretKey = ((_d = (_c = this.plugin) == null ? void 0 : _c.settings) == null ? void 0 : _d.unsplashSecretKey) || "";
    this.unsplashClient = new UnsplashClient(unsplashAccessKey, unsplashSecretKey);
    if (contentBlock) {
      this.isEdit = true;
      this.contentBlock = {
        type: contentBlock.type,
        kind: contentBlock.kind || "final",
        content: contentBlock.content,
        metadata: contentBlock.metadata || {}
      };
      if (contentBlock.type === "image" && contentBlock.content) {
        this.selectedImageUrl = contentBlock.content;
      }
    }
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", {
      text: this.isEdit ? "Edit Content Block" : "Create Content Block"
    });
    if (this.isEdit && !this.contentBlock.type) {
<<<<<<< HEAD
      new import_obsidian14.Setting(contentEl).setName("Type").setDesc("Select the content type").addDropdown(
=======
      new import_obsidian13.Setting(contentEl).setName("Type").setDesc("Select the content type").addDropdown(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        (dropdown) => dropdown.addOption("text", "Text").addOption("image", "Image").setValue(this.contentBlock.type || "text").onChange((value) => {
          this.contentBlock.type = value;
          this.renderContentFields();
        })
      );
    }
    this.renderContentFields();
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    const submitButton = buttonContainer.createEl("button", {
      text: this.isEdit ? "Update" : "Create",
      cls: "mod-cta"
    });
    submitButton.addEventListener("click", () => this.submit());
    const cancelButton = buttonContainer.createEl("button", {
      text: "Cancel"
    });
    cancelButton.addEventListener("click", () => this.close());
  }
  renderContentFields() {
    var _a, _b, _c, _d, _e, _f, _g;
    const { contentEl } = this;
    const existingFields = contentEl.querySelectorAll(".content-block-field");
    existingFields.forEach((el) => el.remove());
    if (this.contentBlock.type === "text") {
      const textField = contentEl.createDiv({ cls: "content-block-field" });
<<<<<<< HEAD
      new import_obsidian14.Setting(textField).setName("Content").setDesc("Enter the text content").addTextArea(
=======
      new import_obsidian13.Setting(textField).setName("Content").setDesc("Enter the text content").addTextArea(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        (text) => text.setPlaceholder("Enter text...").setValue(this.contentBlock.content || "").onChange((value) => {
          this.contentBlock.content = value;
          if (!this.contentBlock.metadata) {
            this.contentBlock.metadata = {};
          }
          this.contentBlock.metadata.word_count = value.trim().split(/\s+/).filter((w) => w.length > 0).length;
        })
      );
    } else if (this.contentBlock.type === "image") {
      const imageField = contentEl.createDiv({ cls: "content-block-field" });
      const sourceValue = ((_a = this.contentBlock.metadata) == null ? void 0 : _a.source) || "internet link";
      this.currentImageSourceTab = sourceValue;
      const tabsContainer = imageField.createDiv({ cls: "content-block-source-tabs" });
      const unsplashTab = tabsContainer.createEl("button", {
        text: "Unsplash",
        cls: `content-block-source-tab ${this.currentImageSourceTab === "unsplash" ? "is-active" : ""}`
      });
      const internetTab = tabsContainer.createEl("button", {
        text: "Internet Link",
        cls: `content-block-source-tab ${this.currentImageSourceTab === "internet link" ? "is-active" : ""}`
      });
      const localTab = tabsContainer.createEl("button", {
        text: "Local Upload",
        cls: `content-block-source-tab ${this.currentImageSourceTab === "local" ? "is-active" : ""}`
      });
      const tabContent = imageField.createDiv({ cls: "content-block-source-tab-content" });
      unsplashTab.onclick = () => {
        this.currentImageSourceTab = "unsplash";
        if (!this.contentBlock.metadata) {
          this.contentBlock.metadata = {};
        }
        this.contentBlock.metadata.source = "unsplash";
        this.renderContentFields();
      };
      internetTab.onclick = () => {
        this.currentImageSourceTab = "internet link";
        if (!this.contentBlock.metadata) {
          this.contentBlock.metadata = {};
        }
        this.contentBlock.metadata.source = "internet link";
        this.renderContentFields();
      };
      localTab.onclick = () => {
        this.currentImageSourceTab = "local";
        if (!this.contentBlock.metadata) {
          this.contentBlock.metadata = {};
        }
        this.contentBlock.metadata.source = "local";
        this.renderContentFields();
      };
      if (this.currentImageSourceTab === "unsplash") {
        const unsplashAccessKey = ((_c = (_b = this.plugin) == null ? void 0 : _b.settings) == null ? void 0 : _c.unsplashAccessKey) || "";
        if (unsplashAccessKey && unsplashAccessKey !== "YOUR_UNSPLASH_ACCESS_KEY") {
<<<<<<< HEAD
          const unsplashSetting = new import_obsidian14.Setting(tabContent);
=======
          const unsplashSetting = new import_obsidian13.Setting(tabContent);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          unsplashSetting.setName("Search Unsplash");
          unsplashSetting.setDesc("Search for free images");
          unsplashSetting.addButton((button) => {
            button.setButtonText("Search");
            button.onClick(() => {
              this.showUnsplashSearch();
            });
          });
        } else {
<<<<<<< HEAD
          const unsplashSetting = new import_obsidian14.Setting(tabContent);
=======
          const unsplashSetting = new import_obsidian13.Setting(tabContent);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          unsplashSetting.setName("Search Unsplash");
          unsplashSetting.setDesc("Configure Unsplash Access Key and Secret Key in plugin settings to enable image search");
          unsplashSetting.addButton((button) => {
            button.setButtonText("Search");
            button.setDisabled(true);
          });
        }
        if (this.selectedImageUrl) {
<<<<<<< HEAD
          new import_obsidian14.Setting(tabContent).setName("Selected Image URL").setDesc("Image URL from Unsplash").addText(
=======
          new import_obsidian13.Setting(tabContent).setName("Selected Image URL").setDesc("Image URL from Unsplash").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
            (text) => text.setValue(this.selectedImageUrl).setDisabled(true)
          );
        }
      } else if (this.currentImageSourceTab === "internet link") {
<<<<<<< HEAD
        new import_obsidian14.Setting(tabContent).setName("Image URL").setDesc("Enter image URL").addText(
=======
        new import_obsidian13.Setting(tabContent).setName("Image URL").setDesc("Enter image URL").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          (text) => text.setPlaceholder("https://example.com/image.jpg").setValue(this.selectedImageUrl).onChange((value) => {
            this.selectedImageUrl = value;
            this.contentBlock.content = value;
            if (!this.contentBlock.metadata) {
              this.contentBlock.metadata = {};
            }
            this.contentBlock.metadata.source = "internet link";
          })
        );
      } else if (this.currentImageSourceTab === "local") {
<<<<<<< HEAD
        new import_obsidian14.Setting(tabContent).setName("Upload from Computer").setDesc("Upload image from your computer (coming soon)").addButton((button) => {
=======
        new import_obsidian13.Setting(tabContent).setName("Upload from Computer").setDesc("Upload image from your computer (coming soon)").addButton((button) => {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          button.setButtonText("Choose File");
          button.setDisabled(true);
        });
      }
      const altTextValue = ((_d = this.contentBlock.metadata) == null ? void 0 : _d.alt_text) || "";
<<<<<<< HEAD
      const altTextSetting = new import_obsidian14.Setting(imageField);
=======
      const altTextSetting = new import_obsidian13.Setting(imageField);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      altTextSetting.setName("Alt Text");
      altTextSetting.setDesc("Alt text for accessibility");
      altTextSetting.addText(
        (text) => text.setPlaceholder("Describe the image for accessibility").setValue(altTextValue).onChange((value) => {
          if (!this.contentBlock.metadata) {
            this.contentBlock.metadata = {};
          }
          this.contentBlock.metadata.alt_text = value || void 0;
        })
      );
      const authorNameValue = ((_e = this.contentBlock.metadata) == null ? void 0 : _e.author_name) || "";
<<<<<<< HEAD
      new import_obsidian14.Setting(imageField).setName("Author Name").setDesc("Name of the image author/photographer").addText(
=======
      new import_obsidian13.Setting(imageField).setName("Author Name").setDesc("Name of the image author/photographer").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        (text) => text.setPlaceholder("Author name").setValue(authorNameValue).onChange((value) => {
          if (!this.contentBlock.metadata) {
            this.contentBlock.metadata = {};
          }
          this.contentBlock.metadata.author_name = value || void 0;
        })
      );
      const attributionValue = ((_f = this.contentBlock.metadata) == null ? void 0 : _f.attribution) || "";
<<<<<<< HEAD
      new import_obsidian14.Setting(imageField).setName("Attribution").setDesc("Attribution text (e.g., 'Photo by John Doe on Unsplash')").addText(
=======
      new import_obsidian13.Setting(imageField).setName("Attribution").setDesc("Attribution text (e.g., 'Photo by John Doe on Unsplash')").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        (text) => text.setPlaceholder("Photo by Author Name on Source").setValue(attributionValue).onChange((value) => {
          if (!this.contentBlock.metadata) {
            this.contentBlock.metadata = {};
          }
          this.contentBlock.metadata.attribution = value || void 0;
        })
      );
      const attributionUrlValue = ((_g = this.contentBlock.metadata) == null ? void 0 : _g.attribution_url) || "";
<<<<<<< HEAD
      new import_obsidian14.Setting(imageField).setName("Attribution URL").setDesc("Link to the original image or author page").addText(
=======
      new import_obsidian13.Setting(imageField).setName("Attribution URL").setDesc("Link to the original image or author page").addText(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        (text) => text.setPlaceholder("https://example.com/photo").setValue(attributionUrlValue).onChange((value) => {
          if (!this.contentBlock.metadata) {
            this.contentBlock.metadata = {};
          }
          this.contentBlock.metadata.attribution_url = value || void 0;
        })
      );
    }
  }
  showUnsplashSearch() {
    const { contentEl } = this;
<<<<<<< HEAD
    const searchModal = new import_obsidian14.Modal(this.app);
=======
    const searchModal = new import_obsidian13.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    searchModal.titleEl.setText("Search Unsplash");
    const searchContent = searchModal.contentEl;
    const searchInput = searchContent.createEl("input", {
      type: "text",
      placeholder: "Search for images...",
      cls: "unsplash-search-input"
    });
    searchInput.value = this.unsplashSearchQuery;
    searchInput.style.width = "100%";
    searchInput.style.padding = "0.5rem";
    searchInput.style.marginBottom = "1rem";
    const searchButton = searchContent.createEl("button", {
      text: "Search",
      cls: "mod-cta"
    });
    searchButton.style.marginBottom = "1rem";
    const resultsContainer = searchContent.createDiv({ cls: "unsplash-results-grid" });
    const performSearch = async () => {
      const query = searchInput.value.trim();
      if (!query) {
<<<<<<< HEAD
        new import_obsidian14.Notice("Please enter a search query", 3e3);
=======
        new import_obsidian13.Notice("Please enter a search query", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      this.unsplashSearching = true;
      searchButton.disabled = true;
      searchButton.setText("Searching...");
      resultsContainer.empty();
      resultsContainer.createEl("p", { text: "Searching..." });
      try {
        const response = await this.unsplashClient.searchImages(query, 1, 20);
        this.unsplashResults = response.results;
        resultsContainer.empty();
        if (this.unsplashResults.length === 0) {
          resultsContainer.createEl("p", { text: "No results found." });
        } else {
          for (const photo of this.unsplashResults) {
            const photoItem = resultsContainer.createDiv({ cls: "unsplash-photo-item" });
            const img = photoItem.createEl("img", {
              attr: {
                src: this.unsplashClient.getImageUrl(photo, "thumb"),
                alt: photo.alt_description || photo.description || "Unsplash photo"
              }
            });
            img.style.width = "100%";
            img.style.height = "150px";
            img.style.objectFit = "cover";
            img.style.borderRadius = "4px";
            img.style.cursor = "pointer";
            const photoInfo = photoItem.createDiv({ cls: "unsplash-photo-info" });
            photoInfo.createEl("p", {
              text: photo.alt_description || photo.description || "Untitled",
              cls: "unsplash-photo-title"
            });
            photoInfo.createEl("p", {
              text: this.unsplashClient.getAttributionText(photo),
              cls: "unsplash-photo-attribution"
            });
            photoItem.onclick = () => {
              const imageUrl = this.unsplashClient.getImageUrl(photo, "regular");
              this.selectedImageUrl = imageUrl;
              this.contentBlock.content = imageUrl;
              if (!this.contentBlock.metadata) {
                this.contentBlock.metadata = {};
              }
              const altText = photo.alt_description || photo.description || "";
              this.contentBlock.metadata.alt_text = altText;
              this.contentBlock.metadata.attribution = this.unsplashClient.getAttributionText(photo);
              this.contentBlock.metadata.attribution_url = this.unsplashClient.getAttributionUrl(photo);
              this.contentBlock.metadata.author_name = photo.user.name;
              this.contentBlock.metadata.source = "unsplash";
              searchModal.close();
              this.renderContentFields();
<<<<<<< HEAD
              new import_obsidian14.Notice("Image selected");
=======
              new import_obsidian13.Notice("Image selected");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
            };
          }
        }
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to search Unsplash";
<<<<<<< HEAD
        new import_obsidian14.Notice(`Error: ${errorMessage}`, 5e3);
=======
        new import_obsidian13.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        resultsContainer.empty();
        resultsContainer.createEl("p", {
          text: `Error: ${errorMessage}`,
          cls: "story-engine-error"
        });
      } finally {
        this.unsplashSearching = false;
        searchButton.disabled = false;
        searchButton.setText("Search");
      }
    };
    searchButton.onclick = performSearch;
    searchInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        performSearch();
      }
    });
    if (this.unsplashSearchQuery) {
      performSearch();
    }
    searchModal.open();
  }
  async submit() {
    var _a, _b;
    if (!this.contentBlock.type) {
      this.contentBlock.type = "text";
    }
    if (this.contentBlock.type === "text" && !((_a = this.contentBlock.content) == null ? void 0 : _a.trim())) {
<<<<<<< HEAD
      new import_obsidian14.Notice("Please enter text content", 3e3);
      return;
    }
    if (this.contentBlock.type === "image" && !((_b = this.contentBlock.content) == null ? void 0 : _b.trim())) {
      new import_obsidian14.Notice("Please enter an image URL or select an image", 3e3);
=======
      new import_obsidian13.Notice("Please enter text content", 3e3);
      return;
    }
    if (this.contentBlock.type === "image" && !((_b = this.contentBlock.content) == null ? void 0 : _b.trim())) {
      new import_obsidian13.Notice("Please enter an image URL or select an image", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      return;
    }
    try {
      await this.onSubmit(this.contentBlock);
      this.close();
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to save content block";
<<<<<<< HEAD
      new import_obsidian14.Notice(`Error: ${errorMessage}`, 5e3);
=======
      new import_obsidian13.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/TimelineModal.ts
<<<<<<< HEAD
var import_obsidian15 = require("obsidian");
=======
var import_obsidian14 = require("obsidian");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)

// node_modules/d3-array/src/ascending.js
function ascending(a, b) {
  return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;
}

// node_modules/d3-array/src/descending.js
function descending(a, b) {
  return a == null || b == null ? NaN : b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;
}

// node_modules/d3-array/src/bisector.js
function bisector(f) {
  let compare1, compare2, delta;
  if (f.length !== 2) {
    compare1 = ascending;
    compare2 = (d, x) => ascending(f(d), x);
    delta = (d, x) => f(d) - x;
  } else {
    compare1 = f === ascending || f === descending ? f : zero;
    compare2 = f;
    delta = f;
  }
  function left2(a, x, lo = 0, hi = a.length) {
    if (lo < hi) {
      if (compare1(x, x) !== 0)
        return hi;
      do {
        const mid = lo + hi >>> 1;
        if (compare2(a[mid], x) < 0)
          lo = mid + 1;
        else
          hi = mid;
      } while (lo < hi);
    }
    return lo;
  }
  function right2(a, x, lo = 0, hi = a.length) {
    if (lo < hi) {
      if (compare1(x, x) !== 0)
        return hi;
      do {
        const mid = lo + hi >>> 1;
        if (compare2(a[mid], x) <= 0)
          lo = mid + 1;
        else
          hi = mid;
      } while (lo < hi);
    }
    return lo;
  }
  function center2(a, x, lo = 0, hi = a.length) {
    const i = left2(a, x, lo, hi - 1);
    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;
  }
  return { left: left2, center: center2, right: right2 };
}
function zero() {
  return 0;
}

// node_modules/d3-array/src/number.js
function number(x) {
  return x === null ? NaN : +x;
}

// node_modules/d3-array/src/bisect.js
var ascendingBisect = bisector(ascending);
var bisectRight = ascendingBisect.right;
var bisectLeft = ascendingBisect.left;
var bisectCenter = bisector(number).center;
var bisect_default = bisectRight;

// node_modules/d3-array/src/extent.js
function extent(values, valueof) {
  let min2;
  let max2;
  if (valueof === void 0) {
    for (const value of values) {
      if (value != null) {
        if (min2 === void 0) {
          if (value >= value)
            min2 = max2 = value;
        } else {
          if (min2 > value)
            min2 = value;
          if (max2 < value)
            max2 = value;
        }
      }
    }
  } else {
    let index = -1;
    for (let value of values) {
      if ((value = valueof(value, ++index, values)) != null) {
        if (min2 === void 0) {
          if (value >= value)
            min2 = max2 = value;
        } else {
          if (min2 > value)
            min2 = value;
          if (max2 < value)
            max2 = value;
        }
      }
    }
  }
  return [min2, max2];
}

// node_modules/internmap/src/index.js
var InternMap = class extends Map {
  constructor(entries, key = keyof) {
    super();
    Object.defineProperties(this, { _intern: { value: /* @__PURE__ */ new Map() }, _key: { value: key } });
    if (entries != null)
      for (const [key2, value] of entries)
        this.set(key2, value);
  }
  get(key) {
    return super.get(intern_get(this, key));
  }
  has(key) {
    return super.has(intern_get(this, key));
  }
  set(key, value) {
    return super.set(intern_set(this, key), value);
  }
  delete(key) {
    return super.delete(intern_delete(this, key));
  }
};
function intern_get({ _intern, _key }, value) {
  const key = _key(value);
  return _intern.has(key) ? _intern.get(key) : value;
}
function intern_set({ _intern, _key }, value) {
  const key = _key(value);
  if (_intern.has(key))
    return _intern.get(key);
  _intern.set(key, value);
  return value;
}
function intern_delete({ _intern, _key }, value) {
  const key = _key(value);
  if (_intern.has(key)) {
    value = _intern.get(key);
    _intern.delete(key);
  }
  return value;
}
function keyof(value) {
  return value !== null && typeof value === "object" ? value.valueOf() : value;
}

// node_modules/d3-array/src/ticks.js
var e10 = Math.sqrt(50);
var e5 = Math.sqrt(10);
var e2 = Math.sqrt(2);
function tickSpec(start2, stop, count) {
  const step = (stop - start2) / Math.max(0, count), power = Math.floor(Math.log10(step)), error = step / Math.pow(10, power), factor = error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1;
  let i1, i2, inc;
  if (power < 0) {
    inc = Math.pow(10, -power) / factor;
    i1 = Math.round(start2 * inc);
    i2 = Math.round(stop * inc);
    if (i1 / inc < start2)
      ++i1;
    if (i2 / inc > stop)
      --i2;
    inc = -inc;
  } else {
    inc = Math.pow(10, power) * factor;
    i1 = Math.round(start2 / inc);
    i2 = Math.round(stop / inc);
    if (i1 * inc < start2)
      ++i1;
    if (i2 * inc > stop)
      --i2;
  }
  if (i2 < i1 && 0.5 <= count && count < 2)
    return tickSpec(start2, stop, count * 2);
  return [i1, i2, inc];
}
function ticks(start2, stop, count) {
  stop = +stop, start2 = +start2, count = +count;
  if (!(count > 0))
    return [];
  if (start2 === stop)
    return [start2];
  const reverse = stop < start2, [i1, i2, inc] = reverse ? tickSpec(stop, start2, count) : tickSpec(start2, stop, count);
  if (!(i2 >= i1))
    return [];
  const n = i2 - i1 + 1, ticks2 = new Array(n);
  if (reverse) {
    if (inc < 0)
      for (let i = 0; i < n; ++i)
        ticks2[i] = (i2 - i) / -inc;
    else
      for (let i = 0; i < n; ++i)
        ticks2[i] = (i2 - i) * inc;
  } else {
    if (inc < 0)
      for (let i = 0; i < n; ++i)
        ticks2[i] = (i1 + i) / -inc;
    else
      for (let i = 0; i < n; ++i)
        ticks2[i] = (i1 + i) * inc;
  }
  return ticks2;
}
function tickIncrement(start2, stop, count) {
  stop = +stop, start2 = +start2, count = +count;
  return tickSpec(start2, stop, count)[2];
}
function tickStep(start2, stop, count) {
  stop = +stop, start2 = +start2, count = +count;
  const reverse = stop < start2, inc = reverse ? tickIncrement(stop, start2, count) : tickIncrement(start2, stop, count);
  return (reverse ? -1 : 1) * (inc < 0 ? 1 / -inc : inc);
}

// node_modules/d3-axis/src/identity.js
function identity_default(x) {
  return x;
}

// node_modules/d3-axis/src/axis.js
var top = 1;
var right = 2;
var bottom = 3;
var left = 4;
var epsilon = 1e-6;
function translateX(x) {
  return "translate(" + x + ",0)";
}
function translateY(y) {
  return "translate(0," + y + ")";
}
function number2(scale) {
  return (d) => +scale(d);
}
function center(scale, offset) {
  offset = Math.max(0, scale.bandwidth() - offset * 2) / 2;
  if (scale.round())
    offset = Math.round(offset);
  return (d) => +scale(d) + offset;
}
function entering() {
  return !this.__axis;
}
function axis(orient, scale) {
  var tickArguments = [], tickValues = null, tickFormat2 = null, tickSizeInner = 6, tickSizeOuter = 6, tickPadding = 3, offset = typeof window !== "undefined" && window.devicePixelRatio > 1 ? 0 : 0.5, k = orient === top || orient === left ? -1 : 1, x = orient === left || orient === right ? "x" : "y", transform2 = orient === top || orient === bottom ? translateX : translateY;
  function axis2(context) {
    var values = tickValues == null ? scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain() : tickValues, format2 = tickFormat2 == null ? scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity_default : tickFormat2, spacing = Math.max(tickSizeInner, 0) + tickPadding, range = scale.range(), range0 = +range[0] + offset, range1 = +range[range.length - 1] + offset, position = (scale.bandwidth ? center : number2)(scale.copy(), offset), selection2 = context.selection ? context.selection() : context, path = selection2.selectAll(".domain").data([null]), tick = selection2.selectAll(".tick").data(values, scale).order(), tickExit = tick.exit(), tickEnter = tick.enter().append("g").attr("class", "tick"), line = tick.select("line"), text = tick.select("text");
    path = path.merge(path.enter().insert("path", ".tick").attr("class", "domain").attr("stroke", "currentColor"));
    tick = tick.merge(tickEnter);
    line = line.merge(tickEnter.append("line").attr("stroke", "currentColor").attr(x + "2", k * tickSizeInner));
    text = text.merge(tickEnter.append("text").attr("fill", "currentColor").attr(x, k * spacing).attr("dy", orient === top ? "0em" : orient === bottom ? "0.71em" : "0.32em"));
    if (context !== selection2) {
      path = path.transition(context);
      tick = tick.transition(context);
      line = line.transition(context);
      text = text.transition(context);
      tickExit = tickExit.transition(context).attr("opacity", epsilon).attr("transform", function(d) {
        return isFinite(d = position(d)) ? transform2(d + offset) : this.getAttribute("transform");
      });
      tickEnter.attr("opacity", epsilon).attr("transform", function(d) {
        var p = this.parentNode.__axis;
        return transform2((p && isFinite(p = p(d)) ? p : position(d)) + offset);
      });
    }
    tickExit.remove();
    path.attr("d", orient === left || orient === right ? tickSizeOuter ? "M" + k * tickSizeOuter + "," + range0 + "H" + offset + "V" + range1 + "H" + k * tickSizeOuter : "M" + offset + "," + range0 + "V" + range1 : tickSizeOuter ? "M" + range0 + "," + k * tickSizeOuter + "V" + offset + "H" + range1 + "V" + k * tickSizeOuter : "M" + range0 + "," + offset + "H" + range1);
    tick.attr("opacity", 1).attr("transform", function(d) {
      return transform2(position(d) + offset);
    });
    line.attr(x + "2", k * tickSizeInner);
    text.attr(x, k * spacing).text(format2);
    selection2.filter(entering).attr("fill", "none").attr("font-size", 10).attr("font-family", "sans-serif").attr("text-anchor", orient === right ? "start" : orient === left ? "end" : "middle");
    selection2.each(function() {
      this.__axis = position;
    });
  }
  axis2.scale = function(_) {
    return arguments.length ? (scale = _, axis2) : scale;
  };
  axis2.ticks = function() {
    return tickArguments = Array.from(arguments), axis2;
  };
  axis2.tickArguments = function(_) {
    return arguments.length ? (tickArguments = _ == null ? [] : Array.from(_), axis2) : tickArguments.slice();
  };
  axis2.tickValues = function(_) {
    return arguments.length ? (tickValues = _ == null ? null : Array.from(_), axis2) : tickValues && tickValues.slice();
  };
  axis2.tickFormat = function(_) {
    return arguments.length ? (tickFormat2 = _, axis2) : tickFormat2;
  };
  axis2.tickSize = function(_) {
    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis2) : tickSizeInner;
  };
  axis2.tickSizeInner = function(_) {
    return arguments.length ? (tickSizeInner = +_, axis2) : tickSizeInner;
  };
  axis2.tickSizeOuter = function(_) {
    return arguments.length ? (tickSizeOuter = +_, axis2) : tickSizeOuter;
  };
  axis2.tickPadding = function(_) {
    return arguments.length ? (tickPadding = +_, axis2) : tickPadding;
  };
  axis2.offset = function(_) {
    return arguments.length ? (offset = +_, axis2) : offset;
  };
  return axis2;
}
function axisBottom(scale) {
  return axis(bottom, scale);
}
function axisLeft(scale) {
  return axis(left, scale);
}

// node_modules/d3-dispatch/src/dispatch.js
var noop = { value: () => {
} };
function dispatch() {
  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {
    if (!(t = arguments[i] + "") || t in _ || /[\s.]/.test(t))
      throw new Error("illegal type: " + t);
    _[t] = [];
  }
  return new Dispatch(_);
}
function Dispatch(_) {
  this._ = _;
}
function parseTypenames(typenames, types) {
  return typenames.trim().split(/^|\s+/).map(function(t) {
    var name = "", i = t.indexOf(".");
    if (i >= 0)
      name = t.slice(i + 1), t = t.slice(0, i);
    if (t && !types.hasOwnProperty(t))
      throw new Error("unknown type: " + t);
    return { type: t, name };
  });
}
Dispatch.prototype = dispatch.prototype = {
  constructor: Dispatch,
  on: function(typename, callback) {
    var _ = this._, T = parseTypenames(typename + "", _), t, i = -1, n = T.length;
    if (arguments.length < 2) {
      while (++i < n)
        if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name)))
          return t;
      return;
    }
    if (callback != null && typeof callback !== "function")
      throw new Error("invalid callback: " + callback);
    while (++i < n) {
      if (t = (typename = T[i]).type)
        _[t] = set(_[t], typename.name, callback);
      else if (callback == null)
        for (t in _)
          _[t] = set(_[t], typename.name, null);
    }
    return this;
  },
  copy: function() {
    var copy2 = {}, _ = this._;
    for (var t in _)
      copy2[t] = _[t].slice();
    return new Dispatch(copy2);
  },
  call: function(type2, that) {
    if ((n = arguments.length - 2) > 0)
      for (var args = new Array(n), i = 0, n, t; i < n; ++i)
        args[i] = arguments[i + 2];
    if (!this._.hasOwnProperty(type2))
      throw new Error("unknown type: " + type2);
    for (t = this._[type2], i = 0, n = t.length; i < n; ++i)
      t[i].value.apply(that, args);
  },
  apply: function(type2, that, args) {
    if (!this._.hasOwnProperty(type2))
      throw new Error("unknown type: " + type2);
    for (var t = this._[type2], i = 0, n = t.length; i < n; ++i)
      t[i].value.apply(that, args);
  }
};
function get(type2, name) {
  for (var i = 0, n = type2.length, c; i < n; ++i) {
    if ((c = type2[i]).name === name) {
      return c.value;
    }
  }
}
function set(type2, name, callback) {
  for (var i = 0, n = type2.length; i < n; ++i) {
    if (type2[i].name === name) {
      type2[i] = noop, type2 = type2.slice(0, i).concat(type2.slice(i + 1));
      break;
    }
  }
  if (callback != null)
    type2.push({ name, value: callback });
  return type2;
}
var dispatch_default = dispatch;

// node_modules/d3-selection/src/namespaces.js
var xhtml = "http://www.w3.org/1999/xhtml";
var namespaces_default = {
  svg: "http://www.w3.org/2000/svg",
  xhtml,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
};

// node_modules/d3-selection/src/namespace.js
function namespace_default(name) {
  var prefix = name += "", i = prefix.indexOf(":");
  if (i >= 0 && (prefix = name.slice(0, i)) !== "xmlns")
    name = name.slice(i + 1);
  return namespaces_default.hasOwnProperty(prefix) ? { space: namespaces_default[prefix], local: name } : name;
}

// node_modules/d3-selection/src/creator.js
function creatorInherit(name) {
  return function() {
    var document2 = this.ownerDocument, uri = this.namespaceURI;
    return uri === xhtml && document2.documentElement.namespaceURI === xhtml ? document2.createElement(name) : document2.createElementNS(uri, name);
  };
}
function creatorFixed(fullname) {
  return function() {
    return this.ownerDocument.createElementNS(fullname.space, fullname.local);
  };
}
function creator_default(name) {
  var fullname = namespace_default(name);
  return (fullname.local ? creatorFixed : creatorInherit)(fullname);
}

// node_modules/d3-selection/src/selector.js
function none() {
}
function selector_default(selector) {
  return selector == null ? none : function() {
    return this.querySelector(selector);
  };
}

// node_modules/d3-selection/src/selection/select.js
function select_default(select) {
  if (typeof select !== "function")
    select = selector_default(select);
  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {
      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {
        if ("__data__" in node)
          subnode.__data__ = node.__data__;
        subgroup[i] = subnode;
      }
    }
  }
  return new Selection(subgroups, this._parents);
}

// node_modules/d3-selection/src/array.js
function array(x) {
  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);
}

// node_modules/d3-selection/src/selectorAll.js
function empty() {
  return [];
}
function selectorAll_default(selector) {
  return selector == null ? empty : function() {
    return this.querySelectorAll(selector);
  };
}

// node_modules/d3-selection/src/selection/selectAll.js
function arrayAll(select) {
  return function() {
    return array(select.apply(this, arguments));
  };
}
function selectAll_default(select) {
  if (typeof select === "function")
    select = arrayAll(select);
  else
    select = selectorAll_default(select);
  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        subgroups.push(select.call(node, node.__data__, i, group));
        parents.push(node);
      }
    }
  }
  return new Selection(subgroups, parents);
}

// node_modules/d3-selection/src/matcher.js
function matcher_default(selector) {
  return function() {
    return this.matches(selector);
  };
}
function childMatcher(selector) {
  return function(node) {
    return node.matches(selector);
  };
}

// node_modules/d3-selection/src/selection/selectChild.js
var find = Array.prototype.find;
function childFind(match) {
  return function() {
    return find.call(this.children, match);
  };
}
function childFirst() {
  return this.firstElementChild;
}
function selectChild_default(match) {
  return this.select(match == null ? childFirst : childFind(typeof match === "function" ? match : childMatcher(match)));
}

// node_modules/d3-selection/src/selection/selectChildren.js
var filter = Array.prototype.filter;
function children() {
  return Array.from(this.children);
}
function childrenFilter(match) {
  return function() {
    return filter.call(this.children, match);
  };
}
function selectChildren_default(match) {
  return this.selectAll(match == null ? children : childrenFilter(typeof match === "function" ? match : childMatcher(match)));
}

// node_modules/d3-selection/src/selection/filter.js
function filter_default(match) {
  if (typeof match !== "function")
    match = matcher_default(match);
  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {
      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {
        subgroup.push(node);
      }
    }
  }
  return new Selection(subgroups, this._parents);
}

// node_modules/d3-selection/src/selection/sparse.js
function sparse_default(update) {
  return new Array(update.length);
}

// node_modules/d3-selection/src/selection/enter.js
function enter_default() {
  return new Selection(this._enter || this._groups.map(sparse_default), this._parents);
}
function EnterNode(parent, datum2) {
  this.ownerDocument = parent.ownerDocument;
  this.namespaceURI = parent.namespaceURI;
  this._next = null;
  this._parent = parent;
  this.__data__ = datum2;
}
EnterNode.prototype = {
  constructor: EnterNode,
  appendChild: function(child) {
    return this._parent.insertBefore(child, this._next);
  },
  insertBefore: function(child, next) {
    return this._parent.insertBefore(child, next);
  },
  querySelector: function(selector) {
    return this._parent.querySelector(selector);
  },
  querySelectorAll: function(selector) {
    return this._parent.querySelectorAll(selector);
  }
};

// node_modules/d3-selection/src/constant.js
function constant_default(x) {
  return function() {
    return x;
  };
}

// node_modules/d3-selection/src/selection/data.js
function bindIndex(parent, group, enter, update, exit, data) {
  var i = 0, node, groupLength = group.length, dataLength = data.length;
  for (; i < dataLength; ++i) {
    if (node = group[i]) {
      node.__data__ = data[i];
      update[i] = node;
    } else {
      enter[i] = new EnterNode(parent, data[i]);
    }
  }
  for (; i < groupLength; ++i) {
    if (node = group[i]) {
      exit[i] = node;
    }
  }
}
function bindKey(parent, group, enter, update, exit, data, key) {
  var i, node, nodeByKeyValue = /* @__PURE__ */ new Map(), groupLength = group.length, dataLength = data.length, keyValues = new Array(groupLength), keyValue;
  for (i = 0; i < groupLength; ++i) {
    if (node = group[i]) {
      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + "";
      if (nodeByKeyValue.has(keyValue)) {
        exit[i] = node;
      } else {
        nodeByKeyValue.set(keyValue, node);
      }
    }
  }
  for (i = 0; i < dataLength; ++i) {
    keyValue = key.call(parent, data[i], i, data) + "";
    if (node = nodeByKeyValue.get(keyValue)) {
      update[i] = node;
      node.__data__ = data[i];
      nodeByKeyValue.delete(keyValue);
    } else {
      enter[i] = new EnterNode(parent, data[i]);
    }
  }
  for (i = 0; i < groupLength; ++i) {
    if ((node = group[i]) && nodeByKeyValue.get(keyValues[i]) === node) {
      exit[i] = node;
    }
  }
}
function datum(node) {
  return node.__data__;
}
function data_default(value, key) {
  if (!arguments.length)
    return Array.from(this, datum);
  var bind = key ? bindKey : bindIndex, parents = this._parents, groups = this._groups;
  if (typeof value !== "function")
    value = constant_default(value);
  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {
    var parent = parents[j], group = groups[j], groupLength = group.length, data = arraylike(value.call(parent, parent && parent.__data__, j, parents)), dataLength = data.length, enterGroup = enter[j] = new Array(dataLength), updateGroup = update[j] = new Array(dataLength), exitGroup = exit[j] = new Array(groupLength);
    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);
    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {
      if (previous = enterGroup[i0]) {
        if (i0 >= i1)
          i1 = i0 + 1;
        while (!(next = updateGroup[i1]) && ++i1 < dataLength)
          ;
        previous._next = next || null;
      }
    }
  }
  update = new Selection(update, parents);
  update._enter = enter;
  update._exit = exit;
  return update;
}
function arraylike(data) {
  return typeof data === "object" && "length" in data ? data : Array.from(data);
}

// node_modules/d3-selection/src/selection/exit.js
function exit_default() {
  return new Selection(this._exit || this._groups.map(sparse_default), this._parents);
}

// node_modules/d3-selection/src/selection/join.js
function join_default(onenter, onupdate, onexit) {
  var enter = this.enter(), update = this, exit = this.exit();
  if (typeof onenter === "function") {
    enter = onenter(enter);
    if (enter)
      enter = enter.selection();
  } else {
    enter = enter.append(onenter + "");
  }
  if (onupdate != null) {
    update = onupdate(update);
    if (update)
      update = update.selection();
  }
  if (onexit == null)
    exit.remove();
  else
    onexit(exit);
  return enter && update ? enter.merge(update).order() : update;
}

// node_modules/d3-selection/src/selection/merge.js
function merge_default(context) {
  var selection2 = context.selection ? context.selection() : context;
  for (var groups0 = this._groups, groups1 = selection2._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {
    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group0[i] || group1[i]) {
        merge[i] = node;
      }
    }
  }
  for (; j < m0; ++j) {
    merges[j] = groups0[j];
  }
  return new Selection(merges, this._parents);
}

// node_modules/d3-selection/src/selection/order.js
function order_default() {
  for (var groups = this._groups, j = -1, m = groups.length; ++j < m; ) {
    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0; ) {
      if (node = group[i]) {
        if (next && node.compareDocumentPosition(next) ^ 4)
          next.parentNode.insertBefore(node, next);
        next = node;
      }
    }
  }
  return this;
}

// node_modules/d3-selection/src/selection/sort.js
function sort_default(compare) {
  if (!compare)
    compare = ascending2;
  function compareNode(a, b) {
    return a && b ? compare(a.__data__, b.__data__) : !a - !b;
  }
  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        sortgroup[i] = node;
      }
    }
    sortgroup.sort(compareNode);
  }
  return new Selection(sortgroups, this._parents).order();
}
function ascending2(a, b) {
  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;
}

// node_modules/d3-selection/src/selection/call.js
function call_default() {
  var callback = arguments[0];
  arguments[0] = this;
  callback.apply(null, arguments);
  return this;
}

// node_modules/d3-selection/src/selection/nodes.js
function nodes_default() {
  return Array.from(this);
}

// node_modules/d3-selection/src/selection/node.js
function node_default() {
  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {
      var node = group[i];
      if (node)
        return node;
    }
  }
  return null;
}

// node_modules/d3-selection/src/selection/size.js
function size_default() {
  let size = 0;
  for (const node of this)
    ++size;
  return size;
}

// node_modules/d3-selection/src/selection/empty.js
function empty_default() {
  return !this.node();
}

// node_modules/d3-selection/src/selection/each.js
function each_default(callback) {
  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {
      if (node = group[i])
        callback.call(node, node.__data__, i, group);
    }
  }
  return this;
}

// node_modules/d3-selection/src/selection/attr.js
function attrRemove(name) {
  return function() {
    this.removeAttribute(name);
  };
}
function attrRemoveNS(fullname) {
  return function() {
    this.removeAttributeNS(fullname.space, fullname.local);
  };
}
function attrConstant(name, value) {
  return function() {
    this.setAttribute(name, value);
  };
}
function attrConstantNS(fullname, value) {
  return function() {
    this.setAttributeNS(fullname.space, fullname.local, value);
  };
}
function attrFunction(name, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null)
      this.removeAttribute(name);
    else
      this.setAttribute(name, v);
  };
}
function attrFunctionNS(fullname, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null)
      this.removeAttributeNS(fullname.space, fullname.local);
    else
      this.setAttributeNS(fullname.space, fullname.local, v);
  };
}
function attr_default(name, value) {
  var fullname = namespace_default(name);
  if (arguments.length < 2) {
    var node = this.node();
    return fullname.local ? node.getAttributeNS(fullname.space, fullname.local) : node.getAttribute(fullname);
  }
  return this.each((value == null ? fullname.local ? attrRemoveNS : attrRemove : typeof value === "function" ? fullname.local ? attrFunctionNS : attrFunction : fullname.local ? attrConstantNS : attrConstant)(fullname, value));
}

// node_modules/d3-selection/src/window.js
function window_default(node) {
  return node.ownerDocument && node.ownerDocument.defaultView || node.document && node || node.defaultView;
}

// node_modules/d3-selection/src/selection/style.js
function styleRemove(name) {
  return function() {
    this.style.removeProperty(name);
  };
}
function styleConstant(name, value, priority) {
  return function() {
    this.style.setProperty(name, value, priority);
  };
}
function styleFunction(name, value, priority) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null)
      this.style.removeProperty(name);
    else
      this.style.setProperty(name, v, priority);
  };
}
function style_default(name, value, priority) {
  return arguments.length > 1 ? this.each((value == null ? styleRemove : typeof value === "function" ? styleFunction : styleConstant)(name, value, priority == null ? "" : priority)) : styleValue(this.node(), name);
}
function styleValue(node, name) {
  return node.style.getPropertyValue(name) || window_default(node).getComputedStyle(node, null).getPropertyValue(name);
}

// node_modules/d3-selection/src/selection/property.js
function propertyRemove(name) {
  return function() {
    delete this[name];
  };
}
function propertyConstant(name, value) {
  return function() {
    this[name] = value;
  };
}
function propertyFunction(name, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null)
      delete this[name];
    else
      this[name] = v;
  };
}
function property_default(name, value) {
  return arguments.length > 1 ? this.each((value == null ? propertyRemove : typeof value === "function" ? propertyFunction : propertyConstant)(name, value)) : this.node()[name];
}

// node_modules/d3-selection/src/selection/classed.js
function classArray(string) {
  return string.trim().split(/^|\s+/);
}
function classList(node) {
  return node.classList || new ClassList(node);
}
function ClassList(node) {
  this._node = node;
  this._names = classArray(node.getAttribute("class") || "");
}
ClassList.prototype = {
  add: function(name) {
    var i = this._names.indexOf(name);
    if (i < 0) {
      this._names.push(name);
      this._node.setAttribute("class", this._names.join(" "));
    }
  },
  remove: function(name) {
    var i = this._names.indexOf(name);
    if (i >= 0) {
      this._names.splice(i, 1);
      this._node.setAttribute("class", this._names.join(" "));
    }
  },
  contains: function(name) {
    return this._names.indexOf(name) >= 0;
  }
};
function classedAdd(node, names) {
  var list = classList(node), i = -1, n = names.length;
  while (++i < n)
    list.add(names[i]);
}
function classedRemove(node, names) {
  var list = classList(node), i = -1, n = names.length;
  while (++i < n)
    list.remove(names[i]);
}
function classedTrue(names) {
  return function() {
    classedAdd(this, names);
  };
}
function classedFalse(names) {
  return function() {
    classedRemove(this, names);
  };
}
function classedFunction(names, value) {
  return function() {
    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);
  };
}
function classed_default(name, value) {
  var names = classArray(name + "");
  if (arguments.length < 2) {
    var list = classList(this.node()), i = -1, n = names.length;
    while (++i < n)
      if (!list.contains(names[i]))
        return false;
    return true;
  }
  return this.each((typeof value === "function" ? classedFunction : value ? classedTrue : classedFalse)(names, value));
}

// node_modules/d3-selection/src/selection/text.js
function textRemove() {
  this.textContent = "";
}
function textConstant(value) {
  return function() {
    this.textContent = value;
  };
}
function textFunction(value) {
  return function() {
    var v = value.apply(this, arguments);
    this.textContent = v == null ? "" : v;
  };
}
function text_default(value) {
  return arguments.length ? this.each(value == null ? textRemove : (typeof value === "function" ? textFunction : textConstant)(value)) : this.node().textContent;
}

// node_modules/d3-selection/src/selection/html.js
function htmlRemove() {
  this.innerHTML = "";
}
function htmlConstant(value) {
  return function() {
    this.innerHTML = value;
  };
}
function htmlFunction(value) {
  return function() {
    var v = value.apply(this, arguments);
    this.innerHTML = v == null ? "" : v;
  };
}
function html_default(value) {
  return arguments.length ? this.each(value == null ? htmlRemove : (typeof value === "function" ? htmlFunction : htmlConstant)(value)) : this.node().innerHTML;
}

// node_modules/d3-selection/src/selection/raise.js
function raise() {
  if (this.nextSibling)
    this.parentNode.appendChild(this);
}
function raise_default() {
  return this.each(raise);
}

// node_modules/d3-selection/src/selection/lower.js
function lower() {
  if (this.previousSibling)
    this.parentNode.insertBefore(this, this.parentNode.firstChild);
}
function lower_default() {
  return this.each(lower);
}

// node_modules/d3-selection/src/selection/append.js
function append_default(name) {
  var create2 = typeof name === "function" ? name : creator_default(name);
  return this.select(function() {
    return this.appendChild(create2.apply(this, arguments));
  });
}

// node_modules/d3-selection/src/selection/insert.js
function constantNull() {
  return null;
}
function insert_default(name, before) {
  var create2 = typeof name === "function" ? name : creator_default(name), select = before == null ? constantNull : typeof before === "function" ? before : selector_default(before);
  return this.select(function() {
    return this.insertBefore(create2.apply(this, arguments), select.apply(this, arguments) || null);
  });
}

// node_modules/d3-selection/src/selection/remove.js
function remove() {
  var parent = this.parentNode;
  if (parent)
    parent.removeChild(this);
}
function remove_default() {
  return this.each(remove);
}

// node_modules/d3-selection/src/selection/clone.js
function selection_cloneShallow() {
  var clone = this.cloneNode(false), parent = this.parentNode;
  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;
}
function selection_cloneDeep() {
  var clone = this.cloneNode(true), parent = this.parentNode;
  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;
}
function clone_default(deep) {
  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);
}

// node_modules/d3-selection/src/selection/datum.js
function datum_default(value) {
  return arguments.length ? this.property("__data__", value) : this.node().__data__;
}

// node_modules/d3-selection/src/selection/on.js
function contextListener(listener) {
  return function(event) {
    listener.call(this, event, this.__data__);
  };
}
function parseTypenames2(typenames) {
  return typenames.trim().split(/^|\s+/).map(function(t) {
    var name = "", i = t.indexOf(".");
    if (i >= 0)
      name = t.slice(i + 1), t = t.slice(0, i);
    return { type: t, name };
  });
}
function onRemove(typename) {
  return function() {
    var on = this.__on;
    if (!on)
      return;
    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {
      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {
        this.removeEventListener(o.type, o.listener, o.options);
      } else {
        on[++i] = o;
      }
    }
    if (++i)
      on.length = i;
    else
      delete this.__on;
  };
}
function onAdd(typename, value, options) {
  return function() {
    var on = this.__on, o, listener = contextListener(value);
    if (on)
      for (var j = 0, m = on.length; j < m; ++j) {
        if ((o = on[j]).type === typename.type && o.name === typename.name) {
          this.removeEventListener(o.type, o.listener, o.options);
          this.addEventListener(o.type, o.listener = listener, o.options = options);
          o.value = value;
          return;
        }
      }
    this.addEventListener(typename.type, listener, options);
    o = { type: typename.type, name: typename.name, value, listener, options };
    if (!on)
      this.__on = [o];
    else
      on.push(o);
  };
}
function on_default(typename, value, options) {
  var typenames = parseTypenames2(typename + ""), i, n = typenames.length, t;
  if (arguments.length < 2) {
    var on = this.node().__on;
    if (on)
      for (var j = 0, m = on.length, o; j < m; ++j) {
        for (i = 0, o = on[j]; i < n; ++i) {
          if ((t = typenames[i]).type === o.type && t.name === o.name) {
            return o.value;
          }
        }
      }
    return;
  }
  on = value ? onAdd : onRemove;
  for (i = 0; i < n; ++i)
    this.each(on(typenames[i], value, options));
  return this;
}

// node_modules/d3-selection/src/selection/dispatch.js
function dispatchEvent(node, type2, params) {
  var window2 = window_default(node), event = window2.CustomEvent;
  if (typeof event === "function") {
    event = new event(type2, params);
  } else {
    event = window2.document.createEvent("Event");
    if (params)
      event.initEvent(type2, params.bubbles, params.cancelable), event.detail = params.detail;
    else
      event.initEvent(type2, false, false);
  }
  node.dispatchEvent(event);
}
function dispatchConstant(type2, params) {
  return function() {
    return dispatchEvent(this, type2, params);
  };
}
function dispatchFunction(type2, params) {
  return function() {
    return dispatchEvent(this, type2, params.apply(this, arguments));
  };
}
function dispatch_default2(type2, params) {
  return this.each((typeof params === "function" ? dispatchFunction : dispatchConstant)(type2, params));
}

// node_modules/d3-selection/src/selection/iterator.js
function* iterator_default() {
  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {
      if (node = group[i])
        yield node;
    }
  }
}

// node_modules/d3-selection/src/selection/index.js
var root = [null];
function Selection(groups, parents) {
  this._groups = groups;
  this._parents = parents;
}
function selection() {
  return new Selection([[document.documentElement]], root);
}
function selection_selection() {
  return this;
}
Selection.prototype = selection.prototype = {
  constructor: Selection,
  select: select_default,
  selectAll: selectAll_default,
  selectChild: selectChild_default,
  selectChildren: selectChildren_default,
  filter: filter_default,
  data: data_default,
  enter: enter_default,
  exit: exit_default,
  join: join_default,
  merge: merge_default,
  selection: selection_selection,
  order: order_default,
  sort: sort_default,
  call: call_default,
  nodes: nodes_default,
  node: node_default,
  size: size_default,
  empty: empty_default,
  each: each_default,
  attr: attr_default,
  style: style_default,
  property: property_default,
  classed: classed_default,
  text: text_default,
  html: html_default,
  raise: raise_default,
  lower: lower_default,
  append: append_default,
  insert: insert_default,
  remove: remove_default,
  clone: clone_default,
  datum: datum_default,
  on: on_default,
  dispatch: dispatch_default2,
  [Symbol.iterator]: iterator_default
};
var selection_default = selection;

// node_modules/d3-selection/src/select.js
function select_default2(selector) {
  return typeof selector === "string" ? new Selection([[document.querySelector(selector)]], [document.documentElement]) : new Selection([[selector]], root);
}

// node_modules/d3-color/src/define.js
function define_default(constructor, factory, prototype) {
  constructor.prototype = factory.prototype = prototype;
  prototype.constructor = constructor;
}
function extend(parent, definition) {
  var prototype = Object.create(parent.prototype);
  for (var key in definition)
    prototype[key] = definition[key];
  return prototype;
}

// node_modules/d3-color/src/color.js
function Color() {
}
var darker = 0.7;
var brighter = 1 / darker;
var reI = "\\s*([+-]?\\d+)\\s*";
var reN = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*";
var reP = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*";
var reHex = /^#([0-9a-f]{3,8})$/;
var reRgbInteger = new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`);
var reRgbPercent = new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`);
var reRgbaInteger = new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`);
var reRgbaPercent = new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`);
var reHslPercent = new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`);
var reHslaPercent = new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`);
var named = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
define_default(Color, color, {
  copy(channels) {
    return Object.assign(new this.constructor(), this, channels);
  },
  displayable() {
    return this.rgb().displayable();
  },
  hex: color_formatHex,
  // Deprecated! Use color.formatHex.
  formatHex: color_formatHex,
  formatHex8: color_formatHex8,
  formatHsl: color_formatHsl,
  formatRgb: color_formatRgb,
  toString: color_formatRgb
});
function color_formatHex() {
  return this.rgb().formatHex();
}
function color_formatHex8() {
  return this.rgb().formatHex8();
}
function color_formatHsl() {
  return hslConvert(this).formatHsl();
}
function color_formatRgb() {
  return this.rgb().formatRgb();
}
function color(format2) {
  var m, l;
  format2 = (format2 + "").trim().toLowerCase();
  return (m = reHex.exec(format2)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) : l === 3 ? new Rgb(m >> 8 & 15 | m >> 4 & 240, m >> 4 & 15 | m & 240, (m & 15) << 4 | m & 15, 1) : l === 8 ? rgba(m >> 24 & 255, m >> 16 & 255, m >> 8 & 255, (m & 255) / 255) : l === 4 ? rgba(m >> 12 & 15 | m >> 8 & 240, m >> 8 & 15 | m >> 4 & 240, m >> 4 & 15 | m & 240, ((m & 15) << 4 | m & 15) / 255) : null) : (m = reRgbInteger.exec(format2)) ? new Rgb(m[1], m[2], m[3], 1) : (m = reRgbPercent.exec(format2)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) : (m = reRgbaInteger.exec(format2)) ? rgba(m[1], m[2], m[3], m[4]) : (m = reRgbaPercent.exec(format2)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) : (m = reHslPercent.exec(format2)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) : (m = reHslaPercent.exec(format2)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) : named.hasOwnProperty(format2) ? rgbn(named[format2]) : format2 === "transparent" ? new Rgb(NaN, NaN, NaN, 0) : null;
}
function rgbn(n) {
  return new Rgb(n >> 16 & 255, n >> 8 & 255, n & 255, 1);
}
function rgba(r, g, b, a) {
  if (a <= 0)
    r = g = b = NaN;
  return new Rgb(r, g, b, a);
}
function rgbConvert(o) {
  if (!(o instanceof Color))
    o = color(o);
  if (!o)
    return new Rgb();
  o = o.rgb();
  return new Rgb(o.r, o.g, o.b, o.opacity);
}
function rgb(r, g, b, opacity) {
  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);
}
function Rgb(r, g, b, opacity) {
  this.r = +r;
  this.g = +g;
  this.b = +b;
  this.opacity = +opacity;
}
define_default(Rgb, rgb, extend(Color, {
  brighter(k) {
    k = k == null ? brighter : Math.pow(brighter, k);
    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
  },
  darker(k) {
    k = k == null ? darker : Math.pow(darker, k);
    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
  },
  rgb() {
    return this;
  },
  clamp() {
    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));
  },
  displayable() {
    return -0.5 <= this.r && this.r < 255.5 && (-0.5 <= this.g && this.g < 255.5) && (-0.5 <= this.b && this.b < 255.5) && (0 <= this.opacity && this.opacity <= 1);
  },
  hex: rgb_formatHex,
  // Deprecated! Use color.formatHex.
  formatHex: rgb_formatHex,
  formatHex8: rgb_formatHex8,
  formatRgb: rgb_formatRgb,
  toString: rgb_formatRgb
}));
function rgb_formatHex() {
  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;
}
function rgb_formatHex8() {
  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;
}
function rgb_formatRgb() {
  const a = clampa(this.opacity);
  return `${a === 1 ? "rgb(" : "rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? ")" : `, ${a})`}`;
}
function clampa(opacity) {
  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));
}
function clampi(value) {
  return Math.max(0, Math.min(255, Math.round(value) || 0));
}
function hex(value) {
  value = clampi(value);
  return (value < 16 ? "0" : "") + value.toString(16);
}
function hsla(h, s, l, a) {
  if (a <= 0)
    h = s = l = NaN;
  else if (l <= 0 || l >= 1)
    h = s = NaN;
  else if (s <= 0)
    h = NaN;
  return new Hsl(h, s, l, a);
}
function hslConvert(o) {
  if (o instanceof Hsl)
    return new Hsl(o.h, o.s, o.l, o.opacity);
  if (!(o instanceof Color))
    o = color(o);
  if (!o)
    return new Hsl();
  if (o instanceof Hsl)
    return o;
  o = o.rgb();
  var r = o.r / 255, g = o.g / 255, b = o.b / 255, min2 = Math.min(r, g, b), max2 = Math.max(r, g, b), h = NaN, s = max2 - min2, l = (max2 + min2) / 2;
  if (s) {
    if (r === max2)
      h = (g - b) / s + (g < b) * 6;
    else if (g === max2)
      h = (b - r) / s + 2;
    else
      h = (r - g) / s + 4;
    s /= l < 0.5 ? max2 + min2 : 2 - max2 - min2;
    h *= 60;
  } else {
    s = l > 0 && l < 1 ? 0 : h;
  }
  return new Hsl(h, s, l, o.opacity);
}
function hsl(h, s, l, opacity) {
  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);
}
function Hsl(h, s, l, opacity) {
  this.h = +h;
  this.s = +s;
  this.l = +l;
  this.opacity = +opacity;
}
define_default(Hsl, hsl, extend(Color, {
  brighter(k) {
    k = k == null ? brighter : Math.pow(brighter, k);
    return new Hsl(this.h, this.s, this.l * k, this.opacity);
  },
  darker(k) {
    k = k == null ? darker : Math.pow(darker, k);
    return new Hsl(this.h, this.s, this.l * k, this.opacity);
  },
  rgb() {
    var h = this.h % 360 + (this.h < 0) * 360, s = isNaN(h) || isNaN(this.s) ? 0 : this.s, l = this.l, m2 = l + (l < 0.5 ? l : 1 - l) * s, m1 = 2 * l - m2;
    return new Rgb(
      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),
      hsl2rgb(h, m1, m2),
      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),
      this.opacity
    );
  },
  clamp() {
    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));
  },
  displayable() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && (0 <= this.l && this.l <= 1) && (0 <= this.opacity && this.opacity <= 1);
  },
  formatHsl() {
    const a = clampa(this.opacity);
    return `${a === 1 ? "hsl(" : "hsla("}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? ")" : `, ${a})`}`;
  }
}));
function clamph(value) {
  value = (value || 0) % 360;
  return value < 0 ? value + 360 : value;
}
function clampt(value) {
  return Math.max(0, Math.min(1, value || 0));
}
function hsl2rgb(h, m1, m2) {
  return (h < 60 ? m1 + (m2 - m1) * h / 60 : h < 180 ? m2 : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60 : m1) * 255;
}

// node_modules/d3-interpolate/src/basis.js
function basis(t1, v0, v1, v2, v3) {
  var t2 = t1 * t1, t3 = t2 * t1;
  return ((1 - 3 * t1 + 3 * t2 - t3) * v0 + (4 - 6 * t2 + 3 * t3) * v1 + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2 + t3 * v3) / 6;
}
function basis_default(values) {
  var n = values.length - 1;
  return function(t) {
    var i = t <= 0 ? t = 0 : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n), v1 = values[i], v2 = values[i + 1], v0 = i > 0 ? values[i - 1] : 2 * v1 - v2, v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;
    return basis((t - i / n) * n, v0, v1, v2, v3);
  };
}

// node_modules/d3-interpolate/src/basisClosed.js
function basisClosed_default(values) {
  var n = values.length;
  return function(t) {
    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n), v0 = values[(i + n - 1) % n], v1 = values[i % n], v2 = values[(i + 1) % n], v3 = values[(i + 2) % n];
    return basis((t - i / n) * n, v0, v1, v2, v3);
  };
}

// node_modules/d3-interpolate/src/constant.js
var constant_default2 = (x) => () => x;

// node_modules/d3-interpolate/src/color.js
function linear(a, d) {
  return function(t) {
    return a + t * d;
  };
}
function exponential(a, b, y) {
  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {
    return Math.pow(a + t * b, y);
  };
}
function gamma(y) {
  return (y = +y) === 1 ? nogamma : function(a, b) {
    return b - a ? exponential(a, b, y) : constant_default2(isNaN(a) ? b : a);
  };
}
function nogamma(a, b) {
  var d = b - a;
  return d ? linear(a, d) : constant_default2(isNaN(a) ? b : a);
}

// node_modules/d3-interpolate/src/rgb.js
var rgb_default = function rgbGamma(y) {
  var color2 = gamma(y);
  function rgb2(start2, end) {
    var r = color2((start2 = rgb(start2)).r, (end = rgb(end)).r), g = color2(start2.g, end.g), b = color2(start2.b, end.b), opacity = nogamma(start2.opacity, end.opacity);
    return function(t) {
      start2.r = r(t);
      start2.g = g(t);
      start2.b = b(t);
      start2.opacity = opacity(t);
      return start2 + "";
    };
  }
  rgb2.gamma = rgbGamma;
  return rgb2;
}(1);
function rgbSpline(spline) {
  return function(colors) {
    var n = colors.length, r = new Array(n), g = new Array(n), b = new Array(n), i, color2;
    for (i = 0; i < n; ++i) {
      color2 = rgb(colors[i]);
      r[i] = color2.r || 0;
      g[i] = color2.g || 0;
      b[i] = color2.b || 0;
    }
    r = spline(r);
    g = spline(g);
    b = spline(b);
    color2.opacity = 1;
    return function(t) {
      color2.r = r(t);
      color2.g = g(t);
      color2.b = b(t);
      return color2 + "";
    };
  };
}
var rgbBasis = rgbSpline(basis_default);
var rgbBasisClosed = rgbSpline(basisClosed_default);

// node_modules/d3-interpolate/src/numberArray.js
function numberArray_default(a, b) {
  if (!b)
    b = [];
  var n = a ? Math.min(b.length, a.length) : 0, c = b.slice(), i;
  return function(t) {
    for (i = 0; i < n; ++i)
      c[i] = a[i] * (1 - t) + b[i] * t;
    return c;
  };
}
function isNumberArray(x) {
  return ArrayBuffer.isView(x) && !(x instanceof DataView);
}

// node_modules/d3-interpolate/src/array.js
function genericArray(a, b) {
  var nb = b ? b.length : 0, na = a ? Math.min(nb, a.length) : 0, x = new Array(na), c = new Array(nb), i;
  for (i = 0; i < na; ++i)
    x[i] = value_default(a[i], b[i]);
  for (; i < nb; ++i)
    c[i] = b[i];
  return function(t) {
    for (i = 0; i < na; ++i)
      c[i] = x[i](t);
    return c;
  };
}

// node_modules/d3-interpolate/src/date.js
function date_default(a, b) {
  var d = /* @__PURE__ */ new Date();
  return a = +a, b = +b, function(t) {
    return d.setTime(a * (1 - t) + b * t), d;
  };
}

// node_modules/d3-interpolate/src/number.js
function number_default(a, b) {
  return a = +a, b = +b, function(t) {
    return a * (1 - t) + b * t;
  };
}

// node_modules/d3-interpolate/src/object.js
function object_default(a, b) {
  var i = {}, c = {}, k;
  if (a === null || typeof a !== "object")
    a = {};
  if (b === null || typeof b !== "object")
    b = {};
  for (k in b) {
    if (k in a) {
      i[k] = value_default(a[k], b[k]);
    } else {
      c[k] = b[k];
    }
  }
  return function(t) {
    for (k in i)
      c[k] = i[k](t);
    return c;
  };
}

// node_modules/d3-interpolate/src/string.js
var reA = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
var reB = new RegExp(reA.source, "g");
function zero2(b) {
  return function() {
    return b;
  };
}
function one(b) {
  return function(t) {
    return b(t) + "";
  };
}
function string_default(a, b) {
  var bi = reA.lastIndex = reB.lastIndex = 0, am, bm, bs, i = -1, s = [], q = [];
  a = a + "", b = b + "";
  while ((am = reA.exec(a)) && (bm = reB.exec(b))) {
    if ((bs = bm.index) > bi) {
      bs = b.slice(bi, bs);
      if (s[i])
        s[i] += bs;
      else
        s[++i] = bs;
    }
    if ((am = am[0]) === (bm = bm[0])) {
      if (s[i])
        s[i] += bm;
      else
        s[++i] = bm;
    } else {
      s[++i] = null;
      q.push({ i, x: number_default(am, bm) });
    }
    bi = reB.lastIndex;
  }
  if (bi < b.length) {
    bs = b.slice(bi);
    if (s[i])
      s[i] += bs;
    else
      s[++i] = bs;
  }
  return s.length < 2 ? q[0] ? one(q[0].x) : zero2(b) : (b = q.length, function(t) {
    for (var i2 = 0, o; i2 < b; ++i2)
      s[(o = q[i2]).i] = o.x(t);
    return s.join("");
  });
}

// node_modules/d3-interpolate/src/value.js
function value_default(a, b) {
  var t = typeof b, c;
  return b == null || t === "boolean" ? constant_default2(b) : (t === "number" ? number_default : t === "string" ? (c = color(b)) ? (b = c, rgb_default) : string_default : b instanceof color ? rgb_default : b instanceof Date ? date_default : isNumberArray(b) ? numberArray_default : Array.isArray(b) ? genericArray : typeof b.valueOf !== "function" && typeof b.toString !== "function" || isNaN(b) ? object_default : number_default)(a, b);
}

// node_modules/d3-interpolate/src/round.js
function round_default(a, b) {
  return a = +a, b = +b, function(t) {
    return Math.round(a * (1 - t) + b * t);
  };
}

// node_modules/d3-interpolate/src/transform/decompose.js
var degrees = 180 / Math.PI;
var identity = {
  translateX: 0,
  translateY: 0,
  rotate: 0,
  skewX: 0,
  scaleX: 1,
  scaleY: 1
};
function decompose_default(a, b, c, d, e, f) {
  var scaleX, scaleY, skewX;
  if (scaleX = Math.sqrt(a * a + b * b))
    a /= scaleX, b /= scaleX;
  if (skewX = a * c + b * d)
    c -= a * skewX, d -= b * skewX;
  if (scaleY = Math.sqrt(c * c + d * d))
    c /= scaleY, d /= scaleY, skewX /= scaleY;
  if (a * d < b * c)
    a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;
  return {
    translateX: e,
    translateY: f,
    rotate: Math.atan2(b, a) * degrees,
    skewX: Math.atan(skewX) * degrees,
    scaleX,
    scaleY
  };
}

// node_modules/d3-interpolate/src/transform/parse.js
var svgNode;
function parseCss(value) {
  const m = new (typeof DOMMatrix === "function" ? DOMMatrix : WebKitCSSMatrix)(value + "");
  return m.isIdentity ? identity : decompose_default(m.a, m.b, m.c, m.d, m.e, m.f);
}
function parseSvg(value) {
  if (value == null)
    return identity;
  if (!svgNode)
    svgNode = document.createElementNS("http://www.w3.org/2000/svg", "g");
  svgNode.setAttribute("transform", value);
  if (!(value = svgNode.transform.baseVal.consolidate()))
    return identity;
  value = value.matrix;
  return decompose_default(value.a, value.b, value.c, value.d, value.e, value.f);
}

// node_modules/d3-interpolate/src/transform/index.js
function interpolateTransform(parse, pxComma, pxParen, degParen) {
  function pop(s) {
    return s.length ? s.pop() + " " : "";
  }
  function translate(xa, ya, xb, yb, s, q) {
    if (xa !== xb || ya !== yb) {
      var i = s.push("translate(", null, pxComma, null, pxParen);
      q.push({ i: i - 4, x: number_default(xa, xb) }, { i: i - 2, x: number_default(ya, yb) });
    } else if (xb || yb) {
      s.push("translate(" + xb + pxComma + yb + pxParen);
    }
  }
  function rotate(a, b, s, q) {
    if (a !== b) {
      if (a - b > 180)
        b += 360;
      else if (b - a > 180)
        a += 360;
      q.push({ i: s.push(pop(s) + "rotate(", null, degParen) - 2, x: number_default(a, b) });
    } else if (b) {
      s.push(pop(s) + "rotate(" + b + degParen);
    }
  }
  function skewX(a, b, s, q) {
    if (a !== b) {
      q.push({ i: s.push(pop(s) + "skewX(", null, degParen) - 2, x: number_default(a, b) });
    } else if (b) {
      s.push(pop(s) + "skewX(" + b + degParen);
    }
  }
  function scale(xa, ya, xb, yb, s, q) {
    if (xa !== xb || ya !== yb) {
      var i = s.push(pop(s) + "scale(", null, ",", null, ")");
      q.push({ i: i - 4, x: number_default(xa, xb) }, { i: i - 2, x: number_default(ya, yb) });
    } else if (xb !== 1 || yb !== 1) {
      s.push(pop(s) + "scale(" + xb + "," + yb + ")");
    }
  }
  return function(a, b) {
    var s = [], q = [];
    a = parse(a), b = parse(b);
    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);
    rotate(a.rotate, b.rotate, s, q);
    skewX(a.skewX, b.skewX, s, q);
    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);
    a = b = null;
    return function(t) {
      var i = -1, n = q.length, o;
      while (++i < n)
        s[(o = q[i]).i] = o.x(t);
      return s.join("");
    };
  };
}
var interpolateTransformCss = interpolateTransform(parseCss, "px, ", "px)", "deg)");
var interpolateTransformSvg = interpolateTransform(parseSvg, ", ", ")", ")");

// node_modules/d3-timer/src/timer.js
var frame = 0;
var timeout = 0;
var interval = 0;
var pokeDelay = 1e3;
var taskHead;
var taskTail;
var clockLast = 0;
var clockNow = 0;
var clockSkew = 0;
var clock = typeof performance === "object" && performance.now ? performance : Date;
var setFrame = typeof window === "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) {
  setTimeout(f, 17);
};
function now() {
  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);
}
function clearNow() {
  clockNow = 0;
}
function Timer() {
  this._call = this._time = this._next = null;
}
Timer.prototype = timer.prototype = {
  constructor: Timer,
  restart: function(callback, delay, time) {
    if (typeof callback !== "function")
      throw new TypeError("callback is not a function");
    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);
    if (!this._next && taskTail !== this) {
      if (taskTail)
        taskTail._next = this;
      else
        taskHead = this;
      taskTail = this;
    }
    this._call = callback;
    this._time = time;
    sleep();
  },
  stop: function() {
    if (this._call) {
      this._call = null;
      this._time = Infinity;
      sleep();
    }
  }
};
function timer(callback, delay, time) {
  var t = new Timer();
  t.restart(callback, delay, time);
  return t;
}
function timerFlush() {
  now();
  ++frame;
  var t = taskHead, e;
  while (t) {
    if ((e = clockNow - t._time) >= 0)
      t._call.call(void 0, e);
    t = t._next;
  }
  --frame;
}
function wake() {
  clockNow = (clockLast = clock.now()) + clockSkew;
  frame = timeout = 0;
  try {
    timerFlush();
  } finally {
    frame = 0;
    nap();
    clockNow = 0;
  }
}
function poke() {
  var now2 = clock.now(), delay = now2 - clockLast;
  if (delay > pokeDelay)
    clockSkew -= delay, clockLast = now2;
}
function nap() {
  var t0, t1 = taskHead, t2, time = Infinity;
  while (t1) {
    if (t1._call) {
      if (time > t1._time)
        time = t1._time;
      t0 = t1, t1 = t1._next;
    } else {
      t2 = t1._next, t1._next = null;
      t1 = t0 ? t0._next = t2 : taskHead = t2;
    }
  }
  taskTail = t0;
  sleep(time);
}
function sleep(time) {
  if (frame)
    return;
  if (timeout)
    timeout = clearTimeout(timeout);
  var delay = time - clockNow;
  if (delay > 24) {
    if (time < Infinity)
      timeout = setTimeout(wake, time - clock.now() - clockSkew);
    if (interval)
      interval = clearInterval(interval);
  } else {
    if (!interval)
      clockLast = clock.now(), interval = setInterval(poke, pokeDelay);
    frame = 1, setFrame(wake);
  }
}

// node_modules/d3-timer/src/timeout.js
function timeout_default(callback, delay, time) {
  var t = new Timer();
  delay = delay == null ? 0 : +delay;
  t.restart((elapsed) => {
    t.stop();
    callback(elapsed + delay);
  }, delay, time);
  return t;
}

// node_modules/d3-transition/src/transition/schedule.js
var emptyOn = dispatch_default("start", "end", "cancel", "interrupt");
var emptyTween = [];
var CREATED = 0;
var SCHEDULED = 1;
var STARTING = 2;
var STARTED = 3;
var RUNNING = 4;
var ENDING = 5;
var ENDED = 6;
function schedule_default(node, name, id2, index, group, timing) {
  var schedules = node.__transition;
  if (!schedules)
    node.__transition = {};
  else if (id2 in schedules)
    return;
  create(node, id2, {
    name,
    index,
    // For context during callback.
    group,
    // For context during callback.
    on: emptyOn,
    tween: emptyTween,
    time: timing.time,
    delay: timing.delay,
    duration: timing.duration,
    ease: timing.ease,
    timer: null,
    state: CREATED
  });
}
function init(node, id2) {
  var schedule = get2(node, id2);
  if (schedule.state > CREATED)
    throw new Error("too late; already scheduled");
  return schedule;
}
function set2(node, id2) {
  var schedule = get2(node, id2);
  if (schedule.state > STARTED)
    throw new Error("too late; already running");
  return schedule;
}
function get2(node, id2) {
  var schedule = node.__transition;
  if (!schedule || !(schedule = schedule[id2]))
    throw new Error("transition not found");
  return schedule;
}
function create(node, id2, self) {
  var schedules = node.__transition, tween;
  schedules[id2] = self;
  self.timer = timer(schedule, 0, self.time);
  function schedule(elapsed) {
    self.state = SCHEDULED;
    self.timer.restart(start2, self.delay, self.time);
    if (self.delay <= elapsed)
      start2(elapsed - self.delay);
  }
  function start2(elapsed) {
    var i, j, n, o;
    if (self.state !== SCHEDULED)
      return stop();
    for (i in schedules) {
      o = schedules[i];
      if (o.name !== self.name)
        continue;
      if (o.state === STARTED)
        return timeout_default(start2);
      if (o.state === RUNNING) {
        o.state = ENDED;
        o.timer.stop();
        o.on.call("interrupt", node, node.__data__, o.index, o.group);
        delete schedules[i];
      } else if (+i < id2) {
        o.state = ENDED;
        o.timer.stop();
        o.on.call("cancel", node, node.__data__, o.index, o.group);
        delete schedules[i];
      }
    }
    timeout_default(function() {
      if (self.state === STARTED) {
        self.state = RUNNING;
        self.timer.restart(tick, self.delay, self.time);
        tick(elapsed);
      }
    });
    self.state = STARTING;
    self.on.call("start", node, node.__data__, self.index, self.group);
    if (self.state !== STARTING)
      return;
    self.state = STARTED;
    tween = new Array(n = self.tween.length);
    for (i = 0, j = -1; i < n; ++i) {
      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {
        tween[++j] = o;
      }
    }
    tween.length = j + 1;
  }
  function tick(elapsed) {
    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1), i = -1, n = tween.length;
    while (++i < n) {
      tween[i].call(node, t);
    }
    if (self.state === ENDING) {
      self.on.call("end", node, node.__data__, self.index, self.group);
      stop();
    }
  }
  function stop() {
    self.state = ENDED;
    self.timer.stop();
    delete schedules[id2];
    for (var i in schedules)
      return;
    delete node.__transition;
  }
}

// node_modules/d3-transition/src/interrupt.js
function interrupt_default(node, name) {
  var schedules = node.__transition, schedule, active, empty2 = true, i;
  if (!schedules)
    return;
  name = name == null ? null : name + "";
  for (i in schedules) {
    if ((schedule = schedules[i]).name !== name) {
      empty2 = false;
      continue;
    }
    active = schedule.state > STARTING && schedule.state < ENDING;
    schedule.state = ENDED;
    schedule.timer.stop();
    schedule.on.call(active ? "interrupt" : "cancel", node, node.__data__, schedule.index, schedule.group);
    delete schedules[i];
  }
  if (empty2)
    delete node.__transition;
}

// node_modules/d3-transition/src/selection/interrupt.js
function interrupt_default2(name) {
  return this.each(function() {
    interrupt_default(this, name);
  });
}

// node_modules/d3-transition/src/transition/tween.js
function tweenRemove(id2, name) {
  var tween0, tween1;
  return function() {
    var schedule = set2(this, id2), tween = schedule.tween;
    if (tween !== tween0) {
      tween1 = tween0 = tween;
      for (var i = 0, n = tween1.length; i < n; ++i) {
        if (tween1[i].name === name) {
          tween1 = tween1.slice();
          tween1.splice(i, 1);
          break;
        }
      }
    }
    schedule.tween = tween1;
  };
}
function tweenFunction(id2, name, value) {
  var tween0, tween1;
  if (typeof value !== "function")
    throw new Error();
  return function() {
    var schedule = set2(this, id2), tween = schedule.tween;
    if (tween !== tween0) {
      tween1 = (tween0 = tween).slice();
      for (var t = { name, value }, i = 0, n = tween1.length; i < n; ++i) {
        if (tween1[i].name === name) {
          tween1[i] = t;
          break;
        }
      }
      if (i === n)
        tween1.push(t);
    }
    schedule.tween = tween1;
  };
}
function tween_default(name, value) {
  var id2 = this._id;
  name += "";
  if (arguments.length < 2) {
    var tween = get2(this.node(), id2).tween;
    for (var i = 0, n = tween.length, t; i < n; ++i) {
      if ((t = tween[i]).name === name) {
        return t.value;
      }
    }
    return null;
  }
  return this.each((value == null ? tweenRemove : tweenFunction)(id2, name, value));
}
function tweenValue(transition2, name, value) {
  var id2 = transition2._id;
  transition2.each(function() {
    var schedule = set2(this, id2);
    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);
  });
  return function(node) {
    return get2(node, id2).value[name];
  };
}

// node_modules/d3-transition/src/transition/interpolate.js
function interpolate_default(a, b) {
  var c;
  return (typeof b === "number" ? number_default : b instanceof color ? rgb_default : (c = color(b)) ? (b = c, rgb_default) : string_default)(a, b);
}

// node_modules/d3-transition/src/transition/attr.js
function attrRemove2(name) {
  return function() {
    this.removeAttribute(name);
  };
}
function attrRemoveNS2(fullname) {
  return function() {
    this.removeAttributeNS(fullname.space, fullname.local);
  };
}
function attrConstant2(name, interpolate, value1) {
  var string00, string1 = value1 + "", interpolate0;
  return function() {
    var string0 = this.getAttribute(name);
    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);
  };
}
function attrConstantNS2(fullname, interpolate, value1) {
  var string00, string1 = value1 + "", interpolate0;
  return function() {
    var string0 = this.getAttributeNS(fullname.space, fullname.local);
    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);
  };
}
function attrFunction2(name, interpolate, value) {
  var string00, string10, interpolate0;
  return function() {
    var string0, value1 = value(this), string1;
    if (value1 == null)
      return void this.removeAttribute(name);
    string0 = this.getAttribute(name);
    string1 = value1 + "";
    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));
  };
}
function attrFunctionNS2(fullname, interpolate, value) {
  var string00, string10, interpolate0;
  return function() {
    var string0, value1 = value(this), string1;
    if (value1 == null)
      return void this.removeAttributeNS(fullname.space, fullname.local);
    string0 = this.getAttributeNS(fullname.space, fullname.local);
    string1 = value1 + "";
    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));
  };
}
function attr_default2(name, value) {
  var fullname = namespace_default(name), i = fullname === "transform" ? interpolateTransformSvg : interpolate_default;
  return this.attrTween(name, typeof value === "function" ? (fullname.local ? attrFunctionNS2 : attrFunction2)(fullname, i, tweenValue(this, "attr." + name, value)) : value == null ? (fullname.local ? attrRemoveNS2 : attrRemove2)(fullname) : (fullname.local ? attrConstantNS2 : attrConstant2)(fullname, i, value));
}

// node_modules/d3-transition/src/transition/attrTween.js
function attrInterpolate(name, i) {
  return function(t) {
    this.setAttribute(name, i.call(this, t));
  };
}
function attrInterpolateNS(fullname, i) {
  return function(t) {
    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));
  };
}
function attrTweenNS(fullname, value) {
  var t0, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0)
      t0 = (i0 = i) && attrInterpolateNS(fullname, i);
    return t0;
  }
  tween._value = value;
  return tween;
}
function attrTween(name, value) {
  var t0, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0)
      t0 = (i0 = i) && attrInterpolate(name, i);
    return t0;
  }
  tween._value = value;
  return tween;
}
function attrTween_default(name, value) {
  var key = "attr." + name;
  if (arguments.length < 2)
    return (key = this.tween(key)) && key._value;
  if (value == null)
    return this.tween(key, null);
  if (typeof value !== "function")
    throw new Error();
  var fullname = namespace_default(name);
  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));
}

// node_modules/d3-transition/src/transition/delay.js
function delayFunction(id2, value) {
  return function() {
    init(this, id2).delay = +value.apply(this, arguments);
  };
}
function delayConstant(id2, value) {
  return value = +value, function() {
    init(this, id2).delay = value;
  };
}
function delay_default(value) {
  var id2 = this._id;
  return arguments.length ? this.each((typeof value === "function" ? delayFunction : delayConstant)(id2, value)) : get2(this.node(), id2).delay;
}

// node_modules/d3-transition/src/transition/duration.js
function durationFunction(id2, value) {
  return function() {
    set2(this, id2).duration = +value.apply(this, arguments);
  };
}
function durationConstant(id2, value) {
  return value = +value, function() {
    set2(this, id2).duration = value;
  };
}
function duration_default(value) {
  var id2 = this._id;
  return arguments.length ? this.each((typeof value === "function" ? durationFunction : durationConstant)(id2, value)) : get2(this.node(), id2).duration;
}

// node_modules/d3-transition/src/transition/ease.js
function easeConstant(id2, value) {
  if (typeof value !== "function")
    throw new Error();
  return function() {
    set2(this, id2).ease = value;
  };
}
function ease_default(value) {
  var id2 = this._id;
  return arguments.length ? this.each(easeConstant(id2, value)) : get2(this.node(), id2).ease;
}

// node_modules/d3-transition/src/transition/easeVarying.js
function easeVarying(id2, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (typeof v !== "function")
      throw new Error();
    set2(this, id2).ease = v;
  };
}
function easeVarying_default(value) {
  if (typeof value !== "function")
    throw new Error();
  return this.each(easeVarying(this._id, value));
}

// node_modules/d3-transition/src/transition/filter.js
function filter_default2(match) {
  if (typeof match !== "function")
    match = matcher_default(match);
  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {
      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {
        subgroup.push(node);
      }
    }
  }
  return new Transition(subgroups, this._parents, this._name, this._id);
}

// node_modules/d3-transition/src/transition/merge.js
function merge_default2(transition2) {
  if (transition2._id !== this._id)
    throw new Error();
  for (var groups0 = this._groups, groups1 = transition2._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {
    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group0[i] || group1[i]) {
        merge[i] = node;
      }
    }
  }
  for (; j < m0; ++j) {
    merges[j] = groups0[j];
  }
  return new Transition(merges, this._parents, this._name, this._id);
}

// node_modules/d3-transition/src/transition/on.js
function start(name) {
  return (name + "").trim().split(/^|\s+/).every(function(t) {
    var i = t.indexOf(".");
    if (i >= 0)
      t = t.slice(0, i);
    return !t || t === "start";
  });
}
function onFunction(id2, name, listener) {
  var on0, on1, sit = start(name) ? init : set2;
  return function() {
    var schedule = sit(this, id2), on = schedule.on;
    if (on !== on0)
      (on1 = (on0 = on).copy()).on(name, listener);
    schedule.on = on1;
  };
}
function on_default2(name, listener) {
  var id2 = this._id;
  return arguments.length < 2 ? get2(this.node(), id2).on.on(name) : this.each(onFunction(id2, name, listener));
}

// node_modules/d3-transition/src/transition/remove.js
function removeFunction(id2) {
  return function() {
    var parent = this.parentNode;
    for (var i in this.__transition)
      if (+i !== id2)
        return;
    if (parent)
      parent.removeChild(this);
  };
}
function remove_default2() {
  return this.on("end.remove", removeFunction(this._id));
}

// node_modules/d3-transition/src/transition/select.js
function select_default3(select) {
  var name = this._name, id2 = this._id;
  if (typeof select !== "function")
    select = selector_default(select);
  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {
      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {
        if ("__data__" in node)
          subnode.__data__ = node.__data__;
        subgroup[i] = subnode;
        schedule_default(subgroup[i], name, id2, i, subgroup, get2(node, id2));
      }
    }
  }
  return new Transition(subgroups, this._parents, name, id2);
}

// node_modules/d3-transition/src/transition/selectAll.js
function selectAll_default2(select) {
  var name = this._name, id2 = this._id;
  if (typeof select !== "function")
    select = selectorAll_default(select);
  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        for (var children2 = select.call(node, node.__data__, i, group), child, inherit2 = get2(node, id2), k = 0, l = children2.length; k < l; ++k) {
          if (child = children2[k]) {
            schedule_default(child, name, id2, k, children2, inherit2);
          }
        }
        subgroups.push(children2);
        parents.push(node);
      }
    }
  }
  return new Transition(subgroups, parents, name, id2);
}

// node_modules/d3-transition/src/transition/selection.js
var Selection2 = selection_default.prototype.constructor;
function selection_default2() {
  return new Selection2(this._groups, this._parents);
}

// node_modules/d3-transition/src/transition/style.js
function styleNull(name, interpolate) {
  var string00, string10, interpolate0;
  return function() {
    var string0 = styleValue(this, name), string1 = (this.style.removeProperty(name), styleValue(this, name));
    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : interpolate0 = interpolate(string00 = string0, string10 = string1);
  };
}
function styleRemove2(name) {
  return function() {
    this.style.removeProperty(name);
  };
}
function styleConstant2(name, interpolate, value1) {
  var string00, string1 = value1 + "", interpolate0;
  return function() {
    var string0 = styleValue(this, name);
    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);
  };
}
function styleFunction2(name, interpolate, value) {
  var string00, string10, interpolate0;
  return function() {
    var string0 = styleValue(this, name), value1 = value(this), string1 = value1 + "";
    if (value1 == null)
      string1 = value1 = (this.style.removeProperty(name), styleValue(this, name));
    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));
  };
}
function styleMaybeRemove(id2, name) {
  var on0, on1, listener0, key = "style." + name, event = "end." + key, remove2;
  return function() {
    var schedule = set2(this, id2), on = schedule.on, listener = schedule.value[key] == null ? remove2 || (remove2 = styleRemove2(name)) : void 0;
    if (on !== on0 || listener0 !== listener)
      (on1 = (on0 = on).copy()).on(event, listener0 = listener);
    schedule.on = on1;
  };
}
function style_default2(name, value, priority) {
  var i = (name += "") === "transform" ? interpolateTransformCss : interpolate_default;
  return value == null ? this.styleTween(name, styleNull(name, i)).on("end.style." + name, styleRemove2(name)) : typeof value === "function" ? this.styleTween(name, styleFunction2(name, i, tweenValue(this, "style." + name, value))).each(styleMaybeRemove(this._id, name)) : this.styleTween(name, styleConstant2(name, i, value), priority).on("end.style." + name, null);
}

// node_modules/d3-transition/src/transition/styleTween.js
function styleInterpolate(name, i, priority) {
  return function(t) {
    this.style.setProperty(name, i.call(this, t), priority);
  };
}
function styleTween(name, value, priority) {
  var t, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0)
      t = (i0 = i) && styleInterpolate(name, i, priority);
    return t;
  }
  tween._value = value;
  return tween;
}
function styleTween_default(name, value, priority) {
  var key = "style." + (name += "");
  if (arguments.length < 2)
    return (key = this.tween(key)) && key._value;
  if (value == null)
    return this.tween(key, null);
  if (typeof value !== "function")
    throw new Error();
  return this.tween(key, styleTween(name, value, priority == null ? "" : priority));
}

// node_modules/d3-transition/src/transition/text.js
function textConstant2(value) {
  return function() {
    this.textContent = value;
  };
}
function textFunction2(value) {
  return function() {
    var value1 = value(this);
    this.textContent = value1 == null ? "" : value1;
  };
}
function text_default2(value) {
  return this.tween("text", typeof value === "function" ? textFunction2(tweenValue(this, "text", value)) : textConstant2(value == null ? "" : value + ""));
}

// node_modules/d3-transition/src/transition/textTween.js
function textInterpolate(i) {
  return function(t) {
    this.textContent = i.call(this, t);
  };
}
function textTween(value) {
  var t0, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0)
      t0 = (i0 = i) && textInterpolate(i);
    return t0;
  }
  tween._value = value;
  return tween;
}
function textTween_default(value) {
  var key = "text";
  if (arguments.length < 1)
    return (key = this.tween(key)) && key._value;
  if (value == null)
    return this.tween(key, null);
  if (typeof value !== "function")
    throw new Error();
  return this.tween(key, textTween(value));
}

// node_modules/d3-transition/src/transition/transition.js
function transition_default() {
  var name = this._name, id0 = this._id, id1 = newId();
  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        var inherit2 = get2(node, id0);
        schedule_default(node, name, id1, i, group, {
          time: inherit2.time + inherit2.delay + inherit2.duration,
          delay: 0,
          duration: inherit2.duration,
          ease: inherit2.ease
        });
      }
    }
  }
  return new Transition(groups, this._parents, name, id1);
}

// node_modules/d3-transition/src/transition/end.js
function end_default() {
  var on0, on1, that = this, id2 = that._id, size = that.size();
  return new Promise(function(resolve, reject) {
    var cancel = { value: reject }, end = { value: function() {
      if (--size === 0)
        resolve();
    } };
    that.each(function() {
      var schedule = set2(this, id2), on = schedule.on;
      if (on !== on0) {
        on1 = (on0 = on).copy();
        on1._.cancel.push(cancel);
        on1._.interrupt.push(cancel);
        on1._.end.push(end);
      }
      schedule.on = on1;
    });
    if (size === 0)
      resolve();
  });
}

// node_modules/d3-transition/src/transition/index.js
var id = 0;
function Transition(groups, parents, name, id2) {
  this._groups = groups;
  this._parents = parents;
  this._name = name;
  this._id = id2;
}
function transition(name) {
  return selection_default().transition(name);
}
function newId() {
  return ++id;
}
var selection_prototype = selection_default.prototype;
Transition.prototype = transition.prototype = {
  constructor: Transition,
  select: select_default3,
  selectAll: selectAll_default2,
  selectChild: selection_prototype.selectChild,
  selectChildren: selection_prototype.selectChildren,
  filter: filter_default2,
  merge: merge_default2,
  selection: selection_default2,
  transition: transition_default,
  call: selection_prototype.call,
  nodes: selection_prototype.nodes,
  node: selection_prototype.node,
  size: selection_prototype.size,
  empty: selection_prototype.empty,
  each: selection_prototype.each,
  on: on_default2,
  attr: attr_default2,
  attrTween: attrTween_default,
  style: style_default2,
  styleTween: styleTween_default,
  text: text_default2,
  textTween: textTween_default,
  remove: remove_default2,
  tween: tween_default,
  delay: delay_default,
  duration: duration_default,
  ease: ease_default,
  easeVarying: easeVarying_default,
  end: end_default,
  [Symbol.iterator]: selection_prototype[Symbol.iterator]
};

// node_modules/d3-ease/src/cubic.js
function cubicInOut(t) {
  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;
}

// node_modules/d3-transition/src/selection/transition.js
var defaultTiming = {
  time: null,
  // Set on use.
  delay: 0,
  duration: 250,
  ease: cubicInOut
};
function inherit(node, id2) {
  var timing;
  while (!(timing = node.__transition) || !(timing = timing[id2])) {
    if (!(node = node.parentNode)) {
      throw new Error(`transition ${id2} not found`);
    }
  }
  return timing;
}
function transition_default2(name) {
  var id2, timing;
  if (name instanceof Transition) {
    id2 = name._id, name = name._name;
  } else {
    id2 = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + "";
  }
  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        schedule_default(node, name, id2, i, group, timing || inherit(node, id2));
      }
    }
  }
  return new Transition(groups, this._parents, name, id2);
}

// node_modules/d3-transition/src/selection/index.js
selection_default.prototype.interrupt = interrupt_default2;
selection_default.prototype.transition = transition_default2;

// node_modules/d3-brush/src/brush.js
var { abs, max, min } = Math;
function number1(e) {
  return [+e[0], +e[1]];
}
function number22(e) {
  return [number1(e[0]), number1(e[1])];
}
var X = {
  name: "x",
  handles: ["w", "e"].map(type),
  input: function(x, e) {
    return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]];
  },
  output: function(xy) {
    return xy && [xy[0][0], xy[1][0]];
  }
};
var Y = {
  name: "y",
  handles: ["n", "s"].map(type),
  input: function(y, e) {
    return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]];
  },
  output: function(xy) {
    return xy && [xy[0][1], xy[1][1]];
  }
};
var XY = {
  name: "xy",
  handles: ["n", "w", "e", "s", "nw", "ne", "sw", "se"].map(type),
  input: function(xy) {
    return xy == null ? null : number22(xy);
  },
  output: function(xy) {
    return xy;
  }
};
function type(t) {
  return { type: t };
}

// node_modules/d3-format/src/formatDecimal.js
function formatDecimal_default(x) {
  return Math.abs(x = Math.round(x)) >= 1e21 ? x.toLocaleString("en").replace(/,/g, "") : x.toString(10);
}
function formatDecimalParts(x, p) {
  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf("e")) < 0)
    return null;
  var i, coefficient = x.slice(0, i);
  return [
    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,
    +x.slice(i + 1)
  ];
}

// node_modules/d3-format/src/exponent.js
function exponent_default(x) {
  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;
}

// node_modules/d3-format/src/formatGroup.js
function formatGroup_default(grouping, thousands) {
  return function(value, width) {
    var i = value.length, t = [], j = 0, g = grouping[0], length = 0;
    while (i > 0 && g > 0) {
      if (length + g + 1 > width)
        g = Math.max(1, width - length);
      t.push(value.substring(i -= g, i + g));
      if ((length += g + 1) > width)
        break;
      g = grouping[j = (j + 1) % grouping.length];
    }
    return t.reverse().join(thousands);
  };
}

// node_modules/d3-format/src/formatNumerals.js
function formatNumerals_default(numerals) {
  return function(value) {
    return value.replace(/[0-9]/g, function(i) {
      return numerals[+i];
    });
  };
}

// node_modules/d3-format/src/formatSpecifier.js
var re = /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;
function formatSpecifier(specifier) {
  if (!(match = re.exec(specifier)))
    throw new Error("invalid format: " + specifier);
  var match;
  return new FormatSpecifier({
    fill: match[1],
    align: match[2],
    sign: match[3],
    symbol: match[4],
    zero: match[5],
    width: match[6],
    comma: match[7],
    precision: match[8] && match[8].slice(1),
    trim: match[9],
    type: match[10]
  });
}
formatSpecifier.prototype = FormatSpecifier.prototype;
function FormatSpecifier(specifier) {
  this.fill = specifier.fill === void 0 ? " " : specifier.fill + "";
  this.align = specifier.align === void 0 ? ">" : specifier.align + "";
  this.sign = specifier.sign === void 0 ? "-" : specifier.sign + "";
  this.symbol = specifier.symbol === void 0 ? "" : specifier.symbol + "";
  this.zero = !!specifier.zero;
  this.width = specifier.width === void 0 ? void 0 : +specifier.width;
  this.comma = !!specifier.comma;
  this.precision = specifier.precision === void 0 ? void 0 : +specifier.precision;
  this.trim = !!specifier.trim;
  this.type = specifier.type === void 0 ? "" : specifier.type + "";
}
FormatSpecifier.prototype.toString = function() {
  return this.fill + this.align + this.sign + this.symbol + (this.zero ? "0" : "") + (this.width === void 0 ? "" : Math.max(1, this.width | 0)) + (this.comma ? "," : "") + (this.precision === void 0 ? "" : "." + Math.max(0, this.precision | 0)) + (this.trim ? "~" : "") + this.type;
};

// node_modules/d3-format/src/formatTrim.js
function formatTrim_default(s) {
  out:
    for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {
      switch (s[i]) {
        case ".":
          i0 = i1 = i;
          break;
        case "0":
          if (i0 === 0)
            i0 = i;
          i1 = i;
          break;
        default:
          if (!+s[i])
            break out;
          if (i0 > 0)
            i0 = 0;
          break;
      }
    }
  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;
}

// node_modules/d3-format/src/formatPrefixAuto.js
var prefixExponent;
function formatPrefixAuto_default(x, p) {
  var d = formatDecimalParts(x, p);
  if (!d)
    return x + "";
  var coefficient = d[0], exponent = d[1], i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1, n = coefficient.length;
  return i === n ? coefficient : i > n ? coefficient + new Array(i - n + 1).join("0") : i > 0 ? coefficient.slice(0, i) + "." + coefficient.slice(i) : "0." + new Array(1 - i).join("0") + formatDecimalParts(x, Math.max(0, p + i - 1))[0];
}

// node_modules/d3-format/src/formatRounded.js
function formatRounded_default(x, p) {
  var d = formatDecimalParts(x, p);
  if (!d)
    return x + "";
  var coefficient = d[0], exponent = d[1];
  return exponent < 0 ? "0." + new Array(-exponent).join("0") + coefficient : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + "." + coefficient.slice(exponent + 1) : coefficient + new Array(exponent - coefficient.length + 2).join("0");
}

// node_modules/d3-format/src/formatTypes.js
var formatTypes_default = {
  "%": (x, p) => (x * 100).toFixed(p),
  "b": (x) => Math.round(x).toString(2),
  "c": (x) => x + "",
  "d": formatDecimal_default,
  "e": (x, p) => x.toExponential(p),
  "f": (x, p) => x.toFixed(p),
  "g": (x, p) => x.toPrecision(p),
  "o": (x) => Math.round(x).toString(8),
  "p": (x, p) => formatRounded_default(x * 100, p),
  "r": formatRounded_default,
  "s": formatPrefixAuto_default,
  "X": (x) => Math.round(x).toString(16).toUpperCase(),
  "x": (x) => Math.round(x).toString(16)
};

// node_modules/d3-format/src/identity.js
function identity_default2(x) {
  return x;
}

// node_modules/d3-format/src/locale.js
var map = Array.prototype.map;
var prefixes = ["y", "z", "a", "f", "p", "n", "\xB5", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"];
function locale_default(locale2) {
  var group = locale2.grouping === void 0 || locale2.thousands === void 0 ? identity_default2 : formatGroup_default(map.call(locale2.grouping, Number), locale2.thousands + ""), currencyPrefix = locale2.currency === void 0 ? "" : locale2.currency[0] + "", currencySuffix = locale2.currency === void 0 ? "" : locale2.currency[1] + "", decimal = locale2.decimal === void 0 ? "." : locale2.decimal + "", numerals = locale2.numerals === void 0 ? identity_default2 : formatNumerals_default(map.call(locale2.numerals, String)), percent = locale2.percent === void 0 ? "%" : locale2.percent + "", minus = locale2.minus === void 0 ? "\u2212" : locale2.minus + "", nan = locale2.nan === void 0 ? "NaN" : locale2.nan + "";
  function newFormat(specifier) {
    specifier = formatSpecifier(specifier);
    var fill = specifier.fill, align = specifier.align, sign = specifier.sign, symbol = specifier.symbol, zero3 = specifier.zero, width = specifier.width, comma = specifier.comma, precision = specifier.precision, trim = specifier.trim, type2 = specifier.type;
    if (type2 === "n")
      comma = true, type2 = "g";
    else if (!formatTypes_default[type2])
      precision === void 0 && (precision = 12), trim = true, type2 = "g";
    if (zero3 || fill === "0" && align === "=")
      zero3 = true, fill = "0", align = "=";
    var prefix = symbol === "$" ? currencyPrefix : symbol === "#" && /[boxX]/.test(type2) ? "0" + type2.toLowerCase() : "", suffix = symbol === "$" ? currencySuffix : /[%p]/.test(type2) ? percent : "";
    var formatType = formatTypes_default[type2], maybeSuffix = /[defgprs%]/.test(type2);
    precision = precision === void 0 ? 6 : /[gprs]/.test(type2) ? Math.max(1, Math.min(21, precision)) : Math.max(0, Math.min(20, precision));
    function format2(value) {
      var valuePrefix = prefix, valueSuffix = suffix, i, n, c;
      if (type2 === "c") {
        valueSuffix = formatType(value) + valueSuffix;
        value = "";
      } else {
        value = +value;
        var valueNegative = value < 0 || 1 / value < 0;
        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);
        if (trim)
          value = formatTrim_default(value);
        if (valueNegative && +value === 0 && sign !== "+")
          valueNegative = false;
        valuePrefix = (valueNegative ? sign === "(" ? sign : minus : sign === "-" || sign === "(" ? "" : sign) + valuePrefix;
        valueSuffix = (type2 === "s" ? prefixes[8 + prefixExponent / 3] : "") + valueSuffix + (valueNegative && sign === "(" ? ")" : "");
        if (maybeSuffix) {
          i = -1, n = value.length;
          while (++i < n) {
            if (c = value.charCodeAt(i), 48 > c || c > 57) {
              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;
              value = value.slice(0, i);
              break;
            }
          }
        }
      }
      if (comma && !zero3)
        value = group(value, Infinity);
      var length = valuePrefix.length + value.length + valueSuffix.length, padding = length < width ? new Array(width - length + 1).join(fill) : "";
      if (comma && zero3)
        value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = "";
      switch (align) {
        case "<":
          value = valuePrefix + value + valueSuffix + padding;
          break;
        case "=":
          value = valuePrefix + padding + value + valueSuffix;
          break;
        case "^":
          value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length);
          break;
        default:
          value = padding + valuePrefix + value + valueSuffix;
          break;
      }
      return numerals(value);
    }
    format2.toString = function() {
      return specifier + "";
    };
    return format2;
  }
  function formatPrefix2(specifier, value) {
    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = "f", specifier)), e = Math.max(-8, Math.min(8, Math.floor(exponent_default(value) / 3))) * 3, k = Math.pow(10, -e), prefix = prefixes[8 + e / 3];
    return function(value2) {
      return f(k * value2) + prefix;
    };
  }
  return {
    format: newFormat,
    formatPrefix: formatPrefix2
  };
}

// node_modules/d3-format/src/defaultLocale.js
var locale;
var format;
var formatPrefix;
defaultLocale({
  thousands: ",",
  grouping: [3],
  currency: ["$", ""]
});
function defaultLocale(definition) {
  locale = locale_default(definition);
  format = locale.format;
  formatPrefix = locale.formatPrefix;
  return locale;
}

// node_modules/d3-format/src/precisionFixed.js
function precisionFixed_default(step) {
  return Math.max(0, -exponent_default(Math.abs(step)));
}

// node_modules/d3-format/src/precisionPrefix.js
function precisionPrefix_default(step, value) {
  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent_default(value) / 3))) * 3 - exponent_default(Math.abs(step)));
}

// node_modules/d3-format/src/precisionRound.js
function precisionRound_default(step, max2) {
  step = Math.abs(step), max2 = Math.abs(max2) - step;
  return Math.max(0, exponent_default(max2) - exponent_default(step)) + 1;
}

// node_modules/d3-scale/src/init.js
function initRange(domain, range) {
  switch (arguments.length) {
    case 0:
      break;
    case 1:
      this.range(domain);
      break;
    default:
      this.range(range).domain(domain);
      break;
  }
  return this;
}

// node_modules/d3-scale/src/ordinal.js
var implicit = Symbol("implicit");
function ordinal() {
  var index = new InternMap(), domain = [], range = [], unknown = implicit;
  function scale(d) {
    let i = index.get(d);
    if (i === void 0) {
      if (unknown !== implicit)
        return unknown;
      index.set(d, i = domain.push(d) - 1);
    }
    return range[i % range.length];
  }
  scale.domain = function(_) {
    if (!arguments.length)
      return domain.slice();
    domain = [], index = new InternMap();
    for (const value of _) {
      if (index.has(value))
        continue;
      index.set(value, domain.push(value) - 1);
    }
    return scale;
  };
  scale.range = function(_) {
    return arguments.length ? (range = Array.from(_), scale) : range.slice();
  };
  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };
  scale.copy = function() {
    return ordinal(domain, range).unknown(unknown);
  };
  initRange.apply(scale, arguments);
  return scale;
}

// node_modules/d3-scale/src/constant.js
function constants(x) {
  return function() {
    return x;
  };
}

// node_modules/d3-scale/src/number.js
function number3(x) {
  return +x;
}

// node_modules/d3-scale/src/continuous.js
var unit = [0, 1];
function identity2(x) {
  return x;
}
function normalize(a, b) {
  return (b -= a = +a) ? function(x) {
    return (x - a) / b;
  } : constants(isNaN(b) ? NaN : 0.5);
}
function clamper(a, b) {
  var t;
  if (a > b)
    t = a, a = b, b = t;
  return function(x) {
    return Math.max(a, Math.min(b, x));
  };
}
function bimap(domain, range, interpolate) {
  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];
  if (d1 < d0)
    d0 = normalize(d1, d0), r0 = interpolate(r1, r0);
  else
    d0 = normalize(d0, d1), r0 = interpolate(r0, r1);
  return function(x) {
    return r0(d0(x));
  };
}
function polymap(domain, range, interpolate) {
  var j = Math.min(domain.length, range.length) - 1, d = new Array(j), r = new Array(j), i = -1;
  if (domain[j] < domain[0]) {
    domain = domain.slice().reverse();
    range = range.slice().reverse();
  }
  while (++i < j) {
    d[i] = normalize(domain[i], domain[i + 1]);
    r[i] = interpolate(range[i], range[i + 1]);
  }
  return function(x) {
    var i2 = bisect_default(domain, x, 1, j) - 1;
    return r[i2](d[i2](x));
  };
}
function copy(source, target) {
  return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown());
}
function transformer() {
  var domain = unit, range = unit, interpolate = value_default, transform2, untransform, unknown, clamp = identity2, piecewise, output, input;
  function rescale() {
    var n = Math.min(domain.length, range.length);
    if (clamp !== identity2)
      clamp = clamper(domain[0], domain[n - 1]);
    piecewise = n > 2 ? polymap : bimap;
    output = input = null;
    return scale;
  }
  function scale(x) {
    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform2), range, interpolate)))(transform2(clamp(x)));
  }
  scale.invert = function(y) {
    return clamp(untransform((input || (input = piecewise(range, domain.map(transform2), number_default)))(y)));
  };
  scale.domain = function(_) {
    return arguments.length ? (domain = Array.from(_, number3), rescale()) : domain.slice();
  };
  scale.range = function(_) {
    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();
  };
  scale.rangeRound = function(_) {
    return range = Array.from(_), interpolate = round_default, rescale();
  };
  scale.clamp = function(_) {
    return arguments.length ? (clamp = _ ? true : identity2, rescale()) : clamp !== identity2;
  };
  scale.interpolate = function(_) {
    return arguments.length ? (interpolate = _, rescale()) : interpolate;
  };
  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };
  return function(t, u) {
    transform2 = t, untransform = u;
    return rescale();
  };
}
function continuous() {
  return transformer()(identity2, identity2);
}

// node_modules/d3-scale/src/tickFormat.js
function tickFormat(start2, stop, count, specifier) {
  var step = tickStep(start2, stop, count), precision;
  specifier = formatSpecifier(specifier == null ? ",f" : specifier);
  switch (specifier.type) {
    case "s": {
      var value = Math.max(Math.abs(start2), Math.abs(stop));
      if (specifier.precision == null && !isNaN(precision = precisionPrefix_default(step, value)))
        specifier.precision = precision;
      return formatPrefix(specifier, value);
    }
    case "":
    case "e":
    case "g":
    case "p":
    case "r": {
      if (specifier.precision == null && !isNaN(precision = precisionRound_default(step, Math.max(Math.abs(start2), Math.abs(stop)))))
        specifier.precision = precision - (specifier.type === "e");
      break;
    }
    case "f":
    case "%": {
      if (specifier.precision == null && !isNaN(precision = precisionFixed_default(step)))
        specifier.precision = precision - (specifier.type === "%") * 2;
      break;
    }
  }
  return format(specifier);
}

// node_modules/d3-scale/src/linear.js
function linearish(scale) {
  var domain = scale.domain;
  scale.ticks = function(count) {
    var d = domain();
    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);
  };
  scale.tickFormat = function(count, specifier) {
    var d = domain();
    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);
  };
  scale.nice = function(count) {
    if (count == null)
      count = 10;
    var d = domain();
    var i0 = 0;
    var i1 = d.length - 1;
    var start2 = d[i0];
    var stop = d[i1];
    var prestep;
    var step;
    var maxIter = 10;
    if (stop < start2) {
      step = start2, start2 = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }
    while (maxIter-- > 0) {
      step = tickIncrement(start2, stop, count);
      if (step === prestep) {
        d[i0] = start2;
        d[i1] = stop;
        return domain(d);
      } else if (step > 0) {
        start2 = Math.floor(start2 / step) * step;
        stop = Math.ceil(stop / step) * step;
      } else if (step < 0) {
        start2 = Math.ceil(start2 * step) / step;
        stop = Math.floor(stop * step) / step;
      } else {
        break;
      }
      prestep = step;
    }
    return scale;
  };
  return scale;
}
function linear2() {
  var scale = continuous();
  scale.copy = function() {
    return copy(scale, linear2());
  };
  initRange.apply(scale, arguments);
  return linearish(scale);
}

// node_modules/d3-scale-chromatic/src/colors.js
function colors_default(specifier) {
  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;
  while (i < n)
    colors[i] = "#" + specifier.slice(i * 6, ++i * 6);
  return colors;
}

// node_modules/d3-scale-chromatic/src/categorical/category10.js
var category10_default = colors_default("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");

// node_modules/d3-zoom/src/transform.js
function Transform(k, x, y) {
  this.k = k;
  this.x = x;
  this.y = y;
}
Transform.prototype = {
  constructor: Transform,
  scale: function(k) {
    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);
  },
  translate: function(x, y) {
    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);
  },
  apply: function(point) {
    return [point[0] * this.k + this.x, point[1] * this.k + this.y];
  },
  applyX: function(x) {
    return x * this.k + this.x;
  },
  applyY: function(y) {
    return y * this.k + this.y;
  },
  invert: function(location) {
    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];
  },
  invertX: function(x) {
    return (x - this.x) / this.k;
  },
  invertY: function(y) {
    return (y - this.y) / this.k;
  },
  rescaleX: function(x) {
    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));
  },
  rescaleY: function(y) {
    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));
  },
  toString: function() {
    return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")";
  }
};
var identity3 = new Transform(1, 0, 0);
transform.prototype = Transform.prototype;
function transform(node) {
  while (!node.__zoom)
    if (!(node = node.parentNode))
      return identity3;
  return node.__zoom;
}

// src/views/TimelineModal.ts
<<<<<<< HEAD
var TimelineModal = class extends import_obsidian15.Modal {
=======
var TimelineModal = class extends import_obsidian14.Modal {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  constructor(app, events, timeConfig) {
    super(app);
    this.events = events;
    this.timeConfig = timeConfig;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("story-engine-timeline-modal");
    contentEl.createEl("h2", { text: "World Timeline" });
    const chartContainer = contentEl.createDiv({ cls: "story-engine-timeline-chart" });
    this.renderTimeline(chartContainer);
  }
  renderTimeline(container) {
    if (this.events.length === 0) {
      container.createEl("p", { text: "No events with timeline data found." });
      return;
    }
    const width = 800;
    const height = 400;
    const margin = { top: 20, right: 30, bottom: 50, left: 60 };
    const svg = select_default2(container).append("svg").attr("width", width).attr("height", height);
    const eventsWithPosition = this.events.map((e, i) => {
      var _a, _b, _c;
      return {
        ...e,
        timeline_position: (_a = e.timeline_position) != null ? _a : i * 10,
        parent_id: (_b = e.parent_id) != null ? _b : null,
        is_epoch: (_c = e.is_epoch) != null ? _c : false
      };
    });
    const xExtent = extent(eventsWithPosition, (d) => d.timeline_position);
    const xScale = linear2().domain([xExtent[0] - 1, xExtent[1] + 1]).range([margin.left, width - margin.right]);
    const yScale = linear2().domain([0, 10]).range([height - margin.bottom, margin.top]);
    const colorScale = ordinal(category10_default);
    svg.append("g").attr("transform", `translate(0,${height - margin.bottom})`).call(axisBottom(xScale).tickFormat((d) => `Year ${d}`));
    svg.append("g").attr("transform", `translate(${margin.left},0)`).call(axisLeft(yScale).tickFormat((d) => `Imp ${d}`));
    const eventsWithParent = eventsWithPosition.filter((e) => e.parent_id);
    svg.selectAll("line.parent-link").data(eventsWithParent).join("line").attr("class", "parent-link").attr("x1", (d) => {
      const parent = eventsWithPosition.find((e) => e.id === d.parent_id);
      return parent ? xScale(parent.timeline_position) : 0;
    }).attr("y1", (d) => {
      const parent = eventsWithPosition.find((e) => e.id === d.parent_id);
      return parent ? yScale(parent.importance) : 0;
    }).attr("x2", (d) => xScale(d.timeline_position)).attr("y2", (d) => yScale(d.importance)).attr("stroke", "#999").attr("stroke-dasharray", "4,2").attr("stroke-width", 1);
    svg.selectAll("circle").data(eventsWithPosition).join("circle").attr("cx", (d) => xScale(d.timeline_position)).attr("cy", (d) => yScale(d.importance)).attr("r", (d) => d.is_epoch ? 10 : 6).attr("fill", (d) => colorScale(d.type || "default")).attr("stroke", (d) => d.is_epoch ? "gold" : "none").attr("stroke-width", 3).style("cursor", "pointer").on("click", (_event, d) => this.showEventDetails(d)).append("title").text((d) => `${d.name} (Year ${d.timeline_position})`);
    svg.selectAll("text.event-label").data(eventsWithPosition.filter((e) => e.importance >= 8)).join("text").attr("class", "event-label").attr("x", (d) => xScale(d.timeline_position)).attr("y", (d) => yScale(d.importance) - 12).attr("text-anchor", "middle").attr("font-size", "10px").text((d) => d.name.substring(0, 15) + (d.name.length > 15 ? "..." : ""));
  }
  showEventDetails(event) {
    var _a;
<<<<<<< HEAD
    new import_obsidian15.Notice(`Event: ${event.name}
=======
    new import_obsidian14.Notice(`Event: ${event.name}
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
Year: ${(_a = event.timeline_position) != null ? _a : "N/A"}
Importance: ${event.importance}`);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/views/CharacterDetailsView.ts
<<<<<<< HEAD
var import_obsidian16 = require("obsidian");
=======
var import_obsidian15 = require("obsidian");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
var CharacterDetailsView = class {
  constructor(plugin, character, headerEl, contentEl, onBack, onEditCharacter, world = null, characters = [], archetypes = [], traits = [], events = []) {
    // State
    this.characterTab = "overview";
    this.characterTraits = [];
    this.characterEvents = [];
    this.characterScenes = [];
    this.characterRelationships = [];
    this.plugin = plugin;
    this.character = character;
    this.world = world;
    this.characters = characters;
    this.archetypes = archetypes;
    this.traits = traits;
    this.events = events;
    this.headerEl = headerEl;
    this.contentEl = contentEl;
    this.onBack = onBack;
    this.onEditCharacter = onEditCharacter;
  }
  async render() {
    await this.loadCharacterData();
    this.renderHeader();
    this.renderContent();
  }
  renderContent() {
    this.contentEl.empty();
    const mainContainer = this.contentEl.createDiv({ cls: "character-details-container" });
    this.renderTabs(mainContainer);
    this.renderTabContent(mainContainer);
  }
  async loadCharacterData() {
    try {
      this.characterTraits = await this.plugin.apiClient.getCharacterTraits(this.character.id);
      const eventCharacters = await this.plugin.apiClient.getCharacterEvents(this.character.id);
      this.characterEvents = await Promise.all(
        eventCharacters.map(async (ec) => {
          const event = await this.plugin.apiClient.getEvent(ec.event_id);
          return { event, role: ec.role || void 0 };
        })
      );
      this.characterRelationships = await this.plugin.apiClient.getCharacterRelationships(this.character.id);
      this.characterScenes = [];
      if (this.world) {
        const allStories = await this.plugin.apiClient.listStories();
        const worldStories = allStories.filter((s) => s.world_id === this.world.id);
        for (const story of worldStories) {
          const scenes = await this.plugin.apiClient.getScenesByStory(story.id);
          const povScenes = scenes.filter((s) => s.pov_character_id === this.character.id);
          for (const scene of povScenes) {
            this.characterScenes.push({ scene, story, type: "pov" });
          }
          for (const scene of scenes) {
            const refs = await this.plugin.apiClient.getSceneReferences(scene.id);
            const charRef = refs.find(
              (r) => r.entity_type === "character" && r.entity_id === this.character.id
            );
            if (charRef) {
              this.characterScenes.push({ scene, story, type: "coadjuvante" });
            }
          }
        }
      }
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to load character data";
<<<<<<< HEAD
      new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
=======
      new import_obsidian15.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  renderHeader() {
    if (!this.headerEl)
      return;
    this.headerEl.empty();
    const headerLeft = this.headerEl.createDiv({ cls: "story-engine-header-left" });
    const backButton = headerLeft.createEl("button", {
      text: "\u2190 Back",
      cls: "story-engine-back-btn"
    });
    backButton.onclick = () => {
      this.onBack();
    };
    const titleDiv = headerLeft.createDiv({ cls: "story-engine-header-title" });
    const titleRow = titleDiv.createDiv({ cls: "story-engine-title-row" });
    titleRow.createEl("h2", { text: this.character.name });
    if (this.character.archetype_id) {
      const archetype = this.archetypes.find((a) => a.id === this.character.archetype_id);
      if (archetype) {
        const archetypePill = titleRow.createSpan({ cls: "story-engine-badge" });
        archetypePill.textContent = archetype.name;
      }
    }
<<<<<<< HEAD
    const uuidDiv = headerLeft.createDiv({ cls: "story-engine-uuid" });
    uuidDiv.createEl("span", { text: this.character.id });
    const copyIcon = uuidDiv.createEl("span", { cls: "story-engine-copy-icon" });
    (0, import_obsidian16.setIcon)(copyIcon, "copy");
    copyIcon.onclick = () => {
      navigator.clipboard.writeText(this.character.id);
      new import_obsidian16.Notice("UUID copied to clipboard");
=======
    const copyIdBtn = titleRow.createEl("button", {
      cls: "story-engine-copy-id-btn",
      attr: {
        "aria-label": "Copy ID",
        "title": `ID: ${this.character.id}
Click to copy`
      }
    });
    (0, import_obsidian15.setIcon)(copyIdBtn, "copy");
    copyIdBtn.onclick = () => {
      navigator.clipboard.writeText(this.character.id);
      new import_obsidian15.Notice("UUID copied to clipboard");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    };
    const headerRight = this.headerEl.createDiv({ cls: "story-engine-header-right" });
    const menuButton = headerRight.createEl("button", { text: "Edit Character" });
    menuButton.onclick = () => {
      this.onEditCharacter(this.character);
    };
  }
  renderTabs(container) {
    const tabsContainer = container.createDiv({ cls: "character-details-tabs" });
    const tabs = [
      { key: "overview", label: "Overview" },
      { key: "traits", label: "Traits" },
      { key: "events", label: "Events" },
      { key: "scenes", label: "Scenes" },
      { key: "relationships", label: "Relationships" }
    ];
    tabs.forEach((tab) => {
      const isActive = this.characterTab === tab.key;
      const tabButton = tabsContainer.createEl("button", {
        text: tab.label,
        cls: isActive ? "character-tab character-tab-active" : "character-tab"
      });
      tabButton.onclick = () => {
        if (this.characterTab !== tab.key) {
          this.characterTab = tab.key;
          this.renderContent();
        }
      };
    });
  }
  renderTabContent(container) {
    const contentContainer = container.createDiv({ cls: "character-details-content-inner" });
    switch (this.characterTab) {
      case "overview":
        this.renderOverviewTab(contentContainer);
        break;
      case "traits":
        this.renderTraitsTab(contentContainer);
        break;
      case "events":
        this.renderEventsTab(contentContainer);
        break;
      case "scenes":
        this.renderScenesTab(contentContainer);
        break;
      case "relationships":
        this.renderRelationshipsTab(contentContainer);
        break;
    }
  }
  renderOverviewTab(container) {
    const descSection = container.createDiv({ cls: "story-engine-section" });
    descSection.createEl("h3", { text: "Description" });
    const descTextarea = descSection.createEl("textarea", {
      cls: "story-engine-textarea",
      attr: { rows: "5" }
    });
    descTextarea.value = this.character.description || "";
    descTextarea.placeholder = "Enter character description...";
    const descActions = descSection.createDiv({ cls: "story-engine-actions" });
    const saveDescBtn = descActions.createEl("button", { text: "Save Description", cls: "mod-cta" });
    saveDescBtn.onclick = async () => {
      try {
        const updated = await this.plugin.apiClient.updateCharacter(this.character.id, {
          description: descTextarea.value
        });
        this.character = updated;
<<<<<<< HEAD
        new import_obsidian16.Notice("Description saved");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian15.Notice("Description saved");
      } catch (err) {
        new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const archetypeSection = container.createDiv({ cls: "story-engine-section" });
    archetypeSection.createEl("h3", { text: "Archetype" });
    const archetypeSelect = archetypeSection.createEl("select", { cls: "story-engine-select" });
    const noneOption = archetypeSelect.createEl("option", { text: "None", value: "" });
    if (!this.character.archetype_id) {
      noneOption.selected = true;
    }
    for (const archetype of this.archetypes) {
      const option = archetypeSelect.createEl("option", {
        text: archetype.name,
        value: archetype.id
      });
      if (this.character.archetype_id === archetype.id) {
        option.selected = true;
      }
    }
    const archetypeActions = archetypeSection.createDiv({ cls: "story-engine-actions" });
    const saveArchetypeBtn = archetypeActions.createEl("button", { text: "Save Archetype", cls: "mod-cta" });
    saveArchetypeBtn.onclick = async () => {
      try {
        const archetypeId = archetypeSelect.value || null;
        const updated = await this.plugin.apiClient.updateCharacter(this.character.id, {
          archetype_id: archetypeId
        });
        this.character = updated;
        await this.loadCharacterData();
        this.renderHeader();
<<<<<<< HEAD
        this.renderTabContent();
        new import_obsidian16.Notice("Archetype saved");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        this.renderContent();
        new import_obsidian15.Notice("Archetype saved");
      } catch (err) {
        new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
  }
  renderTraitsTab(container) {
    const actionsBar = container.createDiv({ cls: "story-engine-actions-bar" });
    const addBtn = actionsBar.createEl("button", { text: "Add Trait", cls: "mod-cta" });
    addBtn.onclick = () => {
      this.showAddTraitModal();
    };
    if (this.characterTraits.length === 0) {
      container.createEl("p", { text: "No traits assigned. Add a trait to get started!" });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const charTrait of this.characterTraits) {
      const item = list.createDiv({ cls: "story-engine-item" });
      const titleRow = item.createDiv({ cls: "story-engine-title" });
      titleRow.createEl("strong", { text: charTrait.trait_name });
      const categoryPill = titleRow.createSpan({ cls: "story-engine-badge" });
      categoryPill.textContent = charTrait.trait_category;
      const meta = item.createDiv({ cls: "story-engine-meta" });
      meta.createEl("span", { text: `Value: ${charTrait.value || "N/A"}` });
      if (charTrait.notes) {
        meta.createEl("span", { text: ` | Notes: ${charTrait.notes}` });
      }
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      actions.createEl("button", { text: "Edit" }).onclick = () => {
        this.showEditTraitModal(charTrait);
      };
      actions.createEl("button", { text: "Delete" }).onclick = async () => {
        if (confirm(`Remove trait "${charTrait.trait_name}"?`)) {
          try {
            await this.plugin.apiClient.removeCharacterTrait(this.character.id, charTrait.trait_id);
            await this.loadCharacterData();
<<<<<<< HEAD
            this.renderTabContent();
            new import_obsidian16.Notice("Trait removed");
          } catch (err) {
            new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
            this.renderContent();
            new import_obsidian15.Notice("Trait removed");
          } catch (err) {
            new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          }
        }
      };
    }
  }
  renderEventsTab(container) {
    const actionsBar = container.createDiv({ cls: "story-engine-actions-bar" });
    const addBtn = actionsBar.createEl("button", { text: "Add Event", cls: "mod-cta" });
    addBtn.onclick = () => {
      this.showAddEventModal();
    };
    if (this.characterEvents.length === 0) {
      container.createEl("p", { text: "No events assigned. Add an event to get started!" });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const { event, role } of this.characterEvents) {
      const item = list.createDiv({ cls: "story-engine-item" });
      item.createDiv({ cls: "story-engine-title", text: event.name });
      const meta = item.createDiv({ cls: "story-engine-meta" });
      if (role) {
        meta.createEl("span", { text: `Role: ${role}` });
      }
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      actions.createEl("button", { text: "Edit Role" }).onclick = () => {
        this.showEditEventRoleModal(event, role);
      };
      actions.createEl("button", { text: "Remove" }).onclick = async () => {
        if (confirm(`Remove character from event "${event.name}"?`)) {
          try {
            await this.plugin.apiClient.removeEventCharacter(event.id, this.character.id);
            await this.loadCharacterData();
<<<<<<< HEAD
            this.renderTabContent();
            new import_obsidian16.Notice("Character removed from event");
          } catch (err) {
            new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
            this.renderContent();
            new import_obsidian15.Notice("Character removed from event");
          } catch (err) {
            new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          }
        }
      };
    }
  }
  renderScenesTab(container) {
    if (this.characterScenes.length === 0) {
      container.createEl("p", { text: "No scenes found for this character." });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const { scene, story, type: type2 } of this.characterScenes) {
      const item = list.createDiv({ cls: "story-engine-item" });
      const titleRow = item.createDiv({ cls: "story-engine-title" });
      titleRow.createEl("span", { text: scene.goal || "No goal" });
      const typePill = titleRow.createSpan({
        cls: type2 === "pov" ? "story-engine-badge story-engine-badge-green" : "story-engine-badge story-engine-badge-blue"
      });
      typePill.textContent = type2 === "pov" ? "POV" : "Coadjuvante";
      const meta = item.createDiv({ cls: "story-engine-meta" });
      meta.createEl("span", { text: `Story: ${story.title}` });
    }
  }
  renderRelationshipsTab(container) {
    const actionsBar = container.createDiv({ cls: "story-engine-actions-bar" });
    const addBtn = actionsBar.createEl("button", { text: "Add Relationship", cls: "mod-cta" });
    addBtn.onclick = () => {
      this.showAddRelationshipModal();
    };
    if (this.characterRelationships.length === 0) {
      container.createEl("p", { text: "No relationships defined. Add a relationship to get started!" });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const rel of this.characterRelationships) {
      const otherCharId = rel.character1_id === this.character.id ? rel.character2_id : rel.character1_id;
      const otherChar = this.characters.find((c) => c.id === otherCharId);
      const otherCharName = otherChar ? otherChar.name : "Unknown";
      const item = list.createDiv({ cls: "story-engine-item" });
      const titleRow = item.createDiv({ cls: "story-engine-title" });
      titleRow.createEl("strong", { text: otherCharName });
      const typePill = titleRow.createSpan({ cls: "story-engine-badge" });
      typePill.textContent = rel.relationship_type;
      const directionIcon = titleRow.createSpan({ cls: "story-engine-direction" });
      directionIcon.textContent = rel.bidirectional ? "\u2194" : "\u2192";
      const meta = item.createDiv({ cls: "story-engine-meta" });
      if (rel.description) {
        meta.createEl("span", { text: rel.description });
      }
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      actions.createEl("button", { text: "Edit" }).onclick = () => {
        this.showEditRelationshipModal(rel);
      };
      actions.createEl("button", { text: "Delete" }).onclick = async () => {
        if (confirm(`Delete relationship with "${otherCharName}"?`)) {
          try {
            await this.plugin.apiClient.deleteCharacterRelationship(rel.id);
            await this.loadCharacterData();
<<<<<<< HEAD
            this.renderTabContent();
            new import_obsidian16.Notice("Relationship deleted");
          } catch (err) {
            new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
            this.renderContent();
            new import_obsidian15.Notice("Relationship deleted");
          } catch (err) {
            new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          }
        }
      };
    }
  }
  // Modal methods
  showAddTraitModal() {
<<<<<<< HEAD
    const modal = new import_obsidian16.Modal(this.plugin.app);
=======
    const modal = new import_obsidian15.Modal(this.plugin.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.textContent = "Add Trait";
    const content = modal.contentEl;
    content.createEl("p", { text: "Select a trait to add:" });
    const traitSelect = content.createEl("select", { cls: "story-engine-select" });
    const availableTraits = this.traits.filter(
      (t) => !this.characterTraits.some((ct) => ct.trait_id === t.id)
    );
    if (availableTraits.length === 0) {
      content.createEl("p", { text: "No available traits. Create a trait first!" });
      const buttonContainer2 = content.createDiv({ cls: "modal-button-container" });
      const closeBtn = buttonContainer2.createEl("button", { text: "Close" });
      closeBtn.onclick = () => modal.close();
      return;
    }
    for (const trait of availableTraits) {
      traitSelect.createEl("option", { text: `${trait.name} (${trait.category})`, value: trait.id });
    }
    const valueInput = content.createEl("input", {
      cls: "story-engine-input",
      attr: { type: "text", placeholder: "Value (optional)" }
    });
    const notesInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      attr: { rows: "3", placeholder: "Notes (optional)" }
    });
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Add", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.addCharacterTrait(
          this.character.id,
          traitSelect.value,
          valueInput.value || void 0,
          notesInput.value || void 0
        );
        await this.loadCharacterData();
        this.renderContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian16.Notice("Trait added");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian15.Notice("Trait added");
      } catch (err) {
        new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  showEditTraitModal(charTrait) {
<<<<<<< HEAD
    const modal = new import_obsidian16.Modal(this.plugin.app);
=======
    const modal = new import_obsidian15.Modal(this.plugin.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.textContent = "Edit Trait";
    const content = modal.contentEl;
    content.createEl("p", { text: `Editing: ${charTrait.trait_name}` });
    const valueInput = content.createEl("input", {
      cls: "story-engine-input",
      attr: { type: "text", placeholder: "Value" }
    });
    valueInput.value = charTrait.value || "";
    const notesInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      attr: { rows: "3", placeholder: "Notes" }
    });
    notesInput.value = charTrait.notes || "";
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.updateCharacterTrait(
          this.character.id,
          charTrait.trait_id,
          valueInput.value || void 0,
          notesInput.value || void 0
        );
        await this.loadCharacterData();
        this.renderContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian16.Notice("Trait updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian15.Notice("Trait updated");
      } catch (err) {
        new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  showAddEventModal() {
    if (!this.world)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian16.Modal(this.plugin.app);
=======
    const modal = new import_obsidian15.Modal(this.plugin.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.textContent = "Add Event";
    const content = modal.contentEl;
    content.createEl("p", { text: "Select an event:" });
    const eventSelect = content.createEl("select", { cls: "story-engine-select" });
    const availableEvents = this.events.filter(
      (e) => !this.characterEvents.some((ce) => ce.event.id === e.id)
    );
    if (availableEvents.length === 0) {
      content.createEl("p", { text: "No available events. Create an event first!" });
      const buttonContainer2 = content.createDiv({ cls: "modal-button-container" });
      const closeBtn = buttonContainer2.createEl("button", { text: "Close" });
      closeBtn.onclick = () => modal.close();
      return;
    }
    for (const event of availableEvents) {
      eventSelect.createEl("option", { text: event.name, value: event.id });
    }
    const roleInput = content.createEl("input", {
      cls: "story-engine-input",
      attr: { type: "text", placeholder: "Role (optional)" }
    });
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Add", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.addEventCharacter(
          eventSelect.value,
          this.character.id,
          roleInput.value || void 0
        );
        await this.loadCharacterData();
        this.renderContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian16.Notice("Character added to event");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian15.Notice("Character added to event");
      } catch (err) {
        new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  showEditEventRoleModal(event, currentRole) {
<<<<<<< HEAD
    const modal = new import_obsidian16.Modal(this.plugin.app);
=======
    const modal = new import_obsidian15.Modal(this.plugin.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.textContent = "Edit Role";
    const content = modal.contentEl;
    content.createEl("p", { text: `Event: ${event.name}` });
    const roleInput = content.createEl("input", {
      cls: "story-engine-input",
      attr: { type: "text", placeholder: "Role" },
      value: currentRole || ""
    });
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.removeEventCharacter(event.id, this.character.id);
        await this.plugin.apiClient.addEventCharacter(
          event.id,
          this.character.id,
          roleInput.value || void 0
        );
        await this.loadCharacterData();
        this.renderContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian16.Notice("Role updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian15.Notice("Role updated");
      } catch (err) {
        new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  showAddRelationshipModal() {
<<<<<<< HEAD
    const modal = new import_obsidian16.Modal(this.plugin.app);
=======
    const modal = new import_obsidian15.Modal(this.plugin.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.textContent = "Add Relationship";
    const content = modal.contentEl;
    content.createEl("p", { text: "Select another character:" });
    const characterSelect = content.createEl("select", { cls: "story-engine-select" });
    const availableCharacters = this.characters.filter((c) => c.id !== this.character.id);
    if (availableCharacters.length === 0) {
      content.createEl("p", { text: "No other characters available." });
      const buttonContainer2 = content.createDiv({ cls: "modal-button-container" });
      const closeBtn = buttonContainer2.createEl("button", { text: "Close" });
      closeBtn.onclick = () => modal.close();
      return;
    }
    for (const char of availableCharacters) {
      characterSelect.createEl("option", { text: char.name, value: char.id });
    }
    const relationshipTypeSelect = content.createEl("select", { cls: "story-engine-select" });
    relationshipTypeSelect.createEl("option", { text: "Ally", value: "ally" });
    relationshipTypeSelect.createEl("option", { text: "Enemy", value: "enemy" });
    relationshipTypeSelect.createEl("option", { text: "Family", value: "family" });
    relationshipTypeSelect.createEl("option", { text: "Lover", value: "lover" });
    relationshipTypeSelect.createEl("option", { text: "Rival", value: "rival" });
    relationshipTypeSelect.createEl("option", { text: "Mentor", value: "mentor" });
    relationshipTypeSelect.createEl("option", { text: "Student", value: "student" });
    const descriptionInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      attr: { rows: "3", placeholder: "Description (optional)" }
    });
    const bidirectionalCheckbox = content.createEl("input", {
      attr: { type: "checkbox" }
    });
    bidirectionalCheckbox.checked = true;
    const bidirectionalLabel = content.createEl("label");
    bidirectionalLabel.appendChild(bidirectionalCheckbox);
    bidirectionalLabel.appendChild(document.createTextNode(" Bidirectional"));
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Add", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.createCharacterRelationship(this.character.id, {
          character1_id: this.character.id,
          character2_id: characterSelect.value,
          relationship_type: relationshipTypeSelect.value,
          description: descriptionInput.value || "",
          bidirectional: bidirectionalCheckbox.checked
        });
        await this.loadCharacterData();
        this.renderContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian16.Notice("Relationship added");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian15.Notice("Relationship added");
      } catch (err) {
        new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  showEditRelationshipModal(rel) {
<<<<<<< HEAD
    const modal = new import_obsidian16.Modal(this.plugin.app);
=======
    const modal = new import_obsidian15.Modal(this.plugin.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.textContent = "Edit Relationship";
    const content = modal.contentEl;
    const relationshipTypeSelect = content.createEl("select", { cls: "story-engine-select" });
    relationshipTypeSelect.createEl("option", { text: "Ally", value: "ally" });
    relationshipTypeSelect.createEl("option", { text: "Enemy", value: "enemy" });
    relationshipTypeSelect.createEl("option", { text: "Family", value: "family" });
    relationshipTypeSelect.createEl("option", { text: "Lover", value: "lover" });
    relationshipTypeSelect.createEl("option", { text: "Rival", value: "rival" });
    relationshipTypeSelect.createEl("option", { text: "Mentor", value: "mentor" });
    relationshipTypeSelect.createEl("option", { text: "Student", value: "student" });
    relationshipTypeSelect.value = rel.relationship_type;
    const descriptionInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      attr: { rows: "3", placeholder: "Description" },
      text: rel.description || ""
    });
    const bidirectionalCheckbox = content.createEl("input", {
      attr: { type: "checkbox" }
    });
    bidirectionalCheckbox.checked = rel.bidirectional;
    const bidirectionalLabel = content.createEl("label");
    bidirectionalLabel.appendChild(bidirectionalCheckbox);
    bidirectionalLabel.appendChild(document.createTextNode(" Bidirectional"));
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.updateCharacterRelationship(rel.id, {
          relationship_type: relationshipTypeSelect.value,
          description: descriptionInput.value || "",
          bidirectional: bidirectionalCheckbox.checked
        });
        await this.loadCharacterData();
        this.renderContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian16.Notice("Relationship updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian15.Notice("Relationship updated");
      } catch (err) {
        new import_obsidian15.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  // Method to update character after edit
  updateCharacter(character) {
    this.character = character;
    this.renderHeader();
    this.renderContent();
  }
};

// src/views/StoryListView.ts
var STORY_LIST_VIEW_TYPE = "story-engine-list-view";
<<<<<<< HEAD
var StoryListView = class extends import_obsidian17.ItemView {
=======
var StoryListView = class extends import_obsidian16.ItemView {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  constructor(leaf, plugin) {
    super(leaf);
    this.stories = [];
    this.worlds = [];
    this.rpgSystems = [];
    this.loading = true;
    this.error = null;
    this.currentStory = null;
    this.currentWorld = null;
    this.viewMode = "list";
    this.currentTab = "chapters";
    this.storyCharacters = [];
    this.worldTab = "characters";
    this.listTab = "stories";
    this.expandedWorldId = null;
    // Character Details View
    this.characterDetailsView = null;
    this.chapters = [];
    this.scenes = [];
    this.beats = [];
    this.contentBlocks = [];
    this.contentBlockRefs = [];
    this.loadingHierarchy = false;
    // World entities
    this.characters = [];
    this.locations = [];
    this.artifacts = [];
    this.events = [];
    this.traits = [];
    this.archetypes = [];
    this.factions = [];
    this.lores = [];
    this.loadingWorldData = false;
    this.plugin = plugin;
  }
  getViewType() {
    return STORY_LIST_VIEW_TYPE;
  }
  getDisplayText() {
    if (this.viewMode === "details" && this.currentStory) {
      return this.currentStory.title;
    }
    if (this.viewMode === "world-details" && this.currentWorld) {
      return this.currentWorld.name;
    }
    if (this.viewMode === "character-details" && this.characterDetailsView) {
      return this.characterDetailsView["character"].name;
    }
    return "Stories";
  }
  getIcon() {
    return "book-open";
  }
  async onOpen() {
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("story-engine-view-container");
    await this.render(container);
    await this.loadStories();
  }
  async onClose() {
  }
  async render(container) {
    container.empty();
    this.headerEl = container.createDiv({ cls: "story-engine-view-header" });
    this.contentEl = container.createDiv({ cls: "story-engine-view-content" });
    if (this.viewMode === "details" && this.currentStory) {
      this.renderDetails();
    } else if (this.viewMode === "world-details" && this.currentWorld) {
      this.renderWorldDetails();
    } else if (this.viewMode === "character-details" && this.characterDetailsView) {
      this.characterDetailsView.render();
    } else {
      this.renderListHeader();
      this.renderListContent();
    }
  }
  renderListHeader() {
    if (!this.headerEl)
      return;
    this.headerEl.empty();
    this.headerEl.createEl("h2", { text: "Stories" });
    const tabsContainer = this.headerEl.createDiv({ cls: "story-engine-tabs" });
    const storiesTab = tabsContainer.createEl("button", {
      text: "Stories",
      cls: `story-engine-tab ${this.listTab === "stories" ? "is-active" : ""}`
    });
    storiesTab.onclick = () => {
      this.listTab = "stories";
      this.renderListHeader();
      this.renderListContent();
    };
    const worldsTab = tabsContainer.createEl("button", {
      text: "Worlds",
      cls: `story-engine-tab ${this.listTab === "worlds" ? "is-active" : ""}`
    });
    worldsTab.onclick = () => {
      this.listTab = "worlds";
      this.renderListHeader();
      this.renderListContent();
    };
    const rpgSystemsTab = tabsContainer.createEl("button", {
      text: "RPG Systems",
      cls: `story-engine-tab ${this.listTab === "rpg-systems" ? "is-active" : ""}`
    });
    rpgSystemsTab.onclick = () => {
      this.listTab = "rpg-systems";
      this.renderListHeader();
      this.renderListContent();
    };
    const settingsButton = tabsContainer.createEl("button", {
      cls: "story-engine-settings-btn story-engine-tab",
      attr: { "aria-label": "Open Settings" }
    });
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(settingsButton, "gear");
=======
    (0, import_obsidian16.setIcon)(settingsButton, "gear");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    settingsButton.onclick = () => {
      this.plugin.openSettings();
    };
  }
  renderListContent() {
    if (!this.contentEl)
      return;
    this.contentEl.empty();
    if (this.loading) {
      this.contentEl.createEl("p", { text: "Loading..." });
      return;
    }
    if (this.error) {
      this.contentEl.createEl("p", {
        text: `Error: ${this.error}`,
        cls: "story-engine-error"
      });
      this.renderActionsBar();
      return;
    }
    switch (this.listTab) {
      case "stories":
        this.renderStoriesTab();
        break;
      case "worlds":
        this.renderWorldsTab();
        break;
      case "rpg-systems":
        this.renderRPGSystemsTab();
        break;
    }
    this.renderActionsBar();
  }
  renderActionsBar() {
    if (!this.contentEl)
      return;
    const actionsBar = this.contentEl.createDiv({ cls: "story-engine-actions-bar" });
    const refreshButton = actionsBar.createEl("button", {
      text: "Refresh",
      cls: "story-engine-refresh-btn"
    });
    refreshButton.onclick = async () => {
      await this.loadStories();
    };
    const syncAllButton = actionsBar.createEl("button", {
      text: "Sync All",
      cls: "story-engine-sync-all-btn"
    });
    syncAllButton.onclick = async () => {
      if (!this.plugin.settings.tenantId) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Please configure Tenant ID in settings", 5e3);
        return;
      }
      try {
        new import_obsidian17.Notice("Syncing all stories...");
=======
        new import_obsidian16.Notice("Please configure Tenant ID in settings", 5e3);
        return;
      }
      try {
        new import_obsidian16.Notice("Syncing all stories...");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        await this.plugin.syncService.pullAllStories();
        await this.loadStories();
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to sync stories";
<<<<<<< HEAD
        new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
        new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    let createButtonText = "Create Story";
    let createButtonAction = () => {
      this.plugin.createStoryCommand();
    };
    if (this.listTab === "worlds") {
      createButtonText = "Create World";
      createButtonAction = async () => {
        new CreateWorldModal(this.app, async (name, description, genre) => {
          try {
<<<<<<< HEAD
            new import_obsidian17.Notice(`Creating world "${name}"...`);
            const newWorld = await this.plugin.apiClient.createWorld(name, description, genre);
            new import_obsidian17.Notice(`World "${name}" created successfully`);
            await this.loadStories();
          } catch (err) {
            const errorMessage = err instanceof Error ? err.message : "Failed to create world";
            new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
            new import_obsidian16.Notice(`Creating world "${name}"...`);
            const newWorld = await this.plugin.apiClient.createWorld(name, description, genre);
            new import_obsidian16.Notice(`World "${name}" created successfully`);
            await this.loadStories();
          } catch (err) {
            const errorMessage = err instanceof Error ? err.message : "Failed to create world";
            new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          }
        }).open();
      };
    } else if (this.listTab === "rpg-systems") {
      createButtonText = "Create RPG System";
      createButtonAction = () => {
<<<<<<< HEAD
        new import_obsidian17.Notice("Create RPG System - Coming soon", 3e3);
=======
        new import_obsidian16.Notice("Create RPG System - Coming soon", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      };
    }
    const createButton = actionsBar.createEl("button", {
      text: createButtonText,
      cls: "mod-cta story-engine-create-btn"
    });
    createButton.onclick = createButtonAction;
  }
  renderDetailsHeader() {
    if (!this.headerEl || !this.currentStory)
      return;
    this.headerEl.empty();
    const headerLeft = this.headerEl.createDiv({ cls: "story-engine-header-left" });
    const backButton = headerLeft.createEl("button", {
      text: "\u2190 Back",
      cls: "story-engine-back-btn"
    });
    backButton.onclick = () => {
      this.showList();
    };
    const titleContainer = headerLeft.createDiv({ cls: "story-engine-title-container" });
    const titleRow = titleContainer.createDiv({ cls: "story-engine-title-row" });
    const titleH2 = titleRow.createEl("h2", {
      text: this.currentStory.title,
      cls: "story-engine-title-header"
    });
    const statusPill = titleRow.createSpan({
      cls: `story-engine-status-pill story-engine-status-${this.currentStory.status.toLowerCase().replace(/\s+/g, "-")}`
    });
    statusPill.textContent = this.currentStory.status;
    const versionSpan = titleRow.createSpan({ cls: "story-engine-version" });
    versionSpan.textContent = `v.${this.currentStory.version_number}`;
    const uuidRow = titleContainer.createDiv({ cls: "story-engine-uuid-row" });
    const uuidSpan = uuidRow.createSpan({ cls: "story-engine-uuid" });
    uuidSpan.textContent = this.currentStory.id;
    const copyUuidButton = uuidRow.createEl("button", {
      cls: "story-engine-copy-uuid-btn",
      attr: { "aria-label": "Copy UUID" }
    });
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(copyUuidButton, "copy");
=======
    (0, import_obsidian16.setIcon)(copyUuidButton, "copy");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    copyUuidButton.onclick = () => {
      this.copyStoryId();
    };
    const headerActions = this.headerEl.createDiv({ cls: "story-engine-header-actions" });
    if (this.currentStory.world_id) {
      const world = this.worlds.find((w) => w.id === this.currentStory.world_id);
      if (world) {
        const worldButton = headerActions.createEl("button", {
          cls: "story-engine-world-btn",
          attr: { "aria-label": `Go to World: ${world.name}` }
        });
<<<<<<< HEAD
        (0, import_obsidian17.setIcon)(worldButton, "globe");
=======
        (0, import_obsidian16.setIcon)(worldButton, "globe");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        worldButton.createSpan({ text: "World" });
        worldButton.onclick = () => {
          this.showWorldDetails(world);
        };
      }
    }
    const contextButton = headerActions.createEl("button", {
      cls: "story-engine-context-btn",
      attr: { "aria-label": "Story Actions" }
    });
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(contextButton, "more-vertical");
=======
    (0, import_obsidian16.setIcon)(contextButton, "more-vertical");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    const dropdownMenu = headerActions.createDiv({ cls: "story-engine-dropdown-menu" });
    dropdownMenu.style.display = "none";
    const editOption = dropdownMenu.createEl("button", {
      cls: "story-engine-dropdown-item"
    });
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(editOption, "pencil");
=======
    (0, import_obsidian16.setIcon)(editOption, "pencil");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    editOption.createSpan({ text: "Edit Story Name" });
    editOption.onclick = () => {
      dropdownMenu.style.display = "none";
      this.showEditStoryNameModal();
    };
    const cloneOption = dropdownMenu.createEl("button", {
      cls: "story-engine-dropdown-item"
    });
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(cloneOption, "copy");
=======
    (0, import_obsidian16.setIcon)(cloneOption, "copy");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    cloneOption.createSpan({ text: "Clone Story" });
    cloneOption.onclick = async () => {
      dropdownMenu.style.display = "none";
      await this.cloneStory();
    };
    const pullOption = dropdownMenu.createEl("button", {
      cls: "story-engine-dropdown-item"
    });
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(pullOption, "download");
=======
    (0, import_obsidian16.setIcon)(pullOption, "download");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    pullOption.createSpan({ text: "Pull from Service" });
    pullOption.onclick = async () => {
      dropdownMenu.style.display = "none";
      if (!this.currentStory)
        return;
      try {
<<<<<<< HEAD
        new import_obsidian17.Notice(`Pulling story "${this.currentStory.title}"...`);
        await this.plugin.syncService.pullStory(this.currentStory.id);
        await this.loadHierarchy();
        this.renderTabContent();
        new import_obsidian17.Notice(`Story pulled successfully!`);
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to pull story";
        new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
        new import_obsidian16.Notice(`Pulling story "${this.currentStory.title}"...`);
        await this.plugin.syncService.pullStory(this.currentStory.id);
        await this.loadHierarchy();
        this.renderTabContent();
        new import_obsidian16.Notice(`Story pulled successfully!`);
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to pull story";
        new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const pushOption = dropdownMenu.createEl("button", {
      cls: "story-engine-dropdown-item"
    });
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(pushOption, "upload");
=======
    (0, import_obsidian16.setIcon)(pushOption, "upload");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    pushOption.createSpan({ text: "Push to Service" });
    pushOption.onclick = async () => {
      dropdownMenu.style.display = "none";
      if (!this.currentStory)
        return;
      try {
        const folderPath = this.plugin.fileManager.getStoryFolderPath(this.currentStory.title);
<<<<<<< HEAD
        new import_obsidian17.Notice(`Pushing story "${this.currentStory.title}"...`);
        await this.plugin.syncService.pushStory(folderPath);
        new import_obsidian17.Notice(`Story pushed successfully!`);
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to push story";
        new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
        new import_obsidian16.Notice(`Pushing story "${this.currentStory.title}"...`);
        await this.plugin.syncService.pushStory(folderPath);
        new import_obsidian16.Notice(`Story pushed successfully!`);
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to push story";
        new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    contextButton.onclick = (e) => {
      e.stopPropagation();
      const isVisible = dropdownMenu.style.display !== "none";
      dropdownMenu.style.display = isVisible ? "none" : "block";
    };
    document.addEventListener("click", () => {
      dropdownMenu.style.display = "none";
    }, { once: true });
  }
  renderStoriesTab() {
    if (this.stories.length === 0) {
      this.contentEl.createEl("p", { text: "No stories found." });
      return;
    }
    const storiesList = this.contentEl.createDiv({ cls: "story-engine-list" });
    for (const story of this.stories) {
      this.renderStoryItem(storiesList, story);
    }
  }
  renderWorldsTab() {
    if (this.worlds.length === 0) {
      this.contentEl.createEl("p", { text: "No worlds found." });
      return;
    }
    const storiesByWorld = /* @__PURE__ */ new Map();
    for (const story of this.stories) {
      const worldId = story.world_id || null;
      if (!storiesByWorld.has(worldId)) {
        storiesByWorld.set(worldId, []);
      }
      storiesByWorld.get(worldId).push(story);
    }
    const worldsList = this.contentEl.createDiv({ cls: "story-engine-list" });
    for (const world of this.worlds) {
      const worldStories = storiesByWorld.get(world.id) || [];
      const worldItem = worldsList.createDiv({ cls: "story-engine-world-item" });
      const worldHeader = worldItem.createDiv({ cls: "story-engine-world-item-header" });
      const worldTitle = worldHeader.createDiv({ cls: "story-engine-world-title" });
      worldTitle.createEl("h3", { text: world.name });
      if (world.description) {
        worldTitle.createEl("p", {
          text: world.description,
          cls: "story-engine-world-description"
        });
      }
      worldTitle.style.cursor = "pointer";
      worldTitle.onclick = () => {
        this.showWorldDetails(world);
      };
      const accordionButton = worldHeader.createEl("button", {
        text: worldStories.length > 0 ? `${worldStories.length} story${worldStories.length !== 1 ? "s" : ""}` : "No stories",
        cls: `story-engine-accordion-btn ${this.expandedWorldId === world.id ? "is-expanded" : ""}`
      });
      accordionButton.onclick = (e) => {
        e.stopPropagation();
        if (this.expandedWorldId === world.id) {
          this.expandedWorldId = null;
        } else {
          this.expandedWorldId = world.id;
        }
        this.renderListContent();
      };
      if (this.expandedWorldId === world.id && worldStories.length > 0) {
        const storiesContent = worldItem.createDiv({ cls: "story-engine-world-stories-content" });
        for (const story of worldStories) {
          this.renderStoryItem(storiesContent, story);
        }
      }
    }
    const storiesWithoutWorld = storiesByWorld.get(null) || [];
    if (storiesWithoutWorld.length > 0) {
      const noWorldItem = worldsList.createDiv({ cls: "story-engine-world-item" });
      const noWorldHeader = noWorldItem.createDiv({ cls: "story-engine-world-item-header" });
      noWorldHeader.createEl("h3", { text: "No World" });
      const accordionButton = noWorldHeader.createEl("button", {
        text: `${storiesWithoutWorld.length} story${storiesWithoutWorld.length !== 1 ? "s" : ""}`,
        cls: `story-engine-accordion-btn ${this.expandedWorldId === "no-world" ? "is-expanded" : ""}`
      });
      accordionButton.onclick = () => {
        if (this.expandedWorldId === "no-world") {
          this.expandedWorldId = null;
        } else {
          this.expandedWorldId = "no-world";
        }
        this.renderListContent();
      };
      if (this.expandedWorldId === "no-world") {
        const storiesContent = noWorldItem.createDiv({ cls: "story-engine-world-stories-content" });
        for (const story of storiesWithoutWorld) {
          this.renderStoryItem(storiesContent, story);
        }
      }
    }
  }
  renderRPGSystemsTab() {
    if (this.rpgSystems.length === 0) {
      if (this.plugin.settings.mode === "local") {
        this.contentEl.createEl("p", { text: "RPG systems are not available in local mode." });
      } else {
        this.contentEl.createEl("p", { text: "No RPG systems found." });
      }
      return;
    }
    const rpgSystemsList = this.contentEl.createDiv({ cls: "story-engine-list" });
    for (const rpgSystem of this.rpgSystems) {
      const rpgSystemItem = rpgSystemsList.createDiv({
        cls: "story-engine-item"
      });
      const title = rpgSystemItem.createDiv({
        cls: "story-engine-title",
        text: rpgSystem.name
      });
      const meta = rpgSystemItem.createDiv({
        cls: "story-engine-meta"
      });
      if (rpgSystem.description) {
        meta.createEl("span", {
          text: rpgSystem.description
        });
      }
      if (rpgSystem.is_builtin) {
        meta.createEl("span", {
          text: "Built-in",
          cls: "story-engine-badge"
        });
      }
    }
  }
  renderStoryItem(container, story) {
    const storyItem = container.createDiv({
      cls: "story-engine-item"
    });
    const title = storyItem.createDiv({
      cls: "story-engine-title",
      text: story.title
    });
    const meta = storyItem.createDiv({
      cls: "story-engine-meta"
    });
    meta.createEl("span", {
      text: `Version ${story.version_number}`
    });
    meta.createEl("span", {
      text: `Status: ${story.status}`
    });
    if (story.world_id) {
      const world = this.worlds.find((w) => w.id === story.world_id);
      if (world) {
        meta.createEl("span", {
          text: `World: ${world.name}`
        });
      }
    }
    storyItem.onclick = async () => {
      await this.showStoryDetails(story);
    };
  }
  async loadStories() {
    this.loading = true;
    this.error = null;
    try {
      if (this.plugin.settings.mode === "remote" && !this.plugin.settings.tenantId) {
        this.error = "Tenant ID not configured";
        this.loading = false;
        this.renderListContent();
        return;
      }
      this.worlds = await this.plugin.apiClient.getWorlds();
      this.stories = await this.plugin.apiClient.listStories();
      try {
        this.rpgSystems = await this.plugin.apiClient.getRPGSystems();
      } catch (rpgErr) {
        console.warn("RPG systems not available:", rpgErr);
        this.rpgSystems = [];
      }
    } catch (err) {
      this.error = err instanceof Error ? err.message : "Failed to load stories";
      console.error("Error loading stories:", err);
    } finally {
      this.loading = false;
      this.renderListContent();
    }
  }
  // Method to refresh the view
  async refresh() {
    await this.loadStories();
  }
  async showStoryDetails(story) {
    this.currentStory = story;
    this.viewMode = "details";
    this.currentTab = "chapters";
    await this.loadHierarchy();
    this.renderDetails();
  }
  async loadHierarchy() {
    if (!this.currentStory)
      return;
    this.loadingHierarchy = true;
    try {
      this.chapters = await this.plugin.apiClient.getChapters(this.currentStory.id);
      this.scenes = await this.plugin.apiClient.getScenesByStory(this.currentStory.id);
      this.beats = await this.plugin.apiClient.getBeatsByStory(this.currentStory.id);
      const contentBlocksMap = /* @__PURE__ */ new Map();
      this.contentBlockRefs = [];
      for (const chapter of this.chapters) {
        const chapterBlocks = await this.plugin.apiClient.getContentBlocks(chapter.id);
        for (const block of chapterBlocks) {
          contentBlocksMap.set(block.id, block);
        }
      }
      for (const scene of this.scenes) {
        const sceneBlocks = await this.plugin.apiClient.getContentBlocksByScene(scene.id);
        for (const block of sceneBlocks) {
          contentBlocksMap.set(block.id, block);
        }
      }
      for (const beat of this.beats) {
        const beatBlocks = await this.plugin.apiClient.getContentBlocksByBeat(beat.id);
        for (const block of beatBlocks) {
          contentBlocksMap.set(block.id, block);
        }
      }
      this.contentBlocks = Array.from(contentBlocksMap.values());
      for (const block of this.contentBlocks) {
        const refs = await this.plugin.apiClient.getContentAnchors(block.id);
        this.contentBlockRefs.push(...refs);
      }
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to load hierarchy";
<<<<<<< HEAD
      new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
      new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    } finally {
      this.loadingHierarchy = false;
    }
  }
  showList() {
    this.currentStory = null;
    this.viewMode = "list";
    this.renderListHeader();
    this.renderListContent();
  }
  renderDetails() {
    if (!this.contentEl || !this.currentStory)
      return;
    this.renderDetailsHeader();
    this.contentEl.empty();
    this.renderTabs();
    this.renderTabContent();
  }
  renderTabs() {
    if (!this.contentEl)
      return;
    const existingTabs = this.contentEl.querySelector(".story-engine-tabs");
    if (existingTabs) {
      existingTabs.remove();
    }
    const tabsContainer = this.contentEl.createDiv({ cls: "story-engine-tabs" });
    const chaptersTab = tabsContainer.createEl("button", {
      text: "Chapters",
      cls: `story-engine-tab ${this.currentTab === "chapters" ? "is-active" : ""}`
    });
    chaptersTab.onclick = () => {
      this.currentTab = "chapters";
      this.renderTabs();
      this.renderTabContent();
    };
    const scenesTab = tabsContainer.createEl("button", {
      text: "Scenes",
      cls: `story-engine-tab ${this.currentTab === "scenes" ? "is-active" : ""}`
    });
    scenesTab.onclick = () => {
      this.currentTab = "scenes";
      this.renderTabs();
      this.renderTabContent();
    };
    const beatsTab = tabsContainer.createEl("button", {
      text: "Beats",
      cls: `story-engine-tab ${this.currentTab === "beats" ? "is-active" : ""}`
    });
    beatsTab.onclick = () => {
      this.currentTab = "beats";
      this.renderTabs();
      this.renderTabContent();
    };
    const contentsTab = tabsContainer.createEl("button", {
      text: "Contents",
      cls: `story-engine-tab ${this.currentTab === "contents" ? "is-active" : ""}`
    });
    contentsTab.onclick = () => {
      this.currentTab = "contents";
      this.renderTabs();
      this.renderTabContent();
    };
    const charactersTab = tabsContainer.createEl("button", {
      text: "Characters",
      cls: `story-engine-tab ${this.currentTab === "characters" ? "is-active" : ""}`
    });
    charactersTab.onclick = async () => {
      this.currentTab = "characters";
      this.renderTabs();
      await this.loadStoryCharacters();
      this.renderTabContent();
    };
  }
  renderTabContent() {
    if (!this.contentEl)
      return;
    const existingContent = this.contentEl.querySelector(".story-engine-tab-content");
    if (existingContent) {
      existingContent.remove();
    }
    const tabContent = this.contentEl.createDiv({ cls: "story-engine-tab-content" });
    if (this.loadingHierarchy) {
      tabContent.createEl("p", { text: "Loading..." });
      return;
    }
    switch (this.currentTab) {
      case "chapters":
        this.renderChaptersTab(tabContent);
        break;
      case "scenes":
        this.renderScenesTab(tabContent);
        break;
      case "beats":
        this.renderBeatsTab(tabContent);
        break;
      case "contents":
        this.renderContentsTab(tabContent);
        break;
      case "characters":
        this.renderStoryCharactersTab(tabContent);
        break;
    }
  }
  renderChaptersTab(container) {
    container.empty();
    const list = container.createDiv({ cls: "story-engine-list" });
    if (this.chapters.length === 0) {
      list.createEl("p", { text: "No chapters found." });
    } else {
      for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
        const item = list.createDiv({ cls: "story-engine-item" });
        item.createDiv({
          cls: "story-engine-title",
          text: `Chapter ${chapter.number}: ${chapter.title}`
        });
        const meta = item.createDiv({ cls: "story-engine-meta" });
        meta.createEl("span", { text: `Status: ${chapter.status}` });
        const actions = item.createDiv({ cls: "story-engine-item-actions" });
        actions.createEl("button", { text: "Edit" }).onclick = () => {
          new ChapterModal(this.app, async (updatedChapter) => {
            try {
              await this.plugin.apiClient.updateChapter(chapter.id, updatedChapter);
              await this.loadHierarchy();
              this.renderTabContent();
<<<<<<< HEAD
              new import_obsidian17.Notice("Chapter updated successfully");
=======
              new import_obsidian16.Notice("Chapter updated successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
            } catch (err) {
              throw err;
            }
          }, this.chapters, chapter).open();
        };
        if (chapter.number > 1) {
          actions.createEl("button", { text: "Up" }).onclick = () => {
            this.moveChapterUp(chapter);
          };
        }
        if (chapter.number < this.chapters.length) {
          actions.createEl("button", { text: "Down" }).onclick = () => {
            this.moveChapterDown(chapter);
          };
        }
        if (this.currentTab === "contents") {
          actions.createEl("button", { text: "+ Content" }).onclick = () => {
            this.createContentForEntity("chapter", chapter.id, chapter.id);
          };
        }
        actions.createEl("button", { text: "Delete" }).onclick = async () => {
          if (confirm("Delete this chapter?")) {
            try {
              await this.plugin.apiClient.deleteChapter(chapter.id);
              await this.loadHierarchy();
              this.renderTabContent();
<<<<<<< HEAD
              new import_obsidian17.Notice("Chapter deleted");
            } catch (err) {
              new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
              new import_obsidian16.Notice("Chapter deleted");
            } catch (err) {
              new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
            }
          }
        };
      }
    }
    const footer = container.createDiv({ cls: "story-engine-list-footer" });
    const createButton = footer.createEl("button", {
      text: "Create Chapter",
      cls: "mod-cta"
    });
    createButton.onclick = () => {
      if (!this.currentStory)
        return;
      new ChapterModal(this.app, async (chapter) => {
        try {
          await this.plugin.apiClient.createChapter(this.currentStory.id, chapter);
          await this.loadHierarchy();
          this.renderTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Chapter created successfully");
=======
          new import_obsidian16.Notice("Chapter created successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        } catch (err) {
          throw err;
        }
      }, this.chapters).open();
    };
  }
  renderScenesTab(container) {
    container.empty();
    const scenesByChapter = /* @__PURE__ */ new Map();
    for (const scene of this.scenes) {
      const chapterId = scene.chapter_id || null;
      if (!scenesByChapter.has(chapterId)) {
        scenesByChapter.set(chapterId, []);
      }
      scenesByChapter.get(chapterId).push(scene);
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const chapterScenes = scenesByChapter.get(chapter.id) || [];
      const group = list.createDiv({ cls: "story-engine-group" });
      const groupHeader = group.createDiv({ cls: "story-engine-group-header" });
      groupHeader.createEl("h3", { text: `Chapter ${chapter.number}: ${chapter.title}` });
      const groupItems = group.createDiv({ cls: "story-engine-group-items" });
      if (chapterScenes.length === 0) {
        groupItems.createEl("p", { text: "No scenes in this chapter." });
      } else {
        for (const scene of chapterScenes.sort((a, b) => a.order_num - b.order_num)) {
          this.renderSceneItem(groupItems, scene);
        }
      }
      const groupFooter = group.createDiv({ cls: "story-engine-group-footer" });
      const addButton = groupFooter.createEl("button", {
        text: "+ Add Scene",
        cls: "story-engine-add-btn"
      });
      addButton.onclick = () => {
        if (!this.currentStory)
          return;
        new SceneModal(this.app, this.currentStory.id, this.chapters, async (scene) => {
          try {
            scene.chapter_id = chapter.id;
            await this.plugin.apiClient.createScene(scene);
            await this.loadHierarchy();
            this.renderTabContent();
<<<<<<< HEAD
            new import_obsidian17.Notice("Scene created successfully");
=======
            new import_obsidian16.Notice("Scene created successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          } catch (err) {
            throw err;
          }
        }, this.scenes, void 0, chapter.id).open();
      };
    }
    const orphanScenes = scenesByChapter.get(null) || [];
    if (orphanScenes.length > 0 || scenesByChapter.size === 0) {
      const group = list.createDiv({ cls: "story-engine-group" });
      const groupHeader = group.createDiv({ cls: "story-engine-group-header" });
      groupHeader.createEl("h3", { text: "Without Chapter" });
      const groupItems = group.createDiv({ cls: "story-engine-group-items" });
      for (const scene of orphanScenes.sort((a, b) => a.order_num - b.order_num)) {
        this.renderSceneItem(groupItems, scene);
      }
      const groupFooter = group.createDiv({ cls: "story-engine-group-footer" });
      const addButton = groupFooter.createEl("button", {
        text: "+ Add Scene",
        cls: "story-engine-add-btn"
      });
      addButton.onclick = () => {
        if (!this.currentStory)
          return;
        new SceneModal(this.app, this.currentStory.id, this.chapters, async (scene) => {
          try {
            scene.chapter_id = null;
            await this.plugin.apiClient.createScene(scene);
            await this.loadHierarchy();
            this.renderTabContent();
<<<<<<< HEAD
            new import_obsidian17.Notice("Scene created successfully");
=======
            new import_obsidian16.Notice("Scene created successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          } catch (err) {
            throw err;
          }
        }, this.scenes, void 0, null).open();
      };
    }
  }
  renderSceneItem(container, scene) {
    const item = container.createDiv({ cls: "story-engine-item" });
    item.createDiv({
      cls: "story-engine-title",
      text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`
    });
    const meta = item.createDiv({ cls: "story-engine-meta" });
    if (scene.time_ref) {
      meta.createEl("span", { text: `Time: ${scene.time_ref}` });
    }
    const actions = item.createDiv({ cls: "story-engine-item-actions" });
    actions.createEl("button", { text: "Edit" }).onclick = () => {
      if (!this.currentStory)
        return;
      new SceneModal(this.app, this.currentStory.id, this.chapters, async (updatedScene) => {
        try {
          await this.plugin.apiClient.updateScene(scene.id, updatedScene);
          await this.loadHierarchy();
          this.renderTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Scene updated successfully");
=======
          new import_obsidian16.Notice("Scene updated successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        } catch (err) {
          throw err;
        }
      }, this.scenes, scene).open();
    };
    const siblingScenes = this.scenes.filter((s) => s.chapter_id === scene.chapter_id).sort((a, b) => a.order_num - b.order_num);
    const minOrderNum = siblingScenes.length > 0 ? Math.min(...siblingScenes.map((s) => s.order_num)) : scene.order_num;
    const maxOrderNum = siblingScenes.length > 0 ? Math.max(...siblingScenes.map((s) => s.order_num)) : scene.order_num;
    if (scene.order_num > minOrderNum) {
      actions.createEl("button", { text: "Up" }).onclick = () => {
        this.moveSceneUp(scene);
      };
    }
    if (scene.order_num < maxOrderNum) {
      actions.createEl("button", { text: "Down" }).onclick = () => {
        this.moveSceneDown(scene);
      };
    }
    actions.createEl("button", { text: "Relinkar" }).onclick = async () => {
      await this.showMoveSceneModal(scene);
    };
    if (this.currentTab === "contents") {
      const chapterId = scene.chapter_id || (this.chapters.length > 0 ? this.chapters[0].id : "");
      if (chapterId) {
        actions.createEl("button", { text: "+ Content" }).onclick = () => {
          this.createContentForEntity("scene", scene.id, chapterId);
        };
      }
    }
    actions.createEl("button", { text: "Delete" }).onclick = async () => {
      if (confirm("Delete this scene?")) {
        try {
          await this.plugin.apiClient.deleteScene(scene.id);
          await this.loadHierarchy();
          this.renderTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Scene deleted");
        } catch (err) {
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
          new import_obsidian16.Notice("Scene deleted");
        } catch (err) {
          new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        }
      }
    };
  }
  renderBeatsTab(container) {
    container.empty();
    const beatsByScene = /* @__PURE__ */ new Map();
    for (const beat of this.beats) {
      if (!beatsByScene.has(beat.scene_id)) {
        beatsByScene.set(beat.scene_id, []);
      }
      beatsByScene.get(beat.scene_id).push(beat);
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const chapterScenes = this.scenes.filter((s) => s.chapter_id === chapter.id).sort((a, b) => a.order_num - b.order_num);
      if (chapterScenes.length > 0) {
        const chapterGroup = list.createDiv({ cls: "story-engine-chapter-group" });
        const chapterHeader = chapterGroup.createDiv({ cls: "story-engine-chapter-group-header" });
        chapterHeader.createEl("h2", {
          text: `Chapter ${chapter.number}: ${chapter.title}`
        });
        const chapterContent = chapterGroup.createDiv({ cls: "story-engine-chapter-group-content" });
        for (const scene of chapterScenes) {
          const sceneBeats = beatsByScene.get(scene.id) || [];
          const sceneGroup = chapterContent.createDiv({ cls: "story-engine-group" });
          const sceneHeader = sceneGroup.createDiv({ cls: "story-engine-group-header" });
          sceneHeader.createEl("h3", {
            text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`
          });
          const sceneItems = sceneGroup.createDiv({ cls: "story-engine-group-items" });
          if (sceneBeats.length === 0) {
            sceneItems.createEl("p", { text: "No beats in this scene." });
          } else {
            for (const beat of sceneBeats.sort((a, b) => a.order_num - b.order_num)) {
              this.renderBeatItem(sceneItems, beat);
            }
          }
          const sceneFooter = sceneGroup.createDiv({ cls: "story-engine-group-footer" });
          const addButton = sceneFooter.createEl("button", {
            text: "+ Add Beat",
            cls: "story-engine-add-btn"
          });
          addButton.onclick = () => {
            if (!this.currentStory)
              return;
            new BeatModal(this.app, this.currentStory.id, this.scenes, async (beat) => {
              try {
                beat.scene_id = scene.id;
                await this.plugin.apiClient.createBeat(beat);
                await this.loadHierarchy();
                this.renderTabContent();
<<<<<<< HEAD
                new import_obsidian17.Notice("Beat created successfully");
=======
                new import_obsidian16.Notice("Beat created successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
              } catch (err) {
                throw err;
              }
            }, this.beats, void 0, this.chapters, scene.id).open();
          };
        }
      }
    }
    const orphanBeats = this.beats.filter((b) => {
      const scene = this.scenes.find((s) => s.id === b.scene_id);
      return !scene || !scene.chapter_id;
    });
    if (this.chapters.length === 0 || orphanBeats.length > 0 || this.scenes.some((s) => !s.chapter_id)) {
      const orphanGroup = list.createDiv({ cls: "story-engine-chapter-group" });
      const orphanHeader = orphanGroup.createDiv({ cls: "story-engine-chapter-group-header" });
      orphanHeader.createEl("h2", { text: "Without Chapter" });
      const orphanContent = orphanGroup.createDiv({ cls: "story-engine-chapter-group-content" });
      const orphanScenes = this.scenes.filter((s) => !s.chapter_id).sort((a, b) => a.order_num - b.order_num);
      for (const scene of orphanScenes) {
        const sceneBeats = beatsByScene.get(scene.id) || [];
        const sceneGroup = orphanContent.createDiv({ cls: "story-engine-group" });
        const sceneHeader = sceneGroup.createDiv({ cls: "story-engine-group-header" });
        sceneHeader.createEl("h3", {
          text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`
        });
        const sceneItems = sceneGroup.createDiv({ cls: "story-engine-group-items" });
        if (sceneBeats.length === 0) {
          sceneItems.createEl("p", { text: "No beats in this scene." });
        } else {
          for (const beat of sceneBeats.sort((a, b) => a.order_num - b.order_num)) {
            this.renderBeatItem(sceneItems, beat);
          }
        }
        const sceneFooter = sceneGroup.createDiv({ cls: "story-engine-group-footer" });
        const addButton = sceneFooter.createEl("button", {
          text: "+ Add Beat",
          cls: "story-engine-add-btn"
        });
        addButton.onclick = () => {
          if (!this.currentStory)
            return;
          new BeatModal(this.app, this.currentStory.id, this.scenes, async (beat) => {
            try {
              beat.scene_id = scene.id;
              await this.plugin.apiClient.createBeat(beat);
              await this.loadHierarchy();
              this.renderTabContent();
<<<<<<< HEAD
              new import_obsidian17.Notice("Beat created successfully");
=======
              new import_obsidian16.Notice("Beat created successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
            } catch (err) {
              throw err;
            }
          }, this.beats, void 0, this.chapters, scene.id).open();
        };
      }
      const beatsWithoutScene = orphanBeats.filter((b) => {
        const scene = this.scenes.find((s) => s.id === b.scene_id);
        return !scene;
      });
      if (beatsWithoutScene.length > 0 || orphanScenes.length === 0 && this.beats.length > 0 && this.scenes.length === 0) {
        const sceneGroup = orphanContent.createDiv({ cls: "story-engine-group" });
        const sceneHeader = sceneGroup.createDiv({ cls: "story-engine-group-header" });
        sceneHeader.createEl("h3", { text: "Without Scene" });
        const sceneItems = sceneGroup.createDiv({ cls: "story-engine-group-items" });
        if (beatsWithoutScene.length > 0) {
          for (const beat of beatsWithoutScene.sort((a, b) => a.order_num - b.order_num)) {
            this.renderBeatItem(sceneItems, beat);
          }
        } else {
          sceneItems.createEl("p", { text: "No beats without scene." });
        }
      }
    }
  }
  renderBeatItem(container, beat) {
    const item = container.createDiv({ cls: "story-engine-item" });
    item.createDiv({
      cls: "story-engine-title",
      text: `Beat ${beat.order_num}: ${beat.type}`
    });
    const meta = item.createDiv({ cls: "story-engine-meta" });
    if (beat.intent) {
      meta.createEl("span", { text: `Intent: ${beat.intent}` });
    }
    if (beat.outcome) {
      meta.createEl("span", { text: `Outcome: ${beat.outcome}` });
    }
    const actions = item.createDiv({ cls: "story-engine-item-actions" });
    actions.createEl("button", { text: "Edit" }).onclick = () => {
      if (!this.currentStory)
        return;
      new BeatModal(this.app, this.currentStory.id, this.scenes, async (updatedBeat) => {
        try {
          await this.plugin.apiClient.updateBeat(beat.id, updatedBeat);
          await this.loadHierarchy();
          this.renderTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Beat updated successfully");
=======
          new import_obsidian16.Notice("Beat updated successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        } catch (err) {
          throw err;
        }
      }, this.beats, beat, this.chapters).open();
    };
    const siblingBeats = this.beats.filter((b) => b.scene_id === beat.scene_id).sort((a, b) => a.order_num - b.order_num);
    const minOrderNum = siblingBeats.length > 0 ? Math.min(...siblingBeats.map((b) => b.order_num)) : beat.order_num;
    const maxOrderNum = siblingBeats.length > 0 ? Math.max(...siblingBeats.map((b) => b.order_num)) : beat.order_num;
    if (beat.order_num > minOrderNum) {
      actions.createEl("button", { text: "Up" }).onclick = () => {
        this.moveBeatUp(beat);
      };
    }
    if (beat.order_num < maxOrderNum) {
      actions.createEl("button", { text: "Down" }).onclick = () => {
        this.moveBeatDown(beat);
      };
    }
    actions.createEl("button", { text: "Relinkar" }).onclick = async () => {
      await this.showMoveBeatModal(beat);
    };
    if (this.currentTab === "contents") {
      const scene = this.scenes.find((s) => s.id === beat.scene_id);
      const chapterId = (scene == null ? void 0 : scene.chapter_id) || (this.chapters.length > 0 ? this.chapters[0].id : "");
      if (chapterId) {
        actions.createEl("button", { text: "+ Content" }).onclick = () => {
          this.createContentForEntity("beat", beat.id, chapterId);
        };
      }
    }
    actions.createEl("button", { text: "Delete" }).onclick = async () => {
      if (confirm("Delete this beat?")) {
        try {
          await this.plugin.apiClient.deleteBeat(beat.id);
          await this.loadHierarchy();
          this.renderTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Beat deleted");
        } catch (err) {
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
          new import_obsidian16.Notice("Beat deleted");
        } catch (err) {
          new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        }
      }
    };
  }
  showEditStoryNameModal() {
    if (!this.currentStory)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit Story Name");
    const content = modal.contentEl;
    let title = this.currentStory.title;
    content.createEl("label", { text: "Story Name *" });
    const titleInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: title });
    titleInput.oninput = () => {
      title = titleInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!title.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Story name is required", 3e3);
=======
        new import_obsidian16.Notice("Story name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        const updatedStory = await this.plugin.apiClient.updateStory(this.currentStory.id, title.trim());
        this.currentStory = updatedStory;
        await this.loadStories();
        this.renderDetailsHeader();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Story name updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Story name updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    titleInput.focus();
    titleInput.select();
  }
  async cloneStory() {
    var _a;
    if (!this.currentStory)
      return;
    const cloneButton = (_a = this.headerEl) == null ? void 0 : _a.querySelector(".story-engine-clone-btn");
    if (cloneButton) {
      cloneButton.disabled = true;
      cloneButton.setText("Cloning...");
    }
    try {
      if (!this.plugin.settings.tenantId) {
        throw new Error("Tenant ID not configured");
      }
      const clonedStory = await this.plugin.apiClient.cloneStory(
        this.currentStory.id
      );
<<<<<<< HEAD
      new import_obsidian17.Notice(`Story "${clonedStory.title}" cloned successfully!`);
=======
      new import_obsidian16.Notice(`Story "${clonedStory.title}" cloned successfully!`);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      await this.loadStories();
      await this.showStoryDetails(clonedStory);
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Clone failed";
<<<<<<< HEAD
      new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
      new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      if (cloneButton) {
        cloneButton.setText("Clone Story");
        cloneButton.disabled = false;
      }
    }
  }
  showEditWorldModal() {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit World");
    const content = modal.contentEl;
    let name = this.currentWorld.name;
    let description = this.currentWorld.description;
    let genre = this.currentWorld.genre;
    content.createEl("label", { text: "World Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Genre *" });
    const genreInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: genre });
    genreInput.oninput = () => {
      genre = genreInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("World name is required", 3e3);
        return;
      }
      if (!genre.trim()) {
        new import_obsidian17.Notice("Genre is required", 3e3);
=======
        new import_obsidian16.Notice("World name is required", 3e3);
        return;
      }
      if (!genre.trim()) {
        new import_obsidian16.Notice("Genre is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        const updatedWorld = await this.plugin.apiClient.updateWorld(
          this.currentWorld.id,
          name.trim(),
          description.trim(),
          genre.trim()
        );
        this.currentWorld = updatedWorld;
        await this.loadStories();
        this.renderWorldDetails();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("World updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("World updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
    nameInput.select();
  }
  copyStoryId() {
    if (!this.currentStory)
      return;
    navigator.clipboard.writeText(this.currentStory.id).then(() => {
<<<<<<< HEAD
      new import_obsidian17.Notice("UUID copied to clipboard");
=======
      new import_obsidian16.Notice("UUID copied to clipboard");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }).catch(() => {
      const textarea = document.createElement("textarea");
      textarea.value = this.currentStory.id;
      textarea.style.position = "fixed";
      textarea.style.opacity = "0";
      textarea.style.left = "-9999px";
      document.body.appendChild(textarea);
      textarea.select();
      try {
        document.execCommand("copy");
<<<<<<< HEAD
        new import_obsidian17.Notice("UUID copied to clipboard");
      } catch (err) {
        new import_obsidian17.Notice("Failed to copy UUID", 3e3);
=======
        new import_obsidian16.Notice("UUID copied to clipboard");
      } catch (err) {
        new import_obsidian16.Notice("Failed to copy UUID", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
      document.body.removeChild(textarea);
    });
  }
  async moveChapterUp(chapter) {
    const sortedChapters = [...this.chapters].sort((a, b) => a.number - b.number);
    const currentIndex = sortedChapters.findIndex((c) => c.id === chapter.id);
    if (currentIndex <= 0)
      return;
    const previousChapter = sortedChapters[currentIndex - 1];
    const tempNumber = chapter.number;
    try {
      await this.plugin.apiClient.updateChapter(chapter.id, { number: previousChapter.number });
      await this.plugin.apiClient.updateChapter(previousChapter.id, { number: tempNumber });
      await this.loadHierarchy();
      this.renderTabContent();
<<<<<<< HEAD
      new import_obsidian17.Notice("Chapter moved up");
    } catch (err) {
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
      new import_obsidian16.Notice("Chapter moved up");
    } catch (err) {
      new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  async moveChapterDown(chapter) {
    const sortedChapters = [...this.chapters].sort((a, b) => a.number - b.number);
    const currentIndex = sortedChapters.findIndex((c) => c.id === chapter.id);
    if (currentIndex < 0 || currentIndex >= sortedChapters.length - 1)
      return;
    const nextChapter = sortedChapters[currentIndex + 1];
    const tempNumber = chapter.number;
    try {
      await this.plugin.apiClient.updateChapter(chapter.id, { number: nextChapter.number });
      await this.plugin.apiClient.updateChapter(nextChapter.id, { number: tempNumber });
      await this.loadHierarchy();
      this.renderTabContent();
<<<<<<< HEAD
      new import_obsidian17.Notice("Chapter moved down");
    } catch (err) {
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
      new import_obsidian16.Notice("Chapter moved down");
    } catch (err) {
      new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  async moveSceneUp(scene) {
    const siblingScenes = this.scenes.filter((s) => s.chapter_id === scene.chapter_id).sort((a, b) => a.order_num - b.order_num);
    const currentIndex = siblingScenes.findIndex((s) => s.id === scene.id);
    if (currentIndex <= 0)
      return;
    const previousScene = siblingScenes[currentIndex - 1];
    const tempOrderNum = scene.order_num;
    try {
      await this.plugin.apiClient.updateScene(scene.id, { order_num: previousScene.order_num });
      await this.plugin.apiClient.updateScene(previousScene.id, { order_num: tempOrderNum });
      await this.loadHierarchy();
      this.renderTabContent();
<<<<<<< HEAD
      new import_obsidian17.Notice("Scene moved up");
    } catch (err) {
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
      new import_obsidian16.Notice("Scene moved up");
    } catch (err) {
      new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  async moveSceneDown(scene) {
    const siblingScenes = this.scenes.filter((s) => s.chapter_id === scene.chapter_id).sort((a, b) => a.order_num - b.order_num);
    const currentIndex = siblingScenes.findIndex((s) => s.id === scene.id);
    if (currentIndex < 0 || currentIndex >= siblingScenes.length - 1)
      return;
    const nextScene = siblingScenes[currentIndex + 1];
    const tempOrderNum = scene.order_num;
    try {
      await this.plugin.apiClient.updateScene(scene.id, { order_num: nextScene.order_num });
      await this.plugin.apiClient.updateScene(nextScene.id, { order_num: tempOrderNum });
      await this.loadHierarchy();
      this.renderTabContent();
<<<<<<< HEAD
      new import_obsidian17.Notice("Scene moved down");
    } catch (err) {
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
      new import_obsidian16.Notice("Scene moved down");
    } catch (err) {
      new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  async moveBeatUp(beat) {
    const siblingBeats = this.beats.filter((b) => b.scene_id === beat.scene_id).sort((a, b) => a.order_num - b.order_num);
    const currentIndex = siblingBeats.findIndex((b) => b.id === beat.id);
    if (currentIndex <= 0)
      return;
    const previousBeat = siblingBeats[currentIndex - 1];
    const tempOrderNum = beat.order_num;
    try {
      await this.plugin.apiClient.updateBeat(beat.id, { order_num: previousBeat.order_num });
      await this.plugin.apiClient.updateBeat(previousBeat.id, { order_num: tempOrderNum });
      await this.loadHierarchy();
      this.renderTabContent();
<<<<<<< HEAD
      new import_obsidian17.Notice("Beat moved up");
    } catch (err) {
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
      new import_obsidian16.Notice("Beat moved up");
    } catch (err) {
      new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  async moveBeatDown(beat) {
    const siblingBeats = this.beats.filter((b) => b.scene_id === beat.scene_id).sort((a, b) => a.order_num - b.order_num);
    const currentIndex = siblingBeats.findIndex((b) => b.id === beat.id);
    if (currentIndex < 0 || currentIndex >= siblingBeats.length - 1)
      return;
    const nextBeat = siblingBeats[currentIndex + 1];
    const tempOrderNum = beat.order_num;
    try {
      await this.plugin.apiClient.updateBeat(beat.id, { order_num: nextBeat.order_num });
      await this.plugin.apiClient.updateBeat(nextBeat.id, { order_num: tempOrderNum });
      await this.loadHierarchy();
      this.renderTabContent();
<<<<<<< HEAD
      new import_obsidian17.Notice("Beat moved down");
    } catch (err) {
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
      new import_obsidian16.Notice("Beat moved down");
    } catch (err) {
      new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  async showMoveSceneModal(scene) {
    if (!this.currentStory)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Move Scene");
    const content = modal.contentEl;
    content.createEl("p", { text: `Move scene "${scene.goal || `Scene ${scene.order_num}`}" to:` });
    const select = content.createEl("select", { cls: "story-engine-move-select" });
    const noChapterOption = select.createEl("option", { text: "No Chapter", value: "" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const option = select.createEl("option", {
        text: `Chapter ${chapter.number}: ${chapter.title}`,
        value: chapter.id
      });
      if (scene.chapter_id === chapter.id) {
        option.selected = true;
      }
    }
    if (!scene.chapter_id) {
      noChapterOption.selected = true;
    }
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const moveButton = buttonContainer.createEl("button", {
      text: "Move",
      cls: "mod-cta"
    });
    moveButton.onclick = async () => {
      const selectedChapterId = select.value || null;
      try {
        await this.plugin.apiClient.moveScene(scene.id, selectedChapterId);
        await this.loadHierarchy();
        this.renderTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Scene moved successfully");
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to move scene";
        new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
        new import_obsidian16.Notice("Scene moved successfully");
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to move scene";
        new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    cancelButton.onclick = () => modal.close();
    modal.open();
  }
  async showMoveBeatModal(beat) {
    if (!this.currentStory)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Move Beat");
    const content = modal.contentEl;
    content.createEl("p", { text: `Move beat "${beat.type}" to:` });
    const select = content.createEl("select", { cls: "story-engine-move-select" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const chapterScenes = this.scenes.filter((s) => s.chapter_id === chapter.id).sort((a, b) => a.order_num - b.order_num);
      if (chapterScenes.length > 0) {
        const optgroup = select.createEl("optgroup");
        optgroup.label = `Chapter ${chapter.number}: ${chapter.title}`;
        for (const scene of chapterScenes) {
          const option = optgroup.createEl("option", {
            text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`,
            value: scene.id
          });
          if (beat.scene_id === scene.id) {
            option.selected = true;
          }
        }
      }
    }
    const orphanScenes = this.scenes.filter((s) => !s.chapter_id);
    if (orphanScenes.length > 0) {
      const optgroup = select.createEl("optgroup");
      optgroup.label = "No Chapter";
      for (const scene of orphanScenes.sort((a, b) => a.order_num - b.order_num)) {
        const option = optgroup.createEl("option", {
          text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`,
          value: scene.id
        });
        if (beat.scene_id === scene.id) {
          option.selected = true;
        }
      }
    }
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const moveButton = buttonContainer.createEl("button", {
      text: "Move",
      cls: "mod-cta"
    });
    moveButton.onclick = async () => {
      const selectedSceneId = select.value;
      if (!selectedSceneId) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Please select a scene", 3e3);
=======
        new import_obsidian16.Notice("Please select a scene", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.moveBeat(beat.id, selectedSceneId);
        await this.loadHierarchy();
        this.renderTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Beat moved successfully");
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to move beat";
        new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
        new import_obsidian16.Notice("Beat moved successfully");
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to move beat";
        new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    cancelButton.onclick = () => modal.close();
    modal.open();
  }
  renderContentsTab(container) {
    container.empty();
    const contentsByChapter = /* @__PURE__ */ new Map();
    const contentsByScene = /* @__PURE__ */ new Map();
    const contentsByBeat = /* @__PURE__ */ new Map();
    const orphanContents = [];
    for (const block of this.contentBlocks) {
      const refs = this.contentBlockRefs.filter((r) => r.content_block_id === block.id);
      if (refs.length === 0) {
        orphanContents.push(block);
        continue;
      }
      for (const ref of refs) {
        if (ref.entity_type === "chapter") {
          if (!contentsByChapter.has(ref.entity_id)) {
            contentsByChapter.set(ref.entity_id, []);
          }
          contentsByChapter.get(ref.entity_id).push(block);
        } else if (ref.entity_type === "scene") {
          if (!contentsByScene.has(ref.entity_id)) {
            contentsByScene.set(ref.entity_id, []);
          }
          contentsByScene.get(ref.entity_id).push(block);
        } else if (ref.entity_type === "beat") {
          if (!contentsByBeat.has(ref.entity_id)) {
            contentsByBeat.set(ref.entity_id, []);
          }
          contentsByBeat.get(ref.entity_id).push(block);
        }
      }
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const chapterContents = contentsByChapter.get(chapter.id) || [];
      const chapterScenes = this.scenes.filter((s) => s.chapter_id === chapter.id).sort((a, b) => a.order_num - b.order_num);
      if (chapterContents.length > 0 || chapterScenes.length > 0 || chapterScenes.some((s) => {
        const sceneContents = contentsByScene.get(s.id) || [];
        const sceneBeats = this.beats.filter((b) => b.scene_id === s.id);
        const beatContents = sceneBeats.flatMap((b) => contentsByBeat.get(b.id) || []);
        return sceneContents.length > 0 || beatContents.length > 0;
      })) {
        const chapterGroup = list.createDiv({ cls: "story-engine-chapter-group" });
        const chapterHeader = chapterGroup.createDiv({ cls: "story-engine-chapter-group-header story-engine-hoverable-header" });
        chapterHeader.createEl("h2", {
          text: `Chapter ${chapter.number}: ${chapter.title}`
        });
        const chapterHeaderActions = chapterHeader.createDiv({ cls: "story-engine-hover-header-actions" });
        const textBtn = chapterHeaderActions.createEl("button", {
          cls: "story-engine-add-content-btn story-engine-add-text-btn",
          attr: { "aria-label": "Add text content" }
        });
        textBtn.innerHTML = '<span class="story-engine-icon">\u{1F4DD}</span>';
        textBtn.onclick = () => {
          this.createContentForEntity("chapter", chapter.id, chapter.id, "text");
        };
        const imageBtn = chapterHeaderActions.createEl("button", {
          cls: "story-engine-add-content-btn story-engine-add-image-btn",
          attr: { "aria-label": "Add image content" }
        });
        imageBtn.innerHTML = '<span class="story-engine-icon">\u{1F5BC}\uFE0F</span>';
        imageBtn.onclick = () => {
          this.createContentForEntity("chapter", chapter.id, chapter.id, "image");
        };
        const chapterContent = chapterGroup.createDiv({ cls: "story-engine-chapter-group-content" });
        const chapterContentsGroup = chapterContent.createDiv({ cls: "story-engine-group" });
        const chapterContentsHeader = chapterContentsGroup.createDiv({ cls: "story-engine-group-header" });
        chapterContentsHeader.createEl("h3", { text: "Chapter Contents" });
        const chapterContentsItems = chapterContentsGroup.createDiv({ cls: "story-engine-group-items" });
        if (chapterContents.length > 0) {
          for (const block of chapterContents) {
            this.renderContentItem(chapterContentsItems, block, "chapter", chapter.id);
          }
        } else {
          chapterContentsItems.createEl("p", { text: "No content in this chapter.", cls: "story-engine-empty-content" });
        }
        for (const scene of chapterScenes) {
          const sceneContents = contentsByScene.get(scene.id) || [];
          const sceneBeats = this.beats.filter((b) => b.scene_id === scene.id).sort((a, b) => a.order_num - b.order_num);
          const beatContents = sceneBeats.flatMap((b) => contentsByBeat.get(b.id) || []);
          const sceneGroup = chapterContent.createDiv({ cls: "story-engine-group" });
          const sceneHeader = sceneGroup.createDiv({ cls: "story-engine-group-header story-engine-hoverable-header" });
          sceneHeader.createEl("h3", {
            text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`
          });
          const sceneHeaderActions = sceneHeader.createDiv({ cls: "story-engine-hover-header-actions" });
          const chapterId = scene.chapter_id || (this.chapters.length > 0 ? this.chapters[0].id : "");
          if (chapterId) {
            const textBtn2 = sceneHeaderActions.createEl("button", {
              cls: "story-engine-add-content-btn story-engine-add-text-btn",
              attr: { "aria-label": "Add text content" }
            });
            textBtn2.innerHTML = '<span class="story-engine-icon">\u{1F4DD}</span>';
            textBtn2.onclick = () => {
              this.createContentForEntity("scene", scene.id, chapterId, "text");
            };
            const imageBtn2 = sceneHeaderActions.createEl("button", {
              cls: "story-engine-add-content-btn story-engine-add-image-btn",
              attr: { "aria-label": "Add image content" }
            });
            imageBtn2.innerHTML = '<span class="story-engine-icon">\u{1F5BC}\uFE0F</span>';
            imageBtn2.onclick = () => {
              this.createContentForEntity("scene", scene.id, chapterId, "image");
            };
          }
          const sceneItems = sceneGroup.createDiv({ cls: "story-engine-group-items" });
          if (sceneContents.length > 0) {
            for (const block of sceneContents) {
              this.renderContentItem(sceneItems, block, "scene", scene.id);
            }
          } else {
            sceneItems.createEl("p", { text: "No content in this scene.", cls: "story-engine-empty-content" });
          }
          for (const beat of sceneBeats) {
            const beatContents2 = contentsByBeat.get(beat.id) || [];
            const beatSubGroup = sceneItems.createDiv({ cls: "story-engine-beat-subgroup" });
            const beatSubGroupTitle = beatSubGroup.createDiv({ cls: "story-engine-beat-subgroup-title-container story-engine-hoverable-header" });
            beatSubGroupTitle.createEl("h4", {
              text: `Beat ${beat.order_num}: ${beat.type}`,
              cls: "story-engine-beat-subgroup-title"
            });
            const beatHeaderActions = beatSubGroupTitle.createDiv({ cls: "story-engine-hover-header-actions" });
            const beatChapterId = scene.chapter_id || (this.chapters.length > 0 ? this.chapters[0].id : "");
            if (beatChapterId) {
              const textBtn2 = beatHeaderActions.createEl("button", {
                cls: "story-engine-add-content-btn story-engine-add-text-btn",
                attr: { "aria-label": "Add text content" }
              });
              textBtn2.innerHTML = '<span class="story-engine-icon">\u{1F4DD}</span>';
              textBtn2.onclick = () => {
                this.createContentForEntity("beat", beat.id, beatChapterId, "text");
              };
              const imageBtn2 = beatHeaderActions.createEl("button", {
                cls: "story-engine-add-content-btn story-engine-add-image-btn",
                attr: { "aria-label": "Add image content" }
              });
              imageBtn2.innerHTML = '<span class="story-engine-icon">\u{1F5BC}\uFE0F</span>';
              imageBtn2.onclick = () => {
                this.createContentForEntity("beat", beat.id, beatChapterId, "image");
              };
            }
            if (beatContents2.length > 0) {
              for (const block of beatContents2) {
                this.renderContentItem(beatSubGroup, block, "beat", beat.id);
              }
            } else {
              beatSubGroup.createEl("p", { text: "No content in this beat.", cls: "story-engine-empty-beat-content" });
            }
          }
        }
      }
    }
    if (this.chapters.length === 0 || orphanContents.length > 0 || this.scenes.some((s) => !s.chapter_id)) {
      const orphanGroup = list.createDiv({ cls: "story-engine-chapter-group" });
      const orphanHeader = orphanGroup.createDiv({ cls: "story-engine-chapter-group-header" });
      orphanHeader.createEl("h2", { text: "Without Chapter" });
      const orphanContent = orphanGroup.createDiv({ cls: "story-engine-chapter-group-content" });
      const orphanScenes = this.scenes.filter((s) => !s.chapter_id).sort((a, b) => a.order_num - b.order_num);
      for (const scene of orphanScenes) {
        const sceneContents = contentsByScene.get(scene.id) || [];
        const sceneBeats = this.beats.filter((b) => b.scene_id === scene.id).sort((a, b) => a.order_num - b.order_num);
        const beatContents = sceneBeats.flatMap((b) => contentsByBeat.get(b.id) || []);
        const sceneGroup = orphanContent.createDiv({ cls: "story-engine-group" });
        const sceneHeader = sceneGroup.createDiv({ cls: "story-engine-group-header story-engine-hoverable-header" });
        sceneHeader.createEl("h3", {
          text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`
        });
        const sceneHeaderActions = sceneHeader.createDiv({ cls: "story-engine-header-actions" });
        const chapterId = this.chapters.length > 0 ? this.chapters[0].id : "";
        if (chapterId) {
          sceneHeaderActions.createEl("button", {
            text: "+ Content",
            cls: "story-engine-add-content-btn"
          }).onclick = () => {
            this.createContentForEntity("scene", scene.id, chapterId);
          };
        }
        const sceneItems = sceneGroup.createDiv({ cls: "story-engine-group-items" });
        if (sceneContents.length > 0) {
          for (const block of sceneContents) {
            this.renderContentItem(sceneItems, block, "scene", scene.id);
          }
        } else {
          sceneItems.createEl("p", { text: "No content in this scene." });
        }
        for (const beat of sceneBeats) {
          const beatContents2 = contentsByBeat.get(beat.id) || [];
          const beatSubGroup = sceneItems.createDiv({ cls: "story-engine-beat-subgroup" });
          const beatSubGroupTitle = beatSubGroup.createDiv({ cls: "story-engine-beat-subgroup-title-container story-engine-hoverable-header" });
          beatSubGroupTitle.createEl("h4", {
            text: `Beat ${beat.order_num}: ${beat.type}`,
            cls: "story-engine-beat-subgroup-title"
          });
          const beatHeaderActions = beatSubGroupTitle.createDiv({ cls: "story-engine-hover-header-actions" });
          const beatChapterId = this.chapters.length > 0 ? this.chapters[0].id : "";
          if (beatChapterId) {
            beatHeaderActions.createEl("button", {
              text: "+ Content",
              cls: "story-engine-add-content-btn"
            }).onclick = () => {
              this.createContentForEntity("beat", beat.id, beatChapterId);
            };
          }
          if (beatContents2.length > 0) {
            for (const block of beatContents2) {
              this.renderContentItem(beatSubGroup, block, "beat", beat.id);
            }
          } else {
            beatSubGroup.createEl("p", { text: "No content in this beat.", cls: "story-engine-empty-beat-content" });
          }
        }
      }
      if (orphanContents.length > 0) {
        const orphanContentsGroup = orphanContent.createDiv({ cls: "story-engine-group" });
        const orphanContentsHeader = orphanContentsGroup.createDiv({ cls: "story-engine-group-header" });
        orphanContentsHeader.createEl("h3", { text: "Without Reference" });
        const orphanContentsItems = orphanContentsGroup.createDiv({ cls: "story-engine-group-items" });
        for (const block of orphanContents) {
          this.renderContentItem(orphanContentsItems, block, null, null);
        }
      }
    }
  }
  async loadStoryCharacters() {
    if (!this.currentStory || !this.currentStory.world_id) {
      this.storyCharacters = [];
      return;
    }
    try {
      this.storyCharacters = await this.plugin.apiClient.getCharacters(this.currentStory.world_id);
    } catch (err) {
      console.error("Error loading story characters:", err);
      this.storyCharacters = [];
<<<<<<< HEAD
      new import_obsidian17.Notice(`Error loading characters: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
      new import_obsidian16.Notice(`Error loading characters: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  renderStoryCharactersTab(container) {
    var _a;
    container.empty();
    if (!((_a = this.currentStory) == null ? void 0 : _a.world_id)) {
      const noWorldMsg = container.createDiv({ cls: "story-engine-empty-state" });
      noWorldMsg.createEl("p", { text: "This story is not linked to a world." });
      noWorldMsg.createEl("p", { text: "Link this story to a world to see its characters.", cls: "story-engine-hint" });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    if (this.storyCharacters.length === 0) {
      list.createEl("p", { text: "No characters found in this story's world." });
    } else {
      for (const character of this.storyCharacters.sort((a, b) => a.name.localeCompare(b.name))) {
        const item = list.createDiv({ cls: "story-engine-item" });
        const titleDiv = item.createDiv({ cls: "story-engine-title", text: character.name });
        titleDiv.style.cursor = "pointer";
        titleDiv.onclick = () => {
          this.showCharacterDetails(character);
        };
        const meta = item.createDiv({ cls: "story-engine-meta" });
        if (character.description) {
          meta.createEl("span", {
            text: character.description.substring(0, 80) + (character.description.length > 80 ? "..." : "")
          });
        }
        const actions = item.createDiv({ cls: "story-engine-item-actions" });
        const viewBtn = actions.createEl("button", { text: "View" });
        viewBtn.onclick = () => {
          this.showCharacterDetails(character);
        };
      }
    }
    const footer = container.createDiv({ cls: "story-engine-list-footer" });
    const createButton = footer.createEl("button", {
      text: "Create Character",
      cls: "mod-cta"
    });
    createButton.onclick = () => {
      this.showCreateCharacterModalForStory();
    };
  }
  showCreateCharacterModalForStory() {
    var _a;
    if (!((_a = this.currentStory) == null ? void 0 : _a.world_id)) {
<<<<<<< HEAD
      new import_obsidian17.Notice("This story is not linked to a world");
      return;
    }
    const modal = new import_obsidian17.Modal(this.app);
=======
      new import_obsidian16.Notice("This story is not linked to a world");
      return;
    }
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Character");
    const content = modal.contentEl;
    let name = "";
    let description = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createCharacter(this.currentStory.world_id, {
          name: name.trim(),
          description: description.trim()
        });
        await this.loadStoryCharacters();
        this.renderTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Character created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Character created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  renderContentItem(container, contentBlock, entityType, entityId) {
    var _a, _b;
    const item = container.createDiv({ cls: "story-engine-item story-engine-content-item" });
    const itemContent = item.createDiv({ cls: "story-engine-content-item-content" });
    const iconContainer = itemContent.createDiv({ cls: "story-engine-content-icon" });
    const iconMap = {
      text: "file-text",
      image: "image",
      video: "video",
      audio: "music",
      embed: "code",
      link: "external-link"
    };
    const iconName = iconMap[contentBlock.type] || "file";
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(iconContainer, iconName);
=======
    (0, import_obsidian16.setIcon)(iconContainer, iconName);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    const preview = itemContent.createDiv({ cls: "story-engine-content-preview" });
    if (contentBlock.type === "text") {
      const textPreview = contentBlock.content || "";
      const truncated = textPreview.length > 100 ? textPreview.substring(0, 100) + "..." : textPreview;
      preview.createEl("span", { text: truncated });
    } else if (contentBlock.type === "image") {
      const imgContainer = preview.createDiv({ cls: "story-engine-image-container" });
      const img = imgContainer.createEl("img", {
        attr: { src: contentBlock.content || "", alt: ((_a = contentBlock.metadata) == null ? void 0 : _a.alt_text) || "" },
        cls: "story-engine-content-thumbnail"
      });
      img.style.maxWidth = "100px";
      img.style.maxHeight = "60px";
      img.style.objectFit = "cover";
      img.style.borderRadius = "4px";
      if ((_b = contentBlock.metadata) == null ? void 0 : _b.attribution) {
        const attribution = imgContainer.createDiv({ cls: "story-engine-unsplash-attribution" });
        attribution.createEl("span", {
          text: contentBlock.metadata.attribution,
          cls: "story-engine-attribution-text"
        });
      }
    } else {
      preview.createEl("span", { text: contentBlock.content || "" });
    }
    const actions = item.createDiv({ cls: "story-engine-item-actions" });
    actions.createEl("button", { text: "Edit" }).onclick = () => {
      new ContentBlockModal(this.app, async (updatedContentBlock) => {
        try {
          await this.plugin.apiClient.updateContentBlock(contentBlock.id, updatedContentBlock);
          await this.loadHierarchy();
          this.renderTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Content block updated successfully");
=======
          new import_obsidian16.Notice("Content block updated successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        } catch (err) {
          throw err;
        }
      }, contentBlock, this.plugin).open();
    };
    actions.createEl("button", { text: "Move" }).onclick = async () => {
      await this.showMoveContentModal(contentBlock, entityType, entityId, "move");
    };
    actions.createEl("button", { text: "Link" }).onclick = async () => {
      await this.showMoveContentModal(contentBlock, entityType, entityId, "link");
    };
    actions.createEl("button", { text: "Delete" }).onclick = async () => {
      if (confirm("Delete this content block?")) {
        try {
          await this.plugin.apiClient.deleteContentBlock(contentBlock.id);
          await this.loadHierarchy();
          this.renderTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Content block deleted");
        } catch (err) {
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
          new import_obsidian16.Notice("Content block deleted");
        } catch (err) {
          new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        }
      }
    };
  }
  async showMoveContentModal(contentBlock, currentEntityType, currentEntityId, mode) {
    if (!this.currentStory)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText(mode === "move" ? "Move Content Block" : "Link Content Block");
    const content = modal.contentEl;
    content.createEl("p", {
      text: mode === "move" ? `Move content block to:` : `Link content block to (will appear in both places):`
    });
    const select = content.createEl("select", { cls: "story-engine-move-select" });
    const noRefOption = select.createEl("option", { text: "No Reference", value: "" });
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const option = select.createEl("option", {
        text: `Chapter ${chapter.number}: ${chapter.title}`,
        value: `chapter:${chapter.id}`
      });
      if (currentEntityType === "chapter" && currentEntityId === chapter.id) {
        option.selected = true;
      }
    }
    for (const chapter of this.chapters.sort((a, b) => a.number - b.number)) {
      const chapterScenes = this.scenes.filter((s) => s.chapter_id === chapter.id).sort((a, b) => a.order_num - b.order_num);
      if (chapterScenes.length > 0) {
        const optgroup = select.createEl("optgroup");
        optgroup.label = `Chapter ${chapter.number}: ${chapter.title} - Scenes`;
        for (const scene of chapterScenes) {
          const option = optgroup.createEl("option", {
            text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`,
            value: `scene:${scene.id}`
          });
          if (currentEntityType === "scene" && currentEntityId === scene.id) {
            option.selected = true;
          }
        }
      }
    }
    const orphanScenes = this.scenes.filter((s) => !s.chapter_id);
    if (orphanScenes.length > 0) {
      const optgroup = select.createEl("optgroup");
      optgroup.label = "No Chapter - Scenes";
      for (const scene of orphanScenes.sort((a, b) => a.order_num - b.order_num)) {
        const option = optgroup.createEl("option", {
          text: `Scene ${scene.order_num}: ${scene.goal || "Untitled"}`,
          value: `scene:${scene.id}`
        });
        if (currentEntityType === "scene" && currentEntityId === scene.id) {
          option.selected = true;
        }
      }
    }
    for (const scene of this.scenes.sort((a, b) => a.order_num - b.order_num)) {
      const sceneBeats = this.beats.filter((b) => b.scene_id === scene.id).sort((a, b) => a.order_num - b.order_num);
      if (sceneBeats.length > 0) {
        const chapter = this.chapters.find((c) => c.id === scene.chapter_id);
        const chapterLabel = chapter ? `Chapter ${chapter.number}` : "No Chapter";
        const optgroup = select.createEl("optgroup");
        optgroup.label = `${chapterLabel} > Scene ${scene.order_num} - Beats`;
        for (const beat of sceneBeats) {
          const option = optgroup.createEl("option", {
            text: `Beat ${beat.order_num}: ${beat.type}`,
            value: `beat:${beat.id}`
          });
          if (currentEntityType === "beat" && currentEntityId === beat.id) {
            option.selected = true;
          }
        }
      }
    }
    if (!currentEntityType) {
      noRefOption.selected = true;
    }
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const actionButton = buttonContainer.createEl("button", {
      text: mode === "move" ? "Move" : "Link",
      cls: "mod-cta"
    });
    actionButton.onclick = async () => {
      const selectedValue = select.value;
      try {
        if (mode === "move" && currentEntityType && currentEntityId) {
          const currentRef = this.contentBlockRefs.find(
            (r) => r.content_block_id === contentBlock.id && r.entity_type === currentEntityType && r.entity_id === currentEntityId
          );
          if (currentRef) {
            await this.plugin.apiClient.deleteContentAnchor(currentRef.id);
          }
        }
        if (selectedValue) {
          const [entityType, entityId] = selectedValue.split(":");
          await this.plugin.apiClient.createContentAnchor(contentBlock.id, entityType, entityId);
        }
        await this.loadHierarchy();
        this.renderTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice(mode === "move" ? "Content block moved successfully" : "Content block linked successfully");
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : `Failed to ${mode} content block`;
        new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
        new import_obsidian16.Notice(mode === "move" ? "Content block moved successfully" : "Content block linked successfully");
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : `Failed to ${mode} content block`;
        new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    cancelButton.onclick = () => modal.close();
    modal.open();
  }
  async createContentForEntity(entityType, entityId, chapterId, contentType = "text") {
    if (!this.currentStory)
      return;
    if (!chapterId) {
      if (this.chapters.length === 0) {
<<<<<<< HEAD
        new import_obsidian17.Notice("No chapter available. Please create a chapter first.", 5e3);
=======
        new import_obsidian16.Notice("No chapter available. Please create a chapter first.", 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      chapterId = this.chapters[0].id;
    }
    const chapterBlocks = this.contentBlocks.filter((cb) => {
      const refs = this.contentBlockRefs.filter((r) => r.content_block_id === cb.id && r.entity_type === "chapter" && r.entity_id === chapterId);
      return refs.length > 0 || cb.chapter_id === chapterId;
    });
    const maxOrderNum = chapterBlocks.length > 0 ? Math.max(...chapterBlocks.map((cb) => cb.order_num || 0)) : 0;
    const nextOrderNum = maxOrderNum + 1;
    const initialContentBlock = {
      type: contentType,
      kind: "final",
      content: "",
      metadata: {}
    };
    new ContentBlockModal(this.app, async (contentBlock) => {
      try {
        contentBlock.order_num = nextOrderNum;
        const created = await this.plugin.apiClient.createContentBlock(chapterId, contentBlock);
        await this.plugin.apiClient.createContentAnchor(created.id, entityType, entityId);
        await this.loadHierarchy();
        this.renderTabContent();
<<<<<<< HEAD
        new import_obsidian17.Notice("Content block created successfully");
=======
        new import_obsidian16.Notice("Content block created successfully");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      } catch (err) {
        throw err;
      }
    }, initialContentBlock, this.plugin).open();
  }
  // ==================== World View Methods ====================
  async showWorldDetails(world) {
    this.currentWorld = world;
    this.viewMode = "world-details";
    this.worldTab = "characters";
    await this.loadWorldData();
    this.renderWorldDetails();
  }
  async loadWorldData() {
    if (!this.currentWorld)
      return;
    this.loadingWorldData = true;
    try {
      this.characters = await this.plugin.apiClient.getCharacters(this.currentWorld.id);
      this.locations = await this.plugin.apiClient.getLocations(this.currentWorld.id);
      this.artifacts = await this.plugin.apiClient.getArtifacts(this.currentWorld.id);
      this.events = await this.plugin.apiClient.getEvents(this.currentWorld.id);
      try {
        this.traits = await this.plugin.apiClient.getTraits();
      } catch (err) {
        console.warn("Traits not available:", err);
        this.traits = [];
      }
      try {
        this.archetypes = await this.plugin.apiClient.getArchetypes();
      } catch (err) {
        console.warn("Archetypes not available:", err);
        this.archetypes = [];
      }
      try {
        this.factions = await this.plugin.apiClient.getFactions(this.currentWorld.id);
      } catch (err) {
        console.warn("Factions not available:", err);
        this.factions = [];
      }
      try {
        this.lores = await this.plugin.apiClient.getLores(this.currentWorld.id);
      } catch (err) {
        console.warn("Lores not available:", err);
        this.lores = [];
      }
      try {
        this.currentWorld = await this.plugin.apiClient.getWorld(this.currentWorld.id);
      } catch (err) {
        console.warn("Failed to reload world:", err);
      }
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to load world data";
<<<<<<< HEAD
      new import_obsidian17.Notice(`Error: ${errorMessage}`, 5e3);
=======
      new import_obsidian16.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    } finally {
      this.loadingWorldData = false;
    }
  }
  renderWorldDetails() {
    if (!this.contentEl || !this.currentWorld)
      return;
    this.renderWorldDetailsHeader();
    this.contentEl.empty();
    this.renderWorldTabs();
    this.renderWorldTabContent();
  }
  renderWorldDetailsHeader() {
    if (!this.headerEl || !this.currentWorld)
      return;
    this.headerEl.empty();
    const headerContainer = this.headerEl.createDiv({ cls: "story-engine-world-details-header" });
    const headerContent = headerContainer.createDiv({ cls: "story-engine-world-header-content" });
    const topRow = headerContent.createDiv({ cls: "story-engine-world-header-top" });
    const backButton = topRow.createEl("button", {
      text: "\u2190 Back",
      cls: "story-engine-back-btn"
    });
    backButton.onclick = () => {
      this.currentWorld = null;
      this.viewMode = "list";
      this.listTab = "worlds";
      this.renderListHeader();
      this.renderListContent();
    };
<<<<<<< HEAD
    const titleContainer = headerLeft.createDiv({ cls: "story-engine-title-container" });
    const titleRow = titleContainer.createDiv({ cls: "story-engine-title-row" });
    titleRow.createEl("h2", {
      text: this.currentWorld.name,
      cls: "story-engine-title-header"
    });
    if (this.currentWorld.genre) {
      const genrePill = titleRow.createSpan({
        cls: "story-engine-status-pill story-engine-status-draft"
      });
      genrePill.textContent = this.currentWorld.genre;
    }
    const uuidRow = titleContainer.createDiv({ cls: "story-engine-uuid-row" });
    const uuidSpan = uuidRow.createSpan({ cls: "story-engine-uuid" });
    uuidSpan.textContent = this.currentWorld.id;
    const copyUuidButton = uuidRow.createEl("button", {
      cls: "story-engine-copy-uuid-btn",
      attr: { "aria-label": "Copy UUID" }
    });
    (0, import_obsidian17.setIcon)(copyUuidButton, "copy");
    copyUuidButton.onclick = () => {
      if (!this.currentWorld)
        return;
      navigator.clipboard.writeText(this.currentWorld.id).then(() => {
        new import_obsidian17.Notice("UUID copied to clipboard");
      }).catch(() => {
        new import_obsidian17.Notice("Failed to copy UUID", 3e3);
      });
    };
    if (this.currentWorld.description) {
      const descRow = titleContainer.createDiv({ cls: "story-engine-world-desc" });
      descRow.textContent = this.currentWorld.description;
    }
    const headerActions = this.headerEl.createDiv({ cls: "story-engine-header-actions" });
=======
    const headerActions = topRow.createDiv({ cls: "story-engine-header-actions" });
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    const contextButton = headerActions.createEl("button", {
      cls: "story-engine-context-btn",
      attr: { "aria-label": "World Actions" }
    });
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(contextButton, "more-vertical");
=======
    (0, import_obsidian16.setIcon)(contextButton, "more-vertical");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    const dropdownMenu = headerActions.createDiv({ cls: "story-engine-dropdown-menu" });
    dropdownMenu.style.display = "none";
    const editOption = dropdownMenu.createEl("button", {
      cls: "story-engine-dropdown-item"
    });
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(editOption, "pencil");
=======
    (0, import_obsidian16.setIcon)(editOption, "pencil");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    editOption.createSpan({ text: "Edit World" });
    editOption.onclick = () => {
      dropdownMenu.style.display = "none";
      this.showEditWorldModal();
    };
    contextButton.onclick = (e) => {
      e.stopPropagation();
      const isVisible = dropdownMenu.style.display !== "none";
      dropdownMenu.style.display = isVisible ? "none" : "block";
    };
    document.addEventListener("click", () => {
      dropdownMenu.style.display = "none";
    }, { once: true });
    const titleSection = headerContent.createDiv({ cls: "story-engine-world-title-section" });
    titleSection.createEl("h1", {
      text: this.currentWorld.name,
      cls: "story-engine-world-name"
    });
    if (this.currentWorld.description) {
      titleSection.createEl("p", {
        text: this.currentWorld.description,
        cls: "story-engine-world-desc"
      });
    }
    const metaRow = titleSection.createDiv({ cls: "story-engine-world-meta-row" });
    if (this.currentWorld.genre) {
      const genreBadge = metaRow.createSpan({
        cls: "story-engine-badge story-engine-genre-badge"
      });
      (0, import_obsidian16.setIcon)(genreBadge, "tag");
      genreBadge.createSpan({ text: this.currentWorld.genre });
    }
    const uuidContainer = metaRow.createDiv({ cls: "story-engine-world-uuid" });
    const uuidText = uuidContainer.createSpan({ text: this.currentWorld.id.substring(0, 8) + "..." });
    const copyUuidButton = uuidContainer.createEl("button", {
      cls: "story-engine-copy-uuid-btn",
      attr: { "aria-label": "Copy UUID" }
    });
    (0, import_obsidian16.setIcon)(copyUuidButton, "copy");
    copyUuidButton.onclick = (e) => {
      e.stopPropagation();
      if (!this.currentWorld)
        return;
      navigator.clipboard.writeText(this.currentWorld.id).then(() => {
        new import_obsidian16.Notice("UUID copied to clipboard");
      }).catch(() => {
        new import_obsidian16.Notice("Failed to copy UUID", 3e3);
      });
    };
  }
  renderWorldTabs() {
    if (!this.contentEl)
      return;
    const existingTabs = this.contentEl.querySelector(".story-engine-world-tabs");
    if (existingTabs) {
      existingTabs.remove();
    }
    const sidebarPosition = this.plugin.settings.sidebarPosition || "left";
    const sidebarContainer = this.contentEl.createDiv({
      cls: `story-engine-world-sidebar story-engine-world-sidebar-${sidebarPosition}`
    });
    const allTabs = [
      { key: "characters", label: "Characters", icon: "user" },
      { key: "locations", label: "Locations", icon: "map-pin" },
      { key: "factions", label: "Factions", icon: "users" },
      { key: "artifacts", label: "Artifacts", icon: "gem" },
      { key: "traits", label: "Traits", icon: "star" },
      { key: "archetypes", label: "Archetypes", icon: "shapes" },
      { key: "events", label: "Events", icon: "calendar" },
      { key: "lore", label: "Lore", icon: "book-open" }
    ];
    for (const tab of allTabs) {
      const tabButton = sidebarContainer.createEl("button", {
        cls: `story-engine-sidebar-tab ${this.worldTab === tab.key ? "is-active" : ""}`,
        attr: {
          "aria-label": tab.label
        }
      });
      (0, import_obsidian16.setIcon)(tabButton, tab.icon);
      const tooltip = tabButton.createDiv({ cls: "story-engine-sidebar-tooltip" });
      tooltip.setText(tab.label);
      tabButton.onclick = () => {
        this.worldTab = tab.key;
        this.renderWorldTabs();
        this.renderWorldTabContent();
      };
    }
  }
  renderWorldTabContent() {
    if (!this.contentEl)
      return;
    const existingContent = this.contentEl.querySelector(".story-engine-world-tab-content");
    if (existingContent) {
      existingContent.remove();
    }
    const sidebarPosition = this.plugin.settings.sidebarPosition || "left";
    const contentContainer = this.contentEl.createDiv({
      cls: `story-engine-world-tab-content story-engine-content-sidebar-${sidebarPosition}`
    });
    if (this.loadingWorldData) {
      for (let i = 0; i < 3; i++) {
        contentContainer.createDiv({ cls: "story-engine-skeleton story-engine-skeleton-card" });
      }
      return;
    }
    switch (this.worldTab) {
      case "characters":
        this.renderCharactersTab(contentContainer);
        break;
      case "traits":
        this.renderTraitsTab(contentContainer);
        break;
      case "archetypes":
        this.renderArchetypesTab(contentContainer);
        break;
      case "events":
        this.renderEventsTab(contentContainer);
        break;
      case "lore":
        this.renderLoreTab(contentContainer);
        break;
      case "locations":
        this.renderLocationsTab(contentContainer);
        break;
      case "factions":
        this.renderFactionsTab(contentContainer);
        break;
      case "artifacts":
        this.renderArtifactsTab(contentContainer);
        break;
    }
    this.renderWorldActionsBar(contentContainer);
  }
  renderWorldActionsBar(container) {
    const actionsBar = container.createDiv({ cls: "story-engine-actions-bar" });
    let createButtonText = "Create Character";
    let createButtonAction = () => {
      this.showCreateCharacterModal();
    };
    switch (this.worldTab) {
      case "traits":
        createButtonText = "Create Trait";
        createButtonAction = () => this.showCreateTraitModal();
        break;
      case "archetypes":
        createButtonText = "Create Archetype";
        createButtonAction = () => this.showCreateArchetypeModal();
        break;
      case "events":
        createButtonText = "Create Event";
        createButtonAction = () => this.showCreateEventModal();
        break;
      case "lore":
        createButtonText = "Create Lore";
        createButtonAction = () => this.showCreateLoreModal();
        break;
      case "locations":
        createButtonText = "Create Location";
        createButtonAction = () => this.showCreateLocationModal();
        break;
      case "factions":
        createButtonText = "Create Faction";
        createButtonAction = () => this.showCreateFactionModal();
        break;
      case "artifacts":
        createButtonText = "Create Artifact";
        createButtonAction = () => this.showCreateArtifactModal();
        break;
    }
    const createButton = actionsBar.createEl("button", {
      text: createButtonText,
      cls: "mod-cta story-engine-create-btn"
    });
    createButton.onclick = createButtonAction;
  }
  renderCharactersTab(container) {
    if (this.characters.length === 0) {
      const emptyState = container.createDiv({ cls: "story-engine-empty-state" });
      const emptyIcon = emptyState.createDiv({ cls: "story-engine-empty-icon" });
      (0, import_obsidian16.setIcon)(emptyIcon, "users");
      emptyState.createEl("h3", {
        text: "No Characters Yet",
        cls: "story-engine-empty-title"
      });
      emptyState.createEl("p", {
        text: "Start building your world by creating your first character.",
        cls: "story-engine-empty-description"
      });
      const createBtn = emptyState.createEl("button", {
        text: "Create Character",
        cls: "story-engine-empty-action"
      });
      createBtn.onclick = () => this.showCreateCharacterModal();
      return;
    }
    for (const character of this.characters) {
      const card = container.createDiv({ cls: "story-engine-entity-card" });
      card.style.cursor = "pointer";
      card.onclick = () => {
        this.showCharacterDetails(character);
      };
      const cardHeader = card.createDiv({ cls: "story-engine-entity-card-header" });
      const cardTitle = cardHeader.createDiv({ cls: "story-engine-entity-card-title" });
      const nameEl = cardTitle.createEl("h3", {
        text: character.name,
        cls: "story-engine-entity-name"
      });
      if (character.archetype_id) {
        const archetype = this.archetypes.find((a) => a.id === character.archetype_id);
        if (archetype) {
          cardTitle.createEl("p", {
            text: archetype.name,
            cls: "story-engine-entity-subtitle"
          });
        }
      }
<<<<<<< HEAD
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      const relBtn = actions.createEl("button");
      (0, import_obsidian17.setIcon)(relBtn, "users");
      relBtn.title = "Add Relationship";
      relBtn.onclick = () => this.showAddCharacterRelationshipModal(character);
      actions.createEl("button", { text: "Edit" }).onclick = () => {
=======
      const cardActions = cardHeader.createDiv({ cls: "story-engine-entity-card-actions" });
      const relationshipBtn = cardActions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Add Relationship" }
      });
      (0, import_obsidian16.setIcon)(relationshipBtn, "users");
      relationshipBtn.onclick = (e) => {
        e.stopPropagation();
        this.showAddCharacterRelationshipModal(character);
      };
      const editBtn = cardActions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Edit" }
      });
      (0, import_obsidian16.setIcon)(editBtn, "pencil");
      editBtn.onclick = (e) => {
        e.stopPropagation();
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        this.showEditCharacterModal(character);
      };
      const deleteBtn = cardActions.createEl("button", {
        cls: "story-engine-entity-action-btn",
        attr: { "aria-label": "Delete" }
      });
      (0, import_obsidian16.setIcon)(deleteBtn, "trash");
      deleteBtn.onclick = async (e) => {
        e.stopPropagation();
        if (confirm(`Delete character "${character.name}"?`)) {
          try {
            await this.plugin.apiClient.deleteCharacter(character.id);
            await this.loadWorldData();
            this.renderWorldTabContent();
<<<<<<< HEAD
            new import_obsidian17.Notice("Character deleted");
          } catch (err) {
            new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
            new import_obsidian16.Notice("Character deleted");
          } catch (err) {
            new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          }
        }
      };
      const cardContent = card.createDiv({ cls: "story-engine-entity-card-content" });
      if (character.description) {
        cardContent.createEl("p", {
          text: character.description,
          cls: "story-engine-entity-description"
        });
      }
    }
  }
  renderLocationsTab(container) {
    if (this.locations.length === 0) {
      container.createEl("p", { text: "No locations found. Create your first location!" });
      return;
    }
    const rootLocations = this.locations.filter((l) => !l.parent_id);
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const location of rootLocations.sort((a, b) => a.name.localeCompare(b.name))) {
      this.renderLocationItem(list, location, 0);
    }
  }
  renderLocationItem(container, location, level) {
    const item = container.createDiv({ cls: "story-engine-item" });
    item.style.marginLeft = `${level * 1}rem`;
    const titleRow = item.createDiv({ cls: "story-engine-title" });
    titleRow.textContent = location.name;
    if (location.type) {
      const typeBadge = titleRow.createSpan({ cls: "story-engine-badge" });
      typeBadge.textContent = location.type;
    }
    const meta = item.createDiv({ cls: "story-engine-meta" });
    if (location.description) {
      meta.createEl("span", { text: location.description.substring(0, 50) + (location.description.length > 50 ? "..." : "") });
    }
    const actions = item.createDiv({ cls: "story-engine-item-actions" });
    actions.createEl("button", { text: "Edit" }).onclick = () => {
      this.showEditLocationModal(location);
    };
    actions.createEl("button", { text: "Delete" }).onclick = async () => {
      if (confirm(`Delete location "${location.name}"?`)) {
        try {
          await this.plugin.apiClient.deleteLocation(location.id);
          await this.loadWorldData();
          this.renderWorldTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Location deleted");
        } catch (err) {
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
          new import_obsidian16.Notice("Location deleted");
        } catch (err) {
          new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        }
      }
    };
    const children2 = this.locations.filter((l) => l.parent_id === location.id);
    for (const child of children2.sort((a, b) => a.name.localeCompare(b.name))) {
      this.renderLocationItem(container, child, level + 1);
    }
  }
  renderArtifactsTab(container) {
    if (this.artifacts.length === 0) {
      container.createEl("p", { text: "No artifacts found. Create your first artifact!" });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const artifact of this.artifacts) {
      const item = list.createDiv({ cls: "story-engine-item" });
      const titleRow = item.createDiv({ cls: "story-engine-title" });
      titleRow.textContent = artifact.name;
      if (artifact.rarity) {
        const rarityBadge = titleRow.createSpan({ cls: `story-engine-badge story-engine-rarity-${artifact.rarity.toLowerCase()}` });
        rarityBadge.textContent = artifact.rarity;
      }
      const meta = item.createDiv({ cls: "story-engine-meta" });
      if (artifact.description) {
        meta.createEl("span", { text: artifact.description.substring(0, 50) + (artifact.description.length > 50 ? "..." : "") });
      }
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      actions.createEl("button", { text: "Edit" }).onclick = () => {
        this.showEditArtifactModal(artifact);
      };
      actions.createEl("button", { text: "Delete" }).onclick = async () => {
        if (confirm(`Delete artifact "${artifact.name}"?`)) {
          try {
            await this.plugin.apiClient.deleteArtifact(artifact.id);
            await this.loadWorldData();
            this.renderWorldTabContent();
<<<<<<< HEAD
            new import_obsidian17.Notice("Artifact deleted");
          } catch (err) {
            new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
            new import_obsidian16.Notice("Artifact deleted");
          } catch (err) {
            new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          }
        }
      };
    }
  }
  renderEventsTab(container) {
    var _a;
    const timeConfigSection = container.createDiv({ cls: "story-engine-time-config-section" });
    if ((_a = this.currentWorld) == null ? void 0 : _a.time_config) {
      this.renderTimeConfigDisplay(timeConfigSection, this.currentWorld.time_config);
      const editBtn = timeConfigSection.createEl("button", {
        text: "Edit Time Config",
        cls: "story-engine-btn-secondary"
      });
      editBtn.onclick = () => this.showTimeConfigModal(this.currentWorld.time_config);
    } else {
      const addBtn = timeConfigSection.createEl("button", {
        text: "Add Time Configuration",
        cls: "story-engine-btn-primary"
      });
      addBtn.onclick = () => this.showTimeConfigModal(null);
    }
    const timelineSection = container.createDiv({ cls: "story-engine-timeline-section" });
    const timelineBtn = timelineSection.createEl("button", {
      text: "View Timeline",
      cls: "story-engine-btn-secondary"
    });
    timelineBtn.onclick = () => this.showTimelineModal();
    const epochSection = container.createDiv({ cls: "story-engine-epoch-section" });
    epochSection.createEl("h4", { text: "\u23F0 Epoch Event (Year Zero)", cls: "story-engine-section-title" });
    const epochEvent = this.events.find((e) => e.is_epoch && e.timeline_position === 0);
    if (epochEvent) {
      const epochItem = epochSection.createDiv({ cls: "story-engine-item story-engine-epoch-item" });
      const epochTitle = epochItem.createDiv({ cls: "story-engine-title" });
      epochTitle.createSpan({ text: epochEvent.name });
      epochTitle.createSpan({ cls: "story-engine-badge story-engine-badge-epoch", text: "EPOCH" });
      const epochMeta = epochItem.createDiv({ cls: "story-engine-meta" });
      epochMeta.createEl("span", { text: "Position: 0 (Year Zero)" });
      if (epochEvent.description) {
        epochMeta.createEl("span", { text: epochEvent.description.substring(0, 80) + (epochEvent.description.length > 80 ? "..." : "") });
      }
      const epochActions = epochItem.createDiv({ cls: "story-engine-item-actions" });
      epochActions.createEl("button", { text: "Edit Epoch" }).onclick = () => {
        this.showEditEventModal(epochEvent);
      };
    } else {
      const createEpochBtn = epochSection.createEl("button", {
        text: "\u{1F31F} Create Epoch Event (Year Zero)",
        cls: "mod-cta story-engine-create-epoch-btn"
      });
      createEpochBtn.onclick = () => this.showCreateEpochEventModal();
      epochSection.createEl("p", {
        text: "The Epoch Event marks Year Zero - all other events are dated relative to this point.",
        cls: "story-engine-hint"
      });
    }
    const eventsSection = container.createDiv({ cls: "story-engine-events-list-section" });
    eventsSection.createEl("h4", { text: "\u{1F4DC} Events", cls: "story-engine-section-title" });
    const regularEvents = this.events.filter((e) => !(e.is_epoch && e.timeline_position === 0));
    if (regularEvents.length === 0) {
      eventsSection.createEl("p", { text: "No events yet. Create your first event!", cls: "story-engine-empty-hint" });
      return;
    }
    const list = eventsSection.createDiv({ cls: "story-engine-list" });
    const sortedEvents = regularEvents.sort((a, b) => {
      var _a2, _b;
      const posA = (_a2 = a.timeline_position) != null ? _a2 : Number.MAX_SAFE_INTEGER;
      const posB = (_b = b.timeline_position) != null ? _b : Number.MAX_SAFE_INTEGER;
      if (posA !== posB)
        return posA - posB;
      return b.importance - a.importance;
    });
    for (const event of sortedEvents) {
      const item = list.createDiv({ cls: "story-engine-item" });
      const titleRow = item.createDiv({ cls: "story-engine-title" });
      titleRow.createSpan({ text: event.name });
      const importanceBadge = titleRow.createSpan({ cls: "story-engine-badge" });
      importanceBadge.textContent = `\u2605${event.importance}`;
      if (event.type) {
        titleRow.createSpan({ cls: "story-engine-badge", text: event.type });
      }
      if (event.is_epoch) {
        titleRow.createSpan({ cls: "story-engine-badge story-engine-badge-epoch", text: "EPOCH" });
      }
      const meta = item.createDiv({ cls: "story-engine-meta" });
      if (event.timeline_position !== void 0 && event.timeline_position !== null) {
        const posText = event.timeline_position >= 0 ? `Year ${event.timeline_position}` : `${Math.abs(event.timeline_position)} years before Year Zero`;
        meta.createEl("span", { text: `\u{1F4C5} ${posText}`, cls: "story-engine-event-position" });
      }
      if (event.parent_id) {
        const parentEvent = this.events.find((e) => e.id === event.parent_id);
        if (parentEvent) {
          meta.createEl("span", { text: `\u21B3 Related to: ${parentEvent.name}`, cls: "story-engine-event-parent" });
        }
      }
      if (event.description) {
        meta.createEl("span", {
          text: event.description.substring(0, 60) + (event.description.length > 60 ? "..." : ""),
          cls: "story-engine-event-description"
        });
      }
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      const linkBtn = actions.createEl("button");
<<<<<<< HEAD
      (0, import_obsidian17.setIcon)(linkBtn, "link");
      linkBtn.title = "Link to Entity";
      linkBtn.onclick = () => this.showLinkEventToEntityModal(event);
      const eventLinkBtn = actions.createEl("button");
      (0, import_obsidian17.setIcon)(eventLinkBtn, "git-branch");
=======
      (0, import_obsidian16.setIcon)(linkBtn, "link");
      linkBtn.title = "Link to Entity";
      linkBtn.onclick = () => this.showLinkEventToEntityModal(event);
      const eventLinkBtn = actions.createEl("button");
      (0, import_obsidian16.setIcon)(eventLinkBtn, "git-branch");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      eventLinkBtn.title = "Set Parent Event";
      eventLinkBtn.onclick = () => this.showSetEventParentModal(event);
      actions.createEl("button", { text: "Edit" }).onclick = () => {
        this.showEditEventModal(event);
      };
      actions.createEl("button", { text: "Delete" }).onclick = async () => {
        if (confirm(`Delete event "${event.name}"?`)) {
          try {
            await this.plugin.apiClient.deleteEvent(event.id);
            await this.loadWorldData();
            this.renderWorldTabContent();
<<<<<<< HEAD
            new import_obsidian17.Notice("Event deleted");
          } catch (err) {
            new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
            new import_obsidian16.Notice("Event deleted");
          } catch (err) {
            new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          }
        }
      };
    }
  }
  showCreateEpochEventModal() {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Epoch Event (Year Zero)");
    const content = modal.contentEl;
    let name = "";
    let description = "";
    content.createEl("p", {
      text: "The Epoch Event defines Year Zero in your world's timeline. All other events will be dated relative to this moment.",
      cls: "story-engine-modal-hint"
    });
    content.createEl("label", { text: "Event Name *" });
    const nameInput = content.createEl("input", {
      type: "text",
      cls: "story-engine-input",
      placeholder: "e.g., The Great Cataclysm, The Founding, Year of the Dragon"
    });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      placeholder: "Describe what happened at this pivotal moment..."
    });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create Epoch", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required");
=======
        new import_obsidian16.Notice("Name is required");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createEvent(this.currentWorld.id, {
          name: name.trim(),
          description: description.trim() || void 0,
          timeline_position: 0,
          is_epoch: true,
          importance: 10,
          // Max importance for epoch
          type: "Epoch"
        });
        modal.close();
        await this.loadWorldData();
        this.renderWorldTabContent();
<<<<<<< HEAD
        new import_obsidian17.Notice("Epoch event created!");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Epoch event created!");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.onclick = () => modal.close();
    modal.open();
  }
  renderTraitsTab(container) {
    if (this.traits.length === 0) {
      container.createEl("p", { text: "No traits found. Create your first trait!" });
      return;
    }
    const traitsByCategory = /* @__PURE__ */ new Map();
    for (const trait of this.traits) {
      const category = trait.category || "Uncategorized";
      if (!traitsByCategory.has(category)) {
        traitsByCategory.set(category, []);
      }
      traitsByCategory.get(category).push(trait);
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const [category, categoryTraits] of traitsByCategory.entries()) {
      const group = list.createDiv({ cls: "story-engine-group" });
      const groupHeader = group.createDiv({ cls: "story-engine-group-header" });
      groupHeader.createEl("h3", { text: category });
      const groupItems = group.createDiv({ cls: "story-engine-group-items" });
      for (const trait of categoryTraits.sort((a, b) => a.name.localeCompare(b.name))) {
        const item = groupItems.createDiv({ cls: "story-engine-item" });
        item.createDiv({ cls: "story-engine-title", text: trait.name });
        const meta = item.createDiv({ cls: "story-engine-meta" });
        if (trait.description) {
          meta.createEl("span", { text: trait.description.substring(0, 50) + (trait.description.length > 50 ? "..." : "") });
        }
        const actions = item.createDiv({ cls: "story-engine-item-actions" });
        actions.createEl("button", { text: "Edit" }).onclick = () => {
          this.showEditTraitModal(trait);
        };
        actions.createEl("button", { text: "Delete" }).onclick = async () => {
          if (confirm(`Delete trait "${trait.name}"?`)) {
            try {
              await this.plugin.apiClient.deleteTrait(trait.id);
              await this.loadWorldData();
              this.renderWorldTabContent();
<<<<<<< HEAD
              new import_obsidian17.Notice("Trait deleted");
            } catch (err) {
              new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
              new import_obsidian16.Notice("Trait deleted");
            } catch (err) {
              new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
            }
          }
        };
      }
    }
  }
  renderArchetypesTab(container) {
    if (this.archetypes.length === 0) {
      container.createEl("p", { text: "No archetypes found. Create your first archetype!" });
      return;
    }
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const archetype of this.archetypes.sort((a, b) => a.name.localeCompare(b.name))) {
      const item = list.createDiv({ cls: "story-engine-item" });
      item.createDiv({ cls: "story-engine-title", text: archetype.name });
      const meta = item.createDiv({ cls: "story-engine-meta" });
      if (archetype.description) {
        meta.createEl("span", { text: archetype.description.substring(0, 50) + (archetype.description.length > 50 ? "..." : "") });
      }
      const actions = item.createDiv({ cls: "story-engine-item-actions" });
      actions.createEl("button", { text: "View Traits" }).onclick = async () => {
        try {
          const traits = await this.plugin.apiClient.getArchetypeTraits(archetype.id);
          this.showArchetypeTraitsModal(archetype, traits);
        } catch (err) {
<<<<<<< HEAD
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
          new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        }
      };
      actions.createEl("button", { text: "Edit" }).onclick = () => {
        this.showEditArchetypeModal(archetype);
      };
      actions.createEl("button", { text: "Delete" }).onclick = async () => {
        if (confirm(`Delete archetype "${archetype.name}"?`)) {
          try {
            await this.plugin.apiClient.deleteArchetype(archetype.id);
            await this.loadWorldData();
            this.renderWorldTabContent();
<<<<<<< HEAD
            new import_obsidian17.Notice("Archetype deleted");
          } catch (err) {
            new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
            new import_obsidian16.Notice("Archetype deleted");
          } catch (err) {
            new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          }
        }
      };
    }
  }
  renderLoreTab(container) {
    if (this.lores.length === 0) {
      container.createEl("p", { text: "No lore found. Create your first lore!" });
      return;
    }
    const rootLores = this.lores.filter((l) => !l.parent_id);
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const lore of rootLores.sort((a, b) => a.name.localeCompare(b.name))) {
      this.renderLoreItem(list, lore, 0);
    }
  }
  renderLoreItem(container, lore, level) {
    const item = container.createDiv({ cls: "story-engine-item" });
    item.style.marginLeft = `${level * 1}rem`;
    const titleRow = item.createDiv({ cls: "story-engine-title" });
    titleRow.textContent = lore.name;
    if (lore.category) {
      const categoryBadge = titleRow.createSpan({ cls: "story-engine-badge" });
      categoryBadge.textContent = lore.category;
    }
    const meta = item.createDiv({ cls: "story-engine-meta" });
    if (lore.description) {
      meta.createEl("span", { text: lore.description.substring(0, 50) + (lore.description.length > 50 ? "..." : "") });
    }
    const actions = item.createDiv({ cls: "story-engine-item-actions" });
    const linkBtn = actions.createEl("button");
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(linkBtn, "link");
    linkBtn.title = "Link to Entity";
    linkBtn.onclick = () => this.showAddLoreReferenceModal(lore);
    const subBtn = actions.createEl("button");
    (0, import_obsidian17.setIcon)(subBtn, "folder-plus");
=======
    (0, import_obsidian16.setIcon)(linkBtn, "link");
    linkBtn.title = "Link to Entity";
    linkBtn.onclick = () => this.showAddLoreReferenceModal(lore);
    const subBtn = actions.createEl("button");
    (0, import_obsidian16.setIcon)(subBtn, "folder-plus");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    subBtn.title = "Create Sub-Lore";
    subBtn.onclick = () => this.showCreateLoreModal(lore.id);
    actions.createEl("button", { text: "Edit" }).onclick = () => {
      this.showEditLoreModal(lore);
    };
    actions.createEl("button", { text: "Delete" }).onclick = async () => {
      if (confirm(`Delete lore "${lore.name}"?`)) {
        try {
          await this.plugin.apiClient.deleteLore(lore.id);
          await this.loadWorldData();
          this.renderWorldTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Lore deleted");
        } catch (err) {
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
          new import_obsidian16.Notice("Lore deleted");
        } catch (err) {
          new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        }
      }
    };
    const children2 = this.lores.filter((l) => l.parent_id === lore.id);
    for (const child of children2.sort((a, b) => a.name.localeCompare(b.name))) {
      this.renderLoreItem(container, child, level + 1);
    }
  }
  renderFactionsTab(container) {
    if (this.factions.length === 0) {
      container.createEl("p", { text: "No factions found. Create your first faction!" });
      return;
    }
    const rootFactions = this.factions.filter((f) => !f.parent_id);
    const list = container.createDiv({ cls: "story-engine-list" });
    for (const faction of rootFactions.sort((a, b) => a.name.localeCompare(b.name))) {
      this.renderFactionItem(list, faction, 0);
    }
  }
  renderFactionItem(container, faction, level) {
    const item = container.createDiv({ cls: "story-engine-item" });
    item.style.marginLeft = `${level * 1}rem`;
    const titleRow = item.createDiv({ cls: "story-engine-title" });
    titleRow.textContent = faction.name;
    if (faction.type) {
      const typeBadge = titleRow.createSpan({ cls: "story-engine-badge" });
      typeBadge.textContent = faction.type;
    }
    const meta = item.createDiv({ cls: "story-engine-meta" });
    if (faction.description) {
      meta.createEl("span", { text: faction.description.substring(0, 50) + (faction.description.length > 50 ? "..." : "") });
    }
    const actions = item.createDiv({ cls: "story-engine-item-actions" });
    const linkBtn = actions.createEl("button");
<<<<<<< HEAD
    (0, import_obsidian17.setIcon)(linkBtn, "link");
    linkBtn.title = "Link to Entity";
    linkBtn.onclick = () => this.showAddFactionReferenceModal(faction);
    const subBtn = actions.createEl("button");
    (0, import_obsidian17.setIcon)(subBtn, "folder-plus");
=======
    (0, import_obsidian16.setIcon)(linkBtn, "link");
    linkBtn.title = "Link to Entity";
    linkBtn.onclick = () => this.showAddFactionReferenceModal(faction);
    const subBtn = actions.createEl("button");
    (0, import_obsidian16.setIcon)(subBtn, "folder-plus");
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    subBtn.title = "Create Sub-Faction";
    subBtn.onclick = () => this.showCreateFactionModal(faction.id);
    actions.createEl("button", { text: "View Details" }).onclick = () => {
      this.showFactionDetailsModal(faction);
    };
    actions.createEl("button", { text: "Edit" }).onclick = () => {
      this.showEditFactionModal(faction);
    };
    actions.createEl("button", { text: "Delete" }).onclick = async () => {
      if (confirm(`Delete faction "${faction.name}"?`)) {
        try {
          await this.plugin.apiClient.deleteFaction(faction.id);
          await this.loadWorldData();
          this.renderWorldTabContent();
<<<<<<< HEAD
          new import_obsidian17.Notice("Faction deleted");
        } catch (err) {
          new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
          new import_obsidian16.Notice("Faction deleted");
        } catch (err) {
          new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        }
      }
    };
    const children2 = this.factions.filter((f) => f.parent_id === faction.id);
    for (const child of children2.sort((a, b) => a.name.localeCompare(b.name))) {
      this.renderFactionItem(container, child, level + 1);
    }
  }
  // Modal methods for World entities
  showCreateCharacterModal() {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Character");
    const content = modal.contentEl;
    let name = "";
    let description = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createCharacter(this.currentWorld.id, { name: name.trim(), description: description.trim() });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Character created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Character created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditCharacterModal(character) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit Character");
    const content = modal.contentEl;
    let name = character.name;
    let description = character.description;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        const updated = await this.plugin.apiClient.updateCharacter(character.id, { name: name.trim(), description: description.trim() });
        if (this.viewMode === "character-details" && this.characterDetailsView && this.characterDetailsView["character"].id === character.id) {
          this.characterDetailsView.updateCharacter(updated);
        } else {
          await this.loadWorldData();
          this.renderWorldTabContent();
        }
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Character updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Character updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showCreateLocationModal() {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Location");
    const content = modal.contentEl;
    let name = "";
    let type2 = "";
    let description = "";
    let parentId = null;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Type" });
    const typeInput = content.createEl("input", { type: "text", cls: "story-engine-input", placeholder: "e.g., City, Forest, Building" });
    typeInput.oninput = () => {
      type2 = typeInput.value;
    };
    content.createEl("label", { text: "Parent Location" });
    const parentSelect = content.createEl("select", { cls: "story-engine-select" });
    parentSelect.createEl("option", { value: "", text: "None (Root Location)" });
    for (const loc of this.locations.sort((a, b) => a.name.localeCompare(b.name))) {
      parentSelect.createEl("option", { value: loc.id, text: loc.name });
    }
    parentSelect.onchange = () => {
      parentId = parentSelect.value || null;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createLocation(this.currentWorld.id, {
          name: name.trim(),
          type: type2.trim(),
          description: description.trim(),
          parent_id: parentId
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Location created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Location created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditLocationModal(location) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit Location");
    const content = modal.contentEl;
    let name = location.name;
    let type2 = location.type;
    let description = location.description;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Type" });
    const typeInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: type2 });
    typeInput.oninput = () => {
      type2 = typeInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.updateLocation(location.id, { name: name.trim(), type: type2.trim(), description: description.trim() });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Location updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Location updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showCreateArtifactModal() {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Artifact");
    const content = modal.contentEl;
    let name = "";
    let description = "";
    let rarity = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Rarity" });
    const raritySelect = content.createEl("select", { cls: "story-engine-select" });
    raritySelect.createEl("option", { value: "", text: "Select Rarity" });
    ["Common", "Uncommon", "Rare", "Epic", "Legendary", "Unique"].forEach((r) => {
      raritySelect.createEl("option", { value: r.toLowerCase(), text: r });
    });
    raritySelect.onchange = () => {
      rarity = raritySelect.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createArtifact(this.currentWorld.id, {
          name: name.trim(),
          description: description.trim(),
          rarity
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Artifact created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Artifact created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditArtifactModal(artifact) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit Artifact");
    const content = modal.contentEl;
    let name = artifact.name;
    let description = artifact.description;
    let rarity = artifact.rarity;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Rarity" });
    const raritySelect = content.createEl("select", { cls: "story-engine-select" });
    raritySelect.createEl("option", { value: "", text: "Select Rarity" });
    ["Common", "Uncommon", "Rare", "Epic", "Legendary", "Unique"].forEach((r) => {
      const opt = raritySelect.createEl("option", { value: r.toLowerCase(), text: r });
      if (rarity.toLowerCase() === r.toLowerCase())
        opt.selected = true;
    });
    raritySelect.onchange = () => {
      rarity = raritySelect.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.updateArtifact(artifact.id, { name: name.trim(), description: description.trim(), rarity });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Artifact updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Artifact updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showCreateEventModal() {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Event");
    const content = modal.contentEl;
    let name = "";
    let type2 = "";
    let description = "";
    let importance = 5;
    let timelinePosition = void 0;
    content.createEl("h4", { text: "Basic Info", cls: "story-engine-modal-section" });
    content.createEl("label", { text: "Event Name *" });
    const nameInput = content.createEl("input", {
      type: "text",
      cls: "story-engine-input",
      placeholder: "e.g., The Battle of Crimson Fields"
    });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Event Type" });
    const typeSelect = content.createEl("select", { cls: "story-engine-select" });
    typeSelect.createEl("option", { value: "", text: "Select type..." });
    ["Battle", "Treaty", "Discovery", "Birth", "Death", "Coronation", "Disaster", "Migration", "Founding", "Other"].forEach((t) => {
      typeSelect.createEl("option", { value: t, text: t });
    });
    typeSelect.onchange = () => {
      type2 = typeSelect.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      placeholder: "What happened during this event?"
    });
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("h4", { text: "\u{1F4C5} Timeline Position", cls: "story-engine-modal-section" });
    content.createEl("label", { text: "Year (relative to Epoch/Year Zero)" });
    content.createEl("p", {
      text: "Use positive numbers for years after Year Zero, negative for years before.",
      cls: "story-engine-hint"
    });
    const timelinePosInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      placeholder: "e.g., 100 (Year 100) or -50 (50 years before Year Zero)"
    });
    timelinePosInput.oninput = () => {
      const val = timelinePosInput.value;
      timelinePosition = val ? parseInt(val) : void 0;
    };
    content.createEl("h4", { text: "\u2B50 Importance", cls: "story-engine-modal-section" });
    content.createEl("label", { text: "Importance Level (1-10)" });
    const importanceInput = content.createEl("input", {
      type: "range",
      cls: "story-engine-range",
      value: "5",
      attr: { min: "1", max: "10" }
    });
    const importanceValue = content.createEl("span", { text: " 5", cls: "story-engine-range-value" });
    importanceInput.oninput = () => {
      importance = parseInt(importanceInput.value) || 5;
      importanceValue.textContent = ` ${importance}`;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create Event", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createEvent(this.currentWorld.id, {
          name: name.trim(),
          type: type2.trim() || void 0,
          description: description.trim() || void 0,
          importance: Math.max(1, Math.min(10, importance)),
          timeline_position: timelinePosition
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Event created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Event created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditEventModal(event) {
    var _a, _b;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit Event");
    const content = modal.contentEl;
    let name = event.name;
    let type2 = event.type || "";
    let description = event.description || "";
    let importance = event.importance;
    let timelinePosition = (_a = event.timeline_position) != null ? _a : void 0;
    content.createEl("h4", { text: "Basic Info", cls: "story-engine-modal-section" });
    content.createEl("label", { text: "Event Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Event Type" });
    const typeSelect = content.createEl("select", { cls: "story-engine-select" });
    typeSelect.createEl("option", { value: "", text: "Select type..." });
    ["Battle", "Treaty", "Discovery", "Birth", "Death", "Coronation", "Disaster", "Migration", "Founding", "Epoch", "Other"].forEach((t) => {
      const opt = typeSelect.createEl("option", { value: t, text: t });
      if (type2.toLowerCase() === t.toLowerCase())
        opt.selected = true;
    });
    typeSelect.onchange = () => {
      type2 = typeSelect.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("h4", { text: "\u{1F4C5} Timeline Position", cls: "story-engine-modal-section" });
    content.createEl("label", { text: "Year (relative to Epoch/Year Zero)" });
    content.createEl("p", {
      text: "Use positive numbers for years after Year Zero, negative for years before.",
      cls: "story-engine-hint"
    });
    const timelinePosInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      value: (_b = timelinePosition == null ? void 0 : timelinePosition.toString()) != null ? _b : ""
    });
    timelinePosInput.placeholder = "e.g., 100 or -50";
    timelinePosInput.oninput = () => {
      const val = timelinePosInput.value;
      timelinePosition = val ? parseInt(val) : void 0;
    };
    content.createEl("h4", { text: "\u2B50 Importance", cls: "story-engine-modal-section" });
    content.createEl("label", { text: "Importance Level (1-10)" });
    const importanceInput = content.createEl("input", {
      type: "range",
      cls: "story-engine-range",
      value: importance.toString(),
      attr: { min: "1", max: "10" }
    });
    const importanceValue = content.createEl("span", { text: ` ${importance}`, cls: "story-engine-range-value" });
    importanceInput.oninput = () => {
      importance = parseInt(importanceInput.value) || 5;
      importanceValue.textContent = ` ${importance}`;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.updateEvent(event.id, {
          name: name.trim(),
          type: type2.trim() || void 0,
          description: description.trim() || void 0,
          importance: Math.max(1, Math.min(10, importance)),
          timeline_position: timelinePosition
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Event updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Event updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showCreateTraitModal() {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Trait");
    const content = modal.contentEl;
    let name = "";
    let category = "";
    let description = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Category" });
    const categoryInput = content.createEl("input", { type: "text", cls: "story-engine-input", placeholder: "e.g., Personality, Physical, Background" });
    categoryInput.oninput = () => {
      category = categoryInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createTrait({
          name: name.trim(),
          category: category.trim(),
          description: description.trim()
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Trait created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Trait created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditTraitModal(trait) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit Trait");
    const content = modal.contentEl;
    let name = trait.name;
    let category = trait.category;
    let description = trait.description;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Category" });
    const categoryInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: category });
    categoryInput.oninput = () => {
      category = categoryInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.updateTrait(trait.id, { name: name.trim(), category: category.trim(), description: description.trim() });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Trait updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Trait updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  renderTimeConfigDisplay(container, config) {
    var _a;
    container.createEl("h4", { text: "Time Configuration" });
    const grid = container.createDiv({ cls: "story-engine-time-config-grid" });
    grid.createDiv().setText(`Base Unit: ${config.base_unit}`);
    grid.createDiv().setText(`Hours/Day: ${config.hours_per_day}`);
    grid.createDiv().setText(`Days/Week: ${config.days_per_week}`);
    grid.createDiv().setText(`Days/Year: ${config.days_per_year}`);
    grid.createDiv().setText(`Months/Year: ${config.months_per_year}`);
    if (config.era_name) {
      grid.createDiv().setText(`Era: ${config.era_name}`);
    }
    if ((_a = config.month_names) == null ? void 0 : _a.length) {
      grid.createDiv().setText(`Months: ${config.month_names.join(", ")}`);
    }
    if (config.year_zero !== void 0) {
      grid.createDiv().setText(`Year Zero: ${config.year_zero}`);
    }
  }
  showTimeConfigModal(existingConfig) {
    var _a;
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText(existingConfig ? "Edit Time Configuration" : "Create Time Configuration");
    const content = modal.contentEl;
    let baseUnit = (existingConfig == null ? void 0 : existingConfig.base_unit) || "year";
    let hoursPerDay = (existingConfig == null ? void 0 : existingConfig.hours_per_day) || 24;
    let daysPerWeek = (existingConfig == null ? void 0 : existingConfig.days_per_week) || 7;
    let daysPerYear = (existingConfig == null ? void 0 : existingConfig.days_per_year) || 365;
    let monthsPerYear = (existingConfig == null ? void 0 : existingConfig.months_per_year) || 12;
    let eraName = (existingConfig == null ? void 0 : existingConfig.era_name) || "";
    let yearZero = ((_a = existingConfig == null ? void 0 : existingConfig.year_zero) == null ? void 0 : _a.toString()) || "";
    content.createEl("label", { text: "Base Unit *" });
    const baseUnitSelect = content.createEl("select", { cls: "story-engine-select" });
    ["year", "day", "hour", "custom"].forEach((unit2) => {
      const opt = baseUnitSelect.createEl("option", { value: unit2, text: unit2 });
      if (baseUnit === unit2)
        opt.selected = true;
    });
    baseUnitSelect.onchange = () => {
      baseUnit = baseUnitSelect.value;
    };
    content.createEl("label", { text: "Hours per Day" });
    const hoursPerDayInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      value: hoursPerDay.toString()
    });
    hoursPerDayInput.oninput = () => {
      hoursPerDay = parseFloat(hoursPerDayInput.value) || 24;
    };
    content.createEl("label", { text: "Days per Week" });
    const daysPerWeekInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      value: daysPerWeek.toString()
    });
    daysPerWeekInput.oninput = () => {
      daysPerWeek = parseInt(daysPerWeekInput.value) || 7;
    };
    content.createEl("label", { text: "Days per Year" });
    const daysPerYearInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      value: daysPerYear.toString()
    });
    daysPerYearInput.oninput = () => {
      daysPerYear = parseInt(daysPerYearInput.value) || 365;
    };
    content.createEl("label", { text: "Months per Year" });
    const monthsPerYearInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      value: monthsPerYear.toString()
    });
    monthsPerYearInput.oninput = () => {
      monthsPerYear = parseInt(monthsPerYearInput.value) || 12;
    };
    content.createEl("label", { text: "Era Name (optional)" });
    const eraNameInput = content.createEl("input", {
      type: "text",
      cls: "story-engine-input",
      value: eraName
    });
    eraNameInput.oninput = () => {
      eraName = eraNameInput.value;
    };
    content.createEl("label", { text: "Year Zero (optional)" });
    const yearZeroInput = content.createEl("input", {
      type: "number",
      cls: "story-engine-input",
      value: yearZero
    });
    yearZeroInput.oninput = () => {
      yearZero = yearZeroInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        const timeConfig = {
          base_unit: baseUnit,
          hours_per_day: hoursPerDay,
          days_per_week: daysPerWeek,
          days_per_year: daysPerYear,
          months_per_year: monthsPerYear,
          era_name: eraName.trim() || void 0,
          year_zero: yearZero ? parseInt(yearZero) : void 0
        };
        await this.plugin.apiClient.updateWorldTimeConfig(this.currentWorld.id, timeConfig);
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Time configuration saved");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Time configuration saved");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  async showTimelineModal() {
    if (!this.currentWorld)
      return;
    try {
      const events = await this.plugin.apiClient.getTimeline(this.currentWorld.id);
      const modal = new TimelineModal(this.app, events, this.currentWorld.time_config || null);
      modal.open();
    } catch (err) {
<<<<<<< HEAD
      new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed to load timeline"}`, 5e3);
=======
      new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed to load timeline"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
  }
  // Placeholder methods for modals that will be implemented later
  showArchetypeTraitsModal(archetype, traits) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText(`Traits for ${archetype.name}`);
    const content = modal.contentEl;
    if (traits.length === 0) {
      content.createEl("p", { text: "No traits assigned to this archetype." });
    } else {
      const list = content.createDiv({ cls: "story-engine-list" });
      for (const trait of traits) {
        const item = list.createDiv({ cls: "story-engine-item" });
        item.createDiv({ cls: "story-engine-title", text: trait.trait_name || "Unknown" });
      }
    }
    modal.open();
  }
  showCreateArchetypeModal() {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Archetype");
    const content = modal.contentEl;
    let name = "";
    let description = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createArchetype({ name: name.trim(), description: description.trim() });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Archetype created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Archetype created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditArchetypeModal(archetype) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit Archetype");
    const content = modal.contentEl;
    let name = archetype.name;
    let description = archetype.description;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.updateArchetype(archetype.id, { name: name.trim(), description: description.trim() });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Archetype updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Archetype updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showLoreDetailsModal(lore) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText(lore.name);
    const content = modal.contentEl;
    content.createEl("h4", { text: "Description" });
    content.createEl("p", { text: lore.description || "No description" });
    if (lore.rules) {
      content.createEl("h4", { text: "Rules" });
      content.createEl("p", { text: lore.rules });
    }
    if (lore.limitations) {
      content.createEl("h4", { text: "Limitations" });
      content.createEl("p", { text: lore.limitations });
    }
    if (lore.requirements) {
      content.createEl("h4", { text: "Requirements" });
      content.createEl("p", { text: lore.requirements });
    }
    modal.open();
  }
  showCreateLoreModal(parentId) {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Lore");
    const content = modal.contentEl;
    let name = "";
    let category = "";
    let description = "";
    let rules = "";
    let limitations = "";
    let requirements = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Category" });
    const categoryInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    categoryInput.oninput = () => {
      category = categoryInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("label", { text: "Rules" });
    const rulesInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    rulesInput.oninput = () => {
      rules = rulesInput.value;
    };
    content.createEl("label", { text: "Limitations" });
    const limitationsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    limitationsInput.oninput = () => {
      limitations = limitationsInput.value;
    };
    content.createEl("label", { text: "Requirements" });
    const requirementsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    requirementsInput.oninput = () => {
      requirements = requirementsInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createLore(this.currentWorld.id, {
          name: name.trim(),
          category: category.trim() || void 0,
          description: description.trim(),
          rules: rules.trim(),
          limitations: limitations.trim(),
          requirements: requirements.trim(),
          parent_id: parentId || void 0
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Lore created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Lore created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditLoreModal(lore) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit Lore");
    const content = modal.contentEl;
    let name = lore.name;
    let category = lore.category || "";
    let description = lore.description;
    let rules = lore.rules;
    let limitations = lore.limitations;
    let requirements = lore.requirements;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Category" });
    const categoryInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: category });
    categoryInput.oninput = () => {
      category = categoryInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("label", { text: "Rules" });
    const rulesInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    rulesInput.value = rules;
    rulesInput.oninput = () => {
      rules = rulesInput.value;
    };
    content.createEl("label", { text: "Limitations" });
    const limitationsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    limitationsInput.value = limitations;
    limitationsInput.oninput = () => {
      limitations = limitationsInput.value;
    };
    content.createEl("label", { text: "Requirements" });
    const requirementsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    requirementsInput.value = requirements;
    requirementsInput.oninput = () => {
      requirements = requirementsInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.updateLore(lore.id, {
          name: name.trim(),
          category: category.trim() || void 0,
          description: description.trim(),
          rules: rules.trim(),
          limitations: limitations.trim(),
          requirements: requirements.trim()
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Lore updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Lore updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showFactionDetailsModal(faction) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText(faction.name);
    const content = modal.contentEl;
    content.createEl("h4", { text: "Description" });
    content.createEl("p", { text: faction.description || "No description" });
    if (faction.beliefs) {
      content.createEl("h4", { text: "Beliefs" });
      content.createEl("p", { text: faction.beliefs });
    }
    if (faction.structure) {
      content.createEl("h4", { text: "Structure" });
      content.createEl("p", { text: faction.structure });
    }
    if (faction.symbols) {
      content.createEl("h4", { text: "Symbols" });
      content.createEl("p", { text: faction.symbols });
    }
    modal.open();
  }
  showCreateFactionModal(parentId) {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Create Faction");
    const content = modal.contentEl;
    let name = "";
    let type2 = "";
    let description = "";
    let beliefs = "";
    let structure = "";
    let symbols = "";
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Type" });
    const typeInput = content.createEl("input", { type: "text", cls: "story-engine-input" });
    typeInput.oninput = () => {
      type2 = typeInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("label", { text: "Beliefs" });
    const beliefsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    beliefsInput.oninput = () => {
      beliefs = beliefsInput.value;
    };
    content.createEl("label", { text: "Structure" });
    const structureInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    structureInput.oninput = () => {
      structure = structureInput.value;
    };
    content.createEl("label", { text: "Symbols" });
    const symbolsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    symbolsInput.oninput = () => {
      symbols = symbolsInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createFaction(this.currentWorld.id, {
          name: name.trim(),
          type: type2.trim() || void 0,
          description: description.trim(),
          beliefs: beliefs.trim(),
          structure: structure.trim(),
          symbols: symbols.trim(),
          parent_id: parentId || void 0
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Faction created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Faction created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
    nameInput.focus();
  }
  showEditFactionModal(faction) {
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Edit Faction");
    const content = modal.contentEl;
    let name = faction.name;
    let type2 = faction.type || "";
    let description = faction.description;
    let beliefs = faction.beliefs;
    let structure = faction.structure;
    let symbols = faction.symbols;
    content.createEl("label", { text: "Name *" });
    const nameInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: name });
    nameInput.oninput = () => {
      name = nameInput.value;
    };
    content.createEl("label", { text: "Type" });
    const typeInput = content.createEl("input", { type: "text", cls: "story-engine-input", value: type2 });
    typeInput.oninput = () => {
      type2 = typeInput.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.value = description;
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("label", { text: "Beliefs" });
    const beliefsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    beliefsInput.value = beliefs;
    beliefsInput.oninput = () => {
      beliefs = beliefsInput.value;
    };
    content.createEl("label", { text: "Structure" });
    const structureInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    structureInput.value = structure;
    structureInput.oninput = () => {
      structure = structureInput.value;
    };
    content.createEl("label", { text: "Symbols" });
    const symbolsInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    symbolsInput.value = symbols;
    symbolsInput.oninput = () => {
      symbols = symbolsInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      if (!name.trim()) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Name is required", 3e3);
=======
        new import_obsidian16.Notice("Name is required", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.updateFaction(faction.id, {
          name: name.trim(),
          type: type2.trim() || void 0,
          description: description.trim(),
          beliefs: beliefs.trim(),
          structure: structure.trim(),
          symbols: symbols.trim()
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Faction updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Faction updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  // ==================== Relationship Modals ====================
  showAddCharacterRelationshipModal(character) {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Add Character Relationship");
    const content = modal.contentEl;
    let otherCharacterId = "";
    let relationshipType = "ally";
    let description = "";
    let bidirectional = true;
    content.createEl("label", { text: "Other Character *" });
    const characterSelect = content.createEl("select", { cls: "story-engine-select" });
    characterSelect.createEl("option", { value: "", text: "Select a character..." });
    for (const char of this.characters.filter((c) => c.id !== character.id).sort((a, b) => a.name.localeCompare(b.name))) {
      characterSelect.createEl("option", { value: char.id, text: char.name });
    }
    characterSelect.onchange = () => {
      otherCharacterId = characterSelect.value;
    };
    content.createEl("label", { text: "Relationship Type *" });
    const typeSelect = content.createEl("select", { cls: "story-engine-select" });
    const relationshipTypes = ["ally", "enemy", "family", "lover", "rival", "mentor", "student"];
    for (const type2 of relationshipTypes) {
      typeSelect.createEl("option", { value: type2, text: type2.charAt(0).toUpperCase() + type2.slice(1) });
    }
    typeSelect.onchange = () => {
      relationshipType = typeSelect.value;
    };
    content.createEl("label", { text: "Description" });
    const descInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    descInput.oninput = () => {
      description = descInput.value;
    };
    content.createEl("label", { text: "Bidirectional" });
    const bidirectionalCheckbox = content.createEl("input", { type: "checkbox" });
    bidirectionalCheckbox.checked = true;
    bidirectionalCheckbox.onchange = () => {
      bidirectional = bidirectionalCheckbox.checked;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!otherCharacterId) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Please select a character", 3e3);
=======
        new import_obsidian16.Notice("Please select a character", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.createCharacterRelationship(character.id, {
          character2_id: otherCharacterId,
          relationship_type: relationshipType,
          description: description.trim(),
          bidirectional
        });
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Relationship created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Relationship created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showLinkEventToEntityModal(event) {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText(`Link Event: ${event.name}`);
    const content = modal.contentEl;
    let entityType = "character";
    let entityId = "";
    let relationshipType = "";
    let notes = "";
    content.createEl("label", { text: "Entity Type *" });
    const typeSelect = content.createEl("select", { cls: "story-engine-select" });
    typeSelect.createEl("option", { value: "character", text: "\u{1F464} Character" });
    typeSelect.createEl("option", { value: "location", text: "\u{1F4CD} Location" });
    typeSelect.createEl("option", { value: "faction", text: "\u{1F3F4} Faction" });
    typeSelect.createEl("option", { value: "artifact", text: "\u2694\uFE0F Artifact" });
    typeSelect.createEl("option", { value: "lore", text: "\u{1F4DC} Lore" });
    content.createEl("label", { text: "Entity *" });
    const entitySelect = content.createEl("select", { cls: "story-engine-select" });
    const populateEntitySelect = () => {
      entitySelect.empty();
      entitySelect.createEl("option", { value: "", text: `Select a ${entityType}...` });
      entityId = "";
      if (entityType === "character") {
        for (const char of this.characters.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: char.id, text: char.name });
        }
      } else if (entityType === "location") {
        for (const loc of this.locations.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: loc.id, text: loc.name });
        }
      } else if (entityType === "faction") {
        for (const faction of this.factions.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: faction.id, text: faction.name });
        }
      } else if (entityType === "artifact") {
        for (const art of this.artifacts.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: art.id, text: art.name });
        }
      } else if (entityType === "lore") {
        for (const lore of this.lores.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: lore.id, text: lore.name });
        }
      }
    };
    populateEntitySelect();
    typeSelect.onchange = () => {
      entityType = typeSelect.value;
      populateEntitySelect();
    };
    entitySelect.onchange = () => {
      entityId = entitySelect.value;
    };
    content.createEl("label", { text: "Relationship Type" });
    const relTypeSelect = content.createEl("select", { cls: "story-engine-select" });
    relTypeSelect.createEl("option", { value: "", text: "Select relationship..." });
    ["involved", "caused", "affected", "witnessed", "created", "destroyed", "participated", "led", "opposed"].forEach((rel) => {
      relTypeSelect.createEl("option", { value: rel, text: rel.charAt(0).toUpperCase() + rel.slice(1) });
    });
    relTypeSelect.onchange = () => {
      relationshipType = relTypeSelect.value;
    };
    content.createEl("label", { text: "Notes" });
    const notesInput = content.createEl("textarea", {
      cls: "story-engine-textarea",
      placeholder: "Additional details about this relationship..."
    });
    notesInput.oninput = () => {
      notes = notesInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Link Entity", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!entityId) {
<<<<<<< HEAD
        new import_obsidian17.Notice(`Please select a ${entityType}`, 3e3);
=======
        new import_obsidian16.Notice(`Please select a ${entityType}`, 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.addEventReference(event.id, entityType, entityId, relationshipType.trim() || void 0, notes.trim() || void 0);
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Entity linked to event");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Entity linked to event");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showSetEventParentModal(event) {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Set Parent Event (Cause)");
    const content = modal.contentEl;
    let parentId = event.parent_id || null;
    content.createEl("p", {
      text: "Link this event to its cause or parent event in the timeline hierarchy.",
      cls: "story-engine-hint"
    });
    content.createEl("label", { text: "Parent Event (Cause)" });
    const parentSelect = content.createEl("select", { cls: "story-engine-select" });
    parentSelect.createEl("option", { value: "", text: "None (Root Event)" });
    const sortedEvents = this.events.filter((e) => e.id !== event.id).sort((a, b) => {
      var _a, _b;
      const posA = (_a = a.timeline_position) != null ? _a : Number.MAX_SAFE_INTEGER;
      const posB = (_b = b.timeline_position) != null ? _b : Number.MAX_SAFE_INTEGER;
      if (posA !== posB)
        return posA - posB;
      return a.name.localeCompare(b.name);
    });
    for (const evt of sortedEvents) {
      const posLabel = evt.timeline_position !== void 0 ? ` (Year ${evt.timeline_position})` : "";
      const opt = parentSelect.createEl("option", { value: evt.id, text: `${evt.name}${posLabel}` });
      if (event.parent_id === evt.id) {
        opt.selected = true;
      }
    }
    parentSelect.onchange = () => {
      parentId = parentSelect.value || null;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const saveBtn = buttonContainer.createEl("button", { text: "Save", cls: "mod-cta" });
    saveBtn.onclick = async () => {
      try {
        await this.plugin.apiClient.moveEvent(event.id, parentId);
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Event parent updated");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Event parent updated");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showAddFactionReferenceModal(faction) {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Link Faction to Entity");
    const content = modal.contentEl;
    let entityType = "character";
    let entityId = "";
    let role = "";
    let notes = "";
    content.createEl("label", { text: "Entity Type *" });
    const typeSelect = content.createEl("select", { cls: "story-engine-select" });
    typeSelect.createEl("option", { value: "character", text: "Character" });
    typeSelect.createEl("option", { value: "location", text: "Location" });
    typeSelect.createEl("option", { value: "artifact", text: "Artifact" });
    typeSelect.createEl("option", { value: "event", text: "Event" });
    typeSelect.createEl("option", { value: "faction", text: "Faction" });
    typeSelect.onchange = () => {
      entityType = typeSelect.value;
      entitySelect.empty();
      entitySelect.createEl("option", { value: "", text: `Select a ${entityType}...` });
      loadEntitiesForType(entityType);
    };
    content.createEl("label", { text: "Entity *" });
    const entitySelect = content.createEl("select", { cls: "story-engine-select" });
    entitySelect.createEl("option", { value: "", text: "Select an entity..." });
    const loadEntitiesForType = (type2) => {
      if (type2 === "character") {
        for (const char of this.characters.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: char.id, text: char.name });
        }
      } else if (type2 === "location") {
        for (const loc of this.locations.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: loc.id, text: loc.name });
        }
      } else if (type2 === "artifact") {
        for (const art of this.artifacts.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: art.id, text: art.name });
        }
      } else if (type2 === "event") {
        for (const evt of this.events.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: evt.id, text: evt.name });
        }
      } else if (type2 === "faction") {
        for (const fac of this.factions.filter((f) => f.id !== faction.id).sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: fac.id, text: fac.name });
        }
      }
    };
    loadEntitiesForType(entityType);
    entitySelect.onchange = () => {
      entityId = entitySelect.value;
    };
    content.createEl("label", { text: "Role" });
    const roleInput = content.createEl("input", { type: "text", cls: "story-engine-input", placeholder: "e.g., leader, member, ally, rival" });
    roleInput.oninput = () => {
      role = roleInput.value;
    };
    content.createEl("label", { text: "Notes" });
    const notesInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    notesInput.oninput = () => {
      notes = notesInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!entityId) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Please select an entity", 3e3);
=======
        new import_obsidian16.Notice("Please select an entity", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.addFactionReference(faction.id, entityType, entityId, role.trim() || void 0, notes.trim() || void 0);
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Reference created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Reference created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  showAddLoreReferenceModal(lore) {
    if (!this.currentWorld)
      return;
<<<<<<< HEAD
    const modal = new import_obsidian17.Modal(this.app);
=======
    const modal = new import_obsidian16.Modal(this.app);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    modal.titleEl.setText("Link Lore to Entity");
    const content = modal.contentEl;
    let entityType = "character";
    let entityId = "";
    let relationshipType = "";
    let notes = "";
    content.createEl("label", { text: "Entity Type *" });
    const typeSelect = content.createEl("select", { cls: "story-engine-select" });
    typeSelect.createEl("option", { value: "character", text: "Character" });
    typeSelect.createEl("option", { value: "location", text: "Location" });
    typeSelect.createEl("option", { value: "artifact", text: "Artifact" });
    typeSelect.createEl("option", { value: "event", text: "Event" });
    typeSelect.createEl("option", { value: "faction", text: "Faction" });
    typeSelect.createEl("option", { value: "lore", text: "Lore" });
    typeSelect.onchange = () => {
      entityType = typeSelect.value;
      entitySelect.empty();
      entitySelect.createEl("option", { value: "", text: `Select a ${entityType}...` });
      loadEntitiesForType(entityType);
    };
    content.createEl("label", { text: "Entity *" });
    const entitySelect = content.createEl("select", { cls: "story-engine-select" });
    entitySelect.createEl("option", { value: "", text: "Select an entity..." });
    const loadEntitiesForType = (type2) => {
      if (type2 === "character") {
        for (const char of this.characters.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: char.id, text: char.name });
        }
      } else if (type2 === "location") {
        for (const loc of this.locations.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: loc.id, text: loc.name });
        }
      } else if (type2 === "artifact") {
        for (const art of this.artifacts.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: art.id, text: art.name });
        }
      } else if (type2 === "event") {
        for (const evt of this.events.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: evt.id, text: evt.name });
        }
      } else if (type2 === "faction") {
        for (const fac of this.factions.sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: fac.id, text: fac.name });
        }
      } else if (type2 === "lore") {
        for (const l of this.lores.filter((l2) => l2.id !== lore.id).sort((a, b) => a.name.localeCompare(b.name))) {
          entitySelect.createEl("option", { value: l.id, text: l.name });
        }
      }
    };
    loadEntitiesForType(entityType);
    entitySelect.onchange = () => {
      entityId = entitySelect.value;
    };
    content.createEl("label", { text: "Relationship Type" });
    const relTypeInput = content.createEl("input", { type: "text", cls: "story-engine-input", placeholder: "e.g., practitioner, origin, forbidden" });
    relTypeInput.oninput = () => {
      relationshipType = relTypeInput.value;
    };
    content.createEl("label", { text: "Notes" });
    const notesInput = content.createEl("textarea", { cls: "story-engine-textarea" });
    notesInput.oninput = () => {
      notes = notesInput.value;
    };
    const buttonContainer = content.createDiv({ cls: "modal-button-container" });
    const createBtn = buttonContainer.createEl("button", { text: "Create", cls: "mod-cta" });
    createBtn.onclick = async () => {
      if (!entityId) {
<<<<<<< HEAD
        new import_obsidian17.Notice("Please select an entity", 3e3);
=======
        new import_obsidian16.Notice("Please select an entity", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      try {
        await this.plugin.apiClient.addLoreReference(lore.id, entityType, entityId, relationshipType.trim() || void 0, notes.trim() || void 0);
        await this.loadWorldData();
        this.renderWorldTabContent();
        modal.close();
<<<<<<< HEAD
        new import_obsidian17.Notice("Reference created");
      } catch (err) {
        new import_obsidian17.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
=======
        new import_obsidian16.Notice("Reference created");
      } catch (err) {
        new import_obsidian16.Notice(`Error: ${err instanceof Error ? err.message : "Failed"}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    };
    buttonContainer.createEl("button", { text: "Cancel" }).onclick = () => modal.close();
    modal.open();
  }
  // ==================== Character Details View Methods ====================
  async showCharacterDetails(character) {
    this.viewMode = "character-details";
    const world = character.world_id ? await this.plugin.apiClient.getWorld(character.world_id).catch(() => null) : null;
    const characters = world ? await this.plugin.apiClient.getCharacters(world.id).catch(() => []) : [];
    let traits = this.traits;
    let archetypes = this.archetypes;
    let events = world ? this.events : [];
    if (!traits || traits.length === 0) {
      try {
        traits = await this.plugin.apiClient.getTraits();
        this.traits = traits;
      } catch (err) {
        console.warn("Failed to load traits:", err);
        traits = [];
      }
    }
    if (!archetypes || archetypes.length === 0) {
      try {
        archetypes = await this.plugin.apiClient.getArchetypes();
        this.archetypes = archetypes;
      } catch (err) {
        console.warn("Failed to load archetypes:", err);
        archetypes = [];
      }
    }
    if (world && (!events || events.length === 0)) {
      try {
        events = await this.plugin.apiClient.getEvents(world.id);
        this.events = events;
      } catch (err) {
        console.warn("Failed to load events:", err);
        events = [];
      }
    }
    this.characterDetailsView = new CharacterDetailsView(
      this.plugin,
      character,
      this.headerEl,
      this.contentEl,
      () => {
        this.characterDetailsView = null;
        if (this.currentWorld) {
          this.viewMode = "world-details";
          this.renderWorldDetails();
        } else if (this.currentStory) {
          this.viewMode = "details";
          this.renderDetails();
        } else {
          this.viewMode = "list";
          this.renderListHeader();
          this.renderListContent();
        }
      },
      (character2) => {
        this.showEditCharacterModal(character2);
      },
      world,
      characters,
      archetypes,
      traits,
      events
    );
    await this.characterDetailsView.render();
  }
};

// src/views/StoryEngineExtractView.ts
<<<<<<< HEAD
var import_obsidian18 = require("obsidian");
var STORY_ENGINE_EXTRACT_VIEW_TYPE = "story-engine-extract-view";
var StoryEngineExtractView = class extends import_obsidian18.ItemView {
=======
var import_obsidian17 = require("obsidian");
var STORY_ENGINE_EXTRACT_VIEW_TYPE = "story-engine-extract-view";
var StoryEngineExtractView = class extends import_obsidian17.ItemView {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  constructor(leaf, plugin) {
    super(leaf);
    this.result = null;
    this.logs = [];
    this.status = "idle";
    this.activeTab = "progress";
    this.expandedLogs = /* @__PURE__ */ new Set();
    this.expandedRelationIndex = null;
    this.pendingRelationScrollIndex = null;
    this.pendingTabScroll = false;
    this.entitySearch = "";
    this.entityFilterType = "all";
    this.entitySort = "name";
    this.relationSearch = "";
    this.relationFilterType = "all";
    this.relationSort = "type";
    this.plugin = plugin;
    this.logs = plugin.extractLogs;
    this.status = plugin.extractStatus;
  }
  getViewType() {
    return STORY_ENGINE_EXTRACT_VIEW_TYPE;
  }
  getDisplayText() {
    return "Extract";
  }
  getIcon() {
    return "search";
  }
  async onOpen() {
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("story-engine-extract-container");
    this.contentRoot = container;
    this.setResult(this.plugin.extractResult);
    this.setLogs(this.plugin.extractLogs, this.plugin.extractStatus);
  }
  setResult(result) {
    this.result = result;
    this.render();
  }
  setLogs(logs, status) {
    this.logs = logs;
    this.status = status;
    this.render();
  }
  render() {
    if (!this.contentRoot)
      return;
    this.contentRoot.empty();
    const header = this.contentRoot.createDiv({
      cls: "story-engine-extract-header"
    });
    header.createEl("h2", { text: "Extract" });
    const headerActions = header.createDiv({
      cls: "story-engine-extract-header-actions"
    });
    const backButton = headerActions.createEl("button", {
      text: "Back to Stories",
      cls: "story-engine-extract-back"
    });
    backButton.onclick = () => {
      this.plugin.activateView();
    };
    if (this.status === "running") {
      const cancelButton = headerActions.createEl("button", {
        text: "Cancel",
        cls: "story-engine-extract-cancel"
      });
      cancelButton.onclick = () => {
        this.plugin.cancelExtractStream();
      };
    }
    if (!this.result) {
      this.renderLogs();
      this.contentRoot.createEl("p", {
        text: "No extraction results yet.",
        cls: "story-engine-extract-empty"
      });
      return;
    }
    const queryBlock = this.contentRoot.createDiv({
      cls: "story-engine-extract-query"
    });
    queryBlock.createEl("div", {
      text: "Text",
      cls: "story-engine-extract-label"
    });
    queryBlock.createEl("div", {
      text: this.result.text,
      cls: "story-engine-extract-query-text"
    });
    const headerMeta = this.contentRoot.createDiv({
      cls: "story-engine-extract-meta"
    });
    headerMeta.createEl("div", {
      text: `Status: ${this.status}`
    });
    if (this.result) {
      const foundCount = this.result.entities.filter((entity) => entity.found).length;
      headerMeta.createEl("div", {
        text: `Entities found: ${foundCount}/${this.result.entities.length}`
      });
      headerMeta.createEl("div", {
        text: `Relations found: ${this.result.relations.length}`
      });
      headerMeta.createEl("div", {
        text: `Text length: ${this.result.text.length}`
      });
    }
    const tabs = this.contentRoot.createDiv({
      cls: "story-engine-extract-tabs"
    });
    const hasEntities = this.result.entities.length > 0;
    const hasRelations = this.result.relations.length > 0;
    const includeRelations = this.result.include_relations !== false;
    const entitiesDisabled = !hasEntities && this.status === "idle";
    const relationsDisabled = !hasRelations && this.status === "idle" || !includeRelations;
    const progressTab = tabs.createEl("button", {
      text: "Progress",
      cls: `story-engine-extract-tab ${this.activeTab === "progress" ? "is-active" : ""}`
    });
    progressTab.onclick = () => {
      this.setActiveTab("progress");
    };
    const entitiesTab = tabs.createEl("button", {
      text: "Entities",
      cls: `story-engine-extract-tab ${this.activeTab === "entities" ? "is-active" : ""}`
    });
    if (entitiesDisabled) {
      entitiesTab.disabled = true;
      entitiesTab.addClass("is-disabled");
    }
    entitiesTab.onclick = () => {
      if (entitiesDisabled)
        return;
      this.setActiveTab("entities");
    };
    const relationsTab = tabs.createEl("button", {
      text: "Relations",
      cls: `story-engine-extract-tab ${this.activeTab === "relations" ? "is-active" : ""}`
    });
    if (relationsDisabled) {
      relationsTab.disabled = true;
      relationsTab.addClass("is-disabled");
    }
    relationsTab.onclick = () => {
      if (relationsDisabled)
        return;
      this.setActiveTab("relations");
    };
    const panels = this.contentRoot.createDiv({
      cls: "story-engine-extract-panels"
    });
    const entitiesPanel = panels.createDiv({
      cls: `story-engine-extract-panel ${this.activeTab === "entities" ? "is-active" : ""}`
    });
    const relationsPanel = panels.createDiv({
      cls: `story-engine-extract-panel ${this.activeTab === "relations" ? "is-active" : ""}`
    });
    const progressPanel = panels.createDiv({
      cls: `story-engine-extract-panel ${this.activeTab === "progress" ? "is-active" : ""}`
    });
    const actions = this.contentRoot.createDiv({
      cls: "story-engine-extract-actions"
    });
    const clearButton = actions.createEl("button", {
      text: "Clear Results",
      cls: "story-engine-extract-clear"
    });
    clearButton.onclick = () => {
      this.plugin.extractResult = null;
      this.setResult(null);
      this.plugin.updateExtractViews();
    };
    this.renderLogs(progressPanel);
    if (hasEntities) {
      this.renderEntityControls(entitiesPanel);
      const list = entitiesPanel.createDiv({
        cls: "story-engine-extract-list"
      });
      const filteredEntities = this.filterAndSortEntities(this.result.entities);
      filteredEntities.forEach((entity, index) => {
        this.renderEntity(list, entity, index);
      });
    } else {
      const emptyText = this.status === "running" ? "Extracting entities..." : "No entities returned from extraction.";
      entitiesPanel.createEl("p", {
        text: emptyText,
        cls: "story-engine-extract-empty"
      });
    }
    if (hasRelations) {
      this.renderRelationControls(relationsPanel);
      const list = relationsPanel.createDiv({
        cls: "story-engine-extract-list"
      });
      const filteredRelations = this.filterAndSortRelations(this.result.relations);
      filteredRelations.forEach((relation, index) => {
        this.renderRelation(list, relation, index);
      });
    } else {
      let emptyText = "No relations returned from extraction.";
      if (!includeRelations) {
        emptyText = "Relations not requested.";
      } else if (!hasEntities) {
        emptyText = "Waiting for entity extraction.";
      } else if (this.status === "running") {
        emptyText = "Extracting relations...";
      }
      relationsPanel.createEl("p", {
        text: emptyText,
        cls: "story-engine-extract-empty"
      });
    }
    this.applyPendingScroll();
  }
  renderLogs(container) {
    const root2 = container != null ? container : this.contentRoot;
    const logBlock = root2.createDiv({
      cls: "story-engine-extract-logs"
    });
    logBlock.createEl("div", {
      text: "Progress",
      cls: "story-engine-extract-label"
    });
    if (!this.logs.length) {
      logBlock.createEl("p", {
        text: "No events yet.",
        cls: "story-engine-extract-empty"
      });
      return;
    }
    const list = logBlock.createDiv({ cls: "story-engine-extract-log-list" });
    const lastIndex = this.logs.length - 1;
    this.logs.forEach((entry, index) => {
      const eventLabel = entry.phase ? `${entry.phase} \xB7 ${entry.eventType}` : entry.eventType;
      const item = list.createDiv({
        cls: `story-engine-extract-log-item ${index === lastIndex ? "is-latest" : ""}`
      });
      const header = item.createDiv({
        cls: "story-engine-extract-log-header"
      });
      header.createSpan({
        text: `${entry.timestamp} | ${eventLabel}`,
        cls: "story-engine-extract-log-title"
      });
      const label = item.createDiv({
        cls: "story-engine-extract-log-label"
      });
      label.createSpan({ text: entry.message });
      const toggle = label.createSpan({
        text: index === lastIndex ? "..." : this.expandedLogs.has(entry.id) ? "\u2212" : "+",
        cls: "story-engine-extract-log-toggle"
      });
      label.onclick = () => {
        if (this.expandedLogs.has(entry.id)) {
          this.expandedLogs.delete(entry.id);
        } else {
          this.expandedLogs.add(entry.id);
        }
        this.render();
      };
      if (index === lastIndex) {
        toggle.addClass("is-typing");
      }
      if (this.expandedLogs.has(entry.id) && entry.data) {
        item.createEl("pre", {
          text: JSON.stringify(entry.data, null, 2),
          cls: "story-engine-extract-log-data"
        });
      }
    });
    list.scrollTop = list.scrollHeight;
  }
  renderEntity(container, entity, index) {
    this.renderEntityCard(container, entity, index);
  }
  renderEntityCard(container, entity, index, onCreated) {
    const item = container.createDiv({ cls: "story-engine-extract-item" });
    item.dataset.relationIndex = String(index);
    const header = item.createDiv({ cls: "story-engine-extract-item-header" });
    header.createEl("div", {
      text: `#${index + 1}`,
      cls: "story-engine-extract-rank"
    });
    const statusText = entity.created ? "Created" : entity.found ? "Found" : "New";
    const statusClass = entity.created ? "is-created" : entity.found ? "is-found" : "is-new";
    header.createEl("div", {
      text: statusText,
      cls: `story-engine-extract-status ${statusClass}`
    });
    const title = item.createDiv({ cls: "story-engine-extract-item-title" });
    title.createEl("div", {
      text: entity.name,
      cls: "story-engine-extract-entity-name"
    });
    title.createEl("div", {
      text: entity.type,
      cls: "story-engine-extract-entity-type"
    });
    if (entity.summary) {
      item.createEl("div", {
        text: entity.summary,
        cls: "story-engine-extract-content"
      });
    }
    if (entity.match) {
      item.appendChild(this.renderMatch("Match", entity.match));
    }
    if (entity.candidates && entity.candidates.length) {
      const list = item.createDiv({ cls: "story-engine-extract-candidates" });
      list.createEl("div", {
        text: "Candidates",
        cls: "story-engine-extract-label"
      });
      entity.candidates.forEach((candidate) => {
        list.appendChild(this.renderMatch("", candidate));
      });
    }
    if (!entity.created) {
      const actions = item.createDiv({ cls: "story-engine-extract-actions" });
      const actionButton = actions.createEl("button", {
        text: entity.found ? "Update Entity" : "Create Entity",
        cls: "story-engine-extract-action"
      });
      actionButton.onclick = async () => {
        actionButton.disabled = true;
        try {
          if (entity.found) {
            await this.updateEntity(entity);
          } else {
            const createdId = await this.createEntity(entity);
            if (createdId && onCreated) {
              onCreated(createdId);
            }
          }
        } finally {
          actionButton.disabled = false;
        }
      };
    }
  }
  renderMatch(label, match) {
    const wrapper = document.createElement("div");
    wrapper.className = "story-engine-extract-match";
    const parts = [];
    if (label) {
      parts.push(label);
    }
    parts.push(`${match.source_type}:${match.source_id}`);
    if (match.entity_name) {
      parts.push(match.entity_name);
    }
    parts.push(`sim ${match.similarity.toFixed(3)}`);
    if (match.reason) {
      parts.push(match.reason);
    }
    wrapper.textContent = parts.join(" \xB7 ");
    return wrapper;
  }
  async createEntity(entity) {
    var _a, _b;
    if (!((_a = this.result) == null ? void 0 : _a.world_id)) {
<<<<<<< HEAD
      new import_obsidian18.Notice("World ID missing. Select a story or world first.", 4e3);
      return "";
=======
      new import_obsidian17.Notice("World ID missing. Select a story or world first.", 4e3);
      return;
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
    const description = ((_b = entity.summary) == null ? void 0 : _b.trim()) || entity.name;
    let createdId = "";
    switch (entity.type) {
      case "character": {
        const created = await this.plugin.apiClient.createCharacter(
          this.result.world_id,
          { name: entity.name, description }
        );
        createdId = created.id;
        break;
      }
      case "location": {
        const created = await this.plugin.apiClient.createLocation(
          this.result.world_id,
          { name: entity.name, description }
        );
        createdId = created.id;
        break;
      }
      case "artefact": {
        const created = await this.plugin.apiClient.createArtifact(
          this.result.world_id,
          { name: entity.name, description }
        );
        createdId = created.id;
        break;
      }
      case "faction": {
        const created = await this.plugin.apiClient.createFaction(
          this.result.world_id,
          { name: entity.name, description }
        );
        createdId = created.id;
        break;
      }
      case "event": {
        const created = await this.plugin.apiClient.createEvent(
          this.result.world_id,
          { name: entity.name, description }
        );
        createdId = created.id;
        break;
      }
      default:
<<<<<<< HEAD
        new import_obsidian18.Notice(`Unsupported type: ${entity.type}`, 4e3);
        return "";
=======
        new import_obsidian17.Notice(`Unsupported type: ${entity.type}`, 4e3);
        return;
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    }
    entity.found = false;
    entity.created = true;
    entity.match = {
      source_type: entity.type,
      source_id: createdId,
      entity_name: entity.name,
      similarity: 1,
      reason: "Created from extract"
    };
    this.render();
<<<<<<< HEAD
    new import_obsidian18.Notice(`Created ${entity.type}: ${entity.name}`, 3e3);
    return createdId;
=======
    new import_obsidian17.Notice(`Created ${entity.type}: ${entity.name}`, 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  }
  async updateEntity(entity) {
    var _a, _b;
    if (!((_a = entity.match) == null ? void 0 : _a.source_id)) {
<<<<<<< HEAD
      new import_obsidian18.Notice("No match available to update.", 4e3);
=======
      new import_obsidian17.Notice("No match available to update.", 4e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      return;
    }
    const description = (_b = entity.summary) != null ? _b : "";
    switch (entity.type) {
      case "character":
        await this.plugin.apiClient.updateCharacter(entity.match.source_id, {
          name: entity.name,
          description
        });
        break;
      case "location":
        await this.plugin.apiClient.updateLocation(entity.match.source_id, {
          name: entity.name,
          description
        });
        break;
      case "artefact":
        await this.plugin.apiClient.updateArtifact(entity.match.source_id, {
          name: entity.name,
          description
        });
        break;
      case "faction":
        await this.plugin.apiClient.updateFaction(entity.match.source_id, {
          name: entity.name,
          description
        });
        break;
      case "event":
        await this.plugin.apiClient.updateEvent(entity.match.source_id, {
          name: entity.name,
          description
        });
        break;
      default:
<<<<<<< HEAD
        new import_obsidian18.Notice(`Unsupported type: ${entity.type}`, 4e3);
        return;
    }
    new import_obsidian18.Notice(`Updated ${entity.type}: ${entity.name}`, 3e3);
  }
  renderRelation(container, relation, index) {
    const item = container.createDiv({ cls: "story-engine-extract-item" });
    const header = item.createDiv({ cls: "story-engine-extract-item-header" });
    header.createEl("div", {
      text: `#${index + 1}`,
      cls: "story-engine-extract-rank"
    });
    const statusText = relation.status === "pending_entities" ? "Pending" : relation.status;
    const statusClass = relation.status === "pending_entities" ? "is-new" : "is-found";
    const relationType = relation.relation_type || "relation";
    const typeLabel = `${relationType} | ${relation.source.type} -> ${relation.target.type}`;
    const typeLine = header.createEl("div", {
      text: typeLabel,
      cls: "story-engine-extract-entity-type"
    });
    typeLine.addClass("story-engine-extract-relation-types");
    header.createEl("div", {
      text: statusText,
      cls: `story-engine-extract-status ${statusClass}`
    });
    const title = item.createDiv({ cls: "story-engine-extract-item-title" });
    const sourceLabel = relation.source.name || relation.source.ref;
    const targetLabel = relation.target.name || relation.target.ref;
    title.createEl("div", {
      text: `${sourceLabel} \u2192 ${targetLabel}`,
      cls: "story-engine-extract-entity-type"
    });
    if (relation.summary) {
      item.createEl("div", {
        text: relation.summary,
        cls: "story-engine-extract-content"
      });
    }
    const hasPending = this.hasTempNode(relation.source) || this.hasTempNode(relation.target);
    const relationCreated = relation.status === "created";
    const actions = item.createDiv({ cls: "story-engine-extract-actions" });
    const createRelationButton = actions.createEl("button", {
      text: relationCreated ? "Relation Created" : "Create Relation",
      cls: "story-engine-extract-action"
    });
    if (relationCreated) {
      createRelationButton.disabled = true;
      createRelationButton.addClass("is-disabled");
      createRelationButton.title = "Relation already created.";
    } else if (hasPending) {
      createRelationButton.disabled = true;
      createRelationButton.addClass("is-disabled");
      createRelationButton.title = "Create pending entities first.";
    } else {
      createRelationButton.onclick = async () => {
        createRelationButton.disabled = true;
        try {
          await this.createRelation(relation);
        } finally {
          createRelationButton.disabled = false;
        }
      };
    }
    if (hasPending) {
      const createButton = actions.createEl("button", {
        text: "Create Pending",
        cls: "story-engine-extract-action"
      });
      createButton.onclick = async () => {
        createButton.disabled = true;
        try {
          await this.createPendingEntities(relation);
        } finally {
          createButton.disabled = false;
        }
      };
    }
    const accordionButton = actions.createEl("button", {
      text: "See Entities",
      cls: "story-engine-extract-action"
    });
    accordionButton.onclick = () => {
      const shouldExpand = this.expandedRelationIndex !== index;
      this.expandedRelationIndex = shouldExpand ? index : null;
      this.pendingRelationScrollIndex = shouldExpand ? index : null;
      this.render();
    };
    if (this.expandedRelationIndex === index) {
      const entitiesWrap = item.createDiv({
        cls: "story-engine-extract-relations-entities"
      });
      entitiesWrap.dataset.relationIndex = String(index);
      const entities = [
        this.resolveRelationEntity(relation.source),
        this.resolveRelationEntity(relation.target)
      ];
      entities.forEach((entity, entityIndex) => {
        this.renderEntityCard(entitiesWrap, entity, entityIndex, (createdId) => {
          this.applyCreatedIdToRelation(relation, entity, createdId);
        });
      });
    }
  }
  renderEntityControls(container) {
    if (!this.result)
      return;
    const controls = container.createDiv({ cls: "story-engine-extract-controls" });
    const search = controls.createEl("input", {
      type: "search",
      placeholder: "Search entities",
      cls: "story-engine-extract-search"
    });
    search.value = this.entitySearch;
    search.oninput = () => {
      this.entitySearch = search.value.trim();
      this.render();
    };
    const typeSelect = controls.createEl("select", {
      cls: "story-engine-extract-select"
    });
    typeSelect.createEl("option", { value: "all", text: "All types" });
    this.getEntityTypes(this.result.entities).forEach((type2) => {
      typeSelect.createEl("option", { value: type2, text: type2 });
    });
    typeSelect.value = this.entityFilterType;
    typeSelect.onchange = () => {
      this.entityFilterType = typeSelect.value;
      this.render();
    };
    const sortSelect = controls.createEl("select", {
      cls: "story-engine-extract-select"
    });
    sortSelect.createEl("option", { value: "name", text: "Sort: Name" });
    sortSelect.createEl("option", { value: "type", text: "Sort: Type" });
    sortSelect.createEl("option", { value: "status", text: "Sort: Status" });
    sortSelect.value = this.entitySort;
    sortSelect.onchange = () => {
      this.entitySort = sortSelect.value;
      this.render();
    };
  }
  renderRelationControls(container) {
    if (!this.result)
      return;
    const controls = container.createDiv({ cls: "story-engine-extract-controls" });
    const search = controls.createEl("input", {
      type: "search",
      placeholder: "Search relations",
      cls: "story-engine-extract-search"
    });
    search.value = this.relationSearch;
    search.oninput = () => {
      this.relationSearch = search.value.trim();
      this.render();
    };
    const typeSelect = controls.createEl("select", {
      cls: "story-engine-extract-select"
    });
    typeSelect.createEl("option", { value: "all", text: "All types" });
    this.getRelationTypes(this.result.relations).forEach((type2) => {
      typeSelect.createEl("option", { value: type2, text: type2 });
    });
    typeSelect.value = this.relationFilterType;
    typeSelect.onchange = () => {
      this.relationFilterType = typeSelect.value;
      this.render();
    };
    const sortSelect = controls.createEl("select", {
      cls: "story-engine-extract-select"
    });
    sortSelect.createEl("option", { value: "type", text: "Sort: Type" });
    sortSelect.createEl("option", { value: "status", text: "Sort: Status" });
    sortSelect.createEl("option", { value: "source", text: "Sort: Source" });
    sortSelect.createEl("option", { value: "target", text: "Sort: Target" });
    sortSelect.value = this.relationSort;
    sortSelect.onchange = () => {
      this.relationSort = sortSelect.value;
      this.render();
    };
  }
  getEntityTypes(entities) {
    const set3 = /* @__PURE__ */ new Set();
    entities.forEach((entity) => {
      if (entity.type) {
        set3.add(entity.type);
      }
    });
    return Array.from(set3).sort((a, b) => a.localeCompare(b));
  }
  getRelationTypes(relations) {
    const set3 = /* @__PURE__ */ new Set();
    relations.forEach((relation) => {
      if (relation.relation_type) {
        set3.add(relation.relation_type);
      }
    });
    return Array.from(set3).sort((a, b) => a.localeCompare(b));
  }
  filterAndSortEntities(entities) {
    const search = this.entitySearch.toLowerCase();
    let filtered = entities.filter((entity) => {
      var _a;
      if (this.entityFilterType !== "all" && entity.type !== this.entityFilterType) {
        return false;
      }
      if (!search)
        return true;
      return entity.name.toLowerCase().includes(search) || entity.type.toLowerCase().includes(search) || ((_a = entity.summary) != null ? _a : "").toLowerCase().includes(search);
    });
    const statusRank = (entity) => {
      if (entity.created)
        return 0;
      if (entity.found)
        return 1;
      return 2;
    };
    filtered = [...filtered].sort((a, b) => {
      switch (this.entitySort) {
        case "type":
          return a.type.localeCompare(b.type) || a.name.localeCompare(b.name);
        case "status":
          return statusRank(a) - statusRank(b) || a.name.localeCompare(b.name);
        default:
          return a.name.localeCompare(b.name);
      }
    });
    return filtered;
  }
  filterAndSortRelations(relations) {
    const search = this.relationSearch.toLowerCase();
    let filtered = relations.filter((relation) => {
      var _a, _b, _c, _d, _e;
      if (this.relationFilterType !== "all" && relation.relation_type !== this.relationFilterType) {
        return false;
      }
      if (!search)
        return true;
      const sourceLabel = ((_b = (_a = relation.source.name) != null ? _a : relation.source.ref) != null ? _b : "").toLowerCase();
      const targetLabel = ((_d = (_c = relation.target.name) != null ? _c : relation.target.ref) != null ? _d : "").toLowerCase();
      return relation.relation_type.toLowerCase().includes(search) || sourceLabel.includes(search) || targetLabel.includes(search) || relation.source.type.toLowerCase().includes(search) || relation.target.type.toLowerCase().includes(search) || ((_e = relation.summary) != null ? _e : "").toLowerCase().includes(search);
    });
    const statusRank = (relation) => {
      if (relation.status === "created")
        return 0;
      if (relation.status === "ready")
        return 1;
      if (relation.status === "pending_entities")
        return 2;
      return 3;
    };
    filtered = [...filtered].sort((a, b) => {
      switch (this.relationSort) {
        case "status":
          return statusRank(a) - statusRank(b) || a.relation_type.localeCompare(b.relation_type);
        case "source": {
          const aSource = a.source.name || a.source.ref;
          const bSource = b.source.name || b.source.ref;
          return aSource.localeCompare(bSource) || a.relation_type.localeCompare(b.relation_type);
        }
        case "target": {
          const aTarget = a.target.name || a.target.ref;
          const bTarget = b.target.name || b.target.ref;
          return aTarget.localeCompare(bTarget) || a.relation_type.localeCompare(b.relation_type);
        }
        default:
          return a.relation_type.localeCompare(b.relation_type);
      }
    });
    return filtered;
  }
  resolveRelationEntity(node) {
    if (!this.result) {
      return this.buildRelationEntity(node);
    }
    const existing = this.result.entities.find((entity) => {
      var _a;
      if (node.id && ((_a = entity.match) == null ? void 0 : _a.source_id) === node.id) {
        return true;
      }
      return entity.type === node.type && entity.name === node.name;
    });
    return existing != null ? existing : this.buildRelationEntity(node);
  }
  buildRelationEntity(node) {
    const hasId = !!(node.id && node.id.trim());
    return {
      type: node.type,
      name: node.name || node.ref,
      found: hasId,
      match: hasId ? {
        source_type: node.type,
        source_id: node.id,
        entity_name: node.name,
        similarity: 1,
        reason: "Relation match"
      } : void 0
    };
  }
  hasTempNode(node) {
    if (!node.id || !node.id.trim()) {
      return true;
    }
    if (node.id.startsWith("temp")) {
      return true;
    }
    return node.ref.startsWith("finding:");
  }
  async createPendingEntities(relation) {
    const nodes = [relation.source, relation.target];
    for (const node of nodes) {
      if (!this.hasTempNode(node)) {
        continue;
      }
      const entity = this.buildRelationEntity(node);
      const createdId = await this.createEntity(entity);
      if (createdId) {
        this.applyCreatedIdToRelation(relation, entity, createdId);
      }
    }
    this.render();
  }
  async createRelation(relation) {
    var _a, _b;
    if (!((_a = this.result) == null ? void 0 : _a.world_id)) {
      new import_obsidian18.Notice("World ID missing. Select a story or world first.", 4e3);
      return;
    }
    if (!relation.source.id || !relation.target.id) {
      new import_obsidian18.Notice("Create the related entities before creating the relation.", 4e3);
      return;
    }
    const created = await this.plugin.apiClient.createEntityRelation({
      world_id: this.result.world_id,
      source_type: relation.source.type,
      source_id: relation.source.id,
      target_type: relation.target.type,
      target_id: relation.target.id,
      relation_type: relation.relation_type,
      summary: relation.summary,
      create_mirror: (_b = relation.create_mirror) != null ? _b : false
    });
    relation.status = "created";
    relation.created_id = created.id;
    this.render();
    new import_obsidian18.Notice(`Relation created: ${relation.relation_type}`, 3e3);
  }
  applyCreatedIdToRelation(relation, entity, createdId) {
    const updateNode = (node) => {
      if (node.type !== entity.type)
        return false;
      if (entity.name && node.name && node.name !== entity.name)
        return false;
      node.id = createdId;
      node.name = entity.name;
      return true;
    };
    if (!updateNode(relation.source)) {
      updateNode(relation.target);
    }
    if (!this.hasTempNode(relation.source) && !this.hasTempNode(relation.target)) {
      relation.status = "ready";
    }
  }
  setActiveTab(tab) {
    this.activeTab = tab;
    this.pendingTabScroll = true;
    this.render();
  }
  applyPendingScroll() {
    if (!this.pendingTabScroll && this.pendingRelationScrollIndex === null) {
      return;
    }
    requestAnimationFrame(() => {
      if (this.pendingTabScroll) {
        const panel = this.contentRoot.querySelector(
          ".story-engine-extract-panel.is-active"
        );
        if (panel) {
          panel.scrollTop = 0;
          panel.scrollIntoView({ block: "start" });
        }
        this.pendingTabScroll = false;
      }
      if (this.pendingRelationScrollIndex !== null) {
        const selector = `.story-engine-extract-relations-entities[data-relation-index="${this.pendingRelationScrollIndex}"]`;
        const entityBlock = this.contentRoot.querySelector(selector);
        if (entityBlock) {
          entityBlock.scrollIntoView({ block: "start" });
        }
        this.pendingRelationScrollIndex = null;
      }
    });
=======
        new import_obsidian17.Notice(`Unsupported type: ${entity.type}`, 4e3);
        return;
    }
    new import_obsidian17.Notice(`Updated ${entity.type}: ${entity.name}`, 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  apiUrl: "http://localhost:8080",
  llmGatewayUrl: "http://localhost:8081",
  apiKey: "",
  tenantId: "",
  tenantName: "",
  syncFolderPath: "Stories",
  autoVersionSnapshots: true,
  conflictResolution: "service",
  mode: "local",
  showHelpBox: true,
  localModeVideoUrl: "https://example.com/setup-video",
  autoSyncOnApiUpdates: true,
<<<<<<< HEAD
  autoPushOnFileBlur: true
};
var StoryEnginePlugin = class extends import_obsidian19.Plugin {
=======
  autoPushOnFileBlur: true,
  sidebarPosition: "left"
};
var StoryEnginePlugin = class extends import_obsidian18.Plugin {
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
  constructor() {
    super(...arguments);
    this.extractResult = null;
    this.extractLogs = [];
    this.extractStatus = "idle";
    this.extractAbortController = null;
  }
  async onload() {
    var _a;
    await this.loadSettings();
    this.apiClient = new StoryEngineClient(
      this.settings.apiUrl,
      this.settings.apiKey,
      this.settings.tenantId || ""
    );
    this.apiClient.setMode(this.settings.mode || "local");
    this.apiClient.setAutoSyncOnApiUpdates(
      (_a = this.settings.autoSyncOnApiUpdates) != null ? _a : true
    );
    this.fileManager = new FileManager(
      this.app.vault,
      this.settings.syncFolderPath || "Stories"
    );
    this.syncService = new SyncService(
      this.apiClient,
      this.fileManager,
      this.settings,
      this.app
    );
    this.initializeAutoSyncManager();
    this.addSettingTab(new StoryEngineSettingTab(this.app, this));
    this.registerView(
      STORY_LIST_VIEW_TYPE,
      (leaf) => new StoryListView(leaf, this)
    );
    this.registerView(
      STORY_ENGINE_EXTRACT_VIEW_TYPE,
      (leaf) => new StoryEngineExtractView(leaf, this)
    );
    this.addRibbonIcon("book-open", "Story Engine", () => {
      this.activateView();
    });
    registerCommands(this);
    this.registerEvent(
      this.app.workspace.on("editor-menu", (menu, editor) => {
        const selection2 = editor.getSelection().trim();
        if (!selection2) {
          return;
        }
        menu.addItem((item) => {
          item.setTitle("Story Engine: Extract Entities and Relations");
          item.setIcon("search");
          item.onClick(() => {
            this.extractSelectionCommand(selection2, true);
          });
        });
        menu.addItem((item) => {
          item.setTitle("Story Engine: Extract Entities Only");
          item.setIcon("search");
          item.onClick(() => {
            this.extractSelectionCommand(selection2, false);
          });
        });
      })
    );
  }
  async onunload() {
    this.app.workspace.detachLeavesOfType(STORY_LIST_VIEW_TYPE);
    this.app.workspace.detachLeavesOfType(STORY_ENGINE_EXTRACT_VIEW_TYPE);
    if (this.syncService) {
      this.syncService.dispose();
    }
    if (this.autoSyncManager) {
      this.autoSyncManager.dispose();
      this.autoSyncManager = void 0;
    }
  }
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  async saveSettings() {
    var _a, _b;
    await this.saveData(this.settings);
    if (this.apiClient) {
      this.apiClient.setTenantId(this.settings.tenantId || "");
      this.apiClient.setMode(this.settings.mode || "local");
      this.apiClient.setAutoSyncOnApiUpdates(
        (_a = this.settings.autoSyncOnApiUpdates) != null ? _a : true
      );
    } else {
      this.apiClient = new StoryEngineClient(
        this.settings.apiUrl,
        this.settings.apiKey,
        this.settings.tenantId || ""
      );
      this.apiClient.setMode(this.settings.mode || "local");
      this.apiClient.setAutoSyncOnApiUpdates(
        (_b = this.settings.autoSyncOnApiUpdates) != null ? _b : true
      );
    }
    this.fileManager = new FileManager(
      this.app.vault,
      this.settings.syncFolderPath || "Stories"
    );
    if (this.syncService) {
      this.syncService.dispose();
    }
    this.syncService = new SyncService(
      this.apiClient,
      this.fileManager,
      this.settings,
      this.app
    );
    this.initializeAutoSyncManager();
  }
  initializeAutoSyncManager() {
    if (this.autoSyncManager) {
      this.autoSyncManager.dispose();
      this.autoSyncManager = void 0;
    }
    if (this.settings.autoPushOnFileBlur) {
      this.autoSyncManager = new AutoSyncManager(this);
    }
  }
  async createStoryCommand() {
    var _a;
    if (this.settings.mode === "remote") {
      const tenantId = (_a = this.settings.tenantId) == null ? void 0 : _a.trim();
      if (!tenantId) {
<<<<<<< HEAD
        new import_obsidian19.Notice("Please configure Tenant ID in settings", 5e3);
=======
        new import_obsidian18.Notice("Please configure Tenant ID in settings", 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;
      if (!uuidRegex.test(tenantId)) {
<<<<<<< HEAD
        new import_obsidian19.Notice("Invalid Tenant ID format. Please check your settings.", 5e3);
=======
        new import_obsidian18.Notice("Invalid Tenant ID format. Please check your settings.", 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
    }
    new CreateStoryModal(this.app, this, async (title, worldId, shouldSync) => {
      try {
<<<<<<< HEAD
        new import_obsidian19.Notice(`Creating story "${title}"...`);
        const story = await this.apiClient.createStory(title, worldId);
        new import_obsidian19.Notice(`Story "${title}" created successfully`);
        if (shouldSync) {
          try {
            new import_obsidian19.Notice(`Syncing story to Obsidian...`);
            await this.syncService.pullStory(story.id);
            new import_obsidian19.Notice(`Story synced to your vault!`);
          } catch (syncErr) {
            const syncErrorMessage = syncErr instanceof Error ? syncErr.message : "Failed to sync story";
            new import_obsidian19.Notice(`Story created but sync failed: ${syncErrorMessage}`, 5e3);
=======
        new import_obsidian18.Notice(`Creating story "${title}"...`);
        const story = await this.apiClient.createStory(title, worldId);
        new import_obsidian18.Notice(`Story "${title}" created successfully`);
        if (shouldSync) {
          try {
            new import_obsidian18.Notice(`Syncing story to Obsidian...`);
            await this.syncService.pullStory(story.id);
            new import_obsidian18.Notice(`Story synced to your vault!`);
          } catch (syncErr) {
            const syncErrorMessage = syncErr instanceof Error ? syncErr.message : "Failed to sync story";
            new import_obsidian18.Notice(`Story created but sync failed: ${syncErrorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
          }
        }
        const openView = this.app.workspace.getLeavesOfType(STORY_LIST_VIEW_TYPE)[0];
        if (openView) {
          const view = openView.view;
          await view.refresh();
          if (!shouldSync) {
            await view.showStoryDetails(story);
          }
        }
      } catch (err) {
        const errorMessage = err instanceof Error ? err.message : "Failed to create story";
<<<<<<< HEAD
        new import_obsidian19.Notice(`Error: ${errorMessage}`, 5e3);
=======
        new import_obsidian18.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      }
    }).open();
  }
  async activateView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType(STORY_LIST_VIEW_TYPE)[0];
    if (!leaf) {
      const rightLeaf = workspace.getRightLeaf(false);
      if (!rightLeaf) {
<<<<<<< HEAD
        new import_obsidian19.Notice("Could not create view. Please try again.", 3e3);
=======
        new import_obsidian18.Notice("Could not create view. Please try again.", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        return;
      }
      leaf = rightLeaf;
      await leaf.setViewState({
        type: STORY_LIST_VIEW_TYPE,
        active: true
      });
    }
    workspace.revealLeaf(leaf);
  }
  async activateExtractView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType(STORY_ENGINE_EXTRACT_VIEW_TYPE)[0];
    if (!leaf) {
      leaf = workspace.getLeavesOfType(STORY_LIST_VIEW_TYPE)[0];
    }
    if (!leaf) {
<<<<<<< HEAD
      new import_obsidian19.Notice("Could not open extract view. Please try again.", 3e3);
=======
      new import_obsidian18.Notice("Could not open extract view. Please try again.", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      return;
    }
    await leaf.setViewState({
      type: STORY_ENGINE_EXTRACT_VIEW_TYPE,
      active: true
    });
    workspace.revealLeaf(leaf);
  }
  async getActiveWorldId() {
    var _a;
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      return null;
    }
    const fileContent = await this.app.vault.read(activeFile);
    const frontmatter = this.fileManager.parseFrontmatter(fileContent);
    const storyId = frontmatter.story_id || (activeFile.name === "story.md" ? frontmatter.id : "");
    if (!storyId) {
      return null;
    }
    const story = await this.apiClient.getStory(storyId);
    return (_a = story.world_id) != null ? _a : null;
  }
  async extractSelectionCommand(selection2, includeRelations = true) {
    var _a, _b, _c;
    const trimmedSelection = selection2.trim();
    if (!trimmedSelection) {
<<<<<<< HEAD
      new import_obsidian19.Notice(
        includeRelations ? "Select text to extract entities and relations" : "Select text to extract entities",
        3e3
      );
      return;
    }
    const defaultTypes = ["character", "location", "artefact", "faction", "event"];
    const config = await ExtractConfigModal.open(
      this.app,
      defaultTypes,
      includeRelations
    );
    if (!config) {
      return;
    }
    if (this.settings.mode !== "remote") {
      new import_obsidian19.Notice("Extraction requires the full remote version.", 5e3);
=======
      new import_obsidian18.Notice("Select text to extract entities", 3e3);
      return;
    }
    if (this.settings.mode !== "remote") {
      new import_obsidian18.Notice("Extraction requires the full remote version.", 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      return;
    }
    const tenantId = (_a = this.settings.tenantId) == null ? void 0 : _a.trim();
    if (!tenantId) {
<<<<<<< HEAD
      new import_obsidian19.Notice("Please configure Tenant ID in settings", 5e3);
=======
      new import_obsidian18.Notice("Please configure Tenant ID in settings", 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      return;
    }
    const gatewayUrl = (_b = this.settings.llmGatewayUrl) == null ? void 0 : _b.trim();
    if (!gatewayUrl) {
<<<<<<< HEAD
      new import_obsidian19.Notice("Please configure LLM Gateway URL in settings", 5e3);
=======
      new import_obsidian18.Notice("Please configure LLM Gateway URL in settings", 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      return;
    }
    let worldId = null;
    try {
      worldId = await this.getActiveWorldId();
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : "Failed to resolve story";
<<<<<<< HEAD
      new import_obsidian19.Notice(`Error: ${errorMessage}`, 5e3);
      return;
    }
    if (!worldId) {
      new import_obsidian19.Notice(
=======
      new import_obsidian18.Notice(`Error: ${errorMessage}`, 5e3);
      return;
    }
    if (!worldId) {
      new import_obsidian18.Notice(
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
        "Open a synced story document before extracting entities.",
        5e3
      );
      return;
    }
    this.resetExtractState(trimmedSelection, worldId, config.includeRelations);
    await this.activateView();
    await this.activateExtractView();
    this.updateExtractViews();
    try {
      if ((_c = navigator == null ? void 0 : navigator.clipboard) == null ? void 0 : _c.writeText) {
        await navigator.clipboard.writeText(trimmedSelection);
      }
    } catch (e) {
    }
<<<<<<< HEAD
    new import_obsidian19.Notice("Starting extraction stream...", 3e3);
=======
    new import_obsidian18.Notice("Starting extraction stream...", 3e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
    await this.startExtractStream({
      tenantId,
      gatewayUrl,
      worldId,
      text: trimmedSelection,
      includeRelations: config.includeRelations,
      entityTypes: config.entityTypes
    });
  }
  updateExtractViews() {
    const listLeaf = this.app.workspace.getLeavesOfType(STORY_LIST_VIEW_TYPE)[0];
    if (listLeaf) {
      const view = listLeaf.view;
      if (view.viewMode === "list") {
        view.renderListContent();
      }
    }
    const extractLeaf = this.app.workspace.getLeavesOfType(STORY_ENGINE_EXTRACT_VIEW_TYPE)[0];
    if (extractLeaf) {
      const view = extractLeaf.view;
      view.setResult(this.extractResult);
      view.setLogs(this.extractLogs, this.extractStatus);
    }
  }
  resetExtractState(text, worldId, includeRelations = true) {
    this.cancelExtractStream();
    this.extractResult = {
      text,
      world_id: worldId,
      entities: [],
      relations: [],
      received_at: (/* @__PURE__ */ new Date()).toISOString(),
      include_relations: includeRelations
    };
    this.extractLogs = [];
    this.extractStatus = "running";
  }
  cancelExtractStream() {
    if (this.extractAbortController) {
      this.extractAbortController.abort();
      this.extractAbortController = null;
      this.extractStatus = "canceled";
      this.appendExtractLog({
        type: "client.cancel",
        message: "Extraction canceled by user."
      });
      this.updateExtractViews();
    }
  }
  appendExtractLog(event) {
    const timestamp = event.timestamp ? new Date(event.timestamp).toISOString() : (/* @__PURE__ */ new Date()).toISOString();
    this.extractLogs.push({
      id: `${timestamp}-${this.extractLogs.length}`,
      eventType: event.type,
      phase: event.phase,
      message: event.message,
      data: event.data,
      timestamp
    });
  }
  async startExtractStream(params) {
    const { tenantId, gatewayUrl, worldId, text, includeRelations, entityTypes } = params;
    const controller = new AbortController();
    this.extractAbortController = controller;
    this.appendExtractLog({
      type: "client.start",
      message: "Opening extraction stream."
    });
    this.updateExtractViews();
    try {
      const response = await fetch(
        `${gatewayUrl.replace(/\/$/, "")}/api/v1/entity-extract/stream`,
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "X-Tenant-ID": tenantId,
            ...this.settings.apiKey ? { Authorization: `Bearer ${this.settings.apiKey}` } : {}
          },
          body: JSON.stringify({
            text,
            world_id: worldId,
            include_relations: includeRelations,
            entity_types: entityTypes
          }),
          signal: controller.signal
        }
      );
      if (!response.ok) {
        let errorMessage = `HTTP ${response.status}: ${response.statusText}`;
        try {
          const errorBody = await response.json();
          if (errorBody == null ? void 0 : errorBody.error) {
            errorMessage = errorBody.error;
          }
        } catch (e) {
        }
        throw new Error(errorMessage);
      }
      if (!response.body) {
        throw new Error("No response stream available.");
      }
      const reader = response.body.getReader();
      const decoder = new TextDecoder("utf-8");
      let buffer = "";
      let currentEvent = "message";
      let dataLines = [];
      const flushEvent = () => {
        var _a, _b, _c, _d, _e;
        if (!dataLines.length)
          return;
        const rawData = dataLines.join("\n").trim();
        dataLines = [];
        if (!rawData)
          return;
        let parsed = null;
        try {
          parsed = JSON.parse(rawData);
        } catch (e) {
          this.appendExtractLog({
            type: "parse.error",
            message: "Failed to parse stream event payload.",
            data: { raw: rawData, event: currentEvent }
          });
          this.updateExtractViews();
          return;
        }
        if (!parsed.type) {
          parsed.type = currentEvent || "message";
        }
        if (parsed.type === "relation.error") {
          parsed.message = `\u274C ${parsed.message}`;
        } else if (parsed.type === "relation.success") {
          parsed.message = `\u2705 ${parsed.message}`;
        }
        this.appendExtractLog(parsed);
        if (parsed.type === "result_entities" && ((_a = parsed.data) == null ? void 0 : _a.entities)) {
          const entities = parsed.data.entities;
          if (this.extractResult) {
            this.extractResult.entities = entities != null ? entities : [];
            this.extractResult.received_at = (/* @__PURE__ */ new Date()).toISOString();
          }
          const foundCount = (_b = this.extractResult) == null ? void 0 : _b.entities.filter(
            (entity) => entity.found
          ).length;
<<<<<<< HEAD
          new import_obsidian19.Notice(
            `Entities extracted: ${foundCount != null ? foundCount : 0}/${(_d = (_c = this.extractResult) == null ? void 0 : _c.entities.length) != null ? _d : 0} matched`,
=======
          new import_obsidian18.Notice(
            `Extraction complete: ${foundCount != null ? foundCount : 0}/${(_e = (_d = this.extractResult) == null ? void 0 : _d.entities.length) != null ? _e : 0} matched`,
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
            4e3
          );
        }
        if (parsed.type === "result_relations" && ((_e = parsed.data) == null ? void 0 : _e.relations)) {
          const relations = parsed.data.relations;
          if (this.extractResult) {
            this.extractResult.relations = relations != null ? relations : [];
            this.extractResult.received_at = (/* @__PURE__ */ new Date()).toISOString();
          }
        }
        if (parsed.type === "error") {
          this.extractStatus = "error";
        }
        this.updateExtractViews();
      };
      while (true) {
        const { value, done } = await reader.read();
        if (done)
          break;
        buffer += decoder.decode(value, { stream: true });
        let lineEnd = buffer.indexOf("\n");
        while (lineEnd !== -1) {
          const line = buffer.slice(0, lineEnd).replace(/\r$/, "");
          buffer = buffer.slice(lineEnd + 1);
          lineEnd = buffer.indexOf("\n");
          if (!line) {
            flushEvent();
            currentEvent = "message";
            continue;
          }
          if (line.startsWith("event:")) {
            currentEvent = line.replace("event:", "").trim();
            continue;
          }
          if (line.startsWith("data:")) {
            dataLines.push(line.replace("data:", "").trim());
          }
        }
      }
      this.extractAbortController = null;
      if (this.extractStatus === "running") {
        this.extractStatus = "done";
      }
    } catch (err) {
      if (err instanceof DOMException && err.name === "AbortError") {
        return;
      }
      const errorMessage = err instanceof Error ? err.message : "Failed to extract entities";
      this.extractStatus = "error";
      this.appendExtractLog({
        type: "error",
        message: errorMessage
      });
<<<<<<< HEAD
      new import_obsidian19.Notice(`Error: ${errorMessage}`, 5e3);
=======
      new import_obsidian18.Notice(`Error: ${errorMessage}`, 5e3);
>>>>>>> 117207d (feat: adiciona worldview e detalhes de personagem no plugin Obsidian)
      this.updateExtractViews();
    }
  }
  openSettings() {
    const setting = this.app.setting;
    if (setting) {
      setting.open();
      setTimeout(() => {
        setting.openTabById(this.manifest.id);
      }, 100);
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3N5bmMvYXBpVXBkYXRlTm90aWZpZXIudHMiLCAic3JjL2FwaS9jbGllbnQudHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9jb21tYW5kcy50cyIsICJzcmMvdmlld3MvU3RvcnlTeW5jTW9kYWwudHMiLCAic3JjL3ZpZXdzL0NyZWF0ZVN0b3J5TW9kYWwudHMiLCAic3JjL3ZpZXdzL0NyZWF0ZVdvcmxkTW9kYWwudHMiLCAic3JjL3N5bmMvZmlsZU1hbmFnZXIudHMiLCAic3JjL3N5bmMvc3luY1NlcnZpY2UudHMiLCAic3JjL3N5bmMvY29udGVudEJsb2NrUGFyc2VyLnRzIiwgInNyYy92aWV3cy9tb2RhbHMvQ29uZmxpY3RNb2RhbC50cyIsICJzcmMvc3luYy9hdXRvU3luY01hbmFnZXIudHMiLCAic3JjL3ZpZXdzL1N0b3J5TGlzdFZpZXcudHMiLCAic3JjL3ZpZXdzL21vZGFscy9DaGFwdGVyTW9kYWwudHMiLCAic3JjL3ZpZXdzL21vZGFscy9TY2VuZU1vZGFsLnRzIiwgInNyYy92aWV3cy9tb2RhbHMvQmVhdE1vZGFsLnRzIiwgInNyYy92aWV3cy9tb2RhbHMvQ29udGVudEJsb2NrTW9kYWwudHMiLCAic3JjL2FwaS91bnNwbGFzaC50cyIsICJzcmMvdmlld3MvVGltZWxpbmVNb2RhbC50cyIsICJub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL2FzY2VuZGluZy5qcyIsICJub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL2Rlc2NlbmRpbmcuanMiLCAibm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9iaXNlY3Rvci5qcyIsICJub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL251bWJlci5qcyIsICJub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL2Jpc2VjdC5qcyIsICJub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL2V4dGVudC5qcyIsICJub2RlX21vZHVsZXMvaW50ZXJubWFwL3NyYy9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvZDMtYXJyYXkvc3JjL3RpY2tzLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1heGlzL3NyYy9pZGVudGl0eS5qcyIsICJub2RlX21vZHVsZXMvZDMtYXhpcy9zcmMvYXhpcy5qcyIsICJub2RlX21vZHVsZXMvZDMtZGlzcGF0Y2gvc3JjL2Rpc3BhdGNoLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL25hbWVzcGFjZXMuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvbmFtZXNwYWNlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL2NyZWF0b3IuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0b3IuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NlbGVjdC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9hcnJheS5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3RvckFsbC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vc2VsZWN0QWxsLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL21hdGNoZXIuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NlbGVjdENoaWxkLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zZWxlY3RDaGlsZHJlbi5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZmlsdGVyLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zcGFyc2UuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2VudGVyLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL2NvbnN0YW50LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9kYXRhLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9leGl0LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9qb2luLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9tZXJnZS5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vb3JkZXIuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3NvcnQuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2NhbGwuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL25vZGVzLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9ub2RlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9zaXplLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9lbXB0eS5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZWFjaC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vYXR0ci5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy93aW5kb3cuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL3N0eWxlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9wcm9wZXJ0eS5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vY2xhc3NlZC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vdGV4dC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vaHRtbC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vcmFpc2UuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2xvd2VyLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9hcHBlbmQuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2luc2VydC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vcmVtb3ZlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9jbG9uZS5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vZGF0dW0uanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL29uLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdGlvbi9kaXNwYXRjaC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2VsZWN0aW9uL3NyYy9zZWxlY3Rpb24vaXRlcmF0b3IuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNlbGVjdGlvbi9zcmMvc2VsZWN0aW9uL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zZWxlY3Rpb24vc3JjL3NlbGVjdC5qcyIsICJub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2RlZmluZS5qcyIsICJub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2NvbG9yLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvYmFzaXMuanMiLCAibm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9iYXNpc0Nsb3NlZC5qcyIsICJub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2NvbnN0YW50LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvY29sb3IuanMiLCAibm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9yZ2IuanMiLCAibm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9udW1iZXJBcnJheS5qcyIsICJub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2FycmF5LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvZGF0ZS5qcyIsICJub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL251bWJlci5qcyIsICJub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL29iamVjdC5qcyIsICJub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3N0cmluZy5qcyIsICJub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3ZhbHVlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvcm91bmQuanMiLCAibm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy90cmFuc2Zvcm0vZGVjb21wb3NlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvdHJhbnNmb3JtL3BhcnNlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvdHJhbnNmb3JtL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10aW1lci9zcmMvdGltZXIuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRpbWVyL3NyYy90aW1lb3V0LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3NjaGVkdWxlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy9pbnRlcnJ1cHQuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3NlbGVjdGlvbi9pbnRlcnJ1cHQuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vdHdlZW4uanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vaW50ZXJwb2xhdGUuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vYXR0ci5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9hdHRyVHdlZW4uanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vZGVsYXkuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vZHVyYXRpb24uanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vZWFzZS5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9lYXNlVmFyeWluZy5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9maWx0ZXIuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vbWVyZ2UuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vb24uanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vcmVtb3ZlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3NlbGVjdC5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9zZWxlY3RBbGwuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vc2VsZWN0aW9uLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3N0eWxlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy90cmFuc2l0aW9uL3N0eWxlVHdlZW4uanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vdGV4dC5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi90ZXh0VHdlZW4uanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vdHJhbnNpdGlvbi5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvdHJhbnNpdGlvbi9lbmQuanMiLCAibm9kZV9tb2R1bGVzL2QzLXRyYW5zaXRpb24vc3JjL3RyYW5zaXRpb24vaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2QzLWVhc2Uvc3JjL2N1YmljLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy10cmFuc2l0aW9uL3NyYy9zZWxlY3Rpb24vdHJhbnNpdGlvbi5qcyIsICJub2RlX21vZHVsZXMvZDMtdHJhbnNpdGlvbi9zcmMvc2VsZWN0aW9uL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1icnVzaC9zcmMvYnJ1c2guanMiLCAibm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvZm9ybWF0RGVjaW1hbC5qcyIsICJub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9leHBvbmVudC5qcyIsICJub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9mb3JtYXRHcm91cC5qcyIsICJub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9mb3JtYXROdW1lcmFscy5qcyIsICJub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9mb3JtYXRTcGVjaWZpZXIuanMiLCAibm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvZm9ybWF0VHJpbS5qcyIsICJub2RlX21vZHVsZXMvZDMtZm9ybWF0L3NyYy9mb3JtYXRQcmVmaXhBdXRvLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1mb3JtYXQvc3JjL2Zvcm1hdFJvdW5kZWQuanMiLCAibm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvZm9ybWF0VHlwZXMuanMiLCAibm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvaWRlbnRpdHkuanMiLCAibm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvbG9jYWxlLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1mb3JtYXQvc3JjL2RlZmF1bHRMb2NhbGUuanMiLCAibm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvcHJlY2lzaW9uRml4ZWQuanMiLCAibm9kZV9tb2R1bGVzL2QzLWZvcm1hdC9zcmMvcHJlY2lzaW9uUHJlZml4LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1mb3JtYXQvc3JjL3ByZWNpc2lvblJvdW5kLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zY2FsZS9zcmMvaW5pdC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2NhbGUvc3JjL29yZGluYWwuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNjYWxlL3NyYy9jb25zdGFudC5qcyIsICJub2RlX21vZHVsZXMvZDMtc2NhbGUvc3JjL251bWJlci5qcyIsICJub2RlX21vZHVsZXMvZDMtc2NhbGUvc3JjL2NvbnRpbnVvdXMuanMiLCAibm9kZV9tb2R1bGVzL2QzLXNjYWxlL3NyYy90aWNrRm9ybWF0LmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zY2FsZS9zcmMvbGluZWFyLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2NvbG9ycy5qcyIsICJub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9jYXRlZ29yaWNhbC9jYXRlZ29yeTEwLmpzIiwgIm5vZGVfbW9kdWxlcy9kMy16b29tL3NyYy90cmFuc2Zvcm0uanMiLCAic3JjL3ZpZXdzL0NoYXJhY3RlckRldGFpbHNWaWV3LnRzIiwgInNyYy92aWV3cy9TdG9yeUVuZ2luZUV4dHJhY3RWaWV3LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBOb3RpY2UsIFBsdWdpbiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHtcblx0RXh0cmFjdEVudGl0eVJlc3VsdCxcblx0RXh0cmFjdExvZ0VudHJ5LFxuXHRFeHRyYWN0U3RyZWFtRXZlbnQsXG5cdFN0b3J5RW5naW5lU2V0dGluZ3MsXG59IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBTdG9yeUVuZ2luZUNsaWVudCB9IGZyb20gXCIuL2FwaS9jbGllbnRcIjtcbmltcG9ydCB7IFN0b3J5RW5naW5lU2V0dGluZ1RhYiB9IGZyb20gXCIuL3NldHRpbmdzXCI7XG5pbXBvcnQgeyByZWdpc3RlckNvbW1hbmRzIH0gZnJvbSBcIi4vY29tbWFuZHNcIjtcbmltcG9ydCB7IFN0b3J5RGV0YWlsc01vZGFsIH0gZnJvbSBcIi4vdmlld3MvU3RvcnlEZXRhaWxzTW9kYWxcIjtcbmltcG9ydCB7IENyZWF0ZVN0b3J5TW9kYWwgfSBmcm9tIFwiLi92aWV3cy9DcmVhdGVTdG9yeU1vZGFsXCI7XG5pbXBvcnQgeyBGaWxlTWFuYWdlciB9IGZyb20gXCIuL3N5bmMvZmlsZU1hbmFnZXJcIjtcbmltcG9ydCB7IFN5bmNTZXJ2aWNlIH0gZnJvbSBcIi4vc3luYy9zeW5jU2VydmljZVwiO1xuaW1wb3J0IHsgQXV0b1N5bmNNYW5hZ2VyIH0gZnJvbSBcIi4vc3luYy9hdXRvU3luY01hbmFnZXJcIjtcbmltcG9ydCB7IFN0b3J5TGlzdFZpZXcsIFNUT1JZX0xJU1RfVklFV19UWVBFIH0gZnJvbSBcIi4vdmlld3MvU3RvcnlMaXN0Vmlld1wiO1xuaW1wb3J0IHtcblx0U3RvcnlFbmdpbmVFeHRyYWN0Vmlldyxcblx0U1RPUllfRU5HSU5FX0VYVFJBQ1RfVklFV19UWVBFLFxufSBmcm9tIFwiLi92aWV3cy9TdG9yeUVuZ2luZUV4dHJhY3RWaWV3XCI7XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFN0b3J5RW5naW5lU2V0dGluZ3MgPSB7XG5cdGFwaVVybDogXCJodHRwOi8vbG9jYWxob3N0OjgwODBcIixcblx0bGxtR2F0ZXdheVVybDogXCJodHRwOi8vbG9jYWxob3N0OjgwODFcIixcblx0YXBpS2V5OiBcIlwiLFxuXHR0ZW5hbnRJZDogXCJcIixcblx0dGVuYW50TmFtZTogXCJcIixcblx0c3luY0ZvbGRlclBhdGg6IFwiU3Rvcmllc1wiLFxuXHRhdXRvVmVyc2lvblNuYXBzaG90czogdHJ1ZSxcblx0Y29uZmxpY3RSZXNvbHV0aW9uOiBcInNlcnZpY2VcIixcblx0bW9kZTogXCJsb2NhbFwiLFxuXHRzaG93SGVscEJveDogdHJ1ZSxcblx0bG9jYWxNb2RlVmlkZW9Vcmw6IFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9zZXR1cC12aWRlb1wiLFxuXHRhdXRvU3luY09uQXBpVXBkYXRlczogdHJ1ZSxcblx0YXV0b1B1c2hPbkZpbGVCbHVyOiB0cnVlLFxuXHRzaWRlYmFyUG9zaXRpb246IFwibGVmdFwiLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RvcnlFbmdpbmVQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5ncyE6IFN0b3J5RW5naW5lU2V0dGluZ3M7XG5cdGFwaUNsaWVudCE6IFN0b3J5RW5naW5lQ2xpZW50O1xuXHRmaWxlTWFuYWdlciE6IEZpbGVNYW5hZ2VyO1xuXHRzeW5jU2VydmljZSE6IFN5bmNTZXJ2aWNlO1xuXHRwcml2YXRlIGF1dG9TeW5jTWFuYWdlcj86IEF1dG9TeW5jTWFuYWdlcjtcblx0ZXh0cmFjdFJlc3VsdDogRXh0cmFjdEVudGl0eVJlc3VsdCB8IG51bGwgPSBudWxsO1xuXHRleHRyYWN0TG9nczogRXh0cmFjdExvZ0VudHJ5W10gPSBbXTtcblx0ZXh0cmFjdFN0YXR1czogXCJpZGxlXCIgfCBcInJ1bm5pbmdcIiB8IFwiZG9uZVwiIHwgXCJlcnJvclwiIHwgXCJjYW5jZWxlZFwiID0gXCJpZGxlXCI7XG5cdHByaXZhdGUgZXh0cmFjdEFib3J0Q29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyIHwgbnVsbCA9IG51bGw7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHR0aGlzLmFwaUNsaWVudCA9IG5ldyBTdG9yeUVuZ2luZUNsaWVudChcblx0XHRcdHRoaXMuc2V0dGluZ3MuYXBpVXJsLFxuXHRcdFx0dGhpcy5zZXR0aW5ncy5hcGlLZXksXG5cdFx0XHR0aGlzLnNldHRpbmdzLnRlbmFudElkIHx8IFwiXCJcblx0XHQpO1xuXHRcdHRoaXMuYXBpQ2xpZW50LnNldE1vZGUodGhpcy5zZXR0aW5ncy5tb2RlIHx8IFwibG9jYWxcIik7XG5cdFx0dGhpcy5hcGlDbGllbnQuc2V0QXV0b1N5bmNPbkFwaVVwZGF0ZXMoXG5cdFx0XHR0aGlzLnNldHRpbmdzLmF1dG9TeW5jT25BcGlVcGRhdGVzID8/IHRydWVcblx0XHQpO1xuXG5cdFx0dGhpcy5maWxlTWFuYWdlciA9IG5ldyBGaWxlTWFuYWdlcihcblx0XHRcdHRoaXMuYXBwLnZhdWx0LFxuXHRcdFx0dGhpcy5zZXR0aW5ncy5zeW5jRm9sZGVyUGF0aCB8fCBcIlN0b3JpZXNcIlxuXHRcdCk7XG5cblx0XHR0aGlzLnN5bmNTZXJ2aWNlID0gbmV3IFN5bmNTZXJ2aWNlKFxuXHRcdFx0dGhpcy5hcGlDbGllbnQsXG5cdFx0XHR0aGlzLmZpbGVNYW5hZ2VyLFxuXHRcdFx0dGhpcy5zZXR0aW5ncyxcblx0XHRcdHRoaXMuYXBwXG5cdFx0KTtcblx0XHR0aGlzLmluaXRpYWxpemVBdXRvU3luY01hbmFnZXIoKTtcblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU3RvcnlFbmdpbmVTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cblx0XHQvLyBSZWdpc3RlciB0aGUgc3RvcnkgbGlzdCB2aWV3XG5cdFx0dGhpcy5yZWdpc3RlclZpZXcoXG5cdFx0XHRTVE9SWV9MSVNUX1ZJRVdfVFlQRSxcblx0XHRcdChsZWFmKSA9PiBuZXcgU3RvcnlMaXN0VmlldyhsZWFmLCB0aGlzKVxuXHRcdCk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyVmlldyhcblx0XHRcdFNUT1JZX0VOR0lORV9FWFRSQUNUX1ZJRVdfVFlQRSxcblx0XHRcdChsZWFmKSA9PiBuZXcgU3RvcnlFbmdpbmVFeHRyYWN0VmlldyhsZWFmLCB0aGlzKVxuXHRcdCk7XG5cblx0XHQvLyBBZGQgcmliYm9uIGljb24gdG8gb3BlbiB0aGUgdmlld1xuXHRcdHRoaXMuYWRkUmliYm9uSWNvbihcImJvb2stb3BlblwiLCBcIlN0b3J5IEVuZ2luZVwiLCAoKSA9PiB7XG5cdFx0XHR0aGlzLmFjdGl2YXRlVmlldygpO1xuXHRcdH0pO1xuXG5cdFx0cmVnaXN0ZXJDb21tYW5kcyh0aGlzKTtcblxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImVkaXRvci1tZW51XCIsIChtZW51LCBlZGl0b3IpID0+IHtcblx0XHRcdFx0Y29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpLnRyaW0oKTtcblx0XHRcdFx0aWYgKCFzZWxlY3Rpb24pIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKFwiU3RvcnkgRW5naW5lOiBFeHRyYWN0IGVudGl0aWVzXCIpO1xuXHRcdFx0XHRcdGl0ZW0uc2V0SWNvbihcInNlYXJjaFwiKTtcblx0XHRcdFx0XHRpdGVtLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5leHRyYWN0U2VsZWN0aW9uQ29tbWFuZChzZWxlY3Rpb24pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pXG5cdFx0KTtcblx0fVxuXG5cdGFzeW5jIG9udW5sb2FkKCkge1xuXHRcdC8vIERldGFjaCBhbGwgbGVhdmVzIG9mIHRoZSBzdG9yeSBsaXN0IHZpZXdcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFNUT1JZX0xJU1RfVklFV19UWVBFKTtcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFNUT1JZX0VOR0lORV9FWFRSQUNUX1ZJRVdfVFlQRSk7XG5cdFx0aWYgKHRoaXMuc3luY1NlcnZpY2UpIHtcblx0XHRcdHRoaXMuc3luY1NlcnZpY2UuZGlzcG9zZSgpO1xuXHRcdH1cblx0XHRpZiAodGhpcy5hdXRvU3luY01hbmFnZXIpIHtcblx0XHRcdHRoaXMuYXV0b1N5bmNNYW5hZ2VyLmRpc3Bvc2UoKTtcblx0XHRcdHRoaXMuYXV0b1N5bmNNYW5hZ2VyID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihcblx0XHRcdHt9LFxuXHRcdFx0REVGQVVMVF9TRVRUSU5HUyxcblx0XHRcdGF3YWl0IHRoaXMubG9hZERhdGEoKVxuXHRcdCk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0XHQvLyBVcGRhdGUgQVBJIGNsaWVudCB3aGVuIHNldHRpbmdzIGNoYW5nZVxuXHRcdGlmICh0aGlzLmFwaUNsaWVudCkge1xuXHRcdFx0dGhpcy5hcGlDbGllbnQuc2V0VGVuYW50SWQodGhpcy5zZXR0aW5ncy50ZW5hbnRJZCB8fCBcIlwiKTtcblx0XHRcdHRoaXMuYXBpQ2xpZW50LnNldE1vZGUodGhpcy5zZXR0aW5ncy5tb2RlIHx8IFwibG9jYWxcIik7XG5cdFx0XHR0aGlzLmFwaUNsaWVudC5zZXRBdXRvU3luY09uQXBpVXBkYXRlcyhcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5hdXRvU3luY09uQXBpVXBkYXRlcyA/PyB0cnVlXG5cdFx0XHQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmFwaUNsaWVudCA9IG5ldyBTdG9yeUVuZ2luZUNsaWVudChcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5hcGlVcmwsXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuYXBpS2V5LFxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLnRlbmFudElkIHx8IFwiXCJcblx0XHRcdCk7XG5cdFx0XHR0aGlzLmFwaUNsaWVudC5zZXRNb2RlKHRoaXMuc2V0dGluZ3MubW9kZSB8fCBcImxvY2FsXCIpO1xuXHRcdFx0dGhpcy5hcGlDbGllbnQuc2V0QXV0b1N5bmNPbkFwaVVwZGF0ZXMoXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuYXV0b1N5bmNPbkFwaVVwZGF0ZXMgPz8gdHJ1ZVxuXHRcdFx0KTtcblx0XHR9XG5cdFx0Ly8gVXBkYXRlIGZpbGUgbWFuYWdlciBiYXNlIHBhdGhcblx0XHR0aGlzLmZpbGVNYW5hZ2VyID0gbmV3IEZpbGVNYW5hZ2VyKFxuXHRcdFx0dGhpcy5hcHAudmF1bHQsXG5cdFx0XHR0aGlzLnNldHRpbmdzLnN5bmNGb2xkZXJQYXRoIHx8IFwiU3Rvcmllc1wiXG5cdFx0KTtcblx0XHQvLyBVcGRhdGUgc3luYyBzZXJ2aWNlXG5cdFx0aWYgKHRoaXMuc3luY1NlcnZpY2UpIHtcblx0XHRcdHRoaXMuc3luY1NlcnZpY2UuZGlzcG9zZSgpO1xuXHRcdH1cblx0XHR0aGlzLnN5bmNTZXJ2aWNlID0gbmV3IFN5bmNTZXJ2aWNlKFxuXHRcdFx0dGhpcy5hcGlDbGllbnQsXG5cdFx0XHR0aGlzLmZpbGVNYW5hZ2VyLFxuXHRcdFx0dGhpcy5zZXR0aW5ncyxcblx0XHRcdHRoaXMuYXBwXG5cdFx0KTtcblx0XHR0aGlzLmluaXRpYWxpemVBdXRvU3luY01hbmFnZXIoKTtcblx0fVxuXG5cdHByaXZhdGUgaW5pdGlhbGl6ZUF1dG9TeW5jTWFuYWdlcigpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5hdXRvU3luY01hbmFnZXIpIHtcblx0XHRcdHRoaXMuYXV0b1N5bmNNYW5hZ2VyLmRpc3Bvc2UoKTtcblx0XHRcdHRoaXMuYXV0b1N5bmNNYW5hZ2VyID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmF1dG9QdXNoT25GaWxlQmx1cikge1xuXHRcdFx0dGhpcy5hdXRvU3luY01hbmFnZXIgPSBuZXcgQXV0b1N5bmNNYW5hZ2VyKHRoaXMpO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGNyZWF0ZVN0b3J5Q29tbWFuZCgpIHtcblx0XHQvLyBWYWxpZGF0ZSB0ZW5hbnQgSUQgb25seSBpbiByZW1vdGUgbW9kZVxuXHRcdGlmICh0aGlzLnNldHRpbmdzLm1vZGUgPT09IFwicmVtb3RlXCIpIHtcblx0XHRcdGNvbnN0IHRlbmFudElkID0gdGhpcy5zZXR0aW5ncy50ZW5hbnRJZD8udHJpbSgpO1xuXHRcdFx0aWYgKCF0ZW5hbnRJZCkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiUGxlYXNlIGNvbmZpZ3VyZSBUZW5hbnQgSUQgaW4gc2V0dGluZ3NcIiwgNTAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQmFzaWMgVVVJRCBmb3JtYXQgdmFsaWRhdGlvblxuXHRcdFx0Y29uc3QgdXVpZFJlZ2V4ID0gL15bMC05YS1mXXs4fS1bMC05YS1mXXs0fS1bMC05YS1mXXs0fS1bMC05YS1mXXs0fS1bMC05YS1mXXsxMn0kL2k7XG5cdFx0XHRpZiAoIXV1aWRSZWdleC50ZXN0KHRlbmFudElkKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiSW52YWxpZCBUZW5hbnQgSUQgZm9ybWF0LiBQbGVhc2UgY2hlY2sgeW91ciBzZXR0aW5ncy5cIiwgNTAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBPcGVuIG1vZGFsIHRvIGdldCB0aXRsZSwgd29ybGQsIGFuZCBzeW5jIHByZWZlcmVuY2Vcblx0XHRuZXcgQ3JlYXRlU3RvcnlNb2RhbCh0aGlzLmFwcCwgdGhpcywgYXN5bmMgKHRpdGxlOiBzdHJpbmcsIHdvcmxkSWQ6IHN0cmluZyB8IHVuZGVmaW5lZCwgc2hvdWxkU3luYzogYm9vbGVhbikgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0bmV3IE5vdGljZShgQ3JlYXRpbmcgc3RvcnkgXCIke3RpdGxlfVwiLi4uYCk7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zdCBzdG9yeSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZVN0b3J5KHRpdGxlLCB3b3JsZElkKTtcblx0XHRcdFx0XG5cdFx0XHRcdG5ldyBOb3RpY2UoYFN0b3J5IFwiJHt0aXRsZX1cIiBjcmVhdGVkIHN1Y2Nlc3NmdWxseWApO1xuXG5cdFx0XHRcdC8vIFN5bmMgdG8gT2JzaWRpYW4gaWYgcmVxdWVzdGVkXG5cdFx0XHRcdGlmIChzaG91bGRTeW5jKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYFN5bmNpbmcgc3RvcnkgdG8gT2JzaWRpYW4uLi5gKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc3luY1NlcnZpY2UucHVsbFN0b3J5KHN0b3J5LmlkKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYFN0b3J5IHN5bmNlZCB0byB5b3VyIHZhdWx0IWApO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKHN5bmNFcnIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHN5bmNFcnJvck1lc3NhZ2UgPSBzeW5jRXJyIGluc3RhbmNlb2YgRXJyb3IgXG5cdFx0XHRcdFx0XHRcdD8gc3luY0Vyci5tZXNzYWdlIFxuXHRcdFx0XHRcdFx0XHQ6IFwiRmFpbGVkIHRvIHN5bmMgc3RvcnlcIjtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYFN0b3J5IGNyZWF0ZWQgYnV0IHN5bmMgZmFpbGVkOiAke3N5bmNFcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVXBkYXRlIHRoZSB2aWV3IGlmIGl0J3Mgb3BlblxuXHRcdFx0XHRjb25zdCBvcGVuVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoU1RPUllfTElTVF9WSUVXX1RZUEUpWzBdO1xuXHRcdFx0XHRpZiAob3BlblZpZXcpIHtcblx0XHRcdFx0XHRjb25zdCB2aWV3ID0gb3BlblZpZXcudmlldyBhcyBTdG9yeUxpc3RWaWV3O1xuXHRcdFx0XHRcdGF3YWl0IHZpZXcucmVmcmVzaCgpO1xuXHRcdFx0XHRcdGlmICghc2hvdWxkU3luYykge1xuXHRcdFx0XHRcdFx0Ly8gU2hvdyBkZXRhaWxzIGluIHRoZSB2aWV3XG5cdFx0XHRcdFx0XHRhd2FpdCB2aWV3LnNob3dTdG9yeURldGFpbHMoc3RvcnkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBjcmVhdGUgc3RvcnlcIjtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH0pLm9wZW4oKTtcblx0fVxuXG5cdGFzeW5jIGFjdGl2YXRlVmlldygpIHtcblx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG5cblx0XHRsZXQgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoU1RPUllfTElTVF9WSUVXX1RZUEUpWzBdO1xuXG5cdFx0aWYgKCFsZWFmKSB7XG5cdFx0XHQvLyBDcmVhdGUgbmV3IGxlYWYgaW4gdGhlIHJpZ2h0IHBhbmVsXG5cdFx0XHRjb25zdCByaWdodExlYWYgPSB3b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcblx0XHRcdGlmICghcmlnaHRMZWFmKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJDb3VsZCBub3QgY3JlYXRlIHZpZXcuIFBsZWFzZSB0cnkgYWdhaW4uXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRsZWFmID0gcmlnaHRMZWFmO1xuXHRcdFx0YXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xuXHRcdFx0XHR0eXBlOiBTVE9SWV9MSVNUX1ZJRVdfVFlQRSxcblx0XHRcdFx0YWN0aXZlOiB0cnVlLFxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0d29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG5cdH1cblxuXHRhc3luYyBhY3RpdmF0ZUV4dHJhY3RWaWV3KCkge1xuXHRcdGNvbnN0IHsgd29ya3NwYWNlIH0gPSB0aGlzLmFwcDtcblxuXHRcdGxldCBsZWFmID0gd29ya3NwYWNlLmdldExlYXZlc09mVHlwZShTVE9SWV9FTkdJTkVfRVhUUkFDVF9WSUVXX1RZUEUpWzBdO1xuXG5cdFx0aWYgKCFsZWFmKSB7XG5cdFx0XHRsZWFmID0gd29ya3NwYWNlLmdldExlYXZlc09mVHlwZShTVE9SWV9MSVNUX1ZJRVdfVFlQRSlbMF07XG5cdFx0fVxuXG5cdFx0aWYgKCFsZWFmKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiQ291bGQgbm90IG9wZW4gZXh0cmFjdCB2aWV3LiBQbGVhc2UgdHJ5IGFnYWluLlwiLCAzMDAwKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7XG5cdFx0XHR0eXBlOiBTVE9SWV9FTkdJTkVfRVhUUkFDVF9WSUVXX1RZUEUsXG5cdFx0XHRhY3RpdmU6IHRydWUsXG5cdFx0fSk7XG5cblx0XHR3b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZ2V0QWN0aXZlV29ybGRJZCgpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRpZiAoIWFjdGl2ZUZpbGUpIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMuZmlsZU1hbmFnZXIucGFyc2VGcm9udG1hdHRlcihmaWxlQ29udGVudCk7XG5cdFx0Y29uc3Qgc3RvcnlJZCA9XG5cdFx0XHRmcm9udG1hdHRlci5zdG9yeV9pZCB8fFxuXHRcdFx0KGFjdGl2ZUZpbGUubmFtZSA9PT0gXCJzdG9yeS5tZFwiID8gZnJvbnRtYXR0ZXIuaWQgOiBcIlwiKTtcblxuXHRcdGlmICghc3RvcnlJZCkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3RvcnkgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRTdG9yeShzdG9yeUlkKTtcblx0XHRyZXR1cm4gc3Rvcnkud29ybGRfaWQgPz8gbnVsbDtcblx0fVxuXG5cdGFzeW5jIGV4dHJhY3RTZWxlY3Rpb25Db21tYW5kKHNlbGVjdGlvbjogc3RyaW5nKSB7XG5cdFx0Y29uc3QgdHJpbW1lZFNlbGVjdGlvbiA9IHNlbGVjdGlvbi50cmltKCk7XG5cdFx0aWYgKCF0cmltbWVkU2VsZWN0aW9uKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiU2VsZWN0IHRleHQgdG8gZXh0cmFjdCBlbnRpdGllc1wiLCAzMDAwKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5zZXR0aW5ncy5tb2RlICE9PSBcInJlbW90ZVwiKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiRXh0cmFjdGlvbiByZXF1aXJlcyB0aGUgZnVsbCByZW1vdGUgdmVyc2lvbi5cIiwgNTAwMCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgdGVuYW50SWQgPSB0aGlzLnNldHRpbmdzLnRlbmFudElkPy50cmltKCk7XG5cdFx0aWYgKCF0ZW5hbnRJZCkge1xuXHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBjb25maWd1cmUgVGVuYW50IElEIGluIHNldHRpbmdzXCIsIDUwMDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGdhdGV3YXlVcmwgPSB0aGlzLnNldHRpbmdzLmxsbUdhdGV3YXlVcmw/LnRyaW0oKTtcblx0XHRpZiAoIWdhdGV3YXlVcmwpIHtcblx0XHRcdG5ldyBOb3RpY2UoXCJQbGVhc2UgY29uZmlndXJlIExMTSBHYXRld2F5IFVSTCBpbiBzZXR0aW5nc1wiLCA1MDAwKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRsZXQgd29ybGRJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cdFx0dHJ5IHtcblx0XHRcdHdvcmxkSWQgPSBhd2FpdCB0aGlzLmdldEFjdGl2ZVdvcmxkSWQoKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9XG5cdFx0XHRcdGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byByZXNvbHZlIHN0b3J5XCI7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCF3b3JsZElkKSB7XG5cdFx0XHRuZXcgTm90aWNlKFxuXHRcdFx0XHRcIk9wZW4gYSBzeW5jZWQgc3RvcnkgZG9jdW1lbnQgYmVmb3JlIGV4dHJhY3RpbmcgZW50aXRpZXMuXCIsXG5cdFx0XHRcdDUwMDBcblx0XHRcdCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5yZXNldEV4dHJhY3RTdGF0ZSh0cmltbWVkU2VsZWN0aW9uLCB3b3JsZElkKTtcblx0XHRhd2FpdCB0aGlzLmFjdGl2YXRlVmlldygpO1xuXHRcdGF3YWl0IHRoaXMuYWN0aXZhdGVFeHRyYWN0VmlldygpO1xuXHRcdHRoaXMudXBkYXRlRXh0cmFjdFZpZXdzKCk7XG5cblx0XHR0cnkge1xuXHRcdFx0aWYgKG5hdmlnYXRvcj8uY2xpcGJvYXJkPy53cml0ZVRleHQpIHtcblx0XHRcdFx0YXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodHJpbW1lZFNlbGVjdGlvbik7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHQvLyBDbGlwYm9hcmQgaXMgb3B0aW9uYWw7IGlnbm9yZSBmYWlsdXJlcy5cblx0XHR9XG5cblx0XHRuZXcgTm90aWNlKFwiU3RhcnRpbmcgZXh0cmFjdGlvbiBzdHJlYW0uLi5cIiwgMzAwMCk7XG5cdFx0YXdhaXQgdGhpcy5zdGFydEV4dHJhY3RTdHJlYW0oe1xuXHRcdFx0dGVuYW50SWQsXG5cdFx0XHRnYXRld2F5VXJsLFxuXHRcdFx0d29ybGRJZCxcblx0XHRcdHRleHQ6IHRyaW1tZWRTZWxlY3Rpb24sXG5cdFx0fSk7XG5cdH1cblxuXHR1cGRhdGVFeHRyYWN0Vmlld3MoKSB7XG5cdFx0Y29uc3QgbGlzdExlYWYgPVxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShTVE9SWV9MSVNUX1ZJRVdfVFlQRSlbMF07XG5cdFx0aWYgKGxpc3RMZWFmKSB7XG5cdFx0XHRjb25zdCB2aWV3ID0gbGlzdExlYWYudmlldyBhcyBTdG9yeUxpc3RWaWV3O1xuXHRcdFx0aWYgKHZpZXcudmlld01vZGUgPT09IFwibGlzdFwiKSB7XG5cdFx0XHRcdHZpZXcucmVuZGVyTGlzdENvbnRlbnQoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRjb25zdCBleHRyYWN0TGVhZiA9XG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFNUT1JZX0VOR0lORV9FWFRSQUNUX1ZJRVdfVFlQRSlbMF07XG5cdFx0aWYgKGV4dHJhY3RMZWFmKSB7XG5cdFx0XHRjb25zdCB2aWV3ID0gZXh0cmFjdExlYWYudmlldyBhcyBTdG9yeUVuZ2luZUV4dHJhY3RWaWV3O1xuXHRcdFx0dmlldy5zZXRSZXN1bHQodGhpcy5leHRyYWN0UmVzdWx0KTtcblx0XHRcdHZpZXcuc2V0TG9ncyh0aGlzLmV4dHJhY3RMb2dzLCB0aGlzLmV4dHJhY3RTdGF0dXMpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgcmVzZXRFeHRyYWN0U3RhdGUodGV4dDogc3RyaW5nLCB3b3JsZElkOiBzdHJpbmcpIHtcblx0XHR0aGlzLmNhbmNlbEV4dHJhY3RTdHJlYW0oKTtcblx0XHR0aGlzLmV4dHJhY3RSZXN1bHQgPSB7XG5cdFx0XHR0ZXh0LFxuXHRcdFx0d29ybGRfaWQ6IHdvcmxkSWQsXG5cdFx0XHRlbnRpdGllczogW10sXG5cdFx0XHRyZWNlaXZlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuXHRcdH07XG5cdFx0dGhpcy5leHRyYWN0TG9ncyA9IFtdO1xuXHRcdHRoaXMuZXh0cmFjdFN0YXR1cyA9IFwicnVubmluZ1wiO1xuXHR9XG5cblx0Y2FuY2VsRXh0cmFjdFN0cmVhbSgpIHtcblx0XHRpZiAodGhpcy5leHRyYWN0QWJvcnRDb250cm9sbGVyKSB7XG5cdFx0XHR0aGlzLmV4dHJhY3RBYm9ydENvbnRyb2xsZXIuYWJvcnQoKTtcblx0XHRcdHRoaXMuZXh0cmFjdEFib3J0Q29udHJvbGxlciA9IG51bGw7XG5cdFx0XHR0aGlzLmV4dHJhY3RTdGF0dXMgPSBcImNhbmNlbGVkXCI7XG5cdFx0XHR0aGlzLmFwcGVuZEV4dHJhY3RMb2coe1xuXHRcdFx0XHR0eXBlOiBcImNsaWVudC5jYW5jZWxcIixcblx0XHRcdFx0bWVzc2FnZTogXCJFeHRyYWN0aW9uIGNhbmNlbGVkIGJ5IHVzZXIuXCIsXG5cdFx0XHR9KTtcblx0XHRcdHRoaXMudXBkYXRlRXh0cmFjdFZpZXdzKCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhcHBlbmRFeHRyYWN0TG9nKGV2ZW50OiBFeHRyYWN0U3RyZWFtRXZlbnQpIHtcblx0XHRjb25zdCB0aW1lc3RhbXAgPSBldmVudC50aW1lc3RhbXBcblx0XHRcdD8gbmV3IERhdGUoZXZlbnQudGltZXN0YW1wKS50b0lTT1N0cmluZygpXG5cdFx0XHQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcblx0XHR0aGlzLmV4dHJhY3RMb2dzLnB1c2goe1xuXHRcdFx0aWQ6IGAke3RpbWVzdGFtcH0tJHt0aGlzLmV4dHJhY3RMb2dzLmxlbmd0aH1gLFxuXHRcdFx0ZXZlbnRUeXBlOiBldmVudC50eXBlLFxuXHRcdFx0cGhhc2U6IGV2ZW50LnBoYXNlLFxuXHRcdFx0bWVzc2FnZTogZXZlbnQubWVzc2FnZSxcblx0XHRcdGRhdGE6IGV2ZW50LmRhdGEsXG5cdFx0XHR0aW1lc3RhbXAsXG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHN0YXJ0RXh0cmFjdFN0cmVhbShwYXJhbXM6IHtcblx0XHR0ZW5hbnRJZDogc3RyaW5nO1xuXHRcdGdhdGV3YXlVcmw6IHN0cmluZztcblx0XHR3b3JsZElkOiBzdHJpbmc7XG5cdFx0dGV4dDogc3RyaW5nO1xuXHR9KSB7XG5cdFx0Y29uc3QgeyB0ZW5hbnRJZCwgZ2F0ZXdheVVybCwgd29ybGRJZCwgdGV4dCB9ID0gcGFyYW1zO1xuXHRcdGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cdFx0dGhpcy5leHRyYWN0QWJvcnRDb250cm9sbGVyID0gY29udHJvbGxlcjtcblx0XHR0aGlzLmFwcGVuZEV4dHJhY3RMb2coe1xuXHRcdFx0dHlwZTogXCJjbGllbnQuc3RhcnRcIixcblx0XHRcdG1lc3NhZ2U6IFwiT3BlbmluZyBleHRyYWN0aW9uIHN0cmVhbS5cIixcblx0XHR9KTtcblx0XHR0aGlzLnVwZGF0ZUV4dHJhY3RWaWV3cygpO1xuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG5cdFx0XHRcdGAke2dhdGV3YXlVcmwucmVwbGFjZSgvXFwvJC8sIFwiXCIpfS9hcGkvdjEvZW50aXR5LWV4dHJhY3Qvc3RyZWFtYCxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdFx0XCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG5cdFx0XHRcdFx0XHRcIlgtVGVuYW50LUlEXCI6IHRlbmFudElkLFxuXHRcdFx0XHRcdFx0Li4uKHRoaXMuc2V0dGluZ3MuYXBpS2V5XG5cdFx0XHRcdFx0XHRcdD8geyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5zZXR0aW5ncy5hcGlLZXl9YCB9XG5cdFx0XHRcdFx0XHRcdDoge30pLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0XHRcdFx0dGV4dCxcblx0XHRcdFx0XHRcdHdvcmxkX2lkOiB3b3JsZElkLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdHNpZ25hbDogY29udHJvbGxlci5zaWduYWwsXG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cblx0XHRcdGlmICghcmVzcG9uc2Uub2spIHtcblx0XHRcdFx0bGV0IGVycm9yTWVzc2FnZSA9IGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWA7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29uc3QgZXJyb3JCb2R5ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkgYXMgeyBlcnJvcj86IHN0cmluZyB9O1xuXHRcdFx0XHRcdGlmIChlcnJvckJvZHk/LmVycm9yKSB7XG5cdFx0XHRcdFx0XHRlcnJvck1lc3NhZ2UgPSBlcnJvckJvZHkuZXJyb3I7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHQvLyBJZ25vcmUgSlNPTiBwYXJzZSBlcnJvcnMuXG5cdFx0XHRcdH1cblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICghcmVzcG9uc2UuYm9keSkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJObyByZXNwb25zZSBzdHJlYW0gYXZhaWxhYmxlLlwiKTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgcmVhZGVyID0gcmVzcG9uc2UuYm9keS5nZXRSZWFkZXIoKTtcblx0XHRcdGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiKTtcblx0XHRcdGxldCBidWZmZXIgPSBcIlwiO1xuXHRcdFx0bGV0IGN1cnJlbnRFdmVudCA9IFwibWVzc2FnZVwiO1xuXHRcdFx0bGV0IGRhdGFMaW5lczogc3RyaW5nW10gPSBbXTtcblxuXHRcdFx0Y29uc3QgZmx1c2hFdmVudCA9ICgpID0+IHtcblx0XHRcdFx0aWYgKCFkYXRhTGluZXMubGVuZ3RoKSByZXR1cm47XG5cdFx0XHRcdGNvbnN0IHJhd0RhdGEgPSBkYXRhTGluZXMuam9pbihcIlxcblwiKS50cmltKCk7XG5cdFx0XHRcdGRhdGFMaW5lcyA9IFtdO1xuXHRcdFx0XHRpZiAoIXJhd0RhdGEpIHJldHVybjtcblxuXHRcdFx0XHRsZXQgcGFyc2VkOiBFeHRyYWN0U3RyZWFtRXZlbnQgfCBudWxsID0gbnVsbDtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRwYXJzZWQgPSBKU09OLnBhcnNlKHJhd0RhdGEpIGFzIEV4dHJhY3RTdHJlYW1FdmVudDtcblx0XHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdFx0dGhpcy5hcHBlbmRFeHRyYWN0TG9nKHtcblx0XHRcdFx0XHRcdHR5cGU6IFwicGFyc2UuZXJyb3JcIixcblx0XHRcdFx0XHRcdG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHBhcnNlIHN0cmVhbSBldmVudCBwYXlsb2FkLlwiLFxuXHRcdFx0XHRcdFx0ZGF0YTogeyByYXc6IHJhd0RhdGEsIGV2ZW50OiBjdXJyZW50RXZlbnQgfSxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUV4dHJhY3RWaWV3cygpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICghcGFyc2VkLnR5cGUpIHtcblx0XHRcdFx0XHRwYXJzZWQudHlwZSA9IGN1cnJlbnRFdmVudCB8fCBcIm1lc3NhZ2VcIjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMuYXBwZW5kRXh0cmFjdExvZyhwYXJzZWQpO1xuXG5cdFx0XHRcdGlmIChwYXJzZWQudHlwZSA9PT0gXCJyZXN1bHRcIiAmJiBwYXJzZWQuZGF0YT8ucGF5bG9hZCkge1xuXHRcdFx0XHRcdGNvbnN0IHBheWxvYWQgPSBwYXJzZWQuZGF0YS5wYXlsb2FkIGFzIHtcblx0XHRcdFx0XHRcdGVudGl0aWVzOiBFeHRyYWN0RW50aXR5UmVzdWx0W1wiZW50aXRpZXNcIl07XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRpZiAodGhpcy5leHRyYWN0UmVzdWx0KSB7XG5cdFx0XHRcdFx0XHR0aGlzLmV4dHJhY3RSZXN1bHQuZW50aXRpZXMgPSBwYXlsb2FkLmVudGl0aWVzID8/IFtdO1xuXHRcdFx0XHRcdFx0dGhpcy5leHRyYWN0UmVzdWx0LnJlY2VpdmVkX2F0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLmV4dHJhY3RTdGF0dXMgPSBcImRvbmVcIjtcblx0XHRcdFx0XHRjb25zdCBmb3VuZENvdW50ID0gdGhpcy5leHRyYWN0UmVzdWx0Py5lbnRpdGllcy5maWx0ZXIoXG5cdFx0XHRcdFx0XHQoZW50aXR5KSA9PiBlbnRpdHkuZm91bmRcblx0XHRcdFx0XHQpLmxlbmd0aDtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFxuXHRcdFx0XHRcdFx0YEV4dHJhY3Rpb24gY29tcGxldGU6ICR7Zm91bmRDb3VudCA/PyAwfS8ke3RoaXMuZXh0cmFjdFJlc3VsdD8uZW50aXRpZXMubGVuZ3RoID8/IDB9IG1hdGNoZWRgLFxuXHRcdFx0XHRcdFx0NDAwMFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAocGFyc2VkLnR5cGUgPT09IFwiZXJyb3JcIikge1xuXHRcdFx0XHRcdHRoaXMuZXh0cmFjdFN0YXR1cyA9IFwiZXJyb3JcIjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMudXBkYXRlRXh0cmFjdFZpZXdzKCk7XG5cdFx0XHR9O1xuXG5cdFx0XHR3aGlsZSAodHJ1ZSkge1xuXHRcdFx0XHRjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuXHRcdFx0XHRpZiAoZG9uZSkgYnJlYWs7XG5cdFx0XHRcdGJ1ZmZlciArPSBkZWNvZGVyLmRlY29kZSh2YWx1ZSwgeyBzdHJlYW06IHRydWUgfSk7XG5cblx0XHRcdFx0bGV0IGxpbmVFbmQgPSBidWZmZXIuaW5kZXhPZihcIlxcblwiKTtcblx0XHRcdFx0d2hpbGUgKGxpbmVFbmQgIT09IC0xKSB7XG5cdFx0XHRcdFx0Y29uc3QgbGluZSA9IGJ1ZmZlci5zbGljZSgwLCBsaW5lRW5kKS5yZXBsYWNlKC9cXHIkLywgXCJcIik7XG5cdFx0XHRcdFx0YnVmZmVyID0gYnVmZmVyLnNsaWNlKGxpbmVFbmQgKyAxKTtcblx0XHRcdFx0XHRsaW5lRW5kID0gYnVmZmVyLmluZGV4T2YoXCJcXG5cIik7XG5cblx0XHRcdFx0XHRpZiAoIWxpbmUpIHtcblx0XHRcdFx0XHRcdGZsdXNoRXZlbnQoKTtcblx0XHRcdFx0XHRcdGN1cnJlbnRFdmVudCA9IFwibWVzc2FnZVwiO1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGxpbmUuc3RhcnRzV2l0aChcImV2ZW50OlwiKSkge1xuXHRcdFx0XHRcdFx0Y3VycmVudEV2ZW50ID0gbGluZS5yZXBsYWNlKFwiZXZlbnQ6XCIsIFwiXCIpLnRyaW0oKTtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChsaW5lLnN0YXJ0c1dpdGgoXCJkYXRhOlwiKSkge1xuXHRcdFx0XHRcdFx0ZGF0YUxpbmVzLnB1c2gobGluZS5yZXBsYWNlKFwiZGF0YTpcIiwgXCJcIikudHJpbSgpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0dGhpcy5leHRyYWN0QWJvcnRDb250cm9sbGVyID0gbnVsbDtcblx0XHRcdGlmICh0aGlzLmV4dHJhY3RTdGF0dXMgPT09IFwicnVubmluZ1wiKSB7XG5cdFx0XHRcdHRoaXMuZXh0cmFjdFN0YXR1cyA9IFwiZG9uZVwiO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0aWYgKGVyciBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbiAmJiBlcnIubmFtZSA9PT0gXCJBYm9ydEVycm9yXCIpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID1cblx0XHRcdFx0ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIGV4dHJhY3QgZW50aXRpZXNcIjtcblx0XHRcdHRoaXMuZXh0cmFjdFN0YXR1cyA9IFwiZXJyb3JcIjtcblx0XHRcdHRoaXMuYXBwZW5kRXh0cmFjdExvZyh7XG5cdFx0XHRcdHR5cGU6IFwiZXJyb3JcIixcblx0XHRcdFx0bWVzc2FnZTogZXJyb3JNZXNzYWdlLFxuXHRcdFx0fSk7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHR0aGlzLnVwZGF0ZUV4dHJhY3RWaWV3cygpO1xuXHRcdH1cblx0fVxuXG5cdG9wZW5TZXR0aW5ncygpIHtcblx0XHRjb25zdCBzZXR0aW5nID0gKHRoaXMuYXBwIGFzIGFueSkuc2V0dGluZztcblx0XHRpZiAoc2V0dGluZykge1xuXHRcdFx0c2V0dGluZy5vcGVuKCk7XG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0c2V0dGluZy5vcGVuVGFiQnlJZCh0aGlzLm1hbmlmZXN0LmlkKTtcblx0XHRcdH0sIDEwMCk7XG5cdFx0fVxuXHR9XG59XG4iLCAiaW1wb3J0IHsgU3luY0VudGl0eVBheWxvYWQgfSBmcm9tIFwiLi9lbnRpdHlTeW5jVHlwZXNcIjtcblxudHlwZSBTdWJzY3JpYmVyID0gKHBheWxvYWQ6IFN5bmNFbnRpdHlQYXlsb2FkKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPjtcblxuY2xhc3MgQXBpVXBkYXRlTm90aWZpZXIge1xuXHRwcml2YXRlIHN1YnNjcmliZXJzID0gbmV3IFNldDxTdWJzY3JpYmVyPigpO1xuXG5cdHN1YnNjcmliZShzdWJzY3JpYmVyOiBTdWJzY3JpYmVyKTogKCkgPT4gdm9pZCB7XG5cdFx0dGhpcy5zdWJzY3JpYmVycy5hZGQoc3Vic2NyaWJlcik7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdHRoaXMuc3Vic2NyaWJlcnMuZGVsZXRlKHN1YnNjcmliZXIpO1xuXHRcdH07XG5cdH1cblxuXHRhc3luYyBub3RpZnkocGF5bG9hZDogU3luY0VudGl0eVBheWxvYWQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRmb3IgKGNvbnN0IHN1YnNjcmliZXIgb2YgdGhpcy5zdWJzY3JpYmVycykge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgc3Vic2NyaWJlcihwYXlsb2FkKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKFwiQXV0byBzeW5jIHN1YnNjcmliZXIgZmFpbGVkXCIsIGVycik7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBjb25zdCBhcGlVcGRhdGVOb3RpZmllciA9IG5ldyBBcGlVcGRhdGVOb3RpZmllcigpO1xuXG4iLCAiaW1wb3J0IHtcblx0RXJyb3JSZXNwb25zZSxcblx0U3RvcnksXG5cdFRlbmFudCxcblx0Q2hhcHRlcixcblx0U2NlbmUsXG5cdEJlYXQsXG5cdFN0b3J5V2l0aEhpZXJhcmNoeSxcblx0Q2hhcHRlcldpdGhDb250ZW50LFxuXHRTY2VuZVdpdGhCZWF0cyxcblx0Q29udGVudEJsb2NrLFxuXHRDb250ZW50QW5jaG9yLFxuXHRXb3JsZCxcblx0UlBHU3lzdGVtLFxuXHRDaGFyYWN0ZXIsXG5cdExvY2F0aW9uLFxuXHRBcnRpZmFjdCxcblx0V29ybGRFdmVudCxcblx0VHJhaXQsXG5cdEFyY2hldHlwZSxcblx0QXJjaGV0eXBlVHJhaXQsXG5cdEZhY3Rpb24sXG5cdEZhY3Rpb25SZWZlcmVuY2UsXG5cdExvcmUsXG5cdExvcmVSZWZlcmVuY2UsXG5cdENoYXJhY3RlclRyYWl0LFxuXHRDaGFyYWN0ZXJSZWxhdGlvbnNoaXAsXG5cdEV2ZW50Q2hhcmFjdGVyLFxuXHRFdmVudFJlZmVyZW5jZSxcblx0U2NlbmVSZWZlcmVuY2UsXG5cdFRpbWVDb25maWcsXG59IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgU3luY0VudGl0eVBheWxvYWQgfSBmcm9tIFwiLi4vc3luYy9lbnRpdHlTeW5jVHlwZXNcIjtcbmltcG9ydCB7IGFwaVVwZGF0ZU5vdGlmaWVyIH0gZnJvbSBcIi4uL3N5bmMvYXBpVXBkYXRlTm90aWZpZXJcIjtcblxuZXhwb3J0IGNsYXNzIFN0b3J5RW5naW5lQ2xpZW50IHtcblx0cHJpdmF0ZSBtb2RlOiBcImxvY2FsXCIgfCBcInJlbW90ZVwiID0gXCJyZW1vdGVcIjtcblx0cHJpdmF0ZSBhdXRvU3luY09uQXBpVXBkYXRlcyA9IHRydWU7XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSBhcGlVcmw6IHN0cmluZyxcblx0XHRwcml2YXRlIGFwaUtleTogc3RyaW5nLFxuXHRcdHByaXZhdGUgdGVuYW50SWQ6IHN0cmluZyA9IFwiXCJcblx0KSB7fVxuXG5cdHNldFRlbmFudElkKHRlbmFudElkOiBzdHJpbmcpOiB2b2lkIHtcblx0XHR0aGlzLnRlbmFudElkID0gdGVuYW50SWQudHJpbSgpO1xuXHR9XG5cblx0c2V0TW9kZShtb2RlOiBcImxvY2FsXCIgfCBcInJlbW90ZVwiKTogdm9pZCB7XG5cdFx0dGhpcy5tb2RlID0gbW9kZTtcblx0fVxuXG5cdHNldEF1dG9TeW5jT25BcGlVcGRhdGVzKGVuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcblx0XHR0aGlzLmF1dG9TeW5jT25BcGlVcGRhdGVzID0gZW5hYmxlZDtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcmVxdWVzdDxUPihcblx0XHRtZXRob2Q6IHN0cmluZyxcblx0XHRlbmRwb2ludDogc3RyaW5nLFxuXHRcdGJvZHk/OiB1bmtub3duLFxuXHRcdHRlbmFudElkT3ZlcnJpZGU/OiBzdHJpbmdcblx0KTogUHJvbWlzZTxUPiB7XG5cdFx0Y29uc3QgdXJsID0gYCR7dGhpcy5hcGlVcmx9JHtlbmRwb2ludH1gO1xuXHRcdGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuXHRcdFxuXHRcdGhlYWRlcnMuc2V0KFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcblxuXHRcdGlmICh0aGlzLmFwaUtleSkge1xuXHRcdFx0aGVhZGVycy5zZXQoXCJBdXRob3JpemF0aW9uXCIsIGBCZWFyZXIgJHt0aGlzLmFwaUtleX1gKTtcblx0XHR9XG5cblx0XHQvLyBVc2Ugb3ZlcnJpZGUgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSB1c2UgaW5zdGFuY2UgdGVuYW50SWRcblx0XHRjb25zdCBlZmZlY3RpdmVUZW5hbnRJZCA9IHRlbmFudElkT3ZlcnJpZGUgPz8gdGhpcy50ZW5hbnRJZDtcblx0XHRpZiAoZWZmZWN0aXZlVGVuYW50SWQpIHtcblx0XHRcdGNvbnN0IHRyaW1tZWRUZW5hbnRJZCA9IGVmZmVjdGl2ZVRlbmFudElkLnRyaW0oKTtcblx0XHRcdGlmICh0cmltbWVkVGVuYW50SWQpIHtcblx0XHRcdFx0aGVhZGVycy5zZXQoXCJYLVRlbmFudC1JRFwiLCB0cmltbWVkVGVuYW50SWQpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IG9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge1xuXHRcdFx0bWV0aG9kLFxuXHRcdFx0aGVhZGVycyxcblx0XHR9O1xuXG5cdFx0aWYgKGJvZHkpIHtcblx0XHRcdG9wdGlvbnMuYm9keSA9IEpTT04uc3RyaW5naWZ5KGJvZHkpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCBvcHRpb25zKTtcblxuXHRcdGlmICghcmVzcG9uc2Uub2spIHtcblx0XHRcdGxldCBlcnJvcjogRXJyb3JSZXNwb25zZTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGVycm9yID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkgYXMgRXJyb3JSZXNwb25zZTtcblx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRlcnJvciA9IHtcblx0XHRcdFx0XHRlcnJvcjogXCJ1bmtub3duX2Vycm9yXCIsXG5cdFx0XHRcdFx0bWVzc2FnZTogYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCxcblx0XHRcdFx0XHRjb2RlOiBcIkhUVFBfRVJST1JcIixcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UgfHwgZXJyb3IuZXJyb3IgfHwgYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YDtcblx0XHRcdHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuXHRcdH1cblxuXHRcdHJldHVybiByZXNwb25zZS5qc29uKCkgYXMgUHJvbWlzZTxUPjtcblx0fVxuXG5cdGFzeW5jIGxpc3RTdG9yaWVzKCk6IFByb21pc2U8U3RvcnlbXT4ge1xuXHRcdGlmICh0aGlzLm1vZGUgPT09IFwicmVtb3RlXCIgJiYgKCF0aGlzLnRlbmFudElkIHx8ICF0aGlzLnRlbmFudElkLnRyaW0oKSkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlRlbmFudCBJRCBpcyByZXF1aXJlZFwiKTtcblx0XHR9XG5cblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHN0b3JpZXM6IFN0b3J5W10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0XCIvYXBpL3YxL3N0b3JpZXNcIlxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnN0b3JpZXMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRTdG9yeShpZDogc3RyaW5nKTogUHJvbWlzZTxTdG9yeT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgc3Rvcnk6IFN0b3J5IH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL3N0b3JpZXMvJHtpZH1gXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2Uuc3Rvcnk7XG5cdH1cblxuXHRhc3luYyBjcmVhdGVTdG9yeSh0aXRsZTogc3RyaW5nLCB3b3JsZElkPzogc3RyaW5nKTogUHJvbWlzZTxTdG9yeT4ge1xuXHRcdGlmICh0aGlzLm1vZGUgPT09IFwicmVtb3RlXCIgJiYgKCF0aGlzLnRlbmFudElkIHx8ICF0aGlzLnRlbmFudElkLnRyaW0oKSkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlRlbmFudCBJRCBpcyByZXF1aXJlZFwiKTtcblx0XHR9XG5cblx0XHRjb25zdCBib2R5OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0geyB0aXRsZTogdGl0bGUudHJpbSgpIH07XG5cdFx0aWYgKHdvcmxkSWQpIHtcblx0XHRcdGJvZHkud29ybGRfaWQgPSB3b3JsZElkO1xuXHRcdH1cblxuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgc3Rvcnk6IFN0b3J5IH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRcIi9hcGkvdjEvc3Rvcmllc1wiLFxuXHRcdFx0Ym9keVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnN0b3J5O1xuXHR9XG5cblx0YXN5bmMgY2xvbmVTdG9yeShpZDogc3RyaW5nKTogUHJvbWlzZTxTdG9yeT4ge1xuXHRcdGlmICghdGhpcy50ZW5hbnRJZCB8fCAhdGhpcy50ZW5hbnRJZC50cmltKCkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlRlbmFudCBJRCBpcyByZXF1aXJlZFwiKTtcblx0XHR9XG5cblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHN0b3J5OiBTdG9yeSB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0YC9hcGkvdjEvc3Rvcmllcy8ke2lkfS9jbG9uZWAsXG5cdFx0XHR7fVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnN0b3J5O1xuXHR9XG5cblx0YXN5bmMgZ2V0VGVuYW50KGlkOiBzdHJpbmcpOiBQcm9taXNlPFRlbmFudD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgdGVuYW50OiBUZW5hbnQgfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvdGVuYW50cy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS50ZW5hbnQ7XG5cdH1cblxuXHRhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5yZXF1ZXN0PHsgc3RhdHVzOiBzdHJpbmcgfT4oXCJHRVRcIiwgXCIvaGVhbHRoXCIpO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgdXBkYXRlU3RvcnkoaWQ6IHN0cmluZywgdGl0bGU6IHN0cmluZywgc3RhdHVzPzogc3RyaW5nKTogUHJvbWlzZTxTdG9yeT4ge1xuXHRcdGNvbnN0IGJvZHk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7IHRpdGxlOiB0aXRsZS50cmltKCkgfTtcblx0XHRpZiAoc3RhdHVzKSB7XG5cdFx0XHRib2R5LnN0YXR1cyA9IHN0YXR1cztcblx0XHR9XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBzdG9yeTogU3RvcnkgfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvc3Rvcmllcy8ke2lkfWAsXG5cdFx0XHRib2R5XG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2Uuc3Rvcnk7XG5cdH1cblxuXHRhc3luYyBnZXRTdG9yeVdpdGhIaWVyYXJjaHkoaWQ6IHN0cmluZyk6IFByb21pc2U8U3RvcnlXaXRoSGllcmFyY2h5PiB7XG5cdFx0Y29uc3Qgc3RvcnkgPSBhd2FpdCB0aGlzLmdldFN0b3J5KGlkKTtcblx0XHRjb25zdCBjaGFwdGVycyA9IGF3YWl0IHRoaXMuZ2V0Q2hhcHRlcnMoaWQpO1xuXG5cdFx0Y29uc3QgY2hhcHRlcnNXaXRoQ29udGVudDogQ2hhcHRlcldpdGhDb250ZW50W10gPSBhd2FpdCBQcm9taXNlLmFsbChcblx0XHRcdGNoYXB0ZXJzLm1hcChhc3luYyAoY2hhcHRlcikgPT4ge1xuXHRcdFx0XHRjb25zdCBzY2VuZXMgPSBhd2FpdCB0aGlzLmdldFNjZW5lcyhjaGFwdGVyLmlkKTtcblx0XHRcdFx0Y29uc3Qgc2NlbmVzV2l0aEJlYXRzOiBTY2VuZVdpdGhCZWF0c1tdID0gYXdhaXQgUHJvbWlzZS5hbGwoXG5cdFx0XHRcdFx0c2NlbmVzLm1hcChhc3luYyAoc2NlbmUpID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IGJlYXRzID0gYXdhaXQgdGhpcy5nZXRCZWF0cyhzY2VuZS5pZCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4geyBzY2VuZSwgYmVhdHMgfTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdFx0XHRyZXR1cm4geyBjaGFwdGVyLCBzY2VuZXM6IHNjZW5lc1dpdGhCZWF0cyB9O1xuXHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHN0b3J5LFxuXHRcdFx0Y2hhcHRlcnM6IGNoYXB0ZXJzV2l0aENvbnRlbnQsXG5cdFx0fTtcblx0fVxuXG5cdGFzeW5jIGNyZWF0ZUNoYXB0ZXIoc3RvcnlJZDogc3RyaW5nLCBjaGFwdGVyOiBQYXJ0aWFsPENoYXB0ZXI+KTogUHJvbWlzZTxDaGFwdGVyPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBjaGFwdGVyOiBDaGFwdGVyIH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRcIi9hcGkvdjEvY2hhcHRlcnNcIixcblx0XHRcdHtcblx0XHRcdFx0c3RvcnlfaWQ6IHN0b3J5SWQsXG5cdFx0XHRcdG51bWJlcjogY2hhcHRlci5udW1iZXIsXG5cdFx0XHRcdHRpdGxlOiBjaGFwdGVyLnRpdGxlLFxuXHRcdFx0XHRzdGF0dXM6IGNoYXB0ZXIuc3RhdHVzLFxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0dm9pZCB0aGlzLnB1Ymxpc2hDaGFwdGVyVXBkYXRlKHJlc3BvbnNlLmNoYXB0ZXIuaWQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jaGFwdGVyO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlQ2hhcHRlcihpZDogc3RyaW5nLCBjaGFwdGVyOiBQYXJ0aWFsPENoYXB0ZXI+KTogUHJvbWlzZTxDaGFwdGVyPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBjaGFwdGVyOiBDaGFwdGVyIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2NoYXB0ZXJzLyR7aWR9YCxcblx0XHRcdGNoYXB0ZXJcblx0XHQpO1xuXHRcdHZvaWQgdGhpcy5wdWJsaXNoQ2hhcHRlclVwZGF0ZShyZXNwb25zZS5jaGFwdGVyLmlkKTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuY2hhcHRlcjtcblx0fVxuXG5cdGFzeW5jIGdldENoYXB0ZXJzKHN0b3J5SWQ6IHN0cmluZyk6IFByb21pc2U8Q2hhcHRlcltdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBjaGFwdGVyczogQ2hhcHRlcltdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL3N0b3JpZXMvJHtzdG9yeUlkfS9jaGFwdGVyc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jaGFwdGVycyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldENoYXB0ZXIoaWQ6IHN0cmluZyk6IFByb21pc2U8Q2hhcHRlcj4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgY2hhcHRlcjogQ2hhcHRlciB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9jaGFwdGVycy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jaGFwdGVyO1xuXHR9XG5cblx0YXN5bmMgZGVsZXRlQ2hhcHRlcihpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFwiREVMRVRFXCIsIGAvYXBpL3YxL2NoYXB0ZXJzLyR7aWR9YCk7XG5cdH1cblxuXHRhc3luYyBjcmVhdGVTY2VuZShzY2VuZTogUGFydGlhbDxTY2VuZT4pOiBQcm9taXNlPFNjZW5lPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBzY2VuZTogU2NlbmUgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdFwiL2FwaS92MS9zY2VuZXNcIixcblx0XHRcdHNjZW5lXG5cdFx0KTtcblx0XHR2b2lkIHRoaXMucHVibGlzaFNjZW5lVHJlZShyZXNwb25zZS5zY2VuZS5pZCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnNjZW5lO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlU2NlbmUoaWQ6IHN0cmluZywgc2NlbmU6IFBhcnRpYWw8U2NlbmU+KTogUHJvbWlzZTxTY2VuZT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgc2NlbmU6IFNjZW5lIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL3NjZW5lcy8ke2lkfWAsXG5cdFx0XHRzY2VuZVxuXHRcdCk7XG5cdFx0dm9pZCB0aGlzLnB1Ymxpc2hTY2VuZVRyZWUocmVzcG9uc2Uuc2NlbmUuaWQpO1xuXHRcdHJldHVybiByZXNwb25zZS5zY2VuZTtcblx0fVxuXG5cdGFzeW5jIGdldFNjZW5lcyhjaGFwdGVySWQ6IHN0cmluZyk6IFByb21pc2U8U2NlbmVbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgc2NlbmVzOiBTY2VuZVtdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2NoYXB0ZXJzLyR7Y2hhcHRlcklkfS9zY2VuZXNgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2Uuc2NlbmVzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgZ2V0U2NlbmUoaWQ6IHN0cmluZyk6IFByb21pc2U8U2NlbmU+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHNjZW5lOiBTY2VuZSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9zY2VuZXMvJHtpZH1gXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2Uuc2NlbmU7XG5cdH1cblxuXHRhc3luYyBkZWxldGVTY2VuZShpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFwiREVMRVRFXCIsIGAvYXBpL3YxL3NjZW5lcy8ke2lkfWApO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlQmVhdChiZWF0OiBQYXJ0aWFsPEJlYXQ+KTogUHJvbWlzZTxCZWF0PiB7XG5cdFx0aWYgKCFiZWF0LnNjZW5lX2lkKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJzY2VuZV9pZCBpcyByZXF1aXJlZCB0byBjcmVhdGUgYSBiZWF0XCIpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHBheWxvYWQ6IFBhcnRpYWw8QmVhdD4gPSB7IC4uLmJlYXQgfTtcblxuXHRcdGlmICghcGF5bG9hZC5vcmRlcl9udW0gfHwgcGF5bG9hZC5vcmRlcl9udW0gPD0gMCkge1xuXHRcdFx0Y29uc3QgZXhpc3RpbmdCZWF0cyA9IGF3YWl0IHRoaXMuZ2V0QmVhdHMoYmVhdC5zY2VuZV9pZCk7XG5cdFx0XHRjb25zdCBuZXh0T3JkZXIgPVxuXHRcdFx0XHRleGlzdGluZ0JlYXRzLmxlbmd0aCA+IDBcblx0XHRcdFx0XHQ/IE1hdGgubWF4KC4uLmV4aXN0aW5nQmVhdHMubWFwKChiKSA9PiBiLm9yZGVyX251bSB8fCAwKSkgKyAxXG5cdFx0XHRcdFx0OiAxO1xuXHRcdFx0cGF5bG9hZC5vcmRlcl9udW0gPSBuZXh0T3JkZXI7XG5cdFx0fVxuXG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBiZWF0OiBCZWF0IH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRcIi9hcGkvdjEvYmVhdHNcIixcblx0XHRcdHBheWxvYWRcblx0XHQpO1xuXHRcdHZvaWQgdGhpcy5wdWJsaXNoU2NlbmVUcmVlKHJlc3BvbnNlLmJlYXQuc2NlbmVfaWQpO1xuXHRcdHJldHVybiByZXNwb25zZS5iZWF0O1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlQmVhdChpZDogc3RyaW5nLCBiZWF0OiBQYXJ0aWFsPEJlYXQ+KTogUHJvbWlzZTxCZWF0PiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBiZWF0OiBCZWF0IH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2JlYXRzLyR7aWR9YCxcblx0XHRcdGJlYXRcblx0XHQpO1xuXHRcdHZvaWQgdGhpcy5wdWJsaXNoU2NlbmVUcmVlKHJlc3BvbnNlLmJlYXQuc2NlbmVfaWQpO1xuXHRcdHJldHVybiByZXNwb25zZS5iZWF0O1xuXHR9XG5cblx0YXN5bmMgZ2V0QmVhdHMoc2NlbmVJZDogc3RyaW5nKTogUHJvbWlzZTxCZWF0W10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGJlYXRzOiBCZWF0W10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvc2NlbmVzLyR7c2NlbmVJZH0vYmVhdHNgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuYmVhdHMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRCZWF0KGlkOiBzdHJpbmcpOiBQcm9taXNlPEJlYXQ+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGJlYXQ6IEJlYXQgfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvYmVhdHMvJHtpZH1gXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuYmVhdDtcblx0fVxuXG5cdGFzeW5jIGRlbGV0ZUJlYXQoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcIkRFTEVURVwiLCBgL2FwaS92MS9iZWF0cy8ke2lkfWApO1xuXHR9XG5cblx0Ly8gR2V0IGFsbCB2ZXJzaW9ucyBvZiBhIHN0b3J5IChmb3IgdmVyc2lvbiBoaXN0b3J5KVxuXHRhc3luYyBnZXRTdG9yeVZlcnNpb25zKHJvb3RTdG9yeUlkOiBzdHJpbmcpOiBQcm9taXNlPFN0b3J5W10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHN0b3JpZXM6IFN0b3J5W10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvc3Rvcmllcy8ke3Jvb3RTdG9yeUlkfS92ZXJzaW9uc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5zdG9yaWVzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgZ2V0U2NlbmVzQnlTdG9yeShzdG9yeUlkOiBzdHJpbmcpOiBQcm9taXNlPFNjZW5lW10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHNjZW5lczogU2NlbmVbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9zdG9yaWVzLyR7c3RvcnlJZH0vc2NlbmVzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnNjZW5lcyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIG1vdmVTY2VuZShzY2VuZUlkOiBzdHJpbmcsIGNoYXB0ZXJJZDogc3RyaW5nIHwgbnVsbCk6IFByb21pc2U8U2NlbmU+IHtcblx0XHRjb25zdCBib2R5OiB7IGNoYXB0ZXJfaWQ/OiBzdHJpbmcgfCBudWxsIH0gPSB7fTtcblx0XHRpZiAoY2hhcHRlcklkICE9PSBudWxsKSB7XG5cdFx0XHRib2R5LmNoYXB0ZXJfaWQgPSBjaGFwdGVySWQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGJvZHkuY2hhcHRlcl9pZCA9IG51bGw7XG5cdFx0fVxuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgc2NlbmU6IFNjZW5lIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL3NjZW5lcy8ke3NjZW5lSWR9L21vdmVgLFxuXHRcdFx0Ym9keVxuXHRcdCk7XG5cdFx0dm9pZCB0aGlzLnB1Ymxpc2hTY2VuZVRyZWUocmVzcG9uc2Uuc2NlbmUuaWQpO1xuXHRcdHJldHVybiByZXNwb25zZS5zY2VuZTtcblx0fVxuXG5cdGFzeW5jIGdldEJlYXRzQnlTdG9yeShzdG9yeUlkOiBzdHJpbmcpOiBQcm9taXNlPEJlYXRbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgYmVhdHM6IEJlYXRbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9zdG9yaWVzLyR7c3RvcnlJZH0vYmVhdHNgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuYmVhdHMgfHwgW107XG5cdH1cblxuXHRhc3luYyBtb3ZlQmVhdChiZWF0SWQ6IHN0cmluZywgc2NlbmVJZDogc3RyaW5nKTogUHJvbWlzZTxCZWF0PiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBiZWF0OiBCZWF0IH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2JlYXRzLyR7YmVhdElkfS9tb3ZlYCxcblx0XHRcdHsgc2NlbmVfaWQ6IHNjZW5lSWQgfVxuXHRcdCk7XG5cdFx0dm9pZCB0aGlzLnB1Ymxpc2hTY2VuZVRyZWUocmVzcG9uc2UuYmVhdC5zY2VuZV9pZCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmJlYXQ7XG5cdH1cblxuXHRhc3luYyBnZXRDb250ZW50QmxvY2tzKGNoYXB0ZXJJZDogc3RyaW5nKTogUHJvbWlzZTxDb250ZW50QmxvY2tbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgY29udGVudF9ibG9ja3M6IENvbnRlbnRCbG9ja1tdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2NoYXB0ZXJzLyR7Y2hhcHRlcklkfS9jb250ZW50LWJsb2Nrc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jb250ZW50X2Jsb2NrcyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldENvbnRlbnRCbG9jayhpZDogc3RyaW5nKTogUHJvbWlzZTxDb250ZW50QmxvY2s+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGNvbnRlbnRfYmxvY2s6IENvbnRlbnRCbG9jayB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9jb250ZW50LWJsb2Nrcy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jb250ZW50X2Jsb2NrO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlQ29udGVudEJsb2NrKGNoYXB0ZXJJZDogc3RyaW5nLCBjb250ZW50QmxvY2s6IFBhcnRpYWw8Q29udGVudEJsb2NrPik6IFByb21pc2U8Q29udGVudEJsb2NrPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBjb250ZW50X2Jsb2NrOiBDb250ZW50QmxvY2sgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdGAvYXBpL3YxL2NoYXB0ZXJzLyR7Y2hhcHRlcklkfS9jb250ZW50LWJsb2Nrc2AsXG5cdFx0XHRjb250ZW50QmxvY2tcblx0XHQpO1xuXHRcdHZvaWQgdGhpcy5wdWJsaXNoQ29udGVudEJsb2NrVXBkYXRlKHJlc3BvbnNlLmNvbnRlbnRfYmxvY2suaWQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jb250ZW50X2Jsb2NrO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlQ29udGVudEJsb2NrKGlkOiBzdHJpbmcsIGNvbnRlbnRCbG9jazogUGFydGlhbDxDb250ZW50QmxvY2s+KTogUHJvbWlzZTxDb250ZW50QmxvY2s+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGNvbnRlbnRfYmxvY2s6IENvbnRlbnRCbG9jayB9Pihcblx0XHRcdFwiUFVUXCIsXG5cdFx0XHRgL2FwaS92MS9jb250ZW50LWJsb2Nrcy8ke2lkfWAsXG5cdFx0XHRjb250ZW50QmxvY2tcblx0XHQpO1xuXHRcdHZvaWQgdGhpcy5wdWJsaXNoQ29udGVudEJsb2NrVXBkYXRlKHJlc3BvbnNlLmNvbnRlbnRfYmxvY2suaWQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jb250ZW50X2Jsb2NrO1xuXHR9XG5cblx0YXN5bmMgZGVsZXRlQ29udGVudEJsb2NrKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXCJERUxFVEVcIiwgYC9hcGkvdjEvY29udGVudC1ibG9ja3MvJHtpZH1gKTtcblx0fVxuXG5cdGFzeW5jIGdldENvbnRlbnRBbmNob3JzKGNvbnRlbnRCbG9ja0lkOiBzdHJpbmcpOiBQcm9taXNlPENvbnRlbnRBbmNob3JbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgYW5jaG9yczogQ29udGVudEFuY2hvcltdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2NvbnRlbnQtYmxvY2tzLyR7Y29udGVudEJsb2NrSWR9L2FuY2hvcnNgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuYW5jaG9ycyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldENvbnRlbnRCbG9ja3NCeVNjZW5lKHNjZW5lSWQ6IHN0cmluZyk6IFByb21pc2U8Q29udGVudEJsb2NrW10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGNvbnRlbnRfYmxvY2tzOiBDb250ZW50QmxvY2tbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9zY2VuZXMvJHtzY2VuZUlkfS9jb250ZW50LWJsb2Nrc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jb250ZW50X2Jsb2NrcyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldENvbnRlbnRCbG9ja3NCeUJlYXQoYmVhdElkOiBzdHJpbmcpOiBQcm9taXNlPENvbnRlbnRCbG9ja1tdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBjb250ZW50X2Jsb2NrczogQ29udGVudEJsb2NrW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvYmVhdHMvJHtiZWF0SWR9L2NvbnRlbnQtYmxvY2tzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmNvbnRlbnRfYmxvY2tzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlQ29udGVudEFuY2hvcihjb250ZW50QmxvY2tJZDogc3RyaW5nLCBlbnRpdHlUeXBlOiBzdHJpbmcsIGVudGl0eUlkOiBzdHJpbmcpOiBQcm9taXNlPENvbnRlbnRBbmNob3I+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGFuY2hvcjogQ29udGVudEFuY2hvciB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0YC9hcGkvdjEvY29udGVudC1ibG9ja3MvJHtjb250ZW50QmxvY2tJZH0vYW5jaG9yc2AsXG5cdFx0XHR7XG5cdFx0XHRcdGVudGl0eV90eXBlOiBlbnRpdHlUeXBlLFxuXHRcdFx0XHRlbnRpdHlfaWQ6IGVudGl0eUlkLFxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmFuY2hvcjtcblx0fVxuXG5cdGFzeW5jIGRlbGV0ZUNvbnRlbnRBbmNob3IoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcIkRFTEVURVwiLCBgL2FwaS92MS9jb250ZW50LWFuY2hvcnMvJHtpZH1gKTtcblx0fVxuXG5cdGFzeW5jIGdldFdvcmxkcygpOiBQcm9taXNlPFdvcmxkW10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHdvcmxkczogV29ybGRbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRcIi9hcGkvdjEvd29ybGRzXCJcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS53b3JsZHMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRXb3JsZChpZDogc3RyaW5nKTogUHJvbWlzZTxXb3JsZD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgd29ybGQ6IFdvcmxkIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL3dvcmxkcy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS53b3JsZDtcblx0fVxuXG5cdGFzeW5jIGNyZWF0ZVdvcmxkKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgZ2VucmU6IHN0cmluZyk6IFByb21pc2U8V29ybGQ+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHdvcmxkOiBXb3JsZCB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0XCIvYXBpL3YxL3dvcmxkc1wiLFxuXHRcdFx0e1xuXHRcdFx0XHRuYW1lOiBuYW1lLnRyaW0oKSxcblx0XHRcdFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSxcblx0XHRcdFx0Z2VucmU6IGdlbnJlLnRyaW0oKSxcblx0XHRcdH1cblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS53b3JsZDtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZVdvcmxkKGlkOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgZ2VucmU6IHN0cmluZyk6IFByb21pc2U8V29ybGQ+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHdvcmxkOiBXb3JsZCB9Pihcblx0XHRcdFwiUFVUXCIsXG5cdFx0XHRgL2FwaS92MS93b3JsZHMvJHtpZH1gLFxuXHRcdFx0e1xuXHRcdFx0XHRuYW1lOiBuYW1lLnRyaW0oKSxcblx0XHRcdFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSxcblx0XHRcdFx0Z2VucmU6IGdlbnJlLnRyaW0oKSxcblx0XHRcdH1cblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS53b3JsZDtcblx0fVxuXG5cdGFzeW5jIGdldFJQR1N5c3RlbXMoKTogUHJvbWlzZTxSUEdTeXN0ZW1bXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgcnBnX3N5c3RlbXM6IFJQR1N5c3RlbVtdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdFwiL2FwaS92MS9ycGctc3lzdGVtc1wiXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UucnBnX3N5c3RlbXMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRSUEdTeXN0ZW0oaWQ6IHN0cmluZyk6IFByb21pc2U8UlBHU3lzdGVtPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBycGdfc3lzdGVtOiBSUEdTeXN0ZW0gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvcnBnLXN5c3RlbXMvJHtpZH1gXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UucnBnX3N5c3RlbTtcblx0fVxuXG5cdC8vIENoYXJhY3RlciBtZXRob2RzXG5cdGFzeW5jIGdldENoYXJhY3RlcnMod29ybGRJZDogc3RyaW5nKTogUHJvbWlzZTxDaGFyYWN0ZXJbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgY2hhcmFjdGVyczogQ2hhcmFjdGVyW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvd29ybGRzLyR7d29ybGRJZH0vY2hhcmFjdGVyc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jaGFyYWN0ZXJzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgZ2V0Q2hhcmFjdGVyKGlkOiBzdHJpbmcpOiBQcm9taXNlPENoYXJhY3Rlcj4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgY2hhcmFjdGVyOiBDaGFyYWN0ZXIgfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcmFjdGVycy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jaGFyYWN0ZXI7XG5cdH1cblxuXHRhc3luYyBjcmVhdGVDaGFyYWN0ZXIod29ybGRJZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPENoYXJhY3Rlcj4pOiBQcm9taXNlPENoYXJhY3Rlcj4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgY2hhcmFjdGVyOiBDaGFyYWN0ZXIgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdGAvYXBpL3YxL3dvcmxkcy8ke3dvcmxkSWR9L2NoYXJhY3RlcnNgLFxuXHRcdFx0ZGF0YVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmNoYXJhY3Rlcjtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZUNoYXJhY3RlcihpZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPENoYXJhY3Rlcj4pOiBQcm9taXNlPENoYXJhY3Rlcj4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgY2hhcmFjdGVyOiBDaGFyYWN0ZXIgfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcmFjdGVycy8ke2lkfWAsXG5cdFx0XHRkYXRhXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuY2hhcmFjdGVyO1xuXHR9XG5cblx0YXN5bmMgZGVsZXRlQ2hhcmFjdGVyKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXCJERUxFVEVcIiwgYC9hcGkvdjEvY2hhcmFjdGVycy8ke2lkfWApO1xuXHR9XG5cblx0Ly8gTG9jYXRpb24gbWV0aG9kc1xuXHRhc3luYyBnZXRMb2NhdGlvbnMod29ybGRJZDogc3RyaW5nKTogUHJvbWlzZTxMb2NhdGlvbltdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBsb2NhdGlvbnM6IExvY2F0aW9uW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvd29ybGRzLyR7d29ybGRJZH0vbG9jYXRpb25zYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmxvY2F0aW9ucyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldExvY2F0aW9uKGlkOiBzdHJpbmcpOiBQcm9taXNlPExvY2F0aW9uPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBsb2NhdGlvbjogTG9jYXRpb24gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvbG9jYXRpb25zLyR7aWR9YFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmxvY2F0aW9uO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlTG9jYXRpb24od29ybGRJZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPExvY2F0aW9uPik6IFByb21pc2U8TG9jYXRpb24+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGxvY2F0aW9uOiBMb2NhdGlvbiB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0YC9hcGkvdjEvd29ybGRzLyR7d29ybGRJZH0vbG9jYXRpb25zYCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5sb2NhdGlvbjtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZUxvY2F0aW9uKGlkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8TG9jYXRpb24+KTogUHJvbWlzZTxMb2NhdGlvbj4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgbG9jYXRpb246IExvY2F0aW9uIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2xvY2F0aW9ucy8ke2lkfWAsXG5cdFx0XHRkYXRhXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UubG9jYXRpb247XG5cdH1cblxuXHRhc3luYyBkZWxldGVMb2NhdGlvbihpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFwiREVMRVRFXCIsIGAvYXBpL3YxL2xvY2F0aW9ucy8ke2lkfWApO1xuXHR9XG5cblx0Ly8gQXJ0aWZhY3QgbWV0aG9kc1xuXHRhc3luYyBnZXRBcnRpZmFjdHMod29ybGRJZDogc3RyaW5nKTogUHJvbWlzZTxBcnRpZmFjdFtdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBhcnRpZmFjdHM6IEFydGlmYWN0W10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvd29ybGRzLyR7d29ybGRJZH0vYXJ0aWZhY3RzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmFydGlmYWN0cyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldEFydGlmYWN0KGlkOiBzdHJpbmcpOiBQcm9taXNlPEFydGlmYWN0PiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBhcnRpZmFjdDogQXJ0aWZhY3QgfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvYXJ0aWZhY3RzLyR7aWR9YFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmFydGlmYWN0O1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlQXJ0aWZhY3Qod29ybGRJZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPEFydGlmYWN0Pik6IFByb21pc2U8QXJ0aWZhY3Q+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGFydGlmYWN0OiBBcnRpZmFjdCB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0YC9hcGkvdjEvd29ybGRzLyR7d29ybGRJZH0vYXJ0aWZhY3RzYCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5hcnRpZmFjdDtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZUFydGlmYWN0KGlkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8QXJ0aWZhY3Q+KTogUHJvbWlzZTxBcnRpZmFjdD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgYXJ0aWZhY3Q6IEFydGlmYWN0IH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2FydGlmYWN0cy8ke2lkfWAsXG5cdFx0XHRkYXRhXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuYXJ0aWZhY3Q7XG5cdH1cblxuXHRhc3luYyBkZWxldGVBcnRpZmFjdChpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFwiREVMRVRFXCIsIGAvYXBpL3YxL2FydGlmYWN0cy8ke2lkfWApO1xuXHR9XG5cblx0Ly8gRXZlbnQgbWV0aG9kc1xuXHRhc3luYyBnZXRFdmVudHMod29ybGRJZDogc3RyaW5nKTogUHJvbWlzZTxXb3JsZEV2ZW50W10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGV2ZW50czogV29ybGRFdmVudFtdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL3dvcmxkcy8ke3dvcmxkSWR9L2V2ZW50c2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5ldmVudHMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRFdmVudChpZDogc3RyaW5nKTogUHJvbWlzZTxXb3JsZEV2ZW50PiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBldmVudDogV29ybGRFdmVudCB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9ldmVudHMvJHtpZH1gXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuZXZlbnQ7XG5cdH1cblxuXHRhc3luYyBjcmVhdGVFdmVudCh3b3JsZElkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8V29ybGRFdmVudD4pOiBQcm9taXNlPFdvcmxkRXZlbnQ+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGV2ZW50OiBXb3JsZEV2ZW50IH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRgL2FwaS92MS93b3JsZHMvJHt3b3JsZElkfS9ldmVudHNgLFxuXHRcdFx0ZGF0YVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmV2ZW50O1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlRXZlbnQoaWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxXb3JsZEV2ZW50Pik6IFByb21pc2U8V29ybGRFdmVudD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgZXZlbnQ6IFdvcmxkRXZlbnQgfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvZXZlbnRzLyR7aWR9YCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5ldmVudDtcblx0fVxuXG5cdGFzeW5jIGRlbGV0ZUV2ZW50KGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXCJERUxFVEVcIiwgYC9hcGkvdjEvZXZlbnRzLyR7aWR9YCk7XG5cdH1cblxuXHRhc3luYyBtb3ZlRXZlbnQoaWQ6IHN0cmluZywgcGFyZW50SWQ6IHN0cmluZyB8IG51bGwpOiBQcm9taXNlPFdvcmxkRXZlbnQ+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGV2ZW50OiBXb3JsZEV2ZW50IH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2V2ZW50cy8ke2lkfS9tb3ZlYCxcblx0XHRcdHsgcGFyZW50X2lkOiBwYXJlbnRJZCB9XG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuZXZlbnQ7XG5cdH1cblxuXHQvLyBUcmFpdCBtZXRob2RzXG5cdGFzeW5jIGdldFRyYWl0cygpOiBQcm9taXNlPFRyYWl0W10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHRyYWl0czogVHJhaXRbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRcIi9hcGkvdjEvdHJhaXRzXCJcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS50cmFpdHMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRUcmFpdChpZDogc3RyaW5nKTogUHJvbWlzZTxUcmFpdD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgdHJhaXQ6IFRyYWl0IH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL3RyYWl0cy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS50cmFpdDtcblx0fVxuXG5cdGFzeW5jIGNyZWF0ZVRyYWl0KGRhdGE6IFBhcnRpYWw8VHJhaXQ+KTogUHJvbWlzZTxUcmFpdD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgdHJhaXQ6IFRyYWl0IH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRcIi9hcGkvdjEvdHJhaXRzXCIsXG5cdFx0XHRkYXRhXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UudHJhaXQ7XG5cdH1cblxuXHRhc3luYyB1cGRhdGVUcmFpdChpZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPFRyYWl0Pik6IFByb21pc2U8VHJhaXQ+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHRyYWl0OiBUcmFpdCB9Pihcblx0XHRcdFwiUFVUXCIsXG5cdFx0XHRgL2FwaS92MS90cmFpdHMvJHtpZH1gLFxuXHRcdFx0ZGF0YVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnRyYWl0O1xuXHR9XG5cblx0YXN5bmMgZGVsZXRlVHJhaXQoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcIkRFTEVURVwiLCBgL2FwaS92MS90cmFpdHMvJHtpZH1gKTtcblx0fVxuXG5cdC8vIEFyY2hldHlwZSBtZXRob2RzXG5cdGFzeW5jIGdldEFyY2hldHlwZXMoKTogUHJvbWlzZTxBcmNoZXR5cGVbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgYXJjaGV0eXBlczogQXJjaGV0eXBlW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0XCIvYXBpL3YxL2FyY2hldHlwZXNcIlxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmFyY2hldHlwZXMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRBcmNoZXR5cGUoaWQ6IHN0cmluZyk6IFByb21pc2U8QXJjaGV0eXBlPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBhcmNoZXR5cGU6IEFyY2hldHlwZSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9hcmNoZXR5cGVzLyR7aWR9YFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmFyY2hldHlwZTtcblx0fVxuXG5cdGFzeW5jIGNyZWF0ZUFyY2hldHlwZShkYXRhOiBQYXJ0aWFsPEFyY2hldHlwZT4pOiBQcm9taXNlPEFyY2hldHlwZT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgYXJjaGV0eXBlOiBBcmNoZXR5cGUgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdFwiL2FwaS92MS9hcmNoZXR5cGVzXCIsXG5cdFx0XHRkYXRhXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuYXJjaGV0eXBlO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlQXJjaGV0eXBlKGlkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8QXJjaGV0eXBlPik6IFByb21pc2U8QXJjaGV0eXBlPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBhcmNoZXR5cGU6IEFyY2hldHlwZSB9Pihcblx0XHRcdFwiUFVUXCIsXG5cdFx0XHRgL2FwaS92MS9hcmNoZXR5cGVzLyR7aWR9YCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5hcmNoZXR5cGU7XG5cdH1cblxuXHRhc3luYyBkZWxldGVBcmNoZXR5cGUoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcIkRFTEVURVwiLCBgL2FwaS92MS9hcmNoZXR5cGVzLyR7aWR9YCk7XG5cdH1cblxuXHRhc3luYyBnZXRBcmNoZXR5cGVUcmFpdHMoYXJjaGV0eXBlSWQ6IHN0cmluZyk6IFByb21pc2U8QXJjaGV0eXBlVHJhaXRbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgYXJjaGV0eXBlX3RyYWl0czogQXJjaGV0eXBlVHJhaXRbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9hcmNoZXR5cGVzLyR7YXJjaGV0eXBlSWR9L3RyYWl0c2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5hcmNoZXR5cGVfdHJhaXRzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgYWRkQXJjaGV0eXBlVHJhaXQoYXJjaGV0eXBlSWQ6IHN0cmluZywgdHJhaXRJZDogc3RyaW5nLCBkZWZhdWx0VmFsdWU/OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdGAvYXBpL3YxL2FyY2hldHlwZXMvJHthcmNoZXR5cGVJZH0vdHJhaXRzYCxcblx0XHRcdHtcblx0XHRcdFx0dHJhaXRfaWQ6IHRyYWl0SWQsXG5cdFx0XHRcdGRlZmF1bHRfdmFsdWU6IGRlZmF1bHRWYWx1ZSxcblx0XHRcdH1cblx0XHQpO1xuXHR9XG5cblx0YXN5bmMgcmVtb3ZlQXJjaGV0eXBlVHJhaXQoYXJjaGV0eXBlSWQ6IHN0cmluZywgdHJhaXRJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFxuXHRcdFx0XCJERUxFVEVcIixcblx0XHRcdGAvYXBpL3YxL2FyY2hldHlwZXMvJHthcmNoZXR5cGVJZH0vdHJhaXRzLyR7dHJhaXRJZH1gXG5cdFx0KTtcblx0fVxuXG5cdC8vIEZhY3Rpb24gbWV0aG9kc1xuXHRhc3luYyBnZXRGYWN0aW9ucyh3b3JsZElkOiBzdHJpbmcpOiBQcm9taXNlPEZhY3Rpb25bXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgZmFjdGlvbnM6IEZhY3Rpb25bXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS93b3JsZHMvJHt3b3JsZElkfS9mYWN0aW9uc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5mYWN0aW9ucyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldEZhY3Rpb24oaWQ6IHN0cmluZyk6IFByb21pc2U8RmFjdGlvbj4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgZmFjdGlvbjogRmFjdGlvbiB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9mYWN0aW9ucy8ke2lkfWBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5mYWN0aW9uO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlRmFjdGlvbih3b3JsZElkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8RmFjdGlvbj4pOiBQcm9taXNlPEZhY3Rpb24+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGZhY3Rpb246IEZhY3Rpb24gfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdGAvYXBpL3YxL3dvcmxkcy8ke3dvcmxkSWR9L2ZhY3Rpb25zYCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5mYWN0aW9uO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlRmFjdGlvbihpZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPEZhY3Rpb24+KTogUHJvbWlzZTxGYWN0aW9uPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBmYWN0aW9uOiBGYWN0aW9uIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2ZhY3Rpb25zLyR7aWR9YCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5mYWN0aW9uO1xuXHR9XG5cblx0YXN5bmMgZGVsZXRlRmFjdGlvbihpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFwiREVMRVRFXCIsIGAvYXBpL3YxL2ZhY3Rpb25zLyR7aWR9YCk7XG5cdH1cblxuXHRhc3luYyBnZXRGYWN0aW9uQ2hpbGRyZW4oaWQ6IHN0cmluZyk6IFByb21pc2U8RmFjdGlvbltdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBmYWN0aW9uczogRmFjdGlvbltdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2ZhY3Rpb25zLyR7aWR9L2NoaWxkcmVuYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmZhY3Rpb25zIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgZ2V0RmFjdGlvblJlZmVyZW5jZXMoZmFjdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPEZhY3Rpb25SZWZlcmVuY2VbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgcmVmZXJlbmNlczogRmFjdGlvblJlZmVyZW5jZVtdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2ZhY3Rpb25zLyR7ZmFjdGlvbklkfS9yZWZlcmVuY2VzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnJlZmVyZW5jZXMgfHwgW107XG5cdH1cblxuXHRhc3luYyBhZGRGYWN0aW9uUmVmZXJlbmNlKGZhY3Rpb25JZDogc3RyaW5nLCBlbnRpdHlUeXBlOiBzdHJpbmcsIGVudGl0eUlkOiBzdHJpbmcsIHJvbGU/OiBzdHJpbmcsIG5vdGVzPzogc3RyaW5nKTogUHJvbWlzZTxGYWN0aW9uUmVmZXJlbmNlPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyByZWZlcmVuY2U6IEZhY3Rpb25SZWZlcmVuY2UgfT4oXG5cdFx0XHRcIlBPU1RcIixcblx0XHRcdGAvYXBpL3YxL2ZhY3Rpb25zLyR7ZmFjdGlvbklkfS9yZWZlcmVuY2VzYCxcblx0XHRcdHtcblx0XHRcdFx0ZW50aXR5X3R5cGU6IGVudGl0eVR5cGUsXG5cdFx0XHRcdGVudGl0eV9pZDogZW50aXR5SWQsXG5cdFx0XHRcdHJvbGU6IHJvbGUsXG5cdFx0XHRcdG5vdGVzOiBub3Rlcyxcblx0XHRcdH1cblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5yZWZlcmVuY2U7XG5cdH1cblxuXHRhc3luYyB1cGRhdGVGYWN0aW9uUmVmZXJlbmNlKGlkOiBzdHJpbmcsIHJvbGU/OiBzdHJpbmcsIG5vdGVzPzogc3RyaW5nKTogUHJvbWlzZTxGYWN0aW9uUmVmZXJlbmNlPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyByZWZlcmVuY2U6IEZhY3Rpb25SZWZlcmVuY2UgfT4oXG5cdFx0XHRcIlBVVFwiLFxuXHRcdFx0YC9hcGkvdjEvZmFjdGlvbi1yZWZlcmVuY2VzLyR7aWR9YCxcblx0XHRcdHtcblx0XHRcdFx0cm9sZTogcm9sZSxcblx0XHRcdFx0bm90ZXM6IG5vdGVzLFxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnJlZmVyZW5jZTtcblx0fVxuXG5cdGFzeW5jIHJlbW92ZUZhY3Rpb25SZWZlcmVuY2UoZmFjdGlvbklkOiBzdHJpbmcsIGVudGl0eVR5cGU6IHN0cmluZywgZW50aXR5SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcblx0XHRcdFwiREVMRVRFXCIsXG5cdFx0XHRgL2FwaS92MS9mYWN0aW9ucy8ke2ZhY3Rpb25JZH0vcmVmZXJlbmNlcy8ke2VudGl0eVR5cGV9LyR7ZW50aXR5SWR9YFxuXHRcdCk7XG5cdH1cblxuXHQvLyBMb3JlIG1ldGhvZHNcblx0YXN5bmMgZ2V0TG9yZXMod29ybGRJZDogc3RyaW5nKTogUHJvbWlzZTxMb3JlW10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGxvcmVzOiBMb3JlW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvd29ybGRzLyR7d29ybGRJZH0vbG9yZXNgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UubG9yZXMgfHwgW107XG5cdH1cblxuXHRhc3luYyBnZXRMb3JlKGlkOiBzdHJpbmcpOiBQcm9taXNlPExvcmU+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGxvcmU6IExvcmUgfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvbG9yZXMvJHtpZH1gXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UubG9yZTtcblx0fVxuXG5cdGFzeW5jIGNyZWF0ZUxvcmUod29ybGRJZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPExvcmU+KTogUHJvbWlzZTxMb3JlPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBsb3JlOiBMb3JlIH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRgL2FwaS92MS93b3JsZHMvJHt3b3JsZElkfS9sb3Jlc2AsXG5cdFx0XHRkYXRhXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UubG9yZTtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZUxvcmUoaWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxMb3JlPik6IFByb21pc2U8TG9yZT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgbG9yZTogTG9yZSB9Pihcblx0XHRcdFwiUFVUXCIsXG5cdFx0XHRgL2FwaS92MS9sb3Jlcy8ke2lkfWAsXG5cdFx0XHRkYXRhXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UubG9yZTtcblx0fVxuXG5cdGFzeW5jIGRlbGV0ZUxvcmUoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcIkRFTEVURVwiLCBgL2FwaS92MS9sb3Jlcy8ke2lkfWApO1xuXHR9XG5cblx0YXN5bmMgZ2V0TG9yZUNoaWxkcmVuKGlkOiBzdHJpbmcpOiBQcm9taXNlPExvcmVbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgbG9yZXM6IExvcmVbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9sb3Jlcy8ke2lkfS9jaGlsZHJlbmBcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5sb3JlcyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGdldExvcmVSZWZlcmVuY2VzKGxvcmVJZDogc3RyaW5nKTogUHJvbWlzZTxMb3JlUmVmZXJlbmNlW10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHJlZmVyZW5jZXM6IExvcmVSZWZlcmVuY2VbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9sb3Jlcy8ke2xvcmVJZH0vcmVmZXJlbmNlc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5yZWZlcmVuY2VzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgYWRkTG9yZVJlZmVyZW5jZShsb3JlSWQ6IHN0cmluZywgZW50aXR5VHlwZTogc3RyaW5nLCBlbnRpdHlJZDogc3RyaW5nLCByZWxhdGlvbnNoaXBUeXBlPzogc3RyaW5nLCBub3Rlcz86IHN0cmluZyk6IFByb21pc2U8TG9yZVJlZmVyZW5jZT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgcmVmZXJlbmNlOiBMb3JlUmVmZXJlbmNlIH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRgL2FwaS92MS9sb3Jlcy8ke2xvcmVJZH0vcmVmZXJlbmNlc2AsXG5cdFx0XHR7XG5cdFx0XHRcdGVudGl0eV90eXBlOiBlbnRpdHlUeXBlLFxuXHRcdFx0XHRlbnRpdHlfaWQ6IGVudGl0eUlkLFxuXHRcdFx0XHRyZWxhdGlvbnNoaXBfdHlwZTogcmVsYXRpb25zaGlwVHlwZSxcblx0XHRcdFx0bm90ZXM6IG5vdGVzLFxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnJlZmVyZW5jZTtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZUxvcmVSZWZlcmVuY2UoaWQ6IHN0cmluZywgcmVsYXRpb25zaGlwVHlwZT86IHN0cmluZywgbm90ZXM/OiBzdHJpbmcpOiBQcm9taXNlPExvcmVSZWZlcmVuY2U+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHJlZmVyZW5jZTogTG9yZVJlZmVyZW5jZSB9Pihcblx0XHRcdFwiUFVUXCIsXG5cdFx0XHRgL2FwaS92MS9sb3JlLXJlZmVyZW5jZXMvJHtpZH1gLFxuXHRcdFx0e1xuXHRcdFx0XHRyZWxhdGlvbnNoaXBfdHlwZTogcmVsYXRpb25zaGlwVHlwZSxcblx0XHRcdFx0bm90ZXM6IG5vdGVzLFxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnJlZmVyZW5jZTtcblx0fVxuXG5cdGFzeW5jIHJlbW92ZUxvcmVSZWZlcmVuY2UobG9yZUlkOiBzdHJpbmcsIGVudGl0eVR5cGU6IHN0cmluZywgZW50aXR5SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcblx0XHRcdFwiREVMRVRFXCIsXG5cdFx0XHRgL2FwaS92MS9sb3Jlcy8ke2xvcmVJZH0vcmVmZXJlbmNlcy8ke2VudGl0eVR5cGV9LyR7ZW50aXR5SWR9YFxuXHRcdCk7XG5cdH1cblxuXHQvLyBDaGFyYWN0ZXIgVHJhaXRzIG1ldGhvZHNcblx0YXN5bmMgZ2V0Q2hhcmFjdGVyVHJhaXRzKGNoYXJhY3RlcklkOiBzdHJpbmcpOiBQcm9taXNlPENoYXJhY3RlclRyYWl0W10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IGNoYXJhY3Rlcl90cmFpdHM6IENoYXJhY3RlclRyYWl0W10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcmFjdGVycy8ke2NoYXJhY3RlcklkfS90cmFpdHNgXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuY2hhcmFjdGVyX3RyYWl0cyB8fCBbXTtcblx0fVxuXG5cdGFzeW5jIGFkZENoYXJhY3RlclRyYWl0KGNoYXJhY3RlcklkOiBzdHJpbmcsIHRyYWl0SWQ6IHN0cmluZywgdmFsdWU/OiBzdHJpbmcsIG5vdGVzPzogc3RyaW5nKTogUHJvbWlzZTxDaGFyYWN0ZXJUcmFpdD4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgY2hhcmFjdGVyX3RyYWl0OiBDaGFyYWN0ZXJUcmFpdCB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcmFjdGVycy8ke2NoYXJhY3RlcklkfS90cmFpdHNgLFxuXHRcdFx0e1xuXHRcdFx0XHR0cmFpdF9pZDogdHJhaXRJZCxcblx0XHRcdFx0dmFsdWU6IHZhbHVlLFxuXHRcdFx0XHRub3Rlczogbm90ZXMsXG5cdFx0XHR9XG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UuY2hhcmFjdGVyX3RyYWl0O1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlQ2hhcmFjdGVyVHJhaXQoY2hhcmFjdGVySWQ6IHN0cmluZywgdHJhaXRJZDogc3RyaW5nLCB2YWx1ZT86IHN0cmluZywgbm90ZXM/OiBzdHJpbmcpOiBQcm9taXNlPENoYXJhY3RlclRyYWl0PiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBjaGFyYWN0ZXJfdHJhaXQ6IENoYXJhY3RlclRyYWl0IH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2NoYXJhY3RlcnMvJHtjaGFyYWN0ZXJJZH0vdHJhaXRzLyR7dHJhaXRJZH1gLFxuXHRcdFx0e1xuXHRcdFx0XHR2YWx1ZTogdmFsdWUsXG5cdFx0XHRcdG5vdGVzOiBub3Rlcyxcblx0XHRcdH1cblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5jaGFyYWN0ZXJfdHJhaXQ7XG5cdH1cblxuXHRhc3luYyByZW1vdmVDaGFyYWN0ZXJUcmFpdChjaGFyYWN0ZXJJZDogc3RyaW5nLCB0cmFpdElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXG5cdFx0XHRcIkRFTEVURVwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcmFjdGVycy8ke2NoYXJhY3RlcklkfS90cmFpdHMvJHt0cmFpdElkfWBcblx0XHQpO1xuXHR9XG5cblx0Ly8gQ2hhcmFjdGVyIEV2ZW50cyBtZXRob2RzXG5cdGFzeW5jIGdldENoYXJhY3RlckV2ZW50cyhjaGFyYWN0ZXJJZDogc3RyaW5nKTogUHJvbWlzZTxFdmVudENoYXJhY3RlcltdPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBldmVudF9jaGFyYWN0ZXJzOiBFdmVudENoYXJhY3RlcltdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2NoYXJhY3RlcnMvJHtjaGFyYWN0ZXJJZH0vZXZlbnRzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmV2ZW50X2NoYXJhY3RlcnMgfHwgW107XG5cdH1cblxuXHQvLyBDaGFyYWN0ZXIgUmVsYXRpb25zaGlwcyBtZXRob2RzXG5cdGFzeW5jIGdldENoYXJhY3RlclJlbGF0aW9uc2hpcHMoY2hhcmFjdGVySWQ6IHN0cmluZyk6IFByb21pc2U8Q2hhcmFjdGVyUmVsYXRpb25zaGlwW10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHJlbGF0aW9uc2hpcHM6IENoYXJhY3RlclJlbGF0aW9uc2hpcFtdIH0+KFxuXHRcdFx0XCJHRVRcIixcblx0XHRcdGAvYXBpL3YxL2NoYXJhY3RlcnMvJHtjaGFyYWN0ZXJJZH0vcmVsYXRpb25zaGlwc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5yZWxhdGlvbnNoaXBzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlQ2hhcmFjdGVyUmVsYXRpb25zaGlwKGNoYXJhY3RlcklkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8Q2hhcmFjdGVyUmVsYXRpb25zaGlwPik6IFByb21pc2U8Q2hhcmFjdGVyUmVsYXRpb25zaGlwPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyByZWxhdGlvbnNoaXA6IENoYXJhY3RlclJlbGF0aW9uc2hpcCB9Pihcblx0XHRcdFwiUE9TVFwiLFxuXHRcdFx0YC9hcGkvdjEvY2hhcmFjdGVycy8ke2NoYXJhY3RlcklkfS9yZWxhdGlvbnNoaXBzYCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5yZWxhdGlvbnNoaXA7XG5cdH1cblxuXHRhc3luYyB1cGRhdGVDaGFyYWN0ZXJSZWxhdGlvbnNoaXAoaWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxDaGFyYWN0ZXJSZWxhdGlvbnNoaXA+KTogUHJvbWlzZTxDaGFyYWN0ZXJSZWxhdGlvbnNoaXA+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHJlbGF0aW9uc2hpcDogQ2hhcmFjdGVyUmVsYXRpb25zaGlwIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2NoYXJhY3Rlci1yZWxhdGlvbnNoaXBzLyR7aWR9YCxcblx0XHRcdGRhdGFcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5yZWxhdGlvbnNoaXA7XG5cdH1cblxuXHRhc3luYyBkZWxldGVDaGFyYWN0ZXJSZWxhdGlvbnNoaXAoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMucmVxdWVzdChcIkRFTEVURVwiLCBgL2FwaS92MS9jaGFyYWN0ZXItcmVsYXRpb25zaGlwcy8ke2lkfWApO1xuXHR9XG5cblx0Ly8gRXZlbnQgQ2hhcmFjdGVycy9SZWZlcmVuY2VzIG1ldGhvZHNcblx0YXN5bmMgZ2V0RXZlbnRDaGFyYWN0ZXJzKGV2ZW50SWQ6IHN0cmluZyk6IFByb21pc2U8RXZlbnRDaGFyYWN0ZXJbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgZXZlbnRfY2hhcmFjdGVyczogRXZlbnRDaGFyYWN0ZXJbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9ldmVudHMvJHtldmVudElkfS9jaGFyYWN0ZXJzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLmV2ZW50X2NoYXJhY3RlcnMgfHwgW107XG5cdH1cblxuXHRhc3luYyBhZGRFdmVudENoYXJhY3RlcihldmVudElkOiBzdHJpbmcsIGNoYXJhY3RlcklkOiBzdHJpbmcsIHJvbGU/OiBzdHJpbmcpOiBQcm9taXNlPEV2ZW50Q2hhcmFjdGVyPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBldmVudF9jaGFyYWN0ZXI6IEV2ZW50Q2hhcmFjdGVyIH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRgL2FwaS92MS9ldmVudHMvJHtldmVudElkfS9jaGFyYWN0ZXJzYCxcblx0XHRcdHtcblx0XHRcdFx0Y2hhcmFjdGVyX2lkOiBjaGFyYWN0ZXJJZCxcblx0XHRcdFx0cm9sZTogcm9sZSxcblx0XHRcdH1cblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5ldmVudF9jaGFyYWN0ZXI7XG5cdH1cblxuXHRhc3luYyByZW1vdmVFdmVudENoYXJhY3RlcihldmVudElkOiBzdHJpbmcsIGNoYXJhY3RlcklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXG5cdFx0XHRcIkRFTEVURVwiLFxuXHRcdFx0YC9hcGkvdjEvZXZlbnRzLyR7ZXZlbnRJZH0vY2hhcmFjdGVycy8ke2NoYXJhY3RlcklkfWBcblx0XHQpO1xuXHR9XG5cblx0YXN5bmMgZ2V0RXZlbnRSZWZlcmVuY2VzKGV2ZW50SWQ6IHN0cmluZyk6IFByb21pc2U8RXZlbnRSZWZlcmVuY2VbXT4ge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgcmVmZXJlbmNlczogRXZlbnRSZWZlcmVuY2VbXSB9Pihcblx0XHRcdFwiR0VUXCIsXG5cdFx0XHRgL2FwaS92MS9ldmVudHMvJHtldmVudElkfS9yZWZlcmVuY2VzYFxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnJlZmVyZW5jZXMgfHwgW107XG5cdH1cblxuXHRhc3luYyBhZGRFdmVudFJlZmVyZW5jZShldmVudElkOiBzdHJpbmcsIGVudGl0eVR5cGU6IHN0cmluZywgZW50aXR5SWQ6IHN0cmluZywgcmVsYXRpb25zaGlwVHlwZT86IHN0cmluZywgbm90ZXM/OiBzdHJpbmcpOiBQcm9taXNlPEV2ZW50UmVmZXJlbmNlPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyByZWZlcmVuY2U6IEV2ZW50UmVmZXJlbmNlIH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRgL2FwaS92MS9ldmVudHMvJHtldmVudElkfS9yZWZlcmVuY2VzYCxcblx0XHRcdHtcblx0XHRcdFx0ZW50aXR5X3R5cGU6IGVudGl0eVR5cGUsXG5cdFx0XHRcdGVudGl0eV9pZDogZW50aXR5SWQsXG5cdFx0XHRcdHJlbGF0aW9uc2hpcF90eXBlOiByZWxhdGlvbnNoaXBUeXBlLFxuXHRcdFx0XHRub3Rlczogbm90ZXMsXG5cdFx0XHR9XG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UucmVmZXJlbmNlO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlRXZlbnRSZWZlcmVuY2UoaWQ6IHN0cmluZywgcmVsYXRpb25zaGlwVHlwZT86IHN0cmluZywgbm90ZXM/OiBzdHJpbmcpOiBQcm9taXNlPEV2ZW50UmVmZXJlbmNlPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyByZWZlcmVuY2U6IEV2ZW50UmVmZXJlbmNlIH0+KFxuXHRcdFx0XCJQVVRcIixcblx0XHRcdGAvYXBpL3YxL2V2ZW50LXJlZmVyZW5jZXMvJHtpZH1gLFxuXHRcdFx0e1xuXHRcdFx0XHRyZWxhdGlvbnNoaXBfdHlwZTogcmVsYXRpb25zaGlwVHlwZSxcblx0XHRcdFx0bm90ZXM6IG5vdGVzLFxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0cmV0dXJuIHJlc3BvbnNlLnJlZmVyZW5jZTtcblx0fVxuXG5cdGFzeW5jIHJlbW92ZUV2ZW50UmVmZXJlbmNlKGV2ZW50SWQ6IHN0cmluZywgZW50aXR5VHlwZTogc3RyaW5nLCBlbnRpdHlJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5yZXF1ZXN0KFxuXHRcdFx0XCJERUxFVEVcIixcblx0XHRcdGAvYXBpL3YxL2V2ZW50cy8ke2V2ZW50SWR9L3JlZmVyZW5jZXMvJHtlbnRpdHlUeXBlfS8ke2VudGl0eUlkfWBcblx0XHQpO1xuXHR9XG5cblx0Ly8gU2NlbmUgUmVmZXJlbmNlcyBtZXRob2RzXG5cdGFzeW5jIGdldFNjZW5lUmVmZXJlbmNlcyhzY2VuZUlkOiBzdHJpbmcpOiBQcm9taXNlPFNjZW5lUmVmZXJlbmNlW10+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHJlZmVyZW5jZXM6IFNjZW5lUmVmZXJlbmNlW10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0YC9hcGkvdjEvc2NlbmVzLyR7c2NlbmVJZH0vcmVmZXJlbmNlc2Bcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5yZWZlcmVuY2VzIHx8IFtdO1xuXHR9XG5cblx0YXN5bmMgYWRkU2NlbmVSZWZlcmVuY2Uoc2NlbmVJZDogc3RyaW5nLCBlbnRpdHlUeXBlOiBzdHJpbmcsIGVudGl0eUlkOiBzdHJpbmcpOiBQcm9taXNlPFNjZW5lUmVmZXJlbmNlPiB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyByZWZlcmVuY2U6IFNjZW5lUmVmZXJlbmNlIH0+KFxuXHRcdFx0XCJQT1NUXCIsXG5cdFx0XHRgL2FwaS92MS9zY2VuZXMvJHtzY2VuZUlkfS9yZWZlcmVuY2VzYCxcblx0XHRcdHtcblx0XHRcdFx0ZW50aXR5X3R5cGU6IGVudGl0eVR5cGUsXG5cdFx0XHRcdGVudGl0eV9pZDogZW50aXR5SWQsXG5cdFx0XHR9XG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2UucmVmZXJlbmNlO1xuXHR9XG5cblx0YXN5bmMgcmVtb3ZlU2NlbmVSZWZlcmVuY2Uoc2NlbmVJZDogc3RyaW5nLCBlbnRpdHlUeXBlOiBzdHJpbmcsIGVudGl0eUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLnJlcXVlc3QoXG5cdFx0XHRcIkRFTEVURVwiLFxuXHRcdFx0YC9hcGkvdjEvc2NlbmVzLyR7c2NlbmVJZH0vcmVmZXJlbmNlcy8ke2VudGl0eVR5cGV9LyR7ZW50aXR5SWR9YFxuXHRcdCk7XG5cdH1cblxuXHQvLyBUaW1lbGluZSBtZXRob2RzXG5cdGFzeW5jIGdldFRpbWVsaW5lKHdvcmxkSWQ6IHN0cmluZywgZnJvbVBvcz86IG51bWJlciwgdG9Qb3M/OiBudW1iZXIpOiBQcm9taXNlPFdvcmxkRXZlbnRbXT4ge1xuXHRcdGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuXHRcdGlmIChmcm9tUG9zICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdHF1ZXJ5UGFyYW1zLmFwcGVuZChcImZyb21fcG9zXCIsIGZyb21Qb3MudG9TdHJpbmcoKSk7XG5cdFx0fVxuXHRcdGlmICh0b1BvcyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRxdWVyeVBhcmFtcy5hcHBlbmQoXCJ0b19wb3NcIiwgdG9Qb3MudG9TdHJpbmcoKSk7XG5cdFx0fVxuXHRcdGNvbnN0IHF1ZXJ5U3RyaW5nID0gcXVlcnlQYXJhbXMudG9TdHJpbmcoKTtcblx0XHRjb25zdCBlbmRwb2ludCA9IGAvYXBpL3YxL3dvcmxkcy8ke3dvcmxkSWR9L3RpbWVsaW5lJHtxdWVyeVN0cmluZyA/IGA/JHtxdWVyeVN0cmluZ31gIDogXCJcIn1gO1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgZXZlbnRzOiBXb3JsZEV2ZW50W10gfT4oXG5cdFx0XHRcIkdFVFwiLFxuXHRcdFx0ZW5kcG9pbnRcblx0XHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5ldmVudHMgfHwgW107XG5cdH1cblxuXHQvLyBXb3JsZCBUaW1lQ29uZmlnIG1ldGhvZHNcblx0YXN5bmMgdXBkYXRlV29ybGRUaW1lQ29uZmlnKHdvcmxkSWQ6IHN0cmluZywgdGltZUNvbmZpZzogVGltZUNvbmZpZyk6IFByb21pc2U8V29ybGQ+IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDx7IHdvcmxkOiBXb3JsZCB9Pihcblx0XHRcdFwiUFVUXCIsXG5cdFx0XHRgL2FwaS92MS93b3JsZHMvJHt3b3JsZElkfS90aW1lLWNvbmZpZ2AsXG5cdFx0XHR0aW1lQ29uZmlnXG5cdFx0KTtcblx0XHRyZXR1cm4gcmVzcG9uc2Uud29ybGQ7XG5cdH1cblxuXHRwcml2YXRlIGlzQXV0b1N5bmNFbmFibGVkKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLmF1dG9TeW5jT25BcGlVcGRhdGVzO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBwdWJsaXNoQ2hhcHRlclVwZGF0ZShjaGFwdGVySWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICghdGhpcy5pc0F1dG9TeW5jRW5hYmxlZCgpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGNoYXB0ZXIgPSBhd2FpdCB0aGlzLmdldENoYXB0ZXIoY2hhcHRlcklkKTtcblx0XHRcdGNvbnN0IHN0b3J5ID0gYXdhaXQgdGhpcy5nZXRTdG9yeShjaGFwdGVyLnN0b3J5X2lkKTtcblx0XHRcdGNvbnN0IHNjZW5lcyA9IGF3YWl0IHRoaXMuZ2V0U2NlbmVzKGNoYXB0ZXJJZCk7XG5cdFx0XHRjb25zdCBzY2VuZXNXaXRoQmVhdHM6IFNjZW5lV2l0aEJlYXRzW10gPSBhd2FpdCBQcm9taXNlLmFsbChcblx0XHRcdFx0c2NlbmVzLm1hcChhc3luYyAoc2NlbmUpID0+IHtcblx0XHRcdFx0XHRjb25zdCBiZWF0cyA9IGF3YWl0IHRoaXMuZ2V0QmVhdHMoc2NlbmUuaWQpO1xuXHRcdFx0XHRcdHJldHVybiB7IHNjZW5lLCBiZWF0cyB9O1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0XHRcdGNvbnN0IGNvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja3MoY2hhcHRlcklkKTtcblx0XHRcdGNvbnN0IGNvbnRlbnRCbG9ja1JlZnM6IENvbnRlbnRBbmNob3JbXSA9IFtdO1xuXHRcdFx0Zm9yIChjb25zdCBibG9jayBvZiBjb250ZW50QmxvY2tzKSB7XG5cdFx0XHRcdGNvbnN0IHJlZnMgPSBhd2FpdCB0aGlzLmdldENvbnRlbnRBbmNob3JzKGJsb2NrLmlkKTtcblx0XHRcdFx0Y29udGVudEJsb2NrUmVmcy5wdXNoKC4uLnJlZnMpO1xuXHRcdFx0fVxuXG5cdFx0XHRhd2FpdCB0aGlzLm5vdGlmeUVudGl0eVVwZGF0ZSh7XG5cdFx0XHRcdHR5cGU6IFwiY2hhcHRlclwiLFxuXHRcdFx0XHRzdG9yeSxcblx0XHRcdFx0Y2hhcHRlcixcblx0XHRcdFx0c2NlbmVzOiBzY2VuZXNXaXRoQmVhdHMsXG5cdFx0XHRcdGNvbnRlbnRCbG9ja3MsXG5cdFx0XHRcdGNvbnRlbnRCbG9ja1JlZnMsXG5cdFx0XHR9KTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gYXV0by1zeW5jIGNoYXB0ZXIgdXBkYXRlXCIsIGVycik7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBwdWJsaXNoU2NlbmVUcmVlKHNjZW5lSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICghdGhpcy5pc0F1dG9TeW5jRW5hYmxlZCgpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHNjZW5lID0gYXdhaXQgdGhpcy5nZXRTY2VuZShzY2VuZUlkKTtcblx0XHRcdGlmIChzY2VuZS5jaGFwdGVyX2lkKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucHVibGlzaENoYXB0ZXJVcGRhdGUoc2NlbmUuY2hhcHRlcl9pZCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3Qgc3RvcnkgPSBhd2FpdCB0aGlzLmdldFN0b3J5KHNjZW5lLnN0b3J5X2lkKTtcblx0XHRcdGNvbnN0IGJlYXRzID0gYXdhaXQgdGhpcy5nZXRCZWF0cyhzY2VuZS5pZCk7XG5cdFx0XHRjb25zdCBzY2VuZUNvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja3NCeVNjZW5lKHNjZW5lLmlkKTtcblx0XHRcdGNvbnN0IGJlYXRDb250ZW50QmxvY2tzOiBSZWNvcmQ8c3RyaW5nLCBDb250ZW50QmxvY2tbXT4gPSB7fTtcblx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cykge1xuXHRcdFx0XHRiZWF0Q29udGVudEJsb2Nrc1tiZWF0LmlkXSA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2Nrc0J5QmVhdChiZWF0LmlkKTtcblx0XHRcdH1cblxuXHRcdFx0YXdhaXQgdGhpcy5ub3RpZnlFbnRpdHlVcGRhdGUoe1xuXHRcdFx0XHR0eXBlOiBcInNjZW5lXCIsXG5cdFx0XHRcdHN0b3J5LFxuXHRcdFx0XHRzY2VuZSxcblx0XHRcdFx0YmVhdHMsXG5cdFx0XHRcdHNjZW5lQ29udGVudEJsb2Nrcyxcblx0XHRcdFx0YmVhdENvbnRlbnRCbG9ja3MsXG5cdFx0XHR9KTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gYXV0by1zeW5jIHNjZW5lIHVwZGF0ZVwiLCBlcnIpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcHVibGlzaENvbnRlbnRCbG9ja1VwZGF0ZShjb250ZW50QmxvY2tJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCF0aGlzLmlzQXV0b1N5bmNFbmFibGVkKCkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgY29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2soY29udGVudEJsb2NrSWQpO1xuXHRcdFx0bGV0IHN0b3J5OiBTdG9yeSB8IG51bGwgPSBudWxsO1xuXHRcdFx0aWYgKGNvbnRlbnRCbG9jay5jaGFwdGVyX2lkKSB7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXIgPSBhd2FpdCB0aGlzLmdldENoYXB0ZXIoY29udGVudEJsb2NrLmNoYXB0ZXJfaWQpO1xuXHRcdFx0XHRzdG9yeSA9IGF3YWl0IHRoaXMuZ2V0U3RvcnkoY2hhcHRlci5zdG9yeV9pZCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCBhbmNob3JzID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QW5jaG9ycyhjb250ZW50QmxvY2suaWQpO1xuXHRcdFx0XHRjb25zdCBzY2VuZUFuY2hvciA9IGFuY2hvcnMuZmluZCgoYW5jaG9yKSA9PiBhbmNob3IuZW50aXR5X3R5cGUgPT09IFwic2NlbmVcIik7XG5cdFx0XHRcdGlmIChzY2VuZUFuY2hvcikge1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lID0gYXdhaXQgdGhpcy5nZXRTY2VuZShzY2VuZUFuY2hvci5lbnRpdHlfaWQpO1xuXHRcdFx0XHRcdHN0b3J5ID0gYXdhaXQgdGhpcy5nZXRTdG9yeShzY2VuZS5zdG9yeV9pZCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKCFzdG9yeSkge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oXCJVbmFibGUgdG8gcmVzb2x2ZSBzdG9yeSBmb3IgY29udGVudCBibG9jayBhdXRvLXN5bmNcIiwgY29udGVudEJsb2NrSWQpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGF3YWl0IHRoaXMubm90aWZ5RW50aXR5VXBkYXRlKHtcblx0XHRcdFx0dHlwZTogXCJjb250ZW50XCIsXG5cdFx0XHRcdHN0b3J5LFxuXHRcdFx0XHRjb250ZW50QmxvY2ssXG5cdFx0XHR9KTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gYXV0by1zeW5jIGNvbnRlbnQgYmxvY2sgdXBkYXRlXCIsIGVycik7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgbm90aWZ5RW50aXR5VXBkYXRlKHBheWxvYWQ6IFN5bmNFbnRpdHlQYXlsb2FkKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgYXBpVXBkYXRlTm90aWZpZXIubm90aWZ5KHBheWxvYWQpO1xuXHR9XG59XG5cbiIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBTdG9yeUVuZ2luZVBsdWdpbiBmcm9tIFwiLi9tYWluXCI7XG5cbmV4cG9ydCBjbGFzcyBTdG9yeUVuZ2luZVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJTdG9yeSBFbmdpbmUgU2V0dGluZ3NcIiB9KTtcblxuXHRcdC8vIE1vZGUgU2VsZWN0aW9uXG5cdFx0bGV0IHRlbmFudElkU2V0dGluZzogU2V0dGluZyB8IG51bGwgPSBudWxsO1xuXHRcdGxldCB2aWRlb0xpbmtTZXR0aW5nOiBTZXR0aW5nIHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IGNvbmZsaWN0UmVzb2x1dGlvblNldHRpbmc6IFNldHRpbmcgfCBudWxsID0gbnVsbDtcblxuXHRcdGNvbnN0IG1vZGVTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkNvbm5lY3Rpb24gTW9kZVwiKVxuXHRcdFx0LnNldERlc2MoXCJDaG9vc2UgYmV0d2VlbiBsb2NhbCAob2ZmbGluZSkgb3IgcmVtb3RlIChjbG91ZCkgbW9kZVwiKVxuXHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT5cblx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHQuYWRkT3B0aW9uKFwibG9jYWxcIiwgXCJMb2NhbFwiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJyZW1vdGVcIiwgXCJSZW1vdGVcIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZSB8fCBcImxvY2FsXCIpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZSA9IHZhbHVlIGFzIFwibG9jYWxcIiB8IFwicmVtb3RlXCI7XG5cdFx0XHRcdFx0XHQvLyBBdXRvLXNldCBjb25mbGljdCByZXNvbHV0aW9uIGluIGxvY2FsIG1vZGVcblx0XHRcdFx0XHRcdGlmICh2YWx1ZSA9PT0gXCJsb2NhbFwiKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZsaWN0UmVzb2x1dGlvbiA9IFwibG9jYWxcIjtcblx0XHRcdFx0XHRcdFx0aWYgKGNvbmZsaWN0UmVzb2x1dGlvblNldHRpbmcpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25mbGljdFJlc29sdXRpb25TZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGlmIChjb25mbGljdFJlc29sdXRpb25TZXR0aW5nKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uZmxpY3RSZXNvbHV0aW9uU2V0dGluZy5zZXR0aW5nRWwuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC8vIFNob3cvaGlkZSB0ZW5hbnQgSURcblx0XHRcdFx0XHRcdGlmICh0ZW5hbnRJZFNldHRpbmcpIHtcblx0XHRcdFx0XHRcdFx0dGVuYW50SWRTZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPT09IFwicmVtb3RlXCIgPyBcIlwiIDogXCJub25lXCI7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQvLyBTaG93L2hpZGUgdmlkZW8gbGlua1xuXHRcdFx0XHRcdFx0aWYgKHZpZGVvTGlua1NldHRpbmcpIHtcblx0XHRcdFx0XHRcdFx0dmlkZW9MaW5rU2V0dGluZy5zZXR0aW5nRWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID09PSBcImxvY2FsXCIgPyBcIlwiIDogXCJub25lXCI7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgQVBJIGNsaWVudCBtb2RlXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uYXBpQ2xpZW50KSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmFwaUNsaWVudC5zZXRNb2RlKHZhbHVlIGFzIFwibG9jYWxcIiB8IFwicmVtb3RlXCIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHQvLyBBUEkgVVJMXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkFQSSBVUkxcIilcblx0XHRcdC5zZXREZXNjKFwiVGhlIGJhc2UgVVJMIG9mIHRoZSBTdG9yeSBFbmdpbmUgQVBJXCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MFwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hcGlVcmwpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpVXJsID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJMTE0gR2F0ZXdheSBVUkxcIilcblx0XHRcdC5zZXREZXNjKFwiVGhlIGJhc2UgVVJMIG9mIHRoZSBMTE0gR2F0ZXdheSBzZXJ2aWNlXCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MVwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1HYXRld2F5VXJsKVxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbUdhdGV3YXlVcmwgPSB2YWx1ZS50cmltKCk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIFRlbmFudCBJRCAoY29uZGl0aW9uYWwgLSBvbmx5IHNob3duIGluIHJlbW90ZSBtb2RlKVxuXHRcdHRlbmFudElkU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJUZW5hbnQgSURcIilcblx0XHRcdC5zZXREZXNjKFwiWW91ciB3b3Jrc3BhY2UgdGVuYW50IElEIChVVUlEIGZvcm1hdCkgLSBSZXF1aXJlZCBpbiByZW1vdGUgbW9kZVwiKVxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdHRleHRcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDBcIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGVuYW50SWQgfHwgXCJcIilcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW5hbnRJZCA9IHZhbHVlLnRyaW0oKTtcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBBUEkgY2xpZW50IHRlbmFudCBJRCBpbW1lZGlhdGVseVxuXHRcdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLmFwaUNsaWVudCkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5hcGlDbGllbnQuc2V0VGVuYW50SWQodmFsdWUudHJpbSgpKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlID09PSBcImxvY2FsXCIpIHtcblx0XHRcdHRlbmFudElkU2V0dGluZy5zZXR0aW5nRWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdH1cblxuXHRcdC8vIFZpZGVvIExpbmsgU2VjdGlvbiAoY29uZGl0aW9uYWwgLSBvbmx5IHNob3duIGluIGxvY2FsIG1vZGUpXG5cdFx0Y29uc3QgdmlkZW9VcmwgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sb2NhbE1vZGVWaWRlb1VybCB8fCBcImh0dHBzOi8vZXhhbXBsZS5jb20vc2V0dXAtdmlkZW9cIjtcblx0XHR2aWRlb0xpbmtTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlNldHVwIEd1aWRlXCIpXG5cdFx0XHQuc2V0RGVzYyhgXHVEODNEXHVEQ0Y5IExlYXJuIGhvdyB0byBzZXR1cCBsb2NhbCBtb2RlOiAke3ZpZGVvVXJsfWApXG5cdFx0XHQuYWRkQnV0dG9uKChidXR0b24pID0+IHtcblx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoXCJPcGVuIFZpZGVvXCIpLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdHdpbmRvdy5vcGVuKHZpZGVvVXJsLCBcIl9ibGFua1wiKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZSA9PT0gXCJyZW1vdGVcIikge1xuXHRcdFx0dmlkZW9MaW5rU2V0dGluZy5zZXR0aW5nRWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdH1cblxuXHRcdC8vIEFQSSBLZXlcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiQVBJIEtleVwiKVxuXHRcdFx0LnNldERlc2MoXCJBUEkga2V5IGZvciBhdXRoZW50aWNhdGlvbiAob3B0aW9uYWwgZm9yIE1WUClcIilcblx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG5cdFx0XHRcdHRleHQuc2V0UGxhY2Vob2xkZXIoXCJFbnRlciBBUEkga2V5XCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSlcblx0XHRcdFx0XHQuaW5wdXRFbC50eXBlID0gXCJwYXNzd29yZFwiO1xuXHRcdFx0XHR0ZXh0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlN5bmMgRm9sZGVyIFBhdGhcIilcblx0XHRcdC5zZXREZXNjKFwiRm9sZGVyIHBhdGggd2hlcmUgc3luY2VkIHN0b3JpZXMgd2lsbCBiZSBzdG9yZWRcIilcblx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiU3Rvcmllc1wiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeW5jRm9sZGVyUGF0aCB8fCBcIlN0b3JpZXNcIilcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeW5jRm9sZGVyUGF0aCA9IHZhbHVlLnRyaW0oKSB8fCBcIlN0b3JpZXNcIjtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkF1dG8gVmVyc2lvbiBTbmFwc2hvdHNcIilcblx0XHRcdC5zZXREZXNjKFwiQXV0b21hdGljYWxseSBjcmVhdGUgdmVyc2lvbiBzbmFwc2hvdHMgd2hlbiBzeW5jaW5nXCIpXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG5cdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvVmVyc2lvblNuYXBzaG90cyA/PyB0cnVlKVxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9WZXJzaW9uU25hcHNob3RzID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJBdXRvIFN5bmMgb24gQVBJIFVwZGF0ZXNcIilcblx0XHRcdC5zZXREZXNjKFwiQXBwbHkgQVBJIHVwZGF0ZSBwYXlsb2FkcyBkaXJlY3RseSB0byBsb2NhbCBmaWxlcyB3aGVuIGF2YWlsYWJsZVwiKVxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1N5bmNPbkFwaVVwZGF0ZXMgPz8gdHJ1ZSlcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvU3luY09uQXBpVXBkYXRlcyA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiQXV0byBQdXNoIG9uIEJsdXIvSWRsZVwiKVxuXHRcdFx0LnNldERlc2MoXCJXaGVuIHlvdSBsZWF2ZSBhIGNoYXB0ZXIvc2NlbmUvYmVhdCBvciBzdGF5IGlkbGUgZm9yIDEgbWluLCBwdXNoIGNoYW5nZXMgdXBzdHJlYW0gYXV0b21hdGljYWxseVwiKVxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1B1c2hPbkZpbGVCbHVyID8/IHRydWUpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1B1c2hPbkZpbGVCbHVyID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIENvbmZsaWN0IFJlc29sdXRpb24gKGNvbmRpdGlvbmFsIC0gaGlkZGVuIGluIGxvY2FsIG1vZGUpXG5cdFx0Y29uZmxpY3RSZXNvbHV0aW9uU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJDb25mbGljdCBSZXNvbHV0aW9uXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkhvdyB0byByZXNvbHZlIGNvbmZsaWN0cyB3aGVuIGJvdGggbG9jYWwgYW5kIHNlcnZpY2UgaGF2ZSBjaGFuZ2VzXCIpXG5cdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxuXHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJzZXJ2aWNlXCIsIFwiU2VydmljZSBXaW5zXCIpXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihcImxvY2FsXCIsIFwiTG9jYWwgV2luc1wiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJtYW51YWxcIiwgXCJNYW51YWwgKE5ld2VyIFdpbnMpXCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZsaWN0UmVzb2x1dGlvbiB8fCBcInNlcnZpY2VcIilcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25mbGljdFJlc29sdXRpb24gPVxuXHRcdFx0XHRcdFx0XHR2YWx1ZSBhcyBcInNlcnZpY2VcIiB8IFwibG9jYWxcIiB8IFwibWFudWFsXCI7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZSA9PT0gXCJsb2NhbFwiKSB7XG5cdFx0XHRjb25mbGljdFJlc29sdXRpb25TZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0fVxuXG5cdFx0Ly8gU2hvdyBIZWxwIEJveCBpbiBNRCBGaWxlc1xuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJTaG93IEhlbHAgQm94IGluIE1EIEZpbGVzXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkVuYWJsZS9kaXNhYmxlIGluZm8vaGVscCBib3hlcyBpbiBtYXJrZG93biBmaWxlc1wiKVxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuXHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0hlbHBCb3ggPz8gdHJ1ZSlcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93SGVscEJveCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHQvLyBTaWRlYmFyIFBvc2l0aW9uXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIldvcmxkIFNpZGViYXIgUG9zaXRpb25cIilcblx0XHRcdC5zZXREZXNjKFwiQ2hvb3NlIHdoZXRoZXIgdGhlIHdvcmxkIHNpZGViYXIgYXBwZWFycyBvbiB0aGUgbGVmdCBvciByaWdodCBzaWRlXCIpXG5cdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PlxuXHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJsZWZ0XCIsIFwiTGVmdFwiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJyaWdodFwiLCBcIlJpZ2h0XCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNpZGViYXJQb3NpdGlvbiB8fCBcImxlZnRcIilcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaWRlYmFyUG9zaXRpb24gPSB2YWx1ZSBhcyBcImxlZnRcIiB8IFwicmlnaHRcIjtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0Ly8gVHJpZ2dlciB2aWV3IHJlZnJlc2ggaWYgbmVlZGVkXG5cdFx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UudHJpZ2dlcihcImxheW91dC1jaGFuZ2VcIik7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiVW5zcGxhc2ggQWNjZXNzIEtleVwiKVxuXHRcdFx0LnNldERlc2MoXCJBcHBsaWNhdGlvbiBJRCAvIEFjY2VzcyBLZXkgZm9yIFVuc3BsYXNoIEFQSSAoZ2V0IG9uZSBhdCBodHRwczovL3Vuc3BsYXNoLmNvbS9kZXZlbG9wZXJzKVwiKVxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcblx0XHRcdFx0dGV4dC5zZXRQbGFjZWhvbGRlcihcIkVudGVyIFVuc3BsYXNoIGFjY2VzcyBrZXlcIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudW5zcGxhc2hBY2Nlc3NLZXkgfHwgXCJcIilcblx0XHRcdFx0XHQuaW5wdXRFbC50eXBlID0gXCJwYXNzd29yZFwiO1xuXHRcdFx0XHR0ZXh0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnVuc3BsYXNoQWNjZXNzS2V5ID0gdmFsdWUudHJpbSgpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlVuc3BsYXNoIFNlY3JldCBLZXlcIilcblx0XHRcdC5zZXREZXNjKFwiU2VjcmV0IEtleSBmb3IgVW5zcGxhc2ggQVBJIChvcHRpb25hbCwgbmVlZGVkIGZvciBzb21lIG9wZXJhdGlvbnMpXCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xuXHRcdFx0XHR0ZXh0LnNldFBsYWNlaG9sZGVyKFwiRW50ZXIgVW5zcGxhc2ggc2VjcmV0IGtleVwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy51bnNwbGFzaFNlY3JldEtleSB8fCBcIlwiKVxuXHRcdFx0XHRcdC5pbnB1dEVsLnR5cGUgPSBcInBhc3N3b3JkXCI7XG5cdFx0XHRcdHRleHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudW5zcGxhc2hTZWNyZXRLZXkgPSB2YWx1ZS50cmltKCk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHQvLyBUZXN0IGNvbm5lY3Rpb24gYnV0dG9uXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlRlc3QgQ29ubmVjdGlvblwiKVxuXHRcdFx0LnNldERlc2MoXCJUZXN0IGNvbm5lY3Rpb24gdG8gdGhlIFN0b3J5IEVuZ2luZSBBUElcIilcblx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT5cblx0XHRcdFx0YnV0dG9uXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJUZXN0XCIpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoXCJUZXN0aW5nLi4uXCIpO1xuXHRcdFx0XHRcdFx0YnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnRlc3RDb25uZWN0aW9uKCk7XG5cdFx0XHRcdFx0XHRcdGlmIChyZXN1bHQpIHtcblx0XHRcdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChcIlN1Y2Nlc3MhXCIpO1xuXHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoXCJUZXN0XCIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0YnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcblx0XHRcdFx0XHRcdFx0XHR9LCAyMDAwKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChcIkZhaWxlZFwiKTtcblx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRCdXR0b25UZXh0KFwiVGVzdFwiKTtcblx0XHRcdFx0XHRcdFx0XHRcdGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XG5cdFx0XHRcdFx0XHRcdFx0fSwgMjAwMCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChcIkVycm9yXCIpO1xuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChcIlRlc3RcIik7XG5cdFx0XHRcdFx0XHRcdFx0YnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcblx0XHRcdFx0XHRcdFx0fSwgMjAwMCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdH1cbn1cblxuXG4iLCAiaW1wb3J0IHsgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBTdG9yeVN5bmNNb2RhbCB9IGZyb20gXCIuL3ZpZXdzL1N0b3J5U3luY01vZGFsXCI7XG5pbXBvcnQgU3RvcnlFbmdpbmVQbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb21tYW5kcyhwbHVnaW46IFN0b3J5RW5naW5lUGx1Z2luKSB7XG5cdHBsdWdpbi5hZGRDb21tYW5kKHtcblx0XHRpZDogXCJsaXN0LXN0b3JpZXNcIixcblx0XHRuYW1lOiBcIkxpc3QgU3Rvcmllc1wiLFxuXHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRwbHVnaW4uYWN0aXZhdGVWaWV3KCk7XG5cdFx0fSxcblx0fSk7XG5cblx0cGx1Z2luLmFkZENvbW1hbmQoe1xuXHRcdGlkOiBcImNyZWF0ZS1zdG9yeVwiLFxuXHRcdG5hbWU6IFwiQ3JlYXRlIFN0b3J5XCIsXG5cdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdHBsdWdpbi5jcmVhdGVTdG9yeUNvbW1hbmQoKTtcblx0XHR9LFxuXHR9KTtcblxuXHRwbHVnaW4uYWRkQ29tbWFuZCh7XG5cdFx0aWQ6IFwic3luYy1zdG9yeS1mcm9tLXNlcnZpY2VcIixcblx0XHRuYW1lOiBcIlN5bmMgU3RvcnkgZnJvbSBTZXJ2aWNlXCIsXG5cdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdG5ldyBTdG9yeVN5bmNNb2RhbChwbHVnaW4sIFwicHVsbFwiKS5vcGVuKCk7XG5cdFx0fSxcblx0fSk7XG5cblx0cGx1Z2luLmFkZENvbW1hbmQoe1xuXHRcdGlkOiBcInB1c2gtc3RvcnktdG8tc2VydmljZVwiLFxuXHRcdG5hbWU6IFwiUHVzaCBTdG9yeSB0byBTZXJ2aWNlXCIsXG5cdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdG5ldyBTdG9yeVN5bmNNb2RhbChwbHVnaW4sIFwicHVzaFwiKS5vcGVuKCk7XG5cdFx0fSxcblx0fSk7XG5cblx0cGx1Z2luLmFkZENvbW1hbmQoe1xuXHRcdGlkOiBcInN5bmMtYWxsLXN0b3JpZXNcIixcblx0XHRuYW1lOiBcIlN5bmMgQWxsIFN0b3JpZXNcIixcblx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0Ly8gT25seSB2YWxpZGF0ZSB0ZW5hbnQgSUQgaW4gcmVtb3RlIG1vZGVcblx0XHRcdGlmIChwbHVnaW4uc2V0dGluZ3MubW9kZSA9PT0gXCJyZW1vdGVcIiAmJiAhcGx1Z2luLnNldHRpbmdzLnRlbmFudElkKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJQbGVhc2UgY29uZmlndXJlIFRlbmFudCBJRCBpbiBzZXR0aW5nc1wiLCA1MDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiU3luY2luZyBhbGwgc3Rvcmllcy4uLlwiKTtcblx0XHRcdFx0YXdhaXQgcGx1Z2luLnN5bmNTZXJ2aWNlLnB1bGxBbGxTdG9yaWVzKCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID1cblx0XHRcdFx0XHRlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gc3luYyBzdG9yaWVzXCI7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yTWVzc2FnZX1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9LFxuXHR9KTtcblxuXHRwbHVnaW4uYWRkQ29tbWFuZCh7XG5cdFx0aWQ6IFwiZXh0cmFjdC1lbnRpdGllcy1mcm9tLXNlbGVjdGlvblwiLFxuXHRcdG5hbWU6IFwiRXh0cmFjdCBFbnRpdGllcyBmcm9tIFNlbGVjdGlvblwiLFxuXHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yKSA9PiB7XG5cdFx0XHRjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG5cdFx0XHRpZiAoIXNlbGVjdGlvbi50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIlNlbGVjdCB0ZXh0IHRvIGV4dHJhY3QgZW50aXRpZXNcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHBsdWdpbi5leHRyYWN0U2VsZWN0aW9uQ29tbWFuZChzZWxlY3Rpb24pO1xuXHRcdH0sXG5cdH0pO1xufVxuXG4iLCAiaW1wb3J0IHsgTW9kYWwsIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IFN0b3J5RW5naW5lUGx1Z2luIGZyb20gXCIuLi9tYWluXCI7XG5pbXBvcnQgeyBTdG9yeSB9IGZyb20gXCIuLi90eXBlc1wiO1xuXG5leHBvcnQgY2xhc3MgU3RvcnlTeW5jTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdHBsdWdpbjogU3RvcnlFbmdpbmVQbHVnaW47XG5cdG1vZGU6IFwicHVsbFwiIHwgXCJwdXNoXCI7XG5cdHN0b3JpZXM6IFN0b3J5W10gPSBbXTtcblx0bG9hZGluZzogYm9vbGVhbiA9IHRydWU7XG5cdGVycm9yOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IFN0b3J5RW5naW5lUGx1Z2luLCBtb2RlOiBcInB1bGxcIiB8IFwicHVzaFwiKSB7XG5cdFx0c3VwZXIocGx1Z2luLmFwcCk7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdFx0dGhpcy5tb2RlID0gbW9kZTtcblx0fVxuXG5cdGFzeW5jIG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblxuXHRcdGNvbnN0IHRpdGxlID1cblx0XHRcdHRoaXMubW9kZSA9PT0gXCJwdWxsXCJcblx0XHRcdFx0PyBcIlN5bmMgU3RvcnkgZnJvbSBTZXJ2aWNlXCJcblx0XHRcdFx0OiBcIlB1c2ggU3RvcnkgdG8gU2VydmljZVwiO1xuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogdGl0bGUgfSk7XG5cblx0XHRhd2FpdCB0aGlzLmxvYWRTdG9yaWVzKCk7XG5cblx0XHRpZiAodGhpcy5sb2FkaW5nKSB7XG5cdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJMb2FkaW5nIHN0b3JpZXMuLi5cIiB9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5lcnJvcikge1xuXHRcdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7XG5cdFx0XHRcdHRleHQ6IGBFcnJvcjogJHt0aGlzLmVycm9yfWAsXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXJyb3JcIixcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnN0b3JpZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBzdG9yaWVzIGZvdW5kLlwiIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IHN0b3JpZXNMaXN0ID0gY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1saXN0XCIgfSk7XG5cblx0XHRmb3IgKGNvbnN0IHN0b3J5IG9mIHRoaXMuc3Rvcmllcykge1xuXHRcdFx0Y29uc3Qgc3RvcnlJdGVtID0gc3Rvcmllc0xpc3QuY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIixcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCB0aXRsZSA9IHN0b3J5SXRlbS5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIixcblx0XHRcdFx0dGV4dDogc3RvcnkudGl0bGUsXG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgbWV0YSA9IHN0b3J5SXRlbS5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtbWV0YVwiLFxuXHRcdFx0fSk7XG5cdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7XG5cdFx0XHRcdHRleHQ6IGBWZXJzaW9uICR7c3RvcnkudmVyc2lvbl9udW1iZXJ9YCxcblx0XHRcdH0pO1xuXHRcdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwge1xuXHRcdFx0XHR0ZXh0OiBgU3RhdHVzOiAke3N0b3J5LnN0YXR1c31gLFxuXHRcdFx0fSk7XG5cblx0XHRcdHN0b3J5SXRlbS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMubW9kZSA9PT0gXCJwdWxsXCIpIHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnN5bmNTZXJ2aWNlLnB1bGxTdG9yeShzdG9yeS5pZCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnN0IGZvbGRlclBhdGggPSB0aGlzLnBsdWdpbi5maWxlTWFuYWdlci5nZXRTdG9yeUZvbGRlclBhdGgoXG5cdFx0XHRcdFx0XHRcdHN0b3J5LnRpdGxlXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc3luY1NlcnZpY2UucHVzaFN0b3J5KGZvbGRlclBhdGgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID1cblx0XHRcdFx0XHRcdGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBzeW5jIHN0b3J5XCI7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGxvYWRTdG9yaWVzKCkge1xuXHRcdHRoaXMubG9hZGluZyA9IHRydWU7XG5cdFx0dGhpcy5lcnJvciA9IG51bGw7XG5cblx0XHR0cnkge1xuXHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW5hbnRJZCkge1xuXHRcdFx0XHR0aGlzLmVycm9yID0gXCJUZW5hbnQgSUQgbm90IGNvbmZpZ3VyZWRcIjtcblx0XHRcdFx0dGhpcy5sb2FkaW5nID0gZmFsc2U7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5zdG9yaWVzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50Lmxpc3RTdG9yaWVzKCk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHR0aGlzLmVycm9yID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiO1xuXHRcdH0gZmluYWxseSB7XG5cdFx0XHR0aGlzLmxvYWRpbmcgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cblxuXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgU3RvcnlFbmdpbmVQbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcbmltcG9ydCB7IFdvcmxkIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBDcmVhdGVXb3JsZE1vZGFsIH0gZnJvbSBcIi4vQ3JlYXRlV29ybGRNb2RhbFwiO1xuXG5leHBvcnQgY2xhc3MgQ3JlYXRlU3RvcnlNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0cGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbjtcblx0dGl0bGU6IHN0cmluZyA9IFwiXCI7XG5cdHNlbGVjdGVkV29ybGRJZDogc3RyaW5nID0gXCJcIjtcblx0c2hvdWxkU3luYzogYm9vbGVhbiA9IHRydWU7XG5cdHdvcmxkczogV29ybGRbXSA9IFtdO1xuXHRvblN1Ym1pdDogKHRpdGxlOiBzdHJpbmcsIHdvcmxkSWQ6IHN0cmluZyB8IHVuZGVmaW5lZCwgc2hvdWxkU3luYzogYm9vbGVhbikgPT4gdm9pZDtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbiwgb25TdWJtaXQ6ICh0aXRsZTogc3RyaW5nLCB3b3JsZElkOiBzdHJpbmcgfCB1bmRlZmluZWQsIHNob3VsZFN5bmM6IGJvb2xlYW4pID0+IHZvaWQpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHRcdHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcblx0fVxuXG5cdGFzeW5jIG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJDcmVhdGUgTmV3IFN0b3J5XCIgfSk7XG5cblx0XHQvLyBMb2FkIHdvcmxkc1xuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLndvcmxkcyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRXb3JsZHMoKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gbG9hZCB3b3JsZHM6XCIsIGVycik7XG5cdFx0XHR0aGlzLndvcmxkcyA9IFtdO1xuXHRcdH1cblxuXHRcdC8vIFRpdGxlIGlucHV0XG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJTdG9yeSBUaXRsZVwiKVxuXHRcdFx0LnNldERlc2MoXCJFbnRlciB0aGUgdGl0bGUgZm9yIHlvdXIgbmV3IHN0b3J5XCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIk15IE5ldyBTdG9yeVwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnRpdGxlKVxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMudGl0bGUgPSB2YWx1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zdWJtaXQoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIFdvcmxkIHNlbGVjdGlvblxuXHRcdGNvbnN0IHdvcmxkT3B0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcblx0XHRcdFwiXCI6IFwiTm8gV29ybGRcIixcblx0XHR9O1xuXHRcdGZvciAoY29uc3Qgd29ybGQgb2YgdGhpcy53b3JsZHMpIHtcblx0XHRcdHdvcmxkT3B0aW9uc1t3b3JsZC5pZF0gPSB3b3JsZC5uYW1lO1xuXHRcdH1cblx0XHR3b3JsZE9wdGlvbnNbXCJfX2NyZWF0ZV9uZXdfX1wiXSA9IFwiQ3JlYXRlIG5ldyB3b3JsZC4uLlwiO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJXb3JsZFwiKVxuXHRcdFx0LnNldERlc2MoXCJTZWxlY3QgYSB3b3JsZCBmb3IgdGhpcyBzdG9yeSAob3B0aW9uYWwpXCIpXG5cdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG5cdFx0XHRcdGZvciAoY29uc3QgW3ZhbHVlLCBsYWJlbF0gb2YgT2JqZWN0LmVudHJpZXMod29ybGRPcHRpb25zKSkge1xuXHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih2YWx1ZSwgbGFiZWwpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRyb3Bkb3duLnNldFZhbHVlKHRoaXMuc2VsZWN0ZWRXb3JsZElkIHx8IFwiXCIpO1xuXHRcdFx0XHRkcm9wZG93bi5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRpZiAodmFsdWUgPT09IFwiX19jcmVhdGVfbmV3X19cIikge1xuXHRcdFx0XHRcdFx0Ly8gT3BlbiBjcmVhdGUgd29ybGQgbW9kYWxcblx0XHRcdFx0XHRcdG5ldyBDcmVhdGVXb3JsZE1vZGFsKHRoaXMuYXBwLCBhc3luYyAobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBnZW5yZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3V29ybGQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlV29ybGQobmFtZSwgZGVzY3JpcHRpb24sIGdlbnJlKTtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLndvcmxkcy5wdXNoKG5ld1dvcmxkKTtcblx0XHRcdFx0XHRcdFx0XHQvLyBSZWZyZXNoIGRyb3Bkb3duXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5vbkNsb3NlKCk7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5vbk9wZW4oKTtcblx0XHRcdFx0XHRcdFx0XHQvLyBSZS1zZWxlY3QgdGhlIG5ld2x5IGNyZWF0ZWQgd29ybGRcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkV29ybGRJZCA9IG5ld1dvcmxkLmlkO1xuXHRcdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gY3JlYXRlIHdvcmxkXCI7XG5cdFx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KS5vcGVuKCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMuc2VsZWN0ZWRXb3JsZElkID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0Ly8gU3luYyBjaGVja2JveFxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5zZXROYW1lKFwiU3luYyB0byBPYnNpZGlhblwiKVxuXHRcdFx0LnNldERlc2MoXCJBdXRvbWF0aWNhbGx5IHN5bmMgdGhlIHN0b3J5IGZpbGVzIHRvIHlvdXIgdmF1bHQgYWZ0ZXIgY3JlYXRpb25cIilcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cblx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuc2hvdWxkU3luYylcblx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnNob3VsZFN5bmMgPSB2YWx1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIEJ1dHRvbnNcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRcblx0XHRjb25zdCBjcmVhdGVCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJDcmVhdGVcIixcblx0XHRcdGNsczogXCJtb2QtY3RhXCIsXG5cdFx0fSk7XG5cdFx0Y3JlYXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnN1Ym1pdCgpKTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIkNhbmNlbFwiLFxuXHRcdH0pO1xuXHRcdGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblxuXHRcdC8vIEZvY3VzIG9uIHRpdGxlIGlucHV0XG5cdFx0Y29uc3QgdGl0bGVJbnB1dCA9IChjb250ZW50RWwgYXMgSFRNTEVsZW1lbnQpLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKSBhcyBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbDtcblx0XHRpZiAodGl0bGVJbnB1dCkge1xuXHRcdFx0dGl0bGVJbnB1dC5mb2N1cygpO1xuXHRcdH1cblx0fVxuXG5cdHN1Ym1pdCgpIHtcblx0XHRjb25zdCB0cmltbWVkVGl0bGUgPSB0aGlzLnRpdGxlLnRyaW0oKTtcblx0XHRcblx0XHRpZiAoIXRyaW1tZWRUaXRsZSkge1xuXHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBlbnRlciBhIHN0b3J5IHRpdGxlXCIsIDMwMDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuY2xvc2UoKTtcblx0XHRjb25zdCB3b3JsZElkID0gdGhpcy5zZWxlY3RlZFdvcmxkSWQgJiYgdGhpcy5zZWxlY3RlZFdvcmxkSWQgIT09IFwiX19jcmVhdGVfbmV3X19cIiA/IHRoaXMuc2VsZWN0ZWRXb3JsZElkIDogdW5kZWZpbmVkO1xuXHRcdHRoaXMub25TdWJtaXQodHJpbW1lZFRpdGxlLCB3b3JsZElkLCB0aGlzLnNob3VsZFN5bmMpO1xuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBjbGFzcyBDcmVhdGVXb3JsZE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRuYW1lOiBzdHJpbmcgPSBcIlwiO1xuXHRkZXNjcmlwdGlvbjogc3RyaW5nID0gXCJcIjtcblx0Z2VucmU6IHN0cmluZyA9IFwiXCI7XG5cdG9uU3VibWl0OiAobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBnZW5yZTogc3RyaW5nKSA9PiB2b2lkO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvblN1Ym1pdDogKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgZ2VucmU6IHN0cmluZykgPT4gdm9pZCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIkNyZWF0ZSBOZXcgV29ybGRcIiB9KTtcblxuXHRcdC8vIE5hbWUgaW5wdXRcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZShcIldvcmxkIE5hbWVcIilcblx0XHRcdC5zZXREZXNjKFwiRW50ZXIgdGhlIG5hbWUgZm9yIHlvdXIgbmV3IHdvcmxkXCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIk15IE5ldyBXb3JsZFwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLm5hbWUpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5uYW1lID0gdmFsdWU7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcblx0XHRcdFx0XHRcdGlmIChlLmtleSA9PT0gXCJFbnRlclwiKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGRlc2NyaXB0aW9uSW5wdXQgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcihcInRleHRhcmVhXCIpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQgfCBudWxsO1xuXHRcdFx0XHRcdFx0XHRpZiAoZGVzY3JpcHRpb25JbnB1dCkge1xuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uSW5wdXQuZm9jdXMoKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0Ly8gRGVzY3JpcHRpb24gaW5wdXRcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZShcIkRlc2NyaXB0aW9uXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkVudGVyIGEgZGVzY3JpcHRpb24gZm9yIHlvdXIgd29ybGRcIilcblx0XHRcdC5hZGRUZXh0QXJlYSgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIkEgYnJpZWYgZGVzY3JpcHRpb24gb2YgeW91ciB3b3JsZC4uLlwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLmRlc2NyaXB0aW9uKVxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuZGVzY3JpcHRpb24gPSB2YWx1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIEdlbnJlIGlucHV0XG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJHZW5yZVwiKVxuXHRcdFx0LnNldERlc2MoXCJFbnRlciB0aGUgZ2VucmUgb2YgeW91ciB3b3JsZFwiKVxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdHRleHRcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJGYW50YXN5LCBTY2ktRmksIENvbnRlbXBvcmFyeSwgZXRjLlwiKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLmdlbnJlKVxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuZ2VucmUgPSB2YWx1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zdWJtaXQoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIEJ1dHRvbnNcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRcblx0XHRjb25zdCBjcmVhdGVCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJDcmVhdGVcIixcblx0XHRcdGNsczogXCJtb2QtY3RhXCIsXG5cdFx0fSk7XG5cdFx0Y3JlYXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnN1Ym1pdCgpKTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIkNhbmNlbFwiLFxuXHRcdH0pO1xuXHRcdGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblxuXHRcdC8vIEZvY3VzIG9uIG5hbWUgaW5wdXRcblx0XHRjb25zdCBuYW1lSW5wdXQgPSAoY29udGVudEVsIGFzIEhUTUxFbGVtZW50KS5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikgYXMgSFRNTElucHV0RWxlbWVudCB8IG51bGw7XG5cdFx0aWYgKG5hbWVJbnB1dCkge1xuXHRcdFx0bmFtZUlucHV0LmZvY3VzKCk7XG5cdFx0fVxuXHR9XG5cblx0c3VibWl0KCkge1xuXHRcdGNvbnN0IHRyaW1tZWROYW1lID0gdGhpcy5uYW1lLnRyaW0oKTtcblx0XHRjb25zdCB0cmltbWVkRGVzY3JpcHRpb24gPSB0aGlzLmRlc2NyaXB0aW9uLnRyaW0oKTtcblx0XHRjb25zdCB0cmltbWVkR2VucmUgPSB0aGlzLmdlbnJlLnRyaW0oKTtcblx0XHRcblx0XHRpZiAoIXRyaW1tZWROYW1lKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiUGxlYXNlIGVudGVyIGEgd29ybGQgbmFtZVwiLCAzMDAwKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIXRyaW1tZWRHZW5yZSkge1xuXHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBlbnRlciBhIGdlbnJlXCIsIDMwMDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuY2xvc2UoKTtcblx0XHR0aGlzLm9uU3VibWl0KHRyaW1tZWROYW1lLCB0cmltbWVkRGVzY3JpcHRpb24sIHRyaW1tZWRHZW5yZSk7XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cbiIsICJpbXBvcnQgeyBOb3RpY2UsIFRGaWxlLCBURm9sZGVyLCBWYXVsdCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgU3RvcnksIENoYXB0ZXIsIENoYXB0ZXJXaXRoQ29udGVudCwgU3RvcnlNZXRhZGF0YSwgU2NlbmUsIEJlYXQsIFNjZW5lV2l0aEJlYXRzLCBDb250ZW50QmxvY2ssIENvbnRlbnRBbmNob3IgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuLy8gU3RydWN0dXJlIHRvIG9yZ2FuaXplIGNvbnRlbnQgYmxvY2tzIGJ5IHRoZWlyIGFzc29jaWF0aW9uc1xuZXhwb3J0IGludGVyZmFjZSBDb250ZW50QmxvY2tPcmdhbml6YXRpb24ge1xuXHRjaGFwdGVyT25seTogQ29udGVudEJsb2NrW107IC8vIENvbnRlbnQgYmxvY2tzIG9ubHkgYXNzb2NpYXRlZCB3aXRoIGNoYXB0ZXJcblx0YnlTY2VuZTogTWFwPHN0cmluZywgeyBzY2VuZTogU2NlbmU7IGNvbnRlbnRCbG9ja3M6IENvbnRlbnRCbG9ja1tdIH0+OyAvLyBDb250ZW50IGJsb2NrcyBieSBzY2VuZSBJRFxuXHRieUJlYXQ6IE1hcDxzdHJpbmcsIHsgYmVhdDogQmVhdDsgY29udGVudEJsb2NrczogQ29udGVudEJsb2NrW10gfT47IC8vIENvbnRlbnQgYmxvY2tzIGJ5IGJlYXQgSURcbn1cblxuZXhwb3J0IGNsYXNzIEZpbGVNYW5hZ2VyIHtcblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSB2YXVsdDogVmF1bHQsXG5cdFx0cHJpdmF0ZSBiYXNlRm9sZGVyOiBzdHJpbmdcblx0KSB7fVxuXG5cdC8vIEV4cG9zZSB2YXVsdCBmb3Igc3luYyBvcGVyYXRpb25zXG5cdGdldFZhdWx0KCk6IFZhdWx0IHtcblx0XHRyZXR1cm4gdGhpcy52YXVsdDtcblx0fVxuXG5cdC8vIEdldCB0aGUgZm9sZGVyIHBhdGggZm9yIGEgc3BlY2lmaWMgc3Rvcnlcblx0Z2V0U3RvcnlGb2xkZXJQYXRoKHN0b3J5VGl0bGU6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Y29uc3Qgc2FuaXRpemVkID0gdGhpcy5zYW5pdGl6ZUZvbGRlck5hbWUoc3RvcnlUaXRsZSk7XG5cdFx0cmV0dXJuIGAke3RoaXMuYmFzZUZvbGRlcn0vJHtzYW5pdGl6ZWR9YDtcblx0fVxuXG5cdC8vIFNhbml0aXplIGZvbGRlci9maWxlIG5hbWVzXG5cdHByaXZhdGUgc2FuaXRpemVGb2xkZXJOYW1lKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIG5hbWVcblx0XHRcdC5yZXBsYWNlKC9bPD46XCIvXFxcXHw/Kl0vZywgXCItXCIpXG5cdFx0XHQucmVwbGFjZSgvXFxzKy9nLCBcIiBcIilcblx0XHRcdC50cmltKCk7XG5cdH1cblxuXHQvLyBHZW5lcmF0ZSBmcm9udG1hdHRlciB3aXRoIE9ic2lkaWFuIHRhZ3Ncblx0cHJpdmF0ZSBnZW5lcmF0ZUZyb250bWF0dGVyKFxuXHRcdGJhc2VGaWVsZHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlciB8IG51bGw+LFxuXHRcdGV4dHJhRmllbGRzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgbnVsbD4sXG5cdFx0b3B0aW9ucz86IHtcblx0XHRcdGVudGl0eVR5cGU6IFwic3RvcnlcIiB8IFwiY2hhcHRlclwiIHwgXCJzY2VuZVwiIHwgXCJiZWF0XCIgfCBcImNvbnRlbnQtYmxvY2tcIjtcblx0XHRcdHN0b3J5TmFtZT86IHN0cmluZztcblx0XHRcdGRhdGU/OiBzdHJpbmc7IC8vIElTTyBkYXRlIHN0cmluZyAoWVlZWS1NTS1ERCkgb3IgRGF0ZSBvYmplY3Rcblx0XHR9XG5cdCk6IHN0cmluZyB7XG5cdFx0Y29uc3QgZmllbGRzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXIgfCBudWxsPiA9IHsgLi4uYmFzZUZpZWxkcyB9O1xuXG5cdFx0Ly8gQWRkIGV4dHJhIGZpZWxkcyBpZiBwcm92aWRlZFxuXHRcdGlmIChleHRyYUZpZWxkcykge1xuXHRcdFx0T2JqZWN0LmFzc2lnbihmaWVsZHMsIGV4dHJhRmllbGRzKTtcblx0XHR9XG5cblx0XHQvLyBHZW5lcmF0ZSB0YWdzICh3aXRob3V0ICMgcHJlZml4IC0gT2JzaWRpYW4gYWRkcyBpdCBhdXRvbWF0aWNhbGx5KVxuXHRcdGNvbnN0IHRhZ3M6IHN0cmluZ1tdID0gW107XG5cdFx0aWYgKG9wdGlvbnMpIHtcblx0XHRcdC8vIEVudGl0eSB0eXBlIHRhZ1xuXHRcdFx0dGFncy5wdXNoKGBzdG9yeS1lbmdpbmUvJHtvcHRpb25zLmVudGl0eVR5cGV9YCk7XG5cblx0XHRcdC8vIFN0b3J5IG5hbWUgdGFnIChzYW5pdGl6ZWQpXG5cdFx0XHRpZiAob3B0aW9ucy5zdG9yeU5hbWUpIHtcblx0XHRcdFx0Y29uc3Qgc2FuaXRpemVkU3RvcnlOYW1lID0gdGhpcy5zYW5pdGl6ZUZvbGRlck5hbWUob3B0aW9ucy5zdG9yeU5hbWUpXG5cdFx0XHRcdFx0LnRvTG93ZXJDYXNlKClcblx0XHRcdFx0XHQucmVwbGFjZSgvXFxzKy9nLCBcIi1cIik7XG5cdFx0XHRcdHRhZ3MucHVzaChgc3RvcnkvJHtzYW5pdGl6ZWRTdG9yeU5hbWV9YCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIERhdGUgdGFnIGluIGZvcm1hdCBZWVlZL01NL0REXG5cdFx0XHRpZiAob3B0aW9ucy5kYXRlKSB7XG5cdFx0XHRcdGNvbnN0IGRhdGUgPSB0eXBlb2Ygb3B0aW9ucy5kYXRlID09PSBcInN0cmluZ1wiID8gbmV3IERhdGUob3B0aW9ucy5kYXRlKSA6IG9wdGlvbnMuZGF0ZTtcblx0XHRcdFx0aWYgKCFpc05hTihkYXRlLmdldFRpbWUoKSkpIHtcblx0XHRcdFx0XHRjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuXHRcdFx0XHRcdGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRcdFx0XHRjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRcdFx0XHR0YWdzLnB1c2goYGRhdGUvJHt5ZWFyfS8ke21vbnRofS8ke2RheX1gKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEJ1aWxkIGZyb250bWF0dGVyIGxpbmVzXG5cdFx0Y29uc3QgbGluZXM6IHN0cmluZ1tdID0gW1wiLS0tXCJdO1xuXG5cdFx0Ly8gQWRkIGFsbCBmaWVsZHNcblx0XHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhmaWVsZHMpKSB7XG5cdFx0XHRpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRsaW5lcy5wdXNoKGAke2tleX06IG51bGxgKTtcblx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdC8vIEVzY2FwZSBxdW90ZXMgYW5kIHdyYXAgaW4gcXVvdGVzIGlmIGNvbnRhaW5zIHNwZWNpYWwgY2hhcnNcblx0XHRcdFx0Y29uc3QgZXNjYXBlZCA9IHZhbHVlLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKTtcblx0XHRcdFx0aWYgKHZhbHVlLmluY2x1ZGVzKFwiOlwiKSB8fCB2YWx1ZS5pbmNsdWRlcyhcIlxcblwiKSB8fCB2YWx1ZS5pbmNsdWRlcygnXCInKSkge1xuXHRcdFx0XHRcdGxpbmVzLnB1c2goYCR7a2V5fTogXCIke2VzY2FwZWR9XCJgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRsaW5lcy5wdXNoKGAke2tleX06ICR7ZXNjYXBlZH1gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bGluZXMucHVzaChgJHtrZXl9OiAke3ZhbHVlfWApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEFkZCB0YWdzIGlmIGFueVxuXHRcdGlmICh0YWdzLmxlbmd0aCA+IDApIHtcblx0XHRcdGxpbmVzLnB1c2goYHRhZ3M6YCk7XG5cdFx0XHRmb3IgKGNvbnN0IHRhZyBvZiB0YWdzKSB7XG5cdFx0XHRcdGxpbmVzLnB1c2goYCAgLSAke3RhZ31gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRsaW5lcy5wdXNoKFwiLS0tXCIsIFwiXCIpO1xuXG5cdFx0cmV0dXJuIGxpbmVzLmpvaW4oXCJcXG5cIik7XG5cdH1cblxuXHQvLyBFbnN1cmUgZm9sZGVyIGV4aXN0c1xuXHRhc3luYyBlbnN1cmVGb2xkZXJFeGlzdHMocGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgZm9sZGVyID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XG5cdFx0aWYgKCFmb2xkZXIpIHtcblx0XHRcdGF3YWl0IHRoaXMudmF1bHQuY3JlYXRlRm9sZGVyKHBhdGgpO1xuXHRcdH1cblx0fVxuXG5cdC8vIFdyaXRlIHN0b3J5IG1ldGFkYXRhIChzdG9yeS5tZClcblx0YXN5bmMgd3JpdGVTdG9yeU1ldGFkYXRhKFxuXHRcdHN0b3J5OiBTdG9yeSwgXG5cdFx0Zm9sZGVyUGF0aDogc3RyaW5nLCBcblx0XHRjaGFwdGVycz86IENoYXB0ZXJXaXRoQ29udGVudFtdLCBcblx0XHRvcnBoYW5TY2VuZXM/OiBTY2VuZVdpdGhCZWF0c1tdLCBcblx0XHRvcnBoYW5CZWF0cz86IEJlYXRbXSxcblx0XHRjaGFwdGVyQ29udGVudERhdGE/OiBNYXA8c3RyaW5nLCB7IGNvbnRlbnRCbG9ja3M6IENvbnRlbnRCbG9ja1tdLCBjb250ZW50QmxvY2tSZWZzOiBDb250ZW50QW5jaG9yW10gfT5cblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5lbnN1cmVGb2xkZXJFeGlzdHMoZm9sZGVyUGF0aCk7XG5cblx0XHRjb25zdCBiYXNlRmllbGRzID0ge1xuXHRcdFx0aWQ6IHN0b3J5LmlkLFxuXHRcdFx0dGl0bGU6IHN0b3J5LnRpdGxlLFxuXHRcdFx0c3RhdHVzOiBzdG9yeS5zdGF0dXMsXG5cdFx0XHR2ZXJzaW9uOiBzdG9yeS52ZXJzaW9uX251bWJlcixcblx0XHRcdHJvb3Rfc3RvcnlfaWQ6IHN0b3J5LnJvb3Rfc3RvcnlfaWQsXG5cdFx0XHRwcmV2aW91c192ZXJzaW9uX2lkOiBzdG9yeS5wcmV2aW91c19zdG9yeV9pZCxcblx0XHRcdGNyZWF0ZWRfYXQ6IHN0b3J5LmNyZWF0ZWRfYXQsXG5cdFx0XHR1cGRhdGVkX2F0OiBzdG9yeS51cGRhdGVkX2F0LFxuXHRcdH07XG5cblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMuZ2VuZXJhdGVGcm9udG1hdHRlcihiYXNlRmllbGRzLCB1bmRlZmluZWQsIHtcblx0XHRcdGVudGl0eVR5cGU6IFwic3RvcnlcIixcblx0XHRcdHN0b3J5TmFtZTogc3RvcnkudGl0bGUsXG5cdFx0XHRkYXRlOiBzdG9yeS5jcmVhdGVkX2F0LFxuXHRcdH0pO1xuXG5cdFx0bGV0IGNvbnRlbnQgPSBgJHtmcm9udG1hdHRlcn1cXG4jICR7c3RvcnkudGl0bGV9XFxuXFxuVmVyc2lvbjogJHtzdG9yeS52ZXJzaW9uX251bWJlcn1cXG5TdGF0dXM6ICR7c3Rvcnkuc3RhdHVzfVxcblxcbmA7XG5cblx0XHQvLyBGaWx0ZXIgb3V0IHRlbXBvcmFyeSBjaGFwdGVycyB1c2VkIGZvciBwcm9zZSBzdG9yYWdlXG5cdFx0Y29uc3QgdGVtcG9yYXJ5Q2hhcHRlclRpdGxlcyA9IFtcIlN0b3J5IFByb3NlXCIsIFwiU2NlbmUtTGV2ZWwgUHJvc2VcIiwgXCJCZWF0LUxldmVsIFByb3NlXCJdO1xuXHRcdGNvbnN0IGZpbHRlcmVkQ2hhcHRlcnMgPSBjaGFwdGVycz8uZmlsdGVyKGMgPT4gXG5cdFx0XHQhdGVtcG9yYXJ5Q2hhcHRlclRpdGxlcy5pbmNsdWRlcyhjLmNoYXB0ZXIudGl0bGUpICYmIGMuY2hhcHRlci5udW1iZXIgPCA5MDAwXG5cdFx0KSB8fCBbXTtcblxuXHRcdC8vIEdlbmVyYXRlIGhpZXJhcmNoaWNhbCBsaXN0IG9mIGNoYXB0ZXJzLCBzY2VuZXMgYW5kIGJlYXRzIGlmIHByb3ZpZGVkXG5cdFx0aWYgKGZpbHRlcmVkQ2hhcHRlcnMubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29udGVudCArPSBgIyMgQ2hhcHRlcnMsIFNjZW5lcyAmIEJlYXRzXFxuXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gWyFpbmZvXSBIb3cgdG8gdXNlIHRoaXMgbGlzdFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipDcmVhdGUgbmV3IGl0ZW0qKjogQWRkIGEgbGluZSB3aXRoIFxcYC1cXGAgZm9sbG93ZWQgYnkgdGhlIHRleHRcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgIC0gKipDaGFwdGVyKio6IE5vIGluZGVudGF0aW9uIChsZXZlbCAwKVxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgLSAqKlNjZW5lKio6IFVzZSAxIHRhYiBpbmRlbnRhdGlvbiAoaW5zaWRlIGEgY2hhcHRlcilcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgIC0gKipCZWF0Kio6IFVzZSAyIHRhYnMgaW5kZW50YXRpb24gKGluc2lkZSBhIHNjZW5lKVxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipSZW9yZGVyKio6IE1vdmUgaXRlbXMgdXAvZG93biB0byBjaGFuZ2Ugb3JkZXJcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqTGlua3MqKjogVXNlIFxcYFtbbGluay1uYW1lfHRleHRdXVxcYCB0byBjcmVhdGUgbGlua3MgdG8gZXhpc3RpbmcgZmlsZXNcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqRm9ybWF0Kio6XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAtICoqQ2hhcHRlcioqOlxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgICAtIENvbXBsZXRlOiBcXGBDaGFwdGVyIE46IHRpdGxlXFxgXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgIC0gU2ltcGxpZmllZDogXFxgdGl0bGVcXGBcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgIC0gKipTY2VuZSoqOlxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgICAtIENvbXBsZXRlOiBcXGBTY2VuZSBOOiBnb2FsIC0gdGltZVJlZlxcYFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgICAtIFNpbXBsaWZpZWQ6XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgICAgLSBcXGBnb2FsIC0gdGltZVJlZlxcYFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgICAgIC0gXFxgZ29hbFxcYFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgLSAqKkJlYXQqKjpcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgICAgLSBDb21wbGV0ZTogXFxgQmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZVxcYFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgICAtIFNpbXBsaWZpZWQ6XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgICAgLSBcXGBpbnRlbnQgLT4gb3V0Y29tZVxcYFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgICAgIC0gXFxgaW50ZW50XFxgXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gLSAqKk1hcmtlcnMqKjogXFxgLVxcYCBpbmRpY2F0ZXMgbm8gYXNzb2NpYXRlZCBwcm9zZSwgXFxgK1xcYCBpbmRpY2F0ZXMgYXNzb2NpYXRlZCBwcm9zZVxcblxcbmA7XG5cdFx0XHRcblx0XHRcdC8vIEFkZCBjaGFwdGVycyB3aXRoIHRoZWlyIHNjZW5lcyBhbmQgYmVhdHNcblx0XHRcdGZvciAoY29uc3QgY2hhcHRlcldpdGhDb250ZW50IG9mIGZpbHRlcmVkQ2hhcHRlcnMpIHtcblx0XHRcdFx0Y29uc3QgY2hhcHRlciA9IGNoYXB0ZXJXaXRoQ29udGVudC5jaGFwdGVyO1xuXHRcdFx0XHRjb25zdCBjaGFwdGVyRmlsZU5hbWUgPSBgQ2hhcHRlci0ke2NoYXB0ZXIubnVtYmVyfS5tZGA7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJMaW5rTmFtZSA9IGNoYXB0ZXJGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIEZvciBub3csIHdlIGRvbid0IHRyYWNrIHByb3NlIGF0IHN0b3J5IGxldmVsLCBzbyBhbHdheXMgdXNlIFwiLVwiXG5cdFx0XHRcdC8vIEluIHRoZSBmdXR1cmUsIHdlIGNvdWxkIGNoZWNrIGlmIGNoYXB0ZXIgaGFzIGFueSBwcm9zZSBibG9ja3Ncblx0XHRcdFx0Y29udGVudCArPSBgLSBbWyR7Y2hhcHRlckxpbmtOYW1lfXxDaGFwdGVyICR7Y2hhcHRlci5udW1iZXJ9OiAke2NoYXB0ZXIudGl0bGV9XV1cXG5gO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQWRkIHNjZW5lcyBmb3IgdGhpcyBjaGFwdGVyXG5cdFx0XHRcdGZvciAoY29uc3QgeyBzY2VuZSwgYmVhdHMgfSBvZiBjaGFwdGVyV2l0aENvbnRlbnQuc2NlbmVzKSB7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lKTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUxpbmtOYW1lID0gc2NlbmVGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZURpc3BsYXlUZXh0ID0gc2NlbmUudGltZV9yZWYgXG5cdFx0XHRcdFx0XHQ/IGAke3NjZW5lLmdvYWx9IC0gJHtzY2VuZS50aW1lX3JlZn1gXG5cdFx0XHRcdFx0XHQ6IHNjZW5lLmdvYWw7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gRm9yIG5vdywgd2UgZG9uJ3QgdHJhY2sgcHJvc2UgYXQgc3RvcnkgbGV2ZWwsIHNvIGFsd2F5cyB1c2UgXCItXCJcblx0XHRcdFx0XHRjb250ZW50ICs9IGBcXHQtIFtbJHtzY2VuZUxpbmtOYW1lfXxTY2VuZSAke3NjZW5lLm9yZGVyX251bX06ICR7c2NlbmVEaXNwbGF5VGV4dH1dXVxcbmA7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gQWRkIGJlYXRzIGZvciB0aGlzIHNjZW5lXG5cdFx0XHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIGJlYXRzKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0Y29uc3QgYmVhdERpc3BsYXlUZXh0ID0gYmVhdC5vdXRjb21lXG5cdFx0XHRcdFx0XHRcdD8gYCR7YmVhdC5pbnRlbnR9IC0+ICR7YmVhdC5vdXRjb21lfWBcblx0XHRcdFx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gRm9yIG5vdywgd2UgZG9uJ3QgdHJhY2sgcHJvc2UgYXQgc3RvcnkgbGV2ZWwsIHNvIGFsd2F5cyB1c2UgXCItXCJcblx0XHRcdFx0XHRcdGNvbnRlbnQgKz0gYFxcdFxcdC0gW1ske2JlYXRMaW5rTmFtZX18QmVhdCAke2JlYXQub3JkZXJfbnVtfTogJHtiZWF0RGlzcGxheVRleHR9XV1cXG5gO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Y29udGVudCArPSBgXFxuYDtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gR2VuZXJhdGUgc2VwYXJhdGUgbGlzdCBmb3Igb3JwaGFuIHNjZW5lcyAoc2NlbmVzIHdpdGhvdXQgY2hhcHRlcl9pZClcblx0XHRpZiAob3JwaGFuU2NlbmVzICYmIG9ycGhhblNjZW5lcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb250ZW50ICs9IGAjIyBPcnBoYW4gU2NlbmVzXFxuXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gWyFpbmZvXSBTY2VuZXMgd2l0aG91dCBhIGNoYXB0ZXJcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiBUaGVzZSBzY2VuZXMgYXJlIG5vdCBhc3NvY2lhdGVkIHdpdGggYW55IGNoYXB0ZXIuIFlvdSBjYW46XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gLSAqKlJlb3JkZXIqKjogTW92ZSBpdGVtcyB1cC9kb3duIHRvIGNoYW5nZSBvcmRlclxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipMaW5rcyoqOiBVc2UgXFxgW1tsaW5rLW5hbWV8dGV4dF1dXFxgIHRvIGNyZWF0ZSBsaW5rcyB0byBleGlzdGluZyBmaWxlc1xcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipGb3JtYXQqKjpcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgIC0gQ29tcGxldGU6IFxcYFNjZW5lIE46IGdvYWwgLSB0aW1lUmVmXFxgXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAtIFNpbXBsaWZpZWQ6XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgIC0gXFxgZ29hbCAtIHRpbWVSZWZcXGBcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgICAgLSBcXGBnb2FsXFxgXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gLSAqKk1hcmtlcnMqKjogXFxgLVxcYCBpbmRpY2F0ZXMgbm8gYXNzb2NpYXRlZCBwcm9zZSwgXFxgK1xcYCBpbmRpY2F0ZXMgYXNzb2NpYXRlZCBwcm9zZVxcblxcbmA7XG5cdFx0XHRcblx0XHRcdGZvciAoY29uc3QgeyBzY2VuZSwgYmVhdHMgfSBvZiBvcnBoYW5TY2VuZXMpIHtcblx0XHRcdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lKTtcblx0XHRcdFx0Y29uc3Qgc2NlbmVMaW5rTmFtZSA9IHNjZW5lRmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdGNvbnN0IHNjZW5lRGlzcGxheVRleHQgPSBzY2VuZS50aW1lX3JlZiBcblx0XHRcdFx0XHQ/IGAke3NjZW5lLmdvYWx9IC0gJHtzY2VuZS50aW1lX3JlZn1gXG5cdFx0XHRcdFx0OiBzY2VuZS5nb2FsO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gRm9yIG5vdywgd2UgZG9uJ3QgdHJhY2sgcHJvc2UgYXQgc3RvcnkgbGV2ZWwsIHNvIGFsd2F5cyB1c2UgXCItXCJcblx0XHRcdFx0Y29udGVudCArPSBgLSBbWyR7c2NlbmVMaW5rTmFtZX18U2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lRGlzcGxheVRleHR9XV1cXG5gO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQWRkIGJlYXRzIGZvciB0aGlzIHNjZW5lXG5cdFx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cykge1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXREaXNwbGF5VGV4dCA9IGJlYXQub3V0Y29tZVxuXHRcdFx0XHRcdFx0PyBgJHtiZWF0LmludGVudH0gLT4gJHtiZWF0Lm91dGNvbWV9YFxuXHRcdFx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBGb3Igbm93LCB3ZSBkb24ndCB0cmFjayBwcm9zZSBhdCBzdG9yeSBsZXZlbCwgc28gYWx3YXlzIHVzZSBcIi1cIlxuXHRcdFx0XHRcdGNvbnRlbnQgKz0gYFxcdC0gW1ske2JlYXRMaW5rTmFtZX18QmVhdCAke2JlYXQub3JkZXJfbnVtfTogJHtiZWF0RGlzcGxheVRleHR9XV1cXG5gO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRjb250ZW50ICs9IGBcXG5gO1xuXHRcdH1cblx0XHRcblx0XHQvLyBHZW5lcmF0ZSBzZXBhcmF0ZSBsaXN0IGZvciBvcnBoYW4gYmVhdHMgKGJlYXRzIHdpdGhvdXQgc2NlbmVfaWQpXG5cdFx0aWYgKG9ycGhhbkJlYXRzICYmIG9ycGhhbkJlYXRzLmxlbmd0aCA+IDApIHtcblx0XHRcdGNvbnRlbnQgKz0gYCMjIE9ycGhhbiBCZWF0c1xcblxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IFshaW5mb10gQmVhdHMgd2l0aG91dCBhIHNjZW5lXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gVGhlc2UgYmVhdHMgYXJlIG5vdCBhc3NvY2lhdGVkIHdpdGggYW55IHNjZW5lLiBZb3UgY2FuOlxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipSZW9yZGVyKio6IE1vdmUgaXRlbXMgdXAvZG93biB0byBjaGFuZ2Ugb3JkZXJcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqTGlua3MqKjogVXNlIFxcYFtbbGluay1uYW1lfHRleHRdXVxcYCB0byBjcmVhdGUgbGlua3MgdG8gZXhpc3RpbmcgZmlsZXNcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqRm9ybWF0Kio6XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAtIENvbXBsZXRlOiBcXGBCZWF0IE46IGludGVudCAtPiBvdXRjb21lXFxgXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAtIFNpbXBsaWZpZWQ6XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgIC0gXFxgaW50ZW50IC0+IG91dGNvbWVcXGBcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgICAgLSBcXGBpbnRlbnRcXGBcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqTWFya2VycyoqOiBcXGAtXFxgIGluZGljYXRlcyBubyBhc3NvY2lhdGVkIHByb3NlLCBcXGArXFxgIGluZGljYXRlcyBhc3NvY2lhdGVkIHByb3NlXFxuXFxuYDtcblx0XHRcdFxuXHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIG9ycGhhbkJlYXRzKSB7XG5cdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRcdGNvbnN0IGJlYXRMaW5rTmFtZSA9IGJlYXRGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0Y29uc3QgYmVhdERpc3BsYXlUZXh0ID0gYmVhdC5vdXRjb21lXG5cdFx0XHRcdFx0PyBgJHtiZWF0LmludGVudH0gLT4gJHtiZWF0Lm91dGNvbWV9YFxuXHRcdFx0XHRcdDogYmVhdC5pbnRlbnQ7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBGb3Igbm93LCB3ZSBkb24ndCB0cmFjayBwcm9zZSBhdCBzdG9yeSBsZXZlbCwgc28gYWx3YXlzIHVzZSBcIi1cIlxuXHRcdFx0XHRjb250ZW50ICs9IGAtIFtbJHtiZWF0TGlua05hbWV9fEJlYXQgJHtiZWF0Lm9yZGVyX251bX06ICR7YmVhdERpc3BsYXlUZXh0fV1dXFxuYDtcblx0XHRcdH1cblx0XHRcdGNvbnRlbnQgKz0gYFxcbmA7XG5cdFx0fVxuXG5cdFx0Ly8gR2VuZXJhdGUgaGllcmFyY2hpY2FsIHByb3NlIHNlY3Rpb24gZm9yIHRoZSBzdG9yeVxuXHRcdGNvbnRlbnQgKz0gYCMgU3Rvcnk6ICR7c3RvcnkudGl0bGV9XFxuXFxuYDtcblxuXHRcdC8vIEFkZCBjaGFwdGVycyB3aXRoIHRoZWlyIHNjZW5lcywgYmVhdHMsIGFuZCBwcm9zZSBibG9ja3Ncblx0XHRpZiAoZmlsdGVyZWRDaGFwdGVycy5sZW5ndGggPiAwKSB7XG5cdFx0XHRmb3IgKGNvbnN0IGNoYXB0ZXJXaXRoQ29udGVudCBvZiBmaWx0ZXJlZENoYXB0ZXJzKSB7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXIgPSBjaGFwdGVyV2l0aENvbnRlbnQuY2hhcHRlcjtcblx0XHRcdFx0Y29uc3QgY2hhcHRlckZpbGVOYW1lID0gYENoYXB0ZXItJHtjaGFwdGVyLm51bWJlcn0ubWRgO1xuXHRcdFx0XHRjb25zdCBjaGFwdGVyTGlua05hbWUgPSBjaGFwdGVyRmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb250ZW50ICs9IGAjIyBDaGFwdGVyICR7Y2hhcHRlci5udW1iZXJ9OiBbWyR7Y2hhcHRlckxpbmtOYW1lfXwke2NoYXB0ZXIudGl0bGV9XV1cXG5cXG5gO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gR2V0IGNvbnRlbnQgZGF0YSBmb3IgdGhpcyBjaGFwdGVyXG5cdFx0XHRcdGNvbnN0IGNvbnRlbnREYXRhID0gY2hhcHRlckNvbnRlbnREYXRhPy5nZXQoY2hhcHRlci5pZCk7XG5cdFx0XHRcdGxldCBvcmdhbml6YXRpb246IFJldHVyblR5cGU8dHlwZW9mIHRoaXMub3JnYW5pemVDb250ZW50QmxvY2tzPiB8IG51bGwgPSBudWxsO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKGNvbnRlbnREYXRhKSB7XG5cdFx0XHRcdFx0b3JnYW5pemF0aW9uID0gdGhpcy5vcmdhbml6ZUNvbnRlbnRCbG9ja3MoXG5cdFx0XHRcdFx0XHRjb250ZW50RGF0YS5jb250ZW50QmxvY2tzLFxuXHRcdFx0XHRcdFx0Y29udGVudERhdGEuY29udGVudEJsb2NrUmVmcyxcblx0XHRcdFx0XHRcdGNoYXB0ZXJXaXRoQ29udGVudC5zY2VuZXNcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIEFkZCBjaGFwdGVyLW9ubHkgY29udGVudCBibG9ja3Ncblx0XHRcdFx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBvcmdhbml6YXRpb24uY2hhcHRlck9ubHkpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGNvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0Y29udGVudCArPSBgW1ske2xpbmtOYW1lfXwke2NvbnRlbnRCbG9jay5jb250ZW50LnN1YnN0cmluZygwLCA1MCl9Li4uXV1cXG5cXG5gO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQWRkIHNjZW5lcyBmb3IgdGhpcyBjaGFwdGVyXG5cdFx0XHRcdGZvciAoY29uc3QgeyBzY2VuZSwgYmVhdHMgfSBvZiBjaGFwdGVyV2l0aENvbnRlbnQuc2NlbmVzKSB7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lKTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUxpbmtOYW1lID0gc2NlbmVGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZURpc3BsYXlUZXh0ID0gc2NlbmUudGltZV9yZWYgXG5cdFx0XHRcdFx0XHQ/IGAke3NjZW5lLmdvYWx9IC0gJHtzY2VuZS50aW1lX3JlZn1gXG5cdFx0XHRcdFx0XHQ6IHNjZW5lLmdvYWw7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29udGVudCArPSBgIyMjIFNjZW5lOiBbWyR7c2NlbmVMaW5rTmFtZX18JHtzY2VuZURpc3BsYXlUZXh0fV1dXFxuXFxuYDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBBZGQgc2NlbmUgY29udGVudCBibG9ja3Ncblx0XHRcdFx0XHRpZiAob3JnYW5pemF0aW9uKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBzY2VuZUNvbnRlbnRCbG9ja3MgPSBvcmdhbml6YXRpb24uYnlTY2VuZS5nZXQoc2NlbmUuaWQpPy5jb250ZW50QmxvY2tzIHx8IFtdO1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2Ygc2NlbmVDb250ZW50QmxvY2tzKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGNvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQgKz0gYFtbJHtsaW5rTmFtZX18JHtjb250ZW50QmxvY2suY29udGVudC5zdWJzdHJpbmcoMCwgNTApfS4uLl1dXFxuXFxuYDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gQWRkIGJlYXRzIGZvciB0aGlzIHNjZW5lXG5cdFx0XHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIGJlYXRzKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0Y29uc3QgYmVhdERpc3BsYXlUZXh0ID0gYmVhdC5vdXRjb21lXG5cdFx0XHRcdFx0XHRcdD8gYCR7YmVhdC5pbnRlbnR9IC0+ICR7YmVhdC5vdXRjb21lfWBcblx0XHRcdFx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Y29udGVudCArPSBgIyMjIyBCZWF0OiBbWyR7YmVhdExpbmtOYW1lfXwke2JlYXREaXNwbGF5VGV4dH1dXVxcblxcbmA7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vIEFkZCBiZWF0IGNvbnRlbnQgYmxvY2tzXG5cdFx0XHRcdFx0XHRpZiAob3JnYW5pemF0aW9uKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGJlYXRDb250ZW50QmxvY2tzID0gb3JnYW5pemF0aW9uLmJ5QmVhdC5nZXQoYmVhdC5pZCk/LmNvbnRlbnRCbG9ja3MgfHwgW107XG5cdFx0XHRcdFx0XHRcdGZvciAoY29uc3QgY29udGVudEJsb2NrIG9mIGJlYXRDb250ZW50QmxvY2tzKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoY29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRlbnQgKz0gYFtbJHtsaW5rTmFtZX18JHtjb250ZW50QmxvY2suY29udGVudC5zdWJzdHJpbmcoMCwgNTApfS4uLl1dXFxuXFxuYDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEFkZCBvcnBoYW4gc2NlbmVzIGluIHRoZSBwcm9zZSBzZWN0aW9uXG5cdFx0aWYgKG9ycGhhblNjZW5lcyAmJiBvcnBoYW5TY2VuZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0Zm9yIChjb25zdCB7IHNjZW5lLCBiZWF0cyB9IG9mIG9ycGhhblNjZW5lcykge1xuXHRcdFx0XHRjb25zdCBzY2VuZUZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZVNjZW5lRmlsZU5hbWUoc2NlbmUpO1xuXHRcdFx0XHRjb25zdCBzY2VuZUxpbmtOYW1lID0gc2NlbmVGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0Y29uc3Qgc2NlbmVEaXNwbGF5VGV4dCA9IHNjZW5lLnRpbWVfcmVmIFxuXHRcdFx0XHRcdD8gYCR7c2NlbmUuZ29hbH0gLSAke3NjZW5lLnRpbWVfcmVmfWBcblx0XHRcdFx0XHQ6IHNjZW5lLmdvYWw7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb250ZW50ICs9IGAjIyMgU2NlbmU6IFtbJHtzY2VuZUxpbmtOYW1lfXwke3NjZW5lRGlzcGxheVRleHR9XV1cXG5cXG5gO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQWRkIGJlYXRzIGZvciB0aGlzIHNjZW5lXG5cdFx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cykge1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXREaXNwbGF5VGV4dCA9IGJlYXQub3V0Y29tZVxuXHRcdFx0XHRcdFx0PyBgJHtiZWF0LmludGVudH0gLT4gJHtiZWF0Lm91dGNvbWV9YFxuXHRcdFx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjb250ZW50ICs9IGAjIyMjIEJlYXQ6IFtbJHtiZWF0TGlua05hbWV9fCR7YmVhdERpc3BsYXlUZXh0fV1dXFxuXFxuYDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IGZpbGVQYXRoID0gYCR7Zm9sZGVyUGF0aH0vc3RvcnkubWRgO1xuXG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRhd2FpdCB0aGlzLnZhdWx0Lm1vZGlmeShmaWxlLCBjb250ZW50KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YXdhaXQgdGhpcy52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuXHRcdH1cblx0fVxuXG5cdC8vIFdyaXRlIGNoYXB0ZXIgZmlsZVxuXHRhc3luYyB3cml0ZUNoYXB0ZXJGaWxlKFxuXHRcdGNoYXB0ZXJXaXRoQ29udGVudDogQ2hhcHRlcldpdGhDb250ZW50LFxuXHRcdGZpbGVQYXRoOiBzdHJpbmcsXG5cdFx0c3RvcnlOYW1lPzogc3RyaW5nLFxuXHRcdGNvbnRlbnRCbG9ja3M/OiBDb250ZW50QmxvY2tbXSxcblx0XHRjb250ZW50QmxvY2tSZWZzPzogQ29udGVudEFuY2hvcltdLFxuXHRcdG9ycGhhblNjZW5lcz86IFNjZW5lV2l0aEJlYXRzW10gLy8gSW5jbHVkZSBvcnBoYW4gc2NlbmVzIGZvciBlYXN5IGFzc29jaWF0aW9uXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IHsgY2hhcHRlciwgc2NlbmVzIH0gPSBjaGFwdGVyV2l0aENvbnRlbnQ7XG5cblx0XHRjb25zdCBiYXNlRmllbGRzID0ge1xuXHRcdFx0aWQ6IGNoYXB0ZXIuaWQsXG5cdFx0XHRzdG9yeV9pZDogY2hhcHRlci5zdG9yeV9pZCxcblx0XHRcdG51bWJlcjogY2hhcHRlci5udW1iZXIsXG5cdFx0XHR0aXRsZTogY2hhcHRlci50aXRsZSxcblx0XHRcdHN0YXR1czogY2hhcHRlci5zdGF0dXMsXG5cdFx0XHRjcmVhdGVkX2F0OiBjaGFwdGVyLmNyZWF0ZWRfYXQsXG5cdFx0XHR1cGRhdGVkX2F0OiBjaGFwdGVyLnVwZGF0ZWRfYXQsXG5cdFx0fTtcblxuXHRcdGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5nZW5lcmF0ZUZyb250bWF0dGVyKGJhc2VGaWVsZHMsIHVuZGVmaW5lZCwge1xuXHRcdFx0ZW50aXR5VHlwZTogXCJjaGFwdGVyXCIsXG5cdFx0XHRzdG9yeU5hbWU6IHN0b3J5TmFtZSxcblx0XHRcdGRhdGU6IGNoYXB0ZXIuY3JlYXRlZF9hdCxcblx0XHR9KTtcblxuXHRcdGxldCBjb250ZW50ID0gYCR7ZnJvbnRtYXR0ZXJ9XFxuIyAke2NoYXB0ZXIudGl0bGV9XFxuXFxuYDtcblxuXHRcdC8vIE9yZ2FuaXplIHByb3NlIGJsb2NrcyBieSB0aGVpciBhc3NvY2lhdGlvbnNcblx0XHRjb25zdCBvcmdhbml6YXRpb24gPSB0aGlzLm9yZ2FuaXplQ29udGVudEJsb2Nrcyhcblx0XHRcdGNvbnRlbnRCbG9ja3MgfHwgW10sXG5cdFx0XHRjb250ZW50QmxvY2tSZWZzIHx8IFtdLFxuXHRcdFx0c2NlbmVzXG5cdFx0KTtcblxuXHRcdC8vIEdlbmVyYXRlIGxpc3Qgb2Ygc2NlbmVzIGFuZCBiZWF0cyB3aXRoIHByb3NlIGluZGljYXRvcnNcblx0XHRjb250ZW50ICs9IGAjIyBTY2VuZXMgJiBCZWF0c1xcblxcbmA7XG5cdFx0Y29udGVudCArPSBgPiBbIWluZm9dIEhvdyB0byB1c2UgdGhpcyBsaXN0XFxuYDtcblx0XHRjb250ZW50ICs9IGA+IC0gKipDcmVhdGUgbmV3IGl0ZW0qKjogQWRkIGEgbGluZSB3aXRoIFxcYC1cXGAgZm9sbG93ZWQgYnkgdGhlIHRleHRcXG5gO1xuXHRcdGNvbnRlbnQgKz0gYD4gICAtICoqU2NlbmUqKjogTm8gaW5kZW50YXRpb24gKGxldmVsIDApXFxuYDtcblx0XHRjb250ZW50ICs9IGA+ICAgLSAqKkJlYXQqKjogVXNlIDEgdGFiIGluZGVudGF0aW9uIChpbnNpZGUgYSBzY2VuZSlcXG5gO1xuXHRcdGNvbnRlbnQgKz0gYD4gLSAqKlJlb3JkZXIqKjogTW92ZSBpdGVtcyB1cC9kb3duIHRvIGNoYW5nZSBvcmRlclxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAtICoqTGlua3MqKjogVXNlIFxcYFtbbGluay1uYW1lfHRleHRdXVxcYCB0byBjcmVhdGUgbGlua3MgdG8gZXhpc3RpbmcgZmlsZXNcXG5gO1xuXHRcdGNvbnRlbnQgKz0gYD4gLSAqKkZvcm1hdCoqOlxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAgIC0gKipTY2VuZSoqOlxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAgICAgLSBDb21wbGV0ZTogXFxgU2NlbmUgTjogZ29hbCAtIHRpbWVSZWZcXGBcXG5gO1xuXHRcdGNvbnRlbnQgKz0gYD4gICAgIC0gU2ltcGxpZmllZDpcXG5gO1xuXHRcdGNvbnRlbnQgKz0gYD4gICAgICAgLSBcXGBnb2FsIC0gdGltZVJlZlxcYFxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAgICAgICAtIFxcYGdvYWxcXGBcXG5gO1xuXHRcdGNvbnRlbnQgKz0gYD4gICAtICoqQmVhdCoqOlxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAgICAgLSBDb21wbGV0ZTogXFxgQmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZVxcYFxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAgICAgLSBTaW1wbGlmaWVkOlxcbmA7XG5cdFx0Y29udGVudCArPSBgPiAgICAgICAtIFxcYGludGVudCAtPiBvdXRjb21lXFxgXFxuYDtcblx0XHRjb250ZW50ICs9IGA+ICAgICAgIC0gXFxgaW50ZW50XFxgXFxuYDtcblx0XHRjb250ZW50ICs9IGA+IC0gKipNYXJrZXJzKio6IFxcYC1cXGAgaW5kaWNhdGVzIG5vIGFzc29jaWF0ZWQgcHJvc2UsIFxcYCtcXGAgaW5kaWNhdGVzIGFzc29jaWF0ZWQgcHJvc2VcXG5gO1xuXHRcdGNvbnRlbnQgKz0gYD4gLSAqKk9ycGhhbiBzY2VuZXMqKiAod2l0aG91dCBjaGFwdGVyKSBhcmUgc2hvd24gYmVsb3cgZm9yIGVhc3kgYXNzb2NpYXRpb25cXG5cXG5gO1xuXHRcdFxuXHRcdC8vIEFkZCBzY2VuZXMgZm9yIHRoaXMgY2hhcHRlclxuXHRcdGZvciAoY29uc3QgeyBzY2VuZSwgYmVhdHMgfSBvZiBzY2VuZXMpIHtcblx0XHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0XHRjb25zdCBzY2VuZUxpbmtOYW1lID0gc2NlbmVGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdGNvbnN0IHNjZW5lRGlzcGxheVRleHQgPSBzY2VuZS50aW1lX3JlZiBcblx0XHRcdFx0PyBgJHtzY2VuZS5nb2FsfSAtICR7c2NlbmUudGltZV9yZWZ9YFxuXHRcdFx0XHQ6IHNjZW5lLmdvYWw7XG5cdFx0XHRcblx0XHRcdC8vIENoZWNrIGlmIHNjZW5lIGhhcyBjb250ZW50IGJsb2NrcyAobm90IGFzc29jaWF0ZWQgd2l0aCBiZWF0cylcblx0XHRcdGNvbnN0IHNjZW5lQ29udGVudEJsb2NrcyA9IG9yZ2FuaXphdGlvbi5ieVNjZW5lLmdldChzY2VuZS5pZCk/LmNvbnRlbnRCbG9ja3MgfHwgW107XG5cdFx0XHRjb25zdCBoYXNTY2VuZUNvbnRlbnQgPSBzY2VuZUNvbnRlbnRCbG9ja3MubGVuZ3RoID4gMDtcblx0XHRcdGNvbnN0IHNjZW5lTWFya2VyID0gaGFzU2NlbmVDb250ZW50ID8gXCIrXCIgOiBcIi1cIjtcblx0XHRcdFxuXHRcdFx0Y29udGVudCArPSBgJHtzY2VuZU1hcmtlcn0gW1ske3NjZW5lTGlua05hbWV9fFNjZW5lICR7c2NlbmUub3JkZXJfbnVtfTogJHtzY2VuZURpc3BsYXlUZXh0fV1dXFxuYDtcblx0XHRcdFxuXHRcdFx0Ly8gQWRkIGJlYXRzIGZvciB0aGlzIHNjZW5lXG5cdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRjb25zdCBiZWF0RGlzcGxheVRleHQgPSBiZWF0Lm91dGNvbWVcblx0XHRcdFx0XHQ/IGAke2JlYXQuaW50ZW50fSAtPiAke2JlYXQub3V0Y29tZX1gXG5cdFx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIENoZWNrIGlmIGJlYXQgaGFzIGNvbnRlbnQgYmxvY2tzXG5cdFx0XHRcdGNvbnN0IGJlYXRDb250ZW50QmxvY2tzID0gb3JnYW5pemF0aW9uLmJ5QmVhdC5nZXQoYmVhdC5pZCk/LmNvbnRlbnRCbG9ja3MgfHwgW107XG5cdFx0XHRcdGNvbnN0IGhhc0JlYXRDb250ZW50ID0gYmVhdENvbnRlbnRCbG9ja3MubGVuZ3RoID4gMDtcblx0XHRcdFx0Y29uc3QgYmVhdE1hcmtlciA9IGhhc0JlYXRDb250ZW50ID8gXCIrXCIgOiBcIi1cIjtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnRlbnQgKz0gYFxcdCR7YmVhdE1hcmtlcn0gW1ske2JlYXRMaW5rTmFtZX18QmVhdCAke2JlYXQub3JkZXJfbnVtfTogJHtiZWF0RGlzcGxheVRleHR9XV1cXG5gO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHQvLyBBZGQgb3JwaGFuIHNjZW5lcyAoc2NlbmVzIHdpdGhvdXQgY2hhcHRlcl9pZCkgZm9yIGVhc3kgYXNzb2NpYXRpb25cblx0XHRpZiAob3JwaGFuU2NlbmVzICYmIG9ycGhhblNjZW5lcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb250ZW50ICs9IGBcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiBbIWluZm9dIE9ycGhhbiBTY2VuZXMgKG5vdCB5ZXQgYXNzb2NpYXRlZCB3aXRoIHRoaXMgY2hhcHRlcilcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiBZb3UgY2FuIGFzc29jaWF0ZSB0aGVzZSBzY2VuZXMgd2l0aCB0aGlzIGNoYXB0ZXIgYnkgbW92aW5nIHRoZW0gaGVyZS5cXG5cXG5gO1xuXHRcdFx0XG5cdFx0XHRmb3IgKGNvbnN0IHsgc2NlbmUsIGJlYXRzIH0gb2Ygb3JwaGFuU2NlbmVzKSB7XG5cdFx0XHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0XHRcdGNvbnN0IHNjZW5lTGlua05hbWUgPSBzY2VuZUZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRjb25zdCBzY2VuZURpc3BsYXlUZXh0ID0gc2NlbmUudGltZV9yZWYgXG5cdFx0XHRcdFx0PyBgJHtzY2VuZS5nb2FsfSAtICR7c2NlbmUudGltZV9yZWZ9YFxuXHRcdFx0XHRcdDogc2NlbmUuZ29hbDtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIEZvciBub3csIHdlIGRvbid0IHRyYWNrIHByb3NlIGF0IGNoYXB0ZXIgbGV2ZWwsIHNvIGFsd2F5cyB1c2UgXCItXCJcblx0XHRcdFx0Y29udGVudCArPSBgLSBbWyR7c2NlbmVMaW5rTmFtZX18U2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lRGlzcGxheVRleHR9XV1cXG5gO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQWRkIGJlYXRzIGZvciB0aGlzIG9ycGhhbiBzY2VuZVxuXHRcdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRMaW5rTmFtZSA9IGJlYXRGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRjb25zdCBiZWF0RGlzcGxheVRleHQgPSBiZWF0Lm91dGNvbWVcblx0XHRcdFx0XHRcdD8gYCR7YmVhdC5pbnRlbnR9IC0+ICR7YmVhdC5vdXRjb21lfWBcblx0XHRcdFx0XHRcdDogYmVhdC5pbnRlbnQ7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gRm9yIG5vdywgd2UgZG9uJ3QgdHJhY2sgcHJvc2UgYXQgY2hhcHRlciBsZXZlbCwgc28gYWx3YXlzIHVzZSBcIi1cIlxuXHRcdFx0XHRcdGNvbnRlbnQgKz0gYFxcdC0gW1ske2JlYXRMaW5rTmFtZX18QmVhdCAke2JlYXQub3JkZXJfbnVtfTogJHtiZWF0RGlzcGxheVRleHR9XV1cXG5gO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdGNvbnRlbnQgKz0gYFxcbmA7XG5cblx0XHQvLyBHZW5lcmF0ZSBoaWVyYXJjaGljYWwgcHJvc2Ugc2VjdGlvbiB3aXRoIGNoYXB0ZXIgaGVhZGVyXG5cdFx0Y29udGVudCArPSBgIyMgQ2hhcHRlciAke2NoYXB0ZXIubnVtYmVyfTogJHtjaGFwdGVyLnRpdGxlfVxcblxcbmA7XG5cblx0XHQvLyBBZGQgcHJvc2UgYmxvY2tzIHRoYXQgYXJlIG9ubHkgYXNzb2NpYXRlZCB3aXRoIGNoYXB0ZXJcblx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBvcmdhbml6YXRpb24uY2hhcHRlck9ubHkpIHtcblx0XHRcdGNvbnN0IGZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGNvbnRlbnRCbG9jayk7XG5cdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0Y29udGVudCArPSBgW1ske2xpbmtOYW1lfXwke2NvbnRlbnRCbG9jay5jb250ZW50LnN1YnN0cmluZygwLCA1MCl9Li4uXV1cXG5cXG5gO1xuXHRcdH1cblxuXHRcdC8vIEFkZCBzY2VuZXMgd2l0aCB0aGVpciBwcm9zZSBibG9ja3MgYW5kIGJlYXRzXG5cdFx0Zm9yIChjb25zdCB7IHNjZW5lLCBiZWF0cyB9IG9mIHNjZW5lcykge1xuXHRcdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lKTtcblx0XHRcdGNvbnN0IHNjZW5lTGlua05hbWUgPSBzY2VuZUZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XG5cdFx0XHQvLyBGb3JtYXQgc2NlbmUgaGVhZGVyOiAjIyBTY2VuZTogW1tsaW5rfGdvYWwgLSB0aW1lUmVmXV0gb3IgIyMgU2NlbmU6IFtbbGlua3xnb2FsXV1cblx0XHRcdGNvbnN0IHNjZW5lRGlzcGxheVRleHQgPSBzY2VuZS50aW1lX3JlZiBcblx0XHRcdFx0PyBgJHtzY2VuZS5nb2FsfSAtICR7c2NlbmUudGltZV9yZWZ9YFxuXHRcdFx0XHQ6IHNjZW5lLmdvYWw7XG5cdFx0XHRjb250ZW50ICs9IGAjIyBTY2VuZTogW1ske3NjZW5lTGlua05hbWV9fCR7c2NlbmVEaXNwbGF5VGV4dH1dXVxcblxcbmA7XG5cblx0XHRcdC8vIEdldCBwcm9zZSBibG9ja3MgZm9yIHRoaXMgc2NlbmUgKG5vdCBhc3NvY2lhdGVkIHdpdGggYW55IGJlYXQpXG5cdFx0XHRjb25zdCBzY2VuZUNvbnRlbnRCbG9ja3MgPSBvcmdhbml6YXRpb24uYnlTY2VuZS5nZXQoc2NlbmUuaWQpPy5jb250ZW50QmxvY2tzIHx8IFtdO1xuXHRcdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2Ygc2NlbmVDb250ZW50QmxvY2tzKSB7XG5cdFx0XHRcdGNvbnN0IGZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGNvbnRlbnRCbG9jayk7XG5cdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdGNvbnRlbnQgKz0gYFtbJHtsaW5rTmFtZX18JHtjb250ZW50QmxvY2suY29udGVudC5zdWJzdHJpbmcoMCwgNTApfS4uLl1dXFxuXFxuYDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIGJlYXRzIHdpdGggdGhlaXIgcHJvc2UgYmxvY2tzXG5cdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gRm9ybWF0IGJlYXQgaGVhZGVyOiAjIyMgQmVhdDogW1tsaW5rfGludGVudCAtPiBvdXRjb21lXV0gb3IgIyMjIEJlYXQ6IFtbbGlua3xpbnRlbnRdXVxuXHRcdFx0XHRjb25zdCBiZWF0RGlzcGxheVRleHQgPSBiZWF0Lm91dGNvbWVcblx0XHRcdFx0XHQ/IGAke2JlYXQuaW50ZW50fSAtPiAke2JlYXQub3V0Y29tZX1gXG5cdFx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdFx0Y29udGVudCArPSBgIyMjIEJlYXQ6IFtbJHtiZWF0TGlua05hbWV9fCR7YmVhdERpc3BsYXlUZXh0fV1dXFxuXFxuYDtcblxuXHRcdFx0XHQvLyBHZXQgcHJvc2UgYmxvY2tzIGZvciB0aGlzIGJlYXRcblx0XHRcdFx0Y29uc3QgYmVhdENvbnRlbnRCbG9ja3MgPSBvcmdhbml6YXRpb24uYnlCZWF0LmdldChiZWF0LmlkKT8uY29udGVudEJsb2NrcyB8fCBbXTtcblx0XHRcdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2YgYmVhdENvbnRlbnRCbG9ja3MpIHtcblx0XHRcdFx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShjb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0Y29udGVudCArPSBgW1ske2xpbmtOYW1lfXwke2NvbnRlbnRCbG9jay5jb250ZW50LnN1YnN0cmluZygwLCA1MCl9Li4uXV1cXG5cXG5gO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRhd2FpdCB0aGlzLnZhdWx0Lm1vZGlmeShmaWxlLCBjb250ZW50KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YXdhaXQgdGhpcy52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuXHRcdH1cblx0fVxuXG5cdC8vIFJlYWQgc3RvcnkgbWV0YWRhdGFcblx0YXN5bmMgcmVhZFN0b3J5TWV0YWRhdGEoZm9sZGVyUGF0aDogc3RyaW5nKTogUHJvbWlzZTxTdG9yeU1ldGFkYXRhPiB7XG5cdFx0Y29uc3QgZmlsZVBhdGggPSBgJHtmb2xkZXJQYXRofS9zdG9yeS5tZGA7XG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblxuXHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihgU3RvcnkgbWV0YWRhdGEgZmlsZSBub3QgZm91bmQ6ICR7ZmlsZVBhdGh9YCk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMudmF1bHQucmVhZChmaWxlKTtcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMucGFyc2VGcm9udG1hdHRlcihjb250ZW50KTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRmcm9udG1hdHRlcjoge1xuXHRcdFx0XHRpZDogZnJvbnRtYXR0ZXIuaWQsXG5cdFx0XHRcdHRpdGxlOiBmcm9udG1hdHRlci50aXRsZSxcblx0XHRcdFx0c3RhdHVzOiBmcm9udG1hdHRlci5zdGF0dXMsXG5cdFx0XHRcdHZlcnNpb246IHBhcnNlSW50KGZyb250bWF0dGVyLnZlcnNpb24pLFxuXHRcdFx0XHRyb290X3N0b3J5X2lkOiBmcm9udG1hdHRlci5yb290X3N0b3J5X2lkLFxuXHRcdFx0XHRwcmV2aW91c192ZXJzaW9uX2lkOiBmcm9udG1hdHRlci5wcmV2aW91c192ZXJzaW9uX2lkIHx8IG51bGwsXG5cdFx0XHRcdGNyZWF0ZWRfYXQ6IGZyb250bWF0dGVyLmNyZWF0ZWRfYXQsXG5cdFx0XHRcdHVwZGF0ZWRfYXQ6IGZyb250bWF0dGVyLnVwZGF0ZWRfYXQsXG5cdFx0XHR9LFxuXHRcdFx0Y29udGVudDogY29udGVudC5zcGxpdChcIi0tLVwiKS5zbGljZSgyKS5qb2luKFwiLS0tXCIpLnRyaW0oKSxcblx0XHR9O1xuXHR9XG5cblx0Ly8gUGFyc2UgWUFNTCBmcm9udG1hdHRlclxuXHRwYXJzZUZyb250bWF0dGVyKGNvbnRlbnQ6IHN0cmluZyk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuXHRcdGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuXHRcdGlmICghbWF0Y2gpIHtcblx0XHRcdHJldHVybiB7fTtcblx0XHR9XG5cblx0XHRjb25zdCBmcm9udG1hdHRlclRleHQgPSBtYXRjaFsxXTtcblx0XHRjb25zdCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcblxuXHRcdGZvciAoY29uc3QgbGluZSBvZiBmcm9udG1hdHRlclRleHQuc3BsaXQoXCJcXG5cIikpIHtcblx0XHRcdGNvbnN0IGNvbG9uSW5kZXggPSBsaW5lLmluZGV4T2YoXCI6XCIpO1xuXHRcdFx0aWYgKGNvbG9uSW5kZXggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IGtleSA9IGxpbmUuc2xpY2UoMCwgY29sb25JbmRleCkudHJpbSgpO1xuXHRcdFx0XHRjb25zdCB2YWx1ZSA9IGxpbmVcblx0XHRcdFx0XHQuc2xpY2UoY29sb25JbmRleCArIDEpXG5cdFx0XHRcdFx0LnRyaW0oKVxuXHRcdFx0XHRcdC5yZXBsYWNlKC9eW1wiJ118W1wiJ10kL2csIFwiXCIpO1xuXHRcdFx0XHRyZXN1bHRba2V5XSA9IHZhbHVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHQvLyBDb3B5IHN0b3J5IGZvbGRlciB0byB2ZXJzaW9ucyBmb2xkZXJcblx0YXN5bmMgY3JlYXRlVmVyc2lvblNuYXBzaG90KFxuXHRcdHN0b3J5Rm9sZGVyUGF0aDogc3RyaW5nLFxuXHRcdHZlcnNpb25OdW1iZXI6IG51bWJlclxuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCB2ZXJzaW9uc1BhdGggPSBgJHtzdG9yeUZvbGRlclBhdGh9L3ZlcnNpb25zYDtcblx0XHRhd2FpdCB0aGlzLmVuc3VyZUZvbGRlckV4aXN0cyh2ZXJzaW9uc1BhdGgpO1xuXG5cdFx0Y29uc3QgdmVyc2lvbkZvbGRlclBhdGggPSBgJHt2ZXJzaW9uc1BhdGh9L3Yke3ZlcnNpb25OdW1iZXJ9YDtcblxuXHRcdC8vIENoZWNrIGlmIHZlcnNpb24gYWxyZWFkeSBleGlzdHNcblx0XHRjb25zdCBleGlzdGluZ1ZlcnNpb24gPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh2ZXJzaW9uRm9sZGVyUGF0aCk7XG5cdFx0aWYgKGV4aXN0aW5nVmVyc2lvbikge1xuXHRcdFx0Y29uc29sZS5sb2coYFZlcnNpb24gdiR7dmVyc2lvbk51bWJlcn0gYWxyZWFkeSBleGlzdHMsIHNraXBwaW5nIHNuYXBzaG90YCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0YXdhaXQgdGhpcy5lbnN1cmVGb2xkZXJFeGlzdHModmVyc2lvbkZvbGRlclBhdGgpO1xuXG5cdFx0Ly8gQ29weSBhbGwgZmlsZXMgZnJvbSBzdG9yeSBmb2xkZXIgdG8gdmVyc2lvbiBmb2xkZXIgKGV4Y2VwdCB2ZXJzaW9ucyBmb2xkZXIpXG5cdFx0Y29uc3Qgc3RvcnlGb2xkZXIgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChzdG9yeUZvbGRlclBhdGgpO1xuXHRcdGlmICghKHN0b3J5Rm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihgU3RvcnkgZm9sZGVyIG5vdCBmb3VuZDogJHtzdG9yeUZvbGRlclBhdGh9YCk7XG5cdFx0fVxuXG5cdFx0YXdhaXQgdGhpcy5jb3B5Rm9sZGVyQ29udGVudHMoc3RvcnlGb2xkZXIsIHZlcnNpb25Gb2xkZXJQYXRoLCBcInZlcnNpb25zXCIpO1xuXG5cdFx0Y29uc29sZS5sb2coYENyZWF0ZWQgdmVyc2lvbiBzbmFwc2hvdDogdiR7dmVyc2lvbk51bWJlcn1gKTtcblx0fVxuXG5cdC8vIFJlY3Vyc2l2ZWx5IGNvcHkgZm9sZGVyIGNvbnRlbnRzXG5cdHByaXZhdGUgYXN5bmMgY29weUZvbGRlckNvbnRlbnRzKFxuXHRcdHNvdXJjZUZvbGRlcjogVEZvbGRlcixcblx0XHRkZXN0UGF0aDogc3RyaW5nLFxuXHRcdGV4Y2x1ZGVGb2xkZXJOYW1lPzogc3RyaW5nXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGZvciAoY29uc3QgY2hpbGQgb2Ygc291cmNlRm9sZGVyLmNoaWxkcmVuKSB7XG5cdFx0XHRpZiAoY2hpbGQgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0XHRjb25zdCByZWxhdGl2ZVBhdGggPSBjaGlsZC5wYXRoLnJlcGxhY2Uoc291cmNlRm9sZGVyLnBhdGggKyBcIi9cIiwgXCJcIik7XG5cdFx0XHRcdGNvbnN0IGRlc3RGaWxlUGF0aCA9IGAke2Rlc3RQYXRofS8ke3JlbGF0aXZlUGF0aH1gO1xuXHRcdFx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy52YXVsdC5yZWFkKGNoaWxkKTtcblx0XHRcdFx0YXdhaXQgdGhpcy52YXVsdC5jcmVhdGUoZGVzdEZpbGVQYXRoLCBjb250ZW50KTtcblx0XHRcdH0gZWxzZSBpZiAoY2hpbGQgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG5cdFx0XHRcdC8vIFNraXAgZXhjbHVkZWQgZm9sZGVyIChlLmcuLCBcInZlcnNpb25zXCIpXG5cdFx0XHRcdGlmIChleGNsdWRlRm9sZGVyTmFtZSAmJiBjaGlsZC5uYW1lID09PSBleGNsdWRlRm9sZGVyTmFtZSkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IHJlbGF0aXZlUGF0aCA9IGNoaWxkLnBhdGgucmVwbGFjZShzb3VyY2VGb2xkZXIucGF0aCArIFwiL1wiLCBcIlwiKTtcblx0XHRcdFx0Y29uc3QgZGVzdEZvbGRlclBhdGggPSBgJHtkZXN0UGF0aH0vJHtyZWxhdGl2ZVBhdGh9YDtcblx0XHRcdFx0YXdhaXQgdGhpcy5lbnN1cmVGb2xkZXJFeGlzdHMoZGVzdEZvbGRlclBhdGgpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmNvcHlGb2xkZXJDb250ZW50cyhjaGlsZCwgZGVzdEZvbGRlclBhdGgsIGV4Y2x1ZGVGb2xkZXJOYW1lKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBXcml0ZSBzY2VuZSBmaWxlXG5cdGFzeW5jIHdyaXRlU2NlbmVGaWxlKFxuXHRcdHNjZW5lV2l0aEJlYXRzOiBTY2VuZVdpdGhCZWF0cyxcblx0XHRmaWxlUGF0aDogc3RyaW5nLFxuXHRcdHN0b3J5TmFtZT86IHN0cmluZyxcblx0XHRjb250ZW50QmxvY2tzPzogQ29udGVudEJsb2NrW10sXG5cdFx0b3JwaGFuQmVhdHM/OiBCZWF0W10gLy8gSW5jbHVkZSBvcnBoYW4gYmVhdHMgZm9yIGVhc3kgYXNzb2NpYXRpb25cblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgeyBzY2VuZSwgYmVhdHMgfSA9IHNjZW5lV2l0aEJlYXRzO1xuXG5cdFx0Y29uc3QgYmFzZUZpZWxkczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgbnVsbD4gPSB7XG5cdFx0XHRpZDogc2NlbmUuaWQsXG5cdFx0XHRzdG9yeV9pZDogc2NlbmUuc3RvcnlfaWQsXG5cdFx0XHRjaGFwdGVyX2lkOiBzY2VuZS5jaGFwdGVyX2lkID8/IG51bGwsXG5cdFx0XHRvcmRlcl9udW06IHNjZW5lLm9yZGVyX251bSxcblx0XHRcdHRpbWVfcmVmOiBzY2VuZS50aW1lX3JlZiB8fCBcIlwiLFxuXHRcdFx0Z29hbDogc2NlbmUuZ29hbCB8fCBcIlwiLFxuXHRcdFx0Y3JlYXRlZF9hdDogc2NlbmUuY3JlYXRlZF9hdCxcblx0XHRcdHVwZGF0ZWRfYXQ6IHNjZW5lLnVwZGF0ZWRfYXQsXG5cdFx0fTtcblxuXHRcdC8vIEFkZCBvcHRpb25hbCBmaWVsZHNcblx0XHRjb25zdCBleHRyYUZpZWxkczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgbnVsbD4gPSB7fTtcblx0XHRpZiAoc2NlbmUucG92X2NoYXJhY3Rlcl9pZCkge1xuXHRcdFx0ZXh0cmFGaWVsZHMucG92X2NoYXJhY3Rlcl9pZCA9IHNjZW5lLnBvdl9jaGFyYWN0ZXJfaWQ7XG5cdFx0fVxuXHRcdGlmIChzY2VuZS5sb2NhdGlvbl9pZCkge1xuXHRcdFx0ZXh0cmFGaWVsZHMubG9jYXRpb25faWQgPSBzY2VuZS5sb2NhdGlvbl9pZDtcblx0XHR9XG5cblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMuZ2VuZXJhdGVGcm9udG1hdHRlcihiYXNlRmllbGRzLCBleHRyYUZpZWxkcywge1xuXHRcdFx0ZW50aXR5VHlwZTogXCJzY2VuZVwiLFxuXHRcdFx0c3RvcnlOYW1lOiBzdG9yeU5hbWUsXG5cdFx0XHRkYXRlOiBzY2VuZS5jcmVhdGVkX2F0LFxuXHRcdH0pO1xuXG5cdFx0bGV0IGNvbnRlbnQgPSBgJHtmcm9udG1hdHRlcn1cXG4jIFNjZW5lICR7c2NlbmUub3JkZXJfbnVtfVxcblxcbmA7XG5cdFx0XG5cdFx0aWYgKHNjZW5lLmdvYWwpIHtcblx0XHRcdGNvbnRlbnQgKz0gYCoqR29hbDoqKiAke3NjZW5lLmdvYWx9XFxuXFxuYDtcblx0XHR9XG5cdFx0aWYgKHNjZW5lLnRpbWVfcmVmKSB7XG5cdFx0XHRjb250ZW50ICs9IGAqKlRpbWU6KiogJHtzY2VuZS50aW1lX3JlZn1cXG5cXG5gO1xuXHRcdH1cblxuXHRcdC8vIEdlbmVyYXRlIGxpc3Qgb2YgYmVhdHMgd2l0aCBwcm9zZSBpbmRpY2F0b3JzXG5cdFx0aWYgKGJlYXRzLmxlbmd0aCA+IDApIHtcblx0XHRcdGNvbnRlbnQgKz0gYCMjIEJlYXRzXFxuXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gWyFpbmZvXSBIb3cgdG8gdXNlIHRoaXMgbGlzdFxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipDcmVhdGUgbmV3IGl0ZW0qKjogQWRkIGEgbGluZSB3aXRoIFxcYC1cXGAgZm9sbG93ZWQgYnkgdGhlIHRleHRcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgIC0gKipCZWF0Kio6IE5vIGluZGVudGF0aW9uIChsZXZlbCAwKVxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+IC0gKipSZW9yZGVyKio6IE1vdmUgaXRlbXMgdXAvZG93biB0byBjaGFuZ2Ugb3JkZXJcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqTGlua3MqKjogVXNlIFxcYFtbbGluay1uYW1lfHRleHRdXVxcYCB0byBjcmVhdGUgbGlua3MgdG8gZXhpc3RpbmcgZmlsZXNcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqRm9ybWF0Kio6XFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAtICoqQmVhdCoqOlxcbmA7XG5cdFx0XHRjb250ZW50ICs9IGA+ICAgICAtIENvbXBsZXRlOiBcXGBCZWF0IE46IGludGVudCAtPiBvdXRjb21lXFxgXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgIC0gU2ltcGxpZmllZDpcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAgICAgICAtIFxcYGludGVudCAtPiBvdXRjb21lXFxgXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gICAgICAgLSBcXGBpbnRlbnRcXGBcXG5gO1xuXHRcdFx0Y29udGVudCArPSBgPiAtICoqTWFya2VycyoqOiBcXGAtXFxgIGluZGljYXRlcyBubyBhc3NvY2lhdGVkIHByb3NlLCBcXGArXFxgIGluZGljYXRlcyBhc3NvY2lhdGVkIHByb3NlXFxuYDtcblx0XHRcdGNvbnRlbnQgKz0gYD4gLSAqKk9ycGhhbiBiZWF0cyoqICh3aXRob3V0IHNjZW5lKSBhcmUgc2hvd24gYmVsb3cgZm9yIGVhc3kgYXNzb2NpYXRpb25cXG5cXG5gO1xuXHRcdFx0XG5cdFx0XHQvLyBDaGVjayB3aGljaCBiZWF0cyBoYXZlIHByb3NlIGJsb2Nrc1xuXHRcdFx0Y29uc3QgYmVhdHNXaXRoUHJvc2UgPSBuZXcgU2V0PHN0cmluZz4oKTtcblx0XHRcdGlmIChjb250ZW50QmxvY2tzKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgY29udGVudEJsb2NrIG9mIGNvbnRlbnRCbG9ja3MpIHtcblx0XHRcdFx0XHQvLyBDaGVjayBpZiBwcm9zZSBibG9jayBpcyByZWZlcmVuY2VkIGJ5IGFueSBiZWF0XG5cdFx0XHRcdFx0Ly8gV2UnbGwgbmVlZCB0byBjaGVjayBwcm9zZSBibG9jayByZWZlcmVuY2VzLCBidXQgZm9yIG5vdyB3ZSdsbCB1c2UgYSBzaW1wbGUgY2hlY2tcblx0XHRcdFx0XHQvLyBUaGlzIHdpbGwgYmUgdXBkYXRlZCB3aGVuIHdlIHByb2Nlc3MgcHJvc2UgYmxvY2sgcmVmZXJlbmNlc1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cy5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKSkge1xuXHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRjb25zdCBiZWF0TGlua05hbWUgPSBiZWF0RmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdGNvbnN0IGJlYXREaXNwbGF5VGV4dCA9IGJlYXQub3V0Y29tZVxuXHRcdFx0XHRcdD8gYCR7YmVhdC5pbnRlbnR9IC0+ICR7YmVhdC5vdXRjb21lfWBcblx0XHRcdFx0XHQ6IGJlYXQuaW50ZW50O1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gRm9yIG5vdywgd2UgZG9uJ3QgdHJhY2sgcHJvc2UgYXQgc2NlbmUgbGV2ZWwsIHNvIGFsd2F5cyB1c2UgXCItXCJcblx0XHRcdFx0Ly8gSW4gdGhlIGZ1dHVyZSwgd2UgY291bGQgY2hlY2sgaWYgYmVhdCBoYXMgYW55IHByb3NlIGJsb2Nrc1xuXHRcdFx0XHRjb25zdCBoYXNCZWF0UHJvc2UgPSBiZWF0c1dpdGhQcm9zZS5oYXMoYmVhdC5pZCk7XG5cdFx0XHRcdGNvbnN0IGJlYXRNYXJrZXIgPSBoYXNCZWF0UHJvc2UgPyBcIitcIiA6IFwiLVwiO1xuXHRcdFx0XHRcblx0XHRcdFx0Y29udGVudCArPSBgJHtiZWF0TWFya2VyfSBbWyR7YmVhdExpbmtOYW1lfXxCZWF0ICR7YmVhdC5vcmRlcl9udW19OiAke2JlYXREaXNwbGF5VGV4dH1dXVxcbmA7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIEFkZCBvcnBoYW4gYmVhdHMgKGJlYXRzIHdpdGhvdXQgc2NlbmVfaWQpIGZvciBlYXN5IGFzc29jaWF0aW9uXG5cdFx0XHRpZiAob3JwaGFuQmVhdHMgJiYgb3JwaGFuQmVhdHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRjb250ZW50ICs9IGBcXG5gO1xuXHRcdFx0XHRjb250ZW50ICs9IGA+IFshaW5mb10gT3JwaGFuIEJlYXRzIChub3QgeWV0IGFzc29jaWF0ZWQgd2l0aCB0aGlzIHNjZW5lKVxcbmA7XG5cdFx0XHRcdGNvbnRlbnQgKz0gYD4gWW91IGNhbiBhc3NvY2lhdGUgdGhlc2UgYmVhdHMgd2l0aCB0aGlzIHNjZW5lIGJ5IG1vdmluZyB0aGVtIGhlcmUuXFxuXFxuYDtcblx0XHRcdFx0XG5cdFx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBvcnBoYW5CZWF0cykge1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXREaXNwbGF5VGV4dCA9IGJlYXQub3V0Y29tZVxuXHRcdFx0XHRcdFx0PyBgJHtiZWF0LmludGVudH0gLT4gJHtiZWF0Lm91dGNvbWV9YFxuXHRcdFx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBGb3Igbm93LCB3ZSBkb24ndCB0cmFjayBwcm9zZSBhdCBzY2VuZSBsZXZlbCwgc28gYWx3YXlzIHVzZSBcIi1cIlxuXHRcdFx0XHRcdGNvbnRlbnQgKz0gYC0gW1ske2JlYXRMaW5rTmFtZX18QmVhdCAke2JlYXQub3JkZXJfbnVtfTogJHtiZWF0RGlzcGxheVRleHR9XV1cXG5gO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGNvbnRlbnQgKz0gYFxcbmA7XG5cdFx0fVxuXG5cdFx0Ly8gR2VuZXJhdGUgaGllcmFyY2hpY2FsIHByb3NlIHNlY3Rpb24gZm9yIHRoZSBzY2VuZVxuXHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0Y29uc3Qgc2NlbmVMaW5rTmFtZSA9IHNjZW5lRmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0Y29uc3Qgc2NlbmVEaXNwbGF5VGV4dCA9IHNjZW5lLnRpbWVfcmVmIFxuXHRcdFx0PyBgJHtzY2VuZS5nb2FsfSAtICR7c2NlbmUudGltZV9yZWZ9YFxuXHRcdFx0OiBzY2VuZS5nb2FsO1xuXHRcdFxuXHRcdGNvbnRlbnQgKz0gYCMjIFNjZW5lOiBbWyR7c2NlbmVMaW5rTmFtZX18JHtzY2VuZURpc3BsYXlUZXh0fV1dXFxuXFxuYDtcblxuXHRcdC8vIEFkZCBwcm9zZSBibG9ja3MgYXQgc2NlbmUgbGV2ZWwgKG5vdCBhc3NvY2lhdGVkIHdpdGggYW55IGJlYXQpXG5cdFx0aWYgKGNvbnRlbnRCbG9ja3MgJiYgY29udGVudEJsb2Nrcy5sZW5ndGggPiAwKSB7XG5cdFx0XHQvLyBTb3J0IGJ5IG9yZGVyX251bVxuXHRcdFx0Y29uc3Qgc29ydGVkQ29udGVudEJsb2NrcyA9IFsuLi5jb250ZW50QmxvY2tzXS5zb3J0KChhLCBiKSA9PiAoYS5vcmRlcl9udW0gfHwgMCkgLSAoYi5vcmRlcl9udW0gfHwgMCkpO1xuXHRcdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2Ygc29ydGVkQ29udGVudEJsb2Nrcykge1xuXHRcdFx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShjb250ZW50QmxvY2spO1xuXHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRjb250ZW50ICs9IGBbWyR7bGlua05hbWV9fCR7Y29udGVudEJsb2NrLmNvbnRlbnQuc3Vic3RyaW5nKDAsIDUwKX0uLi5dXVxcblxcbmA7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIGJlYXRzIHdpdGggdGhlaXIgaGllcmFyY2hpY2FsIHN0cnVjdHVyZVxuXHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cy5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKSkge1xuXHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdGNvbnN0IGJlYXRMaW5rTmFtZSA9IGJlYXRGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdGNvbnN0IGJlYXREaXNwbGF5VGV4dCA9IGJlYXQub3V0Y29tZVxuXHRcdFx0XHQ/IGAke2JlYXQuaW50ZW50fSAtPiAke2JlYXQub3V0Y29tZX1gXG5cdFx0XHRcdDogYmVhdC5pbnRlbnQ7XG5cdFx0XHRcblx0XHRcdGNvbnRlbnQgKz0gYCMjIyBCZWF0OiBbWyR7YmVhdExpbmtOYW1lfXwke2JlYXREaXNwbGF5VGV4dH1dXVxcblxcbmA7XG5cdFx0fVxuXG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRhd2FpdCB0aGlzLnZhdWx0Lm1vZGlmeShmaWxlLCBjb250ZW50KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YXdhaXQgdGhpcy52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuXHRcdH1cblx0fVxuXG5cdC8vIFdyaXRlIGJlYXQgZmlsZVxuXHRhc3luYyB3cml0ZUJlYXRGaWxlKFxuXHRcdGJlYXQ6IEJlYXQsXG5cdFx0ZmlsZVBhdGg6IHN0cmluZyxcblx0XHRzdG9yeU5hbWU/OiBzdHJpbmcsXG5cdFx0Y29udGVudEJsb2Nrcz86IENvbnRlbnRCbG9ja1tdXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IGJhc2VGaWVsZHMgPSB7XG5cdFx0XHRpZDogYmVhdC5pZCxcblx0XHRcdHNjZW5lX2lkOiBiZWF0LnNjZW5lX2lkLFxuXHRcdFx0b3JkZXJfbnVtOiBiZWF0Lm9yZGVyX251bSxcblx0XHRcdHR5cGU6IGJlYXQudHlwZSxcblx0XHRcdGludGVudDogYmVhdC5pbnRlbnQgfHwgXCJcIixcblx0XHRcdG91dGNvbWU6IGJlYXQub3V0Y29tZSB8fCBcIlwiLFxuXHRcdFx0Y3JlYXRlZF9hdDogYmVhdC5jcmVhdGVkX2F0LFxuXHRcdFx0dXBkYXRlZF9hdDogYmVhdC51cGRhdGVkX2F0LFxuXHRcdH07XG5cblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMuZ2VuZXJhdGVGcm9udG1hdHRlcihiYXNlRmllbGRzLCB1bmRlZmluZWQsIHtcblx0XHRcdGVudGl0eVR5cGU6IFwiYmVhdFwiLFxuXHRcdFx0c3RvcnlOYW1lOiBzdG9yeU5hbWUsXG5cdFx0XHRkYXRlOiBiZWF0LmNyZWF0ZWRfYXQsXG5cdFx0fSk7XG5cblx0XHRsZXQgY29udGVudCA9IGAke2Zyb250bWF0dGVyfVxcbiMgQmVhdCAke2JlYXQub3JkZXJfbnVtfSAtICR7YmVhdC50eXBlfVxcblxcbmA7XG5cdFx0XG5cdFx0aWYgKGJlYXQuaW50ZW50KSB7XG5cdFx0XHRjb250ZW50ICs9IGAqKkludGVudDoqKiAke2JlYXQuaW50ZW50fVxcblxcbmA7XG5cdFx0fVxuXHRcdGlmIChiZWF0Lm91dGNvbWUpIHtcblx0XHRcdGNvbnRlbnQgKz0gYCoqT3V0Y29tZToqKiAke2JlYXQub3V0Y29tZX1cXG5cXG5gO1xuXHRcdH1cblxuXHRcdC8vIEdlbmVyYXRlIGhpZXJhcmNoaWNhbCBwcm9zZSBzZWN0aW9uIGZvciB0aGUgYmVhdFxuXHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdGNvbnN0IGJlYXREaXNwbGF5VGV4dCA9IGJlYXQub3V0Y29tZVxuXHRcdFx0PyBgJHtiZWF0LmludGVudH0gLT4gJHtiZWF0Lm91dGNvbWV9YFxuXHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcblx0XHRjb250ZW50ICs9IGAjIyBCZWF0OiBbWyR7YmVhdExpbmtOYW1lfXwke2JlYXREaXNwbGF5VGV4dH1dXVxcblxcbmA7XG5cblx0XHQvLyBBZGQgY29udGVudCBibG9ja3MgZm9yIHRoaXMgYmVhdFxuXHRcdGlmIChjb250ZW50QmxvY2tzICYmIGNvbnRlbnRCbG9ja3MubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29uc3Qgc29ydGVkQ29udGVudEJsb2NrcyA9IFsuLi5jb250ZW50QmxvY2tzXS5zb3J0KChhLCBiKSA9PiAoYS5vcmRlcl9udW0gfHwgMCkgLSAoYi5vcmRlcl9udW0gfHwgMCkpO1xuXHRcdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2Ygc29ydGVkQ29udGVudEJsb2Nrcykge1xuXHRcdFx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShjb250ZW50QmxvY2spO1xuXHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRjb250ZW50ICs9IGBbWyR7bGlua05hbWV9fCR7Y29udGVudEJsb2NrLmNvbnRlbnQuc3Vic3RyaW5nKDAsIDUwKX0uLi5dXVxcblxcbmA7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRhd2FpdCB0aGlzLnZhdWx0Lm1vZGlmeShmaWxlLCBjb250ZW50KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YXdhaXQgdGhpcy52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuXHRcdH1cblx0fVxuXG5cdC8vIExpc3QgYWxsIGNoYXB0ZXIgZmlsZXMgaW4gYSBzdG9yeSBmb2xkZXJcblx0YXN5bmMgbGlzdENoYXB0ZXJGaWxlcyhzdG9yeUZvbGRlclBhdGg6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcblx0XHRjb25zdCBjaGFwdGVyc1BhdGggPSBgJHtzdG9yeUZvbGRlclBhdGh9LzAwLWNoYXB0ZXJzYDtcblx0XHRjb25zdCBmb2xkZXIgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChjaGFwdGVyc1BhdGgpO1xuXG5cdFx0aWYgKCEoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcblx0XHRcdHJldHVybiBbXTtcblx0XHR9XG5cblx0XHRjb25zdCBjaGFwdGVyRmlsZXM6IHN0cmluZ1tdID0gW107XG5cdFx0Zm9yIChjb25zdCBjaGlsZCBvZiBmb2xkZXIuY2hpbGRyZW4pIHtcblx0XHRcdGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGaWxlICYmIGNoaWxkLmV4dGVuc2lvbiA9PT0gXCJtZFwiKSB7XG5cdFx0XHRcdGNoYXB0ZXJGaWxlcy5wdXNoKGNoaWxkLnBhdGgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjaGFwdGVyRmlsZXMuc29ydCgpO1xuXHR9XG5cblx0Ly8gTGlzdCBhbGwgc2NlbmUgZmlsZXMgaW4gYSBjaGFwdGVyIGZvbGRlclxuXHRhc3luYyBsaXN0U2NlbmVGaWxlcyhjaGFwdGVyRm9sZGVyUGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuXHRcdGNvbnN0IHNjZW5lc1BhdGggPSBgJHtjaGFwdGVyRm9sZGVyUGF0aH0vMDEtc2NlbmVzYDtcblx0XHRjb25zdCBmb2xkZXIgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChzY2VuZXNQYXRoKTtcblxuXHRcdGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc2NlbmVGaWxlczogc3RyaW5nW10gPSBbXTtcblx0XHRmb3IgKGNvbnN0IGNoaWxkIG9mIGZvbGRlci5jaGlsZHJlbikge1xuXHRcdFx0aWYgKGNoaWxkIGluc3RhbmNlb2YgVEZpbGUgJiYgY2hpbGQuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcblx0XHRcdFx0c2NlbmVGaWxlcy5wdXNoKGNoaWxkLnBhdGgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBzY2VuZUZpbGVzLnNvcnQoKTtcblx0fVxuXG5cdC8vIExpc3QgYWxsIHNjZW5lIGZpbGVzIGluIGEgc3RvcnkgZm9sZGVyXG5cdGFzeW5jIGxpc3RTdG9yeVNjZW5lRmlsZXMoc3RvcnlGb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG5cdFx0Y29uc3Qgc2NlbmVzUGF0aCA9IGAke3N0b3J5Rm9sZGVyUGF0aH0vMDEtc2NlbmVzYDtcblx0XHRjb25zdCBmb2xkZXIgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChzY2VuZXNQYXRoKTtcblxuXHRcdGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc2NlbmVGaWxlczogc3RyaW5nW10gPSBbXTtcblx0XHRmb3IgKGNvbnN0IGNoaWxkIG9mIGZvbGRlci5jaGlsZHJlbikge1xuXHRcdFx0aWYgKGNoaWxkIGluc3RhbmNlb2YgVEZpbGUgJiYgY2hpbGQuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcblx0XHRcdFx0c2NlbmVGaWxlcy5wdXNoKGNoaWxkLnBhdGgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBzY2VuZUZpbGVzLnNvcnQoKTtcblx0fVxuXG5cdC8vIExpc3QgYWxsIGJlYXQgZmlsZXMgaW4gYSBzdG9yeSBmb2xkZXJcblx0YXN5bmMgbGlzdFN0b3J5QmVhdEZpbGVzKHN0b3J5Rm9sZGVyUGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuXHRcdGNvbnN0IGJlYXRzUGF0aCA9IGAke3N0b3J5Rm9sZGVyUGF0aH0vMDItYmVhdHNgO1xuXHRcdGNvbnN0IGZvbGRlciA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGJlYXRzUGF0aCk7XG5cblx0XHRpZiAoIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH1cblxuXHRcdGNvbnN0IGJlYXRGaWxlczogc3RyaW5nW10gPSBbXTtcblx0XHRmb3IgKGNvbnN0IGNoaWxkIG9mIGZvbGRlci5jaGlsZHJlbikge1xuXHRcdFx0aWYgKGNoaWxkIGluc3RhbmNlb2YgVEZpbGUgJiYgY2hpbGQuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcblx0XHRcdFx0YmVhdEZpbGVzLnB1c2goY2hpbGQucGF0aCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGJlYXRGaWxlcy5zb3J0KCk7XG5cdH1cblxuXHQvLyBMaXN0IGFsbCBiZWF0IGZpbGVzIGluIGEgc2NlbmUgZm9sZGVyXG5cdGFzeW5jIGxpc3RCZWF0RmlsZXMoc2NlbmVGb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG5cdFx0Y29uc3QgYmVhdHNQYXRoID0gYCR7c2NlbmVGb2xkZXJQYXRofS8wMi1iZWF0c2A7XG5cdFx0Y29uc3QgZm9sZGVyID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoYmVhdHNQYXRoKTtcblxuXHRcdGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fVxuXG5cdFx0Y29uc3QgYmVhdEZpbGVzOiBzdHJpbmdbXSA9IFtdO1xuXHRcdGZvciAoY29uc3QgY2hpbGQgb2YgZm9sZGVyLmNoaWxkcmVuKSB7XG5cdFx0XHRpZiAoY2hpbGQgaW5zdGFuY2VvZiBURmlsZSAmJiBjaGlsZC5leHRlbnNpb24gPT09IFwibWRcIikge1xuXHRcdFx0XHRiZWF0RmlsZXMucHVzaChjaGlsZC5wYXRoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gYmVhdEZpbGVzLnNvcnQoKTtcblx0fVxuXG5cdC8vIEdldCB0aGUgc3ViZm9sZGVyIG5hbWUgZm9yIGEgY29udGVudCBibG9jayB0eXBlXG5cdGdldENvbnRlbnRUeXBlRm9sZGVyKHR5cGU6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Ly8gTWFwIHR5cGVzIHRvIGZvbGRlciBuYW1lcyB3aXRoIG51bWVyaWMgcHJlZml4ZXNcblx0XHRjb25zdCB0eXBlRm9sZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcblx0XHRcdHRleHQ6IFwiMDAtdGV4dHNcIixcblx0XHRcdGltYWdlOiBcIjAxLWltYWdlc1wiLFxuXHRcdFx0dmlkZW86IFwiMDItdmlkZW9zXCIsXG5cdFx0XHRhdWRpbzogXCIwMy1hdWRpb3NcIixcblx0XHRcdGVtYmVkOiBcIjA0LWVtYmVkc1wiLFxuXHRcdFx0bGluazogXCIwNS1saW5rc1wiLFxuXHRcdH07XG5cdFx0cmV0dXJuIHR5cGVGb2xkZXJzW3R5cGVdIHx8IFwiOTktb3RoZXJcIjtcblx0fVxuXG5cdC8vIEdldCB0aGUgZnVsbCBmb2xkZXIgcGF0aCBmb3IgY29udGVudCBibG9ja3Mgb2YgYSBzcGVjaWZpYyB0eXBlXG5cdGdldENvbnRlbnRCbG9ja0ZvbGRlclBhdGgoc3RvcnlGb2xkZXJQYXRoOiBzdHJpbmcsIHR5cGU6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Y29uc3QgdHlwZUZvbGRlciA9IHRoaXMuZ2V0Q29udGVudFR5cGVGb2xkZXIodHlwZSk7XG5cdFx0cmV0dXJuIGAke3N0b3J5Rm9sZGVyUGF0aH0vMDMtY29udGVudHMvJHt0eXBlRm9sZGVyfWA7XG5cdH1cblxuXHQvLyBHZW5lcmF0ZSBmaWxlbmFtZSBmb3IgY29udGVudCBibG9jayBiYXNlZCBvbiBkYXRlIGFuZCBjb250ZW50IHByZXZpZXdcblx0Z2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShjb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayk6IHN0cmluZyB7XG5cdFx0Ly8gUGFyc2UgY3JlYXRlZF9hdCBkYXRlXG5cdFx0Y29uc3QgZGF0ZSA9IG5ldyBEYXRlKGNvbnRlbnRCbG9jay5jcmVhdGVkX2F0KTtcblx0XHRjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuXHRcdGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRjb25zdCBob3VycyA9IFN0cmluZyhkYXRlLmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRjb25zdCBtaW51dGVzID0gU3RyaW5nKGRhdGUuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCBcIjBcIik7XG5cdFx0XG5cdFx0Ly8gRm9ybWF0OiAyMDI0LTAxLTE1VDE0LTMwXG5cdFx0Y29uc3QgZGF0ZVN0ciA9IGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fVQke2hvdXJzfS0ke21pbnV0ZXN9YDtcblxuXHRcdC8vIEdldCBwcmV2aWV3IGJhc2VkIG9uIGNvbnRlbnQgdHlwZVxuXHRcdGxldCB0ZXh0UGFydDogc3RyaW5nO1xuXHRcdGNvbnN0IHR5cGUgPSBjb250ZW50QmxvY2sudHlwZSB8fCBcInRleHRcIjtcblx0XHRcblx0XHRpZiAodHlwZSA9PT0gXCJ0ZXh0XCIpIHtcblx0XHRcdC8vIEZvciB0ZXh0OiBmaXJzdCAzMCBjaGFycyBvZiBjb250ZW50XG5cdFx0XHR0ZXh0UGFydCA9IGNvbnRlbnRCbG9jay5jb250ZW50XG5cdFx0XHRcdC5zdWJzdHJpbmcoMCwgMzApXG5cdFx0XHRcdC50cmltKClcblx0XHRcdFx0LnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXFxuXFxyXFx0XS9nLCBcIi1cIilcblx0XHRcdFx0LnJlcGxhY2UoL1xccysvZywgXCItXCIpXG5cdFx0XHRcdC5yZXBsYWNlKC8tKy9nLCBcIi1cIilcblx0XHRcdFx0LnJlcGxhY2UoL14tfC0kL2csIFwiXCIpXG5cdFx0XHRcdC50b0xvd2VyQ2FzZSgpIHx8IFwiY29udGVudFwiO1xuXHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJpbWFnZVwiIHx8IHR5cGUgPT09IFwidmlkZW9cIiB8fCB0eXBlID09PSBcImF1ZGlvXCIpIHtcblx0XHRcdC8vIEZvciBtZWRpYTogdXNlIGFsdF90ZXh0LCBjYXB0aW9uLCBvciBmaWxlbmFtZSBmcm9tIG1ldGFkYXRhXG5cdFx0XHRjb25zdCBtZXRhID0gY29udGVudEJsb2NrLm1ldGFkYXRhIHx8IHt9O1xuXHRcdFx0dGV4dFBhcnQgPSAobWV0YS5hbHRfdGV4dCB8fCBtZXRhLmNhcHRpb24gfHwgbWV0YS50aXRsZSB8fCB0eXBlKVxuXHRcdFx0XHQuc3Vic3RyaW5nKDAsIDMwKVxuXHRcdFx0XHQudHJpbSgpXG5cdFx0XHRcdC5yZXBsYWNlKC9bPD46XCIvXFxcXHw/KlxcblxcclxcdF0vZywgXCItXCIpXG5cdFx0XHRcdC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKVxuXHRcdFx0XHQucmVwbGFjZSgvLSsvZywgXCItXCIpXG5cdFx0XHRcdC5yZXBsYWNlKC9eLXwtJC9nLCBcIlwiKVxuXHRcdFx0XHQudG9Mb3dlckNhc2UoKTtcblx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwiZW1iZWRcIikge1xuXHRcdFx0Ly8gRm9yIGVtYmVkczogdXNlIHByb3ZpZGVyIG9yIHRpdGxlXG5cdFx0XHRjb25zdCBtZXRhID0gY29udGVudEJsb2NrLm1ldGFkYXRhIHx8IHt9O1xuXHRcdFx0dGV4dFBhcnQgPSAobWV0YS5wcm92aWRlciB8fCBtZXRhLnRpdGxlIHx8IFwiZW1iZWRcIilcblx0XHRcdFx0LnN1YnN0cmluZygwLCAzMClcblx0XHRcdFx0LnRyaW0oKVxuXHRcdFx0XHQucmVwbGFjZSgvWzw+OlwiL1xcXFx8PypcXG5cXHJcXHRdL2csIFwiLVwiKVxuXHRcdFx0XHQucmVwbGFjZSgvXFxzKy9nLCBcIi1cIilcblx0XHRcdFx0LnJlcGxhY2UoLy0rL2csIFwiLVwiKVxuXHRcdFx0XHQucmVwbGFjZSgvXi18LSQvZywgXCJcIilcblx0XHRcdFx0LnRvTG93ZXJDYXNlKCk7XG5cdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImxpbmtcIikge1xuXHRcdFx0Ly8gRm9yIGxpbmtzOiB1c2UgdGl0bGUgb3Igc2l0ZV9uYW1lXG5cdFx0XHRjb25zdCBtZXRhID0gY29udGVudEJsb2NrLm1ldGFkYXRhIHx8IHt9O1xuXHRcdFx0dGV4dFBhcnQgPSAobWV0YS50aXRsZSB8fCBtZXRhLnNpdGVfbmFtZSB8fCBcImxpbmtcIilcblx0XHRcdFx0LnN1YnN0cmluZygwLCAzMClcblx0XHRcdFx0LnRyaW0oKVxuXHRcdFx0XHQucmVwbGFjZSgvWzw+OlwiL1xcXFx8PypcXG5cXHJcXHRdL2csIFwiLVwiKVxuXHRcdFx0XHQucmVwbGFjZSgvXFxzKy9nLCBcIi1cIilcblx0XHRcdFx0LnJlcGxhY2UoLy0rL2csIFwiLVwiKVxuXHRcdFx0XHQucmVwbGFjZSgvXi18LSQvZywgXCJcIilcblx0XHRcdFx0LnRvTG93ZXJDYXNlKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRleHRQYXJ0ID0gXCJjb250ZW50XCI7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGAke2RhdGVTdHJ9XyR7dGV4dFBhcnR9Lm1kYDtcblx0fVxuXG5cdC8vIE9yZ2FuaXplIGNvbnRlbnQgYmxvY2tzIGJ5IHRoZWlyIGFzc29jaWF0aW9ucyAoY2hhcHRlciwgc2NlbmUsIGJlYXQpXG5cdG9yZ2FuaXplQ29udGVudEJsb2Nrcyhcblx0XHRjb250ZW50QmxvY2tzOiBDb250ZW50QmxvY2tbXSxcblx0XHRjb250ZW50QmxvY2tSZWZzOiBDb250ZW50QW5jaG9yW10sXG5cdFx0c2NlbmVzOiBTY2VuZVdpdGhCZWF0c1tdXG5cdCk6IENvbnRlbnRCbG9ja09yZ2FuaXphdGlvbiB7XG5cdFx0Y29uc3Qgb3JnYW5pemF0aW9uOiBDb250ZW50QmxvY2tPcmdhbml6YXRpb24gPSB7XG5cdFx0XHRjaGFwdGVyT25seTogW10sXG5cdFx0XHRieVNjZW5lOiBuZXcgTWFwKCksXG5cdFx0XHRieUJlYXQ6IG5ldyBNYXAoKSxcblx0XHR9O1xuXG5cdFx0Ly8gQ3JlYXRlIG1hcHMgZm9yIHF1aWNrIGxvb2t1cFxuXHRcdGNvbnN0IGNvbnRlbnRCbG9ja1JlZnNCeUNvbnRlbnRCbG9jayA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QW5jaG9yW10+KCk7XG5cdFx0Zm9yIChjb25zdCByZWYgb2YgY29udGVudEJsb2NrUmVmcykge1xuXHRcdFx0aWYgKCFjb250ZW50QmxvY2tSZWZzQnlDb250ZW50QmxvY2suaGFzKHJlZi5jb250ZW50X2Jsb2NrX2lkKSkge1xuXHRcdFx0XHRjb250ZW50QmxvY2tSZWZzQnlDb250ZW50QmxvY2suc2V0KHJlZi5jb250ZW50X2Jsb2NrX2lkLCBbXSk7XG5cdFx0XHR9XG5cdFx0XHRjb250ZW50QmxvY2tSZWZzQnlDb250ZW50QmxvY2suZ2V0KHJlZi5jb250ZW50X2Jsb2NrX2lkKSEucHVzaChyZWYpO1xuXHRcdH1cblxuXHRcdC8vIENyZWF0ZSBzY2VuZSBhbmQgYmVhdCBtYXBzIGZvciBxdWljayBsb29rdXBcblx0XHRjb25zdCBzY2VuZU1hcCA9IG5ldyBNYXA8c3RyaW5nLCBTY2VuZT4oKTtcblx0XHRjb25zdCBiZWF0TWFwID0gbmV3IE1hcDxzdHJpbmcsIEJlYXQ+KCk7XG5cdFx0Zm9yIChjb25zdCB7IHNjZW5lLCBiZWF0cyB9IG9mIHNjZW5lcykge1xuXHRcdFx0c2NlbmVNYXAuc2V0KHNjZW5lLmlkLCBzY2VuZSk7XG5cdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0YmVhdE1hcC5zZXQoYmVhdC5pZCwgYmVhdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU29ydCBjb250ZW50IGJsb2NrcyBieSBvcmRlcl9udW1cblx0XHRjb25zdCBzb3J0ZWRDb250ZW50QmxvY2tzID0gWy4uLmNvbnRlbnRCbG9ja3NdLnNvcnQoKGEsIGIpID0+IChhLm9yZGVyX251bSB8fCAwKSAtIChiLm9yZGVyX251bSB8fCAwKSk7XG5cblx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBzb3J0ZWRDb250ZW50QmxvY2tzKSB7XG5cdFx0XHRjb25zdCByZWZzID0gY29udGVudEJsb2NrUmVmc0J5Q29udGVudEJsb2NrLmdldChjb250ZW50QmxvY2suaWQpIHx8IFtdO1xuXHRcdFx0XG5cdFx0XHQvLyBGaW5kIHNjZW5lIGFuZCBiZWF0IHJlZmVyZW5jZXNcblx0XHRcdGNvbnN0IHNjZW5lUmVmID0gcmVmcy5maW5kKHIgPT4gci5lbnRpdHlfdHlwZSA9PT0gXCJzY2VuZVwiKTtcblx0XHRcdGNvbnN0IGJlYXRSZWYgPSByZWZzLmZpbmQociA9PiByLmVudGl0eV90eXBlID09PSBcImJlYXRcIik7XG5cblx0XHRcdGlmIChiZWF0UmVmICYmIGJlYXRNYXAuaGFzKGJlYXRSZWYuZW50aXR5X2lkKSkge1xuXHRcdFx0XHQvLyBBc3NvY2lhdGVkIHdpdGggYSBiZWF0IChhbmQgaW1wbGljaXRseSB3aXRoIGl0cyBzY2VuZSlcblx0XHRcdFx0Y29uc3QgYmVhdCA9IGJlYXRNYXAuZ2V0KGJlYXRSZWYuZW50aXR5X2lkKSE7XG5cdFx0XHRcdGlmICghb3JnYW5pemF0aW9uLmJ5QmVhdC5oYXMoYmVhdC5pZCkpIHtcblx0XHRcdFx0XHRvcmdhbml6YXRpb24uYnlCZWF0LnNldChiZWF0LmlkLCB7IGJlYXQsIGNvbnRlbnRCbG9ja3M6IFtdIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG9yZ2FuaXphdGlvbi5ieUJlYXQuZ2V0KGJlYXQuaWQpIS5jb250ZW50QmxvY2tzLnB1c2goY29udGVudEJsb2NrKTtcblx0XHRcdH0gZWxzZSBpZiAoc2NlbmVSZWYgJiYgc2NlbmVNYXAuaGFzKHNjZW5lUmVmLmVudGl0eV9pZCkpIHtcblx0XHRcdFx0Ly8gQXNzb2NpYXRlZCB3aXRoIGEgc2NlbmUgYnV0IG5vdCBhIGJlYXRcblx0XHRcdFx0Y29uc3Qgc2NlbmUgPSBzY2VuZU1hcC5nZXQoc2NlbmVSZWYuZW50aXR5X2lkKSE7XG5cdFx0XHRcdGlmICghb3JnYW5pemF0aW9uLmJ5U2NlbmUuaGFzKHNjZW5lLmlkKSkge1xuXHRcdFx0XHRcdG9yZ2FuaXphdGlvbi5ieVNjZW5lLnNldChzY2VuZS5pZCwgeyBzY2VuZSwgY29udGVudEJsb2NrczogW10gfSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0b3JnYW5pemF0aW9uLmJ5U2NlbmUuZ2V0KHNjZW5lLmlkKSEuY29udGVudEJsb2Nrcy5wdXNoKGNvbnRlbnRCbG9jayk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBPbmx5IGFzc29jaWF0ZWQgd2l0aCBjaGFwdGVyXG5cdFx0XHRcdG9yZ2FuaXphdGlvbi5jaGFwdGVyT25seS5wdXNoKGNvbnRlbnRCbG9jayk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG9yZ2FuaXphdGlvbjtcblx0fVxuXG5cdC8vIEdlbmVyYXRlIGZpbGVuYW1lIGZvciBzY2VuZSBiYXNlZCBvbiBkYXRlIGFuZCBnb2FsXG5cdGdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZTogU2NlbmUpOiBzdHJpbmcge1xuXHRcdC8vIFBhcnNlIGNyZWF0ZWRfYXQgZGF0ZVxuXHRcdGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShzY2VuZS5jcmVhdGVkX2F0KTtcblx0XHRjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuXHRcdGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRjb25zdCBob3VycyA9IFN0cmluZyhkYXRlLmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcblx0XHRjb25zdCBtaW51dGVzID0gU3RyaW5nKGRhdGUuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCBcIjBcIik7XG5cdFx0XG5cdFx0Ly8gRm9ybWF0OiAyMDI0LTAxLTE1VDE0LTMwXG5cdFx0Y29uc3QgZGF0ZVN0ciA9IGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fVQke2hvdXJzfS0ke21pbnV0ZXN9YDtcblxuXHRcdC8vIFNhbml0aXplIGdvYWwgZm9yIGZpbGVuYW1lXG5cdFx0Y29uc3QgZ29hbFNhbml0aXplZCA9IChzY2VuZS5nb2FsIHx8IFwic2NlbmVcIilcblx0XHRcdC50cmltKClcblx0XHRcdC5yZXBsYWNlKC9bPD46XCIvXFxcXHw/KlxcblxcclxcdF0vZywgXCItXCIpXG5cdFx0XHQucmVwbGFjZSgvXFxzKy9nLCBcIi1cIilcblx0XHRcdC5yZXBsYWNlKC8tKy9nLCBcIi1cIilcblx0XHRcdC5yZXBsYWNlKC9eLXwtJC9nLCBcIlwiKVxuXHRcdFx0LnRvTG93ZXJDYXNlKCk7XG5cblx0XHRyZXR1cm4gYCR7ZGF0ZVN0cn1fJHtnb2FsU2FuaXRpemVkfS5tZGA7XG5cdH1cblxuXHQvLyBHZW5lcmF0ZSBmaWxlbmFtZSBmb3IgYmVhdCBiYXNlZCBvbiBkYXRlIGFuZCBpbnRlbnRcblx0Z2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdDogQmVhdCk6IHN0cmluZyB7XG5cdFx0Ly8gUGFyc2UgY3JlYXRlZF9hdCBkYXRlXG5cdFx0Y29uc3QgZGF0ZSA9IG5ldyBEYXRlKGJlYXQuY3JlYXRlZF9hdCk7XG5cdFx0Y29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcblx0XHRjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCBcIjBcIik7XG5cdFx0Y29uc3QgZGF5ID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCBcIjBcIik7XG5cdFx0Y29uc3QgaG91cnMgPSBTdHJpbmcoZGF0ZS5nZXRIb3VycygpKS5wYWRTdGFydCgyLCBcIjBcIik7XG5cdFx0Y29uc3QgbWludXRlcyA9IFN0cmluZyhkYXRlLmdldE1pbnV0ZXMoKSkucGFkU3RhcnQoMiwgXCIwXCIpO1xuXHRcdFxuXHRcdC8vIEZvcm1hdDogMjAyNC0wMS0xNVQxNC0zMFxuXHRcdGNvbnN0IGRhdGVTdHIgPSBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1UJHtob3Vyc30tJHttaW51dGVzfWA7XG5cblx0XHQvLyBTYW5pdGl6ZSBpbnRlbnQgZm9yIGZpbGVuYW1lXG5cdFx0Y29uc3QgaW50ZW50U2FuaXRpemVkID0gKGJlYXQuaW50ZW50IHx8IFwiYmVhdFwiKVxuXHRcdFx0LnRyaW0oKVxuXHRcdFx0LnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXFxuXFxyXFx0XS9nLCBcIi1cIilcblx0XHRcdC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKVxuXHRcdFx0LnJlcGxhY2UoLy0rL2csIFwiLVwiKVxuXHRcdFx0LnJlcGxhY2UoL14tfC0kL2csIFwiXCIpXG5cdFx0XHQudG9Mb3dlckNhc2UoKTtcblxuXHRcdHJldHVybiBgJHtkYXRlU3RyfV8ke2ludGVudFNhbml0aXplZH0ubWRgO1xuXHR9XG5cblx0Ly8gV3JpdGUgY29udGVudCBibG9jayBmaWxlXG5cdGFzeW5jIHdyaXRlQ29udGVudEJsb2NrRmlsZShcblx0XHRjb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayxcblx0XHRmaWxlUGF0aDogc3RyaW5nLFxuXHRcdHN0b3J5TmFtZT86IHN0cmluZ1xuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCB0eXBlID0gY29udGVudEJsb2NrLnR5cGUgfHwgXCJ0ZXh0XCI7XG5cdFx0XG5cdFx0Y29uc3QgYmFzZUZpZWxkczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgbnVsbD4gPSB7XG5cdFx0XHRpZDogY29udGVudEJsb2NrLmlkLFxuXHRcdFx0Y2hhcHRlcl9pZDogY29udGVudEJsb2NrLmNoYXB0ZXJfaWQgfHwgbnVsbCxcblx0XHRcdG9yZGVyX251bTogY29udGVudEJsb2NrLm9yZGVyX251bSB8fCAwLFxuXHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdGtpbmQ6IGNvbnRlbnRCbG9jay5raW5kLFxuXHRcdFx0Y3JlYXRlZF9hdDogY29udGVudEJsb2NrLmNyZWF0ZWRfYXQsXG5cdFx0XHR1cGRhdGVkX2F0OiBjb250ZW50QmxvY2sudXBkYXRlZF9hdCxcblx0XHR9O1xuXG5cdFx0Ly8gQWRkIG1ldGFkYXRhIGZpZWxkcyBiYXNlZCBvbiB0eXBlXG5cdFx0Y29uc3QgbWV0YSA9IGNvbnRlbnRCbG9jay5tZXRhZGF0YSB8fCB7fTtcblx0XHRpZiAodHlwZSA9PT0gXCJ0ZXh0XCIgJiYgbWV0YS53b3JkX2NvdW50KSB7XG5cdFx0XHRiYXNlRmllbGRzLndvcmRfY291bnQgPSBtZXRhLndvcmRfY291bnQ7XG5cdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImltYWdlXCIpIHtcblx0XHRcdC8vIFN0b3JlIG9yaWdpbmFsIFVSTCBmb3Igc3luYyBwdXJwb3Nlc1xuXHRcdFx0aWYgKGNvbnRlbnRCbG9jay5jb250ZW50ICYmIGNvbnRlbnRCbG9jay5jb250ZW50LnN0YXJ0c1dpdGgoXCJodHRwXCIpKSB7XG5cdFx0XHRcdGJhc2VGaWVsZHMub3JpZ2luYWxfdXJsID0gY29udGVudEJsb2NrLmNvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0XHRpZiAobWV0YS5hbHRfdGV4dCkgYmFzZUZpZWxkcy5hbHRfdGV4dCA9IG1ldGEuYWx0X3RleHQ7XG5cdFx0XHRpZiAobWV0YS5jYXB0aW9uKSBiYXNlRmllbGRzLmNhcHRpb24gPSBtZXRhLmNhcHRpb247XG5cdFx0XHRpZiAobWV0YS53aWR0aCkgYmFzZUZpZWxkcy53aWR0aCA9IG1ldGEud2lkdGg7XG5cdFx0XHRpZiAobWV0YS5oZWlnaHQpIGJhc2VGaWVsZHMuaGVpZ2h0ID0gbWV0YS5oZWlnaHQ7XG5cdFx0XHRpZiAobWV0YS5taW1lX3R5cGUpIGJhc2VGaWVsZHMubWltZV90eXBlID0gbWV0YS5taW1lX3R5cGU7XG5cdFx0XHRpZiAobWV0YS5zb3VyY2UpIGJhc2VGaWVsZHMuc291cmNlID0gbWV0YS5zb3VyY2U7XG5cdFx0XHRpZiAobWV0YS5hdXRob3JfbmFtZSkgYmFzZUZpZWxkcy5hdXRob3JfbmFtZSA9IG1ldGEuYXV0aG9yX25hbWU7XG5cdFx0XHRpZiAobWV0YS5hdHRyaWJ1dGlvbikgYmFzZUZpZWxkcy5hdHRyaWJ1dGlvbiA9IG1ldGEuYXR0cmlidXRpb247XG5cdFx0XHRpZiAobWV0YS5hdHRyaWJ1dGlvbl91cmwpIGJhc2VGaWVsZHMuYXR0cmlidXRpb25fdXJsID0gbWV0YS5hdHRyaWJ1dGlvbl91cmw7XG5cdFx0fSBlbHNlIGlmICh0eXBlID09PSBcInZpZGVvXCIgfHwgdHlwZSA9PT0gXCJhdWRpb1wiKSB7XG5cdFx0XHRpZiAobWV0YS5wcm92aWRlcikgYmFzZUZpZWxkcy5wcm92aWRlciA9IG1ldGEucHJvdmlkZXI7XG5cdFx0XHRpZiAobWV0YS52aWRlb19pZCkgYmFzZUZpZWxkcy52aWRlb19pZCA9IG1ldGEudmlkZW9faWQ7XG5cdFx0XHRpZiAobWV0YS5kdXJhdGlvbikgYmFzZUZpZWxkcy5kdXJhdGlvbiA9IG1ldGEuZHVyYXRpb247XG5cdFx0XHRpZiAobWV0YS50aHVtYm5haWxfdXJsKSBiYXNlRmllbGRzLnRodW1ibmFpbF91cmwgPSBtZXRhLnRodW1ibmFpbF91cmw7XG5cdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImVtYmVkXCIpIHtcblx0XHRcdGlmIChtZXRhLnByb3ZpZGVyKSBiYXNlRmllbGRzLnByb3ZpZGVyID0gbWV0YS5wcm92aWRlcjtcblx0XHRcdGlmIChtZXRhLmh0bWwpIGJhc2VGaWVsZHMuZW1iZWRfaHRtbCA9IG1ldGEuaHRtbDtcblx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwibGlua1wiKSB7XG5cdFx0XHRpZiAobWV0YS50aXRsZSkgYmFzZUZpZWxkcy5saW5rX3RpdGxlID0gbWV0YS50aXRsZTtcblx0XHRcdGlmIChtZXRhLmRlc2NyaXB0aW9uKSBiYXNlRmllbGRzLmxpbmtfZGVzY3JpcHRpb24gPSBtZXRhLmRlc2NyaXB0aW9uO1xuXHRcdFx0aWYgKG1ldGEuaW1hZ2VfdXJsKSBiYXNlRmllbGRzLmxpbmtfaW1hZ2UgPSBtZXRhLmltYWdlX3VybDtcblx0XHRcdGlmIChtZXRhLnNpdGVfbmFtZSkgYmFzZUZpZWxkcy5zaXRlX25hbWUgPSBtZXRhLnNpdGVfbmFtZTtcblx0XHR9XG5cblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMuZ2VuZXJhdGVGcm9udG1hdHRlcihiYXNlRmllbGRzLCB1bmRlZmluZWQsIHtcblx0XHRcdGVudGl0eVR5cGU6IFwiY29udGVudC1ibG9ja1wiLFxuXHRcdFx0c3RvcnlOYW1lOiBzdG9yeU5hbWUsXG5cdFx0XHRkYXRlOiBjb250ZW50QmxvY2suY3JlYXRlZF9hdCxcblx0XHR9KTtcblxuXHRcdC8vIEdlbmVyYXRlIGNvbnRlbnQgYmFzZWQgb24gdHlwZVxuXHRcdGxldCBmaWxlQ29udGVudDogc3RyaW5nO1xuXHRcdGlmICh0eXBlID09PSBcInRleHRcIikge1xuXHRcdFx0ZmlsZUNvbnRlbnQgPSBgJHtmcm9udG1hdHRlcn0ke2NvbnRlbnRCbG9jay5jb250ZW50fWA7XG5cdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImltYWdlXCIpIHtcblx0XHRcdC8vIERvd25sb2FkIGltYWdlIGFuZCBzYXZlIGxvY2FsbHlcblx0XHRcdGxldCBsb2NhbEltYWdlUGF0aDogc3RyaW5nID0gY29udGVudEJsb2NrLmNvbnRlbnQgfHwgXCJcIjtcblx0XHRcdGlmIChjb250ZW50QmxvY2suY29udGVudCAmJiAhY29udGVudEJsb2NrLmNvbnRlbnQuc3RhcnRzV2l0aChcImh0dHBcIikpIHtcblx0XHRcdFx0Ly8gQWxyZWFkeSBhIGxvY2FsIHBhdGgsIHVzZSBhcyBpc1xuXHRcdFx0XHRsb2NhbEltYWdlUGF0aCA9IGNvbnRlbnRCbG9jay5jb250ZW50O1xuXHRcdFx0fSBlbHNlIGlmIChjb250ZW50QmxvY2suY29udGVudCkge1xuXHRcdFx0XHQvLyBEb3dubG9hZCBpbWFnZSBmcm9tIHJlbW90ZSBVUkxcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRsb2NhbEltYWdlUGF0aCA9IGF3YWl0IHRoaXMuZG93bmxvYWRJbWFnZShjb250ZW50QmxvY2suY29udGVudCwgZmlsZVBhdGgsIGNvbnRlbnRCbG9jay5pZCk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZG93bmxvYWQgaW1hZ2U6XCIsIGVycik7XG5cdFx0XHRcdFx0Ly8gRmFsbGJhY2sgdG8gb3JpZ2luYWwgVVJMIGlmIGRvd25sb2FkIGZhaWxzXG5cdFx0XHRcdFx0bG9jYWxJbWFnZVBhdGggPSBjb250ZW50QmxvY2suY29udGVudDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRjb25zdCBhbHRUZXh0ID0gbWV0YS5hbHRfdGV4dCB8fCBcIlwiO1xuXHRcdFx0ZmlsZUNvbnRlbnQgPSBgJHtmcm9udG1hdHRlcn0hWyR7YWx0VGV4dH1dKCR7bG9jYWxJbWFnZVBhdGh9KWA7XG5cdFx0XHRpZiAobWV0YS5jYXB0aW9uKSB7XG5cdFx0XHRcdGZpbGVDb250ZW50ICs9IGBcXG5cXG4qJHttZXRhLmNhcHRpb259KmA7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmICh0eXBlID09PSBcInZpZGVvXCIpIHtcblx0XHRcdGZpbGVDb250ZW50ID0gYCR7ZnJvbnRtYXR0ZXJ9W1ZpZGVvXSgke2NvbnRlbnRCbG9jay5jb250ZW50fSlgO1xuXHRcdFx0aWYgKG1ldGEudGh1bWJuYWlsX3VybCkge1xuXHRcdFx0XHRmaWxlQ29udGVudCArPSBgXFxuXFxuIVtUaHVtYm5haWxdKCR7bWV0YS50aHVtYm5haWxfdXJsfSlgO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJhdWRpb1wiKSB7XG5cdFx0XHRmaWxlQ29udGVudCA9IGAke2Zyb250bWF0dGVyfVtBdWRpb10oJHtjb250ZW50QmxvY2suY29udGVudH0pYDtcblx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IFwiZW1iZWRcIikge1xuXHRcdFx0ZmlsZUNvbnRlbnQgPSBgJHtmcm9udG1hdHRlcn0ke21ldGEuaHRtbCB8fCBjb250ZW50QmxvY2suY29udGVudH1gO1xuXHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJsaW5rXCIpIHtcblx0XHRcdGNvbnN0IHRpdGxlID0gbWV0YS50aXRsZSB8fCBjb250ZW50QmxvY2suY29udGVudDtcblx0XHRcdGZpbGVDb250ZW50ID0gYCR7ZnJvbnRtYXR0ZXJ9WyR7dGl0bGV9XSgke2NvbnRlbnRCbG9jay5jb250ZW50fSlgO1xuXHRcdFx0aWYgKG1ldGEuZGVzY3JpcHRpb24pIHtcblx0XHRcdFx0ZmlsZUNvbnRlbnQgKz0gYFxcblxcbiR7bWV0YS5kZXNjcmlwdGlvbn1gO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRmaWxlQ29udGVudCA9IGAke2Zyb250bWF0dGVyfSR7Y29udGVudEJsb2NrLmNvbnRlbnR9YDtcblx0XHR9XG5cblx0XHRjb25zdCBmaWxlID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdGF3YWl0IHRoaXMudmF1bHQubW9kaWZ5KGZpbGUsIGZpbGVDb250ZW50KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YXdhaXQgdGhpcy52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGZpbGVDb250ZW50KTtcblx0XHR9XG5cdH1cblxuXHQvLyBEb3dubG9hZCBpbWFnZSBmcm9tIFVSTCBhbmQgc2F2ZSBsb2NhbGx5IChzYW1lIGZvbGRlciBhcyBjb250ZW50IGJsb2NrIC5tZClcblx0cHJpdmF0ZSBhc3luYyBkb3dubG9hZEltYWdlKGltYWdlVXJsOiBzdHJpbmcsIGNvbnRlbnRCbG9ja0ZpbGVQYXRoOiBzdHJpbmcsIGNvbnRlbnRCbG9ja0lkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdHRyeSB7XG5cdFx0XHQvLyBGZXRjaCBpbWFnZVxuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChpbWFnZVVybCk7XG5cdFx0XHRpZiAoIXJlc3BvbnNlLm9rKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIGltYWdlOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XG5cdFx0XHRjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKTtcblxuXHRcdFx0Ly8gRGV0ZXJtaW5lIGZpbGUgZXh0ZW5zaW9uIGZyb20gY29udGVudCB0eXBlIG9yIFVSTFxuXHRcdFx0bGV0IGV4dGVuc2lvbiA9IFwianBnXCI7XG5cdFx0XHRjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KFwiY29udGVudC10eXBlXCIpO1xuXHRcdFx0aWYgKGNvbnRlbnRUeXBlKSB7XG5cdFx0XHRcdGlmIChjb250ZW50VHlwZS5pbmNsdWRlcyhcInBuZ1wiKSkgZXh0ZW5zaW9uID0gXCJwbmdcIjtcblx0XHRcdFx0ZWxzZSBpZiAoY29udGVudFR5cGUuaW5jbHVkZXMoXCJnaWZcIikpIGV4dGVuc2lvbiA9IFwiZ2lmXCI7XG5cdFx0XHRcdGVsc2UgaWYgKGNvbnRlbnRUeXBlLmluY2x1ZGVzKFwid2VicFwiKSkgZXh0ZW5zaW9uID0gXCJ3ZWJwXCI7XG5cdFx0XHRcdGVsc2UgaWYgKGNvbnRlbnRUeXBlLmluY2x1ZGVzKFwic3ZnXCIpKSBleHRlbnNpb24gPSBcInN2Z1wiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gVHJ5IHRvIGdldCBleHRlbnNpb24gZnJvbSBVUkxcblx0XHRcdFx0Y29uc3QgdXJsTWF0Y2ggPSBpbWFnZVVybC5tYXRjaCgvXFwuKGpwZ3xqcGVnfHBuZ3xnaWZ8d2VicHxzdmcpKFxcP3wkKS9pKTtcblx0XHRcdFx0aWYgKHVybE1hdGNoKSB7XG5cdFx0XHRcdFx0ZXh0ZW5zaW9uID0gdXJsTWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBHZXQgZGlyZWN0b3J5IG9mIGNvbnRlbnQgYmxvY2sgZmlsZSAoc2FtZSBmb2xkZXIgZm9yIGltYWdlKVxuXHRcdFx0Y29uc3QgY29udGVudEJsb2NrRGlyID0gY29udGVudEJsb2NrRmlsZVBhdGguc3Vic3RyaW5nKDAsIGNvbnRlbnRCbG9ja0ZpbGVQYXRoLmxhc3RJbmRleE9mKFwiL1wiKSk7XG5cblx0XHRcdC8vIEdlbmVyYXRlIGltYWdlIGZpbGVuYW1lIGJhc2VkIG9uIGNvbnRlbnQgYmxvY2sgSURcblx0XHRcdGNvbnN0IGltYWdlRmlsZU5hbWUgPSBgJHtjb250ZW50QmxvY2tJZH0uJHtleHRlbnNpb259YDtcblx0XHRcdGNvbnN0IGltYWdlUGF0aCA9IGAke2NvbnRlbnRCbG9ja0Rpcn0vJHtpbWFnZUZpbGVOYW1lfWA7XG5cblx0XHRcdC8vIFNhdmUgaW1hZ2UgZmlsZSAoT2JzaWRpYW4ncyBjcmVhdGVCaW5hcnkgZXhwZWN0cyBBcnJheUJ1ZmZlcilcblx0XHRcdGNvbnN0IGV4aXN0aW5nRmlsZSA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGltYWdlUGF0aCk7XG5cdFx0XHRpZiAoZXhpc3RpbmdGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy52YXVsdC5tb2RpZnlCaW5hcnkoZXhpc3RpbmdGaWxlLCBhcnJheUJ1ZmZlcik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnZhdWx0LmNyZWF0ZUJpbmFyeShpbWFnZVBhdGgsIGFycmF5QnVmZmVyKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmV0dXJuIGp1c3QgdGhlIGZpbGVuYW1lIChzYW1lIGZvbGRlcilcblx0XHRcdHJldHVybiBpbWFnZUZpbGVOYW1lO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIGRvd25sb2FkaW5nIGltYWdlOlwiLCBlcnIpO1xuXHRcdFx0dGhyb3cgZXJyO1xuXHRcdH1cblx0fVxuXG5cdC8vIFJlYWQgY29udGVudCBibG9jayBmcm9tIGZpbGVcblx0YXN5bmMgcmVhZENvbnRlbnRCbG9ja0Zyb21GaWxlKGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPENvbnRlbnRCbG9jayB8IG51bGw+IHtcblx0XHRjb25zdCBmaWxlID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMudmF1bHQucmVhZChmaWxlKTtcblx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5wYXJzZUZyb250bWF0dGVyKGZpbGVDb250ZW50KTtcblxuXHRcdFx0Ly8gRXh0cmFjdCBjb250ZW50IGFmdGVyIGZyb250bWF0dGVyXG5cdFx0XHRjb25zdCBjb250ZW50TWF0Y2ggPSBmaWxlQ29udGVudC5tYXRjaCgvXi0tLVxcbltcXHNcXFNdKj9cXG4tLS1cXG4oW1xcc1xcU10qKSQvKTtcblx0XHRcdGxldCBibG9ja0NvbnRlbnQgPSBjb250ZW50TWF0Y2ggPyBjb250ZW50TWF0Y2hbMV0udHJpbSgpIDogXCJcIjtcblxuXHRcdFx0aWYgKCFmcm9udG1hdHRlci5pZCkge1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgdHlwZSA9IChmcm9udG1hdHRlci50eXBlIHx8IFwidGV4dFwiKSBhcyBDb250ZW50QmxvY2tbXCJ0eXBlXCJdO1xuXHRcdFx0XG5cdFx0XHQvLyBCdWlsZCBtZXRhZGF0YSBmcm9tIGZyb250bWF0dGVyIGZpcnN0XG5cdFx0XHRjb25zdCBtZXRhZGF0YTogQ29udGVudEJsb2NrW1wibWV0YWRhdGFcIl0gPSB7fTtcblx0XHRcdFxuXHRcdFx0Ly8gUGFyc2UgY29udGVudCBiYXNlZCBvbiB0eXBlXG5cdFx0XHRpZiAodHlwZSA9PT0gXCJpbWFnZVwiKSB7XG5cdFx0XHRcdC8vIEV4dHJhY3QgaW1hZ2UgcGF0aCBmcm9tICFbYWx0XShwYXRoKVxuXHRcdFx0XHRjb25zdCBpbWdNYXRjaCA9IGJsb2NrQ29udGVudC5tYXRjaCgvIVxcW1teXFxdXSpcXF1cXCgoW14pXSspXFwpLyk7XG5cdFx0XHRcdGlmIChpbWdNYXRjaCkge1xuXHRcdFx0XHRcdGJsb2NrQ29udGVudCA9IGltZ01hdGNoWzFdO1xuXHRcdFx0XHRcdC8vIElmIGl0J3MgYSBsb2NhbCBmaWxlbmFtZSAobm90IGEgVVJMKSwgdXNlIG9yaWdpbmFsX3VybCBmcm9tIGZyb250bWF0dGVyIGZvciBzeW5jXG5cdFx0XHRcdFx0aWYgKCFibG9ja0NvbnRlbnQuc3RhcnRzV2l0aChcImh0dHBcIikgJiYgZnJvbnRtYXR0ZXIub3JpZ2luYWxfdXJsKSB7XG5cdFx0XHRcdFx0XHRibG9ja0NvbnRlbnQgPSBmcm9udG1hdHRlci5vcmlnaW5hbF91cmwgYXMgc3RyaW5nO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0eXBlID09PSBcInZpZGVvXCIgfHwgdHlwZSA9PT0gXCJhdWRpb1wiIHx8IHR5cGUgPT09IFwibGlua1wiKSB7XG5cdFx0XHRcdC8vIEV4dHJhY3QgVVJMIGZyb20gW3RleHRdKHVybClcblx0XHRcdFx0Y29uc3QgbGlua01hdGNoID0gYmxvY2tDb250ZW50Lm1hdGNoKC9cXFtbXlxcXV0qXFxdXFwoKFteKV0rKVxcKS8pO1xuXHRcdFx0XHRpZiAobGlua01hdGNoKSB7XG5cdFx0XHRcdFx0YmxvY2tDb250ZW50ID0gbGlua01hdGNoWzFdO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbnRpbnVlIGJ1aWxkaW5nIG1ldGFkYXRhIGZyb20gZnJvbnRtYXR0ZXJcblx0XHRcdGlmIChmcm9udG1hdHRlci53b3JkX2NvdW50KSBtZXRhZGF0YS53b3JkX2NvdW50ID0gcGFyc2VJbnQoZnJvbnRtYXR0ZXIud29yZF9jb3VudCwgMTApO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLmFsdF90ZXh0KSBtZXRhZGF0YS5hbHRfdGV4dCA9IGZyb250bWF0dGVyLmFsdF90ZXh0O1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLmNhcHRpb24pIG1ldGFkYXRhLmNhcHRpb24gPSBmcm9udG1hdHRlci5jYXB0aW9uO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLndpZHRoKSBtZXRhZGF0YS53aWR0aCA9IHBhcnNlSW50KGZyb250bWF0dGVyLndpZHRoLCAxMCk7XG5cdFx0XHRpZiAoZnJvbnRtYXR0ZXIuaGVpZ2h0KSBtZXRhZGF0YS5oZWlnaHQgPSBwYXJzZUludChmcm9udG1hdHRlci5oZWlnaHQsIDEwKTtcblx0XHRcdGlmIChmcm9udG1hdHRlci5taW1lX3R5cGUpIG1ldGFkYXRhLm1pbWVfdHlwZSA9IGZyb250bWF0dGVyLm1pbWVfdHlwZTtcblx0XHRcdGlmIChmcm9udG1hdHRlci5zb3VyY2UpIG1ldGFkYXRhLnNvdXJjZSA9IGZyb250bWF0dGVyLnNvdXJjZSBhcyBcInVuc3BsYXNoXCIgfCBcImludGVybmV0IGxpbmtcIiB8IFwibG9jYWxcIjtcblx0XHRcdGlmIChmcm9udG1hdHRlci5hdXRob3JfbmFtZSkgbWV0YWRhdGEuYXV0aG9yX25hbWUgPSBmcm9udG1hdHRlci5hdXRob3JfbmFtZTtcblx0XHRcdGlmIChmcm9udG1hdHRlci5hdHRyaWJ1dGlvbikgbWV0YWRhdGEuYXR0cmlidXRpb24gPSBmcm9udG1hdHRlci5hdHRyaWJ1dGlvbjtcblx0XHRcdGlmIChmcm9udG1hdHRlci5hdHRyaWJ1dGlvbl91cmwpIG1ldGFkYXRhLmF0dHJpYnV0aW9uX3VybCA9IGZyb250bWF0dGVyLmF0dHJpYnV0aW9uX3VybDtcblx0XHRcdGlmIChmcm9udG1hdHRlci5wcm92aWRlcikgbWV0YWRhdGEucHJvdmlkZXIgPSBmcm9udG1hdHRlci5wcm92aWRlcjtcblx0XHRcdGlmIChmcm9udG1hdHRlci52aWRlb19pZCkgbWV0YWRhdGEudmlkZW9faWQgPSBmcm9udG1hdHRlci52aWRlb19pZDtcblx0XHRcdGlmIChmcm9udG1hdHRlci5kdXJhdGlvbikgbWV0YWRhdGEuZHVyYXRpb24gPSBwYXJzZUludChmcm9udG1hdHRlci5kdXJhdGlvbiwgMTApO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLnRodW1ibmFpbF91cmwpIG1ldGFkYXRhLnRodW1ibmFpbF91cmwgPSBmcm9udG1hdHRlci50aHVtYm5haWxfdXJsO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLmVtYmVkX2h0bWwpIG1ldGFkYXRhLmh0bWwgPSBmcm9udG1hdHRlci5lbWJlZF9odG1sO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLmxpbmtfdGl0bGUpIG1ldGFkYXRhLnRpdGxlID0gZnJvbnRtYXR0ZXIubGlua190aXRsZTtcblx0XHRcdGlmIChmcm9udG1hdHRlci5saW5rX2Rlc2NyaXB0aW9uKSBtZXRhZGF0YS5kZXNjcmlwdGlvbiA9IGZyb250bWF0dGVyLmxpbmtfZGVzY3JpcHRpb247XG5cdFx0XHRpZiAoZnJvbnRtYXR0ZXIubGlua19pbWFnZSkgbWV0YWRhdGEuaW1hZ2VfdXJsID0gZnJvbnRtYXR0ZXIubGlua19pbWFnZTtcblx0XHRcdGlmIChmcm9udG1hdHRlci5zaXRlX25hbWUpIG1ldGFkYXRhLnNpdGVfbmFtZSA9IGZyb250bWF0dGVyLnNpdGVfbmFtZTtcblxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0aWQ6IGZyb250bWF0dGVyLmlkLFxuXHRcdFx0XHRjaGFwdGVyX2lkOiBmcm9udG1hdHRlci5jaGFwdGVyX2lkIHx8IG51bGwsXG5cdFx0XHRcdG9yZGVyX251bTogcGFyc2VJbnQoZnJvbnRtYXR0ZXIub3JkZXJfbnVtIHx8IFwiMFwiLCAxMCksXG5cdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdGtpbmQ6IGZyb250bWF0dGVyLmtpbmQgfHwgXCJmaW5hbFwiLFxuXHRcdFx0XHRjb250ZW50OiBibG9ja0NvbnRlbnQsXG5cdFx0XHRcdG1ldGFkYXRhOiBtZXRhZGF0YSxcblx0XHRcdFx0Y3JlYXRlZF9hdDogZnJvbnRtYXR0ZXIuY3JlYXRlZF9hdCB8fCBcIlwiLFxuXHRcdFx0XHR1cGRhdGVkX2F0OiBmcm9udG1hdHRlci51cGRhdGVkX2F0IHx8IFwiXCIsXG5cdFx0XHR9O1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHJlYWQgY29udGVudCBibG9jayBmcm9tICR7ZmlsZVBhdGh9OmAsIGVycik7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdH1cblxuXHQvLyBMaXN0IGFsbCBjb250ZW50IGJsb2NrIGZpbGVzIGluIGEgc3RvcnkgZm9sZGVyIChhY3Jvc3MgYWxsIHR5cGUgc3ViZm9sZGVycylcblx0YXN5bmMgbGlzdENvbnRlbnRCbG9ja0ZpbGVzKHN0b3J5Rm9sZGVyUGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuXHRcdGNvbnN0IGNvbnRlbnRzUGF0aCA9IGAke3N0b3J5Rm9sZGVyUGF0aH0vMDMtY29udGVudHNgO1xuXHRcdGNvbnN0IGZvbGRlciA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGNvbnRlbnRzUGF0aCk7XG5cblx0XHRpZiAoIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH1cblxuXHRcdGNvbnN0IGNvbnRlbnRGaWxlczogc3RyaW5nW10gPSBbXTtcblx0XHRcblx0XHQvLyBJdGVyYXRlIHRocm91Z2ggdHlwZSBzdWJmb2xkZXJzXG5cdFx0Zm9yIChjb25zdCBjaGlsZCBvZiBmb2xkZXIuY2hpbGRyZW4pIHtcblx0XHRcdGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcblx0XHRcdFx0Ly8gVGhpcyBpcyBhIHR5cGUgc3ViZm9sZGVyICh0ZXh0LCBpbWFnZXMsIGV0Yy4pXG5cdFx0XHRcdGZvciAoY29uc3QgZmlsZSBvZiBjaGlsZC5jaGlsZHJlbikge1xuXHRcdFx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09IFwibWRcIikge1xuXHRcdFx0XHRcdFx0Y29udGVudEZpbGVzLnB1c2goZmlsZS5wYXRoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY29udGVudEZpbGVzLnNvcnQoKTtcblx0fVxufVxuXG4iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFRGaWxlLCBURm9sZGVyIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBTdG9yeUVuZ2luZUNsaWVudCB9IGZyb20gXCIuLi9hcGkvY2xpZW50XCI7XG5pbXBvcnQgeyBGaWxlTWFuYWdlciB9IGZyb20gXCIuL2ZpbGVNYW5hZ2VyXCI7XG5pbXBvcnQge1xuXHRTdG9yeUVuZ2luZVNldHRpbmdzLFxuXHRDb250ZW50QmxvY2ssXG5cdENvbnRlbnRBbmNob3IsXG5cdFNjZW5lLFxuXHRCZWF0LFxuXHRDaGFwdGVyLFxuXHRTY2VuZVdpdGhCZWF0cyxcblx0U3RvcnksXG59IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgcGFyc2VIaWVyYXJjaGljYWxQcm9zZSwgcGFyc2VDaGFwdGVyUHJvc2UsIGNvbXBhcmVDb250ZW50QmxvY2tzLCBQYXJzZWRQYXJhZ3JhcGgsIENvbnRlbnRCbG9ja0NvbXBhcmlzb24sIEhpZXJhcmNoaWNhbFByb3NlLCBwYXJzZVNjZW5lQmVhdExpc3QsIFBhcnNlZFNjZW5lQmVhdExpc3RJdGVtLCBwYXJzZUNoYXB0ZXJMaXN0LCBQYXJzZWRDaGFwdGVyTGlzdEl0ZW0sIFBhcnNlZENoYXB0ZXJMaXN0LCBwYXJzZUJlYXRMaXN0LCBQYXJzZWRCZWF0TGlzdCwgUGFyc2VkQmVhdExpc3RJdGVtLCBwYXJzZU9ycGhhblNjZW5lc0xpc3QsIHBhcnNlT3JwaGFuQmVhdHNMaXN0LCBwYXJzZVN0b3J5UHJvc2UsIHBhcnNlU2NlbmVQcm9zZSwgcGFyc2VCZWF0UHJvc2UgfSBmcm9tIFwiLi9jb250ZW50QmxvY2tQYXJzZXJcIjtcbmltcG9ydCB7IENvbmZsaWN0TW9kYWwsIENvbmZsaWN0UmVzb2x1dGlvblJlc3VsdCB9IGZyb20gXCIuLi92aWV3cy9tb2RhbHMvQ29uZmxpY3RNb2RhbFwiO1xuaW1wb3J0IHsgU3luY0VudGl0eVBheWxvYWQsIFN5bmNFbnRpdHlUYXJnZXQgfSBmcm9tIFwiLi9lbnRpdHlTeW5jVHlwZXNcIjtcbmltcG9ydCB7IGFwaVVwZGF0ZU5vdGlmaWVyIH0gZnJvbSBcIi4vYXBpVXBkYXRlTm90aWZpZXJcIjtcblxuZXhwb3J0IGNsYXNzIFN5bmNTZXJ2aWNlIHtcblx0cHJpdmF0ZSB1bnN1YnNjcmliZUZyb21Ob3RpZmllcj86ICgpID0+IHZvaWQ7XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSBhcGlDbGllbnQ6IFN0b3J5RW5naW5lQ2xpZW50LFxuXHRcdHByaXZhdGUgZmlsZU1hbmFnZXI6IEZpbGVNYW5hZ2VyLFxuXHRcdHByaXZhdGUgc2V0dGluZ3M6IFN0b3J5RW5naW5lU2V0dGluZ3MsXG5cdFx0cHJpdmF0ZSBhcHA6IEFwcFxuXHQpIHtcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5hdXRvU3luY09uQXBpVXBkYXRlcykge1xuXHRcdFx0dGhpcy51bnN1YnNjcmliZUZyb21Ob3RpZmllciA9IGFwaVVwZGF0ZU5vdGlmaWVyLnN1YnNjcmliZShhc3luYyAocGF5bG9hZCkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwbHlFbnRpdHlEYXRhKHBheWxvYWQpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGF1dG8tc3luYyBlbnRpdHkgZGF0YVwiLCBlcnIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRkaXNwb3NlKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLnVuc3Vic2NyaWJlRnJvbU5vdGlmaWVyKSB7XG5cdFx0XHR0aGlzLnVuc3Vic2NyaWJlRnJvbU5vdGlmaWVyKCk7XG5cdFx0XHR0aGlzLnVuc3Vic2NyaWJlRnJvbU5vdGlmaWVyID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXG5cdC8vIFB1bGwgc3RvcnkgZnJvbSBzZXJ2aWNlIHRvIE9ic2lkaWFuIChTZXJ2aWNlIFx1MjE5MiBPYnNpZGlhbilcblx0YXN5bmMgcHVsbFN0b3J5KHN0b3J5SWQ6IHN0cmluZywgdGFyZ2V0PzogU3luY0VudGl0eVRhcmdldCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAodGFyZ2V0KSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucHVsbFNpbmdsZUVudGl0eShzdG9yeUlkLCB0YXJnZXQpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHN0b3J5RGF0YSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFN0b3J5V2l0aEhpZXJhcmNoeShzdG9yeUlkKTtcblx0XHRcdGNvbnN0IGZvbGRlclBhdGggPSB0aGlzLmZpbGVNYW5hZ2VyLmdldFN0b3J5Rm9sZGVyUGF0aChcblx0XHRcdFx0c3RvcnlEYXRhLnN0b3J5LnRpdGxlXG5cdFx0XHQpO1xuXG5cdFx0XHQvLyBJTVBPUlRBTlQ6IFJlYWQgZXhpc3RpbmcgbWV0YWRhdGEgQkVGT1JFIHdyaXRpbmcgdG8gZGV0ZWN0IHZlcnNpb24gY2hhbmdlc1xuXHRcdFx0Y29uc3QgZXhpc3RpbmdNZXRhZGF0YSA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXJcblx0XHRcdFx0LnJlYWRTdG9yeU1ldGFkYXRhKGZvbGRlclBhdGgpXG5cdFx0XHRcdC5jYXRjaCgoKSA9PiBudWxsKTtcblxuXHRcdFx0Ly8gRmV0Y2ggc2NlbmVzIGFuZCBiZWF0cyB3aXRob3V0IGNoYXB0ZXJfaWQgKG9ycGhhbnMpXG5cdFx0XHRjb25zdCBhbGxTY2VuZXMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRTY2VuZXNCeVN0b3J5KHN0b3J5SWQpO1xuXHRcdFx0Y29uc3Qgb3JwaGFuU2NlbmVzOiBTY2VuZVdpdGhCZWF0c1tdID0gW107XG5cdFx0XHRcblx0XHRcdGZvciAoY29uc3Qgc2NlbmUgb2YgYWxsU2NlbmVzKSB7XG5cdFx0XHRcdGlmICghc2NlbmUuY2hhcHRlcl9pZCkge1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0QmVhdHMoc2NlbmUuaWQpO1xuXHRcdFx0XHRcdG9ycGhhblNjZW5lcy5wdXNoKHsgc2NlbmUsIGJlYXRzIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIFNvcnQgb3JwaGFuIHNjZW5lcyBieSBvcmRlcl9udW1cblx0XHRcdG9ycGhhblNjZW5lcy5zb3J0KChhLCBiKSA9PiBhLnNjZW5lLm9yZGVyX251bSAtIGIuc2NlbmUub3JkZXJfbnVtKTtcblx0XHRcdFxuXHRcdFx0Ly8gRmV0Y2ggYmVhdHMgd2l0aG91dCBzY2VuZV9pZCAob3JwaGFuIGJlYXRzKVxuXHRcdFx0Y29uc3QgYWxsQmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0c0J5U3Rvcnkoc3RvcnlJZCk7XG5cdFx0XHRjb25zdCBvcnBoYW5CZWF0czogQmVhdFtdID0gW107XG5cdFx0XHRjb25zdCBzY2VuZUlkU2V0ID0gbmV3IFNldChhbGxTY2VuZXMubWFwKHMgPT4gcy5pZCkpO1xuXHRcdFx0XG5cdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYWxsQmVhdHMpIHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgYmVhdCdzIHNjZW5lX2lkIGRvZXNuJ3QgZXhpc3Qgb3IgaXMgaW52YWxpZFxuXHRcdFx0XHRpZiAoIWJlYXQuc2NlbmVfaWQgfHwgIXNjZW5lSWRTZXQuaGFzKGJlYXQuc2NlbmVfaWQpKSB7XG5cdFx0XHRcdFx0b3JwaGFuQmVhdHMucHVzaChiZWF0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBTb3J0IG9ycGhhbiBiZWF0cyBieSBvcmRlcl9udW1cblx0XHRcdG9ycGhhbkJlYXRzLnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pO1xuXHRcdFx0XG5cdFx0XHQvLyBGZXRjaCBwcm9zZSBibG9ja3MgZm9yIGFsbCBjaGFwdGVycyB0byBpbmNsdWRlIGluIHN0b3J5Lm1kXG5cdFx0XHRjb25zdCBjaGFwdGVyQ29udGVudERhdGEgPSBuZXcgTWFwPHN0cmluZywgeyBjb250ZW50QmxvY2tzOiBDb250ZW50QmxvY2tbXSwgY29udGVudEJsb2NrUmVmczogQ29udGVudEFuY2hvcltdIH0+KCk7XG5cdFx0XHRmb3IgKGNvbnN0IGNoYXB0ZXJXaXRoQ29udGVudCBvZiBzdG9yeURhdGEuY2hhcHRlcnMpIHtcblx0XHRcdFx0Y29uc3QgY29udGVudEJsb2NrcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRCbG9ja3MoY2hhcHRlcldpdGhDb250ZW50LmNoYXB0ZXIuaWQpO1xuXHRcdFx0XHRjb25zdCBjb250ZW50QmxvY2tSZWZzOiBDb250ZW50QW5jaG9yW10gPSBbXTtcblx0XHRcdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2YgY29udGVudEJsb2Nrcykge1xuXHRcdFx0XHRcdGNvbnN0IHJlZnMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QW5jaG9ycyhjb250ZW50QmxvY2suaWQpO1xuXHRcdFx0XHRcdGNvbnRlbnRCbG9ja1JlZnMucHVzaCguLi5yZWZzKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjaGFwdGVyQ29udGVudERhdGEuc2V0KGNoYXB0ZXJXaXRoQ29udGVudC5jaGFwdGVyLmlkLCB7IGNvbnRlbnRCbG9ja3MsIGNvbnRlbnRCbG9ja1JlZnMgfSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIFdyaXRlIHN0b3J5IG1ldGFkYXRhIHdpdGggY2hhcHRlcnMgbGlzdCwgb3JwaGFuIHNjZW5lcywgb3JwaGFuIGJlYXRzLCBhbmQgcHJvc2UgZGF0YVxuXHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZVN0b3J5TWV0YWRhdGEoXG5cdFx0XHRcdHN0b3J5RGF0YS5zdG9yeSxcblx0XHRcdFx0Zm9sZGVyUGF0aCxcblx0XHRcdFx0c3RvcnlEYXRhLmNoYXB0ZXJzLFxuXHRcdFx0XHRvcnBoYW5TY2VuZXMsXG5cdFx0XHRcdG9ycGhhbkJlYXRzLFxuXHRcdFx0XHRjaGFwdGVyQ29udGVudERhdGFcblx0XHRcdCk7XG5cblx0XHRcdC8vIEVuc3VyZSBjb250ZW50cyBmb2xkZXIgYW5kIHR5cGUgc3ViZm9sZGVycyBleGlzdFxuXHRcdFx0Y29uc3QgY29udGVudHNGb2xkZXJQYXRoID0gYCR7Zm9sZGVyUGF0aH0vMDMtY29udGVudHNgO1xuXHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHMoY29udGVudHNGb2xkZXJQYXRoKTtcblx0XHRcdC8vIENyZWF0ZSB0eXBlIHN1YmZvbGRlcnNcblx0XHRcdGZvciAoY29uc3QgdHlwZUZvbGRlciBvZiBbXCIwMC10ZXh0c1wiLCBcIjAxLWltYWdlc1wiLCBcIjAyLXZpZGVvc1wiLCBcIjAzLWF1ZGlvc1wiLCBcIjA0LWVtYmVkc1wiLCBcIjA1LWxpbmtzXCJdKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKGAke2NvbnRlbnRzRm9sZGVyUGF0aH0vJHt0eXBlRm9sZGVyfWApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBFbnN1cmUgY2hhcHRlcnMgZm9sZGVyIGV4aXN0c1xuXHRcdFx0Y29uc3QgY2hhcHRlcnNGb2xkZXJQYXRoID0gYCR7Zm9sZGVyUGF0aH0vMDAtY2hhcHRlcnNgO1xuXHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHMoY2hhcHRlcnNGb2xkZXJQYXRoKTtcblxuXHRcdFx0Ly8gV3JpdGUgY2hhcHRlciBmaWxlcyB3aXRoIGNvbnRlbnQgYmxvY2tzXG5cdFx0XHRmb3IgKGNvbnN0IGNoYXB0ZXJXaXRoQ29udGVudCBvZiBzdG9yeURhdGEuY2hhcHRlcnMpIHtcblx0XHRcdFx0Ly8gR2V0IGNvbnRlbnQgYmxvY2tzIGZyb20gdGhlIGFscmVhZHkgZmV0Y2hlZCBkYXRhXG5cdFx0XHRcdGNvbnN0IGNvbnRlbnREYXRhID0gY2hhcHRlckNvbnRlbnREYXRhLmdldChjaGFwdGVyV2l0aENvbnRlbnQuY2hhcHRlci5pZCk7XG5cdFx0XHRcdGNvbnN0IGNvbnRlbnRCbG9ja3MgPSBjb250ZW50RGF0YT8uY29udGVudEJsb2NrcyB8fCBbXTtcblx0XHRcdFx0Y29uc3QgY29udGVudEJsb2NrUmVmcyA9IGNvbnRlbnREYXRhPy5jb250ZW50QmxvY2tSZWZzIHx8IFtdO1xuXG5cdFx0XHRcdC8vIFdyaXRlIGNvbnRlbnQgYmxvY2sgZmlsZXMgdG8gdGhlaXIgdHlwZS1zcGVjaWZpYyBzdWJmb2xkZXJzXG5cdFx0XHRcdGZvciAoY29uc3QgY29udGVudEJsb2NrIG9mIGNvbnRlbnRCbG9ja3MpIHtcblx0XHRcdFx0XHRjb25zdCBjb250ZW50QmxvY2tGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShjb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdGNvbnN0IHR5cGVGb2xkZXJQYXRoID0gdGhpcy5maWxlTWFuYWdlci5nZXRDb250ZW50QmxvY2tGb2xkZXJQYXRoKGZvbGRlclBhdGgsIGNvbnRlbnRCbG9jay50eXBlIHx8IFwidGV4dFwiKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyh0eXBlRm9sZGVyUGF0aCk7XG5cdFx0XHRcdFx0Y29uc3QgY29udGVudEJsb2NrRmlsZVBhdGggPSBgJHt0eXBlRm9sZGVyUGF0aH0vJHtjb250ZW50QmxvY2tGaWxlTmFtZX1gO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKFxuXHRcdFx0XHRcdFx0Y29udGVudEJsb2NrLFxuXHRcdFx0XHRcdFx0Y29udGVudEJsb2NrRmlsZVBhdGgsXG5cdFx0XHRcdFx0XHRzdG9yeURhdGEuc3RvcnkudGl0bGVcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gV3JpdGUgY2hhcHRlciBmaWxlIHdpdGggaGllcmFyY2hpY2FsIHByb3NlIHN0cnVjdHVyZVxuXHRcdFx0XHRjb25zdCBjaGFwdGVyRmlsZU5hbWUgPSBgQ2hhcHRlci0ke2NoYXB0ZXJXaXRoQ29udGVudC5jaGFwdGVyLm51bWJlcn0ubWRgO1xuXHRcdFx0XHRjb25zdCBjaGFwdGVyRmlsZVBhdGggPSBgJHtjaGFwdGVyc0ZvbGRlclBhdGh9LyR7Y2hhcHRlckZpbGVOYW1lfWA7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDaGFwdGVyRmlsZShcblx0XHRcdFx0XHRjaGFwdGVyV2l0aENvbnRlbnQsXG5cdFx0XHRcdFx0Y2hhcHRlckZpbGVQYXRoLFxuXHRcdFx0XHRcdHN0b3J5RGF0YS5zdG9yeS50aXRsZSxcblx0XHRcdFx0XHRjb250ZW50QmxvY2tzLFxuXHRcdFx0XHRcdGNvbnRlbnRCbG9ja1JlZnMsXG5cdFx0XHRcdFx0b3JwaGFuU2NlbmVzIC8vIEluY2x1ZGUgb3JwaGFuIHNjZW5lcyBmb3IgZWFzeSBhc3NvY2lhdGlvblxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdC8vIFdyaXRlIHNjZW5lIGZpbGVzIHdpdGggcHJvc2UgYmxvY2sgcmVmZXJlbmNlcyAoZmxhdCBzdHJ1Y3R1cmUpXG5cdFx0XHRcdGNvbnN0IHNjZW5lc0ZvbGRlclBhdGggPSBgJHtmb2xkZXJQYXRofS8wMS1zY2VuZXNgO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyhzY2VuZXNGb2xkZXJQYXRoKTtcblx0XHRcdFx0XG5cdFx0XHRcdGZvciAoY29uc3QgeyBzY2VuZSwgYmVhdHMgfSBvZiBjaGFwdGVyV2l0aENvbnRlbnQuc2NlbmVzKSB7XG5cdFx0XHRcdFx0Ly8gRmV0Y2ggcHJvc2UgYmxvY2tzIHJlZmVyZW5jZWQgYnkgdGhpcyBzY2VuZVxuXHRcdFx0XHRcdGNvbnN0IHNjZW5lQ29udGVudEJsb2NrcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRCbG9ja3NCeVNjZW5lKHNjZW5lLmlkKTtcblxuXHRcdFx0XHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVGaWxlUGF0aCA9IGAke3NjZW5lc0ZvbGRlclBhdGh9LyR7c2NlbmVGaWxlTmFtZX1gO1xuXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZVNjZW5lRmlsZShcblx0XHRcdFx0XHRcdHsgc2NlbmUsIGJlYXRzIH0sXG5cdFx0XHRcdFx0XHRzY2VuZUZpbGVQYXRoLFxuXHRcdFx0XHRcdFx0c3RvcnlEYXRhLnN0b3J5LnRpdGxlLFxuXHRcdFx0XHRcdFx0c2NlbmVDb250ZW50QmxvY2tzLFxuXHRcdFx0XHRcdFx0b3JwaGFuQmVhdHMgLy8gSW5jbHVkZSBvcnBoYW4gYmVhdHMgZm9yIGVhc3kgYXNzb2NpYXRpb25cblx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0Ly8gV3JpdGUgYmVhdCBmaWxlcyB3aXRoIHByb3NlIGJsb2NrIHJlZmVyZW5jZXMgKGZsYXQgc3RydWN0dXJlKVxuXHRcdFx0XHRcdGNvbnN0IGJlYXRzRm9sZGVyUGF0aCA9IGAke2ZvbGRlclBhdGh9LzAyLWJlYXRzYDtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyhiZWF0c0ZvbGRlclBhdGgpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBiZWF0cykge1xuXHRcdFx0XHRcdFx0Y29uc3QgYmVhdENvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzQnlCZWF0KGJlYXQuaWQpO1xuXHRcdFx0XHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlUGF0aCA9IGAke2JlYXRzRm9sZGVyUGF0aH0vJHtiZWF0RmlsZU5hbWV9YDtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVCZWF0RmlsZShiZWF0LCBiZWF0RmlsZVBhdGgsIHN0b3J5RGF0YS5zdG9yeS50aXRsZSwgYmVhdENvbnRlbnRCbG9ja3MpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBXcml0ZSBvcnBoYW4gc2NlbmUgZmlsZXMgKHNjZW5lcyB3aXRob3V0IGNoYXB0ZXJfaWQpXG5cdFx0XHRjb25zdCBzY2VuZXNGb2xkZXJQYXRoID0gYCR7Zm9sZGVyUGF0aH0vMDEtc2NlbmVzYDtcblx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKHNjZW5lc0ZvbGRlclBhdGgpO1xuXHRcdFx0XG5cdFx0XHRmb3IgKGNvbnN0IHsgc2NlbmUsIGJlYXRzIH0gb2Ygb3JwaGFuU2NlbmVzKSB7XG5cdFx0XHRcdC8vIEZldGNoIHByb3NlIGJsb2NrcyByZWZlcmVuY2VkIGJ5IHRoaXMgc2NlbmVcblx0XHRcdFx0Y29uc3Qgc2NlbmVDb250ZW50QmxvY2tzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrc0J5U2NlbmUoc2NlbmUuaWQpO1xuXG5cdFx0XHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0XHRcdGNvbnN0IHNjZW5lRmlsZVBhdGggPSBgJHtzY2VuZXNGb2xkZXJQYXRofS8ke3NjZW5lRmlsZU5hbWV9YDtcblxuXHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlU2NlbmVGaWxlKFxuXHRcdFx0XHRcdHsgc2NlbmUsIGJlYXRzIH0sXG5cdFx0XHRcdFx0c2NlbmVGaWxlUGF0aCxcblx0XHRcdFx0XHRzdG9yeURhdGEuc3RvcnkudGl0bGUsXG5cdFx0XHRcdFx0c2NlbmVDb250ZW50QmxvY2tzLFxuXHRcdFx0XHRcdG9ycGhhbkJlYXRzIC8vIEluY2x1ZGUgb3JwaGFuIGJlYXRzIGZvciBlYXN5IGFzc29jaWF0aW9uXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0Ly8gV3JpdGUgYmVhdCBmaWxlcyB3aXRoIHByb3NlIGJsb2NrIHJlZmVyZW5jZXMgKGZsYXQgc3RydWN0dXJlKVxuXHRcdFx0XHRjb25zdCBiZWF0c0ZvbGRlclBhdGggPSBgJHtmb2xkZXJQYXRofS8wMi1iZWF0c2A7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKGJlYXRzRm9sZGVyUGF0aCk7XG5cdFx0XHRcdFxuXHRcdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0XHRjb25zdCBiZWF0Q29udGVudEJsb2NrcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRCbG9ja3NCeUJlYXQoYmVhdC5pZCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZVBhdGggPSBgJHtiZWF0c0ZvbGRlclBhdGh9LyR7YmVhdEZpbGVOYW1lfWA7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUJlYXRGaWxlKGJlYXQsIGJlYXRGaWxlUGF0aCwgc3RvcnlEYXRhLnN0b3J5LnRpdGxlLCBiZWF0Q29udGVudEJsb2Nrcyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gV3JpdGUgb3JwaGFuIGJlYXQgZmlsZXMgKGJlYXRzIHdpdGhvdXQgc2NlbmVfaWQpXG5cdFx0XHRjb25zdCBiZWF0c0ZvbGRlclBhdGggPSBgJHtmb2xkZXJQYXRofS8wMi1iZWF0c2A7XG5cdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyhiZWF0c0ZvbGRlclBhdGgpO1xuXHRcdFx0XG5cdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2Ygb3JwaGFuQmVhdHMpIHtcblx0XHRcdFx0Y29uc3QgYmVhdENvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzQnlCZWF0KGJlYXQuaWQpO1xuXHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRjb25zdCBiZWF0RmlsZVBhdGggPSBgJHtiZWF0c0ZvbGRlclBhdGh9LyR7YmVhdEZpbGVOYW1lfWA7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVCZWF0RmlsZShiZWF0LCBiZWF0RmlsZVBhdGgsIHN0b3J5RGF0YS5zdG9yeS50aXRsZSwgYmVhdENvbnRlbnRCbG9ja3MpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDaGVjayBpZiB2ZXJzaW9uIGNoYW5nZWQgYW5kIGNyZWF0ZSBzbmFwc2hvdCBpZiBuZWVkZWQgKGV4aXN0aW5nTWV0YWRhdGEgd2FzIHJlYWQgQkVGT1JFIHdyaXRpbmcpXG5cdFx0XHRpZiAoXG5cdFx0XHRcdGV4aXN0aW5nTWV0YWRhdGEgJiZcblx0XHRcdFx0ZXhpc3RpbmdNZXRhZGF0YS5mcm9udG1hdHRlci52ZXJzaW9uICE9PSB1bmRlZmluZWQgJiZcblx0XHRcdFx0ZXhpc3RpbmdNZXRhZGF0YS5mcm9udG1hdHRlci52ZXJzaW9uICE9PSBzdG9yeURhdGEuc3RvcnkudmVyc2lvbl9udW1iZXJcblx0XHRcdCkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmNyZWF0ZVZlcnNpb25TbmFwc2hvdChcblx0XHRcdFx0XHRmb2xkZXJQYXRoLFxuXHRcdFx0XHRcdGV4aXN0aW5nTWV0YWRhdGEuZnJvbnRtYXR0ZXIudmVyc2lvblxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTeW5jIGFsbCBwcmV2aW91cyB2ZXJzaW9ucyB0byB0aGUgdmVyc2lvbnMgZm9sZGVyXG5cdFx0XHRhd2FpdCB0aGlzLnN5bmNWZXJzaW9uSGlzdG9yeShzdG9yeURhdGEuc3Rvcnkucm9vdF9zdG9yeV9pZCwgZm9sZGVyUGF0aCk7XG5cblx0XHRcdG5ldyBOb3RpY2UoYFN0b3J5IFwiJHtzdG9yeURhdGEuc3RvcnkudGl0bGV9XCIgc3luY2VkIHN1Y2Nlc3NmdWxseWApO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID1cblx0XHRcdFx0ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIHN5bmMgc3RvcnlcIjtcblx0XHRcdG5ldyBOb3RpY2UoYEVycm9yIHN5bmNpbmcgc3Rvcnk6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0dGhyb3cgZXJyO1xuXHRcdH1cblx0fVxuXG5cdC8vIFN5bmMgYWxsIHByZXZpb3VzIHZlcnNpb25zIG9mIGEgc3Rvcnlcblx0cHJpdmF0ZSBhc3luYyBzeW5jVmVyc2lvbkhpc3RvcnkoXG5cdFx0cm9vdFN0b3J5SWQ6IHN0cmluZyxcblx0XHRzdG9yeUZvbGRlclBhdGg6IHN0cmluZ1xuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0cnkge1xuXHRcdFx0Ly8gR2V0IEFMTCBzdG9yaWVzIGFuZCBmaWx0ZXIgYnkgcm9vdF9zdG9yeV9pZFxuXHRcdFx0Y29uc3QgYWxsU3RvcmllcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50Lmxpc3RTdG9yaWVzKCk7XG5cdFx0XHRjb25zdCB2ZXJzaW9ucyA9IGFsbFN0b3JpZXMuZmlsdGVyKHMgPT4gcy5yb290X3N0b3J5X2lkID09PSByb290U3RvcnlJZCk7XG5cblx0XHRcdC8vIFNvcnQgYnkgdmVyc2lvbiBudW1iZXJcblx0XHRcdHZlcnNpb25zLnNvcnQoKGEsIGIpID0+IGEudmVyc2lvbl9udW1iZXIgLSBiLnZlcnNpb25fbnVtYmVyKTtcblxuXHRcdFx0Y29uc3QgdmVyc2lvbnNQYXRoID0gYCR7c3RvcnlGb2xkZXJQYXRofS92ZXJzaW9uc2A7XG5cdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyh2ZXJzaW9uc1BhdGgpO1xuXG5cdFx0XHQvLyBGb3IgZWFjaCB2ZXJzaW9uIChleGNlcHQgdGhlIGN1cnJlbnQgb25lKSwgZmV0Y2ggYW5kIHN0b3JlXG5cdFx0XHRmb3IgKGNvbnN0IHZlcnNpb25TdG9yeSBvZiB2ZXJzaW9ucykge1xuXHRcdFx0XHQvLyBTa2lwIHRoZSBjdXJyZW50IHZlcnNpb24gKGl0J3MgYWxyZWFkeSBpbiB0aGUgcm9vdCBmb2xkZXIpXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRWZXJzaW9uID0gdmVyc2lvbnNbdmVyc2lvbnMubGVuZ3RoIC0gMV0udmVyc2lvbl9udW1iZXI7XG5cdFx0XHRcdGlmICh2ZXJzaW9uU3RvcnkudmVyc2lvbl9udW1iZXIgPT09IGN1cnJlbnRWZXJzaW9uKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCB2ZXJzaW9uRm9sZGVyUGF0aCA9IGAke3ZlcnNpb25zUGF0aH0vdiR7dmVyc2lvblN0b3J5LnZlcnNpb25fbnVtYmVyfWA7XG5cblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyB2ZXJzaW9uIGFscmVhZHkgZXhpc3RzXG5cdFx0XHRcdC8vIChXZSB3b24ndCBvdmVyd3JpdGUgZXhpc3RpbmcgdmVyc2lvbnMgdG8gcHJlc2VydmUgbG9jYWwgZWRpdHMpXG5cdFx0XHRcdGNvbnN0IGV4aXN0aW5nVmVyc2lvbkZvbGRlciA9IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXG5cdFx0XHRcdFx0dmVyc2lvbkZvbGRlclBhdGhcblx0XHRcdFx0KTtcblx0XHRcdFx0aWYgKGV4aXN0aW5nVmVyc2lvbkZvbGRlcikge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGBWZXJzaW9uIHYke3ZlcnNpb25TdG9yeS52ZXJzaW9uX251bWJlcn0gYWxyZWFkeSBleGlzdHMsIHNraXBwaW5nYCk7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBGZXRjaCBmdWxsIHZlcnNpb24gZGF0YVxuXHRcdFx0XHRjb25zdCB2ZXJzaW9uRGF0YSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFN0b3J5V2l0aEhpZXJhcmNoeShcblx0XHRcdFx0XHR2ZXJzaW9uU3RvcnkuaWRcblx0XHRcdFx0KTtcblxuXHRcdFx0XHQvLyBDcmVhdGUgdmVyc2lvbiBmb2xkZXJcblx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHModmVyc2lvbkZvbGRlclBhdGgpO1xuXG5cdFx0XHRcdC8vIFdyaXRlIHZlcnNpb24gbWV0YWRhdGFcblx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZVN0b3J5TWV0YWRhdGEoXG5cdFx0XHRcdFx0dmVyc2lvbkRhdGEuc3RvcnksXG5cdFx0XHRcdFx0dmVyc2lvbkZvbGRlclBhdGhcblx0XHRcdFx0KTtcblxuXHRcdFx0XHQvLyBFbnN1cmUgY29udGVudHMgZm9sZGVyIGFuZCB0eXBlIHN1YmZvbGRlcnMgZXhpc3QgZm9yIHZlcnNpb25cblx0XHRcdFx0Y29uc3QgdmVyc2lvbkNvbnRlbnRzRm9sZGVyUGF0aCA9IGAke3ZlcnNpb25Gb2xkZXJQYXRofS8wMy1jb250ZW50c2A7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKHZlcnNpb25Db250ZW50c0ZvbGRlclBhdGgpO1xuXHRcdFx0XHRmb3IgKGNvbnN0IHR5cGVGb2xkZXIgb2YgW1wiMDAtdGV4dHNcIiwgXCIwMS1pbWFnZXNcIiwgXCIwMi12aWRlb3NcIiwgXCIwMy1hdWRpb3NcIiwgXCIwNC1lbWJlZHNcIiwgXCIwNS1saW5rc1wiXSkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKGAke3ZlcnNpb25Db250ZW50c0ZvbGRlclBhdGh9LyR7dHlwZUZvbGRlcn1gKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFdyaXRlIHZlcnNpb24gY2hhcHRlcnNcblx0XHRcdFx0Y29uc3QgdmVyc2lvbkNoYXB0ZXJzUGF0aCA9IGAke3ZlcnNpb25Gb2xkZXJQYXRofS8wMC1jaGFwdGVyc2A7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKHZlcnNpb25DaGFwdGVyc1BhdGgpO1xuXG5cdFx0XHRcdGZvciAoY29uc3QgY2hhcHRlcldpdGhDb250ZW50IG9mIHZlcnNpb25EYXRhLmNoYXB0ZXJzKSB7XG5cdFx0XHRcdFx0Ly8gRmV0Y2ggcHJvc2UgYmxvY2tzIGZvciB0aGlzIGNoYXB0ZXJcblx0XHRcdFx0XHRjb25zdCBjb250ZW50QmxvY2tzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2NrcyhjaGFwdGVyV2l0aENvbnRlbnQuY2hhcHRlci5pZCk7XG5cblx0XHRcdFx0XHQvLyBGZXRjaCBwcm9zZSBibG9jayByZWZlcmVuY2VzIGZvciBhbGwgcHJvc2UgYmxvY2tzXG5cdFx0XHRcdFx0Y29uc3QgY29udGVudEJsb2NrUmVmczogQ29udGVudEFuY2hvcltdID0gW107XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2YgY29udGVudEJsb2Nrcykge1xuXHRcdFx0XHRcdFx0Y29uc3QgcmVmcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRBbmNob3JzKGNvbnRlbnRCbG9jay5pZCk7XG5cdFx0XHRcdFx0XHRjb250ZW50QmxvY2tSZWZzLnB1c2goLi4ucmVmcyk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gV3JpdGUgcHJvc2UgYmxvY2sgZmlsZXNcblx0XHRcdFx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBjb250ZW50QmxvY2tzKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBjb250ZW50QmxvY2tGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShjb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0Y29uc3QgdHlwZUZvbGRlclBhdGggPSB0aGlzLmZpbGVNYW5hZ2VyLmdldENvbnRlbnRCbG9ja0ZvbGRlclBhdGgodmVyc2lvbkZvbGRlclBhdGgsIGNvbnRlbnRCbG9jay50eXBlIHx8IFwidGV4dFwiKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKHR5cGVGb2xkZXJQYXRoKTtcblx0XHRcdFx0XHRcdGNvbnN0IGNvbnRlbnRCbG9ja0ZpbGVQYXRoID0gYCR7dHlwZUZvbGRlclBhdGh9LyR7Y29udGVudEJsb2NrRmlsZU5hbWV9YDtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKFxuXHRcdFx0XHRcdFx0XHRjb250ZW50QmxvY2ssXG5cdFx0XHRcdFx0XHRcdGNvbnRlbnRCbG9ja0ZpbGVQYXRoLFxuXHRcdFx0XHRcdFx0XHR2ZXJzaW9uRGF0YS5zdG9yeS50aXRsZVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjb25zdCBjaGFwdGVyRmlsZU5hbWUgPSBgQ2hhcHRlci0ke2NoYXB0ZXJXaXRoQ29udGVudC5jaGFwdGVyLm51bWJlcn0ubWRgO1xuXHRcdFx0XHRcdGNvbnN0IGNoYXB0ZXJGaWxlUGF0aCA9IGAke3ZlcnNpb25DaGFwdGVyc1BhdGh9LyR7Y2hhcHRlckZpbGVOYW1lfWA7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNoYXB0ZXJGaWxlKFxuXHRcdFx0XHRcdFx0Y2hhcHRlcldpdGhDb250ZW50LFxuXHRcdFx0XHRcdFx0Y2hhcHRlckZpbGVQYXRoLFxuXHRcdFx0XHRcdFx0dmVyc2lvbkRhdGEuc3RvcnkudGl0bGUsXG5cdFx0XHRcdFx0XHRjb250ZW50QmxvY2tzLFxuXHRcdFx0XHRcdFx0Y29udGVudEJsb2NrUmVmc1xuXHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHQvLyBXcml0ZSBzY2VuZSBmaWxlcyAoZmxhdCBzdHJ1Y3R1cmUpXG5cdFx0XHRcdFx0Y29uc3QgdmVyc2lvblNjZW5lc1BhdGggPSBgJHt2ZXJzaW9uRm9sZGVyUGF0aH0vMDEtc2NlbmVzYDtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyh2ZXJzaW9uU2NlbmVzUGF0aCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Zm9yIChjb25zdCB7IHNjZW5lLCBiZWF0cyB9IG9mIGNoYXB0ZXJXaXRoQ29udGVudC5zY2VuZXMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHNjZW5lQ29udGVudEJsb2NrcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRCbG9ja3NCeVNjZW5lKHNjZW5lLmlkKTtcblx0XHRcdFx0XHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0XHRcdFx0XHRjb25zdCBzY2VuZUZpbGVQYXRoID0gYCR7dmVyc2lvblNjZW5lc1BhdGh9LyR7c2NlbmVGaWxlTmFtZX1gO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZVNjZW5lRmlsZShcblx0XHRcdFx0XHRcdFx0eyBzY2VuZSwgYmVhdHMgfSxcblx0XHRcdFx0XHRcdFx0c2NlbmVGaWxlUGF0aCxcblx0XHRcdFx0XHRcdFx0dmVyc2lvbkRhdGEuc3RvcnkudGl0bGUsXG5cdFx0XHRcdFx0XHRcdHNjZW5lQ29udGVudEJsb2Nrc1xuXHRcdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdFx0Ly8gV3JpdGUgYmVhdCBmaWxlcyAoZmxhdCBzdHJ1Y3R1cmUpXG5cdFx0XHRcdFx0XHRjb25zdCB2ZXJzaW9uQmVhdHNQYXRoID0gYCR7dmVyc2lvbkZvbGRlclBhdGh9LzAyLWJlYXRzYDtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKHZlcnNpb25CZWF0c1BhdGgpO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgYmVhdENvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzQnlCZWF0KGJlYXQuaWQpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZVBhdGggPSBgJHt2ZXJzaW9uQmVhdHNQYXRofS8ke2JlYXRGaWxlTmFtZX1gO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQmVhdEZpbGUoYmVhdCwgYmVhdEZpbGVQYXRoLCB2ZXJzaW9uRGF0YS5zdG9yeS50aXRsZSwgYmVhdENvbnRlbnRCbG9ja3MpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnNvbGUubG9nKGBTeW5jZWQgdmVyc2lvbiB2JHt2ZXJzaW9uU3RvcnkudmVyc2lvbl9udW1iZXJ9YCk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3Igc3luY2luZyB2ZXJzaW9uIGhpc3Rvcnk6XCIsIGVycik7XG5cdFx0XHQvLyBEb24ndCB0aHJvdyAtIHZlcnNpb24gc3luYyBpcyBvcHRpb25hbFxuXHRcdH1cblx0fVxuXG5cdC8vIFB1bGwgYWxsIHN0b3JpZXNcblx0YXN5bmMgcHVsbEFsbFN0b3JpZXMoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Ly8gT25seSB2YWxpZGF0ZSB0ZW5hbnQgSUQgaW4gcmVtb3RlIG1vZGVcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5tb2RlID09PSBcInJlbW90ZVwiICYmICF0aGlzLnNldHRpbmdzLnRlbmFudElkKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJUZW5hbnQgSUQgaXMgcmVxdWlyZWRcIik7XG5cdFx0fVxuXG5cdFx0Ly8gUHVsbCB3b3JsZHMgKGZvciBkaXNwbGF5L21ldGFkYXRhKVxuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRXb3JsZHMoKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gbG9hZCB3b3JsZHM6XCIsIGVycik7XG5cdFx0XHQvLyBEb24ndCBmYWlsIHRoZSBlbnRpcmUgc3luYyBpZiB3b3JsZHMgZmFpbFxuXHRcdH1cblxuXHRcdGNvbnN0IHN0b3JpZXMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5saXN0U3RvcmllcygpO1xuXG5cdFx0Zm9yIChjb25zdCBzdG9yeSBvZiBzdG9yaWVzKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnB1bGxTdG9yeShzdG9yeS5pZCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHN5bmMgc3RvcnkgJHtzdG9yeS5pZH06YCwgZXJyKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRuZXcgTm90aWNlKGBTeW5jZWQgJHtzdG9yaWVzLmxlbmd0aH0gc3Rvcmllc2ApO1xuXHR9XG5cblx0Ly8gQXBwbHkgZW50aXR5IGRhdGEgcmVjZWl2ZWQgZnJvbSBBUEkgd2l0aG91dCBmZXRjaGluZ1xuXHRhc3luYyBhcHBseUVudGl0eURhdGEocGF5bG9hZDogU3luY0VudGl0eVBheWxvYWQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRzd2l0Y2ggKHBheWxvYWQudHlwZSkge1xuXHRcdFx0Y2FzZSBcImNoYXB0ZXJcIjoge1xuXHRcdFx0XHRhd2FpdCB0aGlzLndyaXRlQ2hhcHRlckJ1bmRsZSh7XG5cdFx0XHRcdFx0c3Rvcnk6IHBheWxvYWQuc3RvcnksXG5cdFx0XHRcdFx0Y2hhcHRlcjogcGF5bG9hZC5jaGFwdGVyLFxuXHRcdFx0XHRcdHNjZW5lczogcGF5bG9hZC5zY2VuZXMsXG5cdFx0XHRcdFx0Y29udGVudEJsb2NrczogcGF5bG9hZC5jb250ZW50QmxvY2tzLFxuXHRcdFx0XHRcdGNvbnRlbnRCbG9ja1JlZnM6IHBheWxvYWQuY29udGVudEJsb2NrUmVmcyxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYENoYXB0ZXIgXCIke3BheWxvYWQuY2hhcHRlci50aXRsZX1cIiBzeW5jZWQgc3VjY2Vzc2Z1bGx5YCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0Y2FzZSBcInNjZW5lXCI6IHtcblx0XHRcdFx0Y29uc3QgYmVhdENvbnRlbnRCbG9ja01hcCA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2tbXT4oKTtcblx0XHRcdFx0aWYgKHBheWxvYWQuYmVhdENvbnRlbnRCbG9ja3MpIHtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IFtiZWF0SWQsIGJsb2Nrc10gb2YgT2JqZWN0LmVudHJpZXMocGF5bG9hZC5iZWF0Q29udGVudEJsb2NrcykpIHtcblx0XHRcdFx0XHRcdGJlYXRDb250ZW50QmxvY2tNYXAuc2V0KGJlYXRJZCwgYmxvY2tzKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBmb2xkZXJQYXRoID0gdGhpcy5maWxlTWFuYWdlci5nZXRTdG9yeUZvbGRlclBhdGgocGF5bG9hZC5zdG9yeS50aXRsZSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZW5zdXJlU3RvcnlGb2xkZXJzKGZvbGRlclBhdGgpO1xuXG5cdFx0XHRcdGF3YWl0IHRoaXMud3JpdGVTY2VuZUJ1bmRsZSh7XG5cdFx0XHRcdFx0c3RvcnlUaXRsZTogcGF5bG9hZC5zdG9yeS50aXRsZSxcblx0XHRcdFx0XHRmb2xkZXJQYXRoLFxuXHRcdFx0XHRcdHNjZW5lOiBwYXlsb2FkLnNjZW5lLFxuXHRcdFx0XHRcdGJlYXRzOiBwYXlsb2FkLmJlYXRzLFxuXHRcdFx0XHRcdHNjZW5lQ29udGVudEJsb2NrczogcGF5bG9hZC5zY2VuZUNvbnRlbnRCbG9ja3MsXG5cdFx0XHRcdFx0YmVhdENvbnRlbnRCbG9ja01hcCxcblx0XHRcdFx0XHRza2lwUmVtb3RlQ29udGVudEZldGNoOiB0cnVlLFxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRpZiAocGF5bG9hZC5zY2VuZUNvbnRlbnRCbG9ja3MpIHtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBwYXlsb2FkLnNjZW5lQ29udGVudEJsb2Nrcykge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy53cml0ZUNvbnRlbnRCbG9ja1RvRm9sZGVyKGZvbGRlclBhdGgsIHBheWxvYWQuc3RvcnkudGl0bGUsIGNvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Zm9yIChjb25zdCBibG9ja3Mgb2YgYmVhdENvbnRlbnRCbG9ja01hcC52YWx1ZXMoKSkge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgY29udGVudEJsb2NrIG9mIGJsb2Nrcykge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy53cml0ZUNvbnRlbnRCbG9ja1RvRm9sZGVyKGZvbGRlclBhdGgsIHBheWxvYWQuc3RvcnkudGl0bGUsIGNvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0bmV3IE5vdGljZShgU2NlbmUgXCIke3BheWxvYWQuc2NlbmUuZ29hbH1cIiBzeW5jZWQgc3VjY2Vzc2Z1bGx5YCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0Y2FzZSBcImNvbnRlbnRcIjoge1xuXHRcdFx0XHRjb25zdCBmb2xkZXJQYXRoID0gdGhpcy5maWxlTWFuYWdlci5nZXRTdG9yeUZvbGRlclBhdGgocGF5bG9hZC5zdG9yeS50aXRsZSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZW5zdXJlQ29udGVudEZvbGRlcnMoZm9sZGVyUGF0aCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMud3JpdGVDb250ZW50QmxvY2tUb0ZvbGRlcihcblx0XHRcdFx0XHRmb2xkZXJQYXRoLFxuXHRcdFx0XHRcdHBheWxvYWQuc3RvcnkudGl0bGUsXG5cdFx0XHRcdFx0cGF5bG9hZC5jb250ZW50QmxvY2tcblx0XHRcdFx0KTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkNvbnRlbnQgYmxvY2sgc3luY2VkIHN1Y2Nlc3NmdWxseVwiKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gUHVzaCBzdG9yeSBmcm9tIE9ic2lkaWFuIHRvIHNlcnZpY2UgKE9ic2lkaWFuIFx1MjE5MiBTZXJ2aWNlKVxuXHRhc3luYyBwdXNoU3RvcnkoZm9sZGVyUGF0aDogc3RyaW5nLCB0YXJnZXQ/OiBTeW5jRW50aXR5VGFyZ2V0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0dHJ5IHtcblx0XHRcdC8vIFJlYWQgc3RvcnkgbWV0YWRhdGFcblx0XHRcdGNvbnN0IHsgZnJvbnRtYXR0ZXI6IHN0b3J5RnJvbnRtYXR0ZXIgfSA9XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIucmVhZFN0b3J5TWV0YWRhdGEoZm9sZGVyUGF0aCk7XG5cblx0XHRcdGlmICghc3RvcnlGcm9udG1hdHRlci5pZCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJTdG9yeSBtZXRhZGF0YSBtaXNzaW5nIElEXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBzdG9yeUlkID0gc3RvcnlGcm9udG1hdHRlci5pZDtcblxuXHRcdFx0aWYgKHRhcmdldCkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnB1c2hTaW5nbGVFbnRpdHkoZm9sZGVyUGF0aCwgdGFyZ2V0LCBzdG9yeUlkLCBzdG9yeUZyb250bWF0dGVyLnRpdGxlKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZWFkIHN0b3J5IGZpbGUgdG8gcGFyc2UgY2hhcHRlciBsaXN0IGFuZCBvcnBoYW4gbGlzdHNcblx0XHRcdGNvbnN0IHN0b3J5RmlsZVBhdGggPSBgJHtmb2xkZXJQYXRofS9zdG9yeS5tZGA7XG5cdFx0XHRjb25zdCBzdG9yeUZpbGUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHN0b3J5RmlsZVBhdGgpO1xuXHRcdFx0aWYgKHN0b3J5RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRcdGNvbnN0IHN0b3J5Q29udGVudCA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5yZWFkKHN0b3J5RmlsZSk7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJMaXN0ID0gcGFyc2VDaGFwdGVyTGlzdChzdG9yeUNvbnRlbnQpO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gUHJvY2VzcyBjaGFwdGVyIGxpc3QgdG8gdXBkYXRlIG9yZGVyXG5cdFx0XHRcdGlmIChjaGFwdGVyTGlzdC5pdGVtcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wcm9jZXNzQ2hhcHRlckxpc3QoY2hhcHRlckxpc3QsIHN0b3J5SWQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBQYXJzZSBhbmQgcHJvY2VzcyBvcnBoYW4gc2NlbmVzIGxpc3Rcblx0XHRcdFx0Y29uc3Qgb3JwaGFuU2NlbmVzTGlzdCA9IHBhcnNlT3JwaGFuU2NlbmVzTGlzdChzdG9yeUNvbnRlbnQpO1xuXHRcdFx0XHRpZiAob3JwaGFuU2NlbmVzTGlzdC5pdGVtcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wcm9jZXNzT3JwaGFuU2NlbmVzTGlzdChvcnBoYW5TY2VuZXNMaXN0LCBzdG9yeUlkKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFBhcnNlIGFuZCBwcm9jZXNzIG9ycGhhbiBiZWF0cyBsaXN0XG5cdFx0XHRcdGNvbnN0IG9ycGhhbkJlYXRzTGlzdCA9IHBhcnNlT3JwaGFuQmVhdHNMaXN0KHN0b3J5Q29udGVudCk7XG5cdFx0XHRcdGlmIChvcnBoYW5CZWF0c0xpc3QuaXRlbXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucHJvY2Vzc09ycGhhbkJlYXRzTGlzdChvcnBoYW5CZWF0c0xpc3QsIHN0b3J5SWQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUGFyc2UgYW5kIHByb2Nlc3MgcHJvc2UgYmxvY2tzIGF0IHN0b3J5IGxldmVsXG5cdFx0XHRcdGNvbnN0IHN0b3J5UHJvc2UgPSBwYXJzZVN0b3J5UHJvc2Uoc3RvcnlDb250ZW50KTtcblx0XHRcdFx0aWYgKHN0b3J5UHJvc2Uuc2VjdGlvbnMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucHVzaFN0b3J5Q29udGVudEJsb2NrcyhzdG9yeUZpbGVQYXRoLCBmb2xkZXJQYXRoLCBzdG9yeUlkKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0Ly8gVXBkYXRlIHN0b3J5IG1ldGFkYXRhXG5cdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVTdG9yeShcblx0XHRcdFx0c3RvcnlJZCxcblx0XHRcdFx0c3RvcnlGcm9udG1hdHRlci50aXRsZSxcblx0XHRcdFx0c3RvcnlGcm9udG1hdHRlci5zdGF0dXNcblx0XHRcdCk7XG5cblx0XHRcdC8vIFJlYWQgYW5kIHVwZGF0ZSBjaGFwdGVyc1xuXHRcdFx0Y29uc3QgY2hhcHRlckZpbGVzID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlci5saXN0Q2hhcHRlckZpbGVzKGZvbGRlclBhdGgpO1xuXG5cdFx0XHRmb3IgKGNvbnN0IGNoYXB0ZXJGaWxlUGF0aCBvZiBjaGFwdGVyRmlsZXMpIHtcblx0XHRcdFx0Ly8gUGFyc2UgY2hhcHRlciBmaWxlIGFuZCB1cGRhdGUgdmlhIEFQSVxuXHRcdFx0XHQvLyAoVGhpcyB3b3VsZCByZXF1aXJlIGltcGxlbWVudGluZyBjaGFwdGVyIHVwZGF0ZSBsb2dpYylcblx0XHRcdFx0Y29uc29sZS5sb2coYFdvdWxkIHVwZGF0ZSBjaGFwdGVyOiAke2NoYXB0ZXJGaWxlUGF0aH1gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUHVzaCBwcm9zZSBibG9ja3MgZm9yIGVhY2ggY2hhcHRlclxuXHRcdFx0Zm9yIChjb25zdCBjaGFwdGVyRmlsZVBhdGggb2YgY2hhcHRlckZpbGVzKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucHVzaENoYXB0ZXJDb250ZW50QmxvY2tzKGNoYXB0ZXJGaWxlUGF0aCwgZm9sZGVyUGF0aCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFByb2Nlc3Mgc2NlbmUgZmlsZXMgdG8gdXBkYXRlIGJlYXQgbGlzdHMgYW5kIHByb3NlIGJsb2Nrc1xuXHRcdFx0Ly8gU2NlbmVzIGFyZSBzdG9yZWQgaW4gJHtmb2xkZXJQYXRofS8wMS1zY2VuZXMgKG5vdCBpbiBjaGFwdGVycy8wMS1zY2VuZXMpXG5cdFx0XHRjb25zdCBzY2VuZUZpbGVzID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlci5saXN0U3RvcnlTY2VuZUZpbGVzKGZvbGRlclBhdGgpO1xuXHRcdFx0XG5cdFx0XHRmb3IgKGNvbnN0IHNjZW5lRmlsZVBhdGggb2Ygc2NlbmVGaWxlcykge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnB1c2hTY2VuZUJlYXRzKHNjZW5lRmlsZVBhdGgsIHN0b3J5SWQpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnB1c2hTY2VuZUNvbnRlbnRCbG9ja3Moc2NlbmVGaWxlUGF0aCwgZm9sZGVyUGF0aCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFByb2Nlc3MgYmVhdCBmaWxlcyB0byB1cGRhdGUgcHJvc2UgYmxvY2tzXG5cdFx0XHQvLyBCZWF0cyBhcmUgc3RvcmVkIGluICR7Zm9sZGVyUGF0aH0vMDItYmVhdHNcblx0XHRcdGNvbnN0IGJlYXRGaWxlcyA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIubGlzdFN0b3J5QmVhdEZpbGVzKGZvbGRlclBhdGgpO1xuXHRcdFx0XG5cdFx0XHRmb3IgKGNvbnN0IGJlYXRGaWxlUGF0aCBvZiBiZWF0RmlsZXMpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wdXNoQmVhdENvbnRlbnRCbG9ja3MoYmVhdEZpbGVQYXRoLCBmb2xkZXJQYXRoKTtcblx0XHRcdH1cblxuXHRcdFx0bmV3IE5vdGljZShgU3RvcnkgXCIke3N0b3J5RnJvbnRtYXR0ZXIudGl0bGV9XCIgcHVzaGVkIHN1Y2Nlc3NmdWxseWApO1xuXG5cdFx0XHQvLyBQdWxsIHN0b3J5IGFmdGVyIHB1c2ggdG8gc3luYyBhbnkgc2VydmVyLXNpZGUgY2hhbmdlcyBhbmQgdXBkYXRlIGxvY2FsIGZpbGVzXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBTeW5jaW5nIHN0b3J5IFwiJHtzdG9yeUZyb250bWF0dGVyLnRpdGxlfVwiIGZyb20gc2VydmljZS4uLmApO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnB1bGxTdG9yeShzdG9yeUlkKTtcblx0XHRcdFx0bmV3IE5vdGljZShgU3RvcnkgXCIke3N0b3J5RnJvbnRtYXR0ZXIudGl0bGV9XCIgc3luY2VkIHN1Y2Nlc3NmdWxseWApO1xuXHRcdFx0fSBjYXRjaCAocHVsbEVycikge1xuXHRcdFx0XHRjb25zdCBwdWxsRXJyb3JNZXNzYWdlID1cblx0XHRcdFx0XHRwdWxsRXJyIGluc3RhbmNlb2YgRXJyb3IgPyBwdWxsRXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBzeW5jIHN0b3J5IGFmdGVyIHB1c2hcIjtcblx0XHRcdFx0bmV3IE5vdGljZShgV2FybmluZzogJHtwdWxsRXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0XHQvLyBEb24ndCB0aHJvdyAtIHB1c2ggd2FzIHN1Y2Nlc3NmdWwsIHN5bmMgZmFpbHVyZSBpcyBqdXN0IGEgd2FybmluZ1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID1cblx0XHRcdFx0ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIHB1c2ggc3RvcnlcIjtcblx0XHRcdG5ldyBOb3RpY2UoYEVycm9yIHB1c2hpbmcgc3Rvcnk6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0dGhyb3cgZXJyO1xuXHRcdH1cblx0fVxuXG5cdC8vIFB1c2ggcHJvc2UgYmxvY2tzIGZyb20gYSBjaGFwdGVyIGZpbGUgKGhpZXJhcmNoaWNhbCBzdHJ1Y3R1cmUpXG5cdGFzeW5jIHB1c2hDaGFwdGVyQ29udGVudEJsb2NrcyhjaGFwdGVyRmlsZVBhdGg6IHN0cmluZywgc3RvcnlGb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBSZWFkIGNoYXB0ZXIgZmlsZVxuXHRcdGNvbnN0IGZpbGUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGNoYXB0ZXJGaWxlUGF0aCk7XG5cdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBDaGFwdGVyIGZpbGUgbm90IGZvdW5kOiAke2NoYXB0ZXJGaWxlUGF0aH1gKTtcblx0XHR9XG5cblx0XHRjb25zdCBjaGFwdGVyQ29udGVudCA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5yZWFkKGZpbGUpO1xuXHRcdGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5maWxlTWFuYWdlci5wYXJzZUZyb250bWF0dGVyKGNoYXB0ZXJDb250ZW50KTtcblxuXHRcdGlmICghZnJvbnRtYXR0ZXIuaWQgfHwgIWZyb250bWF0dGVyLnN0b3J5X2lkKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDaGFwdGVyIG1ldGFkYXRhIG1pc3NpbmcgSUQgb3Igc3RvcnlfaWRcIik7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY2hhcHRlcklkID0gZnJvbnRtYXR0ZXIuaWQ7XG5cdFx0Y29uc3Qgc3RvcnlJZCA9IGZyb250bWF0dGVyLnN0b3J5X2lkO1xuXHRcdGNvbnN0IGNvbnRlbnRzRm9sZGVyUGF0aCA9IGAke3N0b3J5Rm9sZGVyUGF0aH0vMDMtY29udGVudHNgO1xuXG5cdFx0Ly8gUGFyc2UgYW5kIHByb2Nlc3MgdGhlIFwiIyMgU2NlbmVzICYgQmVhdHNcIiBsaXN0IGZpcnN0XG5cdFx0Y29uc3Qgc2NlbmVCZWF0TGlzdCA9IHBhcnNlU2NlbmVCZWF0TGlzdChjaGFwdGVyQ29udGVudCk7XG5cdFx0YXdhaXQgdGhpcy5wcm9jZXNzU2NlbmVCZWF0TGlzdChzY2VuZUJlYXRMaXN0LCBjaGFwdGVySWQsIHN0b3J5SWQpO1xuXG5cdFx0Ly8gR2V0IGFsbCBwcm9zZSBibG9ja3MgZnJvbSBBUEkgZm9yIHRoaXMgY2hhcHRlclxuXHRcdGNvbnN0IHJlbW90ZUNvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzKGNoYXB0ZXJJZCk7XG5cdFx0Y29uc3QgcmVtb3RlQ29udGVudEJsb2Nrc01hcCA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2s+KCk7XG5cdFx0Zm9yIChjb25zdCBwYiBvZiByZW1vdGVDb250ZW50QmxvY2tzKSB7XG5cdFx0XHRyZW1vdGVDb250ZW50QmxvY2tzTWFwLnNldChwYi5pZCwgcGIpO1xuXHRcdH1cblxuXHRcdC8vIEdldCBleGlzdGluZyBzY2VuZXMgYW5kIGJlYXRzIGZvciB0aGlzIGNoYXB0ZXIgKGFmdGVyIHByb2Nlc3NpbmcgbGlzdClcblx0XHRjb25zdCBleGlzdGluZ1NjZW5lcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFNjZW5lcyhjaGFwdGVySWQpO1xuXHRcdGNvbnN0IHNjZW5lTWFwID0gbmV3IE1hcDxzdHJpbmcsIFNjZW5lPigpOyAvLyBNYXAgYnkgbGluayBuYW1lXG5cdFx0Y29uc3Qgc2NlbmVJZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBTY2VuZT4oKTsgLy8gTWFwIGJ5IElEXG5cdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBleGlzdGluZ1NjZW5lcykge1xuXHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0c2NlbmVNYXAuc2V0KGxpbmtOYW1lLCBzY2VuZSk7XG5cdFx0XHRzY2VuZUlkTWFwLnNldChzY2VuZS5pZCwgc2NlbmUpO1xuXHRcdH1cblxuXHRcdC8vIEdldCBhbGwgYmVhdHMgZm9yIHNjZW5lcyBpbiB0aGlzIGNoYXB0ZXJcblx0XHRjb25zdCBiZWF0TWFwID0gbmV3IE1hcDxzdHJpbmcsIEJlYXQ+KCk7IC8vIE1hcCBieSBsaW5rIG5hbWVcblx0XHRjb25zdCBiZWF0SWRNYXAgPSBuZXcgTWFwPHN0cmluZywgQmVhdD4oKTsgLy8gTWFwIGJ5IElEXG5cdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBleGlzdGluZ1NjZW5lcykge1xuXHRcdFx0Y29uc3QgYmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0cyhzY2VuZS5pZCk7XG5cdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRiZWF0TWFwLnNldChsaW5rTmFtZSwgYmVhdCk7XG5cdFx0XHRcdGJlYXRJZE1hcC5zZXQoYmVhdC5pZCwgYmVhdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUGFyc2UgaGllcmFyY2hpY2FsIHN0cnVjdHVyZSBmcm9tIENoYXB0ZXIgc2VjdGlvblxuXHRcdGNvbnN0IGhpZXJhcmNoaWNhbCA9IHBhcnNlSGllcmFyY2hpY2FsUHJvc2UoY2hhcHRlckNvbnRlbnQpO1xuXG5cdFx0Ly8gUHJvY2VzcyBzZWN0aW9ucyBoaWVyYXJjaGljYWxseVxuXHRcdGNvbnN0IHVwZGF0ZWRTZWN0aW9uczogc3RyaW5nW10gPSBbXTtcblx0XHRsZXQgY3VycmVudFNjZW5lOiBTY2VuZSB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBjdXJyZW50QmVhdDogQmVhdCB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBwcm9zZU9yZGVyTnVtID0gMTtcblx0XHRsZXQgc2NlbmVPcmRlck51bSA9IGV4aXN0aW5nU2NlbmVzLmxlbmd0aCA+IDAgXG5cdFx0XHQ/IE1hdGgubWF4KC4uLmV4aXN0aW5nU2NlbmVzLm1hcChzID0+IHMub3JkZXJfbnVtKSkgKyAxIFxuXHRcdFx0OiAxO1xuXG5cdFx0Zm9yIChjb25zdCBzZWN0aW9uIG9mIGhpZXJhcmNoaWNhbC5zZWN0aW9ucykge1xuXHRcdFx0aWYgKHNlY3Rpb24udHlwZSA9PT0gXCJzY2VuZVwiICYmIHNlY3Rpb24uc2NlbmUpIHtcblx0XHRcdFx0Y29uc3QgeyBzY2VuZTogcGFyc2VkU2NlbmUgfSA9IHNlY3Rpb247XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAocGFyc2VkU2NlbmUubGlua05hbWUpIHtcblx0XHRcdFx0XHQvLyBTY2VuZSBleGlzdHMgLSBmaW5kIGl0XG5cdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gc2NlbmVNYXAuZ2V0KHBhcnNlZFNjZW5lLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdGlmICghY3VycmVudFNjZW5lKSB7XG5cdFx0XHRcdFx0XHQvLyBUcnkgdG8gZmluZCBieSBJRCBpZiBsaW5rTmFtZSBpcyBhY3R1YWxseSBhbiBJRFxuXHRcdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gc2NlbmVJZE1hcC5nZXQocGFyc2VkU2NlbmUubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBzY2VuZSBpZiBuZWVkZWRcblx0XHRcdFx0XHRcdGlmIChwYXJzZWRTY2VuZS5nb2FsICE9PSBjdXJyZW50U2NlbmUuZ29hbCB8fCBwYXJzZWRTY2VuZS50aW1lUmVmICE9PSBjdXJyZW50U2NlbmUudGltZV9yZWYpIHtcblx0XHRcdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlU2NlbmUoY3VycmVudFNjZW5lLmlkLCB7XG5cdFx0XHRcdFx0XHRcdFx0Z29hbDogcGFyc2VkU2NlbmUuZ29hbCxcblx0XHRcdFx0XHRcdFx0XHR0aW1lX3JlZjogcGFyc2VkU2NlbmUudGltZVJlZixcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIENyZWF0ZSBuZXcgc2NlbmVcblx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVTY2VuZSh7XG5cdFx0XHRcdFx0XHRzdG9yeV9pZDogc3RvcnlJZCxcblx0XHRcdFx0XHRcdGNoYXB0ZXJfaWQ6IGNoYXB0ZXJJZCxcblx0XHRcdFx0XHRcdG9yZGVyX251bTogc2NlbmVPcmRlck51bSsrLFxuXHRcdFx0XHRcdFx0Z29hbDogcGFyc2VkU2NlbmUuZ29hbCxcblx0XHRcdFx0XHRcdHRpbWVfcmVmOiBwYXJzZWRTY2VuZS50aW1lUmVmLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIFVwZGF0ZSBtYXBzXG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKGN1cnJlbnRTY2VuZSk7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVMaW5rTmFtZSA9IHNjZW5lRmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0c2NlbmVNYXAuc2V0KHNjZW5lTGlua05hbWUsIGN1cnJlbnRTY2VuZSk7XG5cdFx0XHRcdFx0c2NlbmVJZE1hcC5zZXQoY3VycmVudFNjZW5lLmlkLCBjdXJyZW50U2NlbmUpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIFdyaXRlIHNjZW5lIGZpbGUgKHNjZW5lcyBhcmUgd3JpdHRlbiBzZXBhcmF0ZWx5IGR1cmluZyBwdWxsLCBzbyB3ZSBza2lwIGhlcmUpXG5cdFx0XHRcdFx0Ly8gVGhlIHNjZW5lIHdpbGwgYmUgd3JpdHRlbiBwcm9wZXJseSBvbiBuZXh0IHB1bGxcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEZvcm1hdCBzY2VuZSBoZWFkZXIgd2l0aCBsaW5rIGFuZCBwcmVmaXhcblx0XHRcdFx0aWYgKGN1cnJlbnRTY2VuZSkge1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShjdXJyZW50U2NlbmUpO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lTGlua05hbWUgPSBzY2VuZUZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lRGlzcGxheVRleHQgPSBjdXJyZW50U2NlbmUudGltZV9yZWZcblx0XHRcdFx0XHRcdD8gYCR7Y3VycmVudFNjZW5lLmdvYWx9IC0gJHtjdXJyZW50U2NlbmUudGltZV9yZWZ9YFxuXHRcdFx0XHRcdFx0OiBjdXJyZW50U2NlbmUuZ29hbDtcblx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgIyMgU2NlbmU6IFtbJHtzY2VuZUxpbmtOYW1lfXwke3NjZW5lRGlzcGxheVRleHR9XV1gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0Y3VycmVudEJlYXQgPSBudWxsOyAvLyBSZXNldCBiZWF0IHdoZW4gbmV3IHNjZW5lIHN0YXJ0c1xuXHRcdFx0fSBlbHNlIGlmIChzZWN0aW9uLnR5cGUgPT09IFwiYmVhdFwiICYmIHNlY3Rpb24uYmVhdCkge1xuXHRcdFx0XHRjb25zdCB7IGJlYXQ6IHBhcnNlZEJlYXQgfSA9IHNlY3Rpb247XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoIWN1cnJlbnRTY2VuZSkge1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIkJlYXQgZm91bmQgd2l0aG91dCBhIHBhcmVudCBzY2VuZVwiKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0aWYgKHBhcnNlZEJlYXQubGlua05hbWUpIHtcblx0XHRcdFx0XHQvLyBCZWF0IGV4aXN0cyAtIGZpbmQgaXRcblx0XHRcdFx0XHRjdXJyZW50QmVhdCA9IGJlYXRNYXAuZ2V0KHBhcnNlZEJlYXQubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0aWYgKCFjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdFx0Ly8gVHJ5IHRvIGZpbmQgYnkgSUQgaWYgbGlua05hbWUgaXMgYWN0dWFsbHkgYW4gSURcblx0XHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYmVhdElkTWFwLmdldChwYXJzZWRCZWF0LmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAoY3VycmVudEJlYXQpIHtcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBiZWF0IGlmIG5lZWRlZFxuXHRcdFx0XHRcdFx0aWYgKHBhcnNlZEJlYXQuaW50ZW50ICE9PSBjdXJyZW50QmVhdC5pbnRlbnQgfHwgcGFyc2VkQmVhdC5vdXRjb21lICE9PSBjdXJyZW50QmVhdC5vdXRjb21lKSB7XG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQmVhdChjdXJyZW50QmVhdC5pZCwge1xuXHRcdFx0XHRcdFx0XHRcdGludGVudDogcGFyc2VkQmVhdC5pbnRlbnQsXG5cdFx0XHRcdFx0XHRcdFx0b3V0Y29tZTogcGFyc2VkQmVhdC5vdXRjb21lLFxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIG5ldyBiZWF0XG5cdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdCZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzKGN1cnJlbnRTY2VuZS5pZCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdE9yZGVyTnVtID0gZXhpc3RpbmdCZWF0cy5sZW5ndGggPiAwXG5cdFx0XHRcdFx0XHQ/IE1hdGgubWF4KC4uLmV4aXN0aW5nQmVhdHMubWFwKGIgPT4gYi5vcmRlcl9udW0pKSArIDFcblx0XHRcdFx0XHRcdDogMTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjdXJyZW50QmVhdCA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUJlYXQoe1xuXHRcdFx0XHRcdFx0c2NlbmVfaWQ6IGN1cnJlbnRTY2VuZS5pZCxcblx0XHRcdFx0XHRcdG9yZGVyX251bTogYmVhdE9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0dHlwZTogXCJzZXR1cFwiLCAvLyBEZWZhdWx0IHR5cGVcblx0XHRcdFx0XHRcdGludGVudDogcGFyc2VkQmVhdC5pbnRlbnQsXG5cdFx0XHRcdFx0XHRvdXRjb21lOiBwYXJzZWRCZWF0Lm91dGNvbWUsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gVXBkYXRlIG1hcHNcblx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGN1cnJlbnRCZWF0KTtcblx0XHRcdFx0XHRjb25zdCBiZWF0TGlua05hbWUgPSBiZWF0RmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0YmVhdE1hcC5zZXQoYmVhdExpbmtOYW1lLCBjdXJyZW50QmVhdCk7XG5cdFx0XHRcdFx0YmVhdElkTWFwLnNldChjdXJyZW50QmVhdC5pZCwgY3VycmVudEJlYXQpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIFdyaXRlIGJlYXQgZmlsZSAoYmVhdHMgYXJlIHdyaXR0ZW4gc2VwYXJhdGVseSBkdXJpbmcgcHVsbCwgc28gd2Ugc2tpcCBoZXJlKVxuXHRcdFx0XHRcdC8vIFRoZSBiZWF0IHdpbGwgYmUgd3JpdHRlbiBwcm9wZXJseSBvbiBuZXh0IHB1bGxcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEZvcm1hdCBiZWF0IGhlYWRlciB3aXRoIGxpbmsgYW5kIHByZWZpeFxuXHRcdFx0XHRpZiAoY3VycmVudEJlYXQpIHtcblx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGN1cnJlbnRCZWF0KTtcblx0XHRcdFx0XHRjb25zdCBiZWF0TGlua05hbWUgPSBiZWF0RmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdERpc3BsYXlUZXh0ID0gY3VycmVudEJlYXQub3V0Y29tZVxuXHRcdFx0XHRcdFx0PyBgJHtjdXJyZW50QmVhdC5pbnRlbnR9IC0+ICR7Y3VycmVudEJlYXQub3V0Y29tZX1gXG5cdFx0XHRcdFx0XHQ6IGN1cnJlbnRCZWF0LmludGVudDtcblx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgIyMjIEJlYXQ6IFtbJHtiZWF0TGlua05hbWV9fCR7YmVhdERpc3BsYXlUZXh0fV1dYCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoc2VjdGlvbi50eXBlID09PSBcInByb3NlXCIgJiYgc2VjdGlvbi5wcm9zZSkge1xuXHRcdFx0XHRjb25zdCB7IHByb3NlOiBwYXJhZ3JhcGggfSA9IHNlY3Rpb247XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBQcm9jZXNzIHByb3NlIGJsb2NrXG5cdFx0XHRcdGxldCBsb2NhbENvbnRlbnRCbG9jazogQ29udGVudEJsb2NrIHwgbnVsbCA9IG51bGw7XG5cdFx0XHRcdGxldCByZW1vdGVDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayB8IG51bGwgPSBudWxsO1xuXG5cdFx0XHRcdC8vIElmIHBhcmFncmFwaCBoYXMgYSBsaW5rLCByZWFkIHRoZSBsb2NhbCBmaWxlXG5cdFx0XHRcdGlmIChwYXJhZ3JhcGgubGlua05hbWUpIHtcblx0XHRcdFx0XHQvLyBTZWFyY2ggZm9yIGZpbGUgaW4gdHlwZSBzdWJmb2xkZXJzXG5cdFx0XHRcdFx0Y29uc3QgY29udGVudEJsb2NrRmlsZVBhdGggPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tGaWxlQnlMaW5rTmFtZShjb250ZW50c0ZvbGRlclBhdGgsIHBhcmFncmFwaC5saW5rTmFtZSk7XG5cdFx0XHRcdFx0aWYgKGNvbnRlbnRCbG9ja0ZpbGVQYXRoKSB7XG5cdFx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIucmVhZENvbnRlbnRCbG9ja0Zyb21GaWxlKGNvbnRlbnRCbG9ja0ZpbGVQYXRoKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBJZiBmaWxlIG5vdCBmb3VuZCBieSBleGFjdCBuYW1lLCB0cnkgdG8gZmluZCBieSBzZWFyY2hpbmcgYWxsIHByb3NlIGJsb2NrIGZpbGVzXG5cdFx0XHRcdFx0aWYgKCFsb2NhbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0bG9jYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tCeUNvbnRlbnQoY29udGVudHNGb2xkZXJQYXRoLCBwYXJhZ3JhcGguY29udGVudCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gRmluZCBjb3JyZXNwb25kaW5nIHJlbW90ZSBwcm9zZSBibG9ja1xuXHRcdFx0XHRcdGlmIChsb2NhbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0cmVtb3RlQ29udGVudEJsb2NrID0gcmVtb3RlQ29udGVudEJsb2Nrc01hcC5nZXQobG9jYWxDb250ZW50QmxvY2suaWQpIHx8IG51bGw7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIElmIGxvY2FsIGZpbGUgbm90IGZvdW5kLCB0cnkgdG8gZmluZCByZW1vdGUgYnkgY29udGVudCBtYXRjaFxuXHRcdFx0XHRcdFx0Y29uc3Qgbm9ybWFsaXplZENvbnRlbnQgPSBwYXJhZ3JhcGguY29udGVudC50cmltKCk7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IFtpZCwgcmVtb3RlUEJdIG9mIHJlbW90ZUNvbnRlbnRCbG9ja3NNYXAuZW50cmllcygpKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChyZW1vdGVQQi5jb250ZW50LnRyaW0oKSA9PT0gbm9ybWFsaXplZENvbnRlbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRyZW1vdGVDb250ZW50QmxvY2sgPSByZW1vdGVQQjtcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBObyBsaW5rIC0gY2hlY2sgaWYgdGhlcmUncyBhIGxvY2FsIGZpbGUgd2l0aCBtYXRjaGluZyBjb250ZW50XG5cdFx0XHRcdFx0bG9jYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tCeUNvbnRlbnQoY29udGVudHNGb2xkZXJQYXRoLCBwYXJhZ3JhcGguY29udGVudCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gQWxzbyBjaGVjayByZW1vdGUgcHJvc2UgYmxvY2tzIGZvciBjb250ZW50IG1hdGNoXG5cdFx0XHRcdFx0Y29uc3Qgbm9ybWFsaXplZENvbnRlbnQgPSBwYXJhZ3JhcGguY29udGVudC50cmltKCk7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBbaWQsIHJlbW90ZVBCXSBvZiByZW1vdGVDb250ZW50QmxvY2tzTWFwLmVudHJpZXMoKSkge1xuXHRcdFx0XHRcdFx0aWYgKHJlbW90ZVBCLmNvbnRlbnQudHJpbSgpID09PSBub3JtYWxpemVkQ29udGVudCkge1xuXHRcdFx0XHRcdFx0XHRyZW1vdGVDb250ZW50QmxvY2sgPSByZW1vdGVQQjtcblx0XHRcdFx0XHRcdFx0Ly8gSWYgd2UgZm91bmQgYSByZW1vdGUgbWF0Y2gsIHRyeSB0byBmaW5kIGxvY2FsIGZpbGUgYnkgSURcblx0XHRcdFx0XHRcdFx0aWYgKCFsb2NhbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0XHRcdC8vIFNlYXJjaCBmb3IgZmlsZSB3aXRoIHRoaXMgSUQgaW4gZnJvbnRtYXR0ZXJcblx0XHRcdFx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmluZENvbnRlbnRCbG9ja0J5SWQoY29udGVudHNGb2xkZXJQYXRoLCByZW1vdGVQQi5pZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQ29tcGFyZSBhbmQgZGV0ZXJtaW5lIHN0YXR1c1xuXHRcdFx0XHRjb25zdCBzdGF0dXMgPSBjb21wYXJlQ29udGVudEJsb2NrcyhwYXJhZ3JhcGgsIGxvY2FsQ29udGVudEJsb2NrLCByZW1vdGVDb250ZW50QmxvY2spO1xuXG5cdFx0XHRcdGxldCBmaW5hbENvbnRlbnRCbG9jazogQ29udGVudEJsb2NrO1xuXG5cdFx0XHRcdHN3aXRjaCAoc3RhdHVzKSB7XG5cdFx0XHRcdFx0Y2FzZSBcIm5ld1wiOiB7XG5cdFx0XHRcdFx0XHQvLyBDcmVhdGUgbmV3IHByb3NlIGJsb2NrXG5cdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRCbG9jayhjaGFwdGVySWQsIHtcblx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBwcm9zZU9yZGVyTnVtKyssXG5cdFx0XHRcdFx0XHRcdGtpbmQ6IFwiZmluYWxcIixcblx0XHRcdFx0XHRcdFx0Y29udGVudDogcGFyYWdyYXBoLmNvbnRlbnQsXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0Ly8gQ3JlYXRlIGZpbGUgaW4gY29ycmVjdCB0eXBlIHN1YmZvbGRlclxuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoLCB1bmRlZmluZWQpO1xuXG5cdFx0XHRcdFx0XHQvLyBDcmVhdGUgcmVmZXJlbmNlcyBpZiBuZWVkZWRcblx0XHRcdFx0XHRcdGlmIChjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJzY2VuZVwiLCBjdXJyZW50U2NlbmUuaWQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRCZWF0KSB7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRBbmNob3IoZmluYWxDb250ZW50QmxvY2suaWQsIFwiYmVhdFwiLCBjdXJyZW50QmVhdC5pZCk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIEFkZCBsaW5rIHRvIHBhcmFncmFwaFxuXHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoZmluYWxDb250ZW50QmxvY2spLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtsaW5rTmFtZX18JHtwYXJhZ3JhcGguY29udGVudH1dXWApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y2FzZSBcInVuY2hhbmdlZFwiOiB7XG5cdFx0XHRcdFx0XHQvLyBVc2UgcmVtb3RlQ29udGVudEJsb2NrIGlmIGxvY2FsQ29udGVudEJsb2NrIGRvZXNuJ3QgZXhpc3Rcblx0XHRcdFx0XHRcdGlmICghbG9jYWxDb250ZW50QmxvY2sgJiYgcmVtb3RlQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gcmVtb3RlQ29udGVudEJsb2NrO1xuXHRcdFx0XHRcdFx0XHQvLyBDcmVhdGUgbG9jYWwgZmlsZSBpbiBjb3JyZWN0IHR5cGUgc3ViZm9sZGVyIHNpbmNlIGl0IGRvZXNuJ3QgZXhpc3Rcblx0XHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQ29udGVudEJsb2NrRmlsZShmaW5hbENvbnRlbnRCbG9jaywgZmlsZVBhdGgsIHVuZGVmaW5lZCk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGxvY2FsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIG9yZGVyX251bSBuZWVkcyB1cGRhdGVcblx0XHRcdFx0XHRcdFx0aWYgKGxvY2FsQ29udGVudEJsb2NrLm9yZGVyX251bSAhPT0gcHJvc2VPcmRlck51bSkge1xuXHRcdFx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQ29udGVudEJsb2NrKGxvY2FsQ29udGVudEJsb2NrLmlkLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRvcmRlcl9udW06IHByb3NlT3JkZXJOdW0rKyxcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoLCB1bmRlZmluZWQpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gbG9jYWxDb250ZW50QmxvY2s7XG5cdFx0XHRcdFx0XHRcdFx0cHJvc2VPcmRlck51bSsrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBTaG91bGQgbm90IGhhcHBlbiwgYnV0IGhhbmRsZSBncmFjZWZ1bGx5XG5cdFx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gcmVtb3RlQ29udGVudEJsb2NrITtcblx0XHRcdFx0XHRcdFx0cHJvc2VPcmRlck51bSsrO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgcmVmZXJlbmNlcyBpZiBuZWVkZWRcblx0XHRcdFx0XHRcdGlmIChmaW5hbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBleGlzdGluZ1JlZnMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QW5jaG9ycyhmaW5hbENvbnRlbnRCbG9jay5pZCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGhhc1NjZW5lUmVmID0gZXhpc3RpbmdSZWZzLnNvbWUociA9PiByLmVudGl0eV90eXBlID09PSBcInNjZW5lXCIgJiYgci5lbnRpdHlfaWQgPT09IGN1cnJlbnRTY2VuZT8uaWQpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBoYXNCZWF0UmVmID0gZXhpc3RpbmdSZWZzLnNvbWUociA9PiByLmVudGl0eV90eXBlID09PSBcImJlYXRcIiAmJiByLmVudGl0eV9pZCA9PT0gY3VycmVudEJlYXQ/LmlkKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdGlmIChjdXJyZW50U2NlbmUgJiYgIWhhc1NjZW5lUmVmKSB7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJzY2VuZVwiLCBjdXJyZW50U2NlbmUuaWQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmIChjdXJyZW50QmVhdCAmJiAhaGFzQmVhdFJlZikge1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRBbmNob3IoZmluYWxDb250ZW50QmxvY2suaWQsIFwiYmVhdFwiLCBjdXJyZW50QmVhdC5pZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gQWRkIGxpbmsgLSB1c2UgZXhpc3RpbmcgbGlua05hbWUgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgZ2VuZXJhdGUgZnJvbSBmaWxlXG5cdFx0XHRcdFx0XHRpZiAocGFyYWdyYXBoLmxpbmtOYW1lKSB7XG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRTZWN0aW9ucy5wdXNoKGBbWyR7cGFyYWdyYXBoLmxpbmtOYW1lfXwke3BhcmFncmFwaC5jb250ZW50fV1dYCk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBObyBsaW5rTmFtZSAtIGdlbmVyYXRlIGZyb20gZmluYWxDb250ZW50QmxvY2tcblx0XHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoZmluYWxDb250ZW50QmxvY2spLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lfXwke3BhcmFncmFwaC5jb250ZW50fV1dYCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwibG9jYWxfbW9kaWZpZWRcIjoge1xuXHRcdFx0XHRcdFx0Ly8gVXBkYXRlIHByb3NlIGJsb2NrIHdpdGggbG9jYWwgY29udGVudFxuXHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVDb250ZW50QmxvY2sobG9jYWxDb250ZW50QmxvY2shLmlkLCB7XG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQ6IHBhcmFncmFwaC5jb250ZW50LFxuXHRcdFx0XHRcdFx0XHRvcmRlcl9udW06IHByb3NlT3JkZXJOdW0rKyxcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgbG9jYWwgZmlsZSBpbiBjb3JyZWN0IHR5cGUgc3ViZm9sZGVyXG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aExvY2FsTW9kID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aExvY2FsTW9kLCB1bmRlZmluZWQpO1xuXG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgcmVmZXJlbmNlcyBpZiBuZWVkZWRcblx0XHRcdFx0XHRcdGlmIChmaW5hbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBleGlzdGluZ1JlZnMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QW5jaG9ycyhmaW5hbENvbnRlbnRCbG9jay5pZCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGhhc1NjZW5lUmVmID0gZXhpc3RpbmdSZWZzLnNvbWUociA9PiByLmVudGl0eV90eXBlID09PSBcInNjZW5lXCIgJiYgci5lbnRpdHlfaWQgPT09IGN1cnJlbnRTY2VuZT8uaWQpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBoYXNCZWF0UmVmID0gZXhpc3RpbmdSZWZzLnNvbWUociA9PiByLmVudGl0eV90eXBlID09PSBcImJlYXRcIiAmJiByLmVudGl0eV9pZCA9PT0gY3VycmVudEJlYXQ/LmlkKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdGlmIChjdXJyZW50U2NlbmUgJiYgIWhhc1NjZW5lUmVmKSB7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJzY2VuZVwiLCBjdXJyZW50U2NlbmUuaWQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmIChjdXJyZW50QmVhdCAmJiAhaGFzQmVhdFJlZikge1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRBbmNob3IoZmluYWxDb250ZW50QmxvY2suaWQsIFwiYmVhdFwiLCBjdXJyZW50QmVhdC5pZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWVMb2NhbE1vZCA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShmaW5hbENvbnRlbnRCbG9jaykucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lTG9jYWxNb2R9fCR7cGFyYWdyYXBoLmNvbnRlbnR9XV1gKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhc2UgXCJyZW1vdGVfbW9kaWZpZWRcIjoge1xuXHRcdFx0XHRcdFx0Ly8gVXBkYXRlIGxvY2FsIGZpbGUgd2l0aCByZW1vdGUgY29udGVudCBpbiBjb3JyZWN0IHR5cGUgc3ViZm9sZGVyXG5cdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IHJlbW90ZUNvbnRlbnRCbG9jayE7XG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aFJlbW90ZU1vZCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQ29udGVudEJsb2NrRmlsZShmaW5hbENvbnRlbnRCbG9jaywgZmlsZVBhdGhSZW1vdGVNb2QsIHVuZGVmaW5lZCk7XG5cblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSByZWZlcmVuY2VzIGlmIG5lZWRlZFxuXHRcdFx0XHRcdFx0aWYgKGZpbmFsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nUmVmcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRBbmNob3JzKGZpbmFsQ29udGVudEJsb2NrLmlkKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgaGFzU2NlbmVSZWYgPSBleGlzdGluZ1JlZnMuc29tZShyID0+IHIuZW50aXR5X3R5cGUgPT09IFwic2NlbmVcIiAmJiByLmVudGl0eV9pZCA9PT0gY3VycmVudFNjZW5lPy5pZCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGhhc0JlYXRSZWYgPSBleGlzdGluZ1JlZnMuc29tZShyID0+IHIuZW50aXR5X3R5cGUgPT09IFwiYmVhdFwiICYmIHIuZW50aXR5X2lkID09PSBjdXJyZW50QmVhdD8uaWQpO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRTY2VuZSAmJiAhaGFzU2NlbmVSZWYpIHtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QW5jaG9yKGZpbmFsQ29udGVudEJsb2NrLmlkLCBcInNjZW5lXCIsIGN1cnJlbnRTY2VuZS5pZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRCZWF0ICYmICFoYXNCZWF0UmVmKSB7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJiZWF0XCIsIGN1cnJlbnRCZWF0LmlkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZVJlbW90ZU1vZCA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShmaW5hbENvbnRlbnRCbG9jaykucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lUmVtb3RlTW9kfXwke2ZpbmFsQ29udGVudEJsb2NrLmNvbnRlbnR9XV1gKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYFByb3NlIGJsb2NrIHVwZGF0ZWQgZnJvbSByZW1vdGU6ICR7bGlua05hbWVSZW1vdGVNb2R9YCwgMzAwMCk7XG5cdFx0XHRcdFx0XHRwcm9zZU9yZGVyTnVtKys7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwiY29uZmxpY3RcIjoge1xuXHRcdFx0XHRcdFx0Ly8gU2hvdyBjb25mbGljdCBtb2RhbFxuXHRcdFx0XHRcdFx0Y29uc3QgcmVzb2x1dGlvbiA9IGF3YWl0IHRoaXMucmVzb2x2ZUNvbmZsaWN0KGxvY2FsQ29udGVudEJsb2NrISwgcmVtb3RlQ29udGVudEJsb2NrISk7XG5cblx0XHRcdFx0XHRcdGxldCByZXNvbHZlZENvbnRlbnQ6IHN0cmluZztcblx0XHRcdFx0XHRcdGlmIChyZXNvbHV0aW9uLnJlc29sdXRpb24gPT09IFwibG9jYWxcIikge1xuXHRcdFx0XHRcdFx0XHRyZXNvbHZlZENvbnRlbnQgPSBwYXJhZ3JhcGguY29udGVudDtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAocmVzb2x1dGlvbi5yZXNvbHV0aW9uID09PSBcInJlbW90ZVwiKSB7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmVkQ29udGVudCA9IHJlbW90ZUNvbnRlbnRCbG9jayEuY29udGVudDtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmVkQ29udGVudCA9IHJlc29sdXRpb24ubWVyZ2VkQ29udGVudCB8fCBwYXJhZ3JhcGguY29udGVudDtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gVXBkYXRlIHByb3NlIGJsb2NrIHdpdGggcmVzb2x2ZWQgY29udGVudFxuXHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVDb250ZW50QmxvY2sobG9jYWxDb250ZW50QmxvY2shLmlkLCB7XG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQ6IHJlc29sdmVkQ29udGVudCxcblx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBwcm9zZU9yZGVyTnVtKyssXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0Ly8gVXBkYXRlIGxvY2FsIGZpbGUgaW4gY29ycmVjdCB0eXBlIHN1YmZvbGRlclxuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGhDb25mbGljdCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQ29udGVudEJsb2NrRmlsZShmaW5hbENvbnRlbnRCbG9jaywgZmlsZVBhdGhDb25mbGljdCwgdW5kZWZpbmVkKTtcblxuXHRcdFx0XHRcdFx0Ly8gVXBkYXRlIHJlZmVyZW5jZXMgaWYgbmVlZGVkXG5cdFx0XHRcdFx0XHRpZiAoZmluYWxDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdSZWZzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEFuY2hvcnMoZmluYWxDb250ZW50QmxvY2suaWQpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBoYXNTY2VuZVJlZiA9IGV4aXN0aW5nUmVmcy5zb21lKHIgPT4gci5lbnRpdHlfdHlwZSA9PT0gXCJzY2VuZVwiICYmIHIuZW50aXR5X2lkID09PSBjdXJyZW50U2NlbmU/LmlkKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgaGFzQmVhdFJlZiA9IGV4aXN0aW5nUmVmcy5zb21lKHIgPT4gci5lbnRpdHlfdHlwZSA9PT0gXCJiZWF0XCIgJiYgci5lbnRpdHlfaWQgPT09IGN1cnJlbnRCZWF0Py5pZCk7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRpZiAoY3VycmVudFNjZW5lICYmICFoYXNTY2VuZVJlZikge1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRBbmNob3IoZmluYWxDb250ZW50QmxvY2suaWQsIFwic2NlbmVcIiwgY3VycmVudFNjZW5lLmlkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpZiAoY3VycmVudEJlYXQgJiYgIWhhc0JlYXRSZWYpIHtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QW5jaG9yKGZpbmFsQ29udGVudEJsb2NrLmlkLCBcImJlYXRcIiwgY3VycmVudEJlYXQuaWQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lQ29uZmxpY3QgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoZmluYWxDb250ZW50QmxvY2spLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtsaW5rTmFtZUNvbmZsaWN0fXwke3Jlc29sdmVkQ29udGVudH1dXWApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gVXBkYXRlIGNoYXB0ZXIgZmlsZSB3aXRoIG5ldyBoaWVyYXJjaGljYWwgY29udGVudCBhbmQgc2NlbmUvYmVhdCBsaXN0XG5cdFx0YXdhaXQgdGhpcy51cGRhdGVDaGFwdGVyRmlsZShjaGFwdGVyQ29udGVudCwgdXBkYXRlZFNlY3Rpb25zLCBmaWxlLCBmcm9udG1hdHRlciwgZXhpc3RpbmdTY2VuZXMsIGJlYXRNYXAsIHJlbW90ZUNvbnRlbnRCbG9ja3MsIGNoYXB0ZXJJZCk7XG5cdH1cblxuXHQvLyBVcGRhdGUgY2hhcHRlciBmaWxlIHdpdGggYm90aCBzY2VuZS9iZWF0IGxpc3QgYW5kIGNoYXB0ZXIgY29udGVudFxuXHRwcml2YXRlIGFzeW5jIHVwZGF0ZUNoYXB0ZXJGaWxlKFxuXHRcdG9yaWdpbmFsQ29udGVudDogc3RyaW5nLFxuXHRcdHVwZGF0ZWRTZWN0aW9uczogc3RyaW5nW10sXG5cdFx0ZmlsZTogVEZpbGUsXG5cdFx0ZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sXG5cdFx0c2NlbmVzOiBTY2VuZVtdLFxuXHRcdGJlYXRNYXA6IE1hcDxzdHJpbmcsIEJlYXQ+LFxuXHRcdGNvbnRlbnRCbG9ja3M6IENvbnRlbnRCbG9ja1tdLFxuXHRcdGNoYXB0ZXJJZDogc3RyaW5nXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdC8vIEdldCBwcm9zZSBibG9jayByZWZlcmVuY2VzIHRvIGRldGVybWluZSB3aGljaCBzY2VuZXMvMDItYmVhdHMgaGF2ZSBwcm9zZVxuXHRcdGNvbnN0IGFsbENvbnRlbnRBbmNob3JzOiBDb250ZW50QW5jaG9yW10gPSBbXTtcblx0XHRmb3IgKGNvbnN0IGNvbnRlbnRCbG9jayBvZiBjb250ZW50QmxvY2tzKSB7XG5cdFx0XHRjb25zdCByZWZzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEFuY2hvcnMoY29udGVudEJsb2NrLmlkKTtcblx0XHRcdGFsbENvbnRlbnRBbmNob3JzLnB1c2goLi4ucmVmcyk7XG5cdFx0fVxuXG5cdFx0Ly8gQ3JlYXRlIG1hcHMgZm9yIHF1aWNrIGxvb2t1cFxuXHRcdGNvbnN0IHByb3NlUmVmc0J5U2NlbmUgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudEFuY2hvcltdPigpO1xuXHRcdGNvbnN0IHByb3NlUmVmc0J5QmVhdCA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QW5jaG9yW10+KCk7XG5cdFx0Zm9yIChjb25zdCByZWYgb2YgYWxsQ29udGVudEFuY2hvcnMpIHtcblx0XHRcdGlmIChyZWYuZW50aXR5X3R5cGUgPT09IFwic2NlbmVcIikge1xuXHRcdFx0XHRpZiAoIXByb3NlUmVmc0J5U2NlbmUuaGFzKHJlZi5lbnRpdHlfaWQpKSB7XG5cdFx0XHRcdFx0cHJvc2VSZWZzQnlTY2VuZS5zZXQocmVmLmVudGl0eV9pZCwgW10pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHByb3NlUmVmc0J5U2NlbmUuZ2V0KHJlZi5lbnRpdHlfaWQpIS5wdXNoKHJlZik7XG5cdFx0XHR9IGVsc2UgaWYgKHJlZi5lbnRpdHlfdHlwZSA9PT0gXCJiZWF0XCIpIHtcblx0XHRcdFx0aWYgKCFwcm9zZVJlZnNCeUJlYXQuaGFzKHJlZi5lbnRpdHlfaWQpKSB7XG5cdFx0XHRcdFx0cHJvc2VSZWZzQnlCZWF0LnNldChyZWYuZW50aXR5X2lkLCBbXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cHJvc2VSZWZzQnlCZWF0LmdldChyZWYuZW50aXR5X2lkKSEucHVzaChyZWYpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEdlbmVyYXRlIHVwZGF0ZWQgc2NlbmUvYmVhdCBsaXN0XG5cdFx0Y29uc3Qgc2NlbmVCZWF0TGlzdEl0ZW1zOiBzdHJpbmdbXSA9IFtdO1xuXHRcdGZvciAoY29uc3Qgc2NlbmUgb2Ygc2NlbmVzLnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pKSB7XG5cdFx0XHRjb25zdCBzY2VuZUZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZVNjZW5lRmlsZU5hbWUoc2NlbmUpO1xuXHRcdFx0Y29uc3Qgc2NlbmVMaW5rTmFtZSA9IHNjZW5lRmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRjb25zdCBzY2VuZURpc3BsYXlUZXh0ID0gc2NlbmUudGltZV9yZWYgXG5cdFx0XHRcdD8gYCR7c2NlbmUuZ29hbH0gLSAke3NjZW5lLnRpbWVfcmVmfWBcblx0XHRcdFx0OiBzY2VuZS5nb2FsO1xuXHRcdFx0XG5cdFx0XHQvLyBDaGVjayBpZiBzY2VuZSBoYXMgcHJvc2UgYmxvY2tzIChub3QgYXNzb2NpYXRlZCB3aXRoIGJlYXRzKVxuXHRcdFx0Y29uc3Qgc2NlbmVQcm9zZVJlZnMgPSBwcm9zZVJlZnNCeVNjZW5lLmdldChzY2VuZS5pZCkgfHwgW107XG5cdFx0XHRjb25zdCBzY2VuZUNvbnRlbnRCbG9ja0lkcyA9IG5ldyBTZXQoc2NlbmVQcm9zZVJlZnMubWFwKChyOiBDb250ZW50QW5jaG9yKSA9PiByLmNvbnRlbnRfYmxvY2tfaWQpKTtcblx0XHRcdC8vIENoZWNrIGlmIGFueSBwcm9zZSBibG9jayBpcyBub3QgYWxzbyBhc3NvY2lhdGVkIHdpdGggYSBiZWF0XG5cdFx0XHRjb25zdCBoYXNTY2VuZVByb3NlID0gQXJyYXkuZnJvbShzY2VuZUNvbnRlbnRCbG9ja0lkcykuc29tZSgoY29udGVudEJsb2NrSWQ6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRjb25zdCBibG9ja1JlZnMgPSBhbGxDb250ZW50QW5jaG9ycy5maWx0ZXIoKHI6IENvbnRlbnRBbmNob3IpID0+IHIuY29udGVudF9ibG9ja19pZCA9PT0gY29udGVudEJsb2NrSWQpO1xuXHRcdFx0XHRyZXR1cm4gIWJsb2NrUmVmcy5zb21lKChyOiBDb250ZW50QW5jaG9yKSA9PiByLmVudGl0eV90eXBlID09PSBcImJlYXRcIik7XG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IHNjZW5lTWFya2VyID0gaGFzU2NlbmVQcm9zZSA/IFwiK1wiIDogXCItXCI7XG5cdFx0XHRcblx0XHRcdHNjZW5lQmVhdExpc3RJdGVtcy5wdXNoKGAke3NjZW5lTWFya2VyfSBbWyR7c2NlbmVMaW5rTmFtZX18U2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lRGlzcGxheVRleHR9XV1gKTtcblx0XHRcdFxuXHRcdFx0Ly8gR2V0IGJlYXRzIGZvciB0aGlzIHNjZW5lXG5cdFx0XHRjb25zdCBzY2VuZUJlYXRzOiBCZWF0W10gPSBbXTtcblx0XHRcdGZvciAoY29uc3QgW2xpbmtOYW1lLCBiZWF0XSBvZiBiZWF0TWFwLmVudHJpZXMoKSkge1xuXHRcdFx0XHRpZiAoYmVhdC5zY2VuZV9pZCA9PT0gc2NlbmUuaWQpIHtcblx0XHRcdFx0XHRzY2VuZUJlYXRzLnB1c2goYmVhdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIHNjZW5lQmVhdHMuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSkpIHtcblx0XHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRjb25zdCBiZWF0RGlzcGxheVRleHQgPSBiZWF0Lm91dGNvbWVcblx0XHRcdFx0XHQ/IGAke2JlYXQuaW50ZW50fSAtPiAke2JlYXQub3V0Y29tZX1gXG5cdFx0XHRcdFx0OiBiZWF0LmludGVudDtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIENoZWNrIGlmIGJlYXQgaGFzIHByb3NlIGJsb2Nrc1xuXHRcdFx0XHRjb25zdCBiZWF0UHJvc2VSZWZzID0gcHJvc2VSZWZzQnlCZWF0LmdldChiZWF0LmlkKSB8fCBbXTtcblx0XHRcdFx0Y29uc3QgaGFzQmVhdFByb3NlID0gYmVhdFByb3NlUmVmcy5sZW5ndGggPiAwO1xuXHRcdFx0XHRjb25zdCBiZWF0TWFya2VyID0gaGFzQmVhdFByb3NlID8gXCIrXCIgOiBcIi1cIjtcblx0XHRcdFx0XG5cdFx0XHRcdHNjZW5lQmVhdExpc3RJdGVtcy5wdXNoKGBcXHQke2JlYXRNYXJrZXJ9IFtbJHtiZWF0TGlua05hbWV9fEJlYXQgJHtiZWF0Lm9yZGVyX251bX06ICR7YmVhdERpc3BsYXlUZXh0fV1dYCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRXh0cmFjdCBmcm9udG1hdHRlclxuXHRcdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBvcmlnaW5hbENvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcblx0XHRjb25zdCBmcm9udG1hdHRlclRleHQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXSA6IFwiXCI7XG5cblx0XHQvLyBFeHRyYWN0IGNvbnRlbnQgYWZ0ZXIgZnJvbnRtYXR0ZXJcblx0XHRjb25zdCBib2R5U3RhcnQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXS5sZW5ndGggOiAwO1xuXHRcdGNvbnN0IGJvZHlDb250ZW50ID0gb3JpZ2luYWxDb250ZW50LnN1YnN0cmluZyhib2R5U3RhcnQpLnRyaW0oKTtcblxuXHRcdC8vIEdldCBjaGFwdGVyIG51bWJlciBhbmQgdGl0bGUgZnJvbSBmcm9udG1hdHRlclxuXHRcdGNvbnN0IGNoYXB0ZXJOdW1iZXIgPSBmcm9udG1hdHRlci5udW1iZXIgfHwgXCIxXCI7XG5cdFx0Y29uc3QgY2hhcHRlclRpdGxlID0gZnJvbnRtYXR0ZXIudGl0bGUgfHwgXCJVbnRpdGxlZFwiO1xuXG5cdFx0Ly8gVXBkYXRlIHNjZW5lL2JlYXQgbGlzdCBzZWN0aW9uXG5cdFx0Y29uc3QgbGlzdFNlY3Rpb25NYXRjaCA9IGJvZHlDb250ZW50Lm1hdGNoKC8oW1xcc1xcU10qPyMjXFxzK1NjZW5lc1xccysmXFxzK0JlYXRzXFxzKlxcbispKFtcXHNcXFNdKj8pKD89XFxuIyN8JCkvKTtcblx0XHRjb25zdCB1cGRhdGVkTGlzdFNlY3Rpb24gPSBgIyMgU2NlbmVzICYgQmVhdHNcXG5cXG4ke3NjZW5lQmVhdExpc3RJdGVtcy5qb2luKFwiXFxuXCIpfVxcblxcbmA7XG5cblx0XHRsZXQgdXBkYXRlZEJvZHk6IHN0cmluZztcblx0XHRpZiAobGlzdFNlY3Rpb25NYXRjaCkge1xuXHRcdFx0Ly8gUmVwbGFjZSBleGlzdGluZyBsaXN0IHNlY3Rpb25cblx0XHRcdGNvbnN0IGJlZm9yZUxpc3QgPSBsaXN0U2VjdGlvbk1hdGNoWzFdO1xuXHRcdFx0Y29uc3QgYWZ0ZXJMaXN0ID0gYm9keUNvbnRlbnQuc3Vic3RyaW5nKGxpc3RTZWN0aW9uTWF0Y2guaW5kZXghICsgbGlzdFNlY3Rpb25NYXRjaFswXS5sZW5ndGgpO1xuXHRcdFx0dXBkYXRlZEJvZHkgPSBgJHtiZWZvcmVMaXN0fSR7dXBkYXRlZExpc3RTZWN0aW9ufSR7YWZ0ZXJMaXN0fWA7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIEFkZCBsaXN0IHNlY3Rpb24gYWZ0ZXIgdGl0bGVcblx0XHRcdGNvbnN0IHRpdGxlTWF0Y2ggPSBib2R5Q29udGVudC5tYXRjaCgvKCNcXHMrW15cXG5dK1xcbispKFtcXHNcXFNdKikvKTtcblx0XHRcdGlmICh0aXRsZU1hdGNoKSB7XG5cdFx0XHRcdHVwZGF0ZWRCb2R5ID0gYCR7dGl0bGVNYXRjaFsxXX0ke3VwZGF0ZWRMaXN0U2VjdGlvbn0ke3RpdGxlTWF0Y2hbMl19YDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHVwZGF0ZWRCb2R5ID0gYCR7dXBkYXRlZExpc3RTZWN0aW9ufSR7Ym9keUNvbnRlbnR9YDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBVcGRhdGUgY2hhcHRlciBzZWN0aW9uXG5cdFx0Y29uc3QgY2hhcHRlckhlYWRlclBhdHRlcm4gPSBgIyNcXFxccytDaGFwdGVyXFxcXHMrJHtjaGFwdGVyTnVtYmVyfTpcXFxccytbXlxcXFxuXStgO1xuXHRcdGNvbnN0IGNoYXB0ZXJTZWN0aW9uTWF0Y2ggPSB1cGRhdGVkQm9keS5tYXRjaChuZXcgUmVnRXhwKGAoW1xcXFxzXFxcXFNdKj8ke2NoYXB0ZXJIZWFkZXJQYXR0ZXJufVxcXFxzKlxcXFxuKykoW1xcXFxzXFxcXFNdKj8pKD89XFxcXG4jI1xcXFxzK0NoYXB0ZXJcXFxccytcXFxcZCs6fCQpYCwgXCJpXCIpKTtcblx0XHRcblx0XHRpZiAoIWNoYXB0ZXJTZWN0aW9uTWF0Y2gpIHtcblx0XHRcdC8vIE5vIENoYXB0ZXIgc2VjdGlvbiBmb3VuZCwgYWRkIGl0XG5cdFx0XHRjb25zdCBuZXdDaGFwdGVyU2VjdGlvbiA9IGBcXG5cXG4jIyBDaGFwdGVyICR7Y2hhcHRlck51bWJlcn06ICR7Y2hhcHRlclRpdGxlfVxcblxcbiR7dXBkYXRlZFNlY3Rpb25zLmpvaW4oXCJcXG5cXG5cIil9XFxuXFxuYDtcblx0XHRcdHVwZGF0ZWRCb2R5ID0gYCR7dXBkYXRlZEJvZHl9JHtuZXdDaGFwdGVyU2VjdGlvbn1gO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBSZXBsYWNlIENoYXB0ZXIgc2VjdGlvbiBjb250ZW50XG5cdFx0XHRjb25zdCBiZWZvcmVDaGFwdGVyID0gY2hhcHRlclNlY3Rpb25NYXRjaFsxXTtcblx0XHRcdGNvbnN0IGFmdGVyQ2hhcHRlciA9IHVwZGF0ZWRCb2R5LnN1YnN0cmluZyhjaGFwdGVyU2VjdGlvbk1hdGNoLmluZGV4ISArIGNoYXB0ZXJTZWN0aW9uTWF0Y2hbMF0ubGVuZ3RoKTtcblx0XHRcdGNvbnN0IG5ld0NoYXB0ZXJDb250ZW50ID0gdXBkYXRlZFNlY3Rpb25zLmpvaW4oXCJcXG5cXG5cIik7XG5cdFx0XHR1cGRhdGVkQm9keSA9IGAke2JlZm9yZUNoYXB0ZXJ9JHtuZXdDaGFwdGVyQ29udGVudH1cXG5cXG4ke2FmdGVyQ2hhcHRlcn1gO1xuXHRcdH1cblxuXHRcdGNvbnN0IHVwZGF0ZWRDb250ZW50ID0gYCR7ZnJvbnRtYXR0ZXJUZXh0fVxcbiR7dXBkYXRlZEJvZHl9YDtcblx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkubW9kaWZ5KGZpbGUsIHVwZGF0ZWRDb250ZW50KTtcblx0fVxuXG5cdC8vIFByb2Nlc3MgdGhlIFwiIyMgQ2hhcHRlcnMsIFNjZW5lcyAmIEJlYXRzXCIgbGlzdCBhbmQgdXBkYXRlIG9yZGVyXG5cdHByaXZhdGUgYXN5bmMgcHJvY2Vzc0NoYXB0ZXJMaXN0KFxuXHRcdGxpc3Q6IFBhcnNlZENoYXB0ZXJMaXN0LFxuXHRcdHN0b3J5SWQ6IHN0cmluZ1xuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBHZXQgZXhpc3RpbmcgY2hhcHRlcnMgZm9yIHRoaXMgc3Rvcnlcblx0XHRjb25zdCBleGlzdGluZ0NoYXB0ZXJzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q2hhcHRlcnMoc3RvcnlJZCk7XG5cdFx0Y29uc3QgY2hhcHRlck1hcCA9IG5ldyBNYXA8c3RyaW5nLCBDaGFwdGVyPigpOyAvLyBNYXAgYnkgbGluayBuYW1lXG5cdFx0Y29uc3QgY2hhcHRlcklkTWFwID0gbmV3IE1hcDxzdHJpbmcsIENoYXB0ZXI+KCk7IC8vIE1hcCBieSBJRFxuXHRcdFxuXHRcdGZvciAoY29uc3QgY2hhcHRlciBvZiBleGlzdGluZ0NoYXB0ZXJzKSB7XG5cdFx0XHRjb25zdCBmaWxlTmFtZSA9IGBDaGFwdGVyLSR7Y2hhcHRlci5udW1iZXJ9Lm1kYDtcblx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRjaGFwdGVyTWFwLnNldChsaW5rTmFtZSwgY2hhcHRlcik7XG5cdFx0XHRjaGFwdGVySWRNYXAuc2V0KGNoYXB0ZXIuaWQsIGNoYXB0ZXIpO1xuXHRcdH1cblxuXHRcdGxldCBjdXJyZW50Q2hhcHRlcjogQ2hhcHRlciB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBjdXJyZW50U2NlbmU6IFNjZW5lIHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IGNoYXB0ZXJPcmRlck51bSA9IDE7IC8vIFN0YXJ0IGZyb20gMSwgd2lsbCBpbmNyZW1lbnQgYXMgd2UgcHJvY2Vzc1xuXHRcdGNvbnN0IHNjZW5lT3JkZXJOdW1zID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTsgLy8gVHJhY2sgb3JkZXJfbnVtIHBlciBjaGFwdGVyXG5cdFx0Y29uc3QgYmVhdE9yZGVyTnVtcyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7IC8vIFRyYWNrIG9yZGVyX251bSBwZXIgc2NlbmVcblxuXHRcdC8vIFByb2Nlc3MgbGlzdCBpdGVtcyAtIG9yZGVyIG1hdHRlcnMhXG5cdFx0Zm9yIChjb25zdCBpdGVtIG9mIGxpc3QuaXRlbXMpIHtcblx0XHRcdGlmIChpdGVtLnR5cGUgPT09IFwiY2hhcHRlclwiKSB7XG5cdFx0XHRcdC8vIFBhcnNlIGNoYXB0ZXIgZGlzcGxheSB0ZXh0XG5cdFx0XHRcdC8vIENhbiBiZTogXCJDaGFwdGVyIE46IHRpdGxlXCIgb3IganVzdCBcInRpdGxlXCJcblx0XHRcdFx0bGV0IHRpdGxlOiBzdHJpbmc7XG5cdFx0XHRcdGxldCBjaGFwdGVyTnVtYmVyOiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuXHRcdFx0XHRjb25zdCBjaGFwdGVyTWF0Y2ggPSBpdGVtLmRpc3BsYXlUZXh0Lm1hdGNoKC9DaGFwdGVyXFxzKyhcXGQrKTpcXHMqKC4rKS8pO1xuXHRcdFx0XHRpZiAoY2hhcHRlck1hdGNoKSB7XG5cdFx0XHRcdFx0Ly8gRm9ybWF0OiBcIkNoYXB0ZXIgTjogdGl0bGVcIlxuXHRcdFx0XHRcdGNoYXB0ZXJOdW1iZXIgPSBwYXJzZUludChjaGFwdGVyTWF0Y2hbMV0sIDEwKTtcblx0XHRcdFx0XHR0aXRsZSA9IGNoYXB0ZXJNYXRjaFsyXS50cmltKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gRm9ybWF0OiBqdXN0IFwidGl0bGVcIlxuXHRcdFx0XHRcdHRpdGxlID0gaXRlbS5kaXNwbGF5VGV4dC50cmltKCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBSZXNldCBzY2VuZSBvcmRlciBmb3IgbmV3IGNoYXB0ZXJcblx0XHRcdFx0Y3VycmVudFNjZW5lID0gbnVsbDtcblx0XHRcdFx0c2NlbmVPcmRlck51bXMuc2V0KFwiY3VycmVudFwiLCAxKTtcblxuXHRcdFx0XHRpZiAoaXRlbS5saW5rTmFtZSkge1xuXHRcdFx0XHRcdC8vIENoYXB0ZXIgZXhpc3RzIC0gZmluZCBpdFxuXHRcdFx0XHRcdGN1cnJlbnRDaGFwdGVyID0gY2hhcHRlck1hcC5nZXQoaXRlbS5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0XHRpZiAoIWN1cnJlbnRDaGFwdGVyKSB7XG5cdFx0XHRcdFx0XHQvLyBUcnkgdG8gZmluZCBieSBJRCBpZiBsaW5rTmFtZSBpcyBhY3R1YWxseSBhbiBJRFxuXHRcdFx0XHRcdFx0Y3VycmVudENoYXB0ZXIgPSBjaGFwdGVySWRNYXAuZ2V0KGl0ZW0ubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChjdXJyZW50Q2hhcHRlcikge1xuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgb3JkZXJfbnVtIG5lZWRzIHRvIGJlIHVwZGF0ZWRcblx0XHRcdFx0XHRcdGNvbnN0IG5lZWRzT3JkZXJVcGRhdGUgPSBjdXJyZW50Q2hhcHRlci5udW1iZXIgIT09IGNoYXB0ZXJPcmRlck51bTtcblx0XHRcdFx0XHRcdGNvbnN0IG5lZWRzVGl0bGVVcGRhdGUgPSB0aXRsZSAhPT0gY3VycmVudENoYXB0ZXIudGl0bGU7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGlmIChuZWVkc09yZGVyVXBkYXRlIHx8IG5lZWRzVGl0bGVVcGRhdGUpIHtcblx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIGNoYXB0ZXIgbnVtYmVyIGFuZCB0aXRsZVxuXHRcdFx0XHRcdFx0XHRjdXJyZW50Q2hhcHRlciA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnVwZGF0ZUNoYXB0ZXIoY3VycmVudENoYXB0ZXIuaWQsIHtcblx0XHRcdFx0XHRcdFx0XHRudW1iZXI6IGNoYXB0ZXJPcmRlck51bSxcblx0XHRcdFx0XHRcdFx0XHR0aXRsZTogbmVlZHNUaXRsZVVwZGF0ZSA/IHRpdGxlIDogdW5kZWZpbmVkLFxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBtYXBzXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGZpbGVOYW1lID0gYENoYXB0ZXItJHtjdXJyZW50Q2hhcHRlci5udW1iZXJ9Lm1kYDtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSBmaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRcdFx0Y2hhcHRlck1hcC5zZXQobGlua05hbWUsIGN1cnJlbnRDaGFwdGVyKTtcblx0XHRcdFx0XHRcdFx0Y2hhcHRlcklkTWFwLnNldChjdXJyZW50Q2hhcHRlci5pZCwgY3VycmVudENoYXB0ZXIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBDcmVhdGUgbmV3IGNoYXB0ZXIgKGlmIHRpdGxlIGlzIHByb3ZpZGVkKVxuXHRcdFx0XHRcdGlmICh0aXRsZSkge1xuXHRcdFx0XHRcdFx0Y3VycmVudENoYXB0ZXIgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDaGFwdGVyKHN0b3J5SWQsIHtcblx0XHRcdFx0XHRcdFx0bnVtYmVyOiBjaGFwdGVyT3JkZXJOdW0sXG5cdFx0XHRcdFx0XHRcdHRpdGxlLFxuXHRcdFx0XHRcdFx0XHRzdGF0dXM6IFwiZHJhZnRcIixcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgbWFwc1xuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSBgQ2hhcHRlci0ke2N1cnJlbnRDaGFwdGVyLm51bWJlcn0ubWRgO1xuXHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSBmaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRcdGNoYXB0ZXJNYXAuc2V0KGxpbmtOYW1lLCBjdXJyZW50Q2hhcHRlcik7XG5cdFx0XHRcdFx0XHRjaGFwdGVySWRNYXAuc2V0KGN1cnJlbnRDaGFwdGVyLmlkLCBjdXJyZW50Q2hhcHRlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBJbml0aWFsaXplIHNjZW5lIG9yZGVyIGZvciB0aGlzIGNoYXB0ZXJcblx0XHRcdFx0aWYgKGN1cnJlbnRDaGFwdGVyKSB7XG5cdFx0XHRcdFx0c2NlbmVPcmRlck51bXMuc2V0KGN1cnJlbnRDaGFwdGVyLmlkLCAxKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0Y2hhcHRlck9yZGVyTnVtKys7XG5cdFx0XHR9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gXCJzY2VuZVwiICYmIGN1cnJlbnRDaGFwdGVyKSB7XG5cdFx0XHRcdC8vIFBhcnNlIHNjZW5lIGRpc3BsYXkgdGV4dFxuXHRcdFx0XHQvLyBDYW4gYmU6IFwiU2NlbmUgTjogZ29hbCAtIHRpbWVSZWZcIiwgXCJnb2FsIC0gdGltZVJlZlwiLCBvciBqdXN0IFwiZ29hbFwiXG5cdFx0XHRcdGxldCBnb2FsOiBzdHJpbmc7XG5cdFx0XHRcdGxldCB0aW1lUmVmOiBzdHJpbmcgPSBcIlwiO1xuXG5cdFx0XHRcdGNvbnN0IHNjZW5lTWF0Y2ggPSBpdGVtLmRpc3BsYXlUZXh0Lm1hdGNoKC9TY2VuZVxccytcXGQrOlxccyooLispLyk7XG5cdFx0XHRcdGlmIChzY2VuZU1hdGNoKSB7XG5cdFx0XHRcdFx0Ly8gRm9ybWF0OiBcIlNjZW5lIE46IGdvYWwgLSB0aW1lUmVmXCIgb3IgXCJTY2VuZSBOOiBnb2FsXCJcblx0XHRcdFx0XHRjb25zdCBzY2VuZVRleHQgPSBzY2VuZU1hdGNoWzFdLnRyaW0oKTtcblx0XHRcdFx0XHRjb25zdCBwYXJ0cyA9IHNjZW5lVGV4dC5zcGxpdCgvXFxzKi1cXHMqLyk7XG5cdFx0XHRcdFx0Z29hbCA9IHBhcnRzWzBdLnRyaW0oKTtcblx0XHRcdFx0XHR0aW1lUmVmID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLSBcIikudHJpbSgpIDogXCJcIjtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBGb3JtYXQ6IFwiZ29hbCAtIHRpbWVSZWZcIiBvciBqdXN0IFwiZ29hbFwiXG5cdFx0XHRcdFx0Y29uc3QgcGFydHMgPSBpdGVtLmRpc3BsYXlUZXh0LnNwbGl0KC9cXHMqLVxccyovKTtcblx0XHRcdFx0XHRnb2FsID0gcGFydHNbMF0udHJpbSgpO1xuXHRcdFx0XHRcdHRpbWVSZWYgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbihcIiAtIFwiKS50cmltKCkgOiBcIlwiO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gR2V0IGN1cnJlbnQgc2NlbmUgb3JkZXJfbnVtIGZvciB0aGlzIGNoYXB0ZXJcblx0XHRcdFx0Y29uc3QgY3VycmVudFNjZW5lT3JkZXJOdW0gPSBzY2VuZU9yZGVyTnVtcy5nZXQoY3VycmVudENoYXB0ZXIuaWQpIHx8IDE7XG5cblx0XHRcdFx0Ly8gUmVzZXQgY3VycmVudFNjZW5lIGJlZm9yZSBwcm9jZXNzaW5nXG5cdFx0XHRcdGN1cnJlbnRTY2VuZSA9IG51bGw7XG5cblx0XHRcdFx0aWYgKGl0ZW0ubGlua05hbWUpIHtcblx0XHRcdFx0XHQvLyBTY2VuZSBleGlzdHMgLSBmaW5kIGl0XG5cdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdTY2VuZXMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRTY2VuZXMoY3VycmVudENoYXB0ZXIuaWQpO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lTWFwID0gbmV3IE1hcDxzdHJpbmcsIFNjZW5lPigpO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lSWRNYXAgPSBuZXcgTWFwPHN0cmluZywgU2NlbmU+KCk7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBleGlzdGluZ1NjZW5lcykge1xuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0c2NlbmVNYXAuc2V0KGxpbmtOYW1lLCBzY2VuZSk7XG5cdFx0XHRcdFx0XHRzY2VuZUlkTWFwLnNldChzY2VuZS5pZCwgc2NlbmUpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGN1cnJlbnRTY2VuZSA9IHNjZW5lTWFwLmdldChpdGVtLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdGlmICghY3VycmVudFNjZW5lKSB7XG5cdFx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBzY2VuZUlkTWFwLmdldChpdGVtLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAoY3VycmVudFNjZW5lKSB7XG5cdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBvcmRlcl9udW0gb3IgY29udGVudCBuZWVkcyB0byBiZSB1cGRhdGVkXG5cdFx0XHRcdFx0XHRjb25zdCBuZWVkc09yZGVyVXBkYXRlID0gY3VycmVudFNjZW5lLm9yZGVyX251bSAhPT0gY3VycmVudFNjZW5lT3JkZXJOdW07XG5cdFx0XHRcdFx0XHRjb25zdCBuZWVkc0NvbnRlbnRVcGRhdGUgPSBnb2FsICE9PSBjdXJyZW50U2NlbmUuZ29hbCB8fCB0aW1lUmVmICE9PSBjdXJyZW50U2NlbmUudGltZV9yZWY7XG5cdFx0XHRcdFx0XHRjb25zdCBuZWVkc0NoYXB0ZXJVcGRhdGUgPSBjdXJyZW50U2NlbmUuY2hhcHRlcl9pZCAhPT0gY3VycmVudENoYXB0ZXIuaWQ7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGlmIChuZWVkc09yZGVyVXBkYXRlIHx8IG5lZWRzQ29udGVudFVwZGF0ZSB8fCBuZWVkc0NoYXB0ZXJVcGRhdGUpIHtcblx0XHRcdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlU2NlbmUoY3VycmVudFNjZW5lLmlkLCB7XG5cdFx0XHRcdFx0XHRcdFx0Z29hbCxcblx0XHRcdFx0XHRcdFx0XHR0aW1lX3JlZjogdGltZVJlZixcblx0XHRcdFx0XHRcdFx0XHRvcmRlcl9udW06IGN1cnJlbnRTY2VuZU9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0XHRcdGNoYXB0ZXJfaWQ6IGN1cnJlbnRDaGFwdGVyLmlkLFxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gSW5pdGlhbGl6ZSBiZWF0IG9yZGVyIGZvciB0aGlzIHNjZW5lIChpbXBvcnRhbnQgZm9yIGVtcHR5IHNjZW5lcylcblx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIHNjZW5lIGFscmVhZHkgaGFzIGJlYXRzLCBpZiBub3QsIHN0YXJ0IGZyb20gMVxuXHRcdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdCZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzKGN1cnJlbnRTY2VuZS5pZCk7XG5cdFx0XHRcdFx0XHRpZiAoZXhpc3RpbmdCZWF0cy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRcdFx0YmVhdE9yZGVyTnVtcy5zZXQoY3VycmVudFNjZW5lLmlkLCAxKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIFNjZW5lIGhhcyBiZWF0cywgdXNlIG1heCBvcmRlcl9udW0gKyAxIGZvciBuZXcgYmVhdHNcblx0XHRcdFx0XHRcdFx0Y29uc3QgbWF4T3JkZXJOdW0gPSBNYXRoLm1heCguLi5leGlzdGluZ0JlYXRzLm1hcChiID0+IGIub3JkZXJfbnVtKSk7XG5cdFx0XHRcdFx0XHRcdGJlYXRPcmRlck51bXMuc2V0KGN1cnJlbnRTY2VuZS5pZCwgbWF4T3JkZXJOdW0gKyAxKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIG5ldyBzY2VuZVxuXHRcdFx0XHRcdGN1cnJlbnRTY2VuZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZVNjZW5lKHtcblx0XHRcdFx0XHRcdHN0b3J5X2lkOiBzdG9yeUlkLFxuXHRcdFx0XHRcdFx0Y2hhcHRlcl9pZDogY3VycmVudENoYXB0ZXIuaWQsXG5cdFx0XHRcdFx0XHRvcmRlcl9udW06IGN1cnJlbnRTY2VuZU9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0Z29hbCxcblx0XHRcdFx0XHRcdHRpbWVfcmVmOiB0aW1lUmVmLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIEluaXRpYWxpemUgYmVhdCBvcmRlciBmb3IgbmV3IHNjZW5lIChzdGFydHMgYXQgMSlcblx0XHRcdFx0XHRiZWF0T3JkZXJOdW1zLnNldChjdXJyZW50U2NlbmUuaWQsIDEpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBJbmNyZW1lbnQgc2NlbmUgb3JkZXIgZm9yIG5leHQgc2NlbmUgaW4gdGhpcyBjaGFwdGVyXG5cdFx0XHRcdHNjZW5lT3JkZXJOdW1zLnNldChjdXJyZW50Q2hhcHRlci5pZCwgY3VycmVudFNjZW5lT3JkZXJOdW0gKyAxKTtcblx0XHRcdH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSBcImJlYXRcIiAmJiBjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0Ly8gUGFyc2UgYmVhdCBkaXNwbGF5IHRleHRcblx0XHRcdFx0Ly8gQ2FuIGJlOiBcIkJlYXQgTjogaW50ZW50IC0+IG91dGNvbWVcIiwgXCJpbnRlbnQgLT4gb3V0Y29tZVwiLCBvciBqdXN0IFwiaW50ZW50XCJcblx0XHRcdFx0bGV0IGludGVudDogc3RyaW5nO1xuXHRcdFx0XHRsZXQgb3V0Y29tZTogc3RyaW5nID0gXCJcIjtcblxuXHRcdFx0XHRjb25zdCBiZWF0TWF0Y2ggPSBpdGVtLmRpc3BsYXlUZXh0Lm1hdGNoKC9CZWF0XFxzK1xcZCs6XFxzKiguKykvKTtcblx0XHRcdFx0aWYgKGJlYXRNYXRjaCkge1xuXHRcdFx0XHRcdC8vIEZvcm1hdDogXCJCZWF0IE46IGludGVudCAtPiBvdXRjb21lXCIgb3IgXCJCZWF0IE46IGludGVudFwiXG5cdFx0XHRcdFx0Y29uc3QgYmVhdFRleHQgPSBiZWF0TWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0XHRcdGNvbnN0IHBhcnRzID0gYmVhdFRleHQuc3BsaXQoL1xccyotPlxccyovKTtcblx0XHRcdFx0XHRpbnRlbnQgPSBwYXJ0c1swXS50cmltKCk7XG5cdFx0XHRcdFx0b3V0Y29tZSA9IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0+IFwiKS50cmltKCkgOiBcIlwiO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIEZvcm1hdDogXCJpbnRlbnQgLT4gb3V0Y29tZVwiIG9yIGp1c3QgXCJpbnRlbnRcIlxuXHRcdFx0XHRcdGNvbnN0IHBhcnRzID0gaXRlbS5kaXNwbGF5VGV4dC5zcGxpdCgvXFxzKi0+XFxzKi8pO1xuXHRcdFx0XHRcdGludGVudCA9IHBhcnRzWzBdLnRyaW0oKTtcblx0XHRcdFx0XHRvdXRjb21lID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLT4gXCIpLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBHZXQgY3VycmVudCBiZWF0IG9yZGVyX251bSBmb3IgdGhpcyBzY2VuZVxuXHRcdFx0XHRjb25zdCBjdXJyZW50QmVhdE9yZGVyTnVtID0gYmVhdE9yZGVyTnVtcy5nZXQoY3VycmVudFNjZW5lLmlkKSB8fCAxO1xuXG5cdFx0XHRcdGlmIChpdGVtLmxpbmtOYW1lKSB7XG5cdFx0XHRcdFx0Ly8gQmVhdCBleGlzdHMgLSBmaW5kIGl0XG5cdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdCZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzKGN1cnJlbnRTY2VuZS5pZCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBCZWF0PigpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRJZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBCZWF0PigpO1xuXHRcdFx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBleGlzdGluZ0JlYXRzKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0YmVhdE1hcC5zZXQobGlua05hbWUsIGJlYXQpO1xuXHRcdFx0XHRcdFx0YmVhdElkTWFwLnNldChiZWF0LmlkLCBiZWF0KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRsZXQgY3VycmVudEJlYXQgPSBiZWF0TWFwLmdldChpdGVtLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdGlmICghY3VycmVudEJlYXQpIHtcblx0XHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYmVhdElkTWFwLmdldChpdGVtLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAoY3VycmVudEJlYXQpIHtcblx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIG9yZGVyX251bSBvciBjb250ZW50IG5lZWRzIHRvIGJlIHVwZGF0ZWRcblx0XHRcdFx0XHRcdGNvbnN0IG5lZWRzT3JkZXJVcGRhdGUgPSBjdXJyZW50QmVhdC5vcmRlcl9udW0gIT09IGN1cnJlbnRCZWF0T3JkZXJOdW07XG5cdFx0XHRcdFx0XHRjb25zdCBuZWVkc0NvbnRlbnRVcGRhdGUgPSBpbnRlbnQgIT09IGN1cnJlbnRCZWF0LmludGVudCB8fCBvdXRjb21lICE9PSBjdXJyZW50QmVhdC5vdXRjb21lO1xuXHRcdFx0XHRcdFx0Y29uc3QgbmVlZHNTY2VuZVVwZGF0ZSA9IGN1cnJlbnRCZWF0LnNjZW5lX2lkICE9PSBjdXJyZW50U2NlbmUuaWQ7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGlmIChuZWVkc09yZGVyVXBkYXRlIHx8IG5lZWRzQ29udGVudFVwZGF0ZSB8fCBuZWVkc1NjZW5lVXBkYXRlKSB7XG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQmVhdChjdXJyZW50QmVhdC5pZCwge1xuXHRcdFx0XHRcdFx0XHRcdGludGVudCxcblx0XHRcdFx0XHRcdFx0XHRvdXRjb21lLFxuXHRcdFx0XHRcdFx0XHRcdG9yZGVyX251bTogY3VycmVudEJlYXRPcmRlck51bSxcblx0XHRcdFx0XHRcdFx0XHRzY2VuZV9pZDogY3VycmVudFNjZW5lLmlkLFxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIG5ldyBiZWF0XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQmVhdCh7XG5cdFx0XHRcdFx0XHRzY2VuZV9pZDogY3VycmVudFNjZW5lLmlkLFxuXHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBjdXJyZW50QmVhdE9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0dHlwZTogXCJzZXR1cFwiLCAvLyBEZWZhdWx0IHR5cGVcblx0XHRcdFx0XHRcdGludGVudCxcblx0XHRcdFx0XHRcdG91dGNvbWUsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdC8vIEluY3JlbWVudCBiZWF0IG9yZGVyIGZvciBuZXh0IGJlYXQgaW4gdGhpcyBzY2VuZVxuXHRcdFx0XHRiZWF0T3JkZXJOdW1zLnNldChjdXJyZW50U2NlbmUuaWQsIGN1cnJlbnRCZWF0T3JkZXJOdW0gKyAxKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBQcm9jZXNzIHRoZSBcIiMjIEJlYXRzXCIgbGlzdCBmcm9tIGEgc2NlbmUgZmlsZSBhbmQgdXBkYXRlIGJlYXQgb3JkZXJcblx0cHJpdmF0ZSBhc3luYyBwdXNoU2NlbmVCZWF0cyhzY2VuZUZpbGVQYXRoOiBzdHJpbmcsIHN0b3J5SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdC8vIFJlYWQgc2NlbmUgZmlsZVxuXHRcdGNvbnN0IGZpbGUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHNjZW5lRmlsZVBhdGgpO1xuXHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBzY2VuZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkucmVhZChmaWxlKTtcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMuZmlsZU1hbmFnZXIucGFyc2VGcm9udG1hdHRlcihzY2VuZUNvbnRlbnQpO1xuXG5cdFx0aWYgKCFmcm9udG1hdHRlci5pZCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IHNjZW5lSWQgPSBmcm9udG1hdHRlci5pZDtcblxuXHRcdC8vIFBhcnNlIGJlYXQgbGlzdCBmcm9tIHNjZW5lIGZpbGVcblx0XHRjb25zdCBiZWF0TGlzdCA9IHBhcnNlQmVhdExpc3Qoc2NlbmVDb250ZW50KTtcblx0XHRcblx0XHRpZiAoYmVhdExpc3QuaXRlbXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IGV4aXN0aW5nIGJlYXRzIGZvciB0aGlzIHNjZW5lXG5cdFx0Y29uc3QgZXhpc3RpbmdCZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzKHNjZW5lSWQpO1xuXHRcdGNvbnN0IGJlYXRNYXAgPSBuZXcgTWFwPHN0cmluZywgQmVhdD4oKTsgLy8gTWFwIGJ5IGxpbmsgbmFtZVxuXHRcdGNvbnN0IGJlYXRJZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBCZWF0PigpOyAvLyBNYXAgYnkgSURcblx0XHRcblx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgZXhpc3RpbmdCZWF0cykge1xuXHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0Y29uc3QgbGlua05hbWUgPSBmaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdGJlYXRNYXAuc2V0KGxpbmtOYW1lLCBiZWF0KTtcblx0XHRcdGJlYXRJZE1hcC5zZXQoYmVhdC5pZCwgYmVhdCk7XG5cdFx0fVxuXG5cdFx0bGV0IGJlYXRPcmRlck51bSA9IDE7IC8vIFN0YXJ0IGZyb20gMSwgd2lsbCBpbmNyZW1lbnQgYXMgd2UgcHJvY2Vzc1xuXG5cdFx0Ly8gUHJvY2VzcyBsaXN0IGl0ZW1zIC0gb3JkZXIgbWF0dGVycyFcblx0XHRmb3IgKGNvbnN0IGl0ZW0gb2YgYmVhdExpc3QuaXRlbXMpIHtcblx0XHRcdC8vIFBhcnNlIGJlYXQgZGlzcGxheSB0ZXh0XG5cdFx0XHQvLyBDYW4gYmU6IFwiQmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZVwiLCBcImludGVudCAtPiBvdXRjb21lXCIsIG9yIGp1c3QgXCJpbnRlbnRcIlxuXHRcdFx0bGV0IGludGVudDogc3RyaW5nO1xuXHRcdFx0bGV0IG91dGNvbWU6IHN0cmluZyA9IFwiXCI7XG5cblx0XHRcdGNvbnN0IGJlYXRNYXRjaCA9IGl0ZW0uZGlzcGxheVRleHQubWF0Y2goL0JlYXRcXHMrXFxkKzpcXHMqKC4rKS8pO1xuXHRcdFx0aWYgKGJlYXRNYXRjaCkge1xuXHRcdFx0XHQvLyBGb3JtYXQ6IFwiQmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZVwiIG9yIFwiQmVhdCBOOiBpbnRlbnRcIlxuXHRcdFx0XHRjb25zdCBiZWF0VGV4dCA9IGJlYXRNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRcdGNvbnN0IHBhcnRzID0gYmVhdFRleHQuc3BsaXQoL1xccyotPlxccyovKTtcblx0XHRcdFx0aW50ZW50ID0gcGFydHNbMF0udHJpbSgpO1xuXHRcdFx0XHRvdXRjb21lID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLT4gXCIpLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBGb3JtYXQ6IFwiaW50ZW50IC0+IG91dGNvbWVcIiBvciBqdXN0IFwiaW50ZW50XCJcblx0XHRcdFx0Y29uc3QgcGFydHMgPSBpdGVtLmRpc3BsYXlUZXh0LnNwbGl0KC9cXHMqLT5cXHMqLyk7XG5cdFx0XHRcdGludGVudCA9IHBhcnRzWzBdLnRyaW0oKTtcblx0XHRcdFx0b3V0Y29tZSA9IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0+IFwiKS50cmltKCkgOiBcIlwiO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoaXRlbS5saW5rTmFtZSkge1xuXHRcdFx0XHQvLyBCZWF0IGV4aXN0cyAtIGZpbmQgaXRcblx0XHRcdFx0bGV0IGN1cnJlbnRCZWF0ID0gYmVhdE1hcC5nZXQoaXRlbS5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0aWYgKCFjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdC8vIFRyeSB0byBmaW5kIGJ5IElEIGlmIGxpbmtOYW1lIGlzIGFjdHVhbGx5IGFuIElEXG5cdFx0XHRcdFx0Y3VycmVudEJlYXQgPSBiZWF0SWRNYXAuZ2V0KGl0ZW0ubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdGlmIChjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdC8vIENoZWNrIGlmIG9yZGVyX251bSBvciBjb250ZW50IG5lZWRzIHRvIGJlIHVwZGF0ZWRcblx0XHRcdFx0XHRjb25zdCBuZWVkc09yZGVyVXBkYXRlID0gY3VycmVudEJlYXQub3JkZXJfbnVtICE9PSBiZWF0T3JkZXJOdW07XG5cdFx0XHRcdFx0Y29uc3QgbmVlZHNDb250ZW50VXBkYXRlID0gaW50ZW50ICE9PSBjdXJyZW50QmVhdC5pbnRlbnQgfHwgb3V0Y29tZSAhPT0gY3VycmVudEJlYXQub3V0Y29tZTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAobmVlZHNPcmRlclVwZGF0ZSB8fCBuZWVkc0NvbnRlbnRVcGRhdGUpIHtcblx0XHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQmVhdChjdXJyZW50QmVhdC5pZCwge1xuXHRcdFx0XHRcdFx0XHRpbnRlbnQsXG5cdFx0XHRcdFx0XHRcdG91dGNvbWUsXG5cdFx0XHRcdFx0XHRcdG9yZGVyX251bTogYmVhdE9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBDcmVhdGUgbmV3IGJlYXRcblx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQmVhdCh7XG5cdFx0XHRcdFx0c2NlbmVfaWQ6IHNjZW5lSWQsXG5cdFx0XHRcdFx0b3JkZXJfbnVtOiBiZWF0T3JkZXJOdW0sXG5cdFx0XHRcdFx0dHlwZTogXCJzZXR1cFwiLCAvLyBEZWZhdWx0IHR5cGVcblx0XHRcdFx0XHRpbnRlbnQsXG5cdFx0XHRcdFx0b3V0Y29tZSxcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGJlYXRPcmRlck51bSsrO1xuXHRcdH1cblx0fVxuXG5cdC8vIFB1c2ggcHJvc2UgYmxvY2tzIGZyb20gYSBzdG9yeSBmaWxlIHdpdGggaGllcmFyY2hpY2FsIHN0cnVjdHVyZVxuXHQvLyBGb3JtYXQ6ICMgU3Rvcnk6IHRpdGxlLCAjIyBDaGFwdGVyOiB0aXRsZSwgIyMjIFNjZW5lOiB0aXRsZSwgIyMjIyBCZWF0OiB0aXRsZVxuXHRwcml2YXRlIGFzeW5jIHB1c2hTdG9yeUNvbnRlbnRCbG9ja3Moc3RvcnlGaWxlUGF0aDogc3RyaW5nLCBzdG9yeUZvbGRlclBhdGg6IHN0cmluZywgc3RvcnlJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoc3RvcnlGaWxlUGF0aCk7XG5cdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBTdG9yeSBmaWxlIG5vdCBmb3VuZDogJHtzdG9yeUZpbGVQYXRofWApO1xuXHRcdH1cblxuXHRcdGNvbnN0IHN0b3J5Q29udGVudCA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5yZWFkKGZpbGUpO1xuXHRcdGNvbnN0IGNvbnRlbnRzRm9sZGVyUGF0aCA9IGAke3N0b3J5Rm9sZGVyUGF0aH0vMDMtY29udGVudHNgO1xuXG5cdFx0Ly8gUGFyc2UgaGllcmFyY2hpY2FsIHByb3NlIGZyb20gc3RvcnkgY29udGVudFxuXHRcdGNvbnN0IHN0b3J5UHJvc2UgPSBwYXJzZVN0b3J5UHJvc2Uoc3RvcnlDb250ZW50KTtcblx0XHRcblx0XHRpZiAoc3RvcnlQcm9zZS5zZWN0aW9ucy5sZW5ndGggPT09IDApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBHZXQgZXhpc3RpbmcgY2hhcHRlcnMsIHNjZW5lcywgYmVhdHNcblx0XHRjb25zdCBleGlzdGluZ0NoYXB0ZXJzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q2hhcHRlcnMoc3RvcnlJZCk7XG5cdFx0Y29uc3QgY2hhcHRlckJ5VGl0bGUgPSBuZXcgTWFwPHN0cmluZywgQ2hhcHRlcj4oKTtcblx0XHRmb3IgKGNvbnN0IGNoIG9mIGV4aXN0aW5nQ2hhcHRlcnMpIHtcblx0XHRcdGNoYXB0ZXJCeVRpdGxlLnNldChjaC50aXRsZS50b0xvd2VyQ2FzZSgpLCBjaCk7XG5cdFx0fVxuXG5cdFx0Ly8gVHJhY2sgY3VycmVudCBjb250ZXh0XG5cdFx0bGV0IGN1cnJlbnRDaGFwdGVyOiBDaGFwdGVyIHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IGN1cnJlbnRTY2VuZTogU2NlbmUgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgY3VycmVudEJlYXQ6IEJlYXQgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgcHJvc2VPcmRlck51bSA9IDE7XG5cblx0XHQvLyBNYXBzIGZvciBzY2VuZXMgYW5kIGJlYXRzXG5cdFx0Y29uc3Qgc2NlbmVNYXAgPSBuZXcgTWFwPHN0cmluZywgU2NlbmU+KCk7XG5cdFx0Y29uc3QgYmVhdE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBCZWF0PigpO1xuXG5cdFx0Ly8gQ2FjaGUgZm9yIHJlbW90ZSBjb250ZW50IGJsb2NrcyBieSBjaGFwdGVyIElEIChhdm9pZHMgTisxIHF1ZXJpZXMpXG5cdFx0Y29uc3QgcmVtb3RlQ29udGVudEJsb2Nrc0NhY2hlID0gbmV3IE1hcDxzdHJpbmcsIE1hcDxzdHJpbmcsIENvbnRlbnRCbG9jaz4+KCk7XG5cdFx0Y29uc3QgZ2V0UmVtb3RlQ29udGVudEJsb2Nrc01hcCA9IGFzeW5jIChjaGFwdGVySWQ6IHN0cmluZyk6IFByb21pc2U8TWFwPHN0cmluZywgQ29udGVudEJsb2NrPj4gPT4ge1xuXHRcdFx0aWYgKCFyZW1vdGVDb250ZW50QmxvY2tzQ2FjaGUuaGFzKGNoYXB0ZXJJZCkpIHtcblx0XHRcdFx0Y29uc3QgYmxvY2tzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2NrcyhjaGFwdGVySWQpO1xuXHRcdFx0XHRjb25zdCBtYXAgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudEJsb2NrPigpO1xuXHRcdFx0XHRmb3IgKGNvbnN0IHBiIG9mIGJsb2Nrcykge1xuXHRcdFx0XHRcdG1hcC5zZXQocGIuaWQsIHBiKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZW1vdGVDb250ZW50QmxvY2tzQ2FjaGUuc2V0KGNoYXB0ZXJJZCwgbWFwKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZW1vdGVDb250ZW50QmxvY2tzQ2FjaGUuZ2V0KGNoYXB0ZXJJZCkhO1xuXHRcdH07XG5cblx0XHQvLyBQcm9jZXNzIGVhY2ggc2VjdGlvblxuXHRcdGZvciAoY29uc3Qgc2VjdGlvbiBvZiBzdG9yeVByb3NlLnNlY3Rpb25zKSB7XG5cdFx0XHRpZiAoc2VjdGlvbi50eXBlID09PSBcInNjZW5lXCIgJiYgc2VjdGlvbi5zY2VuZSkge1xuXHRcdFx0XHRjb25zdCB7IHNjZW5lOiBwYXJzZWRTY2VuZSB9ID0gc2VjdGlvbjtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIElmIG5vIGN1cnJlbnQgY2hhcHRlciwgY3JlYXRlIGEgZGVmYXVsdCBvbmUgZm9yIG9ycGhhbiBzY2VuZXNcblx0XHRcdFx0aWYgKCFjdXJyZW50Q2hhcHRlcikge1xuXHRcdFx0XHRcdGN1cnJlbnRDaGFwdGVyID0gY2hhcHRlckJ5VGl0bGUuZ2V0KFwic3RvcnkgcHJvc2VcIikgfHwgbnVsbDtcblx0XHRcdFx0XHRpZiAoIWN1cnJlbnRDaGFwdGVyKSB7XG5cdFx0XHRcdFx0XHRjdXJyZW50Q2hhcHRlciA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNoYXB0ZXIoc3RvcnlJZCwge1xuXHRcdFx0XHRcdFx0XHRudW1iZXI6IDk5OTksXG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcIlN0b3J5IFByb3NlXCIsXG5cdFx0XHRcdFx0XHRcdHN0YXR1czogXCJkcmFmdFwiLFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRjaGFwdGVyQnlUaXRsZS5zZXQoXCJzdG9yeSBwcm9zZVwiLCBjdXJyZW50Q2hhcHRlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gRmluZCBvciBjcmVhdGUgc2NlbmVcblx0XHRcdFx0aWYgKHBhcnNlZFNjZW5lLmxpbmtOYW1lKSB7XG5cdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gc2NlbmVNYXAuZ2V0KHBhcnNlZFNjZW5lLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoIWN1cnJlbnRTY2VuZSAmJiBwYXJzZWRTY2VuZS5nb2FsKSB7XG5cdFx0XHRcdFx0Ly8gVHJ5IHRvIGZpbmQgYnkgZ29hbFxuXHRcdFx0XHRcdGNvbnN0IGFsbFNjZW5lcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFNjZW5lcyhjdXJyZW50Q2hhcHRlci5pZCk7XG5cdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gYWxsU2NlbmVzLmZpbmQocyA9PiBzLmdvYWwgPT09IHBhcnNlZFNjZW5lLmdvYWwpIHx8IG51bGw7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIWN1cnJlbnRTY2VuZSkge1xuXHRcdFx0XHRcdC8vIENyZWF0ZSBuZXcgc2NlbmVcblx0XHRcdFx0XHRjb25zdCBleGlzdGluZ1NjZW5lcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFNjZW5lcyhjdXJyZW50Q2hhcHRlci5pZCk7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVPcmRlck51bSA9IGV4aXN0aW5nU2NlbmVzLmxlbmd0aCA+IDBcblx0XHRcdFx0XHRcdD8gTWF0aC5tYXgoLi4uZXhpc3RpbmdTY2VuZXMubWFwKHMgPT4gcy5vcmRlcl9udW0pKSArIDFcblx0XHRcdFx0XHRcdDogMTtcblxuXHRcdFx0XHRcdGN1cnJlbnRTY2VuZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZVNjZW5lKHtcblx0XHRcdFx0XHRcdHN0b3J5X2lkOiBzdG9yeUlkLFxuXHRcdFx0XHRcdFx0Y2hhcHRlcl9pZDogY3VycmVudENoYXB0ZXIuaWQsXG5cdFx0XHRcdFx0XHRvcmRlcl9udW06IHNjZW5lT3JkZXJOdW0sXG5cdFx0XHRcdFx0XHRnb2FsOiBwYXJzZWRTY2VuZS5nb2FsLFxuXHRcdFx0XHRcdFx0dGltZV9yZWY6IHBhcnNlZFNjZW5lLnRpbWVSZWYsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly8gU2NlbmUgZmlsZSB3aWxsIGJlIGNyZWF0ZWQgZHVyaW5nIHB1bGxcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZVNjZW5lRmlsZU5hbWUoY3VycmVudFNjZW5lKTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUxpbmtOYW1lID0gc2NlbmVGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRzY2VuZU1hcC5zZXQoc2NlbmVMaW5rTmFtZSwgY3VycmVudFNjZW5lKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGN1cnJlbnRCZWF0ID0gbnVsbDtcblx0XHRcdFx0cHJvc2VPcmRlck51bSA9IDE7XG5cblx0XHRcdH0gZWxzZSBpZiAoc2VjdGlvbi50eXBlID09PSBcImJlYXRcIiAmJiBzZWN0aW9uLmJlYXQpIHtcblx0XHRcdFx0Y29uc3QgeyBiZWF0OiBwYXJzZWRCZWF0IH0gPSBzZWN0aW9uO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKCFjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0XHQvLyBDYW4ndCBjcmVhdGUgYmVhdCB3aXRob3V0IHNjZW5lIC0gc2tpcFxuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gRmluZCBvciBjcmVhdGUgYmVhdFxuXHRcdFx0XHRpZiAocGFyc2VkQmVhdC5saW5rTmFtZSkge1xuXHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYmVhdE1hcC5nZXQocGFyc2VkQmVhdC5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICghY3VycmVudEJlYXQgJiYgcGFyc2VkQmVhdC5pbnRlbnQpIHtcblx0XHRcdFx0XHRjb25zdCBhbGxCZWF0cyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXRzKGN1cnJlbnRTY2VuZS5pZCk7XG5cdFx0XHRcdFx0Y3VycmVudEJlYXQgPSBhbGxCZWF0cy5maW5kKGIgPT4gYi5pbnRlbnQgPT09IHBhcnNlZEJlYXQuaW50ZW50KSB8fCBudWxsO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCFjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nQmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0cyhjdXJyZW50U2NlbmUuaWQpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRPcmRlck51bSA9IGV4aXN0aW5nQmVhdHMubGVuZ3RoID4gMFxuXHRcdFx0XHRcdFx0PyBNYXRoLm1heCguLi5leGlzdGluZ0JlYXRzLm1hcChiID0+IGIub3JkZXJfbnVtKSkgKyAxXG5cdFx0XHRcdFx0XHQ6IDE7XG5cblx0XHRcdFx0XHRjdXJyZW50QmVhdCA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUJlYXQoe1xuXHRcdFx0XHRcdFx0c2NlbmVfaWQ6IGN1cnJlbnRTY2VuZS5pZCxcblx0XHRcdFx0XHRcdG9yZGVyX251bTogYmVhdE9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0dHlwZTogXCJzZXR1cFwiLFxuXHRcdFx0XHRcdFx0aW50ZW50OiBwYXJzZWRCZWF0LmludGVudCxcblx0XHRcdFx0XHRcdG91dGNvbWU6IHBhcnNlZEJlYXQub3V0Y29tZSxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvLyBCZWF0IGZpbGUgd2lsbCBiZSBjcmVhdGVkIGR1cmluZyBwdWxsXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoY3VycmVudEJlYXQpIHtcblx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGN1cnJlbnRCZWF0KTtcblx0XHRcdFx0XHRjb25zdCBiZWF0TGlua05hbWUgPSBiZWF0RmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0YmVhdE1hcC5zZXQoYmVhdExpbmtOYW1lLCBjdXJyZW50QmVhdCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIGlmIChzZWN0aW9uLnR5cGUgPT09IFwicHJvc2VcIiAmJiBzZWN0aW9uLnByb3NlKSB7XG5cdFx0XHRcdGNvbnN0IHsgcHJvc2U6IHBhcmFncmFwaCB9ID0gc2VjdGlvbjtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIE5lZWQgYSBjaGFwdGVyIGZvciBwcm9zZSBibG9ja3Ncblx0XHRcdFx0aWYgKCFjdXJyZW50Q2hhcHRlcikge1xuXHRcdFx0XHRcdGN1cnJlbnRDaGFwdGVyID0gY2hhcHRlckJ5VGl0bGUuZ2V0KFwic3RvcnkgcHJvc2VcIikgfHwgbnVsbDtcblx0XHRcdFx0XHRpZiAoIWN1cnJlbnRDaGFwdGVyKSB7XG5cdFx0XHRcdFx0XHRjdXJyZW50Q2hhcHRlciA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNoYXB0ZXIoc3RvcnlJZCwge1xuXHRcdFx0XHRcdFx0XHRudW1iZXI6IDk5OTksXG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcIlN0b3J5IFByb3NlXCIsXG5cdFx0XHRcdFx0XHRcdHN0YXR1czogXCJkcmFmdFwiLFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRjaGFwdGVyQnlUaXRsZS5zZXQoXCJzdG9yeSBwcm9zZVwiLCBjdXJyZW50Q2hhcHRlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gR2V0IHJlbW90ZSBwcm9zZSBibG9ja3MgZm9yIGN1cnJlbnQgY2hhcHRlciAodXNpbmcgY2FjaGUpXG5cdFx0XHRcdGNvbnN0IHJlbW90ZUNvbnRlbnRCbG9ja3NNYXAgPSBhd2FpdCBnZXRSZW1vdGVDb250ZW50QmxvY2tzTWFwKGN1cnJlbnRDaGFwdGVyLmlkKTtcblxuXHRcdFx0XHRsZXQgbG9jYWxDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayB8IG51bGwgPSBudWxsO1xuXHRcdFx0XHRsZXQgcmVtb3RlQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2sgfCBudWxsID0gbnVsbDtcblxuXHRcdFx0XHRpZiAocGFyYWdyYXBoLmxpbmtOYW1lKSB7XG5cdFx0XHRcdFx0Ly8gU2VhcmNoIGZvciBmaWxlIGluIHR5cGUgc3ViZm9sZGVyc1xuXHRcdFx0XHRcdGNvbnN0IGNvbnRlbnRCbG9ja0ZpbGVQYXRoID0gYXdhaXQgdGhpcy5maW5kQ29udGVudEJsb2NrRmlsZUJ5TGlua05hbWUoY29udGVudHNGb2xkZXJQYXRoLCBwYXJhZ3JhcGgubGlua05hbWUpO1xuXHRcdFx0XHRcdGlmIChjb250ZW50QmxvY2tGaWxlUGF0aCkge1xuXHRcdFx0XHRcdFx0bG9jYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLnJlYWRDb250ZW50QmxvY2tGcm9tRmlsZShjb250ZW50QmxvY2tGaWxlUGF0aCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCFsb2NhbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0bG9jYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tCeUNvbnRlbnQoY29udGVudHNGb2xkZXJQYXRoLCBwYXJhZ3JhcGguY29udGVudCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGxvY2FsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRyZW1vdGVDb250ZW50QmxvY2sgPSByZW1vdGVDb250ZW50QmxvY2tzTWFwLmdldChsb2NhbENvbnRlbnRCbG9jay5pZCkgfHwgbnVsbDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29uc3Qgbm9ybWFsaXplZENvbnRlbnQgPSBwYXJhZ3JhcGguY29udGVudC50cmltKCk7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IFssIHJlbW90ZVBCXSBvZiByZW1vdGVDb250ZW50QmxvY2tzTWFwLmVudHJpZXMoKSkge1xuXHRcdFx0XHRcdFx0XHRpZiAocmVtb3RlUEIuY29udGVudC50cmltKCkgPT09IG5vcm1hbGl6ZWRDb250ZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVtb3RlQ29udGVudEJsb2NrID0gcmVtb3RlUEI7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bG9jYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tCeUNvbnRlbnQoY29udGVudHNGb2xkZXJQYXRoLCBwYXJhZ3JhcGguY29udGVudCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29uc3Qgbm9ybWFsaXplZENvbnRlbnQgPSBwYXJhZ3JhcGguY29udGVudC50cmltKCk7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBbLCByZW1vdGVQQl0gb2YgcmVtb3RlQ29udGVudEJsb2Nrc01hcC5lbnRyaWVzKCkpIHtcblx0XHRcdFx0XHRcdGlmIChyZW1vdGVQQi5jb250ZW50LnRyaW0oKSA9PT0gbm9ybWFsaXplZENvbnRlbnQpIHtcblx0XHRcdFx0XHRcdFx0cmVtb3RlQ29udGVudEJsb2NrID0gcmVtb3RlUEI7XG5cdFx0XHRcdFx0XHRcdGlmICghbG9jYWxDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmluZENvbnRlbnRCbG9ja0J5SWQoY29udGVudHNGb2xkZXJQYXRoLCByZW1vdGVQQi5pZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3Qgc3RhdHVzID0gY29tcGFyZUNvbnRlbnRCbG9ja3MocGFyYWdyYXBoLCBsb2NhbENvbnRlbnRCbG9jaywgcmVtb3RlQ29udGVudEJsb2NrKTtcblx0XHRcdFx0bGV0IGZpbmFsQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2s7XG5cblx0XHRcdFx0c3dpdGNoIChzdGF0dXMpIHtcblx0XHRcdFx0XHRjYXNlIFwibmV3XCI6IHtcblx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEJsb2NrKGN1cnJlbnRDaGFwdGVyLmlkLCB7XG5cdFx0XHRcdFx0XHRcdG9yZGVyX251bTogcHJvc2VPcmRlck51bSsrLFxuXHRcdFx0XHRcdFx0XHRraW5kOiBcImZpbmFsXCIsXG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQ6IHBhcmFncmFwaC5jb250ZW50LFxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdC8vIENyZWF0ZSBmaWxlIGluIGNvcnJlY3QgdHlwZSBzdWJmb2xkZXJcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblxuXHRcdFx0XHRcdFx0Ly8gQ3JlYXRlIHJlZmVyZW5jZXNcblx0XHRcdFx0XHRcdGlmIChjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJzY2VuZVwiLCBjdXJyZW50U2NlbmUuaWQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRCZWF0KSB7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRBbmNob3IoZmluYWxDb250ZW50QmxvY2suaWQsIFwiYmVhdFwiLCBjdXJyZW50QmVhdC5pZCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwidW5jaGFuZ2VkXCI6IHtcblx0XHRcdFx0XHRcdGlmICghbG9jYWxDb250ZW50QmxvY2sgJiYgcmVtb3RlQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gcmVtb3RlQ29udGVudEJsb2NrO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobG9jYWxDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBsb2NhbENvbnRlbnRCbG9jaztcblx0XHRcdFx0XHRcdFx0cHJvc2VPcmRlck51bSsrO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSByZW1vdGVDb250ZW50QmxvY2shO1xuXHRcdFx0XHRcdFx0XHRwcm9zZU9yZGVyTnVtKys7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwibG9jYWxfbW9kaWZpZWRcIjoge1xuXHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVDb250ZW50QmxvY2sobG9jYWxDb250ZW50QmxvY2shLmlkLCB7XG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQ6IHBhcmFncmFwaC5jb250ZW50LFxuXHRcdFx0XHRcdFx0XHRvcmRlcl9udW06IHByb3NlT3JkZXJOdW0rKyxcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQ29udGVudEJsb2NrRmlsZShmaW5hbENvbnRlbnRCbG9jaywgZmlsZVBhdGgsIHVuZGVmaW5lZCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwicmVtb3RlX21vZGlmaWVkXCI6IHtcblx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gcmVtb3RlQ29udGVudEJsb2NrITtcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblx0XHRcdFx0XHRcdHByb3NlT3JkZXJOdW0rKztcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhc2UgXCJjb25mbGljdFwiOiB7XG5cdFx0XHRcdFx0XHRjb25zdCByZXNvbHV0aW9uID0gYXdhaXQgdGhpcy5yZXNvbHZlQ29uZmxpY3QobG9jYWxDb250ZW50QmxvY2shLCByZW1vdGVDb250ZW50QmxvY2shKTtcblx0XHRcdFx0XHRcdGxldCByZXNvbHZlZENvbnRlbnQgPSByZXNvbHV0aW9uLnJlc29sdXRpb24gPT09IFwibG9jYWxcIiBcblx0XHRcdFx0XHRcdFx0PyBwYXJhZ3JhcGguY29udGVudCBcblx0XHRcdFx0XHRcdFx0OiByZXNvbHV0aW9uLnJlc29sdXRpb24gPT09IFwicmVtb3RlXCIgXG5cdFx0XHRcdFx0XHRcdFx0PyByZW1vdGVDb250ZW50QmxvY2shLmNvbnRlbnQgXG5cdFx0XHRcdFx0XHRcdFx0OiByZXNvbHV0aW9uLm1lcmdlZENvbnRlbnQgfHwgcGFyYWdyYXBoLmNvbnRlbnQ7XG5cblx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQ29udGVudEJsb2NrKGxvY2FsQ29udGVudEJsb2NrIS5pZCwge1xuXHRcdFx0XHRcdFx0XHRjb250ZW50OiByZXNvbHZlZENvbnRlbnQsXG5cdFx0XHRcdFx0XHRcdG9yZGVyX251bTogcHJvc2VPcmRlck51bSsrLFxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFB1c2ggcHJvc2UgYmxvY2tzIGZyb20gYSBzY2VuZSBmaWxlIChzY2VuZS1sZXZlbCBwcm9zZSwgbm90IGluc2lkZSBjaGFwdGVycylcblx0cHJpdmF0ZSBhc3luYyBwdXNoU2NlbmVDb250ZW50QmxvY2tzKHNjZW5lRmlsZVBhdGg6IHN0cmluZywgc3RvcnlGb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBSZWFkIHNjZW5lIGZpbGVcblx0XHRjb25zdCBmaWxlID0gdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLmdldEFic3RyYWN0RmlsZUJ5UGF0aChzY2VuZUZpbGVQYXRoKTtcblx0XHRpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc2NlbmVDb250ZW50ID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLnJlYWQoZmlsZSk7XG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSB0aGlzLmZpbGVNYW5hZ2VyLnBhcnNlRnJvbnRtYXR0ZXIoc2NlbmVDb250ZW50KTtcblxuXHRcdGlmICghZnJvbnRtYXR0ZXIuaWQgfHwgIWZyb250bWF0dGVyLnN0b3J5X2lkKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc2NlbmVJZCA9IGZyb250bWF0dGVyLmlkO1xuXHRcdGNvbnN0IHN0b3J5SWQgPSBmcm9udG1hdHRlci5zdG9yeV9pZDtcblx0XHRjb25zdCBjb250ZW50c0ZvbGRlclBhdGggPSBgJHtzdG9yeUZvbGRlclBhdGh9LzAzLWNvbnRlbnRzYDtcblxuXHRcdC8vIFBhcnNlIHByb3NlIGJsb2NrcyBmcm9tIHNjZW5lIGNvbnRlbnRcblx0XHRjb25zdCBzY2VuZVByb3NlID0gcGFyc2VTY2VuZVByb3NlKHNjZW5lQ29udGVudCk7XG5cdFx0XG5cdFx0aWYgKHNjZW5lUHJvc2Uuc2VjdGlvbnMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRyZXR1cm47IC8vIE5vIHByb3NlIGJsb2NrcyB0byBwcm9jZXNzXG5cdFx0fVxuXG5cdFx0Ly8gR2V0IG9yIGNyZWF0ZSBhIHRlbXBvcmFyeSBjaGFwdGVyIGZvciBzY2VuZS1sZXZlbCBwcm9zZSBibG9ja3Ncblx0XHRjb25zdCBjaGFwdGVycyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENoYXB0ZXJzKHN0b3J5SWQpO1xuXHRcdGxldCB0ZW1wQ2hhcHRlciA9IGNoYXB0ZXJzLmZpbmQoYyA9PiBjLnRpdGxlID09PSBcIlNjZW5lLUxldmVsIFByb3NlXCIpO1xuXHRcdFxuXHRcdGlmICghdGVtcENoYXB0ZXIpIHtcblx0XHRcdHRlbXBDaGFwdGVyID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ2hhcHRlcihzdG9yeUlkLCB7XG5cdFx0XHRcdG51bWJlcjogOTk5OCwgLy8gSGlnaCBudW1iZXIgdG8ga2VlcCBpdCBhdCB0aGUgZW5kXG5cdFx0XHRcdHRpdGxlOiBcIlNjZW5lLUxldmVsIFByb3NlXCIsXG5cdFx0XHRcdHN0YXR1czogXCJkcmFmdFwiLFxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IHByb3NlIGJsb2NrcyByZWZlcmVuY2VkIHRvIHRoaXMgc2NlbmVcblx0XHRjb25zdCByZW1vdGVDb250ZW50QmxvY2tzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrcyh0ZW1wQ2hhcHRlci5pZCk7XG5cdFx0Y29uc3QgcmVtb3RlQ29udGVudEJsb2Nrc01hcCA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2s+KCk7XG5cdFx0Zm9yIChjb25zdCBwYiBvZiByZW1vdGVDb250ZW50QmxvY2tzKSB7XG5cdFx0XHRyZW1vdGVDb250ZW50QmxvY2tzTWFwLnNldChwYi5pZCwgcGIpO1xuXHRcdH1cblxuXHRcdC8vIEdldCBiZWF0cyBmb3IgdGhpcyBzY2VuZVxuXHRcdGNvbnN0IGV4aXN0aW5nQmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0cyhzY2VuZUlkKTtcblx0XHRjb25zdCBiZWF0TWFwID0gbmV3IE1hcDxzdHJpbmcsIEJlYXQ+KCk7XG5cdFx0Y29uc3QgYmVhdElkTWFwID0gbmV3IE1hcDxzdHJpbmcsIEJlYXQ+KCk7XG5cdFx0Zm9yIChjb25zdCBiZWF0IG9mIGV4aXN0aW5nQmVhdHMpIHtcblx0XHRcdGNvbnN0IGZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRiZWF0TWFwLnNldChsaW5rTmFtZSwgYmVhdCk7XG5cdFx0XHRiZWF0SWRNYXAuc2V0KGJlYXQuaWQsIGJlYXQpO1xuXHRcdH1cblxuXHRcdC8vIFByb2Nlc3MgcHJvc2Ugc2VjdGlvbnNcblx0XHRsZXQgcHJvc2VPcmRlck51bSA9IDE7XG5cdFx0bGV0IGN1cnJlbnRCZWF0OiBCZWF0IHwgbnVsbCA9IG51bGw7XG5cdFx0Y29uc3QgdXBkYXRlZFNlY3Rpb25zOiBzdHJpbmdbXSA9IFtdO1xuXG5cdFx0Zm9yIChjb25zdCBzZWN0aW9uIG9mIHNjZW5lUHJvc2Uuc2VjdGlvbnMpIHtcblx0XHRcdGlmIChzZWN0aW9uLnR5cGUgPT09IFwiYmVhdFwiICYmIHNlY3Rpb24uYmVhdCkge1xuXHRcdFx0XHRjb25zdCB7IGJlYXQ6IHBhcnNlZEJlYXQgfSA9IHNlY3Rpb247XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAocGFyc2VkQmVhdC5saW5rTmFtZSkge1xuXHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYmVhdE1hcC5nZXQocGFyc2VkQmVhdC5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0XHRpZiAoIWN1cnJlbnRCZWF0KSB7XG5cdFx0XHRcdFx0XHRjdXJyZW50QmVhdCA9IGJlYXRJZE1hcC5nZXQocGFyc2VkQmVhdC5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdGlmIChjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoY3VycmVudEJlYXQpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRMaW5rTmFtZSA9IGJlYXRGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRjb25zdCBiZWF0RGlzcGxheVRleHQgPSBjdXJyZW50QmVhdC5vdXRjb21lXG5cdFx0XHRcdFx0XHQ/IGAke2N1cnJlbnRCZWF0LmludGVudH0gLT4gJHtjdXJyZW50QmVhdC5vdXRjb21lfWBcblx0XHRcdFx0XHRcdDogY3VycmVudEJlYXQuaW50ZW50O1xuXHRcdFx0XHRcdHVwZGF0ZWRTZWN0aW9ucy5wdXNoKGAjIyMgQmVhdDogW1ske2JlYXRMaW5rTmFtZX18JHtiZWF0RGlzcGxheVRleHR9XV1gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChzZWN0aW9uLnR5cGUgPT09IFwicHJvc2VcIiAmJiBzZWN0aW9uLnByb3NlKSB7XG5cdFx0XHRcdGNvbnN0IHsgcHJvc2U6IHBhcmFncmFwaCB9ID0gc2VjdGlvbjtcblx0XHRcdFx0XG5cdFx0XHRcdGxldCBsb2NhbENvbnRlbnRCbG9jazogQ29udGVudEJsb2NrIHwgbnVsbCA9IG51bGw7XG5cdFx0XHRcdGxldCByZW1vdGVDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayB8IG51bGwgPSBudWxsO1xuXG5cdFx0XHRcdGlmIChwYXJhZ3JhcGgubGlua05hbWUpIHtcblx0XHRcdFx0XHQvLyBTZWFyY2ggZm9yIGZpbGUgaW4gdHlwZSBzdWJmb2xkZXJzXG5cdFx0XHRcdFx0Y29uc3QgY29udGVudEJsb2NrRmlsZVBhdGggPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tGaWxlQnlMaW5rTmFtZShjb250ZW50c0ZvbGRlclBhdGgsIHBhcmFncmFwaC5saW5rTmFtZSk7XG5cdFx0XHRcdFx0aWYgKGNvbnRlbnRCbG9ja0ZpbGVQYXRoKSB7XG5cdFx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIucmVhZENvbnRlbnRCbG9ja0Zyb21GaWxlKGNvbnRlbnRCbG9ja0ZpbGVQYXRoKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIWxvY2FsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmluZENvbnRlbnRCbG9ja0J5Q29udGVudChjb250ZW50c0ZvbGRlclBhdGgsIHBhcmFncmFwaC5jb250ZW50KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAobG9jYWxDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdHJlbW90ZUNvbnRlbnRCbG9jayA9IHJlbW90ZUNvbnRlbnRCbG9ja3NNYXAuZ2V0KGxvY2FsQ29udGVudEJsb2NrLmlkKSB8fCBudWxsO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb25zdCBub3JtYWxpemVkQ29udGVudCA9IHBhcmFncmFwaC5jb250ZW50LnRyaW0oKTtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgW2lkLCByZW1vdGVQQl0gb2YgcmVtb3RlQ29udGVudEJsb2Nrc01hcC5lbnRyaWVzKCkpIHtcblx0XHRcdFx0XHRcdFx0aWYgKHJlbW90ZVBCLmNvbnRlbnQudHJpbSgpID09PSBub3JtYWxpemVkQ29udGVudCkge1xuXHRcdFx0XHRcdFx0XHRcdHJlbW90ZUNvbnRlbnRCbG9jayA9IHJlbW90ZVBCO1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGxvY2FsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5maW5kQ29udGVudEJsb2NrQnlDb250ZW50KGNvbnRlbnRzRm9sZGVyUGF0aCwgcGFyYWdyYXBoLmNvbnRlbnQpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGNvbnN0IG5vcm1hbGl6ZWRDb250ZW50ID0gcGFyYWdyYXBoLmNvbnRlbnQudHJpbSgpO1xuXHRcdFx0XHRcdGZvciAoY29uc3QgW2lkLCByZW1vdGVQQl0gb2YgcmVtb3RlQ29udGVudEJsb2Nrc01hcC5lbnRyaWVzKCkpIHtcblx0XHRcdFx0XHRcdGlmIChyZW1vdGVQQi5jb250ZW50LnRyaW0oKSA9PT0gbm9ybWFsaXplZENvbnRlbnQpIHtcblx0XHRcdFx0XHRcdFx0cmVtb3RlQ29udGVudEJsb2NrID0gcmVtb3RlUEI7XG5cdFx0XHRcdFx0XHRcdGlmICghbG9jYWxDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmluZENvbnRlbnRCbG9ja0J5SWQoY29udGVudHNGb2xkZXJQYXRoLCByZW1vdGVQQi5pZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3Qgc3RhdHVzID0gY29tcGFyZUNvbnRlbnRCbG9ja3MocGFyYWdyYXBoLCBsb2NhbENvbnRlbnRCbG9jaywgcmVtb3RlQ29udGVudEJsb2NrKTtcblxuXHRcdFx0XHRsZXQgZmluYWxDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jaztcblxuXHRcdFx0XHRzd2l0Y2ggKHN0YXR1cykge1xuXHRcdFx0XHRcdGNhc2UgXCJuZXdcIjoge1xuXHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QmxvY2sodGVtcENoYXB0ZXIhLmlkLCB7XG5cdFx0XHRcdFx0XHRcdG9yZGVyX251bTogcHJvc2VPcmRlck51bSsrLFxuXHRcdFx0XHRcdFx0XHRraW5kOiBcImZpbmFsXCIsXG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQ6IHBhcmFncmFwaC5jb250ZW50LFxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdC8vIENyZWF0ZSBmaWxlIGluIGNvcnJlY3QgdHlwZSBzdWJmb2xkZXJcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblxuXHRcdFx0XHRcdFx0Ly8gQ3JlYXRlIHJlZmVyZW5jZSB0byBzY2VuZVxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJzY2VuZVwiLCBzY2VuZUlkKTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gQWxzbyBjcmVhdGUgcmVmZXJlbmNlIHRvIGJlYXQgaWYgd2UncmUgdW5kZXIgb25lXG5cdFx0XHRcdFx0XHRpZiAoY3VycmVudEJlYXQpIHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJiZWF0XCIsIGN1cnJlbnRCZWF0LmlkKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoZmluYWxDb250ZW50QmxvY2spLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtsaW5rTmFtZX18JHtwYXJhZ3JhcGguY29udGVudH1dXWApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y2FzZSBcInVuY2hhbmdlZFwiOiB7XG5cdFx0XHRcdFx0XHRpZiAoIWxvY2FsQ29udGVudEJsb2NrICYmIHJlbW90ZUNvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IHJlbW90ZUNvbnRlbnRCbG9jaztcblx0XHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQ29udGVudEJsb2NrRmlsZShmaW5hbENvbnRlbnRCbG9jaywgZmlsZVBhdGgsIHVuZGVmaW5lZCk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGxvY2FsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChsb2NhbENvbnRlbnRCbG9jay5vcmRlcl9udW0gIT09IHByb3NlT3JkZXJOdW0pIHtcblx0XHRcdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnVwZGF0ZUNvbnRlbnRCbG9jayhsb2NhbENvbnRlbnRCbG9jay5pZCwge1xuXHRcdFx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBwcm9zZU9yZGVyTnVtKyssXG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IGxvY2FsQ29udGVudEJsb2NrO1xuXHRcdFx0XHRcdFx0XHRcdHByb3NlT3JkZXJOdW0rKztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSByZW1vdGVDb250ZW50QmxvY2shO1xuXHRcdFx0XHRcdFx0XHRwcm9zZU9yZGVyTnVtKys7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChwYXJhZ3JhcGgubGlua05hbWUpIHtcblx0XHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtwYXJhZ3JhcGgubGlua05hbWV9fCR7cGFyYWdyYXBoLmNvbnRlbnR9XV1gKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGZpbmFsQ29udGVudEJsb2NrKS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtsaW5rTmFtZX18JHtwYXJhZ3JhcGguY29udGVudH1dXWApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y2FzZSBcImxvY2FsX21vZGlmaWVkXCI6IHtcblx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQ29udGVudEJsb2NrKGxvY2FsQ29udGVudEJsb2NrIS5pZCwge1xuXHRcdFx0XHRcdFx0XHRjb250ZW50OiBwYXJhZ3JhcGguY29udGVudCxcblx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBwcm9zZU9yZGVyTnVtKyssXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoLCB1bmRlZmluZWQpO1xuXG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShmaW5hbENvbnRlbnRCbG9jaykucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lfXwke3BhcmFncmFwaC5jb250ZW50fV1dYCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwicmVtb3RlX21vZGlmaWVkXCI6IHtcblx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gcmVtb3RlQ29udGVudEJsb2NrITtcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblxuXHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoZmluYWxDb250ZW50QmxvY2spLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtsaW5rTmFtZX18JHtmaW5hbENvbnRlbnRCbG9jay5jb250ZW50fV1dYCk7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBTY2VuZSBwcm9zZSBibG9jayB1cGRhdGVkIGZyb20gcmVtb3RlOiAke2xpbmtOYW1lfWAsIDMwMDApO1xuXHRcdFx0XHRcdFx0cHJvc2VPcmRlck51bSsrO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y2FzZSBcImNvbmZsaWN0XCI6IHtcblx0XHRcdFx0XHRcdGNvbnN0IHJlc29sdXRpb24gPSBhd2FpdCB0aGlzLnJlc29sdmVDb25mbGljdChsb2NhbENvbnRlbnRCbG9jayEsIHJlbW90ZUNvbnRlbnRCbG9jayEpO1xuXG5cdFx0XHRcdFx0XHRsZXQgcmVzb2x2ZWRDb250ZW50OiBzdHJpbmc7XG5cdFx0XHRcdFx0XHRpZiAocmVzb2x1dGlvbi5yZXNvbHV0aW9uID09PSBcImxvY2FsXCIpIHtcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZWRDb250ZW50ID0gcGFyYWdyYXBoLmNvbnRlbnQ7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKHJlc29sdXRpb24ucmVzb2x1dGlvbiA9PT0gXCJyZW1vdGVcIikge1xuXHRcdFx0XHRcdFx0XHRyZXNvbHZlZENvbnRlbnQgPSByZW1vdGVDb250ZW50QmxvY2shLmNvbnRlbnQ7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRyZXNvbHZlZENvbnRlbnQgPSByZXNvbHV0aW9uLm1lcmdlZENvbnRlbnQgfHwgcGFyYWdyYXBoLmNvbnRlbnQ7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQ29udGVudEJsb2NrKGxvY2FsQ29udGVudEJsb2NrIS5pZCwge1xuXHRcdFx0XHRcdFx0XHRjb250ZW50OiByZXNvbHZlZENvbnRlbnQsXG5cdFx0XHRcdFx0XHRcdG9yZGVyX251bTogcHJvc2VPcmRlck51bSsrLFxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblxuXHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoZmluYWxDb250ZW50QmxvY2spLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtsaW5rTmFtZX18JHtyZXNvbHZlZENvbnRlbnR9XV1gKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFVwZGF0ZSBzY2VuZSBmaWxlIHdpdGggbGlua3MgaWYgdGhlcmUgYXJlIHVwZGF0ZWQgc2VjdGlvbnNcblx0XHRpZiAodXBkYXRlZFNlY3Rpb25zLmxlbmd0aCA+IDApIHtcblx0XHRcdC8vIEZpbmQgdGhlIGluc2VydGlvbiBwb2ludCBpbiB0aGUgc2NlbmUgZmlsZVxuXHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IHNjZW5lQ29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuXHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXJFbmQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXS5sZW5ndGggOiAwO1xuXHRcdFx0Y29uc3QgYWZ0ZXJGcm9udG1hdHRlciA9IHNjZW5lQ29udGVudC5zdWJzdHJpbmcoZnJvbnRtYXR0ZXJFbmQpLnRyaW0oKTtcblx0XHRcdFxuXHRcdFx0Ly8gRmluZCB0aGUgIyMgQmVhdHMgc2VjdGlvbiB0byBpbnNlcnQgYmVmb3JlIGl0XG5cdFx0XHRjb25zdCBiZWF0c1NlY3Rpb25NYXRjaCA9IGFmdGVyRnJvbnRtYXR0ZXIubWF0Y2goL1xcbiMjXFxzK0JlYXRzXFxzKlxcbi8pO1xuXHRcdFx0Y29uc3QgaW5zZXJ0aW9uUG9pbnQgPSBiZWF0c1NlY3Rpb25NYXRjaCBcblx0XHRcdFx0PyBmcm9udG1hdHRlckVuZCArIGFmdGVyRnJvbnRtYXR0ZXIuaW5kZXhPZihiZWF0c1NlY3Rpb25NYXRjaFswXSlcblx0XHRcdFx0OiBzY2VuZUNvbnRlbnQubGVuZ3RoO1xuXHRcdFx0XG5cdFx0XHQvLyBCdWlsZCB1cGRhdGVkIGNvbnRlbnQgd2l0aCBwcm9zZSBzZWN0aW9uc1xuXHRcdFx0Y29uc3QgYmVmb3JlUHJvc2UgPSBzY2VuZUNvbnRlbnQuc3Vic3RyaW5nKDAsIGluc2VydGlvblBvaW50KS50cmltRW5kKCk7XG5cdFx0XHRjb25zdCBhZnRlclByb3NlID0gc2NlbmVDb250ZW50LnN1YnN0cmluZyhpbnNlcnRpb25Qb2ludCk7XG5cdFx0XHRcblx0XHRcdGNvbnN0IHVwZGF0ZWRDb250ZW50ID0gYCR7YmVmb3JlUHJvc2V9XFxuXFxuJHt1cGRhdGVkU2VjdGlvbnMuam9pbihcIlxcblxcblwiKX1cXG4ke2FmdGVyUHJvc2V9YDtcblx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5tb2RpZnkoZmlsZSwgdXBkYXRlZENvbnRlbnQpO1xuXHRcdH1cblx0fVxuXG5cdC8vIFB1c2ggcHJvc2UgYmxvY2tzIGZyb20gYSBiZWF0IGZpbGVcblx0cHJpdmF0ZSBhc3luYyBwdXNoQmVhdENvbnRlbnRCbG9ja3MoYmVhdEZpbGVQYXRoOiBzdHJpbmcsIHN0b3J5Rm9sZGVyUGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Ly8gUmVhZCBiZWF0IGZpbGVcblx0XHRjb25zdCBmaWxlID0gdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLmdldEFic3RyYWN0RmlsZUJ5UGF0aChiZWF0RmlsZVBhdGgpO1xuXHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBiZWF0Q29udGVudCA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5yZWFkKGZpbGUpO1xuXHRcdGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5maWxlTWFuYWdlci5wYXJzZUZyb250bWF0dGVyKGJlYXRDb250ZW50KTtcblxuXHRcdGlmICghZnJvbnRtYXR0ZXIuaWQgfHwgIWZyb250bWF0dGVyLnNjZW5lX2lkKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgYmVhdElkID0gZnJvbnRtYXR0ZXIuaWQ7XG5cdFx0Y29uc3Qgc2NlbmVJZCA9IGZyb250bWF0dGVyLnNjZW5lX2lkO1xuXHRcdGNvbnN0IGNvbnRlbnRzRm9sZGVyUGF0aCA9IGAke3N0b3J5Rm9sZGVyUGF0aH0vMDMtY29udGVudHNgO1xuXG5cdFx0Ly8gUGFyc2UgcHJvc2UgYmxvY2tzIGZyb20gYmVhdCBjb250ZW50XG5cdFx0Y29uc3QgYmVhdFByb3NlID0gcGFyc2VCZWF0UHJvc2UoYmVhdENvbnRlbnQpO1xuXHRcdFxuXHRcdGlmIChiZWF0UHJvc2Uuc2VjdGlvbnMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRyZXR1cm47IC8vIE5vIHByb3NlIGJsb2NrcyB0byBwcm9jZXNzXG5cdFx0fVxuXG5cdFx0Ly8gR2V0IHRoZSBzY2VuZSB0byBmaW5kIHN0b3J5X2lkIGFuZCBjaGFwdGVyX2lkXG5cdFx0Y29uc3Qgc2NlbmUgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRTY2VuZShzY2VuZUlkKTtcblx0XHRpZiAoIXNjZW5lKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3RvcnlJZCA9IHNjZW5lLnN0b3J5X2lkO1xuXG5cdFx0Ly8gR2V0IG9yIGNyZWF0ZSBhIHRlbXBvcmFyeSBjaGFwdGVyIGZvciBiZWF0LWxldmVsIHByb3NlIGJsb2Nrc1xuXHRcdGNvbnN0IGNoYXB0ZXJzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q2hhcHRlcnMoc3RvcnlJZCk7XG5cdFx0bGV0IHRlbXBDaGFwdGVyID0gY2hhcHRlcnMuZmluZChjID0+IGMudGl0bGUgPT09IFwiQmVhdC1MZXZlbCBQcm9zZVwiKTtcblx0XHRcblx0XHRpZiAoIXRlbXBDaGFwdGVyKSB7XG5cdFx0XHR0ZW1wQ2hhcHRlciA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNoYXB0ZXIoc3RvcnlJZCwge1xuXHRcdFx0XHRudW1iZXI6IDk5OTcsIC8vIEhpZ2ggbnVtYmVyIHRvIGtlZXAgaXQgYXQgdGhlIGVuZFxuXHRcdFx0XHR0aXRsZTogXCJCZWF0LUxldmVsIFByb3NlXCIsXG5cdFx0XHRcdHN0YXR1czogXCJkcmFmdFwiLFxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IGV4aXN0aW5nIHJlbW90ZSBwcm9zZSBibG9ja3Ncblx0XHRjb25zdCByZW1vdGVDb250ZW50QmxvY2tzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrcyh0ZW1wQ2hhcHRlci5pZCk7XG5cdFx0Y29uc3QgcmVtb3RlQ29udGVudEJsb2Nrc01hcCA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2s+KCk7XG5cdFx0Zm9yIChjb25zdCBwYiBvZiByZW1vdGVDb250ZW50QmxvY2tzKSB7XG5cdFx0XHRyZW1vdGVDb250ZW50QmxvY2tzTWFwLnNldChwYi5pZCwgcGIpO1xuXHRcdH1cblxuXHRcdC8vIFByb2Nlc3MgcHJvc2Ugc2VjdGlvbnNcblx0XHRsZXQgcHJvc2VPcmRlck51bSA9IDE7XG5cdFx0Y29uc3QgdXBkYXRlZFNlY3Rpb25zOiBzdHJpbmdbXSA9IFtdO1xuXG5cdFx0Ly8gQWRkIGJlYXQgaGVhZGVyXG5cdFx0Y29uc3QgYmVhdCA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldEJlYXQoYmVhdElkKTtcblx0XHRpZiAoYmVhdCkge1xuXHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdGNvbnN0IGJlYXRMaW5rTmFtZSA9IGJlYXRGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdGNvbnN0IGJlYXREaXNwbGF5VGV4dCA9IGJlYXQub3V0Y29tZVxuXHRcdFx0XHQ/IGAke2JlYXQuaW50ZW50fSAtPiAke2JlYXQub3V0Y29tZX1gXG5cdFx0XHRcdDogYmVhdC5pbnRlbnQ7XG5cdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgIyMgQmVhdDogW1ske2JlYXRMaW5rTmFtZX18JHtiZWF0RGlzcGxheVRleHR9XV1gKTtcblx0XHR9XG5cblx0XHRmb3IgKGNvbnN0IHNlY3Rpb24gb2YgYmVhdFByb3NlLnNlY3Rpb25zKSB7XG5cdFx0XHRpZiAoc2VjdGlvbi50eXBlID09PSBcInByb3NlXCIgJiYgc2VjdGlvbi5wcm9zZSkge1xuXHRcdFx0XHRjb25zdCB7IHByb3NlOiBwYXJhZ3JhcGggfSA9IHNlY3Rpb247XG5cdFx0XHRcdFxuXHRcdFx0XHRsZXQgbG9jYWxDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayB8IG51bGwgPSBudWxsO1xuXHRcdFx0XHRsZXQgcmVtb3RlQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2sgfCBudWxsID0gbnVsbDtcblxuXHRcdFx0XHRpZiAocGFyYWdyYXBoLmxpbmtOYW1lKSB7XG5cdFx0XHRcdFx0Ly8gU2VhcmNoIGZvciBmaWxlIGluIHR5cGUgc3ViZm9sZGVyc1xuXHRcdFx0XHRcdGNvbnN0IGNvbnRlbnRCbG9ja0ZpbGVQYXRoID0gYXdhaXQgdGhpcy5maW5kQ29udGVudEJsb2NrRmlsZUJ5TGlua05hbWUoY29udGVudHNGb2xkZXJQYXRoLCBwYXJhZ3JhcGgubGlua05hbWUpO1xuXHRcdFx0XHRcdGlmIChjb250ZW50QmxvY2tGaWxlUGF0aCkge1xuXHRcdFx0XHRcdFx0bG9jYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLnJlYWRDb250ZW50QmxvY2tGcm9tRmlsZShjb250ZW50QmxvY2tGaWxlUGF0aCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCFsb2NhbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0bG9jYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tCeUNvbnRlbnQoY29udGVudHNGb2xkZXJQYXRoLCBwYXJhZ3JhcGguY29udGVudCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGxvY2FsQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRyZW1vdGVDb250ZW50QmxvY2sgPSByZW1vdGVDb250ZW50QmxvY2tzTWFwLmdldChsb2NhbENvbnRlbnRCbG9jay5pZCkgfHwgbnVsbDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29uc3Qgbm9ybWFsaXplZENvbnRlbnQgPSBwYXJhZ3JhcGguY29udGVudC50cmltKCk7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IFssIHJlbW90ZVBCXSBvZiByZW1vdGVDb250ZW50QmxvY2tzTWFwLmVudHJpZXMoKSkge1xuXHRcdFx0XHRcdFx0XHRpZiAocmVtb3RlUEIuY29udGVudC50cmltKCkgPT09IG5vcm1hbGl6ZWRDb250ZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVtb3RlQ29udGVudEJsb2NrID0gcmVtb3RlUEI7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bG9jYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tCeUNvbnRlbnQoY29udGVudHNGb2xkZXJQYXRoLCBwYXJhZ3JhcGguY29udGVudCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29uc3Qgbm9ybWFsaXplZENvbnRlbnQgPSBwYXJhZ3JhcGguY29udGVudC50cmltKCk7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBbLCByZW1vdGVQQl0gb2YgcmVtb3RlQ29udGVudEJsb2Nrc01hcC5lbnRyaWVzKCkpIHtcblx0XHRcdFx0XHRcdGlmIChyZW1vdGVQQi5jb250ZW50LnRyaW0oKSA9PT0gbm9ybWFsaXplZENvbnRlbnQpIHtcblx0XHRcdFx0XHRcdFx0cmVtb3RlQ29udGVudEJsb2NrID0gcmVtb3RlUEI7XG5cdFx0XHRcdFx0XHRcdGlmICghbG9jYWxDb250ZW50QmxvY2spIHtcblx0XHRcdFx0XHRcdFx0XHRsb2NhbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmluZENvbnRlbnRCbG9ja0J5SWQoY29udGVudHNGb2xkZXJQYXRoLCByZW1vdGVQQi5pZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3Qgc3RhdHVzID0gY29tcGFyZUNvbnRlbnRCbG9ja3MocGFyYWdyYXBoLCBsb2NhbENvbnRlbnRCbG9jaywgcmVtb3RlQ29udGVudEJsb2NrKTtcblxuXHRcdFx0XHRsZXQgZmluYWxDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jaztcblxuXHRcdFx0XHRzd2l0Y2ggKHN0YXR1cykge1xuXHRcdFx0XHRcdGNhc2UgXCJuZXdcIjoge1xuXHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVDb250ZW50QmxvY2sodGVtcENoYXB0ZXIhLmlkLCB7XG5cdFx0XHRcdFx0XHRcdG9yZGVyX251bTogcHJvc2VPcmRlck51bSsrLFxuXHRcdFx0XHRcdFx0XHRraW5kOiBcImZpbmFsXCIsXG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQ6IHBhcmFncmFwaC5jb250ZW50LFxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdC8vIENyZWF0ZSBmaWxlIGluIGNvcnJlY3QgdHlwZSBzdWJmb2xkZXJcblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblxuXHRcdFx0XHRcdFx0Ly8gQ3JlYXRlIHJlZmVyZW5jZSB0byBzY2VuZSBhbmQgYmVhdFxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihmaW5hbENvbnRlbnRCbG9jay5pZCwgXCJzY2VuZVwiLCBzY2VuZUlkKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRBbmNob3IoZmluYWxDb250ZW50QmxvY2suaWQsIFwiYmVhdFwiLCBiZWF0SWQpO1xuXG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShmaW5hbENvbnRlbnRCbG9jaykucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lfXwke3BhcmFncmFwaC5jb250ZW50fV1dYCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwidW5jaGFuZ2VkXCI6IHtcblx0XHRcdFx0XHRcdGlmICghbG9jYWxDb250ZW50QmxvY2sgJiYgcmVtb3RlQ29udGVudEJsb2NrKSB7XG5cdFx0XHRcdFx0XHRcdGZpbmFsQ29udGVudEJsb2NrID0gcmVtb3RlQ29udGVudEJsb2NrO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGZpbmFsQ29udGVudEJsb2NrKS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtsaW5rTmFtZX18JHtyZW1vdGVDb250ZW50QmxvY2suY29udGVudH1dXWApO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChsb2NhbENvbnRlbnRCbG9jaykge1xuXHRcdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IGxvY2FsQ29udGVudEJsb2NrO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShmaW5hbENvbnRlbnRCbG9jaykucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRTZWN0aW9ucy5wdXNoKGBbWyR7bGlua05hbWV9fCR7cGFyYWdyYXBoLmNvbnRlbnR9XV1gKTtcblx0XHRcdFx0XHRcdFx0cHJvc2VPcmRlck51bSsrO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0cHJvc2VPcmRlck51bSsrO1xuXHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNhc2UgXCJsb2NhbF9tb2RpZmllZFwiOiB7XG5cdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnVwZGF0ZUNvbnRlbnRCbG9jayhsb2NhbENvbnRlbnRCbG9jayEuaWQsIHtcblx0XHRcdFx0XHRcdFx0Y29udGVudDogcGFyYWdyYXBoLmNvbnRlbnQsXG5cdFx0XHRcdFx0XHRcdG9yZGVyX251bTogcHJvc2VPcmRlck51bSsrLFxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIGZpbmFsQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGZpbmFsQ29udGVudEJsb2NrLCBmaWxlUGF0aCwgdW5kZWZpbmVkKTtcblxuXHRcdFx0XHRcdFx0Y29uc3QgbGlua05hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoZmluYWxDb250ZW50QmxvY2spLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0dXBkYXRlZFNlY3Rpb25zLnB1c2goYFtbJHtsaW5rTmFtZX18JHtwYXJhZ3JhcGguY29udGVudH1dXWApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y2FzZSBcInJlbW90ZV9tb2RpZmllZFwiOiB7XG5cdFx0XHRcdFx0XHRmaW5hbENvbnRlbnRCbG9jayA9IHJlbW90ZUNvbnRlbnRCbG9jayE7XG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aCA9IGF3YWl0IHRoaXMuZ2V0Q29udGVudEJsb2NrRmlsZVBhdGhGcm9tQ29udGVudHMoY29udGVudHNGb2xkZXJQYXRoLCBmaW5hbENvbnRlbnRCbG9jayk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLndyaXRlQ29udGVudEJsb2NrRmlsZShmaW5hbENvbnRlbnRCbG9jaywgZmlsZVBhdGgsIHVuZGVmaW5lZCk7XG5cdFx0XHRcdFx0XHRwcm9zZU9yZGVyTnVtKys7XG5cblx0XHRcdFx0XHRcdGNvbnN0IGxpbmtOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGZpbmFsQ29udGVudEJsb2NrKS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRcdHVwZGF0ZWRTZWN0aW9ucy5wdXNoKGBbWyR7bGlua05hbWV9fCR7cmVtb3RlQ29udGVudEJsb2NrIS5jb250ZW50fV1dYCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYXNlIFwiY29uZmxpY3RcIjoge1xuXHRcdFx0XHRcdFx0Y29uc3QgcmVzb2x1dGlvbiA9IGF3YWl0IHRoaXMucmVzb2x2ZUNvbmZsaWN0KGxvY2FsQ29udGVudEJsb2NrISwgcmVtb3RlQ29udGVudEJsb2NrISk7XG5cblx0XHRcdFx0XHRcdGxldCByZXNvbHZlZENvbnRlbnQ6IHN0cmluZztcblx0XHRcdFx0XHRcdGlmIChyZXNvbHV0aW9uLnJlc29sdXRpb24gPT09IFwibG9jYWxcIikge1xuXHRcdFx0XHRcdFx0XHRyZXNvbHZlZENvbnRlbnQgPSBwYXJhZ3JhcGguY29udGVudDtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAocmVzb2x1dGlvbi5yZXNvbHV0aW9uID09PSBcInJlbW90ZVwiKSB7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmVkQ29udGVudCA9IHJlbW90ZUNvbnRlbnRCbG9jayEuY29udGVudDtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmVkQ29udGVudCA9IHJlc29sdXRpb24ubWVyZ2VkQ29udGVudCB8fCBwYXJhZ3JhcGguY29udGVudDtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0ZmluYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVDb250ZW50QmxvY2sobG9jYWxDb250ZW50QmxvY2shLmlkLCB7XG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQ6IHJlc29sdmVkQ29udGVudCxcblx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBwcm9zZU9yZGVyTnVtKyssXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCbG9ja0ZpbGVQYXRoRnJvbUNvbnRlbnRzKGNvbnRlbnRzRm9sZGVyUGF0aCwgZmluYWxDb250ZW50QmxvY2spO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUoZmluYWxDb250ZW50QmxvY2ssIGZpbGVQYXRoLCB1bmRlZmluZWQpO1xuXG5cdFx0XHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVDb250ZW50QmxvY2tGaWxlTmFtZShmaW5hbENvbnRlbnRCbG9jaykucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRcdFx0XHR1cGRhdGVkU2VjdGlvbnMucHVzaChgW1ske2xpbmtOYW1lfXwke3Jlc29sdmVkQ29udGVudH1dXWApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gVXBkYXRlIGJlYXQgZmlsZSB3aXRoIGxpbmtzIGlmIHRoZXJlIGFyZSB1cGRhdGVkIHNlY3Rpb25zIChtb3JlIHRoYW4ganVzdCB0aGUgaGVhZGVyKVxuXHRcdGlmICh1cGRhdGVkU2VjdGlvbnMubGVuZ3RoID4gMSkge1xuXHRcdFx0Ly8gRmluZCB0aGUgaW5zZXJ0aW9uIHBvaW50IGluIHRoZSBiZWF0IGZpbGUgKGFmdGVyICMgQmVhdCBoZWFkZXIgYW5kIGludGVudC9vdXRjb21lKVxuXHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IGJlYXRDb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XG5cdFx0XHRjb25zdCBmcm9udG1hdHRlckVuZCA9IGZyb250bWF0dGVyTWF0Y2ggPyBmcm9udG1hdHRlck1hdGNoWzBdLmxlbmd0aCA6IDA7XG5cdFx0XHRjb25zdCBhZnRlckZyb250bWF0dGVyID0gYmVhdENvbnRlbnQuc3Vic3RyaW5nKGZyb250bWF0dGVyRW5kKS50cmltKCk7XG5cdFx0XHRcblx0XHRcdC8vIEZpbmQgdGhlICMjIEJlYXQ6IHNlY3Rpb24gdG8gcmVwbGFjZSBpdFxuXHRcdFx0Y29uc3QgYmVhdFNlY3Rpb25NYXRjaCA9IGFmdGVyRnJvbnRtYXR0ZXIubWF0Y2goLyMjXFxzK0JlYXQ6XFxzKi4rW1xcc1xcU10qLyk7XG5cdFx0XHRcblx0XHRcdGlmIChiZWF0U2VjdGlvbk1hdGNoKSB7XG5cdFx0XHRcdC8vIFJlcGxhY2UgdGhlIGVudGlyZSAjIyBCZWF0IHNlY3Rpb25cblx0XHRcdFx0Y29uc3QgYmVmb3JlQmVhdFNlY3Rpb24gPSBiZWF0Q29udGVudC5zdWJzdHJpbmcoMCwgZnJvbnRtYXR0ZXJFbmQgKyBhZnRlckZyb250bWF0dGVyLmluZGV4T2YoYmVhdFNlY3Rpb25NYXRjaFswXSkpO1xuXHRcdFx0XHRjb25zdCB1cGRhdGVkQ29udGVudCA9IGAke2JlZm9yZUJlYXRTZWN0aW9uLnRyaW1FbmQoKX1cXG5cXG4ke3VwZGF0ZWRTZWN0aW9ucy5qb2luKFwiXFxuXFxuXCIpfVxcbmA7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5tb2RpZnkoZmlsZSwgdXBkYXRlZENvbnRlbnQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gQXBwZW5kICMjIEJlYXQgc2VjdGlvblxuXHRcdFx0XHRjb25zdCB1cGRhdGVkQ29udGVudCA9IGAke2JlYXRDb250ZW50LnRyaW1FbmQoKX1cXG5cXG4ke3VwZGF0ZWRTZWN0aW9ucy5qb2luKFwiXFxuXFxuXCIpfVxcbmA7XG5cdFx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5tb2RpZnkoZmlsZSwgdXBkYXRlZENvbnRlbnQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFByb2Nlc3MgdGhlIFwiIyMgT3JwaGFuIFNjZW5lc1wiIGxpc3QgYW5kIHVwZGF0ZSBvcnBoYW4gc2NlbmVzIG9yZGVyXG5cdHByaXZhdGUgYXN5bmMgcHJvY2Vzc09ycGhhblNjZW5lc0xpc3QoXG5cdFx0bGlzdDogeyBpdGVtczogUGFyc2VkU2NlbmVCZWF0TGlzdEl0ZW1bXSB9LFxuXHRcdHN0b3J5SWQ6IHN0cmluZ1xuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBHZXQgYWxsIHNjZW5lcyBmb3IgdGhpcyBzdG9yeVxuXHRcdGNvbnN0IGFsbFNjZW5lcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFNjZW5lc0J5U3Rvcnkoc3RvcnlJZCk7XG5cdFx0Y29uc3Qgc2NlbmVNYXAgPSBuZXcgTWFwPHN0cmluZywgU2NlbmU+KCk7IC8vIE1hcCBieSBsaW5rIG5hbWVcblx0XHRjb25zdCBzY2VuZUlkTWFwID0gbmV3IE1hcDxzdHJpbmcsIFNjZW5lPigpOyAvLyBNYXAgYnkgSURcblx0XHRcblx0XHQvLyBGaWx0ZXIgdG8gb25seSBvcnBoYW4gc2NlbmVzICh3aXRob3V0IGNoYXB0ZXJfaWQpXG5cdFx0Y29uc3Qgb3JwaGFuU2NlbmVzID0gYWxsU2NlbmVzLmZpbHRlcihzID0+ICFzLmNoYXB0ZXJfaWQpO1xuXHRcdFxuXHRcdGZvciAoY29uc3Qgc2NlbmUgb2Ygb3JwaGFuU2NlbmVzKSB7XG5cdFx0XHRjb25zdCBmaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKHNjZW5lKTtcblx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRzY2VuZU1hcC5zZXQobGlua05hbWUsIHNjZW5lKTtcblx0XHRcdHNjZW5lSWRNYXAuc2V0KHNjZW5lLmlkLCBzY2VuZSk7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IGFsbCBiZWF0cyBmb3Igb3JwaGFuIHNjZW5lc1xuXHRcdGNvbnN0IGJlYXRNYXAgPSBuZXcgTWFwPHN0cmluZywgQmVhdD4oKTsgLy8gTWFwIGJ5IGxpbmsgbmFtZVxuXHRcdGNvbnN0IGJlYXRJZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBCZWF0PigpOyAvLyBNYXAgYnkgSURcblx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIG9ycGhhblNjZW5lcykge1xuXHRcdFx0Y29uc3QgYmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0cyhzY2VuZS5pZCk7XG5cdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRiZWF0TWFwLnNldChsaW5rTmFtZSwgYmVhdCk7XG5cdFx0XHRcdGJlYXRJZE1hcC5zZXQoYmVhdC5pZCwgYmVhdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bGV0IGN1cnJlbnRTY2VuZTogU2NlbmUgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgc2NlbmVPcmRlck51bSA9IDE7IC8vIFN0YXJ0IGZyb20gMSwgd2lsbCBpbmNyZW1lbnQgYXMgd2UgcHJvY2Vzc1xuXHRcdGNvbnN0IGJlYXRPcmRlck51bXMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpOyAvLyBUcmFjayBvcmRlcl9udW0gcGVyIHNjZW5lXG5cblx0XHQvLyBQcm9jZXNzIGxpc3QgaXRlbXMgLSBvcmRlciBtYXR0ZXJzIVxuXHRcdGZvciAoY29uc3QgaXRlbSBvZiBsaXN0Lml0ZW1zKSB7XG5cdFx0XHRpZiAoaXRlbS50eXBlID09PSBcInNjZW5lXCIpIHtcblx0XHRcdFx0Ly8gUGFyc2Ugc2NlbmUgZGlzcGxheSB0ZXh0XG5cdFx0XHRcdC8vIENhbiBiZTogXCJTY2VuZSBOOiBnb2FsIC0gdGltZVJlZlwiLCBcImdvYWwgLSB0aW1lUmVmXCIsIG9yIGp1c3QgXCJnb2FsXCJcblx0XHRcdFx0bGV0IGdvYWw6IHN0cmluZztcblx0XHRcdFx0bGV0IHRpbWVSZWY6IHN0cmluZyA9IFwiXCI7XG5cblx0XHRcdFx0Y29uc3Qgc2NlbmVNYXRjaCA9IGl0ZW0uZGlzcGxheVRleHQubWF0Y2goL1NjZW5lXFxzK1xcZCs6XFxzKiguKykvKTtcblx0XHRcdFx0aWYgKHNjZW5lTWF0Y2gpIHtcblx0XHRcdFx0XHQvLyBGb3JtYXQ6IFwiU2NlbmUgTjogZ29hbCAtIHRpbWVSZWZcIiBvciBcIlNjZW5lIE46IGdvYWxcIlxuXHRcdFx0XHRcdGNvbnN0IHNjZW5lVGV4dCA9IHNjZW5lTWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0XHRcdGNvbnN0IHBhcnRzID0gc2NlbmVUZXh0LnNwbGl0KC9cXHMqLVxccyovKTtcblx0XHRcdFx0XHRnb2FsID0gcGFydHNbMF0udHJpbSgpO1xuXHRcdFx0XHRcdHRpbWVSZWYgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbihcIiAtIFwiKS50cmltKCkgOiBcIlwiO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIEZvcm1hdDogXCJnb2FsIC0gdGltZVJlZlwiIG9yIGp1c3QgXCJnb2FsXCJcblx0XHRcdFx0XHRjb25zdCBwYXJ0cyA9IGl0ZW0uZGlzcGxheVRleHQuc3BsaXQoL1xccyotXFxzKi8pO1xuXHRcdFx0XHRcdGdvYWwgPSBwYXJ0c1swXS50cmltKCk7XG5cdFx0XHRcdFx0dGltZVJlZiA9IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0gXCIpLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoaXRlbS5saW5rTmFtZSkge1xuXHRcdFx0XHRcdC8vIFNjZW5lIGV4aXN0cyAtIGZpbmQgaXRcblx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBzY2VuZU1hcC5nZXQoaXRlbS5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0XHRpZiAoIWN1cnJlbnRTY2VuZSkge1xuXHRcdFx0XHRcdFx0Ly8gVHJ5IHRvIGZpbmQgYnkgSUQgaWYgbGlua05hbWUgaXMgYWN0dWFsbHkgYW4gSURcblx0XHRcdFx0XHRcdGN1cnJlbnRTY2VuZSA9IHNjZW5lSWRNYXAuZ2V0KGl0ZW0ubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIG9yZGVyX251bSBvciBjb250ZW50IG5lZWRzIHRvIGJlIHVwZGF0ZWRcblx0XHRcdFx0XHRcdGNvbnN0IG5lZWRzT3JkZXJVcGRhdGUgPSBjdXJyZW50U2NlbmUub3JkZXJfbnVtICE9PSBzY2VuZU9yZGVyTnVtO1xuXHRcdFx0XHRcdFx0Y29uc3QgbmVlZHNDb250ZW50VXBkYXRlID0gZ29hbCAhPT0gY3VycmVudFNjZW5lLmdvYWwgfHwgdGltZVJlZiAhPT0gY3VycmVudFNjZW5lLnRpbWVfcmVmO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRpZiAobmVlZHNPcmRlclVwZGF0ZSB8fCBuZWVkc0NvbnRlbnRVcGRhdGUpIHtcblx0XHRcdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlU2NlbmUoY3VycmVudFNjZW5lLmlkLCB7XG5cdFx0XHRcdFx0XHRcdFx0Z29hbCxcblx0XHRcdFx0XHRcdFx0XHR0aW1lX3JlZjogdGltZVJlZixcblx0XHRcdFx0XHRcdFx0XHRvcmRlcl9udW06IHNjZW5lT3JkZXJOdW0sXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvLyBJbml0aWFsaXplIGJlYXQgb3JkZXIgZm9yIHRoaXMgc2NlbmVcblx0XHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nQmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0cyhjdXJyZW50U2NlbmUuaWQpO1xuXHRcdFx0XHRcdFx0aWYgKGV4aXN0aW5nQmVhdHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdGJlYXRPcmRlck51bXMuc2V0KGN1cnJlbnRTY2VuZS5pZCwgMSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBtYXhPcmRlck51bSA9IE1hdGgubWF4KC4uLmV4aXN0aW5nQmVhdHMubWFwKGIgPT4gYi5vcmRlcl9udW0pKTtcblx0XHRcdFx0XHRcdFx0YmVhdE9yZGVyTnVtcy5zZXQoY3VycmVudFNjZW5lLmlkLCBtYXhPcmRlck51bSArIDEpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBDcmVhdGUgbmV3IG9ycGhhbiBzY2VuZVxuXHRcdFx0XHRcdGN1cnJlbnRTY2VuZSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmNyZWF0ZVNjZW5lKHtcblx0XHRcdFx0XHRcdHN0b3J5X2lkOiBzdG9yeUlkLFxuXHRcdFx0XHRcdFx0Y2hhcHRlcl9pZDogbnVsbCwgLy8gT3JwaGFuIHNjZW5lXG5cdFx0XHRcdFx0XHRvcmRlcl9udW06IHNjZW5lT3JkZXJOdW0sXG5cdFx0XHRcdFx0XHRnb2FsLFxuXHRcdFx0XHRcdFx0dGltZV9yZWY6IHRpbWVSZWYsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gVXBkYXRlIG1hcHNcblx0XHRcdFx0XHRjb25zdCBzY2VuZUZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZVNjZW5lRmlsZU5hbWUoY3VycmVudFNjZW5lKTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUxpbmtOYW1lID0gc2NlbmVGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRzY2VuZU1hcC5zZXQoc2NlbmVMaW5rTmFtZSwgY3VycmVudFNjZW5lKTtcblx0XHRcdFx0XHRzY2VuZUlkTWFwLnNldChjdXJyZW50U2NlbmUuaWQsIGN1cnJlbnRTY2VuZSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gSW5pdGlhbGl6ZSBiZWF0IG9yZGVyIGZvciBuZXcgc2NlbmUgKHN0YXJ0cyBhdCAxKVxuXHRcdFx0XHRcdGJlYXRPcmRlck51bXMuc2V0KGN1cnJlbnRTY2VuZS5pZCwgMSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdHNjZW5lT3JkZXJOdW0rKztcblx0XHRcdH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSBcImJlYXRcIiAmJiBjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0Ly8gUGFyc2UgYmVhdCBkaXNwbGF5IHRleHRcblx0XHRcdFx0Ly8gQ2FuIGJlOiBcIkJlYXQgTjogaW50ZW50IC0+IG91dGNvbWVcIiwgXCJpbnRlbnQgLT4gb3V0Y29tZVwiLCBvciBqdXN0IFwiaW50ZW50XCJcblx0XHRcdFx0bGV0IGludGVudDogc3RyaW5nO1xuXHRcdFx0XHRsZXQgb3V0Y29tZTogc3RyaW5nID0gXCJcIjtcblxuXHRcdFx0XHRjb25zdCBiZWF0TWF0Y2ggPSBpdGVtLmRpc3BsYXlUZXh0Lm1hdGNoKC9CZWF0XFxzK1xcZCs6XFxzKiguKykvKTtcblx0XHRcdFx0aWYgKGJlYXRNYXRjaCkge1xuXHRcdFx0XHRcdC8vIEZvcm1hdDogXCJCZWF0IE46IGludGVudCAtPiBvdXRjb21lXCIgb3IgXCJCZWF0IE46IGludGVudFwiXG5cdFx0XHRcdFx0Y29uc3QgYmVhdFRleHQgPSBiZWF0TWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0XHRcdGNvbnN0IHBhcnRzID0gYmVhdFRleHQuc3BsaXQoL1xccyotPlxccyovKTtcblx0XHRcdFx0XHRpbnRlbnQgPSBwYXJ0c1swXS50cmltKCk7XG5cdFx0XHRcdFx0b3V0Y29tZSA9IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0+IFwiKS50cmltKCkgOiBcIlwiO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIEZvcm1hdDogXCJpbnRlbnQgLT4gb3V0Y29tZVwiIG9yIGp1c3QgXCJpbnRlbnRcIlxuXHRcdFx0XHRcdGNvbnN0IHBhcnRzID0gaXRlbS5kaXNwbGF5VGV4dC5zcGxpdCgvXFxzKi0+XFxzKi8pO1xuXHRcdFx0XHRcdGludGVudCA9IHBhcnRzWzBdLnRyaW0oKTtcblx0XHRcdFx0XHRvdXRjb21lID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLT4gXCIpLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBHZXQgY3VycmVudCBiZWF0IG9yZGVyX251bSBmb3IgdGhpcyBzY2VuZVxuXHRcdFx0XHRjb25zdCBjdXJyZW50QmVhdE9yZGVyTnVtID0gYmVhdE9yZGVyTnVtcy5nZXQoY3VycmVudFNjZW5lLmlkKSB8fCAxO1xuXG5cdFx0XHRcdGlmIChpdGVtLmxpbmtOYW1lKSB7XG5cdFx0XHRcdFx0Ly8gQmVhdCBleGlzdHMgLSBmaW5kIGl0XG5cdFx0XHRcdFx0bGV0IGN1cnJlbnRCZWF0ID0gYmVhdE1hcC5nZXQoaXRlbS5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0XHRpZiAoIWN1cnJlbnRCZWF0KSB7XG5cdFx0XHRcdFx0XHQvLyBUcnkgdG8gZmluZCBieSBJRCBpZiBsaW5rTmFtZSBpcyBhY3R1YWxseSBhbiBJRFxuXHRcdFx0XHRcdFx0Y3VycmVudEJlYXQgPSBiZWF0SWRNYXAuZ2V0KGl0ZW0ubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGlmIChjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgb3JkZXJfbnVtIG9yIGNvbnRlbnQgbmVlZHMgdG8gYmUgdXBkYXRlZFxuXHRcdFx0XHRcdFx0Y29uc3QgbmVlZHNPcmRlclVwZGF0ZSA9IGN1cnJlbnRCZWF0Lm9yZGVyX251bSAhPT0gY3VycmVudEJlYXRPcmRlck51bTtcblx0XHRcdFx0XHRcdGNvbnN0IG5lZWRzQ29udGVudFVwZGF0ZSA9IGludGVudCAhPT0gY3VycmVudEJlYXQuaW50ZW50IHx8IG91dGNvbWUgIT09IGN1cnJlbnRCZWF0Lm91dGNvbWU7XG5cdFx0XHRcdFx0XHRjb25zdCBuZWVkc1NjZW5lVXBkYXRlID0gY3VycmVudEJlYXQuc2NlbmVfaWQgIT09IGN1cnJlbnRTY2VuZS5pZDtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0aWYgKG5lZWRzT3JkZXJVcGRhdGUgfHwgbmVlZHNDb250ZW50VXBkYXRlIHx8IG5lZWRzU2NlbmVVcGRhdGUpIHtcblx0XHRcdFx0XHRcdFx0Y3VycmVudEJlYXQgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVCZWF0KGN1cnJlbnRCZWF0LmlkLCB7XG5cdFx0XHRcdFx0XHRcdFx0aW50ZW50LFxuXHRcdFx0XHRcdFx0XHRcdG91dGNvbWUsXG5cdFx0XHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBjdXJyZW50QmVhdE9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0XHRcdHNjZW5lX2lkOiBjdXJyZW50U2NlbmUuaWQsXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBDcmVhdGUgbmV3IGJlYXRcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVCZWF0KHtcblx0XHRcdFx0XHRcdHNjZW5lX2lkOiBjdXJyZW50U2NlbmUuaWQsXG5cdFx0XHRcdFx0XHRvcmRlcl9udW06IGN1cnJlbnRCZWF0T3JkZXJOdW0sXG5cdFx0XHRcdFx0XHR0eXBlOiBcInNldHVwXCIsIC8vIERlZmF1bHQgdHlwZVxuXHRcdFx0XHRcdFx0aW50ZW50LFxuXHRcdFx0XHRcdFx0b3V0Y29tZSxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0YmVhdE9yZGVyTnVtcy5zZXQoY3VycmVudFNjZW5lLmlkLCBjdXJyZW50QmVhdE9yZGVyTnVtICsgMSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gUHJvY2VzcyB0aGUgXCIjIyBPcnBoYW4gQmVhdHNcIiBsaXN0IGFuZCB1cGRhdGUgb3JwaGFuIGJlYXRzIG9yZGVyXG5cdHByaXZhdGUgYXN5bmMgcHJvY2Vzc09ycGhhbkJlYXRzTGlzdChcblx0XHRsaXN0OiB7IGl0ZW1zOiBQYXJzZWRCZWF0TGlzdEl0ZW1bXSB9LFxuXHRcdHN0b3J5SWQ6IHN0cmluZ1xuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBHZXQgYWxsIGJlYXRzIGZvciB0aGlzIHN0b3J5XG5cdFx0Y29uc3QgYWxsQmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0c0J5U3Rvcnkoc3RvcnlJZCk7XG5cdFx0Y29uc3QgYWxsU2NlbmVzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0U2NlbmVzQnlTdG9yeShzdG9yeUlkKTtcblx0XHRjb25zdCBzY2VuZUlkU2V0ID0gbmV3IFNldChhbGxTY2VuZXMubWFwKHMgPT4gcy5pZCkpO1xuXHRcdFxuXHRcdC8vIEZpbHRlciB0byBvbmx5IG9ycGhhbiBiZWF0cyAod2l0aG91dCBzY2VuZV9pZCBvciB3aXRoIGludmFsaWQgc2NlbmVfaWQpXG5cdFx0Y29uc3Qgb3JwaGFuQmVhdHMgPSBhbGxCZWF0cy5maWx0ZXIoYiA9PiAhYi5zY2VuZV9pZCB8fCAhc2NlbmVJZFNldC5oYXMoYi5zY2VuZV9pZCkpO1xuXHRcdFxuXHRcdGNvbnN0IGJlYXRNYXAgPSBuZXcgTWFwPHN0cmluZywgQmVhdD4oKTsgLy8gTWFwIGJ5IGxpbmsgbmFtZVxuXHRcdGNvbnN0IGJlYXRJZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBCZWF0PigpOyAvLyBNYXAgYnkgSURcblx0XHRcblx0XHRmb3IgKGNvbnN0IGJlYXQgb2Ygb3JwaGFuQmVhdHMpIHtcblx0XHRcdGNvbnN0IGZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUJlYXRGaWxlTmFtZShiZWF0KTtcblx0XHRcdGNvbnN0IGxpbmtOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwubWQkLywgXCJcIik7XG5cdFx0XHRiZWF0TWFwLnNldChsaW5rTmFtZSwgYmVhdCk7XG5cdFx0XHRiZWF0SWRNYXAuc2V0KGJlYXQuaWQsIGJlYXQpO1xuXHRcdH1cblxuXHRcdGxldCBiZWF0T3JkZXJOdW0gPSAxOyAvLyBTdGFydCBmcm9tIDEsIHdpbGwgaW5jcmVtZW50IGFzIHdlIHByb2Nlc3NcblxuXHRcdC8vIFByb2Nlc3MgbGlzdCBpdGVtcyAtIG9yZGVyIG1hdHRlcnMhXG5cdFx0Zm9yIChjb25zdCBpdGVtIG9mIGxpc3QuaXRlbXMpIHtcblx0XHRcdC8vIFBhcnNlIGJlYXQgZGlzcGxheSB0ZXh0XG5cdFx0XHQvLyBDYW4gYmU6IFwiQmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZVwiLCBcImludGVudCAtPiBvdXRjb21lXCIsIG9yIGp1c3QgXCJpbnRlbnRcIlxuXHRcdFx0bGV0IGludGVudDogc3RyaW5nO1xuXHRcdFx0bGV0IG91dGNvbWU6IHN0cmluZyA9IFwiXCI7XG5cblx0XHRcdGNvbnN0IGJlYXRNYXRjaCA9IGl0ZW0uZGlzcGxheVRleHQubWF0Y2goL0JlYXRcXHMrXFxkKzpcXHMqKC4rKS8pO1xuXHRcdFx0aWYgKGJlYXRNYXRjaCkge1xuXHRcdFx0XHQvLyBGb3JtYXQ6IFwiQmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZVwiIG9yIFwiQmVhdCBOOiBpbnRlbnRcIlxuXHRcdFx0XHRjb25zdCBiZWF0VGV4dCA9IGJlYXRNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRcdGNvbnN0IHBhcnRzID0gYmVhdFRleHQuc3BsaXQoL1xccyotPlxccyovKTtcblx0XHRcdFx0aW50ZW50ID0gcGFydHNbMF0udHJpbSgpO1xuXHRcdFx0XHRvdXRjb21lID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLT4gXCIpLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBGb3JtYXQ6IFwiaW50ZW50IC0+IG91dGNvbWVcIiBvciBqdXN0IFwiaW50ZW50XCJcblx0XHRcdFx0Y29uc3QgcGFydHMgPSBpdGVtLmRpc3BsYXlUZXh0LnNwbGl0KC9cXHMqLT5cXHMqLyk7XG5cdFx0XHRcdGludGVudCA9IHBhcnRzWzBdLnRyaW0oKTtcblx0XHRcdFx0b3V0Y29tZSA9IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0+IFwiKS50cmltKCkgOiBcIlwiO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoaXRlbS5saW5rTmFtZSkge1xuXHRcdFx0XHQvLyBCZWF0IGV4aXN0cyAtIGZpbmQgaXRcblx0XHRcdFx0bGV0IGN1cnJlbnRCZWF0ID0gYmVhdE1hcC5nZXQoaXRlbS5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0aWYgKCFjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdC8vIFRyeSB0byBmaW5kIGJ5IElEIGlmIGxpbmtOYW1lIGlzIGFjdHVhbGx5IGFuIElEXG5cdFx0XHRcdFx0Y3VycmVudEJlYXQgPSBiZWF0SWRNYXAuZ2V0KGl0ZW0ubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdGlmIChjdXJyZW50QmVhdCkge1xuXHRcdFx0XHRcdC8vIENoZWNrIGlmIG9yZGVyX251bSBvciBjb250ZW50IG5lZWRzIHRvIGJlIHVwZGF0ZWRcblx0XHRcdFx0XHRjb25zdCBuZWVkc09yZGVyVXBkYXRlID0gY3VycmVudEJlYXQub3JkZXJfbnVtICE9PSBiZWF0T3JkZXJOdW07XG5cdFx0XHRcdFx0Y29uc3QgbmVlZHNDb250ZW50VXBkYXRlID0gaW50ZW50ICE9PSBjdXJyZW50QmVhdC5pbnRlbnQgfHwgb3V0Y29tZSAhPT0gY3VycmVudEJlYXQub3V0Y29tZTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAobmVlZHNPcmRlclVwZGF0ZSB8fCBuZWVkc0NvbnRlbnRVcGRhdGUpIHtcblx0XHRcdFx0XHRcdGN1cnJlbnRCZWF0ID0gYXdhaXQgdGhpcy5hcGlDbGllbnQudXBkYXRlQmVhdChjdXJyZW50QmVhdC5pZCwge1xuXHRcdFx0XHRcdFx0XHRpbnRlbnQsXG5cdFx0XHRcdFx0XHRcdG91dGNvbWUsXG5cdFx0XHRcdFx0XHRcdG9yZGVyX251bTogYmVhdE9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0XHQvLyBLZWVwIHNjZW5lX2lkIGFzIG51bGwgb3IgaW52YWxpZCAob3JwaGFuKSAtIGRvbid0IHVwZGF0ZSBpdFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBDcmVhdGUgbmV3IG9ycGhhbiBiZWF0XG5cdFx0XHRcdC8vIFRoZSBBUEkgcmVxdWlyZXMgc2NlbmVfaWQsIHNvIHdlIG5lZWQgdG8gZmluZCBvciBjcmVhdGUgYW4gb3JwaGFuIHNjZW5lIGZvciBvcnBoYW4gYmVhdHNcblx0XHRcdFx0Ly8gRmlyc3QsIHRyeSB0byBmaW5kIGFuIGV4aXN0aW5nIG9ycGhhbiBzY2VuZSBzcGVjaWZpY2FsbHkgZm9yIG9ycGhhbiBiZWF0c1xuXHRcdFx0XHRjb25zdCBhbGxTY2VuZXMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRTY2VuZXNCeVN0b3J5KHN0b3J5SWQpO1xuXHRcdFx0XHRsZXQgb3JwaGFuQmVhdFNjZW5lID0gYWxsU2NlbmVzLmZpbmQocyA9PiAhcy5jaGFwdGVyX2lkICYmIHMuZ29hbC5zdGFydHNXaXRoKFwiT3JwaGFuIEJlYXRzIENvbnRhaW5lclwiKSk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoIW9ycGhhbkJlYXRTY2VuZSkge1xuXHRcdFx0XHRcdC8vIENyZWF0ZSBhIHNwZWNpYWwgb3JwaGFuIHNjZW5lIGZvciBvcnBoYW4gYmVhdHNcblx0XHRcdFx0XHRvcnBoYW5CZWF0U2NlbmUgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVTY2VuZSh7XG5cdFx0XHRcdFx0XHRzdG9yeV9pZDogc3RvcnlJZCxcblx0XHRcdFx0XHRcdGNoYXB0ZXJfaWQ6IG51bGwsXG5cdFx0XHRcdFx0XHRvcmRlcl9udW06IDk5OTksIC8vIEhpZ2ggbnVtYmVyIHRvIGtlZXAgaXQgYXQgdGhlIGVuZFxuXHRcdFx0XHRcdFx0Z29hbDogXCJPcnBoYW4gQmVhdHMgQ29udGFpbmVyXCIsXG5cdFx0XHRcdFx0XHR0aW1lX3JlZjogXCJcIixcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0YXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQmVhdCh7XG5cdFx0XHRcdFx0c2NlbmVfaWQ6IG9ycGhhbkJlYXRTY2VuZS5pZCxcblx0XHRcdFx0XHRvcmRlcl9udW06IGJlYXRPcmRlck51bSxcblx0XHRcdFx0XHR0eXBlOiBcInNldHVwXCIsIC8vIERlZmF1bHQgdHlwZVxuXHRcdFx0XHRcdGludGVudCxcblx0XHRcdFx0XHRvdXRjb21lLFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0YmVhdE9yZGVyTnVtKys7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUHJvY2VzcyB0aGUgXCIjIyBTY2VuZXMgJiBCZWF0c1wiIGxpc3QgYW5kIGNyZWF0ZS91cGRhdGUvZGVsZXRlIHNjZW5lcyBhbmQgYmVhdHNcblx0cHJpdmF0ZSBhc3luYyBwcm9jZXNzU2NlbmVCZWF0TGlzdChcblx0XHRsaXN0OiB7IGl0ZW1zOiBQYXJzZWRTY2VuZUJlYXRMaXN0SXRlbVtdIH0sXG5cdFx0Y2hhcHRlcklkOiBzdHJpbmcsXG5cdFx0c3RvcnlJZDogc3RyaW5nXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdC8vIEdldCBleGlzdGluZyBzY2VuZXMgYW5kIGJlYXRzIGZvciB0aGlzIGNoYXB0ZXJcblx0XHRjb25zdCBleGlzdGluZ1NjZW5lcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFNjZW5lcyhjaGFwdGVySWQpO1xuXHRcdGNvbnN0IHNjZW5lTWFwID0gbmV3IE1hcDxzdHJpbmcsIFNjZW5lPigpOyAvLyBNYXAgYnkgbGluayBuYW1lXG5cdFx0Y29uc3Qgc2NlbmVJZE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBTY2VuZT4oKTsgLy8gTWFwIGJ5IElEXG5cdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBleGlzdGluZ1NjZW5lcykge1xuXHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShzY2VuZSk7XG5cdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0c2NlbmVNYXAuc2V0KGxpbmtOYW1lLCBzY2VuZSk7XG5cdFx0XHRzY2VuZUlkTWFwLnNldChzY2VuZS5pZCwgc2NlbmUpO1xuXHRcdH1cblxuXHRcdC8vIEdldCBhbGwgYmVhdHMgZm9yIHNjZW5lcyBpbiB0aGlzIGNoYXB0ZXJcblx0XHRjb25zdCBiZWF0TWFwID0gbmV3IE1hcDxzdHJpbmcsIEJlYXQ+KCk7IC8vIE1hcCBieSBsaW5rIG5hbWVcblx0XHRjb25zdCBiZWF0SWRNYXAgPSBuZXcgTWFwPHN0cmluZywgQmVhdD4oKTsgLy8gTWFwIGJ5IElEXG5cdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBleGlzdGluZ1NjZW5lcykge1xuXHRcdFx0Y29uc3QgYmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0cyhzY2VuZS5pZCk7XG5cdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKGJlYXQpO1xuXHRcdFx0XHRjb25zdCBsaW5rTmFtZSA9IGZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRiZWF0TWFwLnNldChsaW5rTmFtZSwgYmVhdCk7XG5cdFx0XHRcdGJlYXRJZE1hcC5zZXQoYmVhdC5pZCwgYmVhdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bGV0IGN1cnJlbnRTY2VuZTogU2NlbmUgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgc2NlbmVPcmRlck51bSA9IDE7IC8vIFN0YXJ0IGZyb20gMSwgd2lsbCBpbmNyZW1lbnQgYXMgd2UgcHJvY2Vzc1xuXHRcdGNvbnN0IGJlYXRPcmRlck51bXMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpOyAvLyBUcmFjayBvcmRlcl9udW0gcGVyIHNjZW5lXG5cblx0XHQvLyBQcm9jZXNzIGxpc3QgaXRlbXMgLSBvcmRlciBtYXR0ZXJzIVxuXHRcdGZvciAoY29uc3QgaXRlbSBvZiBsaXN0Lml0ZW1zKSB7XG5cdFx0XHRpZiAoaXRlbS50eXBlID09PSBcInNjZW5lXCIpIHtcblx0XHRcdFx0Ly8gUmVzZXQgY3VycmVudFNjZW5lIGJlZm9yZSBwcm9jZXNzaW5nXG5cdFx0XHRcdGN1cnJlbnRTY2VuZSA9IG51bGw7XG5cdFx0XHRcdC8vIFBhcnNlIHNjZW5lIGRpc3BsYXkgdGV4dFxuXHRcdFx0XHQvLyBDYW4gYmU6IFwiU2NlbmUgTjogZ29hbCAtIHRpbWVSZWZcIiwgXCJnb2FsIC0gdGltZVJlZlwiLCBvciBqdXN0IFwiZ29hbFwiXG5cdFx0XHRcdGxldCBnb2FsOiBzdHJpbmc7XG5cdFx0XHRcdGxldCB0aW1lUmVmOiBzdHJpbmcgPSBcIlwiO1xuXG5cdFx0XHRcdGNvbnN0IHNjZW5lTWF0Y2ggPSBpdGVtLmRpc3BsYXlUZXh0Lm1hdGNoKC9TY2VuZVxccytcXGQrOlxccyooLispLyk7XG5cdFx0XHRcdGlmIChzY2VuZU1hdGNoKSB7XG5cdFx0XHRcdFx0Ly8gRm9ybWF0OiBcIlNjZW5lIE46IGdvYWwgLSB0aW1lUmVmXCIgb3IgXCJTY2VuZSBOOiBnb2FsXCJcblx0XHRcdFx0XHRjb25zdCBzY2VuZVRleHQgPSBzY2VuZU1hdGNoWzFdLnRyaW0oKTtcblx0XHRcdFx0XHRjb25zdCBwYXJ0cyA9IHNjZW5lVGV4dC5zcGxpdCgvXFxzKi1cXHMqLyk7XG5cdFx0XHRcdFx0Z29hbCA9IHBhcnRzWzBdLnRyaW0oKTtcblx0XHRcdFx0XHR0aW1lUmVmID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLSBcIikudHJpbSgpIDogXCJcIjtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBGb3JtYXQ6IFwiZ29hbCAtIHRpbWVSZWZcIiBvciBqdXN0IFwiZ29hbFwiXG5cdFx0XHRcdFx0Y29uc3QgcGFydHMgPSBpdGVtLmRpc3BsYXlUZXh0LnNwbGl0KC9cXHMqLVxccyovKTtcblx0XHRcdFx0XHRnb2FsID0gcGFydHNbMF0udHJpbSgpO1xuXHRcdFx0XHRcdHRpbWVSZWYgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbihcIiAtIFwiKS50cmltKCkgOiBcIlwiO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVzZXQgY3VycmVudFNjZW5lIGJlZm9yZSBwcm9jZXNzaW5nXG5cdFx0XHRcdGN1cnJlbnRTY2VuZSA9IG51bGw7XG5cblx0XHRcdFx0aWYgKGl0ZW0ubGlua05hbWUpIHtcblx0XHRcdFx0XHQvLyBTY2VuZSBleGlzdHMgLSBmaW5kIGl0XG5cdFx0XHRcdFx0Y3VycmVudFNjZW5lID0gc2NlbmVNYXAuZ2V0KGl0ZW0ubGlua05hbWUpIHx8IG51bGw7XG5cdFx0XHRcdFx0aWYgKCFjdXJyZW50U2NlbmUpIHtcblx0XHRcdFx0XHRcdC8vIFRyeSB0byBmaW5kIGJ5IElEIGlmIGxpbmtOYW1lIGlzIGFjdHVhbGx5IGFuIElEXG5cdFx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBzY2VuZUlkTWFwLmdldChpdGVtLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAoY3VycmVudFNjZW5lKSB7XG5cdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBvcmRlcl9udW0gbmVlZHMgdG8gYmUgdXBkYXRlZFxuXHRcdFx0XHRcdFx0Y29uc3QgbmVlZHNPcmRlclVwZGF0ZSA9IGN1cnJlbnRTY2VuZS5vcmRlcl9udW0gIT09IHNjZW5lT3JkZXJOdW07XG5cdFx0XHRcdFx0XHRjb25zdCBuZWVkc0NvbnRlbnRVcGRhdGUgPSBnb2FsICE9PSBjdXJyZW50U2NlbmUuZ29hbCB8fCB0aW1lUmVmICE9PSBjdXJyZW50U2NlbmUudGltZV9yZWY7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGlmIChuZWVkc09yZGVyVXBkYXRlIHx8IG5lZWRzQ29udGVudFVwZGF0ZSkge1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVTY2VuZShjdXJyZW50U2NlbmUuaWQsIHtcblx0XHRcdFx0XHRcdFx0XHRnb2FsLFxuXHRcdFx0XHRcdFx0XHRcdHRpbWVfcmVmOiB0aW1lUmVmLFxuXHRcdFx0XHRcdFx0XHRcdG9yZGVyX251bTogc2NlbmVPcmRlck51bSxcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdC8vIEluaXRpYWxpemUgYmVhdCBvcmRlciBmb3IgdGhpcyBzY2VuZSAoaW1wb3J0YW50IGZvciBlbXB0eSBzY2VuZXMpXG5cdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBzY2VuZSBhbHJlYWR5IGhhcyBiZWF0cywgaWYgbm90LCBzdGFydCBmcm9tIDFcblx0XHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nQmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0cyhjdXJyZW50U2NlbmUuaWQpO1xuXHRcdFx0XHRcdFx0aWYgKGV4aXN0aW5nQmVhdHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdGJlYXRPcmRlck51bXMuc2V0KGN1cnJlbnRTY2VuZS5pZCwgMSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBTY2VuZSBoYXMgYmVhdHMsIHVzZSBtYXggb3JkZXJfbnVtICsgMSBmb3IgbmV3IGJlYXRzXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1heE9yZGVyTnVtID0gTWF0aC5tYXgoLi4uZXhpc3RpbmdCZWF0cy5tYXAoYiA9PiBiLm9yZGVyX251bSkpO1xuXHRcdFx0XHRcdFx0XHRiZWF0T3JkZXJOdW1zLnNldChjdXJyZW50U2NlbmUuaWQsIG1heE9yZGVyTnVtICsgMSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIENyZWF0ZSBuZXcgc2NlbmVcblx0XHRcdFx0XHRjdXJyZW50U2NlbmUgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5jcmVhdGVTY2VuZSh7XG5cdFx0XHRcdFx0XHRzdG9yeV9pZDogc3RvcnlJZCxcblx0XHRcdFx0XHRcdGNoYXB0ZXJfaWQ6IGNoYXB0ZXJJZCxcblx0XHRcdFx0XHRcdG9yZGVyX251bTogc2NlbmVPcmRlck51bSxcblx0XHRcdFx0XHRcdGdvYWwsXG5cdFx0XHRcdFx0XHR0aW1lX3JlZjogdGltZVJlZixcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBVcGRhdGUgbWFwc1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lRmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlU2NlbmVGaWxlTmFtZShjdXJyZW50U2NlbmUpO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lTGlua05hbWUgPSBzY2VuZUZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdHNjZW5lTWFwLnNldChzY2VuZUxpbmtOYW1lLCBjdXJyZW50U2NlbmUpO1xuXHRcdFx0XHRcdHNjZW5lSWRNYXAuc2V0KGN1cnJlbnRTY2VuZS5pZCwgY3VycmVudFNjZW5lKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyBJbml0aWFsaXplIGJlYXQgb3JkZXIgZm9yIG5ldyBzY2VuZSAoc3RhcnRzIGF0IDEpXG5cdFx0XHRcdFx0YmVhdE9yZGVyTnVtcy5zZXQoY3VycmVudFNjZW5lLmlkLCAxKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0c2NlbmVPcmRlck51bSsrO1xuXHRcdFx0fSBlbHNlIGlmIChpdGVtLnR5cGUgPT09IFwiYmVhdFwiICYmIGN1cnJlbnRTY2VuZSkge1xuXHRcdFx0XHQvLyBQYXJzZSBiZWF0IGRpc3BsYXkgdGV4dFxuXHRcdFx0XHQvLyBDYW4gYmU6IFwiQmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZVwiLCBcImludGVudCAtPiBvdXRjb21lXCIsIG9yIGp1c3QgXCJpbnRlbnRcIlxuXHRcdFx0XHRsZXQgaW50ZW50OiBzdHJpbmc7XG5cdFx0XHRcdGxldCBvdXRjb21lOiBzdHJpbmcgPSBcIlwiO1xuXG5cdFx0XHRcdGNvbnN0IGJlYXRNYXRjaCA9IGl0ZW0uZGlzcGxheVRleHQubWF0Y2goL0JlYXRcXHMrXFxkKzpcXHMqKC4rKS8pO1xuXHRcdFx0XHRpZiAoYmVhdE1hdGNoKSB7XG5cdFx0XHRcdFx0Ly8gRm9ybWF0OiBcIkJlYXQgTjogaW50ZW50IC0+IG91dGNvbWVcIiBvciBcIkJlYXQgTjogaW50ZW50XCJcblx0XHRcdFx0XHRjb25zdCBiZWF0VGV4dCA9IGJlYXRNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRcdFx0Y29uc3QgcGFydHMgPSBiZWF0VGV4dC5zcGxpdCgvXFxzKi0+XFxzKi8pO1xuXHRcdFx0XHRcdGludGVudCA9IHBhcnRzWzBdLnRyaW0oKTtcblx0XHRcdFx0XHRvdXRjb21lID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLT4gXCIpLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gRm9ybWF0OiBcImludGVudCAtPiBvdXRjb21lXCIgb3IganVzdCBcImludGVudFwiXG5cdFx0XHRcdFx0Y29uc3QgcGFydHMgPSBpdGVtLmRpc3BsYXlUZXh0LnNwbGl0KC9cXHMqLT5cXHMqLyk7XG5cdFx0XHRcdFx0aW50ZW50ID0gcGFydHNbMF0udHJpbSgpO1xuXHRcdFx0XHRcdG91dGNvbWUgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbihcIiAtPiBcIikudHJpbSgpIDogXCJcIjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEdldCBjdXJyZW50IGJlYXQgb3JkZXJfbnVtIGZvciB0aGlzIHNjZW5lXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRCZWF0T3JkZXJOdW0gPSBiZWF0T3JkZXJOdW1zLmdldChjdXJyZW50U2NlbmUuaWQpIHx8IDE7XG5cblx0XHRcdFx0aWYgKGl0ZW0ubGlua05hbWUpIHtcblx0XHRcdFx0XHQvLyBCZWF0IGV4aXN0cyAtIGZpbmQgaXRcblx0XHRcdFx0XHRsZXQgY3VycmVudEJlYXQgPSBiZWF0TWFwLmdldChpdGVtLmxpbmtOYW1lKSB8fCBudWxsO1xuXHRcdFx0XHRcdGlmICghY3VycmVudEJlYXQpIHtcblx0XHRcdFx0XHRcdC8vIFRyeSB0byBmaW5kIGJ5IElEIGlmIGxpbmtOYW1lIGlzIGFjdHVhbGx5IGFuIElEXG5cdFx0XHRcdFx0XHRjdXJyZW50QmVhdCA9IGJlYXRJZE1hcC5nZXQoaXRlbS5saW5rTmFtZSkgfHwgbnVsbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKGN1cnJlbnRCZWF0KSB7XG5cdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBvcmRlcl9udW0gb3IgY29udGVudCBuZWVkcyB0byBiZSB1cGRhdGVkXG5cdFx0XHRcdFx0XHRjb25zdCBuZWVkc09yZGVyVXBkYXRlID0gY3VycmVudEJlYXQub3JkZXJfbnVtICE9PSBjdXJyZW50QmVhdE9yZGVyTnVtO1xuXHRcdFx0XHRcdFx0Y29uc3QgbmVlZHNDb250ZW50VXBkYXRlID0gaW50ZW50ICE9PSBjdXJyZW50QmVhdC5pbnRlbnQgfHwgb3V0Y29tZSAhPT0gY3VycmVudEJlYXQub3V0Y29tZTtcblx0XHRcdFx0XHRcdGNvbnN0IG5lZWRzU2NlbmVVcGRhdGUgPSBjdXJyZW50QmVhdC5zY2VuZV9pZCAhPT0gY3VycmVudFNjZW5lLmlkO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRpZiAobmVlZHNPcmRlclVwZGF0ZSB8fCBuZWVkc0NvbnRlbnRVcGRhdGUgfHwgbmVlZHNTY2VuZVVwZGF0ZSkge1xuXHRcdFx0XHRcdFx0XHRjdXJyZW50QmVhdCA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LnVwZGF0ZUJlYXQoY3VycmVudEJlYXQuaWQsIHtcblx0XHRcdFx0XHRcdFx0XHRpbnRlbnQsXG5cdFx0XHRcdFx0XHRcdFx0b3V0Y29tZSxcblx0XHRcdFx0XHRcdFx0XHRvcmRlcl9udW06IGN1cnJlbnRCZWF0T3JkZXJOdW0sXG5cdFx0XHRcdFx0XHRcdFx0c2NlbmVfaWQ6IGN1cnJlbnRTY2VuZS5pZCxcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgbWFwcyBpZiBzY2VuZSBjaGFuZ2VkXG5cdFx0XHRcdFx0XHRcdGlmIChuZWVkc1NjZW5lVXBkYXRlKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgYmVhdEZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUJlYXRGaWxlTmFtZShjdXJyZW50QmVhdCk7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgYmVhdExpbmtOYW1lID0gYmVhdEZpbGVOYW1lLnJlcGxhY2UoL1xcLm1kJC8sIFwiXCIpO1xuXHRcdFx0XHRcdFx0XHRcdGJlYXRNYXAuc2V0KGJlYXRMaW5rTmFtZSwgY3VycmVudEJlYXQpO1xuXHRcdFx0XHRcdFx0XHRcdGJlYXRJZE1hcC5zZXQoY3VycmVudEJlYXQuaWQsIGN1cnJlbnRCZWF0KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBDcmVhdGUgbmV3IGJlYXRcblx0XHRcdFx0XHRjb25zdCBuZXdCZWF0ID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuY3JlYXRlQmVhdCh7XG5cdFx0XHRcdFx0XHRzY2VuZV9pZDogY3VycmVudFNjZW5lLmlkLFxuXHRcdFx0XHRcdFx0b3JkZXJfbnVtOiBjdXJyZW50QmVhdE9yZGVyTnVtLFxuXHRcdFx0XHRcdFx0dHlwZTogXCJzZXR1cFwiLCAvLyBEZWZhdWx0IHR5cGVcblx0XHRcdFx0XHRcdGludGVudCxcblx0XHRcdFx0XHRcdG91dGNvbWUsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gVXBkYXRlIG1hcHNcblx0XHRcdFx0XHRjb25zdCBiZWF0RmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQmVhdEZpbGVOYW1lKG5ld0JlYXQpO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRMaW5rTmFtZSA9IGJlYXRGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblx0XHRcdFx0XHRiZWF0TWFwLnNldChiZWF0TGlua05hbWUsIG5ld0JlYXQpO1xuXHRcdFx0XHRcdGJlYXRJZE1hcC5zZXQobmV3QmVhdC5pZCwgbmV3QmVhdCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdC8vIEluY3JlbWVudCBiZWF0IG9yZGVyIGZvciBuZXh0IGJlYXQgaW4gdGhpcyBzY2VuZVxuXHRcdFx0XHRiZWF0T3JkZXJOdW1zLnNldChjdXJyZW50U2NlbmUuaWQsIGN1cnJlbnRCZWF0T3JkZXJOdW0gKyAxKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBGaW5kIGNvbnRlbnQgYmxvY2sgZmlsZSBieSBsaW5rIG5hbWUgKHNlYXJjaGVzIHJlY3Vyc2l2ZWx5IGluIGFsbCB0eXBlIHN1YmZvbGRlcnMpXG5cdHByaXZhdGUgYXN5bmMgZmluZENvbnRlbnRCbG9ja0ZpbGVCeUxpbmtOYW1lKFxuXHRcdGNvbnRlbnRzUm9vdDogc3RyaW5nLFxuXHRcdGxpbmtOYW1lOiBzdHJpbmdcblx0KTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG5cdFx0Y29uc3Qgcm9vdCA9IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY29udGVudHNSb290KTtcblx0XHRpZiAoIShyb290IGluc3RhbmNlb2YgVEZvbGRlcikpIHJldHVybiBudWxsO1xuXG5cdFx0Y29uc3QgdGFyZ2V0ID0gYCR7bGlua05hbWV9Lm1kYDtcblxuXHRcdC8vIFJlY3Vyc2l2ZSBzZWFyY2ggaW4gYWxsIHN1YmZvbGRlcnNcblx0XHRjb25zdCBzdGFjazogVEZvbGRlcltdID0gW3Jvb3RdO1xuXHRcdHdoaWxlIChzdGFjay5sZW5ndGgpIHtcblx0XHRcdGNvbnN0IGZvbGRlciA9IHN0YWNrLnBvcCgpITtcblx0XHRcdGZvciAoY29uc3QgY2hpbGQgb2YgZm9sZGVyLmNoaWxkcmVuKSB7XG5cdFx0XHRcdGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcblx0XHRcdFx0XHRzdGFjay5wdXNoKGNoaWxkKTtcblx0XHRcdFx0fSBlbHNlIGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGaWxlICYmIGNoaWxkLm5hbWUgPT09IHRhcmdldCkge1xuXHRcdFx0XHRcdHJldHVybiBjaGlsZC5wYXRoO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHQvLyBGaW5kIHByb3NlIGJsb2NrIGJ5IGNvbnRlbnQgd2hlbiBmaWxlIG5hbWUgZG9lc24ndCBtYXRjaCAoc2VhcmNoZXMgcmVjdXJzaXZlbHkgaW4gYWxsIHR5cGUgc3ViZm9sZGVycylcblx0cHJpdmF0ZSBhc3luYyBmaW5kQ29udGVudEJsb2NrQnlDb250ZW50KFxuXHRcdGNvbnRlbnRzRm9sZGVyUGF0aDogc3RyaW5nLFxuXHRcdGNvbnRlbnQ6IHN0cmluZ1xuXHQpOiBQcm9taXNlPENvbnRlbnRCbG9jayB8IG51bGw+IHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZm9sZGVyID0gdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLmdldEFic3RyYWN0RmlsZUJ5UGF0aChjb250ZW50c0ZvbGRlclBhdGgpO1xuXHRcdFx0aWYgKCEoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IG5vcm1hbGl6ZWRDb250ZW50ID0gY29udGVudC50cmltKCk7XG5cblx0XHRcdC8vIFJlY3Vyc2l2ZSBzZWFyY2ggdGhyb3VnaCBhbGwgc3ViZm9sZGVyc1xuXHRcdFx0Y29uc3Qgc3RhY2s6IFRGb2xkZXJbXSA9IFtmb2xkZXJdO1xuXHRcdFx0d2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuXHRcdFx0XHRjb25zdCBjdXJyZW50Rm9sZGVyID0gc3RhY2sucG9wKCkhO1xuXHRcdFx0XHRmb3IgKGNvbnN0IGNoaWxkIG9mIGN1cnJlbnRGb2xkZXIuY2hpbGRyZW4pIHtcblx0XHRcdFx0XHRpZiAoY2hpbGQgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG5cdFx0XHRcdFx0XHRzdGFjay5wdXNoKGNoaWxkKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGNoaWxkIGluc3RhbmNlb2YgVEZpbGUgJiYgY2hpbGQuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGNvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIucmVhZENvbnRlbnRCbG9ja0Zyb21GaWxlKGNoaWxkLnBhdGgpO1xuXHRcdFx0XHRcdFx0aWYgKGNvbnRlbnRCbG9jayAmJiBjb250ZW50QmxvY2suY29udGVudC50cmltKCkgPT09IG5vcm1hbGl6ZWRDb250ZW50KSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBjb250ZW50QmxvY2s7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3Igc2VhcmNoaW5nIGZvciBwcm9zZSBibG9jayBieSBjb250ZW50OlwiLCBlcnIpO1xuXHRcdH1cblxuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0Ly8gRmluZCBwcm9zZSBibG9jayBieSBJRCB3aGVuIHdlIGhhdmUgcmVtb3RlIElEIGJ1dCBuZWVkIGxvY2FsIGZpbGUgKHNlYXJjaGVzIHJlY3Vyc2l2ZWx5IGluIGFsbCB0eXBlIHN1YmZvbGRlcnMpXG5cdHByaXZhdGUgYXN5bmMgZmluZENvbnRlbnRCbG9ja0J5SWQoXG5cdFx0Y29udGVudHNGb2xkZXJQYXRoOiBzdHJpbmcsXG5cdFx0aWQ6IHN0cmluZ1xuXHQpOiBQcm9taXNlPENvbnRlbnRCbG9jayB8IG51bGw+IHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZm9sZGVyID0gdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLmdldEFic3RyYWN0RmlsZUJ5UGF0aChjb250ZW50c0ZvbGRlclBhdGgpO1xuXHRcdFx0aWYgKCEoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJlY3Vyc2l2ZSBzZWFyY2ggdGhyb3VnaCBhbGwgc3ViZm9sZGVyc1xuXHRcdFx0Y29uc3Qgc3RhY2s6IFRGb2xkZXJbXSA9IFtmb2xkZXJdO1xuXHRcdFx0d2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuXHRcdFx0XHRjb25zdCBjdXJyZW50Rm9sZGVyID0gc3RhY2sucG9wKCkhO1xuXHRcdFx0XHRmb3IgKGNvbnN0IGNoaWxkIG9mIGN1cnJlbnRGb2xkZXIuY2hpbGRyZW4pIHtcblx0XHRcdFx0XHRpZiAoY2hpbGQgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG5cdFx0XHRcdFx0XHRzdGFjay5wdXNoKGNoaWxkKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGNoaWxkIGluc3RhbmNlb2YgVEZpbGUgJiYgY2hpbGQuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGNvbnRlbnRCbG9jayA9IGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIucmVhZENvbnRlbnRCbG9ja0Zyb21GaWxlKGNoaWxkLnBhdGgpO1xuXHRcdFx0XHRcdFx0aWYgKGNvbnRlbnRCbG9jayAmJiBjb250ZW50QmxvY2suaWQgPT09IGlkKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBjb250ZW50QmxvY2s7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3Igc2VhcmNoaW5nIGZvciBwcm9zZSBibG9jayBieSBJRDpcIiwgZXJyKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8vIEdldCB0aGUgY29ycmVjdCBmaWxlIHBhdGggZm9yIGEgY29udGVudCBibG9jayAoYWx3YXlzIHVzZXMgdHlwZSBzdWJmb2xkZXJzKVxuXHRwcml2YXRlIGdldENvbnRlbnRCbG9ja0ZpbGVQYXRoKHN0b3J5Rm9sZGVyUGF0aDogc3RyaW5nLCBjb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayk6IHN0cmluZyB7XG5cdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoY29udGVudEJsb2NrKTtcblx0XHRjb25zdCB0eXBlRm9sZGVyUGF0aCA9IHRoaXMuZmlsZU1hbmFnZXIuZ2V0Q29udGVudEJsb2NrRm9sZGVyUGF0aChzdG9yeUZvbGRlclBhdGgsIGNvbnRlbnRCbG9jay50eXBlIHx8IFwidGV4dFwiKTtcblx0XHRyZXR1cm4gYCR7dHlwZUZvbGRlclBhdGh9LyR7ZmlsZU5hbWV9YDtcblx0fVxuXG5cdC8vIEdldCBjb250ZW50IGJsb2NrIGZpbGUgcGF0aCBmcm9tIGNvbnRlbnRzIGZvbGRlciBwYXRoICgwMy1jb250ZW50cylcblx0cHJpdmF0ZSBhc3luYyBnZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhcblx0XHRjb250ZW50c0ZvbGRlclBhdGg6IHN0cmluZywgXG5cdFx0Y29udGVudEJsb2NrOiBDb250ZW50QmxvY2tcblx0KTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHRjb25zdCB0eXBlRm9sZGVyID0gdGhpcy5maWxlTWFuYWdlci5nZXRDb250ZW50VHlwZUZvbGRlcihjb250ZW50QmxvY2sudHlwZSB8fCBcInRleHRcIik7XG5cdFx0Y29uc3QgdHlwZUZvbGRlclBhdGggPSBgJHtjb250ZW50c0ZvbGRlclBhdGh9LyR7dHlwZUZvbGRlcn1gO1xuXHRcdC8vIEVuc3VyZSB0eXBlIHN1YmZvbGRlciBleGlzdHNcblx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyh0eXBlRm9sZGVyUGF0aCk7XG5cdFx0Y29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVNYW5hZ2VyLmdlbmVyYXRlQ29udGVudEJsb2NrRmlsZU5hbWUoY29udGVudEJsb2NrKTtcblx0XHRyZXR1cm4gYCR7dHlwZUZvbGRlclBhdGh9LyR7ZmlsZU5hbWV9YDtcblx0fVxuXG5cdC8vIFJlc29sdmUgY29uZmxpY3QgdXNpbmcgbW9kYWwgb3IgYXV0by1yZXNvbHZlIGJhc2VkIG9uIG1vZGVcblx0cHJpdmF0ZSBhc3luYyByZXNvbHZlQ29uZmxpY3QoXG5cdFx0bG9jYWxDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jayxcblx0XHRyZW1vdGVDb250ZW50QmxvY2s6IENvbnRlbnRCbG9ja1xuXHQpOiBQcm9taXNlPENvbmZsaWN0UmVzb2x1dGlvblJlc3VsdD4ge1xuXHRcdC8vIEluIGxvY2FsIG1vZGUsIGF1dG9tYXRpY2FsbHkgcmVzb2x2ZSB0byBcImxvY2FsIHdpbnNcIlxuXHRcdGlmICh0aGlzLnNldHRpbmdzLm1vZGUgPT09IFwibG9jYWxcIikge1xuXHRcdFx0cmV0dXJuIHsgcmVzb2x1dGlvbjogXCJsb2NhbFwiIH07XG5cdFx0fVxuXG5cdFx0Ly8gSW4gcmVtb3RlIG1vZGUsIHNob3cgbW9kYWwgZm9yIHVzZXIgdG8gY2hvb3NlXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBDb25mbGljdE1vZGFsKFxuXHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0bG9jYWxDb250ZW50QmxvY2ssXG5cdFx0XHRcdHJlbW90ZUNvbnRlbnRCbG9jayxcblx0XHRcdFx0YXN5bmMgKHJlc3VsdCkgPT4ge1xuXHRcdFx0XHRcdHJlc29sdmUocmVzdWx0KTtcblx0XHRcdFx0fVxuXHRcdFx0KTtcblx0XHRcdG1vZGFsLm9wZW4oKTtcblx0XHR9KTtcblx0fVxuXG5cdC8vIFVwZGF0ZSB0aGUgQ2hhcHRlciBzZWN0aW9uIGluIGNoYXB0ZXIgZmlsZSAoaGllcmFyY2hpY2FsIHN0cnVjdHVyZSlcblx0cHJpdmF0ZSBhc3luYyB1cGRhdGVDaGFwdGVyUHJvc2VTZWN0aW9uSGllcmFyY2hpY2FsKFxuXHRcdG9yaWdpbmFsQ29udGVudDogc3RyaW5nLFxuXHRcdHVwZGF0ZWRTZWN0aW9uczogc3RyaW5nW10sXG5cdFx0ZmlsZTogVEZpbGUsXG5cdFx0ZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIHN0cmluZz5cblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Ly8gRXh0cmFjdCBmcm9udG1hdHRlclxuXHRcdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBvcmlnaW5hbENvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcblx0XHRjb25zdCBmcm9udG1hdHRlclRleHQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXSA6IFwiXCI7XG5cblx0XHQvLyBFeHRyYWN0IGNvbnRlbnQgYWZ0ZXIgZnJvbnRtYXR0ZXJcblx0XHRjb25zdCBib2R5U3RhcnQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXS5sZW5ndGggOiAwO1xuXHRcdGNvbnN0IGJvZHlDb250ZW50ID0gb3JpZ2luYWxDb250ZW50LnN1YnN0cmluZyhib2R5U3RhcnQpLnRyaW0oKTtcblxuXHRcdC8vIEdldCBjaGFwdGVyIG51bWJlciBhbmQgdGl0bGUgZnJvbSBmcm9udG1hdHRlclxuXHRcdGNvbnN0IGNoYXB0ZXJOdW1iZXIgPSBmcm9udG1hdHRlci5udW1iZXIgfHwgXCIxXCI7XG5cdFx0Y29uc3QgY2hhcHRlclRpdGxlID0gZnJvbnRtYXR0ZXIudGl0bGUgfHwgXCJVbnRpdGxlZFwiO1xuXG5cdFx0Ly8gRmluZCBDaGFwdGVyIHNlY3Rpb24gYW5kIHJlcGxhY2UgaXRcblx0XHQvLyBDYXB0dXJlIGV2ZXJ5dGhpbmcgdW50aWwgdGhlIGVuZCBzaW5jZSBTY2VuZSBhbmQgQmVhdCBhcmUgcGFydCBvZiB0aGUgY2hhcHRlciBzZWN0aW9uXG5cdFx0Ly8gQWNjZXB0IHdpdGggb3Igd2l0aG91dCBibGFuayBsaW5lIGFmdGVyIHRoZSBjaGFwdGVyIGhlYWRlclxuXHRcdC8vIFVzZSBub24tZ3JlZWR5IG1hdGNoIHRvIHN0b3AgYXQgbmV4dCAjIyBDaGFwdGVyIGlmIGl0IGV4aXN0c1xuXHRcdGNvbnN0IGNoYXB0ZXJIZWFkZXJQYXR0ZXJuID0gYCMjXFxcXHMrQ2hhcHRlclxcXFxzKyR7Y2hhcHRlck51bWJlcn06XFxcXHMrW15cXFxcbl0rYDtcblx0XHRjb25zdCBjaGFwdGVyU2VjdGlvbk1hdGNoID0gYm9keUNvbnRlbnQubWF0Y2gobmV3IFJlZ0V4cChgKFtcXFxcc1xcXFxTXSo/JHtjaGFwdGVySGVhZGVyUGF0dGVybn1cXFxccypcXFxcbispKFtcXFxcc1xcXFxTXSo/KSg/PVxcXFxuIyNcXFxccytDaGFwdGVyXFxcXHMrXFxcXGQrOnwkKWAsIFwiaVwiKSk7XG5cdFx0XG5cdFx0aWYgKCFjaGFwdGVyU2VjdGlvbk1hdGNoKSB7XG5cdFx0XHQvLyBObyBDaGFwdGVyIHNlY3Rpb24gZm91bmQsIGFkZCBpdFxuXHRcdFx0Y29uc3QgbmV3Q2hhcHRlclNlY3Rpb24gPSBgXFxuXFxuIyMgQ2hhcHRlciAke2NoYXB0ZXJOdW1iZXJ9OiAke2NoYXB0ZXJUaXRsZX1cXG5cXG4ke3VwZGF0ZWRTZWN0aW9ucy5qb2luKFwiXFxuXFxuXCIpfVxcblxcbmA7XG5cdFx0XHRjb25zdCB1cGRhdGVkQ29udGVudCA9IGAke2Zyb250bWF0dGVyVGV4dH1cXG4ke2JvZHlDb250ZW50fSR7bmV3Q2hhcHRlclNlY3Rpb259YDtcblx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZ2V0VmF1bHQoKS5tb2RpZnkoZmlsZSwgdXBkYXRlZENvbnRlbnQpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFJlcGxhY2UgQ2hhcHRlciBzZWN0aW9uIGNvbnRlbnRcblx0XHRjb25zdCBiZWZvcmVDaGFwdGVyID0gY2hhcHRlclNlY3Rpb25NYXRjaFsxXTtcblx0XHRjb25zdCBhZnRlckNoYXB0ZXIgPSBib2R5Q29udGVudC5zdWJzdHJpbmcoY2hhcHRlclNlY3Rpb25NYXRjaC5pbmRleCEgKyBjaGFwdGVyU2VjdGlvbk1hdGNoWzBdLmxlbmd0aCk7XG5cdFx0Y29uc3QgbmV3Q2hhcHRlckNvbnRlbnQgPSB1cGRhdGVkU2VjdGlvbnMuam9pbihcIlxcblxcblwiKTtcblx0XHRjb25zdCB1cGRhdGVkQm9keSA9IGAke2JlZm9yZUNoYXB0ZXJ9JHtuZXdDaGFwdGVyQ29udGVudH1cXG5cXG4ke2FmdGVyQ2hhcHRlcn1gO1xuXHRcdGNvbnN0IHVwZGF0ZWRDb250ZW50ID0gYCR7ZnJvbnRtYXR0ZXJUZXh0fVxcbiR7dXBkYXRlZEJvZHl9YDtcblx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkubW9kaWZ5KGZpbGUsIHVwZGF0ZWRDb250ZW50KTtcblx0fVxuXG5cdC8vIFVwZGF0ZSB0aGUgUHJvc2Ugc2VjdGlvbiBpbiBjaGFwdGVyIGZpbGVcblx0cHJpdmF0ZSBhc3luYyB1cGRhdGVDaGFwdGVyUHJvc2VTZWN0aW9uKFxuXHRcdG9yaWdpbmFsQ29udGVudDogc3RyaW5nLFxuXHRcdHVwZGF0ZWRQYXJhZ3JhcGhzOiBzdHJpbmdbXSxcblx0XHRmaWxlOiBURmlsZVxuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBFeHRyYWN0IGZyb250bWF0dGVyXG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IG9yaWdpbmFsQ29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuXHRcdGNvbnN0IGZyb250bWF0dGVyID0gZnJvbnRtYXR0ZXJNYXRjaCA/IGZyb250bWF0dGVyTWF0Y2hbMF0gOiBcIlwiO1xuXG5cdFx0Ly8gRXh0cmFjdCBjb250ZW50IGFmdGVyIGZyb250bWF0dGVyXG5cdFx0Y29uc3QgYm9keVN0YXJ0ID0gZnJvbnRtYXR0ZXJNYXRjaCA/IGZyb250bWF0dGVyTWF0Y2hbMF0ubGVuZ3RoIDogMDtcblx0XHRjb25zdCBib2R5Q29udGVudCA9IG9yaWdpbmFsQ29udGVudC5zdWJzdHJpbmcoYm9keVN0YXJ0KS50cmltKCk7XG5cblx0XHQvLyBGaW5kIFByb3NlIHNlY3Rpb24gYW5kIHJlcGxhY2UgaXRcblx0XHRjb25zdCBwcm9zZVNlY3Rpb25NYXRjaCA9IGJvZHlDb250ZW50Lm1hdGNoKC8oW1xcc1xcU10qPyMjXFxzK1Byb3NlXFxzKlxcblxcbikoW1xcc1xcU10qPykoPz1cXG4jI3xcXG4qJCkvKTtcblx0XHRcblx0XHRpZiAoIXByb3NlU2VjdGlvbk1hdGNoKSB7XG5cdFx0XHQvLyBObyBQcm9zZSBzZWN0aW9uIGZvdW5kLCBhZGQgaXRcblx0XHRcdGNvbnN0IG5ld1Byb3NlU2VjdGlvbiA9IGBcXG5cXG4jIyBQcm9zZVxcblxcbiR7dXBkYXRlZFBhcmFncmFwaHMuam9pbihcIlxcblxcblwiKX1cXG5cXG5gO1xuXHRcdFx0Y29uc3QgdXBkYXRlZENvbnRlbnQgPSBgJHtmcm9udG1hdHRlcn1cXG4ke2JvZHlDb250ZW50fSR7bmV3UHJvc2VTZWN0aW9ufWA7XG5cdFx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkubW9kaWZ5KGZpbGUsIHVwZGF0ZWRDb250ZW50KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBSZXBsYWNlIFByb3NlIHNlY3Rpb24gY29udGVudFxuXHRcdGNvbnN0IGJlZm9yZVByb3NlID0gcHJvc2VTZWN0aW9uTWF0Y2hbMV07XG5cdFx0Y29uc3QgbmV3UHJvc2VDb250ZW50ID0gdXBkYXRlZFBhcmFncmFwaHMuam9pbihcIlxcblxcblwiKTtcblx0XHRjb25zdCBhZnRlclByb3NlID0gYm9keUNvbnRlbnQuc3Vic3RyaW5nKHByb3NlU2VjdGlvbk1hdGNoLmluZGV4ISArIHByb3NlU2VjdGlvbk1hdGNoWzBdLmxlbmd0aCk7XG5cblx0XHRjb25zdCB1cGRhdGVkQm9keSA9IGAke2JlZm9yZVByb3NlfSR7bmV3UHJvc2VDb250ZW50fVxcblxcbiR7YWZ0ZXJQcm9zZX1gO1xuXHRcdGNvbnN0IHVwZGF0ZWRDb250ZW50ID0gYCR7ZnJvbnRtYXR0ZXJ9XFxuJHt1cGRhdGVkQm9keX1gO1xuXG5cdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLm1vZGlmeShmaWxlLCB1cGRhdGVkQ29udGVudCk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHdyaXRlQ2hhcHRlckJ1bmRsZShkYXRhOiB7XG5cdFx0c3Rvcnk6IFN0b3J5O1xuXHRcdGNoYXB0ZXI6IENoYXB0ZXI7XG5cdFx0c2NlbmVzOiBTY2VuZVdpdGhCZWF0c1tdO1xuXHRcdGNvbnRlbnRCbG9ja3M6IENvbnRlbnRCbG9ja1tdO1xuXHRcdGNvbnRlbnRCbG9ja1JlZnM6IENvbnRlbnRBbmNob3JbXTtcblx0fSk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IGZvbGRlclBhdGggPSB0aGlzLmZpbGVNYW5hZ2VyLmdldFN0b3J5Rm9sZGVyUGF0aChkYXRhLnN0b3J5LnRpdGxlKTtcblx0XHRhd2FpdCB0aGlzLmVuc3VyZVN0b3J5Rm9sZGVycyhmb2xkZXJQYXRoKTtcblxuXHRcdGZvciAoY29uc3QgY29udGVudEJsb2NrIG9mIGRhdGEuY29udGVudEJsb2Nrcykge1xuXHRcdFx0YXdhaXQgdGhpcy53cml0ZUNvbnRlbnRCbG9ja1RvRm9sZGVyKGZvbGRlclBhdGgsIGRhdGEuc3RvcnkudGl0bGUsIGNvbnRlbnRCbG9jayk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY2hhcHRlcnNGb2xkZXJQYXRoID0gYCR7Zm9sZGVyUGF0aH0vMDAtY2hhcHRlcnNgO1xuXHRcdGNvbnN0IGNoYXB0ZXJGaWxlTmFtZSA9IGBDaGFwdGVyLSR7ZGF0YS5jaGFwdGVyLm51bWJlcn0ubWRgO1xuXHRcdGNvbnN0IGNoYXB0ZXJGaWxlUGF0aCA9IGAke2NoYXB0ZXJzRm9sZGVyUGF0aH0vJHtjaGFwdGVyRmlsZU5hbWV9YDtcblxuXHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDaGFwdGVyRmlsZShcblx0XHRcdHsgY2hhcHRlcjogZGF0YS5jaGFwdGVyLCBzY2VuZXM6IGRhdGEuc2NlbmVzIH0sXG5cdFx0XHRjaGFwdGVyRmlsZVBhdGgsXG5cdFx0XHRkYXRhLnN0b3J5LnRpdGxlLFxuXHRcdFx0ZGF0YS5jb250ZW50QmxvY2tzLFxuXHRcdFx0ZGF0YS5jb250ZW50QmxvY2tSZWZzLFxuXHRcdFx0W11cblx0XHQpO1xuXG5cdFx0Y29uc3QgeyBieVNjZW5lLCBieUJlYXQgfSA9IHRoaXMuYnVpbGRDb250ZW50QmxvY2tBc3NvY2lhdGlvbk1hcHMoXG5cdFx0XHRkYXRhLmNvbnRlbnRCbG9ja3MsXG5cdFx0XHRkYXRhLmNvbnRlbnRCbG9ja1JlZnNcblx0XHQpO1xuXG5cdFx0YXdhaXQgdGhpcy5zeW5jU2NlbmVzVG9GaWxlc3lzdGVtKFxuXHRcdFx0ZGF0YS5zY2VuZXMsXG5cdFx0XHRmb2xkZXJQYXRoLFxuXHRcdFx0ZGF0YS5zdG9yeS50aXRsZSxcblx0XHRcdGJ5U2NlbmUsXG5cdFx0XHRieUJlYXRcblx0XHQpO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyB3cml0ZVNjZW5lQnVuZGxlKGRhdGE6IHtcblx0XHRzdG9yeVRpdGxlOiBzdHJpbmc7XG5cdFx0Zm9sZGVyUGF0aDogc3RyaW5nO1xuXHRcdHNjZW5lOiBTY2VuZTtcblx0XHRiZWF0czogQmVhdFtdO1xuXHRcdHNjZW5lQ29udGVudEJsb2Nrcz86IENvbnRlbnRCbG9ja1tdO1xuXHRcdGJlYXRDb250ZW50QmxvY2tNYXA/OiBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2tbXT47XG5cdFx0c2tpcFJlbW90ZUNvbnRlbnRGZXRjaD86IGJvb2xlYW47XG5cdH0pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyhgJHtkYXRhLmZvbGRlclBhdGh9LzAxLXNjZW5lc2ApO1xuXHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKGAke2RhdGEuZm9sZGVyUGF0aH0vMDItYmVhdHNgKTtcblxuXHRcdGNvbnN0IHNjZW5lQ29udGVudEJsb2NrcyA9XG5cdFx0XHRkYXRhLnNjZW5lQ29udGVudEJsb2NrcyA/P1xuXHRcdFx0KGRhdGEuc2tpcFJlbW90ZUNvbnRlbnRGZXRjaFxuXHRcdFx0XHQ/IFtdXG5cdFx0XHRcdDogYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrc0J5U2NlbmUoZGF0YS5zY2VuZS5pZCkpO1xuXG5cdFx0Y29uc3Qgc2NlbmVGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVTY2VuZUZpbGVOYW1lKGRhdGEuc2NlbmUpO1xuXHRcdGNvbnN0IHNjZW5lRmlsZVBhdGggPSBgJHtkYXRhLmZvbGRlclBhdGh9LzAxLXNjZW5lcy8ke3NjZW5lRmlsZU5hbWV9YDtcblxuXHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVTY2VuZUZpbGUoXG5cdFx0XHR7IHNjZW5lOiBkYXRhLnNjZW5lLCBiZWF0czogZGF0YS5iZWF0cyB9LFxuXHRcdFx0c2NlbmVGaWxlUGF0aCxcblx0XHRcdGRhdGEuc3RvcnlUaXRsZSxcblx0XHRcdHNjZW5lQ29udGVudEJsb2Nrcyxcblx0XHRcdFtdXG5cdFx0KTtcblxuXHRcdGZvciAoY29uc3QgYmVhdCBvZiBkYXRhLmJlYXRzKSB7XG5cdFx0XHRjb25zdCBwcm92aWRlZCA9IGRhdGEuYmVhdENvbnRlbnRCbG9ja01hcD8uZ2V0KGJlYXQuaWQpO1xuXHRcdFx0Y29uc3QgYmVhdENvbnRlbnRCbG9ja3MgPVxuXHRcdFx0XHRwcm92aWRlZCA/P1xuXHRcdFx0XHQoZGF0YS5za2lwUmVtb3RlQ29udGVudEZldGNoXG5cdFx0XHRcdFx0PyBbXVxuXHRcdFx0XHRcdDogYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrc0J5QmVhdChiZWF0LmlkKSk7XG5cblx0XHRcdGNvbnN0IGJlYXRGaWxlTmFtZSA9IHRoaXMuZmlsZU1hbmFnZXIuZ2VuZXJhdGVCZWF0RmlsZU5hbWUoYmVhdCk7XG5cdFx0XHRjb25zdCBiZWF0RmlsZVBhdGggPSBgJHtkYXRhLmZvbGRlclBhdGh9LzAyLWJlYXRzLyR7YmVhdEZpbGVOYW1lfWA7XG5cblx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVCZWF0RmlsZShcblx0XHRcdFx0YmVhdCxcblx0XHRcdFx0YmVhdEZpbGVQYXRoLFxuXHRcdFx0XHRkYXRhLnN0b3J5VGl0bGUsXG5cdFx0XHRcdGJlYXRDb250ZW50QmxvY2tzXG5cdFx0XHQpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYnVpbGRDb250ZW50QmxvY2tBc3NvY2lhdGlvbk1hcHMoXG5cdFx0Y29udGVudEJsb2NrczogQ29udGVudEJsb2NrW10sXG5cdFx0Y29udGVudEJsb2NrUmVmczogQ29udGVudEFuY2hvcltdXG5cdCk6IHtcblx0XHRieVNjZW5lOiBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2tbXT47XG5cdFx0YnlCZWF0OiBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2tbXT47XG5cdH0ge1xuXHRcdGNvbnN0IGJ5U2NlbmUgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudEJsb2NrW10+KCk7XG5cdFx0Y29uc3QgYnlCZWF0ID0gbmV3IE1hcDxzdHJpbmcsIENvbnRlbnRCbG9ja1tdPigpO1xuXHRcdGNvbnN0IGJsb2NrQnlJZCA9IG5ldyBNYXAoY29udGVudEJsb2Nrcy5tYXAoYmxvY2sgPT4gW2Jsb2NrLmlkLCBibG9ja10pKTtcblxuXHRcdGZvciAoY29uc3QgcmVmIG9mIGNvbnRlbnRCbG9ja1JlZnMpIHtcblx0XHRcdGNvbnN0IGJsb2NrID0gYmxvY2tCeUlkLmdldChyZWYuY29udGVudF9ibG9ja19pZCk7XG5cdFx0XHRpZiAoIWJsb2NrKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAocmVmLmVudGl0eV90eXBlID09PSBcInNjZW5lXCIpIHtcblx0XHRcdFx0aWYgKCFieVNjZW5lLmhhcyhyZWYuZW50aXR5X2lkKSkge1xuXHRcdFx0XHRcdGJ5U2NlbmUuc2V0KHJlZi5lbnRpdHlfaWQsIFtdKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRieVNjZW5lLmdldChyZWYuZW50aXR5X2lkKSEucHVzaChibG9jayk7XG5cdFx0XHR9IGVsc2UgaWYgKHJlZi5lbnRpdHlfdHlwZSA9PT0gXCJiZWF0XCIpIHtcblx0XHRcdFx0aWYgKCFieUJlYXQuaGFzKHJlZi5lbnRpdHlfaWQpKSB7XG5cdFx0XHRcdFx0YnlCZWF0LnNldChyZWYuZW50aXR5X2lkLCBbXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnlCZWF0LmdldChyZWYuZW50aXR5X2lkKSEucHVzaChibG9jayk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHsgYnlTY2VuZSwgYnlCZWF0IH07XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHB1bGxTaW5nbGVFbnRpdHkoc3RvcnlJZDogc3RyaW5nLCB0YXJnZXQ6IFN5bmNFbnRpdHlUYXJnZXQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRzd2l0Y2ggKHRhcmdldC50eXBlKSB7XG5cdFx0XHRjYXNlIFwiY2hhcHRlclwiOlxuXHRcdFx0XHRhd2FpdCB0aGlzLnB1bGxDaGFwdGVyRW50aXR5KHN0b3J5SWQsIHRhcmdldC5pZCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcInNjZW5lXCI6XG5cdFx0XHRcdGF3YWl0IHRoaXMucHVsbFNjZW5lRW50aXR5KHN0b3J5SWQsIHRhcmdldC5pZCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImNvbnRlbnRcIjpcblx0XHRcdFx0YXdhaXQgdGhpcy5wdWxsQ29udGVudEJsb2NrRW50aXR5KHN0b3J5SWQsIHRhcmdldC5pZCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBlbnRpdHkgdHlwZTogJHt0YXJnZXQudHlwZX1gKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHB1bGxDaGFwdGVyRW50aXR5KHN0b3J5SWQ6IHN0cmluZywgY2hhcHRlcklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBzdG9yeSA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFN0b3J5KHN0b3J5SWQpO1xuXHRcdGNvbnN0IGNoYXB0ZXIgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDaGFwdGVyKGNoYXB0ZXJJZCk7XG5cblx0XHRpZiAoY2hhcHRlci5zdG9yeV9pZCAhPT0gc3RvcnlJZCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiQ2hhcHRlciBkb2VzIG5vdCBiZWxvbmcgdG8gdGhlIHNlbGVjdGVkIHN0b3J5XCIpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHNjZW5lcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldFNjZW5lcyhjaGFwdGVySWQpO1xuXHRcdGNvbnN0IHNjZW5lc1dpdGhCZWF0czogU2NlbmVXaXRoQmVhdHNbXSA9IGF3YWl0IFByb21pc2UuYWxsKFxuXHRcdFx0c2NlbmVzLm1hcChhc3luYyAoc2NlbmUpID0+IHtcblx0XHRcdFx0Y29uc3QgYmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0cyhzY2VuZS5pZCk7XG5cdFx0XHRcdHJldHVybiB7IHNjZW5lLCBiZWF0cyB9O1xuXHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0Y29uc3QgY29udGVudEJsb2NrcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRCbG9ja3MoY2hhcHRlcklkKTtcblx0XHRjb25zdCBjb250ZW50QmxvY2tSZWZzOiBDb250ZW50QW5jaG9yW10gPSBbXTtcblxuXHRcdGZvciAoY29uc3QgY29udGVudEJsb2NrIG9mIGNvbnRlbnRCbG9ja3MpIHtcblx0XHRcdGNvbnN0IHJlZnMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QW5jaG9ycyhjb250ZW50QmxvY2suaWQpO1xuXHRcdFx0Y29udGVudEJsb2NrUmVmcy5wdXNoKC4uLnJlZnMpO1xuXHRcdH1cblxuXHRcdGF3YWl0IHRoaXMud3JpdGVDaGFwdGVyQnVuZGxlKHtcblx0XHRcdHN0b3J5LFxuXHRcdFx0Y2hhcHRlcixcblx0XHRcdHNjZW5lczogc2NlbmVzV2l0aEJlYXRzLFxuXHRcdFx0Y29udGVudEJsb2Nrcyxcblx0XHRcdGNvbnRlbnRCbG9ja1JlZnMsXG5cdFx0fSk7XG5cblx0XHRuZXcgTm90aWNlKGBDaGFwdGVyIFwiJHtjaGFwdGVyLnRpdGxlfVwiIHN5bmNlZCBzdWNjZXNzZnVsbHlgKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcHVsbFNjZW5lRW50aXR5KHN0b3J5SWQ6IHN0cmluZywgc2NlbmVJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3Qgc2NlbmUgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRTY2VuZShzY2VuZUlkKTtcblx0XHRpZiAoc2NlbmUuc3RvcnlfaWQgIT09IHN0b3J5SWQpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlNjZW5lIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgc2VsZWN0ZWQgc3RvcnlcIik7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc3RvcnkgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRTdG9yeShzdG9yeUlkKTtcblx0XHRjb25zdCBmb2xkZXJQYXRoID0gdGhpcy5maWxlTWFuYWdlci5nZXRTdG9yeUZvbGRlclBhdGgoc3RvcnkudGl0bGUpO1xuXHRcdGF3YWl0IHRoaXMuZW5zdXJlU3RvcnlGb2xkZXJzKGZvbGRlclBhdGgpO1xuXG5cdFx0Y29uc3QgYmVhdHMgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRCZWF0cyhzY2VuZS5pZCk7XG5cdFx0Y29uc3Qgc2NlbmVDb250ZW50QmxvY2tzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrc0J5U2NlbmUoc2NlbmUuaWQpO1xuXHRcdGNvbnN0IGJlYXRDb250ZW50QmxvY2tNYXAgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudEJsb2NrW10+KCk7XG5cblx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHMpIHtcblx0XHRcdGNvbnN0IGJlYXRDb250ZW50QmxvY2tzID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrc0J5QmVhdChiZWF0LmlkKTtcblx0XHRcdGJlYXRDb250ZW50QmxvY2tNYXAuc2V0KGJlYXQuaWQsIGJlYXRDb250ZW50QmxvY2tzKTtcblx0XHR9XG5cblx0XHRhd2FpdCB0aGlzLndyaXRlU2NlbmVCdW5kbGUoe1xuXHRcdFx0c3RvcnlUaXRsZTogc3RvcnkudGl0bGUsXG5cdFx0XHRmb2xkZXJQYXRoLFxuXHRcdFx0c2NlbmUsXG5cdFx0XHRiZWF0cyxcblx0XHRcdHNjZW5lQ29udGVudEJsb2Nrcyxcblx0XHRcdGJlYXRDb250ZW50QmxvY2tNYXAsXG5cdFx0fSk7XG5cblx0XHRhd2FpdCB0aGlzLnN5bmNTY2VuZUNvbnRlbnRCbG9ja3Moc2NlbmUsIGJlYXRzLCBmb2xkZXJQYXRoLCBzdG9yeS50aXRsZSk7XG5cblx0XHRuZXcgTm90aWNlKGBTY2VuZSBcIiR7c2NlbmUuZ29hbH1cIiBzeW5jZWQgc3VjY2Vzc2Z1bGx5YCk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHB1bGxDb250ZW50QmxvY2tFbnRpdHkoc3RvcnlJZDogc3RyaW5nLCBjb250ZW50QmxvY2tJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3Qgc3RvcnkgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRTdG9yeShzdG9yeUlkKTtcblx0XHRjb25zdCBjb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2soY29udGVudEJsb2NrSWQpO1xuXG5cdFx0aWYgKGNvbnRlbnRCbG9jay5jaGFwdGVyX2lkKSB7XG5cdFx0XHRjb25zdCBjaGFwdGVyID0gYXdhaXQgdGhpcy5hcGlDbGllbnQuZ2V0Q2hhcHRlcihjb250ZW50QmxvY2suY2hhcHRlcl9pZCk7XG5cdFx0XHRpZiAoY2hhcHRlci5zdG9yeV9pZCAhPT0gc3RvcnlJZCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDb250ZW50IGJsb2NrIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgc2VsZWN0ZWQgc3RvcnlcIik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3QgZm9sZGVyUGF0aCA9IHRoaXMuZmlsZU1hbmFnZXIuZ2V0U3RvcnlGb2xkZXJQYXRoKHN0b3J5LnRpdGxlKTtcblx0XHRhd2FpdCB0aGlzLmVuc3VyZUNvbnRlbnRGb2xkZXJzKGZvbGRlclBhdGgpO1xuXG5cdFx0YXdhaXQgdGhpcy53cml0ZUNvbnRlbnRCbG9ja1RvRm9sZGVyKGZvbGRlclBhdGgsIHN0b3J5LnRpdGxlLCBjb250ZW50QmxvY2spO1xuXHRcdG5ldyBOb3RpY2UoXCJDb250ZW50IGJsb2NrIHN5bmNlZCBzdWNjZXNzZnVsbHlcIik7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHB1c2hTaW5nbGVFbnRpdHkoXG5cdFx0Zm9sZGVyUGF0aDogc3RyaW5nLFxuXHRcdHRhcmdldDogU3luY0VudGl0eVRhcmdldCxcblx0XHRzdG9yeUlkOiBzdHJpbmcsXG5cdFx0c3RvcnlUaXRsZTogc3RyaW5nXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGxldCBlbnRpdHlMYWJlbDogc3RyaW5nO1xuXG5cdFx0c3dpdGNoICh0YXJnZXQudHlwZSkge1xuXHRcdFx0Y2FzZSBcImNoYXB0ZXJcIjpcblx0XHRcdFx0ZW50aXR5TGFiZWwgPSBhd2FpdCB0aGlzLnB1c2hDaGFwdGVyRW50aXR5KGZvbGRlclBhdGgsIHRhcmdldC5pZCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcInNjZW5lXCI6XG5cdFx0XHRcdGVudGl0eUxhYmVsID0gYXdhaXQgdGhpcy5wdXNoU2NlbmVFbnRpdHkoZm9sZGVyUGF0aCwgc3RvcnlJZCwgdGFyZ2V0LmlkKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiY29udGVudFwiOlxuXHRcdFx0XHRlbnRpdHlMYWJlbCA9IGF3YWl0IHRoaXMucHVzaENvbnRlbnRCbG9ja0VudGl0eShmb2xkZXJQYXRoLCB0YXJnZXQuaWQsIHN0b3J5VGl0bGUpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgZW50aXR5IHR5cGU6ICR7dGFyZ2V0LnR5cGV9YCk7XG5cdFx0fVxuXG5cdFx0bmV3IE5vdGljZShgJHtlbnRpdHlMYWJlbH0gcHVzaGVkIHN1Y2Nlc3NmdWxseWApO1xuXG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHRoaXMucHVsbFNpbmdsZUVudGl0eShzdG9yeUlkLCB0YXJnZXQpO1xuXHRcdH0gY2F0Y2ggKHB1bGxFcnIpIHtcblx0XHRcdGNvbnN0IHB1bGxFcnJvck1lc3NhZ2UgPVxuXHRcdFx0XHRwdWxsRXJyIGluc3RhbmNlb2YgRXJyb3IgPyBwdWxsRXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBzeW5jIGVudGl0eSBhZnRlciBwdXNoXCI7XG5cdFx0XHRuZXcgTm90aWNlKGBXYXJuaW5nOiAke3B1bGxFcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBwdXNoQ2hhcHRlckVudGl0eShmb2xkZXJQYXRoOiBzdHJpbmcsIGNoYXB0ZXJJZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHRjb25zdCBjaGFwdGVyRmlsZSA9IGF3YWl0IHRoaXMuZmluZENoYXB0ZXJGaWxlQnlJZChmb2xkZXJQYXRoLCBjaGFwdGVySWQpO1xuXHRcdGlmICghY2hhcHRlckZpbGUpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIkNoYXB0ZXIgZmlsZSBub3QgZm91bmQgbG9jYWxseVwiKTtcblx0XHR9XG5cblx0XHRhd2FpdCB0aGlzLnB1c2hDaGFwdGVyQ29udGVudEJsb2NrcyhjaGFwdGVyRmlsZS5wYXRoLCBmb2xkZXJQYXRoKTtcblx0XHRjb25zdCBsYWJlbCA9XG5cdFx0XHRjaGFwdGVyRmlsZS5mcm9udG1hdHRlcj8udGl0bGUgfHxcblx0XHRcdChjaGFwdGVyRmlsZS5mcm9udG1hdHRlcj8ubnVtYmVyID8gYENoYXB0ZXIgJHtjaGFwdGVyRmlsZS5mcm9udG1hdHRlci5udW1iZXJ9YCA6IFwiQ2hhcHRlclwiKTtcblx0XHRyZXR1cm4gbGFiZWw7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHB1c2hTY2VuZUVudGl0eShmb2xkZXJQYXRoOiBzdHJpbmcsIHN0b3J5SWQ6IHN0cmluZywgc2NlbmVJZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHRjb25zdCBzY2VuZUZpbGUgPSBhd2FpdCB0aGlzLmZpbmRTY2VuZUZpbGVCeUlkKGZvbGRlclBhdGgsIHNjZW5lSWQpO1xuXHRcdGlmICghc2NlbmVGaWxlKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJTY2VuZSBmaWxlIG5vdCBmb3VuZCBsb2NhbGx5XCIpO1xuXHRcdH1cblxuXHRcdGF3YWl0IHRoaXMucHVzaFNjZW5lQmVhdHMoc2NlbmVGaWxlLnBhdGgsIHN0b3J5SWQpO1xuXHRcdGF3YWl0IHRoaXMucHVzaFNjZW5lQ29udGVudEJsb2NrcyhzY2VuZUZpbGUucGF0aCwgZm9sZGVyUGF0aCk7XG5cblx0XHRjb25zdCBsYWJlbCA9IHNjZW5lRmlsZS5mcm9udG1hdHRlcj8uZ29hbFxuXHRcdFx0PyBgU2NlbmU6ICR7c2NlbmVGaWxlLmZyb250bWF0dGVyLmdvYWx9YFxuXHRcdFx0OiBcIlNjZW5lXCI7XG5cdFx0cmV0dXJuIGxhYmVsO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBwdXNoQ29udGVudEJsb2NrRW50aXR5KFxuXHRcdGZvbGRlclBhdGg6IHN0cmluZyxcblx0XHRjb250ZW50QmxvY2tJZDogc3RyaW5nLFxuXHRcdHN0b3J5VGl0bGU6IHN0cmluZ1xuXHQpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdGNvbnN0IGNvbnRlbnRzRm9sZGVyUGF0aCA9IGAke2ZvbGRlclBhdGh9LzAzLWNvbnRlbnRzYDtcblx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyhjb250ZW50c0ZvbGRlclBhdGgpO1xuXG5cdFx0Y29uc3QgbG9jYWxDb250ZW50QmxvY2sgPSBhd2FpdCB0aGlzLmZpbmRDb250ZW50QmxvY2tCeUlkKGNvbnRlbnRzRm9sZGVyUGF0aCwgY29udGVudEJsb2NrSWQpO1xuXHRcdGlmICghbG9jYWxDb250ZW50QmxvY2spIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIkNvbnRlbnQgYmxvY2sgZmlsZSBub3QgZm91bmQgbG9jYWxseVwiKTtcblx0XHR9XG5cblx0XHRjb25zdCB1cGRhdGVkQmxvY2sgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC51cGRhdGVDb250ZW50QmxvY2soY29udGVudEJsb2NrSWQsIHtcblx0XHRcdGNvbnRlbnQ6IGxvY2FsQ29udGVudEJsb2NrLmNvbnRlbnQsXG5cdFx0XHRtZXRhZGF0YTogbG9jYWxDb250ZW50QmxvY2subWV0YWRhdGEsXG5cdFx0XHR0eXBlOiBsb2NhbENvbnRlbnRCbG9jay50eXBlLFxuXHRcdFx0a2luZDogbG9jYWxDb250ZW50QmxvY2sua2luZCxcblx0XHRcdG9yZGVyX251bTogbG9jYWxDb250ZW50QmxvY2sub3JkZXJfbnVtID8/IHVuZGVmaW5lZCxcblx0XHR9KTtcblxuXHRcdGNvbnN0IGZpbGVQYXRoID0gYXdhaXQgdGhpcy5nZXRDb250ZW50QmxvY2tGaWxlUGF0aEZyb21Db250ZW50cyhjb250ZW50c0ZvbGRlclBhdGgsIHVwZGF0ZWRCbG9jayk7XG5cdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci53cml0ZUNvbnRlbnRCbG9ja0ZpbGUodXBkYXRlZEJsb2NrLCBmaWxlUGF0aCwgc3RvcnlUaXRsZSk7XG5cblx0XHRyZXR1cm4gXCJDb250ZW50IGJsb2NrXCI7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGVuc3VyZVN0b3J5Rm9sZGVycyhmb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmVuc3VyZUZvbGRlckV4aXN0cyhmb2xkZXJQYXRoKTtcblx0XHRhd2FpdCB0aGlzLmVuc3VyZUNvbnRlbnRGb2xkZXJzKGZvbGRlclBhdGgpO1xuXHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKGAke2ZvbGRlclBhdGh9LzAwLWNoYXB0ZXJzYCk7XG5cdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHMoYCR7Zm9sZGVyUGF0aH0vMDEtc2NlbmVzYCk7XG5cdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHMoYCR7Zm9sZGVyUGF0aH0vMDItYmVhdHNgKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZW5zdXJlQ29udGVudEZvbGRlcnMoZm9sZGVyUGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgY29udGVudHNGb2xkZXJQYXRoID0gYCR7Zm9sZGVyUGF0aH0vMDMtY29udGVudHNgO1xuXHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKGNvbnRlbnRzRm9sZGVyUGF0aCk7XG5cdFx0Zm9yIChjb25zdCB0eXBlRm9sZGVyIG9mIFtcIjAwLXRleHRzXCIsIFwiMDEtaW1hZ2VzXCIsIFwiMDItdmlkZW9zXCIsIFwiMDMtYXVkaW9zXCIsIFwiMDQtZW1iZWRzXCIsIFwiMDUtbGlua3NcIl0pIHtcblx0XHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIuZW5zdXJlRm9sZGVyRXhpc3RzKGAke2NvbnRlbnRzRm9sZGVyUGF0aH0vJHt0eXBlRm9sZGVyfWApO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgd3JpdGVDb250ZW50QmxvY2tUb0ZvbGRlcihcblx0XHRzdG9yeUZvbGRlclBhdGg6IHN0cmluZyxcblx0XHRzdG9yeVRpdGxlOiBzdHJpbmcsXG5cdFx0Y29udGVudEJsb2NrOiBDb250ZW50QmxvY2tcblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgdHlwZUZvbGRlclBhdGggPSB0aGlzLmZpbGVNYW5hZ2VyLmdldENvbnRlbnRCbG9ja0ZvbGRlclBhdGgoXG5cdFx0XHRzdG9yeUZvbGRlclBhdGgsXG5cdFx0XHRjb250ZW50QmxvY2sudHlwZSB8fCBcInRleHRcIlxuXHRcdCk7XG5cdFx0YXdhaXQgdGhpcy5maWxlTWFuYWdlci5lbnN1cmVGb2xkZXJFeGlzdHModHlwZUZvbGRlclBhdGgpO1xuXHRcdGNvbnN0IGNvbnRlbnRCbG9ja0ZpbGVOYW1lID0gdGhpcy5maWxlTWFuYWdlci5nZW5lcmF0ZUNvbnRlbnRCbG9ja0ZpbGVOYW1lKGNvbnRlbnRCbG9jayk7XG5cdFx0Y29uc3QgY29udGVudEJsb2NrRmlsZVBhdGggPSBgJHt0eXBlRm9sZGVyUGF0aH0vJHtjb250ZW50QmxvY2tGaWxlTmFtZX1gO1xuXHRcdGF3YWl0IHRoaXMuZmlsZU1hbmFnZXIud3JpdGVDb250ZW50QmxvY2tGaWxlKGNvbnRlbnRCbG9jaywgY29udGVudEJsb2NrRmlsZVBhdGgsIHN0b3J5VGl0bGUpO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBzeW5jU2NlbmVzVG9GaWxlc3lzdGVtKFxuXHRcdHNjZW5lc1dpdGhCZWF0czogU2NlbmVXaXRoQmVhdHNbXSxcblx0XHRmb2xkZXJQYXRoOiBzdHJpbmcsXG5cdFx0c3RvcnlUaXRsZTogc3RyaW5nLFxuXHRcdGNvbnRlbnRCbG9ja3NCeVNjZW5lPzogTWFwPHN0cmluZywgQ29udGVudEJsb2NrW10+LFxuXHRcdGNvbnRlbnRCbG9ja3NCeUJlYXQ/OiBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2tbXT5cblx0KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3Qgc2tpcFJlbW90ZUZldGNoID0gQm9vbGVhbihjb250ZW50QmxvY2tzQnlTY2VuZSB8fCBjb250ZW50QmxvY2tzQnlCZWF0KTtcblx0XHRmb3IgKGNvbnN0IHsgc2NlbmUsIGJlYXRzIH0gb2Ygc2NlbmVzV2l0aEJlYXRzKSB7XG5cdFx0XHRhd2FpdCB0aGlzLndyaXRlU2NlbmVCdW5kbGUoe1xuXHRcdFx0XHRzdG9yeVRpdGxlLFxuXHRcdFx0XHRmb2xkZXJQYXRoLFxuXHRcdFx0XHRzY2VuZSxcblx0XHRcdFx0YmVhdHMsXG5cdFx0XHRcdHNjZW5lQ29udGVudEJsb2NrczogY29udGVudEJsb2Nrc0J5U2NlbmU/LmdldChzY2VuZS5pZCksXG5cdFx0XHRcdGJlYXRDb250ZW50QmxvY2tNYXA6IGNvbnRlbnRCbG9ja3NCeUJlYXQsXG5cdFx0XHRcdHNraXBSZW1vdGVDb250ZW50RmV0Y2g6IHNraXBSZW1vdGVGZXRjaCxcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgc3luY1NjZW5lQ29udGVudEJsb2Nrcyhcblx0XHRzY2VuZTogU2NlbmUsXG5cdFx0YmVhdHM6IEJlYXRbXSxcblx0XHRmb2xkZXJQYXRoOiBzdHJpbmcsXG5cdFx0c3RvcnlUaXRsZTogc3RyaW5nXG5cdCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICghc2NlbmUuY2hhcHRlcl9pZCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGNvbnRlbnRCbG9ja3MgPSBhd2FpdCB0aGlzLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzKHNjZW5lLmNoYXB0ZXJfaWQpO1xuXG5cdFx0Zm9yIChjb25zdCBjb250ZW50QmxvY2sgb2YgY29udGVudEJsb2Nrcykge1xuXHRcdFx0Y29uc3QgcmVmcyA9IGF3YWl0IHRoaXMuYXBpQ2xpZW50LmdldENvbnRlbnRBbmNob3JzKGNvbnRlbnRCbG9jay5pZCk7XG5cdFx0XHRjb25zdCBoYXNTY2VuZVJlZiA9IHJlZnMuc29tZShcblx0XHRcdFx0KHJlZikgPT4gcmVmLmVudGl0eV90eXBlID09PSBcInNjZW5lXCIgJiYgcmVmLmVudGl0eV9pZCA9PT0gc2NlbmUuaWRcblx0XHRcdCk7XG5cdFx0XHRjb25zdCBiZWF0SWRzID0gYmVhdHMubWFwKChiZWF0KSA9PiBiZWF0LmlkKTtcblx0XHRcdGNvbnN0IGhhc0JlYXRSZWYgPSByZWZzLnNvbWUoXG5cdFx0XHRcdChyZWYpID0+IHJlZi5lbnRpdHlfdHlwZSA9PT0gXCJiZWF0XCIgJiYgYmVhdElkcy5pbmNsdWRlcyhyZWYuZW50aXR5X2lkKVxuXHRcdFx0KTtcblxuXHRcdFx0aWYgKGhhc1NjZW5lUmVmIHx8IGhhc0JlYXRSZWYpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy53cml0ZUNvbnRlbnRCbG9ja1RvRm9sZGVyKGZvbGRlclBhdGgsIHN0b3J5VGl0bGUsIGNvbnRlbnRCbG9jayk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBmaW5kQ2hhcHRlckZpbGVCeUlkKFxuXHRcdGZvbGRlclBhdGg6IHN0cmluZyxcblx0XHRjaGFwdGVySWQ6IHN0cmluZ1xuXHQpOiBQcm9taXNlPHsgcGF0aDogc3RyaW5nOyBmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgYW55PiB8IG51bGwgfSB8IG51bGw+IHtcblx0XHRjb25zdCBjaGFwdGVyRmlsZXMgPSBhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmxpc3RDaGFwdGVyRmlsZXMoZm9sZGVyUGF0aCk7XG5cdFx0Zm9yIChjb25zdCBjaGFwdGVyRmlsZVBhdGggb2YgY2hhcHRlckZpbGVzKSB7XG5cdFx0XHRjb25zdCBmaWxlID0gdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLmdldEFic3RyYWN0RmlsZUJ5UGF0aChjaGFwdGVyRmlsZVBhdGgpO1xuXHRcdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmZpbGVNYW5hZ2VyLmdldFZhdWx0KCkucmVhZChmaWxlKTtcblx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5maWxlTWFuYWdlci5wYXJzZUZyb250bWF0dGVyKGNvbnRlbnQpO1xuXHRcdFx0aWYgKGZyb250bWF0dGVyLmlkID09PSBjaGFwdGVySWQpIHtcblx0XHRcdFx0cmV0dXJuIHsgcGF0aDogY2hhcHRlckZpbGVQYXRoLCBmcm9udG1hdHRlciB9O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZmluZFNjZW5lRmlsZUJ5SWQoXG5cdFx0Zm9sZGVyUGF0aDogc3RyaW5nLFxuXHRcdHNjZW5lSWQ6IHN0cmluZ1xuXHQpOiBQcm9taXNlPHsgcGF0aDogc3RyaW5nOyBmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgYW55PiB8IG51bGwgfSB8IG51bGw+IHtcblx0XHRjb25zdCBzY2VuZUZpbGVzID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlci5saXN0U3RvcnlTY2VuZUZpbGVzKGZvbGRlclBhdGgpO1xuXHRcdGZvciAoY29uc3Qgc2NlbmVGaWxlUGF0aCBvZiBzY2VuZUZpbGVzKSB7XG5cdFx0XHRjb25zdCBmaWxlID0gdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLmdldEFic3RyYWN0RmlsZUJ5UGF0aChzY2VuZUZpbGVQYXRoKTtcblx0XHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5maWxlTWFuYWdlci5nZXRWYXVsdCgpLnJlYWQoZmlsZSk7XG5cdFx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMuZmlsZU1hbmFnZXIucGFyc2VGcm9udG1hdHRlcihjb250ZW50KTtcblx0XHRcdGlmIChmcm9udG1hdHRlci5pZCA9PT0gc2NlbmVJZCkge1xuXHRcdFx0XHRyZXR1cm4geyBwYXRoOiBzY2VuZUZpbGVQYXRoLCBmcm9udG1hdHRlciB9O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuXG4iLCAiaW1wb3J0IHsgQ29udGVudEJsb2NrIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFyc2VkUGFyYWdyYXBoIHtcblx0Y29udGVudDogc3RyaW5nOyAvLyBUZXh0IHdpdGhvdXQgdGhlIGxpbmtcblx0bGlua05hbWU6IHN0cmluZyB8IG51bGw7IC8vIEZpbGUgbmFtZSAoaWYgaGFzIGxpbmspXG5cdG9yaWdpbmFsT3JkZXI6IG51bWJlcjsgLy8gUG9zaXRpb24gaW4gY2hhcHRlciAoMC1pbmRleGVkKVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnNlZFNjZW5lIHtcblx0bGlua05hbWU6IHN0cmluZyB8IG51bGw7IC8vIEZpbGUgbmFtZSAoaWYgaGFzIGxpbmspXG5cdGdvYWw6IHN0cmluZzsgLy8gVGV4dCBiZWZvcmUgXCItXCIgb3IgZnVsbCB0ZXh0IGlmIG5vIFwiLVwiXG5cdHRpbWVSZWY6IHN0cmluZzsgLy8gVGV4dCBhZnRlciBcIi1cIiBvciBlbXB0eVxuXHRvcmlnaW5hbE9yZGVyOiBudW1iZXI7IC8vIFBvc2l0aW9uIGluIGNoYXB0ZXIgKDAtaW5kZXhlZClcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXJzZWRCZWF0IHtcblx0bGlua05hbWU6IHN0cmluZyB8IG51bGw7IC8vIEZpbGUgbmFtZSAoaWYgaGFzIGxpbmspXG5cdGludGVudDogc3RyaW5nOyAvLyBUZXh0IGJlZm9yZSBcIi0+XCIgb3IgZnVsbCB0ZXh0IGlmIG5vIFwiLT5cIlxuXHRvdXRjb21lOiBzdHJpbmc7IC8vIFRleHQgYWZ0ZXIgXCItPlwiIG9yIGVtcHR5XG5cdG9yaWdpbmFsT3JkZXI6IG51bWJlcjsgLy8gUG9zaXRpb24gcmVsYXRpdmUgdG8gc2NlbmUgKDAtaW5kZXhlZClcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXJzZWRTZWN0aW9uIHtcblx0dHlwZTogXCJwcm9zZVwiIHwgXCJzY2VuZVwiIHwgXCJiZWF0XCI7XG5cdHByb3NlPzogUGFyc2VkUGFyYWdyYXBoO1xuXHRzY2VuZT86IFBhcnNlZFNjZW5lO1xuXHRiZWF0PzogUGFyc2VkQmVhdDtcblx0b3JpZ2luYWxPcmRlcjogbnVtYmVyOyAvLyBBYnNvbHV0ZSBwb3NpdGlvbiBpbiBjaGFwdGVyICgwLWluZGV4ZWQpXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGllcmFyY2hpY2FsUHJvc2Uge1xuXHRzZWN0aW9uczogUGFyc2VkU2VjdGlvbltdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnNlZFNjZW5lQmVhdExpc3RJdGVtIHtcblx0dHlwZTogXCJzY2VuZVwiIHwgXCJiZWF0XCI7XG5cdGxpbmtOYW1lOiBzdHJpbmcgfCBudWxsO1xuXHRkaXNwbGF5VGV4dDogc3RyaW5nO1xuXHRoYXNQcm9zZTogYm9vbGVhbjtcblx0aW5kZW50TGV2ZWw6IG51bWJlcjsgLy8gMCBmb3Igc2NlbmUsIDEgZm9yIGJlYXRcblx0b3JpZ2luYWxPcmRlcjogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnNlZFNjZW5lQmVhdExpc3Qge1xuXHRpdGVtczogUGFyc2VkU2NlbmVCZWF0TGlzdEl0ZW1bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXJzZWRDaGFwdGVyTGlzdEl0ZW0ge1xuXHR0eXBlOiBcImNoYXB0ZXJcIiB8IFwic2NlbmVcIiB8IFwiYmVhdFwiO1xuXHRsaW5rTmFtZTogc3RyaW5nIHwgbnVsbDtcblx0ZGlzcGxheVRleHQ6IHN0cmluZztcblx0aGFzUHJvc2U6IGJvb2xlYW47XG5cdGluZGVudExldmVsOiBudW1iZXI7IC8vIDAgZm9yIGNoYXB0ZXIsIDEgZm9yIHNjZW5lLCAyIGZvciBiZWF0XG5cdG9yaWdpbmFsT3JkZXI6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXJzZWRDaGFwdGVyTGlzdCB7XG5cdGl0ZW1zOiBQYXJzZWRDaGFwdGVyTGlzdEl0ZW1bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXJzZWRCZWF0TGlzdEl0ZW0ge1xuXHRsaW5rTmFtZTogc3RyaW5nIHwgbnVsbDtcblx0ZGlzcGxheVRleHQ6IHN0cmluZztcblx0aGFzUHJvc2U6IGJvb2xlYW47XG5cdG9yaWdpbmFsT3JkZXI6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXJzZWRCZWF0TGlzdCB7XG5cdGl0ZW1zOiBQYXJzZWRCZWF0TGlzdEl0ZW1bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb250ZW50QmxvY2tDb21wYXJpc29uIHtcblx0cGFyYWdyYXBoOiBQYXJzZWRQYXJhZ3JhcGg7XG5cdGxvY2FsQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2sgfCBudWxsOyAvLyBGcm9tIC5tZCBmaWxlXG5cdHJlbW90ZUNvbnRlbnRCbG9jazogQ29udGVudEJsb2NrIHwgbnVsbDsgLy8gRnJvbSBBUElcblx0c3RhdHVzOiBcIm5ld1wiIHwgXCJ1bmNoYW5nZWRcIiB8IFwibG9jYWxfbW9kaWZpZWRcIiB8IFwicmVtb3RlX21vZGlmaWVkXCIgfCBcImNvbmZsaWN0XCI7XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIFByb3NlIHNlY3Rpb24gZnJvbSBhIGNoYXB0ZXIgbWFya2Rvd24gY29udGVudFxuICogRXh0cmFjdHMgaGllcmFyY2hpY2FsIHN0cnVjdHVyZTogc2NlbmVzICgjIyksIGJlYXRzICgjIyMpLCBhbmQgY29udGVudCBibG9ja3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSGllcmFyY2hpY2FsUHJvc2UoY2hhcHRlckNvbnRlbnQ6IHN0cmluZyk6IEhpZXJhcmNoaWNhbFByb3NlIHtcblx0Y29uc3Qgc2VjdGlvbnM6IFBhcnNlZFNlY3Rpb25bXSA9IFtdO1xuXG5cdC8vIEV4dHJhY3QgY29udGVudCBhZnRlciBmcm9udG1hdHRlclxuXHRjb25zdCBmcm9udG1hdHRlck1hdGNoID0gY2hhcHRlckNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcblx0Y29uc3QgY29udGVudFN0YXJ0ID0gZnJvbnRtYXR0ZXJNYXRjaCA/IGZyb250bWF0dGVyTWF0Y2hbMF0ubGVuZ3RoIDogMDtcblx0Y29uc3QgYm9keUNvbnRlbnQgPSBjaGFwdGVyQ29udGVudC5zdWJzdHJpbmcoY29udGVudFN0YXJ0KS50cmltKCk7XG5cblx0Ly8gRmluZCB0aGUgXCIjIyBDaGFwdGVyIE46IHt0aXRsZX1cIiBzZWN0aW9uXG5cdC8vIENhcHR1cmUgZXZlcnl0aGluZyB1bnRpbCB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudCBzaW5jZSBTY2VuZSBhbmQgQmVhdCBhcmUgcGFydCBvZiB0aGUgY2hhcHRlciBzZWN0aW9uXG5cdC8vIEFjY2VwdCB3aXRoIG9yIHdpdGhvdXQgYmxhbmsgbGluZSBhZnRlciB0aGUgY2hhcHRlciBoZWFkZXJcblx0Ly8gVXNlIG5vbi1ncmVlZHkgbWF0Y2ggdG8gc3RvcCBhdCBuZXh0ICMjIENoYXB0ZXIgaWYgaXQgZXhpc3RzICh0byBhdm9pZCBjYXB0dXJpbmcgZHVwbGljYXRlIHNlY3Rpb25zKVxuXHRjb25zdCBjaGFwdGVyU2VjdGlvbk1hdGNoID0gYm9keUNvbnRlbnQubWF0Y2goLyMjXFxzK0NoYXB0ZXJcXHMrXFxkKzpcXHMrW15cXG5dK1xccypcXG4rKFtcXHNcXFNdKj8pKD89XFxuIyNcXHMrQ2hhcHRlclxccytcXGQrOnwkKS8pO1xuXHRpZiAoIWNoYXB0ZXJTZWN0aW9uTWF0Y2gpIHtcblx0XHQvLyBUcnkgd2l0aG91dCByZXF1aXJpbmcgbmV3bGluZSAoY29udGVudCBvbiBzYW1lIGxpbmUgYXMgY2hhcHRlciBoZWFkZXIpXG5cdFx0Y29uc3QgY2hhcHRlclNlY3Rpb25NYXRjaFNhbWVMaW5lID0gYm9keUNvbnRlbnQubWF0Y2goLyMjXFxzK0NoYXB0ZXJcXHMrXFxkKzpcXHMrW15cXG5dK1xccysoW15cXG5dKykvKTtcblx0XHRpZiAoY2hhcHRlclNlY3Rpb25NYXRjaFNhbWVMaW5lKSB7XG5cdFx0XHRjb25zdCBwcm9zZUNvbnRlbnQgPSBjaGFwdGVyU2VjdGlvbk1hdGNoU2FtZUxpbmVbMV0udHJpbSgpO1xuXHRcdFx0Ly8gUHJvY2VzcyBzaW5nbGUgbGluZSBjb250ZW50XG5cdFx0XHRpZiAocHJvc2VDb250ZW50Lmxlbmd0aCA+IDAgJiYgIXByb3NlQ29udGVudC5zdGFydHNXaXRoKCcjJykpIHtcblx0XHRcdFx0Y29uc3QgcGFyYWdyYXBoOiBQYXJzZWRQYXJhZ3JhcGggPSB7XG5cdFx0XHRcdFx0Y29udGVudDogcHJvc2VDb250ZW50LFxuXHRcdFx0XHRcdGxpbmtOYW1lOiBudWxsLFxuXHRcdFx0XHRcdG9yaWdpbmFsT3JkZXI6IDAsXG5cdFx0XHRcdH07XG5cdFx0XHRcdHNlY3Rpb25zLnB1c2goe1xuXHRcdFx0XHRcdHR5cGU6IFwicHJvc2VcIixcblx0XHRcdFx0XHRwcm9zZTogcGFyYWdyYXBoLFxuXHRcdFx0XHRcdG9yaWdpbmFsT3JkZXI6IDAsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHsgc2VjdGlvbnMgfTtcblx0XHR9XG5cdFx0cmV0dXJuIHsgc2VjdGlvbnM6IFtdIH07XG5cdH1cblxuXHRcdGNvbnN0IHByb3NlQ29udGVudCA9IGNoYXB0ZXJTZWN0aW9uTWF0Y2hbMV0udHJpbSgpO1xuXHRjb25zdCBsaW5lcyA9IHByb3NlQ29udGVudC5zcGxpdCgvXFxuLyk7XG5cblx0bGV0IGN1cnJlbnRTY2VuZTogUGFyc2VkU2NlbmUgfCBudWxsID0gbnVsbDtcblx0bGV0IGN1cnJlbnRCZWF0OiBQYXJzZWRCZWF0IHwgbnVsbCA9IG51bGw7XG5cdGxldCBvcmRlciA9IDA7XG5cblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdGNvbnN0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7XG5cblx0XHQvLyBFbXB0eSBsaW5lIC0gc2tpcFxuXHRcdGlmICghbGluZSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIHNjZW5lIGhlYWRlciBGSVJTVDogIyMgU2NlbmU6IFtbbGlua3x0ZXh0XV0gb3IgIyMgU2NlbmU6IHRleHRcblx0XHRjb25zdCBzY2VuZU1hdGNoID0gbGluZS5tYXRjaCgvXiMjXFxzK1NjZW5lOlxccyooLispJC8pO1xuXHRcdGlmIChzY2VuZU1hdGNoKSB7XG5cdFx0XHRjb25zdCBzY2VuZVRleHQgPSBzY2VuZU1hdGNoWzFdLnRyaW0oKTtcblx0XHRcdGNvbnN0IHBhcnNlZFNjZW5lID0gcGFyc2VTY2VuZUhlYWRlcihzY2VuZVRleHQpO1xuXHRcdFx0cGFyc2VkU2NlbmUub3JpZ2luYWxPcmRlciA9IG9yZGVyKys7XG5cdFx0XHRjdXJyZW50U2NlbmUgPSBwYXJzZWRTY2VuZTtcblx0XHRcdGN1cnJlbnRCZWF0ID0gbnVsbDsgLy8gUmVzZXQgYmVhdCB3aGVuIG5ldyBzY2VuZSBzdGFydHNcblx0XHRcdHNlY3Rpb25zLnB1c2goe1xuXHRcdFx0XHR0eXBlOiBcInNjZW5lXCIsXG5cdFx0XHRcdHNjZW5lOiBwYXJzZWRTY2VuZSxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogcGFyc2VkU2NlbmUub3JpZ2luYWxPcmRlcixcblx0XHRcdH0pO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIGJlYXQgaGVhZGVyOiAjIyMgQmVhdDogW1tsaW5rfHRleHRdXSBvciAjIyMgQmVhdDogdGV4dFxuXHRcdGNvbnN0IGJlYXRNYXRjaCA9IGxpbmUubWF0Y2goL14jIyNcXHMrQmVhdDpcXHMqKC4rKSQvKTtcblx0XHRpZiAoYmVhdE1hdGNoKSB7XG5cdFx0XHRjb25zdCBiZWF0VGV4dCA9IGJlYXRNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRjb25zdCBwYXJzZWRCZWF0ID0gcGFyc2VCZWF0SGVhZGVyKGJlYXRUZXh0KTtcblx0XHRcdHBhcnNlZEJlYXQub3JpZ2luYWxPcmRlciA9IG9yZGVyKys7XG5cdFx0XHRjdXJyZW50QmVhdCA9IHBhcnNlZEJlYXQ7XG5cdFx0XHRzZWN0aW9ucy5wdXNoKHtcblx0XHRcdFx0dHlwZTogXCJiZWF0XCIsXG5cdFx0XHRcdGJlYXQ6IHBhcnNlZEJlYXQsXG5cdFx0XHRcdG9yaWdpbmFsT3JkZXI6IHBhcnNlZEJlYXQub3JpZ2luYWxPcmRlcixcblx0XHRcdH0pO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gU2tpcCBvdGhlciBtYXJrZG93biBoZWFkZXJzIChlLmcuLCAjIFRpdGxlLCAjIyBDYXBcdTAwRUR0dWxvLCBldGMuKVxuXHRcdC8vIEJ1dCBkb24ndCBza2lwIFNjZW5lIGFuZCBCZWF0IGhlYWRlcnMgd2hpY2ggYXJlIHBhcnQgb2YgdGhlIGNoYXB0ZXIgY29udGVudFxuXHRcdGlmIChsaW5lLnN0YXJ0c1dpdGgoJyMnKSAmJiAhbGluZS5tYXRjaCgvXiMjXFxzK1NjZW5lOi8pICYmICFsaW5lLm1hdGNoKC9eIyMjXFxzK0JlYXQ6LykpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBjb250ZW50IGJsb2NrOiBbW2xpbmt8Y29udGVudF1dIG9yIHBsYWluIHRleHRcblx0XHQvLyBNYXRjaCBjYW4gaGF2ZSBvcHRpb25hbCB3aGl0ZXNwYWNlIGFyb3VuZCB0aGUgbGlua1xuXHRcdGNvbnN0IHByb3NlTWF0Y2ggPSBsaW5lLm1hdGNoKC9eXFxzKlxcW1xcWyhbXlxcfF0rKVxcfChbXlxcXV0rKVxcXVxcXVxccyokLyk7XG5cdFx0aWYgKHByb3NlTWF0Y2gpIHtcblx0XHRcdGNvbnN0IGxpbmtOYW1lID0gcHJvc2VNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRjb25zdCBjb250ZW50ID0gcHJvc2VNYXRjaFsyXS50cmltKCk7XG5cdFx0XHRjb25zdCBwYXJhZ3JhcGg6IFBhcnNlZFBhcmFncmFwaCA9IHtcblx0XHRcdFx0Y29udGVudCxcblx0XHRcdFx0bGlua05hbWUsXG5cdFx0XHRcdG9yaWdpbmFsT3JkZXI6IG9yZGVyKyssXG5cdFx0XHR9O1xuXHRcdFx0c2VjdGlvbnMucHVzaCh7XG5cdFx0XHRcdHR5cGU6IFwicHJvc2VcIixcblx0XHRcdFx0cHJvc2U6IHBhcmFncmFwaCxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogcGFyYWdyYXBoLm9yaWdpbmFsT3JkZXIsXG5cdFx0XHR9KTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIFBsYWluIHRleHQgcGFyYWdyYXBoIChuZXcgY29udGVudCBibG9jayB3aXRob3V0IGxpbmspXG5cdFx0Ly8gT25seSBpZiBpdCdzIG5vdCBhIG1hcmtkb3duIGhlYWRlciBhbmQgbm90IGVtcHR5XG5cdFx0aWYgKGxpbmUubGVuZ3RoID4gMCAmJiAhbGluZS5zdGFydHNXaXRoKCcjJykpIHtcblx0XHRcdGNvbnN0IHBhcmFncmFwaDogUGFyc2VkUGFyYWdyYXBoID0ge1xuXHRcdFx0XHRjb250ZW50OiBsaW5lLFxuXHRcdFx0XHRsaW5rTmFtZTogbnVsbCxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogb3JkZXIrKyxcblx0XHRcdH07XG5cdFx0XHRzZWN0aW9ucy5wdXNoKHtcblx0XHRcdFx0dHlwZTogXCJwcm9zZVwiLFxuXHRcdFx0XHRwcm9zZTogcGFyYWdyYXBoLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBwYXJhZ3JhcGgub3JpZ2luYWxPcmRlcixcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB7IHNlY3Rpb25zIH07XG59XG5cbi8qKlxuICogUGFyc2UgYSBzY2VuZSBoZWFkZXI6ICMjIFtbbGlua3xnb2FsIC0gdGltZVJlZl1dIG9yICMjIGdvYWwgLSB0aW1lUmVmIG9yICMjIGdvYWxcbiAqL1xuZnVuY3Rpb24gcGFyc2VTY2VuZUhlYWRlcih0ZXh0OiBzdHJpbmcpOiBQYXJzZWRTY2VuZSB7XG5cdC8vIENoZWNrIGlmIGl0J3MgYSBsaW5rIGZvcm1hdDogW1tsaW5rfHRleHRdXVxuXHRjb25zdCBsaW5rTWF0Y2ggPSB0ZXh0Lm1hdGNoKC9eXFxbXFxbKFteXFx8XSspXFx8KFteXFxdXSspXFxdXFxdJC8pO1xuXHRpZiAobGlua01hdGNoKSB7XG5cdFx0Y29uc3QgbGlua05hbWUgPSBsaW5rTWF0Y2hbMV0udHJpbSgpO1xuXHRcdGNvbnN0IGRpc3BsYXlUZXh0ID0gbGlua01hdGNoWzJdLnRyaW0oKTtcblx0XHRjb25zdCB7IGdvYWwsIHRpbWVSZWYgfSA9IHBhcnNlU2NlbmVUZXh0KGRpc3BsYXlUZXh0KTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bGlua05hbWUsXG5cdFx0XHRnb2FsLFxuXHRcdFx0dGltZVJlZixcblx0XHRcdG9yaWdpbmFsT3JkZXI6IDAsIC8vIFdpbGwgYmUgc2V0IGJ5IGNhbGxlclxuXHRcdH07XG5cdH1cblxuXHQvLyBDaGVjayBpZiBpdCdzIGp1c3QgYSBsaW5rOiBbW2xpbmtdXVxuXHRjb25zdCBzaW1wbGVMaW5rTWF0Y2ggPSB0ZXh0Lm1hdGNoKC9eXFxbXFxbKFteXFxdXSspXFxdXFxdJC8pO1xuXHRpZiAoc2ltcGxlTGlua01hdGNoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGxpbmtOYW1lOiBzaW1wbGVMaW5rTWF0Y2hbMV0udHJpbSgpLFxuXHRcdFx0Z29hbDogXCJcIixcblx0XHRcdHRpbWVSZWY6IFwiXCIsXG5cdFx0XHRvcmlnaW5hbE9yZGVyOiAwLFxuXHRcdH07XG5cdH1cblxuXHQvLyBQbGFpbiB0ZXh0IC0gcGFyc2UgZ29hbCBhbmQgdGltZVJlZlxuXHRjb25zdCB7IGdvYWwsIHRpbWVSZWYgfSA9IHBhcnNlU2NlbmVUZXh0KHRleHQpO1xuXHRyZXR1cm4ge1xuXHRcdGxpbmtOYW1lOiBudWxsLFxuXHRcdGdvYWwsXG5cdFx0dGltZVJlZixcblx0XHRvcmlnaW5hbE9yZGVyOiAwLFxuXHR9O1xufVxuXG4vKipcbiAqIFBhcnNlIHNjZW5lIHRleHQgdG8gZXh0cmFjdCBnb2FsIGFuZCB0aW1lUmVmXG4gKiBGb3JtYXQ6IFwiZ29hbCAtIHRpbWVSZWZcIiBvciBqdXN0IFwiZ29hbFwiXG4gKi9cbmZ1bmN0aW9uIHBhcnNlU2NlbmVUZXh0KHRleHQ6IHN0cmluZyk6IHsgZ29hbDogc3RyaW5nOyB0aW1lUmVmOiBzdHJpbmcgfSB7XG5cdGNvbnN0IHBhcnRzID0gdGV4dC5zcGxpdCgvXFxzKi1cXHMqLyk7XG5cdGlmIChwYXJ0cy5sZW5ndGggPj0gMikge1xuXHRcdHJldHVybiB7XG5cdFx0XHRnb2FsOiBwYXJ0c1swXS50cmltKCksXG5cdFx0XHR0aW1lUmVmOiBwYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0gXCIpLnRyaW0oKSwgLy8gSm9pbiBpbiBjYXNlIHRoZXJlIGFyZSBtdWx0aXBsZSBcIi1cIlxuXHRcdH07XG5cdH1cblx0cmV0dXJuIHtcblx0XHRnb2FsOiB0ZXh0LnRyaW0oKSxcblx0XHR0aW1lUmVmOiBcIlwiLFxuXHR9O1xufVxuXG4vKipcbiAqIFBhcnNlIGEgYmVhdCBoZWFkZXI6ICMjIyBbW2xpbmt8aW50ZW50IC0+IG91dGNvbWVdXSBvciAjIyMgaW50ZW50IC0+IG91dGNvbWUgb3IgIyMjIGludGVudFxuICovXG5mdW5jdGlvbiBwYXJzZUJlYXRIZWFkZXIodGV4dDogc3RyaW5nKTogUGFyc2VkQmVhdCB7XG5cdC8vIENoZWNrIGlmIGl0J3MgYSBsaW5rIGZvcm1hdDogW1tsaW5rfHRleHRdXVxuXHRjb25zdCBsaW5rTWF0Y2ggPSB0ZXh0Lm1hdGNoKC9eXFxbXFxbKFteXFx8XSspXFx8KFteXFxdXSspXFxdXFxdJC8pO1xuXHRpZiAobGlua01hdGNoKSB7XG5cdFx0Y29uc3QgbGlua05hbWUgPSBsaW5rTWF0Y2hbMV0udHJpbSgpO1xuXHRcdGNvbnN0IGRpc3BsYXlUZXh0ID0gbGlua01hdGNoWzJdLnRyaW0oKTtcblx0XHRjb25zdCB7IGludGVudCwgb3V0Y29tZSB9ID0gcGFyc2VCZWF0VGV4dChkaXNwbGF5VGV4dCk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGxpbmtOYW1lLFxuXHRcdFx0aW50ZW50LFxuXHRcdFx0b3V0Y29tZSxcblx0XHRcdG9yaWdpbmFsT3JkZXI6IDAsIC8vIFdpbGwgYmUgc2V0IGJ5IGNhbGxlclxuXHRcdH07XG5cdH1cblxuXHQvLyBDaGVjayBpZiBpdCdzIGp1c3QgYSBsaW5rOiBbW2xpbmtdXVxuXHRjb25zdCBzaW1wbGVMaW5rTWF0Y2ggPSB0ZXh0Lm1hdGNoKC9eXFxbXFxbKFteXFxdXSspXFxdXFxdJC8pO1xuXHRpZiAoc2ltcGxlTGlua01hdGNoKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGxpbmtOYW1lOiBzaW1wbGVMaW5rTWF0Y2hbMV0udHJpbSgpLFxuXHRcdFx0aW50ZW50OiBcIlwiLFxuXHRcdFx0b3V0Y29tZTogXCJcIixcblx0XHRcdG9yaWdpbmFsT3JkZXI6IDAsXG5cdFx0fTtcblx0fVxuXG5cdC8vIFBsYWluIHRleHQgLSBwYXJzZSBpbnRlbnQgYW5kIG91dGNvbWVcblx0Y29uc3QgeyBpbnRlbnQsIG91dGNvbWUgfSA9IHBhcnNlQmVhdFRleHQodGV4dCk7XG5cdHJldHVybiB7XG5cdFx0bGlua05hbWU6IG51bGwsXG5cdFx0aW50ZW50LFxuXHRcdG91dGNvbWUsXG5cdFx0b3JpZ2luYWxPcmRlcjogMCxcblx0fTtcbn1cblxuLyoqXG4gKiBQYXJzZSBiZWF0IHRleHQgdG8gZXh0cmFjdCBpbnRlbnQgYW5kIG91dGNvbWVcbiAqIEZvcm1hdDogXCJpbnRlbnQgLT4gb3V0Y29tZVwiIG9yIGp1c3QgXCJpbnRlbnRcIlxuICovXG5mdW5jdGlvbiBwYXJzZUJlYXRUZXh0KHRleHQ6IHN0cmluZyk6IHsgaW50ZW50OiBzdHJpbmc7IG91dGNvbWU6IHN0cmluZyB9IHtcblx0Y29uc3QgcGFydHMgPSB0ZXh0LnNwbGl0KC9cXHMqLT5cXHMqLyk7XG5cdGlmIChwYXJ0cy5sZW5ndGggPj0gMikge1xuXHRcdHJldHVybiB7XG5cdFx0XHRpbnRlbnQ6IHBhcnRzWzBdLnRyaW0oKSxcblx0XHRcdG91dGNvbWU6IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLT4gXCIpLnRyaW0oKSwgLy8gSm9pbiBpbiBjYXNlIHRoZXJlIGFyZSBtdWx0aXBsZSBcIi0+XCJcblx0XHR9O1xuXHR9XG5cdHJldHVybiB7XG5cdFx0aW50ZW50OiB0ZXh0LnRyaW0oKSxcblx0XHRvdXRjb21lOiBcIlwiLFxuXHR9O1xufVxuXG4vKipcbiAqIExlZ2FjeSBmdW5jdGlvbiAtIGtlcHQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAqIFBhcnNlIHRoZSBQcm9zZSBzZWN0aW9uIGZyb20gYSBjaGFwdGVyIG1hcmtkb3duIGNvbnRlbnRcbiAqIEV4dHJhY3RzIHBhcmFncmFwaHMgYW5kIGlkZW50aWZpZXMgd2hpY2ggb25lcyBoYXZlIGxpbmtzIHRvIGNvbnRlbnQgYmxvY2tzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNoYXB0ZXJQcm9zZShjaGFwdGVyQ29udGVudDogc3RyaW5nKTogUGFyc2VkUGFyYWdyYXBoW10ge1xuXHRjb25zdCBoaWVyYXJjaGljYWwgPSBwYXJzZUhpZXJhcmNoaWNhbFByb3NlKGNoYXB0ZXJDb250ZW50KTtcblx0Y29uc3QgcGFyYWdyYXBoczogUGFyc2VkUGFyYWdyYXBoW10gPSBbXTtcblxuXHRmb3IgKGNvbnN0IHNlY3Rpb24gb2YgaGllcmFyY2hpY2FsLnNlY3Rpb25zKSB7XG5cdFx0aWYgKHNlY3Rpb24udHlwZSA9PT0gXCJwcm9zZVwiICYmIHNlY3Rpb24ucHJvc2UpIHtcblx0XHRcdHBhcmFncmFwaHMucHVzaChzZWN0aW9uLnByb3NlKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gcGFyYWdyYXBocztcbn1cblxuLyoqXG4gKiBDb21wYXJlIGxvY2FsIGFuZCByZW1vdGUgY29udGVudCBibG9ja3MgdG8gZGV0ZXJtaW5lIHN0YXR1c1xuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZUNvbnRlbnRCbG9ja3MoXG5cdHBhcmFncmFwaDogUGFyc2VkUGFyYWdyYXBoLFxuXHRsb2NhbENvbnRlbnRCbG9jazogQ29udGVudEJsb2NrIHwgbnVsbCxcblx0cmVtb3RlQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2sgfCBudWxsXG4pOiBDb250ZW50QmxvY2tDb21wYXJpc29uW1wic3RhdHVzXCJdIHtcblx0Y29uc3QgcGFyYWdyYXBoQ29udGVudCA9IHBhcmFncmFwaC5jb250ZW50LnRyaW0oKTtcblxuXHQvLyBQYXJhZ3JhcGggd2l0aG91dCBsaW5rIC0gY2hlY2sgaWYgcmVtb3RlIGV4aXN0cyB3aXRoIHNhbWUgY29udGVudFxuXHRpZiAoIXBhcmFncmFwaC5saW5rTmFtZSkge1xuXHRcdGlmIChyZW1vdGVDb250ZW50QmxvY2sgJiYgcmVtb3RlQ29udGVudEJsb2NrLmNvbnRlbnQudHJpbSgpID09PSBwYXJhZ3JhcGhDb250ZW50KSB7XG5cdFx0XHQvLyBSZW1vdGUgZXhpc3RzIHdpdGggc2FtZSBjb250ZW50IC0gdHJlYXQgYXMgdW5jaGFuZ2VkIGlmIGxvY2FsIG1hdGNoZXMsIG90aGVyd2lzZSBuZWVkIHRvIGNyZWF0ZSBsb2NhbCBmaWxlXG5cdFx0XHRpZiAobG9jYWxDb250ZW50QmxvY2sgJiYgbG9jYWxDb250ZW50QmxvY2suaWQgPT09IHJlbW90ZUNvbnRlbnRCbG9jay5pZCkge1xuXHRcdFx0XHRyZXR1cm4gXCJ1bmNoYW5nZWRcIjtcblx0XHRcdH1cblx0XHRcdC8vIFJlbW90ZSBleGlzdHMgYnV0IG5vIGxvY2FsIGZpbGUgLSBuZWVkIHRvIGNyZWF0ZSBsb2NhbCBmaWxlICh0cmVhdCBhcyB1bmNoYW5nZWQgZm9yIGNvbnRlbnQsIGJ1dCBuZWVkIGZpbGUgY3JlYXRpb24pXG5cdFx0XHRyZXR1cm4gXCJ1bmNoYW5nZWRcIjtcblx0XHR9XG5cdFx0Ly8gTm8gcmVtb3RlIG1hdGNoIC0gdGhpcyBpcyBhIG5ldyBjb250ZW50IGJsb2NrXG5cdFx0cmV0dXJuIFwibmV3XCI7XG5cdH1cblxuXHQvLyBObyBsb2NhbCBmaWxlIGZvdW5kIChzaG91bGRuJ3QgaGFwcGVuIGlmIGxpbmsgZXhpc3RzLCBidXQgaGFuZGxlIGdyYWNlZnVsbHkpXG5cdGlmICghbG9jYWxDb250ZW50QmxvY2spIHtcblx0XHQvLyBJZiByZW1vdGUgZXhpc3RzIHdpdGggc2FtZSBjb250ZW50LCB0cmVhdCBhcyByZW1vdGVfbW9kaWZpZWRcblx0XHRpZiAocmVtb3RlQ29udGVudEJsb2NrICYmIHJlbW90ZUNvbnRlbnRCbG9jay5jb250ZW50LnRyaW0oKSA9PT0gcGFyYWdyYXBoQ29udGVudCkge1xuXHRcdFx0cmV0dXJuIFwicmVtb3RlX21vZGlmaWVkXCI7XG5cdFx0fVxuXHRcdHJldHVybiBcIm5ld1wiO1xuXHR9XG5cblx0Ly8gTm8gcmVtb3RlIGNvbnRlbnQgYmxvY2sgZm91bmQgKGRlbGV0ZWQgb24gc2VydmVyPylcblx0aWYgKCFyZW1vdGVDb250ZW50QmxvY2spIHtcblx0XHRyZXR1cm4gXCJsb2NhbF9tb2RpZmllZFwiO1xuXHR9XG5cblx0Y29uc3QgbG9jYWxDb250ZW50ID0gbG9jYWxDb250ZW50QmxvY2suY29udGVudC50cmltKCk7XG5cdGNvbnN0IHJlbW90ZUNvbnRlbnQgPSByZW1vdGVDb250ZW50QmxvY2suY29udGVudC50cmltKCk7XG5cblx0Ly8gQm90aCBsb2NhbCBhbmQgcmVtb3RlIG1hdGNoIHBhcmFncmFwaFxuXHRpZiAobG9jYWxDb250ZW50ID09PSBwYXJhZ3JhcGhDb250ZW50ICYmIHJlbW90ZUNvbnRlbnQgPT09IHBhcmFncmFwaENvbnRlbnQpIHtcblx0XHRyZXR1cm4gXCJ1bmNoYW5nZWRcIjtcblx0fVxuXG5cdC8vIE9ubHkgcGFyYWdyYXBoIGNoYW5nZWQgKGxvY2FsIGVkaXQpXG5cdGlmIChwYXJhZ3JhcGhDb250ZW50ICE9PSBsb2NhbENvbnRlbnQgJiYgcGFyYWdyYXBoQ29udGVudCAhPT0gcmVtb3RlQ29udGVudCAmJiBsb2NhbENvbnRlbnQgPT09IHJlbW90ZUNvbnRlbnQpIHtcblx0XHRyZXR1cm4gXCJsb2NhbF9tb2RpZmllZFwiO1xuXHR9XG5cblx0Ly8gT25seSByZW1vdGUgY2hhbmdlZCAoc2VydmVyIGVkaXQpXG5cdGlmIChsb2NhbENvbnRlbnQgPT09IHBhcmFncmFwaENvbnRlbnQgJiYgcmVtb3RlQ29udGVudCAhPT0gcGFyYWdyYXBoQ29udGVudCkge1xuXHRcdHJldHVybiBcInJlbW90ZV9tb2RpZmllZFwiO1xuXHR9XG5cblx0Ly8gQm90aCBjaGFuZ2VkIChjb25mbGljdClcblx0aWYgKHBhcmFncmFwaENvbnRlbnQgIT09IGxvY2FsQ29udGVudCAmJiBwYXJhZ3JhcGhDb250ZW50ICE9PSByZW1vdGVDb250ZW50ICYmIGxvY2FsQ29udGVudCAhPT0gcmVtb3RlQ29udGVudCkge1xuXHRcdHJldHVybiBcImNvbmZsaWN0XCI7XG5cdH1cblxuXHQvLyBQYXJhZ3JhcGggbWF0Y2hlcyByZW1vdGUgYnV0IG5vdCBsb2NhbCAobG9jYWwgZmlsZSBvdXRkYXRlZClcblx0aWYgKHBhcmFncmFwaENvbnRlbnQgPT09IHJlbW90ZUNvbnRlbnQgJiYgbG9jYWxDb250ZW50ICE9PSByZW1vdGVDb250ZW50KSB7XG5cdFx0cmV0dXJuIFwicmVtb3RlX21vZGlmaWVkXCI7XG5cdH1cblxuXHQvLyBEZWZhdWx0IHRvIGNvbmZsaWN0IGlmIHVuY2xlYXJcblx0cmV0dXJuIFwiY29uZmxpY3RcIjtcbn1cblxuLyoqXG4gKiBQYXJzZSB0aGUgXCIjIyBTY2VuZXMgJiBCZWF0c1wiIGxpc3QgZnJvbSBjaGFwdGVyIGNvbnRlbnRcbiAqIEZvcm1hdDpcbiAqICMjIFNjZW5lcyAmIEJlYXRzXG4gKiBcbiAqICsgW1tsaW5rfFNjZW5lIE46IHRleHRdXVxuICogICAtIFtbbGlua3xCZWF0IE46IHRleHRdXVxuICogICArIFtbbGlua3xCZWF0IE46IHRleHRdXVxuICogLSBbW2xpbmt8U2NlbmUgTjogdGV4dF1dXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNjZW5lQmVhdExpc3QoY2hhcHRlckNvbnRlbnQ6IHN0cmluZyk6IFBhcnNlZFNjZW5lQmVhdExpc3Qge1xuXHRjb25zdCBpdGVtczogUGFyc2VkU2NlbmVCZWF0TGlzdEl0ZW1bXSA9IFtdO1xuXG5cdC8vIEV4dHJhY3QgY29udGVudCBhZnRlciBmcm9udG1hdHRlclxuXHRjb25zdCBmcm9udG1hdHRlck1hdGNoID0gY2hhcHRlckNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcblx0Y29uc3QgY29udGVudFN0YXJ0ID0gZnJvbnRtYXR0ZXJNYXRjaCA/IGZyb250bWF0dGVyTWF0Y2hbMF0ubGVuZ3RoIDogMDtcblx0Y29uc3QgYm9keUNvbnRlbnQgPSBjaGFwdGVyQ29udGVudC5zdWJzdHJpbmcoY29udGVudFN0YXJ0KS50cmltKCk7XG5cblx0Ly8gRmluZCB0aGUgXCIjIyBTY2VuZXMgJiBCZWF0c1wiIHNlY3Rpb25cblx0Y29uc3QgbGlzdFNlY3Rpb25NYXRjaCA9IGJvZHlDb250ZW50Lm1hdGNoKC8jI1xccytTY2VuZXNcXHMrJlxccytCZWF0c1xccypcXG4rKFtcXHNcXFNdKj8pKD89XFxuIyN8JCkvKTtcblx0aWYgKCFsaXN0U2VjdGlvbk1hdGNoKSB7XG5cdFx0cmV0dXJuIHsgaXRlbXM6IFtdIH07XG5cdH1cblxuXHRjb25zdCBsaXN0Q29udGVudCA9IGxpc3RTZWN0aW9uTWF0Y2hbMV0udHJpbSgpO1xuXHRjb25zdCBsaW5lcyA9IGxpc3RDb250ZW50LnNwbGl0KC9cXG4vKTtcblxuXHRsZXQgb3JkZXIgPSAwO1xuXHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcblx0XHRjb25zdCB0cmltbWVkTGluZSA9IGxpbmUudHJpbSgpO1xuXHRcdGlmICghdHJpbW1lZExpbmUpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGlmIGl0J3MgYSBzY2VuZSBvciBiZWF0IGl0ZW1cblx0XHQvLyBGb3JtYXQ6IFsrLy1dIFtbbGlua3x0ZXh0XV0gb3IgWysvLV0gdGV4dFxuXHRcdGNvbnN0IGl0ZW1NYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eKFsrLV0pXFxzKyguKykkLyk7XG5cdFx0aWYgKCFpdGVtTWF0Y2gpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IGhhc1Byb3NlID0gaXRlbU1hdGNoWzFdID09PSBcIitcIjtcblx0XHRjb25zdCBpdGVtVGV4dCA9IGl0ZW1NYXRjaFsyXS50cmltKCk7XG5cdFx0Ly8gQ291bnQgdGFicyBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBsaW5lIChtb3JlIHJlbGlhYmxlIHRoYW4gc3BhY2VzKVxuXHRcdGNvbnN0IHRhYk1hdGNoID0gbGluZS5tYXRjaCgvXihcXHQqKS8pO1xuXHRcdGNvbnN0IGluZGVudExldmVsID0gdGFiTWF0Y2ggPyB0YWJNYXRjaFsxXS5sZW5ndGggOiAwO1xuXHRcdGNvbnN0IGlzQmVhdCA9IGluZGVudExldmVsID4gMDtcblxuXHRcdC8vIFBhcnNlIGxpbmsgaWYgcHJlc2VudFxuXHRcdGNvbnN0IGxpbmtNYXRjaCA9IGl0ZW1UZXh0Lm1hdGNoKC9eXFxbXFxbKFteXFx8XSspXFx8KFteXFxdXSspXFxdXFxdJC8pO1xuXHRcdGxldCBsaW5rTmFtZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IGRpc3BsYXlUZXh0OiBzdHJpbmc7XG5cblx0XHRpZiAobGlua01hdGNoKSB7XG5cdFx0XHRsaW5rTmFtZSA9IGxpbmtNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRkaXNwbGF5VGV4dCA9IGxpbmtNYXRjaFsyXS50cmltKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRpc3BsYXlUZXh0ID0gaXRlbVRleHQ7XG5cdFx0fVxuXG5cdFx0aXRlbXMucHVzaCh7XG5cdFx0XHR0eXBlOiBpc0JlYXQgPyBcImJlYXRcIiA6IFwic2NlbmVcIixcblx0XHRcdGxpbmtOYW1lLFxuXHRcdFx0ZGlzcGxheVRleHQsXG5cdFx0XHRoYXNQcm9zZSxcblx0XHRcdGluZGVudExldmVsOiBpc0JlYXQgPyAxIDogMCxcblx0XHRcdG9yaWdpbmFsT3JkZXI6IG9yZGVyKyssXG5cdFx0fSk7XG5cdH1cblxuXHRyZXR1cm4geyBpdGVtcyB9O1xufVxuXG4vKipcbiAqIFBhcnNlIHRoZSBcIiMjIENoYXB0ZXJzLCBTY2VuZXMgJiBCZWF0c1wiIGxpc3QgZnJvbSBzdG9yeSBjb250ZW50XG4gKiBGb3JtYXQ6XG4gKiAjIyBDaGFwdGVycywgU2NlbmVzICYgQmVhdHNcbiAqIFxuICogLSBbW2xpbmt8Q2hhcHRlciBOOiB0aXRsZV1dXG4gKiAgIC0gW1tsaW5rfFNjZW5lIE46IGdvYWwgLSB0aW1lUmVmXV1cbiAqICAgICAtIFtbbGlua3xCZWF0IE46IGludGVudCAtPiBvdXRjb21lXV1cbiAqICAgICAtIFtbbGlua3xCZWF0IE46IGludGVudF1dXG4gKiAgIC0gW1tsaW5rfFNjZW5lIE46IGdvYWxdXVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDaGFwdGVyTGlzdChzdG9yeUNvbnRlbnQ6IHN0cmluZyk6IFBhcnNlZENoYXB0ZXJMaXN0IHtcblx0Y29uc3QgaXRlbXM6IFBhcnNlZENoYXB0ZXJMaXN0SXRlbVtdID0gW107XG5cblx0Ly8gRXh0cmFjdCBjb250ZW50IGFmdGVyIGZyb250bWF0dGVyXG5cdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBzdG9yeUNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcblx0Y29uc3QgY29udGVudFN0YXJ0ID0gZnJvbnRtYXR0ZXJNYXRjaCA/IGZyb250bWF0dGVyTWF0Y2hbMF0ubGVuZ3RoIDogMDtcblx0Y29uc3QgYm9keUNvbnRlbnQgPSBzdG9yeUNvbnRlbnQuc3Vic3RyaW5nKGNvbnRlbnRTdGFydCkudHJpbSgpO1xuXG5cdC8vIEZpbmQgdGhlIFwiIyMgQ2hhcHRlcnMsIFNjZW5lcyAmIEJlYXRzXCIgc2VjdGlvbiAob3IgXCIjIyBDaGFwdGVyc1wiIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5KVxuXHRjb25zdCBsaXN0U2VjdGlvbk1hdGNoID0gYm9keUNvbnRlbnQubWF0Y2goLyMjXFxzK0NoYXB0ZXJzKD86LFxccypTY2VuZXNcXHMqJlxccypCZWF0cyk/XFxzKlxcbisoW1xcc1xcU10qPykoPz1cXG4jI3wkKS8pO1xuXHRpZiAoIWxpc3RTZWN0aW9uTWF0Y2gpIHtcblx0XHRyZXR1cm4geyBpdGVtczogW10gfTtcblx0fVxuXG5cdGNvbnN0IGxpc3RDb250ZW50ID0gbGlzdFNlY3Rpb25NYXRjaFsxXS50cmltKCk7XG5cdGNvbnN0IGxpbmVzID0gbGlzdENvbnRlbnQuc3BsaXQoL1xcbi8pO1xuXG5cdGxldCBvcmRlciA9IDA7XG5cdGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuXHRcdGNvbnN0IHRyaW1tZWRMaW5lID0gbGluZS50cmltKCk7XG5cdFx0aWYgKCF0cmltbWVkTGluZSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgaWYgaXQncyBhIGNoYXB0ZXIsIHNjZW5lIG9yIGJlYXQgaXRlbVxuXHRcdC8vIEZvcm1hdDogWysvLV0gW1tsaW5rfHRleHRdXSBvciBbKy8tXSB0ZXh0XG5cdFx0Y29uc3QgaXRlbU1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL14oWystXSlcXHMrKC4rKSQvKTtcblx0XHRpZiAoIWl0ZW1NYXRjaCkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgaGFzUHJvc2UgPSBpdGVtTWF0Y2hbMV0gPT09IFwiK1wiO1xuXHRcdGNvbnN0IGl0ZW1UZXh0ID0gaXRlbU1hdGNoWzJdLnRyaW0oKTtcblx0XHQvLyBDb3VudCB0YWJzIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGxpbmUgKG1vcmUgcmVsaWFibGUgdGhhbiBzcGFjZXMpXG5cdFx0Y29uc3QgdGFiTWF0Y2ggPSBsaW5lLm1hdGNoKC9eKFxcdCopLyk7XG5cdFx0Y29uc3QgaW5kZW50TGV2ZWwgPSB0YWJNYXRjaCA/IHRhYk1hdGNoWzFdLmxlbmd0aCA6IDA7XG5cdFx0XG5cdFx0Ly8gRGV0ZXJtaW5lIHR5cGUgYmFzZWQgb24gaW5kZW50IGxldmVsICh0YWJzKVxuXHRcdC8vIDAgdGFicyA9IGNoYXB0ZXIsIDEgdGFiID0gc2NlbmUsIDIgdGFicyA9IGJlYXRcblx0XHRsZXQgdHlwZTogXCJjaGFwdGVyXCIgfCBcInNjZW5lXCIgfCBcImJlYXRcIjtcblx0XHRpZiAoaW5kZW50TGV2ZWwgPT09IDApIHtcblx0XHRcdHR5cGUgPSBcImNoYXB0ZXJcIjtcblx0XHR9IGVsc2UgaWYgKGluZGVudExldmVsID09PSAxKSB7XG5cdFx0XHR0eXBlID0gXCJzY2VuZVwiO1xuXHRcdH0gZWxzZSBpZiAoaW5kZW50TGV2ZWwgPT09IDIpIHtcblx0XHRcdHR5cGUgPSBcImJlYXRcIjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gU2tpcCBpdGVtcyB3aXRoIHVuZXhwZWN0ZWQgaW5kZW50IGxldmVsXG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBQYXJzZSBsaW5rIGlmIHByZXNlbnRcblx0XHRjb25zdCBsaW5rTWF0Y2ggPSBpdGVtVGV4dC5tYXRjaCgvXlxcW1xcWyhbXlxcfF0rKVxcfChbXlxcXV0rKVxcXVxcXSQvKTtcblx0XHRsZXQgbGlua05hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBkaXNwbGF5VGV4dDogc3RyaW5nO1xuXG5cdFx0aWYgKGxpbmtNYXRjaCkge1xuXHRcdFx0bGlua05hbWUgPSBsaW5rTWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0ZGlzcGxheVRleHQgPSBsaW5rTWF0Y2hbMl0udHJpbSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkaXNwbGF5VGV4dCA9IGl0ZW1UZXh0O1xuXHRcdH1cblxuXHRcdGl0ZW1zLnB1c2goe1xuXHRcdFx0dHlwZSxcblx0XHRcdGxpbmtOYW1lLFxuXHRcdFx0ZGlzcGxheVRleHQsXG5cdFx0XHRoYXNQcm9zZSxcblx0XHRcdGluZGVudExldmVsOiBpbmRlbnRMZXZlbCAvIDIsIC8vIE5vcm1hbGl6ZSB0byAwLCAxLCAyXG5cdFx0XHRvcmlnaW5hbE9yZGVyOiBvcmRlcisrLFxuXHRcdH0pO1xuXHR9XG5cblx0cmV0dXJuIHsgaXRlbXMgfTtcbn1cblxuLyoqXG4gKiBQYXJzZSB0aGUgXCIjIyBCZWF0c1wiIGxpc3QgZnJvbSBzY2VuZSBjb250ZW50XG4gKiBGb3JtYXQ6XG4gKiAjIyBCZWF0c1xuICogXG4gKiAtIFtbbGlua3xCZWF0IE46IGludGVudCAtPiBvdXRjb21lXV1cbiAqICsgW1tsaW5rfEJlYXQgTjogaW50ZW50IC0+IG91dGNvbWVdXVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VCZWF0TGlzdChzY2VuZUNvbnRlbnQ6IHN0cmluZyk6IFBhcnNlZEJlYXRMaXN0IHtcblx0Y29uc3QgaXRlbXM6IFBhcnNlZEJlYXRMaXN0SXRlbVtdID0gW107XG5cblx0Ly8gRXh0cmFjdCBjb250ZW50IGFmdGVyIGZyb250bWF0dGVyXG5cdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBzY2VuZUNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcblx0Y29uc3QgY29udGVudFN0YXJ0ID0gZnJvbnRtYXR0ZXJNYXRjaCA/IGZyb250bWF0dGVyTWF0Y2hbMF0ubGVuZ3RoIDogMDtcblx0Y29uc3QgYm9keUNvbnRlbnQgPSBzY2VuZUNvbnRlbnQuc3Vic3RyaW5nKGNvbnRlbnRTdGFydCkudHJpbSgpO1xuXG5cdC8vIEZpbmQgdGhlIFwiIyMgQmVhdHNcIiBzZWN0aW9uXG5cdGNvbnN0IGxpc3RTZWN0aW9uTWF0Y2ggPSBib2R5Q29udGVudC5tYXRjaCgvIyNcXHMrQmVhdHNcXHMqXFxuKyhbXFxzXFxTXSo/KSg/PVxcbiMjfCQpLyk7XG5cdGlmICghbGlzdFNlY3Rpb25NYXRjaCkge1xuXHRcdHJldHVybiB7IGl0ZW1zOiBbXSB9O1xuXHR9XG5cblx0Y29uc3QgbGlzdENvbnRlbnQgPSBsaXN0U2VjdGlvbk1hdGNoWzFdLnRyaW0oKTtcblx0Y29uc3QgbGluZXMgPSBsaXN0Q29udGVudC5zcGxpdCgvXFxuLyk7XG5cblx0bGV0IG9yZGVyID0gMDtcblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG5cdFx0Y29uc3QgdHJpbW1lZExpbmUgPSBsaW5lLnRyaW0oKTtcblx0XHRpZiAoIXRyaW1tZWRMaW5lKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBTa2lwIHRoZSBpbmZvIGNhbGxvdXQgYmxvY2tcblx0XHRpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aChcIj5cIikpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGlmIGl0J3MgYSBiZWF0IGl0ZW1cblx0XHQvLyBGb3JtYXQ6IFsrLy1dIFtbbGlua3x0ZXh0XV0gb3IgWysvLV0gdGV4dFxuXHRcdGNvbnN0IGl0ZW1NYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eKFsrLV0pXFxzKyguKykkLyk7XG5cdFx0aWYgKCFpdGVtTWF0Y2gpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IGhhc1Byb3NlID0gaXRlbU1hdGNoWzFdID09PSBcIitcIjtcblx0XHRjb25zdCBpdGVtVGV4dCA9IGl0ZW1NYXRjaFsyXS50cmltKCk7XG5cblx0XHQvLyBQYXJzZSBsaW5rIGlmIHByZXNlbnRcblx0XHRjb25zdCBsaW5rTWF0Y2ggPSBpdGVtVGV4dC5tYXRjaCgvXlxcW1xcWyhbXlxcfF0rKVxcfChbXlxcXV0rKVxcXVxcXSQvKTtcblx0XHRsZXQgbGlua05hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBkaXNwbGF5VGV4dDogc3RyaW5nO1xuXG5cdFx0aWYgKGxpbmtNYXRjaCkge1xuXHRcdFx0bGlua05hbWUgPSBsaW5rTWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0ZGlzcGxheVRleHQgPSBsaW5rTWF0Y2hbMl0udHJpbSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkaXNwbGF5VGV4dCA9IGl0ZW1UZXh0O1xuXHRcdH1cblxuXHRcdGl0ZW1zLnB1c2goe1xuXHRcdFx0bGlua05hbWUsXG5cdFx0XHRkaXNwbGF5VGV4dCxcblx0XHRcdGhhc1Byb3NlLFxuXHRcdFx0b3JpZ2luYWxPcmRlcjogb3JkZXIrKyxcblx0XHR9KTtcblx0fVxuXG5cdHJldHVybiB7IGl0ZW1zIH07XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIFwiIyMgT3JwaGFuIFNjZW5lc1wiIGxpc3QgZnJvbSBzdG9yeSBjb250ZW50XG4gKiBGb3JtYXQ6XG4gKiAjIyBPcnBoYW4gU2NlbmVzXG4gKiBcbiAqIC0gW1tsaW5rfFNjZW5lIE46IGdvYWwgLSB0aW1lUmVmXV1cbiAqICsgW1tsaW5rfFNjZW5lIE46IGdvYWwgLSB0aW1lUmVmXV1cbiAqICAgLSBbW2xpbmt8QmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZV1dXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU9ycGhhblNjZW5lc0xpc3Qoc3RvcnlDb250ZW50OiBzdHJpbmcpOiBQYXJzZWRTY2VuZUJlYXRMaXN0IHtcblx0Y29uc3QgaXRlbXM6IFBhcnNlZFNjZW5lQmVhdExpc3RJdGVtW10gPSBbXTtcblxuXHQvLyBFeHRyYWN0IGNvbnRlbnQgYWZ0ZXIgZnJvbnRtYXR0ZXJcblx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IHN0b3J5Q29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuXHRjb25zdCBjb250ZW50U3RhcnQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXS5sZW5ndGggOiAwO1xuXHRjb25zdCBib2R5Q29udGVudCA9IHN0b3J5Q29udGVudC5zdWJzdHJpbmcoY29udGVudFN0YXJ0KS50cmltKCk7XG5cblx0Ly8gRmluZCB0aGUgXCIjIyBPcnBoYW4gU2NlbmVzXCIgc2VjdGlvblxuXHRjb25zdCBsaXN0U2VjdGlvbk1hdGNoID0gYm9keUNvbnRlbnQubWF0Y2goLyMjXFxzK09ycGhhblxccytTY2VuZXNcXHMqXFxuKyhbXFxzXFxTXSo/KSg/PVxcbiMjfCQpLyk7XG5cdGlmICghbGlzdFNlY3Rpb25NYXRjaCkge1xuXHRcdHJldHVybiB7IGl0ZW1zOiBbXSB9O1xuXHR9XG5cblx0Y29uc3QgbGlzdENvbnRlbnQgPSBsaXN0U2VjdGlvbk1hdGNoWzFdLnRyaW0oKTtcblx0Y29uc3QgbGluZXMgPSBsaXN0Q29udGVudC5zcGxpdCgvXFxuLyk7XG5cblx0bGV0IG9yZGVyID0gMDtcblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG5cdFx0Y29uc3QgdHJpbW1lZExpbmUgPSBsaW5lLnRyaW0oKTtcblx0XHRpZiAoIXRyaW1tZWRMaW5lKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBTa2lwIHRoZSBpbmZvIGNhbGxvdXQgYmxvY2tcblx0XHRpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aChcIj5cIikpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGlmIGl0J3MgYSBzY2VuZSBvciBiZWF0IGl0ZW1cblx0XHQvLyBGb3JtYXQ6IFsrLy1dIFtbbGlua3x0ZXh0XV0gb3IgWysvLV0gdGV4dFxuXHRcdGNvbnN0IGl0ZW1NYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eKFsrLV0pXFxzKyguKykkLyk7XG5cdFx0aWYgKCFpdGVtTWF0Y2gpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IGhhc1Byb3NlID0gaXRlbU1hdGNoWzFdID09PSBcIitcIjtcblx0XHRjb25zdCBpdGVtVGV4dCA9IGl0ZW1NYXRjaFsyXS50cmltKCk7XG5cdFx0Ly8gQ291bnQgdGFicyBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBsaW5lIChtb3JlIHJlbGlhYmxlIHRoYW4gc3BhY2VzKVxuXHRcdGNvbnN0IHRhYk1hdGNoID0gbGluZS5tYXRjaCgvXihcXHQqKS8pO1xuXHRcdGNvbnN0IGluZGVudExldmVsID0gdGFiTWF0Y2ggPyB0YWJNYXRjaFsxXS5sZW5ndGggOiAwO1xuXHRcdGNvbnN0IGlzQmVhdCA9IGluZGVudExldmVsID4gMDtcblxuXHRcdC8vIFBhcnNlIGxpbmsgaWYgcHJlc2VudFxuXHRcdGNvbnN0IGxpbmtNYXRjaCA9IGl0ZW1UZXh0Lm1hdGNoKC9eXFxbXFxbKFteXFx8XSspXFx8KFteXFxdXSspXFxdXFxdJC8pO1xuXHRcdGxldCBsaW5rTmFtZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IGRpc3BsYXlUZXh0OiBzdHJpbmc7XG5cblx0XHRpZiAobGlua01hdGNoKSB7XG5cdFx0XHRsaW5rTmFtZSA9IGxpbmtNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRkaXNwbGF5VGV4dCA9IGxpbmtNYXRjaFsyXS50cmltKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRpc3BsYXlUZXh0ID0gaXRlbVRleHQ7XG5cdFx0fVxuXG5cdFx0aXRlbXMucHVzaCh7XG5cdFx0XHR0eXBlOiBpc0JlYXQgPyBcImJlYXRcIiA6IFwic2NlbmVcIixcblx0XHRcdGxpbmtOYW1lLFxuXHRcdFx0ZGlzcGxheVRleHQsXG5cdFx0XHRoYXNQcm9zZSxcblx0XHRcdGluZGVudExldmVsOiBpc0JlYXQgPyAxIDogMCxcblx0XHRcdG9yaWdpbmFsT3JkZXI6IG9yZGVyKyssXG5cdFx0fSk7XG5cdH1cblxuXHRyZXR1cm4geyBpdGVtcyB9O1xufVxuXG4vKipcbiAqIFBhcnNlIHRoZSBcIiMjIE9ycGhhbiBCZWF0c1wiIGxpc3QgZnJvbSBzdG9yeSBjb250ZW50XG4gKiBGb3JtYXQ6XG4gKiAjIyBPcnBoYW4gQmVhdHNcbiAqIFxuICogLSBbW2xpbmt8QmVhdCBOOiBpbnRlbnQgLT4gb3V0Y29tZV1dXG4gKiArIFtbbGlua3xCZWF0IE46IGludGVudCAtPiBvdXRjb21lXV1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlT3JwaGFuQmVhdHNMaXN0KHN0b3J5Q29udGVudDogc3RyaW5nKTogUGFyc2VkQmVhdExpc3Qge1xuXHRjb25zdCBpdGVtczogUGFyc2VkQmVhdExpc3RJdGVtW10gPSBbXTtcblxuXHQvLyBFeHRyYWN0IGNvbnRlbnQgYWZ0ZXIgZnJvbnRtYXR0ZXJcblx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IHN0b3J5Q29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuXHRjb25zdCBjb250ZW50U3RhcnQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXS5sZW5ndGggOiAwO1xuXHRjb25zdCBib2R5Q29udGVudCA9IHN0b3J5Q29udGVudC5zdWJzdHJpbmcoY29udGVudFN0YXJ0KS50cmltKCk7XG5cblx0Ly8gRmluZCB0aGUgXCIjIyBPcnBoYW4gQmVhdHNcIiBzZWN0aW9uXG5cdGNvbnN0IGxpc3RTZWN0aW9uTWF0Y2ggPSBib2R5Q29udGVudC5tYXRjaCgvIyNcXHMrT3JwaGFuXFxzK0JlYXRzXFxzKlxcbisoW1xcc1xcU10qPykoPz1cXG4jI3wkKS8pO1xuXHRpZiAoIWxpc3RTZWN0aW9uTWF0Y2gpIHtcblx0XHRyZXR1cm4geyBpdGVtczogW10gfTtcblx0fVxuXG5cdGNvbnN0IGxpc3RDb250ZW50ID0gbGlzdFNlY3Rpb25NYXRjaFsxXS50cmltKCk7XG5cdGNvbnN0IGxpbmVzID0gbGlzdENvbnRlbnQuc3BsaXQoL1xcbi8pO1xuXG5cdGxldCBvcmRlciA9IDA7XG5cdGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuXHRcdGNvbnN0IHRyaW1tZWRMaW5lID0gbGluZS50cmltKCk7XG5cdFx0aWYgKCF0cmltbWVkTGluZSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gU2tpcCB0aGUgaW5mbyBjYWxsb3V0IGJsb2NrXG5cdFx0aWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoXCI+XCIpKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBpZiBpdCdzIGEgYmVhdCBpdGVtXG5cdFx0Ly8gRm9ybWF0OiBbKy8tXSBbW2xpbmt8dGV4dF1dIG9yIFsrLy1dIHRleHRcblx0XHRjb25zdCBpdGVtTWF0Y2ggPSB0cmltbWVkTGluZS5tYXRjaCgvXihbKy1dKVxccysoLispJC8pO1xuXHRcdGlmICghaXRlbU1hdGNoKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRjb25zdCBoYXNQcm9zZSA9IGl0ZW1NYXRjaFsxXSA9PT0gXCIrXCI7XG5cdFx0Y29uc3QgaXRlbVRleHQgPSBpdGVtTWF0Y2hbMl0udHJpbSgpO1xuXG5cdFx0Ly8gUGFyc2UgbGluayBpZiBwcmVzZW50XG5cdFx0Y29uc3QgbGlua01hdGNoID0gaXRlbVRleHQubWF0Y2goL15cXFtcXFsoW15cXHxdKylcXHwoW15cXF1dKylcXF1cXF0kLyk7XG5cdFx0bGV0IGxpbmtOYW1lOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgZGlzcGxheVRleHQ6IHN0cmluZztcblxuXHRcdGlmIChsaW5rTWF0Y2gpIHtcblx0XHRcdGxpbmtOYW1lID0gbGlua01hdGNoWzFdLnRyaW0oKTtcblx0XHRcdGRpc3BsYXlUZXh0ID0gbGlua01hdGNoWzJdLnRyaW0oKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGlzcGxheVRleHQgPSBpdGVtVGV4dDtcblx0XHR9XG5cblx0XHRpdGVtcy5wdXNoKHtcblx0XHRcdGxpbmtOYW1lLFxuXHRcdFx0ZGlzcGxheVRleHQsXG5cdFx0XHRoYXNQcm9zZSxcblx0XHRcdG9yaWdpbmFsT3JkZXI6IG9yZGVyKyssXG5cdFx0fSk7XG5cdH1cblxuXHRyZXR1cm4geyBpdGVtcyB9O1xufVxuXG4vKipcbiAqIFBhcnNlIGNvbnRlbnQgYmxvY2tzIGZyb20gc3RvcnkgY29udGVudCB1c2luZyBoaWVyYXJjaGljYWwgaGVhZGVyc1xuICogRm9ybWF0OlxuICogIyBTdG9yeTogdGl0bGVcbiAqIHByb3NlIGF0IHN0b3J5IGxldmVsXG4gKiBcbiAqICMjIENoYXB0ZXI6IHRpdGxlXG4gKiBwcm9zZSBhdCBjaGFwdGVyIGxldmVsIChubyBzY2VuZSlcbiAqIFxuICogIyMjIFNjZW5lOiB0aXRsZVxuICogcHJvc2UgYXQgc2NlbmUgbGV2ZWxcbiAqIFxuICogIyMjIyBCZWF0OiB0aXRsZVxuICogcHJvc2UgYXQgYmVhdCBsZXZlbFxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTdG9yeVByb3NlKHN0b3J5Q29udGVudDogc3RyaW5nKTogSGllcmFyY2hpY2FsUHJvc2Uge1xuXHRjb25zdCBzZWN0aW9uczogUGFyc2VkU2VjdGlvbltdID0gW107XG5cblx0Ly8gRXh0cmFjdCBjb250ZW50IGFmdGVyIGZyb250bWF0dGVyXG5cdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBzdG9yeUNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcblx0Y29uc3QgY29udGVudFN0YXJ0ID0gZnJvbnRtYXR0ZXJNYXRjaCA/IGZyb250bWF0dGVyTWF0Y2hbMF0ubGVuZ3RoIDogMDtcblx0Y29uc3QgYm9keUNvbnRlbnQgPSBzdG9yeUNvbnRlbnQuc3Vic3RyaW5nKGNvbnRlbnRTdGFydCkudHJpbSgpO1xuXG5cdC8vIEZpbmQgdGhlIGhpZXJhcmNoaWNhbCBwcm9zZSBzZWN0aW9uIC0gc3RhcnRzIHdpdGggXCIjIFN0b3J5OlwiIG9yIFwiIyMgQ2hhcHRlciBOOlwiIG9yIFwiIyMgQ2hhcHRlcjpcIlxuXHQvLyBUaGlzIGlzIEFGVEVSIHRoZSBsaXN0IHNlY3Rpb25zICgjIyBDaGFwdGVycywgU2NlbmVzICYgQmVhdHMsICMjIE9ycGhhbiBTY2VuZXMsIGV0Yy4pXG5cdGNvbnN0IHN0b3J5SGVhZGVyTWF0Y2ggPSBib2R5Q29udGVudC5tYXRjaCgvXigjXFxzK1N0b3J5OlxccyouKykkL20pO1xuXHRjb25zdCBjaGFwdGVySGVhZGVyTWF0Y2ggPSBib2R5Q29udGVudC5tYXRjaCgvXigjI1xccytDaGFwdGVyXFxzKlxcZCo6XFxzKi4rKSQvbSk7XG5cdFxuXHRsZXQgcHJvc2VTdGFydEluZGV4ID0gLTE7XG5cdGlmIChzdG9yeUhlYWRlck1hdGNoKSB7XG5cdFx0cHJvc2VTdGFydEluZGV4ID0gYm9keUNvbnRlbnQuaW5kZXhPZihzdG9yeUhlYWRlck1hdGNoWzBdKTtcblx0fSBlbHNlIGlmIChjaGFwdGVySGVhZGVyTWF0Y2gpIHtcblx0XHRwcm9zZVN0YXJ0SW5kZXggPSBib2R5Q29udGVudC5pbmRleE9mKGNoYXB0ZXJIZWFkZXJNYXRjaFswXSk7XG5cdH1cblx0XG5cdGlmIChwcm9zZVN0YXJ0SW5kZXggPT09IC0xKSB7XG5cdFx0cmV0dXJuIHsgc2VjdGlvbnM6IFtdIH07XG5cdH1cblx0XG5cdGNvbnN0IHByb3NlQ29udGVudCA9IGJvZHlDb250ZW50LnN1YnN0cmluZyhwcm9zZVN0YXJ0SW5kZXgpO1xuXHRjb25zdCBsaW5lcyA9IHByb3NlQ29udGVudC5zcGxpdCgvXFxuLyk7XG5cblx0bGV0IG9yZGVyID0gMDtcblx0bGV0IGN1cnJlbnRDaGFwdGVyOiB7IGxpbmtOYW1lOiBzdHJpbmcgfCBudWxsOyB0aXRsZTogc3RyaW5nIH0gfCBudWxsID0gbnVsbDtcblx0bGV0IGN1cnJlbnRTY2VuZTogUGFyc2VkU2NlbmUgfCBudWxsID0gbnVsbDtcblx0bGV0IGN1cnJlbnRCZWF0OiBQYXJzZWRCZWF0IHwgbnVsbCA9IG51bGw7XG5cblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG5cdFx0Y29uc3QgdHJpbW1lZExpbmUgPSBsaW5lLnRyaW0oKTtcblxuXHRcdC8vIFNraXAgZW1wdHkgbGluZXNcblx0XHRpZiAoIXRyaW1tZWRMaW5lKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBTa2lwIGluZm8gY2FsbG91dHNcblx0XHRpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aChcIj5cIikpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBTdG9yeSBoZWFkZXI6ICMgU3Rvcnk6IFtbbGlua3x0aXRsZV1dIG9yICMgU3Rvcnk6IHRpdGxlXG5cdFx0Y29uc3Qgc3RvcnlNYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eI1xccytTdG9yeTpcXHMqKC4rKSQvaSk7XG5cdFx0aWYgKHN0b3J5TWF0Y2gpIHtcblx0XHRcdC8vIFN0b3J5IGhlYWRlciAtIGp1c3Qgc2tpcCwgd2UncmUgYWxyZWFkeSBpbiBzdG9yeSBjb250ZXh0XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBmb3IgQ2hhcHRlciBoZWFkZXI6ICMjIENoYXB0ZXIgTjogW1tsaW5rfHRpdGxlXV0gb3IgIyMgQ2hhcHRlcjogdGl0bGVcblx0XHRjb25zdCBjaGFwdGVyTWF0Y2ggPSB0cmltbWVkTGluZS5tYXRjaCgvXiMjXFxzK0NoYXB0ZXJcXHMqXFxkKjpcXHMqKC4rKSQvaSk7XG5cdFx0aWYgKGNoYXB0ZXJNYXRjaCkge1xuXHRcdFx0Y29uc3QgY2hhcHRlclRleHQgPSBjaGFwdGVyTWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0Y29uc3QgbGlua01hdGNoID0gY2hhcHRlclRleHQubWF0Y2goL15cXFtcXFsoW15cXHxdKylcXHwoW15cXF1dKylcXF1cXF0kLyk7XG5cdFx0XHRpZiAobGlua01hdGNoKSB7XG5cdFx0XHRcdGN1cnJlbnRDaGFwdGVyID0ge1xuXHRcdFx0XHRcdGxpbmtOYW1lOiBsaW5rTWF0Y2hbMV0udHJpbSgpLFxuXHRcdFx0XHRcdHRpdGxlOiBsaW5rTWF0Y2hbMl0udHJpbSgpLFxuXHRcdFx0XHR9O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y3VycmVudENoYXB0ZXIgPSB7XG5cdFx0XHRcdFx0bGlua05hbWU6IG51bGwsXG5cdFx0XHRcdFx0dGl0bGU6IGNoYXB0ZXJUZXh0LFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0Y3VycmVudFNjZW5lID0gbnVsbDtcblx0XHRcdGN1cnJlbnRCZWF0ID0gbnVsbDtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBTY2VuZSBoZWFkZXI6ICMjIyBTY2VuZTogW1tsaW5rfGdvYWwgLSB0aW1lUmVmXV0gb3IgIyMjIFNjZW5lOiBnb2FsXG5cdFx0Y29uc3Qgc2NlbmVNYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eIyMjXFxzK1NjZW5lOlxccyooLispJC9pKTtcblx0XHRpZiAoc2NlbmVNYXRjaCkge1xuXHRcdFx0Y29uc3Qgc2NlbmVUZXh0ID0gc2NlbmVNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRjdXJyZW50U2NlbmUgPSBwYXJzZVNjZW5lSGVhZGVyVGV4dChzY2VuZVRleHQpO1xuXHRcdFx0Y3VycmVudFNjZW5lLm9yaWdpbmFsT3JkZXIgPSBvcmRlcisrO1xuXHRcdFx0c2VjdGlvbnMucHVzaCh7XG5cdFx0XHRcdHR5cGU6IFwic2NlbmVcIixcblx0XHRcdFx0c2NlbmU6IGN1cnJlbnRTY2VuZSxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogY3VycmVudFNjZW5lLm9yaWdpbmFsT3JkZXIsXG5cdFx0XHR9KTtcblx0XHRcdGN1cnJlbnRCZWF0ID0gbnVsbDtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBCZWF0IGhlYWRlcjogIyMjIyBCZWF0OiBbW2xpbmt8aW50ZW50IC0+IG91dGNvbWVdXSBvciAjIyMjIEJlYXQ6IGludGVudFxuXHRcdGNvbnN0IGJlYXRNYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eIyMjI1xccytCZWF0OlxccyooLispJC9pKTtcblx0XHRpZiAoYmVhdE1hdGNoKSB7XG5cdFx0XHRjb25zdCBiZWF0VGV4dCA9IGJlYXRNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRjdXJyZW50QmVhdCA9IHBhcnNlQmVhdEhlYWRlclRleHQoYmVhdFRleHQpO1xuXHRcdFx0Y3VycmVudEJlYXQub3JpZ2luYWxPcmRlciA9IG9yZGVyKys7XG5cdFx0XHRzZWN0aW9ucy5wdXNoKHtcblx0XHRcdFx0dHlwZTogXCJiZWF0XCIsXG5cdFx0XHRcdGJlYXQ6IGN1cnJlbnRCZWF0LFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBjdXJyZW50QmVhdC5vcmlnaW5hbE9yZGVyLFxuXHRcdFx0fSk7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBTa2lwIG90aGVyIGhlYWRlcnMgdGhhdCBkb24ndCBtYXRjaCBvdXIgcGF0dGVyblxuXHRcdGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKFwiI1wiKSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gU2tpcCBsaXN0IGl0ZW1zICh0aGVzZSBhcmUgY2hhcHRlci9zY2VuZS9iZWF0IGxpc3RzKVxuXHRcdGlmICh0cmltbWVkTGluZS5tYXRjaCgvXlsrLV1cXHMrLykpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBjb250ZW50IGJsb2NrOiBbW2xpbmt8Y29udGVudF1dIG9yIHBsYWluIHRleHRcblx0XHRjb25zdCBwcm9zZU1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL15cXHMqXFxbXFxbKFteXFx8XSspXFx8KFteXFxdXSspXFxdXFxdXFxzKiQvKTtcblx0XHRpZiAocHJvc2VNYXRjaCkge1xuXHRcdFx0Y29uc3QgbGlua05hbWUgPSBwcm9zZU1hdGNoWzFdLnRyaW0oKTtcblx0XHRcdGNvbnN0IGNvbnRlbnQgPSBwcm9zZU1hdGNoWzJdLnRyaW0oKTtcblx0XHRcdGNvbnN0IHBhcmFncmFwaDogUGFyc2VkUGFyYWdyYXBoID0ge1xuXHRcdFx0XHRjb250ZW50LFxuXHRcdFx0XHRsaW5rTmFtZSxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogb3JkZXIrKyxcblx0XHRcdH07XG5cdFx0XHRzZWN0aW9ucy5wdXNoKHtcblx0XHRcdFx0dHlwZTogXCJwcm9zZVwiLFxuXHRcdFx0XHRwcm9zZTogcGFyYWdyYXBoLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBwYXJhZ3JhcGgub3JpZ2luYWxPcmRlcixcblx0XHRcdH0pO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gUGxhaW4gdGV4dCBwYXJhZ3JhcGggKG5ldyBjb250ZW50IGJsb2NrIHdpdGhvdXQgbGluaylcblx0XHRpZiAodHJpbW1lZExpbmUubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29uc3QgcGFyYWdyYXBoOiBQYXJzZWRQYXJhZ3JhcGggPSB7XG5cdFx0XHRcdGNvbnRlbnQ6IHRyaW1tZWRMaW5lLFxuXHRcdFx0XHRsaW5rTmFtZTogbnVsbCxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogb3JkZXIrKyxcblx0XHRcdH07XG5cdFx0XHRzZWN0aW9ucy5wdXNoKHtcblx0XHRcdFx0dHlwZTogXCJwcm9zZVwiLFxuXHRcdFx0XHRwcm9zZTogcGFyYWdyYXBoLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBwYXJhZ3JhcGgub3JpZ2luYWxPcmRlcixcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB7IHNlY3Rpb25zIH07XG59XG5cbi8qKlxuICogSGVscGVyIHRvIHBhcnNlIHNjZW5lIGhlYWRlciB0ZXh0XG4gKi9cbmZ1bmN0aW9uIHBhcnNlU2NlbmVIZWFkZXJUZXh0KHRleHQ6IHN0cmluZyk6IFBhcnNlZFNjZW5lIHtcblx0Y29uc3QgbGlua01hdGNoID0gdGV4dC5tYXRjaCgvXlxcW1xcWyhbXlxcfF0rKVxcfChbXlxcXV0rKVxcXVxcXSQvKTtcblx0aWYgKGxpbmtNYXRjaCkge1xuXHRcdGNvbnN0IGxpbmtOYW1lID0gbGlua01hdGNoWzFdLnRyaW0oKTtcblx0XHRjb25zdCBkaXNwbGF5VGV4dCA9IGxpbmtNYXRjaFsyXS50cmltKCk7XG5cdFx0Y29uc3QgcGFydHMgPSBkaXNwbGF5VGV4dC5zcGxpdCgvXFxzKi1cXHMqLyk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGxpbmtOYW1lLFxuXHRcdFx0Z29hbDogcGFydHNbMF0udHJpbSgpLFxuXHRcdFx0dGltZVJlZjogcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLSBcIikudHJpbSgpIDogXCJcIixcblx0XHRcdG9yaWdpbmFsT3JkZXI6IDAsXG5cdFx0fTtcblx0fVxuXG5cdGNvbnN0IHNpbXBsZUxpbmtNYXRjaCA9IHRleHQubWF0Y2goL15cXFtcXFsoW15cXF1dKylcXF1cXF0kLyk7XG5cdGlmIChzaW1wbGVMaW5rTWF0Y2gpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bGlua05hbWU6IHNpbXBsZUxpbmtNYXRjaFsxXS50cmltKCksXG5cdFx0XHRnb2FsOiBcIlwiLFxuXHRcdFx0dGltZVJlZjogXCJcIixcblx0XHRcdG9yaWdpbmFsT3JkZXI6IDAsXG5cdFx0fTtcblx0fVxuXG5cdGNvbnN0IHBhcnRzID0gdGV4dC5zcGxpdCgvXFxzKi1cXHMqLyk7XG5cdHJldHVybiB7XG5cdFx0bGlua05hbWU6IG51bGwsXG5cdFx0Z29hbDogcGFydHNbMF0udHJpbSgpLFxuXHRcdHRpbWVSZWY6IHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0cy5zbGljZSgxKS5qb2luKFwiIC0gXCIpLnRyaW0oKSA6IFwiXCIsXG5cdFx0b3JpZ2luYWxPcmRlcjogMCxcblx0fTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gcGFyc2UgYmVhdCBoZWFkZXIgdGV4dFxuICovXG5mdW5jdGlvbiBwYXJzZUJlYXRIZWFkZXJUZXh0KHRleHQ6IHN0cmluZyk6IFBhcnNlZEJlYXQge1xuXHRjb25zdCBsaW5rTWF0Y2ggPSB0ZXh0Lm1hdGNoKC9eXFxbXFxbKFteXFx8XSspXFx8KFteXFxdXSspXFxdXFxdJC8pO1xuXHRpZiAobGlua01hdGNoKSB7XG5cdFx0Y29uc3QgbGlua05hbWUgPSBsaW5rTWF0Y2hbMV0udHJpbSgpO1xuXHRcdGNvbnN0IGRpc3BsYXlUZXh0ID0gbGlua01hdGNoWzJdLnRyaW0oKTtcblx0XHRjb25zdCBwYXJ0cyA9IGRpc3BsYXlUZXh0LnNwbGl0KC9cXHMqLT5cXHMqLyk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGxpbmtOYW1lLFxuXHRcdFx0aW50ZW50OiBwYXJ0c1swXS50cmltKCksXG5cdFx0XHRvdXRjb21lOiBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHMuc2xpY2UoMSkuam9pbihcIiAtPiBcIikudHJpbSgpIDogXCJcIixcblx0XHRcdG9yaWdpbmFsT3JkZXI6IDAsXG5cdFx0fTtcblx0fVxuXG5cdGNvbnN0IHNpbXBsZUxpbmtNYXRjaCA9IHRleHQubWF0Y2goL15cXFtcXFsoW15cXF1dKylcXF1cXF0kLyk7XG5cdGlmIChzaW1wbGVMaW5rTWF0Y2gpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bGlua05hbWU6IHNpbXBsZUxpbmtNYXRjaFsxXS50cmltKCksXG5cdFx0XHRpbnRlbnQ6IFwiXCIsXG5cdFx0XHRvdXRjb21lOiBcIlwiLFxuXHRcdFx0b3JpZ2luYWxPcmRlcjogMCxcblx0XHR9O1xuXHR9XG5cblx0Y29uc3QgcGFydHMgPSB0ZXh0LnNwbGl0KC9cXHMqLT5cXHMqLyk7XG5cdHJldHVybiB7XG5cdFx0bGlua05hbWU6IG51bGwsXG5cdFx0aW50ZW50OiBwYXJ0c1swXS50cmltKCksXG5cdFx0b3V0Y29tZTogcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzLnNsaWNlKDEpLmpvaW4oXCIgLT4gXCIpLnRyaW0oKSA6IFwiXCIsXG5cdFx0b3JpZ2luYWxPcmRlcjogMCxcblx0fTtcbn1cblxuLyoqXG4gKiBQYXJzZSBjb250ZW50IGJsb2NrcyBmcm9tIHNjZW5lIGNvbnRlbnQgdXNpbmcgaGllcmFyY2hpY2FsIGhlYWRlcnNcbiAqIEZvcm1hdCAobm8gY2hhcHRlcnMgaW4gc2NlbmVzKTpcbiAqIFxuICogIyMgQmVhdHMgKGxpc3QgLSBza2lwcGVkKVxuICogLSBbW2JlYXQtMXxCZWF0IDE6IGludGVudF1dXG4gKiBcbiAqICMjIyBTY2VuZTogdGl0bGUgKG9yIGp1c3Qgc3RhcnQgd2l0aCBwcm9zZSlcbiAqIHByb3NlIGF0IHNjZW5lIGxldmVsXG4gKiBcbiAqICMjIyMgQmVhdDogdGl0bGUgKG9yICMjIyBCZWF0OilcbiAqIHByb3NlIGF0IGJlYXQgbGV2ZWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU2NlbmVQcm9zZShzY2VuZUNvbnRlbnQ6IHN0cmluZyk6IEhpZXJhcmNoaWNhbFByb3NlIHtcblx0Y29uc3Qgc2VjdGlvbnM6IFBhcnNlZFNlY3Rpb25bXSA9IFtdO1xuXG5cdC8vIEV4dHJhY3QgY29udGVudCBhZnRlciBmcm9udG1hdHRlclxuXHRjb25zdCBmcm9udG1hdHRlck1hdGNoID0gc2NlbmVDb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XG5cdGNvbnN0IGNvbnRlbnRTdGFydCA9IGZyb250bWF0dGVyTWF0Y2ggPyBmcm9udG1hdHRlck1hdGNoWzBdLmxlbmd0aCA6IDA7XG5cdGNvbnN0IGJvZHlDb250ZW50ID0gc2NlbmVDb250ZW50LnN1YnN0cmluZyhjb250ZW50U3RhcnQpLnRyaW0oKTtcblxuXHQvLyBGaW5kIHRoZSBoaWVyYXJjaGljYWwgcHJvc2Ugc2VjdGlvblxuXHQvLyBJdCBzdGFydHMgd2l0aCBcIiMjIyBTY2VuZTpcIiBvciBcIiMjIyMgQmVhdDpcIiBvciBcIiMjIyBCZWF0OlwiIG9yIGp1c3QgcHJvc2UgdGV4dCBhZnRlciAjIyBCZWF0cyBsaXN0XG5cdGNvbnN0IHNjZW5lSGVhZGVyTWF0Y2ggPSBib2R5Q29udGVudC5tYXRjaCgvXigjIyNcXHMrU2NlbmU6XFxzKi4rKSQvbSk7XG5cdGNvbnN0IGJlYXRIZWFkZXJNYXRjaCA9IGJvZHlDb250ZW50Lm1hdGNoKC9eKCN7Myw0fVxccytCZWF0OlxccyouKykkL20pO1xuXHRcblx0bGV0IHByb3NlU3RhcnRJbmRleCA9IC0xO1xuXHRcblx0aWYgKHNjZW5lSGVhZGVyTWF0Y2gpIHtcblx0XHRwcm9zZVN0YXJ0SW5kZXggPSBib2R5Q29udGVudC5pbmRleE9mKHNjZW5lSGVhZGVyTWF0Y2hbMF0pO1xuXHR9IGVsc2UgaWYgKGJlYXRIZWFkZXJNYXRjaCkge1xuXHRcdHByb3NlU3RhcnRJbmRleCA9IGJvZHlDb250ZW50LmluZGV4T2YoYmVhdEhlYWRlck1hdGNoWzBdKTtcblx0fSBlbHNlIHtcblx0XHQvLyBObyBleHBsaWNpdCBoZWFkZXJzIC0gbG9vayBmb3IgcHJvc2UgYWZ0ZXIgIyMgQmVhdHMgbGlzdFxuXHRcdGNvbnN0IGJlYXRzTGlzdEVuZCA9IGJvZHlDb250ZW50Lm1hdGNoKC8jI1xccytCZWF0c1xccypcXG4rW1xcc1xcU10qPyg/PVxcbiMjI3xcXG4jIyMjfFxcblteI1xcLVxcKz5cXHNdfCQpLyk7XG5cdFx0aWYgKGJlYXRzTGlzdEVuZCkge1xuXHRcdFx0cHJvc2VTdGFydEluZGV4ID0gYm9keUNvbnRlbnQuaW5kZXhPZihiZWF0c0xpc3RFbmRbMF0pICsgYmVhdHNMaXN0RW5kWzBdLmxlbmd0aDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gTm8gIyMgQmVhdHMgc2VjdGlvbiwgc3RhcnQgZnJvbSBiZWdpbm5pbmcgKHNraXAgYW55ICMjIGhlYWRlcnMgdGhhdCBhcmUgbGlzdHMpXG5cdFx0XHRjb25zdCBmaXJzdE5vbkxpc3RDb250ZW50ID0gYm9keUNvbnRlbnQubWF0Y2goLyg/Ol58XFxuKShbXiNcXC1cXCs+XFxzXFxuXS4rKS8pO1xuXHRcdFx0aWYgKGZpcnN0Tm9uTGlzdENvbnRlbnQpIHtcblx0XHRcdFx0cHJvc2VTdGFydEluZGV4ID0gYm9keUNvbnRlbnQuaW5kZXhPZihmaXJzdE5vbkxpc3RDb250ZW50WzFdKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdGlmIChwcm9zZVN0YXJ0SW5kZXggPT09IC0xKSB7XG5cdFx0cmV0dXJuIHsgc2VjdGlvbnM6IFtdIH07XG5cdH1cblx0XG5cdGNvbnN0IHByb3NlQ29udGVudCA9IGJvZHlDb250ZW50LnN1YnN0cmluZyhwcm9zZVN0YXJ0SW5kZXgpO1xuXHRjb25zdCBsaW5lcyA9IHByb3NlQ29udGVudC5zcGxpdCgvXFxuLyk7XG5cblx0bGV0IG9yZGVyID0gMDtcblx0bGV0IGN1cnJlbnRCZWF0OiBQYXJzZWRCZWF0IHwgbnVsbCA9IG51bGw7XG5cblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG5cdFx0Y29uc3QgdHJpbW1lZExpbmUgPSBsaW5lLnRyaW0oKTtcblxuXHRcdC8vIFNraXAgZW1wdHkgbGluZXNcblx0XHRpZiAoIXRyaW1tZWRMaW5lKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBTa2lwIGluZm8gY2FsbG91dHNcblx0XHRpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aChcIj5cIikpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBTY2VuZSBoZWFkZXI6ICMjIyBTY2VuZTogW1tsaW5rfGdvYWxdXSBvciAjIyMgU2NlbmU6IGdvYWxcblx0XHRjb25zdCBzY2VuZU1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL14jIyNcXHMrU2NlbmU6XFxzKiguKykkL2kpO1xuXHRcdGlmIChzY2VuZU1hdGNoKSB7XG5cdFx0XHRjb25zdCBzY2VuZVRleHQgPSBzY2VuZU1hdGNoWzFdLnRyaW0oKTtcblx0XHRcdGNvbnN0IHBhcnNlZFNjZW5lID0gcGFyc2VTY2VuZUhlYWRlclRleHQoc2NlbmVUZXh0KTtcblx0XHRcdHBhcnNlZFNjZW5lLm9yaWdpbmFsT3JkZXIgPSBvcmRlcisrO1xuXHRcdFx0c2VjdGlvbnMucHVzaCh7XG5cdFx0XHRcdHR5cGU6IFwic2NlbmVcIixcblx0XHRcdFx0c2NlbmU6IHBhcnNlZFNjZW5lLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBwYXJzZWRTY2VuZS5vcmlnaW5hbE9yZGVyLFxuXHRcdFx0fSk7XG5cdFx0XHRjdXJyZW50QmVhdCA9IG51bGw7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBmb3IgQmVhdCBoZWFkZXI6ICMjIyBCZWF0OiBvciAjIyMjIEJlYXQ6XG5cdFx0Y29uc3QgYmVhdE1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL14jezMsNH1cXHMrQmVhdDpcXHMqKC4rKSQvaSk7XG5cdFx0aWYgKGJlYXRNYXRjaCkge1xuXHRcdFx0Y29uc3QgYmVhdFRleHQgPSBiZWF0TWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0Y3VycmVudEJlYXQgPSBwYXJzZUJlYXRIZWFkZXJUZXh0KGJlYXRUZXh0KTtcblx0XHRcdGN1cnJlbnRCZWF0Lm9yaWdpbmFsT3JkZXIgPSBvcmRlcisrO1xuXHRcdFx0c2VjdGlvbnMucHVzaCh7XG5cdFx0XHRcdHR5cGU6IFwiYmVhdFwiLFxuXHRcdFx0XHRiZWF0OiBjdXJyZW50QmVhdCxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogY3VycmVudEJlYXQub3JpZ2luYWxPcmRlcixcblx0XHRcdH0pO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gU2tpcCBvdGhlciBoZWFkZXJzIChsaWtlICMjIEJlYXRzIGxpc3QgaGVhZGVyKVxuXHRcdGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKFwiI1wiKSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gU2tpcCBsaXN0IGl0ZW1zICh0aGVzZSBhcmUgYmVhdCBsaXN0cylcblx0XHRpZiAodHJpbW1lZExpbmUubWF0Y2goL15bKy1dXFxzKy8pKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBmb3IgY29udGVudCBibG9jazogW1tsaW5rfGNvbnRlbnRdXSBvciBwbGFpbiB0ZXh0XG5cdFx0Y29uc3QgcHJvc2VNYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eXFxzKlxcW1xcWyhbXlxcfF0rKVxcfChbXlxcXV0rKVxcXVxcXVxccyokLyk7XG5cdFx0aWYgKHByb3NlTWF0Y2gpIHtcblx0XHRcdGNvbnN0IGxpbmtOYW1lID0gcHJvc2VNYXRjaFsxXS50cmltKCk7XG5cdFx0XHRjb25zdCBjb250ZW50ID0gcHJvc2VNYXRjaFsyXS50cmltKCk7XG5cdFx0XHRjb25zdCBwYXJhZ3JhcGg6IFBhcnNlZFBhcmFncmFwaCA9IHtcblx0XHRcdFx0Y29udGVudCxcblx0XHRcdFx0bGlua05hbWUsXG5cdFx0XHRcdG9yaWdpbmFsT3JkZXI6IG9yZGVyKyssXG5cdFx0XHR9O1xuXHRcdFx0c2VjdGlvbnMucHVzaCh7XG5cdFx0XHRcdHR5cGU6IFwicHJvc2VcIixcblx0XHRcdFx0cHJvc2U6IHBhcmFncmFwaCxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogcGFyYWdyYXBoLm9yaWdpbmFsT3JkZXIsXG5cdFx0XHR9KTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIFBsYWluIHRleHQgcGFyYWdyYXBoIChuZXcgY29udGVudCBibG9jayB3aXRob3V0IGxpbmspXG5cdFx0aWYgKHRyaW1tZWRMaW5lLmxlbmd0aCA+IDApIHtcblx0XHRcdGNvbnN0IHBhcmFncmFwaDogUGFyc2VkUGFyYWdyYXBoID0ge1xuXHRcdFx0XHRjb250ZW50OiB0cmltbWVkTGluZSxcblx0XHRcdFx0bGlua05hbWU6IG51bGwsXG5cdFx0XHRcdG9yaWdpbmFsT3JkZXI6IG9yZGVyKyssXG5cdFx0XHR9O1xuXHRcdFx0c2VjdGlvbnMucHVzaCh7XG5cdFx0XHRcdHR5cGU6IFwicHJvc2VcIixcblx0XHRcdFx0cHJvc2U6IHBhcmFncmFwaCxcblx0XHRcdFx0b3JpZ2luYWxPcmRlcjogcGFyYWdyYXBoLm9yaWdpbmFsT3JkZXIsXG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4geyBzZWN0aW9ucyB9O1xufVxuXG4vKipcbiAqIFBhcnNlIGNvbnRlbnQgYmxvY2tzIGZyb20gYmVhdCBjb250ZW50IHVzaW5nIGhpZXJhcmNoaWNhbCBoZWFkZXJzXG4gKiBGb3JtYXQ6XG4gKiBcbiAqICMjIEJlYXQ6IFtbbGlua3xpbnRlbnQgLT4gb3V0Y29tZV1dXG4gKiBwcm9zZSBhdCBiZWF0IGxldmVsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUJlYXRQcm9zZShiZWF0Q29udGVudDogc3RyaW5nKTogSGllcmFyY2hpY2FsUHJvc2Uge1xuXHRjb25zdCBzZWN0aW9uczogUGFyc2VkU2VjdGlvbltdID0gW107XG5cblx0Ly8gRXh0cmFjdCBjb250ZW50IGFmdGVyIGZyb250bWF0dGVyXG5cdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBiZWF0Q29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xuXHRjb25zdCBjb250ZW50U3RhcnQgPSBmcm9udG1hdHRlck1hdGNoID8gZnJvbnRtYXR0ZXJNYXRjaFswXS5sZW5ndGggOiAwO1xuXHRjb25zdCBib2R5Q29udGVudCA9IGJlYXRDb250ZW50LnN1YnN0cmluZyhjb250ZW50U3RhcnQpLnRyaW0oKTtcblxuXHQvLyBGaW5kIHRoZSBoaWVyYXJjaGljYWwgcHJvc2Ugc2VjdGlvbiAtIHN0YXJ0cyB3aXRoIFwiIyMgQmVhdDpcIlxuXHRjb25zdCBiZWF0SGVhZGVyTWF0Y2ggPSBib2R5Q29udGVudC5tYXRjaCgvXigjI1xccytCZWF0OlxccyouKykkL20pO1xuXHRcblx0bGV0IHByb3NlU3RhcnRJbmRleCA9IC0xO1xuXHRpZiAoYmVhdEhlYWRlck1hdGNoKSB7XG5cdFx0cHJvc2VTdGFydEluZGV4ID0gYm9keUNvbnRlbnQuaW5kZXhPZihiZWF0SGVhZGVyTWF0Y2hbMF0pO1xuXHR9XG5cdFxuXHRpZiAocHJvc2VTdGFydEluZGV4ID09PSAtMSkge1xuXHRcdHJldHVybiB7IHNlY3Rpb25zOiBbXSB9O1xuXHR9XG5cdFxuXHRjb25zdCBwcm9zZUNvbnRlbnQgPSBib2R5Q29udGVudC5zdWJzdHJpbmcocHJvc2VTdGFydEluZGV4KTtcblx0Y29uc3QgbGluZXMgPSBwcm9zZUNvbnRlbnQuc3BsaXQoL1xcbi8pO1xuXG5cdGxldCBvcmRlciA9IDA7XG5cblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG5cdFx0Y29uc3QgdHJpbW1lZExpbmUgPSBsaW5lLnRyaW0oKTtcblxuXHRcdC8vIFNraXAgZW1wdHkgbGluZXNcblx0XHRpZiAoIXRyaW1tZWRMaW5lKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBTa2lwIGluZm8gY2FsbG91dHNcblx0XHRpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aChcIj5cIikpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBCZWF0IGhlYWRlcjogIyMgQmVhdDogW1tsaW5rfHRleHRdXSBvciAjIyBCZWF0OiB0ZXh0XG5cdFx0Y29uc3QgYmVhdE1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL14jI1xccytCZWF0OlxccyooLispJC9pKTtcblx0XHRpZiAoYmVhdE1hdGNoKSB7XG5cdFx0XHQvLyBCZWF0IGhlYWRlciAtIGp1c3Qgc2tpcCwgd2UncmUgYWxyZWFkeSBpbiBiZWF0IGNvbnRleHRcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdC8vIFNraXAgb3RoZXIgaGVhZGVyc1xuXHRcdGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKFwiI1wiKSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gU2tpcCBsaXN0IGl0ZW1zXG5cdFx0aWYgKHRyaW1tZWRMaW5lLm1hdGNoKC9eWystXVxccysvKSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIGNvbnRlbnQgYmxvY2s6IFtbbGlua3xjb250ZW50XV0gb3IgcGxhaW4gdGV4dFxuXHRcdGNvbnN0IHByb3NlTWF0Y2ggPSB0cmltbWVkTGluZS5tYXRjaCgvXlxccypcXFtcXFsoW15cXHxdKylcXHwoW15cXF1dKylcXF1cXF1cXHMqJC8pO1xuXHRcdGlmIChwcm9zZU1hdGNoKSB7XG5cdFx0XHRjb25zdCBsaW5rTmFtZSA9IHByb3NlTWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0Y29uc3QgY29udGVudCA9IHByb3NlTWF0Y2hbMl0udHJpbSgpO1xuXHRcdFx0Y29uc3QgcGFyYWdyYXBoOiBQYXJzZWRQYXJhZ3JhcGggPSB7XG5cdFx0XHRcdGNvbnRlbnQsXG5cdFx0XHRcdGxpbmtOYW1lLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBvcmRlcisrLFxuXHRcdFx0fTtcblx0XHRcdHNlY3Rpb25zLnB1c2goe1xuXHRcdFx0XHR0eXBlOiBcInByb3NlXCIsXG5cdFx0XHRcdHByb3NlOiBwYXJhZ3JhcGgsXG5cdFx0XHRcdG9yaWdpbmFsT3JkZXI6IHBhcmFncmFwaC5vcmlnaW5hbE9yZGVyLFxuXHRcdFx0fSk7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBQbGFpbiB0ZXh0IHBhcmFncmFwaCAobmV3IGNvbnRlbnQgYmxvY2sgd2l0aG91dCBsaW5rKVxuXHRcdGlmICh0cmltbWVkTGluZS5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCBwYXJhZ3JhcGg6IFBhcnNlZFBhcmFncmFwaCA9IHtcblx0XHRcdFx0Y29udGVudDogdHJpbW1lZExpbmUsXG5cdFx0XHRcdGxpbmtOYW1lOiBudWxsLFxuXHRcdFx0XHRvcmlnaW5hbE9yZGVyOiBvcmRlcisrLFxuXHRcdFx0fTtcblx0XHRcdHNlY3Rpb25zLnB1c2goe1xuXHRcdFx0XHR0eXBlOiBcInByb3NlXCIsXG5cdFx0XHRcdHByb3NlOiBwYXJhZ3JhcGgsXG5cdFx0XHRcdG9yaWdpbmFsT3JkZXI6IHBhcmFncmFwaC5vcmlnaW5hbE9yZGVyLFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHsgc2VjdGlvbnMgfTtcbn1cblxuIiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IENvbnRlbnRCbG9jayB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuXG5leHBvcnQgdHlwZSBDb25mbGljdFJlc29sdXRpb24gPSBcImxvY2FsXCIgfCBcInJlbW90ZVwiIHwgXCJtYW51YWxcIjtcblxuZXhwb3J0IGludGVyZmFjZSBDb25mbGljdFJlc29sdXRpb25SZXN1bHQge1xuXHRyZXNvbHV0aW9uOiBDb25mbGljdFJlc29sdXRpb247XG5cdG1lcmdlZENvbnRlbnQ/OiBzdHJpbmc7IC8vIE9ubHkgaWYgcmVzb2x1dGlvbiBpcyBcIm1hbnVhbFwiXG59XG5cbmV4cG9ydCBjbGFzcyBDb25mbGljdE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRsb2NhbENvbnRlbnRCbG9jazogQ29udGVudEJsb2NrO1xuXHRyZW1vdGVDb250ZW50QmxvY2s6IENvbnRlbnRCbG9jaztcblx0cmVzb2x1dGlvbjogQ29uZmxpY3RSZXNvbHV0aW9uUmVzdWx0IHwgbnVsbCA9IG51bGw7XG5cdG9uUmVzb2x2ZTogKHJlc3VsdDogQ29uZmxpY3RSZXNvbHV0aW9uUmVzdWx0KSA9PiBQcm9taXNlPHZvaWQ+O1xuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdGFwcDogQXBwLFxuXHRcdGxvY2FsQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2ssXG5cdFx0cmVtb3RlQ29udGVudEJsb2NrOiBDb250ZW50QmxvY2ssXG5cdFx0b25SZXNvbHZlOiAocmVzdWx0OiBDb25mbGljdFJlc29sdXRpb25SZXN1bHQpID0+IFByb21pc2U8dm9pZD5cblx0KSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLmxvY2FsQ29udGVudEJsb2NrID0gbG9jYWxDb250ZW50QmxvY2s7XG5cdFx0dGhpcy5yZW1vdGVDb250ZW50QmxvY2sgPSByZW1vdGVDb250ZW50QmxvY2s7XG5cdFx0dGhpcy5vblJlc29sdmUgPSBvblJlc29sdmU7XG5cdH1cblxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7XG5cdFx0XHR0ZXh0OiBcIkNvbnRlbnQgQmxvY2sgQ29uZmxpY3RcIixcblx0XHR9KTtcblxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0dGV4dDogXCJUaGlzIGNvbnRlbnQgYmxvY2sgaGFzIGJlZW4gbW9kaWZpZWQgYm90aCBsb2NhbGx5IGFuZCByZW1vdGVseS4gQ2hvb3NlIGhvdyB0byByZXNvbHZlIHRoZSBjb25mbGljdDpcIixcblx0XHR9KTtcblxuXHRcdC8vIFNob3cgZGlmZlxuXHRcdGNvbnN0IGRpZmZDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KFwiY29uZmxpY3QtZGlmZi1jb250YWluZXJcIik7XG5cdFx0XG5cdFx0Ly8gTG9jYWwgdmVyc2lvblxuXHRcdGNvbnN0IGxvY2FsRGl2ID0gZGlmZkNvbnRhaW5lci5jcmVhdGVEaXYoXCJjb25mbGljdC1sb2NhbFwiKTtcblx0XHRsb2NhbERpdi5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJMb2NhbCBWZXJzaW9uXCIgfSk7XG5cdFx0Y29uc3QgbG9jYWxDb250ZW50ID0gbG9jYWxEaXYuY3JlYXRlRWwoXCJwcmVcIiwge1xuXHRcdFx0dGV4dDogdGhpcy5sb2NhbENvbnRlbnRCbG9jay5jb250ZW50LFxuXHRcdFx0Y2xzOiBcImNvbmZsaWN0LWNvbnRlbnRcIixcblx0XHR9KTtcblx0XHRsb2NhbENvbnRlbnQuc3R5bGUud2hpdGVTcGFjZSA9IFwicHJlLXdyYXBcIjtcblx0XHRsb2NhbENvbnRlbnQuc3R5bGUubWF4SGVpZ2h0ID0gXCIyMDBweFwiO1xuXHRcdGxvY2FsQ29udGVudC5zdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiO1xuXHRcdGxvY2FsQ29udGVudC5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcilcIjtcblx0XHRsb2NhbENvbnRlbnQuc3R5bGUucGFkZGluZyA9IFwiMTBweFwiO1xuXHRcdGxvY2FsQ29udGVudC5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjRweFwiO1xuXG5cdFx0Ly8gUmVtb3RlIHZlcnNpb25cblx0XHRjb25zdCByZW1vdGVEaXYgPSBkaWZmQ29udGFpbmVyLmNyZWF0ZURpdihcImNvbmZsaWN0LXJlbW90ZVwiKTtcblx0XHRyZW1vdGVEaXYuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiUmVtb3RlIFZlcnNpb25cIiB9KTtcblx0XHRjb25zdCByZW1vdGVDb250ZW50ID0gcmVtb3RlRGl2LmNyZWF0ZUVsKFwicHJlXCIsIHtcblx0XHRcdHRleHQ6IHRoaXMucmVtb3RlQ29udGVudEJsb2NrLmNvbnRlbnQsXG5cdFx0XHRjbHM6IFwiY29uZmxpY3QtY29udGVudFwiLFxuXHRcdH0pO1xuXHRcdHJlbW90ZUNvbnRlbnQuc3R5bGUud2hpdGVTcGFjZSA9IFwicHJlLXdyYXBcIjtcblx0XHRyZW1vdGVDb250ZW50LnN0eWxlLm1heEhlaWdodCA9IFwiMjAwcHhcIjtcblx0XHRyZW1vdGVDb250ZW50LnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XG5cdFx0cmVtb3RlQ29udGVudC5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcilcIjtcblx0XHRyZW1vdGVDb250ZW50LnN0eWxlLnBhZGRpbmcgPSBcIjEwcHhcIjtcblx0XHRyZW1vdGVDb250ZW50LnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNHB4XCI7XG5cblx0XHQvLyBNYW51YWwgbWVyZ2Ugb3B0aW9uXG5cdFx0Y29uc3QgbWFudWFsRGl2ID0gY29udGVudEVsLmNyZWF0ZURpdihcImNvbmZsaWN0LW1hbnVhbFwiKTtcblx0XHRtYW51YWxEaXYuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiTWFudWFsIE1lcmdlIChPcHRpb25hbClcIiB9KTtcblx0XHRjb25zdCBtYW51YWxUZXh0YXJlYSA9IG1hbnVhbERpdi5jcmVhdGVFbChcInRleHRhcmVhXCIsIHtcblx0XHRcdHRleHQ6IHRoaXMubG9jYWxDb250ZW50QmxvY2suY29udGVudCxcblx0XHRcdGNsczogXCJjb25mbGljdC1tYW51YWwtaW5wdXRcIixcblx0XHR9KTtcblx0XHRtYW51YWxUZXh0YXJlYS5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuXHRcdG1hbnVhbFRleHRhcmVhLnN0eWxlLm1pbkhlaWdodCA9IFwiMTUwcHhcIjtcblx0XHRtYW51YWxUZXh0YXJlYS5zdHlsZS5wYWRkaW5nID0gXCIxMHB4XCI7XG5cdFx0bWFudWFsVGV4dGFyZWEuc3R5bGUuYm9yZGVyID0gXCIxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpXCI7XG5cdFx0bWFudWFsVGV4dGFyZWEuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI0cHhcIjtcblx0XHRtYW51YWxUZXh0YXJlYS5zdHlsZS5mb250RmFtaWx5ID0gXCJ2YXIoLS1mb250LW1vbm9zcGFjZSlcIjtcblxuXHRcdC8vIFJlc29sdXRpb24gYnV0dG9uc1xuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoXCJjb25mbGljdC1idXR0b25zXCIpO1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSBcIjIwcHhcIjtcblx0XHRidXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5nYXAgPSBcIjEwcHhcIjtcblxuXHRcdC8vIFVzZSBMb2NhbCBidXR0b25cblx0XHRjb25zdCB1c2VMb2NhbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIlVzZSBMb2NhbFwiLFxuXHRcdFx0Y2xzOiBcIm1vZC1jdGFcIixcblx0XHR9KTtcblx0XHR1c2VMb2NhbEJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dGhpcy5yZXNvbHV0aW9uID0geyByZXNvbHV0aW9uOiBcImxvY2FsXCIgfTtcblx0XHRcdGF3YWl0IHRoaXMub25SZXNvbHZlKHRoaXMucmVzb2x1dGlvbik7XG5cdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0fTtcblxuXHRcdC8vIFVzZSBSZW1vdGUgYnV0dG9uXG5cdFx0Y29uc3QgdXNlUmVtb3RlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiVXNlIFJlbW90ZVwiLFxuXHRcdH0pO1xuXHRcdHVzZVJlbW90ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dGhpcy5yZXNvbHV0aW9uID0geyByZXNvbHV0aW9uOiBcInJlbW90ZVwiIH07XG5cdFx0XHRhd2FpdCB0aGlzLm9uUmVzb2x2ZSh0aGlzLnJlc29sdXRpb24pO1xuXHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdH07XG5cblx0XHQvLyBVc2UgTWFudWFsIGJ1dHRvblxuXHRcdGNvbnN0IHVzZU1hbnVhbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIlVzZSBNYW51YWwgTWVyZ2VcIixcblx0XHRcdGNsczogXCJtb2QtcHJpbWFyeVwiLFxuXHRcdH0pO1xuXHRcdHVzZU1hbnVhbEJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dGhpcy5yZXNvbHV0aW9uID0ge1xuXHRcdFx0XHRyZXNvbHV0aW9uOiBcIm1hbnVhbFwiLFxuXHRcdFx0XHRtZXJnZWRDb250ZW50OiBtYW51YWxUZXh0YXJlYS52YWx1ZSxcblx0XHRcdH07XG5cdFx0XHRhd2FpdCB0aGlzLm9uUmVzb2x2ZSh0aGlzLnJlc29sdXRpb24pO1xuXHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdH07XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cblxuIiwgImltcG9ydCB0eXBlIFN0b3J5RW5naW5lUGx1Z2luIGZyb20gXCIuLi9tYWluXCI7XG5pbXBvcnQgeyBFdmVudFJlZiwgVEFic3RyYWN0RmlsZSwgVEZpbGUsIFRGb2xkZXIgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IFN5bmNFbnRpdHlUYXJnZXQgfSBmcm9tIFwiLi9lbnRpdHlTeW5jVHlwZXNcIjtcblxudHlwZSBTeW5jUmVhc29uID0gXCJibHVyXCIgfCBcImlkbGVcIjtcblxuY29uc3QgSURMRV9ERUxBWV9NUyA9IDYwXzAwMDtcblxuZXhwb3J0IGNsYXNzIEF1dG9TeW5jTWFuYWdlciB7XG5cdHByaXZhdGUgbGVhZkNoYW5nZVJlZj86IEV2ZW50UmVmO1xuXHRwcml2YXRlIGVkaXRvckNoYW5nZVJlZj86IEV2ZW50UmVmO1xuXHRwcml2YXRlIGlkbGVUaW1lb3V0SWQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIGFjdGl2ZUZpbGU6IFRGaWxlIHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgbGFzdEVkaXRUcyA9IDA7XG5cdHByaXZhdGUgZGlydHlGaWxlcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXHRwcml2YXRlIHBlbmRpbmdTeW5jcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbikge1xuXHRcdHRoaXMuYWN0aXZlRmlsZSA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdHRoaXMubGFzdEVkaXRUcyA9IERhdGUubm93KCk7XG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50cygpO1xuXHRcdHRoaXMucmVzZXRJZGxlVGltZXIoKTtcblx0fVxuXG5cdGRpc3Bvc2UoKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMubGVhZkNoYW5nZVJlZikge1xuXHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vZmZyZWYodGhpcy5sZWFmQ2hhbmdlUmVmKTtcblx0XHRcdHRoaXMubGVhZkNoYW5nZVJlZiA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0aWYgKHRoaXMuZWRpdG9yQ2hhbmdlUmVmKSB7XG5cdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9mZnJlZih0aGlzLmVkaXRvckNoYW5nZVJlZik7XG5cdFx0XHR0aGlzLmVkaXRvckNoYW5nZVJlZiA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0aWYgKHRoaXMuaWRsZVRpbWVvdXRJZCAhPT0gbnVsbCkge1xuXHRcdFx0d2luZG93LmNsZWFyVGltZW91dCh0aGlzLmlkbGVUaW1lb3V0SWQpO1xuXHRcdFx0dGhpcy5pZGxlVGltZW91dElkID0gbnVsbDtcblx0XHR9XG5cdFx0dGhpcy5kaXJ0eUZpbGVzLmNsZWFyKCk7XG5cdFx0dGhpcy5wZW5kaW5nU3luY3MuY2xlYXIoKTtcblx0fVxuXG5cdHByaXZhdGUgcmVnaXN0ZXJFdmVudHMoKTogdm9pZCB7XG5cdFx0dGhpcy5sZWFmQ2hhbmdlUmVmID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcblx0XHRcdFwiYWN0aXZlLWxlYWYtY2hhbmdlXCIsXG5cdFx0XHR0aGlzLmhhbmRsZUFjdGl2ZUxlYWZDaGFuZ2Vcblx0XHQpO1xuXHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQodGhpcy5sZWFmQ2hhbmdlUmVmKTtcblxuXHRcdHRoaXMuZWRpdG9yQ2hhbmdlUmVmID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbihcImVkaXRvci1jaGFuZ2VcIiwgKCkgPT4ge1xuXHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdFx0aWYgKCFmaWxlKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5hY3RpdmVGaWxlID0gZmlsZTtcblx0XHRcdHRoaXMubGFzdEVkaXRUcyA9IERhdGUubm93KCk7XG5cdFx0XHR0aGlzLmRpcnR5RmlsZXMuYWRkKGZpbGUucGF0aCk7XG5cdFx0XHR0aGlzLnJlc2V0SWRsZVRpbWVyKCk7XG5cdFx0fSk7XG5cdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudCh0aGlzLmVkaXRvckNoYW5nZVJlZik7XG5cdH1cblxuXHRwcml2YXRlIGhhbmRsZUFjdGl2ZUxlYWZDaGFuZ2UgPSAobGVhZjogdW5rbm93bik6IHZvaWQgPT4ge1xuXHRcdGNvbnN0IHByZXZpb3VzRmlsZSA9IHRoaXMuYWN0aXZlRmlsZTtcblx0XHRjb25zdCBuZXdGaWxlID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cblx0XHRpZiAoXG5cdFx0XHRwcmV2aW91c0ZpbGUgJiZcblx0XHRcdCghbmV3RmlsZSB8fCBwcmV2aW91c0ZpbGUucGF0aCAhPT0gbmV3RmlsZS5wYXRoKSAmJlxuXHRcdFx0dGhpcy5kaXJ0eUZpbGVzLmhhcyhwcmV2aW91c0ZpbGUucGF0aClcblx0XHQpIHtcblx0XHRcdHZvaWQgdGhpcy50cmlnZ2VyU3luY0ZvckZpbGUocHJldmlvdXNGaWxlLCBcImJsdXJcIik7XG5cdFx0fVxuXG5cdFx0dGhpcy5hY3RpdmVGaWxlID0gbmV3RmlsZTtcblx0XHR0aGlzLmxhc3RFZGl0VHMgPSBEYXRlLm5vdygpO1xuXHRcdHRoaXMucmVzZXRJZGxlVGltZXIoKTtcblx0fTtcblxuXHRwcml2YXRlIHJlc2V0SWRsZVRpbWVyKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmlkbGVUaW1lb3V0SWQgIT09IG51bGwpIHtcblx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5pZGxlVGltZW91dElkKTtcblx0XHR9XG5cblx0XHRpZiAoIXRoaXMuYWN0aXZlRmlsZSkge1xuXHRcdFx0dGhpcy5pZGxlVGltZW91dElkID0gbnVsbDtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLmlkbGVUaW1lb3V0SWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hY3RpdmVGaWxlO1xuXHRcdFx0aWYgKCFmaWxlKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgaWRsZUR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHRoaXMubGFzdEVkaXRUcztcblx0XHRcdGlmIChpZGxlRHVyYXRpb24gPj0gSURMRV9ERUxBWV9NUyAmJiB0aGlzLmRpcnR5RmlsZXMuaGFzKGZpbGUucGF0aCkpIHtcblx0XHRcdFx0dm9pZCB0aGlzLnRyaWdnZXJTeW5jRm9yRmlsZShmaWxlLCBcImlkbGVcIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLnJlc2V0SWRsZVRpbWVyKCk7XG5cdFx0XHR9XG5cdFx0fSwgSURMRV9ERUxBWV9NUyk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHRyaWdnZXJTeW5jRm9yRmlsZShmaWxlOiBURmlsZSwgcmVhc29uOiBTeW5jUmVhc29uKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgcGF0aCA9IGZpbGUucGF0aDtcblxuXHRcdGlmICh0aGlzLnBlbmRpbmdTeW5jcy5oYXMocGF0aCkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLnBlbmRpbmdTeW5jcy5hZGQocGF0aCk7XG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgdGFyZ2V0ID0gYXdhaXQgdGhpcy5yZXNvbHZlVGFyZ2V0KGZpbGUpO1xuXHRcdFx0aWYgKCF0YXJnZXQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAodGFyZ2V0LnB1c2hXaG9sZVN0b3J5KSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnN5bmNTZXJ2aWNlLnB1c2hTdG9yeSh0YXJnZXQuZm9sZGVyUGF0aCk7XG5cdFx0XHR9IGVsc2UgaWYgKHRhcmdldC5zeW5jVGFyZ2V0KSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnN5bmNTZXJ2aWNlLnB1c2hTdG9yeSh0YXJnZXQuZm9sZGVyUGF0aCwgdGFyZ2V0LnN5bmNUYXJnZXQpO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmRpcnR5RmlsZXMuZGVsZXRlKHBhdGgpO1xuXHRcdFx0aWYgKHJlYXNvbiA9PT0gXCJpZGxlXCIpIHtcblx0XHRcdFx0dGhpcy5sYXN0RWRpdFRzID0gRGF0ZS5ub3coKTtcblx0XHRcdFx0dGhpcy5yZXNldElkbGVUaW1lcigpO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihgQXV0byBwdXNoIGZhaWxlZCBmb3IgJHtmaWxlLnBhdGh9YCwgZXJyKTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0dGhpcy5wZW5kaW5nU3luY3MuZGVsZXRlKHBhdGgpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcmVzb2x2ZVRhcmdldChmaWxlOiBURmlsZSk6IFByb21pc2U8e1xuXHRcdGZvbGRlclBhdGg6IHN0cmluZztcblx0XHRwdXNoV2hvbGVTdG9yeTogYm9vbGVhbjtcblx0XHRzeW5jVGFyZ2V0PzogU3luY0VudGl0eVRhcmdldDtcblx0fSB8IG51bGw+IHtcblx0XHRjb25zdCBmb2xkZXJQYXRoID0gdGhpcy5maW5kU3RvcnlGb2xkZXJQYXRoKGZpbGUpO1xuXHRcdGlmICghZm9sZGVyUGF0aCkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0aWYgKGZpbGUubmFtZSA9PT0gXCJzdG9yeS5tZFwiKSB7XG5cdFx0XHRyZXR1cm4geyBmb2xkZXJQYXRoLCBwdXNoV2hvbGVTdG9yeTogdHJ1ZSB9O1xuXHRcdH1cblxuXHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQucmVhZChmaWxlKTtcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMucGx1Z2luLmZpbGVNYW5hZ2VyLnBhcnNlRnJvbnRtYXR0ZXIoY29udGVudCk7XG5cblx0XHRjb25zdCBlbnRpdHlJZCA9IGZyb250bWF0dGVyPy5pZDtcblx0XHRpZiAoIWVudGl0eUlkKSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHRjb25zdCBzY2VuZUlkID0gZnJvbnRtYXR0ZXIuc2NlbmVfaWQ7XG5cdFx0Y29uc3QgY2hhcHRlcklkID0gZnJvbnRtYXR0ZXIuY2hhcHRlcl9pZDtcblx0XHRjb25zdCBpc0NvbnRlbnRGaWxlID0gZmlsZS5wYXRoLmluY2x1ZGVzKFwiLzAzLWNvbnRlbnRzL1wiKTtcblx0XHRjb25zdCBpc0NoYXB0ZXJGaWxlID0gZmlsZS5wYXRoLmluY2x1ZGVzKFwiLzAwLWNoYXB0ZXJzL1wiKTtcblx0XHRjb25zdCBpc1NjZW5lRmlsZSA9IGZpbGUucGF0aC5pbmNsdWRlcyhcIi8wMS1zY2VuZXMvXCIpO1xuXG5cdFx0aWYgKGZyb250bWF0dGVyLnN0b3J5X2lkICYmIGZyb250bWF0dGVyLm51bWJlciAmJiBpc0NoYXB0ZXJGaWxlKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRmb2xkZXJQYXRoLFxuXHRcdFx0XHRwdXNoV2hvbGVTdG9yeTogZmFsc2UsXG5cdFx0XHRcdHN5bmNUYXJnZXQ6IHsgdHlwZTogXCJjaGFwdGVyXCIsIGlkOiBlbnRpdHlJZCB9LFxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRpZiAoZnJvbnRtYXR0ZXIuc3RvcnlfaWQgJiYgKGlzU2NlbmVGaWxlIHx8IGNoYXB0ZXJJZCkpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGZvbGRlclBhdGgsXG5cdFx0XHRcdHB1c2hXaG9sZVN0b3J5OiBmYWxzZSxcblx0XHRcdFx0c3luY1RhcmdldDogeyB0eXBlOiBcInNjZW5lXCIsIGlkOiBlbnRpdHlJZCB9LFxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRpZiAoc2NlbmVJZCkge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Zm9sZGVyUGF0aCxcblx0XHRcdFx0cHVzaFdob2xlU3Rvcnk6IGZhbHNlLFxuXHRcdFx0XHRzeW5jVGFyZ2V0OiB7IHR5cGU6IFwic2NlbmVcIiwgaWQ6IHNjZW5lSWQgfSxcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0aWYgKGlzQ29udGVudEZpbGUpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGZvbGRlclBhdGgsXG5cdFx0XHRcdHB1c2hXaG9sZVN0b3J5OiBmYWxzZSxcblx0XHRcdFx0c3luY1RhcmdldDogeyB0eXBlOiBcImNvbnRlbnRcIiwgaWQ6IGVudGl0eUlkIH0sXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0cHJpdmF0ZSBmaW5kU3RvcnlGb2xkZXJQYXRoKGZpbGU6IFRGaWxlKTogc3RyaW5nIHwgbnVsbCB7XG5cdFx0bGV0IGN1cnJlbnQ6IFRGb2xkZXIgfCBudWxsID0gZmlsZS5wYXJlbnQ7XG5cblx0XHR3aGlsZSAoY3VycmVudCkge1xuXHRcdFx0Y29uc3Qgc3RvcnlGaWxlUGF0aCA9IGAke2N1cnJlbnQucGF0aH0vc3RvcnkubWRgO1xuXHRcdFx0Y29uc3QgbWF5YmVTdG9yeUZpbGUgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHN0b3J5RmlsZVBhdGgpO1xuXHRcdFx0aWYgKG1heWJlU3RvcnlGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdFx0cmV0dXJuIGN1cnJlbnQucGF0aDtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgcGFyZW50ID0gY3VycmVudC5wYXJlbnQ7XG5cdFx0XHRpZiAocGFyZW50IGluc3RhbmNlb2YgVEZvbGRlcikge1xuXHRcdFx0XHRjdXJyZW50ID0gcGFyZW50O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y3VycmVudCA9IG51bGw7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cbn1cblxuIiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBOb3RpY2UsIE1vZGFsLCBzZXRJY29uIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgU3RvcnlFbmdpbmVQbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcbmltcG9ydCB7IFN0b3J5LCBDaGFwdGVyLCBTY2VuZSwgQmVhdCwgQ29udGVudEJsb2NrLCBDb250ZW50QW5jaG9yLCBXb3JsZCwgUlBHU3lzdGVtLCBDaGFyYWN0ZXIsIExvY2F0aW9uLCBBcnRpZmFjdCwgV29ybGRFdmVudCwgVHJhaXQsIEFyY2hldHlwZSwgRmFjdGlvbiwgTG9yZSwgVGltZUNvbmZpZywgQ2hhcmFjdGVyVHJhaXQsIENoYXJhY3RlclJlbGF0aW9uc2hpcCwgRXZlbnRDaGFyYWN0ZXIsIFNjZW5lUmVmZXJlbmNlIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBDaGFwdGVyTW9kYWwgfSBmcm9tIFwiLi9tb2RhbHMvQ2hhcHRlck1vZGFsXCI7XG5pbXBvcnQgeyBTY2VuZU1vZGFsIH0gZnJvbSBcIi4vbW9kYWxzL1NjZW5lTW9kYWxcIjtcbmltcG9ydCB7IEJlYXRNb2RhbCB9IGZyb20gXCIuL21vZGFscy9CZWF0TW9kYWxcIjtcbmltcG9ydCB7IENvbnRlbnRCbG9ja01vZGFsIH0gZnJvbSBcIi4vbW9kYWxzL0NvbnRlbnRCbG9ja01vZGFsXCI7XG5pbXBvcnQgeyBDcmVhdGVXb3JsZE1vZGFsIH0gZnJvbSBcIi4vQ3JlYXRlV29ybGRNb2RhbFwiO1xuaW1wb3J0IHsgV29ybGREZXRhaWxzTW9kYWwgfSBmcm9tIFwiLi9Xb3JsZERldGFpbHNNb2RhbFwiO1xuaW1wb3J0IHsgVGltZWxpbmVNb2RhbCB9IGZyb20gXCIuL1RpbWVsaW5lTW9kYWxcIjtcbmltcG9ydCB7IENoYXJhY3RlckRldGFpbHNWaWV3IH0gZnJvbSBcIi4vQ2hhcmFjdGVyRGV0YWlsc1ZpZXdcIjtcblxuZXhwb3J0IGNvbnN0IFNUT1JZX0xJU1RfVklFV19UWVBFID0gXCJzdG9yeS1lbmdpbmUtbGlzdC12aWV3XCI7XG5cblxuXG5cbmV4cG9ydCBjbGFzcyBTdG9yeUxpc3RWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuXHRwbHVnaW46IFN0b3J5RW5naW5lUGx1Z2luO1xuXHRzdG9yaWVzOiBTdG9yeVtdID0gW107XG5cdHdvcmxkczogV29ybGRbXSA9IFtdO1xuXHRycGdTeXN0ZW1zOiBSUEdTeXN0ZW1bXSA9IFtdO1xuXHRsb2FkaW5nOiBib29sZWFuID0gdHJ1ZTtcblx0ZXJyb3I6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXHRjb250ZW50RWwhOiBIVE1MRWxlbWVudDtcblx0aGVhZGVyRWwhOiBIVE1MRWxlbWVudDtcblx0Y3VycmVudFN0b3J5OiBTdG9yeSB8IG51bGwgPSBudWxsO1xuXHRjdXJyZW50V29ybGQ6IFdvcmxkIHwgbnVsbCA9IG51bGw7XG5cdHZpZXdNb2RlOiBcImxpc3RcIiB8IFwiZGV0YWlsc1wiIHwgXCJ3b3JsZC1kZXRhaWxzXCIgfCBcImNoYXJhY3Rlci1kZXRhaWxzXCIgPSBcImxpc3RcIjtcblx0Y3VycmVudFRhYjogXCJjaGFwdGVyc1wiIHwgXCJzY2VuZXNcIiB8IFwiYmVhdHNcIiB8IFwiY29udGVudHNcIiB8IFwiY2hhcmFjdGVyc1wiID0gXCJjaGFwdGVyc1wiO1xuXHRzdG9yeUNoYXJhY3RlcnM6IENoYXJhY3RlcltdID0gW107XG5cdHdvcmxkVGFiOiBcImNoYXJhY3RlcnNcIiB8IFwidHJhaXRzXCIgfCBcImFyY2hldHlwZXNcIiB8IFwiZXZlbnRzXCIgfCBcImxvcmVcIiB8IFwibG9jYXRpb25zXCIgfCBcImZhY3Rpb25zXCIgfCBcImFydGlmYWN0c1wiID0gXCJjaGFyYWN0ZXJzXCI7XG5cdGxpc3RUYWI6IFwic3Rvcmllc1wiIHwgXCJ3b3JsZHNcIiB8IFwicnBnLXN5c3RlbXNcIiA9IFwic3Rvcmllc1wiO1xuXHRleHBhbmRlZFdvcmxkSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXHQvLyBDaGFyYWN0ZXIgRGV0YWlscyBWaWV3XG5cdGNoYXJhY3RlckRldGFpbHNWaWV3OiBDaGFyYWN0ZXJEZXRhaWxzVmlldyB8IG51bGwgPSBudWxsO1xuXHRjaGFwdGVyczogQ2hhcHRlcltdID0gW107XG5cdHNjZW5lczogU2NlbmVbXSA9IFtdO1xuXHRiZWF0czogQmVhdFtdID0gW107XG5cdGNvbnRlbnRCbG9ja3M6IENvbnRlbnRCbG9ja1tdID0gW107XG5cdGNvbnRlbnRCbG9ja1JlZnM6IENvbnRlbnRBbmNob3JbXSA9IFtdO1xuXHRsb2FkaW5nSGllcmFyY2h5OiBib29sZWFuID0gZmFsc2U7XG5cdC8vIFdvcmxkIGVudGl0aWVzXG5cdGNoYXJhY3RlcnM6IENoYXJhY3RlcltdID0gW107XG5cdGxvY2F0aW9uczogTG9jYXRpb25bXSA9IFtdO1xuXHRhcnRpZmFjdHM6IEFydGlmYWN0W10gPSBbXTtcblx0ZXZlbnRzOiBXb3JsZEV2ZW50W10gPSBbXTtcblx0dHJhaXRzOiBUcmFpdFtdID0gW107XG5cdGFyY2hldHlwZXM6IEFyY2hldHlwZVtdID0gW107XG5cdGZhY3Rpb25zOiBGYWN0aW9uW10gPSBbXTtcblx0bG9yZXM6IExvcmVbXSA9IFtdO1xuXHRsb2FkaW5nV29ybGREYXRhOiBib29sZWFuID0gZmFsc2U7XG5cblx0Y29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbikge1xuXHRcdHN1cGVyKGxlYWYpO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0Z2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gU1RPUllfTElTVF9WSUVXX1RZUEU7XG5cdH1cblxuXHRcdGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG5cdFx0aWYgKHRoaXMudmlld01vZGUgPT09IFwiZGV0YWlsc1wiICYmIHRoaXMuY3VycmVudFN0b3J5KSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5jdXJyZW50U3RvcnkudGl0bGU7XG5cdFx0fVxuXHRcdGlmICh0aGlzLnZpZXdNb2RlID09PSBcIndvcmxkLWRldGFpbHNcIiAmJiB0aGlzLmN1cnJlbnRXb3JsZCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuY3VycmVudFdvcmxkLm5hbWU7XG5cdFx0fVxuXHRcdGlmICh0aGlzLnZpZXdNb2RlID09PSBcImNoYXJhY3Rlci1kZXRhaWxzXCIgJiYgdGhpcy5jaGFyYWN0ZXJEZXRhaWxzVmlldykge1xuXHRcdFx0cmV0dXJuIHRoaXMuY2hhcmFjdGVyRGV0YWlsc1ZpZXdbXCJjaGFyYWN0ZXJcIl0ubmFtZTtcblx0XHR9XG5cdFx0cmV0dXJuIFwiU3Rvcmllc1wiO1xuXHR9XG5cblx0Z2V0SWNvbigpOiBzdHJpbmcge1xuXHRcdHJldHVybiBcImJvb2stb3BlblwiO1xuXHR9XG5cblx0YXN5bmMgb25PcGVuKCkge1xuXHRcdGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XG5cdFx0Y29udGFpbmVyLmVtcHR5KCk7XG5cdFx0Y29udGFpbmVyLmFkZENsYXNzKFwic3RvcnktZW5naW5lLXZpZXctY29udGFpbmVyXCIpO1xuXHRcdFxuXHRcdGF3YWl0IHRoaXMucmVuZGVyKGNvbnRhaW5lcik7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU3RvcmllcygpO1xuXHR9XG5cblx0YXN5bmMgb25DbG9zZSgpIHtcblx0XHQvLyBDbGVhbnVwIGlmIG5lZWRlZFxuXHR9XG5cblx0YXN5bmMgcmVuZGVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRjb250YWluZXIuZW1wdHkoKTtcblxuXHRcdC8vIEhlYWRlciAtIHdpbGwgYmUgdXBkYXRlZCBiYXNlZCBvbiB2aWV3IG1vZGVcblx0XHR0aGlzLmhlYWRlckVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdmlldy1oZWFkZXJcIiB9KTtcblx0XHRcblx0XHQvLyBDb250ZW50IGFyZWFcblx0XHR0aGlzLmNvbnRlbnRFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXZpZXctY29udGVudFwiIH0pO1xuXG5cdFx0Ly8gUmVuZGVyIGJhc2VkIG9uIGN1cnJlbnQgbW9kZVxuXHRcdGlmICh0aGlzLnZpZXdNb2RlID09PSBcImRldGFpbHNcIiAmJiB0aGlzLmN1cnJlbnRTdG9yeSkge1xuXHRcdFx0dGhpcy5yZW5kZXJEZXRhaWxzKCk7XG5cdFx0fSBlbHNlIGlmICh0aGlzLnZpZXdNb2RlID09PSBcIndvcmxkLWRldGFpbHNcIiAmJiB0aGlzLmN1cnJlbnRXb3JsZCkge1xuXHRcdFx0dGhpcy5yZW5kZXJXb3JsZERldGFpbHMoKTtcblx0XHR9IGVsc2UgaWYgKHRoaXMudmlld01vZGUgPT09IFwiY2hhcmFjdGVyLWRldGFpbHNcIiAmJiB0aGlzLmNoYXJhY3RlckRldGFpbHNWaWV3KSB7XG5cdFx0XHR0aGlzLmNoYXJhY3RlckRldGFpbHNWaWV3LnJlbmRlcigpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnJlbmRlckxpc3RIZWFkZXIoKTtcblx0XHRcdHRoaXMucmVuZGVyTGlzdENvbnRlbnQoKTtcblx0XHR9XG5cdH1cblxuXHRyZW5kZXJMaXN0SGVhZGVyKCkge1xuXHRcdGlmICghdGhpcy5oZWFkZXJFbCkgcmV0dXJuO1xuXG5cdFx0dGhpcy5oZWFkZXJFbC5lbXB0eSgpO1xuXHRcdHRoaXMuaGVhZGVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiU3Rvcmllc1wiIH0pO1xuXG5cdFx0Ly8gVGFicyBmb3IgbGlzdCB2aWV3XG5cdFx0Y29uc3QgdGFic0NvbnRhaW5lciA9IHRoaXMuaGVhZGVyRWwuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10YWJzXCIgfSk7XG5cdFx0XG5cdFx0Y29uc3Qgc3Rvcmllc1RhYiA9IHRhYnNDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJTdG9yaWVzXCIsXG5cdFx0XHRjbHM6IGBzdG9yeS1lbmdpbmUtdGFiICR7dGhpcy5saXN0VGFiID09PSBcInN0b3JpZXNcIiA/IFwiaXMtYWN0aXZlXCIgOiBcIlwifWAsXG5cdFx0fSk7XG5cdFx0c3Rvcmllc1RhYi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5saXN0VGFiID0gXCJzdG9yaWVzXCI7XG5cdFx0XHR0aGlzLnJlbmRlckxpc3RIZWFkZXIoKTtcblx0XHRcdHRoaXMucmVuZGVyTGlzdENvbnRlbnQoKTtcblx0XHR9O1xuXG5cdFx0Y29uc3Qgd29ybGRzVGFiID0gdGFic0NvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIldvcmxkc1wiLFxuXHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLXRhYiAke3RoaXMubGlzdFRhYiA9PT0gXCJ3b3JsZHNcIiA/IFwiaXMtYWN0aXZlXCIgOiBcIlwifWAsXG5cdFx0fSk7XG5cdFx0d29ybGRzVGFiLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLmxpc3RUYWIgPSBcIndvcmxkc1wiO1xuXHRcdFx0dGhpcy5yZW5kZXJMaXN0SGVhZGVyKCk7XG5cdFx0XHR0aGlzLnJlbmRlckxpc3RDb250ZW50KCk7XG5cdFx0fTtcblxuXHRcdGNvbnN0IHJwZ1N5c3RlbXNUYWIgPSB0YWJzQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiUlBHIFN5c3RlbXNcIixcblx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS10YWIgJHt0aGlzLmxpc3RUYWIgPT09IFwicnBnLXN5c3RlbXNcIiA/IFwiaXMtYWN0aXZlXCIgOiBcIlwifWAsXG5cdFx0fSk7XG5cdFx0cnBnU3lzdGVtc1RhYi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5saXN0VGFiID0gXCJycGctc3lzdGVtc1wiO1xuXHRcdFx0dGhpcy5yZW5kZXJMaXN0SGVhZGVyKCk7XG5cdFx0XHR0aGlzLnJlbmRlckxpc3RDb250ZW50KCk7XG5cdFx0fTtcblxuXHRcdC8vIFNldHRpbmdzIGJ1dHRvbiAoZ2VhciBpY29uKSBpbiBoZWFkZXJcblx0XHRjb25zdCBzZXR0aW5nc0J1dHRvbiA9IHRhYnNDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1zZXR0aW5ncy1idG4gc3RvcnktZW5naW5lLXRhYlwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJPcGVuIFNldHRpbmdzXCIgfVxuXHRcdH0pO1xuXHRcdHNldEljb24oc2V0dGluZ3NCdXR0b24sIFwiZ2VhclwiKTtcblx0XHRzZXR0aW5nc0J1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5wbHVnaW4ub3BlblNldHRpbmdzKCk7XG5cdFx0fTtcblx0fVxuXG5cdHJlbmRlckxpc3RDb250ZW50KCkge1xuXHRcdGlmICghdGhpcy5jb250ZW50RWwpIHJldHVybjtcblxuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cblx0XHRpZiAodGhpcy5sb2FkaW5nKSB7XG5cdFx0XHR0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIkxvYWRpbmcuLi5cIiB9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5lcnJvcikge1xuXHRcdFx0dGhpcy5jb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHtcblx0XHRcdFx0dGV4dDogYEVycm9yOiAke3RoaXMuZXJyb3J9YCxcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lcnJvclwiLFxuXHRcdFx0fSk7XG5cdFx0XHQvLyBTdGlsbCBzaG93IGFjdGlvbnMgYmFyIGV2ZW4gb24gZXJyb3Jcblx0XHRcdHRoaXMucmVuZGVyQWN0aW9uc0JhcigpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHN3aXRjaCAodGhpcy5saXN0VGFiKSB7XG5cdFx0XHRjYXNlIFwic3Rvcmllc1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlclN0b3JpZXNUYWIoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwid29ybGRzXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRzVGFiKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcInJwZy1zeXN0ZW1zXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyUlBHU3lzdGVtc1RhYigpO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHQvLyBBY3Rpb25zIGJhciBiZWxvdyBsaXN0XG5cdFx0dGhpcy5yZW5kZXJBY3Rpb25zQmFyKCk7XG5cdH1cblxuXHRyZW5kZXJBY3Rpb25zQmFyKCkge1xuXHRcdGlmICghdGhpcy5jb250ZW50RWwpIHJldHVybjtcblxuXHRcdGNvbnN0IGFjdGlvbnNCYXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWFjdGlvbnMtYmFyXCIgfSk7XG5cdFx0XG5cdFx0Y29uc3QgcmVmcmVzaEJ1dHRvbiA9IGFjdGlvbnNCYXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJSZWZyZXNoXCIsXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXJlZnJlc2gtYnRuXCIsXG5cdFx0fSk7XG5cdFx0cmVmcmVzaEJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0YXdhaXQgdGhpcy5sb2FkU3RvcmllcygpO1xuXHRcdH07XG5cblx0XHRjb25zdCBzeW5jQWxsQnV0dG9uID0gYWN0aW9uc0Jhci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIlN5bmMgQWxsXCIsXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXN5bmMtYWxsLWJ0blwiLFxuXHRcdH0pO1xuXHRcdHN5bmNBbGxCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MudGVuYW50SWQpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBjb25maWd1cmUgVGVuYW50IElEIGluIHNldHRpbmdzXCIsIDUwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJTeW5jaW5nIGFsbCBzdG9yaWVzLi4uXCIpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zeW5jU2VydmljZS5wdWxsQWxsU3RvcmllcygpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRTdG9yaWVzKCk7IC8vIFJlZnJlc2ggdGhlIGxpc3QgYWZ0ZXIgc3luY1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9XG5cdFx0XHRcdFx0ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIHN5bmMgc3Rvcmllc1wiO1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIENyZWF0ZSBidXR0b24gYmFzZWQgb24gYWN0aXZlIHRhYlxuXHRcdGxldCBjcmVhdGVCdXR0b25UZXh0ID0gXCJDcmVhdGUgU3RvcnlcIjtcblx0XHRsZXQgY3JlYXRlQnV0dG9uQWN0aW9uID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5wbHVnaW4uY3JlYXRlU3RvcnlDb21tYW5kKCk7XG5cdFx0fTtcblxuXHRcdGlmICh0aGlzLmxpc3RUYWIgPT09IFwid29ybGRzXCIpIHtcblx0XHRcdGNyZWF0ZUJ1dHRvblRleHQgPSBcIkNyZWF0ZSBXb3JsZFwiO1xuXHRcdFx0Y3JlYXRlQnV0dG9uQWN0aW9uID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRuZXcgQ3JlYXRlV29ybGRNb2RhbCh0aGlzLmFwcCwgYXN5bmMgKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgZ2VucmU6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBDcmVhdGluZyB3b3JsZCBcIiR7bmFtZX1cIi4uLmApO1xuXHRcdFx0XHRcdFx0Y29uc3QgbmV3V29ybGQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlV29ybGQobmFtZSwgZGVzY3JpcHRpb24sIGdlbnJlKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYFdvcmxkIFwiJHtuYW1lfVwiIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5YCk7XG5cdFx0XHRcdFx0XHQvLyBSZWZyZXNoIHdvcmxkcyBsaXN0XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRTdG9yaWVzKCk7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gY3JlYXRlIHdvcmxkXCI7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KS5vcGVuKCk7XG5cdFx0XHR9O1xuXHRcdH0gZWxzZSBpZiAodGhpcy5saXN0VGFiID09PSBcInJwZy1zeXN0ZW1zXCIpIHtcblx0XHRcdGNyZWF0ZUJ1dHRvblRleHQgPSBcIkNyZWF0ZSBSUEcgU3lzdGVtXCI7XG5cdFx0XHRjcmVhdGVCdXR0b25BY3Rpb24gPSAoKSA9PiB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJDcmVhdGUgUlBHIFN5c3RlbSAtIENvbWluZyBzb29uXCIsIDMwMDApO1xuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRjb25zdCBjcmVhdGVCdXR0b24gPSBhY3Rpb25zQmFyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IGNyZWF0ZUJ1dHRvblRleHQsXG5cdFx0XHRjbHM6IFwibW9kLWN0YSBzdG9yeS1lbmdpbmUtY3JlYXRlLWJ0blwiLFxuXHRcdH0pO1xuXHRcdGNyZWF0ZUJ1dHRvbi5vbmNsaWNrID0gY3JlYXRlQnV0dG9uQWN0aW9uO1xuXHR9XG5cblx0cmVuZGVyRGV0YWlsc0hlYWRlcigpIHtcblx0XHRpZiAoIXRoaXMuaGVhZGVyRWwgfHwgIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cblx0XHR0aGlzLmhlYWRlckVsLmVtcHR5KCk7XG5cdFx0XG5cdFx0Y29uc3QgaGVhZGVyTGVmdCA9IHRoaXMuaGVhZGVyRWwuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1oZWFkZXItbGVmdFwiIH0pO1xuXHRcdFxuXHRcdGNvbnN0IGJhY2tCdXR0b24gPSBoZWFkZXJMZWZ0LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiXHUyMTkwIEJhY2tcIixcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtYmFjay1idG5cIixcblx0XHR9KTtcblx0XHRiYWNrQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLnNob3dMaXN0KCk7XG5cdFx0fTtcblxuXHRcdC8vIFRpdGxlIHdpdGggc3RhdHVzIHBpbGwgYW5kIHZlcnNpb25cblx0XHRjb25zdCB0aXRsZUNvbnRhaW5lciA9IGhlYWRlckxlZnQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZS1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCB0aXRsZVJvdyA9IHRpdGxlQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGUtcm93XCIgfSk7XG5cdFx0XG5cdFx0Y29uc3QgdGl0bGVIMiA9IHRpdGxlUm93LmNyZWF0ZUVsKFwiaDJcIiwgeyBcblx0XHRcdHRleHQ6IHRoaXMuY3VycmVudFN0b3J5LnRpdGxlLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZS1oZWFkZXJcIlxuXHRcdH0pO1xuXG5cdFx0Ly8gU3RhdHVzIHBpbGxcblx0XHRjb25zdCBzdGF0dXNQaWxsID0gdGl0bGVSb3cuY3JlYXRlU3Bhbih7IFxuXHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLXN0YXR1cy1waWxsIHN0b3J5LWVuZ2luZS1zdGF0dXMtJHt0aGlzLmN1cnJlbnRTdG9yeS5zdGF0dXMudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICctJyl9YFxuXHRcdH0pO1xuXHRcdHN0YXR1c1BpbGwudGV4dENvbnRlbnQgPSB0aGlzLmN1cnJlbnRTdG9yeS5zdGF0dXM7XG5cblx0XHQvLyBWZXJzaW9uXG5cdFx0Y29uc3QgdmVyc2lvblNwYW4gPSB0aXRsZVJvdy5jcmVhdGVTcGFuKHsgY2xzOiBcInN0b3J5LWVuZ2luZS12ZXJzaW9uXCIgfSk7XG5cdFx0dmVyc2lvblNwYW4udGV4dENvbnRlbnQgPSBgdi4ke3RoaXMuY3VycmVudFN0b3J5LnZlcnNpb25fbnVtYmVyfWA7XG5cblx0XHQvLyBVVUlEIHdpdGggY29weSBpY29uXG5cdFx0Y29uc3QgdXVpZFJvdyA9IHRpdGxlQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdXVpZC1yb3dcIiB9KTtcblx0XHRjb25zdCB1dWlkU3BhbiA9IHV1aWRSb3cuY3JlYXRlU3Bhbih7IGNsczogXCJzdG9yeS1lbmdpbmUtdXVpZFwiIH0pO1xuXHRcdHV1aWRTcGFuLnRleHRDb250ZW50ID0gdGhpcy5jdXJyZW50U3RvcnkuaWQ7XG5cdFx0XG5cdFx0Y29uc3QgY29weVV1aWRCdXR0b24gPSB1dWlkUm93LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtY29weS11dWlkLWJ0blwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJDb3B5IFVVSURcIiB9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihjb3B5VXVpZEJ1dHRvbiwgXCJjb3B5XCIpO1xuXHRcdGNvcHlVdWlkQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLmNvcHlTdG9yeUlkKCk7XG5cdFx0fTtcblxuXHRcdGNvbnN0IGhlYWRlckFjdGlvbnMgPSB0aGlzLmhlYWRlckVsLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaGVhZGVyLWFjdGlvbnNcIiB9KTtcblx0XHRcblx0XHQvLyBXb3JsZCBidXR0b24gLSBvbmx5IHNob3cgaWYgc3RvcnkgaGFzIGEgd29ybGRcblx0XHRpZiAodGhpcy5jdXJyZW50U3Rvcnkud29ybGRfaWQpIHtcblx0XHRcdGNvbnN0IHdvcmxkID0gdGhpcy53b3JsZHMuZmluZCh3ID0+IHcuaWQgPT09IHRoaXMuY3VycmVudFN0b3J5IS53b3JsZF9pZCk7XG5cdFx0XHRpZiAod29ybGQpIHtcblx0XHRcdFx0Y29uc3Qgd29ybGRCdXR0b24gPSBoZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLWJ0blwiLFxuXHRcdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IGBHbyB0byBXb3JsZDogJHt3b3JsZC5uYW1lfWAgfVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0c2V0SWNvbih3b3JsZEJ1dHRvbiwgXCJnbG9iZVwiKTtcblx0XHRcdFx0d29ybGRCdXR0b24uY3JlYXRlU3Bhbih7IHRleHQ6IFwiV29ybGRcIiB9KTtcblx0XHRcdFx0d29ybGRCdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnNob3dXb3JsZERldGFpbHMod29ybGQpO1xuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHQvLyBDb250ZXh0IG1lbnUgYnV0dG9uIHdpdGggYWN0aW9uc1xuXHRcdGNvbnN0IGNvbnRleHRCdXR0b24gPSBoZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtY29udGV4dC1idG5cIixcblx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiU3RvcnkgQWN0aW9uc1wiIH1cblx0XHR9KTtcblx0XHRzZXRJY29uKGNvbnRleHRCdXR0b24sIFwibW9yZS12ZXJ0aWNhbFwiKTtcblx0XHRcblx0XHQvLyBDcmVhdGUgZHJvcGRvd24gbWVudVxuXHRcdGNvbnN0IGRyb3Bkb3duTWVudSA9IGhlYWRlckFjdGlvbnMuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1kcm9wZG93bi1tZW51XCIgfSk7XG5cdFx0ZHJvcGRvd25NZW51LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0XHRcblx0XHQvLyBFZGl0IHRpdGxlIG9wdGlvblxuXHRcdGNvbnN0IGVkaXRPcHRpb24gPSBkcm9wZG93bk1lbnUuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1kcm9wZG93bi1pdGVtXCIsXG5cdFx0fSk7XG5cdFx0c2V0SWNvbihlZGl0T3B0aW9uLCBcInBlbmNpbFwiKTtcblx0XHRlZGl0T3B0aW9uLmNyZWF0ZVNwYW4oeyB0ZXh0OiBcIkVkaXQgU3RvcnkgTmFtZVwiIH0pO1xuXHRcdGVkaXRPcHRpb24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdGRyb3Bkb3duTWVudS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHR0aGlzLnNob3dFZGl0U3RvcnlOYW1lTW9kYWwoKTtcblx0XHR9O1xuXHRcdFxuXHRcdC8vIENsb25lIG9wdGlvblxuXHRcdGNvbnN0IGNsb25lT3B0aW9uID0gZHJvcGRvd25NZW51LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZHJvcGRvd24taXRlbVwiLFxuXHRcdH0pO1xuXHRcdHNldEljb24oY2xvbmVPcHRpb24sIFwiY29weVwiKTtcblx0XHRjbG9uZU9wdGlvbi5jcmVhdGVTcGFuKHsgdGV4dDogXCJDbG9uZSBTdG9yeVwiIH0pO1xuXHRcdGNsb25lT3B0aW9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRkcm9wZG93bk1lbnUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdFx0YXdhaXQgdGhpcy5jbG9uZVN0b3J5KCk7XG5cdFx0fTtcblx0XHRcblx0XHQvLyBQdWxsIG9wdGlvblxuXHRcdGNvbnN0IHB1bGxPcHRpb24gPSBkcm9wZG93bk1lbnUuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1kcm9wZG93bi1pdGVtXCIsXG5cdFx0fSk7XG5cdFx0c2V0SWNvbihwdWxsT3B0aW9uLCBcImRvd25sb2FkXCIpO1xuXHRcdHB1bGxPcHRpb24uY3JlYXRlU3Bhbih7IHRleHQ6IFwiUHVsbCBmcm9tIFNlcnZpY2VcIiB9KTtcblx0XHRwdWxsT3B0aW9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRkcm9wZG93bk1lbnUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0bmV3IE5vdGljZShgUHVsbGluZyBzdG9yeSBcIiR7dGhpcy5jdXJyZW50U3RvcnkudGl0bGV9XCIuLi5gKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc3luY1NlcnZpY2UucHVsbFN0b3J5KHRoaXMuY3VycmVudFN0b3J5LmlkKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKGBTdG9yeSBwdWxsZWQgc3VjY2Vzc2Z1bGx5IWApO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBwdWxsIHN0b3J5XCI7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yTWVzc2FnZX1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdFxuXHRcdC8vIFB1c2ggb3B0aW9uXG5cdFx0Y29uc3QgcHVzaE9wdGlvbiA9IGRyb3Bkb3duTWVudS5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWRyb3Bkb3duLWl0ZW1cIixcblx0XHR9KTtcblx0XHRzZXRJY29uKHB1c2hPcHRpb24sIFwidXBsb2FkXCIpO1xuXHRcdHB1c2hPcHRpb24uY3JlYXRlU3Bhbih7IHRleHQ6IFwiUHVzaCB0byBTZXJ2aWNlXCIgfSk7XG5cdFx0cHVzaE9wdGlvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0ZHJvcGRvd25NZW51LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0XHRcdGlmICghdGhpcy5jdXJyZW50U3RvcnkpIHJldHVybjtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IGZvbGRlclBhdGggPSB0aGlzLnBsdWdpbi5maWxlTWFuYWdlci5nZXRTdG9yeUZvbGRlclBhdGgodGhpcy5jdXJyZW50U3RvcnkudGl0bGUpO1xuXHRcdFx0XHRuZXcgTm90aWNlKGBQdXNoaW5nIHN0b3J5IFwiJHt0aGlzLmN1cnJlbnRTdG9yeS50aXRsZX1cIi4uLmApO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zeW5jU2VydmljZS5wdXNoU3RvcnkoZm9sZGVyUGF0aCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYFN0b3J5IHB1c2hlZCBzdWNjZXNzZnVsbHkhYCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIHB1c2ggc3RvcnlcIjtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0XG5cdFx0Ly8gVG9nZ2xlIGRyb3Bkb3duXG5cdFx0Y29udGV4dEJ1dHRvbi5vbmNsaWNrID0gKGUpID0+IHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRjb25zdCBpc1Zpc2libGUgPSBkcm9wZG93bk1lbnUuc3R5bGUuZGlzcGxheSAhPT0gXCJub25lXCI7XG5cdFx0XHRkcm9wZG93bk1lbnUuc3R5bGUuZGlzcGxheSA9IGlzVmlzaWJsZSA/IFwibm9uZVwiIDogXCJibG9ja1wiO1xuXHRcdH07XG5cdFx0XG5cdFx0Ly8gQ2xvc2UgZHJvcGRvd24gd2hlbiBjbGlja2luZyBvdXRzaWRlXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcblx0XHRcdGRyb3Bkb3duTWVudS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0fSwgeyBvbmNlOiB0cnVlIH0pO1xuXHR9XG5cblx0cmVuZGVyU3Rvcmllc1RhYigpIHtcblx0XHRpZiAodGhpcy5zdG9yaWVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dGhpcy5jb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBzdG9yaWVzIGZvdW5kLlwiIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IHN0b3JpZXNMaXN0ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1saXN0XCIgfSk7XG5cblx0XHRmb3IgKGNvbnN0IHN0b3J5IG9mIHRoaXMuc3Rvcmllcykge1xuXHRcdFx0dGhpcy5yZW5kZXJTdG9yeUl0ZW0oc3Rvcmllc0xpc3QsIHN0b3J5KTtcblx0XHR9XG5cdH1cblxuXHRyZW5kZXJXb3JsZHNUYWIoKSB7XG5cdFx0aWYgKHRoaXMud29ybGRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dGhpcy5jb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyB3b3JsZHMgZm91bmQuXCIgfSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gR3JvdXAgc3RvcmllcyBieSB3b3JsZFxuXHRcdGNvbnN0IHN0b3JpZXNCeVdvcmxkID0gbmV3IE1hcDxzdHJpbmcgfCBudWxsLCBTdG9yeVtdPigpO1xuXHRcdGZvciAoY29uc3Qgc3Rvcnkgb2YgdGhpcy5zdG9yaWVzKSB7XG5cdFx0XHRjb25zdCB3b3JsZElkID0gc3Rvcnkud29ybGRfaWQgfHwgbnVsbDtcblx0XHRcdGlmICghc3Rvcmllc0J5V29ybGQuaGFzKHdvcmxkSWQpKSB7XG5cdFx0XHRcdHN0b3JpZXNCeVdvcmxkLnNldCh3b3JsZElkLCBbXSk7XG5cdFx0XHR9XG5cdFx0XHRzdG9yaWVzQnlXb3JsZC5nZXQod29ybGRJZCkhLnB1c2goc3RvcnkpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHdvcmxkc0xpc3QgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblxuXHRcdGZvciAoY29uc3Qgd29ybGQgb2YgdGhpcy53b3JsZHMpIHtcblx0XHRcdGNvbnN0IHdvcmxkU3RvcmllcyA9IHN0b3JpZXNCeVdvcmxkLmdldCh3b3JsZC5pZCkgfHwgW107XG5cdFx0XHRjb25zdCB3b3JsZEl0ZW0gPSB3b3JsZHNMaXN0LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtaXRlbVwiIH0pO1xuXHRcdFx0XG5cdFx0XHRjb25zdCB3b3JsZEhlYWRlciA9IHdvcmxkSXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLWl0ZW0taGVhZGVyXCIgfSk7XG5cdFx0XHRjb25zdCB3b3JsZFRpdGxlID0gd29ybGRIZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC10aXRsZVwiIH0pO1xuXHRcdFx0d29ybGRUaXRsZS5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogd29ybGQubmFtZSB9KTtcblx0XHRcdGlmICh3b3JsZC5kZXNjcmlwdGlvbikge1xuXHRcdFx0XHR3b3JsZFRpdGxlLmNyZWF0ZUVsKFwicFwiLCB7IFxuXHRcdFx0XHRcdHRleHQ6IHdvcmxkLmRlc2NyaXB0aW9uLFxuXHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtZGVzY3JpcHRpb25cIlxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gQ2xpY2sgaGFuZGxlciB0byBzaG93IGRldGFpbHMgLSBuYXZpZ2F0ZSB0byBXb3JsZCBWaWV3XG5cdFx0XHR3b3JsZFRpdGxlLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuXHRcdFx0d29ybGRUaXRsZS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnNob3dXb3JsZERldGFpbHMod29ybGQpO1xuXHRcdFx0fTtcblx0XHRcdFxuXHRcdFx0Ly8gQWNjb3JkaW9uIGJ1dHRvblxuXHRcdFx0Y29uc3QgYWNjb3JkaW9uQnV0dG9uID0gd29ybGRIZWFkZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHR0ZXh0OiB3b3JsZFN0b3JpZXMubGVuZ3RoID4gMCA/IGAke3dvcmxkU3Rvcmllcy5sZW5ndGh9IHN0b3J5JHt3b3JsZFN0b3JpZXMubGVuZ3RoICE9PSAxID8gJ3MnIDogJyd9YCA6IFwiTm8gc3Rvcmllc1wiLFxuXHRcdFx0XHRjbHM6IGBzdG9yeS1lbmdpbmUtYWNjb3JkaW9uLWJ0biAke3RoaXMuZXhwYW5kZWRXb3JsZElkID09PSB3b3JsZC5pZCA/IFwiaXMtZXhwYW5kZWRcIiA6IFwiXCJ9YCxcblx0XHRcdH0pO1xuXHRcdFx0YWNjb3JkaW9uQnV0dG9uLm9uY2xpY2sgPSAoZSkgPT4ge1xuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRpZiAodGhpcy5leHBhbmRlZFdvcmxkSWQgPT09IHdvcmxkLmlkKSB7XG5cdFx0XHRcdFx0dGhpcy5leHBhbmRlZFdvcmxkSWQgPSBudWxsO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMuZXhwYW5kZWRXb3JsZElkID0gd29ybGQuaWQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5yZW5kZXJMaXN0Q29udGVudCgpO1xuXHRcdFx0fTtcblxuXHRcdFx0Ly8gU3RvcmllcyBjb250ZW50IChhY2NvcmRpb24pXG5cdFx0XHRpZiAodGhpcy5leHBhbmRlZFdvcmxkSWQgPT09IHdvcmxkLmlkICYmIHdvcmxkU3Rvcmllcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IHN0b3JpZXNDb250ZW50ID0gd29ybGRJdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtd29ybGQtc3Rvcmllcy1jb250ZW50XCIgfSk7XG5cdFx0XHRcdGZvciAoY29uc3Qgc3Rvcnkgb2Ygd29ybGRTdG9yaWVzKSB7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJTdG9yeUl0ZW0oc3Rvcmllc0NvbnRlbnQsIHN0b3J5KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFJlbmRlciBzdG9yaWVzIHdpdGhvdXQgd29ybGRcblx0XHRjb25zdCBzdG9yaWVzV2l0aG91dFdvcmxkID0gc3Rvcmllc0J5V29ybGQuZ2V0KG51bGwpIHx8IFtdO1xuXHRcdGlmIChzdG9yaWVzV2l0aG91dFdvcmxkLmxlbmd0aCA+IDApIHtcblx0XHRcdGNvbnN0IG5vV29ybGRJdGVtID0gd29ybGRzTGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLWl0ZW1cIiB9KTtcblx0XHRcdGNvbnN0IG5vV29ybGRIZWFkZXIgPSBub1dvcmxkSXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLWl0ZW0taGVhZGVyXCIgfSk7XG5cdFx0XHRub1dvcmxkSGVhZGVyLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIk5vIFdvcmxkXCIgfSk7XG5cdFx0XHRcblx0XHRcdGNvbnN0IGFjY29yZGlvbkJ1dHRvbiA9IG5vV29ybGRIZWFkZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHR0ZXh0OiBgJHtzdG9yaWVzV2l0aG91dFdvcmxkLmxlbmd0aH0gc3Rvcnkke3N0b3JpZXNXaXRob3V0V29ybGQubGVuZ3RoICE9PSAxID8gJ3MnIDogJyd9YCxcblx0XHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLWFjY29yZGlvbi1idG4gJHt0aGlzLmV4cGFuZGVkV29ybGRJZCA9PT0gXCJuby13b3JsZFwiID8gXCJpcy1leHBhbmRlZFwiIDogXCJcIn1gLFxuXHRcdFx0fSk7XG5cdFx0XHRhY2NvcmRpb25CdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMuZXhwYW5kZWRXb3JsZElkID09PSBcIm5vLXdvcmxkXCIpIHtcblx0XHRcdFx0XHR0aGlzLmV4cGFuZGVkV29ybGRJZCA9IG51bGw7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5leHBhbmRlZFdvcmxkSWQgPSBcIm5vLXdvcmxkXCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5yZW5kZXJMaXN0Q29udGVudCgpO1xuXHRcdFx0fTtcblxuXHRcdFx0aWYgKHRoaXMuZXhwYW5kZWRXb3JsZElkID09PSBcIm5vLXdvcmxkXCIpIHtcblx0XHRcdFx0Y29uc3Qgc3Rvcmllc0NvbnRlbnQgPSBub1dvcmxkSXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLXN0b3JpZXMtY29udGVudFwiIH0pO1xuXHRcdFx0XHRmb3IgKGNvbnN0IHN0b3J5IG9mIHN0b3JpZXNXaXRob3V0V29ybGQpIHtcblx0XHRcdFx0XHR0aGlzLnJlbmRlclN0b3J5SXRlbShzdG9yaWVzQ29udGVudCwgc3RvcnkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyUlBHU3lzdGVtc1RhYigpIHtcblx0XHRpZiAodGhpcy5ycGdTeXN0ZW1zLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGUgPT09IFwibG9jYWxcIikge1xuXHRcdFx0XHR0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIlJQRyBzeXN0ZW1zIGFyZSBub3QgYXZhaWxhYmxlIGluIGxvY2FsIG1vZGUuXCIgfSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIFJQRyBzeXN0ZW1zIGZvdW5kLlwiIH0pO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IHJwZ1N5c3RlbXNMaXN0ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1saXN0XCIgfSk7XG5cblx0XHRmb3IgKGNvbnN0IHJwZ1N5c3RlbSBvZiB0aGlzLnJwZ1N5c3RlbXMpIHtcblx0XHRcdGNvbnN0IHJwZ1N5c3RlbUl0ZW0gPSBycGdTeXN0ZW1zTGlzdC5jcmVhdGVEaXYoe1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIixcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCB0aXRsZSA9IHJwZ1N5c3RlbUl0ZW0uY3JlYXRlRGl2KHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiLFxuXHRcdFx0XHR0ZXh0OiBycGdTeXN0ZW0ubmFtZSxcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCBtZXRhID0gcnBnU3lzdGVtSXRlbS5jcmVhdGVEaXYoe1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIixcblx0XHRcdH0pO1xuXHRcdFx0aWYgKHJwZ1N5c3RlbS5kZXNjcmlwdGlvbikge1xuXHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7XG5cdFx0XHRcdFx0dGV4dDogcnBnU3lzdGVtLmRlc2NyaXB0aW9uLFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdGlmIChycGdTeXN0ZW0uaXNfYnVpbHRpbikge1xuXHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7XG5cdFx0XHRcdFx0dGV4dDogXCJCdWlsdC1pblwiLFxuXHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtYmFkZ2VcIixcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyU3RvcnlJdGVtKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHN0b3J5OiBTdG9yeSkge1xuXHRcdGNvbnN0IHN0b3J5SXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtXCIsXG5cdFx0fSk7XG5cblx0XHRjb25zdCB0aXRsZSA9IHN0b3J5SXRlbS5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiLFxuXHRcdFx0dGV4dDogc3RvcnkudGl0bGUsXG5cdFx0fSk7XG5cblx0XHRjb25zdCBtZXRhID0gc3RvcnlJdGVtLmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIixcblx0XHR9KTtcblx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7XG5cdFx0XHR0ZXh0OiBgVmVyc2lvbiAke3N0b3J5LnZlcnNpb25fbnVtYmVyfWAsXG5cdFx0fSk7XG5cdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwge1xuXHRcdFx0dGV4dDogYFN0YXR1czogJHtzdG9yeS5zdGF0dXN9YCxcblx0XHR9KTtcblx0XHQvLyBTaG93IHdvcmxkIGlmIGNvbm5lY3RlZFxuXHRcdGlmIChzdG9yeS53b3JsZF9pZCkge1xuXHRcdFx0Y29uc3Qgd29ybGQgPSB0aGlzLndvcmxkcy5maW5kKHcgPT4gdy5pZCA9PT0gc3Rvcnkud29ybGRfaWQpO1xuXHRcdFx0aWYgKHdvcmxkKSB7XG5cdFx0XHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHtcblx0XHRcdFx0XHR0ZXh0OiBgV29ybGQ6ICR7d29ybGQubmFtZX1gLFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRzdG9yeUl0ZW0ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGF3YWl0IHRoaXMuc2hvd1N0b3J5RGV0YWlscyhzdG9yeSk7XG5cdFx0fTtcblx0fVxuXG5cdGFzeW5jIGxvYWRTdG9yaWVzKCkge1xuXHRcdHRoaXMubG9hZGluZyA9IHRydWU7XG5cdFx0dGhpcy5lcnJvciA9IG51bGw7XG5cdFx0dHJ5IHtcblx0XHRcdC8vIE9ubHkgdmFsaWRhdGUgdGVuYW50IElEIGluIHJlbW90ZSBtb2RlXG5cdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZSA9PT0gXCJyZW1vdGVcIiAmJiAhdGhpcy5wbHVnaW4uc2V0dGluZ3MudGVuYW50SWQpIHtcblx0XHRcdFx0dGhpcy5lcnJvciA9IFwiVGVuYW50IElEIG5vdCBjb25maWd1cmVkXCI7XG5cdFx0XHRcdHRoaXMubG9hZGluZyA9IGZhbHNlO1xuXHRcdFx0XHR0aGlzLnJlbmRlckxpc3RDb250ZW50KCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTG9hZCB3b3JsZHMgZmlyc3QgdG8gZ3JvdXAgc3Rvcmllc1xuXHRcdFx0dGhpcy53b3JsZHMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0V29ybGRzKCk7XG5cdFx0XHQvLyBMb2FkIHN0b3JpZXNcblx0XHRcdHRoaXMuc3RvcmllcyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5saXN0U3RvcmllcygpO1xuXHRcdFx0Ly8gTG9hZCBSUEcgc3lzdGVtcyAob3B0aW9uYWwgLSBtYXkgbm90IGJlIGF2YWlsYWJsZSBpbiBsb2NhbCBtb2RlKVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dGhpcy5ycGdTeXN0ZW1zID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldFJQR1N5c3RlbXMoKTtcblx0XHRcdH0gY2F0Y2ggKHJwZ0Vycikge1xuXHRcdFx0XHQvLyBSUEcgc3lzdGVtcyBub3QgYXZhaWxhYmxlIChlLmcuLCBpbiBsb2NhbC9vZmZsaW5lIG1vZGUpIC0gbm90IGEgZmF0YWwgZXJyb3Jcblx0XHRcdFx0Y29uc29sZS53YXJuKFwiUlBHIHN5c3RlbXMgbm90IGF2YWlsYWJsZTpcIiwgcnBnRXJyKTtcblx0XHRcdFx0dGhpcy5ycGdTeXN0ZW1zID0gW107XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHR0aGlzLmVycm9yID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIGxvYWQgc3Rvcmllc1wiO1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIGxvYWRpbmcgc3RvcmllczpcIiwgZXJyKTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0dGhpcy5sb2FkaW5nID0gZmFsc2U7XG5cdFx0XHR0aGlzLnJlbmRlckxpc3RDb250ZW50KCk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gTWV0aG9kIHRvIHJlZnJlc2ggdGhlIHZpZXdcblx0YXN5bmMgcmVmcmVzaCgpIHtcblx0XHRhd2FpdCB0aGlzLmxvYWRTdG9yaWVzKCk7XG5cdH1cblxuXHRhc3luYyBzaG93U3RvcnlEZXRhaWxzKHN0b3J5OiBTdG9yeSkge1xuXHRcdHRoaXMuY3VycmVudFN0b3J5ID0gc3Rvcnk7XG5cdFx0dGhpcy52aWV3TW9kZSA9IFwiZGV0YWlsc1wiO1xuXHRcdHRoaXMuY3VycmVudFRhYiA9IFwiY2hhcHRlcnNcIjtcblx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHR0aGlzLnJlbmRlckRldGFpbHMoKTtcblx0fVxuXG5cdGFzeW5jIGxvYWRIaWVyYXJjaHkoKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXG5cdFx0dGhpcy5sb2FkaW5nSGllcmFyY2h5ID0gdHJ1ZTtcblx0XHR0cnkge1xuXHRcdFx0dGhpcy5jaGFwdGVycyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRDaGFwdGVycyh0aGlzLmN1cnJlbnRTdG9yeS5pZCk7XG5cdFx0XHR0aGlzLnNjZW5lcyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRTY2VuZXNCeVN0b3J5KHRoaXMuY3VycmVudFN0b3J5LmlkKTtcblx0XHRcdHRoaXMuYmVhdHMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0QmVhdHNCeVN0b3J5KHRoaXMuY3VycmVudFN0b3J5LmlkKTtcblx0XHRcdFxuXHRcdFx0Ly8gTG9hZCBjb250ZW50IGJsb2NrcyBhbmQgcmVmZXJlbmNlc1xuXHRcdFx0Y29uc3QgY29udGVudEJsb2Nrc01hcCA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2s+KCk7XG5cdFx0XHR0aGlzLmNvbnRlbnRCbG9ja1JlZnMgPSBbXTtcblx0XHRcdFxuXHRcdFx0Ly8gR2V0IGNvbnRlbnQgYmxvY2tzIGJ5IGNoYXB0ZXJcblx0XHRcdGZvciAoY29uc3QgY2hhcHRlciBvZiB0aGlzLmNoYXB0ZXJzKSB7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJCbG9ja3MgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2NrcyhjaGFwdGVyLmlkKTtcblx0XHRcdFx0Zm9yIChjb25zdCBibG9jayBvZiBjaGFwdGVyQmxvY2tzKSB7XG5cdFx0XHRcdFx0Y29udGVudEJsb2Nrc01hcC5zZXQoYmxvY2suaWQsIGJsb2NrKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBHZXQgY29udGVudCBibG9ja3MgYnkgc2NlbmVcblx0XHRcdGZvciAoY29uc3Qgc2NlbmUgb2YgdGhpcy5zY2VuZXMpIHtcblx0XHRcdFx0Y29uc3Qgc2NlbmVCbG9ja3MgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q29udGVudEJsb2Nrc0J5U2NlbmUoc2NlbmUuaWQpO1xuXHRcdFx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIHNjZW5lQmxvY2tzKSB7XG5cdFx0XHRcdFx0Y29udGVudEJsb2Nrc01hcC5zZXQoYmxvY2suaWQsIGJsb2NrKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBHZXQgY29udGVudCBibG9ja3MgYnkgYmVhdFxuXHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIHRoaXMuYmVhdHMpIHtcblx0XHRcdFx0Y29uc3QgYmVhdEJsb2NrcyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRDb250ZW50QmxvY2tzQnlCZWF0KGJlYXQuaWQpO1xuXHRcdFx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIGJlYXRCbG9ja3MpIHtcblx0XHRcdFx0XHRjb250ZW50QmxvY2tzTWFwLnNldChibG9jay5pZCwgYmxvY2spO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIENvbnZlcnQgbWFwIHRvIGFycmF5XG5cdFx0XHR0aGlzLmNvbnRlbnRCbG9ja3MgPSBBcnJheS5mcm9tKGNvbnRlbnRCbG9ja3NNYXAudmFsdWVzKCkpO1xuXHRcdFx0XG5cdFx0XHQvLyBMb2FkIHJlZmVyZW5jZXMgZm9yIGFsbCBjb250ZW50IGJsb2Nrc1xuXHRcdFx0Zm9yIChjb25zdCBibG9jayBvZiB0aGlzLmNvbnRlbnRCbG9ja3MpIHtcblx0XHRcdFx0Y29uc3QgcmVmcyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRDb250ZW50QW5jaG9ycyhibG9jay5pZCk7XG5cdFx0XHRcdHRoaXMuY29udGVudEJsb2NrUmVmcy5wdXNoKC4uLnJlZnMpO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIGxvYWQgaGllcmFyY2h5XCI7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdHRoaXMubG9hZGluZ0hpZXJhcmNoeSA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdHNob3dMaXN0KCkge1xuXHRcdHRoaXMuY3VycmVudFN0b3J5ID0gbnVsbDtcblx0XHR0aGlzLnZpZXdNb2RlID0gXCJsaXN0XCI7XG5cdFx0dGhpcy5yZW5kZXJMaXN0SGVhZGVyKCk7XG5cdFx0dGhpcy5yZW5kZXJMaXN0Q29udGVudCgpO1xuXHR9XG5cblx0cmVuZGVyRGV0YWlscygpIHtcblx0XHRpZiAoIXRoaXMuY29udGVudEVsIHx8ICF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXG5cdFx0dGhpcy5yZW5kZXJEZXRhaWxzSGVhZGVyKCk7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblxuXHRcdC8vIFRhYnMgc2VjdGlvblxuXHRcdHRoaXMucmVuZGVyVGFicygpO1xuXHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHR9XG5cblx0cmVuZGVyVGFicygpIHtcblx0XHRpZiAoIXRoaXMuY29udGVudEVsKSByZXR1cm47XG5cblx0XHQvLyBSZW1vdmUgZXhpc3RpbmcgdGFicyBpZiBhbnlcblx0XHRjb25zdCBleGlzdGluZ1RhYnMgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKFwiLnN0b3J5LWVuZ2luZS10YWJzXCIpO1xuXHRcdGlmIChleGlzdGluZ1RhYnMpIHtcblx0XHRcdGV4aXN0aW5nVGFicy5yZW1vdmUoKTtcblx0XHR9XG5cblx0XHRjb25zdCB0YWJzQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10YWJzXCIgfSk7XG5cdFx0XG5cdFx0Y29uc3QgY2hhcHRlcnNUYWIgPSB0YWJzQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiQ2hhcHRlcnNcIixcblx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS10YWIgJHt0aGlzLmN1cnJlbnRUYWIgPT09IFwiY2hhcHRlcnNcIiA/IFwiaXMtYWN0aXZlXCIgOiBcIlwifWAsXG5cdFx0fSk7XG5cdFx0Y2hhcHRlcnNUYWIub25jbGljayA9ICgpID0+IHtcblx0XHRcdHRoaXMuY3VycmVudFRhYiA9IFwiY2hhcHRlcnNcIjtcblx0XHRcdHRoaXMucmVuZGVyVGFicygpO1xuXHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0fTtcblxuXHRcdGNvbnN0IHNjZW5lc1RhYiA9IHRhYnNDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJTY2VuZXNcIixcblx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS10YWIgJHt0aGlzLmN1cnJlbnRUYWIgPT09IFwic2NlbmVzXCIgPyBcImlzLWFjdGl2ZVwiIDogXCJcIn1gLFxuXHRcdH0pO1xuXHRcdHNjZW5lc1RhYi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5jdXJyZW50VGFiID0gXCJzY2VuZXNcIjtcblx0XHRcdHRoaXMucmVuZGVyVGFicygpO1xuXHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0fTtcblxuXHRcdGNvbnN0IGJlYXRzVGFiID0gdGFic0NvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIkJlYXRzXCIsXG5cdFx0XHRjbHM6IGBzdG9yeS1lbmdpbmUtdGFiICR7dGhpcy5jdXJyZW50VGFiID09PSBcImJlYXRzXCIgPyBcImlzLWFjdGl2ZVwiIDogXCJcIn1gLFxuXHRcdH0pO1xuXHRcdGJlYXRzVGFiLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLmN1cnJlbnRUYWIgPSBcImJlYXRzXCI7XG5cdFx0XHR0aGlzLnJlbmRlclRhYnMoKTtcblx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdH07XG5cblx0XHRjb25zdCBjb250ZW50c1RhYiA9IHRhYnNDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJDb250ZW50c1wiLFxuXHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLXRhYiAke3RoaXMuY3VycmVudFRhYiA9PT0gXCJjb250ZW50c1wiID8gXCJpcy1hY3RpdmVcIiA6IFwiXCJ9YCxcblx0XHR9KTtcblx0XHRjb250ZW50c1RhYi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5jdXJyZW50VGFiID0gXCJjb250ZW50c1wiO1xuXHRcdFx0dGhpcy5yZW5kZXJUYWJzKCk7XG5cdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHR9O1xuXG5cdFx0Y29uc3QgY2hhcmFjdGVyc1RhYiA9IHRhYnNDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJDaGFyYWN0ZXJzXCIsXG5cdFx0XHRjbHM6IGBzdG9yeS1lbmdpbmUtdGFiICR7dGhpcy5jdXJyZW50VGFiID09PSBcImNoYXJhY3RlcnNcIiA/IFwiaXMtYWN0aXZlXCIgOiBcIlwifWAsXG5cdFx0fSk7XG5cdFx0Y2hhcmFjdGVyc1RhYi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dGhpcy5jdXJyZW50VGFiID0gXCJjaGFyYWN0ZXJzXCI7XG5cdFx0XHR0aGlzLnJlbmRlclRhYnMoKTtcblx0XHRcdGF3YWl0IHRoaXMubG9hZFN0b3J5Q2hhcmFjdGVycygpO1xuXHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0fTtcblx0fVxuXG5cdHJlbmRlclRhYkNvbnRlbnQoKSB7XG5cdFx0aWYgKCF0aGlzLmNvbnRlbnRFbCkgcmV0dXJuO1xuXG5cdFx0Ly8gUmVtb3ZlIGV4aXN0aW5nIHRhYiBjb250ZW50XG5cdFx0Y29uc3QgZXhpc3RpbmdDb250ZW50ID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcihcIi5zdG9yeS1lbmdpbmUtdGFiLWNvbnRlbnRcIik7XG5cdFx0aWYgKGV4aXN0aW5nQ29udGVudCkge1xuXHRcdFx0ZXhpc3RpbmdDb250ZW50LnJlbW92ZSgpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHRhYkNvbnRlbnQgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXRhYi1jb250ZW50XCIgfSk7XG5cblx0XHRpZiAodGhpcy5sb2FkaW5nSGllcmFyY2h5KSB7XG5cdFx0XHR0YWJDb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTG9hZGluZy4uLlwiIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHN3aXRjaCAodGhpcy5jdXJyZW50VGFiKSB7XG5cdFx0XHRjYXNlIFwiY2hhcHRlcnNcIjpcblx0XHRcdFx0dGhpcy5yZW5kZXJDaGFwdGVyc1RhYih0YWJDb250ZW50KTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwic2NlbmVzXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyU2NlbmVzVGFiKHRhYkNvbnRlbnQpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJiZWF0c1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlckJlYXRzVGFiKHRhYkNvbnRlbnQpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJjb250ZW50c1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlckNvbnRlbnRzVGFiKHRhYkNvbnRlbnQpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJjaGFyYWN0ZXJzXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyU3RvcnlDaGFyYWN0ZXJzVGFiKHRhYkNvbnRlbnQpO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cdH1cblxuXHRyZW5kZXJDaGFwdGVyc1RhYihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0Y29udGFpbmVyLmVtcHR5KCk7XG5cblx0XHRjb25zdCBsaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbGlzdFwiIH0pO1xuXHRcdFxuXHRcdGlmICh0aGlzLmNoYXB0ZXJzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0bGlzdC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIGNoYXB0ZXJzIGZvdW5kLlwiIH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRmb3IgKGNvbnN0IGNoYXB0ZXIgb2YgdGhpcy5jaGFwdGVycy5zb3J0KChhLCBiKSA9PiBhLm51bWJlciAtIGIubnVtYmVyKSkge1xuXHRcdFx0XHRjb25zdCBpdGVtID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIiB9KTtcblx0XHRcdFx0aXRlbS5jcmVhdGVEaXYoe1xuXHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIixcblx0XHRcdFx0XHR0ZXh0OiBgQ2hhcHRlciAke2NoYXB0ZXIubnVtYmVyfTogJHtjaGFwdGVyLnRpdGxlfWAsXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRjb25zdCBtZXRhID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRcdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBgU3RhdHVzOiAke2NoYXB0ZXIuc3RhdHVzfWAgfSk7XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBIb3ZlciBhY3Rpb25zXG5cdFx0XHRcdGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbS1hY3Rpb25zXCIgfSk7XG5cdFx0XHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkVkaXRcIiB9KS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdG5ldyBDaGFwdGVyTW9kYWwodGhpcy5hcHAsIGFzeW5jICh1cGRhdGVkQ2hhcHRlcikgPT4ge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUNoYXB0ZXIoY2hhcHRlci5pZCwgdXBkYXRlZENoYXB0ZXIpO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJDaGFwdGVyIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRcdHRocm93IGVycjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCB0aGlzLmNoYXB0ZXJzLCBjaGFwdGVyKS5vcGVuKCk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdC8vIFVwL0Rvd24gYnV0dG9uc1xuXHRcdFx0XHRpZiAoY2hhcHRlci5udW1iZXIgPiAxKSB7XG5cdFx0XHRcdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiVXBcIiB9KS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5tb3ZlQ2hhcHRlclVwKGNoYXB0ZXIpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGNoYXB0ZXIubnVtYmVyIDwgdGhpcy5jaGFwdGVycy5sZW5ndGgpIHtcblx0XHRcdFx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJEb3duXCIgfSkub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMubW92ZUNoYXB0ZXJEb3duKGNoYXB0ZXIpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gQWRkIENvbnRlbnQgYnV0dG9uIChvbmx5IGluIENvbnRlbnRzIHRhYilcblx0XHRcdFx0aWYgKHRoaXMuY3VycmVudFRhYiA9PT0gXCJjb250ZW50c1wiKSB7XG5cdFx0XHRcdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiKyBDb250ZW50XCIgfSkub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuY3JlYXRlQ29udGVudEZvckVudGl0eShcImNoYXB0ZXJcIiwgY2hhcHRlci5pZCwgY2hhcHRlci5pZCk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJEZWxldGVcIiB9KS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdGlmIChjb25maXJtKFwiRGVsZXRlIHRoaXMgY2hhcHRlcj9cIikpIHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5kZWxldGVDaGFwdGVyKGNoYXB0ZXIuaWQpO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJDaGFwdGVyIGRlbGV0ZWRcIik7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEZvb3RlciB3aXRoIENyZWF0ZSBDaGFwdGVyIGJ1dHRvblxuXHRcdGNvbnN0IGZvb3RlciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3QtZm9vdGVyXCIgfSk7XG5cdFx0Y29uc3QgY3JlYXRlQnV0dG9uID0gZm9vdGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiQ3JlYXRlIENoYXB0ZXJcIixcblx0XHRcdGNsczogXCJtb2QtY3RhXCIsXG5cdFx0fSk7XG5cdFx0Y3JlYXRlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cdFx0XHRuZXcgQ2hhcHRlck1vZGFsKHRoaXMuYXBwLCBhc3luYyAoY2hhcHRlcikgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVDaGFwdGVyKHRoaXMuY3VycmVudFN0b3J5IS5pZCwgY2hhcHRlcik7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShcIkNoYXB0ZXIgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIik7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdHRocm93IGVycjtcblx0XHRcdFx0fVxuXHRcdFx0fSwgdGhpcy5jaGFwdGVycykub3BlbigpO1xuXHRcdH07XG5cdH1cblxuXHRyZW5kZXJTY2VuZXNUYWIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xuXG5cdFx0Ly8gR3JvdXAgc2NlbmVzIGJ5IGNoYXB0ZXJcblx0XHRjb25zdCBzY2VuZXNCeUNoYXB0ZXIgPSBuZXcgTWFwPHN0cmluZyB8IG51bGwsIFNjZW5lW10+KCk7XG5cdFx0Zm9yIChjb25zdCBzY2VuZSBvZiB0aGlzLnNjZW5lcykge1xuXHRcdFx0Y29uc3QgY2hhcHRlcklkID0gc2NlbmUuY2hhcHRlcl9pZCB8fCBudWxsO1xuXHRcdFx0aWYgKCFzY2VuZXNCeUNoYXB0ZXIuaGFzKGNoYXB0ZXJJZCkpIHtcblx0XHRcdFx0c2NlbmVzQnlDaGFwdGVyLnNldChjaGFwdGVySWQsIFtdKTtcblx0XHRcdH1cblx0XHRcdHNjZW5lc0J5Q2hhcHRlci5nZXQoY2hhcHRlcklkKSEucHVzaChzY2VuZSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblxuXHRcdC8vIFJlbmRlciBzY2VuZXMgZ3JvdXBlZCBieSBjaGFwdGVyXG5cdFx0Zm9yIChjb25zdCBjaGFwdGVyIG9mIHRoaXMuY2hhcHRlcnMuc29ydCgoYSwgYikgPT4gYS5udW1iZXIgLSBiLm51bWJlcikpIHtcblx0XHRcdGNvbnN0IGNoYXB0ZXJTY2VuZXMgPSBzY2VuZXNCeUNoYXB0ZXIuZ2V0KGNoYXB0ZXIuaWQpIHx8IFtdO1xuXHRcdFx0Y29uc3QgZ3JvdXAgPSBsaXN0LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXBcIiB9KTtcblx0XHRcdGNvbnN0IGdyb3VwSGVhZGVyID0gZ3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1oZWFkZXJcIiB9KTtcblx0XHRcdGdyb3VwSGVhZGVyLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBgQ2hhcHRlciAke2NoYXB0ZXIubnVtYmVyfTogJHtjaGFwdGVyLnRpdGxlfWAgfSk7XG5cblx0XHRcdGNvbnN0IGdyb3VwSXRlbXMgPSBncm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwLWl0ZW1zXCIgfSk7XG5cdFx0XHRpZiAoY2hhcHRlclNjZW5lcy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0Z3JvdXBJdGVtcy5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIHNjZW5lcyBpbiB0aGlzIGNoYXB0ZXIuXCIgfSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIGNoYXB0ZXJTY2VuZXMuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSkpIHtcblx0XHRcdFx0XHR0aGlzLnJlbmRlclNjZW5lSXRlbShncm91cEl0ZW1zLCBzY2VuZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gRm9vdGVyIHdpdGggQWRkIFNjZW5lIGJ1dHRvbiAoYXBwZWFycyBvbiBob3Zlcilcblx0XHRcdGNvbnN0IGdyb3VwRm9vdGVyID0gZ3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1mb290ZXJcIiB9KTtcblx0XHRcdGNvbnN0IGFkZEJ1dHRvbiA9IGdyb3VwRm9vdGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0dGV4dDogXCIrIEFkZCBTY2VuZVwiLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWFkZC1idG5cIixcblx0XHRcdH0pO1xuXHRcdFx0YWRkQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdGlmICghdGhpcy5jdXJyZW50U3RvcnkpIHJldHVybjtcblx0XHRcdFx0bmV3IFNjZW5lTW9kYWwodGhpcy5hcHAsIHRoaXMuY3VycmVudFN0b3J5LmlkLCB0aGlzLmNoYXB0ZXJzLCBhc3luYyAoc2NlbmUpID0+IHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0c2NlbmUuY2hhcHRlcl9pZCA9IGNoYXB0ZXIuaWQ7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlU2NlbmUoc2NlbmUpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJTY2VuZSBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcblx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdHRocm93IGVycjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIHRoaXMuc2NlbmVzLCB1bmRlZmluZWQsIGNoYXB0ZXIuaWQpLm9wZW4oKTtcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gUmVuZGVyIG9ycGhhbiBzY2VuZXMgKG5vIGNoYXB0ZXIpXG5cdFx0Y29uc3Qgb3JwaGFuU2NlbmVzID0gc2NlbmVzQnlDaGFwdGVyLmdldChudWxsKSB8fCBbXTtcblx0XHRpZiAob3JwaGFuU2NlbmVzLmxlbmd0aCA+IDAgfHwgc2NlbmVzQnlDaGFwdGVyLnNpemUgPT09IDApIHtcblx0XHRcdGNvbnN0IGdyb3VwID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwXCIgfSk7XG5cdFx0XHRjb25zdCBncm91cEhlYWRlciA9IGdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtaGVhZGVyXCIgfSk7XG5cdFx0XHRncm91cEhlYWRlci5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJXaXRob3V0IENoYXB0ZXJcIiB9KTtcblxuXHRcdFx0Y29uc3QgZ3JvdXBJdGVtcyA9IGdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtaXRlbXNcIiB9KTtcblx0XHRcdGZvciAoY29uc3Qgc2NlbmUgb2Ygb3JwaGFuU2NlbmVzLnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pKSB7XG5cdFx0XHRcdHRoaXMucmVuZGVyU2NlbmVJdGVtKGdyb3VwSXRlbXMsIHNjZW5lKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRm9vdGVyIHdpdGggQWRkIFNjZW5lIGJ1dHRvbiAoYXBwZWFycyBvbiBob3Zlcilcblx0XHRcdGNvbnN0IGdyb3VwRm9vdGVyID0gZ3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1mb290ZXJcIiB9KTtcblx0XHRcdGNvbnN0IGFkZEJ1dHRvbiA9IGdyb3VwRm9vdGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0dGV4dDogXCIrIEFkZCBTY2VuZVwiLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWFkZC1idG5cIixcblx0XHRcdH0pO1xuXHRcdFx0YWRkQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdGlmICghdGhpcy5jdXJyZW50U3RvcnkpIHJldHVybjtcblx0XHRcdFx0bmV3IFNjZW5lTW9kYWwodGhpcy5hcHAsIHRoaXMuY3VycmVudFN0b3J5LmlkLCB0aGlzLmNoYXB0ZXJzLCBhc3luYyAoc2NlbmUpID0+IHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0c2NlbmUuY2hhcHRlcl9pZCA9IG51bGw7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlU2NlbmUoc2NlbmUpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJTY2VuZSBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcblx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdHRocm93IGVycjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIHRoaXMuc2NlbmVzLCB1bmRlZmluZWQsIG51bGwpLm9wZW4oKTtcblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyU2NlbmVJdGVtKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHNjZW5lOiBTY2VuZSkge1xuXHRcdGNvbnN0IGl0ZW0gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtXCIgfSk7XG5cdFx0aXRlbS5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiLFxuXHRcdFx0dGV4dDogYFNjZW5lICR7c2NlbmUub3JkZXJfbnVtfTogJHtzY2VuZS5nb2FsIHx8IFwiVW50aXRsZWRcIn1gLFxuXHRcdH0pO1xuXHRcdGNvbnN0IG1ldGEgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbWV0YVwiIH0pO1xuXHRcdGlmIChzY2VuZS50aW1lX3JlZikge1xuXHRcdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBgVGltZTogJHtzY2VuZS50aW1lX3JlZn1gIH0pO1xuXHRcdH1cblxuXHRcdGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbS1hY3Rpb25zXCIgfSk7XG5cdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiRWRpdFwiIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cdFx0XHRuZXcgU2NlbmVNb2RhbCh0aGlzLmFwcCwgdGhpcy5jdXJyZW50U3RvcnkuaWQsIHRoaXMuY2hhcHRlcnMsIGFzeW5jICh1cGRhdGVkU2NlbmUpID0+IHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlU2NlbmUoc2NlbmUuaWQsIHVwZGF0ZWRTY2VuZSk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShcIlNjZW5lIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHRcdH1cblx0XHRcdH0sIHRoaXMuc2NlbmVzLCBzY2VuZSkub3BlbigpO1xuXHRcdH07XG5cdFx0Ly8gVXAvRG93biBidXR0b25zXG5cdFx0Y29uc3Qgc2libGluZ1NjZW5lcyA9IHRoaXMuc2NlbmVzLmZpbHRlcihzID0+IHMuY2hhcHRlcl9pZCA9PT0gc2NlbmUuY2hhcHRlcl9pZClcblx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKTtcblx0XHRjb25zdCBtaW5PcmRlck51bSA9IHNpYmxpbmdTY2VuZXMubGVuZ3RoID4gMCA/IE1hdGgubWluKC4uLnNpYmxpbmdTY2VuZXMubWFwKHMgPT4gcy5vcmRlcl9udW0pKSA6IHNjZW5lLm9yZGVyX251bTtcblx0XHRjb25zdCBtYXhPcmRlck51bSA9IHNpYmxpbmdTY2VuZXMubGVuZ3RoID4gMCA/IE1hdGgubWF4KC4uLnNpYmxpbmdTY2VuZXMubWFwKHMgPT4gcy5vcmRlcl9udW0pKSA6IHNjZW5lLm9yZGVyX251bTtcblx0XHRpZiAoc2NlbmUub3JkZXJfbnVtID4gbWluT3JkZXJOdW0pIHtcblx0XHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlVwXCIgfSkub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0dGhpcy5tb3ZlU2NlbmVVcChzY2VuZSk7XG5cdFx0XHR9O1xuXHRcdH1cblx0XHRpZiAoc2NlbmUub3JkZXJfbnVtIDwgbWF4T3JkZXJOdW0pIHtcblx0XHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkRvd25cIiB9KS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHR0aGlzLm1vdmVTY2VuZURvd24oc2NlbmUpO1xuXHRcdFx0fTtcblx0XHR9XG5cdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiUmVsaW5rYXJcIiB9KS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0YXdhaXQgdGhpcy5zaG93TW92ZVNjZW5lTW9kYWwoc2NlbmUpO1xuXHRcdH07XG5cdFx0Ly8gQWRkIENvbnRlbnQgYnV0dG9uIChvbmx5IGluIENvbnRlbnRzIHRhYilcblx0XHRpZiAodGhpcy5jdXJyZW50VGFiID09PSBcImNvbnRlbnRzXCIpIHtcblx0XHRcdGNvbnN0IGNoYXB0ZXJJZCA9IHNjZW5lLmNoYXB0ZXJfaWQgfHwgKHRoaXMuY2hhcHRlcnMubGVuZ3RoID4gMCA/IHRoaXMuY2hhcHRlcnNbMF0uaWQgOiBcIlwiKTtcblx0XHRcdGlmIChjaGFwdGVySWQpIHtcblx0XHRcdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiKyBDb250ZW50XCIgfSkub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLmNyZWF0ZUNvbnRlbnRGb3JFbnRpdHkoXCJzY2VuZVwiLCBzY2VuZS5pZCwgY2hhcHRlcklkKTtcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9XG5cdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiRGVsZXRlXCIgfSkub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmIChjb25maXJtKFwiRGVsZXRlIHRoaXMgc2NlbmU/XCIpKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmRlbGV0ZVNjZW5lKHNjZW5lLmlkKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiU2NlbmUgZGVsZXRlZFwiKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0cmVuZGVyQmVhdHNUYWIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xuXG5cdFx0Ly8gR3JvdXAgYmVhdHMgYnkgc2NlbmVcblx0XHRjb25zdCBiZWF0c0J5U2NlbmUgPSBuZXcgTWFwPHN0cmluZywgQmVhdFtdPigpO1xuXHRcdGZvciAoY29uc3QgYmVhdCBvZiB0aGlzLmJlYXRzKSB7XG5cdFx0XHRpZiAoIWJlYXRzQnlTY2VuZS5oYXMoYmVhdC5zY2VuZV9pZCkpIHtcblx0XHRcdFx0YmVhdHNCeVNjZW5lLnNldChiZWF0LnNjZW5lX2lkLCBbXSk7XG5cdFx0XHR9XG5cdFx0XHRiZWF0c0J5U2NlbmUuZ2V0KGJlYXQuc2NlbmVfaWQpIS5wdXNoKGJlYXQpO1xuXHRcdH1cblxuXHRcdGNvbnN0IGxpc3QgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1saXN0XCIgfSk7XG5cblx0XHQvLyBSZW5kZXIgYmVhdHMgZ3JvdXBlZCBieSBjaGFwdGVyICh3aXRoIHNjZW5lcyBhcyBzdWItZ3JvdXBzKVxuXHRcdGZvciAoY29uc3QgY2hhcHRlciBvZiB0aGlzLmNoYXB0ZXJzLnNvcnQoKGEsIGIpID0+IGEubnVtYmVyIC0gYi5udW1iZXIpKSB7XG5cdFx0XHRjb25zdCBjaGFwdGVyU2NlbmVzID0gdGhpcy5zY2VuZXMuZmlsdGVyKHMgPT4gcy5jaGFwdGVyX2lkID09PSBjaGFwdGVyLmlkKVxuXHRcdFx0XHQuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSk7XG5cdFx0XHRcblx0XHRcdC8vIE9ubHkgY3JlYXRlIGNoYXB0ZXIgZ3JvdXAgaWYgaXQgaGFzIHNjZW5lcyB3aXRoIGJlYXRzIG9yIGVtcHR5IHNjZW5lc1xuXHRcdFx0aWYgKGNoYXB0ZXJTY2VuZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRjb25zdCBjaGFwdGVyR3JvdXAgPSBsaXN0LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtY2hhcHRlci1ncm91cFwiIH0pO1xuXHRcdFx0XHRjb25zdCBjaGFwdGVySGVhZGVyID0gY2hhcHRlckdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtY2hhcHRlci1ncm91cC1oZWFkZXJcIiB9KTtcblx0XHRcdFx0Y2hhcHRlckhlYWRlci5jcmVhdGVFbChcImgyXCIsIHsgXG5cdFx0XHRcdFx0dGV4dDogYENoYXB0ZXIgJHtjaGFwdGVyLm51bWJlcn06ICR7Y2hhcHRlci50aXRsZX1gIFxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRjb25zdCBjaGFwdGVyQ29udGVudCA9IGNoYXB0ZXJHcm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWNoYXB0ZXItZ3JvdXAtY29udGVudFwiIH0pO1xuXG5cdFx0XHRcdC8vIFJlbmRlciBzY2VuZXMgYXMgc3ViLWdyb3VwcyB3aXRoaW4gdGhlIGNoYXB0ZXJcblx0XHRcdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBjaGFwdGVyU2NlbmVzKSB7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVCZWF0cyA9IGJlYXRzQnlTY2VuZS5nZXQoc2NlbmUuaWQpIHx8IFtdO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lR3JvdXAgPSBjaGFwdGVyQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwXCIgfSk7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVIZWFkZXIgPSBzY2VuZUdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtaGVhZGVyXCIgfSk7XG5cdFx0XHRcdFx0c2NlbmVIZWFkZXIuY3JlYXRlRWwoXCJoM1wiLCB7IFxuXHRcdFx0XHRcdFx0dGV4dDogYFNjZW5lICR7c2NlbmUub3JkZXJfbnVtfTogJHtzY2VuZS5nb2FsIHx8IFwiVW50aXRsZWRcIn1gIFxuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVJdGVtcyA9IHNjZW5lR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1pdGVtc1wiIH0pO1xuXHRcdFx0XHRcdGlmIChzY2VuZUJlYXRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0c2NlbmVJdGVtcy5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIGJlYXRzIGluIHRoaXMgc2NlbmUuXCIgfSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgYmVhdCBvZiBzY2VuZUJlYXRzLnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQmVhdEl0ZW0oc2NlbmVJdGVtcywgYmVhdCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gRm9vdGVyIHdpdGggQWRkIEJlYXQgYnV0dG9uIChhcHBlYXJzIG9uIGhvdmVyKVxuXHRcdFx0XHRcdGNvbnN0IHNjZW5lRm9vdGVyID0gc2NlbmVHcm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwLWZvb3RlclwiIH0pO1xuXHRcdFx0XHRcdGNvbnN0IGFkZEJ1dHRvbiA9IHNjZW5lRm9vdGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdFx0XHRcdHRleHQ6IFwiKyBBZGQgQmVhdFwiLFxuXHRcdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1hZGQtYnRuXCIsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YWRkQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cdFx0XHRcdFx0XHRuZXcgQmVhdE1vZGFsKHRoaXMuYXBwLCB0aGlzLmN1cnJlbnRTdG9yeS5pZCwgdGhpcy5zY2VuZXMsIGFzeW5jIChiZWF0KSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0YmVhdC5zY2VuZV9pZCA9IHNjZW5lLmlkO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVCZWF0KGJlYXQpO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJCZWF0IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuXHRcdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0sIHRoaXMuYmVhdHMsIHVuZGVmaW5lZCwgdGhpcy5jaGFwdGVycywgc2NlbmUuaWQpLm9wZW4oKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUmVuZGVyIG9ycGhhbiBiZWF0cyAobm8gc2NlbmUgb3Igc2NlbmUgd2l0aG91dCBjaGFwdGVyKVxuXHRcdGNvbnN0IG9ycGhhbkJlYXRzID0gdGhpcy5iZWF0cy5maWx0ZXIoYiA9PiB7XG5cdFx0XHRjb25zdCBzY2VuZSA9IHRoaXMuc2NlbmVzLmZpbmQocyA9PiBzLmlkID09PSBiLnNjZW5lX2lkKTtcblx0XHRcdHJldHVybiAhc2NlbmUgfHwgIXNjZW5lLmNoYXB0ZXJfaWQ7XG5cdFx0fSk7XG5cdFx0XG5cdFx0Ly8gU2hvdyBcIldpdGhvdXQgQ2hhcHRlclwiIHNlY3Rpb24gaWYgbm8gY2hhcHRlcnMgZXhpc3QgT1IgaWYgdGhlcmUgYXJlIG9ycGhhbiBiZWF0cy9zY2VuZXNcblx0XHRpZiAodGhpcy5jaGFwdGVycy5sZW5ndGggPT09IDAgfHwgb3JwaGFuQmVhdHMubGVuZ3RoID4gMCB8fCB0aGlzLnNjZW5lcy5zb21lKHMgPT4gIXMuY2hhcHRlcl9pZCkpIHtcblx0XHRcdGNvbnN0IG9ycGhhbkdyb3VwID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWNoYXB0ZXItZ3JvdXBcIiB9KTtcblx0XHRcdGNvbnN0IG9ycGhhbkhlYWRlciA9IG9ycGhhbkdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtY2hhcHRlci1ncm91cC1oZWFkZXJcIiB9KTtcblx0XHRcdG9ycGhhbkhlYWRlci5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJXaXRob3V0IENoYXB0ZXJcIiB9KTtcblxuXHRcdFx0Y29uc3Qgb3JwaGFuQ29udGVudCA9IG9ycGhhbkdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtY2hhcHRlci1ncm91cC1jb250ZW50XCIgfSk7XG5cblx0XHRcdC8vIEdyb3VwIG9ycGhhbiBiZWF0cyBieSBzY2VuZVxuXHRcdFx0Y29uc3Qgb3JwaGFuU2NlbmVzID0gdGhpcy5zY2VuZXMuZmlsdGVyKHMgPT4gIXMuY2hhcHRlcl9pZClcblx0XHRcdFx0LnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pO1xuXG5cdFx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIG9ycGhhblNjZW5lcykge1xuXHRcdFx0XHRjb25zdCBzY2VuZUJlYXRzID0gYmVhdHNCeVNjZW5lLmdldChzY2VuZS5pZCkgfHwgW107XG5cdFx0XHRcdGNvbnN0IHNjZW5lR3JvdXAgPSBvcnBoYW5Db250ZW50LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXBcIiB9KTtcblx0XHRcdFx0Y29uc3Qgc2NlbmVIZWFkZXIgPSBzY2VuZUdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtaGVhZGVyXCIgfSk7XG5cdFx0XHRcdHNjZW5lSGVhZGVyLmNyZWF0ZUVsKFwiaDNcIiwgeyBcblx0XHRcdFx0XHR0ZXh0OiBgU2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lLmdvYWwgfHwgXCJVbnRpdGxlZFwifWAgXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGNvbnN0IHNjZW5lSXRlbXMgPSBzY2VuZUdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtaXRlbXNcIiB9KTtcblx0XHRcdFx0aWYgKHNjZW5lQmVhdHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0c2NlbmVJdGVtcy5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIGJlYXRzIGluIHRoaXMgc2NlbmUuXCIgfSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIHNjZW5lQmVhdHMuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSkpIHtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQmVhdEl0ZW0oc2NlbmVJdGVtcywgYmVhdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gRm9vdGVyIHdpdGggQWRkIEJlYXQgYnV0dG9uIChhcHBlYXJzIG9uIGhvdmVyKVxuXHRcdFx0XHRjb25zdCBzY2VuZUZvb3RlciA9IHNjZW5lR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1mb290ZXJcIiB9KTtcblx0XHRcdFx0Y29uc3QgYWRkQnV0dG9uID0gc2NlbmVGb290ZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRcdHRleHQ6IFwiKyBBZGQgQmVhdFwiLFxuXHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtYWRkLWJ0blwiLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YWRkQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXHRcdFx0XHRcdG5ldyBCZWF0TW9kYWwodGhpcy5hcHAsIHRoaXMuY3VycmVudFN0b3J5LmlkLCB0aGlzLnNjZW5lcywgYXN5bmMgKGJlYXQpID0+IHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdGJlYXQuc2NlbmVfaWQgPSBzY2VuZS5pZDtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUJlYXQoYmVhdCk7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkJlYXQgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIik7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0dGhyb3cgZXJyO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIHRoaXMuYmVhdHMsIHVuZGVmaW5lZCwgdGhpcy5jaGFwdGVycywgc2NlbmUuaWQpLm9wZW4oKTtcblx0XHRcdFx0fTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQmVhdHMgd2l0aG91dCB2YWxpZCBzY2VuZVxuXHRcdFx0Y29uc3QgYmVhdHNXaXRob3V0U2NlbmUgPSBvcnBoYW5CZWF0cy5maWx0ZXIoYiA9PiB7XG5cdFx0XHRcdGNvbnN0IHNjZW5lID0gdGhpcy5zY2VuZXMuZmluZChzID0+IHMuaWQgPT09IGIuc2NlbmVfaWQpO1xuXHRcdFx0XHRyZXR1cm4gIXNjZW5lO1xuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdC8vIFNob3cgXCJXaXRob3V0IFNjZW5lXCIgc2VjdGlvbiBpZiB0aGVyZSBhcmUgYmVhdHMgd2l0aG91dCBzY2VuZSBPUiBpZiB0aGVyZSBhcmUgbm8gc2NlbmVzIGJ1dCB0aGVyZSBhcmUgYmVhdHNcblx0XHRcdGlmIChiZWF0c1dpdGhvdXRTY2VuZS5sZW5ndGggPiAwIHx8IChvcnBoYW5TY2VuZXMubGVuZ3RoID09PSAwICYmIHRoaXMuYmVhdHMubGVuZ3RoID4gMCAmJiB0aGlzLnNjZW5lcy5sZW5ndGggPT09IDApKSB7XG5cdFx0XHRcdGNvbnN0IHNjZW5lR3JvdXAgPSBvcnBoYW5Db250ZW50LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXBcIiB9KTtcblx0XHRcdFx0Y29uc3Qgc2NlbmVIZWFkZXIgPSBzY2VuZUdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtaGVhZGVyXCIgfSk7XG5cdFx0XHRcdHNjZW5lSGVhZGVyLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIldpdGhvdXQgU2NlbmVcIiB9KTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnN0IHNjZW5lSXRlbXMgPSBzY2VuZUdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtaXRlbXNcIiB9KTtcblx0XHRcdFx0aWYgKGJlYXRzV2l0aG91dFNjZW5lLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2YgYmVhdHNXaXRob3V0U2NlbmUuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSkpIHtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQmVhdEl0ZW0oc2NlbmVJdGVtcywgYmVhdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNjZW5lSXRlbXMuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBiZWF0cyB3aXRob3V0IHNjZW5lLlwiIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyQmVhdEl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgYmVhdDogQmVhdCkge1xuXHRcdGNvbnN0IGl0ZW0gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtXCIgfSk7XG5cdFx0aXRlbS5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiLFxuXHRcdFx0dGV4dDogYEJlYXQgJHtiZWF0Lm9yZGVyX251bX06ICR7YmVhdC50eXBlfWAsXG5cdFx0fSk7XG5cdFx0Y29uc3QgbWV0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIgfSk7XG5cdFx0aWYgKGJlYXQuaW50ZW50KSB7XG5cdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGBJbnRlbnQ6ICR7YmVhdC5pbnRlbnR9YCB9KTtcblx0XHR9XG5cdFx0aWYgKGJlYXQub3V0Y29tZSkge1xuXHRcdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBgT3V0Y29tZTogJHtiZWF0Lm91dGNvbWV9YCB9KTtcblx0XHR9XG5cblx0XHRjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0tYWN0aW9uc1wiIH0pO1xuXHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkVkaXRcIiB9KS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXHRcdFx0bmV3IEJlYXRNb2RhbCh0aGlzLmFwcCwgdGhpcy5jdXJyZW50U3RvcnkuaWQsIHRoaXMuc2NlbmVzLCBhc3luYyAodXBkYXRlZEJlYXQpID0+IHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlQmVhdChiZWF0LmlkLCB1cGRhdGVkQmVhdCk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShcIkJlYXQgdXBkYXRlZCBzdWNjZXNzZnVsbHlcIik7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdHRocm93IGVycjtcblx0XHRcdFx0fVxuXHRcdFx0fSwgdGhpcy5iZWF0cywgYmVhdCwgdGhpcy5jaGFwdGVycykub3BlbigpO1xuXHRcdH07XG5cdFx0Ly8gVXAvRG93biBidXR0b25zXG5cdFx0Y29uc3Qgc2libGluZ0JlYXRzID0gdGhpcy5iZWF0cy5maWx0ZXIoYiA9PiBiLnNjZW5lX2lkID09PSBiZWF0LnNjZW5lX2lkKVxuXHRcdFx0LnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pO1xuXHRcdGNvbnN0IG1pbk9yZGVyTnVtID0gc2libGluZ0JlYXRzLmxlbmd0aCA+IDAgPyBNYXRoLm1pbiguLi5zaWJsaW5nQmVhdHMubWFwKGIgPT4gYi5vcmRlcl9udW0pKSA6IGJlYXQub3JkZXJfbnVtO1xuXHRcdGNvbnN0IG1heE9yZGVyTnVtID0gc2libGluZ0JlYXRzLmxlbmd0aCA+IDAgPyBNYXRoLm1heCguLi5zaWJsaW5nQmVhdHMubWFwKGIgPT4gYi5vcmRlcl9udW0pKSA6IGJlYXQub3JkZXJfbnVtO1xuXHRcdGlmIChiZWF0Lm9yZGVyX251bSA+IG1pbk9yZGVyTnVtKSB7XG5cdFx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJVcFwiIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMubW92ZUJlYXRVcChiZWF0KTtcblx0XHRcdH07XG5cdFx0fVxuXHRcdGlmIChiZWF0Lm9yZGVyX251bSA8IG1heE9yZGVyTnVtKSB7XG5cdFx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJEb3duXCIgfSkub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0dGhpcy5tb3ZlQmVhdERvd24oYmVhdCk7XG5cdFx0XHR9O1xuXHRcdH1cblx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJSZWxpbmthclwiIH0pLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRhd2FpdCB0aGlzLnNob3dNb3ZlQmVhdE1vZGFsKGJlYXQpO1xuXHRcdH07XG5cdFx0Ly8gQWRkIENvbnRlbnQgYnV0dG9uIChvbmx5IGluIENvbnRlbnRzIHRhYilcblx0XHRpZiAodGhpcy5jdXJyZW50VGFiID09PSBcImNvbnRlbnRzXCIpIHtcblx0XHRcdGNvbnN0IHNjZW5lID0gdGhpcy5zY2VuZXMuZmluZChzID0+IHMuaWQgPT09IGJlYXQuc2NlbmVfaWQpO1xuXHRcdFx0Y29uc3QgY2hhcHRlcklkID0gc2NlbmU/LmNoYXB0ZXJfaWQgfHwgKHRoaXMuY2hhcHRlcnMubGVuZ3RoID4gMCA/IHRoaXMuY2hhcHRlcnNbMF0uaWQgOiBcIlwiKTtcblx0XHRcdGlmIChjaGFwdGVySWQpIHtcblx0XHRcdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiKyBDb250ZW50XCIgfSkub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLmNyZWF0ZUNvbnRlbnRGb3JFbnRpdHkoXCJiZWF0XCIsIGJlYXQuaWQsIGNoYXB0ZXJJZCk7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkRlbGV0ZVwiIH0pLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoY29uZmlybShcIkRlbGV0ZSB0aGlzIGJlYXQ/XCIpKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmRlbGV0ZUJlYXQoYmVhdC5pZCk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShcIkJlYXQgZGVsZXRlZFwiKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0c2hvd0VkaXRTdG9yeU5hbWVNb2RhbCgpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cdFx0XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkVkaXQgU3RvcnkgTmFtZVwiKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCB0aXRsZSA9IHRoaXMuY3VycmVudFN0b3J5LnRpdGxlO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJTdG9yeSBOYW1lICpcIiB9KTtcblx0XHRjb25zdCB0aXRsZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgdmFsdWU6IHRpdGxlIH0pO1xuXHRcdHRpdGxlSW5wdXQub25pbnB1dCA9ICgpID0+IHsgdGl0bGUgPSB0aXRsZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlNhdmVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIXRpdGxlLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiU3RvcnkgbmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgdXBkYXRlZFN0b3J5ID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZVN0b3J5KHRoaXMuY3VycmVudFN0b3J5IS5pZCwgdGl0bGUudHJpbSgpKTtcblx0XHRcdFx0dGhpcy5jdXJyZW50U3RvcnkgPSB1cGRhdGVkU3Rvcnk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFN0b3JpZXMoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJEZXRhaWxzSGVhZGVyKCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJTdG9yeSBuYW1lIHVwZGF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHRcdHRpdGxlSW5wdXQuZm9jdXMoKTtcblx0XHR0aXRsZUlucHV0LnNlbGVjdCgpO1xuXHR9XG5cblx0YXN5bmMgY2xvbmVTdG9yeSgpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5KSByZXR1cm47XG5cblx0XHRjb25zdCBjbG9uZUJ1dHRvbiA9IHRoaXMuaGVhZGVyRWw/LnF1ZXJ5U2VsZWN0b3IoXCIuc3RvcnktZW5naW5lLWNsb25lLWJ0blwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcblx0XHRpZiAoY2xvbmVCdXR0b24pIHtcblx0XHRcdGNsb25lQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdGNsb25lQnV0dG9uLnNldFRleHQoXCJDbG9uaW5nLi4uXCIpO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLnRlbmFudElkKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIlRlbmFudCBJRCBub3QgY29uZmlndXJlZFwiKTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgY2xvbmVkU3RvcnkgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY2xvbmVTdG9yeShcblx0XHRcdFx0dGhpcy5jdXJyZW50U3RvcnkuaWRcblx0XHRcdCk7XG5cdFx0XHRcblx0XHRcdG5ldyBOb3RpY2UoYFN0b3J5IFwiJHtjbG9uZWRTdG9yeS50aXRsZX1cIiBjbG9uZWQgc3VjY2Vzc2Z1bGx5IWApO1xuXHRcdFx0XG5cdFx0XHQvLyBSZWZyZXNoIHRoZSBsaXN0IGFuZCBzaG93IHRoZSBjbG9uZWQgc3Rvcnlcblx0XHRcdGF3YWl0IHRoaXMubG9hZFN0b3JpZXMoKTtcblx0XHRcdGF3YWl0IHRoaXMuc2hvd1N0b3J5RGV0YWlscyhjbG9uZWRTdG9yeSk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJDbG9uZSBmYWlsZWRcIjtcblx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yTWVzc2FnZX1gLCA1MDAwKTtcblx0XHRcdGlmIChjbG9uZUJ1dHRvbikge1xuXHRcdFx0XHRjbG9uZUJ1dHRvbi5zZXRUZXh0KFwiQ2xvbmUgU3RvcnlcIik7XG5cdFx0XHRcdGNsb25lQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0c2hvd0VkaXRXb3JsZE1vZGFsKCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50V29ybGQpIHJldHVybjtcblx0XHRcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiRWRpdCBXb3JsZFwiKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBuYW1lID0gdGhpcy5jdXJyZW50V29ybGQubmFtZTtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSB0aGlzLmN1cnJlbnRXb3JsZC5kZXNjcmlwdGlvbjtcblx0XHRsZXQgZ2VucmUgPSB0aGlzLmN1cnJlbnRXb3JsZC5nZW5yZTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiV29ybGQgTmFtZSAqXCIgfSk7XG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgdmFsdWU6IG5hbWUgfSk7XG5cdFx0bmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkdlbnJlICpcIiB9KTtcblx0XHRjb25zdCBnZW5yZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgdmFsdWU6IGdlbnJlIH0pO1xuXHRcdGdlbnJlSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZ2VucmUgPSBnZW5yZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRkZXNjSW5wdXQudmFsdWUgPSBkZXNjcmlwdGlvbjtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghbmFtZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIldvcmxkIG5hbWUgaXMgcmVxdWlyZWRcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGlmICghZ2VucmUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJHZW5yZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgdXBkYXRlZFdvcmxkID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZVdvcmxkKFxuXHRcdFx0XHRcdHRoaXMuY3VycmVudFdvcmxkIS5pZCxcblx0XHRcdFx0XHRuYW1lLnRyaW0oKSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbi50cmltKCksXG5cdFx0XHRcdFx0Z2VucmUudHJpbSgpXG5cdFx0XHRcdCk7XG5cdFx0XHRcdHRoaXMuY3VycmVudFdvcmxkID0gdXBkYXRlZFdvcmxkO1xuXHRcdFx0XHQvLyBSZWZyZXNoIHdvcmxkIGxpc3QgdG8gdXBkYXRlIGl0IGV2ZXJ5d2hlcmVcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkU3RvcmllcygpO1xuXHRcdFx0XHQvLyBSZS1yZW5kZXIgdGhlIHdvcmxkIGRldGFpbHMgdmlld1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkRGV0YWlscygpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiV29ybGQgdXBkYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0bmFtZUlucHV0LmZvY3VzKCk7XG5cdFx0bmFtZUlucHV0LnNlbGVjdCgpO1xuXHR9XG5cblx0Y29weVN0b3J5SWQoKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXG5cdFx0bmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGhpcy5jdXJyZW50U3RvcnkuaWQpLnRoZW4oKCkgPT4ge1xuXHRcdFx0bmV3IE5vdGljZShcIlVVSUQgY29waWVkIHRvIGNsaXBib2FyZFwiKTtcblx0XHR9KS5jYXRjaCgoKSA9PiB7XG5cdFx0XHQvLyBGYWxsYmFjayBmb3Igb2xkZXIgYnJvd3NlcnNcblx0XHRcdGNvbnN0IHRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuXHRcdFx0dGV4dGFyZWEudmFsdWUgPSB0aGlzLmN1cnJlbnRTdG9yeSEuaWQ7XG5cdFx0XHR0ZXh0YXJlYS5zdHlsZS5wb3NpdGlvbiA9IFwiZml4ZWRcIjtcblx0XHRcdHRleHRhcmVhLnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcblx0XHRcdHRleHRhcmVhLnN0eWxlLmxlZnQgPSBcIi05OTk5cHhcIjtcblx0XHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dGFyZWEpO1xuXHRcdFx0dGV4dGFyZWEuc2VsZWN0KCk7XG5cdFx0XHRcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGRvY3VtZW50LmV4ZWNDb21tYW5kKFwiY29weVwiKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIlVVSUQgY29waWVkIHRvIGNsaXBib2FyZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiRmFpbGVkIHRvIGNvcHkgVVVJRFwiLCAzMDAwKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0ZXh0YXJlYSk7XG5cdFx0fSk7XG5cdH1cblxuXHRhc3luYyBtb3ZlQ2hhcHRlclVwKGNoYXB0ZXI6IENoYXB0ZXIpIHtcblx0XHRjb25zdCBzb3J0ZWRDaGFwdGVycyA9IFsuLi50aGlzLmNoYXB0ZXJzXS5zb3J0KChhLCBiKSA9PiBhLm51bWJlciAtIGIubnVtYmVyKTtcblx0XHRjb25zdCBjdXJyZW50SW5kZXggPSBzb3J0ZWRDaGFwdGVycy5maW5kSW5kZXgoYyA9PiBjLmlkID09PSBjaGFwdGVyLmlkKTtcblx0XHRpZiAoY3VycmVudEluZGV4IDw9IDApIHJldHVybjtcblxuXHRcdGNvbnN0IHByZXZpb3VzQ2hhcHRlciA9IHNvcnRlZENoYXB0ZXJzW2N1cnJlbnRJbmRleCAtIDFdO1xuXHRcdGNvbnN0IHRlbXBOdW1iZXIgPSBjaGFwdGVyLm51bWJlcjtcblx0XHRcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUNoYXB0ZXIoY2hhcHRlci5pZCwgeyBudW1iZXI6IHByZXZpb3VzQ2hhcHRlci5udW1iZXIgfSk7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlQ2hhcHRlcihwcmV2aW91c0NoYXB0ZXIuaWQsIHsgbnVtYmVyOiB0ZW1wTnVtYmVyIH0pO1xuXHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdG5ldyBOb3RpY2UoXCJDaGFwdGVyIG1vdmVkIHVwXCIpO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgbW92ZUNoYXB0ZXJEb3duKGNoYXB0ZXI6IENoYXB0ZXIpIHtcblx0XHRjb25zdCBzb3J0ZWRDaGFwdGVycyA9IFsuLi50aGlzLmNoYXB0ZXJzXS5zb3J0KChhLCBiKSA9PiBhLm51bWJlciAtIGIubnVtYmVyKTtcblx0XHRjb25zdCBjdXJyZW50SW5kZXggPSBzb3J0ZWRDaGFwdGVycy5maW5kSW5kZXgoYyA9PiBjLmlkID09PSBjaGFwdGVyLmlkKTtcblx0XHRpZiAoY3VycmVudEluZGV4IDwgMCB8fCBjdXJyZW50SW5kZXggPj0gc29ydGVkQ2hhcHRlcnMubGVuZ3RoIC0gMSkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgbmV4dENoYXB0ZXIgPSBzb3J0ZWRDaGFwdGVyc1tjdXJyZW50SW5kZXggKyAxXTtcblx0XHRjb25zdCB0ZW1wTnVtYmVyID0gY2hhcHRlci5udW1iZXI7XG5cdFx0XG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVDaGFwdGVyKGNoYXB0ZXIuaWQsIHsgbnVtYmVyOiBuZXh0Q2hhcHRlci5udW1iZXIgfSk7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlQ2hhcHRlcihuZXh0Q2hhcHRlci5pZCwgeyBudW1iZXI6IHRlbXBOdW1iZXIgfSk7XG5cdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0bmV3IE5vdGljZShcIkNoYXB0ZXIgbW92ZWQgZG93blwiKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIG1vdmVTY2VuZVVwKHNjZW5lOiBTY2VuZSkge1xuXHRcdGNvbnN0IHNpYmxpbmdTY2VuZXMgPSB0aGlzLnNjZW5lcy5maWx0ZXIocyA9PiBzLmNoYXB0ZXJfaWQgPT09IHNjZW5lLmNoYXB0ZXJfaWQpXG5cdFx0XHQuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSk7XG5cdFx0Y29uc3QgY3VycmVudEluZGV4ID0gc2libGluZ1NjZW5lcy5maW5kSW5kZXgocyA9PiBzLmlkID09PSBzY2VuZS5pZCk7XG5cdFx0aWYgKGN1cnJlbnRJbmRleCA8PSAwKSByZXR1cm47XG5cblx0XHRjb25zdCBwcmV2aW91c1NjZW5lID0gc2libGluZ1NjZW5lc1tjdXJyZW50SW5kZXggLSAxXTtcblx0XHRjb25zdCB0ZW1wT3JkZXJOdW0gPSBzY2VuZS5vcmRlcl9udW07XG5cdFx0XG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVTY2VuZShzY2VuZS5pZCwgeyBvcmRlcl9udW06IHByZXZpb3VzU2NlbmUub3JkZXJfbnVtIH0pO1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZVNjZW5lKHByZXZpb3VzU2NlbmUuaWQsIHsgb3JkZXJfbnVtOiB0ZW1wT3JkZXJOdW0gfSk7XG5cdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0bmV3IE5vdGljZShcIlNjZW5lIG1vdmVkIHVwXCIpO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgbW92ZVNjZW5lRG93bihzY2VuZTogU2NlbmUpIHtcblx0XHRjb25zdCBzaWJsaW5nU2NlbmVzID0gdGhpcy5zY2VuZXMuZmlsdGVyKHMgPT4gcy5jaGFwdGVyX2lkID09PSBzY2VuZS5jaGFwdGVyX2lkKVxuXHRcdFx0LnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pO1xuXHRcdGNvbnN0IGN1cnJlbnRJbmRleCA9IHNpYmxpbmdTY2VuZXMuZmluZEluZGV4KHMgPT4gcy5pZCA9PT0gc2NlbmUuaWQpO1xuXHRcdGlmIChjdXJyZW50SW5kZXggPCAwIHx8IGN1cnJlbnRJbmRleCA+PSBzaWJsaW5nU2NlbmVzLmxlbmd0aCAtIDEpIHJldHVybjtcblxuXHRcdGNvbnN0IG5leHRTY2VuZSA9IHNpYmxpbmdTY2VuZXNbY3VycmVudEluZGV4ICsgMV07XG5cdFx0Y29uc3QgdGVtcE9yZGVyTnVtID0gc2NlbmUub3JkZXJfbnVtO1xuXHRcdFxuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlU2NlbmUoc2NlbmUuaWQsIHsgb3JkZXJfbnVtOiBuZXh0U2NlbmUub3JkZXJfbnVtIH0pO1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZVNjZW5lKG5leHRTY2VuZS5pZCwgeyBvcmRlcl9udW06IHRlbXBPcmRlck51bSB9KTtcblx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRuZXcgTm90aWNlKFwiU2NlbmUgbW92ZWQgZG93blwiKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIG1vdmVCZWF0VXAoYmVhdDogQmVhdCkge1xuXHRcdGNvbnN0IHNpYmxpbmdCZWF0cyA9IHRoaXMuYmVhdHMuZmlsdGVyKGIgPT4gYi5zY2VuZV9pZCA9PT0gYmVhdC5zY2VuZV9pZClcblx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKTtcblx0XHRjb25zdCBjdXJyZW50SW5kZXggPSBzaWJsaW5nQmVhdHMuZmluZEluZGV4KGIgPT4gYi5pZCA9PT0gYmVhdC5pZCk7XG5cdFx0aWYgKGN1cnJlbnRJbmRleCA8PSAwKSByZXR1cm47XG5cblx0XHRjb25zdCBwcmV2aW91c0JlYXQgPSBzaWJsaW5nQmVhdHNbY3VycmVudEluZGV4IC0gMV07XG5cdFx0Y29uc3QgdGVtcE9yZGVyTnVtID0gYmVhdC5vcmRlcl9udW07XG5cdFx0XG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVCZWF0KGJlYXQuaWQsIHsgb3JkZXJfbnVtOiBwcmV2aW91c0JlYXQub3JkZXJfbnVtIH0pO1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUJlYXQocHJldmlvdXNCZWF0LmlkLCB7IG9yZGVyX251bTogdGVtcE9yZGVyTnVtIH0pO1xuXHRcdFx0YXdhaXQgdGhpcy5sb2FkSGllcmFyY2h5KCk7XG5cdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdG5ldyBOb3RpY2UoXCJCZWF0IG1vdmVkIHVwXCIpO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgbW92ZUJlYXREb3duKGJlYXQ6IEJlYXQpIHtcblx0XHRjb25zdCBzaWJsaW5nQmVhdHMgPSB0aGlzLmJlYXRzLmZpbHRlcihiID0+IGIuc2NlbmVfaWQgPT09IGJlYXQuc2NlbmVfaWQpXG5cdFx0XHQuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSk7XG5cdFx0Y29uc3QgY3VycmVudEluZGV4ID0gc2libGluZ0JlYXRzLmZpbmRJbmRleChiID0+IGIuaWQgPT09IGJlYXQuaWQpO1xuXHRcdGlmIChjdXJyZW50SW5kZXggPCAwIHx8IGN1cnJlbnRJbmRleCA+PSBzaWJsaW5nQmVhdHMubGVuZ3RoIC0gMSkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgbmV4dEJlYXQgPSBzaWJsaW5nQmVhdHNbY3VycmVudEluZGV4ICsgMV07XG5cdFx0Y29uc3QgdGVtcE9yZGVyTnVtID0gYmVhdC5vcmRlcl9udW07XG5cdFx0XG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVCZWF0KGJlYXQuaWQsIHsgb3JkZXJfbnVtOiBuZXh0QmVhdC5vcmRlcl9udW0gfSk7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlQmVhdChuZXh0QmVhdC5pZCwgeyBvcmRlcl9udW06IHRlbXBPcmRlck51bSB9KTtcblx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRuZXcgTm90aWNlKFwiQmVhdCBtb3ZlZCBkb3duXCIpO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgc2hvd01vdmVTY2VuZU1vZGFsKHNjZW5lOiBTY2VuZSkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50U3RvcnkpIHJldHVybjtcblxuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJNb3ZlIFNjZW5lXCIpO1xuXG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IGBNb3ZlIHNjZW5lIFwiJHtzY2VuZS5nb2FsIHx8IGBTY2VuZSAke3NjZW5lLm9yZGVyX251bX1gfVwiIHRvOmAgfSk7XG5cblx0XHRjb25zdCBzZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tb3ZlLXNlbGVjdFwiIH0pO1xuXHRcdGNvbnN0IG5vQ2hhcHRlck9wdGlvbiA9IHNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IFwiTm8gQ2hhcHRlclwiLCB2YWx1ZTogXCJcIiB9KTtcblx0XHRcblx0XHRmb3IgKGNvbnN0IGNoYXB0ZXIgb2YgdGhpcy5jaGFwdGVycy5zb3J0KChhLCBiKSA9PiBhLm51bWJlciAtIGIubnVtYmVyKSkge1xuXHRcdFx0Y29uc3Qgb3B0aW9uID0gc2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHtcblx0XHRcdFx0dGV4dDogYENoYXB0ZXIgJHtjaGFwdGVyLm51bWJlcn06ICR7Y2hhcHRlci50aXRsZX1gLFxuXHRcdFx0XHR2YWx1ZTogY2hhcHRlci5pZCxcblx0XHRcdH0pO1xuXHRcdFx0aWYgKHNjZW5lLmNoYXB0ZXJfaWQgPT09IGNoYXB0ZXIuaWQpIHtcblx0XHRcdFx0b3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIXNjZW5lLmNoYXB0ZXJfaWQpIHtcblx0XHRcdG5vQ2hhcHRlck9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IG1vdmVCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJNb3ZlXCIsXG5cdFx0XHRjbHM6IFwibW9kLWN0YVwiLFxuXHRcdH0pO1xuXHRcdG1vdmVCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IHNlbGVjdGVkQ2hhcHRlcklkID0gc2VsZWN0LnZhbHVlIHx8IG51bGw7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQubW92ZVNjZW5lKHNjZW5lLmlkLCBzZWxlY3RlZENoYXB0ZXJJZCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIlNjZW5lIG1vdmVkIHN1Y2Nlc3NmdWxseVwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gbW92ZSBzY2VuZVwiO1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSk7XG5cdFx0Y2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0YXN5bmMgc2hvd01vdmVCZWF0TW9kYWwoYmVhdDogQmVhdCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50U3RvcnkpIHJldHVybjtcblxuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJNb3ZlIEJlYXRcIik7XG5cblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogYE1vdmUgYmVhdCBcIiR7YmVhdC50eXBlfVwiIHRvOmAgfSk7XG5cblx0XHRjb25zdCBzZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tb3ZlLXNlbGVjdFwiIH0pO1xuXHRcdFxuXHRcdC8vIEdyb3VwIHNjZW5lcyBieSBjaGFwdGVyIGZvciBiZXR0ZXIgVVhcblx0XHRmb3IgKGNvbnN0IGNoYXB0ZXIgb2YgdGhpcy5jaGFwdGVycy5zb3J0KChhLCBiKSA9PiBhLm51bWJlciAtIGIubnVtYmVyKSkge1xuXHRcdFx0Y29uc3QgY2hhcHRlclNjZW5lcyA9IHRoaXMuc2NlbmVzXG5cdFx0XHRcdC5maWx0ZXIocyA9PiBzLmNoYXB0ZXJfaWQgPT09IGNoYXB0ZXIuaWQpXG5cdFx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKTtcblx0XHRcdFxuXHRcdFx0aWYgKGNoYXB0ZXJTY2VuZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRjb25zdCBvcHRncm91cCA9IHNlbGVjdC5jcmVhdGVFbChcIm9wdGdyb3VwXCIpO1xuXHRcdFx0XHRvcHRncm91cC5sYWJlbCA9IGBDaGFwdGVyICR7Y2hhcHRlci5udW1iZXJ9OiAke2NoYXB0ZXIudGl0bGV9YDtcblx0XHRcdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBjaGFwdGVyU2NlbmVzKSB7XG5cdFx0XHRcdFx0Y29uc3Qgb3B0aW9uID0gb3B0Z3JvdXAuY3JlYXRlRWwoXCJvcHRpb25cIiwge1xuXHRcdFx0XHRcdFx0dGV4dDogYFNjZW5lICR7c2NlbmUub3JkZXJfbnVtfTogJHtzY2VuZS5nb2FsIHx8IFwiVW50aXRsZWRcIn1gLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHNjZW5lLmlkLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmIChiZWF0LnNjZW5lX2lkID09PSBzY2VuZS5pZCkge1xuXHRcdFx0XHRcdFx0b3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBBZGQgb3JwaGFuIHNjZW5lc1xuXHRcdGNvbnN0IG9ycGhhblNjZW5lcyA9IHRoaXMuc2NlbmVzLmZpbHRlcihzID0+ICFzLmNoYXB0ZXJfaWQpO1xuXHRcdGlmIChvcnBoYW5TY2VuZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29uc3Qgb3B0Z3JvdXAgPSBzZWxlY3QuY3JlYXRlRWwoXCJvcHRncm91cFwiKTtcblx0XHRcdG9wdGdyb3VwLmxhYmVsID0gXCJObyBDaGFwdGVyXCI7XG5cdFx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIG9ycGhhblNjZW5lcy5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKSkge1xuXHRcdFx0XHRjb25zdCBvcHRpb24gPSBvcHRncm91cC5jcmVhdGVFbChcIm9wdGlvblwiLCB7XG5cdFx0XHRcdFx0dGV4dDogYFNjZW5lICR7c2NlbmUub3JkZXJfbnVtfTogJHtzY2VuZS5nb2FsIHx8IFwiVW50aXRsZWRcIn1gLFxuXHRcdFx0XHRcdHZhbHVlOiBzY2VuZS5pZCxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmIChiZWF0LnNjZW5lX2lkID09PSBzY2VuZS5pZCkge1xuXHRcdFx0XHRcdG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3QgbW92ZUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIk1vdmVcIixcblx0XHRcdGNsczogXCJtb2QtY3RhXCIsXG5cdFx0fSk7XG5cdFx0bW92ZUJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0Y29uc3Qgc2VsZWN0ZWRTY2VuZUlkID0gc2VsZWN0LnZhbHVlO1xuXHRcdFx0aWYgKCFzZWxlY3RlZFNjZW5lSWQpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBzZWxlY3QgYSBzY2VuZVwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50Lm1vdmVCZWF0KGJlYXQuaWQsIHNlbGVjdGVkU2NlbmVJZCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkJlYXQgbW92ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBtb3ZlIGJlYXRcIjtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pO1xuXHRcdGNhbmNlbEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHJlbmRlckNvbnRlbnRzVGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRjb250YWluZXIuZW1wdHkoKTtcblxuXHRcdC8vIEdyb3VwIGNvbnRlbnQgYmxvY2tzIGJ5IHRoZWlyIHJlZmVyZW5jZXMgKGNoYXB0ZXIsIHNjZW5lLCBiZWF0KVxuXHRcdGNvbnN0IGNvbnRlbnRzQnlDaGFwdGVyID0gbmV3IE1hcDxzdHJpbmcsIENvbnRlbnRCbG9ja1tdPigpO1xuXHRcdGNvbnN0IGNvbnRlbnRzQnlTY2VuZSA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2tbXT4oKTtcblx0XHRjb25zdCBjb250ZW50c0J5QmVhdCA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50QmxvY2tbXT4oKTtcblx0XHRjb25zdCBvcnBoYW5Db250ZW50czogQ29udGVudEJsb2NrW10gPSBbXTtcblxuXHRcdC8vIE9yZ2FuaXplIGNvbnRlbnQgYmxvY2tzIGJ5IHRoZWlyIHJlZmVyZW5jZXNcblx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIHRoaXMuY29udGVudEJsb2Nrcykge1xuXHRcdFx0Y29uc3QgcmVmcyA9IHRoaXMuY29udGVudEJsb2NrUmVmcy5maWx0ZXIociA9PiByLmNvbnRlbnRfYmxvY2tfaWQgPT09IGJsb2NrLmlkKTtcblx0XHRcdFxuXHRcdFx0aWYgKHJlZnMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdC8vIENvbnRlbnQgYmxvY2sgd2l0aG91dCByZWZlcmVuY2VzIChvcnBoYW4pXG5cdFx0XHRcdG9ycGhhbkNvbnRlbnRzLnB1c2goYmxvY2spO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2hlY2sgZWFjaCByZWZlcmVuY2UgdG8gY2F0ZWdvcml6ZVxuXHRcdFx0Zm9yIChjb25zdCByZWYgb2YgcmVmcykge1xuXHRcdFx0XHRpZiAocmVmLmVudGl0eV90eXBlID09PSBcImNoYXB0ZXJcIikge1xuXHRcdFx0XHRcdGlmICghY29udGVudHNCeUNoYXB0ZXIuaGFzKHJlZi5lbnRpdHlfaWQpKSB7XG5cdFx0XHRcdFx0XHRjb250ZW50c0J5Q2hhcHRlci5zZXQocmVmLmVudGl0eV9pZCwgW10pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb250ZW50c0J5Q2hhcHRlci5nZXQocmVmLmVudGl0eV9pZCkhLnB1c2goYmxvY2spO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHJlZi5lbnRpdHlfdHlwZSA9PT0gXCJzY2VuZVwiKSB7XG5cdFx0XHRcdFx0aWYgKCFjb250ZW50c0J5U2NlbmUuaGFzKHJlZi5lbnRpdHlfaWQpKSB7XG5cdFx0XHRcdFx0XHRjb250ZW50c0J5U2NlbmUuc2V0KHJlZi5lbnRpdHlfaWQsIFtdKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29udGVudHNCeVNjZW5lLmdldChyZWYuZW50aXR5X2lkKSEucHVzaChibG9jayk7XG5cdFx0XHRcdH0gZWxzZSBpZiAocmVmLmVudGl0eV90eXBlID09PSBcImJlYXRcIikge1xuXHRcdFx0XHRcdGlmICghY29udGVudHNCeUJlYXQuaGFzKHJlZi5lbnRpdHlfaWQpKSB7XG5cdFx0XHRcdFx0XHRjb250ZW50c0J5QmVhdC5zZXQocmVmLmVudGl0eV9pZCwgW10pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb250ZW50c0J5QmVhdC5nZXQocmVmLmVudGl0eV9pZCkhLnB1c2goYmxvY2spO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblxuXHRcdC8vIFJlbmRlciBjb250ZW50cyBncm91cGVkIGJ5IGNoYXB0ZXIgKHdpdGggc2NlbmVzIGFuZCBiZWF0cyBhcyBzdWItZ3JvdXBzKVxuXHRcdGZvciAoY29uc3QgY2hhcHRlciBvZiB0aGlzLmNoYXB0ZXJzLnNvcnQoKGEsIGIpID0+IGEubnVtYmVyIC0gYi5udW1iZXIpKSB7XG5cdFx0XHRjb25zdCBjaGFwdGVyQ29udGVudHMgPSBjb250ZW50c0J5Q2hhcHRlci5nZXQoY2hhcHRlci5pZCkgfHwgW107XG5cdFx0XHRjb25zdCBjaGFwdGVyU2NlbmVzID0gdGhpcy5zY2VuZXMuZmlsdGVyKHMgPT4gcy5jaGFwdGVyX2lkID09PSBjaGFwdGVyLmlkKVxuXHRcdFx0XHQuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSk7XG5cblx0XHRcdC8vIEFsd2F5cyBjcmVhdGUgY2hhcHRlciBncm91cCB0byBhbGxvdyBhZGRpbmcgY29udGVudFxuXHRcdFx0aWYgKGNoYXB0ZXJDb250ZW50cy5sZW5ndGggPiAwIHx8IGNoYXB0ZXJTY2VuZXMubGVuZ3RoID4gMCB8fCBjaGFwdGVyU2NlbmVzLnNvbWUocyA9PiB7XG5cdFx0XHRcdGNvbnN0IHNjZW5lQ29udGVudHMgPSBjb250ZW50c0J5U2NlbmUuZ2V0KHMuaWQpIHx8IFtdO1xuXHRcdFx0XHRjb25zdCBzY2VuZUJlYXRzID0gdGhpcy5iZWF0cy5maWx0ZXIoYiA9PiBiLnNjZW5lX2lkID09PSBzLmlkKTtcblx0XHRcdFx0Y29uc3QgYmVhdENvbnRlbnRzID0gc2NlbmVCZWF0cy5mbGF0TWFwKGIgPT4gY29udGVudHNCeUJlYXQuZ2V0KGIuaWQpIHx8IFtdKTtcblx0XHRcdFx0cmV0dXJuIHNjZW5lQ29udGVudHMubGVuZ3RoID4gMCB8fCBiZWF0Q29udGVudHMubGVuZ3RoID4gMDtcblx0XHRcdH0pKSB7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJHcm91cCA9IGxpc3QuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1jaGFwdGVyLWdyb3VwXCIgfSk7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJIZWFkZXIgPSBjaGFwdGVyR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1jaGFwdGVyLWdyb3VwLWhlYWRlciBzdG9yeS1lbmdpbmUtaG92ZXJhYmxlLWhlYWRlclwiIH0pO1xuXHRcdFx0XHRjaGFwdGVySGVhZGVyLmNyZWF0ZUVsKFwiaDJcIiwgeyBcblx0XHRcdFx0XHR0ZXh0OiBgQ2hhcHRlciAke2NoYXB0ZXIubnVtYmVyfTogJHtjaGFwdGVyLnRpdGxlfWAgXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gQWRkIENvbnRlbnQgYnV0dG9ucyBvbiBob3ZlclxuXHRcdFx0XHRjb25zdCBjaGFwdGVySGVhZGVyQWN0aW9ucyA9IGNoYXB0ZXJIZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ob3Zlci1oZWFkZXItYWN0aW9uc1wiIH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gVGV4dCBidXR0b25cblx0XHRcdFx0Y29uc3QgdGV4dEJ0biA9IGNoYXB0ZXJIZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgXG5cdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1hZGQtY29udGVudC1idG4gc3RvcnktZW5naW5lLWFkZC10ZXh0LWJ0blwiLFxuXHRcdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiQWRkIHRleHQgY29udGVudFwiIH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHRleHRCdG4uaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwic3RvcnktZW5naW5lLWljb25cIj5cdUQ4M0RcdURDREQ8L3NwYW4+Jztcblx0XHRcdFx0dGV4dEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuY3JlYXRlQ29udGVudEZvckVudGl0eShcImNoYXB0ZXJcIiwgY2hhcHRlci5pZCwgY2hhcHRlci5pZCwgXCJ0ZXh0XCIpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gSW1hZ2UgYnV0dG9uXG5cdFx0XHRcdGNvbnN0IGltYWdlQnRuID0gY2hhcHRlckhlYWRlckFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyBcblx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWFkZC1jb250ZW50LWJ0biBzdG9yeS1lbmdpbmUtYWRkLWltYWdlLWJ0blwiLFxuXHRcdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiQWRkIGltYWdlIGNvbnRlbnRcIiB9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpbWFnZUJ0bi5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJzdG9yeS1lbmdpbmUtaWNvblwiPlx1RDgzRFx1RERCQ1x1RkUwRjwvc3Bhbj4nO1xuXHRcdFx0XHRpbWFnZUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuY3JlYXRlQ29udGVudEZvckVudGl0eShcImNoYXB0ZXJcIiwgY2hhcHRlci5pZCwgY2hhcHRlci5pZCwgXCJpbWFnZVwiKTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRjb25zdCBjaGFwdGVyQ29udGVudCA9IGNoYXB0ZXJHcm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWNoYXB0ZXItZ3JvdXAtY29udGVudFwiIH0pO1xuXG5cdFx0XHRcdC8vIFJlbmRlciBjaGFwdGVyLWxldmVsIGNvbnRlbnRzIChhbHdheXMgc2hvdyBncm91cCB0byBhbGxvdyBhZGRpbmcgY29udGVudClcblx0XHRcdFx0Y29uc3QgY2hhcHRlckNvbnRlbnRzR3JvdXAgPSBjaGFwdGVyQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwXCIgfSk7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJDb250ZW50c0hlYWRlciA9IGNoYXB0ZXJDb250ZW50c0dyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtaGVhZGVyXCIgfSk7XG5cdFx0XHRcdGNoYXB0ZXJDb250ZW50c0hlYWRlci5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJDaGFwdGVyIENvbnRlbnRzXCIgfSk7XG5cblx0XHRcdFx0Y29uc3QgY2hhcHRlckNvbnRlbnRzSXRlbXMgPSBjaGFwdGVyQ29udGVudHNHcm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwLWl0ZW1zXCIgfSk7XG5cdFx0XHRcdGlmIChjaGFwdGVyQ29udGVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgYmxvY2sgb2YgY2hhcHRlckNvbnRlbnRzKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlckNvbnRlbnRJdGVtKGNoYXB0ZXJDb250ZW50c0l0ZW1zLCBibG9jaywgXCJjaGFwdGVyXCIsIGNoYXB0ZXIuaWQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjaGFwdGVyQ29udGVudHNJdGVtcy5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIGNvbnRlbnQgaW4gdGhpcyBjaGFwdGVyLlwiLCBjbHM6IFwic3RvcnktZW5naW5lLWVtcHR5LWNvbnRlbnRcIiB9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlbmRlciBzY2VuZXMgYXMgc3ViLWdyb3VwcyB3aXRoaW4gdGhlIGNoYXB0ZXJcblx0XHRcdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBjaGFwdGVyU2NlbmVzKSB7XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVDb250ZW50cyA9IGNvbnRlbnRzQnlTY2VuZS5nZXQoc2NlbmUuaWQpIHx8IFtdO1xuXHRcdFx0XHRcdGNvbnN0IHNjZW5lQmVhdHMgPSB0aGlzLmJlYXRzLmZpbHRlcihiID0+IGIuc2NlbmVfaWQgPT09IHNjZW5lLmlkKVxuXHRcdFx0XHRcdFx0LnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRDb250ZW50cyA9IHNjZW5lQmVhdHMuZmxhdE1hcChiID0+IGNvbnRlbnRzQnlCZWF0LmdldChiLmlkKSB8fCBbXSk7XG5cblx0XHRcdFx0XHQvLyBBbHdheXMgcmVuZGVyIHNjZW5lIGdyb3VwIHRvIGFsbG93IGFkZGluZyBjb250ZW50XG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVHcm91cCA9IGNoYXB0ZXJDb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXBcIiB9KTtcblx0XHRcdFx0XHRjb25zdCBzY2VuZUhlYWRlciA9IHNjZW5lR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1oZWFkZXIgc3RvcnktZW5naW5lLWhvdmVyYWJsZS1oZWFkZXJcIiB9KTtcblx0XHRcdFx0XHRzY2VuZUhlYWRlci5jcmVhdGVFbChcImgzXCIsIHsgXG5cdFx0XHRcdFx0XHR0ZXh0OiBgU2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lLmdvYWwgfHwgXCJVbnRpdGxlZFwifWAgXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Ly8gQWRkIENvbnRlbnQgYnV0dG9ucyBvbiBob3ZlclxuXHRcdFx0XHRcdGNvbnN0IHNjZW5lSGVhZGVyQWN0aW9ucyA9IHNjZW5lSGVhZGVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaG92ZXItaGVhZGVyLWFjdGlvbnNcIiB9KTtcblx0XHRcdFx0XHRjb25zdCBjaGFwdGVySWQgPSBzY2VuZS5jaGFwdGVyX2lkIHx8ICh0aGlzLmNoYXB0ZXJzLmxlbmd0aCA+IDAgPyB0aGlzLmNoYXB0ZXJzWzBdLmlkIDogXCJcIik7XG5cdFx0XHRcdFx0aWYgKGNoYXB0ZXJJZCkge1xuXHRcdFx0XHRcdFx0Ly8gVGV4dCBidXR0b25cblx0XHRcdFx0XHRcdGNvbnN0IHRleHRCdG4gPSBzY2VuZUhlYWRlckFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyBcblx0XHRcdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1hZGQtY29udGVudC1idG4gc3RvcnktZW5naW5lLWFkZC10ZXh0LWJ0blwiLFxuXHRcdFx0XHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkFkZCB0ZXh0IGNvbnRlbnRcIiB9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdHRleHRCdG4uaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwic3RvcnktZW5naW5lLWljb25cIj5cdUQ4M0RcdURDREQ8L3NwYW4+Jztcblx0XHRcdFx0XHRcdHRleHRCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5jcmVhdGVDb250ZW50Rm9yRW50aXR5KFwic2NlbmVcIiwgc2NlbmUuaWQsIGNoYXB0ZXJJZCwgXCJ0ZXh0XCIpO1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gSW1hZ2UgYnV0dG9uXG5cdFx0XHRcdFx0XHRjb25zdCBpbWFnZUJ0biA9IHNjZW5lSGVhZGVyQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IFxuXHRcdFx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWFkZC1jb250ZW50LWJ0biBzdG9yeS1lbmdpbmUtYWRkLWltYWdlLWJ0blwiLFxuXHRcdFx0XHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkFkZCBpbWFnZSBjb250ZW50XCIgfVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRpbWFnZUJ0bi5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJzdG9yeS1lbmdpbmUtaWNvblwiPlx1RDgzRFx1RERCQ1x1RkUwRjwvc3Bhbj4nO1xuXHRcdFx0XHRcdFx0aW1hZ2VCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5jcmVhdGVDb250ZW50Rm9yRW50aXR5KFwic2NlbmVcIiwgc2NlbmUuaWQsIGNoYXB0ZXJJZCwgXCJpbWFnZVwiKTtcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y29uc3Qgc2NlbmVJdGVtcyA9IHNjZW5lR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1pdGVtc1wiIH0pO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIFNjZW5lLWxldmVsIGNvbnRlbnRzXG5cdFx0XHRcdFx0aWYgKHNjZW5lQ29udGVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBibG9jayBvZiBzY2VuZUNvbnRlbnRzKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudEl0ZW0oc2NlbmVJdGVtcywgYmxvY2ssIFwic2NlbmVcIiwgc2NlbmUuaWQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzY2VuZUl0ZW1zLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gY29udGVudCBpbiB0aGlzIHNjZW5lLlwiLCBjbHM6IFwic3RvcnktZW5naW5lLWVtcHR5LWNvbnRlbnRcIiB9KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBCZWF0LWxldmVsIGNvbnRlbnRzXG5cdFx0XHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIHNjZW5lQmVhdHMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGJlYXRDb250ZW50cyA9IGNvbnRlbnRzQnlCZWF0LmdldChiZWF0LmlkKSB8fCBbXTtcblx0XHRcdFx0XHRcdGNvbnN0IGJlYXRTdWJHcm91cCA9IHNjZW5lSXRlbXMuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1iZWF0LXN1Ymdyb3VwXCIgfSk7XG5cdFx0XHRcdFx0XHRjb25zdCBiZWF0U3ViR3JvdXBUaXRsZSA9IGJlYXRTdWJHcm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWJlYXQtc3ViZ3JvdXAtdGl0bGUtY29udGFpbmVyIHN0b3J5LWVuZ2luZS1ob3ZlcmFibGUtaGVhZGVyXCIgfSk7XG5cdFx0XHRcdFx0XHRiZWF0U3ViR3JvdXBUaXRsZS5jcmVhdGVFbChcImg0XCIsIHtcblx0XHRcdFx0XHRcdFx0dGV4dDogYEJlYXQgJHtiZWF0Lm9yZGVyX251bX06ICR7YmVhdC50eXBlfWAsXG5cdFx0XHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtYmVhdC1zdWJncm91cC10aXRsZVwiLFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHQvLyBBZGQgQ29udGVudCBidXR0b25zIG9uIGhvdmVyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgYmVhdEhlYWRlckFjdGlvbnMgPSBiZWF0U3ViR3JvdXBUaXRsZS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWhvdmVyLWhlYWRlci1hY3Rpb25zXCIgfSk7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgYmVhdENoYXB0ZXJJZCA9IHNjZW5lLmNoYXB0ZXJfaWQgfHwgKHRoaXMuY2hhcHRlcnMubGVuZ3RoID4gMCA/IHRoaXMuY2hhcHRlcnNbMF0uaWQgOiBcIlwiKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoYmVhdENoYXB0ZXJJZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gVGV4dCBidXR0b25cblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHRleHRCdG4gPSBiZWF0SGVhZGVyQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWFkZC1jb250ZW50LWJ0biBzdG9yeS1lbmdpbmUtYWRkLXRleHQtYnRuXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiQWRkIHRleHQgY29udGVudFwiIH1cblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGV4dEJ0bi5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJzdG9yeS1lbmdpbmUtaWNvblwiPlx1RDgzRFx1RENERDwvc3Bhbj4nO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGV4dEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmNyZWF0ZUNvbnRlbnRGb3JFbnRpdHkoXCJiZWF0XCIsIGJlYXQuaWQsIGJlYXRDaGFwdGVySWQsIFwidGV4dFwiKTtcblx0XHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEltYWdlIGJ1dHRvblxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgaW1hZ2VCdG4gPSBiZWF0SGVhZGVyQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWFkZC1jb250ZW50LWJ0biBzdG9yeS1lbmdpbmUtYWRkLWltYWdlLWJ0blwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7IFwiYXJpYS1sYWJlbFwiOiBcIkFkZCBpbWFnZSBjb250ZW50XCIgfVxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbWFnZUJ0bi5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJzdG9yeS1lbmdpbmUtaWNvblwiPlx1RDgzRFx1RERCQ1x1RkUwRjwvc3Bhbj4nO1xuXHRcdFx0XHRcdFx0XHRcdFx0aW1hZ2VCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5jcmVhdGVDb250ZW50Rm9yRW50aXR5KFwiYmVhdFwiLCBiZWF0LmlkLCBiZWF0Q2hhcHRlcklkLCBcImltYWdlXCIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGlmIChiZWF0Q29udGVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIGJlYXRDb250ZW50cykge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudEl0ZW0oYmVhdFN1Ykdyb3VwLCBibG9jaywgXCJiZWF0XCIsIGJlYXQuaWQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRiZWF0U3ViR3JvdXAuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBjb250ZW50IGluIHRoaXMgYmVhdC5cIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1lbXB0eS1iZWF0LWNvbnRlbnRcIiB9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW5kZXIgb3JwaGFuIGNvbnRlbnRzIChubyBjaGFwdGVyL3NjZW5lL2JlYXQpXG5cdFx0Ly8gU2hvdyBcIldpdGhvdXQgQ2hhcHRlclwiIHNlY3Rpb24gaWYgbm8gY2hhcHRlcnMgZXhpc3QgT1IgaWYgdGhlcmUgYXJlIG9ycGhhbiBjb250ZW50cy9zY2VuZXNcblx0XHRpZiAodGhpcy5jaGFwdGVycy5sZW5ndGggPT09IDAgfHwgb3JwaGFuQ29udGVudHMubGVuZ3RoID4gMCB8fCB0aGlzLnNjZW5lcy5zb21lKHMgPT4gIXMuY2hhcHRlcl9pZCkpIHtcblx0XHRcdGNvbnN0IG9ycGhhbkdyb3VwID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWNoYXB0ZXItZ3JvdXBcIiB9KTtcblx0XHRcdGNvbnN0IG9ycGhhbkhlYWRlciA9IG9ycGhhbkdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtY2hhcHRlci1ncm91cC1oZWFkZXJcIiB9KTtcblx0XHRcdG9ycGhhbkhlYWRlci5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJXaXRob3V0IENoYXB0ZXJcIiB9KTtcblxuXHRcdFx0Y29uc3Qgb3JwaGFuQ29udGVudCA9IG9ycGhhbkdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtY2hhcHRlci1ncm91cC1jb250ZW50XCIgfSk7XG5cblx0XHRcdC8vIE9ycGhhbiBzY2VuZXNcblx0XHRcdGNvbnN0IG9ycGhhblNjZW5lcyA9IHRoaXMuc2NlbmVzLmZpbHRlcihzID0+ICFzLmNoYXB0ZXJfaWQpXG5cdFx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKTtcblxuXHRcdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBvcnBoYW5TY2VuZXMpIHtcblx0XHRcdFx0Y29uc3Qgc2NlbmVDb250ZW50cyA9IGNvbnRlbnRzQnlTY2VuZS5nZXQoc2NlbmUuaWQpIHx8IFtdO1xuXHRcdFx0XHRjb25zdCBzY2VuZUJlYXRzID0gdGhpcy5iZWF0cy5maWx0ZXIoYiA9PiBiLnNjZW5lX2lkID09PSBzY2VuZS5pZClcblx0XHRcdFx0XHQuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSk7XG5cdFx0XHRcdGNvbnN0IGJlYXRDb250ZW50cyA9IHNjZW5lQmVhdHMuZmxhdE1hcChiID0+IGNvbnRlbnRzQnlCZWF0LmdldChiLmlkKSB8fCBbXSk7XG5cblx0XHRcdFx0Ly8gQWx3YXlzIHJlbmRlciBzY2VuZSBncm91cCB0byBhbGxvdyBhZGRpbmcgY29udGVudFxuXHRcdFx0XHRjb25zdCBzY2VuZUdyb3VwID0gb3JwaGFuQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwXCIgfSk7XG5cdFx0XHRcdGNvbnN0IHNjZW5lSGVhZGVyID0gc2NlbmVHcm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwLWhlYWRlciBzdG9yeS1lbmdpbmUtaG92ZXJhYmxlLWhlYWRlclwiIH0pO1xuXHRcdFx0XHRzY2VuZUhlYWRlci5jcmVhdGVFbChcImgzXCIsIHsgXG5cdFx0XHRcdFx0dGV4dDogYFNjZW5lICR7c2NlbmUub3JkZXJfbnVtfTogJHtzY2VuZS5nb2FsIHx8IFwiVW50aXRsZWRcIn1gIFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIEFkZCBDb250ZW50IGJ1dHRvbiBvbiBob3ZlclxuXHRcdFx0XHRjb25zdCBzY2VuZUhlYWRlckFjdGlvbnMgPSBzY2VuZUhlYWRlci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWhlYWRlci1hY3Rpb25zXCIgfSk7XG5cdFx0XHRcdGNvbnN0IGNoYXB0ZXJJZCA9IHRoaXMuY2hhcHRlcnMubGVuZ3RoID4gMCA/IHRoaXMuY2hhcHRlcnNbMF0uaWQgOiBcIlwiO1xuXHRcdFx0XHRpZiAoY2hhcHRlcklkKSB7XG5cdFx0XHRcdFx0c2NlbmVIZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgXG5cdFx0XHRcdFx0XHR0ZXh0OiBcIisgQ29udGVudFwiLFxuXHRcdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1hZGQtY29udGVudC1idG5cIlxuXHRcdFx0XHRcdH0pLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmNyZWF0ZUNvbnRlbnRGb3JFbnRpdHkoXCJzY2VuZVwiLCBzY2VuZS5pZCwgY2hhcHRlcklkKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3Qgc2NlbmVJdGVtcyA9IHNjZW5lR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1pdGVtc1wiIH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0aWYgKHNjZW5lQ29udGVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgYmxvY2sgb2Ygc2NlbmVDb250ZW50cykge1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50SXRlbShzY2VuZUl0ZW1zLCBibG9jaywgXCJzY2VuZVwiLCBzY2VuZS5pZCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNjZW5lSXRlbXMuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBjb250ZW50IGluIHRoaXMgc2NlbmUuXCIgfSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmb3IgKGNvbnN0IGJlYXQgb2Ygc2NlbmVCZWF0cykge1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRDb250ZW50cyA9IGNvbnRlbnRzQnlCZWF0LmdldChiZWF0LmlkKSB8fCBbXTtcblx0XHRcdFx0XHRjb25zdCBiZWF0U3ViR3JvdXAgPSBzY2VuZUl0ZW1zLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtYmVhdC1zdWJncm91cFwiIH0pO1xuXHRcdFx0XHRcdGNvbnN0IGJlYXRTdWJHcm91cFRpdGxlID0gYmVhdFN1Ykdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtYmVhdC1zdWJncm91cC10aXRsZS1jb250YWluZXIgc3RvcnktZW5naW5lLWhvdmVyYWJsZS1oZWFkZXJcIiB9KTtcblx0XHRcdFx0XHRiZWF0U3ViR3JvdXBUaXRsZS5jcmVhdGVFbChcImg0XCIsIHtcblx0XHRcdFx0XHRcdHRleHQ6IGBCZWF0ICR7YmVhdC5vcmRlcl9udW19OiAke2JlYXQudHlwZX1gLFxuXHRcdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1iZWF0LXN1Ymdyb3VwLXRpdGxlXCIsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gQWRkIENvbnRlbnQgYnV0dG9uIG9uIGhvdmVyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgYmVhdEhlYWRlckFjdGlvbnMgPSBiZWF0U3ViR3JvdXBUaXRsZS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWhvdmVyLWhlYWRlci1hY3Rpb25zXCIgfSk7XG5cdFx0XHRcdFx0Y29uc3QgYmVhdENoYXB0ZXJJZCA9IHRoaXMuY2hhcHRlcnMubGVuZ3RoID4gMCA/IHRoaXMuY2hhcHRlcnNbMF0uaWQgOiBcIlwiO1xuXHRcdFx0XHRcdGlmIChiZWF0Q2hhcHRlcklkKSB7XG5cdFx0XHRcdFx0XHRiZWF0SGVhZGVyQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IFxuXHRcdFx0XHRcdFx0XHR0ZXh0OiBcIisgQ29udGVudFwiLFxuXHRcdFx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWFkZC1jb250ZW50LWJ0blwiXG5cdFx0XHRcdFx0XHR9KS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmNyZWF0ZUNvbnRlbnRGb3JFbnRpdHkoXCJiZWF0XCIsIGJlYXQuaWQsIGJlYXRDaGFwdGVySWQpO1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKGJlYXRDb250ZW50cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIGJlYXRDb250ZW50cykge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlckNvbnRlbnRJdGVtKGJlYXRTdWJHcm91cCwgYmxvY2ssIFwiYmVhdFwiLCBiZWF0LmlkKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0YmVhdFN1Ykdyb3VwLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gY29udGVudCBpbiB0aGlzIGJlYXQuXCIsIGNsczogXCJzdG9yeS1lbmdpbmUtZW1wdHktYmVhdC1jb250ZW50XCIgfSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIE9ycGhhbiBjb250ZW50cyAobm8gcmVmZXJlbmNlcylcblx0XHRcdGlmIChvcnBoYW5Db250ZW50cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IG9ycGhhbkNvbnRlbnRzR3JvdXAgPSBvcnBoYW5Db250ZW50LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXBcIiB9KTtcblx0XHRcdFx0Y29uc3Qgb3JwaGFuQ29udGVudHNIZWFkZXIgPSBvcnBoYW5Db250ZW50c0dyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtaGVhZGVyXCIgfSk7XG5cdFx0XHRcdG9ycGhhbkNvbnRlbnRzSGVhZGVyLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIldpdGhvdXQgUmVmZXJlbmNlXCIgfSk7XG5cblx0XHRcdFx0Y29uc3Qgb3JwaGFuQ29udGVudHNJdGVtcyA9IG9ycGhhbkNvbnRlbnRzR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1ncm91cC1pdGVtc1wiIH0pO1xuXHRcdFx0XHRmb3IgKGNvbnN0IGJsb2NrIG9mIG9ycGhhbkNvbnRlbnRzKSB7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50SXRlbShvcnBoYW5Db250ZW50c0l0ZW1zLCBibG9jaywgbnVsbCwgbnVsbCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRhc3luYyBsb2FkU3RvcnlDaGFyYWN0ZXJzKCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50U3RvcnkgfHwgIXRoaXMuY3VycmVudFN0b3J5LndvcmxkX2lkKSB7XG5cdFx0XHR0aGlzLnN0b3J5Q2hhcmFjdGVycyA9IFtdO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLnN0b3J5Q2hhcmFjdGVycyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRDaGFyYWN0ZXJzKHRoaXMuY3VycmVudFN0b3J5LndvcmxkX2lkKTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsb2FkaW5nIHN0b3J5IGNoYXJhY3RlcnM6XCIsIGVycik7XG5cdFx0XHR0aGlzLnN0b3J5Q2hhcmFjdGVycyA9IFtdO1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3IgbG9hZGluZyBjaGFyYWN0ZXJzOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdH1cblx0fVxuXG5cdHJlbmRlclN0b3J5Q2hhcmFjdGVyc1RhYihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0Y29udGFpbmVyLmVtcHR5KCk7XG5cblx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5Py53b3JsZF9pZCkge1xuXHRcdFx0Y29uc3Qgbm9Xb3JsZE1zZyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWVtcHR5LXN0YXRlXCIgfSk7XG5cdFx0XHRub1dvcmxkTXNnLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiVGhpcyBzdG9yeSBpcyBub3QgbGlua2VkIHRvIGEgd29ybGQuXCIgfSk7XG5cdFx0XHRub1dvcmxkTXNnLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTGluayB0aGlzIHN0b3J5IHRvIGEgd29ybGQgdG8gc2VlIGl0cyBjaGFyYWN0ZXJzLlwiLCBjbHM6IFwic3RvcnktZW5naW5lLWhpbnRcIiB9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBsaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbGlzdFwiIH0pO1xuXG5cdFx0aWYgKHRoaXMuc3RvcnlDaGFyYWN0ZXJzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0bGlzdC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIGNoYXJhY3RlcnMgZm91bmQgaW4gdGhpcyBzdG9yeSdzIHdvcmxkLlwiIH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRmb3IgKGNvbnN0IGNoYXJhY3RlciBvZiB0aGlzLnN0b3J5Q2hhcmFjdGVycy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0XHRjb25zdCBpdGVtID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIiB9KTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnN0IHRpdGxlRGl2ID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXRpdGxlXCIsIHRleHQ6IGNoYXJhY3Rlci5uYW1lIH0pO1xuXHRcdFx0XHR0aXRsZURpdi5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcblx0XHRcdFx0dGl0bGVEaXYub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnNob3dDaGFyYWN0ZXJEZXRhaWxzKGNoYXJhY3Rlcik7XG5cdFx0XHRcdH07XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zdCBtZXRhID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRcdFx0aWYgKGNoYXJhY3Rlci5kZXNjcmlwdGlvbikge1xuXHRcdFx0XHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHsgXG5cdFx0XHRcdFx0XHR0ZXh0OiBjaGFyYWN0ZXIuZGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDgwKSArIChjaGFyYWN0ZXIuZGVzY3JpcHRpb24ubGVuZ3RoID4gODAgPyBcIi4uLlwiIDogXCJcIikgXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0tYWN0aW9uc1wiIH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gVmlldyBkZXRhaWxzIGJ1dHRvblxuXHRcdFx0XHRjb25zdCB2aWV3QnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiVmlld1wiIH0pO1xuXHRcdFx0XHR2aWV3QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5zaG93Q2hhcmFjdGVyRGV0YWlscyhjaGFyYWN0ZXIpO1xuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEZvb3RlciB3aXRoIENyZWF0ZSBDaGFyYWN0ZXIgYnV0dG9uXG5cdFx0Y29uc3QgZm9vdGVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbGlzdC1mb290ZXJcIiB9KTtcblx0XHRjb25zdCBjcmVhdGVCdXR0b24gPSBmb290ZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJDcmVhdGUgQ2hhcmFjdGVyXCIsXG5cdFx0XHRjbHM6IFwibW9kLWN0YVwiLFxuXHRcdH0pO1xuXHRcdGNyZWF0ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5zaG93Q3JlYXRlQ2hhcmFjdGVyTW9kYWxGb3JTdG9yeSgpO1xuXHRcdH07XG5cdH1cblxuXHRzaG93Q3JlYXRlQ2hhcmFjdGVyTW9kYWxGb3JTdG9yeSgpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudFN0b3J5Py53b3JsZF9pZCkge1xuXHRcdFx0bmV3IE5vdGljZShcIlRoaXMgc3RvcnkgaXMgbm90IGxpbmtlZCB0byBhIHdvcmxkXCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiQ3JlYXRlIENoYXJhY3RlclwiKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBuYW1lID0gXCJcIjtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSBcIlwiO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiIH0pO1xuXHRcdG5hbWVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBuYW1lID0gbmFtZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRkZXNjSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3QgY3JlYXRlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDcmVhdGVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRjcmVhdGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghbmFtZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk5hbWUgaXMgcmVxdWlyZWRcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVDaGFyYWN0ZXIodGhpcy5jdXJyZW50U3RvcnkhLndvcmxkX2lkISwgeyBcblx0XHRcdFx0XHRuYW1lOiBuYW1lLnRyaW0oKSwgXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkU3RvcnlDaGFyYWN0ZXJzKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQ2hhcmFjdGVyIGNyZWF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHRcdG5hbWVJbnB1dC5mb2N1cygpO1xuXHR9XG5cblx0cmVuZGVyQ29udGVudEl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgY29udGVudEJsb2NrOiBDb250ZW50QmxvY2ssIGVudGl0eVR5cGU6IHN0cmluZyB8IG51bGwsIGVudGl0eUlkOiBzdHJpbmcgfCBudWxsKSB7XG5cdFx0Y29uc3QgaXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0gc3RvcnktZW5naW5lLWNvbnRlbnQtaXRlbVwiIH0pO1xuXHRcdFxuXHRcdC8vIEljb24gYW5kIHByZXZpZXcgY29udGFpbmVyXG5cdFx0Y29uc3QgaXRlbUNvbnRlbnQgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtY29udGVudC1pdGVtLWNvbnRlbnRcIiB9KTtcblx0XHRcblx0XHQvLyBUeXBlIGljb25cblx0XHRjb25zdCBpY29uQ29udGFpbmVyID0gaXRlbUNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1jb250ZW50LWljb25cIiB9KTtcblx0XHRjb25zdCBpY29uTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuXHRcdFx0dGV4dDogXCJmaWxlLXRleHRcIixcblx0XHRcdGltYWdlOiBcImltYWdlXCIsXG5cdFx0XHR2aWRlbzogXCJ2aWRlb1wiLFxuXHRcdFx0YXVkaW86IFwibXVzaWNcIixcblx0XHRcdGVtYmVkOiBcImNvZGVcIixcblx0XHRcdGxpbms6IFwiZXh0ZXJuYWwtbGlua1wiLFxuXHRcdH07XG5cdFx0Y29uc3QgaWNvbk5hbWUgPSBpY29uTWFwW2NvbnRlbnRCbG9jay50eXBlXSB8fCBcImZpbGVcIjtcblx0XHRzZXRJY29uKGljb25Db250YWluZXIsIGljb25OYW1lKTtcblxuXHRcdC8vIFByZXZpZXdcblx0XHRjb25zdCBwcmV2aWV3ID0gaXRlbUNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1jb250ZW50LXByZXZpZXdcIiB9KTtcblx0XHRpZiAoY29udGVudEJsb2NrLnR5cGUgPT09IFwidGV4dFwiKSB7XG5cdFx0XHRjb25zdCB0ZXh0UHJldmlldyA9IGNvbnRlbnRCbG9jay5jb250ZW50IHx8IFwiXCI7XG5cdFx0XHRjb25zdCB0cnVuY2F0ZWQgPSB0ZXh0UHJldmlldy5sZW5ndGggPiAxMDAgPyB0ZXh0UHJldmlldy5zdWJzdHJpbmcoMCwgMTAwKSArIFwiLi4uXCIgOiB0ZXh0UHJldmlldztcblx0XHRcdHByZXZpZXcuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogdHJ1bmNhdGVkIH0pO1xuXHRcdH0gZWxzZSBpZiAoY29udGVudEJsb2NrLnR5cGUgPT09IFwiaW1hZ2VcIikge1xuXHRcdFx0Y29uc3QgaW1nQ29udGFpbmVyID0gcHJldmlldy5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWltYWdlLWNvbnRhaW5lclwiIH0pO1xuXHRcdFx0Y29uc3QgaW1nID0gaW1nQ29udGFpbmVyLmNyZWF0ZUVsKFwiaW1nXCIsIHtcblx0XHRcdFx0YXR0cjogeyBzcmM6IGNvbnRlbnRCbG9jay5jb250ZW50IHx8IFwiXCIsIGFsdDogY29udGVudEJsb2NrLm1ldGFkYXRhPy5hbHRfdGV4dCB8fCBcIlwiIH0sXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtY29udGVudC10aHVtYm5haWxcIixcblx0XHRcdH0pO1xuXHRcdFx0aW1nLnN0eWxlLm1heFdpZHRoID0gXCIxMDBweFwiO1xuXHRcdFx0aW1nLnN0eWxlLm1heEhlaWdodCA9IFwiNjBweFwiO1xuXHRcdFx0aW1nLnN0eWxlLm9iamVjdEZpdCA9IFwiY292ZXJcIjtcblx0XHRcdGltZy5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjRweFwiO1xuXHRcdFx0XG5cdFx0XHQvLyBTaG93IGF0dHJpYnV0aW9uIGlmIGF2YWlsYWJsZVxuXHRcdFx0aWYgKGNvbnRlbnRCbG9jay5tZXRhZGF0YT8uYXR0cmlidXRpb24pIHtcblx0XHRcdFx0Y29uc3QgYXR0cmlidXRpb24gPSBpbWdDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS11bnNwbGFzaC1hdHRyaWJ1dGlvblwiIH0pO1xuXHRcdFx0XHRhdHRyaWJ1dGlvbi5jcmVhdGVFbChcInNwYW5cIiwgeyBcblx0XHRcdFx0XHR0ZXh0OiBjb250ZW50QmxvY2subWV0YWRhdGEuYXR0cmlidXRpb24sXG5cdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1hdHRyaWJ1dGlvbi10ZXh0XCJcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHByZXZpZXcuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogY29udGVudEJsb2NrLmNvbnRlbnQgfHwgXCJcIiB9KTtcblx0XHR9XG5cblx0XHQvLyBNZXRhIGluZm8gKHJlbW92ZWQgdHlwZSBkaXNwbGF5IGFzIGljb24gYWxyZWFkeSBzaG93cyBpdClcblxuXHRcdC8vIEFjdGlvbnNcblx0XHRjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0tYWN0aW9uc1wiIH0pO1xuXHRcdFxuXHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkVkaXRcIiB9KS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0bmV3IENvbnRlbnRCbG9ja01vZGFsKHRoaXMuYXBwLCBhc3luYyAodXBkYXRlZENvbnRlbnRCbG9jaykgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVDb250ZW50QmxvY2soY29udGVudEJsb2NrLmlkLCB1cGRhdGVkQ29udGVudEJsb2NrKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQ29udGVudCBibG9jayB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0dGhyb3cgZXJyO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCBjb250ZW50QmxvY2ssIHRoaXMucGx1Z2luKS5vcGVuKCk7XG5cdFx0fTtcblxuXHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIk1vdmVcIiB9KS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0YXdhaXQgdGhpcy5zaG93TW92ZUNvbnRlbnRNb2RhbChjb250ZW50QmxvY2ssIGVudGl0eVR5cGUsIGVudGl0eUlkLCBcIm1vdmVcIik7XG5cdFx0fTtcblxuXHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkxpbmtcIiB9KS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0YXdhaXQgdGhpcy5zaG93TW92ZUNvbnRlbnRNb2RhbChjb250ZW50QmxvY2ssIGVudGl0eVR5cGUsIGVudGl0eUlkLCBcImxpbmtcIik7XG5cdFx0fTtcblxuXHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkRlbGV0ZVwiIH0pLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoY29uZmlybShcIkRlbGV0ZSB0aGlzIGNvbnRlbnQgYmxvY2s/XCIpKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmRlbGV0ZUNvbnRlbnRCbG9jayhjb250ZW50QmxvY2suaWQpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJDb250ZW50IGJsb2NrIGRlbGV0ZWRcIik7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdGFzeW5jIHNob3dNb3ZlQ29udGVudE1vZGFsKGNvbnRlbnRCbG9jazogQ29udGVudEJsb2NrLCBjdXJyZW50RW50aXR5VHlwZTogc3RyaW5nIHwgbnVsbCwgY3VycmVudEVudGl0eUlkOiBzdHJpbmcgfCBudWxsLCBtb2RlOiBcIm1vdmVcIiB8IFwibGlua1wiKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRTdG9yeSkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChtb2RlID09PSBcIm1vdmVcIiA/IFwiTW92ZSBDb250ZW50IEJsb2NrXCIgOiBcIkxpbmsgQ29udGVudCBCbG9ja1wiKTtcblxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyBcblx0XHRcdHRleHQ6IG1vZGUgPT09IFwibW92ZVwiIFxuXHRcdFx0XHQ/IGBNb3ZlIGNvbnRlbnQgYmxvY2sgdG86YCBcblx0XHRcdFx0OiBgTGluayBjb250ZW50IGJsb2NrIHRvICh3aWxsIGFwcGVhciBpbiBib3RoIHBsYWNlcyk6YCBcblx0XHR9KTtcblxuXHRcdGNvbnN0IHNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLW1vdmUtc2VsZWN0XCIgfSk7XG5cdFx0XG5cdFx0Ly8gQWRkIFwiTm8gUmVmZXJlbmNlXCIgb3B0aW9uXG5cdFx0Y29uc3Qgbm9SZWZPcHRpb24gPSBzZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB0ZXh0OiBcIk5vIFJlZmVyZW5jZVwiLCB2YWx1ZTogXCJcIiB9KTtcblx0XHRcblx0XHQvLyBHcm91cCBieSBjaGFwdGVyc1xuXHRcdGZvciAoY29uc3QgY2hhcHRlciBvZiB0aGlzLmNoYXB0ZXJzLnNvcnQoKGEsIGIpID0+IGEubnVtYmVyIC0gYi5udW1iZXIpKSB7XG5cdFx0XHRjb25zdCBvcHRpb24gPSBzZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwge1xuXHRcdFx0XHR0ZXh0OiBgQ2hhcHRlciAke2NoYXB0ZXIubnVtYmVyfTogJHtjaGFwdGVyLnRpdGxlfWAsXG5cdFx0XHRcdHZhbHVlOiBgY2hhcHRlcjoke2NoYXB0ZXIuaWR9YCxcblx0XHRcdH0pO1xuXHRcdFx0aWYgKGN1cnJlbnRFbnRpdHlUeXBlID09PSBcImNoYXB0ZXJcIiAmJiBjdXJyZW50RW50aXR5SWQgPT09IGNoYXB0ZXIuaWQpIHtcblx0XHRcdFx0b3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBHcm91cCBzY2VuZXMgYnkgY2hhcHRlclxuXHRcdGZvciAoY29uc3QgY2hhcHRlciBvZiB0aGlzLmNoYXB0ZXJzLnNvcnQoKGEsIGIpID0+IGEubnVtYmVyIC0gYi5udW1iZXIpKSB7XG5cdFx0XHRjb25zdCBjaGFwdGVyU2NlbmVzID0gdGhpcy5zY2VuZXNcblx0XHRcdFx0LmZpbHRlcihzID0+IHMuY2hhcHRlcl9pZCA9PT0gY2hhcHRlci5pZClcblx0XHRcdFx0LnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pO1xuXHRcdFx0XG5cdFx0XHRpZiAoY2hhcHRlclNjZW5lcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IG9wdGdyb3VwID0gc2VsZWN0LmNyZWF0ZUVsKFwib3B0Z3JvdXBcIik7XG5cdFx0XHRcdG9wdGdyb3VwLmxhYmVsID0gYENoYXB0ZXIgJHtjaGFwdGVyLm51bWJlcn06ICR7Y2hhcHRlci50aXRsZX0gLSBTY2VuZXNgO1xuXHRcdFx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIGNoYXB0ZXJTY2VuZXMpIHtcblx0XHRcdFx0XHRjb25zdCBvcHRpb24gPSBvcHRncm91cC5jcmVhdGVFbChcIm9wdGlvblwiLCB7XG5cdFx0XHRcdFx0XHR0ZXh0OiBgU2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lLmdvYWwgfHwgXCJVbnRpdGxlZFwifWAsXG5cdFx0XHRcdFx0XHR2YWx1ZTogYHNjZW5lOiR7c2NlbmUuaWR9YCxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRpZiAoY3VycmVudEVudGl0eVR5cGUgPT09IFwic2NlbmVcIiAmJiBjdXJyZW50RW50aXR5SWQgPT09IHNjZW5lLmlkKSB7XG5cdFx0XHRcdFx0XHRvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEFkZCBvcnBoYW4gc2NlbmVzXG5cdFx0Y29uc3Qgb3JwaGFuU2NlbmVzID0gdGhpcy5zY2VuZXMuZmlsdGVyKHMgPT4gIXMuY2hhcHRlcl9pZCk7XG5cdFx0aWYgKG9ycGhhblNjZW5lcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCBvcHRncm91cCA9IHNlbGVjdC5jcmVhdGVFbChcIm9wdGdyb3VwXCIpO1xuXHRcdFx0b3B0Z3JvdXAubGFiZWwgPSBcIk5vIENoYXB0ZXIgLSBTY2VuZXNcIjtcblx0XHRcdGZvciAoY29uc3Qgc2NlbmUgb2Ygb3JwaGFuU2NlbmVzLnNvcnQoKGEsIGIpID0+IGEub3JkZXJfbnVtIC0gYi5vcmRlcl9udW0pKSB7XG5cdFx0XHRcdGNvbnN0IG9wdGlvbiA9IG9wdGdyb3VwLmNyZWF0ZUVsKFwib3B0aW9uXCIsIHtcblx0XHRcdFx0XHR0ZXh0OiBgU2NlbmUgJHtzY2VuZS5vcmRlcl9udW19OiAke3NjZW5lLmdvYWwgfHwgXCJVbnRpdGxlZFwifWAsXG5cdFx0XHRcdFx0dmFsdWU6IGBzY2VuZToke3NjZW5lLmlkfWAsXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoY3VycmVudEVudGl0eVR5cGUgPT09IFwic2NlbmVcIiAmJiBjdXJyZW50RW50aXR5SWQgPT09IHNjZW5lLmlkKSB7XG5cdFx0XHRcdFx0b3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEdyb3VwIGJlYXRzIGJ5IHNjZW5lXG5cdFx0Zm9yIChjb25zdCBzY2VuZSBvZiB0aGlzLnNjZW5lcy5zb3J0KChhLCBiKSA9PiBhLm9yZGVyX251bSAtIGIub3JkZXJfbnVtKSkge1xuXHRcdFx0Y29uc3Qgc2NlbmVCZWF0cyA9IHRoaXMuYmVhdHNcblx0XHRcdFx0LmZpbHRlcihiID0+IGIuc2NlbmVfaWQgPT09IHNjZW5lLmlkKVxuXHRcdFx0XHQuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSk7XG5cdFx0XHRcblx0XHRcdGlmIChzY2VuZUJlYXRzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0Y29uc3QgY2hhcHRlciA9IHRoaXMuY2hhcHRlcnMuZmluZChjID0+IGMuaWQgPT09IHNjZW5lLmNoYXB0ZXJfaWQpO1xuXHRcdFx0XHRjb25zdCBjaGFwdGVyTGFiZWwgPSBjaGFwdGVyID8gYENoYXB0ZXIgJHtjaGFwdGVyLm51bWJlcn1gIDogXCJObyBDaGFwdGVyXCI7XG5cdFx0XHRcdGNvbnN0IG9wdGdyb3VwID0gc2VsZWN0LmNyZWF0ZUVsKFwib3B0Z3JvdXBcIik7XG5cdFx0XHRcdG9wdGdyb3VwLmxhYmVsID0gYCR7Y2hhcHRlckxhYmVsfSA+IFNjZW5lICR7c2NlbmUub3JkZXJfbnVtfSAtIEJlYXRzYDtcblx0XHRcdFx0Zm9yIChjb25zdCBiZWF0IG9mIHNjZW5lQmVhdHMpIHtcblx0XHRcdFx0XHRjb25zdCBvcHRpb24gPSBvcHRncm91cC5jcmVhdGVFbChcIm9wdGlvblwiLCB7XG5cdFx0XHRcdFx0XHR0ZXh0OiBgQmVhdCAke2JlYXQub3JkZXJfbnVtfTogJHtiZWF0LnR5cGV9YCxcblx0XHRcdFx0XHRcdHZhbHVlOiBgYmVhdDoke2JlYXQuaWR9YCxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRpZiAoY3VycmVudEVudGl0eVR5cGUgPT09IFwiYmVhdFwiICYmIGN1cnJlbnRFbnRpdHlJZCA9PT0gYmVhdC5pZCkge1xuXHRcdFx0XHRcdFx0b3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIWN1cnJlbnRFbnRpdHlUeXBlKSB7XG5cdFx0XHRub1JlZk9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IGFjdGlvbkJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBtb2RlID09PSBcIm1vdmVcIiA/IFwiTW92ZVwiIDogXCJMaW5rXCIsXG5cdFx0XHRjbHM6IFwibW9kLWN0YVwiLFxuXHRcdH0pO1xuXHRcdGFjdGlvbkJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0Y29uc3Qgc2VsZWN0ZWRWYWx1ZSA9IHNlbGVjdC52YWx1ZTtcblx0XHRcdFxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Ly8gRmluZCBjdXJyZW50IHJlZmVyZW5jZSB0byBkZWxldGUgKGlmIG1vdmUgbW9kZSlcblx0XHRcdFx0aWYgKG1vZGUgPT09IFwibW92ZVwiICYmIGN1cnJlbnRFbnRpdHlUeXBlICYmIGN1cnJlbnRFbnRpdHlJZCkge1xuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRSZWYgPSB0aGlzLmNvbnRlbnRCbG9ja1JlZnMuZmluZChcblx0XHRcdFx0XHRcdHIgPT4gci5jb250ZW50X2Jsb2NrX2lkID09PSBjb250ZW50QmxvY2suaWQgJiYgXG5cdFx0XHRcdFx0XHRyLmVudGl0eV90eXBlID09PSBjdXJyZW50RW50aXR5VHlwZSAmJiBcblx0XHRcdFx0XHRcdHIuZW50aXR5X2lkID09PSBjdXJyZW50RW50aXR5SWRcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGlmIChjdXJyZW50UmVmKSB7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZGVsZXRlQ29udGVudEFuY2hvcihjdXJyZW50UmVmLmlkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBDcmVhdGUgbmV3IHJlZmVyZW5jZVxuXHRcdFx0XHRpZiAoc2VsZWN0ZWRWYWx1ZSkge1xuXHRcdFx0XHRcdGNvbnN0IFtlbnRpdHlUeXBlLCBlbnRpdHlJZF0gPSBzZWxlY3RlZFZhbHVlLnNwbGl0KFwiOlwiKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlQ29udGVudEFuY2hvcihjb250ZW50QmxvY2suaWQsIGVudGl0eVR5cGUsIGVudGl0eUlkKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZEhpZXJhcmNoeSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShtb2RlID09PSBcIm1vdmVcIiA/IFwiQ29udGVudCBibG9jayBtb3ZlZCBzdWNjZXNzZnVsbHlcIiA6IFwiQ29udGVudCBibG9jayBsaW5rZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBgRmFpbGVkIHRvICR7bW9kZX0gY29udGVudCBibG9ja2A7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yTWVzc2FnZX1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KTtcblx0XHRjYW5jZWxCdXR0b24ub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRhc3luYyBjcmVhdGVDb250ZW50Rm9yRW50aXR5KGVudGl0eVR5cGU6IFwiY2hhcHRlclwiIHwgXCJzY2VuZVwiIHwgXCJiZWF0XCIsIGVudGl0eUlkOiBzdHJpbmcsIGNoYXB0ZXJJZDogc3RyaW5nLCBjb250ZW50VHlwZTogXCJ0ZXh0XCIgfCBcImltYWdlXCIgPSBcInRleHRcIikge1xuXHRcdGlmICghdGhpcy5jdXJyZW50U3RvcnkpIHJldHVybjtcblx0XHRcblx0XHRpZiAoIWNoYXB0ZXJJZCkge1xuXHRcdFx0aWYgKHRoaXMuY2hhcHRlcnMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJObyBjaGFwdGVyIGF2YWlsYWJsZS4gUGxlYXNlIGNyZWF0ZSBhIGNoYXB0ZXIgZmlyc3QuXCIsIDUwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRjaGFwdGVySWQgPSB0aGlzLmNoYXB0ZXJzWzBdLmlkO1xuXHRcdH1cblxuXHRcdC8vIENhbGN1bGF0ZSBuZXh0IG9yZGVyX251bSBmb3IgdGhpcyBjaGFwdGVyXG5cdFx0Y29uc3QgY2hhcHRlckJsb2NrcyA9IHRoaXMuY29udGVudEJsb2Nrcy5maWx0ZXIoY2IgPT4ge1xuXHRcdFx0Y29uc3QgcmVmcyA9IHRoaXMuY29udGVudEJsb2NrUmVmcy5maWx0ZXIociA9PiByLmNvbnRlbnRfYmxvY2tfaWQgPT09IGNiLmlkICYmIHIuZW50aXR5X3R5cGUgPT09IFwiY2hhcHRlclwiICYmIHIuZW50aXR5X2lkID09PSBjaGFwdGVySWQpO1xuXHRcdFx0cmV0dXJuIHJlZnMubGVuZ3RoID4gMCB8fCBjYi5jaGFwdGVyX2lkID09PSBjaGFwdGVySWQ7XG5cdFx0fSk7XG5cdFx0Y29uc3QgbWF4T3JkZXJOdW0gPSBjaGFwdGVyQmxvY2tzLmxlbmd0aCA+IDAgXG5cdFx0XHQ/IE1hdGgubWF4KC4uLmNoYXB0ZXJCbG9ja3MubWFwKGNiID0+IGNiLm9yZGVyX251bSB8fCAwKSlcblx0XHRcdDogMDtcblx0XHRjb25zdCBuZXh0T3JkZXJOdW0gPSBtYXhPcmRlck51bSArIDE7XG5cblx0XHQvLyBDcmVhdGUgaW5pdGlhbCBjb250ZW50IGJsb2NrIHdpdGggdGhlIHNwZWNpZmllZCB0eXBlXG5cdFx0Y29uc3QgaW5pdGlhbENvbnRlbnRCbG9jazogUGFydGlhbDxDb250ZW50QmxvY2s+ID0ge1xuXHRcdFx0dHlwZTogY29udGVudFR5cGUsXG5cdFx0XHRraW5kOiBcImZpbmFsXCIsXG5cdFx0XHRjb250ZW50OiBcIlwiLFxuXHRcdFx0bWV0YWRhdGE6IHt9LFxuXHRcdH07XG5cblx0XHRuZXcgQ29udGVudEJsb2NrTW9kYWwodGhpcy5hcHAsIGFzeW5jIChjb250ZW50QmxvY2spID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnRlbnRCbG9jay5vcmRlcl9udW0gPSBuZXh0T3JkZXJOdW07XG5cdFx0XHRcdGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlQ29udGVudEJsb2NrKGNoYXB0ZXJJZCwgY29udGVudEJsb2NrKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUNvbnRlbnRBbmNob3IoY3JlYXRlZC5pZCwgZW50aXR5VHlwZSwgZW50aXR5SWQpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRIaWVyYXJjaHkoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJUYWJDb250ZW50KCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJDb250ZW50IGJsb2NrIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHRocm93IGVycjtcblx0XHRcdH1cblx0XHR9LCBpbml0aWFsQ29udGVudEJsb2NrIGFzIENvbnRlbnRCbG9jaywgdGhpcy5wbHVnaW4pLm9wZW4oKTtcblx0fVxuXG5cdC8vID09PT09PT09PT09PT09PT09PT09IFdvcmxkIFZpZXcgTWV0aG9kcyA9PT09PT09PT09PT09PT09PT09PVxuXG5cdGFzeW5jIHNob3dXb3JsZERldGFpbHMod29ybGQ6IFdvcmxkKSB7XG5cdFx0dGhpcy5jdXJyZW50V29ybGQgPSB3b3JsZDtcblx0XHR0aGlzLnZpZXdNb2RlID0gXCJ3b3JsZC1kZXRhaWxzXCI7XG5cdFx0dGhpcy53b3JsZFRhYiA9IFwiY2hhcmFjdGVyc1wiO1xuXHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdHRoaXMucmVuZGVyV29ybGREZXRhaWxzKCk7XG5cdH1cblxuXHRhc3luYyBsb2FkV29ybGREYXRhKCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50V29ybGQpIHJldHVybjtcblxuXHRcdHRoaXMubG9hZGluZ1dvcmxkRGF0YSA9IHRydWU7XG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMuY2hhcmFjdGVycyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRDaGFyYWN0ZXJzKHRoaXMuY3VycmVudFdvcmxkLmlkKTtcblx0XHRcdHRoaXMubG9jYXRpb25zID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldExvY2F0aW9ucyh0aGlzLmN1cnJlbnRXb3JsZC5pZCk7XG5cdFx0XHR0aGlzLmFydGlmYWN0cyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRBcnRpZmFjdHModGhpcy5jdXJyZW50V29ybGQuaWQpO1xuXHRcdFx0dGhpcy5ldmVudHMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0RXZlbnRzKHRoaXMuY3VycmVudFdvcmxkLmlkKTtcblx0XHRcdC8vIFRyYWl0cyBhcmUgZ2xvYmFsLCBub3QgcGVyLXdvcmxkXG5cdFx0XHR0cnkge1xuXHRcdFx0XHR0aGlzLnRyYWl0cyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRUcmFpdHMoKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oXCJUcmFpdHMgbm90IGF2YWlsYWJsZTpcIiwgZXJyKTtcblx0XHRcdFx0dGhpcy50cmFpdHMgPSBbXTtcblx0XHRcdH1cblx0XHRcdC8vIEFyY2hldHlwZXMgYXJlIGdsb2JhbCBwZXIgdGVuYW50XG5cdFx0XHR0cnkge1xuXHRcdFx0XHR0aGlzLmFyY2hldHlwZXMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0QXJjaGV0eXBlcygpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybihcIkFyY2hldHlwZXMgbm90IGF2YWlsYWJsZTpcIiwgZXJyKTtcblx0XHRcdFx0dGhpcy5hcmNoZXR5cGVzID0gW107XG5cdFx0XHR9XG5cdFx0XHQvLyBGYWN0aW9ucyBhbmQgTG9yZSBhcmUgcGVyLXdvcmxkXG5cdFx0XHR0cnkge1xuXHRcdFx0XHR0aGlzLmZhY3Rpb25zID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldEZhY3Rpb25zKHRoaXMuY3VycmVudFdvcmxkLmlkKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oXCJGYWN0aW9ucyBub3QgYXZhaWxhYmxlOlwiLCBlcnIpO1xuXHRcdFx0XHR0aGlzLmZhY3Rpb25zID0gW107XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHR0aGlzLmxvcmVzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldExvcmVzKHRoaXMuY3VycmVudFdvcmxkLmlkKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oXCJMb3JlcyBub3QgYXZhaWxhYmxlOlwiLCBlcnIpO1xuXHRcdFx0XHR0aGlzLmxvcmVzID0gW107XG5cdFx0XHR9XG5cdFx0XHQvLyBSZWxvYWQgd29ybGQgdG8gZ2V0IHRpbWVfY29uZmlnXG5cdFx0XHR0cnkge1xuXHRcdFx0XHR0aGlzLmN1cnJlbnRXb3JsZCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRXb3JsZCh0aGlzLmN1cnJlbnRXb3JsZC5pZCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKFwiRmFpbGVkIHRvIHJlbG9hZCB3b3JsZDpcIiwgZXJyKTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBsb2FkIHdvcmxkIGRhdGFcIjtcblx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yTWVzc2FnZX1gLCA1MDAwKTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0dGhpcy5sb2FkaW5nV29ybGREYXRhID0gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyV29ybGREZXRhaWxzKCkge1xuXHRcdGlmICghdGhpcy5jb250ZW50RWwgfHwgIXRoaXMuY3VycmVudFdvcmxkKSByZXR1cm47XG5cblx0XHR0aGlzLnJlbmRlcldvcmxkRGV0YWlsc0hlYWRlcigpO1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cblx0XHQvLyBUYWJzIHNlY3Rpb25cblx0XHR0aGlzLnJlbmRlcldvcmxkVGFicygpO1xuXHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdH1cblxuXHRyZW5kZXJXb3JsZERldGFpbHNIZWFkZXIoKSB7XG5cdFx0aWYgKCF0aGlzLmhlYWRlckVsIHx8ICF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXG5cdFx0dGhpcy5oZWFkZXJFbC5lbXB0eSgpO1xuXHRcdFxuXHRcdC8vIE1haW4gaGVhZGVyIGNvbnRhaW5lclxuXHRcdGNvbnN0IGhlYWRlckNvbnRhaW5lciA9IHRoaXMuaGVhZGVyRWwuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC1kZXRhaWxzLWhlYWRlclwiIH0pO1xuXHRcdGNvbnN0IGhlYWRlckNvbnRlbnQgPSBoZWFkZXJDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC1oZWFkZXItY29udGVudFwiIH0pO1xuXHRcdFxuXHRcdC8vIFRvcCByb3c6IEJhY2sgYnV0dG9uICsgQWN0aW9uc1xuXHRcdGNvbnN0IHRvcFJvdyA9IGhlYWRlckNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC1oZWFkZXItdG9wXCIgfSk7XG5cdFx0XG5cdFx0Y29uc3QgYmFja0J1dHRvbiA9IHRvcFJvdy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIlx1MjE5MCBCYWNrXCIsXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWJhY2stYnRuXCIsXG5cdFx0fSk7XG5cdFx0YmFja0J1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5jdXJyZW50V29ybGQgPSBudWxsO1xuXHRcdFx0dGhpcy52aWV3TW9kZSA9IFwibGlzdFwiO1xuXHRcdFx0dGhpcy5saXN0VGFiID0gXCJ3b3JsZHNcIjtcblx0XHRcdHRoaXMucmVuZGVyTGlzdEhlYWRlcigpO1xuXHRcdFx0dGhpcy5yZW5kZXJMaXN0Q29udGVudCgpO1xuXHRcdH07XG5cblx0XHQvLyBIZWFkZXIgYWN0aW9ucyAoY29udGV4dCBtZW51KVxuXHRcdGNvbnN0IGhlYWRlckFjdGlvbnMgPSB0b3BSb3cuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1oZWFkZXItYWN0aW9uc1wiIH0pO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRleHRCdXR0b24gPSBoZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtY29udGV4dC1idG5cIixcblx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiV29ybGQgQWN0aW9uc1wiIH1cblx0XHR9KTtcblx0XHRzZXRJY29uKGNvbnRleHRCdXR0b24sIFwibW9yZS12ZXJ0aWNhbFwiKTtcblx0XHRcblx0XHQvLyBDcmVhdGUgZHJvcGRvd24gbWVudVxuXHRcdGNvbnN0IGRyb3Bkb3duTWVudSA9IGhlYWRlckFjdGlvbnMuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1kcm9wZG93bi1tZW51XCIgfSk7XG5cdFx0ZHJvcGRvd25NZW51LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0XHRcblx0XHQvLyBFZGl0IG9wdGlvblxuXHRcdGNvbnN0IGVkaXRPcHRpb24gPSBkcm9wZG93bk1lbnUuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1kcm9wZG93bi1pdGVtXCIsXG5cdFx0fSk7XG5cdFx0c2V0SWNvbihlZGl0T3B0aW9uLCBcInBlbmNpbFwiKTtcblx0XHRlZGl0T3B0aW9uLmNyZWF0ZVNwYW4oeyB0ZXh0OiBcIkVkaXQgV29ybGRcIiB9KTtcblx0XHRlZGl0T3B0aW9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRkcm9wZG93bk1lbnUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdFx0dGhpcy5zaG93RWRpdFdvcmxkTW9kYWwoKTtcblx0XHR9O1xuXHRcdFxuXHRcdC8vIFRvZ2dsZSBkcm9wZG93blxuXHRcdGNvbnRleHRCdXR0b24ub25jbGljayA9IChlKSA9PiB7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0Y29uc3QgaXNWaXNpYmxlID0gZHJvcGRvd25NZW51LnN0eWxlLmRpc3BsYXkgIT09IFwibm9uZVwiO1xuXHRcdFx0ZHJvcGRvd25NZW51LnN0eWxlLmRpc3BsYXkgPSBpc1Zpc2libGUgPyBcIm5vbmVcIiA6IFwiYmxvY2tcIjtcblx0XHR9O1xuXHRcdFxuXHRcdC8vIENsb3NlIGRyb3Bkb3duIHdoZW4gY2xpY2tpbmcgb3V0c2lkZVxuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cdFx0XHRkcm9wZG93bk1lbnUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdH0sIHsgb25jZTogdHJ1ZSB9KTtcblxuXHRcdC8vIFRpdGxlIHNlY3Rpb24gd2l0aCBuYW1lIGFuZCBkZXNjcmlwdGlvblxuXHRcdGNvbnN0IHRpdGxlU2VjdGlvbiA9IGhlYWRlckNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC10aXRsZS1zZWN0aW9uXCIgfSk7XG5cdFx0XG5cdFx0Ly8gV29ybGQgbmFtZVxuXHRcdHRpdGxlU2VjdGlvbi5jcmVhdGVFbChcImgxXCIsIHsgXG5cdFx0XHR0ZXh0OiB0aGlzLmN1cnJlbnRXb3JsZC5uYW1lLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC1uYW1lXCJcblx0XHR9KTtcblxuXHRcdC8vIERlc2NyaXB0aW9uXG5cdFx0aWYgKHRoaXMuY3VycmVudFdvcmxkLmRlc2NyaXB0aW9uKSB7XG5cdFx0XHR0aXRsZVNlY3Rpb24uY3JlYXRlRWwoXCJwXCIsIHsgXG5cdFx0XHRcdHRleHQ6IHRoaXMuY3VycmVudFdvcmxkLmRlc2NyaXB0aW9uLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLWRlc2NcIlxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly8gTWV0YSByb3cgd2l0aCBnZW5yZSBhbmQgVVVJRFxuXHRcdGNvbnN0IG1ldGFSb3cgPSB0aXRsZVNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS13b3JsZC1tZXRhLXJvd1wiIH0pO1xuXHRcdFxuXHRcdC8vIEdlbnJlIGJhZGdlXG5cdFx0aWYgKHRoaXMuY3VycmVudFdvcmxkLmdlbnJlKSB7XG5cdFx0XHRjb25zdCBnZW5yZUJhZGdlID0gbWV0YVJvdy5jcmVhdGVTcGFuKHsgXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtYmFkZ2Ugc3RvcnktZW5naW5lLWdlbnJlLWJhZGdlXCJcblx0XHRcdH0pO1xuXHRcdFx0c2V0SWNvbihnZW5yZUJhZGdlLCBcInRhZ1wiKTtcblx0XHRcdGdlbnJlQmFkZ2UuY3JlYXRlU3Bhbih7IHRleHQ6IHRoaXMuY3VycmVudFdvcmxkLmdlbnJlIH0pO1xuXHRcdH1cblxuXHRcdC8vIFVVSUQgZGlzcGxheSB3aXRoIGNvcHlcblx0XHRjb25zdCB1dWlkQ29udGFpbmVyID0gbWV0YVJvdy5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXdvcmxkLXV1aWRcIiB9KTtcblx0XHRjb25zdCB1dWlkVGV4dCA9IHV1aWRDb250YWluZXIuY3JlYXRlU3Bhbih7IHRleHQ6IHRoaXMuY3VycmVudFdvcmxkLmlkLnN1YnN0cmluZygwLCA4KSArIFwiLi4uXCIgfSk7XG5cdFx0XG5cdFx0Y29uc3QgY29weVV1aWRCdXR0b24gPSB1dWlkQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtY29weS11dWlkLWJ0blwiLFxuXHRcdFx0YXR0cjogeyBcImFyaWEtbGFiZWxcIjogXCJDb3B5IFVVSURcIiB9XG5cdFx0fSk7XG5cdFx0c2V0SWNvbihjb3B5VXVpZEJ1dHRvbiwgXCJjb3B5XCIpO1xuXHRcdGNvcHlVdWlkQnV0dG9uLm9uY2xpY2sgPSAoZSkgPT4ge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdGlmICghdGhpcy5jdXJyZW50V29ybGQpIHJldHVybjtcblx0XHRcdG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRoaXMuY3VycmVudFdvcmxkLmlkKS50aGVuKCgpID0+IHtcblx0XHRcdFx0bmV3IE5vdGljZShcIlVVSUQgY29waWVkIHRvIGNsaXBib2FyZFwiKTtcblx0XHRcdH0pLmNhdGNoKCgpID0+IHtcblx0XHRcdFx0bmV3IE5vdGljZShcIkZhaWxlZCB0byBjb3B5IFVVSURcIiwgMzAwMCk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXHR9XG5cblx0cmVuZGVyV29ybGRUYWJzKCkge1xuXHRcdGlmICghdGhpcy5jb250ZW50RWwpIHJldHVybjtcblxuXHRcdC8vIFJlbW92ZSBleGlzdGluZyB0YWJzIGlmIGFueVxuXHRcdGNvbnN0IGV4aXN0aW5nVGFicyA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoXCIuc3RvcnktZW5naW5lLXdvcmxkLXRhYnNcIik7XG5cdFx0aWYgKGV4aXN0aW5nVGFicykge1xuXHRcdFx0ZXhpc3RpbmdUYWJzLnJlbW92ZSgpO1xuXHRcdH1cblxuXHRcdC8vIENyZWF0ZSB2ZXJ0aWNhbCBzaWRlYmFyIGNvbnRhaW5lclxuXHRcdGNvbnN0IHNpZGViYXJQb3NpdGlvbiA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnNpZGViYXJQb3NpdGlvbiB8fCBcImxlZnRcIjtcblx0XHRjb25zdCBzaWRlYmFyQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgXG5cdFx0XHRjbHM6IGBzdG9yeS1lbmdpbmUtd29ybGQtc2lkZWJhciBzdG9yeS1lbmdpbmUtd29ybGQtc2lkZWJhci0ke3NpZGViYXJQb3NpdGlvbn1gIFxuXHRcdH0pO1xuXG5cdFx0Ly8gQWxsIHRhYnMgd2l0aCBpY29uc1xuXHRcdGNvbnN0IGFsbFRhYnM6IHsgXG5cdFx0XHRrZXk6IFwiY2hhcmFjdGVyc1wiIHwgXCJ0cmFpdHNcIiB8IFwiYXJjaGV0eXBlc1wiIHwgXCJldmVudHNcIiB8IFwibG9yZVwiIHwgXCJsb2NhdGlvbnNcIiB8IFwiZmFjdGlvbnNcIiB8IFwiYXJ0aWZhY3RzXCI7IFxuXHRcdFx0bGFiZWw6IHN0cmluZztcblx0XHRcdGljb246IHN0cmluZztcblx0XHR9W10gPSBbXG5cdFx0XHR7IGtleTogXCJjaGFyYWN0ZXJzXCIsIGxhYmVsOiBcIkNoYXJhY3RlcnNcIiwgaWNvbjogXCJ1c2VyXCIgfSxcblx0XHRcdHsga2V5OiBcImxvY2F0aW9uc1wiLCBsYWJlbDogXCJMb2NhdGlvbnNcIiwgaWNvbjogXCJtYXAtcGluXCIgfSxcblx0XHRcdHsga2V5OiBcImZhY3Rpb25zXCIsIGxhYmVsOiBcIkZhY3Rpb25zXCIsIGljb246IFwidXNlcnNcIiB9LFxuXHRcdFx0eyBrZXk6IFwiYXJ0aWZhY3RzXCIsIGxhYmVsOiBcIkFydGlmYWN0c1wiLCBpY29uOiBcImdlbVwiIH0sXG5cdFx0XHR7IGtleTogXCJ0cmFpdHNcIiwgbGFiZWw6IFwiVHJhaXRzXCIsIGljb246IFwic3RhclwiIH0sXG5cdFx0XHR7IGtleTogXCJhcmNoZXR5cGVzXCIsIGxhYmVsOiBcIkFyY2hldHlwZXNcIiwgaWNvbjogXCJzaGFwZXNcIiB9LFxuXHRcdFx0eyBrZXk6IFwiZXZlbnRzXCIsIGxhYmVsOiBcIkV2ZW50c1wiLCBpY29uOiBcImNhbGVuZGFyXCIgfSxcblx0XHRcdHsga2V5OiBcImxvcmVcIiwgbGFiZWw6IFwiTG9yZVwiLCBpY29uOiBcImJvb2stb3BlblwiIH0sXG5cdFx0XTtcblxuXHRcdGZvciAoY29uc3QgdGFiIG9mIGFsbFRhYnMpIHtcblx0XHRcdGNvbnN0IHRhYkJ1dHRvbiA9IHNpZGViYXJDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRjbHM6IGBzdG9yeS1lbmdpbmUtc2lkZWJhci10YWIgJHt0aGlzLndvcmxkVGFiID09PSB0YWIua2V5ID8gXCJpcy1hY3RpdmVcIiA6IFwiXCJ9YCxcblx0XHRcdFx0YXR0cjoge1xuXHRcdFx0XHRcdFwiYXJpYS1sYWJlbFwiOiB0YWIubGFiZWwsXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBBZGQgaWNvblxuXHRcdFx0c2V0SWNvbih0YWJCdXR0b24sIHRhYi5pY29uKTtcblx0XHRcdFxuXHRcdFx0Ly8gQ3JlYXRlIHRvb2x0aXBcblx0XHRcdGNvbnN0IHRvb2x0aXAgPSB0YWJCdXR0b24uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zaWRlYmFyLXRvb2x0aXBcIiB9KTtcblx0XHRcdHRvb2x0aXAuc2V0VGV4dCh0YWIubGFiZWwpO1xuXHRcdFx0XG5cdFx0XHR0YWJCdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0dGhpcy53b3JsZFRhYiA9IHRhYi5rZXk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJzKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdHJlbmRlcldvcmxkVGFiQ29udGVudCgpIHtcblx0XHRpZiAoIXRoaXMuY29udGVudEVsKSByZXR1cm47XG5cblx0XHQvLyBSZW1vdmUgZXhpc3RpbmcgY29udGVudFxuXHRcdGNvbnN0IGV4aXN0aW5nQ29udGVudCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoXCIuc3RvcnktZW5naW5lLXdvcmxkLXRhYi1jb250ZW50XCIpO1xuXHRcdGlmIChleGlzdGluZ0NvbnRlbnQpIHtcblx0XHRcdGV4aXN0aW5nQ29udGVudC5yZW1vdmUoKTtcblx0XHR9XG5cblx0XHQvLyBHZXQgc2lkZWJhciBwb3NpdGlvbiBmb3IgcHJvcGVyIGNvbnRlbnQgcGxhY2VtZW50XG5cdFx0Y29uc3Qgc2lkZWJhclBvc2l0aW9uID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2lkZWJhclBvc2l0aW9uIHx8IFwibGVmdFwiO1xuXHRcdGNvbnN0IGNvbnRlbnRDb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBcblx0XHRcdGNsczogYHN0b3J5LWVuZ2luZS13b3JsZC10YWItY29udGVudCBzdG9yeS1lbmdpbmUtY29udGVudC1zaWRlYmFyLSR7c2lkZWJhclBvc2l0aW9ufWAgXG5cdFx0fSk7XG5cblx0XHRpZiAodGhpcy5sb2FkaW5nV29ybGREYXRhKSB7XG5cdFx0XHQvLyBNb2Rlcm4gc2tlbGV0b24gbG9hZGluZ1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcblx0XHRcdFx0Y29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXNrZWxldG9uIHN0b3J5LWVuZ2luZS1za2VsZXRvbi1jYXJkXCIgfSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0c3dpdGNoICh0aGlzLndvcmxkVGFiKSB7XG5cdFx0XHRjYXNlIFwiY2hhcmFjdGVyc1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlckNoYXJhY3RlcnNUYWIoY29udGVudENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcInRyYWl0c1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlclRyYWl0c1RhYihjb250ZW50Q29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiYXJjaGV0eXBlc1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlckFyY2hldHlwZXNUYWIoY29udGVudENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImV2ZW50c1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlckV2ZW50c1RhYihjb250ZW50Q29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwibG9yZVwiOlxuXHRcdFx0XHR0aGlzLnJlbmRlckxvcmVUYWIoY29udGVudENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImxvY2F0aW9uc1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlckxvY2F0aW9uc1RhYihjb250ZW50Q29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiZmFjdGlvbnNcIjpcblx0XHRcdFx0dGhpcy5yZW5kZXJGYWN0aW9uc1RhYihjb250ZW50Q29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiYXJ0aWZhY3RzXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyQXJ0aWZhY3RzVGFiKGNvbnRlbnRDb250YWluZXIpO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHQvLyBBY3Rpb25zIGJhclxuXHRcdHRoaXMucmVuZGVyV29ybGRBY3Rpb25zQmFyKGNvbnRlbnRDb250YWluZXIpO1xuXHR9XG5cblx0cmVuZGVyV29ybGRBY3Rpb25zQmFyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRjb25zdCBhY3Rpb25zQmFyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtYWN0aW9ucy1iYXJcIiB9KTtcblx0XHRcblx0XHRsZXQgY3JlYXRlQnV0dG9uVGV4dCA9IFwiQ3JlYXRlIENoYXJhY3RlclwiO1xuXHRcdGxldCBjcmVhdGVCdXR0b25BY3Rpb24gPSAoKSA9PiB7XG5cdFx0XHR0aGlzLnNob3dDcmVhdGVDaGFyYWN0ZXJNb2RhbCgpO1xuXHRcdH07XG5cblx0XHRzd2l0Y2ggKHRoaXMud29ybGRUYWIpIHtcblx0XHRcdGNhc2UgXCJ0cmFpdHNcIjpcblx0XHRcdFx0Y3JlYXRlQnV0dG9uVGV4dCA9IFwiQ3JlYXRlIFRyYWl0XCI7XG5cdFx0XHRcdGNyZWF0ZUJ1dHRvbkFjdGlvbiA9ICgpID0+IHRoaXMuc2hvd0NyZWF0ZVRyYWl0TW9kYWwoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiYXJjaGV0eXBlc1wiOlxuXHRcdFx0XHRjcmVhdGVCdXR0b25UZXh0ID0gXCJDcmVhdGUgQXJjaGV0eXBlXCI7XG5cdFx0XHRcdGNyZWF0ZUJ1dHRvbkFjdGlvbiA9ICgpID0+IHRoaXMuc2hvd0NyZWF0ZUFyY2hldHlwZU1vZGFsKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImV2ZW50c1wiOlxuXHRcdFx0XHRjcmVhdGVCdXR0b25UZXh0ID0gXCJDcmVhdGUgRXZlbnRcIjtcblx0XHRcdFx0Y3JlYXRlQnV0dG9uQWN0aW9uID0gKCkgPT4gdGhpcy5zaG93Q3JlYXRlRXZlbnRNb2RhbCgpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJsb3JlXCI6XG5cdFx0XHRcdGNyZWF0ZUJ1dHRvblRleHQgPSBcIkNyZWF0ZSBMb3JlXCI7XG5cdFx0XHRcdGNyZWF0ZUJ1dHRvbkFjdGlvbiA9ICgpID0+IHRoaXMuc2hvd0NyZWF0ZUxvcmVNb2RhbCgpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJsb2NhdGlvbnNcIjpcblx0XHRcdFx0Y3JlYXRlQnV0dG9uVGV4dCA9IFwiQ3JlYXRlIExvY2F0aW9uXCI7XG5cdFx0XHRcdGNyZWF0ZUJ1dHRvbkFjdGlvbiA9ICgpID0+IHRoaXMuc2hvd0NyZWF0ZUxvY2F0aW9uTW9kYWwoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiZmFjdGlvbnNcIjpcblx0XHRcdFx0Y3JlYXRlQnV0dG9uVGV4dCA9IFwiQ3JlYXRlIEZhY3Rpb25cIjtcblx0XHRcdFx0Y3JlYXRlQnV0dG9uQWN0aW9uID0gKCkgPT4gdGhpcy5zaG93Q3JlYXRlRmFjdGlvbk1vZGFsKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImFydGlmYWN0c1wiOlxuXHRcdFx0XHRjcmVhdGVCdXR0b25UZXh0ID0gXCJDcmVhdGUgQXJ0aWZhY3RcIjtcblx0XHRcdFx0Y3JlYXRlQnV0dG9uQWN0aW9uID0gKCkgPT4gdGhpcy5zaG93Q3JlYXRlQXJ0aWZhY3RNb2RhbCgpO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHRjb25zdCBjcmVhdGVCdXR0b24gPSBhY3Rpb25zQmFyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IGNyZWF0ZUJ1dHRvblRleHQsXG5cdFx0XHRjbHM6IFwibW9kLWN0YSBzdG9yeS1lbmdpbmUtY3JlYXRlLWJ0blwiLFxuXHRcdH0pO1xuXHRcdGNyZWF0ZUJ1dHRvbi5vbmNsaWNrID0gY3JlYXRlQnV0dG9uQWN0aW9uO1xuXHR9XG5cblx0cmVuZGVyQ2hhcmFjdGVyc1RhYihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0aWYgKHRoaXMuY2hhcmFjdGVycy5sZW5ndGggPT09IDApIHtcblx0XHRcdC8vIE1vZGVybiBlbXB0eSBzdGF0ZVxuXHRcdFx0Y29uc3QgZW1wdHlTdGF0ZSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWVtcHR5LXN0YXRlXCIgfSk7XG5cdFx0XHRjb25zdCBlbXB0eUljb24gPSBlbXB0eVN0YXRlLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZW1wdHktaWNvblwiIH0pO1xuXHRcdFx0c2V0SWNvbihlbXB0eUljb24sIFwidXNlcnNcIik7XG5cdFx0XHRlbXB0eVN0YXRlLmNyZWF0ZUVsKFwiaDNcIiwgeyBcblx0XHRcdFx0dGV4dDogXCJObyBDaGFyYWN0ZXJzIFlldFwiLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVtcHR5LXRpdGxlXCJcblx0XHRcdH0pO1xuXHRcdFx0ZW1wdHlTdGF0ZS5jcmVhdGVFbChcInBcIiwgeyBcblx0XHRcdFx0dGV4dDogXCJTdGFydCBidWlsZGluZyB5b3VyIHdvcmxkIGJ5IGNyZWF0aW5nIHlvdXIgZmlyc3QgY2hhcmFjdGVyLlwiLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVtcHR5LWRlc2NyaXB0aW9uXCJcblx0XHRcdH0pO1xuXHRcdFx0Y29uc3QgY3JlYXRlQnRuID0gZW1wdHlTdGF0ZS5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdHRleHQ6IFwiQ3JlYXRlIENoYXJhY3RlclwiLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVtcHR5LWFjdGlvblwiXG5cdFx0XHR9KTtcblx0XHRcdGNyZWF0ZUJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zaG93Q3JlYXRlQ2hhcmFjdGVyTW9kYWwoKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBNb2Rlcm4gY2FyZC1iYXNlZCBsYXlvdXRcblx0XHRmb3IgKGNvbnN0IGNoYXJhY3RlciBvZiB0aGlzLmNoYXJhY3RlcnMpIHtcblx0XHRcdGNvbnN0IGNhcmQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktY2FyZFwiIH0pO1xuXHRcdFx0Y2FyZC5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcblx0XHRcdFxuXHRcdFx0Ly8gTWFrZSBlbnRpcmUgY2FyZCBjbGlja2FibGVcblx0XHRcdGNhcmQub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0dGhpcy5zaG93Q2hhcmFjdGVyRGV0YWlscyhjaGFyYWN0ZXIpO1xuXHRcdFx0fTtcblx0XHRcdFxuXHRcdFx0Ly8gQ2FyZCBoZWFkZXIgd2l0aCB0aXRsZSBhbmQgYWN0aW9uc1xuXHRcdFx0Y29uc3QgY2FyZEhlYWRlciA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktY2FyZC1oZWFkZXJcIiB9KTtcblx0XHRcdFxuXHRcdFx0Y29uc3QgY2FyZFRpdGxlID0gY2FyZEhlYWRlci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1jYXJkLXRpdGxlXCIgfSk7XG5cdFx0XHRjb25zdCBuYW1lRWwgPSBjYXJkVGl0bGUuY3JlYXRlRWwoXCJoM1wiLCB7IFxuXHRcdFx0XHR0ZXh0OiBjaGFyYWN0ZXIubmFtZSxcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktbmFtZVwiXG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0aWYgKGNoYXJhY3Rlci5hcmNoZXR5cGVfaWQpIHtcblx0XHRcdFx0Y29uc3QgYXJjaGV0eXBlID0gdGhpcy5hcmNoZXR5cGVzLmZpbmQoYSA9PiBhLmlkID09PSBjaGFyYWN0ZXIuYXJjaGV0eXBlX2lkKTtcblx0XHRcdFx0aWYgKGFyY2hldHlwZSkge1xuXHRcdFx0XHRcdGNhcmRUaXRsZS5jcmVhdGVFbChcInBcIiwgeyBcblx0XHRcdFx0XHRcdHRleHQ6IGFyY2hldHlwZS5uYW1lLFxuXHRcdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktc3VidGl0bGVcIlxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIENhcmQgYWN0aW9ucyAoaG92ZXIgdmlzaWJsZSlcblx0XHRcdGNvbnN0IGNhcmRBY3Rpb25zID0gY2FyZEhlYWRlci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1jYXJkLWFjdGlvbnNcIiB9KTtcblx0XHRcdFxuXHRcdFx0Y29uc3QgcmVsYXRpb25zaGlwQnRuID0gY2FyZEFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiQWRkIFJlbGF0aW9uc2hpcFwiIH1cblx0XHRcdH0pO1xuXHRcdFx0c2V0SWNvbihyZWxhdGlvbnNoaXBCdG4sIFwidXNlcnNcIik7XG5cdFx0XHRyZWxhdGlvbnNoaXBCdG4ub25jbGljayA9IChlKSA9PiB7XG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdHRoaXMuc2hvd0FkZENoYXJhY3RlclJlbGF0aW9uc2hpcE1vZGFsKGNoYXJhY3Rlcik7XG5cdFx0XHR9O1xuXHRcdFx0XG5cdFx0XHRjb25zdCBlZGl0QnRuID0gY2FyZEFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiRWRpdFwiIH1cblx0XHRcdH0pO1xuXHRcdFx0c2V0SWNvbihlZGl0QnRuLCBcInBlbmNpbFwiKTtcblx0XHRcdGVkaXRCdG4ub25jbGljayA9IChlKSA9PiB7XG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdHRoaXMuc2hvd0VkaXRDaGFyYWN0ZXJNb2RhbChjaGFyYWN0ZXIpO1xuXHRcdFx0fTtcblx0XHRcdFxuXHRcdFx0Y29uc3QgZGVsZXRlQnRuID0gY2FyZEFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWVudGl0eS1hY3Rpb24tYnRuXCIsXG5cdFx0XHRcdGF0dHI6IHsgXCJhcmlhLWxhYmVsXCI6IFwiRGVsZXRlXCIgfVxuXHRcdFx0fSk7XG5cdFx0XHRzZXRJY29uKGRlbGV0ZUJ0biwgXCJ0cmFzaFwiKTtcblx0XHRcdGRlbGV0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKGUpID0+IHtcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0aWYgKGNvbmZpcm0oYERlbGV0ZSBjaGFyYWN0ZXIgXCIke2NoYXJhY3Rlci5uYW1lfVwiP2ApKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5kZWxldGVDaGFyYWN0ZXIoY2hhcmFjdGVyLmlkKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJDaGFyYWN0ZXIgZGVsZXRlZFwiKTtcblx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdFxuXHRcdFx0Ly8gQ2FyZCBjb250ZW50XG5cdFx0XHRjb25zdCBjYXJkQ29udGVudCA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1lbnRpdHktY2FyZC1jb250ZW50XCIgfSk7XG5cdFx0XHRcblx0XHRcdGlmIChjaGFyYWN0ZXIuZGVzY3JpcHRpb24pIHtcblx0XHRcdFx0Y2FyZENvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgXG5cdFx0XHRcdFx0dGV4dDogY2hhcmFjdGVyLmRlc2NyaXB0aW9uLFxuXHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZW50aXR5LWRlc2NyaXB0aW9uXCJcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyTG9jYXRpb25zVGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRpZiAodGhpcy5sb2NhdGlvbnMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBsb2NhdGlvbnMgZm91bmQuIENyZWF0ZSB5b3VyIGZpcnN0IGxvY2F0aW9uIVwiIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEdyb3VwIGJ5IGhpZXJhcmNoeSBsZXZlbFxuXHRcdGNvbnN0IHJvb3RMb2NhdGlvbnMgPSB0aGlzLmxvY2F0aW9ucy5maWx0ZXIobCA9PiAhbC5wYXJlbnRfaWQpO1xuXHRcdGNvbnN0IGxpc3QgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1saXN0XCIgfSk7XG5cdFx0XG5cdFx0Zm9yIChjb25zdCBsb2NhdGlvbiBvZiByb290TG9jYXRpb25zLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHR0aGlzLnJlbmRlckxvY2F0aW9uSXRlbShsaXN0LCBsb2NhdGlvbiwgMCk7XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyTG9jYXRpb25JdGVtKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGxvY2F0aW9uOiBMb2NhdGlvbiwgbGV2ZWw6IG51bWJlcikge1xuXHRcdGNvbnN0IGl0ZW0gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtXCIgfSk7XG5cdFx0aXRlbS5zdHlsZS5tYXJnaW5MZWZ0ID0gYCR7bGV2ZWwgKiAxfXJlbWA7XG5cdFx0XG5cdFx0Y29uc3QgdGl0bGVSb3cgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIiB9KTtcblx0XHR0aXRsZVJvdy50ZXh0Q29udGVudCA9IGxvY2F0aW9uLm5hbWU7XG5cdFx0aWYgKGxvY2F0aW9uLnR5cGUpIHtcblx0XHRcdGNvbnN0IHR5cGVCYWRnZSA9IHRpdGxlUm93LmNyZWF0ZVNwYW4oeyBjbHM6IFwic3RvcnktZW5naW5lLWJhZGdlXCIgfSk7XG5cdFx0XHR0eXBlQmFkZ2UudGV4dENvbnRlbnQgPSBsb2NhdGlvbi50eXBlO1xuXHRcdH1cblx0XHRcblx0XHRjb25zdCBtZXRhID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRpZiAobG9jYXRpb24uZGVzY3JpcHRpb24pIHtcblx0XHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogbG9jYXRpb24uZGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDUwKSArIChsb2NhdGlvbi5kZXNjcmlwdGlvbi5sZW5ndGggPiA1MCA/IFwiLi4uXCIgOiBcIlwiKSB9KTtcblx0XHR9XG5cblx0XHRjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0tYWN0aW9uc1wiIH0pO1xuXHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkVkaXRcIiB9KS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5zaG93RWRpdExvY2F0aW9uTW9kYWwobG9jYXRpb24pO1xuXHRcdH07XG5cdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiRGVsZXRlXCIgfSkub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmIChjb25maXJtKGBEZWxldGUgbG9jYXRpb24gXCIke2xvY2F0aW9uLm5hbWV9XCI/YCkpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZGVsZXRlTG9jYXRpb24obG9jYXRpb24uaWQpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShcIkxvY2F0aW9uIGRlbGV0ZWRcIik7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIFJlbmRlciBjaGlsZHJlblxuXHRcdGNvbnN0IGNoaWxkcmVuID0gdGhpcy5sb2NhdGlvbnMuZmlsdGVyKGwgPT4gbC5wYXJlbnRfaWQgPT09IGxvY2F0aW9uLmlkKTtcblx0XHRmb3IgKGNvbnN0IGNoaWxkIG9mIGNoaWxkcmVuLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHR0aGlzLnJlbmRlckxvY2F0aW9uSXRlbShjb250YWluZXIsIGNoaWxkLCBsZXZlbCArIDEpO1xuXHRcdH1cblx0fVxuXG5cdHJlbmRlckFydGlmYWN0c1RhYihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0aWYgKHRoaXMuYXJ0aWZhY3RzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Y29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gYXJ0aWZhY3RzIGZvdW5kLiBDcmVhdGUgeW91ciBmaXJzdCBhcnRpZmFjdCFcIiB9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBsaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbGlzdFwiIH0pO1xuXHRcdGZvciAoY29uc3QgYXJ0aWZhY3Qgb2YgdGhpcy5hcnRpZmFjdHMpIHtcblx0XHRcdGNvbnN0IGl0ZW0gPSBsaXN0LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbVwiIH0pO1xuXHRcdFx0XG5cdFx0XHRjb25zdCB0aXRsZVJvdyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiIH0pO1xuXHRcdFx0dGl0bGVSb3cudGV4dENvbnRlbnQgPSBhcnRpZmFjdC5uYW1lO1xuXHRcdFx0aWYgKGFydGlmYWN0LnJhcml0eSkge1xuXHRcdFx0XHRjb25zdCByYXJpdHlCYWRnZSA9IHRpdGxlUm93LmNyZWF0ZVNwYW4oeyBjbHM6IGBzdG9yeS1lbmdpbmUtYmFkZ2Ugc3RvcnktZW5naW5lLXJhcml0eS0ke2FydGlmYWN0LnJhcml0eS50b0xvd2VyQ2FzZSgpfWAgfSk7XG5cdFx0XHRcdHJhcml0eUJhZGdlLnRleHRDb250ZW50ID0gYXJ0aWZhY3QucmFyaXR5O1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRjb25zdCBtZXRhID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRcdGlmIChhcnRpZmFjdC5kZXNjcmlwdGlvbikge1xuXHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGFydGlmYWN0LmRlc2NyaXB0aW9uLnN1YnN0cmluZygwLCA1MCkgKyAoYXJ0aWZhY3QuZGVzY3JpcHRpb24ubGVuZ3RoID4gNTAgPyBcIi4uLlwiIDogXCJcIikgfSk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbS1hY3Rpb25zXCIgfSk7XG5cdFx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJFZGl0XCIgfSkub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0dGhpcy5zaG93RWRpdEFydGlmYWN0TW9kYWwoYXJ0aWZhY3QpO1xuXHRcdFx0fTtcblx0XHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkRlbGV0ZVwiIH0pLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGlmIChjb25maXJtKGBEZWxldGUgYXJ0aWZhY3QgXCIke2FydGlmYWN0Lm5hbWV9XCI/YCkpIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmRlbGV0ZUFydGlmYWN0KGFydGlmYWN0LmlkKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJBcnRpZmFjdCBkZWxldGVkXCIpO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXG5cdHJlbmRlckV2ZW50c1RhYihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0Ly8gPT09IFNFQ0FPIDE6IFRJTUUgQ09ORklHID09PVxuXHRcdGNvbnN0IHRpbWVDb25maWdTZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGltZS1jb25maWctc2VjdGlvblwiIH0pO1xuXHRcdFxuXHRcdGlmICh0aGlzLmN1cnJlbnRXb3JsZD8udGltZV9jb25maWcpIHtcblx0XHRcdC8vIE1vc3RyYXIgY29uZmlndXJhY2FvIGF0dWFsXG5cdFx0XHR0aGlzLnJlbmRlclRpbWVDb25maWdEaXNwbGF5KHRpbWVDb25maWdTZWN0aW9uLCB0aGlzLmN1cnJlbnRXb3JsZC50aW1lX2NvbmZpZyk7XG5cdFx0XHRcblx0XHRcdC8vIEJvdGFvIEVkaXRcblx0XHRcdGNvbnN0IGVkaXRCdG4gPSB0aW1lQ29uZmlnU2VjdGlvbi5jcmVhdGVFbChcImJ1dHRvblwiLCB7IFxuXHRcdFx0XHR0ZXh0OiBcIkVkaXQgVGltZSBDb25maWdcIixcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1idG4tc2Vjb25kYXJ5XCJcblx0XHRcdH0pO1xuXHRcdFx0ZWRpdEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zaG93VGltZUNvbmZpZ01vZGFsKHRoaXMuY3VycmVudFdvcmxkIS50aW1lX2NvbmZpZyEpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBNb3N0cmFyIGJvdGFvIHBhcmEgYWRpY2lvbmFyXG5cdFx0XHRjb25zdCBhZGRCdG4gPSB0aW1lQ29uZmlnU2VjdGlvbi5jcmVhdGVFbChcImJ1dHRvblwiLCB7IFxuXHRcdFx0XHR0ZXh0OiBcIkFkZCBUaW1lIENvbmZpZ3VyYXRpb25cIixcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1idG4tcHJpbWFyeVwiXG5cdFx0XHR9KTtcblx0XHRcdGFkZEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zaG93VGltZUNvbmZpZ01vZGFsKG51bGwpO1xuXHRcdH1cblx0XHRcblx0XHQvLyA9PT0gU0VDQU8gMjogQk9UQU8gVkVSIFRJTUVMSU5FID09PVxuXHRcdGNvbnN0IHRpbWVsaW5lU2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXRpbWVsaW5lLXNlY3Rpb25cIiB9KTtcblx0XHRjb25zdCB0aW1lbGluZUJ0biA9IHRpbWVsaW5lU2VjdGlvbi5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIlZpZXcgVGltZWxpbmVcIixcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtYnRuLXNlY29uZGFyeVwiXG5cdFx0fSk7XG5cdFx0dGltZWxpbmVCdG4ub25jbGljayA9ICgpID0+IHRoaXMuc2hvd1RpbWVsaW5lTW9kYWwoKTtcblx0XHRcblx0XHQvLyA9PT0gU0VDQU8gMzogRVBPQ0ggRVZFTlQgKFllYXIgWmVybykgPT09XG5cdFx0Y29uc3QgZXBvY2hTZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZXBvY2gtc2VjdGlvblwiIH0pO1xuXHRcdGVwb2NoU2VjdGlvbi5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJcdTIzRjAgRXBvY2ggRXZlbnQgKFllYXIgWmVybylcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWN0aW9uLXRpdGxlXCIgfSk7XG5cdFx0XG5cdFx0Y29uc3QgZXBvY2hFdmVudCA9IHRoaXMuZXZlbnRzLmZpbmQoZSA9PiBlLmlzX2Vwb2NoICYmIGUudGltZWxpbmVfcG9zaXRpb24gPT09IDApO1xuXHRcdFxuXHRcdGlmIChlcG9jaEV2ZW50KSB7XG5cdFx0XHQvLyBFcG9jaCBldmVudCBleGlzdHMgLSBzaG93IGl0IHdpdGggZWRpdCBvcHRpb25cblx0XHRcdGNvbnN0IGVwb2NoSXRlbSA9IGVwb2NoU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0gc3RvcnktZW5naW5lLWVwb2NoLWl0ZW1cIiB9KTtcblx0XHRcdFxuXHRcdFx0Y29uc3QgZXBvY2hUaXRsZSA9IGVwb2NoSXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXRpdGxlXCIgfSk7XG5cdFx0XHRlcG9jaFRpdGxlLmNyZWF0ZVNwYW4oeyB0ZXh0OiBlcG9jaEV2ZW50Lm5hbWUgfSk7XG5cdFx0XHRlcG9jaFRpdGxlLmNyZWF0ZVNwYW4oeyBjbHM6IFwic3RvcnktZW5naW5lLWJhZGdlIHN0b3J5LWVuZ2luZS1iYWRnZS1lcG9jaFwiLCB0ZXh0OiBcIkVQT0NIXCIgfSk7XG5cdFx0XHRcblx0XHRcdGNvbnN0IGVwb2NoTWV0YSA9IGVwb2NoSXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRcdGVwb2NoTWV0YS5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBcIlBvc2l0aW9uOiAwIChZZWFyIFplcm8pXCIgfSk7XG5cdFx0XHRpZiAoZXBvY2hFdmVudC5kZXNjcmlwdGlvbikge1xuXHRcdFx0XHRlcG9jaE1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogZXBvY2hFdmVudC5kZXNjcmlwdGlvbi5zdWJzdHJpbmcoMCwgODApICsgKGVwb2NoRXZlbnQuZGVzY3JpcHRpb24ubGVuZ3RoID4gODAgPyBcIi4uLlwiIDogXCJcIikgfSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGNvbnN0IGVwb2NoQWN0aW9ucyA9IGVwb2NoSXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0tYWN0aW9uc1wiIH0pO1xuXHRcdFx0ZXBvY2hBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJFZGl0IEVwb2NoXCIgfSkub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0dGhpcy5zaG93RWRpdEV2ZW50TW9kYWwoZXBvY2hFdmVudCk7XG5cdFx0XHR9O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBObyBlcG9jaCBldmVudCAtIHNob3cgY3JlYXRlIGJ1dHRvblxuXHRcdFx0Y29uc3QgY3JlYXRlRXBvY2hCdG4gPSBlcG9jaFNlY3Rpb24uY3JlYXRlRWwoXCJidXR0b25cIiwgeyBcblx0XHRcdFx0dGV4dDogXCJcdUQ4M0NcdURGMUYgQ3JlYXRlIEVwb2NoIEV2ZW50IChZZWFyIFplcm8pXCIsXG5cdFx0XHRcdGNsczogXCJtb2QtY3RhIHN0b3J5LWVuZ2luZS1jcmVhdGUtZXBvY2gtYnRuXCJcblx0XHRcdH0pO1xuXHRcdFx0Y3JlYXRlRXBvY2hCdG4ub25jbGljayA9ICgpID0+IHRoaXMuc2hvd0NyZWF0ZUVwb2NoRXZlbnRNb2RhbCgpO1xuXHRcdFx0XG5cdFx0XHRlcG9jaFNlY3Rpb24uY3JlYXRlRWwoXCJwXCIsIHsgXG5cdFx0XHRcdHRleHQ6IFwiVGhlIEVwb2NoIEV2ZW50IG1hcmtzIFllYXIgWmVybyAtIGFsbCBvdGhlciBldmVudHMgYXJlIGRhdGVkIHJlbGF0aXZlIHRvIHRoaXMgcG9pbnQuXCIsXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaGludFwiXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gPT09IFNFQ0FPIDQ6IExJU1RBIERFIEVWRU5UT1MgPT09XG5cdFx0Y29uc3QgZXZlbnRzU2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWV2ZW50cy1saXN0LXNlY3Rpb25cIiB9KTtcblx0XHRldmVudHNTZWN0aW9uLmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIlx1RDgzRFx1RENEQyBFdmVudHNcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWN0aW9uLXRpdGxlXCIgfSk7XG5cdFx0XG5cdFx0Ly8gRmlsdGVyIG91dCB0aGUgZXBvY2ggZXZlbnQgZnJvbSB0aGUgbGlzdFxuXHRcdGNvbnN0IHJlZ3VsYXJFdmVudHMgPSB0aGlzLmV2ZW50cy5maWx0ZXIoZSA9PiAhKGUuaXNfZXBvY2ggJiYgZS50aW1lbGluZV9wb3NpdGlvbiA9PT0gMCkpO1xuXHRcdFxuXHRcdGlmIChyZWd1bGFyRXZlbnRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0ZXZlbnRzU2VjdGlvbi5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIGV2ZW50cyB5ZXQuIENyZWF0ZSB5b3VyIGZpcnN0IGV2ZW50IVwiLCBjbHM6IFwic3RvcnktZW5naW5lLWVtcHR5LWhpbnRcIiB9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBsaXN0ID0gZXZlbnRzU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblx0XHRcblx0XHQvLyBTb3J0IGJ5IHRpbWVsaW5lX3Bvc2l0aW9uIChldmVudHMgY2xvc2VyIHRvIGVwb2NoIGZpcnN0KSwgdGhlbiBieSBpbXBvcnRhbmNlXG5cdFx0Y29uc3Qgc29ydGVkRXZlbnRzID0gcmVndWxhckV2ZW50cy5zb3J0KChhLCBiKSA9PiB7XG5cdFx0XHRjb25zdCBwb3NBID0gYS50aW1lbGluZV9wb3NpdGlvbiA/PyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcblx0XHRcdGNvbnN0IHBvc0IgPSBiLnRpbWVsaW5lX3Bvc2l0aW9uID8/IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xuXHRcdFx0aWYgKHBvc0EgIT09IHBvc0IpIHJldHVybiBwb3NBIC0gcG9zQjtcblx0XHRcdHJldHVybiBiLmltcG9ydGFuY2UgLSBhLmltcG9ydGFuY2U7XG5cdFx0fSk7XG5cdFx0XG5cdFx0Zm9yIChjb25zdCBldmVudCBvZiBzb3J0ZWRFdmVudHMpIHtcblx0XHRcdGNvbnN0IGl0ZW0gPSBsaXN0LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbVwiIH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBUaXRsZSByb3cgd2l0aCBuYW1lIGFuZCBiYWRnZXNcblx0XHRcdGNvbnN0IHRpdGxlUm93ID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXRpdGxlXCIgfSk7XG5cdFx0XHR0aXRsZVJvdy5jcmVhdGVTcGFuKHsgdGV4dDogZXZlbnQubmFtZSB9KTtcblx0XHRcdFxuXHRcdFx0Ly8gSW1wb3J0YW5jZSBiYWRnZVxuXHRcdFx0Y29uc3QgaW1wb3J0YW5jZUJhZGdlID0gdGl0bGVSb3cuY3JlYXRlU3Bhbih7IGNsczogXCJzdG9yeS1lbmdpbmUtYmFkZ2VcIiB9KTtcblx0XHRcdGltcG9ydGFuY2VCYWRnZS50ZXh0Q29udGVudCA9IGBcdTI2MDUke2V2ZW50LmltcG9ydGFuY2V9YDtcblx0XHRcdFxuXHRcdFx0Ly8gVHlwZSBiYWRnZVxuXHRcdFx0aWYgKGV2ZW50LnR5cGUpIHtcblx0XHRcdFx0dGl0bGVSb3cuY3JlYXRlU3Bhbih7IGNsczogXCJzdG9yeS1lbmdpbmUtYmFkZ2VcIiwgdGV4dDogZXZlbnQudHlwZSB9KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gRXBvY2ggYmFkZ2UgaWYgaXNfZXBvY2ggKGJ1dCBub3QgeWVhciB6ZXJvKVxuXHRcdFx0aWYgKGV2ZW50LmlzX2Vwb2NoKSB7XG5cdFx0XHRcdHRpdGxlUm93LmNyZWF0ZVNwYW4oeyBjbHM6IFwic3RvcnktZW5naW5lLWJhZGdlIHN0b3J5LWVuZ2luZS1iYWRnZS1lcG9jaFwiLCB0ZXh0OiBcIkVQT0NIXCIgfSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIE1ldGEgaW5mbyAtIGNsZWFyZXIgc3RydWN0dXJlXG5cdFx0XHRjb25zdCBtZXRhID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRcdFxuXHRcdFx0Ly8gVGltZWxpbmUgUG9zaXRpb24gKERhdGUgc2luY2UgWWVhciBaZXJvKVxuXHRcdFx0aWYgKGV2ZW50LnRpbWVsaW5lX3Bvc2l0aW9uICE9PSB1bmRlZmluZWQgJiYgZXZlbnQudGltZWxpbmVfcG9zaXRpb24gIT09IG51bGwpIHtcblx0XHRcdFx0Y29uc3QgcG9zVGV4dCA9IGV2ZW50LnRpbWVsaW5lX3Bvc2l0aW9uID49IDAgXG5cdFx0XHRcdFx0PyBgWWVhciAke2V2ZW50LnRpbWVsaW5lX3Bvc2l0aW9ufWAgXG5cdFx0XHRcdFx0OiBgJHtNYXRoLmFicyhldmVudC50aW1lbGluZV9wb3NpdGlvbil9IHllYXJzIGJlZm9yZSBZZWFyIFplcm9gO1xuXHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGBcdUQ4M0RcdURDQzUgJHtwb3NUZXh0fWAsIGNsczogXCJzdG9yeS1lbmdpbmUtZXZlbnQtcG9zaXRpb25cIiB9KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gUGFyZW50IEV2ZW50IHJlbGF0aW9uc2hpcFxuXHRcdFx0aWYgKGV2ZW50LnBhcmVudF9pZCkge1xuXHRcdFx0XHRjb25zdCBwYXJlbnRFdmVudCA9IHRoaXMuZXZlbnRzLmZpbmQoZSA9PiBlLmlkID09PSBldmVudC5wYXJlbnRfaWQpO1xuXHRcdFx0XHRpZiAocGFyZW50RXZlbnQpIHtcblx0XHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGBcdTIxQjMgUmVsYXRlZCB0bzogJHtwYXJlbnRFdmVudC5uYW1lfWAsIGNsczogXCJzdG9yeS1lbmdpbmUtZXZlbnQtcGFyZW50XCIgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gRGVzY3JpcHRpb24gcHJldmlld1xuXHRcdFx0aWYgKGV2ZW50LmRlc2NyaXB0aW9uKSB7XG5cdFx0XHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHsgXG5cdFx0XHRcdFx0dGV4dDogZXZlbnQuZGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDYwKSArIChldmVudC5kZXNjcmlwdGlvbi5sZW5ndGggPiA2MCA/IFwiLi4uXCIgOiBcIlwiKSxcblx0XHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV2ZW50LWRlc2NyaXB0aW9uXCJcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFjdGlvbnNcblx0XHRcdGNvbnN0IGFjdGlvbnMgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbS1hY3Rpb25zXCIgfSk7XG5cdFx0XHRcblx0XHRcdC8vIExpbmsgdG8gRW50aXR5XG5cdFx0XHRjb25zdCBsaW5rQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiKTtcblx0XHRcdHNldEljb24obGlua0J0biwgXCJsaW5rXCIpO1xuXHRcdFx0bGlua0J0bi50aXRsZSA9IFwiTGluayB0byBFbnRpdHlcIjtcblx0XHRcdGxpbmtCdG4ub25jbGljayA9ICgpID0+IHRoaXMuc2hvd0xpbmtFdmVudFRvRW50aXR5TW9kYWwoZXZlbnQpO1xuXHRcdFx0XG5cdFx0XHQvLyBTZXQgUGFyZW50IEV2ZW50XG5cdFx0XHRjb25zdCBldmVudExpbmtCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIpO1xuXHRcdFx0c2V0SWNvbihldmVudExpbmtCdG4sIFwiZ2l0LWJyYW5jaFwiKTtcblx0XHRcdGV2ZW50TGlua0J0bi50aXRsZSA9IFwiU2V0IFBhcmVudCBFdmVudFwiO1xuXHRcdFx0ZXZlbnRMaW5rQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNob3dTZXRFdmVudFBhcmVudE1vZGFsKGV2ZW50KTtcblx0XHRcdFxuXHRcdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiRWRpdFwiIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuc2hvd0VkaXRFdmVudE1vZGFsKGV2ZW50KTtcblx0XHRcdH07XG5cdFx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJEZWxldGVcIiB9KS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRpZiAoY29uZmlybShgRGVsZXRlIGV2ZW50IFwiJHtldmVudC5uYW1lfVwiP2ApKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5kZWxldGVFdmVudChldmVudC5pZCk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiRXZlbnQgZGVsZXRlZFwiKTtcblx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cdH1cblxuXHRzaG93Q3JlYXRlRXBvY2hFdmVudE1vZGFsKCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50V29ybGQpIHJldHVybjtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiQ3JlYXRlIEVwb2NoIEV2ZW50IChZZWFyIFplcm8pXCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSBcIlwiO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IFwiXCI7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IFxuXHRcdFx0dGV4dDogXCJUaGUgRXBvY2ggRXZlbnQgZGVmaW5lcyBZZWFyIFplcm8gaW4geW91ciB3b3JsZCdzIHRpbWVsaW5lLiBBbGwgb3RoZXIgZXZlbnRzIHdpbGwgYmUgZGF0ZWQgcmVsYXRpdmUgdG8gdGhpcyBtb21lbnQuXCIsXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLW1vZGFsLWhpbnRcIlxuXHRcdH0pO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJFdmVudCBOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyBcblx0XHRcdHR5cGU6IFwidGV4dFwiLCBcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIixcblx0XHRcdHBsYWNlaG9sZGVyOiBcImUuZy4sIFRoZSBHcmVhdCBDYXRhY2x5c20sIFRoZSBGb3VuZGluZywgWWVhciBvZiB0aGUgRHJhZ29uXCJcblx0XHR9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIixcblx0XHRcdHBsYWNlaG9sZGVyOiBcIkRlc2NyaWJlIHdoYXQgaGFwcGVuZWQgYXQgdGhpcyBwaXZvdGFsIG1vbWVudC4uLlwiXG5cdFx0fSk7XG5cdFx0ZGVzY0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IGNyZWF0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ3JlYXRlIEVwb2NoXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0Y3JlYXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIW5hbWUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJOYW1lIGlzIHJlcXVpcmVkXCIpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlRXZlbnQodGhpcy5jdXJyZW50V29ybGQhLmlkLCB7XG5cdFx0XHRcdFx0bmFtZTogbmFtZS50cmltKCksXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSB8fCB1bmRlZmluZWQsXG5cdFx0XHRcdFx0dGltZWxpbmVfcG9zaXRpb246IDAsXG5cdFx0XHRcdFx0aXNfZXBvY2g6IHRydWUsXG5cdFx0XHRcdFx0aW1wb3J0YW5jZTogMTAsIC8vIE1heCBpbXBvcnRhbmNlIGZvciBlcG9jaFxuXHRcdFx0XHRcdHR5cGU6IFwiRXBvY2hcIlxuXHRcdFx0XHR9KTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJFcG9jaCBldmVudCBjcmVhdGVkIVwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdFxuXHRcdGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSk7XG5cdFx0Y2FuY2VsQnRuLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0cmVuZGVyVHJhaXRzVGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRpZiAodGhpcy50cmFpdHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyB0cmFpdHMgZm91bmQuIENyZWF0ZSB5b3VyIGZpcnN0IHRyYWl0IVwiIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEdyb3VwIGJ5IGNhdGVnb3J5XG5cdFx0Y29uc3QgdHJhaXRzQnlDYXRlZ29yeSA9IG5ldyBNYXA8c3RyaW5nLCBUcmFpdFtdPigpO1xuXHRcdGZvciAoY29uc3QgdHJhaXQgb2YgdGhpcy50cmFpdHMpIHtcblx0XHRcdGNvbnN0IGNhdGVnb3J5ID0gdHJhaXQuY2F0ZWdvcnkgfHwgXCJVbmNhdGVnb3JpemVkXCI7XG5cdFx0XHRpZiAoIXRyYWl0c0J5Q2F0ZWdvcnkuaGFzKGNhdGVnb3J5KSkge1xuXHRcdFx0XHR0cmFpdHNCeUNhdGVnb3J5LnNldChjYXRlZ29yeSwgW10pO1xuXHRcdFx0fVxuXHRcdFx0dHJhaXRzQnlDYXRlZ29yeS5nZXQoY2F0ZWdvcnkpIS5wdXNoKHRyYWl0KTtcblx0XHR9XG5cblx0XHRjb25zdCBsaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbGlzdFwiIH0pO1xuXHRcdGZvciAoY29uc3QgW2NhdGVnb3J5LCBjYXRlZ29yeVRyYWl0c10gb2YgdHJhaXRzQnlDYXRlZ29yeS5lbnRyaWVzKCkpIHtcblx0XHRcdGNvbnN0IGdyb3VwID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwXCIgfSk7XG5cdFx0XHRjb25zdCBncm91cEhlYWRlciA9IGdyb3VwLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtZ3JvdXAtaGVhZGVyXCIgfSk7XG5cdFx0XHRncm91cEhlYWRlci5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogY2F0ZWdvcnkgfSk7XG5cblx0XHRcdGNvbnN0IGdyb3VwSXRlbXMgPSBncm91cC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWdyb3VwLWl0ZW1zXCIgfSk7XG5cdFx0XHRmb3IgKGNvbnN0IHRyYWl0IG9mIGNhdGVnb3J5VHJhaXRzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRcdGNvbnN0IGl0ZW0gPSBncm91cEl0ZW1zLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbVwiIH0pO1xuXHRcdFx0XHRpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIiwgdGV4dDogdHJhaXQubmFtZSB9KTtcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnN0IG1ldGEgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbWV0YVwiIH0pO1xuXHRcdFx0XHRpZiAodHJhaXQuZGVzY3JpcHRpb24pIHtcblx0XHRcdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IHRyYWl0LmRlc2NyaXB0aW9uLnN1YnN0cmluZygwLCA1MCkgKyAodHJhaXQuZGVzY3JpcHRpb24ubGVuZ3RoID4gNTAgPyBcIi4uLlwiIDogXCJcIikgfSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0tYWN0aW9uc1wiIH0pO1xuXHRcdFx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJFZGl0XCIgfSkub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnNob3dFZGl0VHJhaXRNb2RhbCh0cmFpdCk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkRlbGV0ZVwiIH0pLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGNvbmZpcm0oYERlbGV0ZSB0cmFpdCBcIiR7dHJhaXQubmFtZX1cIj9gKSkge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmRlbGV0ZVRyYWl0KHRyYWl0LmlkKTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJUcmFpdCBkZWxldGVkXCIpO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZW5kZXJBcmNoZXR5cGVzVGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRpZiAodGhpcy5hcmNoZXR5cGVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Y29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gYXJjaGV0eXBlcyBmb3VuZC4gQ3JlYXRlIHlvdXIgZmlyc3QgYXJjaGV0eXBlIVwiIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGxpc3QgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1saXN0XCIgfSk7XG5cdFx0Zm9yIChjb25zdCBhcmNoZXR5cGUgb2YgdGhpcy5hcmNoZXR5cGVzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRjb25zdCBpdGVtID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIiB9KTtcblx0XHRcdGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiLCB0ZXh0OiBhcmNoZXR5cGUubmFtZSB9KTtcblx0XHRcdFxuXHRcdFx0Y29uc3QgbWV0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIgfSk7XG5cdFx0XHRpZiAoYXJjaGV0eXBlLmRlc2NyaXB0aW9uKSB7XG5cdFx0XHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogYXJjaGV0eXBlLmRlc2NyaXB0aW9uLnN1YnN0cmluZygwLCA1MCkgKyAoYXJjaGV0eXBlLmRlc2NyaXB0aW9uLmxlbmd0aCA+IDUwID8gXCIuLi5cIiA6IFwiXCIpIH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0tYWN0aW9uc1wiIH0pO1xuXHRcdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiVmlldyBUcmFpdHNcIiB9KS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGNvbnN0IHRyYWl0cyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRBcmNoZXR5cGVUcmFpdHMoYXJjaGV0eXBlLmlkKTtcblx0XHRcdFx0XHR0aGlzLnNob3dBcmNoZXR5cGVUcmFpdHNNb2RhbChhcmNoZXR5cGUsIHRyYWl0cyk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiRWRpdFwiIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuc2hvd0VkaXRBcmNoZXR5cGVNb2RhbChhcmNoZXR5cGUpO1xuXHRcdFx0fTtcblx0XHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkRlbGV0ZVwiIH0pLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGlmIChjb25maXJtKGBEZWxldGUgYXJjaGV0eXBlIFwiJHthcmNoZXR5cGUubmFtZX1cIj9gKSkge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZGVsZXRlQXJjaGV0eXBlKGFyY2hldHlwZS5pZCk7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQXJjaGV0eXBlIGRlbGV0ZWRcIik7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyTG9yZVRhYihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0aWYgKHRoaXMubG9yZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBsb3JlIGZvdW5kLiBDcmVhdGUgeW91ciBmaXJzdCBsb3JlIVwiIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEdyb3VwIGJ5IGhpZXJhcmNoeSBsZXZlbFxuXHRcdGNvbnN0IHJvb3RMb3JlcyA9IHRoaXMubG9yZXMuZmlsdGVyKGwgPT4gIWwucGFyZW50X2lkKTtcblx0XHRjb25zdCBsaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbGlzdFwiIH0pO1xuXHRcdFxuXHRcdGZvciAoY29uc3QgbG9yZSBvZiByb290TG9yZXMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdHRoaXMucmVuZGVyTG9yZUl0ZW0obGlzdCwgbG9yZSwgMCk7XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyTG9yZUl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgbG9yZTogTG9yZSwgbGV2ZWw6IG51bWJlcikge1xuXHRcdGNvbnN0IGl0ZW0gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtXCIgfSk7XG5cdFx0aXRlbS5zdHlsZS5tYXJnaW5MZWZ0ID0gYCR7bGV2ZWwgKiAxfXJlbWA7XG5cdFx0XG5cdFx0Y29uc3QgdGl0bGVSb3cgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIiB9KTtcblx0XHR0aXRsZVJvdy50ZXh0Q29udGVudCA9IGxvcmUubmFtZTtcblx0XHRpZiAobG9yZS5jYXRlZ29yeSkge1xuXHRcdFx0Y29uc3QgY2F0ZWdvcnlCYWRnZSA9IHRpdGxlUm93LmNyZWF0ZVNwYW4oeyBjbHM6IFwic3RvcnktZW5naW5lLWJhZGdlXCIgfSk7XG5cdFx0XHRjYXRlZ29yeUJhZGdlLnRleHRDb250ZW50ID0gbG9yZS5jYXRlZ29yeTtcblx0XHR9XG5cdFx0XG5cdFx0Y29uc3QgbWV0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIgfSk7XG5cdFx0aWYgKGxvcmUuZGVzY3JpcHRpb24pIHtcblx0XHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogbG9yZS5kZXNjcmlwdGlvbi5zdWJzdHJpbmcoMCwgNTApICsgKGxvcmUuZGVzY3JpcHRpb24ubGVuZ3RoID4gNTAgPyBcIi4uLlwiIDogXCJcIikgfSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgYWN0aW9ucyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtLWFjdGlvbnNcIiB9KTtcblx0XHQvLyBMaW5rIHRvIEVudGl0eVxuXHRcdGNvbnN0IGxpbmtCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIpO1xuXHRcdHNldEljb24obGlua0J0biwgXCJsaW5rXCIpO1xuXHRcdGxpbmtCdG4udGl0bGUgPSBcIkxpbmsgdG8gRW50aXR5XCI7XG5cdFx0bGlua0J0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zaG93QWRkTG9yZVJlZmVyZW5jZU1vZGFsKGxvcmUpO1xuXHRcdC8vIENyZWF0ZSBTdWItTG9yZVxuXHRcdGNvbnN0IHN1YkJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIik7XG5cdFx0c2V0SWNvbihzdWJCdG4sIFwiZm9sZGVyLXBsdXNcIik7XG5cdFx0c3ViQnRuLnRpdGxlID0gXCJDcmVhdGUgU3ViLUxvcmVcIjtcblx0XHRzdWJCdG4ub25jbGljayA9ICgpID0+IHRoaXMuc2hvd0NyZWF0ZUxvcmVNb2RhbChsb3JlLmlkKTtcblx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJFZGl0XCIgfSkub25jbGljayA9ICgpID0+IHtcblx0XHRcdHRoaXMuc2hvd0VkaXRMb3JlTW9kYWwobG9yZSk7XG5cdFx0fTtcblx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJEZWxldGVcIiB9KS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKGNvbmZpcm0oYERlbGV0ZSBsb3JlIFwiJHtsb3JlLm5hbWV9XCI/YCkpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZGVsZXRlTG9yZShsb3JlLmlkKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoXCJMb3JlIGRlbGV0ZWRcIik7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8vIFJlbmRlciBjaGlsZHJlblxuXHRcdGNvbnN0IGNoaWxkcmVuID0gdGhpcy5sb3Jlcy5maWx0ZXIobCA9PiBsLnBhcmVudF9pZCA9PT0gbG9yZS5pZCk7XG5cdFx0Zm9yIChjb25zdCBjaGlsZCBvZiBjaGlsZHJlbi5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0dGhpcy5yZW5kZXJMb3JlSXRlbShjb250YWluZXIsIGNoaWxkLCBsZXZlbCArIDEpO1xuXHRcdH1cblx0fVxuXG5cdHJlbmRlckZhY3Rpb25zVGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRpZiAodGhpcy5mYWN0aW9ucy5sZW5ndGggPT09IDApIHtcblx0XHRcdGNvbnRhaW5lci5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIGZhY3Rpb25zIGZvdW5kLiBDcmVhdGUgeW91ciBmaXJzdCBmYWN0aW9uIVwiIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEdyb3VwIGJ5IGhpZXJhcmNoeSBsZXZlbFxuXHRcdGNvbnN0IHJvb3RGYWN0aW9ucyA9IHRoaXMuZmFjdGlvbnMuZmlsdGVyKGYgPT4gIWYucGFyZW50X2lkKTtcblx0XHRjb25zdCBsaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbGlzdFwiIH0pO1xuXHRcdFxuXHRcdGZvciAoY29uc3QgZmFjdGlvbiBvZiByb290RmFjdGlvbnMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdHRoaXMucmVuZGVyRmFjdGlvbkl0ZW0obGlzdCwgZmFjdGlvbiwgMCk7XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyRmFjdGlvbkl0ZW0oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZmFjdGlvbjogRmFjdGlvbiwgbGV2ZWw6IG51bWJlcikge1xuXHRcdGNvbnN0IGl0ZW0gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtXCIgfSk7XG5cdFx0aXRlbS5zdHlsZS5tYXJnaW5MZWZ0ID0gYCR7bGV2ZWwgKiAxfXJlbWA7XG5cdFx0XG5cdFx0Y29uc3QgdGl0bGVSb3cgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIiB9KTtcblx0XHR0aXRsZVJvdy50ZXh0Q29udGVudCA9IGZhY3Rpb24ubmFtZTtcblx0XHRpZiAoZmFjdGlvbi50eXBlKSB7XG5cdFx0XHRjb25zdCB0eXBlQmFkZ2UgPSB0aXRsZVJvdy5jcmVhdGVTcGFuKHsgY2xzOiBcInN0b3J5LWVuZ2luZS1iYWRnZVwiIH0pO1xuXHRcdFx0dHlwZUJhZGdlLnRleHRDb250ZW50ID0gZmFjdGlvbi50eXBlO1xuXHRcdH1cblx0XHRcblx0XHRjb25zdCBtZXRhID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRpZiAoZmFjdGlvbi5kZXNjcmlwdGlvbikge1xuXHRcdFx0bWV0YS5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBmYWN0aW9uLmRlc2NyaXB0aW9uLnN1YnN0cmluZygwLCA1MCkgKyAoZmFjdGlvbi5kZXNjcmlwdGlvbi5sZW5ndGggPiA1MCA/IFwiLi4uXCIgOiBcIlwiKSB9KTtcblx0XHR9XG5cblx0XHRjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0tYWN0aW9uc1wiIH0pO1xuXHRcdC8vIExpbmsgdG8gRW50aXR5XG5cdFx0Y29uc3QgbGlua0J0biA9IGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIik7XG5cdFx0c2V0SWNvbihsaW5rQnRuLCBcImxpbmtcIik7XG5cdFx0bGlua0J0bi50aXRsZSA9IFwiTGluayB0byBFbnRpdHlcIjtcblx0XHRsaW5rQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNob3dBZGRGYWN0aW9uUmVmZXJlbmNlTW9kYWwoZmFjdGlvbik7XG5cdFx0Ly8gQ3JlYXRlIFN1Yi1GYWN0aW9uXG5cdFx0Y29uc3Qgc3ViQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiKTtcblx0XHRzZXRJY29uKHN1YkJ0biwgXCJmb2xkZXItcGx1c1wiKTtcblx0XHRzdWJCdG4udGl0bGUgPSBcIkNyZWF0ZSBTdWItRmFjdGlvblwiO1xuXHRcdHN1YkJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zaG93Q3JlYXRlRmFjdGlvbk1vZGFsKGZhY3Rpb24uaWQpO1xuXHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlZpZXcgRGV0YWlsc1wiIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLnNob3dGYWN0aW9uRGV0YWlsc01vZGFsKGZhY3Rpb24pO1xuXHRcdH07XG5cdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiRWRpdFwiIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLnNob3dFZGl0RmFjdGlvbk1vZGFsKGZhY3Rpb24pO1xuXHRcdH07XG5cdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiRGVsZXRlXCIgfSkub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmIChjb25maXJtKGBEZWxldGUgZmFjdGlvbiBcIiR7ZmFjdGlvbi5uYW1lfVwiP2ApKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmRlbGV0ZUZhY3Rpb24oZmFjdGlvbi5pZCk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiRmFjdGlvbiBkZWxldGVkXCIpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvLyBSZW5kZXIgY2hpbGRyZW5cblx0XHRjb25zdCBjaGlsZHJlbiA9IHRoaXMuZmFjdGlvbnMuZmlsdGVyKGYgPT4gZi5wYXJlbnRfaWQgPT09IGZhY3Rpb24uaWQpO1xuXHRcdGZvciAoY29uc3QgY2hpbGQgb2YgY2hpbGRyZW4uc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdHRoaXMucmVuZGVyRmFjdGlvbkl0ZW0oY29udGFpbmVyLCBjaGlsZCwgbGV2ZWwgKyAxKTtcblx0XHR9XG5cdH1cblxuXHQvLyBNb2RhbCBtZXRob2RzIGZvciBXb3JsZCBlbnRpdGllc1xuXHRzaG93Q3JlYXRlQ2hhcmFjdGVyTW9kYWwoKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJDcmVhdGUgQ2hhcmFjdGVyXCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSBcIlwiO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IFwiXCI7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IG5hbWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIgfSk7XG5cdFx0bmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBjcmVhdGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNyZWF0ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdGNyZWF0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUNoYXJhY3Rlcih0aGlzLmN1cnJlbnRXb3JsZCEuaWQsIHsgbmFtZTogbmFtZS50cmltKCksIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKCkgfSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQ2hhcmFjdGVyIGNyZWF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHRcdG5hbWVJbnB1dC5mb2N1cygpO1xuXHR9XG5cblx0c2hvd0VkaXRDaGFyYWN0ZXJNb2RhbChjaGFyYWN0ZXI6IENoYXJhY3Rlcikge1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJFZGl0IENoYXJhY3RlclwiKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBuYW1lID0gY2hhcmFjdGVyLm5hbWU7XG5cdFx0bGV0IGRlc2NyaXB0aW9uID0gY2hhcmFjdGVyLmRlc2NyaXB0aW9uO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCB2YWx1ZTogbmFtZSB9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0ZGVzY0lucHV0LnZhbHVlID0gZGVzY3JpcHRpb247XG5cdFx0ZGVzY0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlNhdmVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIW5hbWUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJOYW1lIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCB1cGRhdGVkID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUNoYXJhY3RlcihjaGFyYWN0ZXIuaWQsIHsgbmFtZTogbmFtZS50cmltKCksIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKCkgfSk7XG5cdFx0XHRcdC8vIFVwZGF0ZSBjaGFyYWN0ZXIgZGV0YWlscyB2aWV3IGlmIHdlJ3JlIGluIGNoYXJhY3RlciBkZXRhaWxzIHZpZXdcblx0XHRcdFx0aWYgKHRoaXMudmlld01vZGUgPT09IFwiY2hhcmFjdGVyLWRldGFpbHNcIiAmJiB0aGlzLmNoYXJhY3RlckRldGFpbHNWaWV3ICYmIHRoaXMuY2hhcmFjdGVyRGV0YWlsc1ZpZXdbXCJjaGFyYWN0ZXJcIl0uaWQgPT09IGNoYXJhY3Rlci5pZCkge1xuXHRcdFx0XHRcdHRoaXMuY2hhcmFjdGVyRGV0YWlsc1ZpZXcudXBkYXRlQ2hhcmFjdGVyKHVwZGF0ZWQpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkNoYXJhY3RlciB1cGRhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHNob3dDcmVhdGVMb2NhdGlvbk1vZGFsKCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50V29ybGQpIHJldHVybjtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiQ3JlYXRlIExvY2F0aW9uXCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSBcIlwiO1xuXHRcdGxldCB0eXBlID0gXCJcIjtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSBcIlwiO1xuXHRcdGxldCBwYXJlbnRJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IG5hbWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIgfSk7XG5cdFx0bmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlR5cGVcIiB9KTtcblx0XHRjb25zdCB0eXBlSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCBwbGFjZWhvbGRlcjogXCJlLmcuLCBDaXR5LCBGb3Jlc3QsIEJ1aWxkaW5nXCIgfSk7XG5cdFx0dHlwZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IHR5cGUgPSB0eXBlSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlBhcmVudCBMb2NhdGlvblwiIH0pO1xuXHRcdGNvbnN0IHBhcmVudFNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdHBhcmVudFNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcIlwiLCB0ZXh0OiBcIk5vbmUgKFJvb3QgTG9jYXRpb24pXCIgfSk7XG5cdFx0Zm9yIChjb25zdCBsb2Mgb2YgdGhpcy5sb2NhdGlvbnMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdHBhcmVudFNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBsb2MuaWQsIHRleHQ6IGxvYy5uYW1lIH0pO1xuXHRcdH1cblx0XHRwYXJlbnRTZWxlY3Qub25jaGFuZ2UgPSAoKSA9PiB7IHBhcmVudElkID0gcGFyZW50U2VsZWN0LnZhbHVlIHx8IG51bGw7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBjcmVhdGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNyZWF0ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdGNyZWF0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUxvY2F0aW9uKHRoaXMuY3VycmVudFdvcmxkIS5pZCwgeyBcblx0XHRcdFx0XHRuYW1lOiBuYW1lLnRyaW0oKSwgXG5cdFx0XHRcdFx0dHlwZTogdHlwZS50cmltKCksXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSxcblx0XHRcdFx0XHRwYXJlbnRfaWQ6IHBhcmVudElkXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkxvY2F0aW9uIGNyZWF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHRcdG5hbWVJbnB1dC5mb2N1cygpO1xuXHR9XG5cblx0c2hvd0VkaXRMb2NhdGlvbk1vZGFsKGxvY2F0aW9uOiBMb2NhdGlvbikge1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJFZGl0IExvY2F0aW9uXCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSBsb2NhdGlvbi5uYW1lO1xuXHRcdGxldCB0eXBlID0gbG9jYXRpb24udHlwZTtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSBsb2NhdGlvbi5kZXNjcmlwdGlvbjtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTmFtZSAqXCIgfSk7XG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgdmFsdWU6IG5hbWUgfSk7XG5cdFx0bmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlR5cGVcIiB9KTtcblx0XHRjb25zdCB0eXBlSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCB2YWx1ZTogdHlwZSB9KTtcblx0XHR0eXBlSW5wdXQub25pbnB1dCA9ICgpID0+IHsgdHlwZSA9IHR5cGVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0ZGVzY0lucHV0LnZhbHVlID0gZGVzY3JpcHRpb247XG5cdFx0ZGVzY0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlNhdmVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIW5hbWUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJOYW1lIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlTG9jYXRpb24obG9jYXRpb24uaWQsIHsgbmFtZTogbmFtZS50cmltKCksIHR5cGU6IHR5cGUudHJpbSgpLCBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpIH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkxvY2F0aW9uIHVwZGF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0c2hvd0NyZWF0ZUFydGlmYWN0TW9kYWwoKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJDcmVhdGUgQXJ0aWZhY3RcIik7XG5cdFx0XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgbmFtZSA9IFwiXCI7XG5cdFx0bGV0IGRlc2NyaXB0aW9uID0gXCJcIjtcblx0XHRsZXQgcmFyaXR5ID0gXCJcIjtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTmFtZSAqXCIgfSk7XG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiB9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiUmFyaXR5XCIgfSk7XG5cdFx0Y29uc3QgcmFyaXR5U2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0cmFyaXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiXCIsIHRleHQ6IFwiU2VsZWN0IFJhcml0eVwiIH0pO1xuXHRcdFtcIkNvbW1vblwiLCBcIlVuY29tbW9uXCIsIFwiUmFyZVwiLCBcIkVwaWNcIiwgXCJMZWdlbmRhcnlcIiwgXCJVbmlxdWVcIl0uZm9yRWFjaChyID0+IHtcblx0XHRcdHJhcml0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiByLnRvTG93ZXJDYXNlKCksIHRleHQ6IHIgfSk7XG5cdFx0fSk7XG5cdFx0cmFyaXR5U2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4geyByYXJpdHkgPSByYXJpdHlTZWxlY3QudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBjcmVhdGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNyZWF0ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdGNyZWF0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUFydGlmYWN0KHRoaXMuY3VycmVudFdvcmxkIS5pZCwgeyBcblx0XHRcdFx0XHRuYW1lOiBuYW1lLnRyaW0oKSwgXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSxcblx0XHRcdFx0XHRyYXJpdHk6IHJhcml0eVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJBcnRpZmFjdCBjcmVhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0XHRuYW1lSW5wdXQuZm9jdXMoKTtcblx0fVxuXG5cdHNob3dFZGl0QXJ0aWZhY3RNb2RhbChhcnRpZmFjdDogQXJ0aWZhY3QpIHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiRWRpdCBBcnRpZmFjdFwiKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBuYW1lID0gYXJ0aWZhY3QubmFtZTtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSBhcnRpZmFjdC5kZXNjcmlwdGlvbjtcblx0XHRsZXQgcmFyaXR5ID0gYXJ0aWZhY3QucmFyaXR5O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCB2YWx1ZTogbmFtZSB9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiUmFyaXR5XCIgfSk7XG5cdFx0Y29uc3QgcmFyaXR5U2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0cmFyaXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiXCIsIHRleHQ6IFwiU2VsZWN0IFJhcml0eVwiIH0pO1xuXHRcdFtcIkNvbW1vblwiLCBcIlVuY29tbW9uXCIsIFwiUmFyZVwiLCBcIkVwaWNcIiwgXCJMZWdlbmRhcnlcIiwgXCJVbmlxdWVcIl0uZm9yRWFjaChyID0+IHtcblx0XHRcdGNvbnN0IG9wdCA9IHJhcml0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiByLnRvTG93ZXJDYXNlKCksIHRleHQ6IHIgfSk7XG5cdFx0XHRpZiAocmFyaXR5LnRvTG93ZXJDYXNlKCkgPT09IHIudG9Mb3dlckNhc2UoKSkgb3B0LnNlbGVjdGVkID0gdHJ1ZTtcblx0XHR9KTtcblx0XHRyYXJpdHlTZWxlY3Qub25jaGFuZ2UgPSAoKSA9PiB7IHJhcml0eSA9IHJhcml0eVNlbGVjdC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0ZGVzY0lucHV0LnZhbHVlID0gZGVzY3JpcHRpb247XG5cdFx0ZGVzY0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlNhdmVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIW5hbWUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJOYW1lIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlQXJ0aWZhY3QoYXJ0aWZhY3QuaWQsIHsgbmFtZTogbmFtZS50cmltKCksIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKCksIHJhcml0eTogcmFyaXR5IH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkFydGlmYWN0IHVwZGF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0c2hvd0NyZWF0ZUV2ZW50TW9kYWwoKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJDcmVhdGUgRXZlbnRcIik7XG5cdFx0XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgbmFtZSA9IFwiXCI7XG5cdFx0bGV0IHR5cGUgPSBcIlwiO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IFwiXCI7XG5cdFx0bGV0IGltcG9ydGFuY2UgPSA1O1xuXHRcdGxldCB0aW1lbGluZVBvc2l0aW9uOiBudW1iZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cblx0XHQvLyA9PT0gQkFTSUMgSU5GTyA9PT1cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIkJhc2ljIEluZm9cIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1tb2RhbC1zZWN0aW9uXCIgfSk7XG5cdFx0XG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJFdmVudCBOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyBcblx0XHRcdHR5cGU6IFwidGV4dFwiLCBcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIixcblx0XHRcdHBsYWNlaG9sZGVyOiBcImUuZy4sIFRoZSBCYXR0bGUgb2YgQ3JpbXNvbiBGaWVsZHNcIlxuXHRcdH0pO1xuXHRcdG5hbWVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBuYW1lID0gbmFtZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJFdmVudCBUeXBlXCIgfSk7XG5cdFx0Y29uc3QgdHlwZVNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJcIiwgdGV4dDogXCJTZWxlY3QgdHlwZS4uLlwiIH0pO1xuXHRcdFtcIkJhdHRsZVwiLCBcIlRyZWF0eVwiLCBcIkRpc2NvdmVyeVwiLCBcIkJpcnRoXCIsIFwiRGVhdGhcIiwgXCJDb3JvbmF0aW9uXCIsIFwiRGlzYXN0ZXJcIiwgXCJNaWdyYXRpb25cIiwgXCJGb3VuZGluZ1wiLCBcIk90aGVyXCJdLmZvckVhY2godCA9PiB7XG5cdFx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IHQsIHRleHQ6IHQgfSk7XG5cdFx0fSk7XG5cdFx0dHlwZVNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHsgdHlwZSA9IHR5cGVTZWxlY3QudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIsXG5cdFx0XHRwbGFjZWhvbGRlcjogXCJXaGF0IGhhcHBlbmVkIGR1cmluZyB0aGlzIGV2ZW50P1wiXG5cdFx0fSk7XG5cdFx0ZGVzY0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Ly8gPT09IFRJTUVMSU5FID09PVxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiXHVEODNEXHVEQ0M1IFRpbWVsaW5lIFBvc2l0aW9uXCIsIGNsczogXCJzdG9yeS1lbmdpbmUtbW9kYWwtc2VjdGlvblwiIH0pO1xuXHRcdFxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiWWVhciAocmVsYXRpdmUgdG8gRXBvY2gvWWVhciBaZXJvKVwiIH0pO1xuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgXG5cdFx0XHR0ZXh0OiBcIlVzZSBwb3NpdGl2ZSBudW1iZXJzIGZvciB5ZWFycyBhZnRlciBZZWFyIFplcm8sIG5lZ2F0aXZlIGZvciB5ZWFycyBiZWZvcmUuXCIsXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWhpbnRcIlxuXHRcdH0pO1xuXHRcdGNvbnN0IHRpbWVsaW5lUG9zSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyBcblx0XHRcdHR5cGU6IFwibnVtYmVyXCIsIFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCBcblx0XHRcdHBsYWNlaG9sZGVyOiBcImUuZy4sIDEwMCAoWWVhciAxMDApIG9yIC01MCAoNTAgeWVhcnMgYmVmb3JlIFllYXIgWmVybylcIlxuXHRcdH0pO1xuXHRcdHRpbWVsaW5lUG9zSW5wdXQub25pbnB1dCA9ICgpID0+IHsgXG5cdFx0XHRjb25zdCB2YWwgPSB0aW1lbGluZVBvc0lucHV0LnZhbHVlO1xuXHRcdFx0dGltZWxpbmVQb3NpdGlvbiA9IHZhbCA/IHBhcnNlSW50KHZhbCkgOiB1bmRlZmluZWQ7XG5cdFx0fTtcblxuXHRcdC8vID09PSBJTVBPUlRBTkNFID09PVxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiXHUyQjUwIEltcG9ydGFuY2VcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1tb2RhbC1zZWN0aW9uXCIgfSk7XG5cdFx0XG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJJbXBvcnRhbmNlIExldmVsICgxLTEwKVwiIH0pO1xuXHRcdGNvbnN0IGltcG9ydGFuY2VJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IFxuXHRcdFx0dHlwZTogXCJyYW5nZVwiLCBcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtcmFuZ2VcIixcblx0XHRcdHZhbHVlOiBcIjVcIiwgXG5cdFx0XHRhdHRyOiB7IG1pbjogXCIxXCIsIG1heDogXCIxMFwiIH0gXG5cdFx0fSk7XG5cdFx0Y29uc3QgaW1wb3J0YW5jZVZhbHVlID0gY29udGVudC5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBcIiA1XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtcmFuZ2UtdmFsdWVcIiB9KTtcblx0XHRpbXBvcnRhbmNlSW5wdXQub25pbnB1dCA9ICgpID0+IHsgXG5cdFx0XHRpbXBvcnRhbmNlID0gcGFyc2VJbnQoaW1wb3J0YW5jZUlucHV0LnZhbHVlKSB8fCA1O1xuXHRcdFx0aW1wb3J0YW5jZVZhbHVlLnRleHRDb250ZW50ID0gYCAke2ltcG9ydGFuY2V9YDtcblx0XHR9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IGNyZWF0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ3JlYXRlIEV2ZW50XCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0Y3JlYXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIW5hbWUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJOYW1lIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlRXZlbnQodGhpcy5jdXJyZW50V29ybGQhLmlkLCB7IFxuXHRcdFx0XHRcdG5hbWU6IG5hbWUudHJpbSgpLCBcblx0XHRcdFx0XHR0eXBlOiB0eXBlLnRyaW0oKSB8fCB1bmRlZmluZWQsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSB8fCB1bmRlZmluZWQsXG5cdFx0XHRcdFx0aW1wb3J0YW5jZTogTWF0aC5tYXgoMSwgTWF0aC5taW4oMTAsIGltcG9ydGFuY2UpKSxcblx0XHRcdFx0XHR0aW1lbGluZV9wb3NpdGlvbjogdGltZWxpbmVQb3NpdGlvblxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJFdmVudCBjcmVhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0XHRuYW1lSW5wdXQuZm9jdXMoKTtcblx0fVxuXG5cdHNob3dFZGl0RXZlbnRNb2RhbChldmVudDogV29ybGRFdmVudCkge1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJFZGl0IEV2ZW50XCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSBldmVudC5uYW1lO1xuXHRcdGxldCB0eXBlID0gZXZlbnQudHlwZSB8fCBcIlwiO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IGV2ZW50LmRlc2NyaXB0aW9uIHx8IFwiXCI7XG5cdFx0bGV0IGltcG9ydGFuY2UgPSBldmVudC5pbXBvcnRhbmNlO1xuXHRcdGxldCB0aW1lbGluZVBvc2l0aW9uOiBudW1iZXIgfCB1bmRlZmluZWQgPSBldmVudC50aW1lbGluZV9wb3NpdGlvbiA/PyB1bmRlZmluZWQ7XG5cblx0XHQvLyA9PT0gQkFTSUMgSU5GTyA9PT1cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIkJhc2ljIEluZm9cIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1tb2RhbC1zZWN0aW9uXCIgfSk7XG5cdFx0XG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJFdmVudCBOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCB2YWx1ZTogbmFtZSB9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRXZlbnQgVHlwZVwiIH0pO1xuXHRcdGNvbnN0IHR5cGVTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiXCIsIHRleHQ6IFwiU2VsZWN0IHR5cGUuLi5cIiB9KTtcblx0XHRbXCJCYXR0bGVcIiwgXCJUcmVhdHlcIiwgXCJEaXNjb3ZlcnlcIiwgXCJCaXJ0aFwiLCBcIkRlYXRoXCIsIFwiQ29yb25hdGlvblwiLCBcIkRpc2FzdGVyXCIsIFwiTWlncmF0aW9uXCIsIFwiRm91bmRpbmdcIiwgXCJFcG9jaFwiLCBcIk90aGVyXCJdLmZvckVhY2godCA9PiB7XG5cdFx0XHRjb25zdCBvcHQgPSB0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IHQsIHRleHQ6IHQgfSk7XG5cdFx0XHRpZiAodHlwZS50b0xvd2VyQ2FzZSgpID09PSB0LnRvTG93ZXJDYXNlKCkpIG9wdC5zZWxlY3RlZCA9IHRydWU7XG5cdFx0fSk7XG5cdFx0dHlwZVNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHsgdHlwZSA9IHR5cGVTZWxlY3QudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGRlc2NJbnB1dC52YWx1ZSA9IGRlc2NyaXB0aW9uO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdC8vID09PSBUSU1FTElORSA9PT1cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIlx1RDgzRFx1RENDNSBUaW1lbGluZSBQb3NpdGlvblwiLCBjbHM6IFwic3RvcnktZW5naW5lLW1vZGFsLXNlY3Rpb25cIiB9KTtcblx0XHRcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlllYXIgKHJlbGF0aXZlIHRvIEVwb2NoL1llYXIgWmVybylcIiB9KTtcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IFxuXHRcdFx0dGV4dDogXCJVc2UgcG9zaXRpdmUgbnVtYmVycyBmb3IgeWVhcnMgYWZ0ZXIgWWVhciBaZXJvLCBuZWdhdGl2ZSBmb3IgeWVhcnMgYmVmb3JlLlwiLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1oaW50XCJcblx0XHR9KTtcblx0XHRjb25zdCB0aW1lbGluZVBvc0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgXG5cdFx0XHR0eXBlOiBcIm51bWJlclwiLCBcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgXG5cdFx0XHR2YWx1ZTogdGltZWxpbmVQb3NpdGlvbj8udG9TdHJpbmcoKSA/PyBcIlwiXG5cdFx0fSk7XG5cdFx0dGltZWxpbmVQb3NJbnB1dC5wbGFjZWhvbGRlciA9IFwiZS5nLiwgMTAwIG9yIC01MFwiO1xuXHRcdHRpbWVsaW5lUG9zSW5wdXQub25pbnB1dCA9ICgpID0+IHsgXG5cdFx0XHRjb25zdCB2YWwgPSB0aW1lbGluZVBvc0lucHV0LnZhbHVlO1xuXHRcdFx0dGltZWxpbmVQb3NpdGlvbiA9IHZhbCA/IHBhcnNlSW50KHZhbCkgOiB1bmRlZmluZWQ7XG5cdFx0fTtcblxuXHRcdC8vID09PSBJTVBPUlRBTkNFID09PVxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiXHUyQjUwIEltcG9ydGFuY2VcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1tb2RhbC1zZWN0aW9uXCIgfSk7XG5cdFx0XG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJJbXBvcnRhbmNlIExldmVsICgxLTEwKVwiIH0pO1xuXHRcdGNvbnN0IGltcG9ydGFuY2VJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IFxuXHRcdFx0dHlwZTogXCJyYW5nZVwiLCBcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtcmFuZ2VcIixcblx0XHRcdHZhbHVlOiBpbXBvcnRhbmNlLnRvU3RyaW5nKCksIFxuXHRcdFx0YXR0cjogeyBtaW46IFwiMVwiLCBtYXg6IFwiMTBcIiB9IFxuXHRcdH0pO1xuXHRcdGNvbnN0IGltcG9ydGFuY2VWYWx1ZSA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogYCAke2ltcG9ydGFuY2V9YCwgY2xzOiBcInN0b3J5LWVuZ2luZS1yYW5nZS12YWx1ZVwiIH0pO1xuXHRcdGltcG9ydGFuY2VJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBcblx0XHRcdGltcG9ydGFuY2UgPSBwYXJzZUludChpbXBvcnRhbmNlSW5wdXQudmFsdWUpIHx8IDU7XG5cdFx0XHRpbXBvcnRhbmNlVmFsdWUudGV4dENvbnRlbnQgPSBgICR7aW1wb3J0YW5jZX1gO1xuXHRcdH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghbmFtZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk5hbWUgaXMgcmVxdWlyZWRcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVFdmVudChldmVudC5pZCwgeyBcblx0XHRcdFx0XHRuYW1lOiBuYW1lLnRyaW0oKSwgXG5cdFx0XHRcdFx0dHlwZTogdHlwZS50cmltKCkgfHwgdW5kZWZpbmVkLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKCkgfHwgdW5kZWZpbmVkLFxuXHRcdFx0XHRcdGltcG9ydGFuY2U6IE1hdGgubWF4KDEsIE1hdGgubWluKDEwLCBpbXBvcnRhbmNlKSksXG5cdFx0XHRcdFx0dGltZWxpbmVfcG9zaXRpb246IHRpbWVsaW5lUG9zaXRpb25cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiRXZlbnQgdXBkYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRzaG93Q3JlYXRlVHJhaXRNb2RhbCgpIHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiQ3JlYXRlIFRyYWl0XCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSBcIlwiO1xuXHRcdGxldCBjYXRlZ29yeSA9IFwiXCI7XG5cdFx0bGV0IGRlc2NyaXB0aW9uID0gXCJcIjtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTmFtZSAqXCIgfSk7XG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiB9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiQ2F0ZWdvcnlcIiB9KTtcblx0XHRjb25zdCBjYXRlZ29yeUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgcGxhY2Vob2xkZXI6IFwiZS5nLiwgUGVyc29uYWxpdHksIFBoeXNpY2FsLCBCYWNrZ3JvdW5kXCIgfSk7XG5cdFx0Y2F0ZWdvcnlJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBjYXRlZ29yeSA9IGNhdGVnb3J5SW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBjcmVhdGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNyZWF0ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdGNyZWF0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZVRyYWl0KHsgXG5cdFx0XHRcdFx0bmFtZTogbmFtZS50cmltKCksIFxuXHRcdFx0XHRcdGNhdGVnb3J5OiBjYXRlZ29yeS50cmltKCksXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJUcmFpdCBjcmVhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0XHRuYW1lSW5wdXQuZm9jdXMoKTtcblx0fVxuXG5cdHNob3dFZGl0VHJhaXRNb2RhbCh0cmFpdDogVHJhaXQpIHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiRWRpdCBUcmFpdFwiKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBuYW1lID0gdHJhaXQubmFtZTtcblx0XHRsZXQgY2F0ZWdvcnkgPSB0cmFpdC5jYXRlZ29yeTtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSB0cmFpdC5kZXNjcmlwdGlvbjtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTmFtZSAqXCIgfSk7XG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgdmFsdWU6IG5hbWUgfSk7XG5cdFx0bmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkNhdGVnb3J5XCIgfSk7XG5cdFx0Y29uc3QgY2F0ZWdvcnlJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsIHZhbHVlOiBjYXRlZ29yeSB9KTtcblx0XHRjYXRlZ29yeUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGNhdGVnb3J5ID0gY2F0ZWdvcnlJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0ZGVzY0lucHV0LnZhbHVlID0gZGVzY3JpcHRpb247XG5cdFx0ZGVzY0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlNhdmVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIW5hbWUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJOYW1lIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlVHJhaXQodHJhaXQuaWQsIHsgbmFtZTogbmFtZS50cmltKCksIGNhdGVnb3J5OiBjYXRlZ29yeS50cmltKCksIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKCkgfSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiVHJhaXQgdXBkYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRyZW5kZXJUaW1lQ29uZmlnRGlzcGxheShjb250YWluZXI6IEhUTUxFbGVtZW50LCBjb25maWc6IFRpbWVDb25maWcpIHtcblx0XHRjb250YWluZXIuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiVGltZSBDb25maWd1cmF0aW9uXCIgfSk7XG5cdFx0XG5cdFx0Y29uc3QgZ3JpZCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXRpbWUtY29uZmlnLWdyaWRcIiB9KTtcblx0XHRcblx0XHQvLyBNb3N0cmFyIGNhbXBvc1xuXHRcdGdyaWQuY3JlYXRlRGl2KCkuc2V0VGV4dChgQmFzZSBVbml0OiAke2NvbmZpZy5iYXNlX3VuaXR9YCk7XG5cdFx0Z3JpZC5jcmVhdGVEaXYoKS5zZXRUZXh0KGBIb3Vycy9EYXk6ICR7Y29uZmlnLmhvdXJzX3Blcl9kYXl9YCk7XG5cdFx0Z3JpZC5jcmVhdGVEaXYoKS5zZXRUZXh0KGBEYXlzL1dlZWs6ICR7Y29uZmlnLmRheXNfcGVyX3dlZWt9YCk7XG5cdFx0Z3JpZC5jcmVhdGVEaXYoKS5zZXRUZXh0KGBEYXlzL1llYXI6ICR7Y29uZmlnLmRheXNfcGVyX3llYXJ9YCk7XG5cdFx0Z3JpZC5jcmVhdGVEaXYoKS5zZXRUZXh0KGBNb250aHMvWWVhcjogJHtjb25maWcubW9udGhzX3Blcl95ZWFyfWApO1xuXHRcdFxuXHRcdGlmIChjb25maWcuZXJhX25hbWUpIHtcblx0XHRcdGdyaWQuY3JlYXRlRGl2KCkuc2V0VGV4dChgRXJhOiAke2NvbmZpZy5lcmFfbmFtZX1gKTtcblx0XHR9XG5cdFx0aWYgKGNvbmZpZy5tb250aF9uYW1lcz8ubGVuZ3RoKSB7XG5cdFx0XHRncmlkLmNyZWF0ZURpdigpLnNldFRleHQoYE1vbnRoczogJHtjb25maWcubW9udGhfbmFtZXMuam9pbihcIiwgXCIpfWApO1xuXHRcdH1cblx0XHRpZiAoY29uZmlnLnllYXJfemVybyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRncmlkLmNyZWF0ZURpdigpLnNldFRleHQoYFllYXIgWmVybzogJHtjb25maWcueWVhcl96ZXJvfWApO1xuXHRcdH1cblx0fVxuXG5cdHNob3dUaW1lQ29uZmlnTW9kYWwoZXhpc3RpbmdDb25maWc6IFRpbWVDb25maWcgfCBudWxsKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoZXhpc3RpbmdDb25maWcgPyBcIkVkaXQgVGltZSBDb25maWd1cmF0aW9uXCIgOiBcIkNyZWF0ZSBUaW1lIENvbmZpZ3VyYXRpb25cIik7XG5cdFx0XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgYmFzZVVuaXQgPSBleGlzdGluZ0NvbmZpZz8uYmFzZV91bml0IHx8IFwieWVhclwiO1xuXHRcdGxldCBob3Vyc1BlckRheSA9IGV4aXN0aW5nQ29uZmlnPy5ob3Vyc19wZXJfZGF5IHx8IDI0O1xuXHRcdGxldCBkYXlzUGVyV2VlayA9IGV4aXN0aW5nQ29uZmlnPy5kYXlzX3Blcl93ZWVrIHx8IDc7XG5cdFx0bGV0IGRheXNQZXJZZWFyID0gZXhpc3RpbmdDb25maWc/LmRheXNfcGVyX3llYXIgfHwgMzY1O1xuXHRcdGxldCBtb250aHNQZXJZZWFyID0gZXhpc3RpbmdDb25maWc/Lm1vbnRoc19wZXJfeWVhciB8fCAxMjtcblx0XHRsZXQgZXJhTmFtZSA9IGV4aXN0aW5nQ29uZmlnPy5lcmFfbmFtZSB8fCBcIlwiO1xuXHRcdGxldCB5ZWFyWmVybyA9IGV4aXN0aW5nQ29uZmlnPy55ZWFyX3plcm8/LnRvU3RyaW5nKCkgfHwgXCJcIjtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiQmFzZSBVbml0ICpcIiB9KTtcblx0XHRjb25zdCBiYXNlVW5pdFNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdFtcInllYXJcIiwgXCJkYXlcIiwgXCJob3VyXCIsIFwiY3VzdG9tXCJdLmZvckVhY2godW5pdCA9PiB7XG5cdFx0XHRjb25zdCBvcHQgPSBiYXNlVW5pdFNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiB1bml0LCB0ZXh0OiB1bml0IH0pO1xuXHRcdFx0aWYgKGJhc2VVbml0ID09PSB1bml0KSBvcHQuc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdH0pO1xuXHRcdGJhc2VVbml0U2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4geyBiYXNlVW5pdCA9IGJhc2VVbml0U2VsZWN0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJIb3VycyBwZXIgRGF5XCIgfSk7XG5cdFx0Y29uc3QgaG91cnNQZXJEYXlJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IFxuXHRcdFx0dHlwZTogXCJudW1iZXJcIiwgXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsXG5cdFx0XHR2YWx1ZTogaG91cnNQZXJEYXkudG9TdHJpbmcoKVxuXHRcdH0pO1xuXHRcdGhvdXJzUGVyRGF5SW5wdXQub25pbnB1dCA9ICgpID0+IHsgaG91cnNQZXJEYXkgPSBwYXJzZUZsb2F0KGhvdXJzUGVyRGF5SW5wdXQudmFsdWUpIHx8IDI0OyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEYXlzIHBlciBXZWVrXCIgfSk7XG5cdFx0Y29uc3QgZGF5c1BlcldlZWtJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IFxuXHRcdFx0dHlwZTogXCJudW1iZXJcIiwgXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsXG5cdFx0XHR2YWx1ZTogZGF5c1BlcldlZWsudG9TdHJpbmcoKVxuXHRcdH0pO1xuXHRcdGRheXNQZXJXZWVrSW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGF5c1BlcldlZWsgPSBwYXJzZUludChkYXlzUGVyV2Vla0lucHV0LnZhbHVlKSB8fCA3OyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJEYXlzIHBlciBZZWFyXCIgfSk7XG5cdFx0Y29uc3QgZGF5c1BlclllYXJJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IFxuXHRcdFx0dHlwZTogXCJudW1iZXJcIiwgXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsXG5cdFx0XHR2YWx1ZTogZGF5c1BlclllYXIudG9TdHJpbmcoKVxuXHRcdH0pO1xuXHRcdGRheXNQZXJZZWFySW5wdXQub25pbnB1dCA9ICgpID0+IHsgZGF5c1BlclllYXIgPSBwYXJzZUludChkYXlzUGVyWWVhcklucHV0LnZhbHVlKSB8fCAzNjU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk1vbnRocyBwZXIgWWVhclwiIH0pO1xuXHRcdGNvbnN0IG1vbnRoc1BlclllYXJJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IFxuXHRcdFx0dHlwZTogXCJudW1iZXJcIiwgXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsXG5cdFx0XHR2YWx1ZTogbW9udGhzUGVyWWVhci50b1N0cmluZygpXG5cdFx0fSk7XG5cdFx0bW9udGhzUGVyWWVhcklucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG1vbnRoc1BlclllYXIgPSBwYXJzZUludChtb250aHNQZXJZZWFySW5wdXQudmFsdWUpIHx8IDEyOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJFcmEgTmFtZSAob3B0aW9uYWwpXCIgfSk7XG5cdFx0Y29uc3QgZXJhTmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgXG5cdFx0XHR0eXBlOiBcInRleHRcIiwgXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsXG5cdFx0XHR2YWx1ZTogZXJhTmFtZVxuXHRcdH0pO1xuXHRcdGVyYU5hbWVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBlcmFOYW1lID0gZXJhTmFtZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJZZWFyIFplcm8gKG9wdGlvbmFsKVwiIH0pO1xuXHRcdGNvbnN0IHllYXJaZXJvSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyBcblx0XHRcdHR5cGU6IFwibnVtYmVyXCIsIFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLFxuXHRcdFx0dmFsdWU6IHllYXJaZXJvXG5cdFx0fSk7XG5cdFx0eWVhclplcm9JbnB1dC5vbmlucHV0ID0gKCkgPT4geyB5ZWFyWmVybyA9IHllYXJaZXJvSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IHRpbWVDb25maWc6IFRpbWVDb25maWcgPSB7XG5cdFx0XHRcdFx0YmFzZV91bml0OiBiYXNlVW5pdCxcblx0XHRcdFx0XHRob3Vyc19wZXJfZGF5OiBob3Vyc1BlckRheSxcblx0XHRcdFx0XHRkYXlzX3Blcl93ZWVrOiBkYXlzUGVyV2Vlayxcblx0XHRcdFx0XHRkYXlzX3Blcl95ZWFyOiBkYXlzUGVyWWVhcixcblx0XHRcdFx0XHRtb250aHNfcGVyX3llYXI6IG1vbnRoc1BlclllYXIsXG5cdFx0XHRcdFx0ZXJhX25hbWU6IGVyYU5hbWUudHJpbSgpIHx8IHVuZGVmaW5lZCxcblx0XHRcdFx0XHR5ZWFyX3plcm86IHllYXJaZXJvID8gcGFyc2VJbnQoeWVhclplcm8pIDogdW5kZWZpbmVkLFxuXHRcdFx0XHR9O1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlV29ybGRUaW1lQ29uZmlnKHRoaXMuY3VycmVudFdvcmxkIS5pZCwgdGltZUNvbmZpZyk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiVGltZSBjb25maWd1cmF0aW9uIHNhdmVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdGFzeW5jIHNob3dUaW1lbGluZU1vZGFsKCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50V29ybGQpIHJldHVybjtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZXZlbnRzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldFRpbWVsaW5lKHRoaXMuY3VycmVudFdvcmxkLmlkKTtcblx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IFRpbWVsaW5lTW9kYWwodGhpcy5hcHAsIGV2ZW50cywgdGhpcy5jdXJyZW50V29ybGQudGltZV9jb25maWcgfHwgbnVsbCk7XG5cdFx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gbG9hZCB0aW1lbGluZVwifWAsIDUwMDApO1xuXHRcdH1cblx0fVxuXG5cdC8vIFBsYWNlaG9sZGVyIG1ldGhvZHMgZm9yIG1vZGFscyB0aGF0IHdpbGwgYmUgaW1wbGVtZW50ZWQgbGF0ZXJcblx0c2hvd0FyY2hldHlwZVRyYWl0c01vZGFsKGFyY2hldHlwZTogQXJjaGV0eXBlLCB0cmFpdHM6IGFueVtdKSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChgVHJhaXRzIGZvciAke2FyY2hldHlwZS5uYW1lfWApO1xuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0aWYgKHRyYWl0cy5sZW5ndGggPT09IDApIHtcblx0XHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyB0cmFpdHMgYXNzaWduZWQgdG8gdGhpcyBhcmNoZXR5cGUuXCIgfSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IGxpc3QgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbGlzdFwiIH0pO1xuXHRcdFx0Zm9yIChjb25zdCB0cmFpdCBvZiB0cmFpdHMpIHtcblx0XHRcdFx0Y29uc3QgaXRlbSA9IGxpc3QuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtXCIgfSk7XG5cdFx0XHRcdGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiLCB0ZXh0OiB0cmFpdC50cmFpdF9uYW1lIHx8IFwiVW5rbm93blwiIH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRzaG93Q3JlYXRlQXJjaGV0eXBlTW9kYWwoKSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkNyZWF0ZSBBcmNoZXR5cGVcIik7XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgbmFtZSA9IFwiXCI7XG5cdFx0bGV0IGRlc2NyaXB0aW9uID0gXCJcIjtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTmFtZSAqXCIgfSk7XG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiB9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0ZGVzY0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IGNyZWF0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ3JlYXRlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0Y3JlYXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIW5hbWUudHJpbSgpKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJOYW1lIGlzIHJlcXVpcmVkXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlQXJjaGV0eXBlKHsgbmFtZTogbmFtZS50cmltKCksIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKCkgfSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQXJjaGV0eXBlIGNyZWF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXHRcdG1vZGFsLm9wZW4oKTtcblx0XHRuYW1lSW5wdXQuZm9jdXMoKTtcblx0fVxuXG5cdHNob3dFZGl0QXJjaGV0eXBlTW9kYWwoYXJjaGV0eXBlOiBBcmNoZXR5cGUpIHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiRWRpdCBBcmNoZXR5cGVcIik7XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgbmFtZSA9IGFyY2hldHlwZS5uYW1lO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IGFyY2hldHlwZS5kZXNjcmlwdGlvbjtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTmFtZSAqXCIgfSk7XG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgdmFsdWU6IG5hbWUgfSk7XG5cdFx0bmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGRlc2NJbnB1dC52YWx1ZSA9IGRlc2NyaXB0aW9uO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTYXZlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUFyY2hldHlwZShhcmNoZXR5cGUuaWQsIHsgbmFtZTogbmFtZS50cmltKCksIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKCkgfSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQXJjaGV0eXBlIHVwZGF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHNob3dMb3JlRGV0YWlsc01vZGFsKGxvcmU6IExvcmUpIHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KGxvcmUubmFtZSk7XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBsb3JlLmRlc2NyaXB0aW9uIHx8IFwiTm8gZGVzY3JpcHRpb25cIiB9KTtcblx0XHRpZiAobG9yZS5ydWxlcykge1xuXHRcdFx0Y29udGVudC5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJSdWxlc1wiIH0pO1xuXHRcdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBsb3JlLnJ1bGVzIH0pO1xuXHRcdH1cblx0XHRpZiAobG9yZS5saW1pdGF0aW9ucykge1xuXHRcdFx0Y29udGVudC5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJMaW1pdGF0aW9uc1wiIH0pO1xuXHRcdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBsb3JlLmxpbWl0YXRpb25zIH0pO1xuXHRcdH1cblx0XHRpZiAobG9yZS5yZXF1aXJlbWVudHMpIHtcblx0XHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiUmVxdWlyZW1lbnRzXCIgfSk7XG5cdFx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IGxvcmUucmVxdWlyZW1lbnRzIH0pO1xuXHRcdH1cblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRzaG93Q3JlYXRlTG9yZU1vZGFsKHBhcmVudElkPzogc3RyaW5nIHwgbnVsbCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50V29ybGQpIHJldHVybjtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiQ3JlYXRlIExvcmVcIik7XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgbmFtZSA9IFwiXCI7XG5cdFx0bGV0IGNhdGVnb3J5ID0gXCJcIjtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSBcIlwiO1xuXHRcdGxldCBydWxlcyA9IFwiXCI7XG5cdFx0bGV0IGxpbWl0YXRpb25zID0gXCJcIjtcblx0XHRsZXQgcmVxdWlyZW1lbnRzID0gXCJcIjtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTmFtZSAqXCIgfSk7XG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiB9KTtcblx0XHRuYW1lSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiQ2F0ZWdvcnlcIiB9KTtcblx0XHRjb25zdCBjYXRlZ29yeUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiB9KTtcblx0XHRjYXRlZ29yeUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGNhdGVnb3J5ID0gY2F0ZWdvcnlJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0ZGVzY0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJSdWxlc1wiIH0pO1xuXHRcdGNvbnN0IHJ1bGVzSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0cnVsZXNJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBydWxlcyA9IHJ1bGVzSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkxpbWl0YXRpb25zXCIgfSk7XG5cdFx0Y29uc3QgbGltaXRhdGlvbnNJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRsaW1pdGF0aW9uc0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGxpbWl0YXRpb25zID0gbGltaXRhdGlvbnNJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiUmVxdWlyZW1lbnRzXCIgfSk7XG5cdFx0Y29uc3QgcmVxdWlyZW1lbnRzSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0cmVxdWlyZW1lbnRzSW5wdXQub25pbnB1dCA9ICgpID0+IHsgcmVxdWlyZW1lbnRzID0gcmVxdWlyZW1lbnRzSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3QgY3JlYXRlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDcmVhdGVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRjcmVhdGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghbmFtZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk5hbWUgaXMgcmVxdWlyZWRcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVMb3JlKHRoaXMuY3VycmVudFdvcmxkIS5pZCwge1xuXHRcdFx0XHRcdG5hbWU6IG5hbWUudHJpbSgpLFxuXHRcdFx0XHRcdGNhdGVnb3J5OiBjYXRlZ29yeS50cmltKCkgfHwgdW5kZWZpbmVkLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKCksXG5cdFx0XHRcdFx0cnVsZXM6IHJ1bGVzLnRyaW0oKSxcblx0XHRcdFx0XHRsaW1pdGF0aW9uczogbGltaXRhdGlvbnMudHJpbSgpLFxuXHRcdFx0XHRcdHJlcXVpcmVtZW50czogcmVxdWlyZW1lbnRzLnRyaW0oKSxcblx0XHRcdFx0XHRwYXJlbnRfaWQ6IHBhcmVudElkIHx8IHVuZGVmaW5lZCxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTG9yZSBjcmVhdGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0bmFtZUlucHV0LmZvY3VzKCk7XG5cdH1cblxuXHRzaG93RWRpdExvcmVNb2RhbChsb3JlOiBMb3JlKSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwuc2V0VGV4dChcIkVkaXQgTG9yZVwiKTtcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBuYW1lID0gbG9yZS5uYW1lO1xuXHRcdGxldCBjYXRlZ29yeSA9IGxvcmUuY2F0ZWdvcnkgfHwgXCJcIjtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSBsb3JlLmRlc2NyaXB0aW9uO1xuXHRcdGxldCBydWxlcyA9IGxvcmUucnVsZXM7XG5cdFx0bGV0IGxpbWl0YXRpb25zID0gbG9yZS5saW1pdGF0aW9ucztcblx0XHRsZXQgcmVxdWlyZW1lbnRzID0gbG9yZS5yZXF1aXJlbWVudHM7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIk5hbWUgKlwiIH0pO1xuXHRcdGNvbnN0IG5hbWVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsIHZhbHVlOiBuYW1lIH0pO1xuXHRcdG5hbWVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBuYW1lID0gbmFtZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJDYXRlZ29yeVwiIH0pO1xuXHRcdGNvbnN0IGNhdGVnb3J5SW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCB2YWx1ZTogY2F0ZWdvcnkgfSk7XG5cdFx0Y2F0ZWdvcnlJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBjYXRlZ29yeSA9IGNhdGVnb3J5SW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGRlc2NJbnB1dC52YWx1ZSA9IGRlc2NyaXB0aW9uO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiUnVsZXNcIiB9KTtcblx0XHRjb25zdCBydWxlc0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdHJ1bGVzSW5wdXQudmFsdWUgPSBydWxlcztcblx0XHRydWxlc0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IHJ1bGVzID0gcnVsZXNJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTGltaXRhdGlvbnNcIiB9KTtcblx0XHRjb25zdCBsaW1pdGF0aW9uc0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGxpbWl0YXRpb25zSW5wdXQudmFsdWUgPSBsaW1pdGF0aW9ucztcblx0XHRsaW1pdGF0aW9uc0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGxpbWl0YXRpb25zID0gbGltaXRhdGlvbnNJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiUmVxdWlyZW1lbnRzXCIgfSk7XG5cdFx0Y29uc3QgcmVxdWlyZW1lbnRzSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0cmVxdWlyZW1lbnRzSW5wdXQudmFsdWUgPSByZXF1aXJlbWVudHM7XG5cdFx0cmVxdWlyZW1lbnRzSW5wdXQub25pbnB1dCA9ICgpID0+IHsgcmVxdWlyZW1lbnRzID0gcmVxdWlyZW1lbnRzSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghbmFtZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk5hbWUgaXMgcmVxdWlyZWRcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVMb3JlKGxvcmUuaWQsIHtcblx0XHRcdFx0XHRuYW1lOiBuYW1lLnRyaW0oKSxcblx0XHRcdFx0XHRjYXRlZ29yeTogY2F0ZWdvcnkudHJpbSgpIHx8IHVuZGVmaW5lZCxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpLFxuXHRcdFx0XHRcdHJ1bGVzOiBydWxlcy50cmltKCksXG5cdFx0XHRcdFx0bGltaXRhdGlvbnM6IGxpbWl0YXRpb25zLnRyaW0oKSxcblx0XHRcdFx0XHRyZXF1aXJlbWVudHM6IHJlcXVpcmVtZW50cy50cmltKCksXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkxvcmUgdXBkYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0c2hvd0ZhY3Rpb25EZXRhaWxzTW9kYWwoZmFjdGlvbjogRmFjdGlvbikge1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoZmFjdGlvbi5uYW1lKTtcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IGZhY3Rpb24uZGVzY3JpcHRpb24gfHwgXCJObyBkZXNjcmlwdGlvblwiIH0pO1xuXHRcdGlmIChmYWN0aW9uLmJlbGllZnMpIHtcblx0XHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiQmVsaWVmc1wiIH0pO1xuXHRcdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBmYWN0aW9uLmJlbGllZnMgfSk7XG5cdFx0fVxuXHRcdGlmIChmYWN0aW9uLnN0cnVjdHVyZSkge1xuXHRcdFx0Y29udGVudC5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJTdHJ1Y3R1cmVcIiB9KTtcblx0XHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogZmFjdGlvbi5zdHJ1Y3R1cmUgfSk7XG5cdFx0fVxuXHRcdGlmIChmYWN0aW9uLnN5bWJvbHMpIHtcblx0XHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiU3ltYm9sc1wiIH0pO1xuXHRcdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBmYWN0aW9uLnN5bWJvbHMgfSk7XG5cdFx0fVxuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHNob3dDcmVhdGVGYWN0aW9uTW9kYWwocGFyZW50SWQ/OiBzdHJpbmcgfCBudWxsKSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoXCJDcmVhdGUgRmFjdGlvblwiKTtcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBuYW1lID0gXCJcIjtcblx0XHRsZXQgdHlwZSA9IFwiXCI7XG5cdFx0bGV0IGRlc2NyaXB0aW9uID0gXCJcIjtcblx0XHRsZXQgYmVsaWVmcyA9IFwiXCI7XG5cdFx0bGV0IHN0cnVjdHVyZSA9IFwiXCI7XG5cdFx0bGV0IHN5bWJvbHMgPSBcIlwiO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJOYW1lICpcIiB9KTtcblx0XHRjb25zdCBuYW1lSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiIH0pO1xuXHRcdG5hbWVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBuYW1lID0gbmFtZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJUeXBlXCIgfSk7XG5cdFx0Y29uc3QgdHlwZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiB9KTtcblx0XHR0eXBlSW5wdXQub25pbnB1dCA9ICgpID0+IHsgdHlwZSA9IHR5cGVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0ZGVzY0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJCZWxpZWZzXCIgfSk7XG5cdFx0Y29uc3QgYmVsaWVmc0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGJlbGllZnNJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBiZWxpZWZzID0gYmVsaWVmc0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJTdHJ1Y3R1cmVcIiB9KTtcblx0XHRjb25zdCBzdHJ1Y3R1cmVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRzdHJ1Y3R1cmVJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBzdHJ1Y3R1cmUgPSBzdHJ1Y3R1cmVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiU3ltYm9sc1wiIH0pO1xuXHRcdGNvbnN0IHN5bWJvbHNJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIiB9KTtcblx0XHRzeW1ib2xzSW5wdXQub25pbnB1dCA9ICgpID0+IHsgc3ltYm9scyA9IHN5bWJvbHNJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBjcmVhdGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNyZWF0ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdGNyZWF0ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKCFuYW1lLnRyaW0oKSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiTmFtZSBpcyByZXF1aXJlZFwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUZhY3Rpb24odGhpcy5jdXJyZW50V29ybGQhLmlkLCB7XG5cdFx0XHRcdFx0bmFtZTogbmFtZS50cmltKCksXG5cdFx0XHRcdFx0dHlwZTogdHlwZS50cmltKCkgfHwgdW5kZWZpbmVkLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKCksXG5cdFx0XHRcdFx0YmVsaWVmczogYmVsaWVmcy50cmltKCksXG5cdFx0XHRcdFx0c3RydWN0dXJlOiBzdHJ1Y3R1cmUudHJpbSgpLFxuXHRcdFx0XHRcdHN5bWJvbHM6IHN5bWJvbHMudHJpbSgpLFxuXHRcdFx0XHRcdHBhcmVudF9pZDogcGFyZW50SWQgfHwgdW5kZWZpbmVkLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJGYWN0aW9uIGNyZWF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXHRcdG1vZGFsLm9wZW4oKTtcblx0XHRuYW1lSW5wdXQuZm9jdXMoKTtcblx0fVxuXG5cdHNob3dFZGl0RmFjdGlvbk1vZGFsKGZhY3Rpb246IEZhY3Rpb24pIHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiRWRpdCBGYWN0aW9uXCIpO1xuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IG5hbWUgPSBmYWN0aW9uLm5hbWU7XG5cdFx0bGV0IHR5cGUgPSBmYWN0aW9uLnR5cGUgfHwgXCJcIjtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSBmYWN0aW9uLmRlc2NyaXB0aW9uO1xuXHRcdGxldCBiZWxpZWZzID0gZmFjdGlvbi5iZWxpZWZzO1xuXHRcdGxldCBzdHJ1Y3R1cmUgPSBmYWN0aW9uLnN0cnVjdHVyZTtcblx0XHRsZXQgc3ltYm9scyA9IGZhY3Rpb24uc3ltYm9scztcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTmFtZSAqXCIgfSk7XG5cdFx0Y29uc3QgbmFtZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIiwgdmFsdWU6IG5hbWUgfSk7XG5cdFx0bmFtZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IG5hbWUgPSBuYW1lSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlR5cGVcIiB9KTtcblx0XHRjb25zdCB0eXBlSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCB2YWx1ZTogdHlwZSB9KTtcblx0XHR0eXBlSW5wdXQub25pbnB1dCA9ICgpID0+IHsgdHlwZSA9IHR5cGVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcblx0XHRjb25zdCBkZXNjSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIgfSk7XG5cdFx0ZGVzY0lucHV0LnZhbHVlID0gZGVzY3JpcHRpb247XG5cdFx0ZGVzY0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGRlc2NyaXB0aW9uID0gZGVzY0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJCZWxpZWZzXCIgfSk7XG5cdFx0Y29uc3QgYmVsaWVmc0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGJlbGllZnNJbnB1dC52YWx1ZSA9IGJlbGllZnM7XG5cdFx0YmVsaWVmc0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IGJlbGllZnMgPSBiZWxpZWZzSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlN0cnVjdHVyZVwiIH0pO1xuXHRcdGNvbnN0IHN0cnVjdHVyZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdHN0cnVjdHVyZUlucHV0LnZhbHVlID0gc3RydWN0dXJlO1xuXHRcdHN0cnVjdHVyZUlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IHN0cnVjdHVyZSA9IHN0cnVjdHVyZUlucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJTeW1ib2xzXCIgfSk7XG5cdFx0Y29uc3Qgc3ltYm9sc0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdHN5bWJvbHNJbnB1dC52YWx1ZSA9IHN5bWJvbHM7XG5cdFx0c3ltYm9sc0lucHV0Lm9uaW5wdXQgPSAoKSA9PiB7IHN5bWJvbHMgPSBzeW1ib2xzSW5wdXQudmFsdWU7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghbmFtZS50cmltKCkpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk5hbWUgaXMgcmVxdWlyZWRcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC51cGRhdGVGYWN0aW9uKGZhY3Rpb24uaWQsIHtcblx0XHRcdFx0XHRuYW1lOiBuYW1lLnRyaW0oKSxcblx0XHRcdFx0XHR0eXBlOiB0eXBlLnRyaW0oKSB8fCB1bmRlZmluZWQsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSxcblx0XHRcdFx0XHRiZWxpZWZzOiBiZWxpZWZzLnRyaW0oKSxcblx0XHRcdFx0XHRzdHJ1Y3R1cmU6IHN0cnVjdHVyZS50cmltKCksXG5cdFx0XHRcdFx0c3ltYm9sczogc3ltYm9scy50cmltKCksXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRXb3JsZERhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJXb3JsZFRhYkNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkZhY3Rpb24gdXBkYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSkub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0Ly8gPT09PT09PT09PT09PT09PT09PT0gUmVsYXRpb25zaGlwIE1vZGFscyA9PT09PT09PT09PT09PT09PT09PVxuXG5cdHNob3dBZGRDaGFyYWN0ZXJSZWxhdGlvbnNoaXBNb2RhbChjaGFyYWN0ZXI6IENoYXJhY3Rlcikge1xuXHRcdGlmICghdGhpcy5jdXJyZW50V29ybGQpIHJldHVybjtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiQWRkIENoYXJhY3RlciBSZWxhdGlvbnNoaXBcIik7XG5cdFx0XG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRsZXQgb3RoZXJDaGFyYWN0ZXJJZCA9IFwiXCI7XG5cdFx0bGV0IHJlbGF0aW9uc2hpcFR5cGUgPSBcImFsbHlcIjtcblx0XHRsZXQgZGVzY3JpcHRpb24gPSBcIlwiO1xuXHRcdGxldCBiaWRpcmVjdGlvbmFsID0gdHJ1ZTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiT3RoZXIgQ2hhcmFjdGVyICpcIiB9KTtcblx0XHRjb25zdCBjaGFyYWN0ZXJTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHRjaGFyYWN0ZXJTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJcIiwgdGV4dDogXCJTZWxlY3QgYSBjaGFyYWN0ZXIuLi5cIiB9KTtcblx0XHRmb3IgKGNvbnN0IGNoYXIgb2YgdGhpcy5jaGFyYWN0ZXJzLmZpbHRlcihjID0+IGMuaWQgIT09IGNoYXJhY3Rlci5pZCkuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdGNoYXJhY3RlclNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBjaGFyLmlkLCB0ZXh0OiBjaGFyLm5hbWUgfSk7XG5cdFx0fVxuXHRcdGNoYXJhY3RlclNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHsgb3RoZXJDaGFyYWN0ZXJJZCA9IGNoYXJhY3RlclNlbGVjdC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiUmVsYXRpb25zaGlwIFR5cGUgKlwiIH0pO1xuXHRcdGNvbnN0IHR5cGVTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHRjb25zdCByZWxhdGlvbnNoaXBUeXBlcyA9IFtcImFsbHlcIiwgXCJlbmVteVwiLCBcImZhbWlseVwiLCBcImxvdmVyXCIsIFwicml2YWxcIiwgXCJtZW50b3JcIiwgXCJzdHVkZW50XCJdO1xuXHRcdGZvciAoY29uc3QgdHlwZSBvZiByZWxhdGlvbnNoaXBUeXBlcykge1xuXHRcdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiB0eXBlLCB0ZXh0OiB0eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdHlwZS5zbGljZSgxKSB9KTtcblx0XHR9XG5cdFx0dHlwZVNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHsgcmVsYXRpb25zaGlwVHlwZSA9IHR5cGVTZWxlY3QudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XG5cdFx0Y29uc3QgZGVzY0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdGRlc2NJbnB1dC5vbmlucHV0ID0gKCkgPT4geyBkZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiQmlkaXJlY3Rpb25hbFwiIH0pO1xuXHRcdGNvbnN0IGJpZGlyZWN0aW9uYWxDaGVja2JveCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwiY2hlY2tib3hcIiB9KTtcblx0XHRiaWRpcmVjdGlvbmFsQ2hlY2tib3guY2hlY2tlZCA9IHRydWU7XG5cdFx0YmlkaXJlY3Rpb25hbENoZWNrYm94Lm9uY2hhbmdlID0gKCkgPT4geyBiaWRpcmVjdGlvbmFsID0gYmlkaXJlY3Rpb25hbENoZWNrYm94LmNoZWNrZWQ7IH07XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cdFx0Y29uc3QgY3JlYXRlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDcmVhdGVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRjcmVhdGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghb3RoZXJDaGFyYWN0ZXJJZCkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiUGxlYXNlIHNlbGVjdCBhIGNoYXJhY3RlclwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUNoYXJhY3RlclJlbGF0aW9uc2hpcChjaGFyYWN0ZXIuaWQsIHtcblx0XHRcdFx0XHRjaGFyYWN0ZXIyX2lkOiBvdGhlckNoYXJhY3RlcklkLFxuXHRcdFx0XHRcdHJlbGF0aW9uc2hpcF90eXBlOiByZWxhdGlvbnNoaXBUeXBlLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKCksXG5cdFx0XHRcdFx0YmlkaXJlY3Rpb25hbDogYmlkaXJlY3Rpb25hbCxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiUmVsYXRpb25zaGlwIGNyZWF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHNob3dMaW5rRXZlbnRUb0VudGl0eU1vZGFsKGV2ZW50OiBXb3JsZEV2ZW50KSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnRXb3JsZCkgcmV0dXJuO1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnNldFRleHQoYExpbmsgRXZlbnQ6ICR7ZXZlbnQubmFtZX1gKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBlbnRpdHlUeXBlOiBcImNoYXJhY3RlclwiIHwgXCJsb2NhdGlvblwiIHwgXCJhcnRpZmFjdFwiIHwgXCJmYWN0aW9uXCIgfCBcImxvcmVcIiA9IFwiY2hhcmFjdGVyXCI7XG5cdFx0bGV0IGVudGl0eUlkID0gXCJcIjtcblx0XHRsZXQgcmVsYXRpb25zaGlwVHlwZSA9IFwiXCI7XG5cdFx0bGV0IG5vdGVzID0gXCJcIjtcblxuXHRcdC8vIEVudGl0eSBUeXBlIFNlbGVjdGlvblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRW50aXR5IFR5cGUgKlwiIH0pO1xuXHRcdGNvbnN0IHR5cGVTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiY2hhcmFjdGVyXCIsIHRleHQ6IFwiXHVEODNEXHVEQzY0IENoYXJhY3RlclwiIH0pO1xuXHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJsb2NhdGlvblwiLCB0ZXh0OiBcIlx1RDgzRFx1RENDRCBMb2NhdGlvblwiIH0pO1xuXHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJmYWN0aW9uXCIsIHRleHQ6IFwiXHVEODNDXHVERkY0IEZhY3Rpb25cIiB9KTtcblx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiYXJ0aWZhY3RcIiwgdGV4dDogXCJcdTI2OTRcdUZFMEYgQXJ0aWZhY3RcIiB9KTtcblx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwibG9yZVwiLCB0ZXh0OiBcIlx1RDgzRFx1RENEQyBMb3JlXCIgfSk7XG5cdFx0XG5cdFx0Ly8gRW50aXR5IFNlbGVjdGlvbiAoZHluYW1pYyBiYXNlZCBvbiB0eXBlKVxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiRW50aXR5ICpcIiB9KTtcblx0XHRjb25zdCBlbnRpdHlTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHRcblx0XHRjb25zdCBwb3B1bGF0ZUVudGl0eVNlbGVjdCA9ICgpID0+IHtcblx0XHRcdGVudGl0eVNlbGVjdC5lbXB0eSgpO1xuXHRcdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiXCIsIHRleHQ6IGBTZWxlY3QgYSAke2VudGl0eVR5cGV9Li4uYCB9KTtcblx0XHRcdGVudGl0eUlkID0gXCJcIjtcblx0XHRcdFxuXHRcdFx0aWYgKGVudGl0eVR5cGUgPT09IFwiY2hhcmFjdGVyXCIpIHtcblx0XHRcdFx0Zm9yIChjb25zdCBjaGFyIG9mIHRoaXMuY2hhcmFjdGVycy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0XHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBjaGFyLmlkLCB0ZXh0OiBjaGFyLm5hbWUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoZW50aXR5VHlwZSA9PT0gXCJsb2NhdGlvblwiKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgbG9jIG9mIHRoaXMubG9jYXRpb25zLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRcdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IGxvYy5pZCwgdGV4dDogbG9jLm5hbWUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoZW50aXR5VHlwZSA9PT0gXCJmYWN0aW9uXCIpIHtcblx0XHRcdFx0Zm9yIChjb25zdCBmYWN0aW9uIG9mIHRoaXMuZmFjdGlvbnMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdFx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogZmFjdGlvbi5pZCwgdGV4dDogZmFjdGlvbi5uYW1lIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKGVudGl0eVR5cGUgPT09IFwiYXJ0aWZhY3RcIikge1xuXHRcdFx0XHRmb3IgKGNvbnN0IGFydCBvZiB0aGlzLmFydGlmYWN0cy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0XHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBhcnQuaWQsIHRleHQ6IGFydC5uYW1lIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKGVudGl0eVR5cGUgPT09IFwibG9yZVwiKSB7XG5cdFx0XHRcdGZvciAoY29uc3QgbG9yZSBvZiB0aGlzLmxvcmVzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRcdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IGxvcmUuaWQsIHRleHQ6IGxvcmUubmFtZSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdFx0XG5cdFx0Ly8gSW5pdGlhbGl6ZSB3aXRoIGNoYXJhY3RlcnNcblx0XHRwb3B1bGF0ZUVudGl0eVNlbGVjdCgpO1xuXHRcdFxuXHRcdHR5cGVTZWxlY3Qub25jaGFuZ2UgPSAoKSA9PiB7IFxuXHRcdFx0ZW50aXR5VHlwZSA9IHR5cGVTZWxlY3QudmFsdWUgYXMgdHlwZW9mIGVudGl0eVR5cGU7XG5cdFx0XHRwb3B1bGF0ZUVudGl0eVNlbGVjdCgpO1xuXHRcdH07XG5cdFx0ZW50aXR5U2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4geyBlbnRpdHlJZCA9IGVudGl0eVNlbGVjdC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiUmVsYXRpb25zaGlwIFR5cGVcIiB9KTtcblx0XHRjb25zdCByZWxUeXBlU2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0cmVsVHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcIlwiLCB0ZXh0OiBcIlNlbGVjdCByZWxhdGlvbnNoaXAuLi5cIiB9KTtcblx0XHRbXCJpbnZvbHZlZFwiLCBcImNhdXNlZFwiLCBcImFmZmVjdGVkXCIsIFwid2l0bmVzc2VkXCIsIFwiY3JlYXRlZFwiLCBcImRlc3Ryb3llZFwiLCBcInBhcnRpY2lwYXRlZFwiLCBcImxlZFwiLCBcIm9wcG9zZWRcIl0uZm9yRWFjaChyZWwgPT4ge1xuXHRcdFx0cmVsVHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiByZWwsIHRleHQ6IHJlbC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHJlbC5zbGljZSgxKSB9KTtcblx0XHR9KTtcblx0XHRyZWxUeXBlU2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4geyByZWxhdGlvbnNoaXBUeXBlID0gcmVsVHlwZVNlbGVjdC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTm90ZXNcIiB9KTtcblx0XHRjb25zdCBub3Rlc0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIsXG5cdFx0XHRwbGFjZWhvbGRlcjogXCJBZGRpdGlvbmFsIGRldGFpbHMgYWJvdXQgdGhpcyByZWxhdGlvbnNoaXAuLi5cIlxuXHRcdH0pO1xuXHRcdG5vdGVzSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbm90ZXMgPSBub3Rlc0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IGNyZWF0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiTGluayBFbnRpdHlcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRjcmVhdGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdGlmICghZW50aXR5SWQpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgUGxlYXNlIHNlbGVjdCBhICR7ZW50aXR5VHlwZX1gLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmFkZEV2ZW50UmVmZXJlbmNlKGV2ZW50LmlkLCBlbnRpdHlUeXBlLCBlbnRpdHlJZCwgcmVsYXRpb25zaGlwVHlwZS50cmltKCkgfHwgdW5kZWZpbmVkLCBub3Rlcy50cmltKCkgfHwgdW5kZWZpbmVkKTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkV29ybGREYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyV29ybGRUYWJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJFbnRpdHkgbGlua2VkIHRvIGV2ZW50XCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0YnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KS5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRzaG93U2V0RXZlbnRQYXJlbnRNb2RhbChldmVudDogV29ybGRFdmVudCkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50V29ybGQpIHJldHVybjtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiU2V0IFBhcmVudCBFdmVudCAoQ2F1c2UpXCIpO1xuXHRcdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBtb2RhbC5jb250ZW50RWw7XG5cdFx0bGV0IHBhcmVudElkOiBzdHJpbmcgfCBudWxsID0gZXZlbnQucGFyZW50X2lkIHx8IG51bGw7XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IFxuXHRcdFx0dGV4dDogXCJMaW5rIHRoaXMgZXZlbnQgdG8gaXRzIGNhdXNlIG9yIHBhcmVudCBldmVudCBpbiB0aGUgdGltZWxpbmUgaGllcmFyY2h5LlwiLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1oaW50XCJcblx0XHR9KTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiUGFyZW50IEV2ZW50IChDYXVzZSlcIiB9KTtcblx0XHRjb25zdCBwYXJlbnRTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHRwYXJlbnRTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJcIiwgdGV4dDogXCJOb25lIChSb290IEV2ZW50KVwiIH0pO1xuXHRcdFxuXHRcdC8vIFNvcnQgYnkgdGltZWxpbmUgcG9zaXRpb24sIHRoZW4gYnkgbmFtZVxuXHRcdGNvbnN0IHNvcnRlZEV2ZW50cyA9IHRoaXMuZXZlbnRzXG5cdFx0XHQuZmlsdGVyKGUgPT4gZS5pZCAhPT0gZXZlbnQuaWQpXG5cdFx0XHQuc29ydCgoYSwgYikgPT4ge1xuXHRcdFx0XHRjb25zdCBwb3NBID0gYS50aW1lbGluZV9wb3NpdGlvbiA/PyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUjtcblx0XHRcdFx0Y29uc3QgcG9zQiA9IGIudGltZWxpbmVfcG9zaXRpb24gPz8gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XG5cdFx0XHRcdGlmIChwb3NBICE9PSBwb3NCKSByZXR1cm4gcG9zQSAtIHBvc0I7XG5cdFx0XHRcdHJldHVybiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpO1xuXHRcdFx0fSk7XG5cdFx0XG5cdFx0Zm9yIChjb25zdCBldnQgb2Ygc29ydGVkRXZlbnRzKSB7XG5cdFx0XHRjb25zdCBwb3NMYWJlbCA9IGV2dC50aW1lbGluZV9wb3NpdGlvbiAhPT0gdW5kZWZpbmVkID8gYCAoWWVhciAke2V2dC50aW1lbGluZV9wb3NpdGlvbn0pYCA6IFwiXCI7XG5cdFx0XHRjb25zdCBvcHQgPSBwYXJlbnRTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogZXZ0LmlkLCB0ZXh0OiBgJHtldnQubmFtZX0ke3Bvc0xhYmVsfWAgfSk7XG5cdFx0XHRpZiAoZXZlbnQucGFyZW50X2lkID09PSBldnQuaWQpIHtcblx0XHRcdFx0b3B0LnNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cGFyZW50U2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4geyBwYXJlbnRJZCA9IHBhcmVudFNlbGVjdC52YWx1ZSB8fCBudWxsOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlNhdmVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQubW92ZUV2ZW50KGV2ZW50LmlkLCBwYXJlbnRJZCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiRXZlbnQgcGFyZW50IHVwZGF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHNob3dBZGRGYWN0aW9uUmVmZXJlbmNlTW9kYWwoZmFjdGlvbjogRmFjdGlvbikge1xuXHRcdGlmICghdGhpcy5jdXJyZW50V29ybGQpIHJldHVybjtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiTGluayBGYWN0aW9uIHRvIEVudGl0eVwiKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBlbnRpdHlUeXBlID0gXCJjaGFyYWN0ZXJcIjtcblx0XHRsZXQgZW50aXR5SWQgPSBcIlwiO1xuXHRcdGxldCByb2xlID0gXCJcIjtcblx0XHRsZXQgbm90ZXMgPSBcIlwiO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJFbnRpdHkgVHlwZSAqXCIgfSk7XG5cdFx0Y29uc3QgdHlwZVNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJjaGFyYWN0ZXJcIiwgdGV4dDogXCJDaGFyYWN0ZXJcIiB9KTtcblx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwibG9jYXRpb25cIiwgdGV4dDogXCJMb2NhdGlvblwiIH0pO1xuXHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJhcnRpZmFjdFwiLCB0ZXh0OiBcIkFydGlmYWN0XCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcImV2ZW50XCIsIHRleHQ6IFwiRXZlbnRcIiB9KTtcblx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiZmFjdGlvblwiLCB0ZXh0OiBcIkZhY3Rpb25cIiB9KTtcblx0XHR0eXBlU2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4ge1xuXHRcdFx0ZW50aXR5VHlwZSA9IHR5cGVTZWxlY3QudmFsdWU7XG5cdFx0XHQvLyBVcGRhdGUgZW50aXR5IHNlbGVjdCBvcHRpb25zXG5cdFx0XHRlbnRpdHlTZWxlY3QuZW1wdHkoKTtcblx0XHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcIlwiLCB0ZXh0OiBgU2VsZWN0IGEgJHtlbnRpdHlUeXBlfS4uLmAgfSk7XG5cdFx0XHRsb2FkRW50aXRpZXNGb3JUeXBlKGVudGl0eVR5cGUpO1xuXHRcdH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkVudGl0eSAqXCIgfSk7XG5cdFx0Y29uc3QgZW50aXR5U2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiXCIsIHRleHQ6IFwiU2VsZWN0IGFuIGVudGl0eS4uLlwiIH0pO1xuXHRcdFxuXHRcdGNvbnN0IGxvYWRFbnRpdGllc0ZvclR5cGUgPSAodHlwZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRpZiAodHlwZSA9PT0gXCJjaGFyYWN0ZXJcIikge1xuXHRcdFx0XHRmb3IgKGNvbnN0IGNoYXIgb2YgdGhpcy5jaGFyYWN0ZXJzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRcdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IGNoYXIuaWQsIHRleHQ6IGNoYXIubmFtZSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImxvY2F0aW9uXCIpIHtcblx0XHRcdFx0Zm9yIChjb25zdCBsb2Mgb2YgdGhpcy5sb2NhdGlvbnMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdFx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogbG9jLmlkLCB0ZXh0OiBsb2MubmFtZSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImFydGlmYWN0XCIpIHtcblx0XHRcdFx0Zm9yIChjb25zdCBhcnQgb2YgdGhpcy5hcnRpZmFjdHMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdFx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogYXJ0LmlkLCB0ZXh0OiBhcnQubmFtZSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImV2ZW50XCIpIHtcblx0XHRcdFx0Zm9yIChjb25zdCBldnQgb2YgdGhpcy5ldmVudHMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdFx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogZXZ0LmlkLCB0ZXh0OiBldnQubmFtZSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImZhY3Rpb25cIikge1xuXHRcdFx0XHQvLyBGaWx0ZXIgb3V0IHRoZSBjdXJyZW50IGZhY3Rpb24gdG8gYXZvaWQgc2VsZi1yZWZlcmVuY2Vcblx0XHRcdFx0Zm9yIChjb25zdCBmYWMgb2YgdGhpcy5mYWN0aW9ucy5maWx0ZXIoZiA9PiBmLmlkICE9PSBmYWN0aW9uLmlkKS5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKSkge1xuXHRcdFx0XHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBmYWMuaWQsIHRleHQ6IGZhYy5uYW1lIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRsb2FkRW50aXRpZXNGb3JUeXBlKGVudGl0eVR5cGUpO1xuXHRcdGVudGl0eVNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHsgZW50aXR5SWQgPSBlbnRpdHlTZWxlY3QudmFsdWU7IH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIlJvbGVcIiB9KTtcblx0XHRjb25zdCByb2xlSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcInRleHRcIiwgY2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLCBwbGFjZWhvbGRlcjogXCJlLmcuLCBsZWFkZXIsIG1lbWJlciwgYWxseSwgcml2YWxcIiB9KTtcblx0XHRyb2xlSW5wdXQub25pbnB1dCA9ICgpID0+IHsgcm9sZSA9IHJvbGVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTm90ZXNcIiB9KTtcblx0XHRjb25zdCBub3Rlc0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdG5vdGVzSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbm90ZXMgPSBub3Rlc0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IGNyZWF0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ3JlYXRlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0Y3JlYXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIWVudGl0eUlkKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJQbGVhc2Ugc2VsZWN0IGFuIGVudGl0eVwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmFkZEZhY3Rpb25SZWZlcmVuY2UoZmFjdGlvbi5pZCwgZW50aXR5VHlwZSwgZW50aXR5SWQsIHJvbGUudHJpbSgpIHx8IHVuZGVmaW5lZCwgbm90ZXMudHJpbSgpIHx8IHVuZGVmaW5lZCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiUmVmZXJlbmNlIGNyZWF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHNob3dBZGRMb3JlUmVmZXJlbmNlTW9kYWwobG9yZTogTG9yZSkge1xuXHRcdGlmICghdGhpcy5jdXJyZW50V29ybGQpIHJldHVybjtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiTGluayBMb3JlIHRvIEVudGl0eVwiKTtcblx0XHRcblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGxldCBlbnRpdHlUeXBlID0gXCJjaGFyYWN0ZXJcIjtcblx0XHRsZXQgZW50aXR5SWQgPSBcIlwiO1xuXHRcdGxldCByZWxhdGlvbnNoaXBUeXBlID0gXCJcIjtcblx0XHRsZXQgbm90ZXMgPSBcIlwiO1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJFbnRpdHkgVHlwZSAqXCIgfSk7XG5cdFx0Y29uc3QgdHlwZVNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJjaGFyYWN0ZXJcIiwgdGV4dDogXCJDaGFyYWN0ZXJcIiB9KTtcblx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwibG9jYXRpb25cIiwgdGV4dDogXCJMb2NhdGlvblwiIH0pO1xuXHRcdHR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogXCJhcnRpZmFjdFwiLCB0ZXh0OiBcIkFydGlmYWN0XCIgfSk7XG5cdFx0dHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcImV2ZW50XCIsIHRleHQ6IFwiRXZlbnRcIiB9KTtcblx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiZmFjdGlvblwiLCB0ZXh0OiBcIkZhY3Rpb25cIiB9KTtcblx0XHR0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwibG9yZVwiLCB0ZXh0OiBcIkxvcmVcIiB9KTtcblx0XHR0eXBlU2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4ge1xuXHRcdFx0ZW50aXR5VHlwZSA9IHR5cGVTZWxlY3QudmFsdWU7XG5cdFx0XHQvLyBVcGRhdGUgZW50aXR5IHNlbGVjdCBvcHRpb25zXG5cdFx0XHRlbnRpdHlTZWxlY3QuZW1wdHkoKTtcblx0XHRcdGVudGl0eVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHZhbHVlOiBcIlwiLCB0ZXh0OiBgU2VsZWN0IGEgJHtlbnRpdHlUeXBlfS4uLmAgfSk7XG5cdFx0XHRsb2FkRW50aXRpZXNGb3JUeXBlKGVudGl0eVR5cGUpO1xuXHRcdH07XG5cblx0XHRjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIiwgeyB0ZXh0OiBcIkVudGl0eSAqXCIgfSk7XG5cdFx0Y29uc3QgZW50aXR5U2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwiXCIsIHRleHQ6IFwiU2VsZWN0IGFuIGVudGl0eS4uLlwiIH0pO1xuXHRcdFxuXHRcdGNvbnN0IGxvYWRFbnRpdGllc0ZvclR5cGUgPSAodHlwZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRpZiAodHlwZSA9PT0gXCJjaGFyYWN0ZXJcIikge1xuXHRcdFx0XHRmb3IgKGNvbnN0IGNoYXIgb2YgdGhpcy5jaGFyYWN0ZXJzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRcdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IGNoYXIuaWQsIHRleHQ6IGNoYXIubmFtZSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImxvY2F0aW9uXCIpIHtcblx0XHRcdFx0Zm9yIChjb25zdCBsb2Mgb2YgdGhpcy5sb2NhdGlvbnMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdFx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogbG9jLmlkLCB0ZXh0OiBsb2MubmFtZSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImFydGlmYWN0XCIpIHtcblx0XHRcdFx0Zm9yIChjb25zdCBhcnQgb2YgdGhpcy5hcnRpZmFjdHMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdFx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogYXJ0LmlkLCB0ZXh0OiBhcnQubmFtZSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImV2ZW50XCIpIHtcblx0XHRcdFx0Zm9yIChjb25zdCBldnQgb2YgdGhpcy5ldmVudHMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSkpIHtcblx0XHRcdFx0XHRlbnRpdHlTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB2YWx1ZTogZXZ0LmlkLCB0ZXh0OiBldnQubmFtZSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0eXBlID09PSBcImZhY3Rpb25cIikge1xuXHRcdFx0XHRmb3IgKGNvbnN0IGZhYyBvZiB0aGlzLmZhY3Rpb25zLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRcdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IGZhYy5pZCwgdGV4dDogZmFjLm5hbWUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gXCJsb3JlXCIpIHtcblx0XHRcdFx0Ly8gRmlsdGVyIG91dCB0aGUgY3VycmVudCBsb3JlIHRvIGF2b2lkIHNlbGYtcmVmZXJlbmNlXG5cdFx0XHRcdGZvciAoY29uc3QgbCBvZiB0aGlzLmxvcmVzLmZpbHRlcihsID0+IGwuaWQgIT09IGxvcmUuaWQpLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpKSB7XG5cdFx0XHRcdFx0ZW50aXR5U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdmFsdWU6IGwuaWQsIHRleHQ6IGwubmFtZSB9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdFx0bG9hZEVudGl0aWVzRm9yVHlwZShlbnRpdHlUeXBlKTtcblx0XHRlbnRpdHlTZWxlY3Qub25jaGFuZ2UgPSAoKSA9PiB7IGVudGl0eUlkID0gZW50aXR5U2VsZWN0LnZhbHVlOyB9O1xuXG5cdFx0Y29udGVudC5jcmVhdGVFbChcImxhYmVsXCIsIHsgdGV4dDogXCJSZWxhdGlvbnNoaXAgVHlwZVwiIH0pO1xuXHRcdGNvbnN0IHJlbFR5cGVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwidGV4dFwiLCBjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsIHBsYWNlaG9sZGVyOiBcImUuZy4sIHByYWN0aXRpb25lciwgb3JpZ2luLCBmb3JiaWRkZW5cIiB9KTtcblx0XHRyZWxUeXBlSW5wdXQub25pbnB1dCA9ICgpID0+IHsgcmVsYXRpb25zaGlwVHlwZSA9IHJlbFR5cGVJbnB1dC52YWx1ZTsgfTtcblxuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJsYWJlbFwiLCB7IHRleHQ6IFwiTm90ZXNcIiB9KTtcblx0XHRjb25zdCBub3Rlc0lucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiIH0pO1xuXHRcdG5vdGVzSW5wdXQub25pbnB1dCA9ICgpID0+IHsgbm90ZXMgPSBub3Rlc0lucHV0LnZhbHVlOyB9O1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IGNyZWF0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ3JlYXRlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0Y3JlYXRlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoIWVudGl0eUlkKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJQbGVhc2Ugc2VsZWN0IGFuIGVudGl0eVwiLCAzMDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmFkZExvcmVSZWZlcmVuY2UobG9yZS5pZCwgZW50aXR5VHlwZSwgZW50aXR5SWQsIHJlbGF0aW9uc2hpcFR5cGUudHJpbSgpIHx8IHVuZGVmaW5lZCwgbm90ZXMudHJpbSgpIHx8IHVuZGVmaW5lZCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZFdvcmxkRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkVGFiQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiUmVmZXJlbmNlIGNyZWF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdC8vID09PT09PT09PT09PT09PT09PT09IENoYXJhY3RlciBEZXRhaWxzIFZpZXcgTWV0aG9kcyA9PT09PT09PT09PT09PT09PT09PVxuXG5cdGFzeW5jIHNob3dDaGFyYWN0ZXJEZXRhaWxzKGNoYXJhY3RlcjogQ2hhcmFjdGVyKSB7XG5cdFx0dGhpcy52aWV3TW9kZSA9IFwiY2hhcmFjdGVyLWRldGFpbHNcIjtcblx0XHRcblx0XHQvLyBHZXQgd29ybGQgaWYgYXZhaWxhYmxlXG5cdFx0Y29uc3Qgd29ybGQgPSBjaGFyYWN0ZXIud29ybGRfaWQgPyBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0V29ybGQoY2hhcmFjdGVyLndvcmxkX2lkKS5jYXRjaCgoKSA9PiBudWxsKSA6IG51bGw7XG5cdFx0XG5cdFx0Ly8gR2V0IGNoYXJhY3RlcnMgZm9yIHJlbGF0aW9uc2hpcHMgKGZyb20gd29ybGQgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgZW1wdHkpXG5cdFx0Y29uc3QgY2hhcmFjdGVycyA9IHdvcmxkID8gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldENoYXJhY3RlcnMod29ybGQuaWQpLmNhdGNoKCgpID0+IFtdKSA6IFtdO1xuXHRcdFxuXHRcdC8vIEVuc3VyZSB0cmFpdHMgYW5kIGFyY2hldHlwZXMgYXJlIGxvYWRlZCAodGhleSdyZSBnbG9iYWwgcGVyIHRlbmFudClcblx0XHRsZXQgdHJhaXRzID0gdGhpcy50cmFpdHM7XG5cdFx0bGV0IGFyY2hldHlwZXMgPSB0aGlzLmFyY2hldHlwZXM7XG5cdFx0bGV0IGV2ZW50cyA9IHdvcmxkID8gdGhpcy5ldmVudHMgOiBbXTtcblx0XHRcblx0XHQvLyBJZiB0cmFpdHMgb3IgYXJjaGV0eXBlcyBhcmUgZW1wdHksIGxvYWQgdGhlbVxuXHRcdGlmICghdHJhaXRzIHx8IHRyYWl0cy5sZW5ndGggPT09IDApIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHRyYWl0cyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRUcmFpdHMoKTtcblx0XHRcdFx0dGhpcy50cmFpdHMgPSB0cmFpdHM7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGxvYWQgdHJhaXRzOlwiLCBlcnIpO1xuXHRcdFx0XHR0cmFpdHMgPSBbXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0aWYgKCFhcmNoZXR5cGVzIHx8IGFyY2hldHlwZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhcmNoZXR5cGVzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmdldEFyY2hldHlwZXMoKTtcblx0XHRcdFx0dGhpcy5hcmNoZXR5cGVzID0gYXJjaGV0eXBlcztcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gbG9hZCBhcmNoZXR5cGVzOlwiLCBlcnIpO1xuXHRcdFx0XHRhcmNoZXR5cGVzID0gW107XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdC8vIElmIHdvcmxkIGlzIGF2YWlsYWJsZSBidXQgZXZlbnRzIGFyZSBlbXB0eSwgbG9hZCB0aGVtXG5cdFx0aWYgKHdvcmxkICYmICghZXZlbnRzIHx8IGV2ZW50cy5sZW5ndGggPT09IDApKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRldmVudHMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0RXZlbnRzKHdvcmxkLmlkKTtcblx0XHRcdFx0dGhpcy5ldmVudHMgPSBldmVudHM7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGxvYWQgZXZlbnRzOlwiLCBlcnIpO1xuXHRcdFx0XHRldmVudHMgPSBbXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0Ly8gQ3JlYXRlIENoYXJhY3RlckRldGFpbHNWaWV3IGluc3RhbmNlXG5cdFx0dGhpcy5jaGFyYWN0ZXJEZXRhaWxzVmlldyA9IG5ldyBDaGFyYWN0ZXJEZXRhaWxzVmlldyhcblx0XHRcdHRoaXMucGx1Z2luLFxuXHRcdFx0Y2hhcmFjdGVyLFxuXHRcdFx0dGhpcy5oZWFkZXJFbCxcblx0XHRcdHRoaXMuY29udGVudEVsLFxuXHRcdFx0KCkgPT4ge1xuXHRcdFx0XHQvLyBvbkJhY2sgY2FsbGJhY2tcblx0XHRcdFx0dGhpcy5jaGFyYWN0ZXJEZXRhaWxzVmlldyA9IG51bGw7XG5cdFx0XHRcdGlmICh0aGlzLmN1cnJlbnRXb3JsZCkge1xuXHRcdFx0XHRcdHRoaXMudmlld01vZGUgPSBcIndvcmxkLWRldGFpbHNcIjtcblx0XHRcdFx0XHR0aGlzLnJlbmRlcldvcmxkRGV0YWlscygpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHRoaXMuY3VycmVudFN0b3J5KSB7XG5cdFx0XHRcdFx0dGhpcy52aWV3TW9kZSA9IFwiZGV0YWlsc1wiO1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyRGV0YWlscygpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMudmlld01vZGUgPSBcImxpc3RcIjtcblx0XHRcdFx0XHR0aGlzLnJlbmRlckxpc3RIZWFkZXIoKTtcblx0XHRcdFx0XHR0aGlzLnJlbmRlckxpc3RDb250ZW50KCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHQoY2hhcmFjdGVyKSA9PiB7XG5cdFx0XHRcdC8vIG9uRWRpdENoYXJhY3RlciBjYWxsYmFja1xuXHRcdFx0XHR0aGlzLnNob3dFZGl0Q2hhcmFjdGVyTW9kYWwoY2hhcmFjdGVyKTtcblx0XHRcdH0sXG5cdFx0XHR3b3JsZCxcblx0XHRcdGNoYXJhY3RlcnMsXG5cdFx0XHRhcmNoZXR5cGVzLFxuXHRcdFx0dHJhaXRzLFxuXHRcdFx0ZXZlbnRzXG5cdFx0KTtcblx0XHRcblx0XHRhd2FpdCB0aGlzLmNoYXJhY3RlckRldGFpbHNWaWV3LnJlbmRlcigpO1xuXHR9XG5cbn1cblxuIiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQ2hhcHRlciB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuXG5leHBvcnQgY2xhc3MgQ2hhcHRlck1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRjaGFwdGVyOiBQYXJ0aWFsPENoYXB0ZXI+ID0ge1xuXHRcdHRpdGxlOiBcIlwiLFxuXHRcdHN0YXR1czogXCJkcmFmdFwiLFxuXHR9O1xuXHRpc0VkaXQ6IGJvb2xlYW4gPSBmYWxzZTtcblx0ZXhpc3RpbmdDaGFwdGVyczogQ2hhcHRlcltdID0gW107XG5cdG9uU3VibWl0OiAoY2hhcHRlcjogUGFydGlhbDxDaGFwdGVyPikgPT4gUHJvbWlzZTx2b2lkPjtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRhcHA6IEFwcCxcblx0XHRvblN1Ym1pdDogKGNoYXB0ZXI6IFBhcnRpYWw8Q2hhcHRlcj4pID0+IFByb21pc2U8dm9pZD4sXG5cdFx0ZXhpc3RpbmdDaGFwdGVyczogQ2hhcHRlcltdID0gW10sXG5cdFx0Y2hhcHRlcj86IENoYXB0ZXJcblx0KSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XG5cdFx0dGhpcy5leGlzdGluZ0NoYXB0ZXJzID0gZXhpc3RpbmdDaGFwdGVycztcblx0XHRpZiAoY2hhcHRlcikge1xuXHRcdFx0dGhpcy5pc0VkaXQgPSB0cnVlO1xuXHRcdFx0dGhpcy5jaGFwdGVyID0ge1xuXHRcdFx0XHRudW1iZXI6IGNoYXB0ZXIubnVtYmVyLFxuXHRcdFx0XHR0aXRsZTogY2hhcHRlci50aXRsZSxcblx0XHRcdFx0c3RhdHVzOiBjaGFwdGVyLnN0YXR1cyxcblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwge1xuXHRcdFx0dGV4dDogdGhpcy5pc0VkaXQgPyBcIkVkaXQgQ2hhcHRlclwiIDogXCJDcmVhdGUgQ2hhcHRlclwiLFxuXHRcdH0pO1xuXG5cdFx0aWYgKHRoaXMuaXNFZGl0KSB7XG5cdFx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHRcdC5zZXROYW1lKFwiQ2hhcHRlciBOdW1iZXJcIilcblx0XHRcdFx0LnNldERlc2MoXCJUaGUgY2hhcHRlciBudW1iZXJcIilcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiMVwiKVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuY2hhcHRlci5udW1iZXI/LnRvU3RyaW5nKCkgfHwgXCIxXCIpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0aWYgKCFpc05hTihudW0pICYmIG51bSA+IDApIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmNoYXB0ZXIubnVtYmVyID0gbnVtO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdH1cblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5zZXROYW1lKFwiVGl0bGVcIilcblx0XHRcdC5zZXREZXNjKFwiQ2hhcHRlciB0aXRsZVwiKVxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdHRleHRcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJDaGFwdGVyIFRpdGxlXCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuY2hhcHRlci50aXRsZSB8fCBcIlwiKVxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuY2hhcHRlci50aXRsZSA9IHZhbHVlO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImtleXByZXNzXCIsIChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoZS5rZXkgPT09IFwiRW50ZXJcIikge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnN1Ym1pdCgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJTdGF0dXNcIilcblx0XHRcdC5zZXREZXNjKFwiQ2hhcHRlciBzdGF0dXNcIilcblx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+XG5cdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihcImRyYWZ0XCIsIFwiRHJhZnRcIilcblx0XHRcdFx0XHQuYWRkT3B0aW9uKFwiaW5fcHJvZ3Jlc3NcIiwgXCJJbiBQcm9ncmVzc1wiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJjb21wbGV0ZWRcIiwgXCJDb21wbGV0ZWRcIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5jaGFwdGVyLnN0YXR1cyB8fCBcImRyYWZ0XCIpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5jaGFwdGVyLnN0YXR1cyA9IHZhbHVlO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cblx0XHRjb25zdCBzdWJtaXRCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogdGhpcy5pc0VkaXQgPyBcIlVwZGF0ZVwiIDogXCJDcmVhdGVcIixcblx0XHRcdGNsczogXCJtb2QtY3RhXCIsXG5cdFx0fSk7XG5cdFx0c3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnN1Ym1pdCgpKTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIkNhbmNlbFwiLFxuXHRcdH0pO1xuXHRcdGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblxuXHRcdGNvbnN0IHRpdGxlSW5wdXQgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcihcImlucHV0W3BsYWNlaG9sZGVyPSdDaGFwdGVyIFRpdGxlJ11cIikgYXMgSFRNTElucHV0RWxlbWVudCB8IG51bGw7XG5cdFx0aWYgKHRpdGxlSW5wdXQpIHtcblx0XHRcdHRpdGxlSW5wdXQuZm9jdXMoKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBzdWJtaXQoKSB7XG5cdFx0aWYgKCF0aGlzLmNoYXB0ZXIudGl0bGU/LnRyaW0oKSkge1xuXHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBlbnRlciBhIGNoYXB0ZXIgdGl0bGVcIiwgMzAwMCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gQXV0by1jYWxjdWxhdGUgY2hhcHRlciBudW1iZXIgaWYgY3JlYXRpbmdcblx0XHRpZiAoIXRoaXMuaXNFZGl0KSB7XG5cdFx0XHRjb25zdCBtYXhOdW1iZXIgPSB0aGlzLmV4aXN0aW5nQ2hhcHRlcnMubGVuZ3RoID4gMFxuXHRcdFx0XHQ/IE1hdGgubWF4KC4uLnRoaXMuZXhpc3RpbmdDaGFwdGVycy5tYXAoYyA9PiBjLm51bWJlcikpXG5cdFx0XHRcdDogMDtcblx0XHRcdHRoaXMuY2hhcHRlci5udW1iZXIgPSBtYXhOdW1iZXIgKyAxO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAoIXRoaXMuY2hhcHRlci5udW1iZXIgfHwgdGhpcy5jaGFwdGVyLm51bWJlciA8IDEpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIkNoYXB0ZXIgbnVtYmVyIG11c3QgYmUgZ3JlYXRlciB0aGFuIDBcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5vblN1Ym1pdCh0aGlzLmNoYXB0ZXIpO1xuXHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIHNhdmUgY2hhcHRlclwiO1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdH1cblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuIiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgU2NlbmUsIENoYXB0ZXIgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcblxuZXhwb3J0IGNsYXNzIFNjZW5lTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdHNjZW5lOiBQYXJ0aWFsPFNjZW5lPiA9IHtcblx0XHR0aW1lX3JlZjogXCJcIixcblx0XHRnb2FsOiBcIlwiLFxuXHR9O1xuXHRpc0VkaXQ6IGJvb2xlYW4gPSBmYWxzZTtcblx0Y2hhcHRlcnM6IENoYXB0ZXJbXSA9IFtdO1xuXHRleGlzdGluZ1NjZW5lczogU2NlbmVbXSA9IFtdO1xuXHRzdG9yeUlkOiBzdHJpbmc7XG5cdGRlZmF1bHRDaGFwdGVySWQ/OiBzdHJpbmcgfCBudWxsO1xuXHRvblN1Ym1pdDogKHNjZW5lOiBQYXJ0aWFsPFNjZW5lPikgPT4gUHJvbWlzZTx2b2lkPjtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRhcHA6IEFwcCxcblx0XHRzdG9yeUlkOiBzdHJpbmcsXG5cdFx0Y2hhcHRlcnM6IENoYXB0ZXJbXSxcblx0XHRvblN1Ym1pdDogKHNjZW5lOiBQYXJ0aWFsPFNjZW5lPikgPT4gUHJvbWlzZTx2b2lkPixcblx0XHRleGlzdGluZ1NjZW5lczogU2NlbmVbXSA9IFtdLFxuXHRcdHNjZW5lPzogU2NlbmUsXG5cdFx0ZGVmYXVsdENoYXB0ZXJJZD86IHN0cmluZyB8IG51bGxcblx0KSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnN0b3J5SWQgPSBzdG9yeUlkO1xuXHRcdHRoaXMuY2hhcHRlcnMgPSBjaGFwdGVycztcblx0XHR0aGlzLmV4aXN0aW5nU2NlbmVzID0gZXhpc3RpbmdTY2VuZXM7XG5cdFx0dGhpcy5kZWZhdWx0Q2hhcHRlcklkID0gZGVmYXVsdENoYXB0ZXJJZDtcblx0XHR0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XG5cdFx0aWYgKHNjZW5lKSB7XG5cdFx0XHR0aGlzLmlzRWRpdCA9IHRydWU7XG5cdFx0XHR0aGlzLnNjZW5lID0ge1xuXHRcdFx0XHRzdG9yeV9pZDogc2NlbmUuc3RvcnlfaWQsXG5cdFx0XHRcdGNoYXB0ZXJfaWQ6IHNjZW5lLmNoYXB0ZXJfaWQgfHwgbnVsbCxcblx0XHRcdFx0b3JkZXJfbnVtOiBzY2VuZS5vcmRlcl9udW0sXG5cdFx0XHRcdHRpbWVfcmVmOiBzY2VuZS50aW1lX3JlZixcblx0XHRcdFx0Z29hbDogc2NlbmUuZ29hbCxcblx0XHRcdFx0cG92X2NoYXJhY3Rlcl9pZDogc2NlbmUucG92X2NoYXJhY3Rlcl9pZCxcblx0XHRcdFx0bG9jYXRpb25faWQ6IHNjZW5lLmxvY2F0aW9uX2lkLFxuXHRcdFx0fTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5zY2VuZS5zdG9yeV9pZCA9IHN0b3J5SWQ7XG5cdFx0XHQvLyBQcmUtc2VsZWN0IGNoYXB0ZXIgaWYgcHJvdmlkZWRcblx0XHRcdGlmIChkZWZhdWx0Q2hhcHRlcklkICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0dGhpcy5zY2VuZS5jaGFwdGVyX2lkID0gZGVmYXVsdENoYXB0ZXJJZDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7XG5cdFx0XHR0ZXh0OiB0aGlzLmlzRWRpdCA/IFwiRWRpdCBTY2VuZVwiIDogXCJDcmVhdGUgU2NlbmVcIixcblx0XHR9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5zZXROYW1lKFwiQ2hhcHRlclwiKVxuXHRcdFx0LnNldERlc2MoXCJTZWxlY3QgdGhlIGNoYXB0ZXIgZm9yIHRoaXMgc2NlbmUgKG9wdGlvbmFsKVwiKVxuXHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuXHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24oXCJcIiwgXCJObyBDaGFwdGVyXCIpO1xuXHRcdFx0XHRmb3IgKGNvbnN0IGNoYXB0ZXIgb2YgdGhpcy5jaGFwdGVycy5zb3J0KChhLCBiKSA9PiBhLm51bWJlciAtIGIubnVtYmVyKSkge1xuXHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbihcblx0XHRcdFx0XHRcdGNoYXB0ZXIuaWQsXG5cdFx0XHRcdFx0XHRgQ2hhcHRlciAke2NoYXB0ZXIubnVtYmVyfTogJHtjaGFwdGVyLnRpdGxlfWBcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRyb3Bkb3duLnNldFZhbHVlKHRoaXMuc2NlbmUuY2hhcHRlcl9pZCB8fCBcIlwiKTtcblx0XHRcdFx0ZHJvcGRvd24ub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5zY2VuZS5jaGFwdGVyX2lkID0gdmFsdWUgfHwgbnVsbDtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdGlmICh0aGlzLmlzRWRpdCkge1xuXHRcdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0XHQuc2V0TmFtZShcIk9yZGVyIE51bWJlclwiKVxuXHRcdFx0XHQuc2V0RGVzYyhcIlNjZW5lIG9yZGVyIHdpdGhpbiBjaGFwdGVyXCIpXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIjFcIilcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnNjZW5lLm9yZGVyX251bT8udG9TdHJpbmcoKSB8fCBcIjFcIilcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRpZiAoIWlzTmFOKG51bSkgJiYgbnVtID4gMCkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuc2NlbmUub3JkZXJfbnVtID0gbnVtO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdH1cblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5zZXROYW1lKFwiR29hbFwiKVxuXHRcdFx0LnNldERlc2MoXCJTY2VuZSBnb2FsIG9yIGRlc2NyaXB0aW9uXCIpXG5cdFx0XHQuYWRkVGV4dEFyZWEoKHRleHQpID0+XG5cdFx0XHRcdHRleHRcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJXaGF0IGhhcHBlbnMgaW4gdGhpcyBzY2VuZT9cIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5zY2VuZS5nb2FsIHx8IFwiXCIpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5zY2VuZS5nb2FsID0gdmFsdWU7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZShcIlRpbWUgUmVmZXJlbmNlXCIpXG5cdFx0XHQuc2V0RGVzYyhcIldoZW4gZG9lcyB0aGlzIHNjZW5lIHRha2UgcGxhY2U/XCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIk1vcm5pbmcsIEV2ZW5pbmcsIGV0Yy5cIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5zY2VuZS50aW1lX3JlZiB8fCBcIlwiKVxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuc2NlbmUudGltZV9yZWYgPSB2YWx1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXG5cdFx0Y29uc3Qgc3VibWl0QnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IHRoaXMuaXNFZGl0ID8gXCJVcGRhdGVcIiA6IFwiQ3JlYXRlXCIsXG5cdFx0XHRjbHM6IFwibW9kLWN0YVwiLFxuXHRcdH0pO1xuXHRcdHN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5zdWJtaXQoKSk7XG5cblx0XHRjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJDYW5jZWxcIixcblx0XHR9KTtcblx0XHRjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XG5cblx0XHRjb25zdCBnb2FsSW5wdXQgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcihcInRleHRhcmVhXCIpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQgfCBudWxsO1xuXHRcdGlmIChnb2FsSW5wdXQpIHtcblx0XHRcdGdvYWxJbnB1dC5mb2N1cygpO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIHN1Ym1pdCgpIHtcblx0XHQvLyBBdXRvLWNhbGN1bGF0ZSBvcmRlcl9udW0gaWYgY3JlYXRpbmdcblx0XHRpZiAoIXRoaXMuaXNFZGl0KSB7XG5cdFx0XHRjb25zdCBjaGFwdGVySWQgPSB0aGlzLnNjZW5lLmNoYXB0ZXJfaWQgfHwgbnVsbDtcblx0XHRcdGNvbnN0IHNjZW5lc0luQ2hhcHRlciA9IHRoaXMuZXhpc3RpbmdTY2VuZXMuZmlsdGVyKHMgPT4gXG5cdFx0XHRcdChzLmNoYXB0ZXJfaWQgfHwgbnVsbCkgPT09IGNoYXB0ZXJJZFxuXHRcdFx0KTtcblx0XHRcdGNvbnN0IG1heE9yZGVyTnVtID0gc2NlbmVzSW5DaGFwdGVyLmxlbmd0aCA+IDBcblx0XHRcdFx0PyBNYXRoLm1heCguLi5zY2VuZXNJbkNoYXB0ZXIubWFwKHMgPT4gcy5vcmRlcl9udW0pKVxuXHRcdFx0XHQ6IDA7XG5cdFx0XHR0aGlzLnNjZW5lLm9yZGVyX251bSA9IG1heE9yZGVyTnVtICsgMTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKCF0aGlzLnNjZW5lLm9yZGVyX251bSB8fCB0aGlzLnNjZW5lLm9yZGVyX251bSA8IDEpIHtcblx0XHRcdFx0bmV3IE5vdGljZShcIk9yZGVyIG51bWJlciBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwXCIsIDMwMDApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHRoaXMub25TdWJtaXQodGhpcy5zY2VuZSk7XG5cdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWQgdG8gc2F2ZSBzY2VuZVwiO1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdH1cblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuIiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQmVhdCwgU2NlbmUsIENoYXB0ZXIgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcblxuZXhwb3J0IGNsYXNzIEJlYXRNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0YmVhdDogUGFydGlhbDxCZWF0PiA9IHtcblx0XHR0eXBlOiBcInNldHVwXCIsXG5cdFx0aW50ZW50OiBcIlwiLFxuXHRcdG91dGNvbWU6IFwiXCIsXG5cdH07XG5cdGlzRWRpdDogYm9vbGVhbiA9IGZhbHNlO1xuXHRzY2VuZXM6IFNjZW5lW10gPSBbXTtcblx0Y2hhcHRlcnM6IENoYXB0ZXJbXSA9IFtdO1xuXHRleGlzdGluZ0JlYXRzOiBCZWF0W10gPSBbXTtcblx0c3RvcnlJZDogc3RyaW5nO1xuXHRkZWZhdWx0U2NlbmVJZD86IHN0cmluZztcblx0b25TdWJtaXQ6IChiZWF0OiBQYXJ0aWFsPEJlYXQ+KSA9PiBQcm9taXNlPHZvaWQ+O1xuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdGFwcDogQXBwLFxuXHRcdHN0b3J5SWQ6IHN0cmluZyxcblx0XHRzY2VuZXM6IFNjZW5lW10sXG5cdFx0b25TdWJtaXQ6IChiZWF0OiBQYXJ0aWFsPEJlYXQ+KSA9PiBQcm9taXNlPHZvaWQ+LFxuXHRcdGV4aXN0aW5nQmVhdHM6IEJlYXRbXSA9IFtdLFxuXHRcdGJlYXQ/OiBCZWF0LFxuXHRcdGNoYXB0ZXJzOiBDaGFwdGVyW10gPSBbXSxcblx0XHRkZWZhdWx0U2NlbmVJZD86IHN0cmluZ1xuXHQpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMuc3RvcnlJZCA9IHN0b3J5SWQ7XG5cdFx0dGhpcy5zY2VuZXMgPSBzY2VuZXM7XG5cdFx0dGhpcy5jaGFwdGVycyA9IGNoYXB0ZXJzO1xuXHRcdHRoaXMuZXhpc3RpbmdCZWF0cyA9IGV4aXN0aW5nQmVhdHM7XG5cdFx0dGhpcy5kZWZhdWx0U2NlbmVJZCA9IGRlZmF1bHRTY2VuZUlkO1xuXHRcdHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcblx0XHRpZiAoYmVhdCkge1xuXHRcdFx0dGhpcy5pc0VkaXQgPSB0cnVlO1xuXHRcdFx0dGhpcy5iZWF0ID0ge1xuXHRcdFx0XHRzY2VuZV9pZDogYmVhdC5zY2VuZV9pZCxcblx0XHRcdFx0b3JkZXJfbnVtOiBiZWF0Lm9yZGVyX251bSxcblx0XHRcdFx0dHlwZTogYmVhdC50eXBlLFxuXHRcdFx0XHRpbnRlbnQ6IGJlYXQuaW50ZW50LFxuXHRcdFx0XHRvdXRjb21lOiBiZWF0Lm91dGNvbWUsXG5cdFx0XHR9O1xuXHRcdH0gZWxzZSBpZiAoZGVmYXVsdFNjZW5lSWQpIHtcblx0XHRcdHRoaXMuYmVhdC5zY2VuZV9pZCA9IGRlZmF1bHRTY2VuZUlkO1xuXHRcdH1cblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHtcblx0XHRcdHRleHQ6IHRoaXMuaXNFZGl0ID8gXCJFZGl0IEJlYXRcIiA6IFwiQ3JlYXRlIEJlYXRcIixcblx0XHR9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5zZXROYW1lKFwiU2NlbmVcIilcblx0XHRcdC5zZXREZXNjKFwiU2VsZWN0IHRoZSBzY2VuZSBmb3IgdGhpcyBiZWF0XCIpXG5cdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG5cdFx0XHRcdC8vIEdyb3VwIHNjZW5lcyBieSBjaGFwdGVyIGZvciBiZXR0ZXIgVVhcblx0XHRcdFx0Y29uc3Qgc2NlbmVzQnlDaGFwdGVyID0gbmV3IE1hcDxzdHJpbmcgfCBudWxsLCBTY2VuZVtdPigpO1xuXHRcdFx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIHRoaXMuc2NlbmVzKSB7XG5cdFx0XHRcdFx0Y29uc3QgY2hhcHRlcklkID0gc2NlbmUuY2hhcHRlcl9pZCB8fCBudWxsO1xuXHRcdFx0XHRcdGlmICghc2NlbmVzQnlDaGFwdGVyLmhhcyhjaGFwdGVySWQpKSB7XG5cdFx0XHRcdFx0XHRzY2VuZXNCeUNoYXB0ZXIuc2V0KGNoYXB0ZXJJZCwgW10pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRzY2VuZXNCeUNoYXB0ZXIuZ2V0KGNoYXB0ZXJJZCkhLnB1c2goc2NlbmUpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gSGVscGVyIHRvIGdldCBjaGFwdGVyIGxhYmVsXG5cdFx0XHRcdGNvbnN0IGdldENoYXB0ZXJMYWJlbCA9IChjaGFwdGVySWQ6IHN0cmluZyB8IG51bGwpOiBzdHJpbmcgPT4ge1xuXHRcdFx0XHRcdGlmICghY2hhcHRlcklkKSByZXR1cm4gXCJObyBDaGFwdGVyXCI7XG5cdFx0XHRcdFx0Y29uc3QgY2hhcHRlciA9IHRoaXMuY2hhcHRlcnMuZmluZChjID0+IGMuaWQgPT09IGNoYXB0ZXJJZCk7XG5cdFx0XHRcdFx0cmV0dXJuIGNoYXB0ZXIgPyBgQ2hhcHRlciAke2NoYXB0ZXIubnVtYmVyfTogJHtjaGFwdGVyLnRpdGxlfWAgOiBcIk5vIENoYXB0ZXJcIjtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvLyBBZGQgc2NlbmVzIGdyb3VwZWRcblx0XHRcdFx0Zm9yIChjb25zdCBbY2hhcHRlcklkLCBjaGFwdGVyU2NlbmVzXSBvZiBzY2VuZXNCeUNoYXB0ZXIuZW50cmllcygpKSB7XG5cdFx0XHRcdFx0Y29uc3QgbGFiZWwgPSBnZXRDaGFwdGVyTGFiZWwoY2hhcHRlcklkKTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IHNjZW5lIG9mIGNoYXB0ZXJTY2VuZXMuc29ydCgoYSwgYikgPT4gYS5vcmRlcl9udW0gLSBiLm9yZGVyX251bSkpIHtcblx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbihcblx0XHRcdFx0XHRcdFx0c2NlbmUuaWQsXG5cdFx0XHRcdFx0XHRcdGAke2xhYmVsfSA+IFNjZW5lICR7c2NlbmUub3JkZXJfbnVtfTogJHtzY2VuZS5nb2FsIHx8IFwiVW50aXRsZWRcIn1gXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGRyb3Bkb3duLnNldFZhbHVlKHRoaXMuYmVhdC5zY2VuZV9pZCB8fCBcIlwiKTtcblx0XHRcdFx0ZHJvcGRvd24ub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5iZWF0LnNjZW5lX2lkID0gdmFsdWU7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRpZiAodGhpcy5pc0VkaXQpIHtcblx0XHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdFx0LnNldE5hbWUoXCJPcmRlciBOdW1iZXJcIilcblx0XHRcdFx0LnNldERlc2MoXCJCZWF0IG9yZGVyIHdpdGhpbiBzY2VuZVwiKVxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCIxXCIpXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5iZWF0Lm9yZGVyX251bT8udG9TdHJpbmcoKSB8fCBcIjFcIilcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRpZiAoIWlzTmFOKG51bSkgJiYgbnVtID4gMCkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYmVhdC5vcmRlcl9udW0gPSBudW07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LnNldE5hbWUoXCJUeXBlXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkJlYXQgdHlwZVwiKVxuXHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT5cblx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHQuYWRkT3B0aW9uKFwic2V0dXBcIiwgXCJTZXR1cFwiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJ0dXJuXCIsIFwiVHVyblwiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJyZXZlYWxcIiwgXCJSZXZlYWxcIilcblx0XHRcdFx0XHQuYWRkT3B0aW9uKFwiY29uZmxpY3RcIiwgXCJDb25mbGljdFwiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oXCJjbGltYXhcIiwgXCJDbGltYXhcIilcblx0XHRcdFx0XHQuYWRkT3B0aW9uKFwicmVzb2x1dGlvblwiLCBcIlJlc29sdXRpb25cIilcblx0XHRcdFx0XHQuYWRkT3B0aW9uKFwiaG9va1wiLCBcIkhvb2tcIilcblx0XHRcdFx0XHQuYWRkT3B0aW9uKFwidHJhbnNpdGlvblwiLCBcIlRyYW5zaXRpb25cIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5iZWF0LnR5cGUgfHwgXCJzZXR1cFwiKVxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuYmVhdC50eXBlID0gdmFsdWU7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuc2V0TmFtZShcIkludGVudFwiKVxuXHRcdFx0LnNldERlc2MoXCJXaGF0IGlzIHRoZSBpbnRlbnQgb2YgdGhpcyBiZWF0P1wiKVxuXHRcdFx0LmFkZFRleHRBcmVhKCh0ZXh0KSA9PlxuXHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiV2hhdCBkb2VzIHRoZSBjaGFyYWN0ZXIgd2FudD9cIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5iZWF0LmludGVudCB8fCBcIlwiKVxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuYmVhdC5pbnRlbnQgPSB2YWx1ZTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5zZXROYW1lKFwiT3V0Y29tZVwiKVxuXHRcdFx0LnNldERlc2MoXCJXaGF0IGlzIHRoZSBvdXRjb21lIG9mIHRoaXMgYmVhdD9cIilcblx0XHRcdC5hZGRUZXh0QXJlYSgodGV4dCkgPT5cblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIldoYXQgaGFwcGVucyBhcyBhIHJlc3VsdD9cIilcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5iZWF0Lm91dGNvbWUgfHwgXCJcIilcblx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmJlYXQub3V0Y29tZSA9IHZhbHVlO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJtb2RhbC1idXR0b24tY29udGFpbmVyXCIgfSk7XG5cblx0XHRjb25zdCBzdWJtaXRCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogdGhpcy5pc0VkaXQgPyBcIlVwZGF0ZVwiIDogXCJDcmVhdGVcIixcblx0XHRcdGNsczogXCJtb2QtY3RhXCIsXG5cdFx0fSk7XG5cdFx0c3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnN1Ym1pdCgpKTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIkNhbmNlbFwiLFxuXHRcdH0pO1xuXHRcdGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblxuXHRcdGNvbnN0IGludGVudElucHV0ID0gY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoXCJ0ZXh0YXJlYVwiKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50IHwgbnVsbDtcblx0XHRpZiAoaW50ZW50SW5wdXQpIHtcblx0XHRcdGludGVudElucHV0LmZvY3VzKCk7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgc3VibWl0KCkge1xuXHRcdGlmICghdGhpcy5iZWF0LnNjZW5lX2lkKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiUGxlYXNlIHNlbGVjdCBhIHNjZW5lXCIsIDMwMDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICghdGhpcy5iZWF0LnR5cGUpIHtcblx0XHRcdG5ldyBOb3RpY2UoXCJQbGVhc2Ugc2VsZWN0IGEgYmVhdCB0eXBlXCIsIDMwMDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEF1dG8tY2FsY3VsYXRlIG9yZGVyX251bSBpZiBjcmVhdGluZ1xuXHRcdGlmICghdGhpcy5pc0VkaXQpIHtcblx0XHRcdGNvbnN0IGJlYXRzSW5TY2VuZSA9IHRoaXMuZXhpc3RpbmdCZWF0cy5maWx0ZXIoYiA9PiBiLnNjZW5lX2lkID09PSB0aGlzLmJlYXQuc2NlbmVfaWQpO1xuXHRcdFx0Y29uc3QgbWF4T3JkZXJOdW0gPSBiZWF0c0luU2NlbmUubGVuZ3RoID4gMFxuXHRcdFx0XHQ/IE1hdGgubWF4KC4uLmJlYXRzSW5TY2VuZS5tYXAoYiA9PiBiLm9yZGVyX251bSkpXG5cdFx0XHRcdDogMDtcblx0XHRcdHRoaXMuYmVhdC5vcmRlcl9udW0gPSBtYXhPcmRlck51bSArIDE7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICghdGhpcy5iZWF0Lm9yZGVyX251bSB8fCB0aGlzLmJlYXQub3JkZXJfbnVtIDwgMSkge1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiT3JkZXIgbnVtYmVyIG11c3QgYmUgZ3JlYXRlciB0aGFuIDBcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5vblN1Ym1pdCh0aGlzLmJlYXQpO1xuXHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIHNhdmUgYmVhdFwiO1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdH1cblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuIiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQ29udGVudEJsb2NrIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBVbnNwbGFzaENsaWVudCwgVW5zcGxhc2hQaG90byB9IGZyb20gXCIuLi8uLi9hcGkvdW5zcGxhc2hcIjtcbmltcG9ydCBTdG9yeUVuZ2luZVBsdWdpbiBmcm9tIFwiLi4vLi4vbWFpblwiO1xuXG5leHBvcnQgY2xhc3MgQ29udGVudEJsb2NrTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGNvbnRlbnRCbG9jazogUGFydGlhbDxDb250ZW50QmxvY2s+ID0ge1xuXHRcdHR5cGU6IFwidGV4dFwiLFxuXHRcdGtpbmQ6IFwiZmluYWxcIixcblx0XHRjb250ZW50OiBcIlwiLFxuXHRcdG1ldGFkYXRhOiB7fSxcblx0fTtcblx0aXNFZGl0OiBib29sZWFuID0gZmFsc2U7XG5cdG9uU3VibWl0OiAoY29udGVudEJsb2NrOiBQYXJ0aWFsPENvbnRlbnRCbG9jaz4pID0+IFByb21pc2U8dm9pZD47XG5cdHVuc3BsYXNoQ2xpZW50OiBVbnNwbGFzaENsaWVudDtcblx0dW5zcGxhc2hSZXN1bHRzOiBVbnNwbGFzaFBob3RvW10gPSBbXTtcblx0dW5zcGxhc2hTZWFyY2hRdWVyeTogc3RyaW5nID0gXCJcIjtcblx0dW5zcGxhc2hTZWFyY2hpbmc6IGJvb2xlYW4gPSBmYWxzZTtcblx0c2VsZWN0ZWRJbWFnZVVybDogc3RyaW5nID0gXCJcIjtcblx0cGx1Z2luOiBTdG9yeUVuZ2luZVBsdWdpbjtcblx0Y3VycmVudEltYWdlU291cmNlVGFiOiBcInVuc3BsYXNoXCIgfCBcImludGVybmV0IGxpbmtcIiB8IFwibG9jYWxcIiA9IFwiaW50ZXJuZXQgbGlua1wiO1xuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdGFwcDogQXBwLFxuXHRcdG9uU3VibWl0OiAoY29udGVudEJsb2NrOiBQYXJ0aWFsPENvbnRlbnRCbG9jaz4pID0+IFByb21pc2U8dm9pZD4sXG5cdFx0Y29udGVudEJsb2NrPzogQ29udGVudEJsb2NrLFxuXHRcdHBsdWdpbj86IFN0b3J5RW5naW5lUGx1Z2luXG5cdCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luIGFzIFN0b3J5RW5naW5lUGx1Z2luO1xuXHRcdGNvbnN0IHVuc3BsYXNoQWNjZXNzS2V5ID0gdGhpcy5wbHVnaW4/LnNldHRpbmdzPy51bnNwbGFzaEFjY2Vzc0tleSB8fCBcIlwiO1xuXHRcdGNvbnN0IHVuc3BsYXNoU2VjcmV0S2V5ID0gdGhpcy5wbHVnaW4/LnNldHRpbmdzPy51bnNwbGFzaFNlY3JldEtleSB8fCBcIlwiO1xuXHRcdHRoaXMudW5zcGxhc2hDbGllbnQgPSBuZXcgVW5zcGxhc2hDbGllbnQodW5zcGxhc2hBY2Nlc3NLZXksIHVuc3BsYXNoU2VjcmV0S2V5KTtcblx0XHRpZiAoY29udGVudEJsb2NrKSB7XG5cdFx0XHR0aGlzLmlzRWRpdCA9IHRydWU7XG5cdFx0XHR0aGlzLmNvbnRlbnRCbG9jayA9IHtcblx0XHRcdFx0dHlwZTogY29udGVudEJsb2NrLnR5cGUsXG5cdFx0XHRcdGtpbmQ6IGNvbnRlbnRCbG9jay5raW5kIHx8IFwiZmluYWxcIixcblx0XHRcdFx0Y29udGVudDogY29udGVudEJsb2NrLmNvbnRlbnQsXG5cdFx0XHRcdG1ldGFkYXRhOiBjb250ZW50QmxvY2subWV0YWRhdGEgfHwge30sXG5cdFx0XHR9O1xuXHRcdFx0aWYgKGNvbnRlbnRCbG9jay50eXBlID09PSBcImltYWdlXCIgJiYgY29udGVudEJsb2NrLmNvbnRlbnQpIHtcblx0XHRcdFx0dGhpcy5zZWxlY3RlZEltYWdlVXJsID0gY29udGVudEJsb2NrLmNvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwge1xuXHRcdFx0dGV4dDogdGhpcy5pc0VkaXQgPyBcIkVkaXQgQ29udGVudCBCbG9ja1wiIDogXCJDcmVhdGUgQ29udGVudCBCbG9ja1wiLFxuXHRcdH0pO1xuXG5cdFx0Ly8gT25seSBzaG93IHR5cGUgc2VsZWN0b3IgaWYgZWRpdGluZyBhbmQgdHlwZSBpcyBub3QgYWxyZWFkeSBzZXRcblx0XHRpZiAodGhpcy5pc0VkaXQgJiYgIXRoaXMuY29udGVudEJsb2NrLnR5cGUpIHtcblx0XHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdFx0LnNldE5hbWUoXCJUeXBlXCIpXG5cdFx0XHRcdC5zZXREZXNjKFwiU2VsZWN0IHRoZSBjb250ZW50IHR5cGVcIilcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT5cblx0XHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdFx0LmFkZE9wdGlvbihcInRleHRcIiwgXCJUZXh0XCIpXG5cdFx0XHRcdFx0XHQuYWRkT3B0aW9uKFwiaW1hZ2VcIiwgXCJJbWFnZVwiKVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuY29udGVudEJsb2NrLnR5cGUgfHwgXCJ0ZXh0XCIpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLnR5cGUgPSB2YWx1ZSBhcyBDb250ZW50QmxvY2tbXCJ0eXBlXCJdO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlckNvbnRlbnRGaWVsZHMoKTtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Ly8gUmVuZGVyIGNvbnRlbnQgZmllbGRzIGJhc2VkIG9uIHR5cGVcblx0XHR0aGlzLnJlbmRlckNvbnRlbnRGaWVsZHMoKTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXG5cdFx0Y29uc3Qgc3VibWl0QnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IHRoaXMuaXNFZGl0ID8gXCJVcGRhdGVcIiA6IFwiQ3JlYXRlXCIsXG5cdFx0XHRjbHM6IFwibW9kLWN0YVwiLFxuXHRcdH0pO1xuXHRcdHN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5zdWJtaXQoKSk7XG5cblx0XHRjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJDYW5jZWxcIixcblx0XHR9KTtcblx0XHRjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XG5cdH1cblxuXHRyZW5kZXJDb250ZW50RmllbGRzKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdFxuXHRcdC8vIFJlbW92ZSBleGlzdGluZyBjb250ZW50IGZpZWxkc1xuXHRcdGNvbnN0IGV4aXN0aW5nRmllbGRzID0gY29udGVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGVudC1ibG9jay1maWVsZFwiKTtcblx0XHRleGlzdGluZ0ZpZWxkcy5mb3JFYWNoKChlbCkgPT4gZWwucmVtb3ZlKCkpO1xuXG5cdFx0aWYgKHRoaXMuY29udGVudEJsb2NrLnR5cGUgPT09IFwidGV4dFwiKSB7XG5cdFx0XHRjb25zdCB0ZXh0RmllbGQgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcImNvbnRlbnQtYmxvY2stZmllbGRcIiB9KTtcblx0XHRcdG5ldyBTZXR0aW5nKHRleHRGaWVsZClcblx0XHRcdFx0LnNldE5hbWUoXCJDb250ZW50XCIpXG5cdFx0XHRcdC5zZXREZXNjKFwiRW50ZXIgdGhlIHRleHQgY29udGVudFwiKVxuXHRcdFx0XHQuYWRkVGV4dEFyZWEoKHRleHQpID0+XG5cdFx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiRW50ZXIgdGV4dC4uLlwiKVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuY29udGVudEJsb2NrLmNvbnRlbnQgfHwgXCJcIilcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2suY29udGVudCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgd29yZCBjb3VudCBpbiBtZXRhZGF0YVxuXHRcdFx0XHRcdFx0XHRpZiAoIXRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEgPSB7fTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YS53b3JkX2NvdW50ID0gdmFsdWUudHJpbSgpLnNwbGl0KC9cXHMrLykuZmlsdGVyKHcgPT4gdy5sZW5ndGggPiAwKS5sZW5ndGg7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXHRcdH0gZWxzZSBpZiAodGhpcy5jb250ZW50QmxvY2sudHlwZSA9PT0gXCJpbWFnZVwiKSB7XG5cdFx0XHRjb25zdCBpbWFnZUZpZWxkID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJjb250ZW50LWJsb2NrLWZpZWxkXCIgfSk7XG5cdFx0XHRcblx0XHRcdC8vIERldGVybWluZSBjdXJyZW50IHNvdXJjZSB0YWIgZnJvbSBtZXRhZGF0YSBvciBkZWZhdWx0XG5cdFx0XHRjb25zdCBzb3VyY2VWYWx1ZSA9IHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhPy5zb3VyY2UgfHwgXCJpbnRlcm5ldCBsaW5rXCI7XG5cdFx0XHR0aGlzLmN1cnJlbnRJbWFnZVNvdXJjZVRhYiA9IHNvdXJjZVZhbHVlIGFzIFwidW5zcGxhc2hcIiB8IFwiaW50ZXJuZXQgbGlua1wiIHwgXCJsb2NhbFwiO1xuXG5cdFx0XHQvLyBTb3VyY2UgdGFic1xuXHRcdFx0Y29uc3QgdGFic0NvbnRhaW5lciA9IGltYWdlRmllbGQuY3JlYXRlRGl2KHsgY2xzOiBcImNvbnRlbnQtYmxvY2stc291cmNlLXRhYnNcIiB9KTtcblx0XHRcdGNvbnN0IHVuc3BsYXNoVGFiID0gdGFic0NvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdHRleHQ6IFwiVW5zcGxhc2hcIixcblx0XHRcdFx0Y2xzOiBgY29udGVudC1ibG9jay1zb3VyY2UtdGFiICR7dGhpcy5jdXJyZW50SW1hZ2VTb3VyY2VUYWIgPT09IFwidW5zcGxhc2hcIiA/IFwiaXMtYWN0aXZlXCIgOiBcIlwifWAsXG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IGludGVybmV0VGFiID0gdGFic0NvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdHRleHQ6IFwiSW50ZXJuZXQgTGlua1wiLFxuXHRcdFx0XHRjbHM6IGBjb250ZW50LWJsb2NrLXNvdXJjZS10YWIgJHt0aGlzLmN1cnJlbnRJbWFnZVNvdXJjZVRhYiA9PT0gXCJpbnRlcm5ldCBsaW5rXCIgPyBcImlzLWFjdGl2ZVwiIDogXCJcIn1gLFxuXHRcdFx0fSk7XG5cdFx0XHRjb25zdCBsb2NhbFRhYiA9IHRhYnNDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHR0ZXh0OiBcIkxvY2FsIFVwbG9hZFwiLFxuXHRcdFx0XHRjbHM6IGBjb250ZW50LWJsb2NrLXNvdXJjZS10YWIgJHt0aGlzLmN1cnJlbnRJbWFnZVNvdXJjZVRhYiA9PT0gXCJsb2NhbFwiID8gXCJpcy1hY3RpdmVcIiA6IFwiXCJ9YCxcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBUYWIgY29udGVudCBjb250YWluZXJcblx0XHRcdGNvbnN0IHRhYkNvbnRlbnQgPSBpbWFnZUZpZWxkLmNyZWF0ZURpdih7IGNsczogXCJjb250ZW50LWJsb2NrLXNvdXJjZS10YWItY29udGVudFwiIH0pO1xuXG5cdFx0XHQvLyBUYWIgY2xpY2sgaGFuZGxlcnNcblx0XHRcdHVuc3BsYXNoVGFiLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuY3VycmVudEltYWdlU291cmNlVGFiID0gXCJ1bnNwbGFzaFwiO1xuXHRcdFx0XHRpZiAoIXRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhKSB7XG5cdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEgPSB7fTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YS5zb3VyY2UgPSBcInVuc3BsYXNoXCI7XG5cdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudEZpZWxkcygpO1xuXHRcdFx0fTtcblxuXHRcdFx0aW50ZXJuZXRUYWIub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0dGhpcy5jdXJyZW50SW1hZ2VTb3VyY2VUYWIgPSBcImludGVybmV0IGxpbmtcIjtcblx0XHRcdFx0aWYgKCF0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSkge1xuXHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhID0ge307XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEuc291cmNlID0gXCJpbnRlcm5ldCBsaW5rXCI7XG5cdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudEZpZWxkcygpO1xuXHRcdFx0fTtcblxuXHRcdFx0bG9jYWxUYWIub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0dGhpcy5jdXJyZW50SW1hZ2VTb3VyY2VUYWIgPSBcImxvY2FsXCI7XG5cdFx0XHRcdGlmICghdGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEpIHtcblx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSA9IHt9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhLnNvdXJjZSA9IFwibG9jYWxcIjtcblx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50RmllbGRzKCk7XG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBSZW5kZXIgY29udGVudCBiYXNlZCBvbiBzZWxlY3RlZCB0YWJcblx0XHRcdGlmICh0aGlzLmN1cnJlbnRJbWFnZVNvdXJjZVRhYiA9PT0gXCJ1bnNwbGFzaFwiKSB7XG5cdFx0XHRcdC8vIFVuc3BsYXNoIHRhYiBjb250ZW50XG5cdFx0XHRcdGNvbnN0IHVuc3BsYXNoQWNjZXNzS2V5ID0gdGhpcy5wbHVnaW4/LnNldHRpbmdzPy51bnNwbGFzaEFjY2Vzc0tleSB8fCBcIlwiO1xuXHRcdFx0XHRpZiAodW5zcGxhc2hBY2Nlc3NLZXkgJiYgdW5zcGxhc2hBY2Nlc3NLZXkgIT09IFwiWU9VUl9VTlNQTEFTSF9BQ0NFU1NfS0VZXCIpIHtcblx0XHRcdFx0XHRjb25zdCB1bnNwbGFzaFNldHRpbmcgPSBuZXcgU2V0dGluZyh0YWJDb250ZW50KTtcblx0XHRcdFx0XHR1bnNwbGFzaFNldHRpbmcuc2V0TmFtZShcIlNlYXJjaCBVbnNwbGFzaFwiKTtcblx0XHRcdFx0XHR1bnNwbGFzaFNldHRpbmcuc2V0RGVzYyhcIlNlYXJjaCBmb3IgZnJlZSBpbWFnZXNcIik7XG5cdFx0XHRcdFx0dW5zcGxhc2hTZXR0aW5nLmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XG5cdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChcIlNlYXJjaFwiKTtcblx0XHRcdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zaG93VW5zcGxhc2hTZWFyY2goKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnN0IHVuc3BsYXNoU2V0dGluZyA9IG5ldyBTZXR0aW5nKHRhYkNvbnRlbnQpO1xuXHRcdFx0XHRcdHVuc3BsYXNoU2V0dGluZy5zZXROYW1lKFwiU2VhcmNoIFVuc3BsYXNoXCIpO1xuXHRcdFx0XHRcdHVuc3BsYXNoU2V0dGluZy5zZXREZXNjKFwiQ29uZmlndXJlIFVuc3BsYXNoIEFjY2VzcyBLZXkgYW5kIFNlY3JldCBLZXkgaW4gcGx1Z2luIHNldHRpbmdzIHRvIGVuYWJsZSBpbWFnZSBzZWFyY2hcIik7XG5cdFx0XHRcdFx0dW5zcGxhc2hTZXR0aW5nLmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XG5cdFx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChcIlNlYXJjaFwiKTtcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFNob3cgaW1hZ2UgVVJMIGlmIGFscmVhZHkgc2VsZWN0ZWRcblx0XHRcdFx0aWYgKHRoaXMuc2VsZWN0ZWRJbWFnZVVybCkge1xuXHRcdFx0XHRcdG5ldyBTZXR0aW5nKHRhYkNvbnRlbnQpXG5cdFx0XHRcdFx0XHQuc2V0TmFtZShcIlNlbGVjdGVkIEltYWdlIFVSTFwiKVxuXHRcdFx0XHRcdFx0LnNldERlc2MoXCJJbWFnZSBVUkwgZnJvbSBVbnNwbGFzaFwiKVxuXHRcdFx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5zZWxlY3RlZEltYWdlVXJsKVxuXHRcdFx0XHRcdFx0XHRcdC5zZXREaXNhYmxlZCh0cnVlKVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0aGlzLmN1cnJlbnRJbWFnZVNvdXJjZVRhYiA9PT0gXCJpbnRlcm5ldCBsaW5rXCIpIHtcblx0XHRcdFx0Ly8gSW50ZXJuZXQgTGluayB0YWIgY29udGVudFxuXHRcdFx0XHRuZXcgU2V0dGluZyh0YWJDb250ZW50KVxuXHRcdFx0XHRcdC5zZXROYW1lKFwiSW1hZ2UgVVJMXCIpXG5cdFx0XHRcdFx0LnNldERlc2MoXCJFbnRlciBpbWFnZSBVUkxcIilcblx0XHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZS5qcGdcIilcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMuc2VsZWN0ZWRJbWFnZVVybClcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuc2VsZWN0ZWRJbWFnZVVybCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLmNvbnRlbnQgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIXRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSA9IHt9O1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YS5zb3VyY2UgPSBcImludGVybmV0IGxpbmtcIjtcblx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQpO1xuXHRcdFx0fSBlbHNlIGlmICh0aGlzLmN1cnJlbnRJbWFnZVNvdXJjZVRhYiA9PT0gXCJsb2NhbFwiKSB7XG5cdFx0XHRcdC8vIExvY2FsIFVwbG9hZCB0YWIgY29udGVudFxuXHRcdFx0XHRuZXcgU2V0dGluZyh0YWJDb250ZW50KVxuXHRcdFx0XHRcdC5zZXROYW1lKFwiVXBsb2FkIGZyb20gQ29tcHV0ZXJcIilcblx0XHRcdFx0XHQuc2V0RGVzYyhcIlVwbG9hZCBpbWFnZSBmcm9tIHlvdXIgY29tcHV0ZXIgKGNvbWluZyBzb29uKVwiKVxuXHRcdFx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xuXHRcdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoXCJDaG9vc2UgRmlsZVwiKTtcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29tbW9uIGZpZWxkcyAoc2hvd24gZm9yIGFsbCB0YWJzKVxuXHRcdFx0Ly8gQWx0IHRleHRcblx0XHRcdGNvbnN0IGFsdFRleHRWYWx1ZSA9IHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhPy5hbHRfdGV4dCB8fCBcIlwiO1xuXHRcdFx0Y29uc3QgYWx0VGV4dFNldHRpbmcgPSBuZXcgU2V0dGluZyhpbWFnZUZpZWxkKTtcblx0XHRcdGFsdFRleHRTZXR0aW5nLnNldE5hbWUoXCJBbHQgVGV4dFwiKTtcblx0XHRcdGFsdFRleHRTZXR0aW5nLnNldERlc2MoXCJBbHQgdGV4dCBmb3IgYWNjZXNzaWJpbGl0eVwiKTtcblx0XHRcdGFsdFRleHRTZXR0aW5nLmFkZFRleHQoKHRleHQpID0+XG5cdFx0XHRcdHRleHRcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJEZXNjcmliZSB0aGUgaW1hZ2UgZm9yIGFjY2Vzc2liaWxpdHlcIilcblx0XHRcdFx0XHQuc2V0VmFsdWUoYWx0VGV4dFZhbHVlKVxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdGlmICghdGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEgPSB7fTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhLmFsdF90ZXh0ID0gdmFsdWUgfHwgdW5kZWZpbmVkO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0XHQvLyBBdXRob3IgTmFtZVxuXHRcdFx0Y29uc3QgYXV0aG9yTmFtZVZhbHVlID0gdGhpcy5jb250ZW50QmxvY2subWV0YWRhdGE/LmF1dGhvcl9uYW1lIHx8IFwiXCI7XG5cdFx0XHRuZXcgU2V0dGluZyhpbWFnZUZpZWxkKVxuXHRcdFx0XHQuc2V0TmFtZShcIkF1dGhvciBOYW1lXCIpXG5cdFx0XHRcdC5zZXREZXNjKFwiTmFtZSBvZiB0aGUgaW1hZ2UgYXV0aG9yL3Bob3RvZ3JhcGhlclwiKVxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJBdXRob3IgbmFtZVwiKVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKGF1dGhvck5hbWVWYWx1ZSlcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKCF0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhID0ge307XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEuYXV0aG9yX25hbWUgPSB2YWx1ZSB8fCB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHQpO1xuXG5cdFx0XHQvLyBBdHRyaWJ1dGlvblxuXHRcdFx0Y29uc3QgYXR0cmlidXRpb25WYWx1ZSA9IHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhPy5hdHRyaWJ1dGlvbiB8fCBcIlwiO1xuXHRcdFx0bmV3IFNldHRpbmcoaW1hZ2VGaWVsZClcblx0XHRcdFx0LnNldE5hbWUoXCJBdHRyaWJ1dGlvblwiKVxuXHRcdFx0XHQuc2V0RGVzYyhcIkF0dHJpYnV0aW9uIHRleHQgKGUuZy4sICdQaG90byBieSBKb2huIERvZSBvbiBVbnNwbGFzaCcpXCIpXG5cdFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuXHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIlBob3RvIGJ5IEF1dGhvciBOYW1lIG9uIFNvdXJjZVwiKVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKGF0dHJpYnV0aW9uVmFsdWUpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmICghdGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSA9IHt9O1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhLmF0dHJpYnV0aW9uID0gdmFsdWUgfHwgdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblxuXHRcdFx0Ly8gQXR0cmlidXRpb24gVVJMXG5cdFx0XHRjb25zdCBhdHRyaWJ1dGlvblVybFZhbHVlID0gdGhpcy5jb250ZW50QmxvY2subWV0YWRhdGE/LmF0dHJpYnV0aW9uX3VybCB8fCBcIlwiO1xuXHRcdFx0bmV3IFNldHRpbmcoaW1hZ2VGaWVsZClcblx0XHRcdFx0LnNldE5hbWUoXCJBdHRyaWJ1dGlvbiBVUkxcIilcblx0XHRcdFx0LnNldERlc2MoXCJMaW5rIHRvIHRoZSBvcmlnaW5hbCBpbWFnZSBvciBhdXRob3IgcGFnZVwiKVxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJodHRwczovL2V4YW1wbGUuY29tL3Bob3RvXCIpXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoYXR0cmlidXRpb25VcmxWYWx1ZSlcblx0XHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKCF0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhID0ge307XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEuYXR0cmlidXRpb25fdXJsID0gdmFsdWUgfHwgdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0KTtcblx0XHR9XG5cdH1cblxuXHRzaG93VW5zcGxhc2hTZWFyY2goKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0XG5cdFx0Ly8gQ3JlYXRlIHNlYXJjaCBtb2RhbFxuXHRcdGNvbnN0IHNlYXJjaE1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcblx0XHRzZWFyY2hNb2RhbC50aXRsZUVsLnNldFRleHQoXCJTZWFyY2ggVW5zcGxhc2hcIik7XG5cblx0XHRjb25zdCBzZWFyY2hDb250ZW50ID0gc2VhcmNoTW9kYWwuY29udGVudEVsO1xuXHRcdFxuXHRcdC8vIFNlYXJjaCBpbnB1dFxuXHRcdGNvbnN0IHNlYXJjaElucHV0ID0gc2VhcmNoQ29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHtcblx0XHRcdHR5cGU6IFwidGV4dFwiLFxuXHRcdFx0cGxhY2Vob2xkZXI6IFwiU2VhcmNoIGZvciBpbWFnZXMuLi5cIixcblx0XHRcdGNsczogXCJ1bnNwbGFzaC1zZWFyY2gtaW5wdXRcIixcblx0XHR9KTtcblx0XHRzZWFyY2hJbnB1dC52YWx1ZSA9IHRoaXMudW5zcGxhc2hTZWFyY2hRdWVyeTtcblx0XHRzZWFyY2hJbnB1dC5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuXHRcdHNlYXJjaElucHV0LnN0eWxlLnBhZGRpbmcgPSBcIjAuNXJlbVwiO1xuXHRcdHNlYXJjaElucHV0LnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiMXJlbVwiO1xuXG5cdFx0Ly8gU2VhcmNoIGJ1dHRvblxuXHRcdGNvbnN0IHNlYXJjaEJ1dHRvbiA9IHNlYXJjaENvbnRlbnQuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJTZWFyY2hcIixcblx0XHRcdGNsczogXCJtb2QtY3RhXCIsXG5cdFx0fSk7XG5cdFx0c2VhcmNoQnV0dG9uLnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiMXJlbVwiO1xuXG5cdFx0Ly8gUmVzdWx0cyBjb250YWluZXJcblx0XHRjb25zdCByZXN1bHRzQ29udGFpbmVyID0gc2VhcmNoQ29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwidW5zcGxhc2gtcmVzdWx0cy1ncmlkXCIgfSk7XG5cblx0XHRjb25zdCBwZXJmb3JtU2VhcmNoID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0Y29uc3QgcXVlcnkgPSBzZWFyY2hJbnB1dC52YWx1ZS50cmltKCk7XG5cdFx0XHRpZiAoIXF1ZXJ5KSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJQbGVhc2UgZW50ZXIgYSBzZWFyY2ggcXVlcnlcIiwgMzAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy51bnNwbGFzaFNlYXJjaGluZyA9IHRydWU7XG5cdFx0XHRzZWFyY2hCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0c2VhcmNoQnV0dG9uLnNldFRleHQoXCJTZWFyY2hpbmcuLi5cIik7XG5cdFx0XHRyZXN1bHRzQ29udGFpbmVyLmVtcHR5KCk7XG5cdFx0XHRyZXN1bHRzQ29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiU2VhcmNoaW5nLi4uXCIgfSk7XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy51bnNwbGFzaENsaWVudC5zZWFyY2hJbWFnZXMocXVlcnksIDEsIDIwKTtcblx0XHRcdFx0dGhpcy51bnNwbGFzaFJlc3VsdHMgPSByZXNwb25zZS5yZXN1bHRzO1xuXG5cdFx0XHRcdHJlc3VsdHNDb250YWluZXIuZW1wdHkoKTtcblx0XHRcdFx0aWYgKHRoaXMudW5zcGxhc2hSZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdHJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyByZXN1bHRzIGZvdW5kLlwiIH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgcGhvdG8gb2YgdGhpcy51bnNwbGFzaFJlc3VsdHMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHBob3RvSXRlbSA9IHJlc3VsdHNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInVuc3BsYXNoLXBob3RvLWl0ZW1cIiB9KTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Y29uc3QgaW1nID0gcGhvdG9JdGVtLmNyZWF0ZUVsKFwiaW1nXCIsIHtcblx0XHRcdFx0XHRcdFx0YXR0cjoge1xuXHRcdFx0XHRcdFx0XHRcdHNyYzogdGhpcy51bnNwbGFzaENsaWVudC5nZXRJbWFnZVVybChwaG90bywgXCJ0aHVtYlwiKSxcblx0XHRcdFx0XHRcdFx0XHRhbHQ6IHBob3RvLmFsdF9kZXNjcmlwdGlvbiB8fCBwaG90by5kZXNjcmlwdGlvbiB8fCBcIlVuc3BsYXNoIHBob3RvXCIsXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGltZy5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuXHRcdFx0XHRcdFx0aW1nLnN0eWxlLmhlaWdodCA9IFwiMTUwcHhcIjtcblx0XHRcdFx0XHRcdGltZy5zdHlsZS5vYmplY3RGaXQgPSBcImNvdmVyXCI7XG5cdFx0XHRcdFx0XHRpbWcuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI0cHhcIjtcblx0XHRcdFx0XHRcdGltZy5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcblxuXHRcdFx0XHRcdFx0Y29uc3QgcGhvdG9JbmZvID0gcGhvdG9JdGVtLmNyZWF0ZURpdih7IGNsczogXCJ1bnNwbGFzaC1waG90by1pbmZvXCIgfSk7XG5cdFx0XHRcdFx0XHRwaG90b0luZm8uY3JlYXRlRWwoXCJwXCIsIHtcblx0XHRcdFx0XHRcdFx0dGV4dDogcGhvdG8uYWx0X2Rlc2NyaXB0aW9uIHx8IHBob3RvLmRlc2NyaXB0aW9uIHx8IFwiVW50aXRsZWRcIixcblx0XHRcdFx0XHRcdFx0Y2xzOiBcInVuc3BsYXNoLXBob3RvLXRpdGxlXCIsXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdHBob3RvSW5mby5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0XHRcdFx0XHR0ZXh0OiB0aGlzLnVuc3BsYXNoQ2xpZW50LmdldEF0dHJpYnV0aW9uVGV4dChwaG90byksXG5cdFx0XHRcdFx0XHRcdGNsczogXCJ1bnNwbGFzaC1waG90by1hdHRyaWJ1dGlvblwiLFxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdHBob3RvSXRlbS5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBpbWFnZVVybCA9IHRoaXMudW5zcGxhc2hDbGllbnQuZ2V0SW1hZ2VVcmwocGhvdG8sIFwicmVndWxhclwiKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5zZWxlY3RlZEltYWdlVXJsID0gaW1hZ2VVcmw7XG5cdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLmNvbnRlbnQgPSBpbWFnZVVybDtcblx0XHRcdFx0XHRcdFx0aWYgKCF0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhID0ge307XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0Y29uc3QgYWx0VGV4dCA9IHBob3RvLmFsdF9kZXNjcmlwdGlvbiB8fCBwaG90by5kZXNjcmlwdGlvbiB8fCBcIlwiO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YS5hbHRfdGV4dCA9IGFsdFRleHQ7XG5cdFx0XHRcdFx0XHRcdC8vIEFkZCBhdHRyaWJ1dGlvbiBhcyByZXF1aXJlZCBieSBVbnNwbGFzaFxuXHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YS5hdHRyaWJ1dGlvbiA9IHRoaXMudW5zcGxhc2hDbGllbnQuZ2V0QXR0cmlidXRpb25UZXh0KHBob3RvKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5jb250ZW50QmxvY2subWV0YWRhdGEuYXR0cmlidXRpb25fdXJsID0gdGhpcy51bnNwbGFzaENsaWVudC5nZXRBdHRyaWJ1dGlvblVybChwaG90byk7XG5cdFx0XHRcdFx0XHRcdHRoaXMuY29udGVudEJsb2NrLm1ldGFkYXRhLmF1dGhvcl9uYW1lID0gcGhvdG8udXNlci5uYW1lO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmNvbnRlbnRCbG9jay5tZXRhZGF0YS5zb3VyY2UgPSBcInVuc3BsYXNoXCI7XG5cdFx0XHRcdFx0XHRcdHNlYXJjaE1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudEZpZWxkcygpO1xuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiSW1hZ2Ugc2VsZWN0ZWRcIik7XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBzZWFyY2ggVW5zcGxhc2hcIjtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdFx0XHRyZXN1bHRzQ29udGFpbmVyLmVtcHR5KCk7XG5cdFx0XHRcdHJlc3VsdHNDb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHtcblx0XHRcdFx0XHR0ZXh0OiBgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsXG5cdFx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1lcnJvclwiLFxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdHRoaXMudW5zcGxhc2hTZWFyY2hpbmcgPSBmYWxzZTtcblx0XHRcdFx0c2VhcmNoQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG5cdFx0XHRcdHNlYXJjaEJ1dHRvbi5zZXRUZXh0KFwiU2VhcmNoXCIpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRzZWFyY2hCdXR0b24ub25jbGljayA9IHBlcmZvcm1TZWFyY2g7XG5cdFx0c2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXByZXNzXCIsIChlKSA9PiB7XG5cdFx0XHRpZiAoZS5rZXkgPT09IFwiRW50ZXJcIikge1xuXHRcdFx0XHRwZXJmb3JtU2VhcmNoKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBMb2FkIGluaXRpYWwgcmVzdWx0cyBpZiBxdWVyeSBleGlzdHNcblx0XHRpZiAodGhpcy51bnNwbGFzaFNlYXJjaFF1ZXJ5KSB7XG5cdFx0XHRwZXJmb3JtU2VhcmNoKCk7XG5cdFx0fVxuXG5cdFx0c2VhcmNoTW9kYWwub3BlbigpO1xuXHR9XG5cblx0YXN5bmMgc3VibWl0KCkge1xuXHRcdC8vIFR5cGUgc2hvdWxkIGFsd2F5cyBiZSBzZXQgKGVpdGhlciBmcm9tIGVkaXQgb3IgZnJvbSBidXR0b24gY2xpY2spXG5cdFx0aWYgKCF0aGlzLmNvbnRlbnRCbG9jay50eXBlKSB7XG5cdFx0XHR0aGlzLmNvbnRlbnRCbG9jay50eXBlID0gXCJ0ZXh0XCI7IC8vIERlZmF1bHQgZmFsbGJhY2tcblx0XHR9XG5cblx0XHRpZiAodGhpcy5jb250ZW50QmxvY2sudHlwZSA9PT0gXCJ0ZXh0XCIgJiYgIXRoaXMuY29udGVudEJsb2NrLmNvbnRlbnQ/LnRyaW0oKSkge1xuXHRcdFx0bmV3IE5vdGljZShcIlBsZWFzZSBlbnRlciB0ZXh0IGNvbnRlbnRcIiwgMzAwMCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuY29udGVudEJsb2NrLnR5cGUgPT09IFwiaW1hZ2VcIiAmJiAhdGhpcy5jb250ZW50QmxvY2suY29udGVudD8udHJpbSgpKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiUGxlYXNlIGVudGVyIGFuIGltYWdlIFVSTCBvciBzZWxlY3QgYW4gaW1hZ2VcIiwgMzAwMCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHRoaXMub25TdWJtaXQodGhpcy5jb250ZW50QmxvY2spO1xuXHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkIHRvIHNhdmUgY29udGVudCBibG9ja1wiO1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWAsIDUwMDApO1xuXHRcdH1cblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuIiwgImV4cG9ydCBpbnRlcmZhY2UgVW5zcGxhc2hQaG90byB7XG5cdGlkOiBzdHJpbmc7XG5cdHdpZHRoOiBudW1iZXI7XG5cdGhlaWdodDogbnVtYmVyO1xuXHR1cmxzOiB7XG5cdFx0cmF3OiBzdHJpbmc7XG5cdFx0ZnVsbDogc3RyaW5nO1xuXHRcdHJlZ3VsYXI6IHN0cmluZztcblx0XHRzbWFsbDogc3RyaW5nO1xuXHRcdHRodW1iOiBzdHJpbmc7XG5cdH07XG5cdGFsdF9kZXNjcmlwdGlvbjogc3RyaW5nIHwgbnVsbDtcblx0ZGVzY3JpcHRpb246IHN0cmluZyB8IG51bGw7XG5cdHVzZXI6IHtcblx0XHRuYW1lOiBzdHJpbmc7XG5cdFx0dXNlcm5hbWU6IHN0cmluZztcblx0fTtcblx0bGlua3M6IHtcblx0XHRodG1sOiBzdHJpbmc7XG5cdH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVW5zcGxhc2hTZWFyY2hSZXNwb25zZSB7XG5cdHRvdGFsOiBudW1iZXI7XG5cdHRvdGFsX3BhZ2VzOiBudW1iZXI7XG5cdHJlc3VsdHM6IFVuc3BsYXNoUGhvdG9bXTtcbn1cblxuZXhwb3J0IGNsYXNzIFVuc3BsYXNoQ2xpZW50IHtcblx0cHJpdmF0ZSByZWFkb25seSBhY2Nlc3NLZXk6IHN0cmluZztcblx0cHJpdmF0ZSByZWFkb25seSBzZWNyZXRLZXk6IHN0cmluZztcblx0cHJpdmF0ZSByZWFkb25seSBhcGlVcmwgPSBcImh0dHBzOi8vYXBpLnVuc3BsYXNoLmNvbVwiO1xuXG5cdGNvbnN0cnVjdG9yKGFjY2Vzc0tleT86IHN0cmluZywgc2VjcmV0S2V5Pzogc3RyaW5nKSB7XG5cdFx0Ly8gVW5zcGxhc2ggcmVxdWlyZXMgYW4gYWNjZXNzIGtleSAoQXBwbGljYXRpb24gSUQpIGZvciBBUEkgYWNjZXNzXG5cdFx0Ly8gU2VjcmV0IEtleSBpcyBvcHRpb25hbCBidXQgbWF5IGJlIG5lZWRlZCBmb3Igc29tZSBvcGVyYXRpb25zXG5cdFx0Ly8gWW91IGNhbiBnZXQgYm90aCBrZXlzIGZyb20gaHR0cHM6Ly91bnNwbGFzaC5jb20vZGV2ZWxvcGVyc1xuXHRcdHRoaXMuYWNjZXNzS2V5ID0gYWNjZXNzS2V5IHx8IFwiWU9VUl9VTlNQTEFTSF9BQ0NFU1NfS0VZXCI7XG5cdFx0dGhpcy5zZWNyZXRLZXkgPSBzZWNyZXRLZXkgfHwgXCJcIjtcblx0fVxuXG5cdGFzeW5jIHNlYXJjaEltYWdlcyhxdWVyeTogc3RyaW5nLCBwYWdlOiBudW1iZXIgPSAxLCBwZXJQYWdlOiBudW1iZXIgPSAyMCk6IFByb21pc2U8VW5zcGxhc2hTZWFyY2hSZXNwb25zZT4ge1xuXHRcdGNvbnN0IHVybCA9IGAke3RoaXMuYXBpVXJsfS9zZWFyY2gvcGhvdG9zP3F1ZXJ5PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHF1ZXJ5KX0mcGFnZT0ke3BhZ2V9JnBlcl9wYWdlPSR7cGVyUGFnZX1gO1xuXHRcdFxuXHRcdGNvbnN0IGhlYWRlcnM6IEhlYWRlcnNJbml0ID0ge1xuXHRcdFx0XCJBY2NlcHQtVmVyc2lvblwiOiBcInYxXCIsXG5cdFx0fTtcblxuXHRcdC8vIFVuc3BsYXNoIEFQSSByZXF1aXJlcyBBdXRob3JpemF0aW9uIGhlYWRlciB3aXRoIGFjY2VzcyBrZXlcblx0XHRpZiAoIXRoaXMuYWNjZXNzS2V5IHx8IHRoaXMuYWNjZXNzS2V5ID09PSBcIllPVVJfVU5TUExBU0hfQUNDRVNTX0tFWVwiKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJVbnNwbGFzaCBhY2Nlc3Mga2V5IGlzIHJlcXVpcmVkLiBQbGVhc2UgY29uZmlndXJlIGl0IGluIHBsdWdpbiBzZXR0aW5ncy5cIik7XG5cdFx0fVxuXG5cdFx0aGVhZGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSBgQ2xpZW50LUlEICR7dGhpcy5hY2Nlc3NLZXl9YDtcblxuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7IGhlYWRlcnMgfSk7XG5cblx0XHRpZiAoIXJlc3BvbnNlLm9rKSB7XG5cdFx0XHRjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYFVuc3BsYXNoIEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH0uICR7ZXJyb3JUZXh0fWApO1xuXHRcdH1cblxuXHRcdHJldHVybiByZXNwb25zZS5qc29uKCkgYXMgUHJvbWlzZTxVbnNwbGFzaFNlYXJjaFJlc3BvbnNlPjtcblx0fVxuXG5cdGdldEltYWdlVXJsKHBob3RvOiBVbnNwbGFzaFBob3RvLCBzaXplOiBcInJhd1wiIHwgXCJmdWxsXCIgfCBcInJlZ3VsYXJcIiB8IFwic21hbGxcIiB8IFwidGh1bWJcIiA9IFwicmVndWxhclwiKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gcGhvdG8udXJsc1tzaXplXTtcblx0fVxuXG5cdGdldEF0dHJpYnV0aW9uVXJsKHBob3RvOiBVbnNwbGFzaFBob3RvKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gcGhvdG8ubGlua3MuaHRtbDtcblx0fVxuXG5cdGdldEF0dHJpYnV0aW9uVGV4dChwaG90bzogVW5zcGxhc2hQaG90byk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIGBQaG90byBieSAke3Bob3RvLnVzZXIubmFtZX0gb24gVW5zcGxhc2hgO1xuXHR9XG59XG5cbiIsICJpbXBvcnQgeyBNb2RhbCwgQXBwLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbi8vIEB0cy1pZ25vcmUgLSBkMyB0eXBlcyBtYXkgbm90IHJlc29sdmUgY29ycmVjdGx5IGluIGFsbCBlbnZpcm9ubWVudHNcbmltcG9ydCAqIGFzIGQzIGZyb20gXCJkM1wiO1xuaW1wb3J0IHsgV29ybGRFdmVudCwgVGltZUNvbmZpZyB9IGZyb20gXCIuLi90eXBlc1wiO1xuXG5pbnRlcmZhY2UgVGltZWxpbmVFdmVudCBleHRlbmRzIFdvcmxkRXZlbnQge1xuXHR0aW1lbGluZV9wb3NpdGlvbjogbnVtYmVyO1xuXHRwYXJlbnRfaWQ6IHN0cmluZyB8IG51bGw7XG5cdGlzX2Vwb2NoOiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgVGltZWxpbmVNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0ZXZlbnRzOiBXb3JsZEV2ZW50W107XG5cdHRpbWVDb25maWc6IFRpbWVDb25maWcgfCBudWxsO1xuXHRcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGV2ZW50czogV29ybGRFdmVudFtdLCB0aW1lQ29uZmlnOiBUaW1lQ29uZmlnIHwgbnVsbCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5ldmVudHMgPSBldmVudHM7XG5cdFx0dGhpcy50aW1lQ29uZmlnID0gdGltZUNvbmZpZztcblx0fVxuXHRcblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHRcdGNvbnRlbnRFbC5hZGRDbGFzcyhcInN0b3J5LWVuZ2luZS10aW1lbGluZS1tb2RhbFwiKTtcblx0XHRcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiV29ybGQgVGltZWxpbmVcIiB9KTtcblx0XHRcblx0XHQvLyBDb250YWluZXIgcGFyYSBvIGdyYWZpY28gRDNcblx0XHRjb25zdCBjaGFydENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXRpbWVsaW5lLWNoYXJ0XCIgfSk7XG5cdFx0XG5cdFx0dGhpcy5yZW5kZXJUaW1lbGluZShjaGFydENvbnRhaW5lcik7XG5cdH1cblx0XG5cdHJlbmRlclRpbWVsaW5lKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRpZiAodGhpcy5ldmVudHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBldmVudHMgd2l0aCB0aW1lbGluZSBkYXRhIGZvdW5kLlwiIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIERpbWVuc29lc1xuXHRcdGNvbnN0IHdpZHRoID0gODAwO1xuXHRcdGNvbnN0IGhlaWdodCA9IDQwMDtcblx0XHRjb25zdCBtYXJnaW4gPSB7IHRvcDogMjAsIHJpZ2h0OiAzMCwgYm90dG9tOiA1MCwgbGVmdDogNjAgfTtcblx0XHRcblx0XHQvLyBDcmlhciBTVkdcblx0XHRjb25zdCBzdmcgPSBkMy5zZWxlY3QoY29udGFpbmVyKVxuXHRcdFx0LmFwcGVuZChcInN2Z1wiKVxuXHRcdFx0LmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcblx0XHRcdC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCk7XG5cdFx0XG5cdFx0Ly8gRmlsdHJhciBldmVudG9zIGNvbSB0aW1lbGluZV9wb3NpdGlvblxuXHRcdGNvbnN0IGV2ZW50c1dpdGhQb3NpdGlvbjogVGltZWxpbmVFdmVudFtdID0gdGhpcy5ldmVudHMubWFwKChlLCBpKSA9PiAoe1xuXHRcdFx0Li4uZSxcblx0XHRcdHRpbWVsaW5lX3Bvc2l0aW9uOiBlLnRpbWVsaW5lX3Bvc2l0aW9uID8/IGkgKiAxMCxcblx0XHRcdHBhcmVudF9pZDogZS5wYXJlbnRfaWQgPz8gbnVsbCxcblx0XHRcdGlzX2Vwb2NoOiBlLmlzX2Vwb2NoID8/IGZhbHNlLFxuXHRcdH0pKTtcblxuXHRcdC8vIEVzY2FsYSBYICh0aW1lbGluZV9wb3NpdGlvbiBlbSBhbm9zKVxuXHRcdGNvbnN0IHhFeHRlbnQgPSBkMy5leHRlbnQoZXZlbnRzV2l0aFBvc2l0aW9uLCAoZDogVGltZWxpbmVFdmVudCkgPT4gZC50aW1lbGluZV9wb3NpdGlvbikgYXMgW251bWJlciwgbnVtYmVyXTtcblx0XHRjb25zdCB4U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpXG5cdFx0XHQuZG9tYWluKFt4RXh0ZW50WzBdIC0gMSwgeEV4dGVudFsxXSArIDFdKVxuXHRcdFx0LnJhbmdlKFttYXJnaW4ubGVmdCwgd2lkdGggLSBtYXJnaW4ucmlnaHRdKTtcblx0XHRcblx0XHQvLyBFc2NhbGEgWSAoaW1wb3J0YW5jZSAxLTEwKVxuXHRcdGNvbnN0IHlTY2FsZSA9IGQzLnNjYWxlTGluZWFyKClcblx0XHRcdC5kb21haW4oWzAsIDEwXSlcblx0XHRcdC5yYW5nZShbaGVpZ2h0IC0gbWFyZ2luLmJvdHRvbSwgbWFyZ2luLnRvcF0pO1xuXHRcdFxuXHRcdC8vIEVzY2FsYSBkZSBjb3IgcG9yIHRpcG8gZGUgZXZlbnRvXG5cdFx0Y29uc3QgY29sb3JTY2FsZSA9IGQzLnNjYWxlT3JkaW5hbChkMy5zY2hlbWVDYXRlZ29yeTEwKTtcblx0XHRcblx0XHQvLyBFaXhvIFhcblx0XHRzdmcuYXBwZW5kKFwiZ1wiKVxuXHRcdFx0LmF0dHIoXCJ0cmFuc2Zvcm1cIiwgYHRyYW5zbGF0ZSgwLCR7aGVpZ2h0IC0gbWFyZ2luLmJvdHRvbX0pYClcblx0XHRcdC5jYWxsKGQzLmF4aXNCb3R0b20oeFNjYWxlKS50aWNrRm9ybWF0KChkOiBkMy5OdW1iZXJWYWx1ZSkgPT4gYFllYXIgJHtkfWApKTtcblx0XHRcblx0XHQvLyBFaXhvIFlcblx0XHRzdmcuYXBwZW5kKFwiZ1wiKVxuXHRcdFx0LmF0dHIoXCJ0cmFuc2Zvcm1cIiwgYHRyYW5zbGF0ZSgke21hcmdpbi5sZWZ0fSwwKWApXG5cdFx0XHQuY2FsbChkMy5heGlzTGVmdCh5U2NhbGUpLnRpY2tGb3JtYXQoKGQ6IGQzLk51bWJlclZhbHVlKSA9PiBgSW1wICR7ZH1gKSk7XG5cdFx0XG5cdFx0Ly8gQ29uZWN0YXIgZXZlbnRvcyBwYWktZmlsaG8gY29tIGxpbmhhcyAoc2UgaG91dmVyIHBhcmVudF9pZClcblx0XHRjb25zdCBldmVudHNXaXRoUGFyZW50ID0gZXZlbnRzV2l0aFBvc2l0aW9uLmZpbHRlcihlID0+IGUucGFyZW50X2lkKTtcblx0XHRzdmcuc2VsZWN0QWxsKFwibGluZS5wYXJlbnQtbGlua1wiKVxuXHRcdFx0LmRhdGEoZXZlbnRzV2l0aFBhcmVudClcblx0XHRcdC5qb2luKFwibGluZVwiKVxuXHRcdFx0LmF0dHIoXCJjbGFzc1wiLCBcInBhcmVudC1saW5rXCIpXG5cdFx0XHQuYXR0cihcIngxXCIsIChkOiBUaW1lbGluZUV2ZW50KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHBhcmVudCA9IGV2ZW50c1dpdGhQb3NpdGlvbi5maW5kKGUgPT4gZS5pZCA9PT0gZC5wYXJlbnRfaWQpO1xuXHRcdFx0XHRyZXR1cm4gcGFyZW50ID8geFNjYWxlKHBhcmVudC50aW1lbGluZV9wb3NpdGlvbikgOiAwO1xuXHRcdFx0fSlcblx0XHRcdC5hdHRyKFwieTFcIiwgKGQ6IFRpbWVsaW5lRXZlbnQpID0+IHtcblx0XHRcdFx0Y29uc3QgcGFyZW50ID0gZXZlbnRzV2l0aFBvc2l0aW9uLmZpbmQoZSA9PiBlLmlkID09PSBkLnBhcmVudF9pZCk7XG5cdFx0XHRcdHJldHVybiBwYXJlbnQgPyB5U2NhbGUocGFyZW50LmltcG9ydGFuY2UpIDogMDtcblx0XHRcdH0pXG5cdFx0XHQuYXR0cihcIngyXCIsIChkOiBUaW1lbGluZUV2ZW50KSA9PiB4U2NhbGUoZC50aW1lbGluZV9wb3NpdGlvbikpXG5cdFx0XHQuYXR0cihcInkyXCIsIChkOiBUaW1lbGluZUV2ZW50KSA9PiB5U2NhbGUoZC5pbXBvcnRhbmNlKSlcblx0XHRcdC5hdHRyKFwic3Ryb2tlXCIsIFwiIzk5OVwiKVxuXHRcdFx0LmF0dHIoXCJzdHJva2UtZGFzaGFycmF5XCIsIFwiNCwyXCIpXG5cdFx0XHQuYXR0cihcInN0cm9rZS13aWR0aFwiLCAxKTtcblx0XHRcblx0XHQvLyBQbG90YXIgZXZlbnRvcyBjb21vIGNpcmN1bG9zXG5cdFx0c3ZnLnNlbGVjdEFsbChcImNpcmNsZVwiKVxuXHRcdFx0LmRhdGEoZXZlbnRzV2l0aFBvc2l0aW9uKVxuXHRcdFx0LmpvaW4oXCJjaXJjbGVcIilcblx0XHRcdC5hdHRyKFwiY3hcIiwgKGQ6IFRpbWVsaW5lRXZlbnQpID0+IHhTY2FsZShkLnRpbWVsaW5lX3Bvc2l0aW9uKSlcblx0XHRcdC5hdHRyKFwiY3lcIiwgKGQ6IFRpbWVsaW5lRXZlbnQpID0+IHlTY2FsZShkLmltcG9ydGFuY2UpKVxuXHRcdFx0LmF0dHIoXCJyXCIsIChkOiBUaW1lbGluZUV2ZW50KSA9PiBkLmlzX2Vwb2NoID8gMTAgOiA2KVxuXHRcdFx0LmF0dHIoXCJmaWxsXCIsIChkOiBUaW1lbGluZUV2ZW50KSA9PiBjb2xvclNjYWxlKGQudHlwZSB8fCBcImRlZmF1bHRcIikpXG5cdFx0XHQuYXR0cihcInN0cm9rZVwiLCAoZDogVGltZWxpbmVFdmVudCkgPT4gZC5pc19lcG9jaCA/IFwiZ29sZFwiIDogXCJub25lXCIpXG5cdFx0XHQuYXR0cihcInN0cm9rZS13aWR0aFwiLCAzKVxuXHRcdFx0LnN0eWxlKFwiY3Vyc29yXCIsIFwicG9pbnRlclwiKVxuXHRcdFx0Lm9uKFwiY2xpY2tcIiwgKF9ldmVudDogTW91c2VFdmVudCwgZDogVGltZWxpbmVFdmVudCkgPT4gdGhpcy5zaG93RXZlbnREZXRhaWxzKGQpKVxuXHRcdFx0LmFwcGVuZChcInRpdGxlXCIpXG5cdFx0XHQudGV4dCgoZDogVGltZWxpbmVFdmVudCkgPT4gYCR7ZC5uYW1lfSAoWWVhciAke2QudGltZWxpbmVfcG9zaXRpb259KWApO1xuXHRcdFxuXHRcdC8vIExhYmVscyBwYXJhIGV2ZW50b3MgaW1wb3J0YW50ZXMgKGltcG9ydGFuY2UgPj0gOClcblx0XHRzdmcuc2VsZWN0QWxsKFwidGV4dC5ldmVudC1sYWJlbFwiKVxuXHRcdFx0LmRhdGEoZXZlbnRzV2l0aFBvc2l0aW9uLmZpbHRlcihlID0+IGUuaW1wb3J0YW5jZSA+PSA4KSlcblx0XHRcdC5qb2luKFwidGV4dFwiKVxuXHRcdFx0LmF0dHIoXCJjbGFzc1wiLCBcImV2ZW50LWxhYmVsXCIpXG5cdFx0XHQuYXR0cihcInhcIiwgKGQ6IFRpbWVsaW5lRXZlbnQpID0+IHhTY2FsZShkLnRpbWVsaW5lX3Bvc2l0aW9uKSlcblx0XHRcdC5hdHRyKFwieVwiLCAoZDogVGltZWxpbmVFdmVudCkgPT4geVNjYWxlKGQuaW1wb3J0YW5jZSkgLSAxMilcblx0XHRcdC5hdHRyKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcblx0XHRcdC5hdHRyKFwiZm9udC1zaXplXCIsIFwiMTBweFwiKVxuXHRcdFx0LnRleHQoKGQ6IFRpbWVsaW5lRXZlbnQpID0+IGQubmFtZS5zdWJzdHJpbmcoMCwgMTUpICsgKGQubmFtZS5sZW5ndGggPiAxNSA/IFwiLi4uXCIgOiBcIlwiKSk7XG5cdH1cblx0XG5cdHNob3dFdmVudERldGFpbHMoZXZlbnQ6IFdvcmxkRXZlbnQpIHtcblx0XHQvLyBNb3N0cmFyIGRldGFsaGVzIGRvIGV2ZW50byBlbSB1bSBwb3B1cCBvdSByZWRpcmVjaW9uYXJcblx0XHRuZXcgTm90aWNlKGBFdmVudDogJHtldmVudC5uYW1lfVxcblllYXI6ICR7ZXZlbnQudGltZWxpbmVfcG9zaXRpb24gPz8gXCJOL0FcIn1cXG5JbXBvcnRhbmNlOiAke2V2ZW50LmltcG9ydGFuY2V9YCk7XG5cdH1cblx0XG5cdG9uQ2xvc2UoKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGFzY2VuZGluZyhhLCBiKSB7XG4gIHJldHVybiBhID09IG51bGwgfHwgYiA9PSBudWxsID8gTmFOIDogYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IGEgPj0gYiA/IDAgOiBOYU47XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGVzY2VuZGluZyhhLCBiKSB7XG4gIHJldHVybiBhID09IG51bGwgfHwgYiA9PSBudWxsID8gTmFOXG4gICAgOiBiIDwgYSA/IC0xXG4gICAgOiBiID4gYSA/IDFcbiAgICA6IGIgPj0gYSA/IDBcbiAgICA6IE5hTjtcbn1cbiIsICJpbXBvcnQgYXNjZW5kaW5nIGZyb20gXCIuL2FzY2VuZGluZy5qc1wiO1xuaW1wb3J0IGRlc2NlbmRpbmcgZnJvbSBcIi4vZGVzY2VuZGluZy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBiaXNlY3RvcihmKSB7XG4gIGxldCBjb21wYXJlMSwgY29tcGFyZTIsIGRlbHRhO1xuXG4gIC8vIElmIGFuIGFjY2Vzc29yIGlzIHNwZWNpZmllZCwgcHJvbW90ZSBpdCB0byBhIGNvbXBhcmF0b3IuIEluIHRoaXMgY2FzZSB3ZVxuICAvLyBjYW4gdGVzdCB3aGV0aGVyIHRoZSBzZWFyY2ggdmFsdWUgaXMgKHNlbGYtKSBjb21wYXJhYmxlLiBXZSBjYW5cdTIwMTl0IGRvIHRoaXNcbiAgLy8gZm9yIGEgY29tcGFyYXRvciAoZXhjZXB0IGZvciBzcGVjaWZpYywga25vd24gY29tcGFyYXRvcnMpIGJlY2F1c2Ugd2UgY2FuXHUyMDE5dFxuICAvLyB0ZWxsIGlmIHRoZSBjb21wYXJhdG9yIGlzIHN5bW1ldHJpYywgYW5kIGFuIGFzeW1tZXRyaWMgY29tcGFyYXRvciBjYW5cdTIwMTl0IGJlXG4gIC8vIHVzZWQgdG8gdGVzdCB3aGV0aGVyIGEgc2luZ2xlIHZhbHVlIGlzIGNvbXBhcmFibGUuXG4gIGlmIChmLmxlbmd0aCAhPT0gMikge1xuICAgIGNvbXBhcmUxID0gYXNjZW5kaW5nO1xuICAgIGNvbXBhcmUyID0gKGQsIHgpID0+IGFzY2VuZGluZyhmKGQpLCB4KTtcbiAgICBkZWx0YSA9IChkLCB4KSA9PiBmKGQpIC0geDtcbiAgfSBlbHNlIHtcbiAgICBjb21wYXJlMSA9IGYgPT09IGFzY2VuZGluZyB8fCBmID09PSBkZXNjZW5kaW5nID8gZiA6IHplcm87XG4gICAgY29tcGFyZTIgPSBmO1xuICAgIGRlbHRhID0gZjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxlZnQoYSwgeCwgbG8gPSAwLCBoaSA9IGEubGVuZ3RoKSB7XG4gICAgaWYgKGxvIDwgaGkpIHtcbiAgICAgIGlmIChjb21wYXJlMSh4LCB4KSAhPT0gMCkgcmV0dXJuIGhpO1xuICAgICAgZG8ge1xuICAgICAgICBjb25zdCBtaWQgPSAobG8gKyBoaSkgPj4+IDE7XG4gICAgICAgIGlmIChjb21wYXJlMihhW21pZF0sIHgpIDwgMCkgbG8gPSBtaWQgKyAxO1xuICAgICAgICBlbHNlIGhpID0gbWlkO1xuICAgICAgfSB3aGlsZSAobG8gPCBoaSk7XG4gICAgfVxuICAgIHJldHVybiBsbztcbiAgfVxuXG4gIGZ1bmN0aW9uIHJpZ2h0KGEsIHgsIGxvID0gMCwgaGkgPSBhLmxlbmd0aCkge1xuICAgIGlmIChsbyA8IGhpKSB7XG4gICAgICBpZiAoY29tcGFyZTEoeCwgeCkgIT09IDApIHJldHVybiBoaTtcbiAgICAgIGRvIHtcbiAgICAgICAgY29uc3QgbWlkID0gKGxvICsgaGkpID4+PiAxO1xuICAgICAgICBpZiAoY29tcGFyZTIoYVttaWRdLCB4KSA8PSAwKSBsbyA9IG1pZCArIDE7XG4gICAgICAgIGVsc2UgaGkgPSBtaWQ7XG4gICAgICB9IHdoaWxlIChsbyA8IGhpKTtcbiAgICB9XG4gICAgcmV0dXJuIGxvO1xuICB9XG5cbiAgZnVuY3Rpb24gY2VudGVyKGEsIHgsIGxvID0gMCwgaGkgPSBhLmxlbmd0aCkge1xuICAgIGNvbnN0IGkgPSBsZWZ0KGEsIHgsIGxvLCBoaSAtIDEpO1xuICAgIHJldHVybiBpID4gbG8gJiYgZGVsdGEoYVtpIC0gMV0sIHgpID4gLWRlbHRhKGFbaV0sIHgpID8gaSAtIDEgOiBpO1xuICB9XG5cbiAgcmV0dXJuIHtsZWZ0LCBjZW50ZXIsIHJpZ2h0fTtcbn1cblxuZnVuY3Rpb24gemVybygpIHtcbiAgcmV0dXJuIDA7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbnVtYmVyKHgpIHtcbiAgcmV0dXJuIHggPT09IG51bGwgPyBOYU4gOiAreDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uKiBudW1iZXJzKHZhbHVlcywgdmFsdWVvZikge1xuICBpZiAodmFsdWVvZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiAodmFsdWUgPSArdmFsdWUpID49IHZhbHVlKSB7XG4gICAgICAgIHlpZWxkIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsZXQgaW5kZXggPSAtMTtcbiAgICBmb3IgKGxldCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICgodmFsdWUgPSB2YWx1ZW9mKHZhbHVlLCArK2luZGV4LCB2YWx1ZXMpKSAhPSBudWxsICYmICh2YWx1ZSA9ICt2YWx1ZSkgPj0gdmFsdWUpIHtcbiAgICAgICAgeWllbGQgdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IGFzY2VuZGluZyBmcm9tIFwiLi9hc2NlbmRpbmcuanNcIjtcbmltcG9ydCBiaXNlY3RvciBmcm9tIFwiLi9iaXNlY3Rvci5qc1wiO1xuaW1wb3J0IG51bWJlciBmcm9tIFwiLi9udW1iZXIuanNcIjtcblxuY29uc3QgYXNjZW5kaW5nQmlzZWN0ID0gYmlzZWN0b3IoYXNjZW5kaW5nKTtcbmV4cG9ydCBjb25zdCBiaXNlY3RSaWdodCA9IGFzY2VuZGluZ0Jpc2VjdC5yaWdodDtcbmV4cG9ydCBjb25zdCBiaXNlY3RMZWZ0ID0gYXNjZW5kaW5nQmlzZWN0LmxlZnQ7XG5leHBvcnQgY29uc3QgYmlzZWN0Q2VudGVyID0gYmlzZWN0b3IobnVtYmVyKS5jZW50ZXI7XG5leHBvcnQgZGVmYXVsdCBiaXNlY3RSaWdodDtcbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBleHRlbnQodmFsdWVzLCB2YWx1ZW9mKSB7XG4gIGxldCBtaW47XG4gIGxldCBtYXg7XG4gIGlmICh2YWx1ZW9mID09PSB1bmRlZmluZWQpIHtcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgaWYgKG1pbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKHZhbHVlID49IHZhbHVlKSBtaW4gPSBtYXggPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAobWluID4gdmFsdWUpIG1pbiA9IHZhbHVlO1xuICAgICAgICAgIGlmIChtYXggPCB2YWx1ZSkgbWF4ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGV0IGluZGV4ID0gLTE7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAoKHZhbHVlID0gdmFsdWVvZih2YWx1ZSwgKytpbmRleCwgdmFsdWVzKSkgIT0gbnVsbCkge1xuICAgICAgICBpZiAobWluID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAodmFsdWUgPj0gdmFsdWUpIG1pbiA9IG1heCA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChtaW4gPiB2YWx1ZSkgbWluID0gdmFsdWU7XG4gICAgICAgICAgaWYgKG1heCA8IHZhbHVlKSBtYXggPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gW21pbiwgbWF4XTtcbn1cbiIsICJleHBvcnQgY2xhc3MgSW50ZXJuTWFwIGV4dGVuZHMgTWFwIHtcbiAgY29uc3RydWN0b3IoZW50cmllcywga2V5ID0ga2V5b2YpIHtcbiAgICBzdXBlcigpO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtfaW50ZXJuOiB7dmFsdWU6IG5ldyBNYXAoKX0sIF9rZXk6IHt2YWx1ZToga2V5fX0pO1xuICAgIGlmIChlbnRyaWVzICE9IG51bGwpIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGVudHJpZXMpIHRoaXMuc2V0KGtleSwgdmFsdWUpO1xuICB9XG4gIGdldChrZXkpIHtcbiAgICByZXR1cm4gc3VwZXIuZ2V0KGludGVybl9nZXQodGhpcywga2V5KSk7XG4gIH1cbiAgaGFzKGtleSkge1xuICAgIHJldHVybiBzdXBlci5oYXMoaW50ZXJuX2dldCh0aGlzLCBrZXkpKTtcbiAgfVxuICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgIHJldHVybiBzdXBlci5zZXQoaW50ZXJuX3NldCh0aGlzLCBrZXkpLCB2YWx1ZSk7XG4gIH1cbiAgZGVsZXRlKGtleSkge1xuICAgIHJldHVybiBzdXBlci5kZWxldGUoaW50ZXJuX2RlbGV0ZSh0aGlzLCBrZXkpKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgSW50ZXJuU2V0IGV4dGVuZHMgU2V0IHtcbiAgY29uc3RydWN0b3IodmFsdWVzLCBrZXkgPSBrZXlvZikge1xuICAgIHN1cGVyKCk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge19pbnRlcm46IHt2YWx1ZTogbmV3IE1hcCgpfSwgX2tleToge3ZhbHVlOiBrZXl9fSk7XG4gICAgaWYgKHZhbHVlcyAhPSBudWxsKSBmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykgdGhpcy5hZGQodmFsdWUpO1xuICB9XG4gIGhhcyh2YWx1ZSkge1xuICAgIHJldHVybiBzdXBlci5oYXMoaW50ZXJuX2dldCh0aGlzLCB2YWx1ZSkpO1xuICB9XG4gIGFkZCh2YWx1ZSkge1xuICAgIHJldHVybiBzdXBlci5hZGQoaW50ZXJuX3NldCh0aGlzLCB2YWx1ZSkpO1xuICB9XG4gIGRlbGV0ZSh2YWx1ZSkge1xuICAgIHJldHVybiBzdXBlci5kZWxldGUoaW50ZXJuX2RlbGV0ZSh0aGlzLCB2YWx1ZSkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGludGVybl9nZXQoe19pbnRlcm4sIF9rZXl9LCB2YWx1ZSkge1xuICBjb25zdCBrZXkgPSBfa2V5KHZhbHVlKTtcbiAgcmV0dXJuIF9pbnRlcm4uaGFzKGtleSkgPyBfaW50ZXJuLmdldChrZXkpIDogdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGludGVybl9zZXQoe19pbnRlcm4sIF9rZXl9LCB2YWx1ZSkge1xuICBjb25zdCBrZXkgPSBfa2V5KHZhbHVlKTtcbiAgaWYgKF9pbnRlcm4uaGFzKGtleSkpIHJldHVybiBfaW50ZXJuLmdldChrZXkpO1xuICBfaW50ZXJuLnNldChrZXksIHZhbHVlKTtcbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBpbnRlcm5fZGVsZXRlKHtfaW50ZXJuLCBfa2V5fSwgdmFsdWUpIHtcbiAgY29uc3Qga2V5ID0gX2tleSh2YWx1ZSk7XG4gIGlmIChfaW50ZXJuLmhhcyhrZXkpKSB7XG4gICAgdmFsdWUgPSBfaW50ZXJuLmdldChrZXkpO1xuICAgIF9pbnRlcm4uZGVsZXRlKGtleSk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBrZXlvZih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG59XG4iLCAiY29uc3QgZTEwID0gTWF0aC5zcXJ0KDUwKSxcbiAgICBlNSA9IE1hdGguc3FydCgxMCksXG4gICAgZTIgPSBNYXRoLnNxcnQoMik7XG5cbmZ1bmN0aW9uIHRpY2tTcGVjKHN0YXJ0LCBzdG9wLCBjb3VudCkge1xuICBjb25zdCBzdGVwID0gKHN0b3AgLSBzdGFydCkgLyBNYXRoLm1heCgwLCBjb3VudCksXG4gICAgICBwb3dlciA9IE1hdGguZmxvb3IoTWF0aC5sb2cxMChzdGVwKSksXG4gICAgICBlcnJvciA9IHN0ZXAgLyBNYXRoLnBvdygxMCwgcG93ZXIpLFxuICAgICAgZmFjdG9yID0gZXJyb3IgPj0gZTEwID8gMTAgOiBlcnJvciA+PSBlNSA/IDUgOiBlcnJvciA+PSBlMiA/IDIgOiAxO1xuICBsZXQgaTEsIGkyLCBpbmM7XG4gIGlmIChwb3dlciA8IDApIHtcbiAgICBpbmMgPSBNYXRoLnBvdygxMCwgLXBvd2VyKSAvIGZhY3RvcjtcbiAgICBpMSA9IE1hdGgucm91bmQoc3RhcnQgKiBpbmMpO1xuICAgIGkyID0gTWF0aC5yb3VuZChzdG9wICogaW5jKTtcbiAgICBpZiAoaTEgLyBpbmMgPCBzdGFydCkgKytpMTtcbiAgICBpZiAoaTIgLyBpbmMgPiBzdG9wKSAtLWkyO1xuICAgIGluYyA9IC1pbmM7XG4gIH0gZWxzZSB7XG4gICAgaW5jID0gTWF0aC5wb3coMTAsIHBvd2VyKSAqIGZhY3RvcjtcbiAgICBpMSA9IE1hdGgucm91bmQoc3RhcnQgLyBpbmMpO1xuICAgIGkyID0gTWF0aC5yb3VuZChzdG9wIC8gaW5jKTtcbiAgICBpZiAoaTEgKiBpbmMgPCBzdGFydCkgKytpMTtcbiAgICBpZiAoaTIgKiBpbmMgPiBzdG9wKSAtLWkyO1xuICB9XG4gIGlmIChpMiA8IGkxICYmIDAuNSA8PSBjb3VudCAmJiBjb3VudCA8IDIpIHJldHVybiB0aWNrU3BlYyhzdGFydCwgc3RvcCwgY291bnQgKiAyKTtcbiAgcmV0dXJuIFtpMSwgaTIsIGluY107XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRpY2tzKHN0YXJ0LCBzdG9wLCBjb3VudCkge1xuICBzdG9wID0gK3N0b3AsIHN0YXJ0ID0gK3N0YXJ0LCBjb3VudCA9ICtjb3VudDtcbiAgaWYgKCEoY291bnQgPiAwKSkgcmV0dXJuIFtdO1xuICBpZiAoc3RhcnQgPT09IHN0b3ApIHJldHVybiBbc3RhcnRdO1xuICBjb25zdCByZXZlcnNlID0gc3RvcCA8IHN0YXJ0LCBbaTEsIGkyLCBpbmNdID0gcmV2ZXJzZSA/IHRpY2tTcGVjKHN0b3AsIHN0YXJ0LCBjb3VudCkgOiB0aWNrU3BlYyhzdGFydCwgc3RvcCwgY291bnQpO1xuICBpZiAoIShpMiA+PSBpMSkpIHJldHVybiBbXTtcbiAgY29uc3QgbiA9IGkyIC0gaTEgKyAxLCB0aWNrcyA9IG5ldyBBcnJheShuKTtcbiAgaWYgKHJldmVyc2UpIHtcbiAgICBpZiAoaW5jIDwgMCkgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyArK2kpIHRpY2tzW2ldID0gKGkyIC0gaSkgLyAtaW5jO1xuICAgIGVsc2UgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyArK2kpIHRpY2tzW2ldID0gKGkyIC0gaSkgKiBpbmM7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGluYyA8IDApIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgKytpKSB0aWNrc1tpXSA9IChpMSArIGkpIC8gLWluYztcbiAgICBlbHNlIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgKytpKSB0aWNrc1tpXSA9IChpMSArIGkpICogaW5jO1xuICB9XG4gIHJldHVybiB0aWNrcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRpY2tJbmNyZW1lbnQoc3RhcnQsIHN0b3AsIGNvdW50KSB7XG4gIHN0b3AgPSArc3RvcCwgc3RhcnQgPSArc3RhcnQsIGNvdW50ID0gK2NvdW50O1xuICByZXR1cm4gdGlja1NwZWMoc3RhcnQsIHN0b3AsIGNvdW50KVsyXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRpY2tTdGVwKHN0YXJ0LCBzdG9wLCBjb3VudCkge1xuICBzdG9wID0gK3N0b3AsIHN0YXJ0ID0gK3N0YXJ0LCBjb3VudCA9ICtjb3VudDtcbiAgY29uc3QgcmV2ZXJzZSA9IHN0b3AgPCBzdGFydCwgaW5jID0gcmV2ZXJzZSA/IHRpY2tJbmNyZW1lbnQoc3RvcCwgc3RhcnQsIGNvdW50KSA6IHRpY2tJbmNyZW1lbnQoc3RhcnQsIHN0b3AsIGNvdW50KTtcbiAgcmV0dXJuIChyZXZlcnNlID8gLTEgOiAxKSAqIChpbmMgPCAwID8gMSAvIC1pbmMgOiBpbmMpO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIHg7XG59XG4iLCAiaW1wb3J0IGlkZW50aXR5IGZyb20gXCIuL2lkZW50aXR5LmpzXCI7XG5cbnZhciB0b3AgPSAxLFxuICAgIHJpZ2h0ID0gMixcbiAgICBib3R0b20gPSAzLFxuICAgIGxlZnQgPSA0LFxuICAgIGVwc2lsb24gPSAxZS02O1xuXG5mdW5jdGlvbiB0cmFuc2xhdGVYKHgpIHtcbiAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgeCArIFwiLDApXCI7XG59XG5cbmZ1bmN0aW9uIHRyYW5zbGF0ZVkoeSkge1xuICByZXR1cm4gXCJ0cmFuc2xhdGUoMCxcIiArIHkgKyBcIilcIjtcbn1cblxuZnVuY3Rpb24gbnVtYmVyKHNjYWxlKSB7XG4gIHJldHVybiBkID0+ICtzY2FsZShkKTtcbn1cblxuZnVuY3Rpb24gY2VudGVyKHNjYWxlLCBvZmZzZXQpIHtcbiAgb2Zmc2V0ID0gTWF0aC5tYXgoMCwgc2NhbGUuYmFuZHdpZHRoKCkgLSBvZmZzZXQgKiAyKSAvIDI7XG4gIGlmIChzY2FsZS5yb3VuZCgpKSBvZmZzZXQgPSBNYXRoLnJvdW5kKG9mZnNldCk7XG4gIHJldHVybiBkID0+ICtzY2FsZShkKSArIG9mZnNldDtcbn1cblxuZnVuY3Rpb24gZW50ZXJpbmcoKSB7XG4gIHJldHVybiAhdGhpcy5fX2F4aXM7XG59XG5cbmZ1bmN0aW9uIGF4aXMob3JpZW50LCBzY2FsZSkge1xuICB2YXIgdGlja0FyZ3VtZW50cyA9IFtdLFxuICAgICAgdGlja1ZhbHVlcyA9IG51bGwsXG4gICAgICB0aWNrRm9ybWF0ID0gbnVsbCxcbiAgICAgIHRpY2tTaXplSW5uZXIgPSA2LFxuICAgICAgdGlja1NpemVPdXRlciA9IDYsXG4gICAgICB0aWNrUGFkZGluZyA9IDMsXG4gICAgICBvZmZzZXQgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID4gMSA/IDAgOiAwLjUsXG4gICAgICBrID0gb3JpZW50ID09PSB0b3AgfHwgb3JpZW50ID09PSBsZWZ0ID8gLTEgOiAxLFxuICAgICAgeCA9IG9yaWVudCA9PT0gbGVmdCB8fCBvcmllbnQgPT09IHJpZ2h0ID8gXCJ4XCIgOiBcInlcIixcbiAgICAgIHRyYW5zZm9ybSA9IG9yaWVudCA9PT0gdG9wIHx8IG9yaWVudCA9PT0gYm90dG9tID8gdHJhbnNsYXRlWCA6IHRyYW5zbGF0ZVk7XG5cbiAgZnVuY3Rpb24gYXhpcyhjb250ZXh0KSB7XG4gICAgdmFyIHZhbHVlcyA9IHRpY2tWYWx1ZXMgPT0gbnVsbCA/IChzY2FsZS50aWNrcyA/IHNjYWxlLnRpY2tzLmFwcGx5KHNjYWxlLCB0aWNrQXJndW1lbnRzKSA6IHNjYWxlLmRvbWFpbigpKSA6IHRpY2tWYWx1ZXMsXG4gICAgICAgIGZvcm1hdCA9IHRpY2tGb3JtYXQgPT0gbnVsbCA/IChzY2FsZS50aWNrRm9ybWF0ID8gc2NhbGUudGlja0Zvcm1hdC5hcHBseShzY2FsZSwgdGlja0FyZ3VtZW50cykgOiBpZGVudGl0eSkgOiB0aWNrRm9ybWF0LFxuICAgICAgICBzcGFjaW5nID0gTWF0aC5tYXgodGlja1NpemVJbm5lciwgMCkgKyB0aWNrUGFkZGluZyxcbiAgICAgICAgcmFuZ2UgPSBzY2FsZS5yYW5nZSgpLFxuICAgICAgICByYW5nZTAgPSArcmFuZ2VbMF0gKyBvZmZzZXQsXG4gICAgICAgIHJhbmdlMSA9ICtyYW5nZVtyYW5nZS5sZW5ndGggLSAxXSArIG9mZnNldCxcbiAgICAgICAgcG9zaXRpb24gPSAoc2NhbGUuYmFuZHdpZHRoID8gY2VudGVyIDogbnVtYmVyKShzY2FsZS5jb3B5KCksIG9mZnNldCksXG4gICAgICAgIHNlbGVjdGlvbiA9IGNvbnRleHQuc2VsZWN0aW9uID8gY29udGV4dC5zZWxlY3Rpb24oKSA6IGNvbnRleHQsXG4gICAgICAgIHBhdGggPSBzZWxlY3Rpb24uc2VsZWN0QWxsKFwiLmRvbWFpblwiKS5kYXRhKFtudWxsXSksXG4gICAgICAgIHRpY2sgPSBzZWxlY3Rpb24uc2VsZWN0QWxsKFwiLnRpY2tcIikuZGF0YSh2YWx1ZXMsIHNjYWxlKS5vcmRlcigpLFxuICAgICAgICB0aWNrRXhpdCA9IHRpY2suZXhpdCgpLFxuICAgICAgICB0aWNrRW50ZXIgPSB0aWNrLmVudGVyKCkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJ0aWNrXCIpLFxuICAgICAgICBsaW5lID0gdGljay5zZWxlY3QoXCJsaW5lXCIpLFxuICAgICAgICB0ZXh0ID0gdGljay5zZWxlY3QoXCJ0ZXh0XCIpO1xuXG4gICAgcGF0aCA9IHBhdGgubWVyZ2UocGF0aC5lbnRlcigpLmluc2VydChcInBhdGhcIiwgXCIudGlja1wiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiZG9tYWluXCIpXG4gICAgICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwiY3VycmVudENvbG9yXCIpKTtcblxuICAgIHRpY2sgPSB0aWNrLm1lcmdlKHRpY2tFbnRlcik7XG5cbiAgICBsaW5lID0gbGluZS5tZXJnZSh0aWNrRW50ZXIuYXBwZW5kKFwibGluZVwiKVxuICAgICAgICAuYXR0cihcInN0cm9rZVwiLCBcImN1cnJlbnRDb2xvclwiKVxuICAgICAgICAuYXR0cih4ICsgXCIyXCIsIGsgKiB0aWNrU2l6ZUlubmVyKSk7XG5cbiAgICB0ZXh0ID0gdGV4dC5tZXJnZSh0aWNrRW50ZXIuYXBwZW5kKFwidGV4dFwiKVxuICAgICAgICAuYXR0cihcImZpbGxcIiwgXCJjdXJyZW50Q29sb3JcIilcbiAgICAgICAgLmF0dHIoeCwgayAqIHNwYWNpbmcpXG4gICAgICAgIC5hdHRyKFwiZHlcIiwgb3JpZW50ID09PSB0b3AgPyBcIjBlbVwiIDogb3JpZW50ID09PSBib3R0b20gPyBcIjAuNzFlbVwiIDogXCIwLjMyZW1cIikpO1xuXG4gICAgaWYgKGNvbnRleHQgIT09IHNlbGVjdGlvbikge1xuICAgICAgcGF0aCA9IHBhdGgudHJhbnNpdGlvbihjb250ZXh0KTtcbiAgICAgIHRpY2sgPSB0aWNrLnRyYW5zaXRpb24oY29udGV4dCk7XG4gICAgICBsaW5lID0gbGluZS50cmFuc2l0aW9uKGNvbnRleHQpO1xuICAgICAgdGV4dCA9IHRleHQudHJhbnNpdGlvbihjb250ZXh0KTtcblxuICAgICAgdGlja0V4aXQgPSB0aWNrRXhpdC50cmFuc2l0aW9uKGNvbnRleHQpXG4gICAgICAgICAgLmF0dHIoXCJvcGFjaXR5XCIsIGVwc2lsb24pXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gaXNGaW5pdGUoZCA9IHBvc2l0aW9uKGQpKSA/IHRyYW5zZm9ybShkICsgb2Zmc2V0KSA6IHRoaXMuZ2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIpOyB9KTtcblxuICAgICAgdGlja0VudGVyXG4gICAgICAgICAgLmF0dHIoXCJvcGFjaXR5XCIsIGVwc2lsb24pXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyB2YXIgcCA9IHRoaXMucGFyZW50Tm9kZS5fX2F4aXM7IHJldHVybiB0cmFuc2Zvcm0oKHAgJiYgaXNGaW5pdGUocCA9IHAoZCkpID8gcCA6IHBvc2l0aW9uKGQpKSArIG9mZnNldCk7IH0pO1xuICAgIH1cblxuICAgIHRpY2tFeGl0LnJlbW92ZSgpO1xuXG4gICAgcGF0aFxuICAgICAgICAuYXR0cihcImRcIiwgb3JpZW50ID09PSBsZWZ0IHx8IG9yaWVudCA9PT0gcmlnaHRcbiAgICAgICAgICAgID8gKHRpY2tTaXplT3V0ZXIgPyBcIk1cIiArIGsgKiB0aWNrU2l6ZU91dGVyICsgXCIsXCIgKyByYW5nZTAgKyBcIkhcIiArIG9mZnNldCArIFwiVlwiICsgcmFuZ2UxICsgXCJIXCIgKyBrICogdGlja1NpemVPdXRlciA6IFwiTVwiICsgb2Zmc2V0ICsgXCIsXCIgKyByYW5nZTAgKyBcIlZcIiArIHJhbmdlMSlcbiAgICAgICAgICAgIDogKHRpY2tTaXplT3V0ZXIgPyBcIk1cIiArIHJhbmdlMCArIFwiLFwiICsgayAqIHRpY2tTaXplT3V0ZXIgKyBcIlZcIiArIG9mZnNldCArIFwiSFwiICsgcmFuZ2UxICsgXCJWXCIgKyBrICogdGlja1NpemVPdXRlciA6IFwiTVwiICsgcmFuZ2UwICsgXCIsXCIgKyBvZmZzZXQgKyBcIkhcIiArIHJhbmdlMSkpO1xuXG4gICAgdGlja1xuICAgICAgICAuYXR0cihcIm9wYWNpdHlcIiwgMSlcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gdHJhbnNmb3JtKHBvc2l0aW9uKGQpICsgb2Zmc2V0KTsgfSk7XG5cbiAgICBsaW5lXG4gICAgICAgIC5hdHRyKHggKyBcIjJcIiwgayAqIHRpY2tTaXplSW5uZXIpO1xuXG4gICAgdGV4dFxuICAgICAgICAuYXR0cih4LCBrICogc3BhY2luZylcbiAgICAgICAgLnRleHQoZm9ybWF0KTtcblxuICAgIHNlbGVjdGlvbi5maWx0ZXIoZW50ZXJpbmcpXG4gICAgICAgIC5hdHRyKFwiZmlsbFwiLCBcIm5vbmVcIilcbiAgICAgICAgLmF0dHIoXCJmb250LXNpemVcIiwgMTApXG4gICAgICAgIC5hdHRyKFwiZm9udC1mYW1pbHlcIiwgXCJzYW5zLXNlcmlmXCIpXG4gICAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgb3JpZW50ID09PSByaWdodCA/IFwic3RhcnRcIiA6IG9yaWVudCA9PT0gbGVmdCA/IFwiZW5kXCIgOiBcIm1pZGRsZVwiKTtcblxuICAgIHNlbGVjdGlvblxuICAgICAgICAuZWFjaChmdW5jdGlvbigpIHsgdGhpcy5fX2F4aXMgPSBwb3NpdGlvbjsgfSk7XG4gIH1cblxuICBheGlzLnNjYWxlID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHNjYWxlID0gXywgYXhpcykgOiBzY2FsZTtcbiAgfTtcblxuICBheGlzLnRpY2tzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRpY2tBcmd1bWVudHMgPSBBcnJheS5mcm9tKGFyZ3VtZW50cyksIGF4aXM7XG4gIH07XG5cbiAgYXhpcy50aWNrQXJndW1lbnRzID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHRpY2tBcmd1bWVudHMgPSBfID09IG51bGwgPyBbXSA6IEFycmF5LmZyb20oXyksIGF4aXMpIDogdGlja0FyZ3VtZW50cy5zbGljZSgpO1xuICB9O1xuXG4gIGF4aXMudGlja1ZhbHVlcyA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/ICh0aWNrVmFsdWVzID0gXyA9PSBudWxsID8gbnVsbCA6IEFycmF5LmZyb20oXyksIGF4aXMpIDogdGlja1ZhbHVlcyAmJiB0aWNrVmFsdWVzLnNsaWNlKCk7XG4gIH07XG5cbiAgYXhpcy50aWNrRm9ybWF0ID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHRpY2tGb3JtYXQgPSBfLCBheGlzKSA6IHRpY2tGb3JtYXQ7XG4gIH07XG5cbiAgYXhpcy50aWNrU2l6ZSA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/ICh0aWNrU2l6ZUlubmVyID0gdGlja1NpemVPdXRlciA9ICtfLCBheGlzKSA6IHRpY2tTaXplSW5uZXI7XG4gIH07XG5cbiAgYXhpcy50aWNrU2l6ZUlubmVyID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHRpY2tTaXplSW5uZXIgPSArXywgYXhpcykgOiB0aWNrU2l6ZUlubmVyO1xuICB9O1xuXG4gIGF4aXMudGlja1NpemVPdXRlciA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/ICh0aWNrU2l6ZU91dGVyID0gK18sIGF4aXMpIDogdGlja1NpemVPdXRlcjtcbiAgfTtcblxuICBheGlzLnRpY2tQYWRkaW5nID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHRpY2tQYWRkaW5nID0gK18sIGF4aXMpIDogdGlja1BhZGRpbmc7XG4gIH07XG5cbiAgYXhpcy5vZmZzZXQgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAob2Zmc2V0ID0gK18sIGF4aXMpIDogb2Zmc2V0O1xuICB9O1xuXG4gIHJldHVybiBheGlzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXhpc1RvcChzY2FsZSkge1xuICByZXR1cm4gYXhpcyh0b3AsIHNjYWxlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGF4aXNSaWdodChzY2FsZSkge1xuICByZXR1cm4gYXhpcyhyaWdodCwgc2NhbGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXhpc0JvdHRvbShzY2FsZSkge1xuICByZXR1cm4gYXhpcyhib3R0b20sIHNjYWxlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGF4aXNMZWZ0KHNjYWxlKSB7XG4gIHJldHVybiBheGlzKGxlZnQsIHNjYWxlKTtcbn1cbiIsICJ2YXIgbm9vcCA9IHt2YWx1ZTogKCkgPT4ge319O1xuXG5mdW5jdGlvbiBkaXNwYXRjaCgpIHtcbiAgZm9yICh2YXIgaSA9IDAsIG4gPSBhcmd1bWVudHMubGVuZ3RoLCBfID0ge30sIHQ7IGkgPCBuOyArK2kpIHtcbiAgICBpZiAoISh0ID0gYXJndW1lbnRzW2ldICsgXCJcIikgfHwgKHQgaW4gXykgfHwgL1tcXHMuXS8udGVzdCh0KSkgdGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCB0eXBlOiBcIiArIHQpO1xuICAgIF9bdF0gPSBbXTtcbiAgfVxuICByZXR1cm4gbmV3IERpc3BhdGNoKF8pO1xufVxuXG5mdW5jdGlvbiBEaXNwYXRjaChfKSB7XG4gIHRoaXMuXyA9IF87XG59XG5cbmZ1bmN0aW9uIHBhcnNlVHlwZW5hbWVzKHR5cGVuYW1lcywgdHlwZXMpIHtcbiAgcmV0dXJuIHR5cGVuYW1lcy50cmltKCkuc3BsaXQoL158XFxzKy8pLm1hcChmdW5jdGlvbih0KSB7XG4gICAgdmFyIG5hbWUgPSBcIlwiLCBpID0gdC5pbmRleE9mKFwiLlwiKTtcbiAgICBpZiAoaSA+PSAwKSBuYW1lID0gdC5zbGljZShpICsgMSksIHQgPSB0LnNsaWNlKDAsIGkpO1xuICAgIGlmICh0ICYmICF0eXBlcy5oYXNPd25Qcm9wZXJ0eSh0KSkgdGhyb3cgbmV3IEVycm9yKFwidW5rbm93biB0eXBlOiBcIiArIHQpO1xuICAgIHJldHVybiB7dHlwZTogdCwgbmFtZTogbmFtZX07XG4gIH0pO1xufVxuXG5EaXNwYXRjaC5wcm90b3R5cGUgPSBkaXNwYXRjaC5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBEaXNwYXRjaCxcbiAgb246IGZ1bmN0aW9uKHR5cGVuYW1lLCBjYWxsYmFjaykge1xuICAgIHZhciBfID0gdGhpcy5fLFxuICAgICAgICBUID0gcGFyc2VUeXBlbmFtZXModHlwZW5hbWUgKyBcIlwiLCBfKSxcbiAgICAgICAgdCxcbiAgICAgICAgaSA9IC0xLFxuICAgICAgICBuID0gVC5sZW5ndGg7XG5cbiAgICAvLyBJZiBubyBjYWxsYmFjayB3YXMgc3BlY2lmaWVkLCByZXR1cm4gdGhlIGNhbGxiYWNrIG9mIHRoZSBnaXZlbiB0eXBlIGFuZCBuYW1lLlxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xuICAgICAgd2hpbGUgKCsraSA8IG4pIGlmICgodCA9ICh0eXBlbmFtZSA9IFRbaV0pLnR5cGUpICYmICh0ID0gZ2V0KF9bdF0sIHR5cGVuYW1lLm5hbWUpKSkgcmV0dXJuIHQ7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgYSB0eXBlIHdhcyBzcGVjaWZpZWQsIHNldCB0aGUgY2FsbGJhY2sgZm9yIHRoZSBnaXZlbiB0eXBlIGFuZCBuYW1lLlxuICAgIC8vIE90aGVyd2lzZSwgaWYgYSBudWxsIGNhbGxiYWNrIHdhcyBzcGVjaWZpZWQsIHJlbW92ZSBjYWxsYmFja3Mgb2YgdGhlIGdpdmVuIG5hbWUuXG4gICAgaWYgKGNhbGxiYWNrICE9IG51bGwgJiYgdHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcihcImludmFsaWQgY2FsbGJhY2s6IFwiICsgY2FsbGJhY2spO1xuICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICBpZiAodCA9ICh0eXBlbmFtZSA9IFRbaV0pLnR5cGUpIF9bdF0gPSBzZXQoX1t0XSwgdHlwZW5hbWUubmFtZSwgY2FsbGJhY2spO1xuICAgICAgZWxzZSBpZiAoY2FsbGJhY2sgPT0gbnVsbCkgZm9yICh0IGluIF8pIF9bdF0gPSBzZXQoX1t0XSwgdHlwZW5hbWUubmFtZSwgbnVsbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG4gIGNvcHk6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjb3B5ID0ge30sIF8gPSB0aGlzLl87XG4gICAgZm9yICh2YXIgdCBpbiBfKSBjb3B5W3RdID0gX1t0XS5zbGljZSgpO1xuICAgIHJldHVybiBuZXcgRGlzcGF0Y2goY29weSk7XG4gIH0sXG4gIGNhbGw6IGZ1bmN0aW9uKHR5cGUsIHRoYXQpIHtcbiAgICBpZiAoKG4gPSBhcmd1bWVudHMubGVuZ3RoIC0gMikgPiAwKSBmb3IgKHZhciBhcmdzID0gbmV3IEFycmF5KG4pLCBpID0gMCwgbiwgdDsgaSA8IG47ICsraSkgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMl07XG4gICAgaWYgKCF0aGlzLl8uaGFzT3duUHJvcGVydHkodHlwZSkpIHRocm93IG5ldyBFcnJvcihcInVua25vd24gdHlwZTogXCIgKyB0eXBlKTtcbiAgICBmb3IgKHQgPSB0aGlzLl9bdHlwZV0sIGkgPSAwLCBuID0gdC5sZW5ndGg7IGkgPCBuOyArK2kpIHRbaV0udmFsdWUuYXBwbHkodGhhdCwgYXJncyk7XG4gIH0sXG4gIGFwcGx5OiBmdW5jdGlvbih0eXBlLCB0aGF0LCBhcmdzKSB7XG4gICAgaWYgKCF0aGlzLl8uaGFzT3duUHJvcGVydHkodHlwZSkpIHRocm93IG5ldyBFcnJvcihcInVua25vd24gdHlwZTogXCIgKyB0eXBlKTtcbiAgICBmb3IgKHZhciB0ID0gdGhpcy5fW3R5cGVdLCBpID0gMCwgbiA9IHQubGVuZ3RoOyBpIDwgbjsgKytpKSB0W2ldLnZhbHVlLmFwcGx5KHRoYXQsIGFyZ3MpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBnZXQodHlwZSwgbmFtZSkge1xuICBmb3IgKHZhciBpID0gMCwgbiA9IHR5cGUubGVuZ3RoLCBjOyBpIDwgbjsgKytpKSB7XG4gICAgaWYgKChjID0gdHlwZVtpXSkubmFtZSA9PT0gbmFtZSkge1xuICAgICAgcmV0dXJuIGMudmFsdWU7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHNldCh0eXBlLCBuYW1lLCBjYWxsYmFjaykge1xuICBmb3IgKHZhciBpID0gMCwgbiA9IHR5cGUubGVuZ3RoOyBpIDwgbjsgKytpKSB7XG4gICAgaWYgKHR5cGVbaV0ubmFtZSA9PT0gbmFtZSkge1xuICAgICAgdHlwZVtpXSA9IG5vb3AsIHR5cGUgPSB0eXBlLnNsaWNlKDAsIGkpLmNvbmNhdCh0eXBlLnNsaWNlKGkgKyAxKSk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgaWYgKGNhbGxiYWNrICE9IG51bGwpIHR5cGUucHVzaCh7bmFtZTogbmFtZSwgdmFsdWU6IGNhbGxiYWNrfSk7XG4gIHJldHVybiB0eXBlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBkaXNwYXRjaDtcbiIsICJleHBvcnQgdmFyIHhodG1sID0gXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCI7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgc3ZnOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG4gIHhodG1sOiB4aHRtbCxcbiAgeGxpbms6IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLFxuICB4bWw6IFwiaHR0cDovL3d3dy53My5vcmcvWE1MLzE5OTgvbmFtZXNwYWNlXCIsXG4gIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvXCJcbn07XG4iLCAiaW1wb3J0IG5hbWVzcGFjZXMgZnJvbSBcIi4vbmFtZXNwYWNlcy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lKSB7XG4gIHZhciBwcmVmaXggPSBuYW1lICs9IFwiXCIsIGkgPSBwcmVmaXguaW5kZXhPZihcIjpcIik7XG4gIGlmIChpID49IDAgJiYgKHByZWZpeCA9IG5hbWUuc2xpY2UoMCwgaSkpICE9PSBcInhtbG5zXCIpIG5hbWUgPSBuYW1lLnNsaWNlKGkgKyAxKTtcbiAgcmV0dXJuIG5hbWVzcGFjZXMuaGFzT3duUHJvcGVydHkocHJlZml4KSA/IHtzcGFjZTogbmFtZXNwYWNlc1twcmVmaXhdLCBsb2NhbDogbmFtZX0gOiBuYW1lOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXByb3RvdHlwZS1idWlsdGluc1xufVxuIiwgImltcG9ydCBuYW1lc3BhY2UgZnJvbSBcIi4vbmFtZXNwYWNlLmpzXCI7XG5pbXBvcnQge3hodG1sfSBmcm9tIFwiLi9uYW1lc3BhY2VzLmpzXCI7XG5cbmZ1bmN0aW9uIGNyZWF0b3JJbmhlcml0KG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBkb2N1bWVudCA9IHRoaXMub3duZXJEb2N1bWVudCxcbiAgICAgICAgdXJpID0gdGhpcy5uYW1lc3BhY2VVUkk7XG4gICAgcmV0dXJuIHVyaSA9PT0geGh0bWwgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm5hbWVzcGFjZVVSSSA9PT0geGh0bWxcbiAgICAgICAgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpXG4gICAgICAgIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHVyaSwgbmFtZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0b3JGaXhlZChmdWxsbmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSkge1xuICB2YXIgZnVsbG5hbWUgPSBuYW1lc3BhY2UobmFtZSk7XG4gIHJldHVybiAoZnVsbG5hbWUubG9jYWxcbiAgICAgID8gY3JlYXRvckZpeGVkXG4gICAgICA6IGNyZWF0b3JJbmhlcml0KShmdWxsbmFtZSk7XG59XG4iLCAiZnVuY3Rpb24gbm9uZSgpIHt9XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gIHJldHVybiBzZWxlY3RvciA9PSBudWxsID8gbm9uZSA6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICB9O1xufVxuIiwgImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuaW1wb3J0IHNlbGVjdG9yIGZyb20gXCIuLi9zZWxlY3Rvci5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3QpIHtcbiAgaWYgKHR5cGVvZiBzZWxlY3QgIT09IFwiZnVuY3Rpb25cIikgc2VsZWN0ID0gc2VsZWN0b3Ioc2VsZWN0KTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBuZXcgQXJyYXkobSksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIHN1Ymdyb3VwID0gc3ViZ3JvdXBzW2pdID0gbmV3IEFycmF5KG4pLCBub2RlLCBzdWJub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIChzdWJub2RlID0gc2VsZWN0LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSkge1xuICAgICAgICBpZiAoXCJfX2RhdGFfX1wiIGluIG5vZGUpIHN1Ym5vZGUuX19kYXRhX18gPSBub2RlLl9fZGF0YV9fO1xuICAgICAgICBzdWJncm91cFtpXSA9IHN1Ym5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oc3ViZ3JvdXBzLCB0aGlzLl9wYXJlbnRzKTtcbn1cbiIsICIvLyBHaXZlbiBzb21ldGhpbmcgYXJyYXkgbGlrZSAob3IgbnVsbCksIHJldHVybnMgc29tZXRoaW5nIHRoYXQgaXMgc3RyaWN0bHkgYW5cbi8vIGFycmF5LiBUaGlzIGlzIHVzZWQgdG8gZW5zdXJlIHRoYXQgYXJyYXktbGlrZSBvYmplY3RzIHBhc3NlZCB0byBkMy5zZWxlY3RBbGxcbi8vIG9yIHNlbGVjdGlvbi5zZWxlY3RBbGwgYXJlIGNvbnZlcnRlZCBpbnRvIHByb3BlciBhcnJheXMgd2hlbiBjcmVhdGluZyBhXG4vLyBzZWxlY3Rpb247IHdlIGRvblx1MjAxOXQgZXZlciB3YW50IHRvIGNyZWF0ZSBhIHNlbGVjdGlvbiBiYWNrZWQgYnkgYSBsaXZlXG4vLyBIVE1MQ29sbGVjdGlvbiBvciBOb2RlTGlzdC4gSG93ZXZlciwgbm90ZSB0aGF0IHNlbGVjdGlvbi5zZWxlY3RBbGwgd2lsbCB1c2UgYVxuLy8gc3RhdGljIE5vZGVMaXN0IGFzIGEgZ3JvdXAsIHNpbmNlIGl0IHNhZmVseSBkZXJpdmVkIGZyb20gcXVlcnlTZWxlY3RvckFsbC5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGFycmF5KHgpIHtcbiAgcmV0dXJuIHggPT0gbnVsbCA/IFtdIDogQXJyYXkuaXNBcnJheSh4KSA/IHggOiBBcnJheS5mcm9tKHgpO1xufVxuIiwgImZ1bmN0aW9uIGVtcHR5KCkge1xuICByZXR1cm4gW107XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gIHJldHVybiBzZWxlY3RvciA9PSBudWxsID8gZW1wdHkgOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgfTtcbn1cbiIsICJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCBhcnJheSBmcm9tIFwiLi4vYXJyYXkuanNcIjtcbmltcG9ydCBzZWxlY3RvckFsbCBmcm9tIFwiLi4vc2VsZWN0b3JBbGwuanNcIjtcblxuZnVuY3Rpb24gYXJyYXlBbGwoc2VsZWN0KSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gYXJyYXkoc2VsZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3QpIHtcbiAgaWYgKHR5cGVvZiBzZWxlY3QgPT09IFwiZnVuY3Rpb25cIikgc2VsZWN0ID0gYXJyYXlBbGwoc2VsZWN0KTtcbiAgZWxzZSBzZWxlY3QgPSBzZWxlY3RvckFsbChzZWxlY3QpO1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHN1Ymdyb3VwcyA9IFtdLCBwYXJlbnRzID0gW10sIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHN1Ymdyb3Vwcy5wdXNoKHNlbGVjdC5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKSk7XG4gICAgICAgIHBhcmVudHMucHVzaChub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFNlbGVjdGlvbihzdWJncm91cHMsIHBhcmVudHMpO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tYXRjaGVzKHNlbGVjdG9yKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoaWxkTWF0Y2hlcihzZWxlY3Rvcikge1xuICByZXR1cm4gZnVuY3Rpb24obm9kZSkge1xuICAgIHJldHVybiBub2RlLm1hdGNoZXMoc2VsZWN0b3IpO1xuICB9O1xufVxuXG4iLCAiaW1wb3J0IHtjaGlsZE1hdGNoZXJ9IGZyb20gXCIuLi9tYXRjaGVyLmpzXCI7XG5cbnZhciBmaW5kID0gQXJyYXkucHJvdG90eXBlLmZpbmQ7XG5cbmZ1bmN0aW9uIGNoaWxkRmluZChtYXRjaCkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZpbmQuY2FsbCh0aGlzLmNoaWxkcmVuLCBtYXRjaCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNoaWxkRmlyc3QoKSB7XG4gIHJldHVybiB0aGlzLmZpcnN0RWxlbWVudENoaWxkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihtYXRjaCkge1xuICByZXR1cm4gdGhpcy5zZWxlY3QobWF0Y2ggPT0gbnVsbCA/IGNoaWxkRmlyc3RcbiAgICAgIDogY2hpbGRGaW5kKHR5cGVvZiBtYXRjaCA9PT0gXCJmdW5jdGlvblwiID8gbWF0Y2ggOiBjaGlsZE1hdGNoZXIobWF0Y2gpKSk7XG59XG4iLCAiaW1wb3J0IHtjaGlsZE1hdGNoZXJ9IGZyb20gXCIuLi9tYXRjaGVyLmpzXCI7XG5cbnZhciBmaWx0ZXIgPSBBcnJheS5wcm90b3R5cGUuZmlsdGVyO1xuXG5mdW5jdGlvbiBjaGlsZHJlbigpIHtcbiAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5jaGlsZHJlbik7XG59XG5cbmZ1bmN0aW9uIGNoaWxkcmVuRmlsdGVyKG1hdGNoKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZmlsdGVyLmNhbGwodGhpcy5jaGlsZHJlbiwgbWF0Y2gpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihtYXRjaCkge1xuICByZXR1cm4gdGhpcy5zZWxlY3RBbGwobWF0Y2ggPT0gbnVsbCA/IGNoaWxkcmVuXG4gICAgICA6IGNoaWxkcmVuRmlsdGVyKHR5cGVvZiBtYXRjaCA9PT0gXCJmdW5jdGlvblwiID8gbWF0Y2ggOiBjaGlsZE1hdGNoZXIobWF0Y2gpKSk7XG59XG4iLCAiaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQgbWF0Y2hlciBmcm9tIFwiLi4vbWF0Y2hlci5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihtYXRjaCkge1xuICBpZiAodHlwZW9mIG1hdGNoICE9PSBcImZ1bmN0aW9uXCIpIG1hdGNoID0gbWF0Y2hlcihtYXRjaCk7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBzdWJncm91cCA9IHN1Ymdyb3Vwc1tqXSA9IFtdLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIG1hdGNoLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSB7XG4gICAgICAgIHN1Ymdyb3VwLnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oc3ViZ3JvdXBzLCB0aGlzLl9wYXJlbnRzKTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbih1cGRhdGUpIHtcbiAgcmV0dXJuIG5ldyBBcnJheSh1cGRhdGUubGVuZ3RoKTtcbn1cbiIsICJpbXBvcnQgc3BhcnNlIGZyb20gXCIuL3NwYXJzZS5qc1wiO1xuaW1wb3J0IHtTZWxlY3Rpb259IGZyb20gXCIuL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFNlbGVjdGlvbih0aGlzLl9lbnRlciB8fCB0aGlzLl9ncm91cHMubWFwKHNwYXJzZSksIHRoaXMuX3BhcmVudHMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gRW50ZXJOb2RlKHBhcmVudCwgZGF0dW0pIHtcbiAgdGhpcy5vd25lckRvY3VtZW50ID0gcGFyZW50Lm93bmVyRG9jdW1lbnQ7XG4gIHRoaXMubmFtZXNwYWNlVVJJID0gcGFyZW50Lm5hbWVzcGFjZVVSSTtcbiAgdGhpcy5fbmV4dCA9IG51bGw7XG4gIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcbiAgdGhpcy5fX2RhdGFfXyA9IGRhdHVtO1xufVxuXG5FbnRlck5vZGUucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogRW50ZXJOb2RlLFxuICBhcHBlbmRDaGlsZDogZnVuY3Rpb24oY2hpbGQpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIHRoaXMuX25leHQpOyB9LFxuICBpbnNlcnRCZWZvcmU6IGZ1bmN0aW9uKGNoaWxkLCBuZXh0KSB7IHJldHVybiB0aGlzLl9wYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBuZXh0KTsgfSxcbiAgcXVlcnlTZWxlY3RvcjogZnVuY3Rpb24oc2VsZWN0b3IpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsgfSxcbiAgcXVlcnlTZWxlY3RvckFsbDogZnVuY3Rpb24oc2VsZWN0b3IpIHsgcmV0dXJuIHRoaXMuX3BhcmVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTsgfVxufTtcbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbih4KSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4geDtcbiAgfTtcbn1cbiIsICJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCB7RW50ZXJOb2RlfSBmcm9tIFwiLi9lbnRlci5qc1wiO1xuaW1wb3J0IGNvbnN0YW50IGZyb20gXCIuLi9jb25zdGFudC5qc1wiO1xuXG5mdW5jdGlvbiBiaW5kSW5kZXgocGFyZW50LCBncm91cCwgZW50ZXIsIHVwZGF0ZSwgZXhpdCwgZGF0YSkge1xuICB2YXIgaSA9IDAsXG4gICAgICBub2RlLFxuICAgICAgZ3JvdXBMZW5ndGggPSBncm91cC5sZW5ndGgsXG4gICAgICBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGg7XG5cbiAgLy8gUHV0IGFueSBub24tbnVsbCBub2RlcyB0aGF0IGZpdCBpbnRvIHVwZGF0ZS5cbiAgLy8gUHV0IGFueSBudWxsIG5vZGVzIGludG8gZW50ZXIuXG4gIC8vIFB1dCBhbnkgcmVtYWluaW5nIGRhdGEgaW50byBlbnRlci5cbiAgZm9yICg7IGkgPCBkYXRhTGVuZ3RoOyArK2kpIHtcbiAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICBub2RlLl9fZGF0YV9fID0gZGF0YVtpXTtcbiAgICAgIHVwZGF0ZVtpXSA9IG5vZGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVudGVyW2ldID0gbmV3IEVudGVyTm9kZShwYXJlbnQsIGRhdGFbaV0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIFB1dCBhbnkgbm9uLW51bGwgbm9kZXMgdGhhdCBkb25cdTIwMTl0IGZpdCBpbnRvIGV4aXQuXG4gIGZvciAoOyBpIDwgZ3JvdXBMZW5ndGg7ICsraSkge1xuICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgIGV4aXRbaV0gPSBub2RlO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBiaW5kS2V5KHBhcmVudCwgZ3JvdXAsIGVudGVyLCB1cGRhdGUsIGV4aXQsIGRhdGEsIGtleSkge1xuICB2YXIgaSxcbiAgICAgIG5vZGUsXG4gICAgICBub2RlQnlLZXlWYWx1ZSA9IG5ldyBNYXAsXG4gICAgICBncm91cExlbmd0aCA9IGdyb3VwLmxlbmd0aCxcbiAgICAgIGRhdGFMZW5ndGggPSBkYXRhLmxlbmd0aCxcbiAgICAgIGtleVZhbHVlcyA9IG5ldyBBcnJheShncm91cExlbmd0aCksXG4gICAgICBrZXlWYWx1ZTtcblxuICAvLyBDb21wdXRlIHRoZSBrZXkgZm9yIGVhY2ggbm9kZS5cbiAgLy8gSWYgbXVsdGlwbGUgbm9kZXMgaGF2ZSB0aGUgc2FtZSBrZXksIHRoZSBkdXBsaWNhdGVzIGFyZSBhZGRlZCB0byBleGl0LlxuICBmb3IgKGkgPSAwOyBpIDwgZ3JvdXBMZW5ndGg7ICsraSkge1xuICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgIGtleVZhbHVlc1tpXSA9IGtleVZhbHVlID0ga2V5LmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApICsgXCJcIjtcbiAgICAgIGlmIChub2RlQnlLZXlWYWx1ZS5oYXMoa2V5VmFsdWUpKSB7XG4gICAgICAgIGV4aXRbaV0gPSBub2RlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9kZUJ5S2V5VmFsdWUuc2V0KGtleVZhbHVlLCBub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBDb21wdXRlIHRoZSBrZXkgZm9yIGVhY2ggZGF0dW0uXG4gIC8vIElmIHRoZXJlIGEgbm9kZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBrZXksIGpvaW4gYW5kIGFkZCBpdCB0byB1cGRhdGUuXG4gIC8vIElmIHRoZXJlIGlzIG5vdCAob3IgdGhlIGtleSBpcyBhIGR1cGxpY2F0ZSksIGFkZCBpdCB0byBlbnRlci5cbiAgZm9yIChpID0gMDsgaSA8IGRhdGFMZW5ndGg7ICsraSkge1xuICAgIGtleVZhbHVlID0ga2V5LmNhbGwocGFyZW50LCBkYXRhW2ldLCBpLCBkYXRhKSArIFwiXCI7XG4gICAgaWYgKG5vZGUgPSBub2RlQnlLZXlWYWx1ZS5nZXQoa2V5VmFsdWUpKSB7XG4gICAgICB1cGRhdGVbaV0gPSBub2RlO1xuICAgICAgbm9kZS5fX2RhdGFfXyA9IGRhdGFbaV07XG4gICAgICBub2RlQnlLZXlWYWx1ZS5kZWxldGUoa2V5VmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbnRlcltpXSA9IG5ldyBFbnRlck5vZGUocGFyZW50LCBkYXRhW2ldKTtcbiAgICB9XG4gIH1cblxuICAvLyBBZGQgYW55IHJlbWFpbmluZyBub2RlcyB0aGF0IHdlcmUgbm90IGJvdW5kIHRvIGRhdGEgdG8gZXhpdC5cbiAgZm9yIChpID0gMDsgaSA8IGdyb3VwTGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgKG5vZGVCeUtleVZhbHVlLmdldChrZXlWYWx1ZXNbaV0pID09PSBub2RlKSkge1xuICAgICAgZXhpdFtpXSA9IG5vZGU7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGRhdHVtKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUuX19kYXRhX187XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLCBkYXR1bSk7XG5cbiAgdmFyIGJpbmQgPSBrZXkgPyBiaW5kS2V5IDogYmluZEluZGV4LFxuICAgICAgcGFyZW50cyA9IHRoaXMuX3BhcmVudHMsXG4gICAgICBncm91cHMgPSB0aGlzLl9ncm91cHM7XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB2YWx1ZSA9IGNvbnN0YW50KHZhbHVlKTtcblxuICBmb3IgKHZhciBtID0gZ3JvdXBzLmxlbmd0aCwgdXBkYXRlID0gbmV3IEFycmF5KG0pLCBlbnRlciA9IG5ldyBBcnJheShtKSwgZXhpdCA9IG5ldyBBcnJheShtKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICB2YXIgcGFyZW50ID0gcGFyZW50c1tqXSxcbiAgICAgICAgZ3JvdXAgPSBncm91cHNbal0sXG4gICAgICAgIGdyb3VwTGVuZ3RoID0gZ3JvdXAubGVuZ3RoLFxuICAgICAgICBkYXRhID0gYXJyYXlsaWtlKHZhbHVlLmNhbGwocGFyZW50LCBwYXJlbnQgJiYgcGFyZW50Ll9fZGF0YV9fLCBqLCBwYXJlbnRzKSksXG4gICAgICAgIGRhdGFMZW5ndGggPSBkYXRhLmxlbmd0aCxcbiAgICAgICAgZW50ZXJHcm91cCA9IGVudGVyW2pdID0gbmV3IEFycmF5KGRhdGFMZW5ndGgpLFxuICAgICAgICB1cGRhdGVHcm91cCA9IHVwZGF0ZVtqXSA9IG5ldyBBcnJheShkYXRhTGVuZ3RoKSxcbiAgICAgICAgZXhpdEdyb3VwID0gZXhpdFtqXSA9IG5ldyBBcnJheShncm91cExlbmd0aCk7XG5cbiAgICBiaW5kKHBhcmVudCwgZ3JvdXAsIGVudGVyR3JvdXAsIHVwZGF0ZUdyb3VwLCBleGl0R3JvdXAsIGRhdGEsIGtleSk7XG5cbiAgICAvLyBOb3cgY29ubmVjdCB0aGUgZW50ZXIgbm9kZXMgdG8gdGhlaXIgZm9sbG93aW5nIHVwZGF0ZSBub2RlLCBzdWNoIHRoYXRcbiAgICAvLyBhcHBlbmRDaGlsZCBjYW4gaW5zZXJ0IHRoZSBtYXRlcmlhbGl6ZWQgZW50ZXIgbm9kZSBiZWZvcmUgdGhpcyBub2RlLFxuICAgIC8vIHJhdGhlciB0aGFuIGF0IHRoZSBlbmQgb2YgdGhlIHBhcmVudCBub2RlLlxuICAgIGZvciAodmFyIGkwID0gMCwgaTEgPSAwLCBwcmV2aW91cywgbmV4dDsgaTAgPCBkYXRhTGVuZ3RoOyArK2kwKSB7XG4gICAgICBpZiAocHJldmlvdXMgPSBlbnRlckdyb3VwW2kwXSkge1xuICAgICAgICBpZiAoaTAgPj0gaTEpIGkxID0gaTAgKyAxO1xuICAgICAgICB3aGlsZSAoIShuZXh0ID0gdXBkYXRlR3JvdXBbaTFdKSAmJiArK2kxIDwgZGF0YUxlbmd0aCk7XG4gICAgICAgIHByZXZpb3VzLl9uZXh0ID0gbmV4dCB8fCBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZSA9IG5ldyBTZWxlY3Rpb24odXBkYXRlLCBwYXJlbnRzKTtcbiAgdXBkYXRlLl9lbnRlciA9IGVudGVyO1xuICB1cGRhdGUuX2V4aXQgPSBleGl0O1xuICByZXR1cm4gdXBkYXRlO1xufVxuXG4vLyBHaXZlbiBzb21lIGRhdGEsIHRoaXMgcmV0dXJucyBhbiBhcnJheS1saWtlIHZpZXcgb2YgaXQ6IGFuIG9iamVjdCB0aGF0XG4vLyBleHBvc2VzIGEgbGVuZ3RoIHByb3BlcnR5IGFuZCBhbGxvd3MgbnVtZXJpYyBpbmRleGluZy4gTm90ZSB0aGF0IHVubGlrZVxuLy8gc2VsZWN0QWxsLCB0aGlzIGlzblx1MjAxOXQgd29ycmllZCBhYm91dCBcdTIwMUNsaXZlXHUyMDFEIGNvbGxlY3Rpb25zIGJlY2F1c2UgdGhlIHJlc3VsdGluZ1xuLy8gYXJyYXkgd2lsbCBvbmx5IGJlIHVzZWQgYnJpZWZseSB3aGlsZSBkYXRhIGlzIGJlaW5nIGJvdW5kLiAoSXQgaXMgcG9zc2libGUgdG9cbi8vIGNhdXNlIHRoZSBkYXRhIHRvIGNoYW5nZSB3aGlsZSBpdGVyYXRpbmcgYnkgdXNpbmcgYSBrZXkgZnVuY3Rpb24sIGJ1dCBwbGVhc2Vcbi8vIGRvblx1MjAxOXQ7IHdlXHUyMDE5ZCByYXRoZXIgYXZvaWQgYSBncmF0dWl0b3VzIGNvcHkuKVxuZnVuY3Rpb24gYXJyYXlsaWtlKGRhdGEpIHtcbiAgcmV0dXJuIHR5cGVvZiBkYXRhID09PSBcIm9iamVjdFwiICYmIFwibGVuZ3RoXCIgaW4gZGF0YVxuICAgID8gZGF0YSAvLyBBcnJheSwgVHlwZWRBcnJheSwgTm9kZUxpc3QsIGFycmF5LWxpa2VcbiAgICA6IEFycmF5LmZyb20oZGF0YSk7IC8vIE1hcCwgU2V0LCBpdGVyYWJsZSwgc3RyaW5nLCBvciBhbnl0aGluZyBlbHNlXG59XG4iLCAiaW1wb3J0IHNwYXJzZSBmcm9tIFwiLi9zcGFyc2UuanNcIjtcbmltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24odGhpcy5fZXhpdCB8fCB0aGlzLl9ncm91cHMubWFwKHNwYXJzZSksIHRoaXMuX3BhcmVudHMpO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG9uZW50ZXIsIG9udXBkYXRlLCBvbmV4aXQpIHtcbiAgdmFyIGVudGVyID0gdGhpcy5lbnRlcigpLCB1cGRhdGUgPSB0aGlzLCBleGl0ID0gdGhpcy5leGl0KCk7XG4gIGlmICh0eXBlb2Ygb25lbnRlciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZW50ZXIgPSBvbmVudGVyKGVudGVyKTtcbiAgICBpZiAoZW50ZXIpIGVudGVyID0gZW50ZXIuc2VsZWN0aW9uKCk7XG4gIH0gZWxzZSB7XG4gICAgZW50ZXIgPSBlbnRlci5hcHBlbmQob25lbnRlciArIFwiXCIpO1xuICB9XG4gIGlmIChvbnVwZGF0ZSAhPSBudWxsKSB7XG4gICAgdXBkYXRlID0gb251cGRhdGUodXBkYXRlKTtcbiAgICBpZiAodXBkYXRlKSB1cGRhdGUgPSB1cGRhdGUuc2VsZWN0aW9uKCk7XG4gIH1cbiAgaWYgKG9uZXhpdCA9PSBudWxsKSBleGl0LnJlbW92ZSgpOyBlbHNlIG9uZXhpdChleGl0KTtcbiAgcmV0dXJuIGVudGVyICYmIHVwZGF0ZSA/IGVudGVyLm1lcmdlKHVwZGF0ZSkub3JkZXIoKSA6IHVwZGF0ZTtcbn1cbiIsICJpbXBvcnQge1NlbGVjdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oY29udGV4dCkge1xuICB2YXIgc2VsZWN0aW9uID0gY29udGV4dC5zZWxlY3Rpb24gPyBjb250ZXh0LnNlbGVjdGlvbigpIDogY29udGV4dDtcblxuICBmb3IgKHZhciBncm91cHMwID0gdGhpcy5fZ3JvdXBzLCBncm91cHMxID0gc2VsZWN0aW9uLl9ncm91cHMsIG0wID0gZ3JvdXBzMC5sZW5ndGgsIG0xID0gZ3JvdXBzMS5sZW5ndGgsIG0gPSBNYXRoLm1pbihtMCwgbTEpLCBtZXJnZXMgPSBuZXcgQXJyYXkobTApLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwMCA9IGdyb3VwczBbal0sIGdyb3VwMSA9IGdyb3VwczFbal0sIG4gPSBncm91cDAubGVuZ3RoLCBtZXJnZSA9IG1lcmdlc1tqXSA9IG5ldyBBcnJheShuKSwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXAwW2ldIHx8IGdyb3VwMVtpXSkge1xuICAgICAgICBtZXJnZVtpXSA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZm9yICg7IGogPCBtMDsgKytqKSB7XG4gICAgbWVyZ2VzW2pdID0gZ3JvdXBzMFtqXTtcbiAgfVxuXG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKG1lcmdlcywgdGhpcy5fcGFyZW50cyk7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gLTEsIG0gPSBncm91cHMubGVuZ3RoOyArK2ogPCBtOykge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gZ3JvdXAubGVuZ3RoIC0gMSwgbmV4dCA9IGdyb3VwW2ldLCBub2RlOyAtLWkgPj0gMDspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgaWYgKG5leHQgJiYgbm9kZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuZXh0KSBeIDQpIG5leHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgbmV4dCk7XG4gICAgICAgIG5leHQgPSBub2RlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuIiwgImltcG9ydCB7U2VsZWN0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihjb21wYXJlKSB7XG4gIGlmICghY29tcGFyZSkgY29tcGFyZSA9IGFzY2VuZGluZztcblxuICBmdW5jdGlvbiBjb21wYXJlTm9kZShhLCBiKSB7XG4gICAgcmV0dXJuIGEgJiYgYiA/IGNvbXBhcmUoYS5fX2RhdGFfXywgYi5fX2RhdGFfXykgOiAhYSAtICFiO1xuICB9XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc29ydGdyb3VwcyA9IG5ldyBBcnJheShtKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc29ydGdyb3VwID0gc29ydGdyb3Vwc1tqXSA9IG5ldyBBcnJheShuKSwgbm9kZSwgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgc29ydGdyb3VwW2ldID0gbm9kZTtcbiAgICAgIH1cbiAgICB9XG4gICAgc29ydGdyb3VwLnNvcnQoY29tcGFyZU5vZGUpO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24oc29ydGdyb3VwcywgdGhpcy5fcGFyZW50cykub3JkZXIoKTtcbn1cblxuZnVuY3Rpb24gYXNjZW5kaW5nKGEsIGIpIHtcbiAgcmV0dXJuIGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiBhID49IGIgPyAwIDogTmFOO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHNbMF07XG4gIGFyZ3VtZW50c1swXSA9IHRoaXM7XG4gIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gIHJldHVybiB0aGlzO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzKTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIGogPSAwLCBtID0gZ3JvdXBzLmxlbmd0aDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBpID0gMCwgbiA9IGdyb3VwLmxlbmd0aDsgaSA8IG47ICsraSkge1xuICAgICAgdmFyIG5vZGUgPSBncm91cFtpXTtcbiAgICAgIGlmIChub2RlKSByZXR1cm4gbm9kZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgbGV0IHNpemUgPSAwO1xuICBmb3IgKGNvbnN0IG5vZGUgb2YgdGhpcykgKytzaXplOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gIHJldHVybiBzaXplO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gIXRoaXMubm9kZSgpO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBqID0gMCwgbSA9IGdyb3Vwcy5sZW5ndGg7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgaSA9IDAsIG4gPSBncm91cC5sZW5ndGgsIG5vZGU7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIGNhbGxiYWNrLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufVxuIiwgImltcG9ydCBuYW1lc3BhY2UgZnJvbSBcIi4uL25hbWVzcGFjZS5qc1wiO1xuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlTlMoZnVsbG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckNvbnN0YW50KG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGF0dHJDb25zdGFudE5TKGZ1bGxuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwsIHZhbHVlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHYgPT0gbnVsbCkgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgZWxzZSB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckZ1bmN0aW9uTlMoZnVsbG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHYgPT0gbnVsbCkgdGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICAgIGVsc2UgdGhpcy5zZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwsIHYpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICB2YXIgZnVsbG5hbWUgPSBuYW1lc3BhY2UobmFtZSk7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgdmFyIG5vZGUgPSB0aGlzLm5vZGUoKTtcbiAgICByZXR1cm4gZnVsbG5hbWUubG9jYWxcbiAgICAgICAgPyBub2RlLmdldEF0dHJpYnV0ZU5TKGZ1bGxuYW1lLnNwYWNlLCBmdWxsbmFtZS5sb2NhbClcbiAgICAgICAgOiBub2RlLmdldEF0dHJpYnV0ZShmdWxsbmFtZSk7XG4gIH1cblxuICByZXR1cm4gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsXG4gICAgICA/IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJSZW1vdmVOUyA6IGF0dHJSZW1vdmUpIDogKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJGdW5jdGlvbk5TIDogYXR0ckZ1bmN0aW9uKVxuICAgICAgOiAoZnVsbG5hbWUubG9jYWwgPyBhdHRyQ29uc3RhbnROUyA6IGF0dHJDb25zdGFudCkpKShmdWxsbmFtZSwgdmFsdWUpKTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihub2RlKSB7XG4gIHJldHVybiAobm9kZS5vd25lckRvY3VtZW50ICYmIG5vZGUub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldykgLy8gbm9kZSBpcyBhIE5vZGVcbiAgICAgIHx8IChub2RlLmRvY3VtZW50ICYmIG5vZGUpIC8vIG5vZGUgaXMgYSBXaW5kb3dcbiAgICAgIHx8IG5vZGUuZGVmYXVsdFZpZXc7IC8vIG5vZGUgaXMgYSBEb2N1bWVudFxufVxuIiwgImltcG9ydCBkZWZhdWx0VmlldyBmcm9tIFwiLi4vd2luZG93LmpzXCI7XG5cbmZ1bmN0aW9uIHN0eWxlUmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0eWxlQ29uc3RhbnQobmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsIHZhbHVlLCBwcmlvcml0eSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0eWxlRnVuY3Rpb24obmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHYgPT0gbnVsbCkgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKTtcbiAgICBlbHNlIHRoaXMuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgdiwgcHJpb3JpdHkpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAxXG4gICAgICA/IHRoaXMuZWFjaCgodmFsdWUgPT0gbnVsbFxuICAgICAgICAgICAgPyBzdHlsZVJlbW92ZSA6IHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgICA/IHN0eWxlRnVuY3Rpb25cbiAgICAgICAgICAgIDogc3R5bGVDb25zdGFudCkobmFtZSwgdmFsdWUsIHByaW9yaXR5ID09IG51bGwgPyBcIlwiIDogcHJpb3JpdHkpKVxuICAgICAgOiBzdHlsZVZhbHVlKHRoaXMubm9kZSgpLCBuYW1lKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0eWxlVmFsdWUobm9kZSwgbmFtZSkge1xuICByZXR1cm4gbm9kZS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpXG4gICAgICB8fCBkZWZhdWx0Vmlldyhub2RlKS5nZXRDb21wdXRlZFN0eWxlKG5vZGUsIG51bGwpLmdldFByb3BlcnR5VmFsdWUobmFtZSk7XG59XG4iLCAiZnVuY3Rpb24gcHJvcGVydHlSZW1vdmUobmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgZGVsZXRlIHRoaXNbbmFtZV07XG4gIH07XG59XG5cbmZ1bmN0aW9uIHByb3BlcnR5Q29uc3RhbnQobmFtZSwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXNbbmFtZV0gPSB2YWx1ZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcHJvcGVydHlGdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICh2ID09IG51bGwpIGRlbGV0ZSB0aGlzW25hbWVdO1xuICAgIGVsc2UgdGhpc1tuYW1lXSA9IHY7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMVxuICAgICAgPyB0aGlzLmVhY2goKHZhbHVlID09IG51bGxcbiAgICAgICAgICA/IHByb3BlcnR5UmVtb3ZlIDogdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IHByb3BlcnR5RnVuY3Rpb25cbiAgICAgICAgICA6IHByb3BlcnR5Q29uc3RhbnQpKG5hbWUsIHZhbHVlKSlcbiAgICAgIDogdGhpcy5ub2RlKClbbmFtZV07XG59XG4iLCAiZnVuY3Rpb24gY2xhc3NBcnJheShzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy50cmltKCkuc3BsaXQoL158XFxzKy8pO1xufVxuXG5mdW5jdGlvbiBjbGFzc0xpc3Qobm9kZSkge1xuICByZXR1cm4gbm9kZS5jbGFzc0xpc3QgfHwgbmV3IENsYXNzTGlzdChub2RlKTtcbn1cblxuZnVuY3Rpb24gQ2xhc3NMaXN0KG5vZGUpIHtcbiAgdGhpcy5fbm9kZSA9IG5vZGU7XG4gIHRoaXMuX25hbWVzID0gY2xhc3NBcnJheShub2RlLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpIHx8IFwiXCIpO1xufVxuXG5DbGFzc0xpc3QucHJvdG90eXBlID0ge1xuICBhZGQ6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgaSA9IHRoaXMuX25hbWVzLmluZGV4T2YobmFtZSk7XG4gICAgaWYgKGkgPCAwKSB7XG4gICAgICB0aGlzLl9uYW1lcy5wdXNoKG5hbWUpO1xuICAgICAgdGhpcy5fbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB0aGlzLl9uYW1lcy5qb2luKFwiIFwiKSk7XG4gICAgfVxuICB9LFxuICByZW1vdmU6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgaSA9IHRoaXMuX25hbWVzLmluZGV4T2YobmFtZSk7XG4gICAgaWYgKGkgPj0gMCkge1xuICAgICAgdGhpcy5fbmFtZXMuc3BsaWNlKGksIDEpO1xuICAgICAgdGhpcy5fbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB0aGlzLl9uYW1lcy5qb2luKFwiIFwiKSk7XG4gICAgfVxuICB9LFxuICBjb250YWluczogZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiB0aGlzLl9uYW1lcy5pbmRleE9mKG5hbWUpID49IDA7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGNsYXNzZWRBZGQobm9kZSwgbmFtZXMpIHtcbiAgdmFyIGxpc3QgPSBjbGFzc0xpc3Qobm9kZSksIGkgPSAtMSwgbiA9IG5hbWVzLmxlbmd0aDtcbiAgd2hpbGUgKCsraSA8IG4pIGxpc3QuYWRkKG5hbWVzW2ldKTtcbn1cblxuZnVuY3Rpb24gY2xhc3NlZFJlbW92ZShub2RlLCBuYW1lcykge1xuICB2YXIgbGlzdCA9IGNsYXNzTGlzdChub2RlKSwgaSA9IC0xLCBuID0gbmFtZXMubGVuZ3RoO1xuICB3aGlsZSAoKytpIDwgbikgbGlzdC5yZW1vdmUobmFtZXNbaV0pO1xufVxuXG5mdW5jdGlvbiBjbGFzc2VkVHJ1ZShuYW1lcykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgY2xhc3NlZEFkZCh0aGlzLCBuYW1lcyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNsYXNzZWRGYWxzZShuYW1lcykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgY2xhc3NlZFJlbW92ZSh0aGlzLCBuYW1lcyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNsYXNzZWRGdW5jdGlvbihuYW1lcywgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICh2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpID8gY2xhc3NlZEFkZCA6IGNsYXNzZWRSZW1vdmUpKHRoaXMsIG5hbWVzKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgdmFyIG5hbWVzID0gY2xhc3NBcnJheShuYW1lICsgXCJcIik7XG5cbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgdmFyIGxpc3QgPSBjbGFzc0xpc3QodGhpcy5ub2RlKCkpLCBpID0gLTEsIG4gPSBuYW1lcy5sZW5ndGg7XG4gICAgd2hpbGUgKCsraSA8IG4pIGlmICghbGlzdC5jb250YWlucyhuYW1lc1tpXSkpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiB0aGlzLmVhY2goKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IGNsYXNzZWRGdW5jdGlvbiA6IHZhbHVlXG4gICAgICA/IGNsYXNzZWRUcnVlXG4gICAgICA6IGNsYXNzZWRGYWxzZSkobmFtZXMsIHZhbHVlKSk7XG59XG4iLCAiZnVuY3Rpb24gdGV4dFJlbW92ZSgpIHtcbiAgdGhpcy50ZXh0Q29udGVudCA9IFwiXCI7XG59XG5cbmZ1bmN0aW9uIHRleHRDb25zdGFudCh2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy50ZXh0Q29udGVudCA9IHZhbHVlO1xuICB9O1xufVxuXG5mdW5jdGlvbiB0ZXh0RnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB0aGlzLnRleHRDb250ZW50ID0gdiA9PSBudWxsID8gXCJcIiA6IHY7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMuZWFjaCh2YWx1ZSA9PSBudWxsXG4gICAgICAgICAgPyB0ZXh0UmVtb3ZlIDogKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgPyB0ZXh0RnVuY3Rpb25cbiAgICAgICAgICA6IHRleHRDb25zdGFudCkodmFsdWUpKVxuICAgICAgOiB0aGlzLm5vZGUoKS50ZXh0Q29udGVudDtcbn1cbiIsICJmdW5jdGlvbiBodG1sUmVtb3ZlKCkge1xuICB0aGlzLmlubmVySFRNTCA9IFwiXCI7XG59XG5cbmZ1bmN0aW9uIGh0bWxDb25zdGFudCh2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gaHRtbEZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdiA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5pbm5lckhUTUwgPSB2ID09IG51bGwgPyBcIlwiIDogdjtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgID8gdGhpcy5lYWNoKHZhbHVlID09IG51bGxcbiAgICAgICAgICA/IGh0bWxSZW1vdmUgOiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IGh0bWxGdW5jdGlvblxuICAgICAgICAgIDogaHRtbENvbnN0YW50KSh2YWx1ZSkpXG4gICAgICA6IHRoaXMubm9kZSgpLmlubmVySFRNTDtcbn1cbiIsICJmdW5jdGlvbiByYWlzZSgpIHtcbiAgaWYgKHRoaXMubmV4dFNpYmxpbmcpIHRoaXMucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0aGlzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmVhY2gocmFpc2UpO1xufVxuIiwgImZ1bmN0aW9uIGxvd2VyKCkge1xuICBpZiAodGhpcy5wcmV2aW91c1NpYmxpbmcpIHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcywgdGhpcy5wYXJlbnROb2RlLmZpcnN0Q2hpbGQpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaChsb3dlcik7XG59XG4iLCAiaW1wb3J0IGNyZWF0b3IgZnJvbSBcIi4uL2NyZWF0b3IuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSkge1xuICB2YXIgY3JlYXRlID0gdHlwZW9mIG5hbWUgPT09IFwiZnVuY3Rpb25cIiA/IG5hbWUgOiBjcmVhdG9yKG5hbWUpO1xuICByZXR1cm4gdGhpcy5zZWxlY3QoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwZW5kQ2hpbGQoY3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9KTtcbn1cbiIsICJpbXBvcnQgY3JlYXRvciBmcm9tIFwiLi4vY3JlYXRvci5qc1wiO1xuaW1wb3J0IHNlbGVjdG9yIGZyb20gXCIuLi9zZWxlY3Rvci5qc1wiO1xuXG5mdW5jdGlvbiBjb25zdGFudE51bGwoKSB7XG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lLCBiZWZvcmUpIHtcbiAgdmFyIGNyZWF0ZSA9IHR5cGVvZiBuYW1lID09PSBcImZ1bmN0aW9uXCIgPyBuYW1lIDogY3JlYXRvcihuYW1lKSxcbiAgICAgIHNlbGVjdCA9IGJlZm9yZSA9PSBudWxsID8gY29uc3RhbnROdWxsIDogdHlwZW9mIGJlZm9yZSA9PT0gXCJmdW5jdGlvblwiID8gYmVmb3JlIDogc2VsZWN0b3IoYmVmb3JlKTtcbiAgcmV0dXJuIHRoaXMuc2VsZWN0KGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmluc2VydEJlZm9yZShjcmVhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgc2VsZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgbnVsbCk7XG4gIH0pO1xufVxuIiwgImZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgaWYgKHBhcmVudCkgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaChyZW1vdmUpO1xufVxuIiwgImZ1bmN0aW9uIHNlbGVjdGlvbl9jbG9uZVNoYWxsb3coKSB7XG4gIHZhciBjbG9uZSA9IHRoaXMuY2xvbmVOb2RlKGZhbHNlKSwgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xuICByZXR1cm4gcGFyZW50ID8gcGFyZW50Lmluc2VydEJlZm9yZShjbG9uZSwgdGhpcy5uZXh0U2libGluZykgOiBjbG9uZTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0aW9uX2Nsb25lRGVlcCgpIHtcbiAgdmFyIGNsb25lID0gdGhpcy5jbG9uZU5vZGUodHJ1ZSksIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgcmV0dXJuIHBhcmVudCA/IHBhcmVudC5pbnNlcnRCZWZvcmUoY2xvbmUsIHRoaXMubmV4dFNpYmxpbmcpIDogY2xvbmU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGRlZXApIHtcbiAgcmV0dXJuIHRoaXMuc2VsZWN0KGRlZXAgPyBzZWxlY3Rpb25fY2xvbmVEZWVwIDogc2VsZWN0aW9uX2Nsb25lU2hhbGxvdyk7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgID8gdGhpcy5wcm9wZXJ0eShcIl9fZGF0YV9fXCIsIHZhbHVlKVxuICAgICAgOiB0aGlzLm5vZGUoKS5fX2RhdGFfXztcbn1cbiIsICJmdW5jdGlvbiBjb250ZXh0TGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgbGlzdGVuZXIuY2FsbCh0aGlzLCBldmVudCwgdGhpcy5fX2RhdGFfXyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHBhcnNlVHlwZW5hbWVzKHR5cGVuYW1lcykge1xuICByZXR1cm4gdHlwZW5hbWVzLnRyaW0oKS5zcGxpdCgvXnxcXHMrLykubWFwKGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgbmFtZSA9IFwiXCIsIGkgPSB0LmluZGV4T2YoXCIuXCIpO1xuICAgIGlmIChpID49IDApIG5hbWUgPSB0LnNsaWNlKGkgKyAxKSwgdCA9IHQuc2xpY2UoMCwgaSk7XG4gICAgcmV0dXJuIHt0eXBlOiB0LCBuYW1lOiBuYW1lfTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG9uUmVtb3ZlKHR5cGVuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgb24gPSB0aGlzLl9fb247XG4gICAgaWYgKCFvbikgcmV0dXJuO1xuICAgIGZvciAodmFyIGogPSAwLCBpID0gLTEsIG0gPSBvbi5sZW5ndGgsIG87IGogPCBtOyArK2opIHtcbiAgICAgIGlmIChvID0gb25bal0sICghdHlwZW5hbWUudHlwZSB8fCBvLnR5cGUgPT09IHR5cGVuYW1lLnR5cGUpICYmIG8ubmFtZSA9PT0gdHlwZW5hbWUubmFtZSkge1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoby50eXBlLCBvLmxpc3RlbmVyLCBvLm9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb25bKytpXSA9IG87XG4gICAgICB9XG4gICAgfVxuICAgIGlmICgrK2kpIG9uLmxlbmd0aCA9IGk7XG4gICAgZWxzZSBkZWxldGUgdGhpcy5fX29uO1xuICB9O1xufVxuXG5mdW5jdGlvbiBvbkFkZCh0eXBlbmFtZSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBvbiA9IHRoaXMuX19vbiwgbywgbGlzdGVuZXIgPSBjb250ZXh0TGlzdGVuZXIodmFsdWUpO1xuICAgIGlmIChvbikgZm9yICh2YXIgaiA9IDAsIG0gPSBvbi5sZW5ndGg7IGogPCBtOyArK2opIHtcbiAgICAgIGlmICgobyA9IG9uW2pdKS50eXBlID09PSB0eXBlbmFtZS50eXBlICYmIG8ubmFtZSA9PT0gdHlwZW5hbWUubmFtZSkge1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoby50eXBlLCBvLmxpc3RlbmVyLCBvLm9wdGlvbnMpO1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoby50eXBlLCBvLmxpc3RlbmVyID0gbGlzdGVuZXIsIG8ub3B0aW9ucyA9IG9wdGlvbnMpO1xuICAgICAgICBvLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKHR5cGVuYW1lLnR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTtcbiAgICBvID0ge3R5cGU6IHR5cGVuYW1lLnR5cGUsIG5hbWU6IHR5cGVuYW1lLm5hbWUsIHZhbHVlOiB2YWx1ZSwgbGlzdGVuZXI6IGxpc3RlbmVyLCBvcHRpb25zOiBvcHRpb25zfTtcbiAgICBpZiAoIW9uKSB0aGlzLl9fb24gPSBbb107XG4gICAgZWxzZSBvbi5wdXNoKG8pO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih0eXBlbmFtZSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgdmFyIHR5cGVuYW1lcyA9IHBhcnNlVHlwZW5hbWVzKHR5cGVuYW1lICsgXCJcIiksIGksIG4gPSB0eXBlbmFtZXMubGVuZ3RoLCB0O1xuXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xuICAgIHZhciBvbiA9IHRoaXMubm9kZSgpLl9fb247XG4gICAgaWYgKG9uKSBmb3IgKHZhciBqID0gMCwgbSA9IG9uLmxlbmd0aCwgbzsgaiA8IG07ICsraikge1xuICAgICAgZm9yIChpID0gMCwgbyA9IG9uW2pdOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIGlmICgodCA9IHR5cGVuYW1lc1tpXSkudHlwZSA9PT0gby50eXBlICYmIHQubmFtZSA9PT0gby5uYW1lKSB7XG4gICAgICAgICAgcmV0dXJuIG8udmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgb24gPSB2YWx1ZSA/IG9uQWRkIDogb25SZW1vdmU7XG4gIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHRoaXMuZWFjaChvbih0eXBlbmFtZXNbaV0sIHZhbHVlLCBvcHRpb25zKSk7XG4gIHJldHVybiB0aGlzO1xufVxuIiwgImltcG9ydCBkZWZhdWx0VmlldyBmcm9tIFwiLi4vd2luZG93LmpzXCI7XG5cbmZ1bmN0aW9uIGRpc3BhdGNoRXZlbnQobm9kZSwgdHlwZSwgcGFyYW1zKSB7XG4gIHZhciB3aW5kb3cgPSBkZWZhdWx0Vmlldyhub2RlKSxcbiAgICAgIGV2ZW50ID0gd2luZG93LkN1c3RvbUV2ZW50O1xuXG4gIGlmICh0eXBlb2YgZXZlbnQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGV2ZW50ID0gbmV3IGV2ZW50KHR5cGUsIHBhcmFtcyk7XG4gIH0gZWxzZSB7XG4gICAgZXZlbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtcbiAgICBpZiAocGFyYW1zKSBldmVudC5pbml0RXZlbnQodHlwZSwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlKSwgZXZlbnQuZGV0YWlsID0gcGFyYW1zLmRldGFpbDtcbiAgICBlbHNlIGV2ZW50LmluaXRFdmVudCh0eXBlLCBmYWxzZSwgZmFsc2UpO1xuICB9XG5cbiAgbm9kZS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbn1cblxuZnVuY3Rpb24gZGlzcGF0Y2hDb25zdGFudCh0eXBlLCBwYXJhbXMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkaXNwYXRjaEV2ZW50KHRoaXMsIHR5cGUsIHBhcmFtcyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoRnVuY3Rpb24odHlwZSwgcGFyYW1zKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2hFdmVudCh0aGlzLCB0eXBlLCBwYXJhbXMuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHR5cGUsIHBhcmFtcykge1xuICByZXR1cm4gdGhpcy5lYWNoKCh0eXBlb2YgcGFyYW1zID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gZGlzcGF0Y2hGdW5jdGlvblxuICAgICAgOiBkaXNwYXRjaENvbnN0YW50KSh0eXBlLCBwYXJhbXMpKTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiooKSB7XG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgaiA9IDAsIG0gPSBncm91cHMubGVuZ3RoOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB5aWVsZCBub2RlO1xuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCBzZWxlY3Rpb25fc2VsZWN0IGZyb20gXCIuL3NlbGVjdC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9zZWxlY3RBbGwgZnJvbSBcIi4vc2VsZWN0QWxsLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3NlbGVjdENoaWxkIGZyb20gXCIuL3NlbGVjdENoaWxkLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3NlbGVjdENoaWxkcmVuIGZyb20gXCIuL3NlbGVjdENoaWxkcmVuLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2ZpbHRlciBmcm9tIFwiLi9maWx0ZXIuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fZGF0YSBmcm9tIFwiLi9kYXRhLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2VudGVyIGZyb20gXCIuL2VudGVyLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2V4aXQgZnJvbSBcIi4vZXhpdC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9qb2luIGZyb20gXCIuL2pvaW4uanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fbWVyZ2UgZnJvbSBcIi4vbWVyZ2UuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fb3JkZXIgZnJvbSBcIi4vb3JkZXIuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fc29ydCBmcm9tIFwiLi9zb3J0LmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2NhbGwgZnJvbSBcIi4vY2FsbC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9ub2RlcyBmcm9tIFwiLi9ub2Rlcy5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9ub2RlIGZyb20gXCIuL25vZGUuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fc2l6ZSBmcm9tIFwiLi9zaXplLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2VtcHR5IGZyb20gXCIuL2VtcHR5LmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2VhY2ggZnJvbSBcIi4vZWFjaC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9hdHRyIGZyb20gXCIuL2F0dHIuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fc3R5bGUgZnJvbSBcIi4vc3R5bGUuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fcHJvcGVydHkgZnJvbSBcIi4vcHJvcGVydHkuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fY2xhc3NlZCBmcm9tIFwiLi9jbGFzc2VkLmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3RleHQgZnJvbSBcIi4vdGV4dC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9odG1sIGZyb20gXCIuL2h0bWwuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fcmFpc2UgZnJvbSBcIi4vcmFpc2UuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fbG93ZXIgZnJvbSBcIi4vbG93ZXIuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fYXBwZW5kIGZyb20gXCIuL2FwcGVuZC5qc1wiO1xuaW1wb3J0IHNlbGVjdGlvbl9pbnNlcnQgZnJvbSBcIi4vaW5zZXJ0LmpzXCI7XG5pbXBvcnQgc2VsZWN0aW9uX3JlbW92ZSBmcm9tIFwiLi9yZW1vdmUuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fY2xvbmUgZnJvbSBcIi4vY2xvbmUuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fZGF0dW0gZnJvbSBcIi4vZGF0dW0uanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fb24gZnJvbSBcIi4vb24uanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fZGlzcGF0Y2ggZnJvbSBcIi4vZGlzcGF0Y2guanNcIjtcbmltcG9ydCBzZWxlY3Rpb25faXRlcmF0b3IgZnJvbSBcIi4vaXRlcmF0b3IuanNcIjtcblxuZXhwb3J0IHZhciByb290ID0gW251bGxdO1xuXG5leHBvcnQgZnVuY3Rpb24gU2VsZWN0aW9uKGdyb3VwcywgcGFyZW50cykge1xuICB0aGlzLl9ncm91cHMgPSBncm91cHM7XG4gIHRoaXMuX3BhcmVudHMgPSBwYXJlbnRzO1xufVxuXG5mdW5jdGlvbiBzZWxlY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgU2VsZWN0aW9uKFtbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50XV0sIHJvb3QpO1xufVxuXG5mdW5jdGlvbiBzZWxlY3Rpb25fc2VsZWN0aW9uKCkge1xuICByZXR1cm4gdGhpcztcbn1cblxuU2VsZWN0aW9uLnByb3RvdHlwZSA9IHNlbGVjdGlvbi5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBTZWxlY3Rpb24sXG4gIHNlbGVjdDogc2VsZWN0aW9uX3NlbGVjdCxcbiAgc2VsZWN0QWxsOiBzZWxlY3Rpb25fc2VsZWN0QWxsLFxuICBzZWxlY3RDaGlsZDogc2VsZWN0aW9uX3NlbGVjdENoaWxkLFxuICBzZWxlY3RDaGlsZHJlbjogc2VsZWN0aW9uX3NlbGVjdENoaWxkcmVuLFxuICBmaWx0ZXI6IHNlbGVjdGlvbl9maWx0ZXIsXG4gIGRhdGE6IHNlbGVjdGlvbl9kYXRhLFxuICBlbnRlcjogc2VsZWN0aW9uX2VudGVyLFxuICBleGl0OiBzZWxlY3Rpb25fZXhpdCxcbiAgam9pbjogc2VsZWN0aW9uX2pvaW4sXG4gIG1lcmdlOiBzZWxlY3Rpb25fbWVyZ2UsXG4gIHNlbGVjdGlvbjogc2VsZWN0aW9uX3NlbGVjdGlvbixcbiAgb3JkZXI6IHNlbGVjdGlvbl9vcmRlcixcbiAgc29ydDogc2VsZWN0aW9uX3NvcnQsXG4gIGNhbGw6IHNlbGVjdGlvbl9jYWxsLFxuICBub2Rlczogc2VsZWN0aW9uX25vZGVzLFxuICBub2RlOiBzZWxlY3Rpb25fbm9kZSxcbiAgc2l6ZTogc2VsZWN0aW9uX3NpemUsXG4gIGVtcHR5OiBzZWxlY3Rpb25fZW1wdHksXG4gIGVhY2g6IHNlbGVjdGlvbl9lYWNoLFxuICBhdHRyOiBzZWxlY3Rpb25fYXR0cixcbiAgc3R5bGU6IHNlbGVjdGlvbl9zdHlsZSxcbiAgcHJvcGVydHk6IHNlbGVjdGlvbl9wcm9wZXJ0eSxcbiAgY2xhc3NlZDogc2VsZWN0aW9uX2NsYXNzZWQsXG4gIHRleHQ6IHNlbGVjdGlvbl90ZXh0LFxuICBodG1sOiBzZWxlY3Rpb25faHRtbCxcbiAgcmFpc2U6IHNlbGVjdGlvbl9yYWlzZSxcbiAgbG93ZXI6IHNlbGVjdGlvbl9sb3dlcixcbiAgYXBwZW5kOiBzZWxlY3Rpb25fYXBwZW5kLFxuICBpbnNlcnQ6IHNlbGVjdGlvbl9pbnNlcnQsXG4gIHJlbW92ZTogc2VsZWN0aW9uX3JlbW92ZSxcbiAgY2xvbmU6IHNlbGVjdGlvbl9jbG9uZSxcbiAgZGF0dW06IHNlbGVjdGlvbl9kYXR1bSxcbiAgb246IHNlbGVjdGlvbl9vbixcbiAgZGlzcGF0Y2g6IHNlbGVjdGlvbl9kaXNwYXRjaCxcbiAgW1N5bWJvbC5pdGVyYXRvcl06IHNlbGVjdGlvbl9pdGVyYXRvclxufTtcblxuZXhwb3J0IGRlZmF1bHQgc2VsZWN0aW9uO1xuIiwgImltcG9ydCB7U2VsZWN0aW9uLCByb290fSBmcm9tIFwiLi9zZWxlY3Rpb24vaW5kZXguanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgcmV0dXJuIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIlxuICAgICAgPyBuZXcgU2VsZWN0aW9uKFtbZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcildXSwgW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudF0pXG4gICAgICA6IG5ldyBTZWxlY3Rpb24oW1tzZWxlY3Rvcl1dLCByb290KTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihjb25zdHJ1Y3RvciwgZmFjdG9yeSwgcHJvdG90eXBlKSB7XG4gIGNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IGZhY3RvcnkucHJvdG90eXBlID0gcHJvdG90eXBlO1xuICBwcm90b3R5cGUuY29uc3RydWN0b3IgPSBjb25zdHJ1Y3Rvcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZChwYXJlbnQsIGRlZmluaXRpb24pIHtcbiAgdmFyIHByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSk7XG4gIGZvciAodmFyIGtleSBpbiBkZWZpbml0aW9uKSBwcm90b3R5cGVba2V5XSA9IGRlZmluaXRpb25ba2V5XTtcbiAgcmV0dXJuIHByb3RvdHlwZTtcbn1cbiIsICJpbXBvcnQgZGVmaW5lLCB7ZXh0ZW5kfSBmcm9tIFwiLi9kZWZpbmUuanNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIENvbG9yKCkge31cblxuZXhwb3J0IHZhciBkYXJrZXIgPSAwLjc7XG5leHBvcnQgdmFyIGJyaWdodGVyID0gMSAvIGRhcmtlcjtcblxudmFyIHJlSSA9IFwiXFxcXHMqKFsrLV0/XFxcXGQrKVxcXFxzKlwiLFxuICAgIHJlTiA9IFwiXFxcXHMqKFsrLV0/KD86XFxcXGQqXFxcXC4pP1xcXFxkKyg/OltlRV1bKy1dP1xcXFxkKyk/KVxcXFxzKlwiLFxuICAgIHJlUCA9IFwiXFxcXHMqKFsrLV0/KD86XFxcXGQqXFxcXC4pP1xcXFxkKyg/OltlRV1bKy1dP1xcXFxkKyk/KSVcXFxccypcIixcbiAgICByZUhleCA9IC9eIyhbMC05YS1mXXszLDh9KSQvLFxuICAgIHJlUmdiSW50ZWdlciA9IG5ldyBSZWdFeHAoYF5yZ2JcXFxcKCR7cmVJfSwke3JlSX0sJHtyZUl9XFxcXCkkYCksXG4gICAgcmVSZ2JQZXJjZW50ID0gbmV3IFJlZ0V4cChgXnJnYlxcXFwoJHtyZVB9LCR7cmVQfSwke3JlUH1cXFxcKSRgKSxcbiAgICByZVJnYmFJbnRlZ2VyID0gbmV3IFJlZ0V4cChgXnJnYmFcXFxcKCR7cmVJfSwke3JlSX0sJHtyZUl9LCR7cmVOfVxcXFwpJGApLFxuICAgIHJlUmdiYVBlcmNlbnQgPSBuZXcgUmVnRXhwKGBecmdiYVxcXFwoJHtyZVB9LCR7cmVQfSwke3JlUH0sJHtyZU59XFxcXCkkYCksXG4gICAgcmVIc2xQZXJjZW50ID0gbmV3IFJlZ0V4cChgXmhzbFxcXFwoJHtyZU59LCR7cmVQfSwke3JlUH1cXFxcKSRgKSxcbiAgICByZUhzbGFQZXJjZW50ID0gbmV3IFJlZ0V4cChgXmhzbGFcXFxcKCR7cmVOfSwke3JlUH0sJHtyZVB9LCR7cmVOfVxcXFwpJGApO1xuXG52YXIgbmFtZWQgPSB7XG4gIGFsaWNlYmx1ZTogMHhmMGY4ZmYsXG4gIGFudGlxdWV3aGl0ZTogMHhmYWViZDcsXG4gIGFxdWE6IDB4MDBmZmZmLFxuICBhcXVhbWFyaW5lOiAweDdmZmZkNCxcbiAgYXp1cmU6IDB4ZjBmZmZmLFxuICBiZWlnZTogMHhmNWY1ZGMsXG4gIGJpc3F1ZTogMHhmZmU0YzQsXG4gIGJsYWNrOiAweDAwMDAwMCxcbiAgYmxhbmNoZWRhbG1vbmQ6IDB4ZmZlYmNkLFxuICBibHVlOiAweDAwMDBmZixcbiAgYmx1ZXZpb2xldDogMHg4YTJiZTIsXG4gIGJyb3duOiAweGE1MmEyYSxcbiAgYnVybHl3b29kOiAweGRlYjg4NyxcbiAgY2FkZXRibHVlOiAweDVmOWVhMCxcbiAgY2hhcnRyZXVzZTogMHg3ZmZmMDAsXG4gIGNob2NvbGF0ZTogMHhkMjY5MWUsXG4gIGNvcmFsOiAweGZmN2Y1MCxcbiAgY29ybmZsb3dlcmJsdWU6IDB4NjQ5NWVkLFxuICBjb3Juc2lsazogMHhmZmY4ZGMsXG4gIGNyaW1zb246IDB4ZGMxNDNjLFxuICBjeWFuOiAweDAwZmZmZixcbiAgZGFya2JsdWU6IDB4MDAwMDhiLFxuICBkYXJrY3lhbjogMHgwMDhiOGIsXG4gIGRhcmtnb2xkZW5yb2Q6IDB4Yjg4NjBiLFxuICBkYXJrZ3JheTogMHhhOWE5YTksXG4gIGRhcmtncmVlbjogMHgwMDY0MDAsXG4gIGRhcmtncmV5OiAweGE5YTlhOSxcbiAgZGFya2toYWtpOiAweGJkYjc2YixcbiAgZGFya21hZ2VudGE6IDB4OGIwMDhiLFxuICBkYXJrb2xpdmVncmVlbjogMHg1NTZiMmYsXG4gIGRhcmtvcmFuZ2U6IDB4ZmY4YzAwLFxuICBkYXJrb3JjaGlkOiAweDk5MzJjYyxcbiAgZGFya3JlZDogMHg4YjAwMDAsXG4gIGRhcmtzYWxtb246IDB4ZTk5NjdhLFxuICBkYXJrc2VhZ3JlZW46IDB4OGZiYzhmLFxuICBkYXJrc2xhdGVibHVlOiAweDQ4M2Q4YixcbiAgZGFya3NsYXRlZ3JheTogMHgyZjRmNGYsXG4gIGRhcmtzbGF0ZWdyZXk6IDB4MmY0ZjRmLFxuICBkYXJrdHVycXVvaXNlOiAweDAwY2VkMSxcbiAgZGFya3Zpb2xldDogMHg5NDAwZDMsXG4gIGRlZXBwaW5rOiAweGZmMTQ5MyxcbiAgZGVlcHNreWJsdWU6IDB4MDBiZmZmLFxuICBkaW1ncmF5OiAweDY5Njk2OSxcbiAgZGltZ3JleTogMHg2OTY5NjksXG4gIGRvZGdlcmJsdWU6IDB4MWU5MGZmLFxuICBmaXJlYnJpY2s6IDB4YjIyMjIyLFxuICBmbG9yYWx3aGl0ZTogMHhmZmZhZjAsXG4gIGZvcmVzdGdyZWVuOiAweDIyOGIyMixcbiAgZnVjaHNpYTogMHhmZjAwZmYsXG4gIGdhaW5zYm9ybzogMHhkY2RjZGMsXG4gIGdob3N0d2hpdGU6IDB4ZjhmOGZmLFxuICBnb2xkOiAweGZmZDcwMCxcbiAgZ29sZGVucm9kOiAweGRhYTUyMCxcbiAgZ3JheTogMHg4MDgwODAsXG4gIGdyZWVuOiAweDAwODAwMCxcbiAgZ3JlZW55ZWxsb3c6IDB4YWRmZjJmLFxuICBncmV5OiAweDgwODA4MCxcbiAgaG9uZXlkZXc6IDB4ZjBmZmYwLFxuICBob3RwaW5rOiAweGZmNjliNCxcbiAgaW5kaWFucmVkOiAweGNkNWM1YyxcbiAgaW5kaWdvOiAweDRiMDA4MixcbiAgaXZvcnk6IDB4ZmZmZmYwLFxuICBraGFraTogMHhmMGU2OGMsXG4gIGxhdmVuZGVyOiAweGU2ZTZmYSxcbiAgbGF2ZW5kZXJibHVzaDogMHhmZmYwZjUsXG4gIGxhd25ncmVlbjogMHg3Y2ZjMDAsXG4gIGxlbW9uY2hpZmZvbjogMHhmZmZhY2QsXG4gIGxpZ2h0Ymx1ZTogMHhhZGQ4ZTYsXG4gIGxpZ2h0Y29yYWw6IDB4ZjA4MDgwLFxuICBsaWdodGN5YW46IDB4ZTBmZmZmLFxuICBsaWdodGdvbGRlbnJvZHllbGxvdzogMHhmYWZhZDIsXG4gIGxpZ2h0Z3JheTogMHhkM2QzZDMsXG4gIGxpZ2h0Z3JlZW46IDB4OTBlZTkwLFxuICBsaWdodGdyZXk6IDB4ZDNkM2QzLFxuICBsaWdodHBpbms6IDB4ZmZiNmMxLFxuICBsaWdodHNhbG1vbjogMHhmZmEwN2EsXG4gIGxpZ2h0c2VhZ3JlZW46IDB4MjBiMmFhLFxuICBsaWdodHNreWJsdWU6IDB4ODdjZWZhLFxuICBsaWdodHNsYXRlZ3JheTogMHg3Nzg4OTksXG4gIGxpZ2h0c2xhdGVncmV5OiAweDc3ODg5OSxcbiAgbGlnaHRzdGVlbGJsdWU6IDB4YjBjNGRlLFxuICBsaWdodHllbGxvdzogMHhmZmZmZTAsXG4gIGxpbWU6IDB4MDBmZjAwLFxuICBsaW1lZ3JlZW46IDB4MzJjZDMyLFxuICBsaW5lbjogMHhmYWYwZTYsXG4gIG1hZ2VudGE6IDB4ZmYwMGZmLFxuICBtYXJvb246IDB4ODAwMDAwLFxuICBtZWRpdW1hcXVhbWFyaW5lOiAweDY2Y2RhYSxcbiAgbWVkaXVtYmx1ZTogMHgwMDAwY2QsXG4gIG1lZGl1bW9yY2hpZDogMHhiYTU1ZDMsXG4gIG1lZGl1bXB1cnBsZTogMHg5MzcwZGIsXG4gIG1lZGl1bXNlYWdyZWVuOiAweDNjYjM3MSxcbiAgbWVkaXVtc2xhdGVibHVlOiAweDdiNjhlZSxcbiAgbWVkaXVtc3ByaW5nZ3JlZW46IDB4MDBmYTlhLFxuICBtZWRpdW10dXJxdW9pc2U6IDB4NDhkMWNjLFxuICBtZWRpdW12aW9sZXRyZWQ6IDB4YzcxNTg1LFxuICBtaWRuaWdodGJsdWU6IDB4MTkxOTcwLFxuICBtaW50Y3JlYW06IDB4ZjVmZmZhLFxuICBtaXN0eXJvc2U6IDB4ZmZlNGUxLFxuICBtb2NjYXNpbjogMHhmZmU0YjUsXG4gIG5hdmFqb3doaXRlOiAweGZmZGVhZCxcbiAgbmF2eTogMHgwMDAwODAsXG4gIG9sZGxhY2U6IDB4ZmRmNWU2LFxuICBvbGl2ZTogMHg4MDgwMDAsXG4gIG9saXZlZHJhYjogMHg2YjhlMjMsXG4gIG9yYW5nZTogMHhmZmE1MDAsXG4gIG9yYW5nZXJlZDogMHhmZjQ1MDAsXG4gIG9yY2hpZDogMHhkYTcwZDYsXG4gIHBhbGVnb2xkZW5yb2Q6IDB4ZWVlOGFhLFxuICBwYWxlZ3JlZW46IDB4OThmYjk4LFxuICBwYWxldHVycXVvaXNlOiAweGFmZWVlZSxcbiAgcGFsZXZpb2xldHJlZDogMHhkYjcwOTMsXG4gIHBhcGF5YXdoaXA6IDB4ZmZlZmQ1LFxuICBwZWFjaHB1ZmY6IDB4ZmZkYWI5LFxuICBwZXJ1OiAweGNkODUzZixcbiAgcGluazogMHhmZmMwY2IsXG4gIHBsdW06IDB4ZGRhMGRkLFxuICBwb3dkZXJibHVlOiAweGIwZTBlNixcbiAgcHVycGxlOiAweDgwMDA4MCxcbiAgcmViZWNjYXB1cnBsZTogMHg2NjMzOTksXG4gIHJlZDogMHhmZjAwMDAsXG4gIHJvc3licm93bjogMHhiYzhmOGYsXG4gIHJveWFsYmx1ZTogMHg0MTY5ZTEsXG4gIHNhZGRsZWJyb3duOiAweDhiNDUxMyxcbiAgc2FsbW9uOiAweGZhODA3MixcbiAgc2FuZHlicm93bjogMHhmNGE0NjAsXG4gIHNlYWdyZWVuOiAweDJlOGI1NyxcbiAgc2Vhc2hlbGw6IDB4ZmZmNWVlLFxuICBzaWVubmE6IDB4YTA1MjJkLFxuICBzaWx2ZXI6IDB4YzBjMGMwLFxuICBza3libHVlOiAweDg3Y2VlYixcbiAgc2xhdGVibHVlOiAweDZhNWFjZCxcbiAgc2xhdGVncmF5OiAweDcwODA5MCxcbiAgc2xhdGVncmV5OiAweDcwODA5MCxcbiAgc25vdzogMHhmZmZhZmEsXG4gIHNwcmluZ2dyZWVuOiAweDAwZmY3ZixcbiAgc3RlZWxibHVlOiAweDQ2ODJiNCxcbiAgdGFuOiAweGQyYjQ4YyxcbiAgdGVhbDogMHgwMDgwODAsXG4gIHRoaXN0bGU6IDB4ZDhiZmQ4LFxuICB0b21hdG86IDB4ZmY2MzQ3LFxuICB0dXJxdW9pc2U6IDB4NDBlMGQwLFxuICB2aW9sZXQ6IDB4ZWU4MmVlLFxuICB3aGVhdDogMHhmNWRlYjMsXG4gIHdoaXRlOiAweGZmZmZmZixcbiAgd2hpdGVzbW9rZTogMHhmNWY1ZjUsXG4gIHllbGxvdzogMHhmZmZmMDAsXG4gIHllbGxvd2dyZWVuOiAweDlhY2QzMlxufTtcblxuZGVmaW5lKENvbG9yLCBjb2xvciwge1xuICBjb3B5KGNoYW5uZWxzKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IHRoaXMuY29uc3RydWN0b3IsIHRoaXMsIGNoYW5uZWxzKTtcbiAgfSxcbiAgZGlzcGxheWFibGUoKSB7XG4gICAgcmV0dXJuIHRoaXMucmdiKCkuZGlzcGxheWFibGUoKTtcbiAgfSxcbiAgaGV4OiBjb2xvcl9mb3JtYXRIZXgsIC8vIERlcHJlY2F0ZWQhIFVzZSBjb2xvci5mb3JtYXRIZXguXG4gIGZvcm1hdEhleDogY29sb3JfZm9ybWF0SGV4LFxuICBmb3JtYXRIZXg4OiBjb2xvcl9mb3JtYXRIZXg4LFxuICBmb3JtYXRIc2w6IGNvbG9yX2Zvcm1hdEhzbCxcbiAgZm9ybWF0UmdiOiBjb2xvcl9mb3JtYXRSZ2IsXG4gIHRvU3RyaW5nOiBjb2xvcl9mb3JtYXRSZ2Jcbn0pO1xuXG5mdW5jdGlvbiBjb2xvcl9mb3JtYXRIZXgoKSB7XG4gIHJldHVybiB0aGlzLnJnYigpLmZvcm1hdEhleCgpO1xufVxuXG5mdW5jdGlvbiBjb2xvcl9mb3JtYXRIZXg4KCkge1xuICByZXR1cm4gdGhpcy5yZ2IoKS5mb3JtYXRIZXg4KCk7XG59XG5cbmZ1bmN0aW9uIGNvbG9yX2Zvcm1hdEhzbCgpIHtcbiAgcmV0dXJuIGhzbENvbnZlcnQodGhpcykuZm9ybWF0SHNsKCk7XG59XG5cbmZ1bmN0aW9uIGNvbG9yX2Zvcm1hdFJnYigpIHtcbiAgcmV0dXJuIHRoaXMucmdiKCkuZm9ybWF0UmdiKCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbG9yKGZvcm1hdCkge1xuICB2YXIgbSwgbDtcbiAgZm9ybWF0ID0gKGZvcm1hdCArIFwiXCIpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gKG0gPSByZUhleC5leGVjKGZvcm1hdCkpID8gKGwgPSBtWzFdLmxlbmd0aCwgbSA9IHBhcnNlSW50KG1bMV0sIDE2KSwgbCA9PT0gNiA/IHJnYm4obSkgLy8gI2ZmMDAwMFxuICAgICAgOiBsID09PSAzID8gbmV3IFJnYigobSA+PiA4ICYgMHhmKSB8IChtID4+IDQgJiAweGYwKSwgKG0gPj4gNCAmIDB4ZikgfCAobSAmIDB4ZjApLCAoKG0gJiAweGYpIDw8IDQpIHwgKG0gJiAweGYpLCAxKSAvLyAjZjAwXG4gICAgICA6IGwgPT09IDggPyByZ2JhKG0gPj4gMjQgJiAweGZmLCBtID4+IDE2ICYgMHhmZiwgbSA+PiA4ICYgMHhmZiwgKG0gJiAweGZmKSAvIDB4ZmYpIC8vICNmZjAwMDAwMFxuICAgICAgOiBsID09PSA0ID8gcmdiYSgobSA+PiAxMiAmIDB4ZikgfCAobSA+PiA4ICYgMHhmMCksIChtID4+IDggJiAweGYpIHwgKG0gPj4gNCAmIDB4ZjApLCAobSA+PiA0ICYgMHhmKSB8IChtICYgMHhmMCksICgoKG0gJiAweGYpIDw8IDQpIHwgKG0gJiAweGYpKSAvIDB4ZmYpIC8vICNmMDAwXG4gICAgICA6IG51bGwpIC8vIGludmFsaWQgaGV4XG4gICAgICA6IChtID0gcmVSZ2JJbnRlZ2VyLmV4ZWMoZm9ybWF0KSkgPyBuZXcgUmdiKG1bMV0sIG1bMl0sIG1bM10sIDEpIC8vIHJnYigyNTUsIDAsIDApXG4gICAgICA6IChtID0gcmVSZ2JQZXJjZW50LmV4ZWMoZm9ybWF0KSkgPyBuZXcgUmdiKG1bMV0gKiAyNTUgLyAxMDAsIG1bMl0gKiAyNTUgLyAxMDAsIG1bM10gKiAyNTUgLyAxMDAsIDEpIC8vIHJnYigxMDAlLCAwJSwgMCUpXG4gICAgICA6IChtID0gcmVSZ2JhSW50ZWdlci5leGVjKGZvcm1hdCkpID8gcmdiYShtWzFdLCBtWzJdLCBtWzNdLCBtWzRdKSAvLyByZ2JhKDI1NSwgMCwgMCwgMSlcbiAgICAgIDogKG0gPSByZVJnYmFQZXJjZW50LmV4ZWMoZm9ybWF0KSkgPyByZ2JhKG1bMV0gKiAyNTUgLyAxMDAsIG1bMl0gKiAyNTUgLyAxMDAsIG1bM10gKiAyNTUgLyAxMDAsIG1bNF0pIC8vIHJnYigxMDAlLCAwJSwgMCUsIDEpXG4gICAgICA6IChtID0gcmVIc2xQZXJjZW50LmV4ZWMoZm9ybWF0KSkgPyBoc2xhKG1bMV0sIG1bMl0gLyAxMDAsIG1bM10gLyAxMDAsIDEpIC8vIGhzbCgxMjAsIDUwJSwgNTAlKVxuICAgICAgOiAobSA9IHJlSHNsYVBlcmNlbnQuZXhlYyhmb3JtYXQpKSA/IGhzbGEobVsxXSwgbVsyXSAvIDEwMCwgbVszXSAvIDEwMCwgbVs0XSkgLy8gaHNsYSgxMjAsIDUwJSwgNTAlLCAxKVxuICAgICAgOiBuYW1lZC5oYXNPd25Qcm9wZXJ0eShmb3JtYXQpID8gcmdibihuYW1lZFtmb3JtYXRdKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXByb3RvdHlwZS1idWlsdGluc1xuICAgICAgOiBmb3JtYXQgPT09IFwidHJhbnNwYXJlbnRcIiA/IG5ldyBSZ2IoTmFOLCBOYU4sIE5hTiwgMClcbiAgICAgIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gcmdibihuKSB7XG4gIHJldHVybiBuZXcgUmdiKG4gPj4gMTYgJiAweGZmLCBuID4+IDggJiAweGZmLCBuICYgMHhmZiwgMSk7XG59XG5cbmZ1bmN0aW9uIHJnYmEociwgZywgYiwgYSkge1xuICBpZiAoYSA8PSAwKSByID0gZyA9IGIgPSBOYU47XG4gIHJldHVybiBuZXcgUmdiKHIsIGcsIGIsIGEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmdiQ29udmVydChvKSB7XG4gIGlmICghKG8gaW5zdGFuY2VvZiBDb2xvcikpIG8gPSBjb2xvcihvKTtcbiAgaWYgKCFvKSByZXR1cm4gbmV3IFJnYjtcbiAgbyA9IG8ucmdiKCk7XG4gIHJldHVybiBuZXcgUmdiKG8uciwgby5nLCBvLmIsIG8ub3BhY2l0eSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZ2IociwgZywgYiwgb3BhY2l0eSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IHJnYkNvbnZlcnQocikgOiBuZXcgUmdiKHIsIGcsIGIsIG9wYWNpdHkgPT0gbnVsbCA/IDEgOiBvcGFjaXR5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFJnYihyLCBnLCBiLCBvcGFjaXR5KSB7XG4gIHRoaXMuciA9ICtyO1xuICB0aGlzLmcgPSArZztcbiAgdGhpcy5iID0gK2I7XG4gIHRoaXMub3BhY2l0eSA9ICtvcGFjaXR5O1xufVxuXG5kZWZpbmUoUmdiLCByZ2IsIGV4dGVuZChDb2xvciwge1xuICBicmlnaHRlcihrKSB7XG4gICAgayA9IGsgPT0gbnVsbCA/IGJyaWdodGVyIDogTWF0aC5wb3coYnJpZ2h0ZXIsIGspO1xuICAgIHJldHVybiBuZXcgUmdiKHRoaXMuciAqIGssIHRoaXMuZyAqIGssIHRoaXMuYiAqIGssIHRoaXMub3BhY2l0eSk7XG4gIH0sXG4gIGRhcmtlcihrKSB7XG4gICAgayA9IGsgPT0gbnVsbCA/IGRhcmtlciA6IE1hdGgucG93KGRhcmtlciwgayk7XG4gICAgcmV0dXJuIG5ldyBSZ2IodGhpcy5yICogaywgdGhpcy5nICogaywgdGhpcy5iICogaywgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgcmdiKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9LFxuICBjbGFtcCgpIHtcbiAgICByZXR1cm4gbmV3IFJnYihjbGFtcGkodGhpcy5yKSwgY2xhbXBpKHRoaXMuZyksIGNsYW1waSh0aGlzLmIpLCBjbGFtcGEodGhpcy5vcGFjaXR5KSk7XG4gIH0sXG4gIGRpc3BsYXlhYmxlKCkge1xuICAgIHJldHVybiAoLTAuNSA8PSB0aGlzLnIgJiYgdGhpcy5yIDwgMjU1LjUpXG4gICAgICAgICYmICgtMC41IDw9IHRoaXMuZyAmJiB0aGlzLmcgPCAyNTUuNSlcbiAgICAgICAgJiYgKC0wLjUgPD0gdGhpcy5iICYmIHRoaXMuYiA8IDI1NS41KVxuICAgICAgICAmJiAoMCA8PSB0aGlzLm9wYWNpdHkgJiYgdGhpcy5vcGFjaXR5IDw9IDEpO1xuICB9LFxuICBoZXg6IHJnYl9mb3JtYXRIZXgsIC8vIERlcHJlY2F0ZWQhIFVzZSBjb2xvci5mb3JtYXRIZXguXG4gIGZvcm1hdEhleDogcmdiX2Zvcm1hdEhleCxcbiAgZm9ybWF0SGV4ODogcmdiX2Zvcm1hdEhleDgsXG4gIGZvcm1hdFJnYjogcmdiX2Zvcm1hdFJnYixcbiAgdG9TdHJpbmc6IHJnYl9mb3JtYXRSZ2Jcbn0pKTtcblxuZnVuY3Rpb24gcmdiX2Zvcm1hdEhleCgpIHtcbiAgcmV0dXJuIGAjJHtoZXgodGhpcy5yKX0ke2hleCh0aGlzLmcpfSR7aGV4KHRoaXMuYil9YDtcbn1cblxuZnVuY3Rpb24gcmdiX2Zvcm1hdEhleDgoKSB7XG4gIHJldHVybiBgIyR7aGV4KHRoaXMucil9JHtoZXgodGhpcy5nKX0ke2hleCh0aGlzLmIpfSR7aGV4KChpc05hTih0aGlzLm9wYWNpdHkpID8gMSA6IHRoaXMub3BhY2l0eSkgKiAyNTUpfWA7XG59XG5cbmZ1bmN0aW9uIHJnYl9mb3JtYXRSZ2IoKSB7XG4gIGNvbnN0IGEgPSBjbGFtcGEodGhpcy5vcGFjaXR5KTtcbiAgcmV0dXJuIGAke2EgPT09IDEgPyBcInJnYihcIiA6IFwicmdiYShcIn0ke2NsYW1waSh0aGlzLnIpfSwgJHtjbGFtcGkodGhpcy5nKX0sICR7Y2xhbXBpKHRoaXMuYil9JHthID09PSAxID8gXCIpXCIgOiBgLCAke2F9KWB9YDtcbn1cblxuZnVuY3Rpb24gY2xhbXBhKG9wYWNpdHkpIHtcbiAgcmV0dXJuIGlzTmFOKG9wYWNpdHkpID8gMSA6IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIG9wYWNpdHkpKTtcbn1cblxuZnVuY3Rpb24gY2xhbXBpKHZhbHVlKSB7XG4gIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbigyNTUsIE1hdGgucm91bmQodmFsdWUpIHx8IDApKTtcbn1cblxuZnVuY3Rpb24gaGV4KHZhbHVlKSB7XG4gIHZhbHVlID0gY2xhbXBpKHZhbHVlKTtcbiAgcmV0dXJuICh2YWx1ZSA8IDE2ID8gXCIwXCIgOiBcIlwiKSArIHZhbHVlLnRvU3RyaW5nKDE2KTtcbn1cblxuZnVuY3Rpb24gaHNsYShoLCBzLCBsLCBhKSB7XG4gIGlmIChhIDw9IDApIGggPSBzID0gbCA9IE5hTjtcbiAgZWxzZSBpZiAobCA8PSAwIHx8IGwgPj0gMSkgaCA9IHMgPSBOYU47XG4gIGVsc2UgaWYgKHMgPD0gMCkgaCA9IE5hTjtcbiAgcmV0dXJuIG5ldyBIc2woaCwgcywgbCwgYSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoc2xDb252ZXJ0KG8pIHtcbiAgaWYgKG8gaW5zdGFuY2VvZiBIc2wpIHJldHVybiBuZXcgSHNsKG8uaCwgby5zLCBvLmwsIG8ub3BhY2l0eSk7XG4gIGlmICghKG8gaW5zdGFuY2VvZiBDb2xvcikpIG8gPSBjb2xvcihvKTtcbiAgaWYgKCFvKSByZXR1cm4gbmV3IEhzbDtcbiAgaWYgKG8gaW5zdGFuY2VvZiBIc2wpIHJldHVybiBvO1xuICBvID0gby5yZ2IoKTtcbiAgdmFyIHIgPSBvLnIgLyAyNTUsXG4gICAgICBnID0gby5nIC8gMjU1LFxuICAgICAgYiA9IG8uYiAvIDI1NSxcbiAgICAgIG1pbiA9IE1hdGgubWluKHIsIGcsIGIpLFxuICAgICAgbWF4ID0gTWF0aC5tYXgociwgZywgYiksXG4gICAgICBoID0gTmFOLFxuICAgICAgcyA9IG1heCAtIG1pbixcbiAgICAgIGwgPSAobWF4ICsgbWluKSAvIDI7XG4gIGlmIChzKSB7XG4gICAgaWYgKHIgPT09IG1heCkgaCA9IChnIC0gYikgLyBzICsgKGcgPCBiKSAqIDY7XG4gICAgZWxzZSBpZiAoZyA9PT0gbWF4KSBoID0gKGIgLSByKSAvIHMgKyAyO1xuICAgIGVsc2UgaCA9IChyIC0gZykgLyBzICsgNDtcbiAgICBzIC89IGwgPCAwLjUgPyBtYXggKyBtaW4gOiAyIC0gbWF4IC0gbWluO1xuICAgIGggKj0gNjA7XG4gIH0gZWxzZSB7XG4gICAgcyA9IGwgPiAwICYmIGwgPCAxID8gMCA6IGg7XG4gIH1cbiAgcmV0dXJuIG5ldyBIc2woaCwgcywgbCwgby5vcGFjaXR5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhzbChoLCBzLCBsLCBvcGFjaXR5KSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gaHNsQ29udmVydChoKSA6IG5ldyBIc2woaCwgcywgbCwgb3BhY2l0eSA9PSBudWxsID8gMSA6IG9wYWNpdHkpO1xufVxuXG5mdW5jdGlvbiBIc2woaCwgcywgbCwgb3BhY2l0eSkge1xuICB0aGlzLmggPSAraDtcbiAgdGhpcy5zID0gK3M7XG4gIHRoaXMubCA9ICtsO1xuICB0aGlzLm9wYWNpdHkgPSArb3BhY2l0eTtcbn1cblxuZGVmaW5lKEhzbCwgaHNsLCBleHRlbmQoQ29sb3IsIHtcbiAgYnJpZ2h0ZXIoaykge1xuICAgIGsgPSBrID09IG51bGwgPyBicmlnaHRlciA6IE1hdGgucG93KGJyaWdodGVyLCBrKTtcbiAgICByZXR1cm4gbmV3IEhzbCh0aGlzLmgsIHRoaXMucywgdGhpcy5sICogaywgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgZGFya2VyKGspIHtcbiAgICBrID0gayA9PSBudWxsID8gZGFya2VyIDogTWF0aC5wb3coZGFya2VyLCBrKTtcbiAgICByZXR1cm4gbmV3IEhzbCh0aGlzLmgsIHRoaXMucywgdGhpcy5sICogaywgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgcmdiKCkge1xuICAgIHZhciBoID0gdGhpcy5oICUgMzYwICsgKHRoaXMuaCA8IDApICogMzYwLFxuICAgICAgICBzID0gaXNOYU4oaCkgfHwgaXNOYU4odGhpcy5zKSA/IDAgOiB0aGlzLnMsXG4gICAgICAgIGwgPSB0aGlzLmwsXG4gICAgICAgIG0yID0gbCArIChsIDwgMC41ID8gbCA6IDEgLSBsKSAqIHMsXG4gICAgICAgIG0xID0gMiAqIGwgLSBtMjtcbiAgICByZXR1cm4gbmV3IFJnYihcbiAgICAgIGhzbDJyZ2IoaCA+PSAyNDAgPyBoIC0gMjQwIDogaCArIDEyMCwgbTEsIG0yKSxcbiAgICAgIGhzbDJyZ2IoaCwgbTEsIG0yKSxcbiAgICAgIGhzbDJyZ2IoaCA8IDEyMCA/IGggKyAyNDAgOiBoIC0gMTIwLCBtMSwgbTIpLFxuICAgICAgdGhpcy5vcGFjaXR5XG4gICAgKTtcbiAgfSxcbiAgY2xhbXAoKSB7XG4gICAgcmV0dXJuIG5ldyBIc2woY2xhbXBoKHRoaXMuaCksIGNsYW1wdCh0aGlzLnMpLCBjbGFtcHQodGhpcy5sKSwgY2xhbXBhKHRoaXMub3BhY2l0eSkpO1xuICB9LFxuICBkaXNwbGF5YWJsZSgpIHtcbiAgICByZXR1cm4gKDAgPD0gdGhpcy5zICYmIHRoaXMucyA8PSAxIHx8IGlzTmFOKHRoaXMucykpXG4gICAgICAgICYmICgwIDw9IHRoaXMubCAmJiB0aGlzLmwgPD0gMSlcbiAgICAgICAgJiYgKDAgPD0gdGhpcy5vcGFjaXR5ICYmIHRoaXMub3BhY2l0eSA8PSAxKTtcbiAgfSxcbiAgZm9ybWF0SHNsKCkge1xuICAgIGNvbnN0IGEgPSBjbGFtcGEodGhpcy5vcGFjaXR5KTtcbiAgICByZXR1cm4gYCR7YSA9PT0gMSA/IFwiaHNsKFwiIDogXCJoc2xhKFwifSR7Y2xhbXBoKHRoaXMuaCl9LCAke2NsYW1wdCh0aGlzLnMpICogMTAwfSUsICR7Y2xhbXB0KHRoaXMubCkgKiAxMDB9JSR7YSA9PT0gMSA/IFwiKVwiIDogYCwgJHthfSlgfWA7XG4gIH1cbn0pKTtcblxuZnVuY3Rpb24gY2xhbXBoKHZhbHVlKSB7XG4gIHZhbHVlID0gKHZhbHVlIHx8IDApICUgMzYwO1xuICByZXR1cm4gdmFsdWUgPCAwID8gdmFsdWUgKyAzNjAgOiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gY2xhbXB0KHZhbHVlKSB7XG4gIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB2YWx1ZSB8fCAwKSk7XG59XG5cbi8qIEZyb20gRnZEIDEzLjM3LCBDU1MgQ29sb3IgTW9kdWxlIExldmVsIDMgKi9cbmZ1bmN0aW9uIGhzbDJyZ2IoaCwgbTEsIG0yKSB7XG4gIHJldHVybiAoaCA8IDYwID8gbTEgKyAobTIgLSBtMSkgKiBoIC8gNjBcbiAgICAgIDogaCA8IDE4MCA/IG0yXG4gICAgICA6IGggPCAyNDAgPyBtMSArIChtMiAtIG0xKSAqICgyNDAgLSBoKSAvIDYwXG4gICAgICA6IG0xKSAqIDI1NTtcbn1cbiIsICJleHBvcnQgZnVuY3Rpb24gYmFzaXModDEsIHYwLCB2MSwgdjIsIHYzKSB7XG4gIHZhciB0MiA9IHQxICogdDEsIHQzID0gdDIgKiB0MTtcbiAgcmV0dXJuICgoMSAtIDMgKiB0MSArIDMgKiB0MiAtIHQzKSAqIHYwXG4gICAgICArICg0IC0gNiAqIHQyICsgMyAqIHQzKSAqIHYxXG4gICAgICArICgxICsgMyAqIHQxICsgMyAqIHQyIC0gMyAqIHQzKSAqIHYyXG4gICAgICArIHQzICogdjMpIC8gNjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWVzKSB7XG4gIHZhciBuID0gdmFsdWVzLmxlbmd0aCAtIDE7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgdmFyIGkgPSB0IDw9IDAgPyAodCA9IDApIDogdCA+PSAxID8gKHQgPSAxLCBuIC0gMSkgOiBNYXRoLmZsb29yKHQgKiBuKSxcbiAgICAgICAgdjEgPSB2YWx1ZXNbaV0sXG4gICAgICAgIHYyID0gdmFsdWVzW2kgKyAxXSxcbiAgICAgICAgdjAgPSBpID4gMCA/IHZhbHVlc1tpIC0gMV0gOiAyICogdjEgLSB2MixcbiAgICAgICAgdjMgPSBpIDwgbiAtIDEgPyB2YWx1ZXNbaSArIDJdIDogMiAqIHYyIC0gdjE7XG4gICAgcmV0dXJuIGJhc2lzKCh0IC0gaSAvIG4pICogbiwgdjAsIHYxLCB2MiwgdjMpO1xuICB9O1xufVxuIiwgImltcG9ydCB7YmFzaXN9IGZyb20gXCIuL2Jhc2lzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlcykge1xuICB2YXIgbiA9IHZhbHVlcy5sZW5ndGg7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgdmFyIGkgPSBNYXRoLmZsb29yKCgodCAlPSAxKSA8IDAgPyArK3QgOiB0KSAqIG4pLFxuICAgICAgICB2MCA9IHZhbHVlc1soaSArIG4gLSAxKSAlIG5dLFxuICAgICAgICB2MSA9IHZhbHVlc1tpICUgbl0sXG4gICAgICAgIHYyID0gdmFsdWVzWyhpICsgMSkgJSBuXSxcbiAgICAgICAgdjMgPSB2YWx1ZXNbKGkgKyAyKSAlIG5dO1xuICAgIHJldHVybiBiYXNpcygodCAtIGkgLyBuKSAqIG4sIHYwLCB2MSwgdjIsIHYzKTtcbiAgfTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCB4ID0+ICgpID0+IHg7XG4iLCAiaW1wb3J0IGNvbnN0YW50IGZyb20gXCIuL2NvbnN0YW50LmpzXCI7XG5cbmZ1bmN0aW9uIGxpbmVhcihhLCBkKSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIGEgKyB0ICogZDtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZXhwb25lbnRpYWwoYSwgYiwgeSkge1xuICByZXR1cm4gYSA9IE1hdGgucG93KGEsIHkpLCBiID0gTWF0aC5wb3coYiwgeSkgLSBhLCB5ID0gMSAvIHksIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gTWF0aC5wb3coYSArIHQgKiBiLCB5KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGh1ZShhLCBiKSB7XG4gIHZhciBkID0gYiAtIGE7XG4gIHJldHVybiBkID8gbGluZWFyKGEsIGQgPiAxODAgfHwgZCA8IC0xODAgPyBkIC0gMzYwICogTWF0aC5yb3VuZChkIC8gMzYwKSA6IGQpIDogY29uc3RhbnQoaXNOYU4oYSkgPyBiIDogYSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnYW1tYSh5KSB7XG4gIHJldHVybiAoeSA9ICt5KSA9PT0gMSA/IG5vZ2FtbWEgOiBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIGIgLSBhID8gZXhwb25lbnRpYWwoYSwgYiwgeSkgOiBjb25zdGFudChpc05hTihhKSA/IGIgOiBhKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbm9nYW1tYShhLCBiKSB7XG4gIHZhciBkID0gYiAtIGE7XG4gIHJldHVybiBkID8gbGluZWFyKGEsIGQpIDogY29uc3RhbnQoaXNOYU4oYSkgPyBiIDogYSk7XG59XG4iLCAiaW1wb3J0IHtyZ2IgYXMgY29sb3JSZ2J9IGZyb20gXCJkMy1jb2xvclwiO1xuaW1wb3J0IGJhc2lzIGZyb20gXCIuL2Jhc2lzLmpzXCI7XG5pbXBvcnQgYmFzaXNDbG9zZWQgZnJvbSBcIi4vYmFzaXNDbG9zZWQuanNcIjtcbmltcG9ydCBub2dhbW1hLCB7Z2FtbWF9IGZyb20gXCIuL2NvbG9yLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiByZ2JHYW1tYSh5KSB7XG4gIHZhciBjb2xvciA9IGdhbW1hKHkpO1xuXG4gIGZ1bmN0aW9uIHJnYihzdGFydCwgZW5kKSB7XG4gICAgdmFyIHIgPSBjb2xvcigoc3RhcnQgPSBjb2xvclJnYihzdGFydCkpLnIsIChlbmQgPSBjb2xvclJnYihlbmQpKS5yKSxcbiAgICAgICAgZyA9IGNvbG9yKHN0YXJ0LmcsIGVuZC5nKSxcbiAgICAgICAgYiA9IGNvbG9yKHN0YXJ0LmIsIGVuZC5iKSxcbiAgICAgICAgb3BhY2l0eSA9IG5vZ2FtbWEoc3RhcnQub3BhY2l0eSwgZW5kLm9wYWNpdHkpO1xuICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICBzdGFydC5yID0gcih0KTtcbiAgICAgIHN0YXJ0LmcgPSBnKHQpO1xuICAgICAgc3RhcnQuYiA9IGIodCk7XG4gICAgICBzdGFydC5vcGFjaXR5ID0gb3BhY2l0eSh0KTtcbiAgICAgIHJldHVybiBzdGFydCArIFwiXCI7XG4gICAgfTtcbiAgfVxuXG4gIHJnYi5nYW1tYSA9IHJnYkdhbW1hO1xuXG4gIHJldHVybiByZ2I7XG59KSgxKTtcblxuZnVuY3Rpb24gcmdiU3BsaW5lKHNwbGluZSkge1xuICByZXR1cm4gZnVuY3Rpb24oY29sb3JzKSB7XG4gICAgdmFyIG4gPSBjb2xvcnMubGVuZ3RoLFxuICAgICAgICByID0gbmV3IEFycmF5KG4pLFxuICAgICAgICBnID0gbmV3IEFycmF5KG4pLFxuICAgICAgICBiID0gbmV3IEFycmF5KG4pLFxuICAgICAgICBpLCBjb2xvcjtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBjb2xvciA9IGNvbG9yUmdiKGNvbG9yc1tpXSk7XG4gICAgICByW2ldID0gY29sb3IuciB8fCAwO1xuICAgICAgZ1tpXSA9IGNvbG9yLmcgfHwgMDtcbiAgICAgIGJbaV0gPSBjb2xvci5iIHx8IDA7XG4gICAgfVxuICAgIHIgPSBzcGxpbmUocik7XG4gICAgZyA9IHNwbGluZShnKTtcbiAgICBiID0gc3BsaW5lKGIpO1xuICAgIGNvbG9yLm9wYWNpdHkgPSAxO1xuICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICBjb2xvci5yID0gcih0KTtcbiAgICAgIGNvbG9yLmcgPSBnKHQpO1xuICAgICAgY29sb3IuYiA9IGIodCk7XG4gICAgICByZXR1cm4gY29sb3IgKyBcIlwiO1xuICAgIH07XG4gIH07XG59XG5cbmV4cG9ydCB2YXIgcmdiQmFzaXMgPSByZ2JTcGxpbmUoYmFzaXMpO1xuZXhwb3J0IHZhciByZ2JCYXNpc0Nsb3NlZCA9IHJnYlNwbGluZShiYXNpc0Nsb3NlZCk7XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICBpZiAoIWIpIGIgPSBbXTtcbiAgdmFyIG4gPSBhID8gTWF0aC5taW4oYi5sZW5ndGgsIGEubGVuZ3RoKSA6IDAsXG4gICAgICBjID0gYi5zbGljZSgpLFxuICAgICAgaTtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSBjW2ldID0gYVtpXSAqICgxIC0gdCkgKyBiW2ldICogdDtcbiAgICByZXR1cm4gYztcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyQXJyYXkoeCkge1xuICByZXR1cm4gQXJyYXlCdWZmZXIuaXNWaWV3KHgpICYmICEoeCBpbnN0YW5jZW9mIERhdGFWaWV3KTtcbn1cbiIsICJpbXBvcnQgdmFsdWUgZnJvbSBcIi4vdmFsdWUuanNcIjtcbmltcG9ydCBudW1iZXJBcnJheSwge2lzTnVtYmVyQXJyYXl9IGZyb20gXCIuL251bWJlckFycmF5LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgcmV0dXJuIChpc051bWJlckFycmF5KGIpID8gbnVtYmVyQXJyYXkgOiBnZW5lcmljQXJyYXkpKGEsIGIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJpY0FycmF5KGEsIGIpIHtcbiAgdmFyIG5iID0gYiA/IGIubGVuZ3RoIDogMCxcbiAgICAgIG5hID0gYSA/IE1hdGgubWluKG5iLCBhLmxlbmd0aCkgOiAwLFxuICAgICAgeCA9IG5ldyBBcnJheShuYSksXG4gICAgICBjID0gbmV3IEFycmF5KG5iKSxcbiAgICAgIGk7XG5cbiAgZm9yIChpID0gMDsgaSA8IG5hOyArK2kpIHhbaV0gPSB2YWx1ZShhW2ldLCBiW2ldKTtcbiAgZm9yICg7IGkgPCBuYjsgKytpKSBjW2ldID0gYltpXTtcblxuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIGZvciAoaSA9IDA7IGkgPCBuYTsgKytpKSBjW2ldID0geFtpXSh0KTtcbiAgICByZXR1cm4gYztcbiAgfTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihhLCBiKSB7XG4gIHZhciBkID0gbmV3IERhdGU7XG4gIHJldHVybiBhID0gK2EsIGIgPSArYiwgZnVuY3Rpb24odCkge1xuICAgIHJldHVybiBkLnNldFRpbWUoYSAqICgxIC0gdCkgKyBiICogdCksIGQ7XG4gIH07XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICByZXR1cm4gYSA9ICthLCBiID0gK2IsIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gYSAqICgxIC0gdCkgKyBiICogdDtcbiAgfTtcbn1cbiIsICJpbXBvcnQgdmFsdWUgZnJvbSBcIi4vdmFsdWUuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgaSA9IHt9LFxuICAgICAgYyA9IHt9LFxuICAgICAgaztcblxuICBpZiAoYSA9PT0gbnVsbCB8fCB0eXBlb2YgYSAhPT0gXCJvYmplY3RcIikgYSA9IHt9O1xuICBpZiAoYiA9PT0gbnVsbCB8fCB0eXBlb2YgYiAhPT0gXCJvYmplY3RcIikgYiA9IHt9O1xuXG4gIGZvciAoayBpbiBiKSB7XG4gICAgaWYgKGsgaW4gYSkge1xuICAgICAgaVtrXSA9IHZhbHVlKGFba10sIGJba10pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjW2tdID0gYltrXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIGZvciAoayBpbiBpKSBjW2tdID0gaVtrXSh0KTtcbiAgICByZXR1cm4gYztcbiAgfTtcbn1cbiIsICJpbXBvcnQgbnVtYmVyIGZyb20gXCIuL251bWJlci5qc1wiO1xuXG52YXIgcmVBID0gL1stK10/KD86XFxkK1xcLj9cXGQqfFxcLj9cXGQrKSg/OltlRV1bLStdP1xcZCspPy9nLFxuICAgIHJlQiA9IG5ldyBSZWdFeHAocmVBLnNvdXJjZSwgXCJnXCIpO1xuXG5mdW5jdGlvbiB6ZXJvKGIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBiO1xuICB9O1xufVxuXG5mdW5jdGlvbiBvbmUoYikge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHJldHVybiBiKHQpICsgXCJcIjtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgYmkgPSByZUEubGFzdEluZGV4ID0gcmVCLmxhc3RJbmRleCA9IDAsIC8vIHNjYW4gaW5kZXggZm9yIG5leHQgbnVtYmVyIGluIGJcbiAgICAgIGFtLCAvLyBjdXJyZW50IG1hdGNoIGluIGFcbiAgICAgIGJtLCAvLyBjdXJyZW50IG1hdGNoIGluIGJcbiAgICAgIGJzLCAvLyBzdHJpbmcgcHJlY2VkaW5nIGN1cnJlbnQgbnVtYmVyIGluIGIsIGlmIGFueVxuICAgICAgaSA9IC0xLCAvLyBpbmRleCBpbiBzXG4gICAgICBzID0gW10sIC8vIHN0cmluZyBjb25zdGFudHMgYW5kIHBsYWNlaG9sZGVyc1xuICAgICAgcSA9IFtdOyAvLyBudW1iZXIgaW50ZXJwb2xhdG9yc1xuXG4gIC8vIENvZXJjZSBpbnB1dHMgdG8gc3RyaW5ncy5cbiAgYSA9IGEgKyBcIlwiLCBiID0gYiArIFwiXCI7XG5cbiAgLy8gSW50ZXJwb2xhdGUgcGFpcnMgb2YgbnVtYmVycyBpbiBhICYgYi5cbiAgd2hpbGUgKChhbSA9IHJlQS5leGVjKGEpKVxuICAgICAgJiYgKGJtID0gcmVCLmV4ZWMoYikpKSB7XG4gICAgaWYgKChicyA9IGJtLmluZGV4KSA+IGJpKSB7IC8vIGEgc3RyaW5nIHByZWNlZGVzIHRoZSBuZXh0IG51bWJlciBpbiBiXG4gICAgICBicyA9IGIuc2xpY2UoYmksIGJzKTtcbiAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJzOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuICAgICAgZWxzZSBzWysraV0gPSBicztcbiAgICB9XG4gICAgaWYgKChhbSA9IGFtWzBdKSA9PT0gKGJtID0gYm1bMF0pKSB7IC8vIG51bWJlcnMgaW4gYSAmIGIgbWF0Y2hcbiAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJtOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuICAgICAgZWxzZSBzWysraV0gPSBibTtcbiAgICB9IGVsc2UgeyAvLyBpbnRlcnBvbGF0ZSBub24tbWF0Y2hpbmcgbnVtYmVyc1xuICAgICAgc1srK2ldID0gbnVsbDtcbiAgICAgIHEucHVzaCh7aTogaSwgeDogbnVtYmVyKGFtLCBibSl9KTtcbiAgICB9XG4gICAgYmkgPSByZUIubGFzdEluZGV4O1xuICB9XG5cbiAgLy8gQWRkIHJlbWFpbnMgb2YgYi5cbiAgaWYgKGJpIDwgYi5sZW5ndGgpIHtcbiAgICBicyA9IGIuc2xpY2UoYmkpO1xuICAgIGlmIChzW2ldKSBzW2ldICs9IGJzOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuICAgIGVsc2Ugc1srK2ldID0gYnM7XG4gIH1cblxuICAvLyBTcGVjaWFsIG9wdGltaXphdGlvbiBmb3Igb25seSBhIHNpbmdsZSBtYXRjaC5cbiAgLy8gT3RoZXJ3aXNlLCBpbnRlcnBvbGF0ZSBlYWNoIG9mIHRoZSBudW1iZXJzIGFuZCByZWpvaW4gdGhlIHN0cmluZy5cbiAgcmV0dXJuIHMubGVuZ3RoIDwgMiA/IChxWzBdXG4gICAgICA/IG9uZShxWzBdLngpXG4gICAgICA6IHplcm8oYikpXG4gICAgICA6IChiID0gcS5sZW5ndGgsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbzsgaSA8IGI7ICsraSkgc1sobyA9IHFbaV0pLmldID0gby54KHQpO1xuICAgICAgICAgIHJldHVybiBzLmpvaW4oXCJcIik7XG4gICAgICAgIH0pO1xufVxuIiwgImltcG9ydCB7Y29sb3J9IGZyb20gXCJkMy1jb2xvclwiO1xuaW1wb3J0IHJnYiBmcm9tIFwiLi9yZ2IuanNcIjtcbmltcG9ydCB7Z2VuZXJpY0FycmF5fSBmcm9tIFwiLi9hcnJheS5qc1wiO1xuaW1wb3J0IGRhdGUgZnJvbSBcIi4vZGF0ZS5qc1wiO1xuaW1wb3J0IG51bWJlciBmcm9tIFwiLi9udW1iZXIuanNcIjtcbmltcG9ydCBvYmplY3QgZnJvbSBcIi4vb2JqZWN0LmpzXCI7XG5pbXBvcnQgc3RyaW5nIGZyb20gXCIuL3N0cmluZy5qc1wiO1xuaW1wb3J0IGNvbnN0YW50IGZyb20gXCIuL2NvbnN0YW50LmpzXCI7XG5pbXBvcnQgbnVtYmVyQXJyYXksIHtpc051bWJlckFycmF5fSBmcm9tIFwiLi9udW1iZXJBcnJheS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihhLCBiKSB7XG4gIHZhciB0ID0gdHlwZW9mIGIsIGM7XG4gIHJldHVybiBiID09IG51bGwgfHwgdCA9PT0gXCJib29sZWFuXCIgPyBjb25zdGFudChiKVxuICAgICAgOiAodCA9PT0gXCJudW1iZXJcIiA/IG51bWJlclxuICAgICAgOiB0ID09PSBcInN0cmluZ1wiID8gKChjID0gY29sb3IoYikpID8gKGIgPSBjLCByZ2IpIDogc3RyaW5nKVxuICAgICAgOiBiIGluc3RhbmNlb2YgY29sb3IgPyByZ2JcbiAgICAgIDogYiBpbnN0YW5jZW9mIERhdGUgPyBkYXRlXG4gICAgICA6IGlzTnVtYmVyQXJyYXkoYikgPyBudW1iZXJBcnJheVxuICAgICAgOiBBcnJheS5pc0FycmF5KGIpID8gZ2VuZXJpY0FycmF5XG4gICAgICA6IHR5cGVvZiBiLnZhbHVlT2YgIT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgYi50b1N0cmluZyAhPT0gXCJmdW5jdGlvblwiIHx8IGlzTmFOKGIpID8gb2JqZWN0XG4gICAgICA6IG51bWJlcikoYSwgYik7XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICByZXR1cm4gYSA9ICthLCBiID0gK2IsIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChhICogKDEgLSB0KSArIGIgKiB0KTtcbiAgfTtcbn1cbiIsICJ2YXIgZGVncmVlcyA9IDE4MCAvIE1hdGguUEk7XG5cbmV4cG9ydCB2YXIgaWRlbnRpdHkgPSB7XG4gIHRyYW5zbGF0ZVg6IDAsXG4gIHRyYW5zbGF0ZVk6IDAsXG4gIHJvdGF0ZTogMCxcbiAgc2tld1g6IDAsXG4gIHNjYWxlWDogMSxcbiAgc2NhbGVZOiAxXG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihhLCBiLCBjLCBkLCBlLCBmKSB7XG4gIHZhciBzY2FsZVgsIHNjYWxlWSwgc2tld1g7XG4gIGlmIChzY2FsZVggPSBNYXRoLnNxcnQoYSAqIGEgKyBiICogYikpIGEgLz0gc2NhbGVYLCBiIC89IHNjYWxlWDtcbiAgaWYgKHNrZXdYID0gYSAqIGMgKyBiICogZCkgYyAtPSBhICogc2tld1gsIGQgLT0gYiAqIHNrZXdYO1xuICBpZiAoc2NhbGVZID0gTWF0aC5zcXJ0KGMgKiBjICsgZCAqIGQpKSBjIC89IHNjYWxlWSwgZCAvPSBzY2FsZVksIHNrZXdYIC89IHNjYWxlWTtcbiAgaWYgKGEgKiBkIDwgYiAqIGMpIGEgPSAtYSwgYiA9IC1iLCBza2V3WCA9IC1za2V3WCwgc2NhbGVYID0gLXNjYWxlWDtcbiAgcmV0dXJuIHtcbiAgICB0cmFuc2xhdGVYOiBlLFxuICAgIHRyYW5zbGF0ZVk6IGYsXG4gICAgcm90YXRlOiBNYXRoLmF0YW4yKGIsIGEpICogZGVncmVlcyxcbiAgICBza2V3WDogTWF0aC5hdGFuKHNrZXdYKSAqIGRlZ3JlZXMsXG4gICAgc2NhbGVYOiBzY2FsZVgsXG4gICAgc2NhbGVZOiBzY2FsZVlcbiAgfTtcbn1cbiIsICJpbXBvcnQgZGVjb21wb3NlLCB7aWRlbnRpdHl9IGZyb20gXCIuL2RlY29tcG9zZS5qc1wiO1xuXG52YXIgc3ZnTm9kZTtcblxuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNzcyh2YWx1ZSkge1xuICBjb25zdCBtID0gbmV3ICh0eXBlb2YgRE9NTWF0cml4ID09PSBcImZ1bmN0aW9uXCIgPyBET01NYXRyaXggOiBXZWJLaXRDU1NNYXRyaXgpKHZhbHVlICsgXCJcIik7XG4gIHJldHVybiBtLmlzSWRlbnRpdHkgPyBpZGVudGl0eSA6IGRlY29tcG9zZShtLmEsIG0uYiwgbS5jLCBtLmQsIG0uZSwgbS5mKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3ZnKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gaWRlbnRpdHk7XG4gIGlmICghc3ZnTm9kZSkgc3ZnTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwiZ1wiKTtcbiAgc3ZnTm9kZS5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIiwgdmFsdWUpO1xuICBpZiAoISh2YWx1ZSA9IHN2Z05vZGUudHJhbnNmb3JtLmJhc2VWYWwuY29uc29saWRhdGUoKSkpIHJldHVybiBpZGVudGl0eTtcbiAgdmFsdWUgPSB2YWx1ZS5tYXRyaXg7XG4gIHJldHVybiBkZWNvbXBvc2UodmFsdWUuYSwgdmFsdWUuYiwgdmFsdWUuYywgdmFsdWUuZCwgdmFsdWUuZSwgdmFsdWUuZik7XG59XG4iLCAiaW1wb3J0IG51bWJlciBmcm9tIFwiLi4vbnVtYmVyLmpzXCI7XG5pbXBvcnQge3BhcnNlQ3NzLCBwYXJzZVN2Z30gZnJvbSBcIi4vcGFyc2UuanNcIjtcblxuZnVuY3Rpb24gaW50ZXJwb2xhdGVUcmFuc2Zvcm0ocGFyc2UsIHB4Q29tbWEsIHB4UGFyZW4sIGRlZ1BhcmVuKSB7XG5cbiAgZnVuY3Rpb24gcG9wKHMpIHtcbiAgICByZXR1cm4gcy5sZW5ndGggPyBzLnBvcCgpICsgXCIgXCIgOiBcIlwiO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhbnNsYXRlKHhhLCB5YSwgeGIsIHliLCBzLCBxKSB7XG4gICAgaWYgKHhhICE9PSB4YiB8fCB5YSAhPT0geWIpIHtcbiAgICAgIHZhciBpID0gcy5wdXNoKFwidHJhbnNsYXRlKFwiLCBudWxsLCBweENvbW1hLCBudWxsLCBweFBhcmVuKTtcbiAgICAgIHEucHVzaCh7aTogaSAtIDQsIHg6IG51bWJlcih4YSwgeGIpfSwge2k6IGkgLSAyLCB4OiBudW1iZXIoeWEsIHliKX0pO1xuICAgIH0gZWxzZSBpZiAoeGIgfHwgeWIpIHtcbiAgICAgIHMucHVzaChcInRyYW5zbGF0ZShcIiArIHhiICsgcHhDb21tYSArIHliICsgcHhQYXJlbik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcm90YXRlKGEsIGIsIHMsIHEpIHtcbiAgICBpZiAoYSAhPT0gYikge1xuICAgICAgaWYgKGEgLSBiID4gMTgwKSBiICs9IDM2MDsgZWxzZSBpZiAoYiAtIGEgPiAxODApIGEgKz0gMzYwOyAvLyBzaG9ydGVzdCBwYXRoXG4gICAgICBxLnB1c2goe2k6IHMucHVzaChwb3AocykgKyBcInJvdGF0ZShcIiwgbnVsbCwgZGVnUGFyZW4pIC0gMiwgeDogbnVtYmVyKGEsIGIpfSk7XG4gICAgfSBlbHNlIGlmIChiKSB7XG4gICAgICBzLnB1c2gocG9wKHMpICsgXCJyb3RhdGUoXCIgKyBiICsgZGVnUGFyZW4pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNrZXdYKGEsIGIsIHMsIHEpIHtcbiAgICBpZiAoYSAhPT0gYikge1xuICAgICAgcS5wdXNoKHtpOiBzLnB1c2gocG9wKHMpICsgXCJza2V3WChcIiwgbnVsbCwgZGVnUGFyZW4pIC0gMiwgeDogbnVtYmVyKGEsIGIpfSk7XG4gICAgfSBlbHNlIGlmIChiKSB7XG4gICAgICBzLnB1c2gocG9wKHMpICsgXCJza2V3WChcIiArIGIgKyBkZWdQYXJlbik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2NhbGUoeGEsIHlhLCB4YiwgeWIsIHMsIHEpIHtcbiAgICBpZiAoeGEgIT09IHhiIHx8IHlhICE9PSB5Yikge1xuICAgICAgdmFyIGkgPSBzLnB1c2gocG9wKHMpICsgXCJzY2FsZShcIiwgbnVsbCwgXCIsXCIsIG51bGwsIFwiKVwiKTtcbiAgICAgIHEucHVzaCh7aTogaSAtIDQsIHg6IG51bWJlcih4YSwgeGIpfSwge2k6IGkgLSAyLCB4OiBudW1iZXIoeWEsIHliKX0pO1xuICAgIH0gZWxzZSBpZiAoeGIgIT09IDEgfHwgeWIgIT09IDEpIHtcbiAgICAgIHMucHVzaChwb3AocykgKyBcInNjYWxlKFwiICsgeGIgKyBcIixcIiArIHliICsgXCIpXCIpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbihhLCBiKSB7XG4gICAgdmFyIHMgPSBbXSwgLy8gc3RyaW5nIGNvbnN0YW50cyBhbmQgcGxhY2Vob2xkZXJzXG4gICAgICAgIHEgPSBbXTsgLy8gbnVtYmVyIGludGVycG9sYXRvcnNcbiAgICBhID0gcGFyc2UoYSksIGIgPSBwYXJzZShiKTtcbiAgICB0cmFuc2xhdGUoYS50cmFuc2xhdGVYLCBhLnRyYW5zbGF0ZVksIGIudHJhbnNsYXRlWCwgYi50cmFuc2xhdGVZLCBzLCBxKTtcbiAgICByb3RhdGUoYS5yb3RhdGUsIGIucm90YXRlLCBzLCBxKTtcbiAgICBza2V3WChhLnNrZXdYLCBiLnNrZXdYLCBzLCBxKTtcbiAgICBzY2FsZShhLnNjYWxlWCwgYS5zY2FsZVksIGIuc2NhbGVYLCBiLnNjYWxlWSwgcywgcSk7XG4gICAgYSA9IGIgPSBudWxsOyAvLyBnY1xuICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICB2YXIgaSA9IC0xLCBuID0gcS5sZW5ndGgsIG87XG4gICAgICB3aGlsZSAoKytpIDwgbikgc1sobyA9IHFbaV0pLmldID0gby54KHQpO1xuICAgICAgcmV0dXJuIHMuam9pbihcIlwiKTtcbiAgICB9O1xuICB9O1xufVxuXG5leHBvcnQgdmFyIGludGVycG9sYXRlVHJhbnNmb3JtQ3NzID0gaW50ZXJwb2xhdGVUcmFuc2Zvcm0ocGFyc2VDc3MsIFwicHgsIFwiLCBcInB4KVwiLCBcImRlZylcIik7XG5leHBvcnQgdmFyIGludGVycG9sYXRlVHJhbnNmb3JtU3ZnID0gaW50ZXJwb2xhdGVUcmFuc2Zvcm0ocGFyc2VTdmcsIFwiLCBcIiwgXCIpXCIsIFwiKVwiKTtcbiIsICJ2YXIgZnJhbWUgPSAwLCAvLyBpcyBhbiBhbmltYXRpb24gZnJhbWUgcGVuZGluZz9cbiAgICB0aW1lb3V0ID0gMCwgLy8gaXMgYSB0aW1lb3V0IHBlbmRpbmc/XG4gICAgaW50ZXJ2YWwgPSAwLCAvLyBhcmUgYW55IHRpbWVycyBhY3RpdmU/XG4gICAgcG9rZURlbGF5ID0gMTAwMCwgLy8gaG93IGZyZXF1ZW50bHkgd2UgY2hlY2sgZm9yIGNsb2NrIHNrZXdcbiAgICB0YXNrSGVhZCxcbiAgICB0YXNrVGFpbCxcbiAgICBjbG9ja0xhc3QgPSAwLFxuICAgIGNsb2NrTm93ID0gMCxcbiAgICBjbG9ja1NrZXcgPSAwLFxuICAgIGNsb2NrID0gdHlwZW9mIHBlcmZvcm1hbmNlID09PSBcIm9iamVjdFwiICYmIHBlcmZvcm1hbmNlLm5vdyA/IHBlcmZvcm1hbmNlIDogRGF0ZSxcbiAgICBzZXRGcmFtZSA9IHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIgJiYgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA/IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZCh3aW5kb3cpIDogZnVuY3Rpb24oZikgeyBzZXRUaW1lb3V0KGYsIDE3KTsgfTtcblxuZXhwb3J0IGZ1bmN0aW9uIG5vdygpIHtcbiAgcmV0dXJuIGNsb2NrTm93IHx8IChzZXRGcmFtZShjbGVhck5vdyksIGNsb2NrTm93ID0gY2xvY2subm93KCkgKyBjbG9ja1NrZXcpO1xufVxuXG5mdW5jdGlvbiBjbGVhck5vdygpIHtcbiAgY2xvY2tOb3cgPSAwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gVGltZXIoKSB7XG4gIHRoaXMuX2NhbGwgPVxuICB0aGlzLl90aW1lID1cbiAgdGhpcy5fbmV4dCA9IG51bGw7XG59XG5cblRpbWVyLnByb3RvdHlwZSA9IHRpbWVyLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IFRpbWVyLFxuICByZXN0YXJ0OiBmdW5jdGlvbihjYWxsYmFjaywgZGVsYXksIHRpbWUpIHtcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJjYWxsYmFjayBpcyBub3QgYSBmdW5jdGlvblwiKTtcbiAgICB0aW1lID0gKHRpbWUgPT0gbnVsbCA/IG5vdygpIDogK3RpbWUpICsgKGRlbGF5ID09IG51bGwgPyAwIDogK2RlbGF5KTtcbiAgICBpZiAoIXRoaXMuX25leHQgJiYgdGFza1RhaWwgIT09IHRoaXMpIHtcbiAgICAgIGlmICh0YXNrVGFpbCkgdGFza1RhaWwuX25leHQgPSB0aGlzO1xuICAgICAgZWxzZSB0YXNrSGVhZCA9IHRoaXM7XG4gICAgICB0YXNrVGFpbCA9IHRoaXM7XG4gICAgfVxuICAgIHRoaXMuX2NhbGwgPSBjYWxsYmFjaztcbiAgICB0aGlzLl90aW1lID0gdGltZTtcbiAgICBzbGVlcCgpO1xuICB9LFxuICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5fY2FsbCkge1xuICAgICAgdGhpcy5fY2FsbCA9IG51bGw7XG4gICAgICB0aGlzLl90aW1lID0gSW5maW5pdHk7XG4gICAgICBzbGVlcCgpO1xuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHRpbWVyKGNhbGxiYWNrLCBkZWxheSwgdGltZSkge1xuICB2YXIgdCA9IG5ldyBUaW1lcjtcbiAgdC5yZXN0YXJ0KGNhbGxiYWNrLCBkZWxheSwgdGltZSk7XG4gIHJldHVybiB0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGltZXJGbHVzaCgpIHtcbiAgbm93KCk7IC8vIEdldCB0aGUgY3VycmVudCB0aW1lLCBpZiBub3QgYWxyZWFkeSBzZXQuXG4gICsrZnJhbWU7IC8vIFByZXRlbmQgd2VcdTIwMTl2ZSBzZXQgYW4gYWxhcm0sIGlmIHdlIGhhdmVuXHUyMDE5dCBhbHJlYWR5LlxuICB2YXIgdCA9IHRhc2tIZWFkLCBlO1xuICB3aGlsZSAodCkge1xuICAgIGlmICgoZSA9IGNsb2NrTm93IC0gdC5fdGltZSkgPj0gMCkgdC5fY2FsbC5jYWxsKHVuZGVmaW5lZCwgZSk7XG4gICAgdCA9IHQuX25leHQ7XG4gIH1cbiAgLS1mcmFtZTtcbn1cblxuZnVuY3Rpb24gd2FrZSgpIHtcbiAgY2xvY2tOb3cgPSAoY2xvY2tMYXN0ID0gY2xvY2subm93KCkpICsgY2xvY2tTa2V3O1xuICBmcmFtZSA9IHRpbWVvdXQgPSAwO1xuICB0cnkge1xuICAgIHRpbWVyRmx1c2goKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBmcmFtZSA9IDA7XG4gICAgbmFwKCk7XG4gICAgY2xvY2tOb3cgPSAwO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBva2UoKSB7XG4gIHZhciBub3cgPSBjbG9jay5ub3coKSwgZGVsYXkgPSBub3cgLSBjbG9ja0xhc3Q7XG4gIGlmIChkZWxheSA+IHBva2VEZWxheSkgY2xvY2tTa2V3IC09IGRlbGF5LCBjbG9ja0xhc3QgPSBub3c7XG59XG5cbmZ1bmN0aW9uIG5hcCgpIHtcbiAgdmFyIHQwLCB0MSA9IHRhc2tIZWFkLCB0MiwgdGltZSA9IEluZmluaXR5O1xuICB3aGlsZSAodDEpIHtcbiAgICBpZiAodDEuX2NhbGwpIHtcbiAgICAgIGlmICh0aW1lID4gdDEuX3RpbWUpIHRpbWUgPSB0MS5fdGltZTtcbiAgICAgIHQwID0gdDEsIHQxID0gdDEuX25leHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHQyID0gdDEuX25leHQsIHQxLl9uZXh0ID0gbnVsbDtcbiAgICAgIHQxID0gdDAgPyB0MC5fbmV4dCA9IHQyIDogdGFza0hlYWQgPSB0MjtcbiAgICB9XG4gIH1cbiAgdGFza1RhaWwgPSB0MDtcbiAgc2xlZXAodGltZSk7XG59XG5cbmZ1bmN0aW9uIHNsZWVwKHRpbWUpIHtcbiAgaWYgKGZyYW1lKSByZXR1cm47IC8vIFNvb25lc3QgYWxhcm0gYWxyZWFkeSBzZXQsIG9yIHdpbGwgYmUuXG4gIGlmICh0aW1lb3V0KSB0aW1lb3V0ID0gY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICB2YXIgZGVsYXkgPSB0aW1lIC0gY2xvY2tOb3c7IC8vIFN0cmljdGx5IGxlc3MgdGhhbiBpZiB3ZSByZWNvbXB1dGVkIGNsb2NrTm93LlxuICBpZiAoZGVsYXkgPiAyNCkge1xuICAgIGlmICh0aW1lIDwgSW5maW5pdHkpIHRpbWVvdXQgPSBzZXRUaW1lb3V0KHdha2UsIHRpbWUgLSBjbG9jay5ub3coKSAtIGNsb2NrU2tldyk7XG4gICAgaWYgKGludGVydmFsKSBpbnRlcnZhbCA9IGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICB9IGVsc2Uge1xuICAgIGlmICghaW50ZXJ2YWwpIGNsb2NrTGFzdCA9IGNsb2NrLm5vdygpLCBpbnRlcnZhbCA9IHNldEludGVydmFsKHBva2UsIHBva2VEZWxheSk7XG4gICAgZnJhbWUgPSAxLCBzZXRGcmFtZSh3YWtlKTtcbiAgfVxufVxuIiwgImltcG9ydCB7VGltZXJ9IGZyb20gXCIuL3RpbWVyLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNhbGxiYWNrLCBkZWxheSwgdGltZSkge1xuICB2YXIgdCA9IG5ldyBUaW1lcjtcbiAgZGVsYXkgPSBkZWxheSA9PSBudWxsID8gMCA6ICtkZWxheTtcbiAgdC5yZXN0YXJ0KGVsYXBzZWQgPT4ge1xuICAgIHQuc3RvcCgpO1xuICAgIGNhbGxiYWNrKGVsYXBzZWQgKyBkZWxheSk7XG4gIH0sIGRlbGF5LCB0aW1lKTtcbiAgcmV0dXJuIHQ7XG59XG4iLCAiaW1wb3J0IHtkaXNwYXRjaH0gZnJvbSBcImQzLWRpc3BhdGNoXCI7XG5pbXBvcnQge3RpbWVyLCB0aW1lb3V0fSBmcm9tIFwiZDMtdGltZXJcIjtcblxudmFyIGVtcHR5T24gPSBkaXNwYXRjaChcInN0YXJ0XCIsIFwiZW5kXCIsIFwiY2FuY2VsXCIsIFwiaW50ZXJydXB0XCIpO1xudmFyIGVtcHR5VHdlZW4gPSBbXTtcblxuZXhwb3J0IHZhciBDUkVBVEVEID0gMDtcbmV4cG9ydCB2YXIgU0NIRURVTEVEID0gMTtcbmV4cG9ydCB2YXIgU1RBUlRJTkcgPSAyO1xuZXhwb3J0IHZhciBTVEFSVEVEID0gMztcbmV4cG9ydCB2YXIgUlVOTklORyA9IDQ7XG5leHBvcnQgdmFyIEVORElORyA9IDU7XG5leHBvcnQgdmFyIEVOREVEID0gNjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obm9kZSwgbmFtZSwgaWQsIGluZGV4LCBncm91cCwgdGltaW5nKSB7XG4gIHZhciBzY2hlZHVsZXMgPSBub2RlLl9fdHJhbnNpdGlvbjtcbiAgaWYgKCFzY2hlZHVsZXMpIG5vZGUuX190cmFuc2l0aW9uID0ge307XG4gIGVsc2UgaWYgKGlkIGluIHNjaGVkdWxlcykgcmV0dXJuO1xuICBjcmVhdGUobm9kZSwgaWQsIHtcbiAgICBuYW1lOiBuYW1lLFxuICAgIGluZGV4OiBpbmRleCwgLy8gRm9yIGNvbnRleHQgZHVyaW5nIGNhbGxiYWNrLlxuICAgIGdyb3VwOiBncm91cCwgLy8gRm9yIGNvbnRleHQgZHVyaW5nIGNhbGxiYWNrLlxuICAgIG9uOiBlbXB0eU9uLFxuICAgIHR3ZWVuOiBlbXB0eVR3ZWVuLFxuICAgIHRpbWU6IHRpbWluZy50aW1lLFxuICAgIGRlbGF5OiB0aW1pbmcuZGVsYXksXG4gICAgZHVyYXRpb246IHRpbWluZy5kdXJhdGlvbixcbiAgICBlYXNlOiB0aW1pbmcuZWFzZSxcbiAgICB0aW1lcjogbnVsbCxcbiAgICBzdGF0ZTogQ1JFQVRFRFxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXQobm9kZSwgaWQpIHtcbiAgdmFyIHNjaGVkdWxlID0gZ2V0KG5vZGUsIGlkKTtcbiAgaWYgKHNjaGVkdWxlLnN0YXRlID4gQ1JFQVRFRCkgdGhyb3cgbmV3IEVycm9yKFwidG9vIGxhdGU7IGFscmVhZHkgc2NoZWR1bGVkXCIpO1xuICByZXR1cm4gc2NoZWR1bGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXQobm9kZSwgaWQpIHtcbiAgdmFyIHNjaGVkdWxlID0gZ2V0KG5vZGUsIGlkKTtcbiAgaWYgKHNjaGVkdWxlLnN0YXRlID4gU1RBUlRFRCkgdGhyb3cgbmV3IEVycm9yKFwidG9vIGxhdGU7IGFscmVhZHkgcnVubmluZ1wiKTtcbiAgcmV0dXJuIHNjaGVkdWxlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0KG5vZGUsIGlkKSB7XG4gIHZhciBzY2hlZHVsZSA9IG5vZGUuX190cmFuc2l0aW9uO1xuICBpZiAoIXNjaGVkdWxlIHx8ICEoc2NoZWR1bGUgPSBzY2hlZHVsZVtpZF0pKSB0aHJvdyBuZXcgRXJyb3IoXCJ0cmFuc2l0aW9uIG5vdCBmb3VuZFwiKTtcbiAgcmV0dXJuIHNjaGVkdWxlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGUobm9kZSwgaWQsIHNlbGYpIHtcbiAgdmFyIHNjaGVkdWxlcyA9IG5vZGUuX190cmFuc2l0aW9uLFxuICAgICAgdHdlZW47XG5cbiAgLy8gSW5pdGlhbGl6ZSB0aGUgc2VsZiB0aW1lciB3aGVuIHRoZSB0cmFuc2l0aW9uIGlzIGNyZWF0ZWQuXG4gIC8vIE5vdGUgdGhlIGFjdHVhbCBkZWxheSBpcyBub3Qga25vd24gdW50aWwgdGhlIGZpcnN0IGNhbGxiYWNrIVxuICBzY2hlZHVsZXNbaWRdID0gc2VsZjtcbiAgc2VsZi50aW1lciA9IHRpbWVyKHNjaGVkdWxlLCAwLCBzZWxmLnRpbWUpO1xuXG4gIGZ1bmN0aW9uIHNjaGVkdWxlKGVsYXBzZWQpIHtcbiAgICBzZWxmLnN0YXRlID0gU0NIRURVTEVEO1xuICAgIHNlbGYudGltZXIucmVzdGFydChzdGFydCwgc2VsZi5kZWxheSwgc2VsZi50aW1lKTtcblxuICAgIC8vIElmIHRoZSBlbGFwc2VkIGRlbGF5IGlzIGxlc3MgdGhhbiBvdXIgZmlyc3Qgc2xlZXAsIHN0YXJ0IGltbWVkaWF0ZWx5LlxuICAgIGlmIChzZWxmLmRlbGF5IDw9IGVsYXBzZWQpIHN0YXJ0KGVsYXBzZWQgLSBzZWxmLmRlbGF5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YXJ0KGVsYXBzZWQpIHtcbiAgICB2YXIgaSwgaiwgbiwgbztcblxuICAgIC8vIElmIHRoZSBzdGF0ZSBpcyBub3QgU0NIRURVTEVELCB0aGVuIHdlIHByZXZpb3VzbHkgZXJyb3JlZCBvbiBzdGFydC5cbiAgICBpZiAoc2VsZi5zdGF0ZSAhPT0gU0NIRURVTEVEKSByZXR1cm4gc3RvcCgpO1xuXG4gICAgZm9yIChpIGluIHNjaGVkdWxlcykge1xuICAgICAgbyA9IHNjaGVkdWxlc1tpXTtcbiAgICAgIGlmIChvLm5hbWUgIT09IHNlbGYubmFtZSkgY29udGludWU7XG5cbiAgICAgIC8vIFdoaWxlIHRoaXMgZWxlbWVudCBhbHJlYWR5IGhhcyBhIHN0YXJ0aW5nIHRyYW5zaXRpb24gZHVyaW5nIHRoaXMgZnJhbWUsXG4gICAgICAvLyBkZWZlciBzdGFydGluZyBhbiBpbnRlcnJ1cHRpbmcgdHJhbnNpdGlvbiB1bnRpbCB0aGF0IHRyYW5zaXRpb24gaGFzIGFcbiAgICAgIC8vIGNoYW5jZSB0byB0aWNrIChhbmQgcG9zc2libHkgZW5kKTsgc2VlIGQzL2QzLXRyYW5zaXRpb24jNTQhXG4gICAgICBpZiAoby5zdGF0ZSA9PT0gU1RBUlRFRCkgcmV0dXJuIHRpbWVvdXQoc3RhcnQpO1xuXG4gICAgICAvLyBJbnRlcnJ1cHQgdGhlIGFjdGl2ZSB0cmFuc2l0aW9uLCBpZiBhbnkuXG4gICAgICBpZiAoby5zdGF0ZSA9PT0gUlVOTklORykge1xuICAgICAgICBvLnN0YXRlID0gRU5ERUQ7XG4gICAgICAgIG8udGltZXIuc3RvcCgpO1xuICAgICAgICBvLm9uLmNhbGwoXCJpbnRlcnJ1cHRcIiwgbm9kZSwgbm9kZS5fX2RhdGFfXywgby5pbmRleCwgby5ncm91cCk7XG4gICAgICAgIGRlbGV0ZSBzY2hlZHVsZXNbaV07XG4gICAgICB9XG5cbiAgICAgIC8vIENhbmNlbCBhbnkgcHJlLWVtcHRlZCB0cmFuc2l0aW9ucy5cbiAgICAgIGVsc2UgaWYgKCtpIDwgaWQpIHtcbiAgICAgICAgby5zdGF0ZSA9IEVOREVEO1xuICAgICAgICBvLnRpbWVyLnN0b3AoKTtcbiAgICAgICAgby5vbi5jYWxsKFwiY2FuY2VsXCIsIG5vZGUsIG5vZGUuX19kYXRhX18sIG8uaW5kZXgsIG8uZ3JvdXApO1xuICAgICAgICBkZWxldGUgc2NoZWR1bGVzW2ldO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERlZmVyIHRoZSBmaXJzdCB0aWNrIHRvIGVuZCBvZiB0aGUgY3VycmVudCBmcmFtZTsgc2VlIGQzL2QzIzE1NzYuXG4gICAgLy8gTm90ZSB0aGUgdHJhbnNpdGlvbiBtYXkgYmUgY2FuY2VsZWQgYWZ0ZXIgc3RhcnQgYW5kIGJlZm9yZSB0aGUgZmlyc3QgdGljayFcbiAgICAvLyBOb3RlIHRoaXMgbXVzdCBiZSBzY2hlZHVsZWQgYmVmb3JlIHRoZSBzdGFydCBldmVudDsgc2VlIGQzL2QzLXRyYW5zaXRpb24jMTYhXG4gICAgLy8gQXNzdW1pbmcgdGhpcyBpcyBzdWNjZXNzZnVsLCBzdWJzZXF1ZW50IGNhbGxiYWNrcyBnbyBzdHJhaWdodCB0byB0aWNrLlxuICAgIHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoc2VsZi5zdGF0ZSA9PT0gU1RBUlRFRCkge1xuICAgICAgICBzZWxmLnN0YXRlID0gUlVOTklORztcbiAgICAgICAgc2VsZi50aW1lci5yZXN0YXJ0KHRpY2ssIHNlbGYuZGVsYXksIHNlbGYudGltZSk7XG4gICAgICAgIHRpY2soZWxhcHNlZCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBEaXNwYXRjaCB0aGUgc3RhcnQgZXZlbnQuXG4gICAgLy8gTm90ZSB0aGlzIG11c3QgYmUgZG9uZSBiZWZvcmUgdGhlIHR3ZWVuIGFyZSBpbml0aWFsaXplZC5cbiAgICBzZWxmLnN0YXRlID0gU1RBUlRJTkc7XG4gICAgc2VsZi5vbi5jYWxsKFwic3RhcnRcIiwgbm9kZSwgbm9kZS5fX2RhdGFfXywgc2VsZi5pbmRleCwgc2VsZi5ncm91cCk7XG4gICAgaWYgKHNlbGYuc3RhdGUgIT09IFNUQVJUSU5HKSByZXR1cm47IC8vIGludGVycnVwdGVkXG4gICAgc2VsZi5zdGF0ZSA9IFNUQVJURUQ7XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSB0d2VlbiwgZGVsZXRpbmcgbnVsbCB0d2Vlbi5cbiAgICB0d2VlbiA9IG5ldyBBcnJheShuID0gc2VsZi50d2Vlbi5sZW5ndGgpO1xuICAgIGZvciAoaSA9IDAsIGogPSAtMTsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG8gPSBzZWxmLnR3ZWVuW2ldLnZhbHVlLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgc2VsZi5pbmRleCwgc2VsZi5ncm91cCkpIHtcbiAgICAgICAgdHdlZW5bKytqXSA9IG87XG4gICAgICB9XG4gICAgfVxuICAgIHR3ZWVuLmxlbmd0aCA9IGogKyAxO1xuICB9XG5cbiAgZnVuY3Rpb24gdGljayhlbGFwc2VkKSB7XG4gICAgdmFyIHQgPSBlbGFwc2VkIDwgc2VsZi5kdXJhdGlvbiA/IHNlbGYuZWFzZS5jYWxsKG51bGwsIGVsYXBzZWQgLyBzZWxmLmR1cmF0aW9uKSA6IChzZWxmLnRpbWVyLnJlc3RhcnQoc3RvcCksIHNlbGYuc3RhdGUgPSBFTkRJTkcsIDEpLFxuICAgICAgICBpID0gLTEsXG4gICAgICAgIG4gPSB0d2Vlbi5sZW5ndGg7XG5cbiAgICB3aGlsZSAoKytpIDwgbikge1xuICAgICAgdHdlZW5baV0uY2FsbChub2RlLCB0KTtcbiAgICB9XG5cbiAgICAvLyBEaXNwYXRjaCB0aGUgZW5kIGV2ZW50LlxuICAgIGlmIChzZWxmLnN0YXRlID09PSBFTkRJTkcpIHtcbiAgICAgIHNlbGYub24uY2FsbChcImVuZFwiLCBub2RlLCBub2RlLl9fZGF0YV9fLCBzZWxmLmluZGV4LCBzZWxmLmdyb3VwKTtcbiAgICAgIHN0b3AoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wKCkge1xuICAgIHNlbGYuc3RhdGUgPSBFTkRFRDtcbiAgICBzZWxmLnRpbWVyLnN0b3AoKTtcbiAgICBkZWxldGUgc2NoZWR1bGVzW2lkXTtcbiAgICBmb3IgKHZhciBpIGluIHNjaGVkdWxlcykgcmV0dXJuOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgZGVsZXRlIG5vZGUuX190cmFuc2l0aW9uO1xuICB9XG59XG4iLCAiaW1wb3J0IHtTVEFSVElORywgRU5ESU5HLCBFTkRFRH0gZnJvbSBcIi4vdHJhbnNpdGlvbi9zY2hlZHVsZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihub2RlLCBuYW1lKSB7XG4gIHZhciBzY2hlZHVsZXMgPSBub2RlLl9fdHJhbnNpdGlvbixcbiAgICAgIHNjaGVkdWxlLFxuICAgICAgYWN0aXZlLFxuICAgICAgZW1wdHkgPSB0cnVlLFxuICAgICAgaTtcblxuICBpZiAoIXNjaGVkdWxlcykgcmV0dXJuO1xuXG4gIG5hbWUgPSBuYW1lID09IG51bGwgPyBudWxsIDogbmFtZSArIFwiXCI7XG5cbiAgZm9yIChpIGluIHNjaGVkdWxlcykge1xuICAgIGlmICgoc2NoZWR1bGUgPSBzY2hlZHVsZXNbaV0pLm5hbWUgIT09IG5hbWUpIHsgZW1wdHkgPSBmYWxzZTsgY29udGludWU7IH1cbiAgICBhY3RpdmUgPSBzY2hlZHVsZS5zdGF0ZSA+IFNUQVJUSU5HICYmIHNjaGVkdWxlLnN0YXRlIDwgRU5ESU5HO1xuICAgIHNjaGVkdWxlLnN0YXRlID0gRU5ERUQ7XG4gICAgc2NoZWR1bGUudGltZXIuc3RvcCgpO1xuICAgIHNjaGVkdWxlLm9uLmNhbGwoYWN0aXZlID8gXCJpbnRlcnJ1cHRcIiA6IFwiY2FuY2VsXCIsIG5vZGUsIG5vZGUuX19kYXRhX18sIHNjaGVkdWxlLmluZGV4LCBzY2hlZHVsZS5ncm91cCk7XG4gICAgZGVsZXRlIHNjaGVkdWxlc1tpXTtcbiAgfVxuXG4gIGlmIChlbXB0eSkgZGVsZXRlIG5vZGUuX190cmFuc2l0aW9uO1xufVxuIiwgImltcG9ydCBpbnRlcnJ1cHQgZnJvbSBcIi4uL2ludGVycnVwdC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lKSB7XG4gIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgaW50ZXJydXB0KHRoaXMsIG5hbWUpO1xuICB9KTtcbn1cbiIsICJpbXBvcnQge2dldCwgc2V0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5mdW5jdGlvbiB0d2VlblJlbW92ZShpZCwgbmFtZSkge1xuICB2YXIgdHdlZW4wLCB0d2VlbjE7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2NoZWR1bGUgPSBzZXQodGhpcywgaWQpLFxuICAgICAgICB0d2VlbiA9IHNjaGVkdWxlLnR3ZWVuO1xuXG4gICAgLy8gSWYgdGhpcyBub2RlIHNoYXJlZCB0d2VlbiB3aXRoIHRoZSBwcmV2aW91cyBub2RlLFxuICAgIC8vIGp1c3QgYXNzaWduIHRoZSB1cGRhdGVkIHNoYXJlZCB0d2VlbiBhbmQgd2VcdTIwMTlyZSBkb25lIVxuICAgIC8vIE90aGVyd2lzZSwgY29weS1vbi13cml0ZS5cbiAgICBpZiAodHdlZW4gIT09IHR3ZWVuMCkge1xuICAgICAgdHdlZW4xID0gdHdlZW4wID0gdHdlZW47XG4gICAgICBmb3IgKHZhciBpID0gMCwgbiA9IHR3ZWVuMS5sZW5ndGg7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgaWYgKHR3ZWVuMVtpXS5uYW1lID09PSBuYW1lKSB7XG4gICAgICAgICAgdHdlZW4xID0gdHdlZW4xLnNsaWNlKCk7XG4gICAgICAgICAgdHdlZW4xLnNwbGljZShpLCAxKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHNjaGVkdWxlLnR3ZWVuID0gdHdlZW4xO1xuICB9O1xufVxuXG5mdW5jdGlvbiB0d2VlbkZ1bmN0aW9uKGlkLCBuYW1lLCB2YWx1ZSkge1xuICB2YXIgdHdlZW4wLCB0d2VlbjE7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNjaGVkdWxlID0gc2V0KHRoaXMsIGlkKSxcbiAgICAgICAgdHdlZW4gPSBzY2hlZHVsZS50d2VlbjtcblxuICAgIC8vIElmIHRoaXMgbm9kZSBzaGFyZWQgdHdlZW4gd2l0aCB0aGUgcHJldmlvdXMgbm9kZSxcbiAgICAvLyBqdXN0IGFzc2lnbiB0aGUgdXBkYXRlZCBzaGFyZWQgdHdlZW4gYW5kIHdlXHUyMDE5cmUgZG9uZSFcbiAgICAvLyBPdGhlcndpc2UsIGNvcHktb24td3JpdGUuXG4gICAgaWYgKHR3ZWVuICE9PSB0d2VlbjApIHtcbiAgICAgIHR3ZWVuMSA9ICh0d2VlbjAgPSB0d2Vlbikuc2xpY2UoKTtcbiAgICAgIGZvciAodmFyIHQgPSB7bmFtZTogbmFtZSwgdmFsdWU6IHZhbHVlfSwgaSA9IDAsIG4gPSB0d2VlbjEubGVuZ3RoOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIGlmICh0d2VlbjFbaV0ubmFtZSA9PT0gbmFtZSkge1xuICAgICAgICAgIHR3ZWVuMVtpXSA9IHQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpID09PSBuKSB0d2VlbjEucHVzaCh0KTtcbiAgICB9XG5cbiAgICBzY2hlZHVsZS50d2VlbiA9IHR3ZWVuMTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgdmFyIGlkID0gdGhpcy5faWQ7XG5cbiAgbmFtZSArPSBcIlwiO1xuXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xuICAgIHZhciB0d2VlbiA9IGdldCh0aGlzLm5vZGUoKSwgaWQpLnR3ZWVuO1xuICAgIGZvciAodmFyIGkgPSAwLCBuID0gdHdlZW4ubGVuZ3RoLCB0OyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAoKHQgPSB0d2VlbltpXSkubmFtZSA9PT0gbmFtZSkge1xuICAgICAgICByZXR1cm4gdC52YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gdGhpcy5lYWNoKCh2YWx1ZSA9PSBudWxsID8gdHdlZW5SZW1vdmUgOiB0d2VlbkZ1bmN0aW9uKShpZCwgbmFtZSwgdmFsdWUpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHR3ZWVuVmFsdWUodHJhbnNpdGlvbiwgbmFtZSwgdmFsdWUpIHtcbiAgdmFyIGlkID0gdHJhbnNpdGlvbi5faWQ7XG5cbiAgdHJhbnNpdGlvbi5lYWNoKGZ1bmN0aW9uKCkge1xuICAgIHZhciBzY2hlZHVsZSA9IHNldCh0aGlzLCBpZCk7XG4gICAgKHNjaGVkdWxlLnZhbHVlIHx8IChzY2hlZHVsZS52YWx1ZSA9IHt9KSlbbmFtZV0gPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9KTtcblxuICByZXR1cm4gZnVuY3Rpb24obm9kZSkge1xuICAgIHJldHVybiBnZXQobm9kZSwgaWQpLnZhbHVlW25hbWVdO1xuICB9O1xufVxuIiwgImltcG9ydCB7Y29sb3J9IGZyb20gXCJkMy1jb2xvclwiO1xuaW1wb3J0IHtpbnRlcnBvbGF0ZU51bWJlciwgaW50ZXJwb2xhdGVSZ2IsIGludGVycG9sYXRlU3RyaW5nfSBmcm9tIFwiZDMtaW50ZXJwb2xhdGVcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgYztcbiAgcmV0dXJuICh0eXBlb2YgYiA9PT0gXCJudW1iZXJcIiA/IGludGVycG9sYXRlTnVtYmVyXG4gICAgICA6IGIgaW5zdGFuY2VvZiBjb2xvciA/IGludGVycG9sYXRlUmdiXG4gICAgICA6IChjID0gY29sb3IoYikpID8gKGIgPSBjLCBpbnRlcnBvbGF0ZVJnYilcbiAgICAgIDogaW50ZXJwb2xhdGVTdHJpbmcpKGEsIGIpO1xufVxuIiwgImltcG9ydCB7aW50ZXJwb2xhdGVUcmFuc2Zvcm1TdmcgYXMgaW50ZXJwb2xhdGVUcmFuc2Zvcm19IGZyb20gXCJkMy1pbnRlcnBvbGF0ZVwiO1xuaW1wb3J0IHtuYW1lc3BhY2V9IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcbmltcG9ydCB7dHdlZW5WYWx1ZX0gZnJvbSBcIi4vdHdlZW4uanNcIjtcbmltcG9ydCBpbnRlcnBvbGF0ZSBmcm9tIFwiLi9pbnRlcnBvbGF0ZS5qc1wiO1xuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlKG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyUmVtb3ZlTlMoZnVsbG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckNvbnN0YW50KG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZTEpIHtcbiAgdmFyIHN0cmluZzAwLFxuICAgICAgc3RyaW5nMSA9IHZhbHVlMSArIFwiXCIsXG4gICAgICBpbnRlcnBvbGF0ZTA7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RyaW5nMCA9IHRoaXMuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyQ29uc3RhbnROUyhmdWxsbmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlMSkge1xuICB2YXIgc3RyaW5nMDAsXG4gICAgICBzdHJpbmcxID0gdmFsdWUxICsgXCJcIixcbiAgICAgIGludGVycG9sYXRlMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHJpbmcwID0gdGhpcy5nZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyRnVuY3Rpb24obmFtZSwgaW50ZXJwb2xhdGUsIHZhbHVlKSB7XG4gIHZhciBzdHJpbmcwMCxcbiAgICAgIHN0cmluZzEwLFxuICAgICAgaW50ZXJwb2xhdGUwO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0cmluZzAsIHZhbHVlMSA9IHZhbHVlKHRoaXMpLCBzdHJpbmcxO1xuICAgIGlmICh2YWx1ZTEgPT0gbnVsbCkgcmV0dXJuIHZvaWQgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgc3RyaW5nMCA9IHRoaXMuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICAgIHN0cmluZzEgPSB2YWx1ZTEgKyBcIlwiO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwICYmIHN0cmluZzEgPT09IHN0cmluZzEwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogKHN0cmluZzEwID0gc3RyaW5nMSwgaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0ckZ1bmN0aW9uTlMoZnVsbG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZSkge1xuICB2YXIgc3RyaW5nMDAsXG4gICAgICBzdHJpbmcxMCxcbiAgICAgIGludGVycG9sYXRlMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHJpbmcwLCB2YWx1ZTEgPSB2YWx1ZSh0aGlzKSwgc3RyaW5nMTtcbiAgICBpZiAodmFsdWUxID09IG51bGwpIHJldHVybiB2b2lkIHRoaXMucmVtb3ZlQXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsKTtcbiAgICBzdHJpbmcwID0gdGhpcy5nZXRBdHRyaWJ1dGVOUyhmdWxsbmFtZS5zcGFjZSwgZnVsbG5hbWUubG9jYWwpO1xuICAgIHN0cmluZzEgPSB2YWx1ZTEgKyBcIlwiO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwICYmIHN0cmluZzEgPT09IHN0cmluZzEwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogKHN0cmluZzEwID0gc3RyaW5nMSwgaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgdmFyIGZ1bGxuYW1lID0gbmFtZXNwYWNlKG5hbWUpLCBpID0gZnVsbG5hbWUgPT09IFwidHJhbnNmb3JtXCIgPyBpbnRlcnBvbGF0ZVRyYW5zZm9ybSA6IGludGVycG9sYXRlO1xuICByZXR1cm4gdGhpcy5hdHRyVHdlZW4obmFtZSwgdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gKGZ1bGxuYW1lLmxvY2FsID8gYXR0ckZ1bmN0aW9uTlMgOiBhdHRyRnVuY3Rpb24pKGZ1bGxuYW1lLCBpLCB0d2VlblZhbHVlKHRoaXMsIFwiYXR0ci5cIiArIG5hbWUsIHZhbHVlKSlcbiAgICAgIDogdmFsdWUgPT0gbnVsbCA/IChmdWxsbmFtZS5sb2NhbCA/IGF0dHJSZW1vdmVOUyA6IGF0dHJSZW1vdmUpKGZ1bGxuYW1lKVxuICAgICAgOiAoZnVsbG5hbWUubG9jYWwgPyBhdHRyQ29uc3RhbnROUyA6IGF0dHJDb25zdGFudCkoZnVsbG5hbWUsIGksIHZhbHVlKSk7XG59XG4iLCAiaW1wb3J0IHtuYW1lc3BhY2V9IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcblxuZnVuY3Rpb24gYXR0ckludGVycG9sYXRlKG5hbWUsIGkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCBpLmNhbGwodGhpcywgdCkpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRySW50ZXJwb2xhdGVOUyhmdWxsbmFtZSwgaSkge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHRoaXMuc2V0QXR0cmlidXRlTlMoZnVsbG5hbWUuc3BhY2UsIGZ1bGxuYW1lLmxvY2FsLCBpLmNhbGwodGhpcywgdCkpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRyVHdlZW5OUyhmdWxsbmFtZSwgdmFsdWUpIHtcbiAgdmFyIHQwLCBpMDtcbiAgZnVuY3Rpb24gdHdlZW4oKSB7XG4gICAgdmFyIGkgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChpICE9PSBpMCkgdDAgPSAoaTAgPSBpKSAmJiBhdHRySW50ZXJwb2xhdGVOUyhmdWxsbmFtZSwgaSk7XG4gICAgcmV0dXJuIHQwO1xuICB9XG4gIHR3ZWVuLl92YWx1ZSA9IHZhbHVlO1xuICByZXR1cm4gdHdlZW47XG59XG5cbmZ1bmN0aW9uIGF0dHJUd2VlbihuYW1lLCB2YWx1ZSkge1xuICB2YXIgdDAsIGkwO1xuICBmdW5jdGlvbiB0d2VlbigpIHtcbiAgICB2YXIgaSA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKGkgIT09IGkwKSB0MCA9IChpMCA9IGkpICYmIGF0dHJJbnRlcnBvbGF0ZShuYW1lLCBpKTtcbiAgICByZXR1cm4gdDA7XG4gIH1cbiAgdHdlZW4uX3ZhbHVlID0gdmFsdWU7XG4gIHJldHVybiB0d2Vlbjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgdmFyIGtleSA9IFwiYXR0ci5cIiArIG5hbWU7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgcmV0dXJuIChrZXkgPSB0aGlzLnR3ZWVuKGtleSkpICYmIGtleS5fdmFsdWU7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gdGhpcy50d2VlbihrZXksIG51bGwpO1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcjtcbiAgdmFyIGZ1bGxuYW1lID0gbmFtZXNwYWNlKG5hbWUpO1xuICByZXR1cm4gdGhpcy50d2VlbihrZXksIChmdWxsbmFtZS5sb2NhbCA/IGF0dHJUd2Vlbk5TIDogYXR0clR3ZWVuKShmdWxsbmFtZSwgdmFsdWUpKTtcbn1cbiIsICJpbXBvcnQge2dldCwgaW5pdH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZnVuY3Rpb24gZGVsYXlGdW5jdGlvbihpZCwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGluaXQodGhpcywgaWQpLmRlbGF5ID0gK3ZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGRlbGF5Q29uc3RhbnQoaWQsIHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9ICt2YWx1ZSwgZnVuY3Rpb24oKSB7XG4gICAgaW5pdCh0aGlzLCBpZCkuZGVsYXkgPSB2YWx1ZTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgdmFyIGlkID0gdGhpcy5faWQ7XG5cbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgID8gdGhpcy5lYWNoKCh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgID8gZGVsYXlGdW5jdGlvblxuICAgICAgICAgIDogZGVsYXlDb25zdGFudCkoaWQsIHZhbHVlKSlcbiAgICAgIDogZ2V0KHRoaXMubm9kZSgpLCBpZCkuZGVsYXk7XG59XG4iLCAiaW1wb3J0IHtnZXQsIHNldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZnVuY3Rpb24gZHVyYXRpb25GdW5jdGlvbihpZCwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHNldCh0aGlzLCBpZCkuZHVyYXRpb24gPSArdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZHVyYXRpb25Db25zdGFudChpZCwgdmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID0gK3ZhbHVlLCBmdW5jdGlvbigpIHtcbiAgICBzZXQodGhpcywgaWQpLmR1cmF0aW9uID0gdmFsdWU7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHZhciBpZCA9IHRoaXMuX2lkO1xuXG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMuZWFjaCgodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IGR1cmF0aW9uRnVuY3Rpb25cbiAgICAgICAgICA6IGR1cmF0aW9uQ29uc3RhbnQpKGlkLCB2YWx1ZSkpXG4gICAgICA6IGdldCh0aGlzLm5vZGUoKSwgaWQpLmR1cmF0aW9uO1xufVxuIiwgImltcG9ydCB7Z2V0LCBzZXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmZ1bmN0aW9uIGVhc2VDb25zdGFudChpZCwgdmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiKSB0aHJvdyBuZXcgRXJyb3I7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICBzZXQodGhpcywgaWQpLmVhc2UgPSB2YWx1ZTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgdmFyIGlkID0gdGhpcy5faWQ7XG5cbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgID8gdGhpcy5lYWNoKGVhc2VDb25zdGFudChpZCwgdmFsdWUpKVxuICAgICAgOiBnZXQodGhpcy5ub2RlKCksIGlkKS5lYXNlO1xufVxuIiwgImltcG9ydCB7c2V0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5mdW5jdGlvbiBlYXNlVmFyeWluZyhpZCwgdmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAodHlwZW9mIHYgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yO1xuICAgIHNldCh0aGlzLCBpZCkuZWFzZSA9IHY7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IEVycm9yO1xuICByZXR1cm4gdGhpcy5lYWNoKGVhc2VWYXJ5aW5nKHRoaXMuX2lkLCB2YWx1ZSkpO1xufVxuIiwgImltcG9ydCB7bWF0Y2hlcn0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuaW1wb3J0IHtUcmFuc2l0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihtYXRjaCkge1xuICBpZiAodHlwZW9mIG1hdGNoICE9PSBcImZ1bmN0aW9uXCIpIG1hdGNoID0gbWF0Y2hlcihtYXRjaCk7XG5cbiAgZm9yICh2YXIgZ3JvdXBzID0gdGhpcy5fZ3JvdXBzLCBtID0gZ3JvdXBzLmxlbmd0aCwgc3ViZ3JvdXBzID0gbmV3IEFycmF5KG0pLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBzdWJncm91cCA9IHN1Ymdyb3Vwc1tqXSA9IFtdLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKChub2RlID0gZ3JvdXBbaV0pICYmIG1hdGNoLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgZ3JvdXApKSB7XG4gICAgICAgIHN1Ymdyb3VwLnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKHN1Ymdyb3VwcywgdGhpcy5fcGFyZW50cywgdGhpcy5fbmFtZSwgdGhpcy5faWQpO1xufVxuIiwgImltcG9ydCB7VHJhbnNpdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odHJhbnNpdGlvbikge1xuICBpZiAodHJhbnNpdGlvbi5faWQgIT09IHRoaXMuX2lkKSB0aHJvdyBuZXcgRXJyb3I7XG5cbiAgZm9yICh2YXIgZ3JvdXBzMCA9IHRoaXMuX2dyb3VwcywgZ3JvdXBzMSA9IHRyYW5zaXRpb24uX2dyb3VwcywgbTAgPSBncm91cHMwLmxlbmd0aCwgbTEgPSBncm91cHMxLmxlbmd0aCwgbSA9IE1hdGgubWluKG0wLCBtMSksIG1lcmdlcyA9IG5ldyBBcnJheShtMCksIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAwID0gZ3JvdXBzMFtqXSwgZ3JvdXAxID0gZ3JvdXBzMVtqXSwgbiA9IGdyb3VwMC5sZW5ndGgsIG1lcmdlID0gbWVyZ2VzW2pdID0gbmV3IEFycmF5KG4pLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cDBbaV0gfHwgZ3JvdXAxW2ldKSB7XG4gICAgICAgIG1lcmdlW2ldID0gbm9kZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmb3IgKDsgaiA8IG0wOyArK2opIHtcbiAgICBtZXJnZXNbal0gPSBncm91cHMwW2pdO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKG1lcmdlcywgdGhpcy5fcGFyZW50cywgdGhpcy5fbmFtZSwgdGhpcy5faWQpO1xufVxuIiwgImltcG9ydCB7Z2V0LCBzZXQsIGluaXR9IGZyb20gXCIuL3NjaGVkdWxlLmpzXCI7XG5cbmZ1bmN0aW9uIHN0YXJ0KG5hbWUpIHtcbiAgcmV0dXJuIChuYW1lICsgXCJcIikudHJpbSgpLnNwbGl0KC9efFxccysvKS5ldmVyeShmdW5jdGlvbih0KSB7XG4gICAgdmFyIGkgPSB0LmluZGV4T2YoXCIuXCIpO1xuICAgIGlmIChpID49IDApIHQgPSB0LnNsaWNlKDAsIGkpO1xuICAgIHJldHVybiAhdCB8fCB0ID09PSBcInN0YXJ0XCI7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBvbkZ1bmN0aW9uKGlkLCBuYW1lLCBsaXN0ZW5lcikge1xuICB2YXIgb24wLCBvbjEsIHNpdCA9IHN0YXJ0KG5hbWUpID8gaW5pdCA6IHNldDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzY2hlZHVsZSA9IHNpdCh0aGlzLCBpZCksXG4gICAgICAgIG9uID0gc2NoZWR1bGUub247XG5cbiAgICAvLyBJZiB0aGlzIG5vZGUgc2hhcmVkIGEgZGlzcGF0Y2ggd2l0aCB0aGUgcHJldmlvdXMgbm9kZSxcbiAgICAvLyBqdXN0IGFzc2lnbiB0aGUgdXBkYXRlZCBzaGFyZWQgZGlzcGF0Y2ggYW5kIHdlXHUyMDE5cmUgZG9uZSFcbiAgICAvLyBPdGhlcndpc2UsIGNvcHktb24td3JpdGUuXG4gICAgaWYgKG9uICE9PSBvbjApIChvbjEgPSAob24wID0gb24pLmNvcHkoKSkub24obmFtZSwgbGlzdGVuZXIpO1xuXG4gICAgc2NoZWR1bGUub24gPSBvbjE7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIGxpc3RlbmVyKSB7XG4gIHZhciBpZCA9IHRoaXMuX2lkO1xuXG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoIDwgMlxuICAgICAgPyBnZXQodGhpcy5ub2RlKCksIGlkKS5vbi5vbihuYW1lKVxuICAgICAgOiB0aGlzLmVhY2gob25GdW5jdGlvbihpZCwgbmFtZSwgbGlzdGVuZXIpKTtcbn1cbiIsICJmdW5jdGlvbiByZW1vdmVGdW5jdGlvbihpZCkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcbiAgICBmb3IgKHZhciBpIGluIHRoaXMuX190cmFuc2l0aW9uKSBpZiAoK2kgIT09IGlkKSByZXR1cm47XG4gICAgaWYgKHBhcmVudCkgcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMub24oXCJlbmQucmVtb3ZlXCIsIHJlbW92ZUZ1bmN0aW9uKHRoaXMuX2lkKSk7XG59XG4iLCAiaW1wb3J0IHtzZWxlY3Rvcn0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuaW1wb3J0IHtUcmFuc2l0aW9ufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuaW1wb3J0IHNjaGVkdWxlLCB7Z2V0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzZWxlY3QpIHtcbiAgdmFyIG5hbWUgPSB0aGlzLl9uYW1lLFxuICAgICAgaWQgPSB0aGlzLl9pZDtcblxuICBpZiAodHlwZW9mIHNlbGVjdCAhPT0gXCJmdW5jdGlvblwiKSBzZWxlY3QgPSBzZWxlY3RvcihzZWxlY3QpO1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIHN1Ymdyb3VwcyA9IG5ldyBBcnJheShtKSwgaiA9IDA7IGogPCBtOyArK2opIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgbiA9IGdyb3VwLmxlbmd0aCwgc3ViZ3JvdXAgPSBzdWJncm91cHNbal0gPSBuZXcgQXJyYXkobiksIG5vZGUsIHN1Ym5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgKHN1Ym5vZGUgPSBzZWxlY3QuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBncm91cCkpKSB7XG4gICAgICAgIGlmIChcIl9fZGF0YV9fXCIgaW4gbm9kZSkgc3Vibm9kZS5fX2RhdGFfXyA9IG5vZGUuX19kYXRhX187XG4gICAgICAgIHN1Ymdyb3VwW2ldID0gc3Vibm9kZTtcbiAgICAgICAgc2NoZWR1bGUoc3ViZ3JvdXBbaV0sIG5hbWUsIGlkLCBpLCBzdWJncm91cCwgZ2V0KG5vZGUsIGlkKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKHN1Ymdyb3VwcywgdGhpcy5fcGFyZW50cywgbmFtZSwgaWQpO1xufVxuIiwgImltcG9ydCB7c2VsZWN0b3JBbGx9IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcbmltcG9ydCB7VHJhbnNpdGlvbn0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCBzY2hlZHVsZSwge2dldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc2VsZWN0KSB7XG4gIHZhciBuYW1lID0gdGhpcy5fbmFtZSxcbiAgICAgIGlkID0gdGhpcy5faWQ7XG5cbiAgaWYgKHR5cGVvZiBzZWxlY3QgIT09IFwiZnVuY3Rpb25cIikgc2VsZWN0ID0gc2VsZWN0b3JBbGwoc2VsZWN0KTtcblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBzdWJncm91cHMgPSBbXSwgcGFyZW50cyA9IFtdLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBmb3IgKHZhciBjaGlsZHJlbiA9IHNlbGVjdC5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGksIGdyb3VwKSwgY2hpbGQsIGluaGVyaXQgPSBnZXQobm9kZSwgaWQpLCBrID0gMCwgbCA9IGNoaWxkcmVuLmxlbmd0aDsgayA8IGw7ICsraykge1xuICAgICAgICAgIGlmIChjaGlsZCA9IGNoaWxkcmVuW2tdKSB7XG4gICAgICAgICAgICBzY2hlZHVsZShjaGlsZCwgbmFtZSwgaWQsIGssIGNoaWxkcmVuLCBpbmhlcml0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3ViZ3JvdXBzLnB1c2goY2hpbGRyZW4pO1xuICAgICAgICBwYXJlbnRzLnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKHN1Ymdyb3VwcywgcGFyZW50cywgbmFtZSwgaWQpO1xufVxuIiwgImltcG9ydCB7c2VsZWN0aW9ufSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5cbnZhciBTZWxlY3Rpb24gPSBzZWxlY3Rpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBTZWxlY3Rpb24odGhpcy5fZ3JvdXBzLCB0aGlzLl9wYXJlbnRzKTtcbn1cbiIsICJpbXBvcnQge2ludGVycG9sYXRlVHJhbnNmb3JtQ3NzIGFzIGludGVycG9sYXRlVHJhbnNmb3JtfSBmcm9tIFwiZDMtaW50ZXJwb2xhdGVcIjtcbmltcG9ydCB7c3R5bGV9IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcbmltcG9ydCB7c2V0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuaW1wb3J0IHt0d2VlblZhbHVlfSBmcm9tIFwiLi90d2Vlbi5qc1wiO1xuaW1wb3J0IGludGVycG9sYXRlIGZyb20gXCIuL2ludGVycG9sYXRlLmpzXCI7XG5cbmZ1bmN0aW9uIHN0eWxlTnVsbChuYW1lLCBpbnRlcnBvbGF0ZSkge1xuICB2YXIgc3RyaW5nMDAsXG4gICAgICBzdHJpbmcxMCxcbiAgICAgIGludGVycG9sYXRlMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHJpbmcwID0gc3R5bGUodGhpcywgbmFtZSksXG4gICAgICAgIHN0cmluZzEgPSAodGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKSwgc3R5bGUodGhpcywgbmFtZSkpO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwICYmIHN0cmluZzEgPT09IHN0cmluZzEwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCBzdHJpbmcxMCA9IHN0cmluZzEpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzdHlsZVJlbW92ZShuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzdHlsZUNvbnN0YW50KG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZTEpIHtcbiAgdmFyIHN0cmluZzAwLFxuICAgICAgc3RyaW5nMSA9IHZhbHVlMSArIFwiXCIsXG4gICAgICBpbnRlcnBvbGF0ZTA7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RyaW5nMCA9IHN0eWxlKHRoaXMsIG5hbWUpO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzdHlsZUZ1bmN0aW9uKG5hbWUsIGludGVycG9sYXRlLCB2YWx1ZSkge1xuICB2YXIgc3RyaW5nMDAsXG4gICAgICBzdHJpbmcxMCxcbiAgICAgIGludGVycG9sYXRlMDtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHJpbmcwID0gc3R5bGUodGhpcywgbmFtZSksXG4gICAgICAgIHZhbHVlMSA9IHZhbHVlKHRoaXMpLFxuICAgICAgICBzdHJpbmcxID0gdmFsdWUxICsgXCJcIjtcbiAgICBpZiAodmFsdWUxID09IG51bGwpIHN0cmluZzEgPSB2YWx1ZTEgPSAodGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuYW1lKSwgc3R5bGUodGhpcywgbmFtZSkpO1xuICAgIHJldHVybiBzdHJpbmcwID09PSBzdHJpbmcxID8gbnVsbFxuICAgICAgICA6IHN0cmluZzAgPT09IHN0cmluZzAwICYmIHN0cmluZzEgPT09IHN0cmluZzEwID8gaW50ZXJwb2xhdGUwXG4gICAgICAgIDogKHN0cmluZzEwID0gc3RyaW5nMSwgaW50ZXJwb2xhdGUwID0gaW50ZXJwb2xhdGUoc3RyaW5nMDAgPSBzdHJpbmcwLCB2YWx1ZTEpKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVNYXliZVJlbW92ZShpZCwgbmFtZSkge1xuICB2YXIgb24wLCBvbjEsIGxpc3RlbmVyMCwga2V5ID0gXCJzdHlsZS5cIiArIG5hbWUsIGV2ZW50ID0gXCJlbmQuXCIgKyBrZXksIHJlbW92ZTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzY2hlZHVsZSA9IHNldCh0aGlzLCBpZCksXG4gICAgICAgIG9uID0gc2NoZWR1bGUub24sXG4gICAgICAgIGxpc3RlbmVyID0gc2NoZWR1bGUudmFsdWVba2V5XSA9PSBudWxsID8gcmVtb3ZlIHx8IChyZW1vdmUgPSBzdHlsZVJlbW92ZShuYW1lKSkgOiB1bmRlZmluZWQ7XG5cbiAgICAvLyBJZiB0aGlzIG5vZGUgc2hhcmVkIGEgZGlzcGF0Y2ggd2l0aCB0aGUgcHJldmlvdXMgbm9kZSxcbiAgICAvLyBqdXN0IGFzc2lnbiB0aGUgdXBkYXRlZCBzaGFyZWQgZGlzcGF0Y2ggYW5kIHdlXHUyMDE5cmUgZG9uZSFcbiAgICAvLyBPdGhlcndpc2UsIGNvcHktb24td3JpdGUuXG4gICAgaWYgKG9uICE9PSBvbjAgfHwgbGlzdGVuZXIwICE9PSBsaXN0ZW5lcikgKG9uMSA9IChvbjAgPSBvbikuY29weSgpKS5vbihldmVudCwgbGlzdGVuZXIwID0gbGlzdGVuZXIpO1xuXG4gICAgc2NoZWR1bGUub24gPSBvbjE7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICB2YXIgaSA9IChuYW1lICs9IFwiXCIpID09PSBcInRyYW5zZm9ybVwiID8gaW50ZXJwb2xhdGVUcmFuc2Zvcm0gOiBpbnRlcnBvbGF0ZTtcbiAgcmV0dXJuIHZhbHVlID09IG51bGwgPyB0aGlzXG4gICAgICAuc3R5bGVUd2VlbihuYW1lLCBzdHlsZU51bGwobmFtZSwgaSkpXG4gICAgICAub24oXCJlbmQuc3R5bGUuXCIgKyBuYW1lLCBzdHlsZVJlbW92ZShuYW1lKSlcbiAgICA6IHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiID8gdGhpc1xuICAgICAgLnN0eWxlVHdlZW4obmFtZSwgc3R5bGVGdW5jdGlvbihuYW1lLCBpLCB0d2VlblZhbHVlKHRoaXMsIFwic3R5bGUuXCIgKyBuYW1lLCB2YWx1ZSkpKVxuICAgICAgLmVhY2goc3R5bGVNYXliZVJlbW92ZSh0aGlzLl9pZCwgbmFtZSkpXG4gICAgOiB0aGlzXG4gICAgICAuc3R5bGVUd2VlbihuYW1lLCBzdHlsZUNvbnN0YW50KG5hbWUsIGksIHZhbHVlKSwgcHJpb3JpdHkpXG4gICAgICAub24oXCJlbmQuc3R5bGUuXCIgKyBuYW1lLCBudWxsKTtcbn1cbiIsICJmdW5jdGlvbiBzdHlsZUludGVycG9sYXRlKG5hbWUsIGksIHByaW9yaXR5KSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCBpLmNhbGwodGhpcywgdCksIHByaW9yaXR5KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3R5bGVUd2VlbihuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpIHtcbiAgdmFyIHQsIGkwO1xuICBmdW5jdGlvbiB0d2VlbigpIHtcbiAgICB2YXIgaSA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKGkgIT09IGkwKSB0ID0gKGkwID0gaSkgJiYgc3R5bGVJbnRlcnBvbGF0ZShuYW1lLCBpLCBwcmlvcml0eSk7XG4gICAgcmV0dXJuIHQ7XG4gIH1cbiAgdHdlZW4uX3ZhbHVlID0gdmFsdWU7XG4gIHJldHVybiB0d2Vlbjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7XG4gIHZhciBrZXkgPSBcInN0eWxlLlwiICsgKG5hbWUgKz0gXCJcIik7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgcmV0dXJuIChrZXkgPSB0aGlzLnR3ZWVuKGtleSkpICYmIGtleS5fdmFsdWU7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gdGhpcy50d2VlbihrZXksIG51bGwpO1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcjtcbiAgcmV0dXJuIHRoaXMudHdlZW4oa2V5LCBzdHlsZVR3ZWVuKG5hbWUsIHZhbHVlLCBwcmlvcml0eSA9PSBudWxsID8gXCJcIiA6IHByaW9yaXR5KSk7XG59XG4iLCAiaW1wb3J0IHt0d2VlblZhbHVlfSBmcm9tIFwiLi90d2Vlbi5qc1wiO1xuXG5mdW5jdGlvbiB0ZXh0Q29uc3RhbnQodmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdGV4dEZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdmFsdWUxID0gdmFsdWUodGhpcyk7XG4gICAgdGhpcy50ZXh0Q29udGVudCA9IHZhbHVlMSA9PSBudWxsID8gXCJcIiA6IHZhbHVlMTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIHRoaXMudHdlZW4oXCJ0ZXh0XCIsIHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IHRleHRGdW5jdGlvbih0d2VlblZhbHVlKHRoaXMsIFwidGV4dFwiLCB2YWx1ZSkpXG4gICAgICA6IHRleHRDb25zdGFudCh2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlICsgXCJcIikpO1xufVxuIiwgImZ1bmN0aW9uIHRleHRJbnRlcnBvbGF0ZShpKSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy50ZXh0Q29udGVudCA9IGkuY2FsbCh0aGlzLCB0KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdGV4dFR3ZWVuKHZhbHVlKSB7XG4gIHZhciB0MCwgaTA7XG4gIGZ1bmN0aW9uIHR3ZWVuKCkge1xuICAgIHZhciBpID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoaSAhPT0gaTApIHQwID0gKGkwID0gaSkgJiYgdGV4dEludGVycG9sYXRlKGkpO1xuICAgIHJldHVybiB0MDtcbiAgfVxuICB0d2Vlbi5fdmFsdWUgPSB2YWx1ZTtcbiAgcmV0dXJuIHR3ZWVuO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbih2YWx1ZSkge1xuICB2YXIga2V5ID0gXCJ0ZXh0XCI7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMSkgcmV0dXJuIChrZXkgPSB0aGlzLnR3ZWVuKGtleSkpICYmIGtleS5fdmFsdWU7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gdGhpcy50d2VlbihrZXksIG51bGwpO1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBFcnJvcjtcbiAgcmV0dXJuIHRoaXMudHdlZW4oa2V5LCB0ZXh0VHdlZW4odmFsdWUpKTtcbn1cbiIsICJpbXBvcnQge1RyYW5zaXRpb24sIG5ld0lkfSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuaW1wb3J0IHNjaGVkdWxlLCB7Z2V0fSBmcm9tIFwiLi9zY2hlZHVsZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgdmFyIG5hbWUgPSB0aGlzLl9uYW1lLFxuICAgICAgaWQwID0gdGhpcy5faWQsXG4gICAgICBpZDEgPSBuZXdJZCgpO1xuXG4gIGZvciAodmFyIGdyb3VwcyA9IHRoaXMuX2dyb3VwcywgbSA9IGdyb3Vwcy5sZW5ndGgsIGogPSAwOyBqIDwgbTsgKytqKSB7XG4gICAgZm9yICh2YXIgZ3JvdXAgPSBncm91cHNbal0sIG4gPSBncm91cC5sZW5ndGgsIG5vZGUsIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgIHZhciBpbmhlcml0ID0gZ2V0KG5vZGUsIGlkMCk7XG4gICAgICAgIHNjaGVkdWxlKG5vZGUsIG5hbWUsIGlkMSwgaSwgZ3JvdXAsIHtcbiAgICAgICAgICB0aW1lOiBpbmhlcml0LnRpbWUgKyBpbmhlcml0LmRlbGF5ICsgaW5oZXJpdC5kdXJhdGlvbixcbiAgICAgICAgICBkZWxheTogMCxcbiAgICAgICAgICBkdXJhdGlvbjogaW5oZXJpdC5kdXJhdGlvbixcbiAgICAgICAgICBlYXNlOiBpbmhlcml0LmVhc2VcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKGdyb3VwcywgdGhpcy5fcGFyZW50cywgbmFtZSwgaWQxKTtcbn1cbiIsICJpbXBvcnQge3NldH0gZnJvbSBcIi4vc2NoZWR1bGUuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIHZhciBvbjAsIG9uMSwgdGhhdCA9IHRoaXMsIGlkID0gdGhhdC5faWQsIHNpemUgPSB0aGF0LnNpemUoKTtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciBjYW5jZWwgPSB7dmFsdWU6IHJlamVjdH0sXG4gICAgICAgIGVuZCA9IHt2YWx1ZTogZnVuY3Rpb24oKSB7IGlmICgtLXNpemUgPT09IDApIHJlc29sdmUoKTsgfX07XG5cbiAgICB0aGF0LmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2NoZWR1bGUgPSBzZXQodGhpcywgaWQpLFxuICAgICAgICAgIG9uID0gc2NoZWR1bGUub247XG5cbiAgICAgIC8vIElmIHRoaXMgbm9kZSBzaGFyZWQgYSBkaXNwYXRjaCB3aXRoIHRoZSBwcmV2aW91cyBub2RlLFxuICAgICAgLy8ganVzdCBhc3NpZ24gdGhlIHVwZGF0ZWQgc2hhcmVkIGRpc3BhdGNoIGFuZCB3ZVx1MjAxOXJlIGRvbmUhXG4gICAgICAvLyBPdGhlcndpc2UsIGNvcHktb24td3JpdGUuXG4gICAgICBpZiAob24gIT09IG9uMCkge1xuICAgICAgICBvbjEgPSAob24wID0gb24pLmNvcHkoKTtcbiAgICAgICAgb24xLl8uY2FuY2VsLnB1c2goY2FuY2VsKTtcbiAgICAgICAgb24xLl8uaW50ZXJydXB0LnB1c2goY2FuY2VsKTtcbiAgICAgICAgb24xLl8uZW5kLnB1c2goZW5kKTtcbiAgICAgIH1cblxuICAgICAgc2NoZWR1bGUub24gPSBvbjE7XG4gICAgfSk7XG5cbiAgICAvLyBUaGUgc2VsZWN0aW9uIHdhcyBlbXB0eSwgcmVzb2x2ZSBlbmQgaW1tZWRpYXRlbHlcbiAgICBpZiAoc2l6ZSA9PT0gMCkgcmVzb2x2ZSgpO1xuICB9KTtcbn1cbiIsICJpbXBvcnQge3NlbGVjdGlvbn0gZnJvbSBcImQzLXNlbGVjdGlvblwiO1xuaW1wb3J0IHRyYW5zaXRpb25fYXR0ciBmcm9tIFwiLi9hdHRyLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9hdHRyVHdlZW4gZnJvbSBcIi4vYXR0clR3ZWVuLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9kZWxheSBmcm9tIFwiLi9kZWxheS5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fZHVyYXRpb24gZnJvbSBcIi4vZHVyYXRpb24uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX2Vhc2UgZnJvbSBcIi4vZWFzZS5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fZWFzZVZhcnlpbmcgZnJvbSBcIi4vZWFzZVZhcnlpbmcuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX2ZpbHRlciBmcm9tIFwiLi9maWx0ZXIuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX21lcmdlIGZyb20gXCIuL21lcmdlLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9vbiBmcm9tIFwiLi9vbi5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fcmVtb3ZlIGZyb20gXCIuL3JlbW92ZS5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fc2VsZWN0IGZyb20gXCIuL3NlbGVjdC5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fc2VsZWN0QWxsIGZyb20gXCIuL3NlbGVjdEFsbC5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fc2VsZWN0aW9uIGZyb20gXCIuL3NlbGVjdGlvbi5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fc3R5bGUgZnJvbSBcIi4vc3R5bGUuanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3N0eWxlVHdlZW4gZnJvbSBcIi4vc3R5bGVUd2Vlbi5qc1wiO1xuaW1wb3J0IHRyYW5zaXRpb25fdGV4dCBmcm9tIFwiLi90ZXh0LmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl90ZXh0VHdlZW4gZnJvbSBcIi4vdGV4dFR3ZWVuLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl90cmFuc2l0aW9uIGZyb20gXCIuL3RyYW5zaXRpb24uanNcIjtcbmltcG9ydCB0cmFuc2l0aW9uX3R3ZWVuIGZyb20gXCIuL3R3ZWVuLmpzXCI7XG5pbXBvcnQgdHJhbnNpdGlvbl9lbmQgZnJvbSBcIi4vZW5kLmpzXCI7XG5cbnZhciBpZCA9IDA7XG5cbmV4cG9ydCBmdW5jdGlvbiBUcmFuc2l0aW9uKGdyb3VwcywgcGFyZW50cywgbmFtZSwgaWQpIHtcbiAgdGhpcy5fZ3JvdXBzID0gZ3JvdXBzO1xuICB0aGlzLl9wYXJlbnRzID0gcGFyZW50cztcbiAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gIHRoaXMuX2lkID0gaWQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRyYW5zaXRpb24obmFtZSkge1xuICByZXR1cm4gc2VsZWN0aW9uKCkudHJhbnNpdGlvbihuYW1lKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5ld0lkKCkge1xuICByZXR1cm4gKytpZDtcbn1cblxudmFyIHNlbGVjdGlvbl9wcm90b3R5cGUgPSBzZWxlY3Rpb24ucHJvdG90eXBlO1xuXG5UcmFuc2l0aW9uLnByb3RvdHlwZSA9IHRyYW5zaXRpb24ucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogVHJhbnNpdGlvbixcbiAgc2VsZWN0OiB0cmFuc2l0aW9uX3NlbGVjdCxcbiAgc2VsZWN0QWxsOiB0cmFuc2l0aW9uX3NlbGVjdEFsbCxcbiAgc2VsZWN0Q2hpbGQ6IHNlbGVjdGlvbl9wcm90b3R5cGUuc2VsZWN0Q2hpbGQsXG4gIHNlbGVjdENoaWxkcmVuOiBzZWxlY3Rpb25fcHJvdG90eXBlLnNlbGVjdENoaWxkcmVuLFxuICBmaWx0ZXI6IHRyYW5zaXRpb25fZmlsdGVyLFxuICBtZXJnZTogdHJhbnNpdGlvbl9tZXJnZSxcbiAgc2VsZWN0aW9uOiB0cmFuc2l0aW9uX3NlbGVjdGlvbixcbiAgdHJhbnNpdGlvbjogdHJhbnNpdGlvbl90cmFuc2l0aW9uLFxuICBjYWxsOiBzZWxlY3Rpb25fcHJvdG90eXBlLmNhbGwsXG4gIG5vZGVzOiBzZWxlY3Rpb25fcHJvdG90eXBlLm5vZGVzLFxuICBub2RlOiBzZWxlY3Rpb25fcHJvdG90eXBlLm5vZGUsXG4gIHNpemU6IHNlbGVjdGlvbl9wcm90b3R5cGUuc2l6ZSxcbiAgZW1wdHk6IHNlbGVjdGlvbl9wcm90b3R5cGUuZW1wdHksXG4gIGVhY2g6IHNlbGVjdGlvbl9wcm90b3R5cGUuZWFjaCxcbiAgb246IHRyYW5zaXRpb25fb24sXG4gIGF0dHI6IHRyYW5zaXRpb25fYXR0cixcbiAgYXR0clR3ZWVuOiB0cmFuc2l0aW9uX2F0dHJUd2VlbixcbiAgc3R5bGU6IHRyYW5zaXRpb25fc3R5bGUsXG4gIHN0eWxlVHdlZW46IHRyYW5zaXRpb25fc3R5bGVUd2VlbixcbiAgdGV4dDogdHJhbnNpdGlvbl90ZXh0LFxuICB0ZXh0VHdlZW46IHRyYW5zaXRpb25fdGV4dFR3ZWVuLFxuICByZW1vdmU6IHRyYW5zaXRpb25fcmVtb3ZlLFxuICB0d2VlbjogdHJhbnNpdGlvbl90d2VlbixcbiAgZGVsYXk6IHRyYW5zaXRpb25fZGVsYXksXG4gIGR1cmF0aW9uOiB0cmFuc2l0aW9uX2R1cmF0aW9uLFxuICBlYXNlOiB0cmFuc2l0aW9uX2Vhc2UsXG4gIGVhc2VWYXJ5aW5nOiB0cmFuc2l0aW9uX2Vhc2VWYXJ5aW5nLFxuICBlbmQ6IHRyYW5zaXRpb25fZW5kLFxuICBbU3ltYm9sLml0ZXJhdG9yXTogc2VsZWN0aW9uX3Byb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdXG59O1xuIiwgImV4cG9ydCBmdW5jdGlvbiBjdWJpY0luKHQpIHtcbiAgcmV0dXJuIHQgKiB0ICogdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGN1YmljT3V0KHQpIHtcbiAgcmV0dXJuIC0tdCAqIHQgKiB0ICsgMTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGN1YmljSW5PdXQodCkge1xuICByZXR1cm4gKCh0ICo9IDIpIDw9IDEgPyB0ICogdCAqIHQgOiAodCAtPSAyKSAqIHQgKiB0ICsgMikgLyAyO1xufVxuIiwgImltcG9ydCB7VHJhbnNpdGlvbiwgbmV3SWR9IGZyb20gXCIuLi90cmFuc2l0aW9uL2luZGV4LmpzXCI7XG5pbXBvcnQgc2NoZWR1bGUgZnJvbSBcIi4uL3RyYW5zaXRpb24vc2NoZWR1bGUuanNcIjtcbmltcG9ydCB7ZWFzZUN1YmljSW5PdXR9IGZyb20gXCJkMy1lYXNlXCI7XG5pbXBvcnQge25vd30gZnJvbSBcImQzLXRpbWVyXCI7XG5cbnZhciBkZWZhdWx0VGltaW5nID0ge1xuICB0aW1lOiBudWxsLCAvLyBTZXQgb24gdXNlLlxuICBkZWxheTogMCxcbiAgZHVyYXRpb246IDI1MCxcbiAgZWFzZTogZWFzZUN1YmljSW5PdXRcbn07XG5cbmZ1bmN0aW9uIGluaGVyaXQobm9kZSwgaWQpIHtcbiAgdmFyIHRpbWluZztcbiAgd2hpbGUgKCEodGltaW5nID0gbm9kZS5fX3RyYW5zaXRpb24pIHx8ICEodGltaW5nID0gdGltaW5nW2lkXSkpIHtcbiAgICBpZiAoIShub2RlID0gbm9kZS5wYXJlbnROb2RlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGB0cmFuc2l0aW9uICR7aWR9IG5vdCBmb3VuZGApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGltaW5nO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihuYW1lKSB7XG4gIHZhciBpZCxcbiAgICAgIHRpbWluZztcblxuICBpZiAobmFtZSBpbnN0YW5jZW9mIFRyYW5zaXRpb24pIHtcbiAgICBpZCA9IG5hbWUuX2lkLCBuYW1lID0gbmFtZS5fbmFtZTtcbiAgfSBlbHNlIHtcbiAgICBpZCA9IG5ld0lkKCksICh0aW1pbmcgPSBkZWZhdWx0VGltaW5nKS50aW1lID0gbm93KCksIG5hbWUgPSBuYW1lID09IG51bGwgPyBudWxsIDogbmFtZSArIFwiXCI7XG4gIH1cblxuICBmb3IgKHZhciBncm91cHMgPSB0aGlzLl9ncm91cHMsIG0gPSBncm91cHMubGVuZ3RoLCBqID0gMDsgaiA8IG07ICsraikge1xuICAgIGZvciAodmFyIGdyb3VwID0gZ3JvdXBzW2pdLCBuID0gZ3JvdXAubGVuZ3RoLCBub2RlLCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBzY2hlZHVsZShub2RlLCBuYW1lLCBpZCwgaSwgZ3JvdXAsIHRpbWluZyB8fCBpbmhlcml0KG5vZGUsIGlkKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uKGdyb3VwcywgdGhpcy5fcGFyZW50cywgbmFtZSwgaWQpO1xufVxuIiwgImltcG9ydCB7c2VsZWN0aW9ufSBmcm9tIFwiZDMtc2VsZWN0aW9uXCI7XG5pbXBvcnQgc2VsZWN0aW9uX2ludGVycnVwdCBmcm9tIFwiLi9pbnRlcnJ1cHQuanNcIjtcbmltcG9ydCBzZWxlY3Rpb25fdHJhbnNpdGlvbiBmcm9tIFwiLi90cmFuc2l0aW9uLmpzXCI7XG5cbnNlbGVjdGlvbi5wcm90b3R5cGUuaW50ZXJydXB0ID0gc2VsZWN0aW9uX2ludGVycnVwdDtcbnNlbGVjdGlvbi5wcm90b3R5cGUudHJhbnNpdGlvbiA9IHNlbGVjdGlvbl90cmFuc2l0aW9uO1xuIiwgImltcG9ydCB7ZGlzcGF0Y2h9IGZyb20gXCJkMy1kaXNwYXRjaFwiO1xuaW1wb3J0IHtkcmFnRGlzYWJsZSwgZHJhZ0VuYWJsZX0gZnJvbSBcImQzLWRyYWdcIjtcbmltcG9ydCB7aW50ZXJwb2xhdGV9IGZyb20gXCJkMy1pbnRlcnBvbGF0ZVwiO1xuaW1wb3J0IHtwb2ludGVyLCBzZWxlY3R9IGZyb20gXCJkMy1zZWxlY3Rpb25cIjtcbmltcG9ydCB7aW50ZXJydXB0fSBmcm9tIFwiZDMtdHJhbnNpdGlvblwiO1xuaW1wb3J0IGNvbnN0YW50IGZyb20gXCIuL2NvbnN0YW50LmpzXCI7XG5pbXBvcnQgQnJ1c2hFdmVudCBmcm9tIFwiLi9ldmVudC5qc1wiO1xuaW1wb3J0IG5vZXZlbnQsIHtub3Byb3BhZ2F0aW9ufSBmcm9tIFwiLi9ub2V2ZW50LmpzXCI7XG5cbnZhciBNT0RFX0RSQUcgPSB7bmFtZTogXCJkcmFnXCJ9LFxuICAgIE1PREVfU1BBQ0UgPSB7bmFtZTogXCJzcGFjZVwifSxcbiAgICBNT0RFX0hBTkRMRSA9IHtuYW1lOiBcImhhbmRsZVwifSxcbiAgICBNT0RFX0NFTlRFUiA9IHtuYW1lOiBcImNlbnRlclwifTtcblxuY29uc3Qge2FicywgbWF4LCBtaW59ID0gTWF0aDtcblxuZnVuY3Rpb24gbnVtYmVyMShlKSB7XG4gIHJldHVybiBbK2VbMF0sICtlWzFdXTtcbn1cblxuZnVuY3Rpb24gbnVtYmVyMihlKSB7XG4gIHJldHVybiBbbnVtYmVyMShlWzBdKSwgbnVtYmVyMShlWzFdKV07XG59XG5cbnZhciBYID0ge1xuICBuYW1lOiBcInhcIixcbiAgaGFuZGxlczogW1wid1wiLCBcImVcIl0ubWFwKHR5cGUpLFxuICBpbnB1dDogZnVuY3Rpb24oeCwgZSkgeyByZXR1cm4geCA9PSBudWxsID8gbnVsbCA6IFtbK3hbMF0sIGVbMF1bMV1dLCBbK3hbMV0sIGVbMV1bMV1dXTsgfSxcbiAgb3V0cHV0OiBmdW5jdGlvbih4eSkgeyByZXR1cm4geHkgJiYgW3h5WzBdWzBdLCB4eVsxXVswXV07IH1cbn07XG5cbnZhciBZID0ge1xuICBuYW1lOiBcInlcIixcbiAgaGFuZGxlczogW1wiblwiLCBcInNcIl0ubWFwKHR5cGUpLFxuICBpbnB1dDogZnVuY3Rpb24oeSwgZSkgeyByZXR1cm4geSA9PSBudWxsID8gbnVsbCA6IFtbZVswXVswXSwgK3lbMF1dLCBbZVsxXVswXSwgK3lbMV1dXTsgfSxcbiAgb3V0cHV0OiBmdW5jdGlvbih4eSkgeyByZXR1cm4geHkgJiYgW3h5WzBdWzFdLCB4eVsxXVsxXV07IH1cbn07XG5cbnZhciBYWSA9IHtcbiAgbmFtZTogXCJ4eVwiLFxuICBoYW5kbGVzOiBbXCJuXCIsIFwid1wiLCBcImVcIiwgXCJzXCIsIFwibndcIiwgXCJuZVwiLCBcInN3XCIsIFwic2VcIl0ubWFwKHR5cGUpLFxuICBpbnB1dDogZnVuY3Rpb24oeHkpIHsgcmV0dXJuIHh5ID09IG51bGwgPyBudWxsIDogbnVtYmVyMih4eSk7IH0sXG4gIG91dHB1dDogZnVuY3Rpb24oeHkpIHsgcmV0dXJuIHh5OyB9XG59O1xuXG52YXIgY3Vyc29ycyA9IHtcbiAgb3ZlcmxheTogXCJjcm9zc2hhaXJcIixcbiAgc2VsZWN0aW9uOiBcIm1vdmVcIixcbiAgbjogXCJucy1yZXNpemVcIixcbiAgZTogXCJldy1yZXNpemVcIixcbiAgczogXCJucy1yZXNpemVcIixcbiAgdzogXCJldy1yZXNpemVcIixcbiAgbnc6IFwibndzZS1yZXNpemVcIixcbiAgbmU6IFwibmVzdy1yZXNpemVcIixcbiAgc2U6IFwibndzZS1yZXNpemVcIixcbiAgc3c6IFwibmVzdy1yZXNpemVcIlxufTtcblxudmFyIGZsaXBYID0ge1xuICBlOiBcIndcIixcbiAgdzogXCJlXCIsXG4gIG53OiBcIm5lXCIsXG4gIG5lOiBcIm53XCIsXG4gIHNlOiBcInN3XCIsXG4gIHN3OiBcInNlXCJcbn07XG5cbnZhciBmbGlwWSA9IHtcbiAgbjogXCJzXCIsXG4gIHM6IFwiblwiLFxuICBudzogXCJzd1wiLFxuICBuZTogXCJzZVwiLFxuICBzZTogXCJuZVwiLFxuICBzdzogXCJud1wiXG59O1xuXG52YXIgc2lnbnNYID0ge1xuICBvdmVybGF5OiArMSxcbiAgc2VsZWN0aW9uOiArMSxcbiAgbjogbnVsbCxcbiAgZTogKzEsXG4gIHM6IG51bGwsXG4gIHc6IC0xLFxuICBudzogLTEsXG4gIG5lOiArMSxcbiAgc2U6ICsxLFxuICBzdzogLTFcbn07XG5cbnZhciBzaWduc1kgPSB7XG4gIG92ZXJsYXk6ICsxLFxuICBzZWxlY3Rpb246ICsxLFxuICBuOiAtMSxcbiAgZTogbnVsbCxcbiAgczogKzEsXG4gIHc6IG51bGwsXG4gIG53OiAtMSxcbiAgbmU6IC0xLFxuICBzZTogKzEsXG4gIHN3OiArMVxufTtcblxuZnVuY3Rpb24gdHlwZSh0KSB7XG4gIHJldHVybiB7dHlwZTogdH07XG59XG5cbi8vIElnbm9yZSByaWdodC1jbGljaywgc2luY2UgdGhhdCBzaG91bGQgb3BlbiB0aGUgY29udGV4dCBtZW51LlxuZnVuY3Rpb24gZGVmYXVsdEZpbHRlcihldmVudCkge1xuICByZXR1cm4gIWV2ZW50LmN0cmxLZXkgJiYgIWV2ZW50LmJ1dHRvbjtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdEV4dGVudCgpIHtcbiAgdmFyIHN2ZyA9IHRoaXMub3duZXJTVkdFbGVtZW50IHx8IHRoaXM7XG4gIGlmIChzdmcuaGFzQXR0cmlidXRlKFwidmlld0JveFwiKSkge1xuICAgIHN2ZyA9IHN2Zy52aWV3Qm94LmJhc2VWYWw7XG4gICAgcmV0dXJuIFtbc3ZnLngsIHN2Zy55XSwgW3N2Zy54ICsgc3ZnLndpZHRoLCBzdmcueSArIHN2Zy5oZWlnaHRdXTtcbiAgfVxuICByZXR1cm4gW1swLCAwXSwgW3N2Zy53aWR0aC5iYXNlVmFsLnZhbHVlLCBzdmcuaGVpZ2h0LmJhc2VWYWwudmFsdWVdXTtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdFRvdWNoYWJsZSgpIHtcbiAgcmV0dXJuIG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyB8fCAoXCJvbnRvdWNoc3RhcnRcIiBpbiB0aGlzKTtcbn1cblxuLy8gTGlrZSBkMy5sb2NhbCwgYnV0IHdpdGggdGhlIG5hbWUgXHUyMDFDX19icnVzaFx1MjAxRCByYXRoZXIgdGhhbiBhdXRvLWdlbmVyYXRlZC5cbmZ1bmN0aW9uIGxvY2FsKG5vZGUpIHtcbiAgd2hpbGUgKCFub2RlLl9fYnJ1c2gpIGlmICghKG5vZGUgPSBub2RlLnBhcmVudE5vZGUpKSByZXR1cm47XG4gIHJldHVybiBub2RlLl9fYnJ1c2g7XG59XG5cbmZ1bmN0aW9uIGVtcHR5KGV4dGVudCkge1xuICByZXR1cm4gZXh0ZW50WzBdWzBdID09PSBleHRlbnRbMV1bMF1cbiAgICAgIHx8IGV4dGVudFswXVsxXSA9PT0gZXh0ZW50WzFdWzFdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYnJ1c2hTZWxlY3Rpb24obm9kZSkge1xuICB2YXIgc3RhdGUgPSBub2RlLl9fYnJ1c2g7XG4gIHJldHVybiBzdGF0ZSA/IHN0YXRlLmRpbS5vdXRwdXQoc3RhdGUuc2VsZWN0aW9uKSA6IG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBicnVzaFgoKSB7XG4gIHJldHVybiBicnVzaChYKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJydXNoWSgpIHtcbiAgcmV0dXJuIGJydXNoKFkpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGJydXNoKFhZKTtcbn1cblxuZnVuY3Rpb24gYnJ1c2goZGltKSB7XG4gIHZhciBleHRlbnQgPSBkZWZhdWx0RXh0ZW50LFxuICAgICAgZmlsdGVyID0gZGVmYXVsdEZpbHRlcixcbiAgICAgIHRvdWNoYWJsZSA9IGRlZmF1bHRUb3VjaGFibGUsXG4gICAgICBrZXlzID0gdHJ1ZSxcbiAgICAgIGxpc3RlbmVycyA9IGRpc3BhdGNoKFwic3RhcnRcIiwgXCJicnVzaFwiLCBcImVuZFwiKSxcbiAgICAgIGhhbmRsZVNpemUgPSA2LFxuICAgICAgdG91Y2hlbmRpbmc7XG5cbiAgZnVuY3Rpb24gYnJ1c2goZ3JvdXApIHtcbiAgICB2YXIgb3ZlcmxheSA9IGdyb3VwXG4gICAgICAgIC5wcm9wZXJ0eShcIl9fYnJ1c2hcIiwgaW5pdGlhbGl6ZSlcbiAgICAgIC5zZWxlY3RBbGwoXCIub3ZlcmxheVwiKVxuICAgICAgLmRhdGEoW3R5cGUoXCJvdmVybGF5XCIpXSk7XG5cbiAgICBvdmVybGF5LmVudGVyKCkuYXBwZW5kKFwicmVjdFwiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwib3ZlcmxheVwiKVxuICAgICAgICAuYXR0cihcInBvaW50ZXItZXZlbnRzXCIsIFwiYWxsXCIpXG4gICAgICAgIC5hdHRyKFwiY3Vyc29yXCIsIGN1cnNvcnMub3ZlcmxheSlcbiAgICAgIC5tZXJnZShvdmVybGF5KVxuICAgICAgICAuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgZXh0ZW50ID0gbG9jYWwodGhpcykuZXh0ZW50O1xuICAgICAgICAgIHNlbGVjdCh0aGlzKVxuICAgICAgICAgICAgICAuYXR0cihcInhcIiwgZXh0ZW50WzBdWzBdKVxuICAgICAgICAgICAgICAuYXR0cihcInlcIiwgZXh0ZW50WzBdWzFdKVxuICAgICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIGV4dGVudFsxXVswXSAtIGV4dGVudFswXVswXSlcbiAgICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgZXh0ZW50WzFdWzFdIC0gZXh0ZW50WzBdWzFdKTtcbiAgICAgICAgfSk7XG5cbiAgICBncm91cC5zZWxlY3RBbGwoXCIuc2VsZWN0aW9uXCIpXG4gICAgICAuZGF0YShbdHlwZShcInNlbGVjdGlvblwiKV0pXG4gICAgICAuZW50ZXIoKS5hcHBlbmQoXCJyZWN0XCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJzZWxlY3Rpb25cIilcbiAgICAgICAgLmF0dHIoXCJjdXJzb3JcIiwgY3Vyc29ycy5zZWxlY3Rpb24pXG4gICAgICAgIC5hdHRyKFwiZmlsbFwiLCBcIiM3NzdcIilcbiAgICAgICAgLmF0dHIoXCJmaWxsLW9wYWNpdHlcIiwgMC4zKVxuICAgICAgICAuYXR0cihcInN0cm9rZVwiLCBcIiNmZmZcIilcbiAgICAgICAgLmF0dHIoXCJzaGFwZS1yZW5kZXJpbmdcIiwgXCJjcmlzcEVkZ2VzXCIpO1xuXG4gICAgdmFyIGhhbmRsZSA9IGdyb3VwLnNlbGVjdEFsbChcIi5oYW5kbGVcIilcbiAgICAgIC5kYXRhKGRpbS5oYW5kbGVzLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnR5cGU7IH0pO1xuXG4gICAgaGFuZGxlLmV4aXQoKS5yZW1vdmUoKTtcblxuICAgIGhhbmRsZS5lbnRlcigpLmFwcGVuZChcInJlY3RcIilcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcImhhbmRsZSBoYW5kbGUtLVwiICsgZC50eXBlOyB9KVxuICAgICAgICAuYXR0cihcImN1cnNvclwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBjdXJzb3JzW2QudHlwZV07IH0pO1xuXG4gICAgZ3JvdXBcbiAgICAgICAgLmVhY2gocmVkcmF3KVxuICAgICAgICAuYXR0cihcImZpbGxcIiwgXCJub25lXCIpXG4gICAgICAgIC5hdHRyKFwicG9pbnRlci1ldmVudHNcIiwgXCJhbGxcIilcbiAgICAgICAgLm9uKFwibW91c2Vkb3duLmJydXNoXCIsIHN0YXJ0ZWQpXG4gICAgICAuZmlsdGVyKHRvdWNoYWJsZSlcbiAgICAgICAgLm9uKFwidG91Y2hzdGFydC5icnVzaFwiLCBzdGFydGVkKVxuICAgICAgICAub24oXCJ0b3VjaG1vdmUuYnJ1c2hcIiwgdG91Y2htb3ZlZClcbiAgICAgICAgLm9uKFwidG91Y2hlbmQuYnJ1c2ggdG91Y2hjYW5jZWwuYnJ1c2hcIiwgdG91Y2hlbmRlZClcbiAgICAgICAgLnN0eWxlKFwidG91Y2gtYWN0aW9uXCIsIFwibm9uZVwiKVxuICAgICAgICAuc3R5bGUoXCItd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3JcIiwgXCJyZ2JhKDAsMCwwLDApXCIpO1xuICB9XG5cbiAgYnJ1c2gubW92ZSA9IGZ1bmN0aW9uKGdyb3VwLCBzZWxlY3Rpb24sIGV2ZW50KSB7XG4gICAgaWYgKGdyb3VwLnR3ZWVuKSB7XG4gICAgICBncm91cFxuICAgICAgICAgIC5vbihcInN0YXJ0LmJydXNoXCIsIGZ1bmN0aW9uKGV2ZW50KSB7IGVtaXR0ZXIodGhpcywgYXJndW1lbnRzKS5iZWZvcmVzdGFydCgpLnN0YXJ0KGV2ZW50KTsgfSlcbiAgICAgICAgICAub24oXCJpbnRlcnJ1cHQuYnJ1c2ggZW5kLmJydXNoXCIsIGZ1bmN0aW9uKGV2ZW50KSB7IGVtaXR0ZXIodGhpcywgYXJndW1lbnRzKS5lbmQoZXZlbnQpOyB9KVxuICAgICAgICAgIC50d2VlbihcImJydXNoXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzLFxuICAgICAgICAgICAgICAgIHN0YXRlID0gdGhhdC5fX2JydXNoLFxuICAgICAgICAgICAgICAgIGVtaXQgPSBlbWl0dGVyKHRoYXQsIGFyZ3VtZW50cyksXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uMCA9IHN0YXRlLnNlbGVjdGlvbixcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb24xID0gZGltLmlucHV0KHR5cGVvZiBzZWxlY3Rpb24gPT09IFwiZnVuY3Rpb25cIiA/IHNlbGVjdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDogc2VsZWN0aW9uLCBzdGF0ZS5leHRlbnQpLFxuICAgICAgICAgICAgICAgIGkgPSBpbnRlcnBvbGF0ZShzZWxlY3Rpb24wLCBzZWxlY3Rpb24xKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gdHdlZW4odCkge1xuICAgICAgICAgICAgICBzdGF0ZS5zZWxlY3Rpb24gPSB0ID09PSAxICYmIHNlbGVjdGlvbjEgPT09IG51bGwgPyBudWxsIDogaSh0KTtcbiAgICAgICAgICAgICAgcmVkcmF3LmNhbGwodGhhdCk7XG4gICAgICAgICAgICAgIGVtaXQuYnJ1c2goKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGlvbjAgIT09IG51bGwgJiYgc2VsZWN0aW9uMSAhPT0gbnVsbCA/IHR3ZWVuIDogdHdlZW4oMSk7XG4gICAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdyb3VwXG4gICAgICAgICAgLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXG4gICAgICAgICAgICAgICAgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IHRoYXQuX19icnVzaCxcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb24xID0gZGltLmlucHV0KHR5cGVvZiBzZWxlY3Rpb24gPT09IFwiZnVuY3Rpb25cIiA/IHNlbGVjdGlvbi5hcHBseSh0aGF0LCBhcmdzKSA6IHNlbGVjdGlvbiwgc3RhdGUuZXh0ZW50KSxcbiAgICAgICAgICAgICAgICBlbWl0ID0gZW1pdHRlcih0aGF0LCBhcmdzKS5iZWZvcmVzdGFydCgpO1xuXG4gICAgICAgICAgICBpbnRlcnJ1cHQodGhhdCk7XG4gICAgICAgICAgICBzdGF0ZS5zZWxlY3Rpb24gPSBzZWxlY3Rpb24xID09PSBudWxsID8gbnVsbCA6IHNlbGVjdGlvbjE7XG4gICAgICAgICAgICByZWRyYXcuY2FsbCh0aGF0KTtcbiAgICAgICAgICAgIGVtaXQuc3RhcnQoZXZlbnQpLmJydXNoKGV2ZW50KS5lbmQoZXZlbnQpO1xuICAgICAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBicnVzaC5jbGVhciA9IGZ1bmN0aW9uKGdyb3VwLCBldmVudCkge1xuICAgIGJydXNoLm1vdmUoZ3JvdXAsIG51bGwsIGV2ZW50KTtcbiAgfTtcblxuICBmdW5jdGlvbiByZWRyYXcoKSB7XG4gICAgdmFyIGdyb3VwID0gc2VsZWN0KHRoaXMpLFxuICAgICAgICBzZWxlY3Rpb24gPSBsb2NhbCh0aGlzKS5zZWxlY3Rpb247XG5cbiAgICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgICBncm91cC5zZWxlY3RBbGwoXCIuc2VsZWN0aW9uXCIpXG4gICAgICAgICAgLnN0eWxlKFwiZGlzcGxheVwiLCBudWxsKVxuICAgICAgICAgIC5hdHRyKFwieFwiLCBzZWxlY3Rpb25bMF1bMF0pXG4gICAgICAgICAgLmF0dHIoXCJ5XCIsIHNlbGVjdGlvblswXVsxXSlcbiAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIHNlbGVjdGlvblsxXVswXSAtIHNlbGVjdGlvblswXVswXSlcbiAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBzZWxlY3Rpb25bMV1bMV0gLSBzZWxlY3Rpb25bMF1bMV0pO1xuXG4gICAgICBncm91cC5zZWxlY3RBbGwoXCIuaGFuZGxlXCIpXG4gICAgICAgICAgLnN0eWxlKFwiZGlzcGxheVwiLCBudWxsKVxuICAgICAgICAgIC5hdHRyKFwieFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnR5cGVbZC50eXBlLmxlbmd0aCAtIDFdID09PSBcImVcIiA/IHNlbGVjdGlvblsxXVswXSAtIGhhbmRsZVNpemUgLyAyIDogc2VsZWN0aW9uWzBdWzBdIC0gaGFuZGxlU2l6ZSAvIDI7IH0pXG4gICAgICAgICAgLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudHlwZVswXSA9PT0gXCJzXCIgPyBzZWxlY3Rpb25bMV1bMV0gLSBoYW5kbGVTaXplIC8gMiA6IHNlbGVjdGlvblswXVsxXSAtIGhhbmRsZVNpemUgLyAyOyB9KVxuICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC50eXBlID09PSBcIm5cIiB8fCBkLnR5cGUgPT09IFwic1wiID8gc2VsZWN0aW9uWzFdWzBdIC0gc2VsZWN0aW9uWzBdWzBdICsgaGFuZGxlU2l6ZSA6IGhhbmRsZVNpemU7IH0pXG4gICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC50eXBlID09PSBcImVcIiB8fCBkLnR5cGUgPT09IFwid1wiID8gc2VsZWN0aW9uWzFdWzFdIC0gc2VsZWN0aW9uWzBdWzFdICsgaGFuZGxlU2l6ZSA6IGhhbmRsZVNpemU7IH0pO1xuICAgIH1cblxuICAgIGVsc2Uge1xuICAgICAgZ3JvdXAuc2VsZWN0QWxsKFwiLnNlbGVjdGlvbiwuaGFuZGxlXCIpXG4gICAgICAgICAgLnN0eWxlKFwiZGlzcGxheVwiLCBcIm5vbmVcIilcbiAgICAgICAgICAuYXR0cihcInhcIiwgbnVsbClcbiAgICAgICAgICAuYXR0cihcInlcIiwgbnVsbClcbiAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIG51bGwpXG4gICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgbnVsbCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZW1pdHRlcih0aGF0LCBhcmdzLCBjbGVhbikge1xuICAgIHZhciBlbWl0ID0gdGhhdC5fX2JydXNoLmVtaXR0ZXI7XG4gICAgcmV0dXJuIGVtaXQgJiYgKCFjbGVhbiB8fCAhZW1pdC5jbGVhbikgPyBlbWl0IDogbmV3IEVtaXR0ZXIodGhhdCwgYXJncywgY2xlYW4pO1xuICB9XG5cbiAgZnVuY3Rpb24gRW1pdHRlcih0aGF0LCBhcmdzLCBjbGVhbikge1xuICAgIHRoaXMudGhhdCA9IHRoYXQ7XG4gICAgdGhpcy5hcmdzID0gYXJncztcbiAgICB0aGlzLnN0YXRlID0gdGhhdC5fX2JydXNoO1xuICAgIHRoaXMuYWN0aXZlID0gMDtcbiAgICB0aGlzLmNsZWFuID0gY2xlYW47XG4gIH1cblxuICBFbWl0dGVyLnByb3RvdHlwZSA9IHtcbiAgICBiZWZvcmVzdGFydDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoKyt0aGlzLmFjdGl2ZSA9PT0gMSkgdGhpcy5zdGF0ZS5lbWl0dGVyID0gdGhpcywgdGhpcy5zdGFydGluZyA9IHRydWU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIHN0YXJ0OiBmdW5jdGlvbihldmVudCwgbW9kZSkge1xuICAgICAgaWYgKHRoaXMuc3RhcnRpbmcpIHRoaXMuc3RhcnRpbmcgPSBmYWxzZSwgdGhpcy5lbWl0KFwic3RhcnRcIiwgZXZlbnQsIG1vZGUpO1xuICAgICAgZWxzZSB0aGlzLmVtaXQoXCJicnVzaFwiLCBldmVudCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIGJydXNoOiBmdW5jdGlvbihldmVudCwgbW9kZSkge1xuICAgICAgdGhpcy5lbWl0KFwiYnJ1c2hcIiwgZXZlbnQsIG1vZGUpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICBlbmQ6IGZ1bmN0aW9uKGV2ZW50LCBtb2RlKSB7XG4gICAgICBpZiAoLS10aGlzLmFjdGl2ZSA9PT0gMCkgZGVsZXRlIHRoaXMuc3RhdGUuZW1pdHRlciwgdGhpcy5lbWl0KFwiZW5kXCIsIGV2ZW50LCBtb2RlKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgZW1pdDogZnVuY3Rpb24odHlwZSwgZXZlbnQsIG1vZGUpIHtcbiAgICAgIHZhciBkID0gc2VsZWN0KHRoaXMudGhhdCkuZGF0dW0oKTtcbiAgICAgIGxpc3RlbmVycy5jYWxsKFxuICAgICAgICB0eXBlLFxuICAgICAgICB0aGlzLnRoYXQsXG4gICAgICAgIG5ldyBCcnVzaEV2ZW50KHR5cGUsIHtcbiAgICAgICAgICBzb3VyY2VFdmVudDogZXZlbnQsXG4gICAgICAgICAgdGFyZ2V0OiBicnVzaCxcbiAgICAgICAgICBzZWxlY3Rpb246IGRpbS5vdXRwdXQodGhpcy5zdGF0ZS5zZWxlY3Rpb24pLFxuICAgICAgICAgIG1vZGUsXG4gICAgICAgICAgZGlzcGF0Y2g6IGxpc3RlbmVyc1xuICAgICAgICB9KSxcbiAgICAgICAgZFxuICAgICAgKTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gc3RhcnRlZChldmVudCkge1xuICAgIGlmICh0b3VjaGVuZGluZyAmJiAhZXZlbnQudG91Y2hlcykgcmV0dXJuO1xuICAgIGlmICghZmlsdGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIHJldHVybjtcblxuICAgIHZhciB0aGF0ID0gdGhpcyxcbiAgICAgICAgdHlwZSA9IGV2ZW50LnRhcmdldC5fX2RhdGFfXy50eXBlLFxuICAgICAgICBtb2RlID0gKGtleXMgJiYgZXZlbnQubWV0YUtleSA/IHR5cGUgPSBcIm92ZXJsYXlcIiA6IHR5cGUpID09PSBcInNlbGVjdGlvblwiID8gTU9ERV9EUkFHIDogKGtleXMgJiYgZXZlbnQuYWx0S2V5ID8gTU9ERV9DRU5URVIgOiBNT0RFX0hBTkRMRSksXG4gICAgICAgIHNpZ25YID0gZGltID09PSBZID8gbnVsbCA6IHNpZ25zWFt0eXBlXSxcbiAgICAgICAgc2lnblkgPSBkaW0gPT09IFggPyBudWxsIDogc2lnbnNZW3R5cGVdLFxuICAgICAgICBzdGF0ZSA9IGxvY2FsKHRoYXQpLFxuICAgICAgICBleHRlbnQgPSBzdGF0ZS5leHRlbnQsXG4gICAgICAgIHNlbGVjdGlvbiA9IHN0YXRlLnNlbGVjdGlvbixcbiAgICAgICAgVyA9IGV4dGVudFswXVswXSwgdzAsIHcxLFxuICAgICAgICBOID0gZXh0ZW50WzBdWzFdLCBuMCwgbjEsXG4gICAgICAgIEUgPSBleHRlbnRbMV1bMF0sIGUwLCBlMSxcbiAgICAgICAgUyA9IGV4dGVudFsxXVsxXSwgczAsIHMxLFxuICAgICAgICBkeCA9IDAsXG4gICAgICAgIGR5ID0gMCxcbiAgICAgICAgbW92aW5nLFxuICAgICAgICBzaGlmdGluZyA9IHNpZ25YICYmIHNpZ25ZICYmIGtleXMgJiYgZXZlbnQuc2hpZnRLZXksXG4gICAgICAgIGxvY2tYLFxuICAgICAgICBsb2NrWSxcbiAgICAgICAgcG9pbnRzID0gQXJyYXkuZnJvbShldmVudC50b3VjaGVzIHx8IFtldmVudF0sIHQgPT4ge1xuICAgICAgICAgIGNvbnN0IGkgPSB0LmlkZW50aWZpZXI7XG4gICAgICAgICAgdCA9IHBvaW50ZXIodCwgdGhhdCk7XG4gICAgICAgICAgdC5wb2ludDAgPSB0LnNsaWNlKCk7XG4gICAgICAgICAgdC5pZGVudGlmaWVyID0gaTtcbiAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgfSk7XG5cbiAgICBpbnRlcnJ1cHQodGhhdCk7XG4gICAgdmFyIGVtaXQgPSBlbWl0dGVyKHRoYXQsIGFyZ3VtZW50cywgdHJ1ZSkuYmVmb3Jlc3RhcnQoKTtcblxuICAgIGlmICh0eXBlID09PSBcIm92ZXJsYXlcIikge1xuICAgICAgaWYgKHNlbGVjdGlvbikgbW92aW5nID0gdHJ1ZTtcbiAgICAgIGNvbnN0IHB0cyA9IFtwb2ludHNbMF0sIHBvaW50c1sxXSB8fCBwb2ludHNbMF1dO1xuICAgICAgc3RhdGUuc2VsZWN0aW9uID0gc2VsZWN0aW9uID0gW1tcbiAgICAgICAgICB3MCA9IGRpbSA9PT0gWSA/IFcgOiBtaW4ocHRzWzBdWzBdLCBwdHNbMV1bMF0pLFxuICAgICAgICAgIG4wID0gZGltID09PSBYID8gTiA6IG1pbihwdHNbMF1bMV0sIHB0c1sxXVsxXSlcbiAgICAgICAgXSwgW1xuICAgICAgICAgIGUwID0gZGltID09PSBZID8gRSA6IG1heChwdHNbMF1bMF0sIHB0c1sxXVswXSksXG4gICAgICAgICAgczAgPSBkaW0gPT09IFggPyBTIDogbWF4KHB0c1swXVsxXSwgcHRzWzFdWzFdKVxuICAgICAgICBdXTtcbiAgICAgIGlmIChwb2ludHMubGVuZ3RoID4gMSkgbW92ZShldmVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHcwID0gc2VsZWN0aW9uWzBdWzBdO1xuICAgICAgbjAgPSBzZWxlY3Rpb25bMF1bMV07XG4gICAgICBlMCA9IHNlbGVjdGlvblsxXVswXTtcbiAgICAgIHMwID0gc2VsZWN0aW9uWzFdWzFdO1xuICAgIH1cblxuICAgIHcxID0gdzA7XG4gICAgbjEgPSBuMDtcbiAgICBlMSA9IGUwO1xuICAgIHMxID0gczA7XG5cbiAgICB2YXIgZ3JvdXAgPSBzZWxlY3QodGhhdClcbiAgICAgICAgLmF0dHIoXCJwb2ludGVyLWV2ZW50c1wiLCBcIm5vbmVcIik7XG5cbiAgICB2YXIgb3ZlcmxheSA9IGdyb3VwLnNlbGVjdEFsbChcIi5vdmVybGF5XCIpXG4gICAgICAgIC5hdHRyKFwiY3Vyc29yXCIsIGN1cnNvcnNbdHlwZV0pO1xuXG4gICAgaWYgKGV2ZW50LnRvdWNoZXMpIHtcbiAgICAgIGVtaXQubW92ZWQgPSBtb3ZlZDtcbiAgICAgIGVtaXQuZW5kZWQgPSBlbmRlZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHZpZXcgPSBzZWxlY3QoZXZlbnQudmlldylcbiAgICAgICAgICAub24oXCJtb3VzZW1vdmUuYnJ1c2hcIiwgbW92ZWQsIHRydWUpXG4gICAgICAgICAgLm9uKFwibW91c2V1cC5icnVzaFwiLCBlbmRlZCwgdHJ1ZSk7XG4gICAgICBpZiAoa2V5cykgdmlld1xuICAgICAgICAgIC5vbihcImtleWRvd24uYnJ1c2hcIiwga2V5ZG93bmVkLCB0cnVlKVxuICAgICAgICAgIC5vbihcImtleXVwLmJydXNoXCIsIGtleXVwcGVkLCB0cnVlKVxuXG4gICAgICBkcmFnRGlzYWJsZShldmVudC52aWV3KTtcbiAgICB9XG5cbiAgICByZWRyYXcuY2FsbCh0aGF0KTtcbiAgICBlbWl0LnN0YXJ0KGV2ZW50LCBtb2RlLm5hbWUpO1xuXG4gICAgZnVuY3Rpb24gbW92ZWQoZXZlbnQpIHtcbiAgICAgIGZvciAoY29uc3QgcCBvZiBldmVudC5jaGFuZ2VkVG91Y2hlcyB8fCBbZXZlbnRdKSB7XG4gICAgICAgIGZvciAoY29uc3QgZCBvZiBwb2ludHMpXG4gICAgICAgICAgaWYgKGQuaWRlbnRpZmllciA9PT0gcC5pZGVudGlmaWVyKSBkLmN1ciA9IHBvaW50ZXIocCwgdGhhdCk7XG4gICAgICB9XG4gICAgICBpZiAoc2hpZnRpbmcgJiYgIWxvY2tYICYmICFsb2NrWSAmJiBwb2ludHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGNvbnN0IHBvaW50ID0gcG9pbnRzWzBdO1xuICAgICAgICBpZiAoYWJzKHBvaW50LmN1clswXSAtIHBvaW50WzBdKSA+IGFicyhwb2ludC5jdXJbMV0gLSBwb2ludFsxXSkpXG4gICAgICAgICAgbG9ja1kgPSB0cnVlO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgbG9ja1ggPSB0cnVlO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBwb2ludCBvZiBwb2ludHMpXG4gICAgICAgIGlmIChwb2ludC5jdXIpIHBvaW50WzBdID0gcG9pbnQuY3VyWzBdLCBwb2ludFsxXSA9IHBvaW50LmN1clsxXTtcbiAgICAgIG1vdmluZyA9IHRydWU7XG4gICAgICBub2V2ZW50KGV2ZW50KTtcbiAgICAgIG1vdmUoZXZlbnQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vdmUoZXZlbnQpIHtcbiAgICAgIGNvbnN0IHBvaW50ID0gcG9pbnRzWzBdLCBwb2ludDAgPSBwb2ludC5wb2ludDA7XG4gICAgICB2YXIgdDtcblxuICAgICAgZHggPSBwb2ludFswXSAtIHBvaW50MFswXTtcbiAgICAgIGR5ID0gcG9pbnRbMV0gLSBwb2ludDBbMV07XG5cbiAgICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgICBjYXNlIE1PREVfU1BBQ0U6XG4gICAgICAgIGNhc2UgTU9ERV9EUkFHOiB7XG4gICAgICAgICAgaWYgKHNpZ25YKSBkeCA9IG1heChXIC0gdzAsIG1pbihFIC0gZTAsIGR4KSksIHcxID0gdzAgKyBkeCwgZTEgPSBlMCArIGR4O1xuICAgICAgICAgIGlmIChzaWduWSkgZHkgPSBtYXgoTiAtIG4wLCBtaW4oUyAtIHMwLCBkeSkpLCBuMSA9IG4wICsgZHksIHMxID0gczAgKyBkeTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIE1PREVfSEFORExFOiB7XG4gICAgICAgICAgaWYgKHBvaW50c1sxXSkge1xuICAgICAgICAgICAgaWYgKHNpZ25YKSB3MSA9IG1heChXLCBtaW4oRSwgcG9pbnRzWzBdWzBdKSksIGUxID0gbWF4KFcsIG1pbihFLCBwb2ludHNbMV1bMF0pKSwgc2lnblggPSAxO1xuICAgICAgICAgICAgaWYgKHNpZ25ZKSBuMSA9IG1heChOLCBtaW4oUywgcG9pbnRzWzBdWzFdKSksIHMxID0gbWF4KE4sIG1pbihTLCBwb2ludHNbMV1bMV0pKSwgc2lnblkgPSAxO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoc2lnblggPCAwKSBkeCA9IG1heChXIC0gdzAsIG1pbihFIC0gdzAsIGR4KSksIHcxID0gdzAgKyBkeCwgZTEgPSBlMDtcbiAgICAgICAgICAgIGVsc2UgaWYgKHNpZ25YID4gMCkgZHggPSBtYXgoVyAtIGUwLCBtaW4oRSAtIGUwLCBkeCkpLCB3MSA9IHcwLCBlMSA9IGUwICsgZHg7XG4gICAgICAgICAgICBpZiAoc2lnblkgPCAwKSBkeSA9IG1heChOIC0gbjAsIG1pbihTIC0gbjAsIGR5KSksIG4xID0gbjAgKyBkeSwgczEgPSBzMDtcbiAgICAgICAgICAgIGVsc2UgaWYgKHNpZ25ZID4gMCkgZHkgPSBtYXgoTiAtIHMwLCBtaW4oUyAtIHMwLCBkeSkpLCBuMSA9IG4wLCBzMSA9IHMwICsgZHk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgTU9ERV9DRU5URVI6IHtcbiAgICAgICAgICBpZiAoc2lnblgpIHcxID0gbWF4KFcsIG1pbihFLCB3MCAtIGR4ICogc2lnblgpKSwgZTEgPSBtYXgoVywgbWluKEUsIGUwICsgZHggKiBzaWduWCkpO1xuICAgICAgICAgIGlmIChzaWduWSkgbjEgPSBtYXgoTiwgbWluKFMsIG4wIC0gZHkgKiBzaWduWSkpLCBzMSA9IG1heChOLCBtaW4oUywgczAgKyBkeSAqIHNpZ25ZKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGUxIDwgdzEpIHtcbiAgICAgICAgc2lnblggKj0gLTE7XG4gICAgICAgIHQgPSB3MCwgdzAgPSBlMCwgZTAgPSB0O1xuICAgICAgICB0ID0gdzEsIHcxID0gZTEsIGUxID0gdDtcbiAgICAgICAgaWYgKHR5cGUgaW4gZmxpcFgpIG92ZXJsYXkuYXR0cihcImN1cnNvclwiLCBjdXJzb3JzW3R5cGUgPSBmbGlwWFt0eXBlXV0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoczEgPCBuMSkge1xuICAgICAgICBzaWduWSAqPSAtMTtcbiAgICAgICAgdCA9IG4wLCBuMCA9IHMwLCBzMCA9IHQ7XG4gICAgICAgIHQgPSBuMSwgbjEgPSBzMSwgczEgPSB0O1xuICAgICAgICBpZiAodHlwZSBpbiBmbGlwWSkgb3ZlcmxheS5hdHRyKFwiY3Vyc29yXCIsIGN1cnNvcnNbdHlwZSA9IGZsaXBZW3R5cGVdXSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGF0ZS5zZWxlY3Rpb24pIHNlbGVjdGlvbiA9IHN0YXRlLnNlbGVjdGlvbjsgLy8gTWF5IGJlIHNldCBieSBicnVzaC5tb3ZlIVxuICAgICAgaWYgKGxvY2tYKSB3MSA9IHNlbGVjdGlvblswXVswXSwgZTEgPSBzZWxlY3Rpb25bMV1bMF07XG4gICAgICBpZiAobG9ja1kpIG4xID0gc2VsZWN0aW9uWzBdWzFdLCBzMSA9IHNlbGVjdGlvblsxXVsxXTtcblxuICAgICAgaWYgKHNlbGVjdGlvblswXVswXSAhPT0gdzFcbiAgICAgICAgICB8fCBzZWxlY3Rpb25bMF1bMV0gIT09IG4xXG4gICAgICAgICAgfHwgc2VsZWN0aW9uWzFdWzBdICE9PSBlMVxuICAgICAgICAgIHx8IHNlbGVjdGlvblsxXVsxXSAhPT0gczEpIHtcbiAgICAgICAgc3RhdGUuc2VsZWN0aW9uID0gW1t3MSwgbjFdLCBbZTEsIHMxXV07XG4gICAgICAgIHJlZHJhdy5jYWxsKHRoYXQpO1xuICAgICAgICBlbWl0LmJydXNoKGV2ZW50LCBtb2RlLm5hbWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVuZGVkKGV2ZW50KSB7XG4gICAgICBub3Byb3BhZ2F0aW9uKGV2ZW50KTtcbiAgICAgIGlmIChldmVudC50b3VjaGVzKSB7XG4gICAgICAgIGlmIChldmVudC50b3VjaGVzLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICBpZiAodG91Y2hlbmRpbmcpIGNsZWFyVGltZW91dCh0b3VjaGVuZGluZyk7XG4gICAgICAgIHRvdWNoZW5kaW5nID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsgdG91Y2hlbmRpbmcgPSBudWxsOyB9LCA1MDApOyAvLyBHaG9zdCBjbGlja3MgYXJlIGRlbGF5ZWQhXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkcmFnRW5hYmxlKGV2ZW50LnZpZXcsIG1vdmluZyk7XG4gICAgICAgIHZpZXcub24oXCJrZXlkb3duLmJydXNoIGtleXVwLmJydXNoIG1vdXNlbW92ZS5icnVzaCBtb3VzZXVwLmJydXNoXCIsIG51bGwpO1xuICAgICAgfVxuICAgICAgZ3JvdXAuYXR0cihcInBvaW50ZXItZXZlbnRzXCIsIFwiYWxsXCIpO1xuICAgICAgb3ZlcmxheS5hdHRyKFwiY3Vyc29yXCIsIGN1cnNvcnMub3ZlcmxheSk7XG4gICAgICBpZiAoc3RhdGUuc2VsZWN0aW9uKSBzZWxlY3Rpb24gPSBzdGF0ZS5zZWxlY3Rpb247IC8vIE1heSBiZSBzZXQgYnkgYnJ1c2gubW92ZSAob24gc3RhcnQpIVxuICAgICAgaWYgKGVtcHR5KHNlbGVjdGlvbikpIHN0YXRlLnNlbGVjdGlvbiA9IG51bGwsIHJlZHJhdy5jYWxsKHRoYXQpO1xuICAgICAgZW1pdC5lbmQoZXZlbnQsIG1vZGUubmFtZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24ga2V5ZG93bmVkKGV2ZW50KSB7XG4gICAgICBzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHtcbiAgICAgICAgY2FzZSAxNjogeyAvLyBTSElGVFxuICAgICAgICAgIHNoaWZ0aW5nID0gc2lnblggJiYgc2lnblk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAxODogeyAvLyBBTFRcbiAgICAgICAgICBpZiAobW9kZSA9PT0gTU9ERV9IQU5ETEUpIHtcbiAgICAgICAgICAgIGlmIChzaWduWCkgZTAgPSBlMSAtIGR4ICogc2lnblgsIHcwID0gdzEgKyBkeCAqIHNpZ25YO1xuICAgICAgICAgICAgaWYgKHNpZ25ZKSBzMCA9IHMxIC0gZHkgKiBzaWduWSwgbjAgPSBuMSArIGR5ICogc2lnblk7XG4gICAgICAgICAgICBtb2RlID0gTU9ERV9DRU5URVI7XG4gICAgICAgICAgICBtb3ZlKGV2ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzMjogeyAvLyBTUEFDRTsgdGFrZXMgcHJpb3JpdHkgb3ZlciBBTFRcbiAgICAgICAgICBpZiAobW9kZSA9PT0gTU9ERV9IQU5ETEUgfHwgbW9kZSA9PT0gTU9ERV9DRU5URVIpIHtcbiAgICAgICAgICAgIGlmIChzaWduWCA8IDApIGUwID0gZTEgLSBkeDsgZWxzZSBpZiAoc2lnblggPiAwKSB3MCA9IHcxIC0gZHg7XG4gICAgICAgICAgICBpZiAoc2lnblkgPCAwKSBzMCA9IHMxIC0gZHk7IGVsc2UgaWYgKHNpZ25ZID4gMCkgbjAgPSBuMSAtIGR5O1xuICAgICAgICAgICAgbW9kZSA9IE1PREVfU1BBQ0U7XG4gICAgICAgICAgICBvdmVybGF5LmF0dHIoXCJjdXJzb3JcIiwgY3Vyc29ycy5zZWxlY3Rpb24pO1xuICAgICAgICAgICAgbW92ZShldmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHJldHVybjtcbiAgICAgIH1cbiAgICAgIG5vZXZlbnQoZXZlbnQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGtleXVwcGVkKGV2ZW50KSB7XG4gICAgICBzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHtcbiAgICAgICAgY2FzZSAxNjogeyAvLyBTSElGVFxuICAgICAgICAgIGlmIChzaGlmdGluZykge1xuICAgICAgICAgICAgbG9ja1ggPSBsb2NrWSA9IHNoaWZ0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICBtb3ZlKGV2ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAxODogeyAvLyBBTFRcbiAgICAgICAgICBpZiAobW9kZSA9PT0gTU9ERV9DRU5URVIpIHtcbiAgICAgICAgICAgIGlmIChzaWduWCA8IDApIGUwID0gZTE7IGVsc2UgaWYgKHNpZ25YID4gMCkgdzAgPSB3MTtcbiAgICAgICAgICAgIGlmIChzaWduWSA8IDApIHMwID0gczE7IGVsc2UgaWYgKHNpZ25ZID4gMCkgbjAgPSBuMTtcbiAgICAgICAgICAgIG1vZGUgPSBNT0RFX0hBTkRMRTtcbiAgICAgICAgICAgIG1vdmUoZXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDMyOiB7IC8vIFNQQUNFXG4gICAgICAgICAgaWYgKG1vZGUgPT09IE1PREVfU1BBQ0UpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5hbHRLZXkpIHtcbiAgICAgICAgICAgICAgaWYgKHNpZ25YKSBlMCA9IGUxIC0gZHggKiBzaWduWCwgdzAgPSB3MSArIGR4ICogc2lnblg7XG4gICAgICAgICAgICAgIGlmIChzaWduWSkgczAgPSBzMSAtIGR5ICogc2lnblksIG4wID0gbjEgKyBkeSAqIHNpZ25ZO1xuICAgICAgICAgICAgICBtb2RlID0gTU9ERV9DRU5URVI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoc2lnblggPCAwKSBlMCA9IGUxOyBlbHNlIGlmIChzaWduWCA+IDApIHcwID0gdzE7XG4gICAgICAgICAgICAgIGlmIChzaWduWSA8IDApIHMwID0gczE7IGVsc2UgaWYgKHNpZ25ZID4gMCkgbjAgPSBuMTtcbiAgICAgICAgICAgICAgbW9kZSA9IE1PREVfSEFORExFO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3ZlcmxheS5hdHRyKFwiY3Vyc29yXCIsIGN1cnNvcnNbdHlwZV0pO1xuICAgICAgICAgICAgbW92ZShldmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHJldHVybjtcbiAgICAgIH1cbiAgICAgIG5vZXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRvdWNobW92ZWQoZXZlbnQpIHtcbiAgICBlbWl0dGVyKHRoaXMsIGFyZ3VtZW50cykubW92ZWQoZXZlbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gdG91Y2hlbmRlZChldmVudCkge1xuICAgIGVtaXR0ZXIodGhpcywgYXJndW1lbnRzKS5lbmRlZChldmVudCk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0aWFsaXplKCkge1xuICAgIHZhciBzdGF0ZSA9IHRoaXMuX19icnVzaCB8fCB7c2VsZWN0aW9uOiBudWxsfTtcbiAgICBzdGF0ZS5leHRlbnQgPSBudW1iZXIyKGV4dGVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICBzdGF0ZS5kaW0gPSBkaW07XG4gICAgcmV0dXJuIHN0YXRlO1xuICB9XG5cbiAgYnJ1c2guZXh0ZW50ID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKGV4dGVudCA9IHR5cGVvZiBfID09PSBcImZ1bmN0aW9uXCIgPyBfIDogY29uc3RhbnQobnVtYmVyMihfKSksIGJydXNoKSA6IGV4dGVudDtcbiAgfTtcblxuICBicnVzaC5maWx0ZXIgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoZmlsdGVyID0gdHlwZW9mIF8gPT09IFwiZnVuY3Rpb25cIiA/IF8gOiBjb25zdGFudCghIV8pLCBicnVzaCkgOiBmaWx0ZXI7XG4gIH07XG5cbiAgYnJ1c2gudG91Y2hhYmxlID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHRvdWNoYWJsZSA9IHR5cGVvZiBfID09PSBcImZ1bmN0aW9uXCIgPyBfIDogY29uc3RhbnQoISFfKSwgYnJ1c2gpIDogdG91Y2hhYmxlO1xuICB9O1xuXG4gIGJydXNoLmhhbmRsZVNpemUgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoaGFuZGxlU2l6ZSA9ICtfLCBicnVzaCkgOiBoYW5kbGVTaXplO1xuICB9O1xuXG4gIGJydXNoLmtleU1vZGlmaWVycyA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChrZXlzID0gISFfLCBicnVzaCkgOiBrZXlzO1xuICB9O1xuXG4gIGJydXNoLm9uID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZhbHVlID0gbGlzdGVuZXJzLm9uLmFwcGx5KGxpc3RlbmVycywgYXJndW1lbnRzKTtcbiAgICByZXR1cm4gdmFsdWUgPT09IGxpc3RlbmVycyA/IGJydXNoIDogdmFsdWU7XG4gIH07XG5cbiAgcmV0dXJuIGJydXNoO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIE1hdGguYWJzKHggPSBNYXRoLnJvdW5kKHgpKSA+PSAxZTIxXG4gICAgICA/IHgudG9Mb2NhbGVTdHJpbmcoXCJlblwiKS5yZXBsYWNlKC8sL2csIFwiXCIpXG4gICAgICA6IHgudG9TdHJpbmcoMTApO1xufVxuXG4vLyBDb21wdXRlcyB0aGUgZGVjaW1hbCBjb2VmZmljaWVudCBhbmQgZXhwb25lbnQgb2YgdGhlIHNwZWNpZmllZCBudW1iZXIgeCB3aXRoXG4vLyBzaWduaWZpY2FudCBkaWdpdHMgcCwgd2hlcmUgeCBpcyBwb3NpdGl2ZSBhbmQgcCBpcyBpbiBbMSwgMjFdIG9yIHVuZGVmaW5lZC5cbi8vIEZvciBleGFtcGxlLCBmb3JtYXREZWNpbWFsUGFydHMoMS4yMykgcmV0dXJucyBbXCIxMjNcIiwgMF0uXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGVjaW1hbFBhcnRzKHgsIHApIHtcbiAgaWYgKChpID0gKHggPSBwID8geC50b0V4cG9uZW50aWFsKHAgLSAxKSA6IHgudG9FeHBvbmVudGlhbCgpKS5pbmRleE9mKFwiZVwiKSkgPCAwKSByZXR1cm4gbnVsbDsgLy8gTmFOLCBcdTAwQjFJbmZpbml0eVxuICB2YXIgaSwgY29lZmZpY2llbnQgPSB4LnNsaWNlKDAsIGkpO1xuXG4gIC8vIFRoZSBzdHJpbmcgcmV0dXJuZWQgYnkgdG9FeHBvbmVudGlhbCBlaXRoZXIgaGFzIHRoZSBmb3JtIFxcZFxcLlxcZCtlWy0rXVxcZCtcbiAgLy8gKGUuZy4sIDEuMmUrMykgb3IgdGhlIGZvcm0gXFxkZVstK11cXGQrIChlLmcuLCAxZSszKS5cbiAgcmV0dXJuIFtcbiAgICBjb2VmZmljaWVudC5sZW5ndGggPiAxID8gY29lZmZpY2llbnRbMF0gKyBjb2VmZmljaWVudC5zbGljZSgyKSA6IGNvZWZmaWNpZW50LFxuICAgICt4LnNsaWNlKGkgKyAxKVxuICBdO1xufVxuIiwgImltcG9ydCB7Zm9ybWF0RGVjaW1hbFBhcnRzfSBmcm9tIFwiLi9mb3JtYXREZWNpbWFsLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIHggPSBmb3JtYXREZWNpbWFsUGFydHMoTWF0aC5hYnMoeCkpLCB4ID8geFsxXSA6IE5hTjtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihncm91cGluZywgdGhvdXNhbmRzKSB7XG4gIHJldHVybiBmdW5jdGlvbih2YWx1ZSwgd2lkdGgpIHtcbiAgICB2YXIgaSA9IHZhbHVlLmxlbmd0aCxcbiAgICAgICAgdCA9IFtdLFxuICAgICAgICBqID0gMCxcbiAgICAgICAgZyA9IGdyb3VwaW5nWzBdLFxuICAgICAgICBsZW5ndGggPSAwO1xuXG4gICAgd2hpbGUgKGkgPiAwICYmIGcgPiAwKSB7XG4gICAgICBpZiAobGVuZ3RoICsgZyArIDEgPiB3aWR0aCkgZyA9IE1hdGgubWF4KDEsIHdpZHRoIC0gbGVuZ3RoKTtcbiAgICAgIHQucHVzaCh2YWx1ZS5zdWJzdHJpbmcoaSAtPSBnLCBpICsgZykpO1xuICAgICAgaWYgKChsZW5ndGggKz0gZyArIDEpID4gd2lkdGgpIGJyZWFrO1xuICAgICAgZyA9IGdyb3VwaW5nW2ogPSAoaiArIDEpICUgZ3JvdXBpbmcubGVuZ3RoXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdC5yZXZlcnNlKCkuam9pbih0aG91c2FuZHMpO1xuICB9O1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKG51bWVyYWxzKSB7XG4gIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC9bMC05XS9nLCBmdW5jdGlvbihpKSB7XG4gICAgICByZXR1cm4gbnVtZXJhbHNbK2ldO1xuICAgIH0pO1xuICB9O1xufVxuIiwgIi8vIFtbZmlsbF1hbGlnbl1bc2lnbl1bc3ltYm9sXVswXVt3aWR0aF1bLF1bLnByZWNpc2lvbl1bfl1bdHlwZV1cbnZhciByZSA9IC9eKD86KC4pPyhbPD49Xl0pKT8oWytcXC0oIF0pPyhbJCNdKT8oMCk/KFxcZCspPygsKT8oXFwuXFxkKyk/KH4pPyhbYS16JV0pPyQvaTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZm9ybWF0U3BlY2lmaWVyKHNwZWNpZmllcikge1xuICBpZiAoIShtYXRjaCA9IHJlLmV4ZWMoc3BlY2lmaWVyKSkpIHRocm93IG5ldyBFcnJvcihcImludmFsaWQgZm9ybWF0OiBcIiArIHNwZWNpZmllcik7XG4gIHZhciBtYXRjaDtcbiAgcmV0dXJuIG5ldyBGb3JtYXRTcGVjaWZpZXIoe1xuICAgIGZpbGw6IG1hdGNoWzFdLFxuICAgIGFsaWduOiBtYXRjaFsyXSxcbiAgICBzaWduOiBtYXRjaFszXSxcbiAgICBzeW1ib2w6IG1hdGNoWzRdLFxuICAgIHplcm86IG1hdGNoWzVdLFxuICAgIHdpZHRoOiBtYXRjaFs2XSxcbiAgICBjb21tYTogbWF0Y2hbN10sXG4gICAgcHJlY2lzaW9uOiBtYXRjaFs4XSAmJiBtYXRjaFs4XS5zbGljZSgxKSxcbiAgICB0cmltOiBtYXRjaFs5XSxcbiAgICB0eXBlOiBtYXRjaFsxMF1cbiAgfSk7XG59XG5cbmZvcm1hdFNwZWNpZmllci5wcm90b3R5cGUgPSBGb3JtYXRTcGVjaWZpZXIucHJvdG90eXBlOyAvLyBpbnN0YW5jZW9mXG5cbmV4cG9ydCBmdW5jdGlvbiBGb3JtYXRTcGVjaWZpZXIoc3BlY2lmaWVyKSB7XG4gIHRoaXMuZmlsbCA9IHNwZWNpZmllci5maWxsID09PSB1bmRlZmluZWQgPyBcIiBcIiA6IHNwZWNpZmllci5maWxsICsgXCJcIjtcbiAgdGhpcy5hbGlnbiA9IHNwZWNpZmllci5hbGlnbiA9PT0gdW5kZWZpbmVkID8gXCI+XCIgOiBzcGVjaWZpZXIuYWxpZ24gKyBcIlwiO1xuICB0aGlzLnNpZ24gPSBzcGVjaWZpZXIuc2lnbiA9PT0gdW5kZWZpbmVkID8gXCItXCIgOiBzcGVjaWZpZXIuc2lnbiArIFwiXCI7XG4gIHRoaXMuc3ltYm9sID0gc3BlY2lmaWVyLnN5bWJvbCA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHNwZWNpZmllci5zeW1ib2wgKyBcIlwiO1xuICB0aGlzLnplcm8gPSAhIXNwZWNpZmllci56ZXJvO1xuICB0aGlzLndpZHRoID0gc3BlY2lmaWVyLndpZHRoID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiArc3BlY2lmaWVyLndpZHRoO1xuICB0aGlzLmNvbW1hID0gISFzcGVjaWZpZXIuY29tbWE7XG4gIHRoaXMucHJlY2lzaW9uID0gc3BlY2lmaWVyLnByZWNpc2lvbiA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogK3NwZWNpZmllci5wcmVjaXNpb247XG4gIHRoaXMudHJpbSA9ICEhc3BlY2lmaWVyLnRyaW07XG4gIHRoaXMudHlwZSA9IHNwZWNpZmllci50eXBlID09PSB1bmRlZmluZWQgPyBcIlwiIDogc3BlY2lmaWVyLnR5cGUgKyBcIlwiO1xufVxuXG5Gb3JtYXRTcGVjaWZpZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLmZpbGxcbiAgICAgICsgdGhpcy5hbGlnblxuICAgICAgKyB0aGlzLnNpZ25cbiAgICAgICsgdGhpcy5zeW1ib2xcbiAgICAgICsgKHRoaXMuemVybyA/IFwiMFwiIDogXCJcIilcbiAgICAgICsgKHRoaXMud2lkdGggPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBNYXRoLm1heCgxLCB0aGlzLndpZHRoIHwgMCkpXG4gICAgICArICh0aGlzLmNvbW1hID8gXCIsXCIgOiBcIlwiKVxuICAgICAgKyAodGhpcy5wcmVjaXNpb24gPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBcIi5cIiArIE1hdGgubWF4KDAsIHRoaXMucHJlY2lzaW9uIHwgMCkpXG4gICAgICArICh0aGlzLnRyaW0gPyBcIn5cIiA6IFwiXCIpXG4gICAgICArIHRoaXMudHlwZTtcbn07XG4iLCAiLy8gVHJpbXMgaW5zaWduaWZpY2FudCB6ZXJvcywgZS5nLiwgcmVwbGFjZXMgMS4yMDAwayB3aXRoIDEuMmsuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzKSB7XG4gIG91dDogZm9yICh2YXIgbiA9IHMubGVuZ3RoLCBpID0gMSwgaTAgPSAtMSwgaTE7IGkgPCBuOyArK2kpIHtcbiAgICBzd2l0Y2ggKHNbaV0pIHtcbiAgICAgIGNhc2UgXCIuXCI6IGkwID0gaTEgPSBpOyBicmVhaztcbiAgICAgIGNhc2UgXCIwXCI6IGlmIChpMCA9PT0gMCkgaTAgPSBpOyBpMSA9IGk7IGJyZWFrO1xuICAgICAgZGVmYXVsdDogaWYgKCErc1tpXSkgYnJlYWsgb3V0OyBpZiAoaTAgPiAwKSBpMCA9IDA7IGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaTAgPiAwID8gcy5zbGljZSgwLCBpMCkgKyBzLnNsaWNlKGkxICsgMSkgOiBzO1xufVxuIiwgImltcG9ydCB7Zm9ybWF0RGVjaW1hbFBhcnRzfSBmcm9tIFwiLi9mb3JtYXREZWNpbWFsLmpzXCI7XG5cbmV4cG9ydCB2YXIgcHJlZml4RXhwb25lbnQ7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHgsIHApIHtcbiAgdmFyIGQgPSBmb3JtYXREZWNpbWFsUGFydHMoeCwgcCk7XG4gIGlmICghZCkgcmV0dXJuIHggKyBcIlwiO1xuICB2YXIgY29lZmZpY2llbnQgPSBkWzBdLFxuICAgICAgZXhwb25lbnQgPSBkWzFdLFxuICAgICAgaSA9IGV4cG9uZW50IC0gKHByZWZpeEV4cG9uZW50ID0gTWF0aC5tYXgoLTgsIE1hdGgubWluKDgsIE1hdGguZmxvb3IoZXhwb25lbnQgLyAzKSkpICogMykgKyAxLFxuICAgICAgbiA9IGNvZWZmaWNpZW50Lmxlbmd0aDtcbiAgcmV0dXJuIGkgPT09IG4gPyBjb2VmZmljaWVudFxuICAgICAgOiBpID4gbiA/IGNvZWZmaWNpZW50ICsgbmV3IEFycmF5KGkgLSBuICsgMSkuam9pbihcIjBcIilcbiAgICAgIDogaSA+IDAgPyBjb2VmZmljaWVudC5zbGljZSgwLCBpKSArIFwiLlwiICsgY29lZmZpY2llbnQuc2xpY2UoaSlcbiAgICAgIDogXCIwLlwiICsgbmV3IEFycmF5KDEgLSBpKS5qb2luKFwiMFwiKSArIGZvcm1hdERlY2ltYWxQYXJ0cyh4LCBNYXRoLm1heCgwLCBwICsgaSAtIDEpKVswXTsgLy8gbGVzcyB0aGFuIDF5IVxufVxuIiwgImltcG9ydCB7Zm9ybWF0RGVjaW1hbFBhcnRzfSBmcm9tIFwiLi9mb3JtYXREZWNpbWFsLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHgsIHApIHtcbiAgdmFyIGQgPSBmb3JtYXREZWNpbWFsUGFydHMoeCwgcCk7XG4gIGlmICghZCkgcmV0dXJuIHggKyBcIlwiO1xuICB2YXIgY29lZmZpY2llbnQgPSBkWzBdLFxuICAgICAgZXhwb25lbnQgPSBkWzFdO1xuICByZXR1cm4gZXhwb25lbnQgPCAwID8gXCIwLlwiICsgbmV3IEFycmF5KC1leHBvbmVudCkuam9pbihcIjBcIikgKyBjb2VmZmljaWVudFxuICAgICAgOiBjb2VmZmljaWVudC5sZW5ndGggPiBleHBvbmVudCArIDEgPyBjb2VmZmljaWVudC5zbGljZSgwLCBleHBvbmVudCArIDEpICsgXCIuXCIgKyBjb2VmZmljaWVudC5zbGljZShleHBvbmVudCArIDEpXG4gICAgICA6IGNvZWZmaWNpZW50ICsgbmV3IEFycmF5KGV4cG9uZW50IC0gY29lZmZpY2llbnQubGVuZ3RoICsgMikuam9pbihcIjBcIik7XG59XG4iLCAiaW1wb3J0IGZvcm1hdERlY2ltYWwgZnJvbSBcIi4vZm9ybWF0RGVjaW1hbC5qc1wiO1xuaW1wb3J0IGZvcm1hdFByZWZpeEF1dG8gZnJvbSBcIi4vZm9ybWF0UHJlZml4QXV0by5qc1wiO1xuaW1wb3J0IGZvcm1hdFJvdW5kZWQgZnJvbSBcIi4vZm9ybWF0Um91bmRlZC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIFwiJVwiOiAoeCwgcCkgPT4gKHggKiAxMDApLnRvRml4ZWQocCksXG4gIFwiYlwiOiAoeCkgPT4gTWF0aC5yb3VuZCh4KS50b1N0cmluZygyKSxcbiAgXCJjXCI6ICh4KSA9PiB4ICsgXCJcIixcbiAgXCJkXCI6IGZvcm1hdERlY2ltYWwsXG4gIFwiZVwiOiAoeCwgcCkgPT4geC50b0V4cG9uZW50aWFsKHApLFxuICBcImZcIjogKHgsIHApID0+IHgudG9GaXhlZChwKSxcbiAgXCJnXCI6ICh4LCBwKSA9PiB4LnRvUHJlY2lzaW9uKHApLFxuICBcIm9cIjogKHgpID0+IE1hdGgucm91bmQoeCkudG9TdHJpbmcoOCksXG4gIFwicFwiOiAoeCwgcCkgPT4gZm9ybWF0Um91bmRlZCh4ICogMTAwLCBwKSxcbiAgXCJyXCI6IGZvcm1hdFJvdW5kZWQsXG4gIFwic1wiOiBmb3JtYXRQcmVmaXhBdXRvLFxuICBcIlhcIjogKHgpID0+IE1hdGgucm91bmQoeCkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCksXG4gIFwieFwiOiAoeCkgPT4gTWF0aC5yb3VuZCh4KS50b1N0cmluZygxNilcbn07XG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oeCkge1xuICByZXR1cm4geDtcbn1cbiIsICJpbXBvcnQgZXhwb25lbnQgZnJvbSBcIi4vZXhwb25lbnQuanNcIjtcbmltcG9ydCBmb3JtYXRHcm91cCBmcm9tIFwiLi9mb3JtYXRHcm91cC5qc1wiO1xuaW1wb3J0IGZvcm1hdE51bWVyYWxzIGZyb20gXCIuL2Zvcm1hdE51bWVyYWxzLmpzXCI7XG5pbXBvcnQgZm9ybWF0U3BlY2lmaWVyIGZyb20gXCIuL2Zvcm1hdFNwZWNpZmllci5qc1wiO1xuaW1wb3J0IGZvcm1hdFRyaW0gZnJvbSBcIi4vZm9ybWF0VHJpbS5qc1wiO1xuaW1wb3J0IGZvcm1hdFR5cGVzIGZyb20gXCIuL2Zvcm1hdFR5cGVzLmpzXCI7XG5pbXBvcnQge3ByZWZpeEV4cG9uZW50fSBmcm9tIFwiLi9mb3JtYXRQcmVmaXhBdXRvLmpzXCI7XG5pbXBvcnQgaWRlbnRpdHkgZnJvbSBcIi4vaWRlbnRpdHkuanNcIjtcblxudmFyIG1hcCA9IEFycmF5LnByb3RvdHlwZS5tYXAsXG4gICAgcHJlZml4ZXMgPSBbXCJ5XCIsXCJ6XCIsXCJhXCIsXCJmXCIsXCJwXCIsXCJuXCIsXCJcdTAwQjVcIixcIm1cIixcIlwiLFwia1wiLFwiTVwiLFwiR1wiLFwiVFwiLFwiUFwiLFwiRVwiLFwiWlwiLFwiWVwiXTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24obG9jYWxlKSB7XG4gIHZhciBncm91cCA9IGxvY2FsZS5ncm91cGluZyA9PT0gdW5kZWZpbmVkIHx8IGxvY2FsZS50aG91c2FuZHMgPT09IHVuZGVmaW5lZCA/IGlkZW50aXR5IDogZm9ybWF0R3JvdXAobWFwLmNhbGwobG9jYWxlLmdyb3VwaW5nLCBOdW1iZXIpLCBsb2NhbGUudGhvdXNhbmRzICsgXCJcIiksXG4gICAgICBjdXJyZW5jeVByZWZpeCA9IGxvY2FsZS5jdXJyZW5jeSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IGxvY2FsZS5jdXJyZW5jeVswXSArIFwiXCIsXG4gICAgICBjdXJyZW5jeVN1ZmZpeCA9IGxvY2FsZS5jdXJyZW5jeSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IGxvY2FsZS5jdXJyZW5jeVsxXSArIFwiXCIsXG4gICAgICBkZWNpbWFsID0gbG9jYWxlLmRlY2ltYWwgPT09IHVuZGVmaW5lZCA/IFwiLlwiIDogbG9jYWxlLmRlY2ltYWwgKyBcIlwiLFxuICAgICAgbnVtZXJhbHMgPSBsb2NhbGUubnVtZXJhbHMgPT09IHVuZGVmaW5lZCA/IGlkZW50aXR5IDogZm9ybWF0TnVtZXJhbHMobWFwLmNhbGwobG9jYWxlLm51bWVyYWxzLCBTdHJpbmcpKSxcbiAgICAgIHBlcmNlbnQgPSBsb2NhbGUucGVyY2VudCA9PT0gdW5kZWZpbmVkID8gXCIlXCIgOiBsb2NhbGUucGVyY2VudCArIFwiXCIsXG4gICAgICBtaW51cyA9IGxvY2FsZS5taW51cyA9PT0gdW5kZWZpbmVkID8gXCJcdTIyMTJcIiA6IGxvY2FsZS5taW51cyArIFwiXCIsXG4gICAgICBuYW4gPSBsb2NhbGUubmFuID09PSB1bmRlZmluZWQgPyBcIk5hTlwiIDogbG9jYWxlLm5hbiArIFwiXCI7XG5cbiAgZnVuY3Rpb24gbmV3Rm9ybWF0KHNwZWNpZmllcikge1xuICAgIHNwZWNpZmllciA9IGZvcm1hdFNwZWNpZmllcihzcGVjaWZpZXIpO1xuXG4gICAgdmFyIGZpbGwgPSBzcGVjaWZpZXIuZmlsbCxcbiAgICAgICAgYWxpZ24gPSBzcGVjaWZpZXIuYWxpZ24sXG4gICAgICAgIHNpZ24gPSBzcGVjaWZpZXIuc2lnbixcbiAgICAgICAgc3ltYm9sID0gc3BlY2lmaWVyLnN5bWJvbCxcbiAgICAgICAgemVybyA9IHNwZWNpZmllci56ZXJvLFxuICAgICAgICB3aWR0aCA9IHNwZWNpZmllci53aWR0aCxcbiAgICAgICAgY29tbWEgPSBzcGVjaWZpZXIuY29tbWEsXG4gICAgICAgIHByZWNpc2lvbiA9IHNwZWNpZmllci5wcmVjaXNpb24sXG4gICAgICAgIHRyaW0gPSBzcGVjaWZpZXIudHJpbSxcbiAgICAgICAgdHlwZSA9IHNwZWNpZmllci50eXBlO1xuXG4gICAgLy8gVGhlIFwiblwiIHR5cGUgaXMgYW4gYWxpYXMgZm9yIFwiLGdcIi5cbiAgICBpZiAodHlwZSA9PT0gXCJuXCIpIGNvbW1hID0gdHJ1ZSwgdHlwZSA9IFwiZ1wiO1xuXG4gICAgLy8gVGhlIFwiXCIgdHlwZSwgYW5kIGFueSBpbnZhbGlkIHR5cGUsIGlzIGFuIGFsaWFzIGZvciBcIi4xMn5nXCIuXG4gICAgZWxzZSBpZiAoIWZvcm1hdFR5cGVzW3R5cGVdKSBwcmVjaXNpb24gPT09IHVuZGVmaW5lZCAmJiAocHJlY2lzaW9uID0gMTIpLCB0cmltID0gdHJ1ZSwgdHlwZSA9IFwiZ1wiO1xuXG4gICAgLy8gSWYgemVybyBmaWxsIGlzIHNwZWNpZmllZCwgcGFkZGluZyBnb2VzIGFmdGVyIHNpZ24gYW5kIGJlZm9yZSBkaWdpdHMuXG4gICAgaWYgKHplcm8gfHwgKGZpbGwgPT09IFwiMFwiICYmIGFsaWduID09PSBcIj1cIikpIHplcm8gPSB0cnVlLCBmaWxsID0gXCIwXCIsIGFsaWduID0gXCI9XCI7XG5cbiAgICAvLyBDb21wdXRlIHRoZSBwcmVmaXggYW5kIHN1ZmZpeC5cbiAgICAvLyBGb3IgU0ktcHJlZml4LCB0aGUgc3VmZml4IGlzIGxhemlseSBjb21wdXRlZC5cbiAgICB2YXIgcHJlZml4ID0gc3ltYm9sID09PSBcIiRcIiA/IGN1cnJlbmN5UHJlZml4IDogc3ltYm9sID09PSBcIiNcIiAmJiAvW2JveFhdLy50ZXN0KHR5cGUpID8gXCIwXCIgKyB0eXBlLnRvTG93ZXJDYXNlKCkgOiBcIlwiLFxuICAgICAgICBzdWZmaXggPSBzeW1ib2wgPT09IFwiJFwiID8gY3VycmVuY3lTdWZmaXggOiAvWyVwXS8udGVzdCh0eXBlKSA/IHBlcmNlbnQgOiBcIlwiO1xuXG4gICAgLy8gV2hhdCBmb3JtYXQgZnVuY3Rpb24gc2hvdWxkIHdlIHVzZT9cbiAgICAvLyBJcyB0aGlzIGFuIGludGVnZXIgdHlwZT9cbiAgICAvLyBDYW4gdGhpcyB0eXBlIGdlbmVyYXRlIGV4cG9uZW50aWFsIG5vdGF0aW9uP1xuICAgIHZhciBmb3JtYXRUeXBlID0gZm9ybWF0VHlwZXNbdHlwZV0sXG4gICAgICAgIG1heWJlU3VmZml4ID0gL1tkZWZncHJzJV0vLnRlc3QodHlwZSk7XG5cbiAgICAvLyBTZXQgdGhlIGRlZmF1bHQgcHJlY2lzaW9uIGlmIG5vdCBzcGVjaWZpZWQsXG4gICAgLy8gb3IgY2xhbXAgdGhlIHNwZWNpZmllZCBwcmVjaXNpb24gdG8gdGhlIHN1cHBvcnRlZCByYW5nZS5cbiAgICAvLyBGb3Igc2lnbmlmaWNhbnQgcHJlY2lzaW9uLCBpdCBtdXN0IGJlIGluIFsxLCAyMV0uXG4gICAgLy8gRm9yIGZpeGVkIHByZWNpc2lvbiwgaXQgbXVzdCBiZSBpbiBbMCwgMjBdLlxuICAgIHByZWNpc2lvbiA9IHByZWNpc2lvbiA9PT0gdW5kZWZpbmVkID8gNlxuICAgICAgICA6IC9bZ3Byc10vLnRlc3QodHlwZSkgPyBNYXRoLm1heCgxLCBNYXRoLm1pbigyMSwgcHJlY2lzaW9uKSlcbiAgICAgICAgOiBNYXRoLm1heCgwLCBNYXRoLm1pbigyMCwgcHJlY2lzaW9uKSk7XG5cbiAgICBmdW5jdGlvbiBmb3JtYXQodmFsdWUpIHtcbiAgICAgIHZhciB2YWx1ZVByZWZpeCA9IHByZWZpeCxcbiAgICAgICAgICB2YWx1ZVN1ZmZpeCA9IHN1ZmZpeCxcbiAgICAgICAgICBpLCBuLCBjO1xuXG4gICAgICBpZiAodHlwZSA9PT0gXCJjXCIpIHtcbiAgICAgICAgdmFsdWVTdWZmaXggPSBmb3JtYXRUeXBlKHZhbHVlKSArIHZhbHVlU3VmZml4O1xuICAgICAgICB2YWx1ZSA9IFwiXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9ICt2YWx1ZTtcblxuICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIHNpZ24uIC0wIGlzIG5vdCBsZXNzIHRoYW4gMCwgYnV0IDEgLyAtMCBpcyFcbiAgICAgICAgdmFyIHZhbHVlTmVnYXRpdmUgPSB2YWx1ZSA8IDAgfHwgMSAvIHZhbHVlIDwgMDtcblxuICAgICAgICAvLyBQZXJmb3JtIHRoZSBpbml0aWFsIGZvcm1hdHRpbmcuXG4gICAgICAgIHZhbHVlID0gaXNOYU4odmFsdWUpID8gbmFuIDogZm9ybWF0VHlwZShNYXRoLmFicyh2YWx1ZSksIHByZWNpc2lvbik7XG5cbiAgICAgICAgLy8gVHJpbSBpbnNpZ25pZmljYW50IHplcm9zLlxuICAgICAgICBpZiAodHJpbSkgdmFsdWUgPSBmb3JtYXRUcmltKHZhbHVlKTtcblxuICAgICAgICAvLyBJZiBhIG5lZ2F0aXZlIHZhbHVlIHJvdW5kcyB0byB6ZXJvIGFmdGVyIGZvcm1hdHRpbmcsIGFuZCBubyBleHBsaWNpdCBwb3NpdGl2ZSBzaWduIGlzIHJlcXVlc3RlZCwgaGlkZSB0aGUgc2lnbi5cbiAgICAgICAgaWYgKHZhbHVlTmVnYXRpdmUgJiYgK3ZhbHVlID09PSAwICYmIHNpZ24gIT09IFwiK1wiKSB2YWx1ZU5lZ2F0aXZlID0gZmFsc2U7XG5cbiAgICAgICAgLy8gQ29tcHV0ZSB0aGUgcHJlZml4IGFuZCBzdWZmaXguXG4gICAgICAgIHZhbHVlUHJlZml4ID0gKHZhbHVlTmVnYXRpdmUgPyAoc2lnbiA9PT0gXCIoXCIgPyBzaWduIDogbWludXMpIDogc2lnbiA9PT0gXCItXCIgfHwgc2lnbiA9PT0gXCIoXCIgPyBcIlwiIDogc2lnbikgKyB2YWx1ZVByZWZpeDtcbiAgICAgICAgdmFsdWVTdWZmaXggPSAodHlwZSA9PT0gXCJzXCIgPyBwcmVmaXhlc1s4ICsgcHJlZml4RXhwb25lbnQgLyAzXSA6IFwiXCIpICsgdmFsdWVTdWZmaXggKyAodmFsdWVOZWdhdGl2ZSAmJiBzaWduID09PSBcIihcIiA/IFwiKVwiIDogXCJcIik7XG5cbiAgICAgICAgLy8gQnJlYWsgdGhlIGZvcm1hdHRlZCB2YWx1ZSBpbnRvIHRoZSBpbnRlZ2VyIFx1MjAxQ3ZhbHVlXHUyMDFEIHBhcnQgdGhhdCBjYW4gYmVcbiAgICAgICAgLy8gZ3JvdXBlZCwgYW5kIGZyYWN0aW9uYWwgb3IgZXhwb25lbnRpYWwgXHUyMDFDc3VmZml4XHUyMDFEIHBhcnQgdGhhdCBpcyBub3QuXG4gICAgICAgIGlmIChtYXliZVN1ZmZpeCkge1xuICAgICAgICAgIGkgPSAtMSwgbiA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgICB3aGlsZSAoKytpIDwgbikge1xuICAgICAgICAgICAgaWYgKGMgPSB2YWx1ZS5jaGFyQ29kZUF0KGkpLCA0OCA+IGMgfHwgYyA+IDU3KSB7XG4gICAgICAgICAgICAgIHZhbHVlU3VmZml4ID0gKGMgPT09IDQ2ID8gZGVjaW1hbCArIHZhbHVlLnNsaWNlKGkgKyAxKSA6IHZhbHVlLnNsaWNlKGkpKSArIHZhbHVlU3VmZml4O1xuICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDAsIGkpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlIGZpbGwgY2hhcmFjdGVyIGlzIG5vdCBcIjBcIiwgZ3JvdXBpbmcgaXMgYXBwbGllZCBiZWZvcmUgcGFkZGluZy5cbiAgICAgIGlmIChjb21tYSAmJiAhemVybykgdmFsdWUgPSBncm91cCh2YWx1ZSwgSW5maW5pdHkpO1xuXG4gICAgICAvLyBDb21wdXRlIHRoZSBwYWRkaW5nLlxuICAgICAgdmFyIGxlbmd0aCA9IHZhbHVlUHJlZml4Lmxlbmd0aCArIHZhbHVlLmxlbmd0aCArIHZhbHVlU3VmZml4Lmxlbmd0aCxcbiAgICAgICAgICBwYWRkaW5nID0gbGVuZ3RoIDwgd2lkdGggPyBuZXcgQXJyYXkod2lkdGggLSBsZW5ndGggKyAxKS5qb2luKGZpbGwpIDogXCJcIjtcblxuICAgICAgLy8gSWYgdGhlIGZpbGwgY2hhcmFjdGVyIGlzIFwiMFwiLCBncm91cGluZyBpcyBhcHBsaWVkIGFmdGVyIHBhZGRpbmcuXG4gICAgICBpZiAoY29tbWEgJiYgemVybykgdmFsdWUgPSBncm91cChwYWRkaW5nICsgdmFsdWUsIHBhZGRpbmcubGVuZ3RoID8gd2lkdGggLSB2YWx1ZVN1ZmZpeC5sZW5ndGggOiBJbmZpbml0eSksIHBhZGRpbmcgPSBcIlwiO1xuXG4gICAgICAvLyBSZWNvbnN0cnVjdCB0aGUgZmluYWwgb3V0cHV0IGJhc2VkIG9uIHRoZSBkZXNpcmVkIGFsaWdubWVudC5cbiAgICAgIHN3aXRjaCAoYWxpZ24pIHtcbiAgICAgICAgY2FzZSBcIjxcIjogdmFsdWUgPSB2YWx1ZVByZWZpeCArIHZhbHVlICsgdmFsdWVTdWZmaXggKyBwYWRkaW5nOyBicmVhaztcbiAgICAgICAgY2FzZSBcIj1cIjogdmFsdWUgPSB2YWx1ZVByZWZpeCArIHBhZGRpbmcgKyB2YWx1ZSArIHZhbHVlU3VmZml4OyBicmVhaztcbiAgICAgICAgY2FzZSBcIl5cIjogdmFsdWUgPSBwYWRkaW5nLnNsaWNlKDAsIGxlbmd0aCA9IHBhZGRpbmcubGVuZ3RoID4+IDEpICsgdmFsdWVQcmVmaXggKyB2YWx1ZSArIHZhbHVlU3VmZml4ICsgcGFkZGluZy5zbGljZShsZW5ndGgpOyBicmVhaztcbiAgICAgICAgZGVmYXVsdDogdmFsdWUgPSBwYWRkaW5nICsgdmFsdWVQcmVmaXggKyB2YWx1ZSArIHZhbHVlU3VmZml4OyBicmVhaztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bWVyYWxzKHZhbHVlKTtcbiAgICB9XG5cbiAgICBmb3JtYXQudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBzcGVjaWZpZXIgKyBcIlwiO1xuICAgIH07XG5cbiAgICByZXR1cm4gZm9ybWF0O1xuICB9XG5cbiAgZnVuY3Rpb24gZm9ybWF0UHJlZml4KHNwZWNpZmllciwgdmFsdWUpIHtcbiAgICB2YXIgZiA9IG5ld0Zvcm1hdCgoc3BlY2lmaWVyID0gZm9ybWF0U3BlY2lmaWVyKHNwZWNpZmllciksIHNwZWNpZmllci50eXBlID0gXCJmXCIsIHNwZWNpZmllcikpLFxuICAgICAgICBlID0gTWF0aC5tYXgoLTgsIE1hdGgubWluKDgsIE1hdGguZmxvb3IoZXhwb25lbnQodmFsdWUpIC8gMykpKSAqIDMsXG4gICAgICAgIGsgPSBNYXRoLnBvdygxMCwgLWUpLFxuICAgICAgICBwcmVmaXggPSBwcmVmaXhlc1s4ICsgZSAvIDNdO1xuICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIGYoayAqIHZhbHVlKSArIHByZWZpeDtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBmb3JtYXQ6IG5ld0Zvcm1hdCxcbiAgICBmb3JtYXRQcmVmaXg6IGZvcm1hdFByZWZpeFxuICB9O1xufVxuIiwgImltcG9ydCBmb3JtYXRMb2NhbGUgZnJvbSBcIi4vbG9jYWxlLmpzXCI7XG5cbnZhciBsb2NhbGU7XG5leHBvcnQgdmFyIGZvcm1hdDtcbmV4cG9ydCB2YXIgZm9ybWF0UHJlZml4O1xuXG5kZWZhdWx0TG9jYWxlKHtcbiAgdGhvdXNhbmRzOiBcIixcIixcbiAgZ3JvdXBpbmc6IFszXSxcbiAgY3VycmVuY3k6IFtcIiRcIiwgXCJcIl1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZWZhdWx0TG9jYWxlKGRlZmluaXRpb24pIHtcbiAgbG9jYWxlID0gZm9ybWF0TG9jYWxlKGRlZmluaXRpb24pO1xuICBmb3JtYXQgPSBsb2NhbGUuZm9ybWF0O1xuICBmb3JtYXRQcmVmaXggPSBsb2NhbGUuZm9ybWF0UHJlZml4O1xuICByZXR1cm4gbG9jYWxlO1xufVxuIiwgImltcG9ydCBleHBvbmVudCBmcm9tIFwiLi9leHBvbmVudC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzdGVwKSB7XG4gIHJldHVybiBNYXRoLm1heCgwLCAtZXhwb25lbnQoTWF0aC5hYnMoc3RlcCkpKTtcbn1cbiIsICJpbXBvcnQgZXhwb25lbnQgZnJvbSBcIi4vZXhwb25lbnQuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc3RlcCwgdmFsdWUpIHtcbiAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWF4KC04LCBNYXRoLm1pbig4LCBNYXRoLmZsb29yKGV4cG9uZW50KHZhbHVlKSAvIDMpKSkgKiAzIC0gZXhwb25lbnQoTWF0aC5hYnMoc3RlcCkpKTtcbn1cbiIsICJpbXBvcnQgZXhwb25lbnQgZnJvbSBcIi4vZXhwb25lbnQuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oc3RlcCwgbWF4KSB7XG4gIHN0ZXAgPSBNYXRoLmFicyhzdGVwKSwgbWF4ID0gTWF0aC5hYnMobWF4KSAtIHN0ZXA7XG4gIHJldHVybiBNYXRoLm1heCgwLCBleHBvbmVudChtYXgpIC0gZXhwb25lbnQoc3RlcCkpICsgMTtcbn1cbiIsICJleHBvcnQgZnVuY3Rpb24gaW5pdFJhbmdlKGRvbWFpbiwgcmFuZ2UpIHtcbiAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgY2FzZSAwOiBicmVhaztcbiAgICBjYXNlIDE6IHRoaXMucmFuZ2UoZG9tYWluKTsgYnJlYWs7XG4gICAgZGVmYXVsdDogdGhpcy5yYW5nZShyYW5nZSkuZG9tYWluKGRvbWFpbik7IGJyZWFrO1xuICB9XG4gIHJldHVybiB0aGlzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdEludGVycG9sYXRvcihkb21haW4sIGludGVycG9sYXRvcikge1xuICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICBjYXNlIDA6IGJyZWFrO1xuICAgIGNhc2UgMToge1xuICAgICAgaWYgKHR5cGVvZiBkb21haW4gPT09IFwiZnVuY3Rpb25cIikgdGhpcy5pbnRlcnBvbGF0b3IoZG9tYWluKTtcbiAgICAgIGVsc2UgdGhpcy5yYW5nZShkb21haW4pO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIHRoaXMuZG9tYWluKGRvbWFpbik7XG4gICAgICBpZiAodHlwZW9mIGludGVycG9sYXRvciA9PT0gXCJmdW5jdGlvblwiKSB0aGlzLmludGVycG9sYXRvcihpbnRlcnBvbGF0b3IpO1xuICAgICAgZWxzZSB0aGlzLnJhbmdlKGludGVycG9sYXRvcik7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59XG4iLCAiaW1wb3J0IHtJbnRlcm5NYXB9IGZyb20gXCJkMy1hcnJheVwiO1xuaW1wb3J0IHtpbml0UmFuZ2V9IGZyb20gXCIuL2luaXQuanNcIjtcblxuZXhwb3J0IGNvbnN0IGltcGxpY2l0ID0gU3ltYm9sKFwiaW1wbGljaXRcIik7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG9yZGluYWwoKSB7XG4gIHZhciBpbmRleCA9IG5ldyBJbnRlcm5NYXAoKSxcbiAgICAgIGRvbWFpbiA9IFtdLFxuICAgICAgcmFuZ2UgPSBbXSxcbiAgICAgIHVua25vd24gPSBpbXBsaWNpdDtcblxuICBmdW5jdGlvbiBzY2FsZShkKSB7XG4gICAgbGV0IGkgPSBpbmRleC5nZXQoZCk7XG4gICAgaWYgKGkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHVua25vd24gIT09IGltcGxpY2l0KSByZXR1cm4gdW5rbm93bjtcbiAgICAgIGluZGV4LnNldChkLCBpID0gZG9tYWluLnB1c2goZCkgLSAxKTtcbiAgICB9XG4gICAgcmV0dXJuIHJhbmdlW2kgJSByYW5nZS5sZW5ndGhdO1xuICB9XG5cbiAgc2NhbGUuZG9tYWluID0gZnVuY3Rpb24oXykge1xuICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGRvbWFpbi5zbGljZSgpO1xuICAgIGRvbWFpbiA9IFtdLCBpbmRleCA9IG5ldyBJbnRlcm5NYXAoKTtcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIF8pIHtcbiAgICAgIGlmIChpbmRleC5oYXModmFsdWUpKSBjb250aW51ZTtcbiAgICAgIGluZGV4LnNldCh2YWx1ZSwgZG9tYWluLnB1c2godmFsdWUpIC0gMSk7XG4gICAgfVxuICAgIHJldHVybiBzY2FsZTtcbiAgfTtcblxuICBzY2FsZS5yYW5nZSA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChyYW5nZSA9IEFycmF5LmZyb20oXyksIHNjYWxlKSA6IHJhbmdlLnNsaWNlKCk7XG4gIH07XG5cbiAgc2NhbGUudW5rbm93biA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/ICh1bmtub3duID0gXywgc2NhbGUpIDogdW5rbm93bjtcbiAgfTtcblxuICBzY2FsZS5jb3B5ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG9yZGluYWwoZG9tYWluLCByYW5nZSkudW5rbm93bih1bmtub3duKTtcbiAgfTtcblxuICBpbml0UmFuZ2UuYXBwbHkoc2NhbGUsIGFyZ3VtZW50cyk7XG5cbiAgcmV0dXJuIHNjYWxlO1xufVxuIiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbnN0YW50cyh4KSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4geDtcbiAgfTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBudW1iZXIoeCkge1xuICByZXR1cm4gK3g7XG59XG4iLCAiaW1wb3J0IHtiaXNlY3R9IGZyb20gXCJkMy1hcnJheVwiO1xuaW1wb3J0IHtpbnRlcnBvbGF0ZSBhcyBpbnRlcnBvbGF0ZVZhbHVlLCBpbnRlcnBvbGF0ZU51bWJlciwgaW50ZXJwb2xhdGVSb3VuZH0gZnJvbSBcImQzLWludGVycG9sYXRlXCI7XG5pbXBvcnQgY29uc3RhbnQgZnJvbSBcIi4vY29uc3RhbnQuanNcIjtcbmltcG9ydCBudW1iZXIgZnJvbSBcIi4vbnVtYmVyLmpzXCI7XG5cbnZhciB1bml0ID0gWzAsIDFdO1xuXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkoeCkge1xuICByZXR1cm4geDtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplKGEsIGIpIHtcbiAgcmV0dXJuIChiIC09IChhID0gK2EpKVxuICAgICAgPyBmdW5jdGlvbih4KSB7IHJldHVybiAoeCAtIGEpIC8gYjsgfVxuICAgICAgOiBjb25zdGFudChpc05hTihiKSA/IE5hTiA6IDAuNSk7XG59XG5cbmZ1bmN0aW9uIGNsYW1wZXIoYSwgYikge1xuICB2YXIgdDtcbiAgaWYgKGEgPiBiKSB0ID0gYSwgYSA9IGIsIGIgPSB0O1xuICByZXR1cm4gZnVuY3Rpb24oeCkgeyByZXR1cm4gTWF0aC5tYXgoYSwgTWF0aC5taW4oYiwgeCkpOyB9O1xufVxuXG4vLyBub3JtYWxpemUoYSwgYikoeCkgdGFrZXMgYSBkb21haW4gdmFsdWUgeCBpbiBbYSxiXSBhbmQgcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyBwYXJhbWV0ZXIgdCBpbiBbMCwxXS5cbi8vIGludGVycG9sYXRlKGEsIGIpKHQpIHRha2VzIGEgcGFyYW1ldGVyIHQgaW4gWzAsMV0gYW5kIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcmFuZ2UgdmFsdWUgeCBpbiBbYSxiXS5cbmZ1bmN0aW9uIGJpbWFwKGRvbWFpbiwgcmFuZ2UsIGludGVycG9sYXRlKSB7XG4gIHZhciBkMCA9IGRvbWFpblswXSwgZDEgPSBkb21haW5bMV0sIHIwID0gcmFuZ2VbMF0sIHIxID0gcmFuZ2VbMV07XG4gIGlmIChkMSA8IGQwKSBkMCA9IG5vcm1hbGl6ZShkMSwgZDApLCByMCA9IGludGVycG9sYXRlKHIxLCByMCk7XG4gIGVsc2UgZDAgPSBub3JtYWxpemUoZDAsIGQxKSwgcjAgPSBpbnRlcnBvbGF0ZShyMCwgcjEpO1xuICByZXR1cm4gZnVuY3Rpb24oeCkgeyByZXR1cm4gcjAoZDAoeCkpOyB9O1xufVxuXG5mdW5jdGlvbiBwb2x5bWFwKGRvbWFpbiwgcmFuZ2UsIGludGVycG9sYXRlKSB7XG4gIHZhciBqID0gTWF0aC5taW4oZG9tYWluLmxlbmd0aCwgcmFuZ2UubGVuZ3RoKSAtIDEsXG4gICAgICBkID0gbmV3IEFycmF5KGopLFxuICAgICAgciA9IG5ldyBBcnJheShqKSxcbiAgICAgIGkgPSAtMTtcblxuICAvLyBSZXZlcnNlIGRlc2NlbmRpbmcgZG9tYWlucy5cbiAgaWYgKGRvbWFpbltqXSA8IGRvbWFpblswXSkge1xuICAgIGRvbWFpbiA9IGRvbWFpbi5zbGljZSgpLnJldmVyc2UoKTtcbiAgICByYW5nZSA9IHJhbmdlLnNsaWNlKCkucmV2ZXJzZSgpO1xuICB9XG5cbiAgd2hpbGUgKCsraSA8IGopIHtcbiAgICBkW2ldID0gbm9ybWFsaXplKGRvbWFpbltpXSwgZG9tYWluW2kgKyAxXSk7XG4gICAgcltpXSA9IGludGVycG9sYXRlKHJhbmdlW2ldLCByYW5nZVtpICsgMV0pO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKHgpIHtcbiAgICB2YXIgaSA9IGJpc2VjdChkb21haW4sIHgsIDEsIGopIC0gMTtcbiAgICByZXR1cm4gcltpXShkW2ldKHgpKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvcHkoc291cmNlLCB0YXJnZXQpIHtcbiAgcmV0dXJuIHRhcmdldFxuICAgICAgLmRvbWFpbihzb3VyY2UuZG9tYWluKCkpXG4gICAgICAucmFuZ2Uoc291cmNlLnJhbmdlKCkpXG4gICAgICAuaW50ZXJwb2xhdGUoc291cmNlLmludGVycG9sYXRlKCkpXG4gICAgICAuY2xhbXAoc291cmNlLmNsYW1wKCkpXG4gICAgICAudW5rbm93bihzb3VyY2UudW5rbm93bigpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybWVyKCkge1xuICB2YXIgZG9tYWluID0gdW5pdCxcbiAgICAgIHJhbmdlID0gdW5pdCxcbiAgICAgIGludGVycG9sYXRlID0gaW50ZXJwb2xhdGVWYWx1ZSxcbiAgICAgIHRyYW5zZm9ybSxcbiAgICAgIHVudHJhbnNmb3JtLFxuICAgICAgdW5rbm93bixcbiAgICAgIGNsYW1wID0gaWRlbnRpdHksXG4gICAgICBwaWVjZXdpc2UsXG4gICAgICBvdXRwdXQsXG4gICAgICBpbnB1dDtcblxuICBmdW5jdGlvbiByZXNjYWxlKCkge1xuICAgIHZhciBuID0gTWF0aC5taW4oZG9tYWluLmxlbmd0aCwgcmFuZ2UubGVuZ3RoKTtcbiAgICBpZiAoY2xhbXAgIT09IGlkZW50aXR5KSBjbGFtcCA9IGNsYW1wZXIoZG9tYWluWzBdLCBkb21haW5bbiAtIDFdKTtcbiAgICBwaWVjZXdpc2UgPSBuID4gMiA/IHBvbHltYXAgOiBiaW1hcDtcbiAgICBvdXRwdXQgPSBpbnB1dCA9IG51bGw7XG4gICAgcmV0dXJuIHNjYWxlO1xuICB9XG5cbiAgZnVuY3Rpb24gc2NhbGUoeCkge1xuICAgIHJldHVybiB4ID09IG51bGwgfHwgaXNOYU4oeCA9ICt4KSA/IHVua25vd24gOiAob3V0cHV0IHx8IChvdXRwdXQgPSBwaWVjZXdpc2UoZG9tYWluLm1hcCh0cmFuc2Zvcm0pLCByYW5nZSwgaW50ZXJwb2xhdGUpKSkodHJhbnNmb3JtKGNsYW1wKHgpKSk7XG4gIH1cblxuICBzY2FsZS5pbnZlcnQgPSBmdW5jdGlvbih5KSB7XG4gICAgcmV0dXJuIGNsYW1wKHVudHJhbnNmb3JtKChpbnB1dCB8fCAoaW5wdXQgPSBwaWVjZXdpc2UocmFuZ2UsIGRvbWFpbi5tYXAodHJhbnNmb3JtKSwgaW50ZXJwb2xhdGVOdW1iZXIpKSkoeSkpKTtcbiAgfTtcblxuICBzY2FsZS5kb21haW4gPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoZG9tYWluID0gQXJyYXkuZnJvbShfLCBudW1iZXIpLCByZXNjYWxlKCkpIDogZG9tYWluLnNsaWNlKCk7XG4gIH07XG5cbiAgc2NhbGUucmFuZ2UgPSBmdW5jdGlvbihfKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAocmFuZ2UgPSBBcnJheS5mcm9tKF8pLCByZXNjYWxlKCkpIDogcmFuZ2Uuc2xpY2UoKTtcbiAgfTtcblxuICBzY2FsZS5yYW5nZVJvdW5kID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiByYW5nZSA9IEFycmF5LmZyb20oXyksIGludGVycG9sYXRlID0gaW50ZXJwb2xhdGVSb3VuZCwgcmVzY2FsZSgpO1xuICB9O1xuXG4gIHNjYWxlLmNsYW1wID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKGNsYW1wID0gXyA/IHRydWUgOiBpZGVudGl0eSwgcmVzY2FsZSgpKSA6IGNsYW1wICE9PSBpZGVudGl0eTtcbiAgfTtcblxuICBzY2FsZS5pbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uKF8pIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/IChpbnRlcnBvbGF0ZSA9IF8sIHJlc2NhbGUoKSkgOiBpbnRlcnBvbGF0ZTtcbiAgfTtcblxuICBzY2FsZS51bmtub3duID0gZnVuY3Rpb24oXykge1xuICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKHVua25vd24gPSBfLCBzY2FsZSkgOiB1bmtub3duO1xuICB9O1xuXG4gIHJldHVybiBmdW5jdGlvbih0LCB1KSB7XG4gICAgdHJhbnNmb3JtID0gdCwgdW50cmFuc2Zvcm0gPSB1O1xuICAgIHJldHVybiByZXNjYWxlKCk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbnRpbnVvdXMoKSB7XG4gIHJldHVybiB0cmFuc2Zvcm1lcigpKGlkZW50aXR5LCBpZGVudGl0eSk7XG59XG4iLCAiaW1wb3J0IHt0aWNrU3RlcH0gZnJvbSBcImQzLWFycmF5XCI7XG5pbXBvcnQge2Zvcm1hdCwgZm9ybWF0UHJlZml4LCBmb3JtYXRTcGVjaWZpZXIsIHByZWNpc2lvbkZpeGVkLCBwcmVjaXNpb25QcmVmaXgsIHByZWNpc2lvblJvdW5kfSBmcm9tIFwiZDMtZm9ybWF0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRpY2tGb3JtYXQoc3RhcnQsIHN0b3AsIGNvdW50LCBzcGVjaWZpZXIpIHtcbiAgdmFyIHN0ZXAgPSB0aWNrU3RlcChzdGFydCwgc3RvcCwgY291bnQpLFxuICAgICAgcHJlY2lzaW9uO1xuICBzcGVjaWZpZXIgPSBmb3JtYXRTcGVjaWZpZXIoc3BlY2lmaWVyID09IG51bGwgPyBcIixmXCIgOiBzcGVjaWZpZXIpO1xuICBzd2l0Y2ggKHNwZWNpZmllci50eXBlKSB7XG4gICAgY2FzZSBcInNcIjoge1xuICAgICAgdmFyIHZhbHVlID0gTWF0aC5tYXgoTWF0aC5hYnMoc3RhcnQpLCBNYXRoLmFicyhzdG9wKSk7XG4gICAgICBpZiAoc3BlY2lmaWVyLnByZWNpc2lvbiA9PSBudWxsICYmICFpc05hTihwcmVjaXNpb24gPSBwcmVjaXNpb25QcmVmaXgoc3RlcCwgdmFsdWUpKSkgc3BlY2lmaWVyLnByZWNpc2lvbiA9IHByZWNpc2lvbjtcbiAgICAgIHJldHVybiBmb3JtYXRQcmVmaXgoc3BlY2lmaWVyLCB2YWx1ZSk7XG4gICAgfVxuICAgIGNhc2UgXCJcIjpcbiAgICBjYXNlIFwiZVwiOlxuICAgIGNhc2UgXCJnXCI6XG4gICAgY2FzZSBcInBcIjpcbiAgICBjYXNlIFwiclwiOiB7XG4gICAgICBpZiAoc3BlY2lmaWVyLnByZWNpc2lvbiA9PSBudWxsICYmICFpc05hTihwcmVjaXNpb24gPSBwcmVjaXNpb25Sb3VuZChzdGVwLCBNYXRoLm1heChNYXRoLmFicyhzdGFydCksIE1hdGguYWJzKHN0b3ApKSkpKSBzcGVjaWZpZXIucHJlY2lzaW9uID0gcHJlY2lzaW9uIC0gKHNwZWNpZmllci50eXBlID09PSBcImVcIik7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSBcImZcIjpcbiAgICBjYXNlIFwiJVwiOiB7XG4gICAgICBpZiAoc3BlY2lmaWVyLnByZWNpc2lvbiA9PSBudWxsICYmICFpc05hTihwcmVjaXNpb24gPSBwcmVjaXNpb25GaXhlZChzdGVwKSkpIHNwZWNpZmllci5wcmVjaXNpb24gPSBwcmVjaXNpb24gLSAoc3BlY2lmaWVyLnR5cGUgPT09IFwiJVwiKSAqIDI7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZvcm1hdChzcGVjaWZpZXIpO1xufVxuIiwgImltcG9ydCB7dGlja3MsIHRpY2tJbmNyZW1lbnR9IGZyb20gXCJkMy1hcnJheVwiO1xuaW1wb3J0IGNvbnRpbnVvdXMsIHtjb3B5fSBmcm9tIFwiLi9jb250aW51b3VzLmpzXCI7XG5pbXBvcnQge2luaXRSYW5nZX0gZnJvbSBcIi4vaW5pdC5qc1wiO1xuaW1wb3J0IHRpY2tGb3JtYXQgZnJvbSBcIi4vdGlja0Zvcm1hdC5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyaXNoKHNjYWxlKSB7XG4gIHZhciBkb21haW4gPSBzY2FsZS5kb21haW47XG5cbiAgc2NhbGUudGlja3MgPSBmdW5jdGlvbihjb3VudCkge1xuICAgIHZhciBkID0gZG9tYWluKCk7XG4gICAgcmV0dXJuIHRpY2tzKGRbMF0sIGRbZC5sZW5ndGggLSAxXSwgY291bnQgPT0gbnVsbCA/IDEwIDogY291bnQpO1xuICB9O1xuXG4gIHNjYWxlLnRpY2tGb3JtYXQgPSBmdW5jdGlvbihjb3VudCwgc3BlY2lmaWVyKSB7XG4gICAgdmFyIGQgPSBkb21haW4oKTtcbiAgICByZXR1cm4gdGlja0Zvcm1hdChkWzBdLCBkW2QubGVuZ3RoIC0gMV0sIGNvdW50ID09IG51bGwgPyAxMCA6IGNvdW50LCBzcGVjaWZpZXIpO1xuICB9O1xuXG4gIHNjYWxlLm5pY2UgPSBmdW5jdGlvbihjb3VudCkge1xuICAgIGlmIChjb3VudCA9PSBudWxsKSBjb3VudCA9IDEwO1xuXG4gICAgdmFyIGQgPSBkb21haW4oKTtcbiAgICB2YXIgaTAgPSAwO1xuICAgIHZhciBpMSA9IGQubGVuZ3RoIC0gMTtcbiAgICB2YXIgc3RhcnQgPSBkW2kwXTtcbiAgICB2YXIgc3RvcCA9IGRbaTFdO1xuICAgIHZhciBwcmVzdGVwO1xuICAgIHZhciBzdGVwO1xuICAgIHZhciBtYXhJdGVyID0gMTA7XG5cbiAgICBpZiAoc3RvcCA8IHN0YXJ0KSB7XG4gICAgICBzdGVwID0gc3RhcnQsIHN0YXJ0ID0gc3RvcCwgc3RvcCA9IHN0ZXA7XG4gICAgICBzdGVwID0gaTAsIGkwID0gaTEsIGkxID0gc3RlcDtcbiAgICB9XG4gICAgXG4gICAgd2hpbGUgKG1heEl0ZXItLSA+IDApIHtcbiAgICAgIHN0ZXAgPSB0aWNrSW5jcmVtZW50KHN0YXJ0LCBzdG9wLCBjb3VudCk7XG4gICAgICBpZiAoc3RlcCA9PT0gcHJlc3RlcCkge1xuICAgICAgICBkW2kwXSA9IHN0YXJ0XG4gICAgICAgIGRbaTFdID0gc3RvcFxuICAgICAgICByZXR1cm4gZG9tYWluKGQpO1xuICAgICAgfSBlbHNlIGlmIChzdGVwID4gMCkge1xuICAgICAgICBzdGFydCA9IE1hdGguZmxvb3Ioc3RhcnQgLyBzdGVwKSAqIHN0ZXA7XG4gICAgICAgIHN0b3AgPSBNYXRoLmNlaWwoc3RvcCAvIHN0ZXApICogc3RlcDtcbiAgICAgIH0gZWxzZSBpZiAoc3RlcCA8IDApIHtcbiAgICAgICAgc3RhcnQgPSBNYXRoLmNlaWwoc3RhcnQgKiBzdGVwKSAvIHN0ZXA7XG4gICAgICAgIHN0b3AgPSBNYXRoLmZsb29yKHN0b3AgKiBzdGVwKSAvIHN0ZXA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHByZXN0ZXAgPSBzdGVwO1xuICAgIH1cblxuICAgIHJldHVybiBzY2FsZTtcbiAgfTtcblxuICByZXR1cm4gc2NhbGU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGxpbmVhcigpIHtcbiAgdmFyIHNjYWxlID0gY29udGludW91cygpO1xuXG4gIHNjYWxlLmNvcHkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gY29weShzY2FsZSwgbGluZWFyKCkpO1xuICB9O1xuXG4gIGluaXRSYW5nZS5hcHBseShzY2FsZSwgYXJndW1lbnRzKTtcblxuICByZXR1cm4gbGluZWFyaXNoKHNjYWxlKTtcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzcGVjaWZpZXIpIHtcbiAgdmFyIG4gPSBzcGVjaWZpZXIubGVuZ3RoIC8gNiB8IDAsIGNvbG9ycyA9IG5ldyBBcnJheShuKSwgaSA9IDA7XG4gIHdoaWxlIChpIDwgbikgY29sb3JzW2ldID0gXCIjXCIgKyBzcGVjaWZpZXIuc2xpY2UoaSAqIDYsICsraSAqIDYpO1xuICByZXR1cm4gY29sb3JzO1xufVxuIiwgImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjb2xvcnMoXCIxZjc3YjRmZjdmMGUyY2EwMmNkNjI3Mjg5NDY3YmQ4YzU2NGJlMzc3YzI3ZjdmN2ZiY2JkMjIxN2JlY2ZcIik7XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIFRyYW5zZm9ybShrLCB4LCB5KSB7XG4gIHRoaXMuayA9IGs7XG4gIHRoaXMueCA9IHg7XG4gIHRoaXMueSA9IHk7XG59XG5cblRyYW5zZm9ybS5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBUcmFuc2Zvcm0sXG4gIHNjYWxlOiBmdW5jdGlvbihrKSB7XG4gICAgcmV0dXJuIGsgPT09IDEgPyB0aGlzIDogbmV3IFRyYW5zZm9ybSh0aGlzLmsgKiBrLCB0aGlzLngsIHRoaXMueSk7XG4gIH0sXG4gIHRyYW5zbGF0ZTogZnVuY3Rpb24oeCwgeSkge1xuICAgIHJldHVybiB4ID09PSAwICYgeSA9PT0gMCA/IHRoaXMgOiBuZXcgVHJhbnNmb3JtKHRoaXMuaywgdGhpcy54ICsgdGhpcy5rICogeCwgdGhpcy55ICsgdGhpcy5rICogeSk7XG4gIH0sXG4gIGFwcGx5OiBmdW5jdGlvbihwb2ludCkge1xuICAgIHJldHVybiBbcG9pbnRbMF0gKiB0aGlzLmsgKyB0aGlzLngsIHBvaW50WzFdICogdGhpcy5rICsgdGhpcy55XTtcbiAgfSxcbiAgYXBwbHlYOiBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHggKiB0aGlzLmsgKyB0aGlzLng7XG4gIH0sXG4gIGFwcGx5WTogZnVuY3Rpb24oeSkge1xuICAgIHJldHVybiB5ICogdGhpcy5rICsgdGhpcy55O1xuICB9LFxuICBpbnZlcnQ6IGZ1bmN0aW9uKGxvY2F0aW9uKSB7XG4gICAgcmV0dXJuIFsobG9jYXRpb25bMF0gLSB0aGlzLngpIC8gdGhpcy5rLCAobG9jYXRpb25bMV0gLSB0aGlzLnkpIC8gdGhpcy5rXTtcbiAgfSxcbiAgaW52ZXJ0WDogZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiAoeCAtIHRoaXMueCkgLyB0aGlzLms7XG4gIH0sXG4gIGludmVydFk6IGZ1bmN0aW9uKHkpIHtcbiAgICByZXR1cm4gKHkgLSB0aGlzLnkpIC8gdGhpcy5rO1xuICB9LFxuICByZXNjYWxlWDogZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiB4LmNvcHkoKS5kb21haW4oeC5yYW5nZSgpLm1hcCh0aGlzLmludmVydFgsIHRoaXMpLm1hcCh4LmludmVydCwgeCkpO1xuICB9LFxuICByZXNjYWxlWTogZnVuY3Rpb24oeSkge1xuICAgIHJldHVybiB5LmNvcHkoKS5kb21haW4oeS5yYW5nZSgpLm1hcCh0aGlzLmludmVydFksIHRoaXMpLm1hcCh5LmludmVydCwgeSkpO1xuICB9LFxuICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgdGhpcy54ICsgXCIsXCIgKyB0aGlzLnkgKyBcIikgc2NhbGUoXCIgKyB0aGlzLmsgKyBcIilcIjtcbiAgfVxufTtcblxuZXhwb3J0IHZhciBpZGVudGl0eSA9IG5ldyBUcmFuc2Zvcm0oMSwgMCwgMCk7XG5cbnRyYW5zZm9ybS5wcm90b3R5cGUgPSBUcmFuc2Zvcm0ucHJvdG90eXBlO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0cmFuc2Zvcm0obm9kZSkge1xuICB3aGlsZSAoIW5vZGUuX196b29tKSBpZiAoIShub2RlID0gbm9kZS5wYXJlbnROb2RlKSkgcmV0dXJuIGlkZW50aXR5O1xuICByZXR1cm4gbm9kZS5fX3pvb207XG59XG4iLCAiaW1wb3J0IHsgTm90aWNlLCBNb2RhbCwgc2V0SWNvbiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IFN0b3J5RW5naW5lUGx1Z2luIGZyb20gXCIuLi9tYWluXCI7XG5pbXBvcnQge1xuXHRDaGFyYWN0ZXIsXG5cdENoYXJhY3RlclRyYWl0LFxuXHRDaGFyYWN0ZXJSZWxhdGlvbnNoaXAsXG5cdFdvcmxkRXZlbnQsXG5cdFNjZW5lLFxuXHRTdG9yeSxcblx0QXJjaGV0eXBlLFxuXHRUcmFpdCxcblx0V29ybGQsXG59IGZyb20gXCIuLi90eXBlc1wiO1xuXG5leHBvcnQgY2xhc3MgQ2hhcmFjdGVyRGV0YWlsc1ZpZXcge1xuXHRwcml2YXRlIHBsdWdpbjogU3RvcnlFbmdpbmVQbHVnaW47XG5cdGNoYXJhY3RlcjogQ2hhcmFjdGVyOyAvLyBNYWRlIHB1YmxpYyBmb3IgYWNjZXNzIGZyb20gU3RvcnlMaXN0Vmlld1xuXHRwcml2YXRlIHdvcmxkOiBXb3JsZCB8IG51bGw7XG5cdHByaXZhdGUgY2hhcmFjdGVyczogQ2hhcmFjdGVyW107XG5cdHByaXZhdGUgYXJjaGV0eXBlczogQXJjaGV0eXBlW107XG5cdHByaXZhdGUgdHJhaXRzOiBUcmFpdFtdO1xuXHRwcml2YXRlIGV2ZW50czogV29ybGRFdmVudFtdO1xuXHRwcml2YXRlIGhlYWRlckVsOiBIVE1MRWxlbWVudDtcblx0cHJpdmF0ZSBjb250ZW50RWw6IEhUTUxFbGVtZW50O1xuXHRwcml2YXRlIG9uQmFjazogKCkgPT4gdm9pZDtcblx0cHJpdmF0ZSBvbkVkaXRDaGFyYWN0ZXI6IChjaGFyYWN0ZXI6IENoYXJhY3RlcikgPT4gdm9pZDtcblxuXHQvLyBTdGF0ZVxuXHRwcml2YXRlIGNoYXJhY3RlclRhYjogXCJvdmVydmlld1wiIHwgXCJ0cmFpdHNcIiB8IFwiZXZlbnRzXCIgfCBcInNjZW5lc1wiIHwgXCJyZWxhdGlvbnNoaXBzXCIgPSBcIm92ZXJ2aWV3XCI7XG5cdHByaXZhdGUgY2hhcmFjdGVyVHJhaXRzOiBDaGFyYWN0ZXJUcmFpdFtdID0gW107XG5cdHByaXZhdGUgY2hhcmFjdGVyRXZlbnRzOiB7IGV2ZW50OiBXb3JsZEV2ZW50OyByb2xlPzogc3RyaW5nIH1bXSA9IFtdO1xuXHRwcml2YXRlIGNoYXJhY3RlclNjZW5lczogeyBzY2VuZTogU2NlbmU7IHN0b3J5OiBTdG9yeTsgdHlwZTogXCJwb3ZcIiB8IFwiY29hZGp1dmFudGVcIiB9W10gPSBbXTtcblx0cHJpdmF0ZSBjaGFyYWN0ZXJSZWxhdGlvbnNoaXBzOiBDaGFyYWN0ZXJSZWxhdGlvbnNoaXBbXSA9IFtdO1xuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdHBsdWdpbjogU3RvcnlFbmdpbmVQbHVnaW4sXG5cdFx0Y2hhcmFjdGVyOiBDaGFyYWN0ZXIsXG5cdFx0aGVhZGVyRWw6IEhUTUxFbGVtZW50LFxuXHRcdGNvbnRlbnRFbDogSFRNTEVsZW1lbnQsXG5cdFx0b25CYWNrOiAoKSA9PiB2b2lkLFxuXHRcdG9uRWRpdENoYXJhY3RlcjogKGNoYXJhY3RlcjogQ2hhcmFjdGVyKSA9PiB2b2lkLFxuXHRcdHdvcmxkOiBXb3JsZCB8IG51bGwgPSBudWxsLFxuXHRcdGNoYXJhY3RlcnM6IENoYXJhY3RlcltdID0gW10sXG5cdFx0YXJjaGV0eXBlczogQXJjaGV0eXBlW10gPSBbXSxcblx0XHR0cmFpdHM6IFRyYWl0W10gPSBbXSxcblx0XHRldmVudHM6IFdvcmxkRXZlbnRbXSA9IFtdXG5cdCkge1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHRcdHRoaXMuY2hhcmFjdGVyID0gY2hhcmFjdGVyO1xuXHRcdHRoaXMud29ybGQgPSB3b3JsZDtcblx0XHR0aGlzLmNoYXJhY3RlcnMgPSBjaGFyYWN0ZXJzO1xuXHRcdHRoaXMuYXJjaGV0eXBlcyA9IGFyY2hldHlwZXM7XG5cdFx0dGhpcy50cmFpdHMgPSB0cmFpdHM7XG5cdFx0dGhpcy5ldmVudHMgPSBldmVudHM7XG5cdFx0dGhpcy5oZWFkZXJFbCA9IGhlYWRlckVsO1xuXHRcdHRoaXMuY29udGVudEVsID0gY29udGVudEVsO1xuXHRcdHRoaXMub25CYWNrID0gb25CYWNrO1xuXHRcdHRoaXMub25FZGl0Q2hhcmFjdGVyID0gb25FZGl0Q2hhcmFjdGVyO1xuXHR9XG5cblx0YXN5bmMgcmVuZGVyKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZENoYXJhY3RlckRhdGEoKTtcblx0XHR0aGlzLnJlbmRlckhlYWRlcigpO1xuXHRcdHRoaXMucmVuZGVyQ29udGVudCgpO1xuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJDb250ZW50KCkge1xuXHRcdC8vIENsZWFyIGNvbnRlbnQgY29tcGxldGVseVxuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdFx0XG5cdFx0Ly8gQ3JlYXRlIG1haW4gY29udGFpbmVyIGZvciB0YWJzIGFuZCBjb250ZW50XG5cdFx0Y29uc3QgbWFpbkNvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJjaGFyYWN0ZXItZGV0YWlscy1jb250YWluZXJcIiB9KTtcblx0XHRcblx0XHQvLyBSZW5kZXIgdGFic1xuXHRcdHRoaXMucmVuZGVyVGFicyhtYWluQ29udGFpbmVyKTtcblx0XHRcblx0XHQvLyBSZW5kZXIgdGFiIGNvbnRlbnRcblx0XHR0aGlzLnJlbmRlclRhYkNvbnRlbnQobWFpbkNvbnRhaW5lcik7XG5cdH1cblxuXHRhc3luYyBsb2FkQ2hhcmFjdGVyRGF0YSgpIHtcblx0XHR0cnkge1xuXHRcdFx0Ly8gTG9hZCBjaGFyYWN0ZXIgdHJhaXRzXG5cdFx0XHR0aGlzLmNoYXJhY3RlclRyYWl0cyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRDaGFyYWN0ZXJUcmFpdHModGhpcy5jaGFyYWN0ZXIuaWQpO1xuXG5cdFx0XHQvLyBMb2FkIGNoYXJhY3RlciBldmVudHNcblx0XHRcdGNvbnN0IGV2ZW50Q2hhcmFjdGVycyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRDaGFyYWN0ZXJFdmVudHModGhpcy5jaGFyYWN0ZXIuaWQpO1xuXHRcdFx0dGhpcy5jaGFyYWN0ZXJFdmVudHMgPSBhd2FpdCBQcm9taXNlLmFsbChcblx0XHRcdFx0ZXZlbnRDaGFyYWN0ZXJzLm1hcChhc3luYyAoZWMpID0+IHtcblx0XHRcdFx0XHRjb25zdCBldmVudCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5nZXRFdmVudChlYy5ldmVudF9pZCk7XG5cdFx0XHRcdFx0cmV0dXJuIHsgZXZlbnQsIHJvbGU6IGVjLnJvbGUgfHwgdW5kZWZpbmVkIH07XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0XHQvLyBMb2FkIGNoYXJhY3RlciByZWxhdGlvbnNoaXBzXG5cdFx0XHR0aGlzLmNoYXJhY3RlclJlbGF0aW9uc2hpcHMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0Q2hhcmFjdGVyUmVsYXRpb25zaGlwcyh0aGlzLmNoYXJhY3Rlci5pZCk7XG5cblx0XHRcdC8vIExvYWQgY2hhcmFjdGVyIHNjZW5lcyAod29ya2Fyb3VuZClcblx0XHRcdHRoaXMuY2hhcmFjdGVyU2NlbmVzID0gW107XG5cdFx0XHRpZiAodGhpcy53b3JsZCkge1xuXHRcdFx0XHQvLyBHZXQgYWxsIHN0b3JpZXMgZm9yIHRoaXMgd29ybGRcblx0XHRcdFx0Y29uc3QgYWxsU3RvcmllcyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5saXN0U3RvcmllcygpO1xuXHRcdFx0XHRjb25zdCB3b3JsZFN0b3JpZXMgPSBhbGxTdG9yaWVzLmZpbHRlcigocykgPT4gcy53b3JsZF9pZCA9PT0gdGhpcy53b3JsZCEuaWQpO1xuXG5cdFx0XHRcdGZvciAoY29uc3Qgc3Rvcnkgb2Ygd29ybGRTdG9yaWVzKSB7XG5cdFx0XHRcdFx0Ly8gR2V0IGFsbCBzY2VuZXMgZm9yIHRoaXMgc3Rvcnlcblx0XHRcdFx0XHRjb25zdCBzY2VuZXMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0U2NlbmVzQnlTdG9yeShzdG9yeS5pZCk7XG5cblx0XHRcdFx0XHQvLyBGaWx0ZXIgUE9WIHNjZW5lc1xuXHRcdFx0XHRcdGNvbnN0IHBvdlNjZW5lcyA9IHNjZW5lcy5maWx0ZXIoKHMpID0+IHMucG92X2NoYXJhY3Rlcl9pZCA9PT0gdGhpcy5jaGFyYWN0ZXIuaWQpO1xuXHRcdFx0XHRcdGZvciAoY29uc3Qgc2NlbmUgb2YgcG92U2NlbmVzKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmNoYXJhY3RlclNjZW5lcy5wdXNoKHsgc2NlbmUsIHN0b3J5LCB0eXBlOiBcInBvdlwiIH0pO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIEZpbHRlciBjb2FkanV2YW50ZSBzY2VuZXMgKHZpYSBTY2VuZVJlZmVyZW5jZXMpXG5cdFx0XHRcdFx0Zm9yIChjb25zdCBzY2VuZSBvZiBzY2VuZXMpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHJlZnMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuZ2V0U2NlbmVSZWZlcmVuY2VzKHNjZW5lLmlkKTtcblx0XHRcdFx0XHRcdGNvbnN0IGNoYXJSZWYgPSByZWZzLmZpbmQoXG5cdFx0XHRcdFx0XHRcdChyKSA9PiByLmVudGl0eV90eXBlID09PSBcImNoYXJhY3RlclwiICYmIHIuZW50aXR5X2lkID09PSB0aGlzLmNoYXJhY3Rlci5pZFxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdGlmIChjaGFyUmVmKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuY2hhcmFjdGVyU2NlbmVzLnB1c2goeyBzY2VuZSwgc3RvcnksIHR5cGU6IFwiY29hZGp1dmFudGVcIiB9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZCB0byBsb2FkIGNoYXJhY3RlciBkYXRhXCI7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvck1lc3NhZ2V9YCwgNTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVySGVhZGVyKCkge1xuXHRcdGlmICghdGhpcy5oZWFkZXJFbCkgcmV0dXJuO1xuXG5cdFx0dGhpcy5oZWFkZXJFbC5lbXB0eSgpO1xuXG5cdFx0Y29uc3QgaGVhZGVyTGVmdCA9IHRoaXMuaGVhZGVyRWwuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1oZWFkZXItbGVmdFwiIH0pO1xuXG5cdFx0Y29uc3QgYmFja0J1dHRvbiA9IGhlYWRlckxlZnQuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJcdTIxOTAgQmFja1wiLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1iYWNrLWJ0blwiLFxuXHRcdH0pO1xuXHRcdGJhY2tCdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdHRoaXMub25CYWNrKCk7XG5cdFx0fTtcblxuXHRcdGNvbnN0IHRpdGxlRGl2ID0gaGVhZGVyTGVmdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWhlYWRlci10aXRsZVwiIH0pO1xuXHRcdGNvbnN0IHRpdGxlUm93ID0gdGl0bGVEaXYuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZS1yb3dcIiB9KTtcblx0XHR0aXRsZVJvdy5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogdGhpcy5jaGFyYWN0ZXIubmFtZSB9KTtcblxuXHRcdC8vIEFyY2hldHlwZSBwaWxsXG5cdFx0aWYgKHRoaXMuY2hhcmFjdGVyLmFyY2hldHlwZV9pZCkge1xuXHRcdFx0Y29uc3QgYXJjaGV0eXBlID0gdGhpcy5hcmNoZXR5cGVzLmZpbmQoKGEpID0+IGEuaWQgPT09IHRoaXMuY2hhcmFjdGVyLmFyY2hldHlwZV9pZCk7XG5cdFx0XHRpZiAoYXJjaGV0eXBlKSB7XG5cdFx0XHRcdGNvbnN0IGFyY2hldHlwZVBpbGwgPSB0aXRsZVJvdy5jcmVhdGVTcGFuKHsgY2xzOiBcInN0b3J5LWVuZ2luZS1iYWRnZVwiIH0pO1xuXHRcdFx0XHRhcmNoZXR5cGVQaWxsLnRleHRDb250ZW50ID0gYXJjaGV0eXBlLm5hbWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ29weSBJRCBidXR0b24gd2l0aCB0b29sdGlwXG5cdFx0Y29uc3QgY29weUlkQnRuID0gdGl0bGVSb3cuY3JlYXRlRWwoXCJidXR0b25cIiwgeyBcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtY29weS1pZC1idG5cIixcblx0XHRcdGF0dHI6IHsgXG5cdFx0XHRcdFwiYXJpYS1sYWJlbFwiOiBcIkNvcHkgSURcIixcblx0XHRcdFx0XCJ0aXRsZVwiOiBgSUQ6ICR7dGhpcy5jaGFyYWN0ZXIuaWR9XFxuQ2xpY2sgdG8gY29weWBcblx0XHRcdH1cblx0XHR9KTtcblx0XHRzZXRJY29uKGNvcHlJZEJ0biwgXCJjb3B5XCIpO1xuXHRcdGNvcHlJZEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0bmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGhpcy5jaGFyYWN0ZXIuaWQpO1xuXHRcdFx0bmV3IE5vdGljZShcIlVVSUQgY29waWVkIHRvIGNsaXBib2FyZFwiKTtcblx0XHR9O1xuXG5cdFx0Y29uc3QgaGVhZGVyUmlnaHQgPSB0aGlzLmhlYWRlckVsLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaGVhZGVyLXJpZ2h0XCIgfSk7XG5cdFx0Y29uc3QgbWVudUJ1dHRvbiA9IGhlYWRlclJpZ2h0LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJFZGl0IENoYXJhY3RlclwiIH0pO1xuXHRcdG1lbnVCdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdHRoaXMub25FZGl0Q2hhcmFjdGVyKHRoaXMuY2hhcmFjdGVyKTtcblx0XHR9O1xuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJUYWJzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRjb25zdCB0YWJzQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJjaGFyYWN0ZXItZGV0YWlscy10YWJzXCIgfSk7XG5cdFx0XG5cdFx0dHlwZSBUYWJLZXkgPSBcIm92ZXJ2aWV3XCIgfCBcInRyYWl0c1wiIHwgXCJldmVudHNcIiB8IFwic2NlbmVzXCIgfCBcInJlbGF0aW9uc2hpcHNcIjtcblx0XHRjb25zdCB0YWJzOiB7IGtleTogVGFiS2V5OyBsYWJlbDogc3RyaW5nIH1bXSA9IFtcblx0XHRcdHsga2V5OiBcIm92ZXJ2aWV3XCIsIGxhYmVsOiBcIk92ZXJ2aWV3XCIgfSxcblx0XHRcdHsga2V5OiBcInRyYWl0c1wiLCBsYWJlbDogXCJUcmFpdHNcIiB9LFxuXHRcdFx0eyBrZXk6IFwiZXZlbnRzXCIsIGxhYmVsOiBcIkV2ZW50c1wiIH0sXG5cdFx0XHR7IGtleTogXCJzY2VuZXNcIiwgbGFiZWw6IFwiU2NlbmVzXCIgfSxcblx0XHRcdHsga2V5OiBcInJlbGF0aW9uc2hpcHNcIiwgbGFiZWw6IFwiUmVsYXRpb25zaGlwc1wiIH0sXG5cdFx0XTtcblxuXHRcdHRhYnMuZm9yRWFjaCh0YWIgPT4ge1xuXHRcdFx0Y29uc3QgaXNBY3RpdmUgPSB0aGlzLmNoYXJhY3RlclRhYiA9PT0gdGFiLmtleTtcblx0XHRcdGNvbnN0IHRhYkJ1dHRvbiA9IHRhYnNDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0XHR0ZXh0OiB0YWIubGFiZWwsXG5cdFx0XHRcdGNsczogaXNBY3RpdmUgPyBcImNoYXJhY3Rlci10YWIgY2hhcmFjdGVyLXRhYi1hY3RpdmVcIiA6IFwiY2hhcmFjdGVyLXRhYlwiLFxuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdHRhYkJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRpZiAodGhpcy5jaGFyYWN0ZXJUYWIgIT09IHRhYi5rZXkpIHtcblx0XHRcdFx0XHR0aGlzLmNoYXJhY3RlclRhYiA9IHRhYi5rZXk7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50KCk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlclRhYkNvbnRlbnQoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnN0IGNvbnRlbnRDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcImNoYXJhY3Rlci1kZXRhaWxzLWNvbnRlbnQtaW5uZXJcIiB9KTtcblxuXHRcdHN3aXRjaCAodGhpcy5jaGFyYWN0ZXJUYWIpIHtcblx0XHRcdGNhc2UgXCJvdmVydmlld1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlck92ZXJ2aWV3VGFiKGNvbnRlbnRDb250YWluZXIpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJ0cmFpdHNcIjpcblx0XHRcdFx0dGhpcy5yZW5kZXJUcmFpdHNUYWIoY29udGVudENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImV2ZW50c1wiOlxuXHRcdFx0XHR0aGlzLnJlbmRlckV2ZW50c1RhYihjb250ZW50Q29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwic2NlbmVzXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyU2NlbmVzVGFiKGNvbnRlbnRDb250YWluZXIpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJyZWxhdGlvbnNoaXBzXCI6XG5cdFx0XHRcdHRoaXMucmVuZGVyUmVsYXRpb25zaGlwc1RhYihjb250ZW50Q29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9XG5cblx0cmVuZGVyT3ZlcnZpZXdUYWIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdC8vIERlc2NyaXB0aW9uIChlZGl0YWJsZSB0ZXh0YXJlYSlcblx0XHRjb25zdCBkZXNjU2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXNlY3Rpb25cIiB9KTtcblx0XHRkZXNjU2VjdGlvbi5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xuXHRcdGNvbnN0IGRlc2NUZXh0YXJlYSA9IGRlc2NTZWN0aW9uLmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiLFxuXHRcdFx0YXR0cjogeyByb3dzOiBcIjVcIiB9LFxuXHRcdH0pO1xuXHRcdGRlc2NUZXh0YXJlYS52YWx1ZSA9IHRoaXMuY2hhcmFjdGVyLmRlc2NyaXB0aW9uIHx8IFwiXCI7XG5cdFx0ZGVzY1RleHRhcmVhLnBsYWNlaG9sZGVyID0gXCJFbnRlciBjaGFyYWN0ZXIgZGVzY3JpcHRpb24uLi5cIjtcblxuXHRcdGNvbnN0IGRlc2NBY3Rpb25zID0gZGVzY1NlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1hY3Rpb25zXCIgfSk7XG5cdFx0Y29uc3Qgc2F2ZURlc2NCdG4gPSBkZXNjQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiU2F2ZSBEZXNjcmlwdGlvblwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVEZXNjQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCB1cGRhdGVkID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUNoYXJhY3Rlcih0aGlzLmNoYXJhY3Rlci5pZCwge1xuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBkZXNjVGV4dGFyZWEudmFsdWUsXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHR0aGlzLmNoYXJhY3RlciA9IHVwZGF0ZWQ7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJEZXNjcmlwdGlvbiBzYXZlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gQXJjaGV0eXBlIGRyb3Bkb3duXG5cdFx0Y29uc3QgYXJjaGV0eXBlU2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXNlY3Rpb25cIiB9KTtcblx0XHRhcmNoZXR5cGVTZWN0aW9uLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIkFyY2hldHlwZVwiIH0pO1xuXHRcdGNvbnN0IGFyY2hldHlwZVNlbGVjdCA9IGFyY2hldHlwZVNlY3Rpb24uY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXG5cdFx0Ly8gQWRkIFwiTm9uZVwiIG9wdGlvblxuXHRcdGNvbnN0IG5vbmVPcHRpb24gPSBhcmNoZXR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB0ZXh0OiBcIk5vbmVcIiwgdmFsdWU6IFwiXCIgfSk7XG5cdFx0aWYgKCF0aGlzLmNoYXJhY3Rlci5hcmNoZXR5cGVfaWQpIHtcblx0XHRcdG5vbmVPcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdH1cblxuXHRcdC8vIEFkZCBhcmNoZXR5cGUgb3B0aW9uc1xuXHRcdGZvciAoY29uc3QgYXJjaGV0eXBlIG9mIHRoaXMuYXJjaGV0eXBlcykge1xuXHRcdFx0Y29uc3Qgb3B0aW9uID0gYXJjaGV0eXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHtcblx0XHRcdFx0dGV4dDogYXJjaGV0eXBlLm5hbWUsXG5cdFx0XHRcdHZhbHVlOiBhcmNoZXR5cGUuaWQsXG5cdFx0XHR9KTtcblx0XHRcdGlmICh0aGlzLmNoYXJhY3Rlci5hcmNoZXR5cGVfaWQgPT09IGFyY2hldHlwZS5pZCkge1xuXHRcdFx0XHRvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IGFyY2hldHlwZUFjdGlvbnMgPSBhcmNoZXR5cGVTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtYWN0aW9uc1wiIH0pO1xuXHRcdGNvbnN0IHNhdmVBcmNoZXR5cGVCdG4gPSBhcmNoZXR5cGVBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTYXZlIEFyY2hldHlwZVwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVBcmNoZXR5cGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IGFyY2hldHlwZUlkID0gYXJjaGV0eXBlU2VsZWN0LnZhbHVlIHx8IG51bGw7XG5cdFx0XHRcdGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlQ2hhcmFjdGVyKHRoaXMuY2hhcmFjdGVyLmlkLCB7XG5cdFx0XHRcdFx0YXJjaGV0eXBlX2lkOiBhcmNoZXR5cGVJZCxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHRoaXMuY2hhcmFjdGVyID0gdXBkYXRlZDtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkQ2hhcmFjdGVyRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlckhlYWRlcigpO1xuXHRcdFx0XHR0aGlzLnJlbmRlckNvbnRlbnQoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkFyY2hldHlwZSBzYXZlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0cmVuZGVyVHJhaXRzVGFiKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblx0XHRjb25zdCBhY3Rpb25zQmFyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtYWN0aW9ucy1iYXJcIiB9KTtcblx0XHRjb25zdCBhZGRCdG4gPSBhY3Rpb25zQmFyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJBZGQgVHJhaXRcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRhZGRCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdHRoaXMuc2hvd0FkZFRyYWl0TW9kYWwoKTtcblx0XHR9O1xuXG5cdFx0aWYgKHRoaXMuY2hhcmFjdGVyVHJhaXRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Y29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gdHJhaXRzIGFzc2lnbmVkLiBBZGQgYSB0cmFpdCB0byBnZXQgc3RhcnRlZCFcIiB9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBsaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbGlzdFwiIH0pO1xuXHRcdGZvciAoY29uc3QgY2hhclRyYWl0IG9mIHRoaXMuY2hhcmFjdGVyVHJhaXRzKSB7XG5cdFx0XHRjb25zdCBpdGVtID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIiB9KTtcblxuXHRcdFx0Y29uc3QgdGl0bGVSb3cgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtdGl0bGVcIiB9KTtcblx0XHRcdHRpdGxlUm93LmNyZWF0ZUVsKFwic3Ryb25nXCIsIHsgdGV4dDogY2hhclRyYWl0LnRyYWl0X25hbWUgfSk7XG5cdFx0XHRjb25zdCBjYXRlZ29yeVBpbGwgPSB0aXRsZVJvdy5jcmVhdGVTcGFuKHsgY2xzOiBcInN0b3J5LWVuZ2luZS1iYWRnZVwiIH0pO1xuXHRcdFx0Y2F0ZWdvcnlQaWxsLnRleHRDb250ZW50ID0gY2hhclRyYWl0LnRyYWl0X2NhdGVnb3J5O1xuXG5cdFx0XHRjb25zdCBtZXRhID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogYFZhbHVlOiAke2NoYXJUcmFpdC52YWx1ZSB8fCBcIk4vQVwifWAgfSk7XG5cdFx0XHRpZiAoY2hhclRyYWl0Lm5vdGVzKSB7XG5cdFx0XHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogYCB8IE5vdGVzOiAke2NoYXJUcmFpdC5ub3Rlc31gIH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0tYWN0aW9uc1wiIH0pO1xuXHRcdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiRWRpdFwiIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuc2hvd0VkaXRUcmFpdE1vZGFsKGNoYXJUcmFpdCk7XG5cdFx0XHR9O1xuXHRcdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiRGVsZXRlXCIgfSkub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0aWYgKGNvbmZpcm0oYFJlbW92ZSB0cmFpdCBcIiR7Y2hhclRyYWl0LnRyYWl0X25hbWV9XCI/YCkpIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnJlbW92ZUNoYXJhY3RlclRyYWl0KHRoaXMuY2hhcmFjdGVyLmlkLCBjaGFyVHJhaXQudHJhaXRfaWQpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkQ2hhcmFjdGVyRGF0YSgpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiVHJhaXQgcmVtb3ZlZFwiKTtcblx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cdH1cblxuXHRyZW5kZXJFdmVudHNUYWIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnN0IGFjdGlvbnNCYXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1hY3Rpb25zLWJhclwiIH0pO1xuXHRcdGNvbnN0IGFkZEJ0biA9IGFjdGlvbnNCYXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkFkZCBFdmVudFwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdGFkZEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5zaG93QWRkRXZlbnRNb2RhbCgpO1xuXHRcdH07XG5cblx0XHRpZiAodGhpcy5jaGFyYWN0ZXJFdmVudHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBldmVudHMgYXNzaWduZWQuIEFkZCBhbiBldmVudCB0byBnZXQgc3RhcnRlZCFcIiB9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBsaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbGlzdFwiIH0pO1xuXHRcdGZvciAoY29uc3QgeyBldmVudCwgcm9sZSB9IG9mIHRoaXMuY2hhcmFjdGVyRXZlbnRzKSB7XG5cdFx0XHRjb25zdCBpdGVtID0gbGlzdC5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW1cIiB9KTtcblx0XHRcdGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiLCB0ZXh0OiBldmVudC5uYW1lIH0pO1xuXG5cdFx0XHRjb25zdCBtZXRhID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLW1ldGFcIiB9KTtcblx0XHRcdGlmIChyb2xlKSB7XG5cdFx0XHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogYFJvbGU6ICR7cm9sZX1gIH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0tYWN0aW9uc1wiIH0pO1xuXHRcdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiRWRpdCBSb2xlXCIgfSkub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0dGhpcy5zaG93RWRpdEV2ZW50Um9sZU1vZGFsKGV2ZW50LCByb2xlKTtcblx0XHRcdH07XG5cdFx0XHRhY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJSZW1vdmVcIiB9KS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRpZiAoY29uZmlybShgUmVtb3ZlIGNoYXJhY3RlciBmcm9tIGV2ZW50IFwiJHtldmVudC5uYW1lfVwiP2ApKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5yZW1vdmVFdmVudENoYXJhY3RlcihldmVudC5pZCwgdGhpcy5jaGFyYWN0ZXIuaWQpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkQ2hhcmFjdGVyRGF0YSgpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiQ2hhcmFjdGVyIHJlbW92ZWQgZnJvbSBldmVudFwiKTtcblx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cdH1cblxuXHRyZW5kZXJTY2VuZXNUYWIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGlmICh0aGlzLmNoYXJhY3RlclNjZW5lcy5sZW5ndGggPT09IDApIHtcblx0XHRcdGNvbnRhaW5lci5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIHNjZW5lcyBmb3VuZCBmb3IgdGhpcyBjaGFyYWN0ZXIuXCIgfSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWxpc3RcIiB9KTtcblx0XHRmb3IgKGNvbnN0IHsgc2NlbmUsIHN0b3J5LCB0eXBlIH0gb2YgdGhpcy5jaGFyYWN0ZXJTY2VuZXMpIHtcblx0XHRcdGNvbnN0IGl0ZW0gPSBsaXN0LmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtaXRlbVwiIH0pO1xuXG5cdFx0XHRjb25zdCB0aXRsZVJvdyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS10aXRsZVwiIH0pO1xuXHRcdFx0dGl0bGVSb3cuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogc2NlbmUuZ29hbCB8fCBcIk5vIGdvYWxcIiB9KTtcblxuXHRcdFx0Y29uc3QgdHlwZVBpbGwgPSB0aXRsZVJvdy5jcmVhdGVTcGFuKHtcblx0XHRcdFx0Y2xzOlxuXHRcdFx0XHRcdHR5cGUgPT09IFwicG92XCJcblx0XHRcdFx0XHRcdD8gXCJzdG9yeS1lbmdpbmUtYmFkZ2Ugc3RvcnktZW5naW5lLWJhZGdlLWdyZWVuXCJcblx0XHRcdFx0XHRcdDogXCJzdG9yeS1lbmdpbmUtYmFkZ2Ugc3RvcnktZW5naW5lLWJhZGdlLWJsdWVcIixcblx0XHRcdH0pO1xuXHRcdFx0dHlwZVBpbGwudGV4dENvbnRlbnQgPSB0eXBlID09PSBcInBvdlwiID8gXCJQT1ZcIiA6IFwiQ29hZGp1dmFudGVcIjtcblxuXHRcdFx0Y29uc3QgbWV0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIgfSk7XG5cdFx0XHRtZXRhLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IGBTdG9yeTogJHtzdG9yeS50aXRsZX1gIH0pO1xuXHRcdH1cblx0fVxuXG5cdHJlbmRlclJlbGF0aW9uc2hpcHNUYWIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnN0IGFjdGlvbnNCYXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1hY3Rpb25zLWJhclwiIH0pO1xuXHRcdGNvbnN0IGFkZEJ0biA9IGFjdGlvbnNCYXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkFkZCBSZWxhdGlvbnNoaXBcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRhZGRCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdHRoaXMuc2hvd0FkZFJlbGF0aW9uc2hpcE1vZGFsKCk7XG5cdFx0fTtcblxuXHRcdGlmICh0aGlzLmNoYXJhY3RlclJlbGF0aW9uc2hpcHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyByZWxhdGlvbnNoaXBzIGRlZmluZWQuIEFkZCBhIHJlbGF0aW9uc2hpcCB0byBnZXQgc3RhcnRlZCFcIiB9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBsaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJzdG9yeS1lbmdpbmUtbGlzdFwiIH0pO1xuXHRcdGZvciAoY29uc3QgcmVsIG9mIHRoaXMuY2hhcmFjdGVyUmVsYXRpb25zaGlwcykge1xuXHRcdFx0Ly8gRGV0ZXJtaW5lIHRoZSBvdGhlciBjaGFyYWN0ZXJcblx0XHRcdGNvbnN0IG90aGVyQ2hhcklkID1cblx0XHRcdFx0cmVsLmNoYXJhY3RlcjFfaWQgPT09IHRoaXMuY2hhcmFjdGVyLmlkID8gcmVsLmNoYXJhY3RlcjJfaWQgOiByZWwuY2hhcmFjdGVyMV9pZDtcblx0XHRcdGNvbnN0IG90aGVyQ2hhciA9IHRoaXMuY2hhcmFjdGVycy5maW5kKChjKSA9PiBjLmlkID09PSBvdGhlckNoYXJJZCk7XG5cdFx0XHRjb25zdCBvdGhlckNoYXJOYW1lID0gb3RoZXJDaGFyID8gb3RoZXJDaGFyLm5hbWUgOiBcIlVua25vd25cIjtcblxuXHRcdFx0Y29uc3QgaXRlbSA9IGxpc3QuY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1pdGVtXCIgfSk7XG5cblx0XHRcdGNvbnN0IHRpdGxlUm93ID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLXRpdGxlXCIgfSk7XG5cdFx0XHR0aXRsZVJvdy5jcmVhdGVFbChcInN0cm9uZ1wiLCB7IHRleHQ6IG90aGVyQ2hhck5hbWUgfSk7XG5cblx0XHRcdGNvbnN0IHR5cGVQaWxsID0gdGl0bGVSb3cuY3JlYXRlU3Bhbih7IGNsczogXCJzdG9yeS1lbmdpbmUtYmFkZ2VcIiB9KTtcblx0XHRcdHR5cGVQaWxsLnRleHRDb250ZW50ID0gcmVsLnJlbGF0aW9uc2hpcF90eXBlO1xuXG5cdFx0XHRjb25zdCBkaXJlY3Rpb25JY29uID0gdGl0bGVSb3cuY3JlYXRlU3Bhbih7IGNsczogXCJzdG9yeS1lbmdpbmUtZGlyZWN0aW9uXCIgfSk7XG5cdFx0XHRkaXJlY3Rpb25JY29uLnRleHRDb250ZW50ID0gcmVsLmJpZGlyZWN0aW9uYWwgPyBcIlx1MjE5NFwiIDogXCJcdTIxOTJcIjtcblxuXHRcdFx0Y29uc3QgbWV0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1tZXRhXCIgfSk7XG5cdFx0XHRpZiAocmVsLmRlc2NyaXB0aW9uKSB7XG5cdFx0XHRcdG1ldGEuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogcmVsLmRlc2NyaXB0aW9uIH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWl0ZW0tYWN0aW9uc1wiIH0pO1xuXHRcdFx0YWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiRWRpdFwiIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuc2hvd0VkaXRSZWxhdGlvbnNoaXBNb2RhbChyZWwpO1xuXHRcdFx0fTtcblx0XHRcdGFjdGlvbnMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkRlbGV0ZVwiIH0pLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGlmIChjb25maXJtKGBEZWxldGUgcmVsYXRpb25zaGlwIHdpdGggXCIke290aGVyQ2hhck5hbWV9XCI/YCkpIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmRlbGV0ZUNoYXJhY3RlclJlbGF0aW9uc2hpcChyZWwuaWQpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkQ2hhcmFjdGVyRGF0YSgpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiUmVsYXRpb25zaGlwIGRlbGV0ZWRcIik7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0Ly8gTW9kYWwgbWV0aG9kc1xuXHRzaG93QWRkVHJhaXRNb2RhbCgpIHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLnBsdWdpbi5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwudGV4dENvbnRlbnQgPSBcIkFkZCBUcmFpdFwiO1xuXG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiU2VsZWN0IGEgdHJhaXQgdG8gYWRkOlwiIH0pO1xuXG5cdFx0Y29uc3QgdHJhaXRTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHRjb25zdCBhdmFpbGFibGVUcmFpdHMgPSB0aGlzLnRyYWl0cy5maWx0ZXIoXG5cdFx0XHQodCkgPT4gIXRoaXMuY2hhcmFjdGVyVHJhaXRzLnNvbWUoKGN0KSA9PiBjdC50cmFpdF9pZCA9PT0gdC5pZClcblx0XHQpO1xuXG5cdFx0aWYgKGF2YWlsYWJsZVRyYWl0cy5sZW5ndGggPT09IDApIHtcblx0XHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBhdmFpbGFibGUgdHJhaXRzLiBDcmVhdGUgYSB0cmFpdCBmaXJzdCFcIiB9KTtcblx0XHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRcdGNvbnN0IGNsb3NlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDbG9zZVwiIH0pO1xuXHRcdFx0Y2xvc2VCdG4ub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Zm9yIChjb25zdCB0cmFpdCBvZiBhdmFpbGFibGVUcmFpdHMpIHtcblx0XHRcdHRyYWl0U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogYCR7dHJhaXQubmFtZX0gKCR7dHJhaXQuY2F0ZWdvcnl9KWAsIHZhbHVlOiB0cmFpdC5pZCB9KTtcblx0XHR9XG5cblx0XHRjb25zdCB2YWx1ZUlucHV0ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtaW5wdXRcIixcblx0XHRcdGF0dHI6IHsgdHlwZTogXCJ0ZXh0XCIsIHBsYWNlaG9sZGVyOiBcIlZhbHVlIChvcHRpb25hbClcIiB9LFxuXHRcdH0pO1xuXG5cdFx0Y29uc3Qgbm90ZXNJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJ0ZXh0YXJlYVwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLXRleHRhcmVhXCIsXG5cdFx0XHRhdHRyOiB7IHJvd3M6IFwiM1wiLCBwbGFjZWhvbGRlcjogXCJOb3RlcyAob3B0aW9uYWwpXCIgfSxcblx0XHR9KTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJBZGRcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuYWRkQ2hhcmFjdGVyVHJhaXQoXG5cdFx0XHRcdFx0dGhpcy5jaGFyYWN0ZXIuaWQsXG5cdFx0XHRcdFx0dHJhaXRTZWxlY3QudmFsdWUsXG5cdFx0XHRcdFx0dmFsdWVJbnB1dC52YWx1ZSB8fCB1bmRlZmluZWQsXG5cdFx0XHRcdFx0bm90ZXNJbnB1dC52YWx1ZSB8fCB1bmRlZmluZWRcblx0XHRcdFx0KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkQ2hhcmFjdGVyRGF0YSgpO1xuXHRcdFx0XHR0aGlzLnJlbmRlckNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIlRyYWl0IGFkZGVkXCIpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBcIkZhaWxlZFwifWAsIDUwMDApO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pO1xuXHRcdGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblxuXHRcdG1vZGFsLm9wZW4oKTtcblx0fVxuXG5cdHNob3dFZGl0VHJhaXRNb2RhbChjaGFyVHJhaXQ6IENoYXJhY3RlclRyYWl0KSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5wbHVnaW4uYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnRleHRDb250ZW50ID0gXCJFZGl0IFRyYWl0XCI7XG5cblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogYEVkaXRpbmc6ICR7Y2hhclRyYWl0LnRyYWl0X25hbWV9YCB9KTtcblxuXHRcdGNvbnN0IHZhbHVlSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLFxuXHRcdFx0YXR0cjogeyB0eXBlOiBcInRleHRcIiwgcGxhY2Vob2xkZXI6IFwiVmFsdWVcIiB9LFxuXHRcdH0pO1xuXHRcdHZhbHVlSW5wdXQudmFsdWUgPSBjaGFyVHJhaXQudmFsdWUgfHwgXCJcIjtcblxuXHRcdGNvbnN0IG5vdGVzSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiLFxuXHRcdFx0YXR0cjogeyByb3dzOiBcIjNcIiwgcGxhY2Vob2xkZXI6IFwiTm90ZXNcIiB9LFxuXHRcdH0pO1xuXHRcdG5vdGVzSW5wdXQudmFsdWUgPSBjaGFyVHJhaXQubm90ZXMgfHwgXCJcIjtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTYXZlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUNoYXJhY3RlclRyYWl0KFxuXHRcdFx0XHRcdHRoaXMuY2hhcmFjdGVyLmlkLFxuXHRcdFx0XHRcdGNoYXJUcmFpdC50cmFpdF9pZCxcblx0XHRcdFx0XHR2YWx1ZUlucHV0LnZhbHVlIHx8IHVuZGVmaW5lZCxcblx0XHRcdFx0XHRub3Rlc0lucHV0LnZhbHVlIHx8IHVuZGVmaW5lZFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRDaGFyYWN0ZXJEYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiVHJhaXQgdXBkYXRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KTtcblx0XHRjYW5jZWxCdG4ub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRzaG93QWRkRXZlbnRNb2RhbCgpIHtcblx0XHRpZiAoIXRoaXMud29ybGQpIHJldHVybjtcblxuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMucGx1Z2luLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC50ZXh0Q29udGVudCA9IFwiQWRkIEV2ZW50XCI7XG5cblx0XHRjb25zdCBjb250ZW50ID0gbW9kYWwuY29udGVudEVsO1xuXHRcdGNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJTZWxlY3QgYW4gZXZlbnQ6XCIgfSk7XG5cblx0XHRjb25zdCBldmVudFNlbGVjdCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJzZWxlY3RcIiwgeyBjbHM6IFwic3RvcnktZW5naW5lLXNlbGVjdFwiIH0pO1xuXHRcdGNvbnN0IGF2YWlsYWJsZUV2ZW50cyA9IHRoaXMuZXZlbnRzLmZpbHRlcihcblx0XHRcdChlKSA9PiAhdGhpcy5jaGFyYWN0ZXJFdmVudHMuc29tZSgoY2UpID0+IGNlLmV2ZW50LmlkID09PSBlLmlkKVxuXHRcdCk7XG5cblx0XHRpZiAoYXZhaWxhYmxlRXZlbnRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIGF2YWlsYWJsZSBldmVudHMuIENyZWF0ZSBhbiBldmVudCBmaXJzdCFcIiB9KTtcblx0XHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRcdGNvbnN0IGNsb3NlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDbG9zZVwiIH0pO1xuXHRcdFx0Y2xvc2VCdG4ub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Zm9yIChjb25zdCBldmVudCBvZiBhdmFpbGFibGVFdmVudHMpIHtcblx0XHRcdGV2ZW50U2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogZXZlbnQubmFtZSwgdmFsdWU6IGV2ZW50LmlkIH0pO1xuXHRcdH1cblxuXHRcdGNvbnN0IHJvbGVJbnB1dCA9IGNvbnRlbnQuY3JlYXRlRWwoXCJpbnB1dFwiLCB7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWlucHV0XCIsXG5cdFx0XHRhdHRyOiB7IHR5cGU6IFwidGV4dFwiLCBwbGFjZWhvbGRlcjogXCJSb2xlIChvcHRpb25hbClcIiB9LFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkFkZFwiLCBjbHM6IFwibW9kLWN0YVwiIH0pO1xuXHRcdHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5hZGRFdmVudENoYXJhY3Rlcihcblx0XHRcdFx0XHRldmVudFNlbGVjdC52YWx1ZSxcblx0XHRcdFx0XHR0aGlzLmNoYXJhY3Rlci5pZCxcblx0XHRcdFx0XHRyb2xlSW5wdXQudmFsdWUgfHwgdW5kZWZpbmVkXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZENoYXJhY3RlckRhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJDaGFyYWN0ZXIgYWRkZWQgdG8gZXZlbnRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSk7XG5cdFx0Y2FuY2VsQnRuLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0c2hvd0VkaXRFdmVudFJvbGVNb2RhbChldmVudDogV29ybGRFdmVudCwgY3VycmVudFJvbGU/OiBzdHJpbmcpIHtcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLnBsdWdpbi5hcHApO1xuXHRcdG1vZGFsLnRpdGxlRWwudGV4dENvbnRlbnQgPSBcIkVkaXQgUm9sZVwiO1xuXG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IGBFdmVudDogJHtldmVudC5uYW1lfWAgfSk7XG5cblx0XHRjb25zdCByb2xlSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1pbnB1dFwiLFxuXHRcdFx0YXR0cjogeyB0eXBlOiBcInRleHRcIiwgcGxhY2Vob2xkZXI6IFwiUm9sZVwiIH0sXG5cdFx0XHR2YWx1ZTogY3VycmVudFJvbGUgfHwgXCJcIixcblx0XHR9KTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTYXZlXCIsIGNsczogXCJtb2QtY3RhXCIgfSk7XG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnJlbW92ZUV2ZW50Q2hhcmFjdGVyKGV2ZW50LmlkLCB0aGlzLmNoYXJhY3Rlci5pZCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5hZGRFdmVudENoYXJhY3Rlcihcblx0XHRcdFx0XHRldmVudC5pZCxcblx0XHRcdFx0XHR0aGlzLmNoYXJhY3Rlci5pZCxcblx0XHRcdFx0XHRyb2xlSW5wdXQudmFsdWUgfHwgdW5kZWZpbmVkXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZENoYXJhY3RlckRhdGEoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJDb250ZW50KCk7XG5cdFx0XHRcdG1vZGFsLmNsb3NlKCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoXCJSb2xlIHVwZGF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSk7XG5cdFx0Y2FuY2VsQnRuLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0c2hvd0FkZFJlbGF0aW9uc2hpcE1vZGFsKCkge1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMucGx1Z2luLmFwcCk7XG5cdFx0bW9kYWwudGl0bGVFbC50ZXh0Q29udGVudCA9IFwiQWRkIFJlbGF0aW9uc2hpcFwiO1xuXG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblx0XHRjb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiU2VsZWN0IGFub3RoZXIgY2hhcmFjdGVyOlwiIH0pO1xuXG5cdFx0Y29uc3QgY2hhcmFjdGVyU2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0Y29uc3QgYXZhaWxhYmxlQ2hhcmFjdGVycyA9IHRoaXMuY2hhcmFjdGVycy5maWx0ZXIoKGMpID0+IGMuaWQgIT09IHRoaXMuY2hhcmFjdGVyLmlkKTtcblxuXHRcdGlmIChhdmFpbGFibGVDaGFyYWN0ZXJzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Y29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIG90aGVyIGNoYXJhY3RlcnMgYXZhaWxhYmxlLlwiIH0pO1xuXHRcdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdFx0Y29uc3QgY2xvc2VCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNsb3NlXCIgfSk7XG5cdFx0XHRjbG9zZUJ0bi5vbmNsaWNrID0gKCkgPT4gbW9kYWwuY2xvc2UoKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRmb3IgKGNvbnN0IGNoYXIgb2YgYXZhaWxhYmxlQ2hhcmFjdGVycykge1xuXHRcdFx0Y2hhcmFjdGVyU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogY2hhci5uYW1lLCB2YWx1ZTogY2hhci5pZCB9KTtcblx0XHR9XG5cblx0XHRjb25zdCByZWxhdGlvbnNoaXBUeXBlU2VsZWN0ID0gY29udGVudC5jcmVhdGVFbChcInNlbGVjdFwiLCB7IGNsczogXCJzdG9yeS1lbmdpbmUtc2VsZWN0XCIgfSk7XG5cdFx0cmVsYXRpb25zaGlwVHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IFwiQWxseVwiLCB2YWx1ZTogXCJhbGx5XCIgfSk7XG5cdFx0cmVsYXRpb25zaGlwVHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IFwiRW5lbXlcIiwgdmFsdWU6IFwiZW5lbXlcIiB9KTtcblx0XHRyZWxhdGlvbnNoaXBUeXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogXCJGYW1pbHlcIiwgdmFsdWU6IFwiZmFtaWx5XCIgfSk7XG5cdFx0cmVsYXRpb25zaGlwVHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IFwiTG92ZXJcIiwgdmFsdWU6IFwibG92ZXJcIiB9KTtcblx0XHRyZWxhdGlvbnNoaXBUeXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogXCJSaXZhbFwiLCB2YWx1ZTogXCJyaXZhbFwiIH0pO1xuXHRcdHJlbGF0aW9uc2hpcFR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB0ZXh0OiBcIk1lbnRvclwiLCB2YWx1ZTogXCJtZW50b3JcIiB9KTtcblx0XHRyZWxhdGlvbnNoaXBUeXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogXCJTdHVkZW50XCIsIHZhbHVlOiBcInN0dWRlbnRcIiB9KTtcblxuXHRcdGNvbnN0IGRlc2NyaXB0aW9uSW5wdXQgPSBjb250ZW50LmNyZWF0ZUVsKFwidGV4dGFyZWFcIiwge1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS10ZXh0YXJlYVwiLFxuXHRcdFx0YXR0cjogeyByb3dzOiBcIjNcIiwgcGxhY2Vob2xkZXI6IFwiRGVzY3JpcHRpb24gKG9wdGlvbmFsKVwiIH0sXG5cdFx0fSk7XG5cblx0XHRjb25zdCBiaWRpcmVjdGlvbmFsQ2hlY2tib3ggPSBjb250ZW50LmNyZWF0ZUVsKFwiaW5wdXRcIiwge1xuXHRcdFx0YXR0cjogeyB0eXBlOiBcImNoZWNrYm94XCIgfSxcblx0XHR9KTtcblx0XHRiaWRpcmVjdGlvbmFsQ2hlY2tib3guY2hlY2tlZCA9IHRydWU7XG5cdFx0Y29uc3QgYmlkaXJlY3Rpb25hbExhYmVsID0gY29udGVudC5jcmVhdGVFbChcImxhYmVsXCIpO1xuXHRcdGJpZGlyZWN0aW9uYWxMYWJlbC5hcHBlbmRDaGlsZChiaWRpcmVjdGlvbmFsQ2hlY2tib3gpO1xuXHRcdGJpZGlyZWN0aW9uYWxMYWJlbC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIiBCaWRpcmVjdGlvbmFsXCIpKTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIiB9KTtcblx0XHRjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJBZGRcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlQ2hhcmFjdGVyUmVsYXRpb25zaGlwKHRoaXMuY2hhcmFjdGVyLmlkLCB7XG5cdFx0XHRcdFx0Y2hhcmFjdGVyMV9pZDogdGhpcy5jaGFyYWN0ZXIuaWQsXG5cdFx0XHRcdFx0Y2hhcmFjdGVyMl9pZDogY2hhcmFjdGVyU2VsZWN0LnZhbHVlLFxuXHRcdFx0XHRcdHJlbGF0aW9uc2hpcF90eXBlOiByZWxhdGlvbnNoaXBUeXBlU2VsZWN0LnZhbHVlLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbklucHV0LnZhbHVlIHx8IFwiXCIsXG5cdFx0XHRcdFx0YmlkaXJlY3Rpb25hbDogYmlkaXJlY3Rpb25hbENoZWNrYm94LmNoZWNrZWQsXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRDaGFyYWN0ZXJEYXRhKCk7XG5cdFx0XHR0aGlzLnJlbmRlckNvbnRlbnQoKTtcblx0XHRcdFx0bW9kYWwuY2xvc2UoKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIlJlbGF0aW9uc2hpcCBhZGRlZFwiKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogXCJGYWlsZWRcIn1gLCA1MDAwKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KTtcblx0XHRjYW5jZWxCdG4ub25jbGljayA9ICgpID0+IG1vZGFsLmNsb3NlKCk7XG5cblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXHRzaG93RWRpdFJlbGF0aW9uc2hpcE1vZGFsKHJlbDogQ2hhcmFjdGVyUmVsYXRpb25zaGlwKSB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5wbHVnaW4uYXBwKTtcblx0XHRtb2RhbC50aXRsZUVsLnRleHRDb250ZW50ID0gXCJFZGl0IFJlbGF0aW9uc2hpcFwiO1xuXG5cdFx0Y29uc3QgY29udGVudCA9IG1vZGFsLmNvbnRlbnRFbDtcblxuXHRcdGNvbnN0IHJlbGF0aW9uc2hpcFR5cGVTZWxlY3QgPSBjb250ZW50LmNyZWF0ZUVsKFwic2VsZWN0XCIsIHsgY2xzOiBcInN0b3J5LWVuZ2luZS1zZWxlY3RcIiB9KTtcblx0XHRyZWxhdGlvbnNoaXBUeXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogXCJBbGx5XCIsIHZhbHVlOiBcImFsbHlcIiB9KTtcblx0XHRyZWxhdGlvbnNoaXBUeXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogXCJFbmVteVwiLCB2YWx1ZTogXCJlbmVteVwiIH0pO1xuXHRcdHJlbGF0aW9uc2hpcFR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB0ZXh0OiBcIkZhbWlseVwiLCB2YWx1ZTogXCJmYW1pbHlcIiB9KTtcblx0XHRyZWxhdGlvbnNoaXBUeXBlU2VsZWN0LmNyZWF0ZUVsKFwib3B0aW9uXCIsIHsgdGV4dDogXCJMb3ZlclwiLCB2YWx1ZTogXCJsb3ZlclwiIH0pO1xuXHRcdHJlbGF0aW9uc2hpcFR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB0ZXh0OiBcIlJpdmFsXCIsIHZhbHVlOiBcInJpdmFsXCIgfSk7XG5cdFx0cmVsYXRpb25zaGlwVHlwZVNlbGVjdC5jcmVhdGVFbChcIm9wdGlvblwiLCB7IHRleHQ6IFwiTWVudG9yXCIsIHZhbHVlOiBcIm1lbnRvclwiIH0pO1xuXHRcdHJlbGF0aW9uc2hpcFR5cGVTZWxlY3QuY3JlYXRlRWwoXCJvcHRpb25cIiwgeyB0ZXh0OiBcIlN0dWRlbnRcIiwgdmFsdWU6IFwic3R1ZGVudFwiIH0pO1xuXHRcdHJlbGF0aW9uc2hpcFR5cGVTZWxlY3QudmFsdWUgPSByZWwucmVsYXRpb25zaGlwX3R5cGU7XG5cblx0XHRjb25zdCBkZXNjcmlwdGlvbklucHV0ID0gY29udGVudC5jcmVhdGVFbChcInRleHRhcmVhXCIsIHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtdGV4dGFyZWFcIixcblx0XHRcdGF0dHI6IHsgcm93czogXCIzXCIsIHBsYWNlaG9sZGVyOiBcIkRlc2NyaXB0aW9uXCIgfSxcblx0XHRcdHRleHQ6IHJlbC5kZXNjcmlwdGlvbiB8fCBcIlwiLFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgYmlkaXJlY3Rpb25hbENoZWNrYm94ID0gY29udGVudC5jcmVhdGVFbChcImlucHV0XCIsIHtcblx0XHRcdGF0dHI6IHsgdHlwZTogXCJjaGVja2JveFwiIH0sXG5cdFx0fSk7XG5cdFx0YmlkaXJlY3Rpb25hbENoZWNrYm94LmNoZWNrZWQgPSByZWwuYmlkaXJlY3Rpb25hbDtcblx0XHRjb25zdCBiaWRpcmVjdGlvbmFsTGFiZWwgPSBjb250ZW50LmNyZWF0ZUVsKFwibGFiZWxcIik7XG5cdFx0YmlkaXJlY3Rpb25hbExhYmVsLmFwcGVuZENoaWxkKGJpZGlyZWN0aW9uYWxDaGVja2JveCk7XG5cdFx0YmlkaXJlY3Rpb25hbExhYmVsLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiIEJpZGlyZWN0aW9uYWxcIikpO1xuXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6IFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiIH0pO1xuXHRcdGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlNhdmVcIiwgY2xzOiBcIm1vZC1jdGFcIiB9KTtcblx0XHRzYXZlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlQ2hhcmFjdGVyUmVsYXRpb25zaGlwKHJlbC5pZCwge1xuXHRcdFx0XHRcdHJlbGF0aW9uc2hpcF90eXBlOiByZWxhdGlvbnNoaXBUeXBlU2VsZWN0LnZhbHVlLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbklucHV0LnZhbHVlIHx8IFwiXCIsXG5cdFx0XHRcdFx0YmlkaXJlY3Rpb25hbDogYmlkaXJlY3Rpb25hbENoZWNrYm94LmNoZWNrZWQsXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRDaGFyYWN0ZXJEYXRhKCk7XG5cdFx0XHRcdHRoaXMucmVuZGVyQ29udGVudCgpO1xuXHRcdFx0XHRtb2RhbC5jbG9zZSgpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiUmVsYXRpb25zaGlwIHVwZGF0ZWRcIik7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFwiRmFpbGVkXCJ9YCwgNTAwMCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FuY2VsXCIgfSk7XG5cdFx0Y2FuY2VsQnRuLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5jbG9zZSgpO1xuXG5cdFx0bW9kYWwub3BlbigpO1xuXHR9XG5cblx0Ly8gTWV0aG9kIHRvIHVwZGF0ZSBjaGFyYWN0ZXIgYWZ0ZXIgZWRpdFxuXHR1cGRhdGVDaGFyYWN0ZXIoY2hhcmFjdGVyOiBDaGFyYWN0ZXIpIHtcblx0XHR0aGlzLmNoYXJhY3RlciA9IGNoYXJhY3Rlcjtcblx0XHR0aGlzLnJlbmRlckhlYWRlcigpO1xuXHRcdHRoaXMucmVuZGVyQ29udGVudCgpO1xuXHR9XG59XG5cbiIsICJpbXBvcnQgeyBJdGVtVmlldywgTm90aWNlLCBXb3Jrc3BhY2VMZWFmIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgU3RvcnlFbmdpbmVQbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcbmltcG9ydCB7XG5cdEV4dHJhY3RFbnRpdHksXG5cdEV4dHJhY3RFbnRpdHlNYXRjaCxcblx0RXh0cmFjdEVudGl0eVJlc3VsdCxcbn0gZnJvbSBcIi4uL3R5cGVzXCI7XG5cbmV4cG9ydCBjb25zdCBTVE9SWV9FTkdJTkVfRVhUUkFDVF9WSUVXX1RZUEUgPSBcInN0b3J5LWVuZ2luZS1leHRyYWN0LXZpZXdcIjtcblxuZXhwb3J0IGNsYXNzIFN0b3J5RW5naW5lRXh0cmFjdFZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG5cdHBsdWdpbjogU3RvcnlFbmdpbmVQbHVnaW47XG5cdHByaXZhdGUgcmVzdWx0OiBFeHRyYWN0RW50aXR5UmVzdWx0IHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgY29udGVudFJvb3QhOiBIVE1MRWxlbWVudDtcblx0cHJpdmF0ZSBsb2dzID0gW10gYXMgU3RvcnlFbmdpbmVQbHVnaW5bXCJleHRyYWN0TG9nc1wiXTtcblx0cHJpdmF0ZSBzdGF0dXM6IFN0b3J5RW5naW5lUGx1Z2luW1wiZXh0cmFjdFN0YXR1c1wiXSA9IFwiaWRsZVwiO1xuXHRwcml2YXRlIGFjdGl2ZVRhYjogXCJlbnRpdGllc1wiIHwgXCJwcm9ncmVzc1wiID0gXCJwcm9ncmVzc1wiO1xuXHRwcml2YXRlIGV4cGFuZGVkTG9ncyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG5cdGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogU3RvcnlFbmdpbmVQbHVnaW4pIHtcblx0XHRzdXBlcihsZWFmKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0XHR0aGlzLmxvZ3MgPSBwbHVnaW4uZXh0cmFjdExvZ3M7XG5cdFx0dGhpcy5zdGF0dXMgPSBwbHVnaW4uZXh0cmFjdFN0YXR1cztcblx0fVxuXG5cdGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIFNUT1JZX0VOR0lORV9FWFRSQUNUX1ZJRVdfVFlQRTtcblx0fVxuXG5cdGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIFwiRXh0cmFjdFwiO1xuXHR9XG5cblx0Z2V0SWNvbigpOiBzdHJpbmcge1xuXHRcdHJldHVybiBcInNlYXJjaFwiO1xuXHR9XG5cblx0YXN5bmMgb25PcGVuKCkge1xuXHRcdGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XG5cdFx0Y29udGFpbmVyLmVtcHR5KCk7XG5cdFx0Y29udGFpbmVyLmFkZENsYXNzKFwic3RvcnktZW5naW5lLWV4dHJhY3QtY29udGFpbmVyXCIpO1xuXHRcdHRoaXMuY29udGVudFJvb3QgPSBjb250YWluZXI7XG5cdFx0dGhpcy5zZXRSZXN1bHQodGhpcy5wbHVnaW4uZXh0cmFjdFJlc3VsdCk7XG5cdFx0dGhpcy5zZXRMb2dzKHRoaXMucGx1Z2luLmV4dHJhY3RMb2dzLCB0aGlzLnBsdWdpbi5leHRyYWN0U3RhdHVzKTtcblx0fVxuXG5cdHNldFJlc3VsdChyZXN1bHQ6IEV4dHJhY3RFbnRpdHlSZXN1bHQgfCBudWxsKSB7XG5cdFx0dGhpcy5yZXN1bHQgPSByZXN1bHQ7XG5cdFx0dGhpcy5yZW5kZXIoKTtcblx0fVxuXG5cdHNldExvZ3MobG9nczogdHlwZW9mIHRoaXMubG9ncywgc3RhdHVzOiB0eXBlb2YgdGhpcy5zdGF0dXMpIHtcblx0XHR0aGlzLmxvZ3MgPSBsb2dzO1xuXHRcdHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuXHRcdHRoaXMucmVuZGVyKCk7XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlcigpIHtcblx0XHRpZiAoIXRoaXMuY29udGVudFJvb3QpIHJldHVybjtcblx0XHR0aGlzLmNvbnRlbnRSb290LmVtcHR5KCk7XG5cblx0XHRpZiAodGhpcy5hY3RpdmVUYWIgPT09IFwiZW50aXRpZXNcIiAmJiB0aGlzLnN0YXR1cyA9PT0gXCJydW5uaW5nXCIpIHtcblx0XHRcdHRoaXMuYWN0aXZlVGFiID0gXCJwcm9ncmVzc1wiO1xuXHRcdH1cblxuXHRcdGNvbnN0IGhlYWRlciA9IHRoaXMuY29udGVudFJvb3QuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1oZWFkZXJcIixcblx0XHR9KTtcblx0XHRoZWFkZXIuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiRXh0cmFjdFwiIH0pO1xuXG5cdFx0Y29uc3QgaGVhZGVyTWV0YSA9IGhlYWRlci5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LW1ldGFcIixcblx0XHR9KTtcblx0XHRoZWFkZXJNZXRhLmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdHRleHQ6IGBTdGF0dXM6ICR7dGhpcy5zdGF0dXN9YCxcblx0XHR9KTtcblx0XHRpZiAodGhpcy5yZXN1bHQpIHtcblx0XHRcdGNvbnN0IGZvdW5kQ291bnQgPSB0aGlzLnJlc3VsdC5lbnRpdGllcy5maWx0ZXIoKGVudGl0eSkgPT4gZW50aXR5LmZvdW5kKVxuXHRcdFx0XHQubGVuZ3RoO1xuXHRcdFx0aGVhZGVyTWV0YS5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHRcdHRleHQ6IGBFbnRpdGllczogJHt0aGlzLnJlc3VsdC5lbnRpdGllcy5sZW5ndGh9YCxcblx0XHRcdH0pO1xuXHRcdFx0aGVhZGVyTWV0YS5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHRcdHRleHQ6IGBGb3VuZDogJHtmb3VuZENvdW50fWAsXG5cdFx0XHR9KTtcblx0XHRcdGhlYWRlck1ldGEuY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0XHR0ZXh0OiBgVGV4dCBsZW5ndGg6ICR7dGhpcy5yZXN1bHQudGV4dC5sZW5ndGh9YCxcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGNvbnN0IGhlYWRlckFjdGlvbnMgPSBoZWFkZXIuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1oZWFkZXItYWN0aW9uc1wiLFxuXHRcdH0pO1xuXHRcdGNvbnN0IGJhY2tCdXR0b24gPSBoZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcblx0XHRcdHRleHQ6IFwiQmFjayB0byBTdG9yaWVzXCIsXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtYmFja1wiLFxuXHRcdH0pO1xuXHRcdGJhY2tCdXR0b24ub25jbGljayA9ICgpID0+IHtcblx0XHRcdHRoaXMucGx1Z2luLmFjdGl2YXRlVmlldygpO1xuXHRcdH07XG5cdFx0aWYgKHRoaXMuc3RhdHVzID09PSBcInJ1bm5pbmdcIikge1xuXHRcdFx0Y29uc3QgY2FuY2VsQnV0dG9uID0gaGVhZGVyQWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdHRleHQ6IFwiQ2FuY2VsXCIsXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1jYW5jZWxcIixcblx0XHRcdH0pO1xuXHRcdFx0Y2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLmNhbmNlbEV4dHJhY3RTdHJlYW0oKTtcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0aWYgKCF0aGlzLnJlc3VsdCkge1xuXHRcdFx0dGhpcy5yZW5kZXJMb2dzKCk7XG5cdFx0XHR0aGlzLmNvbnRlbnRSb290LmNyZWF0ZUVsKFwicFwiLCB7XG5cdFx0XHRcdHRleHQ6IFwiTm8gZXh0cmFjdGlvbiByZXN1bHRzIHlldC5cIixcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWVtcHR5XCIsXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBxdWVyeUJsb2NrID0gdGhpcy5jb250ZW50Um9vdC5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LXF1ZXJ5XCIsXG5cdFx0fSk7XG5cdFx0cXVlcnlCbG9jay5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHR0ZXh0OiBcIlRleHRcIixcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1sYWJlbFwiLFxuXHRcdH0pO1xuXHRcdHF1ZXJ5QmxvY2suY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0dGV4dDogdGhpcy5yZXN1bHQudGV4dCxcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1xdWVyeS10ZXh0XCIsXG5cdFx0fSk7XG5cblx0XHRjb25zdCB0YWJzID0gdGhpcy5jb250ZW50Um9vdC5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LXRhYnNcIixcblx0XHR9KTtcblxuXHRcdGNvbnN0IGhhc0VudGl0aWVzID0gdGhpcy5yZXN1bHQuZW50aXRpZXMubGVuZ3RoID4gMDtcblx0XHRjb25zdCBlbnRpdGllc0Rpc2FibGVkID0gIWhhc0VudGl0aWVzIHx8IHRoaXMuc3RhdHVzID09PSBcInJ1bm5pbmdcIjtcblx0XHRjb25zdCBlbnRpdGllc1RhYiA9IHRhYnMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuXHRcdFx0dGV4dDogXCJFbnRpdGllcyBGb3VuZFwiLFxuXHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLWV4dHJhY3QtdGFiICR7XG5cdFx0XHRcdHRoaXMuYWN0aXZlVGFiID09PSBcImVudGl0aWVzXCIgPyBcImlzLWFjdGl2ZVwiIDogXCJcIlxuXHRcdFx0fWAsXG5cdFx0fSk7XG5cdFx0aWYgKGVudGl0aWVzRGlzYWJsZWQpIHtcblx0XHRcdGVudGl0aWVzVGFiLmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdGVudGl0aWVzVGFiLmFkZENsYXNzKFwiaXMtZGlzYWJsZWRcIik7XG5cdFx0XHRpZiAodGhpcy5hY3RpdmVUYWIgPT09IFwiZW50aXRpZXNcIikge1xuXHRcdFx0XHR0aGlzLmFjdGl2ZVRhYiA9IFwicHJvZ3Jlc3NcIjtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZW50aXRpZXNUYWIub25jbGljayA9ICgpID0+IHtcblx0XHRcdGlmIChlbnRpdGllc0Rpc2FibGVkKSByZXR1cm47XG5cdFx0XHR0aGlzLmFjdGl2ZVRhYiA9IFwiZW50aXRpZXNcIjtcblx0XHRcdHRoaXMucmVuZGVyKCk7XG5cdFx0fTtcblxuXHRcdGNvbnN0IHByb2dyZXNzVGFiID0gdGFicy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIlByb2dyZXNzXCIsXG5cdFx0XHRjbHM6IGBzdG9yeS1lbmdpbmUtZXh0cmFjdC10YWIgJHtcblx0XHRcdFx0dGhpcy5hY3RpdmVUYWIgPT09IFwicHJvZ3Jlc3NcIiA/IFwiaXMtYWN0aXZlXCIgOiBcIlwiXG5cdFx0XHR9YCxcblx0XHR9KTtcblx0XHRwcm9ncmVzc1RhYi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5hY3RpdmVUYWIgPSBcInByb2dyZXNzXCI7XG5cdFx0XHR0aGlzLnJlbmRlcigpO1xuXHRcdH07XG5cblx0XHRjb25zdCBwYW5lbHMgPSB0aGlzLmNvbnRlbnRSb290LmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtcGFuZWxzXCIsXG5cdFx0fSk7XG5cblx0XHRjb25zdCBlbnRpdGllc1BhbmVsID0gcGFuZWxzLmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IGBzdG9yeS1lbmdpbmUtZXh0cmFjdC1wYW5lbCAke1xuXHRcdFx0XHR0aGlzLmFjdGl2ZVRhYiA9PT0gXCJlbnRpdGllc1wiID8gXCJpcy1hY3RpdmVcIiA6IFwiXCJcblx0XHRcdH1gLFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgcHJvZ3Jlc3NQYW5lbCA9IHBhbmVscy5jcmVhdGVEaXYoe1xuXHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLWV4dHJhY3QtcGFuZWwgJHtcblx0XHRcdFx0dGhpcy5hY3RpdmVUYWIgPT09IFwicHJvZ3Jlc3NcIiA/IFwiaXMtYWN0aXZlXCIgOiBcIlwiXG5cdFx0XHR9YCxcblx0XHR9KTtcblxuXHRcdGNvbnN0IGFjdGlvbnMgPSB0aGlzLmNvbnRlbnRSb290LmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtYWN0aW9uc1wiLFxuXHRcdH0pO1xuXHRcdGNvbnN0IGNsZWFyQnV0dG9uID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHR0ZXh0OiBcIkNsZWFyIFJlc3VsdHNcIixcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1jbGVhclwiLFxuXHRcdH0pO1xuXHRcdGNsZWFyQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLnBsdWdpbi5leHRyYWN0UmVzdWx0ID0gbnVsbDtcblx0XHRcdHRoaXMuc2V0UmVzdWx0KG51bGwpO1xuXHRcdFx0dGhpcy5wbHVnaW4udXBkYXRlRXh0cmFjdFZpZXdzKCk7XG5cdFx0fTtcblxuXHRcdHRoaXMucmVuZGVyTG9ncyhwcm9ncmVzc1BhbmVsKTtcblxuXHRcdGlmIChoYXNFbnRpdGllcykge1xuXHRcdFx0Y29uc3QgbGlzdCA9IGVudGl0aWVzUGFuZWwuY3JlYXRlRGl2KHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWxpc3RcIixcblx0XHRcdH0pO1xuXHRcdFx0dGhpcy5yZXN1bHQuZW50aXRpZXMuZm9yRWFjaCgoZW50aXR5LCBpbmRleCkgPT4ge1xuXHRcdFx0XHR0aGlzLnJlbmRlckVudGl0eShsaXN0LCBlbnRpdHksIGluZGV4KTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbnRpdGllc1BhbmVsLmNyZWF0ZUVsKFwicFwiLCB7XG5cdFx0XHRcdHRleHQ6IFwiTm8gZW50aXRpZXMgcmV0dXJuZWQgZnJvbSBleHRyYWN0aW9uLlwiLFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtZW1wdHlcIixcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyTG9ncyhjb250YWluZXI/OiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnN0IHJvb3QgPSBjb250YWluZXIgPz8gdGhpcy5jb250ZW50Um9vdDtcblx0XHRjb25zdCBsb2dCbG9jayA9IHJvb3QuY3JlYXRlRGl2KHtcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1sb2dzXCIsXG5cdFx0fSk7XG5cdFx0bG9nQmxvY2suY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0dGV4dDogXCJQcm9ncmVzc1wiLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWxhYmVsXCIsXG5cdFx0fSk7XG5cblx0XHRpZiAoIXRoaXMubG9ncy5sZW5ndGgpIHtcblx0XHRcdGxvZ0Jsb2NrLmNyZWF0ZUVsKFwicFwiLCB7XG5cdFx0XHRcdHRleHQ6IFwiTm8gZXZlbnRzIHlldC5cIixcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWVtcHR5XCIsXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBsaXN0ID0gbG9nQmxvY2suY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWxvZy1saXN0XCIgfSk7XG5cdFx0Y29uc3QgbGFzdEluZGV4ID0gdGhpcy5sb2dzLmxlbmd0aCAtIDE7XG5cdFx0dGhpcy5sb2dzLmZvckVhY2goKGVudHJ5LCBpbmRleCkgPT4ge1xuXHRcdFx0Y29uc3QgZXZlbnRMYWJlbCA9IGVudHJ5LnBoYXNlXG5cdFx0XHRcdD8gYCR7ZW50cnkucGhhc2V9IFx1MDBCNyAke2VudHJ5LmV2ZW50VHlwZX1gXG5cdFx0XHRcdDogZW50cnkuZXZlbnRUeXBlO1xuXHRcdFx0Y29uc3QgaXRlbSA9IGxpc3QuY3JlYXRlRGl2KHtcblx0XHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLWV4dHJhY3QtbG9nLWl0ZW0gJHtcblx0XHRcdFx0XHRpbmRleCA9PT0gbGFzdEluZGV4ID8gXCJpcy1sYXRlc3RcIiA6IFwiXCJcblx0XHRcdFx0fWAsXG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IGhlYWRlciA9IGl0ZW0uY3JlYXRlRGl2KHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWxvZy1oZWFkZXJcIixcblx0XHRcdH0pO1xuXHRcdFx0aGVhZGVyLmNyZWF0ZVNwYW4oe1xuXHRcdFx0XHR0ZXh0OiBgJHtlbnRyeS50aW1lc3RhbXB9IHwgJHtldmVudExhYmVsfWAsXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1sb2ctdGl0bGVcIixcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCBsYWJlbCA9IGl0ZW0uY3JlYXRlRGl2KHtcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWxvZy1sYWJlbFwiLFxuXHRcdFx0fSk7XG5cdFx0XHRsYWJlbC5jcmVhdGVTcGFuKHsgdGV4dDogZW50cnkubWVzc2FnZSB9KTtcblx0XHRcdGNvbnN0IHRvZ2dsZSA9IGxhYmVsLmNyZWF0ZVNwYW4oe1xuXHRcdFx0XHR0ZXh0OiBpbmRleCA9PT0gbGFzdEluZGV4XG5cdFx0XHRcdFx0PyBcIi4uLlwiXG5cdFx0XHRcdFx0OiB0aGlzLmV4cGFuZGVkTG9ncy5oYXMoZW50cnkuaWQpXG5cdFx0XHRcdFx0XHQ/IFwiXHUyMjEyXCJcblx0XHRcdFx0XHRcdDogXCIrXCIsXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1sb2ctdG9nZ2xlXCIsXG5cdFx0XHR9KTtcblx0XHRcdGxhYmVsLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdGlmICh0aGlzLmV4cGFuZGVkTG9ncy5oYXMoZW50cnkuaWQpKSB7XG5cdFx0XHRcdFx0dGhpcy5leHBhbmRlZExvZ3MuZGVsZXRlKGVudHJ5LmlkKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLmV4cGFuZGVkTG9ncy5hZGQoZW50cnkuaWQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMucmVuZGVyKCk7XG5cdFx0XHR9O1xuXHRcdFx0aWYgKGluZGV4ID09PSBsYXN0SW5kZXgpIHtcblx0XHRcdFx0dG9nZ2xlLmFkZENsYXNzKFwiaXMtdHlwaW5nXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAodGhpcy5leHBhbmRlZExvZ3MuaGFzKGVudHJ5LmlkKSAmJiBlbnRyeS5kYXRhKSB7XG5cdFx0XHRcdGl0ZW0uY3JlYXRlRWwoXCJwcmVcIiwge1xuXHRcdFx0XHRcdHRleHQ6IEpTT04uc3RyaW5naWZ5KGVudHJ5LmRhdGEsIG51bGwsIDIpLFxuXHRcdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1sb2ctZGF0YVwiLFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRsaXN0LnNjcm9sbFRvcCA9IGxpc3Quc2Nyb2xsSGVpZ2h0O1xuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJFbnRpdHkoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZW50aXR5OiBFeHRyYWN0RW50aXR5LCBpbmRleDogbnVtYmVyKSB7XG5cdFx0Y29uc3QgaXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtaXRlbVwiIH0pO1xuXHRcdGNvbnN0IGhlYWRlciA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWl0ZW0taGVhZGVyXCIgfSk7XG5cdFx0aGVhZGVyLmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdHRleHQ6IGAjJHtpbmRleCArIDF9YCxcblx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1yYW5rXCIsXG5cdFx0fSk7XG5cdFx0Y29uc3Qgc3RhdHVzVGV4dCA9IGVudGl0eS5jcmVhdGVkXG5cdFx0XHQ/IFwiQ3JlYXRlZFwiXG5cdFx0XHQ6IGVudGl0eS5mb3VuZFxuXHRcdFx0XHQ/IFwiRm91bmRcIlxuXHRcdFx0XHQ6IFwiTmV3XCI7XG5cdFx0Y29uc3Qgc3RhdHVzQ2xhc3MgPSBlbnRpdHkuY3JlYXRlZFxuXHRcdFx0PyBcImlzLWNyZWF0ZWRcIlxuXHRcdFx0OiBlbnRpdHkuZm91bmRcblx0XHRcdFx0PyBcImlzLWZvdW5kXCJcblx0XHRcdFx0OiBcImlzLW5ld1wiO1xuXHRcdGhlYWRlci5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHR0ZXh0OiBzdGF0dXNUZXh0LFxuXHRcdFx0Y2xzOiBgc3RvcnktZW5naW5lLWV4dHJhY3Qtc3RhdHVzICR7c3RhdHVzQ2xhc3N9YCxcblx0XHR9KTtcblxuXHRcdGNvbnN0IHRpdGxlID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtaXRlbS10aXRsZVwiIH0pO1xuXHRcdHRpdGxlLmNyZWF0ZUVsKFwiZGl2XCIsIHtcblx0XHRcdHRleHQ6IGVudGl0eS5uYW1lLFxuXHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWVudGl0eS1uYW1lXCIsXG5cdFx0fSk7XG5cdFx0dGl0bGUuY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0dGV4dDogZW50aXR5LnR5cGUsXG5cdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtZW50aXR5LXR5cGVcIixcblx0XHR9KTtcblxuXHRcdGlmIChlbnRpdHkuc3VtbWFyeSkge1xuXHRcdFx0aXRlbS5jcmVhdGVFbChcImRpdlwiLCB7XG5cdFx0XHRcdHRleHQ6IGVudGl0eS5zdW1tYXJ5LFxuXHRcdFx0XHRjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtY29udGVudFwiLFxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKGVudGl0eS5tYXRjaCkge1xuXHRcdFx0aXRlbS5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlck1hdGNoKFwiTWF0Y2hcIiwgZW50aXR5Lm1hdGNoKSk7XG5cdFx0fVxuXG5cdFx0aWYgKGVudGl0eS5jYW5kaWRhdGVzICYmIGVudGl0eS5jYW5kaWRhdGVzLmxlbmd0aCkge1xuXHRcdFx0Y29uc3QgbGlzdCA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWNhbmRpZGF0ZXNcIiB9KTtcblx0XHRcdGxpc3QuY3JlYXRlRWwoXCJkaXZcIiwge1xuXHRcdFx0XHR0ZXh0OiBcIkNhbmRpZGF0ZXNcIixcblx0XHRcdFx0Y2xzOiBcInN0b3J5LWVuZ2luZS1leHRyYWN0LWxhYmVsXCIsXG5cdFx0XHR9KTtcblx0XHRcdGVudGl0eS5jYW5kaWRhdGVzLmZvckVhY2goKGNhbmRpZGF0ZSkgPT4ge1xuXHRcdFx0XHRsaXN0LmFwcGVuZENoaWxkKHRoaXMucmVuZGVyTWF0Y2goXCJcIiwgY2FuZGlkYXRlKSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoIWVudGl0eS5jcmVhdGVkKSB7XG5cdFx0XHRjb25zdCBhY3Rpb25zID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6IFwic3RvcnktZW5naW5lLWV4dHJhY3QtYWN0aW9uc1wiIH0pO1xuXHRcdFx0Y29uc3QgYWN0aW9uQnV0dG9uID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG5cdFx0XHRcdHRleHQ6IGVudGl0eS5mb3VuZCA/IFwiVXBkYXRlIEVudGl0eVwiIDogXCJDcmVhdGUgRW50aXR5XCIsXG5cdFx0XHRcdGNsczogXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1hY3Rpb25cIixcblx0XHRcdH0pO1xuXHRcdFx0YWN0aW9uQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGFjdGlvbkJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0aWYgKGVudGl0eS5mb3VuZCkge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy51cGRhdGVFbnRpdHkoZW50aXR5KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5jcmVhdGVFbnRpdHkoZW50aXR5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdFx0YWN0aW9uQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJNYXRjaChsYWJlbDogc3RyaW5nLCBtYXRjaDogRXh0cmFjdEVudGl0eU1hdGNoKTogSFRNTEVsZW1lbnQge1xuXHRcdGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdHdyYXBwZXIuY2xhc3NOYW1lID0gXCJzdG9yeS1lbmdpbmUtZXh0cmFjdC1tYXRjaFwiO1xuXHRcdGNvbnN0IHBhcnRzID0gW107XG5cdFx0aWYgKGxhYmVsKSB7XG5cdFx0XHRwYXJ0cy5wdXNoKGxhYmVsKTtcblx0XHR9XG5cdFx0cGFydHMucHVzaChgJHttYXRjaC5zb3VyY2VfdHlwZX06JHttYXRjaC5zb3VyY2VfaWR9YCk7XG5cdFx0aWYgKG1hdGNoLmVudGl0eV9uYW1lKSB7XG5cdFx0XHRwYXJ0cy5wdXNoKG1hdGNoLmVudGl0eV9uYW1lKTtcblx0XHR9XG5cdFx0cGFydHMucHVzaChgc2ltICR7bWF0Y2guc2ltaWxhcml0eS50b0ZpeGVkKDMpfWApO1xuXHRcdGlmIChtYXRjaC5yZWFzb24pIHtcblx0XHRcdHBhcnRzLnB1c2gobWF0Y2gucmVhc29uKTtcblx0XHR9XG5cdFx0d3JhcHBlci50ZXh0Q29udGVudCA9IHBhcnRzLmpvaW4oXCIgXHUwMEI3IFwiKTtcblx0XHRyZXR1cm4gd3JhcHBlcjtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgY3JlYXRlRW50aXR5KGVudGl0eTogRXh0cmFjdEVudGl0eSkge1xuXHRcdGlmICghdGhpcy5yZXN1bHQ/LndvcmxkX2lkKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiV29ybGQgSUQgbWlzc2luZy4gU2VsZWN0IGEgc3Rvcnkgb3Igd29ybGQgZmlyc3QuXCIsIDQwMDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGRlc2NyaXB0aW9uID0gZW50aXR5LnN1bW1hcnk/LnRyaW0oKSB8fCBlbnRpdHkubmFtZTtcblx0XHRsZXQgY3JlYXRlZElkID0gXCJcIjtcblxuXHRcdHN3aXRjaCAoZW50aXR5LnR5cGUpIHtcblx0XHRcdGNhc2UgXCJjaGFyYWN0ZXJcIjoge1xuXHRcdFx0XHRjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUNoYXJhY3Rlcihcblx0XHRcdFx0XHR0aGlzLnJlc3VsdC53b3JsZF9pZCxcblx0XHRcdFx0XHR7IG5hbWU6IGVudGl0eS5uYW1lLCBkZXNjcmlwdGlvbiB9XG5cdFx0XHRcdCk7XG5cdFx0XHRcdGNyZWF0ZWRJZCA9IGNyZWF0ZWQuaWQ7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0Y2FzZSBcImxvY2F0aW9uXCI6IHtcblx0XHRcdFx0Y29uc3QgY3JlYXRlZCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVMb2NhdGlvbihcblx0XHRcdFx0XHR0aGlzLnJlc3VsdC53b3JsZF9pZCxcblx0XHRcdFx0XHR7IG5hbWU6IGVudGl0eS5uYW1lLCBkZXNjcmlwdGlvbiB9XG5cdFx0XHRcdCk7XG5cdFx0XHRcdGNyZWF0ZWRJZCA9IGNyZWF0ZWQuaWQ7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0Y2FzZSBcImFydGVmYWN0XCI6IHtcblx0XHRcdFx0Y29uc3QgY3JlYXRlZCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwaUNsaWVudC5jcmVhdGVBcnRpZmFjdChcblx0XHRcdFx0XHR0aGlzLnJlc3VsdC53b3JsZF9pZCxcblx0XHRcdFx0XHR7IG5hbWU6IGVudGl0eS5uYW1lLCBkZXNjcmlwdGlvbiB9XG5cdFx0XHRcdCk7XG5cdFx0XHRcdGNyZWF0ZWRJZCA9IGNyZWF0ZWQuaWQ7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0Y2FzZSBcImZhY3Rpb25cIjoge1xuXHRcdFx0XHRjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LmNyZWF0ZUZhY3Rpb24oXG5cdFx0XHRcdFx0dGhpcy5yZXN1bHQud29ybGRfaWQsXG5cdFx0XHRcdFx0eyBuYW1lOiBlbnRpdHkubmFtZSwgZGVzY3JpcHRpb24gfVxuXHRcdFx0XHQpO1xuXHRcdFx0XHRjcmVhdGVkSWQgPSBjcmVhdGVkLmlkO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGNhc2UgXCJldmVudFwiOiB7XG5cdFx0XHRcdGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQuY3JlYXRlRXZlbnQoXG5cdFx0XHRcdFx0dGhpcy5yZXN1bHQud29ybGRfaWQsXG5cdFx0XHRcdFx0eyBuYW1lOiBlbnRpdHkubmFtZSwgZGVzY3JpcHRpb24gfVxuXHRcdFx0XHQpO1xuXHRcdFx0XHRjcmVhdGVkSWQgPSBjcmVhdGVkLmlkO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdG5ldyBOb3RpY2UoYFVuc3VwcG9ydGVkIHR5cGU6ICR7ZW50aXR5LnR5cGV9YCwgNDAwMCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRlbnRpdHkuZm91bmQgPSBmYWxzZTtcblx0XHRlbnRpdHkuY3JlYXRlZCA9IHRydWU7XG5cdFx0ZW50aXR5Lm1hdGNoID0ge1xuXHRcdFx0c291cmNlX3R5cGU6IGVudGl0eS50eXBlLFxuXHRcdFx0c291cmNlX2lkOiBjcmVhdGVkSWQsXG5cdFx0XHRlbnRpdHlfbmFtZTogZW50aXR5Lm5hbWUsXG5cdFx0XHRzaW1pbGFyaXR5OiAxLFxuXHRcdFx0cmVhc29uOiBcIkNyZWF0ZWQgZnJvbSBleHRyYWN0XCIsXG5cdFx0fTtcblx0XHR0aGlzLnJlbmRlcigpO1xuXHRcdG5ldyBOb3RpY2UoYENyZWF0ZWQgJHtlbnRpdHkudHlwZX06ICR7ZW50aXR5Lm5hbWV9YCwgMzAwMCk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHVwZGF0ZUVudGl0eShlbnRpdHk6IEV4dHJhY3RFbnRpdHkpIHtcblx0XHRpZiAoIWVudGl0eS5tYXRjaD8uc291cmNlX2lkKSB7XG5cdFx0XHRuZXcgTm90aWNlKFwiTm8gbWF0Y2ggYXZhaWxhYmxlIHRvIHVwZGF0ZS5cIiwgNDAwMCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgZGVzY3JpcHRpb24gPSBlbnRpdHkuc3VtbWFyeSA/PyBcIlwiO1xuXHRcdHN3aXRjaCAoZW50aXR5LnR5cGUpIHtcblx0XHRcdGNhc2UgXCJjaGFyYWN0ZXJcIjpcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUNoYXJhY3RlcihlbnRpdHkubWF0Y2guc291cmNlX2lkLCB7XG5cdFx0XHRcdFx0bmFtZTogZW50aXR5Lm5hbWUsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb24sXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgXCJsb2NhdGlvblwiOlxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcGlDbGllbnQudXBkYXRlTG9jYXRpb24oZW50aXR5Lm1hdGNoLnNvdXJjZV9pZCwge1xuXHRcdFx0XHRcdG5hbWU6IGVudGl0eS5uYW1lLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiYXJ0ZWZhY3RcIjpcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUFydGlmYWN0KGVudGl0eS5tYXRjaC5zb3VyY2VfaWQsIHtcblx0XHRcdFx0XHRuYW1lOiBlbnRpdHkubmFtZSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbixcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcImZhY3Rpb25cIjpcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUZhY3Rpb24oZW50aXR5Lm1hdGNoLnNvdXJjZV9pZCwge1xuXHRcdFx0XHRcdG5hbWU6IGVudGl0eS5uYW1lLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIFwiZXZlbnRcIjpcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBpQ2xpZW50LnVwZGF0ZUV2ZW50KGVudGl0eS5tYXRjaC5zb3VyY2VfaWQsIHtcblx0XHRcdFx0XHRuYW1lOiBlbnRpdHkubmFtZSxcblx0XHRcdFx0XHRkZXNjcmlwdGlvbixcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0bmV3IE5vdGljZShgVW5zdXBwb3J0ZWQgdHlwZTogJHtlbnRpdHkudHlwZX1gLCA0MDAwKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdG5ldyBOb3RpY2UoYFVwZGF0ZWQgJHtlbnRpdHkudHlwZX06ICR7ZW50aXR5Lm5hbWV9YCwgMzAwMCk7XG5cdH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsb0JBQStCOzs7QUNJL0IsSUFBTSxvQkFBTixNQUF3QjtBQUFBLEVBQXhCO0FBQ0MsU0FBUSxjQUFjLG9CQUFJLElBQWdCO0FBQUE7QUFBQSxFQUUxQyxVQUFVLFlBQW9DO0FBQzdDLFNBQUssWUFBWSxJQUFJLFVBQVU7QUFDL0IsV0FBTyxNQUFNO0FBQ1osV0FBSyxZQUFZLE9BQU8sVUFBVTtBQUFBLElBQ25DO0FBQUEsRUFDRDtBQUFBLEVBRUEsTUFBTSxPQUFPLFNBQTJDO0FBQ3ZELGVBQVcsY0FBYyxLQUFLLGFBQWE7QUFDMUMsVUFBSTtBQUNILGNBQU0sV0FBVyxPQUFPO0FBQUEsTUFDekIsU0FBUyxLQUFLO0FBQ2IsZ0JBQVEsTUFBTSwrQkFBK0IsR0FBRztBQUFBLE1BQ2pEO0FBQUEsSUFDRDtBQUFBLEVBQ0Q7QUFDRDtBQUVPLElBQU0sb0JBQW9CLElBQUksa0JBQWtCOzs7QUNVaEQsSUFBTSxvQkFBTixNQUF3QjtBQUFBLEVBSTlCLFlBQ1MsUUFD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Z0JBQWdCO0FBQUEsRUFDaEIsTUFBTTtBQUFBLEVBQ04sWUFBWTtBQUFBLEVBQ1osT0FBTztBQUFBLEVBQ1AsV0FBVztBQUFBLEVBQ1gsV0FBVztBQUFBLEVBQ1gsWUFBWTtBQUFBLEVBQ1osV0FBVztBQUFBLEVBQ1gsT0FBTztBQUFBLEVBQ1AsZ0JBQWdCO0FBQUEsRUFDaEIsVUFBVTtBQUFBLEVBQ1YsU0FBUztBQUFBLEVBQ1QsTUFBTTtBQUFBLEVBQ04sVUFBVTtBQUFBLEVBQ1YsVUFBVTtBQUFBLEVBQ1YsZUFBZTtBQUFBLEVBQ2YsVUFBVTtBQUFBLEVBQ1YsV0FBVztBQUFBLEVBQ1gsVUFBVTtBQUFBLEVBQ1YsV0FBVztBQUFBLEVBQ1gsYUFBYTtBQUFBLEVBQ2IsZ0JBQWdCO0FBQUEsRUFDaEIsWUFBWTtBQUFBLEVBQ1osWUFBWTtBQUFBLEVBQ1osU0FBUztBQUFBLEVBQ1QsWUFBWTtBQUFBLEVBQ1osY0FBYztBQUFBLEVBQ2QsZUFBZTtBQUFBLEVBQ2YsZUFBZTtBQUFBLEVBQ2YsZUFBZTtBQUFBLEVBQ2YsZUFBZTtBQUFBLEVBQ2YsWUFBWTtBQUFBLEVBQ1osVUFBVTtBQUFBLEVBQ1YsYUFBYTtBQUFBLEVBQ2IsU0FBUztBQUFBLEVBQ1QsU0FBUztBQUFBLEVBQ1QsWUFBWTtBQUFBLEVBQ1osV0FBVztBQUFBLEVBQ1gsYUFBYTtBQUFBLEVBQ2IsYUFBYTtBQUFBLEVBQ2IsU0FBUztBQUFBLEVBQ1QsV0FBVztBQUFBLEVBQ1gsWUFBWTtBQUFBLEVBQ1osTUFBTTtBQUFBLEVBQ04sV0FBVztBQUFBLEVBQ1gsTUFBTTtBQUFBLEVBQ04sT0FBTztBQUFBLEVBQ1AsYUFBYTtBQUFBLEVBQ2IsTUFBTTtBQUFBLEVBQ04sVUFBVTtBQUFBLEVBQ1YsU0FBUztBQUFBLEVBQ1QsV0FBVztBQUFBLEVBQ1gsUUFBUTtBQUFBLEVBQ1IsT0FBTztBQUFBLEVBQ1AsT0FBTztBQUFBLEVBQ1AsVUFBVTtBQUFBLEVBQ1YsZUFBZTtBQUFBLEVBQ2YsV0FBVztBQUFBLEVBQ1gsY0FBYztBQUFBLEVBQ2QsV0FBVztBQUFBLEVBQ1gsWUFBWTtBQUFBLEVBQ1osV0FBVztBQUFBLEVBQ1gsc0JBQXNCO0FBQUEsRUFDdEIsV0FBVztBQUFBLEVBQ1gsWUFBWTtBQUFBLEVBQ1osV0FBVztBQUFBLEVBQ1gsV0FBVztBQUFBLEVBQ1gsYUFBYTtBQUFBLEVBQ2IsZUFBZTtBQUFBLEVBQ2YsY0FBYztBQUFBLEVBQ2QsZ0JBQWdCO0FBQUEsRUFDaEIsZ0JBQWdCO0FBQUEsRUFDaEIsZ0JBQWdCO0FBQUEsRUFDaEIsYUFBYTtBQUFBLEVBQ2IsTUFBTTtBQUFBLEVBQ04sV0FBVztBQUFBLEVBQ1gsT0FBTztBQUFBLEVBQ1AsU0FBUztBQUFBLEVBQ1QsUUFBUTtBQUFBLEVBQ1Isa0JBQWtCO0FBQUEsRUFDbEIsWUFBWTtBQUFBLEVBQ1osY0FBYztBQUFBLEVBQ2QsY0FBYztBQUFBLEVBQ2QsZ0JBQWdCO0FBQUEsRUFDaEIsaUJBQWlCO0FBQUEsRUFDakIsbUJBQW1CO0FBQUEsRUFDbkIsaUJBQWlCO0FBQUEsRUFDakIsaUJBQWlCO0FBQUEsRUFDakIsY0FBYztBQUFBLEVBQ2QsV0FBVztBQUFBLEVBQ1gsV0FBVztBQUFBLEVBQ1gsVUFBVTtBQUFBLEVBQ1YsYUFBYTtBQUFBLEVBQ2IsTUFBTTtBQUFBLEVBQ04sU0FBUztBQUFBLEVBQ1QsT0FBTztBQUFBLEVBQ1AsV0FBVztBQUFBLEVBQ1gsUUFBUTtBQUFBLEVBQ1IsV0FBVztBQUFBLEVBQ1gsUUFBUTtBQUFBLEVBQ1IsZUFBZTtBQUFBLEVBQ2YsV0FBVztBQUFBLEVBQ1gsZUFBZTtBQUFBLEVBQ2YsZUFBZTtBQUFBLEVBQ2YsWUFBWTtBQUFBLEVBQ1osV0FBVztBQUFBLEVBQ1gsTUFBTTtBQUFBLEVBQ04sTUFBTTtBQUFBLEVBQ04sTUFBTTtBQUFBLEVBQ04sWUFBWTtBQUFBLEVBQ1osUUFBUTtBQUFBLEVBQ1IsZUFBZTtBQUFBLEVBQ2YsS0FBSztBQUFBLEVBQ0wsV0FBVztBQUFBLEVBQ1gsV0FBVztBQUFBLEVBQ1gsYUFBYTtBQUFBLEVBQ2IsUUFBUTtBQUFBLEVBQ1IsWUFBWTtBQUFBLEVBQ1osVUFBVTtBQUFBLEVBQ1YsVUFBVTtBQUFBLEVBQ1YsUUFBUTtBQUFBLEVBQ1IsUUFBUTtBQUFBLEVBQ1IsU0FBUztBQUFBLEVBQ1QsV0FBVztBQUFBLEVBQ1gsV0FBVztBQUFBLEVBQ1gsV0FBVztBQUFBLEVBQ1gsTUFBTTtBQUFBLEVBQ04sYUFBYTtBQUFBLEVBQ2IsV0FBVztBQUFBLEVBQ1gsS0FBSztBQUFBLEVBQ0wsTUFBTTtBQUFBLEVBQ04sU0FBUztBQUFBLEVBQ1QsUUFBUTtBQUFBLEVBQ1IsV0FBVztBQUFBLEVBQ1gsUUFBUTtBQUFBLEVBQ1IsT0FBTztBQUFBLEVBQ1AsT0FBTztBQUFBLEVBQ1AsWUFBWTtBQUFBLEVBQ1osUUFBUTtBQUFBLEVBQ1IsYUFBYTtBQUNmO0FBRUEsZUFBTyxPQUFPLE9BQU87QUFBQSxFQUNuQixLQUFLLFVBQVU7QUFDYixXQUFPLE9BQU8sT0FBTyxJQUFJLEtBQUssZUFBYSxNQUFNLFFBQVE7QUFBQSxFQUMzRDtBQUFBLEVBQ0EsY0FBYztBQUNaLFdBQU8sS0FBSyxJQUFJLEVBQUUsWUFBWTtBQUFBLEVBQ2hDO0FBQUEsRUFDQSxLQUFLO0FBQUE7QUFBQSxFQUNMLFdBQVc7QUFBQSxFQUNYLFlBQVk7QUFBQSxFQUNaLFdBQVc7QUFBQSxFQUNYLFdBQVc7QUFBQSxFQUNYLFVBQVU7QUFDWixDQUFDO0FBRUQsU0FBUyxrQkFBa0I7QUFDekIsU0FBTyxLQUFLLElBQUksRUFBRSxVQUFVO0FBQzlCO0FBRUEsU0FBUyxtQkFBbUI7QUFDMUIsU0FBTyxLQUFLLElBQUksRUFBRSxXQUFXO0FBQy9CO0FBRUEsU0FBUyxrQkFBa0I7QUFDekIsU0FBTyxXQUFXLElBQUksRUFBRSxVQUFVO0FBQ3BDO0FBRUEsU0FBUyxrQkFBa0I7QUFDekIsU0FBTyxLQUFLLElBQUksRUFBRSxVQUFVO0FBQzlCO0FBRWUsU0FBUixNQUF1QkMsU0FBUTtBQUNwQyxNQUFJLEdBQUc7QUFDUCxFQUFBQSxXQUFVQSxVQUFTLElBQUksS0FBSyxFQUFFLFlBQVk7QUFDMUMsVUFBUSxJQUFJLE1BQU0sS0FBS0EsT0FBTSxNQUFNLElBQUksRUFBRSxDQUFDLEVBQUUsUUFBUSxJQUFJLFNBQVMsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLE1BQU0sSUFBSSxLQUFLLENBQUMsSUFDdEYsTUFBTSxJQUFJLElBQUksSUFBSyxLQUFLLElBQUksS0FBUSxLQUFLLElBQUksS0FBUSxLQUFLLElBQUksS0FBUSxJQUFJLE1BQVMsSUFBSSxPQUFRLElBQU0sSUFBSSxJQUFNLENBQUMsSUFDaEgsTUFBTSxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQU0sS0FBSyxLQUFLLEtBQU0sS0FBSyxJQUFJLE1BQU8sSUFBSSxPQUFRLEdBQUksSUFDL0UsTUFBTSxJQUFJLEtBQU0sS0FBSyxLQUFLLEtBQVEsS0FBSyxJQUFJLEtBQVEsS0FBSyxJQUFJLEtBQVEsS0FBSyxJQUFJLEtBQVEsS0FBSyxJQUFJLEtBQVEsSUFBSSxPQUFVLElBQUksT0FBUSxJQUFNLElBQUksTUFBUSxHQUFJLElBQ3RKLFNBQ0MsSUFBSSxhQUFhLEtBQUtBLE9BQU0sS0FBSyxJQUFJLElBQUksRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxLQUM1RCxJQUFJLGFBQWEsS0FBS0EsT0FBTSxLQUFLLElBQUksSUFBSSxFQUFFLENBQUMsSUFBSSxNQUFNLEtBQUssRUFBRSxDQUFDLElBQUksTUFBTSxLQUFLLEVBQUUsQ0FBQyxJQUFJLE1BQU0sS0FBSyxDQUFDLEtBQ2hHLElBQUksY0FBYyxLQUFLQSxPQUFNLEtBQUssS0FBSyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxLQUM3RCxJQUFJLGNBQWMsS0FBS0EsT0FBTSxLQUFLLEtBQUssRUFBRSxDQUFDLElBQUksTUFBTSxLQUFLLEVBQUUsQ0FBQyxJQUFJLE1BQU0sS0FBSyxFQUFFLENBQUMsSUFBSSxNQUFNLEtBQUssRUFBRSxDQUFDLENBQUMsS0FDakcsSUFBSSxhQUFhLEtBQUtBLE9B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QUFDVix1QkFBVztBQUNYLDJCQUFlO0FBQ2Y7QUFBQSxVQUNEO0FBRUEsY0FBSSxLQUFLLFdBQVcsUUFBUSxHQUFHO0FBQzlCLDJCQUFlLEtBQUssUUFBUSxVQUFVLEVBQUUsRUFBRSxLQUFLO0FBQy9DO0FBQUEsVUFDRDtBQUVBLGNBQUksS0FBSyxXQUFXLE9BQU8sR0FBRztBQUM3QixzQkFBVSxLQUFLLEtBQUssUUFBUSxTQUFTLEVBQUUsRUFBRSxLQUFLLENBQUM7QUFBQSxVQUNoRDtBQUFBLFFBQ0Q7QUFBQSxNQUNEO0FBRUEsV0FBSyx5QkFBeUI7QUFDOUIsVUFBSSxLQUFLLGtCQUFrQixXQUFXO0FBQ3JDLGFBQUssZ0JBQWdCO0FBQUEsTUFDdEI7QUFBQSxJQUNELFNBQVMsS0FBSztBQUNiLFVBQUksZUFBZSxnQkFBZ0IsSUFBSSxTQUFTLGNBQWM7QUFDN0Q7QUFBQSxNQUNEO0FBQ0EsWUFBTSxlQUNMLGVBQWUsUUFBUSxJQUFJLFVBQVU7QUFDdEMsV0FBSyxnQkFBZ0I7QUFDckIsV0FBSyxpQkFBaUI7QUFBQSxRQUNyQixNQUFNO0FBQUEsUUFDTixTQUFTO0FBQUEsTUFDVixDQUFDO0FBQ0QsVUFBSSx5QkFBTyxVQUFVLFlBQVksSUFBSSxHQUFJO0FBQ3pDLFdBQUssbUJBQW1CO0FBQUEsSUFDekI7QUFBQSxFQUNEO0FBQUEsRUFFQSxlQUFlO0FBQ2QsVUFBTSxVQUFXLEtBQUssSUFBWTtBQUNsQyxRQUFJLFNBQVM7QUFDWixjQUFRLEtBQUs7QUFDYixpQkFBVyxNQUFNO0FBQ2hCLGdCQUFRLFlBQVksS0FBSyxTQUFTLEVBQUU7QUFBQSxNQUNyQyxHQUFHLEdBQUc7QUFBQSxJQUNQO0FBQUEsRUFDRDtBQUNEOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiaWQiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJ0aXRsZSIsICJzZWxlY3Rpb24iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAidHlwZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAicHJvc2VDb250ZW50IiwgImdvYWwiLCAidGltZVJlZiIsICJpbnRlbnQiLCAib3V0Y29tZSIsICJ0eXBlIiwgInBhcnRzIiwgImltcG9ydF9vYnNpZGlhbiIsICJzY2VuZXNGb2xkZXJQYXRoIiwgImJlYXRzRm9sZGVyUGF0aCIsICJpZCIsICJtYXAiLCAiYWxsU2NlbmVzIiwgInJvb3QiLCAidXBkYXRlZENvbnRlbnQiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImxlZnQiLCAicmlnaHQiLCAiY2VudGVyIiwgIm1pbiIsICJtYXgiLCAia2V5IiwgInN0YXJ0IiwgInRpY2tzIiwgIm51bWJlciIsICJ0aWNrRm9ybWF0IiwgInRyYW5zZm9ybSIsICJheGlzIiwgImZvcm1hdCIsICJzZWxlY3Rpb24iLCAiY29weSIsICJ0eXBlIiwgImRvY3VtZW50IiwgImRhdHVtIiwgInNlbGVjdGlvbiIsICJhc2NlbmRpbmciLCAiY3JlYXRlIiwgImNyZWF0ZSIsICJwYXJzZVR5cGVuYW1lcyIsICJ0eXBlIiwgIndpbmRvdyIsICJkaXNwYXRjaF9kZWZhdWx0IiwgImRpc3BhdGNoX2RlZmF1bHQiLCAic2VsZWN0X2RlZmF1bHQiLCAiZm9ybWF0IiwgIm1pbiIsICJtYXgiLCAiY29uc3RhbnRfZGVmYXVsdCIsICJjb25zdGFudF9kZWZhdWx0IiwgImNvbG9yIiwgInJnYiIsICJzdGFydCIsICJ6ZXJvIiwgImkiLCAiY29uc3RhbnRfZGVmYXVsdCIsICJub3ciLCAiaWQiLCAiZ2V0IiwgInNldCIsICJzdGFydCIsICJlbXB0eSIsICJpbnRlcnJ1cHRfZGVmYXVsdCIsICJpZCIsICJzZXQiLCAiZ2V0IiwgInRyYW5zaXRpb24iLCAiYXR0clJlbW92ZSIsICJhdHRyUmVtb3ZlTlMiLCAiYXR0ckNvbnN0YW50IiwgImF0dHJDb25zdGFudE5TIiwgImF0dHJGdW5jdGlvbiIsICJhdHRyRnVuY3Rpb25OUyIsICJhdHRyX2RlZmF1bHQiLCAiaWQiLCAiZ2V0IiwgImlkIiwgInNldCIsICJnZXQiLCAiaWQiLCAic2V0IiwgImdldCIsICJpZCIsICJzZXQiLCAiZmlsdGVyX2RlZmF1bHQiLCAibWVyZ2VfZGVmYXVsdCIsICJ0cmFuc2l0aW9uIiwgImlkIiwgInNldCIsICJvbl9kZWZhdWx0IiwgImdldCIsICJpZCIsICJyZW1vdmVfZGVmYXVsdCIsICJzZWxlY3RfZGVmYXVsdCIsICJpZCIsICJnZXQiLCAic2VsZWN0QWxsX2RlZmF1bHQiLCAiaWQiLCAiY2hpbGRyZW4iLCAiaW5oZXJpdCIsICJnZXQiLCAiU2VsZWN0aW9uIiwgInNlbGVjdGlvbl9kZWZhdWx0IiwgInN0eWxlUmVtb3ZlIiwgInN0eWxlQ29uc3RhbnQiLCAic3R5bGVGdW5jdGlvbiIsICJpZCIsICJyZW1vdmUiLCAic2V0IiwgInN0eWxlX2RlZmF1bHQiLCAidGV4dENvbnN0YW50IiwgInRleHRGdW5jdGlvbiIsICJ0ZXh0X2RlZmF1bHQiLCAiaW5oZXJpdCIsICJnZXQiLCAiaWQiLCAic2V0IiwgImlkIiwgInNlbGVjdF9kZWZhdWx0IiwgInNlbGVjdEFsbF9kZWZhdWx0IiwgImZpbHRlcl9kZWZhdWx0IiwgIm1lcmdlX2RlZmF1bHQiLCAic2VsZWN0aW9uX2RlZmF1bHQiLCAib25fZGVmYXVsdCIsICJhdHRyX2RlZmF1bHQiLCAic3R5bGVfZGVmYXVsdCIsICJ0ZXh0X2RlZmF1bHQiLCAicmVtb3ZlX2RlZmF1bHQiLCAiaWQiLCAidHJhbnNpdGlvbl9kZWZhdWx0IiwgImludGVycnVwdF9kZWZhdWx0IiwgInRyYW5zaXRpb25fZGVmYXVsdCIsICJudW1iZXIyIiwgImlkZW50aXR5X2RlZmF1bHQiLCAibG9jYWxlIiwgImlkZW50aXR5X2RlZmF1bHQiLCAiemVybyIsICJ0eXBlIiwgImZvcm1hdCIsICJmb3JtYXRQcmVmaXgiLCAidmFsdWUiLCAibWF4IiwgIm51bWJlciIsICJpZGVudGl0eSIsICJpIiwgInRyYW5zZm9ybSIsICJudW1iZXIiLCAic3RhcnQiLCAic3RhcnQiLCAibGluZWFyIiwgImlkZW50aXR5IiwgInNlbGVjdF9kZWZhdWx0IiwgImxpbmVhciIsICJpbXBvcnRfb2JzaWRpYW4iLCAidHlwZSIsICJidXR0b25Db250YWluZXIiLCAidGV4dEJ0biIsICJpbWFnZUJ0biIsICJiZWF0Q29udGVudHMiLCAiY2hpbGRyZW4iLCAiX2EiLCAidHlwZSIsICJ1bml0IiwgImwiLCAiY2hhcmFjdGVyIiwgImltcG9ydF9vYnNpZGlhbiIsICJyb290IiwgInNlbGVjdGlvbiJdCn0K
